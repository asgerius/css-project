[{"tags": ["c", "encryption", "reverse-engineering"], "comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1452123095, "post_id": 34644804, "comment_id": 57035523, "body": "Is <code>dir</code> a <code>struct</code> or something else? C is not C++ and does not have <code>std::string</code> objects."}, {"owner": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "reply_to_user": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1452123192, "post_id": 34644804, "comment_id": 57035556, "body": "I have edited the code."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "edited": false, "score": 0, "creation_date": 1452123595, "post_id": 34644860, "comment_id": 57035694, "body": "Even if I lose the <code>.</code> and <code>&#47; </code> characters.. is there a way ?"}], "tags": [], "owner": {"reputation": 20646, "user_id": 22437, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/H4s3Z.jpg?s=128&g=1", "display_name": "Dour High Arch", "link": "https://stackoverflow.com/users/22437/dour-high-arch"}, "is_accepted": false, "score": 4, "last_activity_date": 1452127273, "last_edit_date": 1452127273, "creation_date": 1452123137, "answer_id": 34644860, "question_id": 34644804, "link": "https://stackoverflow.com/questions/34644804/reversing-number-created-based-on-string/34644860#34644860", "title": "Reversing number created based on string", "body": "<p>You cannot reverse this function because it is lossy; it has fewer output bits than input bits, so inevitably multiple inputs will return the same output. For example, it ignores <code>.</code> and <code>/</code>, so the inputs <code>ab</code>, <code>a/b</code>, and <code>a.b</code> will be the same.</p>\n\n<p>Even if you ignore <code>.</code> and <code>/</code> there is no way; you are converting a string to an integer; there are waaaaaay more strings than integers, so inevitably multiple strings will result in the same integer.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1452124912, "creation_date": 1452124912, "answer_id": 34645160, "question_id": 34644804, "link": "https://stackoverflow.com/questions/34644804/reversing-number-created-based-on-string/34645160#34645160", "title": "Reversing number created based on string", "body": "<blockquote>\n  <p>Is there a way to retrieve the original string giving only the output number?</p>\n</blockquote>\n\n<p>In general: No.</p>\n\n<hr>\n\n<p>Note that </p>\n\n<pre><code>EDX = EDI * 32;\nEDX = EDX + EDI;\n// same as \nEDX = EDI *33'\n</code></pre>\n\n<p>Consider the 2 strings <code>A</code> and <code>B</code> with length 2.</p>\n\n<pre><code>The `EDI` generated are\nEDI(A) = 33*A[0] + A[1] + constant\nEDI(B) = 33*B[0] + B[1] + constant\n\nwith `A[0] == 2, A[1] ==  3` we get `33*2 +  3 + constant` or `69 + constant`\nwith `B[0] == 1, B[1] == 36` we get `33*1 + 36 + constant` or `69 + constant`\n</code></pre>\n\n<p>So with an <code>EDI</code> of <code>69 + constant</code> we can not distinguish between the 2 string originals (or many other candidates).</p>\n\n<hr>\n\n<p>Another way to look at it is we assume only <code>A-Z</code> was used: then with 7 or more alpha characters, there are more than <code>pow(26,7) or 8,031,810,176</code> combinations and an <code>int</code> (assume 32-bit) has at best <code>4,294,967,296</code> combinations.  So there is no way to distinguish all 7 long strings with as 32-bit <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "edited": false, "score": 0, "creation_date": 1452128262, "post_id": 34645171, "comment_id": 57036977, "body": "Can you elaborate more the steps you described? I can&#39;t understand why you are doing <code>ch = VAL % 33</code> and after <code>ch = n * 33</code>. <code>N</code> is the variable used in the for loop, right?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "edited": false, "score": 0, "creation_date": 1452128389, "post_id": 34645171, "comment_id": 57037018, "body": "No, n is a natural number chosen in a way to get ch from 0-32 to the target range, i.e. 97-129 if you are looking for lowercase letters. So, if VAL % 33 results in 10, choose n = 3 to boost it to 10+3*33=109."}, {"owner": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "edited": false, "score": 0, "creation_date": 1452128585, "post_id": 34645171, "comment_id": 57037067, "body": "Why choose n = 3 ? I don&#39;t understand the logic you are using. Why not 4, or 5 ?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "edited": false, "score": 0, "creation_date": 1452128711, "post_id": 34645171, "comment_id": 57037104, "body": "because 10+4*33=142, which is outside our expected scope of 97-129. Remember, we assume that dir[i] is always a lowercase-letter, which are all included in the range 97-129"}, {"owner": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "edited": false, "score": 0, "creation_date": 1458931323, "post_id": 34645171, "comment_id": 60082907, "body": "Am I doing something wrong? Here is my code: <a href=\"http://pastebin.com/VSWRv4iA\" rel=\"nofollow noreferrer\">pastebin.com/VSWRv4iA</a> The string that should be returned is <code>data\\map\\realworld_r\\01_yokohama\\105\\map_data\\105.emr</code> but it is returning <code>fkvdmjztxj</code>"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 0, "last_activity_date": 1452170318, "last_edit_date": 1452170318, "creation_date": 1452125009, "answer_id": 34645171, "question_id": 34644804, "link": "https://stackoverflow.com/questions/34644804/reversing-number-created-based-on-string/34645171#34645171", "title": "Reversing number created based on string", "body": "<p>This:</p>\n\n<pre><code> EDX = EDI * 32;\n EDX = EDX + EDI;\n EDX = EDX + dir[i];\n EDI = EDX;\n</code></pre>\n\n<p>is obviously identical to:</p>\n\n<pre><code> EDX = EDX * 33 + dir[i];\n</code></pre>\n\n<p>So it would be only possible to reverse strings when dir[i] would be inside a range of 33 (e.g. 0-32 or 97 - 129) and EDX does not overflow. </p>\n\n<p>So, if you could assume that the string only has minuscles (which are ascii 97-122, it might be possible:</p>\n\n<ul>\n<li>First, subtract 0x1505 from <code>VAL</code></li>\n<li>Then, calculate <code>ch = VAL % 33</code></li>\n<li>Calculate <code>ch = ch + n*33</code>. Choose n in a way to get <code>ch</code> into the range 97-129, this is the next char.</li>\n<li>Subtract this char from <code>VAL</code> and divide by 33: <code>VAL = (VAL - ch) / 33</code></li>\n<li>Iterate from step 2 until VAL is 0.</li>\n</ul>\n\n<p>This can be further improved by bringing <code>ch</code> into other ranges of the ascii range (e.g. numbers, uppercase letters) if you feel, that the calculated char is incorrect. But this makes the algorithm heuristic then.</p>\n\n<p>Another method: If you have a list of candidate strings (or you can generate one), then you could feed your algorithm with it and compare it to the number.</p>\n"}], "owner": {"reputation": 303, "user_id": 1405390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c50f3d89b90dc1c37fd7c2ba76aacee?s=128&d=identicon&r=PG", "display_name": "Leandro Battochio", "link": "https://stackoverflow.com/users/1405390/leandro-battochio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1452170318, "creation_date": 1452122840, "last_edit_date": 1452123154, "question_id": 34644804, "link": "https://stackoverflow.com/questions/34644804/reversing-number-created-based-on-string", "title": "Reversing number created based on string", "body": "<p>Is possible to make the reverse process of this algorithm?</p>\n\n<pre><code>int EDI = 0x1505;\nfor( int i = 0; i &lt; lstrlen(dir); i++ )\n{\n  if ( dir[i] != '.' &amp;&amp; dir[i] != '\\' )\n  {\n     EDX = EDI * 32;\n     EDX = EDX + EDI;\n     EDX = EDX + dir[i];\n     EDI = EDX;\n  }\n}\n</code></pre>\n\n<p>The <code>dir</code> is a string, for example, when <code>dir</code> is \"data\\etcobject\\damagecri.nif\" the output of that function would be: <code>1C9EA36C</code>.</p>\n\n<p>Is there a way to retrieve the original string giving only the output number?</p>\n"}, {"tags": ["c", "assembly", "ti-nspire"], "answers": [{"tags": [], "owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "is_accepted": false, "score": 1, "last_activity_date": 1452122164, "creation_date": 1452122164, "answer_id": 34644675, "question_id": 34644559, "link": "https://stackoverflow.com/questions/34644559/remapping-memory-mapped-i-o/34644675#34644675", "title": "Remapping Memory-Mapped I/O", "body": "<p>It is actually relatively difficult to remap hard coded address space. In your case where it is likely reading a physical hardware address, it is nearly impossible without substantial kernel modifications. </p>\n\n<p>As a work around, you can change the actual assembly. In you case, try to set a variable to 73 at some known address, and then change the ptr in the executable to that known address. For instance, change 0xC4000170 to the location of your variable that you previously set to 73. </p>\n"}, {"tags": [], "owner": {"reputation": 586, "user_id": 1317409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8747cc4d8176bf9f4a19c1d3c06d46c6?s=128&d=identicon&r=PG", "display_name": "pbfy0", "link": "https://stackoverflow.com/users/1317409/pbfy0"}, "is_accepted": false, "score": 1, "last_activity_date": 1463261074, "creation_date": 1463261074, "answer_id": 37232034, "question_id": 34644559, "link": "https://stackoverflow.com/questions/34644559/remapping-memory-mapped-i-o/37232034#37232034", "title": "Remapping Memory-Mapped I/O", "body": "<p>Using the built-in ARM9 MMU, you can unmap the ADC peripheral in memory, and then use the data abort handler to implement custom behavior, such as always returning 73. However, this is not a trivial undertaking. A good starting point would be <a href=\"https://github.com/ndless-nspire/Ndless/blob/master/ndless/src/resources/lcd_compat.c\" rel=\"nofollow\">https://github.com/ndless-nspire/Ndless/blob/master/ndless/src/resources/lcd_compat.c</a>, which does something similar with the LCD controller.</p>\n"}], "owner": {"reputation": 11, "user_id": 5754773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c963957a7e1c1d236207c350d1348138?s=128&d=identicon&r=PG&f=1", "display_name": "How does coding even work", "link": "https://stackoverflow.com/users/5754773/how-does-coding-even-work"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1463261074, "creation_date": 1452121619, "question_id": 34644559, "link": "https://stackoverflow.com/questions/34644559/remapping-memory-mapped-i-o", "title": "Remapping Memory-Mapped I/O", "body": "<p>My TI-Nspire CX CAS has a broken hardware component, and its ADC3 is reading a value of ~465 units, when it should be ~73 for proper function. So rather than fixing the hardware, I wanted to try a dirty fix by remapping the output location (which is written by the calculator to 0xC4000170) and forcing the calculator to read what should be the correct value, but I have no idea how.</p>\n\n<p>I should have access to C and Assembly (by using ndless). How would I remap the calculator's virtual memory so it always reads a value of 73 at that address?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1452121561, "post_id": 34644520, "comment_id": 57034935, "body": "Big question. Why? .................."}, {"owner": {"reputation": 19, "user_id": 5754772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59989f963f34efff8fe202a553562b2b?s=128&d=identicon&r=PG&f=1", "display_name": "joooohendoe", "link": "https://stackoverflow.com/users/5754772/joooohendoe"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452123031, "post_id": 34644520, "comment_id": 57035486, "body": "Fun and it&#39;s always useful to find the borders of things possible"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1452148600, "post_id": 34644520, "comment_id": 57042988, "body": "Hmm, <code>goto</code> statements are pretty much <i>standard practice</i> if you look at the source files for the standard C functions -- but, then again, they are still fun -- and useful for short jumps out of nested code blocks."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5750568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28df51fbef507b93f2555325944fe660?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5750568/stephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1452121599, "creation_date": 1452121599, "answer_id": 34644555, "question_id": 34644520, "link": "https://stackoverflow.com/questions/34644520/replacing-include-using-a-header-file-in-c/34644555#34644555", "title": "Replacing #include using a header file in C", "body": "<p>There is no way to replace the way you include header files in a c program, is part of the standard unless you write your own compiler you can make it work as you want.</p>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452122619, "post_id": 34644748, "comment_id": 57035346, "body": "Also what is better/clearer than <code>#include &quot;stdio.h&quot;</code> ... nothing? Seems pretty clear."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1452123066, "post_id": 34644748, "comment_id": 57035506, "body": "@Ben, I don&#39;t think the OP is looking for better; I think he&#39;s looking for perverse."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1452122521, "last_edit_date": 1592644375, "creation_date": 1452122521, "answer_id": 34644748, "question_id": 34644520, "link": "https://stackoverflow.com/questions/34644520/replacing-include-using-a-header-file-in-c/34644748#34644748", "title": "Replacing #include using a header file in C", "body": "<blockquote>\n<p>I get errors like</p>\n<p>error: stray \u2018#\u2019 in program|</p>\n<p>note: in expansion of macro \u2018a\u2019|</p>\n<p>when I try something like &quot;#define a #include &quot; in my header file.</p>\n</blockquote>\n<p>Preprocessing directives are identified at the start of translation phase 4 (C2011, 6.10/2), before any macro expansions are performed.  Thus, although you can define a macro <code>a</code> with expansion <code>#include</code>, the expansion is not a preprocessing directive, neither at that point (because it's not the first token on the line) nor when the macro is expanded (because that's too late).</p>\n<p>As a result, using such a macro results in the literal text <code>#include</code> appearing in the preprocessor output, and that's not valid C at any point where an ordinary <code>#include</code> directive could validly appear.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1452148745, "post_id": 34648469, "comment_id": 57043040, "body": "I think you are misunderstanding the difference between the header <code>&lt;stdio.h&gt;</code> and the standard library is automatically linked.  That provides the function definitions, even if the functions were not properly declared.  Whether the code works depends on the compiler; usually, it happens to.  However, all this is tangential to the question, I believe."}, {"owner": {"reputation": 117, "user_id": 5119585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/avLF5.png?s=128&g=1", "display_name": "moonbutt74", "link": "https://stackoverflow.com/users/5119585/moonbutt74"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452148981, "post_id": 34648469, "comment_id": 57043130, "body": "@JonathanLeffler , okay neat, so stdio.h is what then, something like specific settings definitions outside of the standard library?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1452149212, "post_id": 34648469, "comment_id": 57043229, "body": "The header <code>&lt;stdio.h&gt;</code> defines necessary types and macros, and declares the functions required by the standard (plus any extensions that the implementation chooses to provide).  That&#39;s its job \u2014 to make the information available to the compiler.  The linker then takes the object files created from your source code and the pre-compiled implementation of the library and creates an executable that you can run."}], "tags": [], "owner": {"reputation": 117, "user_id": 5119585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/avLF5.png?s=128&g=1", "display_name": "moonbutt74", "link": "https://stackoverflow.com/users/5119585/moonbutt74"}, "is_accepted": false, "score": 0, "last_activity_date": 1452147887, "last_edit_date": 1452147887, "creation_date": 1452147216, "answer_id": 34648469, "question_id": 34644520, "link": "https://stackoverflow.com/questions/34644520/replacing-include-using-a-header-file-in-c/34648469#34648469", "title": "Replacing #include using a header file in C", "body": "<p>Do you mean this?</p>\n\n<pre><code>//yams.c\n\nint main()\n{\n#define STDIO_H &lt;---without this define i still get yams!\n    printf(\"yams\\n\");\n    return 0;\n}\n\n# make yams\ncc     yams.c   -o yams\nyams.c: In function \u2018main\u2019:\nyams.c:6:5: warning: incompatible implicit declaration of built-in function \u2018printf\u2019\n     printf(\"yams\\n\");\n     ^\n# ./yams\nyams\n# \n</code></pre>\n\n<p>I yam confused =P</p>\n\n<p>So does stdio need to be included/defined constantly ? Or does the compiler chuck it in automatically?</p>\n\n<p>another using scanf</p>\n\n<pre><code>//scanned_yams.c\n\nint main()\n{\n int i;\n scanf(\"%d\",i);\n}\n\n# make scanned_yams\ncc     scanned_yams.c   -o scanned_yams\nscanned_yams.c: In function \u2018main\u2019:\nscanned_yams.c:6:2: warning: incompatible implicit declaration of built-in function \u2018scanf\u2019\n  scanf(\"%d\",i);\n  ^\n# ./scanned_yams\nThere is clearly something very wrong with me.\n# \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5754772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59989f963f34efff8fe202a553562b2b?s=128&d=identicon&r=PG&f=1", "display_name": "joooohendoe", "link": "https://stackoverflow.com/users/5754772/joooohendoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452148500, "creation_date": 1452121341, "last_edit_date": 1452148500, "question_id": 34644520, "link": "https://stackoverflow.com/questions/34644520/replacing-include-using-a-header-file-in-c", "title": "Replacing #include using a header file in C", "body": "<p>Sometimes it's just appropriate to write some fun code and sometimes it's just fun to write some unreadable code or some code with goto statements ;)</p>\n\n<p>I was wondering if it's possible to replace <code>#include \"stdio.h\"</code> with some words of your choice using a header file? </p>\n\n<p>If I attempt to do it, I get errors like </p>\n\n<pre><code>error: stray \u2018#\u2019 in program|\nnote: in expansion of macro \u2018a\u2019|\n</code></pre>\n\n<p>when I try something like \"<code>#define a #include</code>\" in my header file.</p>\n"}, {"tags": ["c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1452126503, "post_id": 34644315, "comment_id": 57036528, "body": "The third parameter to <code>read</code> is just the maximum number of bytes to read."}, {"owner": {"reputation": 1036, "user_id": 466402, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6e9b4c4c4b1b8a9e3b4483d2e067e03b?s=128&d=identicon&r=PG", "display_name": "Masood_mj", "link": "https://stackoverflow.com/users/466402/masood-mj"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1452128302, "post_id": 34644315, "comment_id": 57036987, "body": "I solved the problem. The call returns correctly if there is no data and I just need to properly check errno. I ask the moderator to close this question"}], "answers": [{"comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1452120952, "post_id": 34644408, "comment_id": 57034684, "body": "EAGAIN is usually interpreted as &quot;Resource temporarily unavailable&quot;, so the error he&#39;s getting is the expected result when the client didn&#39;t end any data."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1452121138, "last_edit_date": 1452121138, "creation_date": 1452120823, "answer_id": 34644408, "question_id": 34644315, "link": "https://stackoverflow.com/questions/34644315/read-large-data-from-nonblocking-c-socket/34644408#34644408", "title": "read large data from nonblocking c socket", "body": "<p>It's not true, it will return <code>&lt; 0</code> when there is no data, and it will set <code>errno</code> to <code>EAGAIN</code> \"<em>Resource Temporarily Unavailable</em>\" or a similar error value. The <code>read()</code> function will read as much data as possible and return, the value might be negative indicating an error (*or <code>EAGAIN</code> <em>Resource Temporarily Unavailable</em> for non blocking socket*) or positive value indicating how many bytes where actualy read.</p>\n\n<p>To check whether there is data to read or not use <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow\"><code>select()</code></a>, something like</p>\n\n<pre><code>struct timeval timeout = {1, 50000}; // Wait one 1.05 seconds\n                                     // or a reasonable value\nfd_set rdset;\n\nFD_ZERO(&amp;rdset);\nFD_SET(fd, &amp;rdset);\n\nif (select(fd + 1, &amp;rdset, NULL, NULL, &amp;timeout) == 1) // Equals the number\n{                                                      // of ready descriptors\n    // Read data here\n}\n// No data ready, now it's your choice what to do\n</code></pre>\n\n<p>Note: On linux, <code>select()</code> alters the <code>timeout</code> parameter to reflect how much time was left, so you might need to reset it if you call <code>select()</code> again with the same parameters.</p>\n"}, {"comments": [{"owner": {"reputation": 1036, "user_id": 466402, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6e9b4c4c4b1b8a9e3b4483d2e067e03b?s=128&d=identicon&r=PG", "display_name": "Masood_mj", "link": "https://stackoverflow.com/users/466402/masood-mj"}, "edited": false, "score": 0, "creation_date": 1452126681, "post_id": 34645176, "comment_id": 57036573, "body": "Why It isn&#39;t correct to do so? My program has other things to do meanwhile and instead of poll() I just call this method and if it returns with the right errno, I assume no data is there."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1452125038, "creation_date": 1452125038, "answer_id": 34645176, "question_id": 34644315, "link": "https://stackoverflow.com/questions/34644315/read-large-data-from-nonblocking-c-socket/34645176#34645176", "title": "read large data from nonblocking c socket", "body": "<blockquote>\n  <p>the result is always negative and errno is equivalent to \"Resource temporarily unavailable\" unless we have data larger than 'size'.</p>\n</blockquote>\n\n<p>Unless there is data present in the socket receive buffer, of any size.</p>\n\n<blockquote>\n  <p>Is it true that when we read a nonblocking TCP socket in C, it will not return >=0 unless it has received the complete data we requested from it?</p>\n</blockquote>\n\n<p>No. It will return zero if the end of stream has been reached, or a positive integer if any data is present in the socket receive buffer. Exactly how many bytes triggers this is system-dependent ('low-water mark') but it isn't related to how many bytes you ask for.</p>\n\n<p>However:</p>\n\n<ul>\n<li>it isn't correct to just keep reading after you've had this condition: you should call <code>select()</code> or one of the <code>poll()/epoll()</code> methods to tell you when the socket is next ready for reading</li>\n<li>it isn't clear why you're using non-blocking mode at all, if all you have to do is loop and read. I would use blocking mode.</li>\n</ul>\n"}], "owner": {"reputation": 1036, "user_id": 466402, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6e9b4c4c4b1b8a9e3b4483d2e067e03b?s=128&d=identicon&r=PG", "display_name": "Masood_mj", "link": "https://stackoverflow.com/users/466402/masood-mj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1452125038, "creation_date": 1452120426, "question_id": 34644315, "link": "https://stackoverflow.com/questions/34644315/read-large-data-from-nonblocking-c-socket", "title": "read large data from nonblocking c socket", "body": "<p>How can I have nonblocking TCP socket read in C but read the data in large chunks?</p>\n\n<p>In my implementation, the result is always negative and errno is equivalent to \"Resource temporarily unavailable\" unless we have data larger than 'size'. </p>\n\n<pre><code> result = read(fd, buffer, size);\n</code></pre>\n\n<p>Is it true that when we read a nonblocking TCP socket in C, it will not return >=0 unless it has received the complete data we requested from it?</p>\n"}, {"tags": ["c", "gcc", "posix", "c11"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1452599600, "post_id": 34644220, "comment_id": 57231302, "body": "It all boils down to that the compiler is not allowed to dump non-standard identifiers inside standard headers. When compiling for strict standard C, be it either C11 or earlier standards, gcc will stop dumping various junk in standard headers."}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 1565158, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5ae921956e78b621ef03634248ebcb8a?s=128&d=identicon&r=PG", "display_name": "eclipse", "link": "https://stackoverflow.com/users/1565158/eclipse"}, "edited": false, "score": 0, "creation_date": 1452120907, "post_id": 34644316, "comment_id": 57034667, "body": "I was about to add, that adding -D_POSIX_C_SOURCE=199309 clears the erros and I don&#39;t know why. Your answer explaint id. Thanks."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1452124187, "post_id": 34644316, "comment_id": 57035899, "body": "Using <code>-std=gnu11</code> instead of <code>-std=c11</code> should also do the trick."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1452120439, "creation_date": 1452120439, "answer_id": 34644316, "question_id": 34644220, "link": "https://stackoverflow.com/questions/34644220/posix-sigevent-not-compiling-with-c11/34644316#34644316", "title": "POSIX sigevent not compiling with c11", "body": "<p>The header <code>&lt;signal.h&gt;</code> is part of standard C. But POSIX adds more to it. Since <code>struct sigevent</code> is not C but in POSIX <code>-std=c11</code> disables (probably an <code>ifdef</code> somewhere) it.</p>\n\n<pre><code>gcc test.c\n</code></pre>\n\n<p>works because gcc by default enables certain level of POSIX functions and a lot GNU extensions.</p>\n\n<p>Compile it with:</p>\n\n<pre><code>gcc -std=c11 -D_POSIX_C_SOURCE=200809 file.c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10390, "user_id": 596370, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8571b5b8d990c5ed1220f78cc3b55c49?s=128&d=identicon&r=PG", "display_name": "rashok", "link": "https://stackoverflow.com/users/596370/rashok"}, "is_accepted": false, "score": 0, "last_activity_date": 1571914025, "last_edit_date": 1571914025, "creation_date": 1571853054, "answer_id": 58528452, "question_id": 34644220, "link": "https://stackoverflow.com/questions/34644220/posix-sigevent-not-compiling-with-c11/58528452#58528452", "title": "POSIX sigevent not compiling with c11", "body": "<p>This is because posix symbol is not part of C standard. This can be solved in various ways,</p>\n\n<ul>\n<li><code>gcc -std=c11 -D_XOPEN_SOURCE=700 file.c</code></li>\n<li><code>gcc -std=c11 -D_GNU_SOURCE file.c</code></li>\n<li><code>gcc -std=gnu11 file.c</code></li>\n</ul>\n\n<p>Here <code>700</code> means X Open7 Posix 2008.</p>\n"}], "owner": {"reputation": 523, "user_id": 1565158, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5ae921956e78b621ef03634248ebcb8a?s=128&d=identicon&r=PG", "display_name": "eclipse", "link": "https://stackoverflow.com/users/1565158/eclipse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 34644316, "answer_count": 2, "score": 3, "last_activity_date": 1571914025, "creation_date": 1452119985, "question_id": 34644220, "link": "https://stackoverflow.com/questions/34644220/posix-sigevent-not-compiling-with-c11", "title": "POSIX sigevent not compiling with c11", "body": "<p>I have simple app in C that is using POSIX struct sigevent.</p>\n\n<pre><code>#include &lt;signal.h&gt;\n\nint main(int argc, char *argv[])\n{\n    struct sigevent sig_event;\n\n    return 0;\n}\n</code></pre>\n\n<p>When I compile it like this:</p>\n\n<pre><code>gcc test.c\n</code></pre>\n\n<p>it is fine. When I force C11 mode, it fails:</p>\n\n<pre><code>gcc test.c --std=c11\n\ntest.c: In function \u2018main\u2019:\ntest.c:5:21: error: storage size of \u2018sig_event\u2019 isn\u2019t known\n    struct sigevent sig_event;\n</code></pre>\n\n<p>I'm using gcc 5.2.1 on Ubuntu 15.10. Any ideas what is causing those errors? This problem first occured when I tried to compile example from manual for timer_create() function. Situation was the same, except for much more errors.</p>\n"}, {"tags": ["c", "static-code-analysis", "frama-c", "abstract-interpretation"], "comments": [{"owner": {"reputation": 3212, "user_id": 1295435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf39389382759c77d2ffc06815de574f?s=128&d=identicon&r=PG&f=1", "display_name": "byako", "link": "https://stackoverflow.com/users/1295435/byako"}, "edited": false, "score": 2, "creation_date": 1452123667, "post_id": 34644212, "comment_id": 57035724, "body": "This is possible using the programmatic API and/or a sufficiently well-crafted <code>main</code> function. In both cases, you will have to write OCaml code to extract the possible values for the outputs. Did you already have a look at what is available in module <code>Db.Value</code>?"}, {"owner": {"reputation": 1426, "user_id": 800385, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ZEcEy.jpg?s=128&g=1", "display_name": "Maor Veitsman", "link": "https://stackoverflow.com/users/800385/maor-veitsman"}, "reply_to_user": {"reputation": 3212, "user_id": 1295435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf39389382759c77d2ffc06815de574f?s=128&d=identicon&r=PG&f=1", "display_name": "byako", "link": "https://stackoverflow.com/users/1295435/byako"}, "edited": false, "score": 0, "creation_date": 1452267589, "post_id": 34644212, "comment_id": 57106941, "body": "Thank you for your help! I will have a look at the API, however crafting a main function would be simpler in my use case."}], "owner": {"reputation": 1426, "user_id": 800385, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ZEcEy.jpg?s=128&g=1", "display_name": "Maor Veitsman", "link": "https://stackoverflow.com/users/800385/maor-veitsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1452120334, "creation_date": 1452119946, "last_edit_date": 1452120334, "question_id": 34644212, "link": "https://stackoverflow.com/questions/34644212/calculating-function-summary-using-frama-cs-value-analysis", "title": "Calculating function summary using Frama-C&#39;s value analysis", "body": "<p>Let's say we have the following code sample:</p>\n\n<pre><code>int a(int x){\n    if (x &lt; 0){\n        return -50;\n    }\n    if (x &gt;= 0 &amp;&amp; x &lt;= 3600){\n        return x - 100;\n    }\n\n    return x + 100;\n}\n\nint main(){\n    int q = Frama_C_interval(50, 5000); \n\n    return a(q);\n}\n</code></pre>\n\n<p>By running the frama-c value analysis tool I can deduce the interval of the result of a() which turns out to be [-50, 5100] as expected. What I'd like to calculate now is the function summary of a() i.e. the relation between the input and the output. The result I am looking for in the above example would look something like this:</p>\n\n<pre><code>[50,3600] -&gt; [-50, 3500]\n[3601,5000] -&gt; [3701, 5100]\n</code></pre>\n\n<p>Note that I am interested in a context based summary so other cases in function a() are of less interest.</p>\n\n<p>What would be the best way to achieve this?</p>\n"}, {"tags": ["c", "r", "pointers", "realloc"], "comments": [{"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1452118964, "post_id": 34643916, "comment_id": 57033819, "body": "And how are we calling this function? (Include your R code.)"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 5, "creation_date": 1452119478, "post_id": 34643916, "comment_id": 57034065, "body": "<i>I have used &quot;realloc&quot; routine&quot;</i>: Don&#39;t. See Writing R Extensions."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 4, "creation_date": 1452119594, "post_id": 34643916, "comment_id": 57034115, "body": "And if you&#39;re open to using C++  (which better for R, really) then Rcpp has a bunch of Gibbs sampler examples <i>that work</i>."}, {"owner": {"reputation": 25, "user_id": 5754624, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/84fc18c336e01e566538807a9552de09?s=128&d=identicon&r=PG&f=1", "display_name": "Siamak ", "link": "https://stackoverflow.com/users/5754624/siamak"}, "edited": false, "score": 0, "creation_date": 1452119902, "post_id": 34643916, "comment_id": 57034258, "body": "Hi Dirk! Can you be more specific about not using realloc? Which part of writing R extensions are you referring to?"}], "answers": [{"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1452120033, "post_id": 34644179, "comment_id": 57034313, "body": "Actually this is wrong. If <code>realloc</code> fails it returns <code>NULL</code> and now you cannot free the memory and so leak. This has been covered many many times. <a href=\"http://stackoverflow.com/a/9071582/505088\">stackoverflow.com/a/9071582/505088</a>"}, {"owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1452123458, "post_id": 34644179, "comment_id": 57035645, "body": "Ok, you don&#39;t <i>always</i> want to use <code>p = realloc(p, size)</code>. But this guy is probably some masters student writing a program he&#39;ll run once and never again, he doesn&#39;t need the most robust solution. Besides, even if he detects he&#39;s out of memory, all he can do is print &quot;oh no!&quot; before exiting."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1452151078, "post_id": 34644179, "comment_id": 57044059, "body": "I don&#39;t agree. I don&#39;t see the point in doing it wrong. Why not get it right?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1452157767, "post_id": 34644179, "comment_id": 57047335, "body": "Furthermore, <code>*n_k</code> wasn&#39;t allocated by the C code&#39;s malloc. It&#39;s memory owned by R. It cannot be reallocated. So even when you fix the use of <code>realloc</code>, it will still be wrong because you cannot use <code>realloc</code> on this block of memory."}], "tags": [], "owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "is_accepted": false, "score": -1, "last_activity_date": 1452119809, "creation_date": 1452119809, "answer_id": 34644179, "question_id": 34643916, "link": "https://stackoverflow.com/questions/34643916/calling-c-in-rstudio-causes-crash/34644179#34644179", "title": "Calling C in RStudio causes crash", "body": "<p>You're using <code>realloc</code> wrong. It should be:</p>\n\n<pre><code>*n_k = realloc(*n_k,sizeof(**n_k)*Ksize[0]);\n</code></pre>\n\n<p>You always want to use <code>realloc</code> like <code>p = realloc(p, size)</code>. Otherwise, if the buffer gets moved by <code>realloc</code>, <code>*n_k</code> will be pointing to a freed pointer.</p>\n"}], "owner": {"reputation": 25, "user_id": 5754624, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/84fc18c336e01e566538807a9552de09?s=128&d=identicon&r=PG&f=1", "display_name": "Siamak ", "link": "https://stackoverflow.com/users/5754624/siamak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1463426455, "creation_date": 1452118710, "last_edit_date": 1463426455, "question_id": 34643916, "link": "https://stackoverflow.com/questions/34643916/calling-c-in-rstudio-causes-crash", "title": "Calling C in RStudio causes crash", "body": "<p>I am constantly facing a fatal error when calling a C function in R and I suspect it may be because of the way I have used \"realloc\" routine for variable n_k in the gCRSF_gibbs function. Can somebody tell me if the reallocation of memory to n_k is correct or not?</p>\n\n<pre><code>void gCRSF_gibbs(double *z, double **n_k, double *SampleDex,\n             double *r, double *a, double *p,\n             int *Ksize, int *WordNum) {\n\nint i, j, k;\ndouble mass;\n\ndouble *prob_cumsum;\ndouble cum_sum, probrnd;\n\nprob_cumsum = (double *) calloc(Ksize[0],sizeof(double));\n\nmass = r[0]*pow(p[0],-a[0]); \nfor (i=0;i&lt;WordNum[0];i++){\n    j = (int) SampleDex[i] -1;\n    k = (int) z[j] -1;\n    if(z[j]&gt;0){\n        (*n_k)[k]--;\n    }\n    for (cum_sum=0, k=0; k&lt;Ksize[0]; k++) {\n        cum_sum += (*n_k)[k]-a[0];\n        prob_cumsum[k] = cum_sum;\n    }\n\n    if ( ((double) rand() / RAND_MAX * (cum_sum + mass) &lt; cum_sum)){\n        probrnd = (double)rand()/(double)RAND_MAX*cum_sum;\n        k = BinarySearch(probrnd, prob_cumsum, Ksize[0]);\n    }\n    else{\n        for (k=0; k&lt;Ksize[0]; k++){\n            if ((int) (*n_k)[k]==0){\n                break;\n            }\n        }\n        if (k==Ksize[0]){\n            Ksize[0]++;\n            realloc(*n_k,sizeof(**n_k)*Ksize[0]);\n            (*n_k)[Ksize[0]-1]=0;\n            prob_cumsum =  realloc(prob_cumsum,sizeof(*prob_cumsum)*Ksize[0]); \n        }\n    }\n    z[j] = k+1;\n    (*n_k)[k]++;\n}\nfree(prob_cumsum);}\n</code></pre>\n\n<p>And this is how it is called in R:</p>\n\n<pre><code>gCRSF_gibbs &lt;- function(z, n_k, sampleDex, r, a, p){\nout &lt;- .C(\"gCRSF_gibbs\", z=as.double(z), n_k=as.double(n_k), \n          SampleDex=as.double(sampleDex), r=as.double(r), a=as.double(a),\n          p=as.double(p), Ksize=as.integer(length(n_k)),\n          WordNum=as.integer(length(sampleDex)))\nout}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1209, "user_id": 2179822, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ec8ebff1de01237c23aa51bff540eb39?s=128&d=identicon&r=PG", "display_name": "K. Biermann", "link": "https://stackoverflow.com/users/2179822/k-biermann"}, "edited": false, "score": 0, "creation_date": 1452118630, "post_id": 34643879, "comment_id": 57033669, "body": "Well, it looks correct. Maybe try &quot;fflush(stdout);&quot; after the printf-statement. This will make sure that the stdout-buffer will be flushed."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1452118763, "post_id": 34643879, "comment_id": 57033718, "body": "some antivirus is known to interfere (I think Avast if I remember correctly). Try to disable the antivirus"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1452118865, "post_id": 34643879, "comment_id": 57033771, "body": "@bolov do you know why and at which point? (just curious)"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1452118871, "post_id": 34643879, "comment_id": 57033774, "body": "Buffer should be flushed as app closes, so no need for fflush(). Can you provide links to AV interfering with printf? I&#39;ve never heard of it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1452118921, "post_id": 34643879, "comment_id": 57033794, "body": "Just as test, try adding <code>while(1);</code> before <code>return</code>. (Note - you will have to force-close it...)"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 2, "creation_date": 1452118943, "post_id": 34643879, "comment_id": 57033805, "body": "The code is perfectly fine. (You can also try it in some online compiler.) The problem must be with your setup or the way you try to execute the program."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 1, "creation_date": 1452119061, "post_id": 34643879, "comment_id": 57033855, "body": "Sometimes Visual Studio can close the window before you have time to see the printout. Try a <code>getchar();</code> before <code>return</code>."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1452119083, "post_id": 34643879, "comment_id": 57033868, "body": "I doubt a while(1) will help (unless the console flashes open then closes). If you do add a while(1), then you DO need an fflush before it. My guess is OP is looking in the wrong place for the results."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1452119109, "post_id": 34643879, "comment_id": 57033880, "body": "@John3136 Isn&#39;t it flushing at a newline?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452119147, "post_id": 34643879, "comment_id": 57033902, "body": "@EugeneSh.: Yes, standard output is line buffered by default, so no <code>fflush</code> should be needed in this program."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452119188, "post_id": 34643879, "comment_id": 57033923, "body": "@EugeneSh. Possibly, but I wouldn&#39;t guarantee it (the specs may though, I&#39;m just &quot;some guy on the internet&quot; ;-) If we are adding debug code, why not add a bit extra to avoid all risk?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1452119281, "post_id": 34643879, "comment_id": 57033972, "body": "@John3136 Well, some guy with 15k rep is not just a some guy :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452119313, "post_id": 34643879, "comment_id": 57033991, "body": "Does the window close immediately, or does it stick around?  Vanishing windows is a problem with some IDEs \u2014 and are one of the reasons I don&#39;t usually work in an IDE."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452119458, "post_id": 34643879, "comment_id": 57034054, "body": "@EugeneSh. Don&#39;t let rep fool you! I can be just as wrong as the next guy. Especially when it comes to what is in language specs. A lot of what I know probably dates back to before things were in specs ;-)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452119897, "post_id": 34643879, "comment_id": 57034253, "body": "There is absolutely <i>nothing</i> wrong with your code. As long as you have set the file as part of a project in VS2013, it should build and run fine. If it isn&#39;t, that is pointing to a problem with the VS2013 setup on Win10. I would search &quot;<i>Windows 10 VS2013 no console output</i>&quot; and see what turns up."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452119940, "post_id": 34643879, "comment_id": 57034269, "body": "Minor: Change <code>int main()</code> to <code>int main(void)</code>. <code>int main()</code> is not standard..  Though I doubt this will solve the issue."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1452121425, "post_id": 34643879, "comment_id": 57034876, "body": "All I can say is, there&#39;s a reason Kernighan and Ritchie present this as Exercise 1, and why they offer that after you&#39;ve solved it (which may indeed be arbitrarily difficult!), everything else is comparatively easy."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1452121664, "post_id": 34643879, "comment_id": 57034988, "body": "I would suggest putting a breakpoint in Visual Studio at the line &quot;return 0&quot;; Then debug the program.  That way the window will stay up and you would see the output if it&#39;s there."}], "answers": [{"tags": [], "owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "is_accepted": false, "score": 3, "last_activity_date": 1452122913, "creation_date": 1452122913, "answer_id": 34644818, "question_id": 34643879, "link": "https://stackoverflow.com/questions/34643879/simple-hello-world-runs-but-printf-does-not-print-to-command-line/34644818#34644818", "title": "Simple hello world runs but printf does not print to command line", "body": "<p>Make sure your program doesn't just finish and close the console so quickly that you cannot see anything. Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"Hello World\\n\");\n    fflush (stdout); /* Make sure string is outputted to std output */\n    getchar(); /* waits for a key to finish */\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5754643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348915750bc9e3233dbca08e8f1d05e6?s=128&d=identicon&r=PG&f=1", "display_name": "jon kaban", "link": "https://stackoverflow.com/users/5754643/jon-kaban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1452122913, "creation_date": 1452118550, "last_edit_date": 1452121909, "question_id": 34643879, "link": "https://stackoverflow.com/questions/34643879/simple-hello-world-runs-but-printf-does-not-print-to-command-line", "title": "Simple hello world runs but printf does not print to command line", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"Hello World\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>This is my simple hello world program given to me by my professor. I was given this to copy as my first program in C. I am using visual studio 2013 as instructed and I am on a Surface Book running windows 10. A classmate that is on the exact same setup runs this program just fine. Mine will build and when I run without debugging the console window opens and no text prints. I cannot find a solution online.</p>\n"}, {"tags": ["c", "performance", "glib", "gobject"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452118987, "post_id": 34643296, "comment_id": 57033827, "body": "IMHO, you may need to improve your profiling. <code>gettimeofday</code> is wall time. So if your process is switched out between calls of <code>gettimeofday</code> then the calculated time will not be accurate. One suggestion is to use <code>clock</code> instead - just to eliminate that as a factor."}, {"owner": {"reputation": 263, "user_id": 1377563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IqHny.jpg?s=128&g=1", "display_name": "Phillipp", "link": "https://stackoverflow.com/users/1377563/phillipp"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452119632, "post_id": 34643296, "comment_id": 57034131, "body": "@kaylum but with clock I would get the CPU time, not the time that elapsed for the caller / user, right? I want to measure and improve the time for the user, not the CPU time."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1452119853, "post_id": 34643296, "comment_id": 57034224, "body": "Yes of course the end goal is to improve the time for the user. But to get there you need to have the right data. You have come to the conclusion that <code>g_object_new</code> is taking 500ms sometimes. But that conclusion may not be correct and hence you would be looking in totally the wrong place. That&#39;s why you need CPU time so that you can say confidently, yes, this call <i>alone</i> took all that time."}, {"owner": {"reputation": 263, "user_id": 1377563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IqHny.jpg?s=128&g=1", "display_name": "Phillipp", "link": "https://stackoverflow.com/users/1377563/phillipp"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452179852, "post_id": 34643296, "comment_id": 57062620, "body": "I used clock() too (<code>clock() - t_start &#47; CLOCKS_PER_SECOND</code>) and it gives me plain zero."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452195594, "post_id": 34643296, "comment_id": 57072907, "body": "Please show the <i>exact and full</i> code that you tried for <code>clock</code>. For starters, the snippet you have shown does not look right as it appears to be missing parentheses around the subtraction."}, {"owner": {"reputation": 263, "user_id": 1377563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IqHny.jpg?s=128&g=1", "display_name": "Phillipp", "link": "https://stackoverflow.com/users/1377563/phillipp"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452377189, "post_id": 34643296, "comment_id": 57144996, "body": "I used <code>((float)t)&#47;CLOCKS_PER_SEC*1000</code> (to get milliseconds). t is <code>t = clock() - t;</code> after initialized with <code>clock_t t = clock();</code>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452466323, "post_id": 34643296, "comment_id": 57169774, "body": "Please, show the <i>exact</i> code. In particular, how are you printing the value? If you are printing it as an <code>int</code> (that is <code>%d</code> or equivalent) then you will get <code>0</code> if the value is less than 1ms."}, {"owner": {"reputation": 263, "user_id": 1377563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IqHny.jpg?s=128&g=1", "display_name": "Phillipp", "link": "https://stackoverflow.com/users/1377563/phillipp"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452652259, "post_id": 34643296, "comment_id": 57260628, "body": "@kaylum Thanks, it&#39;s in edit 3."}, {"owner": {"reputation": 7127, "user_id": 186347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41faca9cd29ae1ff1e10ffd01eb15e52?s=128&d=identicon&r=PG", "display_name": "ntd", "link": "https://stackoverflow.com/users/186347/ntd"}, "edited": false, "score": 0, "creation_date": 1465330002, "post_id": 34643296, "comment_id": 62853857, "body": "Knowing what <code>TYPE_VHOST_RESULT</code> does during the initialization phase would help too."}], "answers": [{"tags": [], "owner": {"reputation": 3076, "user_id": 598905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN7V8.jpg?s=128&g=1", "display_name": "ensonic", "link": "https://stackoverflow.com/users/598905/ensonic"}, "is_accepted": false, "score": 1, "last_activity_date": 1452161374, "creation_date": 1452161374, "answer_id": 34652379, "question_id": 34643296, "link": "https://stackoverflow.com/questions/34643296/gobject-g-type-init-and-g-object-new-take-hundres-of-milliseconds/34652379#34652379", "title": "GObject g_type_init and g_object_new take hundres of milliseconds", "body": "<p>+1 to use clock() or even better clock_getttime().</p>\n\n<p>In addition, if you instantiate object with no parameters you can avoid the varargs overhead by using:</p>\n\n<pre><code>g_object_newv(TYPE_VHOST_RESULT, 0, NULL);\n</code></pre>\n\n<p>If you see spikes form time to time, one explanation could be the memory subsystem. A (hidden) free() call will cause glibc to consolidate free regions from time to time.</p>\n"}], "owner": {"reputation": 263, "user_id": 1377563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IqHny.jpg?s=128&g=1", "display_name": "Phillipp", "link": "https://stackoverflow.com/users/1377563/phillipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452652239, "creation_date": 1452116318, "last_edit_date": 1452652239, "question_id": 34643296, "link": "https://stackoverflow.com/questions/34643296/gobject-g-type-init-and-g-object-new-take-hundres-of-milliseconds", "title": "GObject g_type_init and g_object_new take hundres of milliseconds", "body": "<p>We are using Apache Thrift in an Apache httpd module to inject data from another service into the request. That works fine except some strange performance problems that seem to stem from gobject.</p>\n\n<p>Initialization of the type system and/or the first object takes normally &lt;1ms, but sometimes there is a batch os requests that take much longer (like >100ms).</p>\n\n<p>In the child_init-Handler, the g_type_init() is called to initialize the type system. When the request is read, the objects are created with g_object_new (around 6).</p>\n\n<p>Time of object init is measured with <code>gettimeofday</code> to get the elapsed time for the user. It looks like this:</p>\n\n<pre><code>VhostResult *result = NULL;\nstruct timeval  tv1, tv2;\ngettimeofday(&amp;tv1, NULL);\nresult = g_object_new (TYPE_VHOST_RESULT, NULL);\ngettimeofday(&amp;tv2, NULL);\n</code></pre>\n\n<p>This problem only occurs in batches. All object inits are under &lt;1ms for a few minutes and then there are ~10 requests in the same second that take 500ms to create the first object, all finishing at the same time.</p>\n\n<p>Please not that the processes are always destroyed after the request so it is <em>always</em> a fresh forked process, which means no memory leaks.</p>\n\n<p><strong>Edit</strong>: As suggested, I added measurement with <code>clock()</code> in addition to wall time and it reports 0 for the measured code block.</p>\n\n<p><strong>Edit 2</strong>: I looked at the grafana data for the times where these batches of slow inits pop up and iowait is always high. Could something block the processes becuase of iowait or is iowait measuring memory access, too?</p>\n\n<p><strong>Edit 3</strong>: The code used for the timining (cpu time) is</p>\n\n<pre><code>  clock_t t = clock();\n\n  result = g_object_newv(TYPE_VHOST_RESULT, 0, NULL);\n\n  t = clock() - t; // stop\n\n  ap_log_error(APLOG_MARK, APLOG_ERR, 0, r-&gt;server, \"%i %s result init clock %f ms\", thepid, r-&gt;hostname, ((float)t)/CLOCKS_PER_SEC*1000);\n</code></pre>\n\n<p>What could be the reason for this?</p>\n"}, {"tags": ["c", "allocation", "calloc"], "comments": [{"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 2, "creation_date": 1452115845, "post_id": 34643130, "comment_id": 57032188, "body": "Provide minimal bug-producing code"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5673006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a20186660ceaa5fd0d4f9d62a4afe6?s=128&d=identicon&r=PG&f=1", "display_name": "refa", "link": "https://stackoverflow.com/users/5673006/refa"}, "edited": false, "score": 0, "creation_date": 1452116423, "post_id": 34643158, "comment_id": 57032503, "body": "Thank you really, I was cracking my head for nearly 3 hours now. I don&#39;t know how I missed that. Allocating strlen()+1 does the trick. Thanks :)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 11, "user_id": 5673006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a20186660ceaa5fd0d4f9d62a4afe6?s=128&d=identicon&r=PG&f=1", "display_name": "refa", "link": "https://stackoverflow.com/users/5673006/refa"}, "edited": false, "score": 0, "creation_date": 1452116479, "post_id": 34643158, "comment_id": 57032525, "body": "Recommendation: use [valgrind](www.valgrind.org) to check for the correct usage of memory."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1452115843, "creation_date": 1452115843, "answer_id": 34643158, "question_id": 34643130, "link": "https://stackoverflow.com/questions/34643130/allocation-fault-function-or-code-and-strange-behavior-in-c/34643158#34643158", "title": "Allocation fault (function or code) and strange behavior in C", "body": "<p>You never allocate space for the <code>nul</code> terminator. Every <a href=\"/questions/tagged/c-string\" class=\"post-tag\" title=\"show questions tagged &#39;c-string&#39;\" rel=\"tag\">c-string</a> requires <code>n</code> bytes + <code>1</code>, for an special character that marks the end of the string, this</p>\n\n<pre><code>const char example[] = \"example\"\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>const char example[] = {'e', 'x', 'a', 'm', 'p', 'l', 'e' ,'\\0'};\n</code></pre>\n\n<p>You also use <code>calloc()</code> a lot, but you don't need to use <code>calloc()</code> except to initialize every byte to <code>0</code>, to allocate space for a string you can do this</p>\n\n<pre><code>char *copy;\nsize_t length;\nlength = strlen(original); // Only call `strlen()' once please\ncopy = malloc(length + 1);\nif (copy == NULL)\n    handle_error_and_stop_here();\nmemcpy(copy, original, length + 1);\n//                              ^ copy the `nul' too\n</code></pre>\n\n<p>and there is a function that does this for you, simply</p>\n\n<pre><code>copy = strdup(original);\n</code></pre>\n\n<p>also check for <code>NULL</code> since it will return <code>NULL</code> on failure.</p>\n"}], "owner": {"reputation": 11, "user_id": 5673006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a20186660ceaa5fd0d4f9d62a4afe6?s=128&d=identicon&r=PG&f=1", "display_name": "refa", "link": "https://stackoverflow.com/users/5673006/refa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "closed_date": 1452209667, "answer_count": 1, "score": 0, "last_activity_date": 1452115843, "creation_date": 1452115739, "question_id": 34643130, "link": "https://stackoverflow.com/questions/34643130/allocation-fault-function-or-code-and-strange-behavior-in-c", "closed_reason": "Not suitable for this site", "title": "Allocation fault (function or code) and strange behavior in C", "body": "<p>I stumbled upon this problem while trying to make a programm that solves linear systems of equasions using Gaussian elimination. I am sorry for this long part of the code but i really need help and i think that this way you can see if i made some mistakes that i have overlooked. </p>\n\n<p>This Program works perfect untill i try to name my b matrix or c matrix \"solution\" and i have accidentaly discovered this because with every other name everything works just fine.\nAlso if i run the debugger this failuer does not occur even if give the name solution\nWhen i give this input for example:\nCoeff matrix rows:4\nCoeff matrix columns:4\nCoeff matrix name:Test</p>\n\n<p>Rs. matrix rows:4\nRs. matrix columns:1\nRs. matrix name:Rs</p>\n\n<p>Sol. Matrix rows:4\nSol. Matrix columns:1\nSol. Matrix name:solution</p>\n\n<p>the program crashes.\nSame thing happens if i give the name solution to my Rs(b) matrix.</p>\n\n<p>It is really strange that this does not happen if i name my first matrix solution. Also i have another case in my code which allocates only one matrix and that matrix can also be named solution.</p>\n\n<p>It is even more strange that when those errors occur, sometimes but only sometimes my programm prints the message Failed to allocate memory for matrix rows before crashing. My input stays allways the same \nI also tried changing calloc to malloc and so on..</p>\n\n<p>Thanks in advance!    </p>\n\n<pre><code>typedef struct matrix_s //This is the structure\n{\nchar *name;\ndouble **element;\nlong columns;\nlong rows;\n}matrix_t;\n\nmatrix_t *matrix_allocate(long columns, long rows, char *name)//This is my function that fails\n{\nif(rows&lt;=0 || columns&lt;=0)\n{\n    fprintf(stderr,\"Number of rows/columns is not valid\\n\");\n    return 0;\n}\n\nmatrix_t *mymatrix=calloc(1,sizeof(matrix_t));\n\nlong i;\n\nif(!mymatrix)\n{\n    fprintf(stderr,\"Failed to allocate memory for matrix\\n\");\n    return 0;\n}\n\nmymatrix-&gt;name=calloc(strlen(name),sizeof(char));\n\nif(!mymatrix-&gt;name)\n{\n    fprintf(stderr,\"Failed to allocate memory for the name of matrix\\n\");\n    free(mymatrix);\n    mymatrix=0;\n    return 0;\n}\n\nstrcpy(mymatrix-&gt;name,name);\n\n\nmymatrix-&gt;element=calloc(rows,sizeof(double *));\n\n\nif(!mymatrix-&gt;element)\n{\n    fprintf(stderr,\"Failed to allocate memory for matrix rows\\n\");\n    free(mymatrix-&gt;name);\n    mymatrix-&gt;name=0;\n    free(mymatrix);\n    mymatrix=0;\n    return 0;\n}\n\nfor(i=0;i&lt;rows;i++)\n{\n    mymatrix-&gt;element[i]=calloc(columns,sizeof(double));\n\n    if(!mymatrix-&gt;element[0])\n    {\n        fprintf(stderr,\"Failed to allocate columns for the first row\\n\");\n        free(mymatrix-&gt;name);\n        mymatrix-&gt;name=0;\n        free(mymatrix-&gt;element);\n        mymatrix-&gt;element=0;\n        free(mymatrix);\n        mymatrix=0;\n        return 0;\n    }\n\n    if(!mymatrix-&gt;element[i])        {\n        fprintf(stderr,\"Failed to allocate columns for the row     w     number:%ld\\n\",i);\n        for(i=i-1;i&gt;=0;i--)\n        {\n            free(mymatrix-&gt;element[i]);\n            mymatrix-&gt;element[i]=0;\n        }\n        free(mymatrix-&gt;name);\n        mymatrix-&gt;name=0;\n        free(mymatrix-&gt;element);\n        mymatrix-&gt;element=0;\n        free(mymatrix);\n        mymatrix=0;\n        return 0;\n\n    }\n\n\n}\n\nmymatrix-&gt;columns=columns;\nmymatrix-&gt;rows=rows;\n\nreturn mymatrix;\n}\n\n\nint main()//Short version of the main programm\n{\n    matrix_t *a=0, *b=0, *c=0;\n    char matrixname[50];\n    long rows,cols;\n\n    ...\n\n    case 5:\n                       clearbuff();//while(getchar()!='\\n')\n            printf(\"Coeff. matrix rows:\");\n            scanf(\"%ld\",&amp;row);\n            clearbuff();\n            printf(\"Coeff. matrix columns:\");\n            scanf(\"%ld\",&amp;cols);\n            clearbuff();\n            printf(\"Coeff. matrix name:\");\n            fgets(matrixname,49,stdin);\n            *strrchr(matrixname,'\\n')=0;\n            a=matrix_allocate(cols,row,matrixname);\n\n            clearbuff();\n            printf(\"Rs. matrix rows:\");\n            scanf(\"%ld\",&amp;row);\n            clearbuff();\n            printf(\"Rs. matrix columns:\");\n            scanf(\"%ld\",&amp;cols);\n            clearbuff();\n            printf(\"Rs. matrix name:\");\n            fgets(matrixname,49,stdin);\n            *strrchr(matrixname,'\\n')=0;\n            b=matrix_allocate(cols,row,matrixname);\n\n            clearbuff();\n            printf(\"Sol. matrix rows:\");\n            scanf(\"%ld\",&amp;row);\n            clearbuff();\n            printf(\"Sol. matrix columns:\");\n            scanf(\"%ld\",&amp;cols);\n            clearbuff();\n            printf(\"Sol. matrix name:\");\n            fgets(matrixname,49,stdin);\n            *strrchr(matrixname,'\\n')=0;\n            c=matrix_allocate(cols,row,matrixname);\n            clearbuff():\n            ....\n            ....\n            break;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "pointers", "matrix"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1452115436, "post_id": 34643009, "comment_id": 57031982, "body": "The types are not equivalent, <code>int [3][3]</code> is contigous storage of 9 integers, while <code>int **</code> is a pointer to (<i>possibly an array of pointers</i>) pointer."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452115554, "post_id": 34643009, "comment_id": 57032052, "body": "Can you tell me what could be possible fixes?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1452115619, "post_id": 34643009, "comment_id": 57032081, "body": "But you are dereferncing wrong, can you write <code>a[j][i]</code>?"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452115735, "post_id": 34643009, "comment_id": 57032134, "body": "I understand why it won&#39;t work now, but I don&#39;t know what could be possible fixes besides print_matrix(int a[][3], int n)."}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452115823, "post_id": 34643009, "comment_id": 57032177, "body": "<code>print_matrix(int *a, int n)</code>"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452115824, "post_id": 34643009, "comment_id": 57032178, "body": "And while we&#39;re at the topic, why you have to say a[][3], and not a[][] as function argument?"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452116089, "post_id": 34643009, "comment_id": 57032319, "body": "@Ilya GCC: int <i>\u2019 but argument is of type \u2018int (</i>)[3]"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452116157, "post_id": 34643009, "comment_id": 57032356, "body": "Well, you can cast to a pointer."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1452117970, "post_id": 34643009, "comment_id": 57033328, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9446707/correct-way-of-passing-2-dimensional-array-into-a-function\">Correct way of passing 2 dimensional array into a function</a>"}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1452120284, "post_id": 34643127, "comment_id": 57034423, "body": "<code>int[3][3]</code> is an array of arrays. There&#39;s no &quot;as a pointer&quot;, because it isn&#39;t one. It may be a matter of terminology but I think it is important to get this right because it confuses so many beginners (and some non-beginners too)"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1452120694, "post_id": 34643127, "comment_id": 57034582, "body": "As a parameter, int[3][3] is indeed converted to a pointer. But you&#39;re right, I&#39;ll update the description, it&#39;s not quite clear. As it is, I&#39;m mixing the actual  content of the parameters variables with the types that the compiler &quot;sees&quot;."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1452120782, "post_id": 34643127, "comment_id": 57034620, "body": "Yes, I think if you explain that a parameter of type <code>T[42]</code> is adjusted to <code>T*</code> then it will be clearer. But still, there is no parameter of type <code>int[N][N]</code> in the question. There is just an argument."}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1452121094, "post_id": 34643127, "comment_id": 57034747, "body": "@juanchopanza done (NB by parameter I meant function argument)"}], "tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1452121073, "last_edit_date": 1495541721, "creation_date": 1452115733, "answer_id": 34643127, "question_id": 34643009, "link": "https://stackoverflow.com/questions/34643009/matrix-pointers-c/34643127#34643127", "title": "Matrix, pointers, C*", "body": "<p><code>int**</code> is a <strong>pointer to a pointer</strong> (pointing on an int).</p>\n\n<p><code>int[3][3]</code>, as a function argument, is converted to a <strong>pointer to an <code>int</code> array</strong> - see <a href=\"https://stackoverflow.com/questions/1641957/is-an-array-name-a-pointer-in-c/1641963#1641963\">Is an array name a pointer?</a></p>\n\n<p>So the types don't match, as the compiler is telling you.</p>\n\n<p>Note: if you're doing pointer arithmetic in your function, you can pass <code>int *a</code> instead of <code>int **a</code> (by casting: <code>print_matrix((int *)matrix, 3);</code>. That's ugly but helps to understand what's going on - namely, a <code>int[3][3]</code> array is stored in memory <strong>exactly</strong> as a <code>int[9]</code> array, and if you're computing the <code>int</code> positions yourself, as you do, it will also work as a 1D array.</p>\n"}, {"comments": [{"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452116441, "post_id": 34643226, "comment_id": 57032512, "body": "When you pass int[3][3], the function receives a pointer to the (int*)[3] which is a pointer to an array of 3 int&#39;s. Because an array gets converted into a pointer to its first element when you pass it to a function. - Can you explain this a little bit more?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452116611, "post_id": 34643226, "comment_id": 57032595, "body": "In C, you can neither pass nor return an <i>array</i> to/from a function. It always gets converted into a pointer to its first element. So the array loses its size information and becomes just a pointer (inside a function) which is also the reason why you can&#39;t use <code>sizeof</code> on it to get its actual size. See <a href=\"http://stackoverflow.com/questions/1461432/what-is-array-decaying\">What is array decaying?</a> which specifically covers this topic."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452117004, "post_id": 34643226, "comment_id": 57032825, "body": "So basically when I pass to function int[3][3] ONLY the first int[3] converts to pointer, and then I get (int*)[3] and that is pointer to an array of 3 ints, and not 3 pointers to 3 different arrays?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452117195, "post_id": 34643226, "comment_id": 57032933, "body": "Yes. But the pointer still points to the same array. That&#39;s why you can index it like a real array or increment it to get the next 3 ints E.g. If you have 1D arrat then: <code>int a[3]; func(a); void func(int *a) {..}</code>. If you have a 2D array then: <code>int a[3][3]; func(a); void func(int (*a)[3]) {..}</code> and so on."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452118275, "post_id": 34643226, "comment_id": 57033473, "body": "@\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0430\u0440\u041c\u0430\u043a\u0440\u0430\u0433\u0438\u045b I just edited which may add a bit of clarity."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452119351, "post_id": 34643226, "comment_id": 57034015, "body": "int (*a)[3] I&#39;m saying that I have array of 3 integers -&gt; int something[3] says that, and by putting (*a) instead of something I&#39;m saying that those 3 integers happen to be pointers? I&#39;m actually saying that those 3 integers have type: pointer. Is that right?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1452119582, "post_id": 34643226, "comment_id": 57034104, "body": "@\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0430\u0440\u041c\u0430\u043a\u0440\u0430\u0433\u0438\u045b No. <code>int a[3]</code> is very different from <code>int (*a)[3]</code>. In <code>int (*a)[3]</code>, <code>a</code> is a pointer that points to an array of 3 ints whereas <code>int a[3]</code> is an array of 3 ints."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1452119794, "post_id": 34643226, "comment_id": 57034194, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/99990/discussion-between---and-l3x\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1452118234, "last_edit_date": 1452118234, "creation_date": 1452116101, "answer_id": 34643226, "question_id": 34643009, "link": "https://stackoverflow.com/questions/34643009/matrix-pointers-c/34643226#34643226", "title": "Matrix, pointers, C*", "body": "<p>When you pass <code>int[3][3]</code>, the function receives a pointer to the <code>(int*)[3]</code> which is a <strong>pointer to an array of 3 int's</strong>. Because an array gets converted into a pointer to its first element when you pass it to a function. </p>\n\n<p>So adjust the function accordingly. One way is to receive it as a pointer to an array. You array indexing is wrong too. You can index just like how you would index a real the array.</p>\n\n<pre><code>void print_matrix(int (*a)[3], int n) {\n\n    int i, j;\n    for(i = 0; i &lt; n; i++) {\n        for(j = 0; j &lt; n; j++)\n            printf(\"%d\\t\", a[i][j]);\n        putchar('\\n');\n    }\n\n}\n</code></pre>\n\n<p>If you use C99, you can pass both dimensions:</p>\n\n<pre><code>void print_matrix(int x, int y, int a[x][y]) {\n\n    int i, j;\n    for(i = 0; i &lt; x; i++) {\n        for(j = 0; j &lt; y; j++)\n            printf(\"%d\\t\", a[i][j]);\n        putchar('\\n');\n    }\n\n}\n</code></pre>\n\n<p>and call it as:</p>\n\n<pre><code>  print_matrix(3, 3, matrix);\n</code></pre>\n\n<hr>\n\n<p>Just to illustrate how you would access the individual \"arrays\":</p>\n\n<pre><code>void print_matrix(int (*a)[3], int n) {\n    int i, j;\n    for(i = 0; i &lt; n; i++) {\n       int *p = a+i;\n        for(j = 0; j &lt; 3; j++)\n            printf(\"%d\\t\", p[j]);\n        putchar('\\n');\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 1, "last_activity_date": 1452116393, "creation_date": 1452116393, "answer_id": 34643316, "question_id": 34643009, "link": "https://stackoverflow.com/questions/34643009/matrix-pointers-c/34643316#34643316", "title": "Matrix, pointers, C*", "body": "<p>If you want n to vary (and be square), it is best to allocate and use a single dimension array and multiply when you want a different row.</p>\n\n<pre><code>int matrix[3*3];\n</code></pre>\n\n<p>How to use it?</p>\n\n<pre><code>matrix[row*3+col] = 5;\n</code></pre>\n\n<p>How to pass it.</p>\n\n<pre><code>f(int *a,int n)\n</code></pre>\n"}], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "accepted_answer_id": 34643226, "answer_count": 3, "score": 1, "last_activity_date": 1452121073, "creation_date": 1452115304, "last_edit_date": 1452115463, "question_id": 34643009, "link": "https://stackoverflow.com/questions/34643009/matrix-pointers-c", "title": "Matrix, pointers, C*", "body": "<p>I have code like this:</p>\n\n<pre><code>void print_matrix(int **a, int n) {\n    int i, j;\n    for(i = 0; i &lt; n; i++) {\n        for(j = 0; j &lt; n; j++)\n            printf(\"%d\\t\", *(a+i*n+j));\n        putchar('\\n');\n    }\n}\n\nint main () {\n  int matrix[3][3];\n\n  insert (matrix); /* Function that reads Matrix from stdin */\n  print_matrix(matrix, 3);\n  return 1; \n}\n</code></pre>\n\n<p>I receive GCC error:</p>\n\n<blockquote>\n  <p>expected \u2018int **\u2019 but argument is of type \u2018int (*)[3]</p>\n</blockquote>\n\n<p>I read all related topics but I still couldn't find answer to my question, so before you mark it as duplicate please read it.</p>\n\n<p>Pointers are not Arrays, I understand that. I've read somewhere that elements are not sequential, in that case, this could happen: 111 222 333 -> 111 is address of first int array, 222 is address of second int array, and 333 is address of third int array. But if this is the case, I don't understand why GCC gives me an error.</p>\n\n<p>First I would like someone to confirm me that what I've read is true. Then I would really appreciate if someone could give me answer.</p>\n\n<p>Note that I understand that <code>*(a+i*n+j)</code> is incorrect in case that memory for matrix is not sequential. </p>\n\n<p>Best regards.</p>\n"}, {"tags": ["c", "string", "algorithm", "pointers", "gcc"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1452116690, "post_id": 34642994, "comment_id": 57032642, "body": "On most architectures, glibc will use even faster functions. On modern Intel chips, for example, it uses SIMD extensions to vectorize the check."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1452153229, "post_id": 34643025, "comment_id": 57045022, "body": "In addition, what the gcc <code>strlen</code> implementation does is optimize to take advantage of architectures where 8-byte integers are supported. Above you are limited to looking for a null in 4-bytes at a time. The <code>if (sizeof (longword) &gt; 4)</code> comparison in <code>strlen</code> extends the comparison for an additional 4-bytes. The benefit either way is improved <code>strlen</code> performance for strings longer than approximately 32-chars. (above what you get with a <i>char-by-char check</i>). Good answer."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 16, "last_activity_date": 1452198866, "last_edit_date": 1452198866, "creation_date": 1452115375, "answer_id": 34643025, "question_id": 34642994, "link": "https://stackoverflow.com/questions/34642994/understanding-code-in-strlen-implementation/34643025#34643025", "title": "Understanding code in strlen implementation", "body": "<p>This is used to look at 4 bytes (32 bits) or even 8 (64 bits) in one go, to check if one of them is zero (end of string), instead of checking each byte individually.</p>\n\n<p>Here is one example to check for a null byte:</p>\n\n<pre><code>unsigned int v; // 32-bit word to check if any 8-bit byte in it is 0\nbool hasZeroByte = ~((((v &amp; 0x7F7F7F7F) + 0x7F7F7F7F) | v) | 0x7F7F7F7F);\n</code></pre>\n\n<p>For some more see <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#ZeroInWord\" rel=\"nofollow\">Bit Twiddling Hacks</a>.</p>\n\n<p>The one used here (32-bit example):</p>\n\n<blockquote>\n  <p>There is yet a faster method \u2014 use hasless(v, 1), which is defined\n  below; it works in 4 operations and requires no subsquent\n  verification. It simplifies to</p>\n  \n  <p><code>#define haszero(v) (((v) - 0x01010101UL) &amp; ~(v) &amp; 0x80808080UL)</code></p>\n  \n  <p>The subexpression (v - 0x01010101UL), evaluates to a high bit set in\n  any byte whenever the corresponding byte in v is zero or greater than\n  0x80. The sub-expression ~v &amp; 0x80808080UL evaluates to high bits set\n  in bytes where the byte of v doesn't have its high bit set (so the\n  byte was less than 0x80). Finally, by ANDing these two sub-expressions\n  the result is the high bits set where the bytes in v were zero, since\n  the high bits set due to a value greater than 0x80 in the first\n  sub-expression are masked off by the second.</p>\n</blockquote>\n\n<p>Looking at one byte at a time costs at least as much cpu cycles as looking at a full interger value (register wide). In this algorithm, full integers are checked to see if they contain a zero. If not, little instructions are used, and a <em>jump</em> can be made to the next full integer. If there is a zero byte inside, a further check is done to see at what exact position it was.</p>\n"}], "owner": {"reputation": 371, "user_id": 5578439, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b1ab467240dca27dcab43835dc5c104b?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/5578439/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 3, "accepted_answer_id": 34643025, "answer_count": 1, "score": 13, "last_activity_date": 1452198866, "creation_date": 1452115245, "last_edit_date": 1452148884, "question_id": 34642994, "link": "https://stackoverflow.com/questions/34642994/understanding-code-in-strlen-implementation", "title": "Understanding code in strlen implementation", "body": "<p>I have two questions regarding the implementation of <code>strlen</code> in <code>string.h</code> in glibc.</p>\n\n<ol>\n<li><p>The implementation uses a magic number with 'holes'. I am not able to understand how this works. Can someone please help me understand this snippet: </p>\n\n<pre><code>size_t\nstrlen (const char *str)\n{\n   const char *char_ptr;\n   const unsigned long int *longword_ptr;\n   unsigned long int longword, himagic, lomagic;\n\n   /* Handle the first few characters by reading one character at a time.\n      Do this until CHAR_PTR is aligned on a longword boundary.  */\n   for (char_ptr = str; ((unsigned long int) char_ptr\n             &amp; (sizeof (longword) - 1)) != 0;\n        ++char_ptr)\n     if (*char_ptr == '\\0')\n       return char_ptr - str;\n\n   /* All these elucidatory comments refer to 4-byte longwords,\n      but the theory applies equally well to 8-byte longwords.  */\n\n   longword_ptr = (unsigned long int *) char_ptr;\n\n   /* Bits 31, 24, 16, and 8 of this number are zero.  Call these bits\n      the \"holes.\"  Note that there is a hole just to the left of\n      each byte, with an extra at the end:\n\n      bits:  01111110 11111110 11111110 11111111\n      bytes: AAAAAAAA BBBBBBBB CCCCCCCC DDDDDDDD\n\n      The 1-bits make sure that carries propagate to the next 0-bit.\n      The 0-bits provide holes for carries to fall into.  */\n\n    himagic = 0x80808080L;\n       lomagic = 0x01010101L;\n       if (sizeof (longword) &gt; 4)\n       {\n           /* 64-bit version of the magic.  */\n           /* Do the shift in two steps to avoid a warning if long has 32 bits.  */\n           himagic = ((himagic &lt;&lt; 16) &lt;&lt; 16) | himagic;\n             lomagic = ((lomagic &lt;&lt; 16) &lt;&lt; 16) | lomagic;\n         }\n       if (sizeof (longword) &gt; 8)\n         abort ();\n\n       /* Instead of the traditional loop which tests each character,\n          we will test a longword at a time.  The tricky part is testing\n          if *any of the four* bytes in the longword in question are zero.  */\n       for (;;)\n         {\n           longword = *longword_ptr++;\n\n           if (((longword - lomagic) &amp; ~longword &amp; himagic) != 0)\n         {\n           /* Which of the bytes was the zero?  If none of them were, it was\n              a misfire; continue the search.  */\n\n           const char *cp = (const char *) (longword_ptr - 1);\n\n           if (cp[0] == 0)\n             return cp - str;\n           if (cp[1] == 0)\n             return cp - str + 1;\n           if (cp[2] == 0)\n             return cp - str + 2;\n           if (cp[3] == 0)\n             return cp - str + 3;\n           if (sizeof (longword) &gt; 4)\n             {\n               if (cp[4] == 0)\n             return cp - str + 4;\n               if (cp[5] == 0)\n             return cp - str + 5;\n               if (cp[6] == 0)\n             return cp - str + 6;\n     if (cp[7] == 0)\n      return cp - str + 7;\n}}}\n</code></pre>\n\n<p>What is the magic number being used for?</p></li>\n<li><p>Why not simply increment pointer until NULL character and return count? Is this approach faster? Why is it so?</p></li>\n</ol>\n"}, {"tags": ["c", "parsing", "syntax-error", "bison", "flex-lexer"], "comments": [{"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1452115372, "post_id": 34642923, "comment_id": 57031944, "body": "At which line do you make the small code change? And what is the change?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 3, "creation_date": 1452115434, "post_id": 34642923, "comment_id": 57031979, "body": "You&#39;ll need to provide a little more information than that, since none of us can read over your shoulder. Please add relevant parts of your <code>parser.y</code> if you expect meaningful advice."}, {"owner": {"reputation": 608, "user_id": 4293096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9a76a4d2281d494796a204252c8f596d?s=128&d=identicon&r=PG&f=1", "display_name": "Dago", "link": "https://stackoverflow.com/users/4293096/dago"}, "edited": false, "score": 0, "creation_date": 1452116039, "post_id": 34642923, "comment_id": 57032289, "body": "Plesea don&#39;t minus me. It is realy strange problem and i dont understand why it is happaning. It is not helping me. I updated question"}], "answers": [{"comments": [{"owner": {"reputation": 608, "user_id": 4293096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9a76a4d2281d494796a204252c8f596d?s=128&d=identicon&r=PG&f=1", "display_name": "Dago", "link": "https://stackoverflow.com/users/4293096/dago"}, "edited": false, "score": 0, "creation_date": 1452117524, "post_id": 34643537, "comment_id": 57033096, "body": "why the yyerror() is returning Syntax error then? U mean it is just random beceause sth went wrong with static memory?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 608, "user_id": 4293096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9a76a4d2281d494796a204252c8f596d?s=128&d=identicon&r=PG&f=1", "display_name": "Dago", "link": "https://stackoverflow.com/users/4293096/dago"}, "edited": false, "score": 0, "creation_date": 1452117653, "post_id": 34643537, "comment_id": 57033174, "body": "@Dago: Once you overwrite memory which doesn&#39;t belong to you, <i>anything can happen</i>. I don&#39;t know why that particular thing happens. You&#39;ve corrupted some internal variable in yyparse, and the parser is not working correctly as a result."}, {"owner": {"reputation": 608, "user_id": 4293096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9a76a4d2281d494796a204252c8f596d?s=128&d=identicon&r=PG&f=1", "display_name": "Dago", "link": "https://stackoverflow.com/users/4293096/dago"}, "edited": false, "score": 0, "creation_date": 1452117703, "post_id": 34643537, "comment_id": 57033196, "body": "okey. I will check as fast as possible."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 0, "last_activity_date": 1452117217, "creation_date": 1452117217, "answer_id": 34643537, "question_id": 34642923, "link": "https://stackoverflow.com/questions/34642923/bison-syntax-error-from-nowhere/34643537#34643537", "title": "Bison syntax error from nowhere", "body": "<p>Looks to me like</p>\n\n<pre><code>b := 5 + a;\n</code></pre>\n\n<p>will execute the reduction</p>\n\n<pre><code>{ params[counter] = gen_variable($1,counter); counter++; }\n</code></pre>\n\n<p>three times.</p>\n\n<p>But you declare:</p>\n\n<pre><code>int params[2];\n</code></pre>\n\n<p>So the third time, you'll be overwriting some random part of memory, after which almost anything could go wrong.</p>\n\n<p>&lt;editorial_comment&gt;\nDynamic data structures are not difficult to write. Static memory allocations almost always get you into trouble.\n&lt;/editorial_comment&gt;</p>\n"}], "owner": {"reputation": 608, "user_id": 4293096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9a76a4d2281d494796a204252c8f596d?s=128&d=identicon&r=PG&f=1", "display_name": "Dago", "link": "https://stackoverflow.com/users/4293096/dago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "closed_date": 1452777932, "accepted_answer_id": 34643537, "answer_count": 1, "score": -2, "last_activity_date": 1452117217, "creation_date": 1452115024, "last_edit_date": 1452116662, "question_id": 34642923, "link": "https://stackoverflow.com/questions/34642923/bison-syntax-error-from-nowhere", "closed_reason": "Not suitable for this site", "title": "Bison syntax error from nowhere", "body": "<p>I am writing a compiler using FLEX and Bison.\nAs input i have a simple program.</p>\n\n<pre><code>DECLARE\n    a b\nIN\n        GET a;\n        b := 5 + a;\n        a := b + 3; \nEND\n</code></pre>\n\n<p>In my <code>parser.y</code> i am using  a integer subsidiary variable <code>counter</code>\nWhen I assigning zero  to it i am getting <code>syntax error</code> I have no idea why this small change can make my program crush. It has nothing to do with <code>syntax!</code> I would be grateful to experienced people with C and Bison who can tell me where is a problem. If this variable is not touched or is assigned with different value it is working fine.  Thank You in advance.</p>\n\n<p><strong>EDIT:</strong>\nSome of parser code: Part of grammar. If i dont touch counter it is working.</p>\n\n<pre><code>%{\n    int counter = 0;\n    int params[2];\n    char* EXP = \"NONE\";\n%}\n\n\n%%\ncommand       : identifier ASSGNOP expression';'                {gen_code(EXP,params,$1); counter = 0; }   \n\n\nvalue  | identifier            { params[counter] = gen_variable($1,counter); counter++;       }\n\n\nexpression | value '+' value    {EXP = \"ADD\";}   \n</code></pre>\n"}, {"tags": ["c", "string", "linked-list"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452115063, "post_id": 34642922, "comment_id": 57031774, "body": "Note: You don&#39;t need to add a cast for <code>malloc()</code>."}, {"owner": {"reputation": 13, "user_id": 5754326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a95ba890c2f3f2912ae2c1508e38931?s=128&d=identicon&r=PG&f=1", "display_name": "shiro", "link": "https://stackoverflow.com/users/5754326/shiro"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452115200, "post_id": 34642922, "comment_id": 57031859, "body": "so just  list_elem *new ?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452115291, "post_id": 34642922, "comment_id": 57031900, "body": "<code>list_elem *new = malloc(sizeof(*new));</code> is Ok"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1452115301, "post_id": 34642922, "comment_id": 57031905, "body": "<code>char ch[MAX_L]; ...; while(ch!=&#39;0&#39;)</code> - You cannot make the comparison you&#39;re trying to do in that <code>while</code> loop. <code>ch</code> is not a character, it&#39;s an array, so you&#39;re comparing some address in memory to the character <code>&#39;0&#39;</code> which is not what you mean to do. You might compare <code>ch[0] != &#39;0&#39;</code> instead."}, {"owner": {"reputation": 13, "user_id": 5754326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a95ba890c2f3f2912ae2c1508e38931?s=128&d=identicon&r=PG&f=1", "display_name": "shiro", "link": "https://stackoverflow.com/users/5754326/shiro"}, "edited": false, "score": 0, "creation_date": 1452115763, "post_id": 34642922, "comment_id": 57032153, "body": "mhm now it is working :D thanks a lot, i am really grateful"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1452116824, "post_id": 34642922, "comment_id": 57032726, "body": "<code>if(first-&gt;ch==NULL)</code> :  <code>first-&gt;ch</code> never become NULL."}, {"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1452160248, "post_id": 34642922, "comment_id": 57049001, "body": "you don&#39;t need to first-&gt;prev=NULL and first-&gt;next=NULL since calloc will zero initialize memory for you, which means that those two pointers will already be NULL."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1452115176, "creation_date": 1452115176, "answer_id": 34642981, "question_id": 34642922, "link": "https://stackoverflow.com/questions/34642922/inserting-string-in-linked-list-c/34642981#34642981", "title": "inserting string in linked list c", "body": "<p>You can't assign to arrays, try like this</p>\n\n<pre><code>strcpy(new-&gt;ch, ch);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>new-&gt;ch = ch;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 0, "last_activity_date": 1452115579, "creation_date": 1452115579, "answer_id": 34643091, "question_id": 34642922, "link": "https://stackoverflow.com/questions/34642922/inserting-string-in-linked-list-c/34643091#34643091", "title": "inserting string in linked list c", "body": "<ol>\n<li>Instead of <code>scanf(\"%s\",&amp;ch);</code> you should have <code>scanf(\"%s\",ch);</code> as <code>ch</code> is an <code>char array</code>.  </li>\n<li>Also instead of <code>while(ch!='0')</code> you should use <code>strcmp</code> as again <code>ch</code> is an <code>char array</code> and not an ordinary character.</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 5754326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a95ba890c2f3f2912ae2c1508e38931?s=128&d=identicon&r=PG&f=1", "display_name": "shiro", "link": "https://stackoverflow.com/users/5754326/shiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452115579, "creation_date": 1452115013, "question_id": 34642922, "link": "https://stackoverflow.com/questions/34642922/inserting-string-in-linked-list-c", "title": "inserting string in linked list c", "body": "<p>I am writing a program which will add string to list and print it (adding in loop and printing by function) but of course something goes wrong . This program is adding data but when i write ' 0 ' which means to stop adding, it dont want to stop.  I think i do something bad with allocating memory in add_to_list function. I looked in some topics but i have no clues how it should looks. I'd be glad if someone tell me what is wrong with that. :) There is code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX_L 30\n\ntypedef struct elem{\n    char ch[MAX_L];\n    struct elem *next;\n    struct elem *prev;\n}   list_elem;\n\nvoid add_to_list (list_elem *first, char ch[MAX_L])\n{\n    list_elem *new=(list_elem*)malloc(sizeof(list_elem));\n    new-&gt;ch[MAX_L]=ch;\n    list_elem *tmp=first;\n    while (tmp-&gt;next!=NULL){\n        tmp=tmp-&gt;next;}\n    tmp-&gt;next=new;\n    new-&gt;prev=tmp;\n    new-&gt;next=NULL;\n\n}\n\n\nvoid print_list(list_elem *first)\n{\n    first=first-&gt;next;\n    if(first-&gt;ch==NULL)\n    printf(\"lista jest pusta!!\\n\");\n    while(first-&gt;next!=NULL){\n    printf(\"%s\\n\",first-&gt;ch);\n    first=first-&gt;next;}\n\n}\n\nint main()\n{\n\n\n    list_elem *first=(list_elem*)calloc(1,sizeof(list_elem));\n    first-&gt;prev=NULL;\n    first-&gt;next=NULL;\n\n    char a;\n    char ch[MAX_L];\n    printf(\"write ' 0 ' to end program.\\n\");\n    printf(\"write smth to add it to list: \\n\");\n    while(ch!='0'){\n        scanf(\"%s\",&amp;ch);\n        add_to_list(first,ch);}\n    print_list(first);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452115007, "post_id": 34642795, "comment_id": 57031743, "body": "Did you execute this code? Do you know what is <code>infinite loop</code>?"}, {"owner": {"reputation": 21, "user_id": 5754412, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208001550018436/picture?type=large", "display_name": "Thomas Lemonnier", "link": "https://stackoverflow.com/users/5754412/thomas-lemonnier"}, "reply_to_user": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452115149, "post_id": 34642795, "comment_id": 57031819, "body": "i executed this code, and I thing the infinite loop is around &quot;scanf(&quot;%d&quot;,&amp;nb3);&quot;. I can&#39;t write a new number in nb3 with this scanf."}, {"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1452115188, "post_id": 34642795, "comment_id": 57031848, "body": "The <code>scanf</code> ask for user input. What was your input  to the program (in the console)? And did you hit enter?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1452115208, "post_id": 34642795, "comment_id": 57031864, "body": "The number you enter must be <code>&gt;0 &amp;&amp; &lt;48</code> or <code>&gt;57 &amp;&amp; &lt;=100</code>. What did you enter?"}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 2, "creation_date": 1452115314, "post_id": 34642795, "comment_id": 57031916, "body": "Also, what are you attempting with <code>isdigit(nb3) &amp;&amp; (isdigit(nb3) !=0)</code>? That part doesn&#39;t make sense. Well, it does, but it does the same test twice."}, {"owner": {"reputation": 21, "user_id": 5754412, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208001550018436/picture?type=large", "display_name": "Thomas Lemonnier", "link": "https://stackoverflow.com/users/5754412/thomas-lemonnier"}, "edited": false, "score": 0, "creation_date": 1452115371, "post_id": 34642795, "comment_id": 57031942, "body": "the beginning programs before while is :     float x3;     float f3 = sin(0);     int nb3=0 ;     short i3 ;     double tmp;       FILE *hfile3; //pointeur pour le fichier      hfile3 = fopen (&quot;question12.txt&quot;, &quot;w&quot;);  //ouvre le fichier question12 en &#233;criture      printf(&quot;rentrer le nombre \\n&quot;);     scanf(&quot;%d&quot;,&amp;nb3);               //permet la saisie"}, {"owner": {"reputation": 21, "user_id": 5754412, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208001550018436/picture?type=large", "display_name": "Thomas Lemonnier", "link": "https://stackoverflow.com/users/5754412/thomas-lemonnier"}, "edited": false, "score": 0, "creation_date": 1452115432, "post_id": 34642795, "comment_id": 57031976, "body": "if I enter a letter to test or a float, I have this infinite loop"}, {"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1452115436, "post_id": 34642795, "comment_id": 57031981, "body": "Please edit you question and include the code you have just posted in the comment."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "reply_to_user": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1452115477, "post_id": 34642795, "comment_id": 57032008, "body": "@MartinZabel The code was already there, but someone edited it away."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1452115491, "post_id": 34642795, "comment_id": 57032016, "body": "@ThomasLemonnier You can&#39;t enter a letter with <code>scanf(&quot;%d&quot;...</code> The quick solution is to enter the ASCII code of the letter (i.e. 65 for A, etc.) Another solution would be to use <code>%c</code> in the scanf, but then you couldn&#39;t enter numbers like 99 any more. Also, you can&#39;t input a float into an int."}, {"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1452116085, "post_id": 34642795, "comment_id": 57032315, "body": "I have executed your code. If I enter an integer, <code>nb3</code> is updated and the loop is exited if <code>nb3&gt;0 &amp;&amp; nb3 &lt;48</code>  or <code>nb3&gt;57 &amp;&amp; nb3 &lt;=100</code>, otherwise the loop is re-excuted. If a enter a letter or a float <code>nb3</code> is still 1, so that the loop is exited."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1452116287, "post_id": 34642795, "comment_id": 57032430, "body": "@MartinZabel Good point about starting with a letter. Examples of inputs that will cause a problem are <code>123abc</code> and <code>123.4</code>. In any case, this question is a duplicate of about 182 other question concerning scanf infinite loops, which can be found by searching for <code>[c] scanf infinite</code>."}, {"owner": {"reputation": 21, "user_id": 5754412, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208001550018436/picture?type=large", "display_name": "Thomas Lemonnier", "link": "https://stackoverflow.com/users/5754412/thomas-lemonnier"}, "edited": false, "score": 0, "creation_date": 1452117657, "post_id": 34642795, "comment_id": 57033177, "body": "tnak&#39;s for your help, I&#39;ve just to find the answer. I define nb3 on char, i do the while with char and before the while I change char on a int."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5754412, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208001550018436/picture?type=large", "display_name": "Thomas Lemonnier", "link": "https://stackoverflow.com/users/5754412/thomas-lemonnier"}, "edited": false, "score": 1, "creation_date": 1452151681, "post_id": 34644961, "comment_id": 57044319, "body": "THANK&#39;S for your updated code @Dogbert , I check this morning and It work. My programm work too."}], "tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": true, "score": 1, "last_activity_date": 1452123784, "last_edit_date": 1592644375, "creation_date": 1452123784, "answer_id": 34644961, "question_id": 34642795, "link": "https://stackoverflow.com/questions/34642795/infinite-loop-c-infinite-loop/34644961#34644961", "title": "Infinite loop C, infinite loop", "body": "<p>There are two bizarre issues with your code. The <strong>intent</strong> of your code appears to be to ask the user to enter a number that is either negative or greater than 100. If the user enters a number on the range <code>[0,100]</code> or a non-number (ie: a letter/character), the loop breaks out.</p>\n<p>First, the <code>scanf()</code> call leaves a newline in the input buffer. Issues with <code>gets()</code>, <code>fgets()</code>, and <code>scanf()</code> are common beginner questions on StackOverflow. However, there's one other bug in your code, so I'm not marking it as a 100% duplicate yet.</p>\n<p>Your check, <code>(isdigit(nb3) &amp;&amp; (isdigit(nb3) !=0)</code>, looks wrong. I'm not sure what you're trying to achieve with <code>isdigit(nb3) != 0</code>, but it has no valid purpose as far as I can see, as you've already tested <code>nb3</code> with the function. Also, <code>isdigit()</code> is usually used when checking individuals characters in a string for whether they represent numeric values. Your use of it seems wrong.</p>\n<p>An updated code listing is provided below which should fix the infinite loop behavior I presume you're encountering.</p>\n<hr />\n<h1>Code Listing</h1>\n<hr />\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void)\n{\n    int nb3 = 0;\n\n    while ( (nb3 &lt;=0) || (nb3 &gt; 100) || isdigit(nb3) )\n    {\n        printf(&quot;%d\\n&quot;, nb3);\n        nb3=1;\n        printf(&quot;%d\\n&quot;, nb3);\n        printf(&quot;Le nombre saisi est incorrect, veuillez le ressaisir \\n&quot;);\n        scanf(&quot;%d&quot;, &amp;nb3);\n        fflush(stdin);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5754412, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208001550018436/picture?type=large", "display_name": "Thomas Lemonnier", "link": "https://stackoverflow.com/users/5754412/thomas-lemonnier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "closed_date": 1452198050, "accepted_answer_id": 34644961, "answer_count": 1, "score": -3, "last_activity_date": 1452123784, "creation_date": 1452114607, "last_edit_date": 1452115295, "question_id": 34642795, "link": "https://stackoverflow.com/questions/34642795/infinite-loop-c-infinite-loop", "closed_reason": "Duplicate", "title": "Infinite loop C, infinite loop", "body": "<p>I've a problem with loop on C. I've an infinite loop withe this code...</p>\n\n<pre><code>int nb3=0;\n\nwhile ((nb3 &lt;=0) || (nb3 &gt; 100) || (isdigit(nb3) &amp;&amp; (isdigit(nb3) !=0)) )    \n{\n    printf(\"%d\\n\", nb3);\n    nb3=1;\n    printf(\"%d\\n\", nb3);\n    printf(\"Le nombre saisi est incorrect, veuillez le ressaisir \\n\");\n    scanf(\"%d\",&amp;nb3);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1452113698, "post_id": 34642500, "comment_id": 57031057, "body": "try <code>sum += *(((int*)g)+k);</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452115560, "post_id": 34642500, "comment_id": 57032054, "body": "The first element of an array <code>int[2][4]</code> is an array <code>int[4]</code>.  C only really has 1-D arrays, but the element type can be an array type too."}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1452114259, "last_edit_date": 1452114259, "creation_date": 1452113699, "answer_id": 34642579, "question_id": 34642500, "link": "https://stackoverflow.com/questions/34642500/using-array-name-as-address-for-two-dimensional-array/34642579#34642579", "title": "Using array name as address for two-dimensional array", "body": "<p>The size of <code>(*g)</code> while declared as <code>g[M][N]</code> is the <code>N</code> multiplied by the size of the element. For a simple reason, that the increment of the first index will \"jump\" over <code>N</code> elements in the memory. So <code>*(g+k)</code> is equivalent to <code>&amp;g[k][0]</code>. Note, that dereferencing <code>g</code> or <code>(g+k)</code> is returning an <em>address</em> of the subarray.</p>\n"}, {"comments": [{"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452116903, "post_id": 34642584, "comment_id": 57032774, "body": "A comment to reason the downvote would have been more helpful."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452117180, "post_id": 34642584, "comment_id": 57032928, "body": "After the edits seems to be a legit answer. Downvote should be removed."}], "tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": -1, "last_activity_date": 1452114559, "last_edit_date": 1452114559, "creation_date": 1452113724, "answer_id": 34642584, "question_id": 34642500, "link": "https://stackoverflow.com/questions/34642500/using-array-name-as-address-for-two-dimensional-array/34642584#34642584", "title": "Using array name as address for two-dimensional array", "body": "<p><code>sum += *(x+k);</code> works because here (since <code>x</code> is an one dimensional array of <code>int</code>) <code>x</code> is a pointer to an <code>int</code> so when incrementing by <code>k</code> it points to the array element at position <code>x[k]</code>   </p>\n\n<p><code>sum += *(g+k);</code> doesn't work because here (since <code>g</code> is a two dimensional array of <code>int</code>) <code>g</code> is a pointer to an 1D array of <code>int</code> so when we increment g by <code>k</code> it points to the array <code>g[k]</code>. So when you dereference it by <code>*(g+k)</code> you will get the array <code>g[k]</code> which is an address of 1st element.  </p>\n\n<p>So for following code snippet:  </p>\n\n<pre><code>for (k=0; k&lt;ROWS; k++)\nsum += **(g+k);  \n</code></pre>\n\n<p>You will get the total sum of all the elements in the first column of <code>g[][]</code></p>\n"}, {"comments": [{"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 2, "creation_date": 1452114029, "post_id": 34642649, "comment_id": 57031248, "body": "&quot;When you are creating an array of arrays, you are actually creating an array of pointers&quot;   Hum, no"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452114567, "post_id": 34642649, "comment_id": 57031513, "body": "@MikeAtNobel - You should re-consider your answer, then reconsider your response to IIya.  Both are wrong.  One shows lack of discretion."}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452114660, "post_id": 34642649, "comment_id": 57031558, "body": "@ryyker: I don&#39;t see how. Since when is an array of arrays not an array of pointers? And which shows lack of discretion?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452114815, "post_id": 34642649, "comment_id": 57031641, "body": "In C, what can be thought of as a 2D array, can be created as a single block of memory, accessible via a single pointer (and jumping by increments equal to <code>sizeof(type)</code> to access the <i>elements</i>).  What you say <i>can</i> be implemented, and would facilitate accessing intermediate locations within a block of memory, but is not required."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1452114831, "post_id": 34642649, "comment_id": 57031650, "body": "Since always. You will not find element which is an address within the memory area occupied by array <code>g</code>. Try it."}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452115029, "post_id": 34642649, "comment_id": 57031753, "body": "@ryyker: I understand a 2D array can be created using a single block of memory, but that requires doing the calculations to find the correct locations yourself. When the array is created using the [][] syntax, the system doesn&#39;t create a single block of memory, necessarily (i.e. if the array were built on the heap)."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452115297, "post_id": 34642649, "comment_id": 57031902, "body": "If an array is created using the <code>[]</code>operator, it was not created on the heap.  Memory on the heap is created for a memory location depicted by a pointer such as:  <code>int *a = malloc(10*sizeof(int));</code>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452115514, "post_id": 34642649, "comment_id": 57032026, "body": "memory for <code>int a[2][2]</code>={0}` will look like <code>|0|0|0|0|</code> in memory.  The very first <code>|</code> is the address for that block.  (by the way, each segment in that diagram is <code>sizeof(int)</code> bytes.)."}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452115532, "post_id": 34642649, "comment_id": 57032033, "body": "@ryyker and Eugene: I&#39;ve updated my answer to better illustrate my point. The first array you see is the array containing pointers. Those pointers point to a set of arrays containing the values."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452115734, "post_id": 34642649, "comment_id": 57032133, "body": "Your answer is still containing incorrect information where you are saying about array of pointers. The fact that dereferencing an array name is giving the address, doesn&#39;t mean the array actually containing the address. It is just calculated based on the array&#39;s start address."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1452115856, "post_id": 34642649, "comment_id": 57032195, "body": "@MikeAtNobel Your understanding of C arrays is fundamentally incorrect. The commenters are correct. An array of arrays is not an array of pointers to arrays. I suggest you research the topic in more depth."}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1452115970, "post_id": 34642649, "comment_id": 57032258, "body": "@2501: I&#39;d definitely check out any source you had."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1452116258, "post_id": 34642649, "comment_id": 57032415, "body": "<a href=\"https://stackoverflow.com/questions/27030694/what-is-the-difference-between-char-s-and-char-s?lq=1\" title=\"what is the difference between char s and char s\">stackoverflow.com/questions/27030694/&hellip;</a> But don&#39;t stop there."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452116734, "post_id": 34642649, "comment_id": 57032671, "body": "Check <i><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/standards.html\" rel=\"nofollow noreferrer\">C99 para. 6.5.2.1 Array subscripting AND 6.3.2.3 Pointers</a></i>"}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1452117188, "post_id": 34642649, "comment_id": 57032931, "body": "@2501, Eugene, ryyker: Thanks for the links. You guys were definitely right. I think I understand my confusion now. I was always taught that arrays and pointers were the same thing, but now I know better. I think I&#39;ll leave my answer here anyways, though, for others who tread the same path."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452117304, "post_id": 34642649, "comment_id": 57032996, "body": "@MikeAtNobel - No Problem, thanks for hanging in there.  Better than just keeping it here, edit it to be correct.  If you do that, and send me a comment, I will come back an upclick if you add anything helpful to the conversation.  By the way, here is one of my <i><a href=\"http://stackoverflow.com/a/32910600/645128\">favorite illustrations on 2D arrays and pointers in C</a></i>."}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452119298, "post_id": 34642649, "comment_id": 57033981, "body": "@ryyker: I have edited the answer to explain why I was wrong and tried answering the question again. I really do appreciate you guys taking the time to show me where I went wrong. It is chances to learn like these that are why I appreciate SO/SE so much."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452120771, "post_id": 34642649, "comment_id": 57034613, "body": "@MikeAtNobel - Sorry - Although <i><a href=\"http://www.tutorialspoint.com/cprogramming/c_arrays.htm\" rel=\"nofollow noreferrer\">C does use arrays</a></i>, C does not really have an <i>array type</i>.  The <code>[]</code> symbols in C are referred to as <i><a href=\"http://www.tutorialspoint.com/cprogramming/c_operators.htm\" rel=\"nofollow noreferrer\">postfix operators</a></i>, and are used to create, manipulate and access elements arrays.  But they do not depict an <i>array type</i>.   The term <i><a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz.aspx\" rel=\"nofollow noreferrer\">type</a></i> in C also has special meaning.  It is an object that has specific size and feature characteristics for holding different <i>types</i> of data."}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1452121328, "post_id": 34642649, "comment_id": 57034837, "body": "@ryyker: According to 6.2.5.20 of the standard, the array type is a derived type."}], "tags": [], "owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1452120180, "last_edit_date": 1452120180, "creation_date": 1452113938, "answer_id": 34642649, "question_id": 34642500, "link": "https://stackoverflow.com/questions/34642500/using-array-name-as-address-for-two-dimensional-array/34642649#34642649", "title": "Using array name as address for two-dimensional array", "body": "<p>In order to understand how this works you have to think about what you're creating. When you are creating an array of arrays, you are actually creating an array of pointers.  i.e. </p>\n\n<pre><code>       0 1 2 3 4\n0[] -&gt; [][][][][]\n1[] -&gt; [][][][][]\n2[] -&gt; [][][][][]\n3[] -&gt; [][][][][]\n4[] -&gt; [][][][][]\n</code></pre>\n\n<p>Here, grabbing the 0th value in the first array is the same as grabbing [0][0]. However, grabbing the 1st value in the first array is not the same as grabbing [0][1], it is the same as grabbing [1][0].</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've modified the diagram to show how the first array points to a set of separate arrays to form a 2D array, to better illustrate my point.</p>\n\n<p><strong>Second Update</strong></p>\n\n<p>After some discussion it appears that this is actually not correct. The first array is not an array of pointers to arrays, as was previously stated. The first array contains elements of type \"array\" (which is not the same as type \"pointer\") and is therefore not equivalent to an array of pointers to arrays. A more appropriate diagram for this would be something like:</p>\n\n<pre><code>    0         1         2         3         4\n0 1 2 3 4 0 1 2 3 4 0 1 2 3 4 0 1 2 3 4 0 1 2 3 4 \n[][][][][][][][][][][][][][][][][][][][][][][][][]\n</code></pre>\n\n<p>Where the top row shows the index into the first array and the bottom row shows the index into the second array. Now, looking at the original question, it's just a matter of offset into that array. The first pair (&amp;g[0][0] and g) both are offset into the array 0. The second pair (&amp;g[0][0]+1 and g+1) have different offsets into the array and therefore provide different values. See @R Sahu's answer for further explanation.</p>\n"}, {"comments": [{"owner": {"reputation": 2072, "user_id": 5022451, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10152973656318137/picture?type=large", "display_name": "b_pcakes", "link": "https://stackoverflow.com/users/5022451/b-pcakes"}, "edited": false, "score": 0, "creation_date": 1452116106, "post_id": 34642674, "comment_id": 57032327, "body": "So if i replaced the last line with <code>sum += *(g[0]+k)</code>, it would be correct (since arrays are stored sequentially)?"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 2072, "user_id": 5022451, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10152973656318137/picture?type=large", "display_name": "b_pcakes", "link": "https://stackoverflow.com/users/5022451/b-pcakes"}, "edited": false, "score": 0, "creation_date": 1452116809, "post_id": 34642674, "comment_id": 57032714, "body": "I don&#39;t think so, that line works for the first 1D array only. You still need two indexes to access 2D array, no matter you are using pointer or not."}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114038, "creation_date": 1452114038, "answer_id": 34642674, "question_id": 34642500, "link": "https://stackoverflow.com/questions/34642500/using-array-name-as-address-for-two-dimensional-array/34642674#34642674", "title": "Using array name as address for two-dimensional array", "body": "<p>For 2D array, the name of the array is also the address, but that is <strong>the address of the first 1D array</strong> within your 2D array.</p>\n\n<p>So,</p>\n\n<ul>\n<li><code>g[0]</code> is the address of the first 1D array.</li>\n<li><code>g[1]</code> is the address of the second 1D array.</li>\n<li>and so on.</li>\n</ul>\n\n<p>To access individual elements, say of the first 1D array, you need something like:</p>\n\n<ul>\n<li><code>*( g[0] + 0 )</code> for <code>g[0][0]</code></li>\n<li><code>*( g[0] + 1 )</code> for <code>g[0][1]</code></li>\n<li>and so on</li>\n</ul>\n\n<p>Generally, you'll need <code>*( g[i] + k )</code> to access element <code>g[i][k]</code></p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1452115306, "last_edit_date": 1452115306, "creation_date": 1452114890, "answer_id": 34642886, "question_id": 34642500, "link": "https://stackoverflow.com/questions/34642500/using-array-name-as-address-for-two-dimensional-array/34642886#34642886", "title": "Using array name as address for two-dimensional array", "body": "<p>You need to understand the relation between pointer and arrays and pointer arithmetic first.<br>\nWhen used in an expression, in most context, arrays are converted to <em>pointer to its first element</em>.<br>\nFor a 1D array  </p>\n\n<pre><code>double x[6];  \n</code></pre>\n\n<p><code>x</code> will converted to pointer to its first element <code>x[0]</code>. For a 2D array  </p>\n\n<pre><code>int g[2][4];\n</code></pre>\n\n<p><code>g</code> will convert to pointer to its first element <code>g[0]</code>. Note that <code>g[0]</code> is an array itself, therefore <code>g</code> is actually converted to pointer to an array.    </p>\n\n<p>Note that if <code>p</code> is a pointer to type <code>T</code>, then adding <code>1</code> will increment it to <code>sizeof(T)</code> in memory, i.e to the address of next continuous element.     </p>\n\n<p>So, the expression <code>*(g+k)</code> is equivalent to <code>*(&amp;g[0] + k)</code>. As, <code>&amp;g[0]</code> is an address of an array, adding <code>1</code> will give the address of <code>g[1]</code> and adding <code>k</code> to it will give the address of <code>g[k]</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1452116169, "last_edit_date": 1452116169, "creation_date": 1452114960, "answer_id": 34642899, "question_id": 34642500, "link": "https://stackoverflow.com/questions/34642500/using-array-name-as-address-for-two-dimensional-array/34642899#34642899", "title": "Using array name as address for two-dimensional array", "body": "<p><strong>Question 1</strong></p>\n\n<blockquote>\n  <p>My question is, how come this doesn't work for a two-dimensional array?</p>\n</blockquote>\n\n<p><strong>Answer</strong></p>\n\n<pre><code>for (k=0; k&lt;=g_count-1; k++)\n    sum += *(g+k);\n</code></pre>\n\n<p>is wrong on two counts.</p>\n\n<ol>\n<li><code>*(g+k)</code> does not evaluate to an <code>int</code>.</li>\n<li><code>*(g+k)</code> accesses the array out of bounds when <code>k &gt; 1</code>.</li>\n</ol>\n\n<p>When <code>g</code> is declared as:</p>\n\n<pre><code>int g[2][4];\n</code></pre>\n\n<p><code>g</code> decays to a pointer of type <code>int (*)[4]</code>. It does not decay to a pointer of type <code>int*</code>.</p>\n\n<p>What type does <code>g+k</code> evaluate to? It also evaluates to a pointer of type <code>int (*)[4]</code>.</p>\n\n<p>Where does it point to? It will be helpful to see that with a diagram.</p>\n\n<pre><code>|&lt;---     memory used by g   --&gt;|\n+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+\n\naddress of g\n|\nv\n+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+\n\naddress of g[0] address of g[1]\n|               |\nv               v\n+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+\n</code></pre>\n\n<p>When used in an expression, <code>g</code> decays to the address of <code>g[0]</code>.</p>\n\n<p>The expression <code>g</code> evaluates to the address of <code>g[0]</code>.<br>\n The expression <code>g+1</code> evaluates to the address of <code>g[1]</code>.</p>\n\n<pre><code>g               g+1             g+2\n|               |               |\nv               v               v\n+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+\n</code></pre>\n\n<p>As you can see, <code>g+k</code> points to a location beyond the valid limits when <code>k &gt; 1</code>. Derefercencing <code>g+k</code> will lead to undefined behavior when <code>k &gt; 1</code>.</p>\n\n<p>You could use:</p>\n\n<pre><code>int* ptr = &amp;g[0][0];  // Pointer to the first int in the 2D array.\nfor (k=0; k&lt;=g_count-1; k++)\n    sum += *(ptr+k);\n         // ^^^ ptr, not g\n</code></pre>\n\n<p>That will be valid use of the array and the pointers.</p>\n\n<p><strong>Question 2</strong></p>\n\n<blockquote>\n  <p>I've noticed that while <code>&amp;g[0][0]</code> and <code>g</code> hold the same value, <code>&amp;g[0][0]+1</code> and <code>g+1</code> do not. Can someone please explain why?</p>\n</blockquote>\n\n<p><strong>Answer</strong></p>\n\n<p>Given the array, we have:</p>\n\n<pre><code>g               g+1\n|               |\nv               v\n+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+\n\n&amp;g[0][0]\n|   &amp;g[0][0]+1\n|   |\nv   v\n+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+\n</code></pre>\n\n<p>From the diagram, you can see why expressions <code>g</code> and <code>&amp;g[0][0]</code> evaluate to the same address. However, the type of the expressions are not the same. The expression <code>g</code> evaluates to <code>int (*)[4]</code> while <code>&amp;g[0][0]</code> evaluates to <code>int*</code>.</p>\n\n<p>Since the type of the expression <code>g</code> is <code>int (*)[4]</code>, the offset between <code>g</code> and <code>g+1</code> is the same as the size of 4 <code>int</code>s.</p>\n\n<p>Since the type of the expression <code>&amp;g[0][0]</code> is <code>int*</code>, the offset between <code>&amp;g[0][0]</code> and <code>&amp;g[0][0]+1</code> is the same as the size of one <code>int</code>.</p>\n\n<p>That explains why <code>g+1</code> does not evaluate to the same address as <code>&amp;g[0][0]+1</code> even though <code>g</code> and <code>&amp;g[0][0]</code> evaluate to the same address.</p>\n"}], "owner": {"reputation": 2072, "user_id": 5022451, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10152973656318137/picture?type=large", "display_name": "b_pcakes", "link": "https://stackoverflow.com/users/5022451/b-pcakes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 34642899, "answer_count": 6, "score": 2, "last_activity_date": 1452120180, "creation_date": 1452113396, "question_id": 34642500, "link": "https://stackoverflow.com/questions/34642500/using-array-name-as-address-for-two-dimensional-array", "title": "Using array name as address for two-dimensional array", "body": "<p>I know that for a one-dimensional array in C, you can use the name of the array as an address:</p>\n\n<pre><code>int k;\ndouble x[6], sum=0;\n...\n/*  Sum the values in the array x.  */\nfor (k=0; k&lt;=5; k++)\n    sum += *(x+k);\n</code></pre>\n\n<p>My question is, how come this doesn't work for a two-dimensional array?</p>\n\n<pre><code>int g[2][4]={{5,2,2,3},{1,2,3,4}};\nint g_count=8, k, sum=0;\n\nfor (k=0; k&lt;=g_count-1; k++)\n    sum += *(g+k);\n</code></pre>\n\n<p>I've noticed that while <code>&amp;g[0][0]</code> and <code>g</code> hold the same value, <code>&amp;g[0][0]+1</code> and <code>g+1</code> do not. Can someone please explain why? Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1452113595, "post_id": 34642405, "comment_id": 57031006, "body": "<code>printf(&quot;%f\\t%f&quot;,x,y);</code> prints <code>x</code> and <code>y</code>, which are <code>10</code> (the inputs). Were you expecting something else?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1452113602, "post_id": 34642405, "comment_id": 57031007, "body": "Aside: <code>printf(&quot;%lf\\n&quot;,a);</code> is for <code>long double</code> (unlike <code>scanf</code> which signifies <code>double</code>), change to <code>printf(&quot;%f\\n&quot;,a);</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1452149724, "post_id": 34642405, "comment_id": 57043443, "body": "@WeatherVane: Since when?  C11 says, under <code>fprintf()</code>, that the length modifier <code>l</code> <i>Specifies that \u2026; or has no effect on a following a, A, e, E, f, F, g, or G conversion specifier.</i>  This is for consistency with <code>scanf()</code> et al.  The length modifier <code>L</code> <i>Specifies that a following a, A, e, E, f, F, g, or G conversion specifier applies to a long double argument.</i>  This too is consistent with <code>scanf()</code>.  Note that C90 did not specify a behaviour for <code>%lf</code> with <code>printf()</code>, but C99 and C11 do."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452153919, "post_id": 34642405, "comment_id": 57045314, "body": "@JonathanLeffler thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 4, "last_activity_date": 1452113334, "creation_date": 1452113334, "answer_id": 34642480, "question_id": 34642405, "link": "https://stackoverflow.com/questions/34642405/c-help-while-trying-to-make-a-log-base-ten-to-work/34642480#34642480", "title": "C help while trying to make a log base ten to work", "body": "<p>Instead of printing <code>s</code> and <code>w</code> you printed <code>x</code> and <code>y</code> so I see no reason why the program will not print whatever the value <code>x</code> and <code>y</code> has</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5750568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28df51fbef507b93f2555325944fe660?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5750568/stephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1452113907, "creation_date": 1452113907, "answer_id": 34642637, "question_id": 34642405, "link": "https://stackoverflow.com/questions/34642405/c-help-while-trying-to-make-a-log-base-ten-to-work/34642637#34642637", "title": "C help while trying to make a log base ten to work", "body": "<p>At the last printf statement you are printing \"x\" and \"y\", that value never changed on the program after the user input their values. If you want to print other relevant information like \"s\" or \"w\" you should add another printf statement or modify the last one.</p>\n"}], "owner": {"reputation": 11, "user_id": 5754321, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208090681322694/picture?type=large", "display_name": "Chris Skan", "link": "https://stackoverflow.com/users/5754321/chris-skan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1452193365, "answer_count": 2, "score": -2, "last_activity_date": 1452149315, "creation_date": 1452113077, "last_edit_date": 1452149315, "question_id": 34642405, "link": "https://stackoverflow.com/questions/34642405/c-help-while-trying-to-make-a-log-base-ten-to-work", "closed_reason": "Not suitable for this site", "title": "C help while trying to make a log base ten to work", "body": "<p>Hi can u explain why log in the following code gives 10 when giving inputs x=10\nand y=10?It actually gives whatever the value is the x and y.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble x, y, z, a, s, w;\nint main()\n{\n    scanf(\"%lf\", &amp;x);\n    scanf(\"%lf\", &amp;y);\n    z = x + y;\n\n    if (x &gt; y)\n    {\n        printf(\"x\\n\");\n    }\n\n    if (y &gt; x)\n    {\n        printf(\"y\\n\");\n    }\n\n    if (x == y)\n    {\n        printf(\"equals\\n\");\n\n    }\n\n    a = pow(x, y);\n    printf(\"%lf\\n\", a);\n\n    s = log10(x);\n    w = log10(y);\n    printf(\"%f\\t%f\", x, y);\n\n    return (0);\n}\n</code></pre>\n\n<p>Well it's true I did change last printf to s and w however I get the result=2.302585</p>\n"}, {"tags": ["java", "c++", "c", "memory", "swig"], "owner": {"reputation": 11, "user_id": 5754218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0471e52c6acd0099de7b555471811568?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5754218/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452113718, "creation_date": 1452111879, "last_edit_date": 1452113718, "question_id": 34642083, "link": "https://stackoverflow.com/questions/34642083/want-to-change-the-default-wrapping-behavior-of-char-in-swig-java", "title": "Want to change the default wrapping behavior of char* in swig java", "body": "<p>So there's this line in the swig documentation</p>\n\n<blockquote>\n  <p>When <code>char *</code> members of a structure are wrapped, the contents are assumed to be dynamically allocated using malloc or new (depending on whether or not SWIG is run with the -c++ option). When the structure member is set, the old contents will be released and a new value created.</p>\n</blockquote>\n\n<p>I don't want the old contents to be released from memory because I'm using some sort of <code>char*</code> buffer, and I also need the default setter. I can use the <code>%ignore &lt;field&gt;</code> to overwrite the getter but then I'll lose the default setter.\nCan someone please help? Thanks.</p>\n"}, {"tags": ["c", "data-conversion"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1452111976, "post_id": 34642056, "comment_id": 57030159, "body": "I cannot understand your question."}, {"owner": {"reputation": 39095, "user_id": 398060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47073e025b05ee4d61d720f6424d0191?s=128&d=identicon&r=PG", "display_name": "GWW", "link": "https://stackoverflow.com/users/398060/gww"}, "edited": false, "score": 2, "creation_date": 1452112074, "post_id": 34642056, "comment_id": 57030209, "body": "Does this give you the result you expect or an unexpected one?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1452112478, "post_id": 34642056, "comment_id": 57030426, "body": "Please notice: &#39;char&#39;, &#39;signed char&#39; and &#39;unsigned char&#39; are three distinct types, where &#39;char&#39; is signed or not, but distinct (use signed char and avoid bit operations)"}, {"owner": {"reputation": 4277, "user_id": 1492351, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/27b06d1b6cdf815e86752a61b67435e0?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Andriyanov", "link": "https://stackoverflow.com/users/1492351/oleg-andriyanov"}, "edited": false, "score": 0, "creation_date": 1452112733, "post_id": 34642056, "comment_id": 57030574, "body": "Implicit conversion like <code>signed char bar = foo;</code> will yield the same result."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 4277, "user_id": 1492351, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/27b06d1b6cdf815e86752a61b67435e0?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Andriyanov", "link": "https://stackoverflow.com/users/1492351/oleg-andriyanov"}, "edited": false, "score": 0, "creation_date": 1452113017, "post_id": 34642056, "comment_id": 57030724, "body": "@OlegAndriyanov, in C, it is implementation-defined what the result of your implicit conversion will be if the value of <code>foo</code> is outside the range of values representable by type <code>signed char</code>. Supposing the conversion does not cause an implementation-defined signal to be raised."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1452113147, "post_id": 34642056, "comment_id": 57030785, "body": "Is your question about C or C++?  Choose <b>one</b>."}, {"owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "edited": false, "score": 0, "creation_date": 1452113164, "post_id": 34642056, "comment_id": 57030797, "body": "Thanks. I am concerned about the sign bit.  because bar will later be interpreted as a signed char. by simple masking. So, I need the sign bit to be in the 8th bit of the signed int."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1452113237, "post_id": 34642056, "comment_id": 57030826, "body": "&quot;I have an unsigned int that actually stores a signed int&quot; -- Why? Why not just store it in a signed int in the first place?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1452113259, "post_id": 34642056, "comment_id": 57030834, "body": "Is this an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X-Y question</a>? What is the real intent?"}, {"owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "edited": false, "score": 0, "creation_date": 1452113330, "post_id": 34642056, "comment_id": 57030865, "body": "Let me clarify the question above....."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1452116147, "post_id": 34642540, "comment_id": 57032347, "body": "C does not guarantee that this will be the case.  I&#39;m not sure about C++, but if your answer is specific to C++ then you should say so."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452118355, "post_id": 34642540, "comment_id": 57033520, "body": "To my best knowledge, there is no difference between C and C++ in this respect."}], "tags": [], "owner": {"reputation": 11, "user_id": 5750568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28df51fbef507b93f2555325944fe660?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5750568/stephen"}, "is_accepted": false, "score": 1, "last_activity_date": 1452114383, "last_edit_date": 1452114383, "creation_date": 1452113601, "answer_id": 34642540, "question_id": 34642056, "link": "https://stackoverflow.com/questions/34642056/store-signed-char-inside-unsigned-int/34642540#34642540", "title": "Store signed char inside unsigned int", "body": "<p>Since the <code>unsigned int foo</code> value does not reach the boundaries of <code>-128</code> or <code>127</code> the implicit conversion will work for this case. But if <code>unsigned int foo</code> had a bigger value you will be losing bytes at the moment when storing it in a <code>char</code> variable and will get unexpected results on your program.</p>\n"}, {"tags": [], "owner": {"reputation": 3062, "user_id": 185881, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/031d349e27a3c04ea878413e9af1e62f?s=128&d=identicon&r=PG", "display_name": "ern0", "link": "https://stackoverflow.com/users/185881/ern0"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114366, "creation_date": 1452114366, "answer_id": 34642739, "question_id": 34642056, "link": "https://stackoverflow.com/questions/34642056/store-signed-char-inside-unsigned-int/34642739#34642739", "title": "Store signed char inside unsigned int", "body": "<p>Don't do it. </p>\n\n<p>Casting to a smaller size may truncate the value. Casting from signed to unsigned or opposite may results wrong value (e.g. 255 -> -1).</p>\n\n<p>If you have to make calculations with different data types, pick one common type, prefereably signed and long int (32-bit), and check boundaries before casting down (to smaller size).</p>\n\n<p>Signed helps you detect underflows (e.g. when result gets less than 0), long int (or just simply: int, which means natural word length) suits for machines (32-bit or 64-bit), and it's big enough for most purposes.</p>\n\n<p>Also try to avoid mixed types in formulas, especially when they contain division (/).</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1452114808, "creation_date": 1452114808, "answer_id": 34642858, "question_id": 34642056, "link": "https://stackoverflow.com/questions/34642056/store-signed-char-inside-unsigned-int/34642858#34642858", "title": "Store signed char inside unsigned int", "body": "<p>The <code>&amp; 0xFF</code> operation will produce a value in the range <code>0</code> to <code>255</code>. It's not possible to get a negative number this way. So, even if you use <code>&amp; 0xFF</code> somewhere, you will still need to apply a conversion later to get to the range <code>-128</code> to <code>127</code>.</p>\n\n<p>In your code:</p>\n\n<pre><code>char bar = foo &amp; 0xFF;\n</code></pre>\n\n<p>there is an implicit conversion to <code>char</code>. This relies on <em>implementation-defined</em> behaviour but this will work on all but the most esoteric of systems.  The most common implementation definition is the inverse of the conversion that applies when converting <code>unsigned char</code> to <code>char</code>.</p>\n\n<p>(Your previous line <code>foo = (char)foo;</code> should be removed).</p>\n\n<p>However,</p>\n\n<pre><code>char bar = foo;\n</code></pre>\n\n<p>would produce exactly the same effect (again, except for on those esoteric systems).</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1452118706, "last_edit_date": 1452118706, "creation_date": 1452117788, "answer_id": 34643671, "question_id": 34642056, "link": "https://stackoverflow.com/questions/34642056/store-signed-char-inside-unsigned-int/34643671#34643671", "title": "Store signed char inside unsigned int", "body": "<p>Answering for C,</p>\n\n<p>If you have an <code>unsigned int</code> whose value was set by assignment of a value of type <code>char</code> (where <code>char</code> happens to be a signed type) or of type <code>signed char</code>, where the assigned value was negative, then the stored value is the arithmetic sum of the assigned negative value and one more than <code>UINT_MAX</code>.  This will be far beyond the range of values representable by (signed) <code>char</code> on any C system I have ever encountered.  If you convert that value back to (signed) <code>char</code>, whether implicitly or via a cast, \"either the result is implementation-defined, or an implementation-defined signal is raised\" (C2011, 6.3.1.3/3).</p>\n\n<p>Converting back to the original <code>char</code> value in a way that avoids implementation-defined behavior is a bit tricky (but relying on implementation-defined behavior may afford much easier approaches).  Certainly, masking off all but the 8 lowest-order value bits does not do the trick, as it always gives you a positive value.  Also, it assumes that <code>char</code> is 8 bits wide, which, in principle, is not guaranteed.  It does not necessarily even give you the correct bit pattern, as C permits negative integers to be represented in any of three different ways.</p>\n\n<p>Here's an approach that will work on any conforming C system:</p>\n\n<pre><code>unsigned int foo = SOME_SIGNED_CHAR_VALUE;\nsigned char bar;\n\n/* ... */\n\nif (foo &lt;= SCHAR_MAX) {\n    /* foo's value is representable as a signed char */\n    bar = foo;\n} else {\n    /* mask off the highest-order value bits to yield a value that fits in an int */\n    int foo2 = foo &amp; INT_MAX;\n\n    /* reverse the conversion to unsigned int, as if unsigned int had the same\n       number of value bits as int; the other bits are already accounted for */\n    bar = (foo2 - INT_MAX) - 1;\n}\n</code></pre>\n\n<p>That relies only on characteristics of integer representation and conversion that C itself defines.</p>\n"}], "owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1452124079, "creation_date": 1452111779, "last_edit_date": 1452124079, "question_id": 34642056, "link": "https://stackoverflow.com/questions/34642056/store-signed-char-inside-unsigned-int", "title": "Store signed char inside unsigned int", "body": "<p>I have an unsigned int that actually stores a signed int, and the signed int ranges from -128 to 127.  </p>\n\n<p>I would like to store this value back in the unsigned int so that I can simply\napply a mask 0xFF and get the signed char.</p>\n\n<p>How do I do the conversion ?</p>\n\n<p>i.e.</p>\n\n<pre><code>unsigned int foo = -100;\nfoo = (char)foo;\nchar bar = foo &amp; 0xFF;\nassert(bar == -100);\n</code></pre>\n"}, {"tags": ["c", "eclipse", "dll", "shared-libraries"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5671969, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208529787787976/picture?type=large", "display_name": "Dylan Galea", "link": "https://stackoverflow.com/users/5671969/dylan-galea"}, "edited": false, "score": 0, "creation_date": 1452112027, "post_id": 34642060, "comment_id": 57030190, "body": "There seems to be an error with the subdir.mk because the soruce code has no errors however this file has a red cross on it @iharob"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 115, "user_id": 5671969, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208529787787976/picture?type=large", "display_name": "Dylan Galea", "link": "https://stackoverflow.com/users/5671969/dylan-galea"}, "edited": false, "score": 0, "creation_date": 1452112091, "post_id": 34642060, "comment_id": 57030220, "body": "I think eclipse is telling about this, please post the file then."}, {"owner": {"reputation": 115, "user_id": 5671969, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208529787787976/picture?type=large", "display_name": "Dylan Galea", "link": "https://stackoverflow.com/users/5671969/dylan-galea"}, "edited": false, "score": 0, "creation_date": 1452112355, "post_id": 34642060, "comment_id": 57030361, "body": "How do i post the file please because I&#39;m new to this?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1452111803, "creation_date": 1452111803, "answer_id": 34642060, "question_id": 34642037, "link": "https://stackoverflow.com/questions/34642037/creating-a-shared-library-by-eclipse-cdt/34642060#34642060", "title": "Creating a shared library by Eclipse CDT", "body": "<p>Your source code (<em>which you didn't post</em>) has an unterminated string literal, something like</p>\n\n<pre><code>printf(\"example text %d with an integer , 4);\n/*                                     ^ missing `\"' /*\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 5671969, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208529787787976/picture?type=large", "display_name": "Dylan Galea", "link": "https://stackoverflow.com/users/5671969/dylan-galea"}, "edited": false, "score": 0, "creation_date": 1452151400, "post_id": 34642314, "comment_id": 57044204, "body": "I removed the extra \\ that was causing the &quot; to be escaped and it worked but not it&#39;s giving me another error .."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 115, "user_id": 5671969, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208529787787976/picture?type=large", "display_name": "Dylan Galea", "link": "https://stackoverflow.com/users/5671969/dylan-galea"}, "edited": false, "score": 0, "creation_date": 1452154412, "post_id": 34642314, "comment_id": 57045568, "body": "@DylanGalea The new &quot;error&quot; is (as you can see) merely a compiler warning that your program contains an unused local variable. Ignore the warning or remove the variable. This has nothing whatever to do with the problem originally posted, which you say my answer has solved. You cannot recycle one SO question to pose an open-ended series of problems. For a new problem, ask a new question. Please see <a href=\"http://stackoverflow.com/help/accepted-answer\">how to accept an answer</a> on SO."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": false, "score": 0, "last_activity_date": 1452112698, "creation_date": 1452112698, "answer_id": 34642314, "question_id": 34642037, "link": "https://stackoverflow.com/questions/34642037/creating-a-shared-library-by-eclipse-cdt/34642314#34642314", "title": "Creating a shared library by Eclipse CDT", "body": "<p>The backslash ('\\') is an escape-character for the shell (<code>/usr/bin/sh</code>). So in this line:</p>\n\n<pre><code>gcc -I\"C:\\Users\\Dylan Galea\\workspace\\5\\source\\\" -O0 -g3 -Wall -c -fmessage-    length=0 -MMD -MP -MF\"5exe.d\" -MT\"5exe.o\" -o \"5exe.o\" \"../5exe.c\"\n</code></pre>\n\n<p>the backslash '\\' that follows <code>source</code> escapes the following <code>\"</code>, and the string\n<code>\"C:\\Users\\Dylan Galea\\workspace\\5\\source\\\"</code> is parsed as having unbalanced quotes.</p>\n\n<p>Do one of the following:</p>\n\n<p>Escape the backslashes:-</p>\n\n<pre><code>-I\"C:\\\\Users\\\\Dylan Galea\\\\workspace\\\\5\\\\source\\\\\"\n</code></pre>\n\n<p>Replace them with forward slashes:</p>\n\n<pre><code>-I\"C:/Users/Dylan Galea/workspace/5/source/\"\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5671969, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208529787787976/picture?type=large", "display_name": "Dylan Galea", "link": "https://stackoverflow.com/users/5671969/dylan-galea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452151608, "creation_date": 1452111716, "last_edit_date": 1452151608, "question_id": 34642037, "link": "https://stackoverflow.com/questions/34642037/creating-a-shared-library-by-eclipse-cdt", "title": "Creating a shared library by Eclipse CDT", "body": "<p>I am getting this error each time and i do not not what is happening .. can anyone help please ?</p>\n\n<p>@Mike Kinghan this is the new error</p>\n\n<pre><code>08:21:40 **** Incremental Build of configuration Debug for project 5exe ****\nmake all \nBuilding file: ../5exe.c\nInvoking: GCC C Compiler\ngcc -I\"C:\\Users\\Dylan Galea\\workspace\\5\\source\" -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF\"5exe.d\" -MT\"5exe.o\" -o \"5exe.o\" \"../5exe.c\"\n../5exe.c: In function 'main':\n../5exe.c:42:10: warning: variable 'temp' set but not used [-Wunused-but-set-variable]\n  char temp; //temporary storage to remove the extra ( character\n      ^\nFinished building: ../5exe.c\n\nBuilding target: 5exe.exe\nInvoking: MinGW C Linker\ngcc -L\"C:\\Users\\Dylan Galea\\workspace\\5\\Debug -o \"5exe.exe\"  ./5exe.o   -l5\n/usr/bin/sh: -c: line 0: unexpected EOF while looking for matching `\"'\n/usr/bin/sh: -c: line 1: syntax error: unexpected end of file\nmakefile:29: recipe for target '5exe.exe' failed\nmake: *** [5exe.exe] Error 258\n\n08:21:40 Build Finished (took 463ms)\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "gcc", "android-ndk"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "edited": false, "score": 0, "creation_date": 1452202755, "post_id": 34655480, "comment_id": 57077029, "body": "I see, let me try following this again: <a href=\"https://github.com/flyskywhy/android-ndk-r7b/blob/master/docs/STANDALONE-TOOLCHAIN.html\" rel=\"nofollow noreferrer\">github.com/flyskywhy/android-ndk-r7b/blob/master/docs/&hellip;</a>    and envoking these commands to hopefully fix it: $export PATH=/tmp/my-android-toolchain/bin:$PATH    &amp; $ export CC=arm-linux-androideabi-gcc"}, {"owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "edited": false, "score": 0, "creation_date": 1452203787, "post_id": 34655480, "comment_id": 57077540, "body": "Sadly after I modified the toolchains following step#3 here: <a href=\"https://github.com/flyskywhy/android-ndk-r7b/blob/master/docs/STANDALONE-TOOLCHAIN.html\" rel=\"nofollow noreferrer\">github.com/flyskywhy/android-ndk-r7b/blob/master/docs/&hellip;</a>  I even ran the two $export commands mentioned in the above comment......   I still get the same error when I run $./configure --host=arm-eabi CC=arm-linux-androideabi-gcc"}, {"owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "edited": false, "score": 0, "creation_date": 1452212703, "post_id": 34655480, "comment_id": 57080951, "body": "I looked for the location of &quot;arm-linux-androideabi-gcc&quot; and found it here (/tmp/my-android-toolchain/bin/arm-linux-androideabi-gcc  ..... confirmed it can be executed)  added it to my PATH variable:  $export PATH=/tmp/my-android-toolchain/bin/arm-linux-androideabi-gcc&zwnj;&#8203;:$PATH  and same Error :/"}], "tags": [], "owner": {"reputation": 1560, "user_id": 4758618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f04c304d3c41dcc6f9b721cbe22d4f0?s=128&d=identicon&r=PG&f=1", "display_name": "V-master", "link": "https://stackoverflow.com/users/4758618/v-master"}, "is_accepted": false, "score": 0, "last_activity_date": 1452170720, "creation_date": 1452170720, "answer_id": 34655480, "question_id": 34642033, "link": "https://stackoverflow.com/questions/34642033/compiling-vnc-server-binary-files-for-android/34655480#34655480", "title": "Compiling VNC Server Binary Files (for Android)", "body": "<pre><code>./configure: line 3548: arm-linux-androideabi-gcc: command not found\n</code></pre>\n\n<p>You need to specify full path to gcc or add its location to path</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "is_accepted": false, "score": 0, "last_activity_date": 1452213791, "creation_date": 1452213791, "answer_id": 34667750, "question_id": 34642033, "link": "https://stackoverflow.com/questions/34642033/compiling-vnc-server-binary-files-for-android/34667750#34667750", "title": "Compiling VNC Server Binary Files (for Android)", "body": "<p>Solved! The solution is providing the full pass to the gcc ... for some reason despite running echo $PATH or echo $CC it showed it there but was giving me an error as if the compiler couldn't be found when I executed the $configure command. Was solved by simply providing the full directory to the gcc when running the $configure command. </p>\n"}], "owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452213791, "creation_date": 1452111710, "question_id": 34642033, "link": "https://stackoverflow.com/questions/34642033/compiling-vnc-server-binary-files-for-android", "title": "Compiling VNC Server Binary Files (for Android)", "body": "<p>Hey folks I'm trying to compile a ELF binary server files from here: <a href=\"https://github.com/LibVNC/libvncserver\" rel=\"nofollow\">https://github.com/LibVNC/libvncserver</a></p>\n\n<p>To do this I follow the steps here: ./configure --host=arm-eabi CC=arm-linux-androideabi-gcc (starting line 10 - 31). I set the NDK toolchains correctly and now I'm trying to run the $configure command.</p>\n\n<p>I'm using a 14.04 Ubuntu Machine. </p>\n\n<p>When I run the command:</p>\n\n<pre><code>$./configure --host=arm-eabi CC=arm-linux-androideabi-gcc\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>root@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10#  \nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10# ./configure --host=arm-eabi CC=arm-linux-androideabi-gcc \nchecking for a BSD-compatible install... /usr/bin/install -c \nchecking whether build environment is sane... yes \nchecking for arm-eabi-strip... no \nchecking for strip... strip \nchecking for a thread-safe mkdir -p... /bin/mkdir -p \nchecking for gawk... gawk \nchecking whether make sets $(MAKE)... yes \nchecking whether make supports nested variables... yes\nchecking whether make supports nested variables... (cached) yes\nchecking for arm-eabi-gcc... arm-linux-androideabi-gcc\nchecking whether the C compiler works... no\nconfigure: error: in `/home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details\nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10# \nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10# \nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10#\n</code></pre>\n\n<p>and when I look at the config.log file I see this (can't find the problem :( ):</p>\n\n<pre><code>This file contains any messages produced by compilers while\nrunning configure, to aid debugging if configure makes a mistake.\n\nIt was created by LibVNCServer configure 0.9.10, which was\ngenerated by GNU Autoconf 2.69.  Invocation command line was\n\n  $ ./configure --host=arm-eabi CC=arm-linux-androideabi-gcc\n\n## --------- ##\n## Platform. ##\n## --------- ##\n\n   hostname = ip-172-31-35-74\n   uname -m = x86_64\n   uname -r = 3.13.0-48-generic\n   uname -s = Linux\n   uname -v = #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015\n\n   /usr/bin/uname -p = unknown\n   /bin/uname -X     = unknown\n\n   /bin/arch              = unknown\n   /usr/bin/arch -k       = unknown\n   /usr/convex/getsysinfo = unknown\n   /usr/bin/hostinfo      = unknown\n   /bin/machine           = unknown\n   /usr/bin/oslevel       = unknown\n   /bin/universe          = unknown\n\n   PATH: /usr/bin\n   PATH: /usr/local/sbin\n   PATH: /usr/local/bin\n   PATH: /usr/sbin\n   PATH: /usr/bin\n   PATH: /sbin\n   PATH: /bin\n\n\n   ## ----------- ##\n   ## Core tests. ##\n   ## ----------- ##\n   configure:2612: checking for a BSD-compatible install\n   configure:2680: result: /usr/bin/install -c\n   configure:2691: checking whether build environment is sane\n   configure:2746: result: yes\n   configure:2805: checking for arm-eabi-strip\n   configure:2835: result: no\n   configure:2845: checking for strip\n   configure:2861: found /usr/bin/strip\n   configure:2872: result: strip\n   configure:2897: checking for a thread-safe mkdir -p\n   configure:2936: result: /bin/mkdir -p\n   configure:2943: checking for gawk\n   configure:2959: found /usr/bin/gawk\n   configure:2970: result: gawk\n   configure:2981: checking whether make sets $(MAKE)\n   configure:3003: result: yes\n   configure:3032: checking whether make supports nested variables\n   configure:3049: result: yes\n   configure:3185: checking whether make supports nested variables\n   configure:3202: result: yes\n   configure:3241: checking for arm-eabi-gcc\n   configure:3268: result: arm-linux-androideabi-gcc\n   configure:3537: checking for C compiler version\n   configure:3546: arm-linux-androideabi-gcc --version &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3546: arm-linux-androideabi-gcc -v &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3546: arm-linux-androideabi-gcc -V &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3546: arm-linux-androideabi-gcc -qversion &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3577: checking whether the C compiler works\n   configure:3599: arm-linux-androideabi-gcc    conftest.c  &gt;&amp;5\n   ./configure: line 3601: arm-linux-androideabi-gcc: command not found\n   configure:3603: $? = 127\n   configure:3641: result: no\n   configure: failed program was:\n\n   | /* confdefs.h */\n   | #define PACKAGE_NAME \"LibVNCServer\"\n   | #define PACKAGE_TARNAME \"libvncserver\"\n   | #define PACKAGE_VERSION \"0.9.10\"\n   | #define PACKAGE_STRING \"LibVNCServer 0.9.10\"\n   | #define PACKAGE_BUGREPORT \"https://github.com/LibVNC/libvncserver\"\n   | #define PACKAGE_URL \"\"\n   | #define PACKAGE \"libvncserver\"\n   | #define VERSION \"0.9.10\"\n   | #define VERSION_MAJOR 0\n   | #define VERSION_MINOR 9\n   | #define VERSION_PATCHLEVEL 10\n   | /* end confdefs.h.  */\n   | \n   | int\n   | main ()\n   | {\n   | \n   |   ;\n   |   return 0;\n   | }\n   configure:3646: error: in `/home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10':\n   configure:3648: error: C compiler cannot create executables\n   See `config.log' for more details\n\n   ## ---------------- ##\n\n## Cache variables. ##\n## ---------------- ##\n\nac_cv_env_CC_set=set\nac_cv_env_CC_value=arm-linux-androideabi-gcc\nac_cv_env_CFLAGS_set=\nac_cv_env_CFLAGS_value=\nac_cv_env_CPPFLAGS_set=\nac_cv_env_CPPFLAGS_value=\nac_cv_env_CPP_set=\nac_cv_env_CPP_value=\nac_cv_env_GNUTLS_CFLAGS_set=\nac_cv_env_GNUTLS_CFLAGS_value=\nac_cv_env_GNUTLS_LIBS_set=\nac_cv_env_GNUTLS_LIBS_value=\nac_cv_env_GTK_CFLAGS_set=\nac_cv_env_GTK_CFLAGS_value=\nac_cv_env_GTK_LIBS_set=\nac_cv_env_GTK_LIBS_value=\nac_cv_env_JPEG_LDFLAGS_set=\nac_cv_env_JPEG_LDFLAGS_value=\nac_cv_env_LDFLAGS_set=\nac_cv_env_LDFLAGS_value=\nac_cv_env_LIBS_set=\nac_cv_env_LIBS_value=\nac_cv_env_PKG_CONFIG_LIBDIR_set=\nac_cv_env_PKG_CONFIG_LIBDIR_value=\nac_cv_env_PKG_CONFIG_PATH_set=\nac_cv_env_PKG_CONFIG_PATH_value=\nac_cv_env_PKG_CONFIG_set=\nac_cv_env_PKG_CONFIG_value=\nac_cv_env_build_alias_set=\nac_cv_env_build_alias_value=\nac_cv_env_host_alias_set=set\nac_cv_env_host_alias_value=arm-eabi\nac_cv_env_target_alias_set=\nac_cv_env_target_alias_value=\nac_cv_path_install='/usr/bin/install -c'\nac_cv_path_mkdir=/bin/mkdir\nac_cv_prog_AWK=gawk\nac_cv_prog_CC=arm-linux-androideabi-gcc\nac_cv_prog_ac_ct_STRIP=strip\nac_cv_prog_make_make_set=yes\nam_cv_make_support_nested_variables=yes\n\n## ----------------- ##\n## Output variables. ##\n## ----------------- ##\n\nACLOCAL='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing aclocal-1.14'\nAMDEPBACKSLASH=''\nAMDEP_FALSE=''\nAMDEP_TRUE=''\nAMTAR='$${TAR-tar}'\nAM_BACKSLASH='\\'\nAM_DEFAULT_V='$(AM_DEFAULT_VERBOSITY)'\nAM_DEFAULT_VERBOSITY='0'\nAM_V='$(V)'\nANDROID_FALSE=''\nANDROID_TRUE=''\nAR=''\nAS=''\nAUTOCONF='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing autoconf'\nAUTOHEADER='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing autoheader'\nAUTOMAKE='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing automake-1.14'\nAWK='gawk'\nCC='arm-linux-androideabi-gcc'\nCCDEPMODE=''\nCFLAGS=''\nCONFIG_LIBVA_FALSE=''\nCONFIG_LIBVA_TRUE=''\nCPP=''\nCPPFLAGS=''\nCRYPT_LIBS=''\nCYGIPC_FALSE=''\nCYGIPC_TRUE=''\nCYGPATH_W='echo'\nDEFS=''\nDEPDIR=''\nDLLTOOL=''\nDSYMUTIL=''\nDUMPBIN=''\nECHO_C=''\nECHO_N='-n'\nECHO_T=''\nEGREP=''\nEXEEXT=''\nFGREP=''\nGNUTLS_CFLAGS=''\nGNUTLS_LIBS=''\nGREP=''\nGTK_CFLAGS=''\nGTK_LIBS=''\nHAVE_GNUTLS_FALSE=''\nHAVE_GNUTLS_TRUE=''\nHAVE_LIBGTK_FALSE=''\nHAVE_LIBGTK_TRUE=''\nHAVE_LIBJPEG_FALSE=''\nHAVE_LIBJPEG_TRUE=''\nHAVE_LIBPNG_FALSE=''\nHAVE_LIBPNG_TRUE=''\nHAVE_LIBPTHREAD_FALSE=''\nHAVE_LIBPTHREAD_TRUE=''\nHAVE_LIBSDL_FALSE=''\nHAVE_LIBSDL_TRUE=''\nHAVE_LIBSSL_FALSE=''\nHAVE_LIBSSL_TRUE=''\nHAVE_LIBZ_FALSE=''\nHAVE_LIBZ_TRUE=''\nHAVE_MP3LAME_FALSE=''\nHAVE_MP3LAME_TRUE=''\nHAVE_RPM_FALSE=''\nHAVE_RPM_TRUE=''\nINSTALL_DATA='${INSTALL} -m 644'\nINSTALL_PROGRAM='${INSTALL}'\nINSTALL_SCRIPT='${INSTALL}'\nINSTALL_STRIP_PROGRAM='$(install_sh) -c -s'\nJPEG_LDFLAGS=''\nLD=''\nLDFLAGS=''\nLIBGCRYPT_CFLAGS=''\nLIBGCRYPT_CONFIG=''\nLIBGCRYPT_LIBS=''\nLIBOBJS=''\nLIBS=''\nLIBTOOL=''\nLINUX_FALSE=''\nLINUX_TRUE=''\nLIPO=''\nLN_S=''\nLTLIBOBJS=''\nMAKEINFO='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing makeinfo'\nMANIFEST_TOOL=''\nMINGW_FALSE=''\nMINGW_TRUE=''\nMKDIR_P='/bin/mkdir -p'\nNM=''\nNMEDIT=''\nOBJDUMP=''\nOBJEXT=''\nOSX_FALSE=''\nOSX_TRUE=''\nOTOOL64=''\nOTOOL=''\nPACKAGE='libvncserver'\nPACKAGE_BUGREPORT='https://github.com/LibVNC/libvncserver'\nPACKAGE_NAME='LibVNCServer'\nPACKAGE_STRING='LibVNCServer 0.9.10'\nPACKAGE_TARNAME='libvncserver'\nPACKAGE_URL=''\nPACKAGE_VERSION='0.9.10'\nPATH_SEPARATOR=':'\nPKG_CONFIG=''\nPKG_CONFIG_LIBDIR=''\nPKG_CONFIG_PATH=''\nRANLIB=''\nRPMSOURCEDIR=''\nSDL_CFLAGS=''\nSDL_LIBS=''\nSED=''\nSET_MAKE=''\nSHELL='/bin/bash'\nSSL_LIBS=''\nSTRIP='strip'\nVA_LIBS=''\nVERSION='0.9.10'\nWITH_FFMPEG_FALSE=''\nWITH_FFMPEG_TRUE=''\nWITH_TIGHTVNC_FILETRANSFER_FALSE=''\nWITH_TIGHTVNC_FILETRANSFER_TRUE=''\nWITH_WEBSOCKETS_FALSE=''\nWITH_WEBSOCKETS_TRUE=''\nWSOCKLIB=''\nac_ct_AR=''\nac_ct_CC=''\nac_ct_DUMPBIN=''\nam__EXEEXT_FALSE=''\nam__EXEEXT_TRUE=''\nam__fastdepCC_FALSE=''\nam__fastdepCC_TRUE=''\nam__include=''\nam__isrc=''\nam__leading_dot='.'\nam__nodep=''\nam__quote=''\nam__tar='$${TAR-tar} chof - \"$$tardir\"'\nam__untar='$${TAR-tar} xf -'\nbindir='${exec_prefix}/bin'\nbuild=''\nbuild_alias=''\nbuild_cpu=''\nbuild_os=''\nbuild_vendor=''\ndatadir='${datarootdir}'\ndatarootdir='${prefix}/share'\ndocdir='${datarootdir}/doc/${PACKAGE_TARNAME}'\ndvidir='${docdir}'\nexec_prefix='NONE'\nhost='arm-eabi'\nhost_alias='arm-eabi'\nhost_cpu=''\nhost_os=''\nhost_vendor=''\nhtmldir='${docdir}'\nincludedir='${prefix}/include'\ninfodir='${datarootdir}/info'\ninstall_sh='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/install-sh'\nlibdir='${exec_prefix}/lib'\nlibexecdir='${exec_prefix}/libexec'\nlocaledir='${datarootdir}/locale'\nlocalstatedir='${prefix}/var'\nmandir='${datarootdir}/man'\nmkdir_p='$(MKDIR_P)'\noldincludedir='/usr/include'\npdfdir='${docdir}'\nprefix='NONE'\nprogram_transform_name='s,x,x,'\npsdir='${docdir}'\nsbindir='${exec_prefix}/sbin'\nsharedstatedir='${prefix}/com'\nsysconfdir='${prefix}/etc'\ntarget_alias=''\nwith_ffmpeg=''\n\n## ----------- ##\n## confdefs.h. ##\n## ----------- ##\n\n/* confdefs.h */\n#define PACKAGE_NAME \"LibVNCServer\"\n#define PACKAGE_TARNAME \"libvncserver\"\n#define PACKAGE_VERSION \"0.9.10\"\n#define PACKAGE_STRING \"LibVNCServer 0.9.10\"\n#define PACKAGE_BUGREPORT \"https://github.com/LibVNC/libvncserver\"\n#define PACKAGE_URL \"\"\n#define PACKAGE \"libvncserver\"\n#define VERSION \"0.9.10\"\n#define VERSION_MAJOR 0\n#define VERSION_MINOR 9\n#define VERSION_PATCHLEVEL 10\n\nconfigure: exit 77\n</code></pre>\n"}, {"tags": ["c", "text", "colors", "dev-c++"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1452111616, "post_id": 34641962, "comment_id": 57029938, "body": "What makes you think <code>system</code> is taking format strings? Use <code>sprintf</code>  instead and then feed the output to <code>system</code>."}, {"owner": {"reputation": 12281, "user_id": 1322268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfWtq.jpg?s=128&g=1", "display_name": "shawnt00", "link": "https://stackoverflow.com/users/1322268/shawnt00"}, "edited": false, "score": 1, "creation_date": 1452111642, "post_id": 34641962, "comment_id": 57029960, "body": "Don&#39;t you just need to build the string with <code>sprintf()</code> before passing to <code>system()</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452111717, "post_id": 34641962, "comment_id": 57030008, "body": "BTW, <code>srand</code> needs to be called only once."}, {"owner": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452111810, "post_id": 34641962, "comment_id": 57030058, "body": "&quot;System&quot; doesn&#39;t understand variable input.  I need a way to make my Text loop with random colors."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1452111836, "post_id": 34641962, "comment_id": 57030079, "body": "And your <code>R</code> array is one element short. (Your maximum possible random number is 15, which is one element beyond a 15-element array.)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452112143, "post_id": 34642117, "comment_id": 57030242, "body": "Thank you very much... It has now been Solved!"}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452112229, "post_id": 34642117, "comment_id": 57030300, "body": "@Errorising - You also didn&#39;t get al the possible colors - see updated answer."}, {"owner": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452112454, "post_id": 34642117, "comment_id": 57030411, "body": "Thank you indeed. I forgot that I excluded black for some reason."}, {"owner": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452112617, "post_id": 34642117, "comment_id": 57030510, "body": "Now I want this to work with a &quot;while ( getch(); );&quot; Please Help!"}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452112658, "post_id": 34642117, "comment_id": 57030535, "body": "@Errorising - <code>getch()</code> is not standard, but I&#39;ll add it anyway."}, {"owner": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452112746, "post_id": 34642117, "comment_id": 57030584, "body": "I mean, I require a &quot;Press any key to continue&quot; thing. That when pressed, it should move to the next phase.  That would mean it would Quit for this particular program."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452112837, "post_id": 34642117, "comment_id": 57030625, "body": "@Errorising - See update - press a key to change color, press escape to exit."}, {"owner": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452113613, "post_id": 34642117, "comment_id": 57031014, "body": "Very nice. But I am trying to figure out a way to instead of pressing an &quot;escape&quot; key, it should continue with any key. Until then, continue to &quot;Loop&quot;."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "edited": false, "score": 0, "creation_date": 1452113942, "post_id": 34642117, "comment_id": 57031190, "body": "@Errorising - If you are on Windows/DOS, use \t<code>while( !_kbhit() ) {</code>. - Also, don&#39;t forget to accept the answer if it solved your (original) problem :)"}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 3, "last_activity_date": 1452112797, "last_edit_date": 1452112797, "creation_date": 1452112005, "answer_id": 34642117, "question_id": 34641962, "link": "https://stackoverflow.com/questions/34641962/c-language-loop-text-with-random-color-combination/34642117#34642117", "title": "C Language: Loop Text with Random Color Combination", "body": "<p><code>system()</code> doesn't take a formatted string.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>int main(void){\n\n    char R[16]={'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};\n\n    srand(time(NULL));\n    char color_string[20];\n\n    while(1) {\n\n        int Ra = rand() %16;\n        int Rb = rand() %16;\n\n        sprintf(color_string, \"color %c%c\", R[Ra], R[Rb]);\n        system(color_string);  \n\n        printf(\"Hello world!\");\n        system(\"cls\");\n    };\n\n    return 0;\n}\n</code></pre>\n\n<p>With <code>getch()</code> (as asked, but not standard):</p>\n\n<pre><code>while( getch() != 27) {\n\n    system(\"cls\");\n\n    int Ra = rand() %16;\n    int Rb = rand() %16;\n\n    sprintf(color_string, \"color %c%c\", R[Ra], R[Rb]);\n\n    system(color_string);  \n\n    printf(\"Hello world!\");\n};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5754027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sL8RR.jpg?s=128&g=1", "display_name": "Errorising", "link": "https://stackoverflow.com/users/5754027/errorising"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3327, "favorite_count": 1, "accepted_answer_id": 34642117, "answer_count": 1, "score": 0, "last_activity_date": 1452113149, "creation_date": 1452111415, "last_edit_date": 1452111677, "question_id": 34641962, "link": "https://stackoverflow.com/questions/34641962/c-language-loop-text-with-random-color-combination", "title": "C Language: Loop Text with Random Color Combination", "body": "<p>The following test fails because \"system(\"color #code);\" needs to be static.\nFor example:-</p>\n\n<p><code>system(\"color 0F\");</code> Works.</p>\n\n<p><code>system(\"color %d %d\",a, b);</code> Does Not.</p>\n\n<p>Complete Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() \n{\nchar R[15]={'1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};\n\n    while(1)\n    {\n    srand(time(NULL));\n    int Ra = rand() %10 + 6;\n    int Rb = rand() %10 + 6;\n\n    system(\"color %c%c\",R[Ra], R[Rb]);  \n\n    printf(\"Hello world!\");\n    system(\"cls\");\n    };\n\nreturn 0;\n}\n</code></pre>\n\n<p>How do I get this to work? Is there a better way?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1452110598, "post_id": 34641707, "comment_id": 57029272, "body": "But is it in &quot;source character set&quot;? I think it is not. Try &quot;-fwide-exec-charset&quot;. Also &quot;-finput-charset&quot; is setting the character set of the source file itself."}], "answers": [{"tags": [], "owner": {"reputation": 569, "user_id": 9565940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ddd3887fda239f0acbd49367fd9f37?s=128&d=identicon&r=PG&f=1", "display_name": "JCQian", "link": "https://stackoverflow.com/users/9565940/jcqian"}, "is_accepted": false, "score": 0, "last_activity_date": 1529011809, "creation_date": 1529011809, "answer_id": 50866219, "question_id": 34641707, "link": "https://stackoverflow.com/questions/34641707/different-execution-and-input-character-set-in-c/50866219#50866219", "title": "Different execution and input character set in C", "body": "<p>I have a header file with Unicode characters worked fine in Visual Studio 2015, but won't compile in GCC with this error, I tried to use Notepad++ to open it, click the Encoding menu, and converted it into UTF-8, which seems to work for my GCC compilation.<a href=\"https://i.stack.imgur.com/IboM5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IboM5.jpg\" alt=\"using Notepad++ to chanage encoding\"></a></p>\n"}], "owner": {"reputation": 31, "user_id": 5753974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe6a1a37c67277c87774341626602c8?s=128&d=identicon&r=PG&f=1", "display_name": "user5753974", "link": "https://stackoverflow.com/users/5753974/user5753974"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1529011809, "creation_date": 1452110396, "question_id": 34641707, "link": "https://stackoverflow.com/questions/34641707/different-execution-and-input-character-set-in-c", "title": "Different execution and input character set in C", "body": "<p>I am trying to understand the C standard. In particular this part from C99:</p>\n\n<blockquote>\n  <p>\u00a7 5.1.1.2 1.5 Each source character set member and escape sequence in character constants and string literals is converted to the corresponding memeber of the execution character set; if there is no corresponding member, it is converted to and implementation-defined member other than the null (wide) character.</p>\n</blockquote>\n\n<p>I made this example code,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\"\u00d8\");\n}\n</code></pre>\n\n<p>and when I try to compile this with GCC with <code>-std=C99 -fexec-charset=ASCII</code>, I get the error</p>\n\n<pre><code>foo.c:5:9: error: converting to execution character set: Invalid or incomplete multibyte or wide character\n  printf(\"\u00d8\");\n         ^\n</code></pre>\n\n<p>Shouldn't the '\u00d8' just be converted to an implementation-defined ASCII charcter and compile according to the quote above?</p>\n"}, {"tags": ["c", "blackjack", "const-char"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 4, "creation_date": 1452109524, "post_id": 34641471, "comment_id": 57028583, "body": "What is exactly the problem? It&#39;s not very clear."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 2, "creation_date": 1452109544, "post_id": 34641471, "comment_id": 57028599, "body": "Too much code for <code>&quot;I don&#39;t know how to give my cards an integer value&quot;</code>.  Where are you trying to do that?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1452109710, "post_id": 34641471, "comment_id": 57028716, "body": "Number the cards <code>0..51</code> and then the suit can be <code>card &#47; 13</code> and the rank can be <code>card % 13</code>. Where suits are numbered <code>0..3</code> and ranks are numbered <code>0..12</code>."}, {"owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "edited": false, "score": 1, "creation_date": 1452109757, "post_id": 34641471, "comment_id": 57028742, "body": "I can&#39;t tell from his question but it&#39;s important to note that ENUMS can do this very easily since you can assign the &quot;hidden&quot; values that the ENUMS have behind the scene."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1452109769, "post_id": 34641471, "comment_id": 57028748, "body": "Or else implement a function that converts your rank <code>char</code>s to numeric values."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1452109833, "post_id": 34641471, "comment_id": 57028787, "body": "Use <code>enum</code>s to define the rank and suit, with string arrays used to convert index values <code>0...</code> to rank and suit names."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1452110578, "post_id": 34641471, "comment_id": 57029261, "body": "Your array <code>tables</code> is badly typed, it should be an array of <code>int</code>s not of pointers. Correction : <code>int values[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10 };</code>. I&#39;m not sure this is the only error, but at least this one seems to correspond to your description."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452111973, "post_id": 34641471, "comment_id": 57030156, "body": "<code>shuffle()</code> could be better.  Consider if <code>N</code> was 3 rather than 52 and <code>rand()</code> is perfect.  This code would form 3*3*3  groups with uniform results.  Yet with only 3*2*1 or 6 decks, the 27 groups cannot represent the 6 decks evenly.  Search SO for other shuffle approaches."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5738983, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/11e7e062b4d11595c89f4628f3cc3f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Mallom", "link": "https://stackoverflow.com/users/5738983/mallom"}, "edited": false, "score": 0, "creation_date": 1452112529, "post_id": 34641762, "comment_id": 57030454, "body": "Thanks, this was very helpful. I guess when I have value inside fillDeck function i need to have it in shuffle and deal function as well? I tried to implement it in shuffle but I just get errors.   &lt;code&gt;void shuffle(Card * const Deck, const int *value[]){  \tint i, j; \tCard temp;  \tfor (i = 0; i &lt; 52; i++){ \t\tj = rand() % 52; \t\ttemp = Deck[i]; \t\tDeck[i] = Deck[j]; \t\tDeck[j] = temp; \t\tvalue[j]; \t}  \treturn; }&lt;code&gt;"}, {"owner": {"reputation": 853, "user_id": 3645112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QFHGj.jpg?s=128&g=1", "display_name": "Rainbacon", "link": "https://stackoverflow.com/users/3645112/rainbacon"}, "reply_to_user": {"reputation": 47, "user_id": 5738983, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/11e7e062b4d11595c89f4628f3cc3f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Mallom", "link": "https://stackoverflow.com/users/5738983/mallom"}, "edited": false, "score": 0, "creation_date": 1452112721, "post_id": 34641762, "comment_id": 57030569, "body": "Yes, ideally you will add value in any place that you use deck and suit. Also, just a suggestion, I would consider renaming the array holding {&quot;ace&quot;, &quot;two&quot;, etc...} as the name deck or decks could be confused easily with your class Deck which holds a set of 52 cards."}, {"owner": {"reputation": 47, "user_id": 5738983, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/11e7e062b4d11595c89f4628f3cc3f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Mallom", "link": "https://stackoverflow.com/users/5738983/mallom"}, "edited": false, "score": 0, "creation_date": 1452171390, "post_id": 34641762, "comment_id": 57056516, "body": "I wrote <code>value[i] = value[j];</code> in my shuffle function inside the for loop but its not working. Can&#39;t I write it like that?"}, {"owner": {"reputation": 853, "user_id": 3645112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QFHGj.jpg?s=128&g=1", "display_name": "Rainbacon", "link": "https://stackoverflow.com/users/3645112/rainbacon"}, "reply_to_user": {"reputation": 47, "user_id": 5738983, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/11e7e062b4d11595c89f4628f3cc3f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Mallom", "link": "https://stackoverflow.com/users/5738983/mallom"}, "edited": false, "score": 0, "creation_date": 1452203606, "post_id": 34641762, "comment_id": 57077431, "body": "With the shuffle function you have written in your post you shouldn&#39;t need to use value in shuffle. When I said to use it where you used deck I was referring to the the array {&quot;ace&quot;, &quot;two&quot;, etc...} not to the actual deck of cards. That is why I suggested giving more unique names to your variables."}], "tags": [], "owner": {"reputation": 853, "user_id": 3645112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QFHGj.jpg?s=128&g=1", "display_name": "Rainbacon", "link": "https://stackoverflow.com/users/3645112/rainbacon"}, "is_accepted": true, "score": 0, "last_activity_date": 1452111359, "last_edit_date": 1452111359, "creation_date": 1452110626, "answer_id": 34641762, "question_id": 34641471, "link": "https://stackoverflow.com/questions/34641471/how-can-i-assign-int-values-to-const-char-array-in-my-blackjack-game-c/34641762#34641762", "title": "How can I assign int values to const char array in my blackjack game, C", "body": "<p>I would recommend that you add a field to your card struct to hold the value.</p>\n\n<pre><code>typedef struct card {\n    const char *suits;\n    const char *decks;\n    int value;\n}\n</code></pre>\n\n<p>To assign the card the value you would use:</p>\n\n<pre><code>void fillDeck(Card * const Deck, const char *suit[], const char *deck[], const int *value[])\n{\n    int s;\n    for (s = 0; s &lt; 52; s++){\n        Deck[s].suits = suit[s / 13];\n        Deck[s].decks = deck[s % 13];\n        Deck[s].value = value[s % 13];\n    }\n}\n</code></pre>\n\n<p>Then when you are determining a winner you can simply look at all the cards in their hand and sum up the values.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 5738983, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/11e7e062b4d11595c89f4628f3cc3f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Mallom", "link": "https://stackoverflow.com/users/5738983/mallom"}, "edited": false, "score": 0, "creation_date": 1452168767, "post_id": 34642290, "comment_id": 57054733, "body": "Are you talking about the main function? I still need fillDeck, shuffle and deal function right? I changed my names after your recommendations."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 47, "user_id": 5738983, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/11e7e062b4d11595c89f4628f3cc3f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Mallom", "link": "https://stackoverflow.com/users/5738983/mallom"}, "edited": false, "score": 0, "creation_date": 1452169538, "post_id": 34642290, "comment_id": 57055253, "body": "If you feel you need separate functions. Filling the array is a one-liner, shuffling is scarcely more."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1452112918, "last_edit_date": 1452112918, "creation_date": 1452112561, "answer_id": 34642290, "question_id": 34641471, "link": "https://stackoverflow.com/questions/34641471/how-can-i-assign-int-values-to-const-char-array-in-my-blackjack-game-c/34642290#34642290", "title": "How can I assign int values to const char array in my blackjack game, C", "body": "<p>Don't confuse the program's card values with their rank - make a clear distinction between ranks <code>0..12</code> used by the program, and the cards' descriptive values.</p>\n\n<pre><code>//char *suitname[] = { \"Hearts\", \"Clubs\", \"Diamonds\", \"Spades\" };\n//char *rankname[] = { \"Two\", \"Three\", \"Four\", \"Five\", \"Six\", \"Seven\", \"Eight\", \"Nine\", \n                          \"Ten\", \"Jack\", \"Queen\", \"King\", \"Ace\" };\n\nchar *suitname[] = { \"Hearts\", \"Diamonds\", \"Spades\", \"Clubs\" };\nchar *rankname[] = { \"Ace\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\", \"Seven\", \"Eight\", \"Nine\", \n                          \"Ten\", \"Jack\", \"Queen\", \"King\" };\n</code></pre>\n\n<p>Whether \"Ace\" is high or low, in neither case does rank \"Three\" have a value of <code>3</code>. I recommend dealing (pun!) with card values <code>0..51</code> and getting the suit and rank on demand with</p>\n\n<pre><code>int suit = card / 13;       // range 0..3\nint rank = card % 13;       // range 0..12\n</code></pre>\n\n<p>In both cases, the suit or rank is a value ranged from <code>0</code>, to suit (pun!) array indexing.</p>\n\n<p>As for the ranks' score values, you can define another array like this</p>\n\n<pre><code>int cardvalue[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10 };\n</code></pre>\n\n<p>So you can get the card's value with</p>\n\n<pre><code>int value = cardvalue[card % 13];\n</code></pre>\n\n<p>And print its description with</p>\n\n<pre><code>printf(\"%s of %s\", rankname[card % 13], suitname[card / 13]);\n</code></pre>\n\n<p>You can also get suit hierarchy (important in some card games) by the order you define them, as I showed.</p>\n"}], "owner": {"reputation": 47, "user_id": 5738983, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/11e7e062b4d11595c89f4628f3cc3f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Mallom", "link": "https://stackoverflow.com/users/5738983/mallom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "closed_date": 1452209634, "accepted_answer_id": 34641762, "answer_count": 2, "score": 0, "last_activity_date": 1452112918, "creation_date": 1452109446, "question_id": 34641471, "link": "https://stackoverflow.com/questions/34641471/how-can-i-assign-int-values-to-const-char-array-in-my-blackjack-game-c", "closed_reason": "Needs details or clarity", "title": "How can I assign int values to const char array in my blackjack game, C", "body": "<p>I'm working on a blackjack game in C. I have three functions, one to fill the deck, one for shuffling the cards and one for dealing the cards. My problem is that I don't know how to give my cards an integer value, I need that to see who wins. I would be very grateful for some input on how to solve this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"func.h\"\n\n/*fill deck with 52 cards*/\nvoid fillDeck(Card * const Deck, const char *suit[], const char *deck[]){\n\nint s;\nfor (s = 0; s &lt; 52; s++){\n    Deck[s].suits = deck[s % 13];\n    Deck[s].decks = suit[s / 13];\n}\nreturn;\n}\n\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"func.h\"\n\n/*shuffle cards*/\nvoid shuffle(Card * const Deck){\nint i, j;\nCard temp;\n\nfor (i = 0; i &lt; 52; i++){\n    j = rand() % 52;\n    temp = Deck[i];\n    Deck[i] = Deck[j];\n    Deck[j] = temp;\n}\nreturn;\n}\n\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include \"func.h\"\n\n/*deal cards*/\nvoid deal(const Card * const Deck, int size, int size_1, int size_2){\n\nint i, j, length;\nchar anotherCard[2];\nchar name1[30];\nchar name2[30];\n\nprintf(\"Name player one &gt; \");\nscanf(\"%s\", name1);\nprintf(\"Name player two &gt; \");\nscanf(\"%s\", name2);\n\nprintf(\"\\nWelcome %s and %s, lets begin!\\n\\n\", name1, name2);\ngetchar();\n\n    printf(\"%s's card:\\n\", name1);\n    for (i = 0; i &lt; size; i++){\n        printf(\"%5s of %-8s%c\", Deck[i].decks, Deck[i].suits, (i + 1) % 2 ? '\\t' : '\\n');\n    }\n\n    printf(\"\\n%s's card:\\n\", name2);\n    for (i = 2; i &lt; size_1; i++){\n        printf(\"%5s of %-8s%c\", Deck[i].decks, Deck[i].suits, (i + 1) % 2 ? '\\t' : '\\n');\n    }\n\n    printf(\"\\nDealer card:\\n\");\n    for (i = 4; i &lt; size_2; i++){\n        printf(\"%5s of %-8s%c\", Deck[i].decks, Deck[i].suits, (i + 1) % 2 ? '\\t' : '\\n');\n    }\nreturn;\n}\n\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include \"func.h\"\n\nint main(void){\n\nCard allCards[52];\nconst char *suits[] = { \"spades\", \"hearts\", \"diamonds\", \"clubs\" };\nchar *decks[] = { \"ace\", \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"ten\", \"jack\", \"queen\", \"king\" };\nint *values[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10 };\n\nsrand(time(NULL));\n\nfillDeck(allCards, suits, decks, values);\nshuffle(allCards);\ndeal(allCards, 2, 4, 6);\n\ngetchar();\nreturn 0;\n}\n\n\n\n/*func.h*/\nstruct card{\n    const char *suits;\n    const char *decks;\n};\n\ntypedef struct card Card;\n\nvoid fillDeck(Card * const Deck, char *suit[], char *deck[]);\n\nvoid shuffle(Card * const Deck);\n\nvoid deal(const Card * const Deck, int size, int size_1, int size_2);\n\n#endif\n</code></pre>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1452109451, "post_id": 34641404, "comment_id": 57028531, "body": "<code>EOF</code> is not typed like that, it is a defined value for testing as a variable&#39;s value. When typing at the console, in Linux you type <code>Ctrl-D</code> to create an end-of-file, in Windows it is <code>Ctrl-Z</code>. When reading a disk file, it is used by the system to signify there was no more data in the file"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452109462, "post_id": 34641404, "comment_id": 57028540, "body": "<code>EOF</code> is not a character present in the file, it&#39;s a constant used by the library functions to notify the failure of an operation due to the end of the file was reached."}, {"owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "edited": false, "score": 0, "creation_date": 1452109609, "post_id": 34641404, "comment_id": 57028650, "body": "To use <code>EOF</code>, <code>NULL</code>.. you need <code>#include &lt;stdlib.h&gt;</code> at the top"}, {"owner": {"reputation": 79, "user_id": 5754028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09fd6b8df7207f1012d9c4842452e50e?s=128&d=identicon&r=PG&f=1", "display_name": "Bar K", "link": "https://stackoverflow.com/users/5754028/bar-k"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1452112972, "post_id": 34641404, "comment_id": 57030702, "body": "@WeatherVane I didn&#39;t know how to show the Ctrl-Z so I just typed &#39;EOF&#39;. Originaly in my cmd i typed  &#39;a a;Ctrl-Z&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 0, "last_activity_date": 1458555097, "creation_date": 1458555097, "answer_id": 36128151, "question_id": 34641404, "link": "https://stackoverflow.com/questions/34641404/unexpected-behavior-of-a-c-program-trying-to-solve-e6-2-from-kr/36128151#36128151", "title": "unexpected behavior of a c program, trying to solve E6-2 from K&amp;R", "body": "<p>Your doing nothing wrong. Due to the usual design of the C stdio library functions, EOF is only recognized if there is no preceding unread input, so you have to type <kbd>Enter</kbd> <kbd>Ctrl</kbd>-<kbd>Z</kbd> or <kbd>Ctrl</kbd>-<kbd>Z</kbd><kbd>Ctrl</kbd>-<kbd>Z</kbd>.</p>\n"}], "owner": {"reputation": 79, "user_id": 5754028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09fd6b8df7207f1012d9c4842452e50e?s=128&d=identicon&r=PG&f=1", "display_name": "Bar K", "link": "https://stackoverflow.com/users/5754028/bar-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 36128151, "answer_count": 1, "score": 1, "last_activity_date": 1458555097, "creation_date": 1452109183, "last_edit_date": 1452114415, "question_id": 34641404, "link": "https://stackoverflow.com/questions/34641404/unexpected-behavior-of-a-c-program-trying-to-solve-e6-2-from-kr", "title": "unexpected behavior of a c program, trying to solve E6-2 from K&amp;R", "body": "<p><strong>Exercise 6-2.</strong> Write a program that reads a C program and prints in alphabetical order each group of\nvariable names that are identical in the first 6 characters, but different somewhere thereafter. Don't count\nwords within strings and comments. Make 6 a parameter that can be set from the command line. (from K&amp;R)</p>\n\n<p>I started working on the exercise, and I'm stuck on the beginning. I tried to get the whole input and save it line by line in an array, and then point pointers in an array to the saved line. Later I thought of allocating space for each word and coppy them to a tree. However, in the following code when I'm typing as an input:</p>\n\n<blockquote>\n  <p>abc def;'Ctrl-Z'</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLINE 100\n#define MAXWORDS 10\n\nint read_input(char *[]);\n\nint main(int argc, char *argv[])\n{\n    char *variables[MAXWORDS] = {0};\n    int i;\n    int tmp;\n\n\n    while((tmp = read_input(variables)) != EOF){\n        for(i=0; i &lt; tmp; i++){\n            printf(\"%s \",*(variables+i));\n        }\n    }\n\n\n    return 0;\n}\n\n\n/* read_input: mapping all the input words into *variables[], and returning the number of the words + 1 */\nint read_input(char *variables[]){\n    static char s[MAXLINE];\n    int tmp;\n    int i, j;\n\n    i = 0;\n    if((tmp = getline(s, MAXLINE)) == EOF)\n        return EOF;\n\n    for(j = 0; j &lt; MAXWORDS &amp;&amp; s[i] != '\\0'; j++){ /* it does'nt work when j = MAXWORDS because the rest of the line is not saved */\n        while(!isalpha(s[i]))\n            i++;\n        *(variables+j) = &amp;s[i];\n        while(isalnum(s[i]) || s[i] == '_')\n            i++;\n        if(s[i] == '\\0')\n            continue;\n        s[i++] = '\\0';\n    }\n    return j;\n}\n\n/* getline: read a line into s, return length */\nint getline(char *s,int lim)\n{\n    static char end; /* static typed char that saves if the last not saved 'c' was an EOF */\n    char c;\n    int i;\n    if(end == EOF){ /* the last input character was an EOF */\n        end = 0;\n        return EOF;\n    }\n    for (i=0; i &lt; lim-1 &amp;&amp; (c=getchar())!=EOF &amp;&amp; c!=';'; ++i)\n        s[i] = c;\n    s[i] = '\\0';\n    if(i &gt; 0 &amp;&amp; c == EOF)\n        end = EOF;\n    else if(i == 0 &amp;&amp; c == EOF){\n        printf(\"!\");\n        return EOF;\n    }\n    else\n        return i;\n\n}\n</code></pre>\n\n<p>the program doesn't stop immediately, and the main's while loop would ask for another input... what am I doing wrong?</p>\n"}, {"tags": ["c", "random", "bit"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1452109291, "post_id": 34641358, "comment_id": 57028430, "body": "Use an unsigned integer if you are playing with bits."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 4, "creation_date": 1452109507, "post_id": 34641358, "comment_id": 57028572, "body": "@Rafal <code>sum=255</code> - not a comparison."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 1, "creation_date": 1452109543, "post_id": 34641358, "comment_id": 57028598, "body": "You need to generate a new random number in the while loop. And you need an outer loop to compute the average."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452112880, "post_id": 34641358, "comment_id": 57030647, "body": "Why 255?  <code>USHRT_MAX</code> is at least 65535?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452113512, "post_id": 34641358, "comment_id": 57030968, "body": "Pedantically speaking, this is not solvable on all  platforms as the range of <code>unsigned short</code> may have more positive values than <code>int</code> - the return type of <code>rand()</code>.  Yet only odd/old/and current 16-bit processors machines would have that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452119271, "post_id": 34641358, "comment_id": 57033970, "body": "Note: experimentally found the average to be about <code>ln2(int_bit_width-1&#47;3) + 1.3</code>  YMMV"}], "answers": [{"tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1452113811, "last_edit_date": 1452113811, "creation_date": 1452109158, "answer_id": 34641396, "question_id": 34641358, "link": "https://stackoverflow.com/questions/34641358/c-random-numbers-that-logic-bit-sumor-is-equal-to-max-unsigned-short-value/34641396#34641396", "title": "C random numbers that logic bit sum(OR) is equal to max unsigned short value", "body": "<p><code>sum=255</code>is an assignment a not compare operator. Apart from this you want to continue as long as <code>sum</code> is not equal <code>USHRT_MAX</code>. If you write a <code>return</code> instruction into a loop without any condition, the loop will terminate directly.\nTo get different numbers you have to call <code>rand</code> inside your loop. Function <code>rand</code> returns a value of type <code>int</code>. Adapt your code like this:</p>\n\n<pre><code>int main(){\n\n    int count=0;\n    unsigned short sum = 0;\n    while(sum != USHRT_MAX){\n        unsigned short r = (unsigned short)rand();\n        sum = sum | r;\n        count++;\n    }\n    printf(\"the answer is : %d numbers\\n\", count);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5754038, "user_type": "registered", "profile_image": "https://graph.facebook.com/915134081866998/picture?type=large", "display_name": "Rafa\u0142 \u017bebrowski", "link": "https://stackoverflow.com/users/5754038/rafa%c5%82-%c5%bbebrowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1452198094, "accepted_answer_id": 34641396, "answer_count": 1, "score": 1, "last_activity_date": 1452186770, "creation_date": 1452109040, "last_edit_date": 1452186770, "question_id": 34641358, "link": "https://stackoverflow.com/questions/34641358/c-random-numbers-that-logic-bit-sumor-is-equal-to-max-unsigned-short-value", "closed_reason": "Needs details or clarity", "title": "C random numbers that logic bit sum(OR) is equal to max unsigned short value", "body": "<p>Task is to write a program that counts an avarage number of unsigned short ints needed to make their bit logical sum(a1 OR a2 OR a3\u2026) be equal to 111..1. I'd really be thankful for any kind of help. Edit: adapted like that and loop still doesnt exit.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(){\n\nint count=0;\nunsigned short sum = 0;\nunsigned short USHRT_MAX = 65535;\n\nwhile(sum != USHRT_MAX ){\n    unsigned short r = (unsigned short)rand()%USHRT_MAX;\n    sum = sum | r;\n    count++;\n}\nprintf(\"the answer is : %d numbers\\n\", count);\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "arrays", "pointers", "memory", "memory-management"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1452107462, "post_id": 34640831, "comment_id": 57027249, "body": "<code>2x sizeof(char) = 2x 1Byte</code> should be <code>2x sizeof(char *) </code> - This depends on the platform"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1452107483, "post_id": 34640831, "comment_id": 57027263, "body": "All of the assumptions are wrong. <code>malloc(sizeof(Friends))</code> will allocate (at least) <code>2 * sizeof(char*) </code> - mind the <code>*</code>. It is allocating space for pointers, not for chars. If you want to fill them with something, you will have to perform additional allocations."}, {"owner": {"reputation": 39, "user_id": 5641978, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc2f027d00b2919ce256d72e429815ce?s=128&d=identicon&r=PG&f=1", "display_name": "Scarh", "link": "https://stackoverflow.com/users/5641978/scarh"}, "edited": false, "score": 0, "creation_date": 1452108060, "post_id": 34640831, "comment_id": 57027640, "body": "Thanks alot, I got it now !"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1452109314, "post_id": 34640831, "comment_id": 57028447, "body": "If you find that you did not allocate enough memory with <code>malloc</code> you can use <code>realloc</code> to increase (or decrease) its size. Don&#39;t forget to allow for string terminator."}], "answers": [{"tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 2, "last_activity_date": 1452107888, "last_edit_date": 1452107888, "creation_date": 1452107515, "answer_id": 34640892, "question_id": 34640831, "link": "https://stackoverflow.com/questions/34640831/dynamic-memory-allocation-with-structs/34640892#34640892", "title": "dynamic memory allocation with structs", "body": "<blockquote>\n  <p>I got a structure,</p>\n\n<pre><code>struct Friends{\nchar *firstname; \nchar *lastname;\n};\n</code></pre>\n  \n  <p>if I do allocate memory now, it will get me</p>\n\n<pre><code>2x sizeof(char) = 2x 1Byte\n</code></pre>\n</blockquote>\n\n<p>Instead of <code>char</code>'s, you are allocating pointers here <code>sizeof(char *)</code>. Depending on the system, those are 4 bytes (32-bit) or 8 bytes (64-bit) each.</p>\n\n<p>So, if you want data where your pointers point to, you will have to allocate that, with <code>malloc()</code> for example, and <code>free()</code> them later.</p>\n\n<p>Or do something like:</p>\n\n<pre><code>struct Friends{\n    char firstname[20]; \n    char lastname[20];\n};\n</code></pre>\n\n<p>But make sure your strings end with a <code>\\0 char</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1452107565, "creation_date": 1452107565, "answer_id": 34640911, "question_id": 34640831, "link": "https://stackoverflow.com/questions/34640831/dynamic-memory-allocation-with-structs/34640911#34640911", "title": "dynamic memory allocation with structs", "body": "<p>If i understood your problem correctly, you want to see the memory allocated for <code>firstname</code> and <code>lastname</code> based on your requirement of the future storage.</p>\n\n<p>I'm afraid, that is not possible.</p>\n\n<p>When you got a variable of type <code>struct Friends</code>, say <code>struct Friends F;</code>, <code>F.firstname</code> and <code>F.lastname</code> will be pointers but they will not be pointing to any <em>valid</em> memory. You need to perform the allocation for <code>F.firstname</code> and <code>F.lastname</code> separately. Something like</p>\n\n<pre><code>F.firstname = malloc(32);\nF.lastname = malloc(32);   //perform NULL check too\n</code></pre>\n\n<p>and then you can actually make use of <code>F.firstname</code> and <code>F.lastname</code></p>\n"}, {"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 0, "last_activity_date": 1452108130, "creation_date": 1452108130, "answer_id": 34641093, "question_id": 34640831, "link": "https://stackoverflow.com/questions/34640831/dynamic-memory-allocation-with-structs/34641093#34641093", "title": "dynamic memory allocation with structs", "body": "<blockquote>\n  <p>Everywhere I look they allocate the memory, before they know how much they will fill the structure with.</p>\n</blockquote>\n\n<p>If I understood properly you are asking how we can allocate memory before they know how much space we gonna use.  </p>\n\n<p>Consider the following structure:  </p>\n\n<pre><code>struct foo\n{\n    char bar;\n    char foobar;\n};\n\nstruct foo *temp = (struct foo *) malloc(sizeof(struct foo));  \n</code></pre>\n\n<p>Here <code>2 * 1 = 2 bytes</code> will be allocated dynamically whether you store something in <code>bar</code> and <code>foobar</code> variables or not.  </p>\n\n<p>If you don't store anything then the variable (memory location) contains grabage value.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1452113700, "creation_date": 1452113700, "answer_id": 34642580, "question_id": 34640831, "link": "https://stackoverflow.com/questions/34640831/dynamic-memory-allocation-with-structs/34642580#34642580", "title": "dynamic memory allocation with structs", "body": "<blockquote>\n  <p>Everywhere I look they allocate the memory, before they know how much\n  they will fill the structure with.</p>\n</blockquote>\n\n<p>Yes and no.</p>\n\n<pre><code>struct Friends {\n    char *firstname; \n    char *lastname;\n};\n</code></pre>\n\n<p>It all depends on how you intend to use your structure. There are multiple ways you can use <code>struct Friends</code>. You can declare a static instance of the struct, and then simply assign the address of existing strings to your <code>firstname</code> and <code>lastname</code> member pointers, e.g.:</p>\n\n<pre><code>int main (void) {\n\n    Struct Friends friend = {{Null}, {NULL]};\n\n    /* simple assignment of pointer address\n     * (memory at address must remain valid/unchanged)\n     */\n    friend.firstname = argc &gt; 1 ? argv[1] : \"John\";\n    friend.lastname = argc &gt; 2 ? argv[2] : \"Smith\";\n\n    printf (\"\\n name: %s %s\\n\\n\", friend.firstname, friend.lastname);\n</code></pre>\n\n<p>However, in most cases, you will want to create a copy of the information and store a copy of the string for the <code>firstname</code> and <code>lastname</code> members. In that case you need to allocate a new block of memory for each pointer and assign the starting address for each new block to each pointer. Here you now know what your strings are, and you simply need to allocate memory for the length of each string (<code>+1</code> for the <em>nul-terminating</em> character) e.g.:</p>\n\n<pre><code>int main (int argc, char **argv) {\n\n    /* declare static instance of struct */\n    struct Friends friend = {NULL, NULL};\n\n    char *first = argc &gt; 1 ? argv[1] : \"John\";\n    char *last = argc &gt; 2 ? argv[2] : \"Smith\";\n\n    /* determine the length of each string */\n    size_t len_first = strlen (first);\n    size_t len_last = strlen (last);\n\n    /* allocate memory for each pointer in 'friend' */\n    friend.firstname = malloc (len_first * sizeof *friend.firstname + 1);\n    friend.lastname  = malloc (len_last * sizeof *friend.lastname + 1);\n</code></pre>\n\n<p>You then need only copy each string to the address for each member:</p>\n\n<pre><code>    /* copy names to new memory referenced by each pointer */\n    strcpy (friend.firstname, first);\n    strcpy (friend.lastname, last);\n</code></pre>\n\n<p>Finally, once you are done using the memory allocated, you must free the memory with <code>free</code>. <strong>note:</strong> you can only <code>free</code> memory that you have previously allocated with <code>malloc</code> or <code>calloc</code>. Never blindly attempt to free memory that has not been allocated that way. To free the members, all you need is:</p>\n\n<pre><code>    /* free allocated memory */\n    free (friend.firstname);\n    free (friend.lastname);\n</code></pre>\n\n<p>A short example putting all the pieces together is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct Friends {\n    char *firstname;\n    char *lastname;\n};\n\nint main (int argc, char **argv) {\n\n    /* declare static instance of struct */\n    struct Friends friend = {NULL, NULL};\n\n    char *first = argc &gt; 1 ? argv[1] : \"John\";\n    char *last = argc &gt; 2 ? argv[2] : \"Smith\";\n\n    /* determine the length of each string */\n    size_t len_first = strlen (first);\n    size_t len_last = strlen (last);\n\n    /* allocate memory for each pointer in 'friend' */\n    friend.firstname = malloc (len_first * sizeof *friend.firstname + 1);\n    friend.lastname  = malloc (len_last * sizeof *friend.lastname + 1);\n\n    /* copy names to new memory referenced by each pointer */\n    strcpy (friend.firstname, first);\n    strcpy (friend.lastname, last);\n\n    printf (\"\\n name: %s %s\\n\\n\", friend.firstname, friend.lastname);\n\n    /* free allocated memory */\n    free (friend.firstname);\n    free (friend.lastname);\n\n    return 0;\n}\n</code></pre>\n\n<p>Always compile with <em>warnings enabled</em>, for example:</p>\n\n<pre><code>gcc -Wall -Wextra -o bin/struct_dyn_alloc struct_dyn_alloc.c\n</code></pre>\n\n<p>(if not using <code>gcc</code>, then your compiler will have similar options)</p>\n\n<p>Anytime you dynamically allocate memory in your code, run in though a memory error checking program to insure you are not misusing the allocated blocks of memory in some way, and to confirm all memory has been freed. It is simple to do. All OS's have some type of checker. <code>valgrind</code> is the normal choice on Linux. For example:</p>\n\n<pre><code>$  valgrind ./bin/struct_dyn_alloc\n==14805== Memcheck, a memory error detector\n==14805== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==14805== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==14805== Command: ./bin/struct_dyn_alloc\n==14805==\n\n name: John Smith\n\n==14805==\n==14805== HEAP SUMMARY:\n==14805==     in use at exit: 0 bytes in 0 blocks\n==14805==   total heap usage: 2 allocs, 2 frees, 11 bytes allocated\n==14805==\n==14805== All heap blocks were freed -- no leaks are possible\n==14805==\n==14805== For counts of detected and suppressed errors, rerun with: -v\n==14805== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114230, "creation_date": 1452114230, "answer_id": 34642712, "question_id": 34640831, "link": "https://stackoverflow.com/questions/34640831/dynamic-memory-allocation-with-structs/34642712#34642712", "title": "dynamic memory allocation with structs", "body": "<p>So with types like yours above, you have basically a two-step allocation process:</p>\n\n<ol>\n<li><p>First, you allocate an object of type <code>struct Friends</code>, which contains space for two pointers;</p></li>\n<li><p>Second, you allocate memory for the objects that each member of <code>struct Friends</code> will point to.</p></li>\n</ol>\n\n<p>Quick and dirty example:</p>\n\n<pre><code>struct Friends *addFriend( const char *firstName, const char *lastName )\n{\n  /**\n   * First, allocate an instance of `struct Friends`, which will contain\n   * enough space to store two pointers to `char`\n   */\n  struct Friends *f = malloc( sizeof *f ); // sizeof *f == sizeof (struct Friends)\n\n  if ( f )                                 \n  {\n    /**\n     * Allocate space to store a *copy* of the contents of the firstName\n     * parameter, assign the resulting pointer to the firstname member of\n     * the struct instance.\n     */\n    f-&gt;firstname = malloc( strlen( firstName ) + 1 ); \n    if ( f-&gt;firstname )\n      strcpy( f-&gt;firstname, firstName );\n\n    /**\n     * Do the same for lastName\n     */\n    f-&gt;lastName = malloc( strlen( lastName ) + 1 );\n    if ( f-&gt;lastname )\n      strcpy( f-&gt;lastname, lastName );\n  }\n  return f;\n}\n</code></pre>\n\n<p>If we call this function as</p>\n\n<pre><code>struct Friends newFriend = addFriend( \"John\", \"Bode\" );\n</code></pre>\n\n<p>we get something like the following in memory:</p>\n\n<pre><code>           +---+                           +---+      +---+---+---+---+---+\n newFriend:|   | --&gt; newFriend-&gt;firstname: |   | ----&gt;|'J'|'o'|'h'|'n'| 0 |\n           +---+                           +---+      +---+---+---+---+---+\n                     newFriend-&gt;lastname:  |   | -+\n                                           +---+  |   +---+---+---+---+---+\n                                                  +--&gt;|'B'|'o'|'d'|'e'| 0 |\n                                                      +---+---+---+---+---+\n</code></pre>\n\n<p>Here's how it plays out on my system:</p>\n\n<pre><code>                Item        Address   00   01   02   03\n                ----        -------   --   --   --   --\n           newFriend 0x7fffe6910368   10   20   50   00    ..P.\n                     0x7fffe691036c   00   00   00   00    ....\n\n          *newFriend       0x502010   30   20   50   00    0.P.\n                           0x502014   00   00   00   00    ....\n                           0x502018   50   20   50   00    P.P.\n                           0x50201c   00   00   00   00    ....\n\nnewFriend-&gt;firstname       0x502030   4a   6f   68   6e    John\n\n newFriend-&gt;lastname       0x502050   42   6f   64   65    Bode\n</code></pre>\n\n<p>The <code>newFriend</code> pointer variable lives at address <code>0x007fffe6910368</code>.  It points to an object of type <code>struct Friends</code> which lives at address <code>0x502010</code>.  This object is large enough to store two pointer values; <code>newFriend-&gt;firstname</code> lives at address <code>0x502010</code><sup>1</sup> and points to the string <code>\"John\"</code>, which lives at address <code>0x502030</code>.  <code>newFriend-&gt;lastname</code> lives at address <code>0x502018</code> and points to the string <code>\"Bode\"</code>, which lives at address <code>0x502050</code>.  </p>\n\n<p>To deallocate, you free the members before freeing the struct object:</p>\n\n<pre><code>void deleteFriend( struct Friends *f )\n{\n  free( f-&gt;firstname );\n  free( f-&gt;lastname );\n  free( f );\n}\n</code></pre>\n\n<p>It doesn't matter what order you free <code>f-&gt;firstname</code> and <code>f-&gt;lastname</code> with respect to each other; what matters is that you have to delete both of them before you can delete <code>f</code>.  Freeing <code>f</code> <em>won't</em> free what <code>f-&gt;firstname</code> and <code>f-&gt;lastname</code> point to<sup>2</sup>.</p>\n\n<p>Note that this all assumes I'm being given data with a known size (the <code>firstName</code> and <code>lastName</code> parameters in <code>addFriend</code>); I use the lengths of those input strings to determine how much space I need to allocate.</p>\n\n<p>Sometimes you do not know ahead of time how much space you need to set aside.  The usual approach is to allocate some initial amount of storage and to extend it as necessary using the <code>realloc</code> function.  For example, suppose we have code to read a single line of text terminated by a newline character from an input stream.  We want to be able to handle lines of any length, so we start out by allocating enough space to handle most cases, and if we need more, we double the size of the buffer as necessary:</p>\n\n<pre><code>size_t lineSize = 80;  // enough for most cases\nchar *line = calloc( lineSize, sizeof *line );\nchar buffer[20]; // input buffer for reading from stream\n\n/** \n * Keep reading until end of file or error.\n */\nwhile ( fgets( buffer, sizeof buffer, stream ) != NULL )\n{\n  if ( strlen( line ) + strlen( buffer ) &gt;= lineSize )\n  {\n    /**\n     * There isn't enough room to store the new string in the output line,\n     * so we double the output line's size.\n     */\n    char *tmp = realloc( line, 2 * lineSize );\n    if ( tmp )\n    {\n      line = tmp;\n      lineSize *= 2;\n    }\n    else\n    {\n      /**\n       * realloc call failed, handle as appropriate.  For this\n       * example, we break out of the loop immediately\n       */\n      fprintf( stderr, \"realloc error, breaking out of loop\\n\" );\n      break;\n    }\n  }\n  strcat( line, buffer );\n\n  /**\n   * If we see a newline in the last input operation, break out of the\n   * loop.\n   */\n  if ( strchr( buffer, '\\n' ) )\n    break;\n}\n</code></pre>\n\n<p><hr>\n<sup>1.  The address of the first element of a <code>struct</code> is the same as the address of the whole <code>struct</code> object; C doesn't store any kind of metadata before the first <code>struct</code> member. <br><br>\n2.  Note that you can only call <code>free</code> on an object that was allocated with <code>malloc</code>, <code>calloc</code>, or <code>realloc</code>; you would <em>not</em> call <code>free</code> on a pointer that points to a string literal or another array.\n</sup></p>\n"}], "owner": {"reputation": 39, "user_id": 5641978, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc2f027d00b2919ce256d72e429815ce?s=128&d=identicon&r=PG&f=1", "display_name": "Scarh", "link": "https://stackoverflow.com/users/5641978/scarh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4281, "favorite_count": 1, "answer_count": 5, "score": 2, "last_activity_date": 1452114230, "creation_date": 1452107346, "last_edit_date": 1452107798, "question_id": 34640831, "link": "https://stackoverflow.com/questions/34640831/dynamic-memory-allocation-with-structs", "title": "dynamic memory allocation with structs", "body": "<p>it seems like i did not really understand how the memory allocation with pointers works.</p>\n\n<p>Quick example:</p>\n\n<p>I got a structure, </p>\n\n<pre><code>    struct Friends{\n    char *firstname; \n    char *lastname;\n    };\n</code></pre>\n\n<p>if I do allocate memory now, it will get me   </p>\n\n<pre><code>    2x sizeof(char) = 2x 1Byte\n</code></pre>\n\n<p>but, doesnt the free memory I need depend on how many characters I fill it with?</p>\n\n<p>example: </p>\n\n<pre><code>    char array[10] needs 10x sizeof(char), 1byte for each character?\n</code></pre>\n\n<p>Everywhere I look they allocate the memory, before they know how much they will fill the structure with.</p>\n"}, {"tags": ["c", "pthreads", "spinlock"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1452106684, "post_id": 34640579, "comment_id": 57026787, "body": "If by deleted, you mean no longer an object, then you can be sure it is undefined behavior."}, {"owner": {"reputation": 1237, "user_id": 1774080, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/zhKuK.jpg?s=128&g=1", "display_name": "Noob Doob", "link": "https://stackoverflow.com/users/1774080/noob-doob"}, "edited": false, "score": 0, "creation_date": 1452106890, "post_id": 34640579, "comment_id": 57026900, "body": "That&#39;s a good issue to what I am trying to do - for a university exercise, I am requested to implement &quot;optimistic synchronization&quot; - that is, removing and adding nodes searches the list without locks, locks the nodes AFTER they are found, and then ensures the locked nodes are still valid inside the list before proceeding. But the latter validation does not address the main issues it seems - that is, things might occur between finding and locking the nodes."}], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 2, "last_activity_date": 1452107888, "last_edit_date": 1452107888, "creation_date": 1452107409, "answer_id": 34640852, "question_id": 34640579, "link": "https://stackoverflow.com/questions/34640579/posix-threads-attempting-lock-on-empty-spinlock/34640852#34640852", "title": "POSIX threads - attempting lock on empty spinlock", "body": "<p>The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow\">documentation</a> is clear: <em>The results are undefined if any of these functions is called with an uninitialized spin lock.</em></p>\n\n<p>After an object is deleted, it should be regarded as if it is in an uninitialized state. (Also depends on what the definition of deleted is in this case, which we didn't clarify, so there might be additional caveats.)</p>\n\n<p>It is not specified what happens if you pass a NULL to the function. It will probably return EINVAL: <em>If an implementation detects that the value specified by the lock argument to pthread_spin_lock() or pthread_spin_trylock() does not refer to an initialized spin lock object, it is recommended that the function should fail and report an [EINVAL] error.</em></p>\n"}], "owner": {"reputation": 1237, "user_id": 1774080, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/zhKuK.jpg?s=128&g=1", "display_name": "Noob Doob", "link": "https://stackoverflow.com/users/1774080/noob-doob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 34640852, "answer_count": 1, "score": 0, "last_activity_date": 1452107888, "creation_date": 1452106355, "question_id": 34640579, "link": "https://stackoverflow.com/questions/34640579/posix-threads-attempting-lock-on-empty-spinlock", "title": "POSIX threads - attempting lock on empty spinlock", "body": "<p>What happens if I try to lock on an invalid pthread type spinlock? The scenario might occur on a linked list using optimistic synchronization, utilizing a spinlock on each node, between the phase of finding the desired nodes and actually locking them. When I find them, I have a valid reference towards them, but what happens if they are e.g. deleted before I am able to lock them? The result would be trying to lock on a NULL pointer - can that cause the program to terminate, or will it just make <code>pthread_spin_lock()</code> return with a specific value?</p>\n"}, {"tags": ["c", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3948941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b3a0d4fbe86c391ec1d129a30d7d4d?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Freites", "link": "https://stackoverflow.com/users/3948941/carlos-freites"}, "edited": false, "score": 0, "creation_date": 1452147130, "post_id": 34640146, "comment_id": 57042365, "body": "OMG I lost four hours in this. Thank you a lot @R_Kapp"}], "tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": true, "score": 2, "last_activity_date": 1452104862, "creation_date": 1452104862, "answer_id": 34640146, "question_id": 34640094, "link": "https://stackoverflow.com/questions/34640094/static-allocation-of-array-of-structures-in-c/34640146#34640146", "title": "static allocation of array of structures in c", "body": "<p><code>record[2]</code> accesses the third element of <code>record</code>, which only has two elements, as it is declared <code>struct student record[2];</code>. Either change this to <code>struct student record[3];</code> so that you have the needed space, or change your code to only have two students.</p>\n"}], "owner": {"reputation": 23, "user_id": 3948941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b3a0d4fbe86c391ec1d129a30d7d4d?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Freites", "link": "https://stackoverflow.com/users/3948941/carlos-freites"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 34640146, "answer_count": 1, "score": -1, "last_activity_date": 1452104862, "creation_date": 1452104698, "question_id": 34640094, "link": "https://stackoverflow.com/questions/34640094/static-allocation-of-array-of-structures-in-c", "title": "static allocation of array of structures in c", "body": "<p>I believed that declaring the array <strong><em>record</em></strong> of the structure <strong><em>student</em></strong>, having an  array of another structure (<strong><em>StudentData</em></strong>) as a member, would allocate automatically static memory for all members. However this program crash [Segmentation fault (core dumped) in the line record[2].percentage = 81.5;]</p>\n\n<p>In other words I believed that for <strong>record[0]</strong> I would have allocated statically sizeof(int), sizeof(float) and an array of 30 of 220 bytes each one (20 for <strong>name</strong> and 200 for <strong>address</strong>). Even the debugger confirms this hypothesis, however the program crash.</p>\n\n<p>I would like to know what I am doing wrong or if I have miss understood static allocation of array of structures in c or something else.</p>\n\n<p>I am using gcc.</p>\n\n<p>Thank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;;\n#include &lt;string.h&gt;;\n\ntypedef struct StData{\n    char name[20];\n    char address[200];\n} StData;\n\nstruct student{\n    int id;\n    struct StData StudentData[30];\n    float percentage;\n};\n\nvoid tgin_ini(struct StData tgin[],int tgin_size){\nint n;\n\n    for(n=0;n&lt;tgin_size;++n){\n        tgin[n].name[0] = '\\0';\n        tgin[n].address[0] = '\\0';\n    }\n}\n\nint main(){\n    int i,n;\n    struct student record[2];\n\n    for(n=0;n&lt;2;++n){\n        record[n].id=1;\n        record[n].percentage = 86.5;\n        tgin_ini(record[n].StudentData,30);\n    }\n\n\n    // 1st student's record\n    record[0].id=1;\n    strcpy(record[0].StudentData[0].name, \"Raju\");\n    strcpy(record[0].StudentData[0].address, \"Planet earth, island called america\");\n    record[0].percentage = 86.5;\n\n    // 2nd student's record         \n    record[1].id=2;\n    strcpy(record[1].StudentData[1].name, \"Surendren\");\n    strcpy(record[1].StudentData[1].address, \"Planet earth, island called europa\");\n    record[1].percentage = 90.5;\n\n    // 3rd student's record\n    record[2].id=3;\n    strcpy(record[2].StudentData[2].name, \"Thiyagu\");\n    strcpy(record[2].StudentData[2].address, \"Planet earth, island called asia\");\n    record[2].percentage = 81.5;\n\n    for(i=0; i&lt;3; i++)\n    {\n        printf(\"     Records of STUDENT : %d \\n\", i+1);\n        printf(\" Id is: %d \\n\", record[i].id);\n        printf(\" Name is: %s \\n\", record[i].StudentData[i].name);\n        printf(\" Name is: %s \\n\", record[i].StudentData[i].address);\n        printf(\" Percentage is: %f\\n\\n\",record[i].percentage);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "scanf"], "comments": [{"owner": {"reputation": 13, "user_id": 4409103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JB90N.jpg?s=128&g=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/4409103/francesco"}, "edited": false, "score": 0, "creation_date": 1452197390, "post_id": 34639999, "comment_id": 57073883, "body": "break statements was inserted accidentally"}], "answers": [{"comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1452104977, "post_id": 34640125, "comment_id": 57025680, "body": "I wouldn&#39;t go as far as to suggest replacing <code>break;</code> with <code>printf(&quot;\\n&quot;);</code> as it doesn&#39;t really suggest that is needed, but removal of <code>break;</code> is spot on to avoid premature termination of the loop."}], "tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 1, "last_activity_date": 1452104805, "creation_date": 1452104805, "answer_id": 34640125, "question_id": 34639999, "link": "https://stackoverflow.com/questions/34639999/split-string-from-file-txt/34640125#34640125", "title": "Split string from file txt", "body": "<p>It exits because you used <code>break</code> as soon as you spot the <code>.</code>, <code>?</code> or <code>!</code> in input.<br>\nI believe what you want is to replace any of these three characters in input stream by <code>\\n</code>.<br>\nIf that's the case then replace <code>break</code> by <code>printf(\"\\n\")</code></p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 3852932, "user_type": "registered", "profile_image": "https://graph.facebook.com/1193762162/picture?type=large", "display_name": "Alexie Dariciuc", "link": "https://stackoverflow.com/users/3852932/alexie-dariciuc"}, "is_accepted": true, "score": 0, "last_activity_date": 1452105305, "creation_date": 1452105305, "answer_id": 34640272, "question_id": 34639999, "link": "https://stackoverflow.com/questions/34639999/split-string-from-file-txt/34640272#34640272", "title": "Split string from file txt", "body": "<p>Your code reads up to the first token found but it puts back the tokens so even without the \"break\" your program will not read any further , it will go into an infinite loop because your while condition isn't so well defined , it should be :</p>\n\n<pre><code> while (fscanf(file, \"%[^!?.]\", stringa) == 1) //checks if text was read successfully\n</code></pre>\n\n<p>Also you need to get rid of any tokens when encountered , this should do it:</p>\n\n<pre><code>while (fscanf(file, \"%[^!?.]\", stringa) == 1) {\n        printf(\"Data from file: %s\\n\", stringa);\n        fscanf(file,\"%*[!?.]\");\n    }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4409103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JB90N.jpg?s=128&g=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/4409103/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 34640272, "answer_count": 2, "score": 0, "last_activity_date": 1452163579, "creation_date": 1452104347, "last_edit_date": 1452163579, "question_id": 34639999, "link": "https://stackoverflow.com/questions/34639999/split-string-from-file-txt", "title": "Split string from file txt", "body": "<p>The C program must split the string when it finds ! or ? or .\nThe string must contain the \\n newline and ! or ? or . where it is present. An example of the file test.txt</p>\n\n<blockquote>\n  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor\n  incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam quis nostrud\n  exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n  Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit\n  laboriosam, nisi ut aliquid ex ea commodi consequatur Quis autem vel eum \n  iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae\n  consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>\n</blockquote>\n\n<p>my code reads up to the first token, where am I wrong?</p>\n\n<pre><code>int main(){\n    FILE *file;\n    char stringa[MAXCHAR];\n\n    file = fopen (\"prova.txt\", \"r\");\n    if (file == NULL){\n        perror(\"errore nell'apertura del file\");\n        return (1);\n    }\n    while (fscanf(file, \"%[^!?.]\", stringa) != EOF) {\n        printf(\"Data from file:\\n%s\", stringa);\n        //break; \n    }\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n\n<p>my output:</p>\n\n<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor\nincididunt ut labore et dolore magna aliqua</p>\n\n<p>Thanks for your help...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1452101626, "post_id": 34639109, "comment_id": 57023690, "body": "Your assumptions about the nature of <code>fscanf()</code>s return value are incorrect. RTFM."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 5, "creation_date": 1452101631, "post_id": 34639109, "comment_id": 57023692, "body": "Why are you comparing <code>fscanf()</code>&#39;s return value to <code>&#39;\\n&#39;</code>, sorry to ask like this but Did you bother reading the documentation?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452102476, "post_id": 34639109, "comment_id": 57024254, "body": "Rather than using loop like <code>while (foo() != one_of_several_values_that_cause_trouble)</code>, use  <code>while (foo() == the_one_value_code_expects)</code>.  IOWs: <code>while(fscanf(f1, &quot;%d&quot;, data) == 1)</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452102847, "post_id": 34639109, "comment_id": 57024452, "body": "@chux <code>while(fscanf(f1, &quot;%d&quot;, &amp;data) == 1)</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452107102, "post_id": 34639109, "comment_id": 57027016, "body": "Compiler warnings are there for good reasons. Enable and pay heed to them! If your compiler still does not complain, you have a rubbish compiler. Trash it and get a modern one (i.e. less than 10 years old)."}], "answers": [{"tags": [], "owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "is_accepted": false, "score": 3, "last_activity_date": 1452102838, "last_edit_date": 1452102838, "creation_date": 1452101906, "answer_id": 34639278, "question_id": 34639109, "link": "https://stackoverflow.com/questions/34639109/reading-string-and-integer-from-file-in-c/34639278#34639278", "title": "Reading string and integer from file in C", "body": "<p>An easier way is to read each line in full in a buffer and use <code>sscanf</code> to extract the names.</p>\n\n<pre><code> #define N 100\n char buffer[N];\n fgets(buffer, N, f1);\n unsigned num_tasks = 0;\n while(sscanf(buffer, \"%s\", header) == 1) {\n     printf(\"%s \\t\", header);\n     num_tasks++;\n }\n</code></pre>\n\n<p>Do the same for each line of marks and count students along the way. Stop when <code>fgets()</code> returns EOF.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1452107380, "post_id": 34639286, "comment_id": 57027184, "body": "<code>EOF</code> is not guaranteed to be <code>-1</code>. And this will result in an endless loop for invalid input."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452108313, "post_id": 34639286, "comment_id": 57027787, "body": "@Olaf: I assumed the file to contain all valid data as posted by OP himself/herself at the beginning of the question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452108485, "post_id": 34639286, "comment_id": 57027887, "body": "This attitude is the reason for rubbish software which crashes if the input is not exactly as expected. Better is defensive programming."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452108497, "post_id": 34639286, "comment_id": 57027897, "body": "@Olaf: Also yes EOF is not guaranteed to be -1 but it&#39;s guaranteed to be negative. See <a href=\"http://stackoverflow.com/a/4705984/1783971\">stackoverflow.com/a/4705984/1783971</a> So here first <code>while</code> loop is an infinite loop as I said."}], "tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": true, "score": 1, "last_activity_date": 1452111437, "last_edit_date": 1452111437, "creation_date": 1452101929, "answer_id": 34639286, "question_id": 34639109, "link": "https://stackoverflow.com/questions/34639109/reading-string-and-integer-from-file-in-c/34639286#34639286", "title": "Reading string and integer from file in C", "body": "<ol>\n<li><p><code>fscanf</code> returns the total number of arguments successfully matched so <code>fscanf(f1, \"%s\", header) != '\\n'</code> will always be true as <code>-1 &lt; 10</code> (EOF), <code>0 &lt; 10</code> (Matching failure but not end of file) and also <code>1 &lt; 10</code> (matched successfully). Here 10 is ASCII of <code>\\n</code>.  </p></li>\n<li><p>Also in second <code>fscanf</code> instead of <code>data</code>, it should be <code>&amp;data</code>.  </p></li>\n</ol>\n\n<p>Please read <code>man -s3 fscanf</code>.  </p>\n\n<p>Here correct solution will be:  </p>\n\n<pre><code>#define HEADERS 8\n\nchar header[10];\nint data, a, nos = 0;\n\nfor(a = 0; a &lt; HEADERS; a++) //assuming there'll always be 8 headers\n{\n    fscanf(f1, \"%s\", header);\n    printf(\"%s \\t\", header);\n}\nprintf(\"\\n\");\n\nwhile(fscanf(f1, \"%d\", &amp;data) == 1)\n{\n    nos++;\n    printf(\"%d \\t\", data);\n    if(!(nos % HEADERS))\n        printf(\"\\n\");\n}\n\nprintf(\"Number of students in class: %d\", nos/HEADERS); \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5753440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iB4TO.jpg?s=128&g=1", "display_name": "raz", "link": "https://stackoverflow.com/users/5753440/raz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 34639286, "answer_count": 2, "score": -1, "last_activity_date": 1452111437, "creation_date": 1452101413, "last_edit_date": 1452106623, "question_id": 34639109, "link": "https://stackoverflow.com/questions/34639109/reading-string-and-integer-from-file-in-c", "title": "Reading string and integer from file in C", "body": "<p>I have a file for marks of student as shown as below:      </p>\n\n<pre><code>T1 T2 T3 HW1 HW2 HW3 HW4 PRJ \n47 17 50 10  10  10  10  68\n20 41 40 15  10  10  10  80\n</code></pre>\n\n<p>but I don't know how the number of students in the class. I try to write a code to read the data from the file but I get infinite loop.</p>\n\n<pre><code>  char header[10];\n  int data;\n  int a;\n  int nos=0;\n\n  //READ HEADINGS OF THE TABLE\n  while(fscanf(f1, \"%s\", header) != '\\n')\n  {\n      printf(\"%s \\t\", header);\n  }\n  printf(\"\\n\");\n\n  //READ DATA OF THE TABLE     \n  while(fscanf(f1, \"%d\", data) != EOF)\n  {\n      for(a=0; a&lt;=7; ++a)\n      {\n          printf(\"%d \\t\", data);\n      }\n      printf(\"\\n\");\n  }\n  printf(\"\\n\");\n  printf(\"Number of students in class: %d\", nos/8); \n  system(\"pause\");\n</code></pre>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 134, "user_id": 2421510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1787a318e14f378236a53649580b5bc?s=128&d=identicon&r=PG", "display_name": "beneficii", "link": "https://stackoverflow.com/users/2421510/beneficii"}, "edited": false, "score": 0, "creation_date": 1452104787, "post_id": 34639004, "comment_id": 57025572, "body": "Have you considered using strtok()?"}, {"owner": {"reputation": 21, "user_id": 5752676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b3142dbbf22b5622d2dd306c8b1fc7?s=128&d=identicon&r=PG", "display_name": "Roxo", "link": "https://stackoverflow.com/users/5752676/roxo"}, "reply_to_user": {"reputation": 134, "user_id": 2421510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1787a318e14f378236a53649580b5bc?s=128&d=identicon&r=PG", "display_name": "beneficii", "link": "https://stackoverflow.com/users/2421510/beneficii"}, "edited": false, "score": 0, "creation_date": 1452121888, "post_id": 34639004, "comment_id": 57035061, "body": "Yes, I have considered.  According to the manual it is a function that breaks a string into a sequence of zero  or  more  nonempty tokens.   The problem is that each line of the file has a number (~10) of columns fields and not all of them are guaranteed to be filled out and there is no separator between fields.    I need to read each line and extract the desired fields based on their length and kind (int, float or double).   Blank field must be read as zero."}], "answers": [{"comments": [{"owner": {"reputation": 1466, "user_id": 810658, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62139de5517901ce4c7ba8184070d24f?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/810658/philip"}, "edited": false, "score": 0, "creation_date": 1452102700, "post_id": 34639167, "comment_id": 57024383, "body": "I believe the integer value is always going to be up to 4 digits. If it&#39;s &#39;100&#39;, then the result would be &quot; 100&quot;, with the first digit being recorded as a space.   He&#39;s having trouble with scanf skipping over whitespace and not counting it towards the integer&#39;s size."}, {"owner": {"reputation": 21, "user_id": 5752676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b3142dbbf22b5622d2dd306c8b1fc7?s=128&d=identicon&r=PG", "display_name": "Roxo", "link": "https://stackoverflow.com/users/5752676/roxo"}, "edited": false, "score": 0, "creation_date": 1452108049, "post_id": 34639167, "comment_id": 57027632, "body": "Philip, you are correct, the problem is in the whitespace skipping.  iharob, I have tried your last solution, that is changing the sscanf format to &quot;%*4c%4[0-9 ]%f&quot;.  I don&#39;t really know what happened, but the result was strange.   Just with that change the program run produced:      $ ./t2     &gt;&gt;&gt;&gt;960045088|3.140000  It looks like the char counter and/or char selection pattern don&#39;t like to go together."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1452105994, "last_edit_date": 1452105994, "creation_date": 1452101570, "answer_id": 34639167, "question_id": 34639004, "link": "https://stackoverflow.com/questions/34639004/c-language-reading-columnated-text-file/34639167#34639167", "title": "C language reading columnated text file", "body": "<p>If each element is of fixed width you don't really need <code>scanf()</code>, try this</p>\n\n<pre><code>char copy[5];\nconst char *line = \"xxxx  993.14\";\nint ival;\nfloat fval;\n\ncopy[0] = line[4];\ncopy[1] = line[5];\ncopy[2] = line[6];\ncopy[3] = line[7];\ncopy[4] = '\\0'; // nul terminate for `atoi' to work\n\nival = atoi(copy);\nfval = atof(&amp;line[8]);\n\nfprintf(stdout, \"%d -- %f\\n\", ival, fval);\n</code></pre>\n\n<p>If you want (<em>probably should</em>) you can use <code>strtol()</code> instead of <code>atoi()</code> and <code>strtof()</code> instead of <code>atof()</code> to check for malformed data.</p>\n\n<p>Both these functions take a parameter to store the <em>unconverted</em>/<em>invalid</em> characters, you can check the passed pointer in order to verify that there was a problem with conversion.</p>\n\n<p>Or if you really want <code>scanf()</code> do the same, capture the integer + whitespaces to a <code>char</code> array and then convert it to <code>int</code> later, like this</p>\n\n<pre><code>char integer[5];\nconst char *line = \"xxxx  993.14\";\nint ival;\nfloat fval;\n\nif (sscanf(line, \"%*4c%4[0-9 ]%f\", integer, &amp;fval) != 2)\n    return -1;\nival = atoi(integer);\n\nfprintf(stdout, \"%d -- %f\\n\", ival, fval);\n</code></pre>\n\n<p>The format <code>\"%*4c%4[0-9 ]%f\"</code> will</p>\n\n<ol>\n<li>Skip the first four characters including white spaces.</li>\n<li>Scan the next four characters if they consist only of digits or white spaces.</li>\n<li>Scan the rest of the input string searching for a matching <code>float</code> value.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1466, "user_id": 810658, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62139de5517901ce4c7ba8184070d24f?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/810658/philip"}, "is_accepted": false, "score": 0, "last_activity_date": 1452104152, "last_edit_date": 1452104152, "creation_date": 1452103764, "answer_id": 34639826, "question_id": 34639004, "link": "https://stackoverflow.com/questions/34639004/c-language-reading-columnated-text-file/34639826#34639826", "title": "C language reading columnated text file", "body": "<p>First off, I dunno. There might be some way to wrangle sscanf to recognize the whitespace towards your integer count. But I just don't think scanf was made for this sort of format in mind. The tool's trying to be smart of helpful and it's biting you in the ass. </p>\n\n<p>But if it's columnated data and you know the position of the various fields, there's a really easy work around. Just extract the field you want.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char** argv)\n{\n  char line[] = \"xxxx  893.14\";\n  char tmp[100];\n  int thatDamnNumber;\n  float myfloatykins;\n\n  //Get that field\n  memcpy(tmp, line+4, 4);\n  sscanf(tmp, \"%d\", &amp;thatDamnNumber);\n\n  //Kill that field so it doesn't goober-up the float\n  memset(line+4, ' ', 4);\n  sscanf(line, \"%*4c%f\", &amp;myfloatykins);\n\n  printf(\"%d %f\\n\", thatDamnNumber, myfloatykins);\n\n  return 0;\n\n}\n</code></pre>\n\n<p>If there is a lot of this, you could make some generalized functions: integerExtract(int positionStart, int sizeInCharacters), floatExtract(), etc.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1452119468, "last_edit_date": 1452119468, "creation_date": 1452105494, "answer_id": 34640332, "question_id": 34639004, "link": "https://stackoverflow.com/questions/34639004/c-language-reading-columnated-text-file/34640332#34640332", "title": "C language reading columnated text file", "body": "<p>When reading fixed-length fields with <code>sscanf</code>, it is best to parse the values as character strings (which you could do a number of ways), and then perform independent conversion of each of the fields. This allows you to handle conversion/error detection on a per-field basis. For example, you could use a format string of:</p>\n\n<pre><code>char *fmt = \"%*4s%2[^0-9]%s\";\n</code></pre>\n\n<p>which would read/discard the 4 leading characters, then read 2-chars as your integer, followed by the remainder of <code>line</code> (or up until the next whitespace) as a string containing your float value. </p>\n\n<p>To handle the storage and parsing of <code>line</code> as fixed length fields, you could use temporary character arrays to hold each of the strings and then use <code>sscanf</code> to fill them much as you have attempted to do with the integer and float directly. e.g.:</p>\n\n<pre><code>char istr[8] = {0};\nchar fstr[16] = {0};\n...\nsscanf (line,fmt,istr,fstr);\n</code></pre>\n\n<p>(<strong>note:</strong> you could use minimum storage of <code>istr[3]</code> and <code>fstr[7]</code> in this given case, adjust the storage length as required, but providing space for the <em>nul-terminating</em> character)</p>\n\n<p>You can then use <code>strtol</code> and <code>strtof</code> to provide conversion with error checking on each value. For example:</p>\n\n<pre><code>errno = 0;\nif ((ival = (int)strtol (istr, NULL, 10)) == 0 &amp;&amp; errno)\n    fprintf (stderr, \"error: integer conversion failed.\\n\");\n    /* underflow/overflow checks omitted */\n</code></pre>\n\n<p>and </p>\n\n<pre><code>errno = 0;\nif ((fval = strtof (fstr, NULL)) == 0 &amp;&amp; errno)\n    fprintf (stderr, \"error: integer conversion failed.\\n\");\n    /* nan and inf checks omitted */\n</code></pre>\n\n<p>Putting all the pieces together in you example, you could use something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n\nint main() {\n\n    char *fmt = \"%*4s%2[^0-9]%s\";\n    char *line = \"xxxx  993.14\";\n\n    char istr[8] = {0};\n    char fstr[16] = {0};\n    int ival;\n    float fval;\n\n    sscanf (line,fmt,istr,fstr);\n\n    errno = 0;\n    if ((ival = (int)strtol (istr, NULL, 10)) == 0 &amp;&amp; errno)\n        fprintf (stderr, \"error: integer conversion failed.\\n\");\n        /* underflow/overflow checks omitted */\n\n    errno = 0;\n    if ((fval = strtof (fstr, NULL)) == 0 &amp;&amp; errno)\n        fprintf (stderr, \"error: integer conversion failed.\\n\");\n        /* nan and inf checks omitted */\n\n    printf(\"&gt;&gt;&gt;&gt;%d|%6.2f\\n\",ival,fval);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example/Output</strong></p>\n\n<pre><code>$ &gt;&gt;&gt;&gt;0|993.14\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5752676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b3142dbbf22b5622d2dd306c8b1fc7?s=128&d=identicon&r=PG", "display_name": "Roxo", "link": "https://stackoverflow.com/users/5752676/roxo"}, "is_accepted": false, "score": 0, "last_activity_date": 1452125372, "last_edit_date": 1452125372, "creation_date": 1452124435, "answer_id": 34645082, "question_id": 34639004, "link": "https://stackoverflow.com/questions/34639004/c-language-reading-columnated-text-file/34645082#34645082", "title": "C language reading columnated text file", "body": "<p>I am posting what I think is a final conclusion from the answers I have got so far and from other sources.</p>\n\n<p>What is a very trivial task in Fortran is not a so trivial task in other languages. I guess\u200a\u2014\u200anot sure\u200a\u2014\u200athat the same task could be as easy as in Fortran in other languages. I think that Cobol, Pascal, PL/I and others from the time of punched card probably could be trivial.</p>\n\n<p>I think that most languages nowadays are more comfortable with different data structure and inherited its I/O structure from C. I think that Java, Python, Perl(?) and others could serve as examples.</p>\n\n<p>From what I saw in this thread there are two main problems to read / convert fixed column length text data with C.</p>\n\n<p>The first problem is that, as Philip said in his answer: \u201cThe tool\u2019s trying to be smart of helpful and it\u2019s biting you in the ass.\u201d Quite right! The point is that it seems that C text I/O thinks that \u201cwhite space\u201d is something like a NULL character and should be thrown away, completely disregarding any information of the start of field. The only exception to that seems to be the <code>%nc</code> that get exactly <code>n</code> chars, even blanks.</p>\n\n<p>The second problem is that the conversion \u201ctag\u201d (how is that called?) <code>%nf</code> will keep converting while it finds a valid character, even if you say stop at the 4th character.</p>\n\n<p>If we join those two problems with a field completely filled with white space, depending on the conversion tool used, it throws an error or keeps going madly looking for something meaningful.</p>\n\n<p>At the end of the day, it seems that the only way is to extract the field length to another memory area, dynamically allocated or not (we can have an area for each column length), and try to parse this separate area, taking into account the possibility of a full white space area to cache the error.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1452127231, "creation_date": 1452127231, "answer_id": 34645487, "question_id": 34639004, "link": "https://stackoverflow.com/questions/34639004/c-language-reading-columnated-text-file/34645487#34645487", "title": "C language reading columnated text file", "body": "<p><code>*scanf()</code> is not designed to handle fixed column width with non-intervening white-space.</p>\n\n<p>With <code>sscanf()</code>, to not skip spaces, code must use <code>\"%c\"</code>, <code>\"%n\"</code>, <code>\"%[]\"</code> as all other specifiers skip leading white-space and those skipped characters do not contribute to a width limit.</p>\n\n<hr>\n\n<p>To scan the printed line, which in now in <code>buffer</code>, take advantage that the only use of <code>'\\n'</code> is at the end of the line.</p>\n\n<pre><code>char str_int[5];\nchar str_float[5];\nint n = 0;\n\nsscanf(buffer, \"%*4c%4[^\\n]%4[^\\n]%n\", str_int, str_float, &amp;n);\nif (n != 12 || buffer[n] != '\\n') Fail();\n// Now convert str_int, str_float as needed.\n</code></pre>\n\n<p>Another way to use <code>sscanf()</code> would be to parse <code>buffer</code> as</p>\n\n<pre><code>int  ival;\nfloat fval;\nif (strlen(buffer) != 13) Fail();\nif (sscanf(&amp;buffer[8], \"%f\", &amp;fval) != 1) Fail();\nbuffer[8] = '\\0';\nif (sscanf(&amp;buffer[4], \"%d\", &amp;ival) != 1) Fail();\n</code></pre>\n\n<hr>\n\n<p>Note: The <code>4</code>s in the below <strong>do not</strong> specified the output width as 4 characters.  <code>4</code> is the <em>minimum</em> width to print.</p>\n\n<pre><code>printf(\"xxxx%4d%4.2f\\n\",ival, fval);\n</code></pre>\n\n<p>Code could use the following to detect problems.</p>\n\n<pre><code>if (13 != printf(\"xxxx%4d%4.2f\\n\",ival, fval)) Fail();\n</code></pre>\n\n<p>Watch out for </p>\n\n<pre><code>printf(\"xxxx%4d%4.2f\\n\",123, 9.995000001f); // \"xxxx 12310.00\\n\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5752676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b3142dbbf22b5622d2dd306c8b1fc7?s=128&d=identicon&r=PG", "display_name": "Roxo", "link": "https://stackoverflow.com/users/5752676/roxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1452127231, "creation_date": 1452101099, "last_edit_date": 1452103347, "question_id": 34639004, "link": "https://stackoverflow.com/questions/34639004/c-language-reading-columnated-text-file", "title": "C language reading columnated text file", "body": "<p>First of all let me ask for your forgiveness if this is too trivial, I am not a C developer, usually I program in Fortran.</p>\n\n<p>I am in need to read some columnated text files.  The problem I have is that some columns can have blank space (non filled value) or not fully filed field.</p>\n\n<p>Let me use a short example of the problem.   Lets say I have a generator program like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n   printf(\"xxxx%4d%4.2f\\n\",99,3.14);\n\n}\n</code></pre>\n\n<p>When I execute this program I get:</p>\n\n<pre><code>$ ./t1\nxxxx  993.14\n</code></pre>\n\n<p>If I get it into a text file and try to read using (e.g.) sscanf with the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\n   char *fmt = \"%*4c%4d%4f\";\n   char *line = \"xxxx  993.14\";\n   int  ival;\n   float fval;\n\n   sscanf(line,fmt,&amp;ival,&amp;fval);\n\n   printf(\"&gt;&gt;&gt;&gt;%d|%f\\n\",ival,fval);\n}\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>$ ./t2\n&gt;&gt;&gt;&gt;993|0.140000\n</code></pre>\n\n<p>What is the problem here?   The sscanf seems to think that all space is meaningless and should be discarded.   So the \"%<em>4c\" does what it is meant to be, it counts 4 characters without discarding any blank space and discards everything due to \"</em>\".  Next the %4d start skipping all blank spaces and start count the 4 characters of the field upon finding the first valid character for the conversion.   So the value, meant to be 99 becomes 993, and the 3.14 becomes 0.14.</p>\n\n<p>In Fortran the reading code would be:</p>\n\n<pre><code>program t3\n\n   implicit none\n\n   integer :: ival\n   real    :: fval\n   character(len=30) :: fmt=\"(4x,i4,f4.0)\"\n   character(len=30) :: line=\"xxxx  993.14\"\n\n   read(line,fmt) ival, fval\n   write(*,\"('&gt;&gt;&gt;&gt;',i4,'|',f4.2)\") ival,fval\n\nend program t3\n</code></pre>\n\n<p>and the result would be:</p>\n\n<pre><code>$ ./t3\n&gt;&gt;&gt;&gt;  99|3.14\n</code></pre>\n\n<p>That is, the format specification states the field width and nothing is discarding in conversion, except if instructed to by the \"nX\" specification.</p>\n\n<p>Some final remarks to help the helpers:</p>\n\n<ol>\n<li>The format to be read is an international standard and there is no\nway to change it.</li>\n<li>The number of existing files is to big to think of intervention or \nformat change.</li>\n<li>It is not a CSV or similar format.</li>\n<li><p>The code has to be in C for integration in a free software package.</p>\n\n<p>Sorry to be too long, trying to state the problem as completely as possible.</p>\n\n<p>The question is:  Is there a way to tell sscanf to not skip the blank spaces?   If not, is there a simple way to do it in C or it will be necessary write an specialized parser for each record type?</p>\n\n<p>Thank you in advance.</p></li>\n</ol>\n"}, {"tags": ["c++", "c", "linux", "macos", "makefile"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1452100256, "post_id": 34638607, "comment_id": 57022787, "body": "It does not look like a Linux/Mac issue. At least you need to recompile main.c first. Review the documentation for cc."}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1452100415, "post_id": 34638607, "comment_id": 57022903, "body": "Have you got <code>bin</code>, <code>obj</code>, <code>inc</code> and <code>src</code> subdirectories? Does your <code>main.c</code> contain a <code>main(int argc,char*argv[])</code> function? Can you add <code>-I inc</code> to tell the compiler where your include files are?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1452100551, "post_id": 34638607, "comment_id": 57022990, "body": "smell like there is no &#39;main&#39; entry point in main.c - can we see it please"}, {"owner": {"reputation": 141, "user_id": 3621306, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/Q4lOO.jpg?s=128&g=1", "display_name": "Divergent", "link": "https://stackoverflow.com/users/3621306/divergent"}, "edited": false, "score": 0, "creation_date": 1452100622, "post_id": 34638607, "comment_id": 57023037, "body": "Wow I&#39;m retarted. Thanks for pointing out my silly mistake I hadn&#39;t written anything in the C file LOL."}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 3621306, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/Q4lOO.jpg?s=128&g=1", "display_name": "Divergent", "link": "https://stackoverflow.com/users/3621306/divergent"}, "is_accepted": false, "score": 1, "last_activity_date": 1452100656, "creation_date": 1452100656, "answer_id": 34638880, "question_id": 34638607, "link": "https://stackoverflow.com/questions/34638607/macosx-compiling-a-c-project-using-make-command/34638880#34638880", "title": "MacOSx - Compiling a C project using make command", "body": "<p>Silly me. I didn't have a valid main function in my C file. Watch out for this one in the future kids!</p>\n"}], "owner": {"reputation": 141, "user_id": 3621306, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/Q4lOO.jpg?s=128&g=1", "display_name": "Divergent", "link": "https://stackoverflow.com/users/3621306/divergent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452100656, "creation_date": 1452099769, "question_id": 34638607, "link": "https://stackoverflow.com/questions/34638607/macosx-compiling-a-c-project-using-make-command", "title": "MacOSx - Compiling a C project using make command", "body": "<p>I am working on an assignment for my System Programming course which is a course using the linux terminal and C language. I own a mac and already require a windows VM for my other courses so I have no room for the linux machine and my professor said that my mac machine would work fine as it has the linux terminal.</p>\n\n<p>We have to create a makefile file that will compile and link the c project together and create a .bin file, which is the basis of programming C in a linux environment, but I am getting errors with my makefile.</p>\n\n<p>I believe it has to do with the difference between Linux and MacOS but I am not sure.</p>\n\n<p>My makefile is as follows:</p>\n\n<pre><code>./bin/cryptoMagic: ./obj/main.o\ncc ./obj/main.o -o ./bin/cryptoMagic\n\n./obj/main.o: ./src/main.c ./inc/prototypes.h\ncc ./src/main.c -c -o ./obj/main.o\n</code></pre>\n\n<p>When I run the make utility in the terminal I get this error message:</p>\n\n<pre><code>kyles-MacBook-Pro:~ KyleJensen$ cd Documents/School/First\\     Year/Semester2/SystemProgramming/Assignments/Assign01/\nkyles-MacBook-Pro:Assign01 KyleJensen$ make\ncc ./obj/main.o -o ./bin/cryptoMagic\nUndefined symbols for architecture x86_64:\n\"_main\", referenced from:\n implicit entry/start for main executable\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see    invocation)\nmake: *** [bin/cryptoMagic] Error 1\n</code></pre>\n"}, {"tags": ["c", "gdb", "stack"], "comments": [{"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1452100050, "post_id": 34638541, "comment_id": 57022642, "body": "What are the produced instructions?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1452100093, "post_id": 34638541, "comment_id": 57022674, "body": "What do you mean by &quot;But there is no such instruction&quot; ? Such what instruction ?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1452101459, "post_id": 34638541, "comment_id": 57023602, "body": "It depends on the architecture binary interface (ABI) and the calling convention (which will be the cdecl calling convention in this case). The first few arguments of a particular type may be passed in registers instead of the stack. For example, the System V AMD64 ABI passes the first six integer or pointer arguments, and the first eight floating point arguments in registers."}, {"owner": {"reputation": 521, "user_id": 5737877, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f08281b24fa35630459e7dd70c388b4c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Cho", "link": "https://stackoverflow.com/users/5737877/a-cho"}, "edited": false, "score": 0, "creation_date": 1452101536, "post_id": 34638541, "comment_id": 57023643, "body": "I mean on format string vulnerability, before printf is called, there should be arguments passed to printf. But no arguments are in the main stack frame. How can I find the %s %d &#39;s address which has real value."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1452101872, "post_id": 34638541, "comment_id": 57023842, "body": "@A.Cho what architecture (OS / processor) are you using?"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452107640, "post_id": 34639373, "comment_id": 57027383, "body": "Typical ABIs on x86 and ARM and many other architectures use different conventions. Also Linux and Windows have different conventions on x86 and ARM, too. x86/x64 add even more complexity."}], "tags": [], "owner": {"reputation": 306, "user_id": 5132248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w9I2j.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5132248/alex"}, "is_accepted": false, "score": -1, "last_activity_date": 1452102238, "creation_date": 1452102238, "answer_id": 34639373, "question_id": 34638541, "link": "https://stackoverflow.com/questions/34638541/about-stack-frame/34639373#34639373", "title": "About Stack Frame", "body": "<p>Following the <code>__cdecl</code> calling convention (the default for most compilers) <a href=\"https://en.wikipedia.org/wiki/X86_calling_conventions#cdecl\" rel=\"nofollow\">https://en.wikipedia.org/wiki/X86_calling_conventions#cdecl</a> we can see what the compiler might produce.</p>\n\n<p>First the caller makes a stack frame.</p>\n\n<pre><code>push    ebp\nmov     ebp, esp\n</code></pre>\n\n<p>What the above code does is simple. First it pushes the current value of ebp to the stack, then it moves the value of the stack pointer to ebp.</p>\n\n<p>Now it pushes the function's arguments to the stack from right to left.</p>\n\n<pre><code>push    3; The number\npush    ?; Placeholder for the pointer to the string\n</code></pre>\n\n<p>Now it calls the function.</p>\n\n<pre><code>call    ?; Placeholder for the address of printf\n</code></pre>\n\n<p>When the function returns we clean the stack by simply resetting the stack frame</p>\n\n<pre><code>mov esp, ebp\n</code></pre>\n\n<p>and restoring ebp</p>\n\n<pre><code>pop ebp\n</code></pre>\n\n<p>Just looking at some of the code that visual studio 2015 produced for me I can confirm there are variations to this calling convention, but this is the general idea of stack frames.</p>\n"}, {"tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 2, "last_activity_date": 1452103604, "last_edit_date": 1452103604, "creation_date": 1452102378, "answer_id": 34639415, "question_id": 34638541, "link": "https://stackoverflow.com/questions/34638541/about-stack-frame/34639415#34639415", "title": "About Stack Frame", "body": "<p>For your simple program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\"hi everyone %d \\n\", 3);\n    return 0;\n}\n</code></pre>\n\n<p>compiled as <code>gcc -g -ansi -pedantic -Wall test.c -o test</code> (on an Ubuntu 14.04 system using gcc version 4.8.4) it appears that the parameters to <code>printf</code> are being passed in registers.  Setting a break point on the <code>printf</code> command and disassembling yields the following:</p>\n\n<pre><code>Dump of assembler code for function main:\n   0x000000000040052d &lt;+0&gt;:     push   rbp\n   0x000000000040052e &lt;+1&gt;:     mov    rbp,rsp\n=&gt; 0x0000000000400531 &lt;+4&gt;:     mov    esi,0x3\n   0x0000000000400536 &lt;+9&gt;:     mov    edi,0x4005d4\n   0x000000000040053b &lt;+14&gt;:    mov    eax,0x0\n   0x0000000000400540 &lt;+19&gt;:    call   0x400410 &lt;printf@plt&gt;\n   0x0000000000400545 &lt;+24&gt;:    mov    eax,0x0\n   0x000000000040054a &lt;+29&gt;:    pop    rbp\n   0x000000000040054b &lt;+30&gt;:    ret    \nEnd of assembler dump.\n</code></pre>\n\n<p>We can see that the value 3 (which in this case is encoded into the instruction as a literal) is begin moved into the <code>%esi</code> register and your string's address is being moved into the <code>%edi</code> register.  You can verify this by looking at the memory:</p>\n\n<pre><code>(gdb) x/16cb 0x4005d4\n0x4005d4:   104 'h' 105 'i' 32 ' '  101 'e' 118 'v' 101 'e' 114 'r' 121 'y'\n0x4005dc:   111 'o' 110 'n' 101 'e' 32 ' '  37 '%'  100 'd' 32 ' '  10 '\\n\n</code></pre>\n\n<p>Also, you can examine the stack and base pointers, and you will notice that in this simple program the stack is not used:</p>\n\n<pre><code>(gdb) print $rbp\n$4 = (void *) 0x7fffffffe460\n(gdb) print $rsp\n$5 = (void *) 0x7fffffffe460\n</code></pre>\n\n<p>as <code>$rpb</code> and <code>$rsp</code> both have the same value.</p>\n\n<p>Hope this helps.\n-T.</p>\n"}, {"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1452103024, "post_id": 34639502, "comment_id": 57024550, "body": "Only the simple usages of <code>printf</code> get optimized. The OP&#39;s example is not one of them."}], "tags": [], "owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "is_accepted": true, "score": 1, "last_activity_date": 1452102614, "creation_date": 1452102614, "answer_id": 34639502, "question_id": 34638541, "link": "https://stackoverflow.com/questions/34638541/about-stack-frame/34639502#34639502", "title": "About Stack Frame", "body": "<p>This article about how the <a href=\"http://www.ciselant.de/projects/gcc_printf/gcc_printf.html\" rel=\"nofollow\">GCC compiler can optimize code to replace some types of call with equivalent, but not identical, operations</a> may help.</p>\n\n<p>The example you gave would be a prime target for this sort of optimization.</p>\n"}], "owner": {"reputation": 521, "user_id": 5737877, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f08281b24fa35630459e7dd70c388b4c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Cho", "link": "https://stackoverflow.com/users/5737877/a-cho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 34639502, "answer_count": 3, "score": -1, "last_activity_date": 1452103604, "creation_date": 1452099566, "last_edit_date": 1452100010, "question_id": 34638541, "link": "https://stackoverflow.com/questions/34638541/about-stack-frame", "title": "About Stack Frame", "body": "<p>I learn about stack frame. But if I'm right, before function is called, that function's arguments are pushed into stack frame.</p>\n\n<p>For example,</p>\n\n<pre><code>int main(void)\n{\n  printf(\"hi everyone %d \\n\", 3);\n  return 0;\n}\n</code></pre>\n\n<p>In this case, in the main stack frame, \"Hi everyone %d \\n\" 's address, and 3 should be pushed and then printf must be called, if i'm right.</p>\n\n<p>But there is no such instruction when I use gdb.</p>\n\n<p>I'm studying about String Format Vulnerability. But what I write above didn't happen. What's wrong with me?</p>\n"}, {"tags": ["c", "format", "specifier"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1452099503, "post_id": 34638466, "comment_id": 57022243, "body": "You can write whatever you want in <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>, but you can&#39;t add a format specifier to the standard library function <code>printf()</code>. You can however write a variadic function that calls <code>printf()</code> for every format specifier and a custom routine for your specifiers, furthermore you can make your program call your <code>printf()</code> function instead and use the same name. But I would not recommend that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1452099696, "post_id": 34638466, "comment_id": 57022386, "body": "Step 1) Avoid using existing format specifiers like <code>&quot;%g&quot;</code> which is for <code>double</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452107825, "post_id": 34638466, "comment_id": 57027494, "body": "Hmm, IPs have 32 bits and should be unsigned. <code>int</code> is a bad idea for both reasons."}], "answers": [{"comments": [{"owner": {"reputation": 6306, "user_id": 301717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb6fdb16164a361eec8872e6b46dc95?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Pouiller", "link": "https://stackoverflow.com/users/301717/j%c3%a9r%c3%b4me-pouiller"}, "edited": false, "score": 0, "creation_date": 1556631122, "post_id": 34638564, "comment_id": 98497839, "body": "I wonder how you can write a such function. Programmatically calling <code>printf</code> (or <code>vprintf</code>) is not easy."}], "tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 0, "last_activity_date": 1452099630, "creation_date": 1452099630, "answer_id": 34638564, "question_id": 34638466, "link": "https://stackoverflow.com/questions/34638466/how-would-i-write-my-own-new-format-specifier-in-c/34638564#34638564", "title": "How would I write my own new format specifier in C?", "body": "<p>You can't change standard library functions although you can write a wrapper function which will accept <code>%g</code> and will in turn call <code>printf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1452100248, "post_id": 34638583, "comment_id": 57022781, "body": "What is <code>getA</code>, <code>getB</code> etc. ?"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1452100349, "post_id": 34638583, "comment_id": 57022853, "body": "@MichaelWalz see A, B, C and D in the OP. The question is about to write a format specifier, not about getting these values from an int."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1452100499, "post_id": 34638583, "comment_id": 57022957, "body": "Maybe you should clarify that in your question."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1452101272, "post_id": 34638583, "comment_id": 57023475, "body": "Done Michael. Thanks."}], "tags": [], "owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "is_accepted": true, "score": 5, "last_activity_date": 1452101249, "last_edit_date": 1452101249, "creation_date": 1452099689, "answer_id": 34638583, "question_id": 34638466, "link": "https://stackoverflow.com/questions/34638466/how-would-i-write-my-own-new-format-specifier-in-c/34638583#34638583", "title": "How would I write my own new format specifier in C?", "body": "<p>You would have to reimplement the printf function (more precisely its format parsing function). What you can do is wrap printf inside a function that supports ip addresses or do this:</p>\n\n<pre><code>#define FMT_IP \"%d.%d.%d.%d\"\n#define FMT_IP_ARG(ip) getA(ip), getB(ip), getC(ip), getD(ip)\n</code></pre>\n\n<p>Where the getX functions or macros get the X part of the given integer representing an IP address.</p>\n\n<p>Then:</p>\n\n<pre><code>printf(\"ip address = \" FMT_IP \"\\n\", FMT_IP_ARG(ip));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1452101766, "last_edit_date": 1452101766, "creation_date": 1452101357, "answer_id": 34639088, "question_id": 34638466, "link": "https://stackoverflow.com/questions/34638466/how-would-i-write-my-own-new-format-specifier-in-c/34639088#34639088", "title": "How would I write my own new format specifier in C?", "body": "<p>Adding a new specifier involves re-writing <code>printf()</code> or crafting your own function that handles the new specifier as well as <code>printf()</code> and calling that.  Both of these approaches are difficult.</p>\n\n<hr>\n\n<p>An alternative is to use <code>\"%s\"</code> and craft your own function that forms a string.</p>\n\n<p>With C99 or later, use a compound literal to form the needed buffer space.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MYIP_N 16\n#define MYIP(ip) myip((char [MYIP_N]){\"\"}, (ip))\n\nchar *myip(char *dest, int ip) {\n  snprintf(dest, MYIP_N, \"%d.%d.%d.%d\", (ip &gt;&gt; 24) &amp; 255, (ip &gt;&gt; 16) &amp; 255,\n      (ip &gt;&gt; 8) &amp; 255, (ip &gt;&gt; 0) &amp; 255);\n  return dest;\n}\n\n\nint main(void) {\n  int ip1 = 0x01020304;\n  int ip2 = 0x05060708;\n  printf(\"%s %s\\n\", MYIP(ip1), MYIP(ip2));\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>1.2.3.4 5.6.7.8\n</code></pre>\n\n<hr>\n\n<p>This works with <code>printf()</code> or <code>fprintf()</code>, <code>sprintf()</code>, even <code>puts()</code></p>\n\n<pre><code>puts(MYIP(ip1));\n\n1.2.3.4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1452113643, "last_edit_date": 1495542890, "creation_date": 1452113643, "answer_id": 34642557, "question_id": 34638466, "link": "https://stackoverflow.com/questions/34638466/how-would-i-write-my-own-new-format-specifier-in-c/34642557#34642557", "title": "How would I write my own new format specifier in C?", "body": "<p>I'd go for <a href=\"https://stackoverflow.com/a/34639088/1566221\">@chux's answer</a>, which is simple and portable provided you can know how large a temporary buffer you need.</p>\n\n<p>However, if you are using the GNU library (glibc), you can extend <code>printf</code> with new specifiers. It is highly recommended that you use upper-case letters as format codes, because almost all lower-case format codes are in use and the rest may be used by future C/Posix standards. The facility is documented in the <a href=\"https://www.gnu.org/software/libc/manual/html_node/Customizing-Printf.html#Customizing-Printf\" rel=\"nofollow noreferrer\">glibc manual</a>.</p>\n\n<p>Based on the GNU facility, a similar pretty-much-compatible facility was written for the BSD library. Apparently, it is available on Mac OS X, although I can't vouch for that fact. I did find it in the Apple on-line man pages for <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/xprintf.3.html\" rel=\"nofollow noreferrer\">xprintf(3)</a> and <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man5/xprintf.5.html\" rel=\"nofollow noreferrer\">xprintf(5)</a>.</p>\n\n<p>There are examples in the documentation linked above.</p>\n"}], "owner": {"reputation": 952, "user_id": 756120, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6dd959f2244e7078d7fe2f824c34f39?s=128&d=identicon&r=PG", "display_name": "Abhishek Sagar", "link": "https://stackoverflow.com/users/756120/abhishek-sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 0, "accepted_answer_id": 34638583, "answer_count": 4, "score": 4, "last_activity_date": 1574497699, "creation_date": 1452099334, "last_edit_date": 1574497699, "question_id": 34638466, "link": "https://stackoverflow.com/questions/34638466/how-would-i-write-my-own-new-format-specifier-in-c", "title": "How would I write my own new format specifier in C?", "body": "<p>Is it possible to write a new format specifier in C? For example, let's say, %g is a format specifier which prints the ip address in A.B.C.D format from the unsigned integer equivalent.</p>\n\n<pre><code>int ip_addr = Some integer\n\nprintf(\"ip address = %g\", ip_addr);\n</code></pre>\n\n<p>output: prints ip address in A.B.C.D format</p>\n"}, {"tags": ["c", "gcc", "module", "static-libraries"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452099328, "post_id": 34638437, "comment_id": 57022128, "body": "Why would you need 300 modules? You can have 300 functions in a single one."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1452100067, "post_id": 34638437, "comment_id": 57022653, "body": "@ iharob because if they are all in separate modules, linking a program with the library will load only those functions referenced by the program (and recursively). If they are all in one module, linking will load in all 300 of the functions, even if only one function in the library is called by the program.."}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "edited": false, "score": 0, "creation_date": 1452102450, "post_id": 34638437, "comment_id": 57024235, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6687630/how-to-remove-unused-c-c-symbols-with-gcc-and-ld/6687656#6687656\" title=\"how to remove unused c c symbols with gcc and ld\">stackoverflow.com/questions/6687630/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "edited": false, "score": 0, "creation_date": 1452100992, "post_id": 34638821, "comment_id": 57023295, "body": "thanks for the brief response. So to have independency between functions, I should make a module per function, and inside that module, only the functions needed for the main function to work should be there, is that right?"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "reply_to_user": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "edited": false, "score": 1, "creation_date": 1452101256, "post_id": 34638821, "comment_id": 57023463, "body": "yes, unless some other function also needs the extra functions to work. In that case the extra function(s) should also be in a separate module."}, {"owner": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "edited": false, "score": 0, "creation_date": 1452101910, "post_id": 34638821, "comment_id": 57023868, "body": "And the principle remains, so only those extra function&#39;s code is used and not a whole useless module. Thanks a lot for the help!"}], "tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": true, "score": 2, "last_activity_date": 1452100442, "creation_date": 1452100442, "answer_id": 34638821, "question_id": 34638437, "link": "https://stackoverflow.com/questions/34638437/how-does-a-c-static-library-work/34638821#34638821", "title": "How does a C static library work?", "body": "<p>Yes, place each function in a separate module. That way the linker will link in only the items needed.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "edited": false, "score": 0, "creation_date": 1452103251, "post_id": 34639561, "comment_id": 57024692, "body": "With this said, I could put both fc and fe functions in one module? Then the linker would prune the unused functions?"}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "reply_to_user": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "edited": false, "score": 0, "creation_date": 1452103419, "post_id": 34639561, "comment_id": 57024789, "body": "What exactly you mean by &quot;module&quot;? If the functions are in different libraries, sure, they can be discarded separately. If not, then the technique described above must be applied (to my knowledge)."}, {"owner": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "edited": false, "score": 0, "creation_date": 1452103713, "post_id": 34639561, "comment_id": 57024943, "body": "By module I mean a &quot;.c&quot; file."}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "reply_to_user": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "edited": false, "score": 1, "creation_date": 1452103993, "post_id": 34639561, "comment_id": 57025115, "body": "Yes, if the different .c files are compiled to different .o files, they are discarded separately, by default."}], "tags": [], "owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "is_accepted": false, "score": 1, "last_activity_date": 1452102797, "creation_date": 1452102797, "answer_id": 34639561, "question_id": 34638437, "link": "https://stackoverflow.com/questions/34638437/how-does-a-c-static-library-work/34639561#34639561", "title": "How does a C static library work?", "body": "<p>In short, there are compiler flags to prune unused functions from the final executable code, however they are not enabled by default.</p>\n\n<p>GCC can do this \"garbage collection\" of unused functions if these flags are added:</p>\n\n<ol>\n<li><p><code>-ffunction-sections</code> as a compile-time flag. It instructs the compiler to create a separate <em>section</em> (see <a href=\"https://en.wikipedia.org/wiki/Object_file\" rel=\"nofollow\">object file format</a>) for each function. There's also <code>-fdata-sections</code> flag with similar meaning that works for variables.</p></li>\n<li><p><code>-Wl,--gc-sections</code> as a link-time flag. The <code>-Wl</code> part instructs GCC to pass the following options to the linker. <code>--gc-sections</code> means \"garbage select sections from which all code is unsed\". Since due to the compile-time options each function has got a separate section, it effectively performs function-level pruning.</p></li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 3190644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWDcp.png?s=128&g=1", "display_name": "n233g16", "link": "https://stackoverflow.com/users/3190644/n233g16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 34638821, "answer_count": 2, "score": 1, "last_activity_date": 1452102797, "creation_date": 1452099271, "last_edit_date": 1452102092, "question_id": 34638437, "link": "https://stackoverflow.com/questions/34638437/how-does-a-c-static-library-work", "title": "How does a C static library work?", "body": "<h2>What code goes into the final executable when using a library?</h2>\n\n<p><hr>\nAs an example, we have two files:</p>\n\n<pre><code>/*main.c*/\nint main (int argc, char* argv[]){\n    fc(1); /*This function is defined in fc.c*/\n}\n</code></pre>\n\n<p>Another file:</p>\n\n<pre><code>/*fc.c*/\nint fc(int x){\n    return fe(x);\n}\nint fe(int y){\n    return y + 1;\n}\n</code></pre>\n\n<p>We compile fc.c:</p>\n\n<blockquote>\n  <p>gcc -c fc.c</p>\n</blockquote>\n\n<p>We then get fc.o.</p>\n\n<p>Now lets build a library named test:</p>\n\n<blockquote>\n  <p>ar rcs libtest.a fc.o</p>\n</blockquote>\n\n<p>We now have libtest.a.</p>\n\n<p>Now we compile main.c</p>\n\n<blockquote>\n  <p>gcc -c main.c</p>\n</blockquote>\n\n<p>And we obtain main.o</p>\n\n<p>Let's link our main.o to our libtest.a</p>\n\n<blockquote>\n  <p>gcc -L. main.o -ltest</p>\n</blockquote>\n\n<p>We get the desired a.out</p>\n\n<p>Checking it's symbols:</p>\n\n<blockquote>\n  <p>nm a.out</p>\n</blockquote>\n\n<p>In between all the symbols, we find:</p>\n\n<blockquote>\n  <p>080483cc T fc<br>\n  080483df T fe</p>\n</blockquote>\n\n<p>Seems good.\nBUT!</p>\n\n<p>If our main.c changes for this?</p>\n\n<pre><code>/*main.c*/\nint main (int argc, char* argv[]){\n    fe(1); /*This function is defined in fc.c*/\n}\n</code></pre>\n\n<p>After compiling main.c and linking the new main.o to our library, I will still find a symbol for fc. But I don't need that code.<br><br> </p>\n\n<h2>Questions</h2>\n\n<p>-Shouldn't the library \"give me\" only the code I need in main.c?<br>\n-Do the functions need to be in separate modules before being added to the library?<br> \n-What if I had 300 functions? Would I need to make 300 modules?</p>\n"}, {"tags": ["c", "openmp", "mandelbrot"], "comments": [{"owner": {"reputation": 1289, "user_id": 1122834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8989c2ae89dd2f1b29bcf4484fbbebf?s=128&d=identicon&r=PG", "display_name": "Lolmewn", "link": "https://stackoverflow.com/users/1122834/lolmewn"}, "edited": false, "score": 0, "creation_date": 1452099316, "post_id": 34638360, "comment_id": 57022120, "body": "Have you tried using valgrind?"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1452099383, "post_id": 34638360, "comment_id": 57022156, "body": "Are you sure you wanted <code>im</code> to be private? Looks iffy to me..."}, {"owner": {"reputation": 19, "user_id": 5753351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af1c6f4354902ad3a58994da81b86f6?s=128&d=identicon&r=PG&f=1", "display_name": "vikash78", "link": "https://stackoverflow.com/users/5753351/vikash78"}, "edited": false, "score": 0, "creation_date": 1452099736, "post_id": 34638360, "comment_id": 57022405, "body": "I&#39;m begging in OpenMP, I&#39;m just putting all variables that I&#39;ll use"}, {"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "edited": false, "score": 1, "creation_date": 1452100225, "post_id": 34638360, "comment_id": 57022759, "body": "Do you mean parallelise? To paralyse <a href=\"http://dictionary.cambridge.org/us/dictionary/english/paralyse\" rel=\"nofollow noreferrer\">means</a>."}, {"owner": {"reputation": 19, "user_id": 5753351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af1c6f4354902ad3a58994da81b86f6?s=128&d=identicon&r=PG&f=1", "display_name": "vikash78", "link": "https://stackoverflow.com/users/5753351/vikash78"}, "edited": false, "score": 0, "creation_date": 1452100541, "post_id": 34638360, "comment_id": 57022981, "body": "Yes sorry I&#39;m not a good english speaker"}, {"owner": {"reputation": 5862, "user_id": 4811803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Smz_dvBogaY/AAAAAAAAAAI/AAAAAAAAAKs/4FvwvMX7kyM/photo.jpg?sz=128", "display_name": "Snild Dolkow", "link": "https://stackoverflow.com/users/4811803/snild-dolkow"}, "edited": false, "score": 1, "creation_date": 1452101236, "post_id": 34638360, "comment_id": 57023452, "body": "I haven&#39;t used OpenMP enough to be sure about this, but don&#39;t you need to specify all variables as private in the <i>second</i> pragma as well? Also, the <code>c</code> variable should probably be private -- you don&#39;t want that shared between threads. I don&#39;t think this is the cause of your crash (which seems to be a NULL pointer access..?), but you should really be careful about that stuff when multithreading. Also, maybe you could get a more useful callstack if you add <code>-g</code> when compiling (which makes the compiler include debug symbols)."}, {"owner": {"reputation": 6524, "user_id": 1887645, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/066e53489a81a9cbc3e5986c5cd3c39d?s=128&d=identicon&r=PG", "display_name": "Tom Wenseleers", "link": "https://stackoverflow.com/users/1887645/tom-wenseleers"}, "edited": false, "score": 0, "creation_date": 1516810903, "post_id": 34638360, "comment_id": 83844453, "body": "You may also be interested in the code here, which gets extra speed-ups via SIMD vectorization: <a href=\"https://stackoverflow.com/questions/48069990/multithreaded-simd-vectorized-mandelbrot-in-r-using-rcpp-openmp\" title=\"multithreaded simd vectorized mandelbrot in r using rcpp openmp\">stackoverflow.com/questions/48069990/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 845, "user_id": 2291248, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/62020bb07b3c5292ba8a064d6abf6a4d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/2291248/adam"}, "edited": false, "score": 0, "creation_date": 1458908377, "post_id": 34641684, "comment_id": 60070969, "body": "Nice, but where is the free ?"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 845, "user_id": 2291248, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/62020bb07b3c5292ba8a064d6abf6a4d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/2291248/adam"}, "edited": false, "score": 0, "creation_date": 1458916516, "post_id": 34641684, "comment_id": 60075273, "body": "@Adam, you mean <code>free(im.pixels)</code>? It&#39;s not necessary."}, {"owner": {"reputation": 845, "user_id": 2291248, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/62020bb07b3c5292ba8a064d6abf6a4d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/2291248/adam"}, "edited": false, "score": 0, "creation_date": 1458931721, "post_id": 34641684, "comment_id": 60083130, "body": "Valgrind LEAK SUMMARY:  definitely lost: 12,800 bytes in 1 block"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 845, "user_id": 2291248, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/62020bb07b3c5292ba8a064d6abf6a4d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/2291248/adam"}, "edited": false, "score": 0, "creation_date": 1458933086, "post_id": 34641684, "comment_id": 60083872, "body": "@Adam, <a href=\"http://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc\">All modern OS will free the memory so there is no leak</a>. But feel free to free it yourself (no pun intended) if it bothers you so much."}], "tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": false, "score": 6, "last_activity_date": 1452157371, "last_edit_date": 1452157371, "creation_date": 1452110303, "answer_id": 34641684, "question_id": 34638360, "link": "https://stackoverflow.com/questions/34638360/parallelize-mandelbrot-with-openmp/34641684#34641684", "title": "parallelize Mandelbrot with OpenMP", "body": "<p>I went ahead and cleaned up your code and even made an image from it.\n</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct Image {\n    unsigned nb_lig;\n    unsigned nb_col;\n    unsigned *pixels;\n};\n\nvoid calculer (struct Image * im, unsigned nb_iter, double x_min, double x_max, double y_min, double y_max) {\n    double pasx = (x_max - x_min) / im -&gt; nb_col;\n    double pasy = (y_max - y_min) / im -&gt; nb_lig;\n    unsigned l,c;\n    #pragma omp parallel for private (c)\n    for (l = 0; l &lt; im-&gt;nb_lig; l++) {\n        for (c = 0; c &lt; im-&gt;nb_col; c++) {\n            double zx = 0.0, zy = 0.0, new_zx;\n            double cx = x_min + c*pasx, cy = y_min + l*pasy;\n            unsigned n = 0;\n            for(n=0;  (zx*zx + zy*zy &lt; 4.0 ) &amp;&amp; ( n &lt; nb_iter ); n++ ) {\n                new_zx = zx*zx - zy*zy + cx;\n                zy = 2.0*zx*zy + cy;\n                zx = new_zx;\n            }\n            if(n == nb_iter) n = 0;\n            im-&gt;pixels[l*im-&gt;nb_col + c] = n;\n        }\n    }\n}\n\nvoid draw_image(struct Image *im) {\n    const char charset[] = \".,c8M@jawrpogOQEPGJ\";\n    unsigned l,c;\n    for (l = 0; l &lt; im-&gt;nb_lig; l++) {\n        for (c = 0; c &lt; im-&gt;nb_col; c++) {\n            unsigned n = im-&gt;pixels[l*im-&gt;nb_col + c];\n            char p = n &gt; 0 ? charset[n % (sizeof(charset)-1)] : ' ';\n            putchar(p);\n            if(c+1 == im-&gt;nb_col) puts(\"\");\n        }\n    }\n    puts(\"\");\n}\n\nint main(void) {\n    struct Image im;\n    im.nb_lig = 40;\n    im.nb_col = 80;\n    im.pixels = malloc(sizeof *im.pixels * im.nb_lig*im.nb_col);\n    unsigned nb_iter = 256;\n    calculer(&amp;im, nb_iter, -2.5, 1.5, -2.0, 2.0);\n    draw_image(&amp;im);\n    return 0;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre>\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccc,,,,,,,,,,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccc,,,,,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccc,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccccccc,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccccccccccccc,,,\n,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccccccccccccccccc,\n,,,,,,,,,,,,,,,,,,,,ccccccccccccccc88888888888cccccccccccccccccccccccccccccccccc\n,,,,,,,,,,,,,,,,,,,ccccccccc8888888888888888888888888ccccccccccccccccccccccccccc\n,,,,,,,,,,,,,,,,,ccccccc8888888888888888MMMMM@.w@@MMM8888ccccccccccccccccccccccc\n,,,,,,,,,,,,,,,,ccccc8888888888888888MMMMMM@@jaoro @MMMM8888cccccccccccccccccccc\n,,,,,,,,,,,,,,,ccc8888888888888888MMMMMMM@@@jwrG@owj@@MMMM88888ccccccccccccccccc\n,,,,,,,,,,,,,,cc8888888888888888MMMMMMM@@jjawQ    Jwj@@@@MM888888ccccccccccccccc\n,,,,,,,,,,,,,cc88888888888888MMMMMM@@jawwwwrpQ    OprwjjjJ@MM88888cccccccccccccc\n,,,,,,,,,,,,cc8888888888888MMMM@@@@jjagM Pa          ,gQEPE@M888888ccccccccccccc\n,,,,,,,,,,,,c88888888888MM@@@@@@@jjjwQg@                 ,aj@M888888cccccccccccc\n,,,,,,,,,,,c8888888MMM@@agaaaaaaaaawo,                   Gr.@MM888888ccccccccccc\n,,,,,,,,,,,888MMMMMM@@@japP,gOPOorro@                     EwjMM8888888cccccccccc\n,,,,,,,,,,,8MMMMMM@@@@jawoJ       EP                      ga@MMM888888cccccccccc\n,,,,,,,,,,,MMMMMjjjjawgOQ8         Q                      wj@MMM888888cccccccccc\n,,,,,,,,,,,                                             gwaj@MMM888888cccccccccc\n,,,,,,,,,,,MMMMMjjjjawgOQ8         Q                      wj@MMM888888cccccccccc\n,,,,,,,,,,,8MMMMMM@@@@jawoJ       EP                      ga@MMM888888cccccccccc\n,,,,,,,,,,,888MMMMMM@@@japP,gOPOorro@                     EwjMM8888888cccccccccc\n,,,,,,,,,,,c8888888MMM@@agaaaaaaaaawo,                   Gr.@MM888888ccccccccccc\n,,,,,,,,,,,,c88888888888MM@@@@@@@jjjwQg@                 ,aj@M888888cccccccccccc\n,,,,,,,,,,,,cc8888888888888MMMM@@@@jjagM Pa          ,gQEPE@M888888ccccccccccccc\n,,,,,,,,,,,,,cc88888888888888MMMMMM@@jawwwwrpQ    OprwjjjJ@MM88888cccccccccccccc\n,,,,,,,,,,,,,,cc8888888888888888MMMMMMM@@jjawQ    Jwj@@@@MM888888ccccccccccccccc\n,,,,,,,,,,,,,,,ccc8888888888888888MMMMMMM@@@jwrG@owj@@MMMM88888ccccccccccccccccc\n,,,,,,,,,,,,,,,,ccccc8888888888888888MMMMMM@@jaoro @MMMM8888cccccccccccccccccccc\n,,,,,,,,,,,,,,,,,ccccccc8888888888888888MMMMM@.w@@MMM8888ccccccccccccccccccccccc\n,,,,,,,,,,,,,,,,,,,ccccccccc8888888888888888888888888ccccccccccccccccccccccccccc\n,,,,,,,,,,,,,,,,,,,,ccccccccccccccc88888888888cccccccccccccccccccccccccccccccccc\n,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccccccccccccccccc,\n,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccccccccccccc,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccccccc,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccccccccccc,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccccccccccccc,,,,,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ccccccccccccccccccccccccc,,,,,,,,,,,,,,,,,\n</pre>\n"}], "owner": {"reputation": 19, "user_id": 5753351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af1c6f4354902ad3a58994da81b86f6?s=128&d=identicon&r=PG&f=1", "display_name": "vikash78", "link": "https://stackoverflow.com/users/5753351/vikash78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1452157371, "creation_date": 1452099028, "last_edit_date": 1452100487, "question_id": 34638360, "link": "https://stackoverflow.com/questions/34638360/parallelize-mandelbrot-with-openmp", "title": "parallelize Mandelbrot with OpenMP", "body": "<p>I have a function which calculate <code>mandelbrot</code> set I'm trying to parallelize it using <code>openMP</code>.</p>\n\n<p>I put <code>#pragma omp parallel for private</code> before each <code>for</code></p>\n\n<pre><code>static void calculer (Image * im, int nb_iter, double x_min, double x_max, double y_min, double y_max) {\n\n    /* Discretisation de l'ensemble */\n    double pasx = (x_max - x_min) / im -&gt; nb_col;\n    double pasy = (y_max - y_min) / im -&gt; nb_lig;\n    double cy = y_min;\n    double new_zx;\n    unsigned int l,c;\n    // Calcul\n    #pragma omp parallel for private ( pasx, pasy, im,nb_iter,x_min,x_max,y_min, y_max)\n    for (l = 0; l &lt; im-&gt;nb_lig; l++) {\n         double cx = x_min;\n        #pragma omp parallel for private (cx)\n\n        for (c = 0; c &lt; im-&gt;nb_col; c++) {\n            double zx = 0.0;\n            double zy = 0.0;\n            unsigned int n = 0;\n            while (  ( zx*zx + zy*zy &lt; 4.0 ) &amp;&amp; ( n &lt; nb_iter ) ) {\n                new_zx = zx*zx - zy*zy + cx;\n                zy = 2.0*zx*zy + cy;\n                zx = new_zx;\n                ++n;\n            }  \n            im-&gt;pixels[l*im-&gt;nb_col + c] = n%256;\n            cx += pasx; \n        }\n        cy += pasy;\n    }\n}\n</code></pre>\n\n<p>When compiling using <code>gcc mandelbrot.c -fopenmp -o exe</code>, I get <code>segmentation fault</code>. What could be the possible reason for it?</p>\n\n<p>EDIT: After executing vingrid I get this message</p>\n\n<pre><code> Process terminating with default action of signal 11 (SIGSEGV)\n==10689==  Access not within mapped region at address 0x0\n==10689==    at 0x40105F: calculer._omp_fn.0 (in /home/haddad/Documents/TPOpenMP/TP_OpenMP/TP_Mandelbrot/exe3)\n==10689==    by 0x4E39EE9: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)\n==10689==    by 0x5047E99: start_thread (pthread_create.c:308)\n==10689==    by 0x535038C: clone (clone.S:112)\n==10689==  If you believe this happened as a result of a stack\n==10689==  overflow in your program's main thread (unlikely but\n==10689==  possible), you can try to increase the size of the\n==10689==  main thread stack using the --main-stacksize= flag.\n==10689==  The main thread stack size used in this run was 8388608.\n</code></pre>\n"}, {"tags": ["c", "opencl"], "comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1452102827, "post_id": 34638336, "comment_id": 57024440, "body": "This is not CUDA, size is not local*global, is just global. Global size is what matters, the kernel code is run that amount of times. The local size is only useful when you want to share information on the running items and has to divide the global size. For example share some data between items 0-1023. If you don&#39;t share data at all, then the size is no t really important, but higher sizes are prefered due to reduction in overheads and increase in device occupation."}, {"owner": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "reply_to_user": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1452113541, "post_id": 34638336, "comment_id": 57030984, "body": "@DarkZeros  Ok I got it, global size matters in that case, so local_work_size in clEnqueueNDRangeKernel call could be 1 or NULL, and nothing would change practically, right?"}, {"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 1, "creation_date": 1452118121, "post_id": 34638336, "comment_id": 57033409, "body": "Yes thats it. And that is the reason why OpenCL allows local size  to be NULL, therefore the driver selects the size it thinks is best for performance."}], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "edited": false, "score": 0, "creation_date": 1453069244, "post_id": 34810160, "comment_id": 57429544, "body": "so executing code on a GPU using 1 work-item per work-group is faster than executing the same code on a CPU of course, but you can still improve by doing more work in the work-group increasing the number of work-items. Is this correct?"}, {"owner": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "edited": false, "score": 0, "creation_date": 1453071956, "post_id": 34810160, "comment_id": 57430375, "body": "the point is: if I increase the number of work-items in the example by apple I won&#39;t get better result in terms of efficiency, since I&#39;m not using local memory. right?"}, {"owner": {"reputation": 303, "user_id": 2770716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7538c0245fde63dd83838eeec9a7a6?s=128&d=identicon&r=PG&f=1", "display_name": "James B", "link": "https://stackoverflow.com/users/2770716/james-b"}, "reply_to_user": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "edited": false, "score": 1, "creation_date": 1453151148, "post_id": 34810160, "comment_id": 57467497, "body": "1 work-item per work-group is probably slower than using a CPU. GPU&#39;s have something like 32 compute cores, so 1 work-item per work group likely means only 32 &#39;threads&#39; running at once, which is extremely slow. Increasing the work group size will drastically increase performance - gpus use the per-workgroup threads to run waves, which fill the SIMD resources on a GPU and allow you to get memory in coalesced accesses. If you only used 1 thread per core, you&#39;d drastically underutilise these resources"}, {"owner": {"reputation": 303, "user_id": 2770716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7538c0245fde63dd83838eeec9a7a6?s=128&d=identicon&r=PG&f=1", "display_name": "James B", "link": "https://stackoverflow.com/users/2770716/james-b"}, "reply_to_user": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "edited": false, "score": 1, "creation_date": 1453151515, "post_id": 34810160, "comment_id": 57467683, "body": "Potentially, but the thread size apple gets is the &#39;optimum&#39; thread size for <i>that</i> kernel I believe. Also, its important to remember local memory isn&#39;t a silver bullet - more local memory can reduce kernel occupancy (number of active wavefronts), which in <i>itself</i> is a confusing statistic (high occupancy good for memory bound kernels, low occupancy can apparently be good for arithmetic bound kernels due to caching). So, a higher work-group size (with more local memory usage) isn&#39;t necessarily better. There&#39;s also a cap on the size of a workgroup 1024ish for nvidia, 256/512ish for amd"}, {"owner": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "edited": false, "score": 0, "creation_date": 1453308173, "post_id": 34810160, "comment_id": 57547336, "body": "This is the clarification I needed. It&#39;s clear now. Thank you."}], "tags": [], "owner": {"reputation": 303, "user_id": 2770716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7538c0245fde63dd83838eeec9a7a6?s=128&d=identicon&r=PG&f=1", "display_name": "James B", "link": "https://stackoverflow.com/users/2770716/james-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1452857673, "creation_date": 1452857673, "answer_id": 34810160, "question_id": 34638336, "link": "https://stackoverflow.com/questions/34638336/calculating-the-right-number-of-workgroups-and-their-size-opencl/34810160#34810160", "title": "Calculating the right number of workgroups and their size OpenCL", "body": "<p>Your global work size is executed in chunks of local work size (in theory), if you set 1 as your local work group size, then it would execute only 1 thread in each local work group. On GPUs, work groups match to compute units - if you have a work group size of 1, your 1 thread may potentially occupy a whole compute unit. This is really, really horribly slow</p>\n"}], "owner": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 1, "accepted_answer_id": 34810160, "answer_count": 1, "score": 0, "last_activity_date": 1452857673, "creation_date": 1452098939, "last_edit_date": 1452099090, "question_id": 34638336, "link": "https://stackoverflow.com/questions/34638336/calculating-the-right-number-of-workgroups-and-their-size-opencl", "title": "Calculating the right number of workgroups and their size OpenCL", "body": "<p>I'm new with OpenCL and I'm trying to understand this example program written by Apple <a href=\"https://developer.apple.com/library/mac/samplecode/OpenCL_Hello_World_Example/Listings/hello_c.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>The goal of the program is to calculate the square of each element of an input array and write the result in a new array. </p>\n\n<p>You can see that the input array has dimension: 1024. The number of work groups is 1024 and the size of each of those is the max CL_KERNEL_WORK_GROUP_SIZE. </p>\n\n<p>Can anybody explain me what's the point of using so many work-items in each work group if in the Kernel there's no get_local_id() call? Could they use 1 as the size of each work group? what would have been the difference?</p>\n\n<p>Thanks. </p>\n\n<p>Some code to show the point:</p>\n\n<pre><code>    // Get the maximum work group size for executing the kernel on the device\n    //\n    err = clGetKernelWorkGroupInfo(kernel, device_id, CL_KERNEL_WORK_GROUP_SIZE, sizeof(local), &amp;local, NULL);\n\n\n    // Execute the kernel over the entire range of our 1d input data set\n    // using the maximum number of work group items for this device\n    //\n    global = count;\n    err = clEnqueueNDRangeKernel(commands, kernel, 1, NULL, &amp;global, &amp;local, 0, NULL, NULL);\n</code></pre>\n"}, {"tags": ["java", "c", "raw-sockets"], "comments": [{"owner": {"reputation": 9042, "user_id": 5343269, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b89476ecccf2af60e01baaf9190eb5c3?s=128&d=identicon&r=PG&f=1", "display_name": "11thdimension", "link": "https://stackoverflow.com/users/5343269/11thdimension"}, "edited": false, "score": 0, "creation_date": 1452098773, "post_id": 34638194, "comment_id": 57021739, "body": "What do you mean by socketfilename ? do you mean URL , like <code>localhost:8080</code> or <code>ip-address:port</code> that is required to create a socket client."}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "reply_to_user": {"reputation": 9042, "user_id": 5343269, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b89476ecccf2af60e01baaf9190eb5c3?s=128&d=identicon&r=PG&f=1", "display_name": "11thdimension", "link": "https://stackoverflow.com/users/5343269/11thdimension"}, "edited": false, "score": 0, "creation_date": 1452099076, "post_id": 34638194, "comment_id": 57021956, "body": "i edited the question to answer your comment"}], "answers": [{"comments": [{"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1452156761, "post_id": 34643377, "comment_id": 57046701, "body": "No no, i dont want the raw socket over the internet. I want it in local on the same machine. Can you please show me an example of how to define both sockets on the same filesystem pathnames for addressing?"}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": true, "score": 0, "last_activity_date": 1452191419, "last_edit_date": 1452191419, "creation_date": 1452116580, "answer_id": 34643377, "question_id": 34638194, "link": "https://stackoverflow.com/questions/34638194/raw-socket-communication-between-two-applications-one-in-c-and-one-in-java/34643377#34643377", "title": "raw socket communication between two applications one in c and one in java", "body": "<p>You are using the unix domain sockets (<code>AF_UNIX</code>). They are effectively designed for processes running on the same kernel, and use <em>filesystem pathnames for addressing</em> (see <code>man 4 unix</code> for details). So you have to share a pathname between both processes.</p>\n\n<p>Edit as requested:</p>\n\n<p>To set up the unix domain socket in C app, you need an address of type <code>sockaddr_un</code>, and fill up its <code>sun_path</code> member with a path to your socket:</p>\n\n<pre><code>    sockaddr_un sockaddr;\n    memset(&amp;sockaddr, 0, sizeof(sockaddr));\n    sockaddr.sun_family = AF_UNIX;\n    strncpy(sockaddr.sun_path, \"/path/to/your/socket\", UNIX_MAX_PATH);\n</code></pre>\n\n<p>and either <code>bind()</code> or <code>connect()</code> your socket to this <code>sockaddr</code>.</p>\n\n<p><s>However, it has nothing to do with <code>SOCK_RAW</code>. Correct me if I am wrong, but you want a raw socket over the Internet, that is <code>socket(AF_INET, SOCK_RAW, 0)</code>.</s></p>\n"}], "owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 34643377, "answer_count": 1, "score": 0, "last_activity_date": 1452191419, "creation_date": 1452098473, "last_edit_date": 1452099330, "question_id": 34638194, "link": "https://stackoverflow.com/questions/34638194/raw-socket-communication-between-two-applications-one-in-c-and-one-in-java", "title": "raw socket communication between two applications one in c and one in java", "body": "<p>I have a application (acting as the server) written in <code>c</code> that is listening on a raw socket, with this socket descriptor: <code>socket(AF_UNIX, SOCK_RAW, 0);</code>. The 0 indicates <code>IPPROTO_IP</code></p>\n\n<p>I want to write a code in java (acting as the client) to send an ip packet to this raw socket that is listening. Now i read around that java needs a 3rd party library to manage raw sockets. People recommend <code>junixsocket</code> and <code>juds</code> so i'll use one of them i guess.</p>\n\n<p>Junixsocket does something like this to define a raw socket:</p>\n\n<pre><code>File socketFile = new File(\"/path/to/your/socket\");\nAFUNIXSocket sock = AFUNIXSocket.newInstance();\nsock.connect(new AFUNIXSocketAddress(socketFile));\n</code></pre>\n\n<p>So the question is:</p>\n\n<p>Is it possible to make these 2 applications communicate with eachother through this raw socket? In java you need to establish the socketfilename and path whereas in c thats not compulsory. My c code does not specify a socketfilename or path so i dont know how to make them communicate on the same socket. How do i make sure they're both sending/receiving on the same raw socket? All this communication is happening only in local!</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "c", "user-interface", "winapi", "controls"], "comments": [{"owner": {"reputation": 3465, "user_id": 1457059, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/m8Vd7.jpg?s=128&g=1", "display_name": "Filipe Teixeira", "link": "https://stackoverflow.com/users/1457059/filipe-teixeira"}, "edited": false, "score": 0, "creation_date": 1452098418, "post_id": 34638002, "comment_id": 57021506, "body": "Rather than such a large description it would be better if you posted some code of your attempts. Try to make a minimal example of the problem. Then we can help you from there."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452102073, "post_id": 34638461, "comment_id": 57023974, "body": "Thanks for the reply. I didn&#39;t mention (sorry) that I&#39;ll need to handle the messages for the controls children of this child control that contains them. I mean I&#39;ll have to code the command for buttons or the code for making a custom progress bar increment and so on... Will that be possible using a button BS_GROUPBOX? Will I be able to paint it without a rectangle, if I&#39;ll need it? Or will it forcefully look like another common button? Thanks again for the time spent reading and replying :)"}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452102710, "post_id": 34638461, "comment_id": 57024387, "body": "Thanks again. What about this button&#39;s children controls? Will I receive the messages for an eventual custom button child of this control in the mai WndProc or I&#39;ll have to write another processing function?"}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452103453, "post_id": 34638461, "comment_id": 57024807, "body": "Sorry for my ignorance but I couldn&#39;t understand what you meant... Can you explain with an example? Let&#39;s say I have the hwnd which is my main window, hwnd_button_bsgroup which is the button that you described, child of hwnd and another control hwnd_button_child child of hwnd_button_bsgroup."}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452104063, "post_id": 34638461, "comment_id": 57025153, "body": "So if I have understood, you&#39;re basically saying I have to put hwnd_button_bsgroup as hwnd&#39;s child and also hwnd_button_child as hwnd&#39;s child if I want to keep on having only one WndProc (I was trying to avoid multiple processing procedures)... Right?"}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 2, "last_activity_date": 1452099322, "creation_date": 1452099322, "answer_id": 34638461, "question_id": 34638002, "link": "https://stackoverflow.com/questions/34638002/custom-container-control-with-children-using-pure-winapi/34638461#34638461", "title": "Custom &quot;container&quot; control with children using pure WinApi", "body": "<p>I recommend to create a <code>\"button\"</code> window with style <code>BS_GROUPBOX</code>.</p>\n\n<pre><code>hButton = CreateWindow( \"button\", \"group\", WS_CHILD | WS_VISIBLE | BS_GROUPBOX, 0, 0, 0, 0, hWnd, NULL, hInstance, NULL );\n</code></pre>\n\n<p><code>BS_GROUPBOX</code> creates a rectangle in which other controls can be grouped. The child controls are grouped by drawing a border around them. The window text is displayed in the upper-left corner.</p>\n"}], "owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "closed_date": 1452110981, "answer_count": 1, "score": 1, "last_activity_date": 1452122284, "creation_date": 1452097948, "last_edit_date": 1452122284, "question_id": 34638002, "link": "https://stackoverflow.com/questions/34638002/custom-container-control-with-children-using-pure-winapi", "closed_reason": "Needs more focus", "title": "Custom &quot;container&quot; control with children using pure WinApi", "body": "<p>I would like to create a control (named HWND container) in a window (named HWND hwnd) that will hold other controls like a button (named HWND button) and an image (named HWND bitmap) avoiding the use of \"static\" standard class. It will contain some custom drawn controls whose messages will be handled in the main WndProc (I don't want to add another WndProc) and I would like at the same time to be able to call only once the function <code>ShowWindow(container, SW_HIDE)</code> to hide the control container and all the controls it holds.\nIs this possible in plain WinApi (so no MFC or anything else)? What kind of control should I use?</p>\n\n<p>Thanks,\nLB</p>\n"}, {"tags": ["c", "stm32", "spi"], "comments": [{"owner": {"reputation": 244, "user_id": 4480814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fecf1d9236cfc2cfa2d82c1e88ea388?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Angelov", "link": "https://stackoverflow.com/users/4480814/ivan-angelov"}, "edited": false, "score": 0, "creation_date": 1452130049, "post_id": 34637993, "comment_id": 57037474, "body": "I haven&#39;t use STM32 myself but it looks like your program crashes and some interrupt vector is called. Can you check with debugger which interrupt vector gets called?"}, {"owner": {"reputation": 91, "user_id": 3757353, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/07d473b1ca581a5c585d1a1c7d759927?s=128&d=identicon&r=PG&f=1", "display_name": "prawdziwy-sok", "link": "https://stackoverflow.com/users/3757353/prawdziwy-sok"}, "reply_to_user": {"reputation": 244, "user_id": 4480814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fecf1d9236cfc2cfa2d82c1e88ea388?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Angelov", "link": "https://stackoverflow.com/users/4480814/ivan-angelov"}, "edited": false, "score": 0, "creation_date": 1452440271, "post_id": 34637993, "comment_id": 57160495, "body": "sorry, I scrapped that part as i realized that it was irrelevant, and at the moment I cant devote any more time to this. When I tried to battle this issue, I couldn&#39;t even find where the program crashes."}], "owner": {"reputation": 91, "user_id": 3757353, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/07d473b1ca581a5c585d1a1c7d759927?s=128&d=identicon&r=PG&f=1", "display_name": "prawdziwy-sok", "link": "https://stackoverflow.com/users/3757353/prawdziwy-sok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452106507, "creation_date": 1452097920, "last_edit_date": 1452106507, "question_id": 34637993, "link": "https://stackoverflow.com/questions/34637993/stm32f4-multiple-spi-i2s-getflagstatus-crashes-the-program", "title": "STM32F4 multiple SPI_I2S_GetFlagStatus crashes the program", "body": "<p>I'm trying to implement a simple http server on my stm32F411RE nucleo board from <a href=\"http://blog.iteadstudio.com/enc28j60-ethernet-module-and-demo-codes/\" rel=\"nofollow\">here</a>, but of course I've run into some problems - so far, I managed to narrow the current one to the fact, that after about 20 calls to\nSPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_RXNE); My program crashes. By crash, I mean goes to the Infinite Loop defined in the startup file, reason being \"Program received signal SIGINT, Interrupt.\"</p>\n\n<p>My spi is initialised like that: </p>\n\n<pre><code>void SPI1_Init(void){\n\nGPIO_InitTypeDef GPIO_InitStructure;\n\n/* Enable SPI1 and GPIOA clocks */\nRCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);\nRCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);\n\n\n//SCK, MISO, MOSI\nGPIO_InitStructure.GPIO_Pin = GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7;\nGPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;\nGPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;\nGPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_DOWN;\nGPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\nGPIO_Init(GPIOA, &amp;GPIO_InitStructure);\n\n    //CS\nGPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;\nGPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;\nGPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_DOWN;\nGPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\nGPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;\nGPIO_Init(GPIOA, &amp;GPIO_InitStructure);\n\n//CS down\nGPIO_SetBits(GPIOA, GPIO_Pin_2);\n\nSPI_InitTypeDef  SPI_InitStructure;\n\n/* SPI1 configuration */ \nSPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;\nSPI_InitStructure.SPI_Mode = SPI_Mode_Master;\nSPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;\nSPI_InitStructure.SPI_CPOL = SPI_CPOL_Low;\nSPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge;\nSPI_InitStructure.SPI_NSS = SPI_NSS_Soft;\nSPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_4;\nSPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;\nSPI_InitStructure.SPI_CRCPolynomial = 7;\nSPI_Init(SPI1, &amp;SPI_InitStructure);\n\n/* Enable SPI1  */\nSPI_Cmd(SPI1, ENABLE); \n</code></pre>\n\n<p>}</p>\n\n<p>after the initialization, I do this: </p>\n\n<pre><code>for(tmpCnt = 0; tmpCnt &lt; 100; tmpCnt++){\n    SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_RXNE);\n}\n</code></pre>\n\n<p>and it crashes after about 20 iterations. I am using the standard peripheral library, and System Workbench with all stock settings of compiler and everything else. At the moment nothing is connected to the SPI pins, could that be the problem? \ncalling \n(SPI1->SR) instead of SPI_I2S_GetFlagStatus \nhas the same effect so I guess that the problem lies withing reading the register. Why could that be? I'm really stuck at the moment, so any help would be appreciated.</p>\n\n<p>EDIT: \nOk, it turns out that I missed a bit of code that seems to cause this behaviour - before the SPi1->SR calls, I also had this function called: </p>\n\n<pre><code>__STATIC_INLINE uint32_t SysTick_Config(uint32_t ticks)\n{\n  if ((ticks - 1) &gt; SysTick_LOAD_RELOAD_Msk)  return (1);      /* Reload value impossible */\n\n  SysTick-&gt;LOAD  = ticks - 1;                                  /* set reload register */\n  NVIC_SetPriority (SysTick_IRQn, (1&lt;&lt;__NVIC_PRIO_BITS) - 1);  /* set Priority for Systick Interrupt */\n  SysTick-&gt;VAL   = 0;                                          /* Load the SysTick Counter Value */\n  SysTick-&gt;CTRL  = SysTick_CTRL_CLKSOURCE_Msk |\n                   SysTick_CTRL_TICKINT_Msk   |\n                   SysTick_CTRL_ENABLE_Msk;                    /* Enable SysTick IRQ and SysTick Timer */\n  return (0);                                                  /* Function successful */\n}\n</code></pre>\n\n<p>why does it break the SPI1->SR access? could there be anything else wrong? My main function: </p>\n\n<pre><code>int main(void)\n{\n\n    int tmpCnt = 0;\n    int rev = 0;\n    //uint16_t writedat = 22;\n    RCC_Init();\n    SPI1_Init();\n    //SysTick_Config(1000);\n\n    for(tmpCnt = 0; tmpCnt &lt; 50; tmpCnt++){\n        SPI1-&gt;SR ;\n    }\n\n    enc28j60Init((unsigned char *)enc28j60_MAC);\n\n    //simple_server();\n    rev = enc28j60getrev();\n\n    return rev;\n}\n</code></pre>\n\n<p>RCC_Init does not seem to change anything in the behaviour of the SPI1->SR. \nAs before, any advice would be welcome. </p>\n"}, {"tags": ["c++", "c", "printf", "undefined-behavior", "sequence-points"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1452097238, "post_id": 34637712, "comment_id": 57020721, "body": "According to <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\">this</a> it is undefined behavior.  I also believe <code>your_function(++i, ++i)</code> is undefined behavior as well."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1452097289, "post_id": 34637712, "comment_id": 57020751, "body": "<code>your_function(++i, ++i)</code> is clearly UB."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452097387, "post_id": 34637712, "comment_id": 57020817, "body": "The sequence points described by the standard quote are within the body of the <code>printf()</code> function after it has been called. You have extreme undefined behaviour in the calling sequence before the <code>printf()</code> function is called \u2014 which means that any result is acceptable (including the one you got)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1452097564, "post_id": 34637712, "comment_id": 57020959, "body": "@lurker: Both increments have to be complete before <code>your_function()</code> is called; there is a sequence point after the arguments to a function call have been evaluated, and so the side-effects in the argument list are complete then.  What is unclear is whether the same value is passed twice to <code>your_function()</code> \u2014 it is undefined; it is also undefined whether the other two values <code>i</code> passed to <code>printf()</code> are evaluated before, after or during the double increments in the other function call."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452097585, "post_id": 34637712, "comment_id": 57020977, "body": "The simple thing is that The evaluation order of function arguments is <i>unspecified</i>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452097674, "post_id": 34637712, "comment_id": 57021038, "body": "@NathanOliver Yeah I got that the function is non-deterministic, I just needed it to demonstrate the problem."}, {"owner": {"reputation": 6181, "user_id": 1025555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GBIIj.png?s=128&g=1", "display_name": "Good Night Nerd Pride", "link": "https://stackoverflow.com/users/1025555/good-night-nerd-pride"}, "edited": false, "score": 0, "creation_date": 1452097713, "post_id": 34637712, "comment_id": 57021070, "body": "So what <i>do</i> you expect? Output like <code>12 - 1 - 12</code>? You can achieve that by wrapping <code>++i</code> with <code>int f() { return ++i; }</code>. Of course <code>i</code> has to be made global for that."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452097795, "post_id": 34637712, "comment_id": 57021120, "body": "@JonathanLeffler I see. Let&#39;s ignore your_function(). There is no sequence point between evaluating the arguments in printf. The quote I posted deals with action in the printf function. Therefore that quote doesn&#39;t make <i>printf( &quot;&quot; , i++ , i++ )</i> statements defined."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1452098130, "post_id": 34637712, "comment_id": 57021334, "body": "I have attempted to cover the case <a href=\"http://stackoverflow.com/a/34536741/1275169\">involving <code>printf()</code></a> in the canonical question/answer page here, which you may find useful."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452098229, "post_id": 34637712, "comment_id": 57021397, "body": "What is the  <i>action associated with input/output conversion format specifier</i>? For my understanding, it is just the printing for <code>%d</code>, so all of the printing actions can be done after all of the inputs have been evaluated. For <code>%n</code> it would be a special case, as it is requiring counting of the already printed characters. So <i>before</i> <code>%n</code> the preceding format specifiers has to be evaluated into corresponding strings"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1452103110, "post_id": 34637712, "comment_id": 57024609, "body": "@2501: That has been the case for some time, the classic example being <code>printf(&quot;foo %n %d\\n&quot;, &amp;a, 42);</code> where <code>%n</code> behaves as a sequence point"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452097957, "post_id": 34637823, "comment_id": 57021228, "body": "Mostly correct, but &quot;none of them are separated with sequence points&quot; isn&#39;t completely accurate.  Specifically, there is a sequence point after the arguments to <code>your_function()</code> (and the &#39;function designator&#39;) are evaluated and before the function is called.  So, both the increments are complete before that function is called.  What you can&#39;t say is when the other arguments to <code>printf()</code> were evaluated w.r.t the call to <code>your_function()</code> \u2014 that is undefined, so the values passed to <code>printf()</code> are undefined."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452098220, "post_id": 34637823, "comment_id": 57021391, "body": "@JonathanLeffler: Since all the arguments to both <code>printf()</code> and <code>your_function()</code> can be evaluated without intermediate SP, I&#39;d say that &quot;none of them are separated with SP&quot; is more or less accurate (should I say &quot;sequenced&quot; intead of &quot;separated&quot;?). The SP you point actually sequences the calls to <code>your_function()</code> and <code>printf()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1452098625, "post_id": 34637823, "comment_id": 57021650, "body": "Sorta.  It&#39;s messy.  There is, emphatically, a sequence point after the arguments to <code>your_function()</code> are evaluated and before the function is called.  The third argument to <code>printf()</code>, therefore, cannot be evaluated until the call to <code>your_function()</code> returns; and that call must therefore precede the SP before the call to <code>printf()</code>.  But otherwise, there are no constraints on the order of evaluation of the arguments to <code>printf()</code>.  At this stage, these minutiae don&#39;t really matter \u2014 the overall behaviour is UB because of the two increments to <code>i</code>, and anything can happen as a result of UB."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452099003, "post_id": 34637823, "comment_id": 57021906, "body": "@JonathanLeffler: Messy indeed. That&#39;s why C++ repaced the &quot;sequence point&quot; concept with &quot;sequenced before/after&quot;. But I disagree with &quot;The third argument to printf(), therefore, cannot be evaluated until the call to your_function() returns&quot;. A valid order of evaluation of <code>f1(a, f2(b, c), d)</code> could be <code>d</code> , <code>b</code>, <code>c</code>, <code>f2()</code>, <code>a</code>, <code>f1()</code>. The only sequenced evaluations are <code>b</code>, <code>c</code> before <code>f2()</code> and <code>f2()</code>, <code>a</code>, <code>d</code> before <code>f1()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452099275, "post_id": 34637823, "comment_id": 57022091, "body": "Your &quot;I disagree&quot; comment then goes on to state what I think I stated (noting that the result of <code>your_function()</code> <i>is</i> the third argument to <code>printf()</code>), so \u2026 let&#39;s leave it at &#39;messy&#39; and close the discussion.  I note that the statement quoted is actually from Wikipedia, not from a standard.  I went trying to find it in the standard, and can&#39;t find similar text.  That&#39;s good, because I can&#39;t work out what the significance of the &#39;internal sequence points&#39; claim would be \u2014 when the presence or absence of a sequence point between conversion specifications would be detectable."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452099439, "post_id": 34637823, "comment_id": 57022190, "body": "@JonathanLeffler: The SP between conversions specifications would be detectable when those conversions have side effects, such as <code>%n</code> in my example. I didn&#39;t find this quote in the standard either, but I found another somewhat similar rule related to the callbacks from <code>qsort()</code> and <code>bsearch</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452100120, "post_id": 34637823, "comment_id": 57022692, "body": "I&#39;d like to discuss this more but I also need to get to the office.   Is email an option?  See my profile."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1452117955, "post_id": 34637823, "comment_id": 57033320, "body": "@rodrigo <code>%n</code> has a side effect, yes, but how are you to observe the state of the program between them?"}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 11, "last_activity_date": 1452098137, "last_edit_date": 1452098137, "creation_date": 1452097389, "answer_id": 34637823, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co/34637823#34637823", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>I think you misunderstood the text about the <code>printf</code> sequence points (SP). They are somehow an anomaly, and only with <code>%n</code> because this format specifier has side effects, and those side effects need to be sequenced.</p>\n\n<p>Anyway, there is a SP at the beginning of the execution of <code>printf()</code> and after the evaluation of all the arguments. Those format-specifier SP are all <em>after</em> this one so they don't affect your problem.</p>\n\n<p>In your example, the uses of <code>i</code> are all in function arguments, and none of them are separated with sequence points. Since you modify the value (twice) and use the value without intervening sequence points, your code is UB.</p>\n\n<p>What the rule about the SP in <code>printf</code> means is that this code is well formed:</p>\n\n<pre><code>int x;\nprintf(\"%d %n %d %n\\n\", 1, &amp;x, 2, &amp;x);\n</code></pre>\n\n<p>even though the value of <code>x</code> is modified twice.</p>\n\n<p>But this code is UB:</p>\n\n<pre><code>int x = 1;\nprintf(\"%d %d\\n\", x, ++x);\n</code></pre>\n\n<p>NOTE: Remember that <code>%n</code> means that the number of characters written so far is copied to the integer pointed by the associated argument.</p>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452098628, "post_id": 34637873, "comment_id": 57021651, "body": "I&#39;ve edited the question to provide clarification: &quot;I&#39;m not asking about why my middle term is 0. I&#39;m asking why the other two terms are both 12.&quot;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452098817, "post_id": 34637873, "comment_id": 57021770, "body": "@JonathanMee -  Because of the rules on order of evaluation, the middle argument could be evaluated first, resulting in UB for at least itself ( <code>your_function()</code> ), and possibly having a downstream effect on subsequent results.  So could it not be possible that UB <i>bleeds through</i> to the entire function:  <code>printf(&quot;%d - %d - %d\\n&quot;, i, your_function(++i, ++i), i);</code> ?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452100182, "post_id": 34637873, "comment_id": 57022735, "body": "Your statement &quot;literally anything can happen&quot; is false. There <i>is</i> a sequence point on the return of a function, so after <code>your_function</code> is called, <code>i</code> <i>will</i> be 12. This question was about whether the statement on <a href=\"http://en.wikipedia.org\" rel=\"nofollow noreferrer\">en.wikipedia.org</a> meant that I could depend upon <code>printf</code> arguments being called in order."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452101221, "post_id": 34637873, "comment_id": 57023443, "body": "@JonathanMee - That statement is a tongue in cheek reference to the link it follows, where nasal demons are used to describe UB.  I will change it if it is a problem for you however.  <b><i>However</i></b>, I do not agree with your statement: <i>so after your_function is called, i will be 12</i>.   That function is the <i>cause</i> of UB.  There is no guarantee what <code>i</code> will be.  <i><a href=\"http://stackoverflow.com/a/34638527/645128\">Elias</a></i> explains it well in his answer. (read toward the bottom)"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1452106980, "post_id": 34637873, "comment_id": 57026951, "body": "<code>your_function</code> is not the cause of UB, even just <code>printf(&quot;%d%d&quot;, i, ++i);</code> exhibits undefined behavior as per &#167;1.9/15 (N3690). The cause of the UB is having two side-effects or a side effect and a value computation that are unsequenced wrt one another on a scalar object. -- I should clarify that in my example, while the value computations of function arguments are merely indeterminately sequenced, the side effect of <code>++i</code> is unsequenced wrt to the value computation of <code>i</code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1452113053, "post_id": 34637873, "comment_id": 57030735, "body": "@ArneVogel - No, agreed, The function <code>your_function</code> itself is not the <i>cause</i> of UB.  It is the arguments (two instances of same object) with increments that cause it.  From C99: <b><i>6.5 Expressions</i></b> <i>2.  If a side effect on a scalar object is unsequenced relative to either a different side effect on the same scalar object or a value computation using the value of the same scalar object, the behavior is undefined....</i>.  The increments to <code>i</code> are side effects, and because they are being applied to the same scalar object, <code>i</code>, UB is invoked."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 4, "last_activity_date": 1452101099, "last_edit_date": 1495540354, "creation_date": 1452097558, "answer_id": 34637873, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co/34637873#34637873", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>Arriving at a clear answer to this question is strongly effected (even prevented) by the C rules on order of evaluation and UB.  </p>\n\n<p>The specified rules on order of evaluation are stated here:</p>\n\n<blockquote>\n  <p>C99 section 6.7.9, p23: 23 The evaluations of the initialization list\n  expressions are indeterminately sequenced with respect to one another\n  and thus the order in which any side effects occur is unspecified.</p>\n</blockquote>\n\n<p>And, <em><a href=\"https://stackoverflow.com/q/4176328/645128\">this function call will exhibit undefined behavior</a></em>:</p>\n\n<pre><code>your_function(++i, ++i)\n</code></pre>\n\n<p>Because of UB, coupled with the rules on order of evaluation, accurate predictions on the expected outcomes for the following:</p>\n\n<pre><code>printf(\"%d - %d - %d\\n\", i, your_function(++i, ++i), i);\n</code></pre>\n\n<p>are impossible. </p>\n\n<p><strong><em>Edit</em></strong><br>\n<em>...I'm not asking about why my middle term is 0. I'm asking why the other two terms are both 12.</em></p>\n\n<p>There is no guarantee which of the three arguments of the above function are called first. (because of the C's rules on order of evaluation).  And if the middle function gets evaluated first, then <em>at that point</em> you have invoked <em><a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">Undefined Behavior</a></em> .  Who can really say <em>why</em> the other two terms are 12?.  Because what happens to <code>i</code> when the second argument is evaluated is anyone's guess.</p>\n"}, {"tags": [], "owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "is_accepted": true, "score": 7, "last_activity_date": 1452165242, "last_edit_date": 1592644375, "creation_date": 1452099510, "answer_id": 34638527, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co/34638527#34638527", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>Because this question was asked because of a comment-based discussion <a href=\"https://stackoverflow.com/questions/34614308/is-there-a-way-to-get-warned-about-misbehaving-designated-initializers#comment57018987_34614308\">here</a>, I'll provide some context:</p>\n<blockquote>\n<p><em>first comment</em>: The order of operations is <strong>not</strong> guaranteed to be the order in which you pass arguments to the function. Some people (wrongly) assume that the arguments will be evaluated right to left, but according to the standard, the behaviour is undefined.</p>\n</blockquote>\n<p>The OP accepts and understands this. No point in repeating the fact that <code>your_function(++i, ++i)</code> is UB.</p>\n<blockquote>\n<p><em>In response to that comment</em>: Thanks to your comment I see that <code>printf</code> may be evaluated in any order, but I understood that to be because <code>printf</code> arguments are part of a <code>va_list</code>. Are you saying that the arguments to any function are executed in an arbitrary order?</p>\n</blockquote>\n<p>OP asking for clarification, so I elaborated a bit:</p>\n<blockquote>\n<p><em>Second comment</em>: Yes, that's exactly what I'm saying. even calling <code>int your_function(int a, int b) { return a - b; }</code> does not guarantee that the expressions you pass will be evaluated left to right. There's no sequence point (a point at which all side effects of previous evaluations are performed). Take <a href=\"https://eval.in/497763\" rel=\"nofollow noreferrer\">this example</a>. The nested call is a sequence point, so the outer call passes <code>i+1</code> (13), and the return value of the inner call (undefined, in this case -1 because <code>i++</code>, <code>i</code> evaluates to 12, 13 apparently), <strong>but there's no guarantee that this will always be the case</strong></p>\n</blockquote>\n<p>That made it pretty clear that these kinds of constructs trigger UB for all functions.</p>\n<hr />\n<h1>Wikipedia confusion</h1>\n<p>OP Quotes this:</p>\n<blockquote>\n<p>After the action associated with input/output conversion format specifier. For example, in the expression printf(&quot;foo %n %d&quot;, &amp;a, 42), there is a sequence point after the %n is evaluated before printing 42.</p>\n</blockquote>\n<p>Then applies it to his snippet (<code>prinf(&quot;%d - %d - %d\\n&quot;, i, your_function(++i, ++i), i);</code>) expeciting the format specifiers to serve as sequence points.<br>\nWhat is being referred to by saying <em>&quot;input/output conversion format specifier&quot;</em> is the <code>%n</code> specifier. The corresponding argument <em>must</em> be a pointer to an unsigned integer, and it will be assigned the number of characters printed thus far. Naturally, <code>%n</code> must be evaluated before the rest of the arguments are printed. However, using the pointer passed for <code>%n</code> in other arguments is still dangerous: it's <em><strong>not</strong></em> UB (well, it isn't, but it can be):</p>\n<pre><code>printf(&quot;Foo %n %*s\\n&quot;, &amp;a, 100-a, &quot;Bar&quot;);//DANGER!!\n</code></pre>\n<p>There is a sequence point <em>before</em> the function is called, so the expression <code>100-a</code> <em>will</em> be evaluated before <code>%n</code> has set <code>&amp;a</code> to the correct value. If <code>a</code> is uninitialized, then <code>100-a</code> is UB. If <code>a</code> is initialized to 0, for example, the result of the expression <em>will</em> be 100. On the whole, though, this kind of code is pretty much asking for trouble. Treat it as <em>very bad practice</em>, or worse...<br>\nJust look at the output generated by either one of these statements:</p>\n<pre><code>unsigned int a = 90;\nprintf(&quot;%u %n %*s\\n&quot;,a,  &amp;a, 10, &quot;Bar&quot;);//90         Bar\nprintf(&quot;%u\\n&quot;, a);//3\nprintf(&quot;Foo %u %n %*s\\n&quot;,a, &amp;a, 10-a, &quot;Bar&quot;);//Foo 3      Bar &lt; padding used: 10 - 3, not 10 - 6 \nprintf(&quot;%u\\n&quot;, a);//6\n</code></pre>\n<p>In as you can see, <code>n</code> gets reassigned <em>inside</em> of <code>printf</code>, so you can't use its new value in the argument list (because there's a sequence point). If you expect <code>n</code> to be reassigned &quot;in-place&quot; you're essentially expecting C to jump out of the function call, evaluate other arguments, and jump back into the call. That's just not possible. If you were to change <code>unsigned int a = 90;</code> to <code>unsigned int a;</code>, then the behaviour is undefined.</p>\n<hr />\n<h1>Concerning the <code>12</code>'s</h1>\n<p>Now because the OP read up on sequence points, he correctly notices that this statement:</p>\n<pre><code>printf(&quot;%d - %d - %d\\n&quot;, i, your_function(++i, ++i), i);\n</code></pre>\n<p>Is slightly different: <code>your_function(++i, ++i)</code> <em><strong>is</strong></em> a sequence point, and <em><strong>guarantees</strong></em> that <code>i</code> will be incremented twice. This function call is a sequence point because:</p>\n<blockquote>\n<p>Before a function is entered in a function call. The order in which the arguments are evaluated is not specified, but this sequence point means that all of their side effects are complete before the function is entered</p>\n</blockquote>\n<p>That means that, before <code>printf</code> is called, <code>your_function</code> <strong>has</strong> to be called (because its return value is one of the arguments for the <code>printf</code> call), and <code>i</code> will be incremented twice.<br>\nThis <em><strong>could</strong></em> explain the output being <em>&quot;12 - 0 - 12&quot;</em>, but is it guaranteed to be the output?</p>\n<h1>No</h1>\n<p>Technically, although most compilers will evaluate the <code>your_function(++i, ++i);</code> call first, the standard would allow a compiler to evaluate the arguments passed to <code>sprintf</code> left to right (the order isn't specified after all). So this would be an equally valid result:</p>\n<pre><code>10 - 0 - 12\n//or even\n12 - 0 - 10\n//and\n10 - 0 - 10\n//technically, even this would be valid\n12 - 0 - 11\n</code></pre>\n<p>Although the latter output is extremely unlikely (it'd be very inefficient)</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 2, "accepted_answer_id": 34638527, "answer_count": 3, "score": 11, "last_activity_date": 1572682791, "creation_date": 1452096988, "last_edit_date": 1572682791, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>I read <a href=\"https://en.wikipedia.org/wiki/Sequence_point#Sequence_points_in_C_and_C.2B.2B\">here</a> that there is a sequence point:</p>\n\n<blockquote>\n  <p>After the action associated with input/output conversion format specifier. For example, in the expression <code>printf(\"foo %n %d\", &amp;a, 42)</code>, there is a sequence point after the <code>%n</code> is evaluated before printing <code>42</code>.</p>\n</blockquote>\n\n<p>However, when I run <a href=\"http://ideone.com/TO5iuI\">this code</a>:</p>\n\n<pre><code>int your_function(int a, int b) {\n    return a - b;\n}\n\nint main(void) {\n    int i = 10;\n\n    printf(\"%d - %d - %d\\n\", i, your_function(++i, ++i), i);\n}\n</code></pre>\n\n<p>Instead of what I expect I get:</p>\n\n<blockquote>\n  <p>12 - 0 - 12</p>\n</blockquote>\n\n<p>Meaning that there was <em>not</em> a sequence point created for the conversion format specifier. Is <a href=\"http://en.wikipedia.org\">http://en.wikipedia.org</a> wrong, or have I just misunderstood something, or is gcc non-compliant in this case (incidentally Visual Studio 2015 yields the same unexpected result)?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I understand that the order the arguments to <code>your_function</code> are evaluated and assigned to the parameters is undefined. I'm not asking about why my middle term is 0. I'm asking why the other two terms are both 12.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1452096641, "post_id": 34637583, "comment_id": 57020323, "body": "Don&#39;t use <code>strlen()</code> in a loop, use <code>for (i = 0 ; temp[i] != &#39;\\0&#39; ; ++i)</code>. The <code>strlen()</code> function computes the length by iterating through the characters until it finds the <code>&#39;\\0&#39;</code> which marks the end of the string, using <code>strlen()</code> like you did is very inefficient."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1452096855, "post_id": 34637583, "comment_id": 57020459, "body": "<i>//Dont know what I should put there.</i> - <code>if (temp[i] == &#39;#&#39;) { &#47;* skip this character by advancing i *&#47;; &#47;* while (temp[i] != &#39;\\0&#39; &amp;&amp; temp[i] != &#39; &#39;) &#47;* store temp[i] somewhere and advance i *&#47;;</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1452096924, "post_id": 34637583, "comment_id": 57020508, "body": "Make the buffer at least <code>142</code> characters to accommodate for the <code>140</code> characters in the message, the <code>&#39;\\n&#39;</code> and the null terminator <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1452097019, "post_id": 34637583, "comment_id": 57020574, "body": "@chqrlie: Why <code>\\n</code>? Isn&#39;t 141 sufficient?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452100211, "post_id": 34637583, "comment_id": 57022753, "body": "@rootkea: because <code>fgets()</code> stores the <code>&#39;\\n&#39;</code> at the end of the buffer.  If the buffer is too short, it leaves it in the input stream, which is not appropriate either."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1452146524, "post_id": 34637583, "comment_id": 57042136, "body": "(I&#39;ve reverted the title to the original; &quot;Answered string&quot; isn&#39;t a useful title. Users can see that the problem was solved, because an answer has been accepted.)"}], "answers": [{"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 0, "last_activity_date": 1452096745, "creation_date": 1452096745, "answer_id": 34637639, "question_id": 34637583, "link": "https://stackoverflow.com/questions/34637583/getting-the-hashtags-from-a-tweet-in-c/34637639#34637639", "title": "Getting the hashtags from a tweet in C", "body": "<p>Check for <code>#</code> character in <code>for</code> loop and if match found then copy the string starting from next character till <code>\\0</code> or another <code>#</code> occurs.  </p>\n\n<p>If another <code>#</code> character occurs then again copy the string starting from next character till <code>\\0</code> or another <code>#</code> occurs to retrieve the second hash tag.  </p>\n\n<p>And as pointed in another comment use <code>len = strlen()</code> and then use this <code>len</code> variable in for loop to avoid the function overhead for each <code>for</code> iteration</p>\n"}, {"comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1452096915, "post_id": 34637646, "comment_id": 57020504, "body": "This is fine if there&#39;s only a single hashtag in the string, but if there are multiple, since <code>temp</code> doesn&#39;t change between loops this isn&#39;t going to let you find them iteratively."}, {"owner": {"reputation": 69, "user_id": 4252837, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-6VG_2gUx77Q/AAAAAAAAAAI/AAAAAAAAACQ/a2ZN7Surk-I/photo.jpg?sz=128", "display_name": "CuriousDeveloper", "link": "https://stackoverflow.com/users/4252837/curiousdeveloper"}, "edited": false, "score": 0, "creation_date": 1452104405, "post_id": 34637646, "comment_id": 57025346, "body": "thank you so much this just gives the exact answer!!"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1452097501, "last_edit_date": 1452097501, "creation_date": 1452096762, "answer_id": 34637646, "question_id": 34637583, "link": "https://stackoverflow.com/questions/34637583/getting-the-hashtags-from-a-tweet-in-c/34637646#34637646", "title": "Getting the hashtags from a tweet in C", "body": "<p>Just search for the <code>#</code> with <code>strchr()</code> like this</p>\n\n<pre><code>char *hashtag = strchr(temp, '#');\nif (hashtag != NULL)\n    hashtag += 1;\n</code></pre>\n\n<p>and you can replace the next white space with <code>nul</code>, now <code>hashtag</code> points to the \"<em>hashtag</em>\" but the one in the <code>temp</code> array, if you need to copy you can use <code>strdup()</code> or any non POSIX variant that is likely available on your system if it's not POSIX compliant.</p>\n\n<p>Also, don't compare <code>fgets()</code> return value to <code>EOF</code>, because <code>fgets()</code> returns a pointer, the fact that you don't mention your compiler warning you about it means that you might have compiler warnings turned off, the right way would be</p>\n\n<pre><code>char line[1024]; // More if lines can be longer\nchar *hashtag;\n\nwhile (fgets(line, sizeof(line), data) != NULL)\n{\n     char *end;\n     hashtag = line;\n     while ((hashtag != NULL) &amp;&amp; ((hashtag = strchr(hashtag, '#')) != NULL))\n     {\n         if (hashtag == NULL)\n             continue;\n         end = strpbrk(hashtag, \"\\n \");\n         if (end != NULL)\n             *end = '\\0';\n         hashtag += 1;\n         // Copy hashtag here\n         fprintf(stderr, \"%s\\n\", hashtag); // Print it to see\n         // Continue to the next character\n         hashtag = end;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 2, "last_activity_date": 1452100784, "creation_date": 1452100784, "answer_id": 34638917, "question_id": 34637583, "link": "https://stackoverflow.com/questions/34637583/getting-the-hashtags-from-a-tweet-in-c/34638917#34638917", "title": "Getting the hashtags from a tweet in C", "body": "<p>In your code, you write:</p>\n\n<pre><code>for(i = 0; i &lt; strlen(temp); i++) {\n    //Dont know what I should put there.\n}\n</code></pre>\n\n<p>Others have pointed out that you shouldn't use <code>strlen</code> as a loop condition; use <code>temp[i] != '\\0'</code> instead. The real problem is that you probably don't want to extract the hashtags in a single loop.</p>\n\n<p>You are looking for a certain pattern and you don't know up front how many hits you will get. After you have found one occurrence, you look again in the rest of the string.</p>\n\n<p>Therefore, it may be a good idea to write a function that processes a tweet one hashtag at a time. This function needs a state variable, so it knows where it left off last time it was called.</p>\n\n<p>The resulting hashtag must be stored somewhere. Some functions, for example <code>strtok</code>, modify the original string to generate null-terminated substrings without copying the data. That can't be done here, because hashtags may run into each other <code>#like#this</code> and overwiting the second hash with a null character will skip the hash tag <code>this</code>. So the function is passed a char buffer, which can be filled. The buffer size is passed, too, so that the buffer will not be overwritten. The string in the buffer is guaranteed to be null-terminated.</p>\n\n<p>A <a href=\"https://www.hashtags.org/platforms/twitter/what-characters-can-a-hashtag-include/\" rel=\"nofollow\">hashtag</a> is a hash sign that is immediately followed by unaccented latin characters, numbers and an underscore. The first character afer the hash sign may not be a number.</p>\n\n<p>Putting all this together:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint is_valid(int c, int num_allowed)\n{\n    if ('A' &lt;= c &amp;&amp; c &lt;= 'Z') return 1;\n    if ('a' &lt;= c &amp;&amp; c &lt;= 'z') return 1;\n    if ('0' &lt;= c &amp;&amp; c &lt;= '9') return num_allowed;\n    if (c == '_') return 1;\n    return 0;\n}\n\nint hashtag(char **p, char buf[], size_t max)\n{\n    char *q;\n\n    if (*p == NULL || **p == '\\0') return 0;\n\n    q = strchr(*p, '#');\n    while (q &amp;&amp; is_valid(q[1], 0) == 0) {\n        q = strchr(q + 1, '#');\n    }\n\n    if (q) {\n        size_t n = 0;\n\n        q++;                    // skip hash sign\n\n        while (n + 1 &lt; max &amp;&amp; is_valid(*q, 1)) {\n            buf[n++] = *q++;\n        }\n\n        if (max) buf[n] = '\\0'; // terminate buffer\n        *p = q;                 // remember position\n\n        return 1;               // hashtag found\n    }\n\n    return 0;                   // nothing found\n}\n</code></pre>\n\n<p>And an example how to use the function:</p>\n\n<pre><code>int main()\n{\n    char *tweet = \"#amith7951 https://t.co/eoW5q7V2Fh #net \"\n                  \"#ajax #asp #cprogramming #sql \"\n                  \"### ###happy#new#2016 #\";\n\n    char *p = tweet;            // state variable for hashtag function\n    char tag[32];               // char buffer to store hashtag in\n    int n = 0;\n\n    while (hashtag(&amp;p, tag, sizeof(tag))) {\n        printf(\"[%d] %s\\n\", n++, tag);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The resulting function may look long, but it the calling code is straightforward. The function also makes heavy use of pointers. You could use array indices, but because <code>strchr</code> (and many othzer library functions)  use pointers anyway, it makes sense to use pointers throughout.</p>\n"}], "owner": {"reputation": 69, "user_id": 4252837, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-6VG_2gUx77Q/AAAAAAAAAAI/AAAAAAAAACQ/a2ZN7Surk-I/photo.jpg?sz=128", "display_name": "CuriousDeveloper", "link": "https://stackoverflow.com/users/4252837/curiousdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "accepted_answer_id": 34638917, "answer_count": 3, "score": -1, "last_activity_date": 1453068060, "creation_date": 1452096555, "last_edit_date": 1453068060, "question_id": 34637583, "link": "https://stackoverflow.com/questions/34637583/getting-the-hashtags-from-a-tweet-in-c", "title": "Getting the hashtags from a tweet in C", "body": "<p>Hi guys I have a question about string manipulation in C.</p>\n\n<p>I was given a file and got the tweet from it and I am asked to get the hashtags from the string and put in into avl tree so all of my avl functions are fine but scanning the string part is a bit problematic.</p>\n\n<p>My tweet sample is <code>hello buddies #happy</code></p>\n\n<p>Here is the code:</p>\n\n<pre><code>void read_tweet_data(avl_tree *t, char name[]) {\n    FILE *data;\n    data = fopen(name, \"r\");\n    char eof, temp[140], *temp2;\n    char *has, *myc;\n    int i;\n    while (fgets(temp, 140, data) != EOF) {\n        //puts(temp);\n        for (i = 0; i &lt; strlen(temp); i++) {\n            //Dont know what I should put there.\n        }\n    }\n}\n</code></pre>\n\n<p>I need to scan the hashtags without the '#'s in it and I need your help. Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1452095754, "post_id": 34637263, "comment_id": 57019738, "body": "Compare <code>fscanf()</code> to 5 instead of <code>EOF</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1452096255, "post_id": 34637263, "comment_id": 57020075, "body": "Please do not correct your code from the proposed fixes in comments and answers, it makes the inconsistent."}], "answers": [{"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 1, "last_activity_date": 1452096289, "last_edit_date": 1452096289, "creation_date": 1452095866, "answer_id": 34637359, "question_id": 34637263, "link": "https://stackoverflow.com/questions/34637263/why-my-code-cannot-stop-use-fscanf/34637359#34637359", "title": "Why my code cannot stop? use fscanf", "body": "<ol>\n<li>Your <code>fscanf</code> should have <code>.</code> instead of <code>:</code> between <code>%d</code> as that's causing mismatch.  </li>\n<li>Also use <code>&amp;t</code> instead of <code>t</code>. See <code>man fscanf</code>  </li>\n<li>Also <code>while(fscanf() != EOF)</code> mean even if any matching failure occurs and <code>fscanf</code> fails to match and store all 5 arguments (which is happening here due to <code>:</code> and <code>.</code> mismatch) then too continue the loop.<br>\nYou should use <code>while(fscanf() == 5)</code> to continue the loop only when all the 5 arguments of <code>fscanf</code> gets matched and stored.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1452096354, "last_edit_date": 1452096354, "creation_date": 1452095904, "answer_id": 34637374, "question_id": 34637263, "link": "https://stackoverflow.com/questions/34637263/why-my-code-cannot-stop-use-fscanf/34637374#34637374", "title": "Why my code cannot stop? use fscanf", "body": "<p>There are several problems with your code:</p>\n\n<ul>\n<li><p>you pass <code>t</code> instead of its address <code>&amp;t</code> for the last format specifier, invoking undefined behavior.</p></li>\n<li><p>The format string uses <code>:</code> instead of <code>.</code> as a separator, causing parsing failure.</p></li>\n<li><p><code>fscanf</code> returns the number of fields it parsed successfully. Only upon end of file and if no field could be parsed does it return <code>EOF</code>. Otherwise, if there is a character in the input stream that does not match the format, it stops and returns between <code>0</code> and <code>5</code> for your format string. For example, a <code>.</code> in the input stream will cause your <code>while</code> loop to go on for ever with <code>fscanf</code> returning <code>0</code> as the <code>.</code> does not match <code>%d</code>.  <strong>This explains the current behavior you observe</strong>.</p></li>\n</ul>\n\n<p>You should change the test to:</p>\n\n<pre><code>    while ((aaa = fscanf(fin, \"%d.%d.%d.%d/%d\",\n                     &amp;temp[0], &amp;temp[1], &amp;temp[2], &amp;temp[3], &amp;t)) == 5) {\n        printf(\"%d\\n\", aaa);\n        printf(\"%d:%d:%d:%d\\n\", temp[0], temp[1], temp[2], temp[3]);\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 5739173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c05917dfc2384ddce2b715819b3292?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5739173/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1452098785, "last_edit_date": 1452098785, "creation_date": 1452095986, "answer_id": 34637388, "question_id": 34637263, "link": "https://stackoverflow.com/questions/34637263/why-my-code-cannot-stop-use-fscanf/34637388#34637388", "title": "Why my code cannot stop? use fscanf", "body": "<p>If you want to read from a <code>FILE *</code> handle, you need to use <code>fscanf()</code> instead of <code>scanf()</code>.</p>\n\n<p>For example, with <code>fin</code> as the <code>FILE *</code> here:</p>\n\n<pre><code>while (fscanf(fin, \"%d:%d:%d:%d/%d\",\n              &amp;temp[0], &amp;temp[1], &amp;temp[2], &amp;temp[3], &amp;t) != EOF) { ... }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3322640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b153bc2e6a2d149a3e9aa92ab95dfb5?s=128&d=identicon&r=PG&f=1", "display_name": "wind910037", "link": "https://stackoverflow.com/users/3322640/wind910037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 34637374, "answer_count": 3, "score": 1, "last_activity_date": 1452098785, "creation_date": 1452095595, "last_edit_date": 1452096118, "question_id": 34637263, "link": "https://stackoverflow.com/questions/34637263/why-my-code-cannot-stop-use-fscanf", "title": "Why my code cannot stop? use fscanf", "body": "<p>I want to continue read file until it ends,but it ouputs error answer and cannot stop.\nmy code is:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    void create() {\n        FILE *fin = fopen(\"in\", \"r\");\n        int temp[4], t;\n        int aaa;\n\n        while ((aaa = scanf(fin, \"%d:%d:%d:%d/%d\", \n                      &amp;temp[0], &amp;temp[1], &amp;temp[2], &amp;temp[3], t)) != EOF) {\n            printf(\"%d\\n\", aaa);\n            printf(\"%d:%d:%d:%d\\n\", temp[0], temp[1], temp[2], temp[3]);\n        }\n\n        fclose(fin);\n    }\n\n    int main() {\n        create();\n\n        return 0;\n    }\n</code></pre>\n\n<p>and my input file content is:</p>\n\n<pre><code>103.29.43.0/24\n103.29.5.0/24\n103.29.52.0/22\n103.29.56.0/22\n103.29.60.0/22\n103.2.96.0/22\n103.29.64.0/24\n103.29.65.0/24\n103.29.66.0/24\n103.29.67.0/24\n103.29.7.0/24\n</code></pre>\n\n<p>but it outputs:</p>\n\n<pre><code>0\n103:0:0:0\n0\n103:0:0:0\n0\n103:0:0:0\n....(loop)\n</code></pre>\n"}, {"tags": ["python", "c", "raspberry-pi"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1452095293, "post_id": 34637074, "comment_id": 57019420, "body": "Maybe you want to remote copy some file, e.g. using <code>scp</code> (with ssh); however you could install Linux on your laptop, run the checker on it, and copy the files to the raspberry when you are ok with them. See also <a href=\"http://git-scm.com/\" rel=\"nofollow noreferrer\">git</a>"}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1452100081, "post_id": 34637074, "comment_id": 57022663, "body": "Install the checker into the <code>bin&#47;</code> folder in your home folder. Create it if it doesn&#39;t already exists. Make the checker executable and log out and in again if you needed to create the <code>bin&#47;</code> folder. Now you should be able to start the checker from any folder by just typing <code>styleCheck.py</code>. Whoever came up with that filename should consider reading the Python Style Guide a.k.a. PEP8. ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 5190395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046314442048356/picture?type=large", "display_name": "Martin Dimitrov", "link": "https://stackoverflow.com/users/5190395/martin-dimitrov"}, "is_accepted": false, "score": 2, "last_activity_date": 1452095925, "creation_date": 1452095925, "answer_id": 34637379, "question_id": 34637074, "link": "https://stackoverflow.com/questions/34637074/install-program-to-raspberry-pi/34637379#34637379", "title": "Install program to Raspberry Pi", "body": "<p>What would I suggest ,although not a direct answer to your question, is tinkering a bit with the code and see if you can pass as an argument the location of your files. That way you could just go into the directory of you styleCheck.py and do \"./styleCheck.py destination/of/your/file\" without having to copy anything. This will also make you feel good about improving a university piece of code.</p>\n\n<p>Keep in mind that you should do that only if you are familiar enough with python so that you do not break the actual checker. </p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5566057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aae4232672e4992c5d95d7e99b8ea3b4?s=128&d=identicon&r=PG&f=1", "display_name": "raysirRamone", "link": "https://stackoverflow.com/users/5566057/raysirramone"}, "edited": false, "score": 0, "creation_date": 1452278768, "post_id": 34637551, "comment_id": 57114128, "body": "can you give an idea of what the shell script would be like? Thanks"}], "tags": [], "owner": {"reputation": 1, "user_id": 2548822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcbdd33b5775359437ccab60ada285ee?s=128&d=identicon&r=PG", "display_name": "Nik W", "link": "https://stackoverflow.com/users/2548822/nik-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1452096469, "creation_date": 1452096469, "answer_id": 34637551, "question_id": 34637074, "link": "https://stackoverflow.com/questions/34637074/install-program-to-raspberry-pi/34637551#34637551", "title": "Install program to Raspberry Pi", "body": "<p>Another option is put the files in a folder, do your chmod once to make them executable and then write a quick shell script that takes the file location as a parameter. Then have it copy cp the files into that folder, run your tester and delete them upon completion.</p>\n\n<p>This is of course option B, I would simply do what Martin said.</p>\n"}], "owner": {"reputation": 1, "user_id": 5566057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aae4232672e4992c5d95d7e99b8ea3b4?s=128&d=identicon&r=PG&f=1", "display_name": "raysirRamone", "link": "https://stackoverflow.com/users/5566057/raysirramone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1456426317, "creation_date": 1452095007, "last_edit_date": 1456426317, "question_id": 34637074, "link": "https://stackoverflow.com/questions/34637074/install-program-to-raspberry-pi", "title": "Install program to Raspberry Pi", "body": "<p>I am taking a computer science program in University. There is a style check program we use to make sure our C code is formatted the way the teachers want. </p>\n\n<p>The procedure I have to follow currently is copy two python files into the directory of the file I want to check. The files are named \"cpplint.py\" and \"styleCheck.py\". So after copying them in I execute <code>chmod u+x styleCheck.py</code> and then I can run it with <code>./styleCheck.py</code>.</p>\n\n<p>So my question is: is there a way to install the style checker on my Raspberry Pi so that I don't need to do all the copying and pasting? It would be nice just to be able to run the style checker with the <code>./styleCheck.py</code> command in any directory and avoid all the repetitive cutting and pasting. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452095168, "post_id": 34637073, "comment_id": 57019323, "body": "Does it compile well? I see semicolon missing."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 1, "creation_date": 1452095209, "post_id": 34637073, "comment_id": 57019356, "body": "Also <code>option</code> and <code>operation</code>. Is that a typo? Did you compile the code?"}, {"owner": {"reputation": 451, "user_id": 5436671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab6f9073b2fd10af7bb0a86fbe9e82c5?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/5436671/francesco"}, "reply_to_user": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452095220, "post_id": 34637073, "comment_id": 57019366, "body": "yes, i have the code to another pc so i just copied it by hand, edited. By the way it compiles well ;)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1452095251, "post_id": 34637073, "comment_id": 57019389, "body": "No it doesn&#39;t. And still doesn&#39;t following your edit."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 1, "creation_date": 1452095294, "post_id": 34637073, "comment_id": 57019421, "body": "We are missing a semicolon again."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1452095437, "post_id": 34637073, "comment_id": 57019503, "body": "@Francesco: Bathsheba is pointing out that the code you compiled and the code you showed us are not the same thing. That&#39;s a really big problem if we&#39;re going to debug it for you! You are in fact required to present a <a href=\"http://stackoverflow.com/help/mcve\">testcase</a> that in itself reproduces the problem. Otherwise we have no faith that you haven&#39;t made yet more &quot;typos&quot; when hand-copying your code here, thereby wasting our time trying to chase down a problem that doesn&#39;t exist."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1452095857, "post_id": 34637073, "comment_id": 57019806, "body": "<code>&amp;&amp;</code> is the droid you are looking for."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 11, "last_activity_date": 1452095346, "creation_date": 1452095346, "answer_id": 34637171, "question_id": 34637073, "link": "https://stackoverflow.com/questions/34637073/c-do-while-with-scanf-multiple-inputs/34637171#34637171", "title": "C: do-while with scanf, multiple inputs", "body": "<pre><code>while(option != '+' || option != '-' || option != '*' || option != 'x');\n</code></pre>\n\n<p>This condition is always true.</p>\n"}, {"comments": [{"owner": {"reputation": 451, "user_id": 5436671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab6f9073b2fd10af7bb0a86fbe9e82c5?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/5436671/francesco"}, "edited": false, "score": 0, "creation_date": 1452095942, "post_id": 34637179, "comment_id": 57019875, "body": "thank you, but again i have multiple print of &#39;Select the op.:&#39; before i can actually insert a input"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1452096791, "post_id": 34637179, "comment_id": 57020420, "body": "You must also check the return value of <code>scanf</code> to avoid an infinite loop at end of file."}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 2, "last_activity_date": 1452097497, "last_edit_date": 1452097497, "creation_date": 1452095363, "answer_id": 34637179, "question_id": 34637073, "link": "https://stackoverflow.com/questions/34637073/c-do-while-with-scanf-multiple-inputs/34637179#34637179", "title": "C: do-while with scanf, multiple inputs", "body": "<p>Your termination condition does not what you want it to do. Try this:</p>\n\n<pre><code>do\n{\n   ...\n}\nwhile( option != '+' &amp;&amp; option != '-' &amp;&amp; option != '*' &amp;&amp; option != 'x');\n</code></pre>\n\n<p>This means to continue the loop as long as <code>option</code> is not <code>+</code> and not <code>-</code> and not <code>*</code> and not <code>x</code>.</p>\n\n<p>Same condition would be:</p>\n\n<pre><code>do\n{\n   ...\n}\nwhile( !( option == '+' || option == '-' || option == '*' || option == 'x' ) );\n</code></pre>\n\n<p>Apart from this check return value of <code>scanf</code>, as gon1332 does in his perfect answer.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1452096633, "post_id": 34637382, "comment_id": 57020317, "body": "This will fail if you hit the end of file.  You must check the return value of <code>scanf</code>: <code>if (scanf(&quot; %c&quot;, &amp;option) != 1) break;</code>"}], "tags": [], "owner": {"reputation": 1630, "user_id": 1814987, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/64EC5.jpg?s=128&g=1", "display_name": "gon1332", "link": "https://stackoverflow.com/users/1814987/gon1332"}, "is_accepted": true, "score": 3, "last_activity_date": 1452097137, "last_edit_date": 1452097137, "creation_date": 1452095935, "answer_id": 34637382, "question_id": 34637073, "link": "https://stackoverflow.com/questions/34637073/c-do-while-with-scanf-multiple-inputs/34637382#34637382", "title": "C: do-while with scanf, multiple inputs", "body": "<p>The condition you used is always true. You should use <code>&amp;&amp;</code> instead of <code>||</code>. Make the truth table in order to verify it by yourself.\nWhy don't you use <code>strchr</code>? The condition would be more elegant:</p>\n\n<pre><code>do {\n    printf(\"Select the op.: \");\n    if (1 != scanf(\" %c\", &amp;option)) break;\n} while (!strchr(\"+-*x\", option));\n</code></pre>\n\n<p>Also, for your other question, considering the multiple execution of the <code>printf</code> is the fact that the buffer, keeps the newline character the uses types in order to send their option to <code>scanf</code>. So in the next loop, the newline of the previous loop will be accepted by <code>scanf</code>. It is not a valid option, so, the next loop will ask you again.\nYou can correct it by writing <code>scanf</code> like this: <code>scanf(\" %c\", &amp;option)</code>. <strong>This works only because you know that you want to discard only one white-space character.</strong> This is not an all-time solution.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1452096743, "post_id": 34637441, "comment_id": 57020397, "body": "<code>fflush(stdin);</code> is not specified.  The C Standard says it invokes undefined behavior."}, {"owner": {"reputation": 169, "user_id": 5739173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c05917dfc2384ddce2b715819b3292?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5739173/mike"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1452097124, "post_id": 34637441, "comment_id": 57020638, "body": "which compiler your are using ?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1452100140, "post_id": 34637441, "comment_id": 57022708, "body": "Quoting C11 7.21.5.2 fflush: <i>If stream points to an output stream or an update stream in which the most recent operation was not input, the fflush function causes any unwritten data for that stream to be delivered to the host environment to be written to the file; otherwise, the behavior is undefined.</i>  Some compilers may attach specific behavior on <code>fflush(stdin)</code> but is remains non standard and mostly inappropriate.  Furthermore, your answer does not address the OP&#39;s problem at all."}], "tags": [], "owner": {"reputation": 169, "user_id": 5739173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c05917dfc2384ddce2b715819b3292?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5739173/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1452099439, "last_edit_date": 1452099439, "creation_date": 1452096168, "answer_id": 34637441, "question_id": 34637073, "link": "https://stackoverflow.com/questions/34637073/c-do-while-with-scanf-multiple-inputs/34637441#34637441", "title": "C: do-while with scanf, multiple inputs", "body": "<p>Although he standards do not bless using <code>fflush()</code> on an input stream, it is documented and works on many Linux/Unix systems.  So the following may work for you, but it is not portable:</p>\n\n<pre><code>{\n    printf(\"Select the op.: \");\n    fflush(stdin);\n    scanf(\"%c\", &amp;option);\n}\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 5436671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab6f9073b2fd10af7bb0a86fbe9e82c5?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/5436671/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 34637382, "answer_count": 4, "score": -2, "last_activity_date": 1452099439, "creation_date": 1452095007, "last_edit_date": 1452096531, "question_id": 34637073, "link": "https://stackoverflow.com/questions/34637073/c-do-while-with-scanf-multiple-inputs", "title": "C: do-while with scanf, multiple inputs", "body": "<p>i'm trying to take a user's input and check if it is equal to some option('+','-','*','x')</p>\n\n<pre><code>    do {\n        printf(\"Select the op.: \");\n        scanf(\"%c\", &amp;option);\n    } while (option != '+' || option != '-' || option != '*' || option != 'x');\n    printf(\"%c\", option);\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>Select the op.:Select the op.:Select the op.:Select the op.:\n</code></pre>\n\n<p>As you can see the <code>printf(\"Select the op.: \")</code> is executed multiple times and I cannot understand the reason, thus if I try to insert, eg <code>+</code>, this is the print output:</p>\n\n<pre><code>++\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "variables", "static", "global"], "comments": [{"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 2, "creation_date": 1452094962, "post_id": 34637035, "comment_id": 57019196, "body": "Why don&#39;t you test it and find out ;)?"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1452095025, "post_id": 34637035, "comment_id": 57019236, "body": "Never ever (ever ever ever*) ask a software development question when it&#39;s easier to try it yourself. You&#39;ll learn soooooooo much more doing then you will by asking."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1452096170, "post_id": 34637035, "comment_id": 57020018, "body": "Note that there is no qualifier <code>STATIC</code>.  I presume you are asking about the keyword <code>static</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1452111793, "post_id": 34637035, "comment_id": 57030046, "body": "Huh? How is this question at all opinion based? Perhaps it should be closed, but not for that reason."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 6, "last_activity_date": 1452095967, "last_edit_date": 1452095967, "creation_date": 1452095596, "answer_id": 34637264, "question_id": 34637035, "link": "https://stackoverflow.com/questions/34637035/are-global-static-variables-within-a-file-comparable-to-a-local-static-variable/34637264#34637264", "title": "Are global static variables within a file comparable to a local static variable within a function?", "body": "<p>The keyword <code>static</code> has a different meaning at file scope then it does in a local scope.</p>\n\n<p>At file scope, <code>static</code> declares <em>internal linkage</em>.  That means only other code in the same translation unit can see the declared variable (or function); if the same name appears in a different file then it designates a separate variable (function).  The opposite is external linkage, which you can declare explicitly via the <code>extern</code> keyword.  Additionally, variables declared within a function scope have <em>no</em> linkage -- they can be accessed only within the function wherein they are declared.</p>\n\n<p>In a local scope, on the other hand, <code>static</code> declares <em>static storage duration</em>, as opposed to the default of automatic duration.  Variables with static duration are initialized at program startup and retain their values across function calls, unlike variables with automatic duration.</p>\n\n<p>All variables declared at file scope and all functions have static duration, so although it is potentially confusing, there is no essential ambiguity in using the same keyword for these two distinct purposes in different contexts.</p>\n\n<p>As for your example, whether your file-scope variable is declared <code>static</code> or not, it has static storage duration.  Its value will therefore persist across function calls, and all functions in the same file will have access to its current value at all times.  If it is <em>not</em> declared <code>static</code> then it can be accessed by other functions, too.</p>\n"}], "owner": {"reputation": 305, "user_id": 1224478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/c987226db9c6fdc191e96275491cd76f?s=128&d=identicon&r=PG", "display_name": "user1224478", "link": "https://stackoverflow.com/users/1224478/user1224478"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "closed_date": 1452110572, "answer_count": 1, "score": -2, "last_activity_date": 1452096038, "creation_date": 1452094889, "question_id": 34637035, "link": "https://stackoverflow.com/questions/34637035/are-global-static-variables-within-a-file-comparable-to-a-local-static-variable", "closed_reason": "Opinion-based", "title": "Are global static variables within a file comparable to a local static variable within a function?", "body": "<p>I know declaring a global variable as STATIC will make it visible to the current file. Does the variable retain its data every time functions are called within the file?</p>\n\n<p>For example,</p>\n\n<p>Let's say some file calls func1() below, which modifies the static global variable data and then calls func2() which modifies it again.</p>\n\n<p>The next time a file calls func1(), will it be modifying a new data variable struct? or will it preserve the previous data that was modified in the first call?</p>\n\n<pre><code>STATIC MY_DATA  Data1;\n\nvoid func1( ){\n   //modify Data1\n   func2(Data1);\n}\n\nvoid func2 (MY_DATA data){\n    // modify data \n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1452093170, "post_id": 34636439, "comment_id": 57017926, "body": "Write code first. Show it to us."}, {"owner": {"reputation": 88, "user_id": 5536972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1707095486176299/picture?type=large", "display_name": "Tal Sokolinsky", "link": "https://stackoverflow.com/users/5536972/tal-sokolinsky"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1452093213, "post_id": 34636439, "comment_id": 57017963, "body": "I have no idea how to do this"}, {"owner": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "edited": false, "score": 0, "creation_date": 1452093281, "post_id": 34636439, "comment_id": 57018000, "body": "Start with main, maybe add some includes, like stdio.h."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1452093417, "post_id": 34636439, "comment_id": 57018098, "body": "You can go further: write the main func and a function check_password that always answers &quot;good&quot; for example. In short: go further as far as you can before asking."}, {"owner": {"reputation": 1110, "user_id": 2694851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf0f17a52361fc0ccd8e42fa1a114db4?s=128&d=identicon&r=PG", "display_name": "bazeblackwood", "link": "https://stackoverflow.com/users/2694851/bazeblackwood"}, "edited": false, "score": 0, "creation_date": 1452093502, "post_id": 34636439, "comment_id": 57018157, "body": "This thread might be of some use to you, OP: <a href=\"http://stackoverflow.com/a/1071555/2694851\">stackoverflow.com/a/1071555/2694851</a>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452093535, "post_id": 34636439, "comment_id": 57018172, "body": "You can also go to the google. Try entering words like &quot; C character string tutorial&quot; and see what an astonishing amount of ready-to-use advice is out there. (The very first hit seemed good enough to me.) In fact, judging by the level of ignorance you exhibit, you may start with &quot; C tutorial&quot; proper. (I didn&#39;t check the results on that but suppose the first entry should be good enough as well.)"}, {"owner": {"reputation": 88, "user_id": 5536972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1707095486176299/picture?type=large", "display_name": "Tal Sokolinsky", "link": "https://stackoverflow.com/users/5536972/tal-sokolinsky"}, "edited": false, "score": 0, "creation_date": 1452093598, "post_id": 34636439, "comment_id": 57018212, "body": "here guys I don&#39;t know what to do next"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452093772, "post_id": 34636439, "comment_id": 57018335, "body": "You know, google is a bit awkward, with the text interface and all. I just saw that there are youtube videos providing C tutorials. The homeopathic information density of about 1e-8 compared to text may be more manageable"}, {"owner": {"reputation": 2219, "user_id": 3882744, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8bec02fe258d18391f277f7669df1c6c?s=128&d=identicon&r=PG&f=1", "display_name": "caot", "link": "https://stackoverflow.com/users/3882744/caot"}, "edited": false, "score": 0, "creation_date": 1452093941, "post_id": 34636439, "comment_id": 57018452, "body": "<a href=\"http://stackoverflow.com/questions/21760692/regular-expression-for-password-validation-c-sharp\">Regular Expression for Password Validation C#</a>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452093978, "post_id": 34636439, "comment_id": 57018482, "body": "This code example is actually not bad. You&#39;ll need a second loop <i>within</i> the first one: each single password char must be checked against each of the forbidden chars, i.e. for each <code>i</code> you have to have a <code>j</code> or whatever looping over all forbidden chars (would that be <code>newStr</code>? Then it is badly named)."}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 4164964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bd4909742348c82b83a229c8b8484b?s=128&d=identicon&r=PG&f=1", "display_name": "9y7h0n", "link": "https://stackoverflow.com/users/4164964/9y7h0n"}, "is_accepted": false, "score": 0, "last_activity_date": 1452093691, "creation_date": 1452093691, "answer_id": 34636653, "question_id": 34636439, "link": "https://stackoverflow.com/questions/34636439/how-to-check-if-two-strings-have-the-same-char/34636653#34636653", "title": "How to check if two strings have the same char?", "body": "<p>There are a few ways to do this. </p>\n\n<p>You can loop through the string and for each character check if it's one of the \"bad\" characters.</p>\n\n<p>Alternatively, you can use regular expressions. They are not part of ANSI C, but are part of POSIX. I've linked a few resources about them below. If you want examples or more information about regex, google will be able to help you out quite a bit.</p>\n\n<p>Manual page for C regex: <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/regcomp.html\" rel=\"nofollow\">http://pubs.opengroup.org/onlinepubs/009695399/functions/regcomp.html</a></p>\n\n<p>Official GNU page on regex: <a href=\"http://www.gnu.org/software/libc/manual/html_node/Regular-Expressions.html\" rel=\"nofollow\">http://www.gnu.org/software/libc/manual/html_node/Regular-Expressions.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452094041, "post_id": 34636701, "comment_id": 57018530, "body": "And don&#39;t call it <code>newStr</code>. If it contains forbidden chars call it <code>forbiddenChars</code>."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "reply_to_user": {"reputation": 88, "user_id": 5536972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1707095486176299/picture?type=large", "display_name": "Tal Sokolinsky", "link": "https://stackoverflow.com/users/5536972/tal-sokolinsky"}, "edited": false, "score": 0, "creation_date": 1452094778, "post_id": 34636701, "comment_id": 57019059, "body": "@TalSokolinsky: Did you add the logic to identify repetitive chars?"}, {"owner": {"reputation": 88, "user_id": 5536972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1707095486176299/picture?type=large", "display_name": "Tal Sokolinsky", "link": "https://stackoverflow.com/users/5536972/tal-sokolinsky"}, "edited": false, "score": 0, "creation_date": 1452094935, "post_id": 34636701, "comment_id": 57019170, "body": "I think I will do it with one loop and use srt[i] and str[i+1]"}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452095007, "post_id": 34636701, "comment_id": 57019225, "body": "Instead of adding a separate loop can you do it using above loops? Hint - Use Inner loop."}], "tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": true, "score": 0, "last_activity_date": 1452094528, "last_edit_date": 1452094528, "creation_date": 1452093838, "answer_id": 34636701, "question_id": 34636439, "link": "https://stackoverflow.com/questions/34636439/how-to-check-if-two-strings-have-the-same-char/34636701#34636701", "title": "How to check if two strings have the same char?", "body": "<p>You are right to store all the illegal characters in a separate string.<br>\nSo why you didn't do it?</p>\n\n<pre><code>newStr[] = \"!@#$%^&amp;*()+=\";\n</code></pre>\n\n<p>Now for each character of <code>newStr</code> check whether it exists in <code>str</code> or not.<br>\nHint - nested loops  </p>\n\n<p><code>return false</code> on the very first occurrence of an illegal char.  </p>\n\n<p>Also simultaneously you should check if <code>current character == previous character</code>. If yes then return <code>false</code>.  </p>\n\n<p>Write and edit your code. If you get stuck we'll help you.  </p>\n\n<p>A furher hint:  </p>\n\n<pre><code>int strLen = strlen(str);\nint newStrLen = strlen(newStr);\n\nfor(i = 0; i &lt; newStrLen; i++)\n    for(j = 0; j &lt; strLen; j++)\n        if(newStr[i] == str[j])\n        {\n            printf(\"Bad Password\");\n            return 1;\n        }  \n</code></pre>\n\n<p>Now add the logic to identify repetitive chars.</p>\n"}], "owner": {"reputation": 88, "user_id": 5536972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1707095486176299/picture?type=large", "display_name": "Tal Sokolinsky", "link": "https://stackoverflow.com/users/5536972/tal-sokolinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1452094998, "accepted_answer_id": 34636701, "answer_count": 2, "score": -3, "last_activity_date": 1452094791, "creation_date": 1452093127, "last_edit_date": 1452094072, "question_id": 34636439, "link": "https://stackoverflow.com/questions/34636439/how-to-check-if-two-strings-have-the-same-char", "closed_reason": "Not suitable for this site", "title": "How to check if two strings have the same char?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define HUNDRED 100   \n\nint main()\n{\n    char str[HUNDRED];\n    char forbiddenChars[] = \"!@#$%^&amp;*()+= \";\n    scanf(\"%s\",str);\n    for(i=0;str[i];i++)\n    {\n        if(str[i] == newStr[]) //this if is supposed to check if they have the same char\n        {\n            //prints illegal password\n        }\n    }\n}`\n</code></pre>\n\n<p>I was asked to write a code that checks if a password is \"good\",\n\"good\" means the password have no chars like !@#$%^&amp;*()+= and does not have any same chars that go together, for example butter is bad because it has double t. also it has no spaces. </p>\n\n<p>So I thought that I can make a string that contain all the illegal chars and then check if they both have some chars that are the same, but I have no idea how to do this. Please help me</p>\n"}, {"tags": ["c", "compiler-errors", "typedef"], "answers": [{"tags": [], "owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "is_accepted": true, "score": 2, "last_activity_date": 1452092697, "creation_date": 1452092697, "answer_id": 34636297, "question_id": 34636235, "link": "https://stackoverflow.com/questions/34636235/using-struct-typedef-in-multiple-c-h-files/34636297#34636297", "title": "using struct typedef in multiple .c &amp; .h files", "body": "<p>The problem is that inside <code>vehicles.c</code>, the compiler needs to know what a <code>car_t</code> actually <em>is</em>, and you've only provided it what it should be <em>called</em>. What a <code>car_t</code> actually <em>is</em> is defined in <code>car.c</code>. To fix this, you'll either have to make <code>carlist</code> a pointer (since the compiler doesn't need a complete type for that), or you'll have to move the structure definition to the <code>.h</code> file:</p>\n\n<p><code>car.h</code>:</p>\n\n<pre><code>typedef struct car_node\n{\n    void *data;\n    struct car_node *next;\n    struct car_node *prev;\n} car_node_t;\n\ntypedef struct car {\n    car_node_t head;\n    car_node_t tail;\n} car_t;\n</code></pre>\n"}], "owner": {"reputation": 4586, "user_id": 3002584, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ec8f711075255b4c196cb21448be2f6c?s=128&d=identicon&r=PG&f=1", "display_name": "OfirD", "link": "https://stackoverflow.com/users/3002584/ofird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 34636297, "answer_count": 1, "score": 1, "last_activity_date": 1452092697, "creation_date": 1452092491, "question_id": 34636235, "link": "https://stackoverflow.com/questions/34636235/using-struct-typedef-in-multiple-c-h-files", "title": "using struct typedef in multiple .c &amp; .h files", "body": "<p>A directory holds the following files:</p>\n\n<ol>\n<li>\"car\" files:</li>\n</ol>\n\n<p>a. car.h:</p>\n\n<pre><code>#ifndef __CAR_H__\n#define __CAR_H__\n\ntypedef struct car car_t;\n...\n(some functions declarations)\n...\n#endif /* __CAR_H__ */\n</code></pre>\n\n<p>b. car.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"car.h\"\n\ntypedef struct car_node\n{\n   void *data;\n   struct car_node *next;\n   struct car_node *prev;\n} car_node_t;\n\nstruct car\n{\n   car_node_t head;\n   car_node_t tail;\n};\n...\n(some functions implementations)\n...\n</code></pre>\n\n<p>c. car_main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"car.h\"\n\nint main()\n{\n   ...\n   (some tests)\n   ...\n}\n</code></pre>\n\n<p>2.  \"vehicles\" files:</p>\n\n<p>a. vehicles.h</p>\n\n<pre><code>#ifndef __VEHICLES_H__\n#define __VEHICLES_H__\n\ntypedef struct vehicles vehicles_t;\n\n...\n(some functions declarations)\n...\n\n#endif /* ifndef __VEHICLES_H__ */  \n</code></pre>\n\n<p>b. vehicles.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"car.h\"\n#include \"vehicles.h\"\n\nstruct vehicles\n{\n   car_t carlist;\n   void *data; \n};\n</code></pre>\n\n<p>c. vehicles_main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"car.h\"\n#include \"vehicles.h\"\n\nint main()\n{\n   ...\n   (some tests)\n   ...\n}\n</code></pre>\n\n<p>When compiling the following with a makefile, everything works great:\ncar.c, car_main.c.</p>\n\n<p>But when I compile the following files with a makefile: car.c, vehicles.c, vehicles_main.c, I get the following error:</p>\n\n<pre><code>vehicles.c: error: field \u2018carlist\u2019 has incomplete type\n</code></pre>\n\n<p>My question is: Why the compiler doesn't recognize the typedef car_t, found inside car.h, if car.h is included inside vehicles.c?</p>\n"}, {"tags": ["python", "c", "cython"], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1452097154, "last_edit_date": 1495535462, "creation_date": 1452094645, "answer_id": 34636957, "question_id": 34636186, "link": "https://stackoverflow.com/questions/34636186/typed-memoryview-not-allow-inside-if/34636957#34636957", "title": "Typed memoryview not allow inside if", "body": "<p><em>...cdef is not allowed here. Do not understand why?</em>  </p>\n\n<p>The short answer is that you are likely running into a scope issue related to the fact that Python and C have different scoping rules.  </p>\n\n<p><em>...when you make an assignment to a variable in a scope, that variable is automatically considered by Python to be local to that scope and shadows any similarly named variable in any outer scope.</em>  </p>\n\n<p><em><a href=\"http://www.toptal.com/python/top-10-mistakes-that-python-programmers-make\" rel=\"nofollow noreferrer\">From here</a></em> (read #4)  </p>\n\n<p>Also, small disscussion <em><a href=\"https://stackoverflow.com/a/25087127/645128\">here</a></em> on scope differences, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "is_accepted": true, "score": 3, "last_activity_date": 1452177941, "creation_date": 1452177941, "answer_id": 34657994, "question_id": 34636186, "link": "https://stackoverflow.com/questions/34636186/typed-memoryview-not-allow-inside-if/34657994#34657994", "title": "Typed memoryview not allow inside if", "body": "<p>You're trying to dynamically do type declarations, but type declarations are needed by Cython and the compiler at compile time. When you compile your cython code, cython uses the static type information you've provided to optimize the code. If the types are not static, ie you don't know the type or dimension before runtime, cython cannot include that information at compile time.</p>\n\n<p>There are two main ways to solve this issue, one is to define different functions for each possible type, ie something like this:</p>\n\n<pre><code>def myFun1D(double[::1] array):\n    pass\n\ndef myFun2D(double[:, ::1] array):\n    pass\n\ndef foo(array):\n    cdef double r\n    if array.ndim == 1:\n        r = myFun1D(array)\n    elif array.ndim == 2:\n        r = myFun2D(array)\n</code></pre>\n\n<p>The second option is to simply not type declare array, and allow cython to treat it as a dynamically typed python object.</p>\n"}], "owner": {"reputation": 491, "user_id": 5608122, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9663280a11ad10efec26c4fa646484f5?s=128&d=identicon&r=PG&f=1", "display_name": "fossekall", "link": "https://stackoverflow.com/users/5608122/fossekall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 34657994, "answer_count": 2, "score": 1, "last_activity_date": 1452177941, "creation_date": 1452092351, "last_edit_date": 1452094269, "question_id": 34636186, "link": "https://stackoverflow.com/questions/34636186/typed-memoryview-not-allow-inside-if", "title": "Typed memoryview not allow inside if", "body": "<p>I have a pyx function which will get a numpy array. I don't know the dimensions before run time. It is easy to check, but the problem is I have a numpy array <code>x</code> with with dimesion 1 or 2. I want to check in order to set the correct \ntyped memoryview:</p>\n\n<pre><code>if len(x.shape&gt;1):\n   cdef double [:,::1] cview_x = x\nelse:\n   cdef double [::1] cview_x = x\n</code></pre>\n\n<p>But I get an error message which says that cdef is not allowed here. Do not understand why?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1452097143, "post_id": 34635980, "comment_id": 57020658, "body": "Welcome to Stack Overflow.  In general, &quot;just stops working&quot; is not an adequate description of a problem.  Does it go into an infinite loop; does it crash with a segmentation fault or equivalent; or is it something else?  One of the questions to consider is &quot;what did the debugger show?&quot;  Another is &quot;what did print statements show happening when they were added to the code?&quot;  One or the other of those techniques is a necessary step to working out what&#39;s going wrong.  Consider creating an MCVE (<a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example?</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": true, "score": 4, "last_activity_date": 1452094133, "last_edit_date": 1592644375, "creation_date": 1452092119, "answer_id": 34636093, "question_id": 34635980, "link": "https://stackoverflow.com/questions/34635980/inserting-at-the-end-of-a-linked-list/34636093#34636093", "title": "Inserting at the end of a linked list", "body": "<ol>\n<li><p>When <code>while</code> loop terminates <code>temp</code> is <code>NULL</code>. So <code>temp -&gt; next</code> will generate <code>Segmentation Fault</code>.</p>\n<p>Instead of <code>while(temp!=NULL)</code> you should use <code>while(temp-&gt;next!=NULL)</code>.</p>\n</li>\n<li><p>What if <code>head</code> is <code>NULL</code>? (Empty linked list)<br />\nFor that check whether <code>head</code> is <code>NULL</code> or not.</p>\n</li>\n<li><p>Also what if <code>malloc</code> failed?</p>\n</li>\n</ol>\n<p>So the solution will be:</p>\n<pre><code>void insert(node **head, int x)\n{\n    node *new = (node *)malloc(sizeof(node));\n    \n    if(!new)\n    {\n        printf(&quot;Memory allocation failed!\\n&quot;);\n        exit(1);\n    }\n    new-&gt;data = x;\n    new-&gt;next = NULL;\n\n    node *temp = *head;\n\n    if(!temp)\n        *head = new;\n    else\n    {\n        while (temp-&gt;next != NULL)\n        {\n            temp = temp-&gt;next;\n        }\n        temp-&gt;next = new;\n    }\n    return ;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452094419, "post_id": 34636204, "comment_id": 57018803, "body": "You should also check that the <code>malloc()</code> succeeds \u2014 but the technique is interesting.  Steve Maguire describes it in &quot;Writing Solid Code&quot;, too.  It&#39;s advantage is that it avoids special cases \u2014 and hence helps reduce code bloat."}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 2, "last_activity_date": 1452094879, "last_edit_date": 1452094879, "creation_date": 1452092422, "answer_id": 34636204, "question_id": 34635980, "link": "https://stackoverflow.com/questions/34635980/inserting-at-the-end-of-a-linked-list/34636204#34636204", "title": "Inserting at the end of a linked list", "body": "<p>Use <code>node**</code> to iterate. So it doesn't matter, if the list is empty or not. Iterate until you find a node whose <code>next</code> is <code>NULL</code>. You can allocate the memory right on target.</p>\n\n<pre><code>void insert( node **head, int x){\n\n    node **ptr_new = head;\n    while( *ptr_new != NULL ){\n        ptr_new = &amp;((*ptr_new)-&gt;next);\n    }\n\n    // now temp refers either to head or to next of the last node.\n    *ptr_new = malloc( sizeof(node) );\n    if ( *ptr_new != NULL )\n    {\n        (*ptr_new)-&gt;next = NULL;\n        (*ptr_new)-&gt;data = x;\n    }\n}\n</code></pre>\n\n<p>In contrast to your original code you have a pointer to pointer in which the address of the new node is stored. In your original you iterated while <code>temp</code> was not <code>NULL</code>.</p>\n\n<pre><code>while (temp != NULL) {\n    temp = temp-&gt;next;\n}\n</code></pre>\n\n<p>After this <code>while</code> loop <code>temp==NULL</code>, because this is the termination condition of your loop. Because of that your program stops working here <code>temp-&gt;next = new;</code></p>\n"}, {"comments": [{"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "edited": false, "score": 0, "creation_date": 1452097530, "post_id": 34636227, "comment_id": 57020934, "body": "I like the second method. Thanks!"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1452093389, "last_edit_date": 1452093389, "creation_date": 1452092476, "answer_id": 34636227, "question_id": 34635980, "link": "https://stackoverflow.com/questions/34635980/inserting-at-the-end-of-a-linked-list/34636227#34636227", "title": "Inserting at the end of a linked list", "body": "<p>There are two problems with your code:</p>\n\n<ul>\n<li>The <code>temp</code> pointer is pushed to the end of the list until it becomes <code>NULL</code>, by then it is too late to store the new pointer to its <code>next</code> member, and attempting that invokes undefined behavior (<code>Segmentation fault</code> on your system).</li>\n<li>If the list is empty, you cannot store the new item this way even if you stopped the loop when <code>temp-&gt;next == NULL</code>.</li>\n</ul>\n\n<p>It is also desirable to avoid using C++ keywords to name variables in C code as it would make it more difficult to migrate the code to C++, should the need arise to do so.</p>\n\n<p>Also it would be more correct to test if <code>malloc</code> failed and return the pointer to the new node or <code>NULL</code> on failure.</p>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>node *insert(node **head, int x) {\n    node *new_node = malloc(sizeof(node));\n    if (new_node != NULL) {\n        new_node-&gt;data = x;\n        new_node-&gt;next = NULL;\n\n        node *temp = *head;\n        if (temp == NULL) {\n            *head = new_node;\n        } else {\n            while (temp-&gt;next != NULL) {\n                temp = temp-&gt;next;\n            }\n            temp-&gt;next = new_node;\n        }\n    }\n    return new_node;\n}\n</code></pre>\n\n<p>You can also use a pointer to pointer to iterate over the list: it is slightly more sophisticated but shorter as you have only one test to find the location to store the <code>new</code> pointer:</p>\n\n<pre><code>node *insert(node **head, int x) {\n    node *new_node = malloc(sizeof(node));\n    if (new_node != NULL) {\n        new_node-&gt;data = x;\n        new_node-&gt;next = NULL;\n\n        node **np = head;\n        while (*np) {\n            np = &amp;(*np)-&gt;next;\n        }\n        *np = new_node;\n    }\n    return new_node;\n}\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 34636093, "answer_count": 3, "score": 1, "last_activity_date": 1452094879, "creation_date": 1452091780, "last_edit_date": 1452092546, "question_id": 34635980, "link": "https://stackoverflow.com/questions/34635980/inserting-at-the-end-of-a-linked-list", "title": "Inserting at the end of a linked list", "body": "<p>I wrote a function for inserting a node at the end of a linked list. When I run the program, and when I call this function, the program just stops working. </p>\n\n<p>Here is the function:</p>\n\n<pre><code>void insert(node **head, int x) {\n    node *new = malloc(sizeof(node));\n    new-&gt;data = x;\n    new-&gt;next = NULL;\n\n    node *temp = *head;\n\n    while (temp != NULL) {\n        temp = temp-&gt;next;\n    }\n    temp-&gt;next = new;\n}\n</code></pre>\n\n<p>Can anyone tell where did it go wrong? </p>\n"}, {"tags": ["c", "linux", "select", "pipe", "waitpid"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1452090899, "post_id": 34635483, "comment_id": 57016265, "body": "It&#39;s not quite clear what you asking. If you want to close some connection made via pipe when child(ren) exits, then 1) ignore SIGPIPE (so that your parent/server doesn&#39;t exit -- default action for SIGPIPE is exit) 2) Look for EPIPE error number. 3) Close the file descriptor(s) that return <code>EPIPE</code>. Except for reaping purposes, you don&#39;t need to use wait() for this purpose."}], "answers": [{"tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": true, "score": 1, "last_activity_date": 1452091332, "last_edit_date": 1452091332, "creation_date": 1452091011, "answer_id": 34635682, "question_id": 34635483, "link": "https://stackoverflow.com/questions/34635483/select-pipie-and-waitpd-how-to-wait-for-specyfic-child/34635682#34635682", "title": "Select,pipie and waitpd - how to wait for specyfic child?", "body": "<p>When you fork, the parent receives the pid of the child.\nYou need to keep these pids in some data structure (a hash table or a linked list, perhaps).  You should also keep the pipe-fd associated with that pid.  So perhaps a datastructure like:</p>\n\n<pre><code>typedef struct pidsnpipes pidsnpipes;\nstruct pidsnpipes {\n    pidsnpipes * next;       /* for linked list */\n    pid_t        childpid;\n    int          pipefd;     /* parents end of this pipe */\n    int          status;     /* if you want to remember the child's exit status */\n};\n\npidsnpipes * childprocs = NULL;\n</code></pre>\n\n<p>When <code>wait()</code> returns you get the pid of the child which exited (and optionally, its exit status).  Use that to lookup which pipe went with that process so you close the right pipe.</p>\n"}], "owner": {"reputation": 27, "user_id": 2427678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65973ff1f0e7750c2c09379aa4afd4f2?s=128&d=identicon&r=PG", "display_name": "matkuz", "link": "https://stackoverflow.com/users/2427678/matkuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "closed_date": 1452103154, "accepted_answer_id": 34635682, "answer_count": 1, "score": -1, "last_activity_date": 1452091332, "creation_date": 1452090354, "question_id": 34635483, "link": "https://stackoverflow.com/questions/34635483/select-pipie-and-waitpd-how-to-wait-for-specyfic-child", "closed_reason": "Needs details or clarity", "title": "Select,pipie and waitpd - how to wait for specyfic child?", "body": "<p>He is the deal:\nI have n <code>fork</code>, in fork I have <code>exec</code>, everything is connect with <code>pipe</code>.<br>\nMy question:<br>\nIf some child do <code>exit()</code> I want to <code>close</code> his <code>pipe</code> to be abble to read. - how to do this? Waitpid most likely...</p>\n\n<p>Now I wait for all child like that:</p>\n\n<pre><code>for(i = 0; i&lt; val; i++)\n        {\n                wait(&amp;status);\n                close(fd[i][1]);\n        }\n</code></pre>\n\n<p>val - numbers of child. </p>\n"}, {"tags": ["c", "readfile"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1452087306, "post_id": 34634404, "comment_id": 57013780, "body": "@iharob :) see <code>int apare(char a, char s[])...</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452087315, "post_id": 34634404, "comment_id": 57013790, "body": "You could format you code such that HUMANS can read it too."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1452087345, "post_id": 34634404, "comment_id": 57013806, "body": "maybe you can consider using <code>isprint()</code> to check for the printable character..."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452087386, "post_id": 34634404, "comment_id": 57013838, "body": "Also, what is <code>read(f)</code> it&#39;s not what it seems to be, is <code>read()</code> a function defined by you but not posted here?"}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 1, "creation_date": 1452087419, "post_id": 34634404, "comment_id": 57013858, "body": "Why would you rename the file to <code>.txt</code>?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452087523, "post_id": 34634404, "comment_id": 57013927, "body": "And, are you trying to decompile the <i>.exe</i> files?"}, {"owner": {"reputation": 21, "user_id": 5080039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc8bfecad02423ae6a908876358f85f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5080039/alex"}, "edited": false, "score": 0, "creation_date": 1452087617, "post_id": 34634404, "comment_id": 57013988, "body": "I am trying to make a program that finds out what an ,exe does and I&#39;m not sure how to read this .exe I don&#39;t even now if it&#39;s possible. I asked earlier if it is but the question disappeared."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 2, "creation_date": 1452088037, "post_id": 34634404, "comment_id": 57014271, "body": "@Alex &quot;I am trying to make a program that finds out what an ,exe does&quot; sounds like what you really want is know under the term: decompiling. This is not trivial and often not even completely possible and is not achieved by the way you think. Read <a href=\"https://en.wikipedia.org/wiki/Decompiler\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Decompiler</a> for further information"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1452089100, "post_id": 34634404, "comment_id": 57015018, "body": "@Alex there is a fundamental difference between a program and the corresponding C code. The latter is <i>not</i> a program by itself thus you can&#39;t retrieve the exact C code from the executable."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5080039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc8bfecad02423ae6a908876358f85f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5080039/alex"}, "edited": false, "score": 0, "creation_date": 1452087707, "post_id": 34634465, "comment_id": 57014037, "body": "Well I asked how to decompile  but my question got deleted and i tried on my own..."}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "reply_to_user": {"reputation": 21, "user_id": 5080039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc8bfecad02423ae6a908876358f85f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5080039/alex"}, "edited": false, "score": 2, "creation_date": 1452087890, "post_id": 34634465, "comment_id": 57014158, "body": "@Alex: &quot;decompile&quot; is exactly the word you should be looking up on Google as you research this.  Attempting to write your own decompiler from scratch is... ambitious."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 21, "user_id": 5080039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc8bfecad02423ae6a908876358f85f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5080039/alex"}, "edited": false, "score": 1, "creation_date": 1452088985, "post_id": 34634465, "comment_id": 57014953, "body": "@Alex: decompilation is ambition.  You may want to search for disassembly instead.  While writing a disassembler is still a daunting task, it is no where as difficult as writing a tool to do decompilation.   If you still want to attempt decompilation, Cifuentes dissertation (<a href=\"http://zyloid.com/recomposer/files/decompilation_thesis.pdf\" rel=\"nofollow noreferrer\">zyloid.com/recomposer/files/decompilation_thesis.pdf</a>) is a good starting point."}, {"owner": {"reputation": 21, "user_id": 5080039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc8bfecad02423ae6a908876358f85f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5080039/alex"}, "reply_to_user": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1452090197, "post_id": 34634465, "comment_id": 57015805, "body": "@thurizas: Thank you, mate! That was what I was looking for. A disassembler! All I need is to obtain the code (in assembly if possible)."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 21, "user_id": 5080039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc8bfecad02423ae6a908876358f85f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5080039/alex"}, "edited": false, "score": 0, "creation_date": 1452090893, "post_id": 34634465, "comment_id": 57016258, "body": "@Alex: glad to help.  Instead of writing one from scratch, you may want to look at some of the frameworks out there.  Capstone (<a href=\"http://www.capstone-engine.org/\" rel=\"nofollow noreferrer\">capstone-engine.org</a>) or BARF (<a href=\"https://github.com/programa-stic/barf-project\" rel=\"nofollow noreferrer\">github.com/programa-stic/barf-project</a>). There are others around, but I have personal experience with each of these frameworks.  Also, there are commercial disassemblers out there, IDA-Pro is the industry standard.  You may have better luck with questions on the reverse engineering SO site (<a href=\"http://reverseengineering.stackexchange.com/\">reverseengineering.stackexchange.com</a>).  Cheers, T."}], "tags": [], "owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1452087364, "creation_date": 1452087364, "answer_id": 34634465, "question_id": 34634404, "link": "https://stackoverflow.com/questions/34634404/getting-code-behind-a-programm/34634465#34634465", "title": "Getting code behind a programm", "body": "<blockquote>\n  <p>I changed its extension from .exe to .txt</p>\n</blockquote>\n\n<p>That doesn't make it <em>actual text</em>.  Compiled executables are binary files.  It's <em>possible</em> that they coincidentally contain <em>some</em> readable characters within the ASCII range of the English alphabet here and there, depending on the encoding you use to read them.  But that's just a coincidence.</p>\n\n<p>You can't decompile an application into its original code just by renaming the file.</p>\n"}, {"tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": false, "score": 0, "last_activity_date": 1452090569, "last_edit_date": 1452090569, "creation_date": 1452090022, "answer_id": 34635370, "question_id": 34634404, "link": "https://stackoverflow.com/questions/34634404/getting-code-behind-a-programm/34635370#34635370", "title": "Getting code behind a programm", "body": "<p>If this is a Linux/Unix system, there is a good chance there is a manual page which explains the layout of an executable file.  For example:</p>\n\n<pre><code>man elf\n</code></pre>\n\n<p>Your system may also have a couple of tools to do a basic analysis of an executable file, which you may find instructive:</p>\n\n<pre><code>man objdump\nman readelf\n</code></pre>\n\n<p>There is also likely a C include file, perhaps <code>#include &lt;elf.h&gt;</code> which may help write your program.  But be aware, you have started a daunting task.  And if the executable file has been stripped of its symbols, even more so.</p>\n\n<p>Here's an example of using objdump to disassemble:</p>\n\n<pre><code># objdump -d moai.2014.10.07\nmoai.2014.10.07:     file format elf64-x86-64\n\n\nDisassembly of section .init:\n\n0000000000400e48 &lt;_init&gt;:\n  400e48:       48 83 ec 08             sub    $0x8,%rsp\n  400e4c:       e8 4b 03 00 00          callq  40119c &lt;call_gmon_start&gt;\n  400e51:       e8 da 03 00 00          callq  401230 &lt;frame_dummy&gt;\n  400e56:       e8 55 51 00 00          callq  405fb0 &lt;__do_global_ctors_aux&gt;\n  400e5b:       48 83 c4 08             add    $0x8,%rsp\n  400e5f:       c3                      retq  \n     ...\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5080039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc8bfecad02423ae6a908876358f85f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5080039/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1452108114, "answer_count": 2, "score": -4, "last_activity_date": 1452090727, "creation_date": 1452087127, "last_edit_date": 1452090727, "question_id": 34634404, "link": "https://stackoverflow.com/questions/34634404/getting-code-behind-a-programm", "closed_reason": "Not suitable for this site", "title": "Getting code behind a programm", "body": "<p>I want to make a program that analyzes the commands of an <code>.exe</code> file and take some decisions regarding the content. The problem is here: I copied a <code>.exe</code> from a C project in my program folder (which also uses C). I changed its extension from <code>.exe</code> to <code>.txt</code> and made this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint apare(char a, char s[]) //this function search a character in a string.\n{\n    printf(\"merge\");\n    int nr=strlen(s),i;\n    for(i=0; i&lt;nr; i++)\n    {\n        if(a==s[i])\n            return 1;\n    }\n    return 0;\n}\n\nint main()\n{\n    FILE * f=fopen(\"program in C.txt\",\"r\");\n    char c,s[10000]=\"abcedfghijklmnopqrstuvwxyzABCEFGHIJKLMNOPQRSTUVWXYZ _-+=.,&lt;&gt;?!@#$%^&amp;*()1234567890{}[];:'\";//The characters I want to be printed\n    int a=1,k=0;//k is only used to printf \"\\n\" when 1100 characters have been displayed on a line\n    while(a)\n    {\n        c=fgetc(f);//A char is read\n        if(c!=EOF)//If no error occurs than display the character if it is present in the string.\n        {\n            if(apare(c,s))\n            {\n                printf(\"%c\",c);\n                k++;\n            }\n        }\n        else if(ferror) //If an error occurs than read the next char\n            c=fgetc(f);\n        else  //If EOF than stop reading\n            a=0;\n        if(k==100)\n        {\n            k=0;\n            printf(\"\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>My problem is that this program shows the \"strange\" characters too. The role of this program is to get only readable parts. Why does this happen?     </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1452086938, "post_id": 34634259, "comment_id": 57013571, "body": "<code>poredi</code> nested functions. move to outside."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1452088068, "last_edit_date": 1452088068, "creation_date": 1452087087, "answer_id": 34634393, "question_id": 34634259, "link": "https://stackoverflow.com/questions/34634259/why-am-i-getting-undefined-reference-to-error/34634393#34634393", "title": "Why am I getting &quot;undefined reference to&quot; error?", "body": "<p>You have <code>poredi()</code> defined inside <code>napuni()</code>. Nested functions is not valid in ISO C but gcc allows it as an <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html\" rel=\"nofollow\">extension</a>. I doubt you actually intended to use nested functions but misplaced of braces. Basically remove one brace <code>}</code>  from the end of your source file add it <em>above</em> the definition of <code>poredi()</code>. </p>\n\n<p><strong>A better indentation would have help avoid such surprises.</strong></p>\n"}], "owner": {"reputation": 185, "user_id": 3779674, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8b44141215f2134f4516f8adbbc006a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3779674", "link": "https://stackoverflow.com/users/3779674/user3779674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 34634393, "answer_count": 1, "score": 1, "last_activity_date": 1452088068, "creation_date": 1452086701, "question_id": 34634259, "link": "https://stackoverflow.com/questions/34634259/why-am-i-getting-undefined-reference-to-error", "title": "Why am I getting &quot;undefined reference to&quot; error?", "body": "<p>The code below throws an error \"undefined reference to 'poredi'\".</p>\n\n<p>Everything is defined in this single c file (aside from the c libs in include).</p>\n\n<p>'poredi' is just a function, of which I define a prototype right below the typedef and then I impelement it lower in the file.</p>\n\n<p>Looking at some of the similar questions I can say that it is compiled on Windows 10 using the MinGW C compiler through the CodeBlocks IDE without any additional arguments for compiling.</p>\n\n<p>I am a total C noob so any help is appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct {\n    char ime[20];\n    char prezime[20];\n    char registracija[10];\n    int dRod;\n    int mRod;\n    int gRod;\n    char datumIzdavanja[10];\n} vozac;\n\nvoid poredi(vozac *vozaci, int linije);\nint nlines(char *datoteka);\nvoid napuni(FILE *ulaz, vozac *vozaci, int lines);\n\nint main(){\n    int lines = nlines(\"Registar.in\");\n    FILE *ulaz = fopen(\"Registar.in\", \"r\");\n    int i;\n    FILE *izlaz = fopen(\"Najmladji.out\", \"w\");\n    vozac *vozaci = calloc(lines,sizeof(vozac));\n    napuni(ulaz,vozaci,lines);\n    fclose(ulaz);\n    poredi(vozaci,lines);\n    for (i = 0; i &lt; 5; i++){\n        printf(\"\\n%s %s (%d.%d.%d)\", vozaci[i].ime, vozaci[i].prezime, vozaci[i].dRod, vozaci[i].mRod, vozaci[i].gRod);\n    }\n    fclose(izlaz);\n    return 0;\n}\nint nlines(char *datoteka){\n    FILE *ulaz = fopen(\"Registar.in\", \"r\");\n    int brojac = 0;\n    while (!feof(ulaz)){\n        char ch = fgetc(ulaz);\n        if (ch == '\\n') brojac++;\n    }\n    fclose(ulaz);\n    return brojac;\n}\nvoid napuni(FILE *ulaz, vozac *vozaci, int lines){\n    int i;\n    char *linija = calloc(70, sizeof(char));\n    char *token;\n    char *token2;\n    char *znak;\n    char *znak2;\n    for (i= 0; i &lt; lines; i++){\n        fgets(linija,70,ulaz);\n        token = strtok(linija,\" \");\n        strcpy(vozaci[i].prezime, token);\n        znak = strchr(vozaci[i].prezime,',');\n        *znak = 0;\n        token = strtok(NULL,\" \");\n        strcpy(vozaci[i].ime, token);\n        znak2 = strchr(vozaci[i].ime, ';');\n        *znak2 = 0;\n        token = strtok(NULL, \" \");\n        strcpy(vozaci[i].registracija, token);\n        token = strtok(NULL, \" \");\n        token2 = strtok(token, \".\");\n        vozaci[i].dRod = atoi(token2);\n        token2 = strtok(NULL, \".\");\n        vozaci[i].mRod = atoi(token2);\n        token2 = strtok(NULL, \".\");\n        vozaci[i].gRod = atoi(token2);\n        token = strtok(NULL, \" \");\n        strcpy(vozaci[i].datumIzdavanja, token);\n    }\nvoid poredi(vozac *vozaci, int linije){\n    int sortirano = 1;\n    vozac buffer;\n    while (sortirano){\n        sortirano = 0;\n        for (i = 0; i &lt; linije; i++){\n            if (vozaci[i].gRod &gt; vozaci[i+1].gRod){\n                buffer = vozaci[i];\n                vozaci[i] = vozaci[i+1];\n                vozaci[i + 1] = buffer;\n                sortirano = 1;\n            }\n            else if (vozaci[i].gRod == vozaci[i + 1].gRod){\n                if (vozaci[i].mRod &gt; vozaci[i + 1].mRod){\n                    buffer = vozaci[i];\n                    vozaci[i] = vozaci[i+1];\n                    vozaci[i + 1] = buffer;\n                    sortirano = 1;\n                }\n                else if (vozaci[i].mRod == vozaci[i + 1].mRod){\n                    if (vozaci[i].dRod &gt; vozaci[i + 1].dRod){\n                        buffer = vozaci[i];\n                        vozaci[i] = vozaci[i+1];\n                        vozaci[i + 1] = buffer;\n                        sortirano = 1;\n                    }\n                }\n            }\n        }\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "pipe", "fork"], "comments": [{"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1452085922, "post_id": 34633788, "comment_id": 57012925, "body": "You need to tell us (1) What you expected to happen and (2) what actually happened."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1452085948, "post_id": 34633788, "comment_id": 57012938, "body": "Questions: (1) Why the <code>execvp()</code>? (2) Why the double fork? (3) You only ever read from pipe[0] -- what about the others?"}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "reply_to_user": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1452091977, "post_id": 34633788, "comment_id": 57017053, "body": "I want the program to create N children. Each child has to send a message to the parent. I used the exec task because it was written that every child should operate as a separate program. I created a sample stream, but it is not working."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "reply_to_user": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1452095246, "post_id": 34633788, "comment_id": 57019388, "body": "@JohnHascall can you help?"}], "answers": [{"comments": [{"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 1, "creation_date": 1452090888, "post_id": 34634991, "comment_id": 57016250, "body": "Yes, I know that, but I have to do it on the basis of <code>pipe</code>."}], "tags": [], "owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "is_accepted": false, "score": 1, "last_activity_date": 1452088865, "creation_date": 1452088865, "answer_id": 34634991, "question_id": 34633788, "link": "https://stackoverflow.com/questions/34633788/c-communicate-childrens-with-parent-using-pipes/34634991#34634991", "title": "C Communicate childrens with parent using pipes", "body": "<p>Pipes are an extremely poorly suited tool for this issue as they are a fundamentally one to one communication method. What you need is a many to one communication method. For this I would suggest using a <a href=\"http://linux.die.net/man/7/mq_overview\" rel=\"nofollow\">message queue</a>. This will permit your parent to subscribe to the message queue and for an unlimited number of children to write to it and their messages all to be multiplexed to the parent.</p>\n"}, {"comments": [{"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1452097037, "post_id": 34637636, "comment_id": 57020590, "body": "Ok, thanks. Please look for my edit code. I recive always the same message."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1452110539, "post_id": 34637636, "comment_id": 57029240, "body": "Yes, but I want to send each pid of child to parent using pipe, your wirte example with 1 pipe can do this?"}], "tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": true, "score": 1, "last_activity_date": 1452096735, "creation_date": 1452096735, "answer_id": 34637636, "question_id": 34633788, "link": "https://stackoverflow.com/questions/34633788/c-communicate-childrens-with-parent-using-pipes/34637636#34637636", "title": "C Communicate childrens with parent using pipes", "body": "<p>I can not follow what you are trying to do with the double-fork business.\nAnd I'm not inclined to write the whole thing for you, but here's an outline of how I would write the code:</p>\n\n<pre><code>    int *   pids;\n    int *   fds;\n    int     pipefds[2];\n    char *  message = \"message\";\n    int     alive   = 0;\n\n    pids = malloc(n * sizeof(int *));\n    fds =  malloc(n * sizeof(int *));\n\n    for (i = 0; i &lt; n; ++i) {\n            if (pipe(pipefds) == -1) exit(1);\n            switch (pid = fork()) {\n                case -1:                    /* error */\n                    exit(2);\n                case 0:                     /* child */\n                    close(pipefds[0]);\n                    write(pipefds[1], message, strlen(message)+1);\n                    _exit(0);\n                default:                    /* parent */\n                    closefds[1];\n                    pids[i] = pid;\n                    fds[i] = pipefds[0];\n                    ++alive;\n            }\n    }\n    while (alive &gt; 0) {\n            /* select on the fds[] of all alive (fds[i] != -1) children */\n            /* if EINTR, do waitpid(-1, &amp;status, WNOHANG); */\n            /*   to see if a child has exited */\n            /*     if so, find it in pids, say at index 'x', and:  */\n            /*       close(fds[x]); fds[x] = -1; --alive; */\n            /* if select said I/O ready for a pipe */\n            /*    then read that pipe */\n    }\n</code></pre>\n"}], "owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1452107794, "accepted_answer_id": 34637636, "answer_count": 2, "score": 0, "last_activity_date": 1452096940, "creation_date": 1452085127, "last_edit_date": 1452096940, "question_id": 34633788, "link": "https://stackoverflow.com/questions/34633788/c-communicate-childrens-with-parent-using-pipes", "closed_reason": "Needs details or clarity", "title": "C Communicate childrens with parent using pipes", "body": "<p>My program create as many children as the user put in argument. I have a problem with sending the message to the parent. I wish every child sent a message to the parent using a pipe. I do not know how to do it. I know how it works for one child: <a href=\"http://tldp.org/LDP/lpg/node11.html\" rel=\"nofollow\">http://tldp.org/LDP/lpg/node11.html</a> but do not know how to do it for many.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\n\nint main(int argc, char **argv)\n{\n        pid_t pid;\n\n        if(argc &lt; 3)\n        {\n                printf(\"Not enought arguments\");\n                exit(0);\n        }\n\n        int number = atoi(argv[2]); // number of childern\n        pid_t pids[number],pid_s;\n        int i,n=number,status;\n        int pipes[number*2];\n        char buff[512];\n        int r=0,w=0,rr=0,ww=0;\n\n        for(i=0; i&lt;n; i++)\n        {\n                if(pipe(pipes+(i*2)) &lt; 0)\n                {\n                        perror(\"failed to allocate pipes\");\n                }\n        }\n\n        if(strcmp(\"-p\", argv[1]) == 0)\n        {\n                //\n        }\n\n        if(strcmp(\"-f\", argv[1]) == 0)\n        {\n                //\n        }\n\n\n        switch (pid = fork()) {\n           case -1:\n                        perror(\"Error in fork\");\n                        exit(0);\n\n                        break;\n           case 0:\n\n\n               for(i=0; i &lt; n; i++)\n               {\n                       if((pids[i] = fork()) &lt; 0)\n                       {\n                               perror(\"error fork\");\n                       }\n                       else if(pids[i] == 0)\n                       {\n                            close(pipes[0+r]);\n                            char *reply = \"message\";\n                            int val = getpid();\n                            write(pipes[1+w], &amp;val, strlen(reply)+1);\n\n                            r+=2;\n                            w+=2;\n\n                            printf(\"Stworzylem dziecko z numerem: %d \\n\", getpid());\n                            execvp(argv[0],NULL);\n                       }\n               }\n\n               while(n &gt; 0)\n               {\n                       pid_s = wait(&amp;status);\n                       --n;\n               }\n                      break;\n        default:\n\n\n               for(i=0; i&lt;n; i++)\n               {\n                    close(pipes[1+rr]);\n                    int n;\n                    read(pipes[0+ww],&amp;n,sizeof(n));\n                    printf(\"Wiadomosc: %d \\n\", n);\n                    rr+=2;\n                    ww+=2;\n               }\n               if(wait(0) == -1)\n               {\n\n               }\n\n                      break;\n     }\n\n    return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I want the program to create N children.\nEach child has to send a message to the parent. I used the exec task because in my task it was written that every child should operate as a separate program. I created a sample stream, but it is not working.</p>\n\n<p>For now program created N childs process. Communication to parent proces from child not work. </p>\n\n<p>EDIT:</p>\n\n<p>It works for me to send and receive data always gets through the same thing. I send the PID of the process, but pick always the same.</p>\n"}, {"tags": ["c", "macros", "d", "c-preprocessor"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1452084535, "post_id": 34633486, "comment_id": 57011981, "body": "Can you provide a sample usage of the second one? Maybe from the corresponding <i>.c</i> file."}, {"owner": {"reputation": 49, "user_id": 5752212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d55ca7ba236ebced86deb0148f7471?s=128&d=identicon&r=PG&f=1", "display_name": "Data Pulverizer", "link": "https://stackoverflow.com/users/5752212/data-pulverizer"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452084993, "post_id": 34633486, "comment_id": 57012269, "body": "if (GSL_RANGE_COND(1)) {...} // gsl_matrix_complex_double.h"}, {"owner": {"reputation": 49, "user_id": 5752212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d55ca7ba236ebced86deb0148f7471?s=128&d=identicon&r=PG&f=1", "display_name": "Data Pulverizer", "link": "https://stackoverflow.com/users/5752212/data-pulverizer"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452085381, "post_id": 34633486, "comment_id": 57012549, "body": "hmm looks like a predicate to maybe alias GSL_RANGE_COND = bool function(int x)"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5752212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d55ca7ba236ebced86deb0148f7471?s=128&d=identicon&r=PG&f=1", "display_name": "Data Pulverizer", "link": "https://stackoverflow.com/users/5752212/data-pulverizer"}, "edited": false, "score": 0, "creation_date": 1452111815, "post_id": 34640577, "comment_id": 57030066, "body": "Interesting. It looks as if the preprocessor in C allows you to get away without specifying return and argument types. Is this true? I guess D has templates but C&#39;s preprocessor technique looks very interesting."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 49, "user_id": 5752212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d55ca7ba236ebced86deb0148f7471?s=128&d=identicon&r=PG&f=1", "display_name": "Data Pulverizer", "link": "https://stackoverflow.com/users/5752212/data-pulverizer"}, "edited": false, "score": 0, "creation_date": 1452112845, "post_id": 34640577, "comment_id": 57030631, "body": "@DataPulverizer Since its just textual substitution, the processor has no concept of types. This actually makes it pretty dangerous; D functions/templates provide most of the features of macros while also adding type safety."}, {"owner": {"reputation": 49, "user_id": 5752212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d55ca7ba236ebced86deb0148f7471?s=128&d=identicon&r=PG&f=1", "display_name": "Data Pulverizer", "link": "https://stackoverflow.com/users/5752212/data-pulverizer"}, "edited": false, "score": 0, "creation_date": 1452173705, "post_id": 34640577, "comment_id": 57058109, "body": "Just remembered that D has mixins <a href=\"https://dlang.org/mixin.html\" rel=\"nofollow noreferrer\">dlang.org/mixin.html</a> which are similar functionality to C preprocessor."}], "tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": false, "score": 1, "last_activity_date": 1452106349, "creation_date": 1452106349, "answer_id": 34640577, "question_id": 34633486, "link": "https://stackoverflow.com/questions/34633486/c-macro-gsl-library-code-conversion-to-d/34640577#34640577", "title": "C macro gsl library code conversion to D", "body": "<pre><code>/* 1 */ #define GSL_VAR extern // gsl types.h file\n</code></pre>\n\n<p>If you're converting C code to D, this can be dropped entirely, since D uses modules. If you're writing bindings, then you should use <code>extern(C)</code>.</p>\n\n<pre><code>/* 2 */ #define GSL_RANGE_COND(x) (x) // gsl_inline.h file\n</code></pre>\n\n<p>This is the identity function. In D, you would write a function instead of using a macro (ex. <code>int GSL_RANGE_COND(int x) { return x; }</code>). However, I imagine that compile-time flags would alter the behavior of this macro; in D, you would use <code>version</code> statements.</p>\n\n<pre><code>/* 3 */ #define GSL_FN_EVAL(F,x) (*((F)-&gt;function))(x,(F)-&gt;params)\n</code></pre>\n\n<p>Again, in D you would write a function for this. Replace <code>T</code>, <code>U</code>, and <code>V</code>. with the correct types.</p>\n\n<pre><code>T GSL_FN_EVAL(U* F, V x) { return F.function(x, F.params); }\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5752212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d55ca7ba236ebced86deb0148f7471?s=128&d=identicon&r=PG&f=1", "display_name": "Data Pulverizer", "link": "https://stackoverflow.com/users/5752212/data-pulverizer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452106349, "creation_date": 1452084239, "question_id": 34633486, "link": "https://stackoverflow.com/questions/34633486/c-macro-gsl-library-code-conversion-to-d", "title": "C macro gsl library code conversion to D", "body": "<p>I am doing a code conversion from C header file in the gsl numeric library to D under linux ubuntu. I would like to know what the macros:</p>\n\n<pre><code>/* 1 */ #define GSL_VAR extern // gsl types.h file\n/* 2 */ #define GSL_RANGE_COND(x) (x) // gsl_inline.h file\n/* 3 */ #define GSL_FN_EVAL(F,x) (*((F)-&gt;function))(x,(F)-&gt;params)\n</code></pre>\n\n<p>do.</p>\n\n<p>I suspect that GSL_VAR in particular has been causing me some issues. An example of its use is</p>\n\n<pre><code>GSL_VAR const gsl_rng_type *gsl_rng_borosh13; //gsl_rng.h\n</code></pre>\n\n<p>which I convert to </p>\n\n<pre><code>gsl_rng_borosh13 const(gsl_rng_type)*; // D Code\n</code></pre>\n\n<p>Is this the correct thing to do? </p>\n"}, {"tags": ["c", "pointers", "visual-studio-2015"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user948581"}, "edited": false, "score": 0, "creation_date": 1452084492, "post_id": 34633470, "comment_id": 57011951, "body": "I would start by investigating the call to <code>calloc()</code>: its return value, and if any error flag is set (errno and/or GetLastError). You are trying to allocate 2 Gb at once - this is quite a lot."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1452085098, "post_id": 34633470, "comment_id": 57012335, "body": "Thank you for the tip.  The error is <code>Not enough space</code> so the pointer is 00000000.  I thought the point of the solution was that it allowed arrays up to 2 Gb.  Was the solution incorrect?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user948581"}, "edited": false, "score": 0, "creation_date": 1452149138, "post_id": 34633470, "comment_id": 57043191, "body": "The only (simple) way to get a 2 Gb allocation on Windows is to use 64-bit. (32-bit processes can use other functions to raise the limit to 3 Gb but I very much doubt they can allocate 2 Gb at once anyway). So: to use the answer you refer to, compile for 64-bit."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1452167945, "post_id": 34633470, "comment_id": 57054217, "body": "@Tibo  Thanks again for the tip.  I didn&#39;t know how to compile for 64-bit but now I do and it works fine."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1452084829, "post_id": 34633582, "comment_id": 57012172, "body": "I thought the calloc(RESERVED_BYTES, 1) would initialize the pointer. ?"}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1452085444, "post_id": 34633582, "comment_id": 57012601, "body": "As I noted above, the error was &quot;Not enough space&quot;.  Basically I just copied the code from this link:  <a href=\"http://stackoverflow.com/questions/34624027/how-to-create-a-fast-huge-union-array-without-wasting-memory-in-c\" title=\"how to create a fast huge union array without wasting memory in c\">stackoverflow.com/questions/34624027/&hellip;</a> so I thought it would work OK."}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1452085529, "last_edit_date": 1452085529, "creation_date": 1452084559, "answer_id": 34633582, "question_id": 34633470, "link": "https://stackoverflow.com/questions/34633470/accessing-values-of-pointers-to-large-array/34633582#34633582", "title": "Accessing values of pointers to large array", "body": "<p>The maximum size that <code>calloc</code> can allocate depends on the platform on which you are running. Your array size is possibly far to big <code>#define RESERVED_BYTES 2147483648</code>. <code>calloc</code> will possibly return <code>NULL</code>.</p>\n\n<p>Add NULL pointer test to your code.</p>\n\n<pre><code> parray.pv = calloc(RESERVED_BYTES, 1);\n if ( parray.pv == NULL )\n {\n     // ... add print error ...\n     return 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 34633582, "answer_count": 1, "score": 0, "last_activity_date": 1452085529, "creation_date": 1452084185, "question_id": 34633470, "link": "https://stackoverflow.com/questions/34633470/accessing-values-of-pointers-to-large-array", "title": "Accessing values of pointers to large array", "body": "<p>I'm new to C and StackOverflow.</p>\n\n<p>I'm trying to implement the solution to this question <a href=\"http:////stackoverflow.com/questions/34624027/how-to-create-a-fast-huge-union-array-without-wasting-memory-in-c\" rel=\"nofollow\">http://stackoverflow.com/questions/34624027/how-to-create-a-fast-huge-union-array-without-wasting-memory-in-c</a> in Visual Studio-2015.  The following is my code:</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include \"malloc.h\"\n#include \"inttypes.h\"\n\n#define RESERVED_BYTES 2147483648\n\ntypedef union {\n    void *pv;\n    char *pc;\n    uint8_t *pu8;\n    uint16_t *pu16;\n} parray_type;\n\nint main()\n{\n    parray_type parray;\n    parray.pv = calloc(RESERVED_BYTES, 1);\n\n    // last element in allocated buffer for each type\n    char c = parray.pc[RESERVED_BYTES - 1];\n    uint8_t u8 = parray.pu8[RESERVED_BYTES - 1];\n    uint16_t u16 = parray.pu16[RESERVED_BYTES / 2 - 1];\n\n    // first element in allocated buffer for each type\n    char c_2= parray.pc[0];\n    uint8_t u8_2 = parray.pu8[0];\n    uint16_t u16_2 = parray.pu16[0];\n\n    printf(\"c='%c' (%d)  u8='0x%x' (%d) u16='%h' (%d)\\n\", c, c, u8, u8, u16, u16);\n    printf(\"c='%c' (%d)  u8='0x%x' (%d) u16='%h' (%d)\\n\", c_2, c_2, u8_2, u8_2, u16_2, u16_2);\n\n    return 0;\n}\n</code></pre>\n\n<p>It compiles OK, but when I try to run it I get the following error on the assignment of <code>char c = parray.pc[RESERVED_BYTES - 1];</code>.  The error is <code>Unhandled exception at 0x012717F8 in TstLrgArr.exe: 0xC0000005: Access violation reading location 0x7FFFFFFF.</code>  When I comment out the three lines assigning c, u8 and u16 I get the same error on the assignment of c_2 except the access violation is reading location 0x00000000.</p>\n\n<p>The output I think is was expecting was 2 lines of the following:\n<code>c='' (0)   u8='0x00' (0)   u16='' (0)</code></p>\n\n<p>What did I do wrong, or is this some limitation of VS-2015?</p>\n"}, {"tags": ["c", "pointers", "struct", "malloc"], "comments": [{"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 4, "creation_date": 1452082863, "post_id": 34633014, "comment_id": 57010887, "body": "Simply try and see what happens. And that&#39;s the answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5752157"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 1, "creation_date": 1452082956, "post_id": 34633014, "comment_id": 57010943, "body": "yes, but that would require more time and effort than someone on SE telling me the answer."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1452083147, "post_id": 34633014, "comment_id": 57011047, "body": "<code>struct Address*</code> - the pointer already means it&#39;s an address. What&#39;s your intention with naming the struct <code>Address</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5752157"}, "edited": false, "score": 0, "creation_date": 1452083234, "post_id": 34633014, "comment_id": 57011094, "body": "I am doing an exercise in the book LCTHW. It wants me to make a database with a variable number of records (aka addresses -- this database stores addresses)."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1452083371, "post_id": 34633014, "comment_id": 57011180, "body": "What does the <a href=\"http://man7.org/linux/man-pages/man3/fwrite.3.html\" rel=\"nofollow noreferrer\">man page</a> for <code>fwrite</code> say?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5752157"}, "edited": false, "score": 0, "creation_date": 1452083551, "post_id": 34633014, "comment_id": 57011319, "body": "Well, it&#39;s useless to copy the pointer itself, so i assumed that any good compiler would think you mean the heap memory pointed to by the pointer, not the pointer itself. This exercise is now a lot harder, and i don&#39;t know how to do it. ):"}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 4012159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793c50ef837e295b43fbe7e90d21ec0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Debott&#233;", "link": "https://stackoverflow.com/users/4012159/benjamin-debott%c3%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1452082940, "creation_date": 1452082940, "answer_id": 34633061, "question_id": 34633014, "link": "https://stackoverflow.com/questions/34633014/writing-to-disk-a-struct-that-contains-a-pointer/34633061#34633061", "title": "Writing to disk a struct that contains a pointer", "body": "<p>fwrite will write the memory content of your structure, meaning it will simply copy the pointer itself to disk, which would be useless in your own term.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5752157"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 34633061, "answer_count": 1, "score": -5, "last_activity_date": 1452089515, "creation_date": 1452082757, "last_edit_date": 1452089515, "question_id": 34633014, "link": "https://stackoverflow.com/questions/34633014/writing-to-disk-a-struct-that-contains-a-pointer", "title": "Writing to disk a struct that contains a pointer", "body": "<p>I have a struct in C that looks like this: </p>\n\n<pre><code>struct Database {\n    int row_size;\n    int name_size; \n    struct Address *;\n};\n</code></pre>\n\n<p>This struct will be put into the heap via a malloc(...) call. I will then have <code>struct Address*</code> point to another region in the heap via another malloc(...) call.</p>\n\n<p>If I use fwrite(...) to write this struct to disk, what will happen? Will fwrite(...) automatically follow (or dereference) the pointer <code>struct Address *</code>, or will it simply copy the pointer itself (which would be useless) to disk? </p>\n"}, {"tags": ["c++", "mysql", "c"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1452080919, "post_id": 34632377, "comment_id": 57009794, "body": "What do you mean <i>save</i>? As textfile report, or into another data base table?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5751922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca70137448280fb404ab70ea3dead50?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/5751922/jason"}, "edited": false, "score": 0, "creation_date": 1452082522, "post_id": 34632605, "comment_id": 57010713, "body": "Sorry i know i am vague but what i am trying to is getting information from my database and save that information as an variable. For example if the int value 20 is saved in my database under Gewenstetemperatuur i want to save that 20 as an variable."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 15, "user_id": 5751922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca70137448280fb404ab70ea3dead50?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/5751922/jason"}, "edited": false, "score": 0, "creation_date": 1452086519, "post_id": 34632605, "comment_id": 57013301, "body": "You can use mysql_store_result() and mysql_field_count() to get the rows and read them each. See the <a href=\"http://dev.mysql.com/doc/refman/5.0/en/mysql-field-count.html\" rel=\"nofollow noreferrer\">manua</a>l for an example."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1452081514, "creation_date": 1452081514, "answer_id": 34632605, "question_id": 34632377, "link": "https://stackoverflow.com/questions/34632377/how-to-save-an-sql-query-result-in-c-c/34632605#34632605", "title": "How to save an SQL query result in C/C++", "body": "<p>What you probably meant is how do I generate a sql query in a variable and use it later.</p>\n\n<p>In C, you can use <a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow\"><code>snprintf()</code></a> function and generate a buffer:</p>\n\n<pre><code>char buf[1204];\nchar *value = \"Gewenstetempratuur\";\nchar *table = \"SensorValue\";\n\nsnprintf(buf, sizeof buf, \"SELECT %s from %s\", value, table);\n\nmysql_real_query(conn, buf, strlen(buf)); \n</code></pre>\n\n<p>and so on.</p>\n"}], "owner": {"reputation": 15, "user_id": 5751922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca70137448280fb404ab70ea3dead50?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/5751922/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1443, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452081514, "creation_date": 1452080831, "question_id": 34632377, "link": "https://stackoverflow.com/questions/34632377/how-to-save-an-sql-query-result-in-c-c", "title": "How to save an SQL query result in C/C++", "body": "<p>I am new too programming. \nHow can i save the result of the query \"SELECT Gewenstetempratuur FROM SensorValue\" as an int variable so i can use it later.\nI am using a mysql database.</p>\n\n<pre><code>#include &lt;unistd.h&gt;   \n#include &lt;stdio.h&gt;    \n#include &lt;mysql.h&gt; \n#include &lt;my_global.h&gt;\n\nint main (int argc, char* argv[]){\n//the for loop is so ite gets updated frequently \nfor(;;){\n    MYSQL *conn;\n    MYSQL_RES *result;\n    MYSQL_ROW row;\n\n        //Conection Values\n        char *server = \"server\";\n        char *user = \"user\";\n        char *password = \"pass\";\n        char *database = \"database\";\n\n        //Making the connection to the database\n        conn = mysql_init(NULL);\n        if (!mysql_real_connect(conn, server,\n        user, password, database, 0, NULL, 0)) {\n        fprintf(stderr, \"%s\\n\", mysql_error(conn));\n        }\n        //The query i want to save the result from\n        //\"SELECT Gewenstetempratuur FROM SensorValue\"\n\n    usleep(1000000);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 4, "creation_date": 1452080471, "post_id": 34632222, "comment_id": 57009505, "body": "I doubt the crash has anything to do with <code>printk</code> calls. You probably have some access violation (<i>UB</i>) elsewhere and it manifests when you call <code>printk</code>."}, {"owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1452080735, "post_id": 34632222, "comment_id": 57009677, "body": "Yes, I&#39;m not sure about the crash, since I am using putty to RDP to a remote server. So whenever I use printk inside some if-else block (NOT ALL) it simply does not responds when I do insmod.  Also, in printk I&#39;m just printing a string and I&#39;m not even trying to print the value of a variable. So I think it has to do with the printk statements"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1452081449, "post_id": 34632222, "comment_id": 57010079, "body": "Kernel crashes generally print the exact error and a stack trace on the console."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "edited": false, "score": 1, "creation_date": 1452081867, "post_id": 34632222, "comment_id": 57010317, "body": "Are you shure that <code>device</code> can&#39;t be <code>NULL</code>? Without kernel stack trace it&#39;s difficult to say."}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "edited": false, "score": 0, "creation_date": 1452082374, "post_id": 34632222, "comment_id": 57010632, "body": "with all 3 printk you see issue? or with only any one from this 3 you see this issue? Try to narrow down the causing statements ..."}, {"owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "edited": false, "score": 0, "creation_date": 1452082392, "post_id": 34632222, "comment_id": 57010641, "body": "I don&#39;t have physical access to the server. I am using &quot;putty&quot; to remotely log into it. So in such cases, putty stops responding and becomes inactive due to Fatal error. And after some time say 30 secs, I could again reconnect to the remote linux server. So I assume that the kernel crashes and recovers"}, {"owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "reply_to_user": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "edited": false, "score": 0, "creation_date": 1452082488, "post_id": 34632222, "comment_id": 57010694, "body": "@coredump : Without those printk messages the logic perfectly works and loads as a kernel module. So I don&#39;t think its the issue with the device checking."}, {"owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "reply_to_user": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "edited": false, "score": 0, "creation_date": 1452082583, "post_id": 34632222, "comment_id": 57010744, "body": "@JeegarPatel : I have tried will all the possible combinations. Problem is even if I had a single printk I get this issue. But this issue occurs only when it is placed inside the IF or IF - ELSE block.  Outside the IF block, printk does not arise any such issues"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1452238594, "post_id": 34632222, "comment_id": 57088619, "body": "The <code>device-&gt; some condition</code> looks very suspicious. You have to provide more context of your problem, including excerpts from log files."}], "answers": [{"comments": [{"owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "edited": false, "score": 0, "creation_date": 1452084389, "post_id": 34633150, "comment_id": 57011867, "body": "It&#39;s just a simple IF-ELSE block man. I swear this is the exact code which I am using (except made some changes in the device-&gt; condition, but that is part of the condition statement). Inside block is the same. Also, I just tried with the trace_printk() method, and it is also showing the same issue"}, {"owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "edited": false, "score": 0, "creation_date": 1452084566, "post_id": 34633150, "comment_id": 57012002, "body": "One more thing Jeegar, can you tell me the reason of the following event. When I reconnect to the remote server after say 30 secs after this issue occurrence, all the files like Module.symvers, *ko etc files are deleted as if I have issued a make clean command.  Why is that ?"}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "reply_to_user": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "edited": false, "score": 0, "creation_date": 1452085189, "post_id": 34633150, "comment_id": 57012405, "body": "When crash happen after that may be your remoter system reboot it self. and init service some rule should be there to clean those files.  whats your system at remote? completer x86 system? tried with /proc/kmsg ?"}, {"owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "edited": false, "score": 0, "creation_date": 1452151319, "post_id": 34633150, "comment_id": 57044172, "body": "It&#39;s a x64 SLES system"}], "tags": [], "owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1452083214, "last_edit_date": 1495540227, "creation_date": 1452083214, "answer_id": 34633150, "question_id": 34632222, "link": "https://stackoverflow.com/questions/34632222/kernel-module-print-statement-causing-kernel-crashes/34633150#34633150", "title": "Kernel module print statement causing kernel crashes", "body": "<p>There are some cases where printk should not be called see</p>\n\n<p><a href=\"http://lkml.iu.edu/hypermail/linux/kernel/0606.1/2198.html\" rel=\"nofollow noreferrer\">http://lkml.iu.edu/hypermail/linux/kernel/0606.1/2198.html</a></p>\n\n<p>and </p>\n\n<p><a href=\"https://stackoverflow.com/questions/8738951/printk-inside-an-interrupt-handler-is-it-really-that-bad\">printk inside an interrupt handler , is it really that bad?</a></p>\n\n<p>So if your whole code is in such cases then avoid <code>printK()</code> try with other alternate option <code>dev_dbg()</code> or <code>trace_printk()</code></p>\n"}], "owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1185, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1457269378, "creation_date": 1452080305, "last_edit_date": 1457269378, "question_id": 34632222, "link": "https://stackoverflow.com/questions/34632222/kernel-module-print-statement-causing-kernel-crashes", "title": "Kernel module print statement causing kernel crashes", "body": "<p>Whenever I put any printk statements inside if-else block, it simply crashes the kernel in Linux.</p>\n\n<p>A sample code is given below:</p>\n\n<pre><code>if (device-&gt; Some condition) {\n        s = 0;\n        e = 0;\n        printk(KERN_INFO \"I am 0 and 0 part \\n\");\n        printk(KERN_ALERT \"KERN_INFO Successfully registered module \\n\");\n} else {\n        s = 1;\n        e = 2;\n        printk(KERN_INFO \"I am in 1 and 1 part \\n\");\n}\n</code></pre>\n\n<p>The above code gets successfully compiled when I make it. But during <strong><code>insmod</code></strong> kernel stops responding and ultimately crashes. On the contrary, if I comment out those <strong><code>printk</code></strong> statements then I could easily do <strong><code>insmod</code></strong> .</p>\n\n<p>I would like to know the probable cause of this behavior and how could I remove such things.</p>\n"}, {"tags": ["c", "arrays", "memory-management"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452080014, "post_id": 34632067, "comment_id": 57009238, "body": "(1) - hard to say since you didn&#39;t post the code with the problem; (2) check lengths before using <code>strcat</code> and other such functions"}, {"owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452080565, "post_id": 34632067, "comment_id": 57009567, "body": "the code is unfortunately too long with multiple header files. May I then ask is there a code debugger that would recognize this error? cppcheck doesn`t."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452080830, "post_id": 34632067, "comment_id": 57009734, "body": "there&#39;s no substitute for learning the language properly"}, {"owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452081111, "post_id": 34632067, "comment_id": 57009909, "body": "well finding errors helps me learn but on larger codes it becomes dauntingly hard to find such errors. That is why I am asking for some tips on how to catch such errors that cause erratic behaviour."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1452082593, "post_id": 34632067, "comment_id": 57010749, "body": "You want to use a memory checker like Valgrind (<a href=\"https://valgrind.org\" rel=\"nofollow noreferrer\">valgrind.org</a>) to detect such errors."}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1452082707, "post_id": 34632067, "comment_id": 57010803, "body": "Valgrind is good, or you can build your own stack checker....Fill all variables on the stack with known values (like ABABABAB... in hex for example)  Then check for these known values before you use or malloc or set a variable.  This will at least highlight that corruption has occured prior to your check"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1452083075, "post_id": 34632067, "comment_id": 57011003, "body": "@Grantly: The OP&#39;s issue is related to the heap."}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1452083205, "post_id": 34632067, "comment_id": 57011083, "body": "@alk Thanks, you could do the same for the heap.  I will edit my answer and add a reference to a tool that does this..."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1452084468, "post_id": 34632067, "comment_id": 57011930, "body": "@Grantly: You are suggesting to have the program fill its whole heap with a specific pattern?"}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1452084570, "post_id": 34632067, "comment_id": 57012007, "body": "@alk No not the same as the stack. With the heap - you would only fill allocated memory space... Many tools do this, although this of course grinds your program to a halt - it is useful for extreme debugging of this nature....However memory leak detectors are more sophisticated as in my edited answer below"}], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 0, "creation_date": 1452080700, "post_id": 34632109, "comment_id": 57009660, "body": "Well then maybe I should ask for a reference that goes over this <code>undefined behaviours</code> so that next time I have one I know where to look. Such problems usually give me a headache as my codes grow larger and larger. What about code checkers? cppcheck doesn`t detect this for instance."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 1, "creation_date": 1452081064, "post_id": 34632109, "comment_id": 57009881, "body": "@Sina The ISO C Standard is the canonical source if you want to know all the places where undefined behavior may happen. Sadly, in general not all instances can be detected automatically. Some lints are better than others. Some commercial tools go to great length (Gimpel&#39;s FlexeLint, Mathworks&#39; Polyspace to name two I use at work)."}, {"owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 0, "creation_date": 1452082941, "post_id": 34632109, "comment_id": 57010935, "body": "By undefined do you mean that some random place in memory is overwritten? It always produces the same error in the exact same place so I am assuming it is not that random or undefined? Why is it called undefined?"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 0, "creation_date": 1452083904, "post_id": 34632109, "comment_id": 57011527, "body": "@Sina It is undefined because that&#39;s what the C Standard says. The definition is: <i>behavior, upon use of a nonportable or erroneous program construct or of erroneous data, for which this International Standard imposes no requirements. NOTE: Possible undefined behavior ranges from ignoring the situation completely with unpredictable results, to behaving during translation or program execution in a documented manner characteristic of the environment (with or without the issuance of a diagnostic message), to terminating a translation or execution (with the issuance of a diagnostic message).</i>"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 2, "creation_date": 1452084111, "post_id": 34632109, "comment_id": 57011685, "body": "@Sina While you might think the behavior you observe is kind of defined, since it is repeatable, you should consider that the behavior might change drastically if you use different optimization options, the next version of the compiler, or add more code to the program. Should the Standard say what has to happen for the many ways program errors can surface? No, that&#39;s impossible. So it&#39;s left undefined."}, {"owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 0, "creation_date": 1452093652, "post_id": 34632109, "comment_id": 57018242, "body": "I will flag this as the correct answer since the keyword &quot;undefined behaviour&quot; has provided me with many good sources on this issue upon doing some google search. For people who may wonder some are: <a href=\"http://insanecoding.blogspot.de/2014/06/memory-management-in-c-and-auto.html\" rel=\"nofollow noreferrer\">insanecoding.blogspot.de/2014/06/&hellip;</a>  and <a href=\"http://blog.regehr.org/archives/213\" rel=\"nofollow noreferrer\">blog.regehr.org/archives/213</a> and <a href=\"https://www.securecoding.cert.org/confluence/display/c/EXP43-C.+Avoid+undefined+behavior+when+using+restrict-qualified+pointers\" rel=\"nofollow noreferrer\">securecoding.cert.org/confluence/display/c/&hellip;</a>"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 11, "last_activity_date": 1452083689, "last_edit_date": 1452083689, "creation_date": 1452079928, "answer_id": 34632109, "question_id": 34632067, "link": "https://stackoverflow.com/questions/34632067/malloc-strlen-strcat/34632109#34632109", "title": "Malloc, strlen, strcat", "body": "<blockquote>\n  <p>Yet strcat executes without a problem.</p>\n</blockquote>\n\n<p>No it doesn't. It returns, but it has planted a time bomb. As you observe later on.</p>\n\n<p>What happens is <strong>undefined behavior</strong>. You have written to memory you were not allowed to write. Whatever was stored there is now garbage and whatever code expects to find meaningful values there is now misbehaving.\nEspecially if malloc internal data was corrupted the observation is random crashes when attempting to realloc or free memory later.</p>\n\n<p>The correct way is to allocate the memory with</p>\n\n<pre><code>name2 = malloc(strlen(arg[1]) + sizeof \"-results.pdb\");\n</code></pre>\n\n<p>This takes care of the \"+1\" for the terminating NUL, since <code>sizeof \"-results.pdb\"</code> is 13.</p>\n\n<p>Even easier is using <code>asprintf</code> (not ISO C but available on any contemporary Unix), which allocates the memory as needed:</p>\n\n<pre><code>asprintf(&amp;name2, \"%s-results.psb\", arg[1]);\n</code></pre>\n\n<p>There! No strlen, no strcat, no sizeof, no malloc. Just an all-in-one call doing the <em>Right Thing</em><sup>TM</sup>.</p>\n"}, {"comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 2, "creation_date": 1452080345, "post_id": 34632133, "comment_id": 57009435, "body": "That manual page should have used the technical term <b>undefined behavior</b> instead of <b>unpredictable</b>."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1452080493, "post_id": 34632133, "comment_id": 57009519, "body": "Well, it&#39;s from linux default <code>man 3 strcat</code>. I don&#39;t know why did they write it this way."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452080796, "post_id": 34632133, "comment_id": 57009711, "body": "<code>asprintf</code> is not in ISO C"}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1452080902, "post_id": 34632133, "comment_id": 57009778, "body": "@M.M, true, but he didn&#39;t ask about strictly ISO C, all though he didn&#39;t ask about better solution at all."}], "tags": [], "owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "is_accepted": false, "score": 5, "last_activity_date": 1452080744, "last_edit_date": 1452080744, "creation_date": 1452080009, "answer_id": 34632133, "question_id": 34632067, "link": "https://stackoverflow.com/questions/34632067/malloc-strlen-strcat/34632133#34632133", "title": "Malloc, strlen, strcat", "body": "<p>Like the manual of strcat said to you:</p>\n\n<p><code>char *strcat(char *dest, const char *src);</code></p>\n\n<blockquote>\n  <p>The  strcat()  function appends the src string to the dest string,\n  overwriting the terminating null byte ('\\0') at the end of dest, and\n  then\n         adds a terminating null byte.  The strings may not overlap, and the dest string must have enough space for the result.  <strong>If dest is\n  not large\n         enough, program behavior is unpredictable;</strong> buffer overruns are a favorite avenue for attacking secure programs.</p>\n</blockquote>\n\n<p>So <strong>unpredictable</strong> means \"everything may happend\", your situation is a one kind of <strong>everything</strong>.</p>\n\n<p>You should know, that everything is the real everything, so the program may crash on <code>strcat</code> call, may even work as you expected (this time), may crash somewhere else, because it's overwrited some memory used by malloc internals, for example, and now it doesn't know what to free. It depends actually on your system and where int the memory was your <code>char *dest</code>, and this may vary every time you run your program.</p>\n\n<p>That's why it's always better to use <code>strncat</code>, so you can specify the buffer size, or even you can use <code>asprintf</code> for string concatenation, it will allocate as much memory for you, as it's needed.</p>\n\n<p>For your example you'd write something like this:</p>\n\n<pre><code>char *newstr = NULL;\nasprintf(&amp;newstr, \"%s%s\", name2,\"-results.pdb\");\n</code></pre>\n\n<p>And then you'll have a pointer to new <code>malloc</code>ed string, in your <code>newstr</code>, don't forget to free it after.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1452080266, "post_id": 34632171, "comment_id": 57009386, "body": "This isn&#39;t a good solution, what if the code changes a bit and the data being strcatted is longer than 100?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1452080864, "post_id": 34632171, "comment_id": 57009762, "body": "OP didn&#39;t ask for a bad solution either"}, {"owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 1, "creation_date": 1452080867, "post_id": 34632171, "comment_id": 57009763, "body": "This solution is misleading since if the concataned array has dynamically allocated memory than it will still cause problems. It is also waste of memory. p.s: I actually did not ask for a solution at all, as the solution is obvious and the mistake is already pointed out by me."}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452081131, "post_id": 34632171, "comment_id": 57009919, "body": "@M.M but the OP wanted to understand!  I pointed out the exact reason for undefined behaviour, and showed the OP how to test for it and replicate it or eliminate it...for his/her understanding about the arbitrary memory overrun...."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1452081131, "post_id": 34632171, "comment_id": 57009920, "body": "How about removing the &quot;solution&quot; from your answer then, since you agree that OP was not looking for a solution"}, {"owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 0, "creation_date": 1452093449, "post_id": 34632171, "comment_id": 57018120, "body": "Thanks for the renewed and informational comment, upvoted."}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "reply_to_user": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "edited": false, "score": 0, "creation_date": 1452100862, "post_id": 34632171, "comment_id": 57023227, "body": "@Sina you&#39;re welcome.  Hope it helps, it saved me from a few nasty bugs"}], "tags": [], "owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "is_accepted": false, "score": -4, "last_activity_date": 1452083966, "last_edit_date": 1495535301, "creation_date": 1452080150, "answer_id": 34632171, "question_id": 34632067, "link": "https://stackoverflow.com/questions/34632067/malloc-strlen-strcat/34632171#34632171", "title": "Malloc, strlen, strcat", "body": "<p>You could simply be more generous with your malloc</p>\n\n<pre><code>name2 = malloc(strlen(arg[1])+100);\n</code></pre>\n\n<p>This would avoid the dest size issue with <code>strcat</code>, which is overwriting an arbitrary part of memory causing you the problems later on...As other answers mention, 'undefined behaviour'...</p>\n\n<p>If you can use a Microsoft C++ compiler, then a memory leak detector will help:\n<a href=\"https://msdn.microsoft.com/en-us/library/e5ewb1h3%28v=vs.90%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/e5ewb1h3%28v=vs.90%29.aspx</a></p>\n\n<p>Add this to your header file</p>\n\n<pre><code>#ifdef _Windows\n#include \"stdlib.h\"\n#include \"crtdbg.h\"\n#endif\n</code></pre>\n\n<p>Then use these functions in your code, in main, before much else:</p>\n\n<pre><code>_CrtSetDbgFlag \n_CrtSetBreakAlloc \n</code></pre>\n\n<p>There should be alot of good resources out there, and it is simpler to use than it looks.  See this link for more variations:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1761125/gcc-memory-leak-detection-equivalent-to-microsoft-crtdbg-h\">GCC memory leak detection equivalent to Microsoft crtdbg.h?</a></p>\n"}], "owner": {"reputation": 275, "user_id": 1862919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cab0023be72a99202302c3426ac50e17?s=128&d=identicon&r=PG", "display_name": "Sina", "link": "https://stackoverflow.com/users/1862919/sina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "accepted_answer_id": 34632109, "answer_count": 3, "score": 4, "last_activity_date": 1452084482, "creation_date": 1452079771, "last_edit_date": 1452084482, "question_id": 34632067, "link": "https://stackoverflow.com/questions/34632067/malloc-strlen-strcat", "title": "Malloc, strlen, strcat", "body": "<p>The following is a piece of code from the begining of a program that I am writing (which contains an error). </p>\n\n<pre><code>    char *name;\n    char *name2;\n\n    if (argn != 2) {\n        printf(\"You have to enter the name of the input file\");\n        return 1;\n    }\n\n    name = malloc(strlen(arg[1]) + 1);      \n    name2 = malloc(strlen(arg[1]) + 1);\n\n    strcpy(name, arg[1]); \n    strcpy(name2, arg[1]);\n\n    strcat(name2, \"-results.pdb\");  \n</code></pre>\n\n<p>There is an error here which is with <code>strcat</code>, indeed <code>name2</code> does not have enough size to carry out the operation above. Yet <code>strcat</code> executes without a problem.\nHowever later on in a completely unrelated part of the program an operation with another array that has been initialized after this <code>strcat</code> gives an error.\nIt is an integer array for which I am assigning values to its elements and it gives an error before I can assign all the values. I am assuming that since there is not enough memory in name2 for the operation above this \"somehow\" affects the next arrays that are initialized. I would like to understand:</p>\n\n<p>1- What is likely happening here so that the extra information that could not be written to name2 affects other arrays declared later?</p>\n\n<p>2- I probably wouldn't be able to backtrace this problem so easily in a more complicated program since error occurs elsewhere rather than in strcat. How can I prevent this kind of sneaky errors like a <code>memory problematic</code> process affecting totally unrelated arrays elsewhere?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452079412, "post_id": 34631920, "comment_id": 57008880, "body": "I know that, but it was not defined any were except in this header file. No case of multiple."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 3, "creation_date": 1452079453, "post_id": 34631920, "comment_id": 57008903, "body": "Because the purpose is to prevent <i>this</i> header file from being included multiple times."}, {"owner": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452079660, "post_id": 34631920, "comment_id": 57009028, "body": "Multiple include of the header file or multiple declaration of the variable DEFINE_ME???"}, {"owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "edited": false, "score": 0, "creation_date": 1452079756, "post_id": 34631920, "comment_id": 57009082, "body": "You can have both with the help of ifndef"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452079760, "post_id": 34631920, "comment_id": 57009083, "body": "@TusharSharma Imagine you include the file twice in a row. Then the first inclusion will define DEFINE_ME and also define abc. The second inclusion will do neither because DEFINE_ME is already defined."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452079823, "post_id": 34631920, "comment_id": 57009125, "body": "@TusharSharma The name <code>DEFINE_ME</code> or what value it has, has no significance other than preventing the <i>same</i> header file being included accidentally."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452080098, "post_id": 34631920, "comment_id": 57009280, "body": "@TusharSharma I have added a simple example illustrating the workings of it. Hopefully, it becomes clear. I also suggest reading the link in the answer first."}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452080260, "post_id": 34631920, "comment_id": 57009380, "body": "@TusharSharma it&#39;s to be able to produce robust code in the future and good practice. If someone continues to develop the code/library containing this header, they can be sure that this file will not be unnecessarily included should the part they&#39;re developing now need to include this file."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1452080017, "last_edit_date": 1452080017, "creation_date": 1452079302, "answer_id": 34631920, "question_id": 34631885, "link": "https://stackoverflow.com/questions/34631885/does-the-use-ifndef-and-define-change-the-memory-allocation/34631920#34631920", "title": "Does the use #ifndef and #define change the memory allocation?", "body": "<p>It's called an <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow\"><code>include guard</code>.</a></p>\n\n<p>The purpose of <code>DEFINE_ME</code> is to prevent the particular (where it's defined) header file being included multiple times accidentally.</p>\n\n<hr>\n\n<p>To understand how it works, try without include guard:</p>\n\n<p>header.h:</p>\n\n<pre><code>int x = 5;\n</code></pre>\n\n<p>file.c:</p>\n\n<pre><code>#include \"header.h\"\n#include \"header.h\"\n\nint main() {\n   printf(\"%d\\n\", x);\n}\n</code></pre>\n\n<p>and then try with an include guard:</p>\n\n<p>header.h:</p>\n\n<pre><code>#ifndef DEFINE_ME\n#define DEFINE_ME 1\n\nint x = 5;\n\n#endif\n</code></pre>\n\n<p>file.c:</p>\n\n<pre><code>#include \"header.h\"\n#include \"header.h\"\n\nint main() {\n   printf(\"%d\\n\", x);\n}\n</code></pre>\n\n<p>When you have <code>DEFINE_ME</code>, the header will be included the first time in <code>fil.c</code>, the <code>header.h</code> is included as <code>DEFINE_ME</code> wasn't defined before. But the next <code>#include \"header.h\"</code> wouldn't include the contents of the guard as <code>DEFINE_ME</code> has already been defined by the previous inclusion.</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452079745, "post_id": 34631985, "comment_id": 57009074, "body": "This is nice to explain my problem, see there is no such header1 file ok.  And don&#39;t forget the char abc[10]; ?  that is the only thing present in the file which is used later."}, {"owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "reply_to_user": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452079815, "post_id": 34631985, "comment_id": 57009120, "body": "Ok no header1 ... but its for the safety purpose to avoid multiple values of a single variable"}, {"owner": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452079952, "post_id": 34631985, "comment_id": 57009204, "body": "And does it affect the memory allocation??"}, {"owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "reply_to_user": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "edited": false, "score": 0, "creation_date": 1452080073, "post_id": 34631985, "comment_id": 57009269, "body": "Memory will be allocated on the basis of loading of header files..when header files are loaded memory is allocated to the variables..now if the guard is there..then it will prevent the allocation of the memory to variable.which was previously defined"}], "tags": [], "owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "is_accepted": true, "score": 1, "last_activity_date": 1452080594, "last_edit_date": 1452080594, "creation_date": 1452079530, "answer_id": 34631985, "question_id": 34631885, "link": "https://stackoverflow.com/questions/34631885/does-the-use-ifndef-and-define-change-the-memory-allocation/34631985#34631985", "title": "Does the use #ifndef and #define change the memory allocation?", "body": "<p>It's include guard.</p>\n\n<p>The purpose of This is to prevent multiple declaration of variable.</p>\n\n<p>ifndef = if not defined.\nthen define it..\nif defined then use the previous declaration ..</p>\n\n<p>suppose u have two header files </p>\n\n<p>header1:</p>\n\n<pre><code>#ifndef DEFINE_ME\n#define DEFINE_ME     1\n#endif\n</code></pre>\n\n<p>header 2:</p>\n\n<pre><code>#ifndef DEFINE_ME\n#define DEFINE_ME     1\n\n#endif\n</code></pre>\n\n<p>now if in c file header 2 is included first then it will include the value from header 2 not from header 1.. as it is already defined in header 2</p>\n\n<p>You can have header file guard also as explained below:</p>\n\n<p>Header1.h</p>\n\n<pre><code>#ifndef _header1\n#define _header1\n#ifndef VAR1\n#ifdef VAR1   5\n#endif\n#endif\n</code></pre>\n\n<p>Header2.h</p>\n\n<pre><code>#ifndef _header2\n#define _header2\n#ifndef VAR1\n#ifdef VAR1   5\n#endif\n#endif\n</code></pre>\n\n<p>Now you have used a guard so that u by mistake include same header in different files of same project then also u will be safe. </p>\n"}], "owner": {"reputation": 171, "user_id": 1915026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6kHS.jpg?s=128&g=1", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/1915026/tushar-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 34631985, "answer_count": 2, "score": 0, "last_activity_date": 1452080594, "creation_date": 1452079210, "question_id": 34631885, "link": "https://stackoverflow.com/questions/34631885/does-the-use-ifndef-and-define-change-the-memory-allocation", "title": "Does the use #ifndef and #define change the memory allocation?", "body": "<p>I recently saw a header file with such defines:</p>\n\n<pre><code>#ifndef DEFINE_ME\n#define DEFINE_ME     1\n     char abc[10];\n#endif\n</code></pre>\n\n<p>but I also found that DEFINE_ME was never defined in any other header file of the project so why was #ifndef used? does it have to do any thing with memory?</p>\n"}, {"tags": ["c", "file-io", "graph"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5749167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705bd660256bf063f9b8b89aa12cebfc?s=128&d=identicon&r=PG&f=1", "display_name": "typedefstructer", "link": "https://stackoverflow.com/users/5749167/typedefstructer"}, "is_accepted": false, "score": 0, "last_activity_date": 1452079550, "creation_date": 1452079550, "answer_id": 34631992, "question_id": 34631856, "link": "https://stackoverflow.com/questions/34631856/reading-from-file-issue/34631992#34631992", "title": "Reading from file issue", "body": "<p>I am guessing, fgetc reads byte by byte, and fscanf(\"%d\") reads 4 bytes at a time, so this could cause some issue.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5039593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt91C.jpg?s=128&g=1", "display_name": "Yukilikespie", "link": "https://stackoverflow.com/users/5039593/yukilikespie"}, "edited": false, "score": 0, "creation_date": 1452079970, "post_id": 34632001, "comment_id": 57009210, "body": "So should I replace c with nodes[i], and node1, node 2 respectively?"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 1, "user_id": 5039593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt91C.jpg?s=128&g=1", "display_name": "Yukilikespie", "link": "https://stackoverflow.com/users/5039593/yukilikespie"}, "edited": false, "score": 0, "creation_date": 1452081160, "post_id": 34632001, "comment_id": 57009934, "body": "There&#39;s several ways to do this, for instance read each line with <code>getline</code>, then using <code>sscanf</code> in your string for the content."}], "tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1452079570, "creation_date": 1452079570, "answer_id": 34632001, "question_id": 34631856, "link": "https://stackoverflow.com/questions/34631856/reading-from-file-issue/34632001#34632001", "title": "Reading from file issue", "body": "<pre><code>   while ((c = fgetc(f)) != EOF) {\n\n        if ( c != ' ') {\n            fscanf(f, \"%d\", &amp;(nodes[i]));\n            printf(\"%d, %d\\n\",i,nodes[i]);\n            i++;\n        }\n\n        if (c == '\\n')\n            break;\n\n    }\n</code></pre>\n\n<p>Here you read twice from f (<code>fgetc(f)</code> is discarded)</p>\n\n<p>For the arcs (code below) there's also a problem, you test <code>c</code> but you're not reading it any more</p>\n\n<pre><code>    while (fscanf(f,\"(%d %d)\", &amp;node1, &amp;node2)) {\n\n        if ( c != ' ')\n            fscanf(f, \"(%d %d) \", &amp;node1, &amp;node2);\n\n        if (c == '\\n')\n            break;\n\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5039593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt91C.jpg?s=128&g=1", "display_name": "Yukilikespie", "link": "https://stackoverflow.com/users/5039593/yukilikespie"}, "edited": false, "score": 0, "creation_date": 1452086958, "post_id": 34634105, "comment_id": 57013583, "body": "I see the point. Yes, it works now. Though I have one little more issue. I need an n that is the number of nodes and I was thinking to put that on the first line, the second would be the nodes, and third the arcs. If I try to copy the while and modify such that it scans n, it does not work."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1, "user_id": 5039593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt91C.jpg?s=128&g=1", "display_name": "Yukilikespie", "link": "https://stackoverflow.com/users/5039593/yukilikespie"}, "edited": false, "score": 0, "creation_date": 1452087529, "post_id": 34634105, "comment_id": 57013931, "body": "@Yukilikespie try for first line : <code>fscanf(f, &quot;%d &quot;, &amp;n);</code>"}, {"owner": {"reputation": 1, "user_id": 5039593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt91C.jpg?s=128&g=1", "display_name": "Yukilikespie", "link": "https://stackoverflow.com/users/5039593/yukilikespie"}, "edited": false, "score": 0, "creation_date": 1452088317, "post_id": 34634105, "comment_id": 57014478, "body": "Okay, that is weird, first thing that I tried was that, before the while thing. Now it seems to work."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1452121974, "last_edit_date": 1452121974, "creation_date": 1452086127, "answer_id": 34634105, "question_id": 34631856, "link": "https://stackoverflow.com/questions/34631856/reading-from-file-issue/34634105#34634105", "title": "Reading from file issue", "body": "<pre><code>void readGraph(void){\n    int i = 0, j, node1, node2, n, check1, check2, c;\n    int nodes[MAXN];\n    FILE *f;\n\n    f = fopen(\"data.in\",\"r\");\n\n    if (f == NULL) {\n        printf(\"Error in opening file!\");\n        return ;\n    }\n\n    while ((c = fgetc(f)) != EOF) {\n        if( c == ' ')\n            continue;\n        else if( c == '\\n')\n            break;\n        else {\n            ungetc(c, f);//It is too reading. So Return the character to the stream.\n            fscanf(f, \"%d\", &amp;nodes[i]);\n            printf(\"%d, %d\\n\", i, nodes[i]);\n            i++;\n        }\n    }\n\n    while (2 == fscanf(f,\"(%d %d) \", &amp;node1, &amp;node2)) {\n        printf(\"(%d, %d)\\n\", node1, node2);\n    }\n    fclose(f);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "is_accepted": false, "score": 0, "last_activity_date": 1452089768, "creation_date": 1452089768, "answer_id": 34635285, "question_id": 34631856, "link": "https://stackoverflow.com/questions/34631856/reading-from-file-issue/34635285#34635285", "title": "Reading from file issue", "body": "<p>try this solution and you can see my c comments:</p>\n\n<pre><code>void readGraph() {\n    int i=0, j, node1, node2, n,check1, check2,c;\n    char nodes[128];\n    FILE *f;\n\n    f = fopen(\"data.in\",\"r\");\n\n    if (f == NULL) {\n        printf(\"Error in opening file!\");\n    }\n    else {\n\n       while (((c = fgetc(f)) != EOF) &amp;&amp; (c != '\\n')) {\n\n            if ( c != ' ') {\n                nodes[i] = c;\n                /*fscanf(f, \"%d\", &amp;(nodes[i]));*/ // you loose read c value when you read again without using value\n                printf(\"%d, %c\\n\",i,nodes[i]);\n                i++;\n            }\n\n            /*if (c == '\\n')\n                break;*/ \n            /* You loop 1 extra time */\n\n        }\n    }\n\n    while (fscanf(f,\"(%d %d)\", &amp;node1, &amp;node2)) {\n\n        if ( c != ' ')\n            fscanf(f, \"(%d %d) \", &amp;node1, &amp;node2);\n\n        if (c == '\\n')\n            break;\n\n   }\n   fclose(f);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5039593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt91C.jpg?s=128&g=1", "display_name": "Yukilikespie", "link": "https://stackoverflow.com/users/5039593/yukilikespie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1452121974, "creation_date": 1452079112, "question_id": 34631856, "link": "https://stackoverflow.com/questions/34631856/reading-from-file-issue", "title": "Reading from file issue", "body": "<p>I am trying to read a graph from file, I got on the first line the nodes, and I made a code that reads the nodes in the vector until the end of the line, then on the second like I got the arcs, in the (%d %d) format. My problem is that when I try to read the nodes, it skips the first number, third, and so on. And I cannot figure out why.\nHere is my code:</p>\n\n<pre><code>void readGraph() {\n    int i=0, j, node1, node2, n,check1, check2,c;\n    char nodes[MAXN];\n    FILE *f;\n\n    f = fopen(\"data.in\",\"r\");\n\n    if (f == NULL) {\n        printf(\"Error in opening file!\");\n    }\n    else {\n\n       while ((c = fgetc(f)) != EOF) {\n\n            if ( c != ' ') {\n                fscanf(f, \"%d\", &amp;(nodes[i]));\n                printf(\"%d, %d\\n\",i,nodes[i]);\n                i++;\n            }\n\n            if (c == '\\n')\n                break;\n\n        }\n    }\n\n    while (fscanf(f,\"(%d %d)\", &amp;node1, &amp;node2)) {\n\n        if ( c != ' ')\n            fscanf(f, \"(%d %d) \", &amp;node1, &amp;node2);\n\n        if (c == '\\n')\n            break;\n\n   }\n   fclose(f);\n}\n</code></pre>\n\n<p>Also, my data.in:</p>\n\n<pre><code>1 2 3 4 5 6\n(1 3) (2 3) (3 4) (3 5) (3 6) (4 6) (5 6)\n</code></pre>\n\n<p>Any help will be much appreciated. Thanks!</p>\n"}, {"tags": ["c", "multiplication"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5668606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067a809ec62013121e7c07b6890a4b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Silviutz", "link": "https://stackoverflow.com/users/5668606/silviutz"}, "edited": false, "score": 0, "creation_date": 1452079763, "post_id": 34631912, "comment_id": 57009084, "body": "If I do that I get 95900000256.000000, which is good but what is that 256 at the end?"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1452079830, "post_id": 34631912, "comment_id": 57009131, "body": "Because even with a float or a double, types have limits and you can handle only value supported by your types. You get this because the value 95900000000 is not handled by the float type. And on your computer, it appears that the nearest value is 95900000256.000000"}, {"owner": {"reputation": 282, "user_id": 1841168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d597f9379d658a9905c9dad32ee860b?s=128&d=identicon&r=PG", "display_name": "wegus", "link": "https://stackoverflow.com/users/1841168/wegus"}, "edited": false, "score": 0, "creation_date": 1452079991, "post_id": 34631912, "comment_id": 57009226, "body": "i wonder how this compiles! pow is defined for doubles not for ints. You should care for datatypes."}, {"owner": {"reputation": 73, "user_id": 5668606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067a809ec62013121e7c07b6890a4b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Silviutz", "link": "https://stackoverflow.com/users/5668606/silviutz"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1452080067, "post_id": 34631912, "comment_id": 57009265, "body": "@mikedu95 but 95900000256 is bigger than the number i need, why can&#39;t i get it? or how can i solve this problem?"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "reply_to_user": {"reputation": 73, "user_id": 5668606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067a809ec62013121e7c07b6890a4b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Silviutz", "link": "https://stackoverflow.com/users/5668606/silviutz"}, "edited": false, "score": 0, "creation_date": 1452080658, "post_id": 34631912, "comment_id": 57009621, "body": "@Silviutz say a float uses 32 bits i.e. can represents 4294967295 differents values. But there is an infinity of real numbers and all the possibles values cannot be represented with only 32 bits. On your computer, 95900000000 has no float representation, but the closest value is 95900000256.000000."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "reply_to_user": {"reputation": 282, "user_id": 1841168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d597f9379d658a9905c9dad32ee860b?s=128&d=identicon&r=PG", "display_name": "wegus", "link": "https://stackoverflow.com/users/1841168/wegus"}, "edited": false, "score": 0, "creation_date": 1452080775, "post_id": 34631912, "comment_id": 57009698, "body": "@wegus: double is implicitely converted into int."}, {"owner": {"reputation": 282, "user_id": 1841168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d597f9379d658a9905c9dad32ee860b?s=128&d=identicon&r=PG", "display_name": "wegus", "link": "https://stackoverflow.com/users/1841168/wegus"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1452156916, "post_id": 34631912, "comment_id": 57046809, "body": "@mikedu95 when someone is learning every implicit thing is bad! When using gcc with -Wall it won&#39;t compile and one can read why and learn from it. If learned he might get the idea that he should use long as datatype for his last calculation."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1452453272, "post_id": 34631912, "comment_id": 57165506, "body": "Casting one operand should be sufficient. Please note that likely, computation is internally done with <code>double</code> precision before being rounded back to double."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 4, "last_activity_date": 1452080082, "last_edit_date": 1452080082, "creation_date": 1452079276, "answer_id": 34631912, "question_id": 34631800, "link": "https://stackoverflow.com/questions/34631800/issue-with-multiplication-in-c/34631912#34631912", "title": "Issue with multiplication in C", "body": "<p>The multiplication in the line <code>float mass_gal = e*f;</code> happens using integer arithmetic. The result is larger than INT_MAX and it overflows (causing undefined behavior). Then the result is converted to and stored in a float.</p>\n\n<p>Cast the operators to float before performing multiplication.</p>\n\n<pre><code>float mass_gal = (float)e * (float)f;\n</code></pre>\n\n<p>The result will not be accurate as the IEEE 754 single precision floating point arithmetic can only accurately represent integers up to the value 2^24. </p>\n\n<p>If you don't want to worry about precision, use an integer type that can represent the result, like a <em>long long int</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 594, "user_id": 1056380, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/rA1Uv.jpg?s=128&g=1", "display_name": "ManKeer", "link": "https://stackoverflow.com/users/1056380/mankeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1452079673, "creation_date": 1452079673, "answer_id": 34632029, "question_id": 34631800, "link": "https://stackoverflow.com/questions/34631800/issue-with-multiplication-in-c/34632029#34632029", "title": "Issue with multiplication in C", "body": "<p>Would you please change the type from float to long and check the result, It seems that the problem with the size of the float.</p>\n"}], "owner": {"reputation": 73, "user_id": 5668606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067a809ec62013121e7c07b6890a4b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Silviutz", "link": "https://stackoverflow.com/users/5668606/silviutz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 34632029, "answer_count": 2, "score": 0, "last_activity_date": 1452080082, "creation_date": 1452078972, "question_id": 34631800, "link": "https://stackoverflow.com/questions/34631800/issue-with-multiplication-in-c", "title": "Issue with multiplication in C", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\n\n\nint main(){\n\nchar name[]=\"g9.59e10.01024\";\nint a = atoi(&amp;name[1]);\nint b = atoi(&amp;name[3]);\nint c = atoi(&amp;name[6]);\nint d = c-2;\nint e = pow(10,d);\nint f = (100*a+b);\n\nprintf(\"%d\",a);\nprintf(\"\\n\");\nprintf(\"%d\",b);\nprintf(\"\\n\");\nprintf(\"%d\",c);\nprintf(\"\\n\");\nprintf(\"%d\",d);\nprintf(\"\\n\");\nprintf(\"%d\",e);\nprintf(\"\\n\");\nprintf(\"%d\",f);\nprintf(\"\\n\");\n\n\nfloat mass_gal = e*f;\n\n\n\nprintf(\"%f\",mass_gal);\nprintf(\"\\n\");\n\n}\n</code></pre>\n\n<p>And when I run it i get this output:</p>\n\n<p>9,\n   59,\n   10,\n   8,\n   100000000,\n   959,\n   1410719488.000000</p>\n\n<p>All the number seems to be right, except the last one which should be 95900000000. Why do I get a wrong number there?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "cmake", "clion"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5751867, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-67f02EQqtcY/AAAAAAAAAAI/AAAAAAAABPw/jFp8j1olR90/photo.jpg?sz=128", "display_name": "Alex DB", "link": "https://stackoverflow.com/users/5751867/alex-db"}, "edited": false, "score": 0, "creation_date": 1452079559, "post_id": 34631887, "comment_id": 57008971, "body": "Yeah, but the code still works. In my actual use case, I&#39;m not planning on compiling the non-main.c files separately, and it would be a pain to add the stdio header in every one of them. You say having including the stdio header in main.c accomplishes nothing, but if I remove it the code doesn&#39;t work. I guess I&#39;m just treating the collection of files as one executable, whereas the compiler sees the different C files seperately"}, {"owner": {"reputation": 11, "user_id": 5751867, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-67f02EQqtcY/AAAAAAAAAAI/AAAAAAAABPw/jFp8j1olR90/photo.jpg?sz=128", "display_name": "Alex DB", "link": "https://stackoverflow.com/users/5751867/alex-db"}, "edited": false, "score": 0, "creation_date": 1452079630, "post_id": 34631887, "comment_id": 57009013, "body": "Actually, I just removed the stdio header and the code still worked... Maybe it&#39;s adding the header automatically when if finds the printf function"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 11, "user_id": 5751867, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-67f02EQqtcY/AAAAAAAAAAI/AAAAAAAABPw/jFp8j1olR90/photo.jpg?sz=128", "display_name": "Alex DB", "link": "https://stackoverflow.com/users/5751867/alex-db"}, "edited": false, "score": 1, "creation_date": 1452079812, "post_id": 34631887, "comment_id": 57009119, "body": "@AlexDB Do you know how function declarations work in C - in particular, implicit declarations? Also, do you know how header files work?"}, {"owner": {"reputation": 11, "user_id": 5751867, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-67f02EQqtcY/AAAAAAAAAAI/AAAAAAAABPw/jFp8j1olR90/photo.jpg?sz=128", "display_name": "Alex DB", "link": "https://stackoverflow.com/users/5751867/alex-db"}, "edited": false, "score": 0, "creation_date": 1452080262, "post_id": 34631887, "comment_id": 57009382, "body": "I&#39;m very new to C (couple of days), and I wasn&#39;t really sure what the point of declaring a function first, then defining it later was, I just read that it&#39;s the proper thing to do. And I think I know how to use header files, but not exactly what the difference between using a header file, and just including the code in the header file, where it&#39;s called in main."}, {"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "reply_to_user": {"reputation": 11, "user_id": 5751867, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-67f02EQqtcY/AAAAAAAAAAI/AAAAAAAABPw/jFp8j1olR90/photo.jpg?sz=128", "display_name": "Alex DB", "link": "https://stackoverflow.com/users/5751867/alex-db"}, "edited": false, "score": 0, "creation_date": 1452082113, "post_id": 34631887, "comment_id": 57010462, "body": "@AlexDB Then probably you should pick one of <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">these book</a> and go through it."}], "tags": [], "owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "is_accepted": false, "score": 2, "last_activity_date": 1452332121, "last_edit_date": 1452332121, "creation_date": 1452079211, "answer_id": 34631887, "question_id": 34631630, "link": "https://stackoverflow.com/questions/34631630/clion-not-finding-header-in-main-c-for-use-in-external-c-file/34631887#34631887", "title": "CLion not finding header in main.c for use in external .c file", "body": "<p><code>hello.c</code> and <code>main.c</code> are independent compilation units and as such needs to have <code>#include &lt;stdio.h&gt;</code> in both. Actually in your example having <code>#include &lt;stdio.h&gt;</code> in <code>main.c</code> accomplishes nothing as nothing forward declared there is being used in <code>hello.h</code> nor <code>main.c</code>.</p>\n\n<p>You should actually be seeing warnings when compiling <code>hello.c</code> on its own.</p>\n\n<hr>\n\n<p>When the compiler finds a function it does not know (has not been declared yet), it assumes it has the signature <code>int function_X(void)</code>. So for your case it will be wrong for <code>printf</code> which has <code>int printf(char const*, ...)</code>. But you are lucky, due to the way that arguments are passed in your platform, everything works out.</p>\n\n<p>So you basically need to forward declare functions to ensure that when compiling the compiler knows where to place the arguments so that the called function can find it.</p>\n\n<p>There is more to it but this short explanation should be enough for a beginner and if you read one of the books in the link I provided in the comments you should be able to understand it better.</p>\n"}], "owner": {"reputation": 11, "user_id": 5751867, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-67f02EQqtcY/AAAAAAAAAAI/AAAAAAAABPw/jFp8j1olR90/photo.jpg?sz=128", "display_name": "Alex DB", "link": "https://stackoverflow.com/users/5751867/alex-db"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452332121, "creation_date": 1452078476, "last_edit_date": 1452330144, "question_id": 34631630, "link": "https://stackoverflow.com/questions/34631630/clion-not-finding-header-in-main-c-for-use-in-external-c-file", "title": "CLion not finding header in main.c for use in external .c file", "body": "<p>So my situation is something like this, I have three files:</p>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"hello.h\"\n\nint main() {\n    hello();\n}\n</code></pre>\n\n<p>hello.h:</p>\n\n<pre><code>void hello();\n</code></pre>\n\n<p>hello.c:</p>\n\n<pre><code>void hello() {\n    printf(\"Hello\");\n}\n</code></pre>\n\n<p>My Cmake file looks something like this:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(test)\n\nset(SOURCE_FILES main.c hello.c)\nadd_executable(test ${SOURCE_FILES})\n</code></pre>\n\n<p>The code runs fine. However CLion doesn't recognise the <code>printf()</code> function in hello.c, and wants me to add it as a header file. Is there a way to make it see the <code>#include &lt;stdio.h&gt;</code> in the main.c file, and stop giving me a hard time?</p>\n\n<hr>\n\n<p>So I fixed this to my own satisfaction by making the functions defined in my .c files return values rather than calling printf inside those functions. Then printing the values returned in main.c</p>\n"}, {"tags": ["c", "tcp", "wireless", "tcp-ip", "libpcap"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1157391"}, "is_accepted": true, "score": 0, "last_activity_date": 1452081355, "creation_date": 1452081355, "answer_id": 34632550, "question_id": 34631598, "link": "https://stackoverflow.com/questions/34631598/packet-reassembly-at-network-layer-libpcap/34632550#34632550", "title": "Packet reassembly at Network Layer libpcap", "body": "<p>The IP header only gives you the size of the fragment. So you need to reserve a buffer the size of the largest possible IP packet, i.e. 65535 bytes. Only once you get the last fragment can you determine the length of the complete packet.</p>\n"}], "owner": {"reputation": 721, "user_id": 4944374, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/696074703829896/picture?type=large", "display_name": "Adi Tiwari", "link": "https://stackoverflow.com/users/4944374/adi-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 34632550, "answer_count": 1, "score": 0, "last_activity_date": 1452081355, "creation_date": 1452078378, "last_edit_date": 1452078684, "question_id": 34631598, "link": "https://stackoverflow.com/questions/34631598/packet-reassembly-at-network-layer-libpcap", "title": "Packet reassembly at Network Layer libpcap", "body": "<p><strong>Environment</strong></p>\n\n<p>As per my understanding <code>Network layer</code> is responsible for reassembly of fragmented datagrams and then it supplies the reassembled data to upper <code>Transport layer</code>. </p>\n\n<p>I have collected packet traces using <code>libpcap</code> and i want to reassemble fragmented packets at layer 3 on my own.</p>\n\n<p><a href=\"http://www.tcpipguide.com/free/t_IPMessageReassemblyProcess-2.htm\" rel=\"nofollow\">This link</a> says that i need fragment flag, fragment offset, identification number and buffer value for reassembly of segments.</p>\n\n<p><strong>Question</strong></p>\n\n<p>At the arrival of first segment how to know what should be size of buffer to  be initialized for complete reassembly of datagram.</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c", "oracle", "oracle11g", "oracle-call-interface"], "comments": [{"owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "edited": false, "score": 1, "creation_date": 1452078226, "post_id": 34631397, "comment_id": 57008159, "body": "Did you do step 3 of <a href=\"http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html%5D\" rel=\"nofollow noreferrer\">the installation instructions</a>? Showing the compilation/linking commands you used might be helpful, as well as the relevant environment variables for your platform."}], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 5365509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3b2ac3cb74fc7129edbc78e7d31e45?s=128&d=identicon&r=PG&f=1", "display_name": "Vampiro", "link": "https://stackoverflow.com/users/5365509/vampiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1452078463, "creation_date": 1452078463, "answer_id": 34631627, "question_id": 34631397, "link": "https://stackoverflow.com/questions/34631397/error-while-loading-shared-libraries-libclntsh-so-11-1-cannot-open-shared-obje/34631627#34631627", "title": "error while loading shared libraries: libclntsh.so.11.1: cannot open shared object file: No such file or directory", "body": "<p>Make sure the Examples CD is installed.\nMake sure environment variable LD_LIBRARY_PATH is set, and the library file is accessible (permission-wise) for the user who you are logged in as.</p>\n\n<p>If you have checked these and still get the error, please post the output of:\n    <code>strace ./a.out</code></p>\n"}, {"tags": [], "owner": {"reputation": 594, "user_id": 1056380, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/rA1Uv.jpg?s=128&g=1", "display_name": "ManKeer", "link": "https://stackoverflow.com/users/1056380/mankeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1452079153, "creation_date": 1452079153, "answer_id": 34631872, "question_id": 34631397, "link": "https://stackoverflow.com/questions/34631397/error-while-loading-shared-libraries-libclntsh-so-11-1-cannot-open-shared-obje/34631872#34631872", "title": "error while loading shared libraries: libclntsh.so.11.1: cannot open shared object file: No such file or directory", "body": "<p>LIBPATH environment variable should be pointed to the lib32 folder which contains the libclntsh.</p>\n\n<p>then you need to export LIBPATH variable before you run your application.</p>\n"}, {"tags": [], "owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "is_accepted": false, "score": 0, "last_activity_date": 1452079458, "last_edit_date": 1495535298, "creation_date": 1452079458, "answer_id": 34631963, "question_id": 34631397, "link": "https://stackoverflow.com/questions/34631397/error-while-loading-shared-libraries-libclntsh-so-11-1-cannot-open-shared-obje/34631963#34631963", "title": "error while loading shared libraries: libclntsh.so.11.1: cannot open shared object file: No such file or directory", "body": "<p>Copied from my answer here: <a href=\"https://stackoverflow.com/questions/5327744/eclipse-cdt-auto-include-shared-libraries/9368199#9368199\">Eclipse CDT Auto Include Shared Libraries</a></p>\n\n<blockquote>\n  <p>Run <strong>ldconfig</strong> as root to update the cache - if that still doesn't\n  help, you need to add the path to the file ld.so.conf (just type it in\n  on its own line) or better yet, add the entry to a new file (easier to\n  delete) in directory ld.so.conf.d.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5710553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a825eaf9e102dfd0f02e4a68701221?s=128&d=identicon&r=PG&f=1", "display_name": "Pam", "link": "https://stackoverflow.com/users/5710553/pam"}, "is_accepted": false, "score": 3, "last_activity_date": 1452136920, "creation_date": 1452136920, "answer_id": 34646849, "question_id": 34631397, "link": "https://stackoverflow.com/questions/34631397/error-while-loading-shared-libraries-libclntsh-so-11-1-cannot-open-shared-obje/34646849#34646849", "title": "error while loading shared libraries: libclntsh.so.11.1: cannot open shared object file: No such file or directory", "body": "<p>Yes I solve it by adding a link of the library to the <code>/usr/lib</code>.</p>\n\n<p>using the following command.</p>\n\n<pre><code>sudo ln -s /home/INSTANT_CLIENT/lib/libclntsh.so.11.1 /usr/lib/libclntsh.so.11.1\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5710553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a825eaf9e102dfd0f02e4a68701221?s=128&d=identicon&r=PG&f=1", "display_name": "Pam", "link": "https://stackoverflow.com/users/5710553/pam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14217, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1452136920, "creation_date": 1452077775, "question_id": 34631397, "link": "https://stackoverflow.com/questions/34631397/error-while-loading-shared-libraries-libclntsh-so-11-1-cannot-open-shared-obje", "title": "error while loading shared libraries: libclntsh.so.11.1: cannot open shared object file: No such file or directory", "body": "<p>I'm making a C program which is connecting a oracle DB. I have correctly installed the Oracle Instant Client and ocilib.</p>\n\n<p>And I did compile the code without any error but when I executing the program I got following error.   </p>\n\n<pre><code>./a.out: error while loading shared libraries: libclntsh.so.11.1: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>If anyone know how to solve please write it\nThank you. </p>\n"}, {"tags": ["c++", "c", "linux", "vim", "ide"], "comments": [{"owner": {"reputation": 29614, "user_id": 15934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66027fd61cc5e638b5d3057859e1be51?s=128&d=identicon&r=PG", "display_name": "Luc Hermitte", "link": "https://stackoverflow.com/users/15934/luc-hermitte"}, "edited": false, "score": 2, "creation_date": 1452078866, "post_id": 34631287, "comment_id": 57008564, "body": "Most use tmux to do that."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5648949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff7f24fcfd6e0aaa0308cded71635b17?s=128&d=identicon&r=PG&f=1", "display_name": "Chloe", "link": "https://stackoverflow.com/users/5648949/chloe"}, "edited": false, "score": 0, "creation_date": 1452088797, "post_id": 34631523, "comment_id": 57014833, "body": "&#39;sudo apt-get install vimshell&#39; (or vim-shell) returns an error. Where can I get hold of vimshell and information on compiling it in ubuntu?"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "reply_to_user": {"reputation": 47, "user_id": 5648949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff7f24fcfd6e0aaa0308cded71635b17?s=128&d=identicon&r=PG&f=1", "display_name": "Chloe", "link": "https://stackoverflow.com/users/5648949/chloe"}, "edited": false, "score": 0, "creation_date": 1452089283, "post_id": 34631523, "comment_id": 57015141, "body": "vimshell is here: <a href=\"https://github.com/Shougo/vimshell.vim\" rel=\"nofollow noreferrer\">github.com/Shougo/vimshell.vim</a> and how to install is explained in the vimshell.txt that you can find on that same page."}], "tags": [], "owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "is_accepted": true, "score": 2, "last_activity_date": 1452078188, "creation_date": 1452078188, "answer_id": 34631523, "question_id": 34631287, "link": "https://stackoverflow.com/questions/34631287/execute-c-on-a-split-screen-in-vim/34631523#34631523", "title": "Execute C on a split screen in vim", "body": "<p>Install <code>vimshell</code> then type <code>:VimShellInteractive</code> to transform a vim window (a split for example) into an instance of a shell where you can still use vim commands.</p>\n"}], "owner": {"reputation": 47, "user_id": 5648949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff7f24fcfd6e0aaa0308cded71635b17?s=128&d=identicon&r=PG&f=1", "display_name": "Chloe", "link": "https://stackoverflow.com/users/5648949/chloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 2, "accepted_answer_id": 34631523, "answer_count": 1, "score": 1, "last_activity_date": 1452079563, "creation_date": 1452077497, "last_edit_date": 1452079563, "question_id": 34631287, "link": "https://stackoverflow.com/questions/34631287/execute-c-on-a-split-screen-in-vim", "title": "Execute C on a split screen in vim", "body": "<p>When I execute a C program in vim using <code>:!./%&lt;</code>, I would like to be able to see my code (on the left side of a split screen), as well as the stdout results from the execution of the program (on the right side of the split screen). At the moment, the output of the program execution is blocking the view of my code until I hit <code>ENTER</code>, but then I can no longer see the program output.</p>\n\n<p>How do I execute a C program in vim so that I can see both of its code and its execution results together on a split screen ?? I tried piping the output using <code>:!./%&lt;|vert copen</code>, but failed. I am using Linux.</p>\n\n<p>Any help will be much appreciated.</p>\n"}, {"tags": ["c", "string", "sdl", "sdl-ttf"], "comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 2, "creation_date": 1452082892, "post_id": 34631009, "comment_id": 57010905, "body": "I don&#39;t know what might also be in the library, but if <code>TTF_RenderUTF8_Shaded</code> is all you have to work with, I&#39;d guess that you need to have a routine that parses each line in turn, looking for the control-codes. For each fragment that is one colour (e.g. <code>Hello</code> and <code>World</code>) you would copy that fragment to a temporary string and make one call to <code>TTF_RenderUTF8_Shaded</code>.  Repeat for each fragment and each line."}, {"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1452089608, "post_id": 34631009, "comment_id": 57015391, "body": "Good idea, I&#39;ll try implement that now."}], "owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452076667, "creation_date": 1452076667, "question_id": 34631009, "link": "https://stackoverflow.com/questions/34631009/rendering-specific-characters-within-a-string-different-colors-sdl-ttf", "title": "Rendering specific characters within a string different colors (SDL_ttf)", "body": "<p>So I have 25 lines of text with 40 characters per line held in an array of strings, and within that there are control codes which denote a colour which the following chars should be, for example one line may be:</p>\n\n<p><code>[RED] Hello [BLUE] World</code></p>\n\n<p>Where Hello must be in red, and World must be in blue. Currently I've gotten to the point where I can read the first code, i.e [RED] (actual control codes are hexadecimal) and using the following line I can highlight it:</p>\n\n<pre><code>TTF_RenderUTF8_Shaded(d-&gt;font, array_pointers[i], colors.foreground, colors.background);\n</code></pre>\n\n<p>Where d->font is the font, array_pointers[i] is that line of text, and the colors are the back/foreground to be set (default black background for all so not a worry. This line will render the entire string red and ignore the second control code. </p>\n\n<p>My question is: is there something I can use/a way which can render specific parts of a string different colors? As far as i know RenderUTF8_Shaded only takes a whole string as an argument. </p>\n"}, {"tags": ["c", "linux", "bash", "shell", "go"], "comments": [{"owner": {"reputation": 532, "user_id": 1644482, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ea25c27c274633522adb95bfd17388d4?s=128&d=identicon&r=PG", "display_name": "Sergey Kanaev", "link": "https://stackoverflow.com/users/1644482/sergey-kanaev"}, "edited": false, "score": 1, "creation_date": 1452074460, "post_id": 34630191, "comment_id": 57005811, "body": "Take a look at manpage: <code>man 7 credentials</code>. There is section <code>User and group identifiers</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1452074671, "post_id": 34630191, "comment_id": 57005941, "body": "Can&#39;t you just use <code>getuid()</code>?"}, {"owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "reply_to_user": {"reputation": 532, "user_id": 1644482, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ea25c27c274633522adb95bfd17388d4?s=128&d=identicon&r=PG", "display_name": "Sergey Kanaev", "link": "https://stackoverflow.com/users/1644482/sergey-kanaev"}, "edited": false, "score": 0, "creation_date": 1452075007, "post_id": 34630191, "comment_id": 57006128, "body": "@SergeyKanaev Thank you, let me explore the options of that, and if I can do it with a syscall, probably that will help."}, {"owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1452075064, "post_id": 34630191, "comment_id": 57006156, "body": "@IanAbbott Nope. That will get you the effective uid, and that changes when you use sudo. I wanted to get the real uid."}], "answers": [{"comments": [{"owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452074956, "post_id": 34630349, "comment_id": 57006107, "body": "That will get you the effective uid, not the real uid. To get that, I can just use  <code>os.Getuid</code>."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452075334, "post_id": 34630349, "comment_id": 57006310, "body": "Are you shure? When i&#39;m running <code>sudo id</code> it will show roots id, but if i run <code>sudo who am i</code> it shows the id of user who actually did run sudo, even through a chain of different sudos."}, {"owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452075482, "post_id": 34630349, "comment_id": 57006405, "body": "Yep. Checked it. <code>[scott@workbench scripts]$ sudo whoami root [scott@workbench scripts]$ whoami scott</code>"}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452075593, "post_id": 34630349, "comment_id": 57006477, "body": "Not <code>whoami</code>, as i wrote <code>who am i</code> with spaces."}, {"owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452075833, "post_id": 34630349, "comment_id": 57006654, "body": "It works in cmd, but as I mentioned with the command <code>tty</code>, Chances are that this might be getting executed in a separate forked shell that is detached from a tty (again, just a wild guess) and doesn&#39;t return a value when put inside a program,"}, {"owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452076843, "post_id": 34630349, "comment_id": 57007321, "body": "That changes to <code>root</code> when we do sudo."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452076938, "post_id": 34630349, "comment_id": 57007384, "body": "$SUDO_USER will help if it&#39;s only one sudo, but it&#39;s not a good solution."}, {"owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "edited": false, "score": 0, "creation_date": 1452077682, "post_id": 34630349, "comment_id": 57007838, "body": "Yes it is not reliable. They are not set on these servers :("}], "tags": [], "owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "is_accepted": false, "score": 2, "last_activity_date": 1452077163, "last_edit_date": 1452077163, "creation_date": 1452074659, "answer_id": 34630349, "question_id": 34630191, "link": "https://stackoverflow.com/questions/34630191/what-are-the-ways-to-find-the-session-leader-or-the-controlling-tty-of-a-process/34630349#34630349", "title": "What are the ways to find the session leader or the controlling TTY of a process group in Linux?", "body": "<p>Edit:\nsudo set's <code>$SUDO_USER</code> environment variable, but it will help just with one sudo, i.e. if there was something like <code>sudo sudo -u nobody your-program</code>, <code>$SUDO_USER</code> will be set to \"root\". And there is <code>$SUDO_UID</code> too.</p>\n\n<p>Old answer: How about <code>exec.Command(\"who am i\").Output()</code> ? (won't work, still needs a tty).</p>\n"}], "owner": {"reputation": 1317, "user_id": 5414872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07e71c5939c157e8fa39100bb785262d?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/5414872/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1452077163, "creation_date": 1452074195, "question_id": 34630191, "link": "https://stackoverflow.com/questions/34630191/what-are-the-ways-to-find-the-session-leader-or-the-controlling-tty-of-a-process", "title": "What are the ways to find the session leader or the controlling TTY of a process group in Linux?", "body": "<p>This is not a language specific question, although I am using golang at the moment.</p>\n\n<p>I am writing a command line program, and I wanted to find the real UID of the program.(By realUID, I meant, if the user did a sudo, the effective uid changes, but the real uid would be the same as the user's.) </p>\n\n<ul>\n<li><p>I've read that finding the owner of the controlling tty is one way to find this, and on linux, we can use \"tty\" command, that will return the filename of the terminal connected to STDINPUT. Checking its ownership is one way. </p></li>\n<li><p>Another way is to find the session leader process, and who owns it.</p></li>\n</ul>\n\n<p>I tried the first way, using</p>\n\n<pre><code>cmdOut []byte\ncmdOut, _ = exec.Command(\"tty\").Output()\n</code></pre>\n\n<p>but it returns the output <code>not a tty</code>, when I run the program from my shell. Chances are that this might be getting executed in a separate forked shell that is detached from a tty (again, just a wild guess). </p>\n\n<p>I tried the second way using <code>os.Getppid()</code> to get the parent pid, but in reality, when running sudo, it forks again, and it is giving the parent pid of the sudo process(<code>16031</code> in the below case, whereas I am looking to grab <code>3393</code> instead.). (Pasting the process hierarchy from pstree output)\n<code>/usr/bin/termin(3383)-+-bash(3393)---sudo(16031)---Myprogram(16032)</code>, so effectively I am not able to get the session leader process, but just the parent pid.</p>\n\n<p>Can someone guide me on how do I implement this functionality using either of this method? </p>\n"}, {"tags": ["c", "buffer", "buffer-overflow", "exploit"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1452073841, "post_id": 34629918, "comment_id": 57005402, "body": "Accessing an array out-out-bounds is <b>undefined behaviour</b> as off the C standard. Think about the meaning of the word &quot;<b>undefined</b>&quot;."}, {"owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452075103, "post_id": 34629918, "comment_id": 57006180, "body": "Thanks for commenting. I do understand that access out-of-bound addresses is undefined behavior, or at least I think I do. Correct me if I&#39;m wrong, but is not out-of-bound addresses essentially some data-storing memory chunks that can be accesses and modified? So if I have turned stack protection, which theoretically would enable me to play with those out-of-bound addresses, and if I am meticulous enough to keep my code in line, should I be able to utilize those memory just fine?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1452075309, "post_id": 34629918, "comment_id": 57006295, "body": "If the stack element you&#39;re trying to access isn&#39;t mapped into the process&#39;s current address space, what exactly do you expect to happen? other than a signal? and why?"}, {"owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452075346, "post_id": 34629918, "comment_id": 57006316, "body": "P.S Just to clarify, I was not doing this randomly.  What I initially intended to do was overflow the return address of an user-defined function, and make EIP pointing to some malicious shell code, but unfortunately I found out that  it appeared I could not perform buffer overflow on my machine, and could not figure out why."}, {"owner": {"reputation": 256, "user_id": 5452856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662031c626a47a9e08d01bd8749eef79?s=128&d=identicon&r=PG&f=1", "display_name": "SwedishOwlSerpent", "link": "https://stackoverflow.com/users/5452856/swedishowlserpent"}, "edited": false, "score": 1, "creation_date": 1452075933, "post_id": 34629918, "comment_id": 57006716, "body": "Your current problem is not the stack protection; if you compiled it like you said you did, stack protection IS disabled. What currently happens is that EIP points to an invalid address (one that isn&#39;t mapped into the process&#39;s current address space, as EJP said). If you&#39;d try to run it with proper shellcode, your exploit should work."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1452075935, "post_id": 34629918, "comment_id": 57006717, "body": "@glenjoker - I find it very <i>fortunate</i> that it is hard to insert malicious code.  :-)  Even if I knew how to make it work, I would be reluctant to make that info public."}, {"owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "reply_to_user": {"reputation": 256, "user_id": 5452856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662031c626a47a9e08d01bd8749eef79?s=128&d=identicon&r=PG&f=1", "display_name": "SwedishOwlSerpent", "link": "https://stackoverflow.com/users/5452856/swedishowlserpent"}, "edited": false, "score": 0, "creation_date": 1452077234, "post_id": 34629918, "comment_id": 57007567, "body": "@SwedishOwlSerpent - I see your point. I&#39;ll go though my code again to see if I have miscalculated the place of the return address. Thanks for your help"}, {"owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452077272, "post_id": 34629918, "comment_id": 57007596, "body": "And thanks to everyone who has replied to my thread of course!"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452089432, "post_id": 34634347, "comment_id": 57015257, "body": "Sure, I&#39;ve been thinking about learning how to use gdb for a while, thanks for the link. As for the additional 8 bytes offset from the return address, I am not very familiar with this, but I think Ubuntu is x86 architecture?"}, {"owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452090791, "post_id": 34634347, "comment_id": 57016175, "body": "I meant that Ubuntu is x86 architecture, but N32 and N64 are for MIPS according to that wikipedia page"}, {"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "reply_to_user": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452101002, "post_id": 34634347, "comment_id": 57023304, "body": "you are right, if you are using 64-bit ubuntu then your processor is x64. i do not know then why there is this 8 byte gap however when you read tutorials on buffer-overflows there is stated that the return-address can not be exactly determined (when not using gdb) and you should use NOPs and trial-and-error, see <a href=\"http://www-rn.informatik.uni-bremen.de/lehre/itsec/itsec05-2u.pdf\" rel=\"nofollow noreferrer\">www-rn.informatik.uni-bremen.de/lehre/itsec/itsec05-2u.pdf</a>, p. 4 (is in german)"}, {"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "reply_to_user": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452102330, "post_id": 34634347, "comment_id": 57024154, "body": "this tutorial is nice: <a href=\"https://www.eecis.udel.edu/~bmiller/cis459/2007s/readings/buff-overflow.html\" rel=\"nofollow noreferrer\">eecis.udel.edu/~bmiller/cis459/2007s/readings/&hellip;</a>"}, {"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "reply_to_user": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452115868, "post_id": 34634347, "comment_id": 57032201, "body": "to finish this, buffer[ ] is the buffer that overflows, however str[ ] has to be filled until the return address is overwritten. where the return address is located can either be determined by GDB or by trial-and-error..."}, {"owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "edited": false, "score": 0, "creation_date": 1452332339, "post_id": 34634347, "comment_id": 57129922, "body": "Sorry for late reply, and profuse thanks for your help. I really appreciate it."}], "tags": [], "owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "is_accepted": true, "score": 0, "last_activity_date": 1452103479, "last_edit_date": 1452103479, "creation_date": 1452086981, "answer_id": 34634347, "question_id": 34629918, "link": "https://stackoverflow.com/questions/34629918/why-cant-i-disable-stack-protection/34634347#34634347", "title": "Why can&#39;t I disable stack protection?", "body": "<p>you can use GNU Debug to find the distance, here is a tutorial <a href=\"http://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf\" rel=\"nofollow\">http://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf</a></p>\n"}], "owner": {"reputation": 81, "user_id": 5621078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471da3c83f21a5eea03cb51e39820b2d?s=128&d=identicon&r=PG&f=1", "display_name": "glenjoker", "link": "https://stackoverflow.com/users/5621078/glenjoker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 1, "closed_date": 1452105559, "accepted_answer_id": 34634347, "answer_count": 1, "score": 0, "last_activity_date": 1452103479, "creation_date": 1452073440, "last_edit_date": 1452074139, "question_id": 34629918, "link": "https://stackoverflow.com/questions/34629918/why-cant-i-disable-stack-protection", "closed_reason": "Not suitable for this site", "title": "Why can&#39;t I disable stack protection?", "body": "<p>The OS I am currently using is 64-bit Ubuntu 14.04 with its gcc version being 4.8.4. </p>\n\n<p>I wrote a simple program as shown below to do some testings related to buffer overflow, and somehow I found that I could not overflow a local character string properly.</p>\n\n<pre><code>/*test.c*/\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint bof(char *str)\n{\n    char buffer[4];\n    strcpy(buffer, str);\n    return 1;\n}\n\nint main()\n{\n    char str[]=\"123456789012345'; \n\n    /* This is the maximum length the string\n     can be, which is 16 bytes including the null character at the end, and \n    any strings that are longer than this would result in a segmentation fault */\n\n    bof(str);\n}\n</code></pre>\n\n<p>This program was compiled with command </p>\n\n<pre><code>gcc -o test -fno-stack-protector test.c\n</code></pre>\n\n<p>so that supposedly stack protection should have been disabled. </p>\n\n<p>Based on my observation, any strings that were less than or equal to 16 characters in length (including the null character) would be okay; otherwise, it would cause a segmentation fault. </p>\n\n<p>Any thoughts why and how could I make it work? Thanks in advance!</p>\n"}, {"tags": ["c", "include", "header-files", "pragma", "include-guards"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1452076115, "post_id": 34629833, "comment_id": 57006838, "body": "A header is not a library. And C does not declare a library, but functions &amp; variables and define types."}, {"owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452076728, "post_id": 34629833, "comment_id": 57007233, "body": "@Olaf Yes. I editted it."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1452076267, "last_edit_date": 1452076267, "creation_date": 1452073633, "answer_id": 34629986, "question_id": 34629833, "link": "https://stackoverflow.com/questions/34629833/understanding-headers-and-include/34629986#34629986", "title": "Understanding headers and include", "body": "<blockquote>\n  <p>However when I include  after file.h in my .c, it still\n  works properly. Why is that so?</p>\n</blockquote>\n\n<p>Because the standard headers have include guards too. So when include it multiple either directly in your code or through another source file, it's skipped.</p>\n\n<blockquote>\n  <p>why isn't file.h definition skipped (or is it?) based on the guards,\n  since the lib is already declared.</p>\n</blockquote>\n\n<p>An include guard doesn't do any check whether any headers or included or not. It doesn't care/know what's inside.</p>\n\n<p>The preprocessor simply checks if the include guard macro <code>FILE_Ariew7OGJknw00</code> is defined or not. If defined, it's skipped. Otherwise, it's <em>pasted</em> into your soruce file where you included it.</p>\n\n<blockquote>\n  <p>Why are #include guards more widespread used than #pragma once even\n  though the latter has several advantages</p>\n</blockquote>\n\n<p>It's non-standard. So it makes your your code less portable.</p>\n\n<hr>\n\n<p>It's not recommended to include other header files in a header file needlessly. You won't see multiple inclusion issues in practice as it'll work as expected due to include guards. There may be legitimate cases where you need to include other headers. For example, if you have a header like:</p>\n\n<pre><code>/* header.h */\n\n#ifndef MY_HEADER_H\n#define MY_HEADER_H\n\n#include&lt;stdio.h&gt;\n\nstruct my_struct {\n   size_t len;\n   char *s;\n};\n\nvoid my func(void);\nvoid my_blah(int);\n\n#endif\n</code></pre>\n\n<p>Then it becomes necessary to include <code>&lt;stdio.h&gt;</code> to get <code>size_t</code> definition. If you don't then the souce file that includes this header will have to include <code>&lt;stdio.h&gt;</code>. But a header should be to work on its own without forcing the user of it to know all the dependencies.</p>\n\n<p>As a convention, a header file should only have the declarations and other header inclusions in it should be minimal.</p>\n"}, {"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 1, "last_activity_date": 1452073969, "last_edit_date": 1452073969, "creation_date": 1452073654, "answer_id": 34629995, "question_id": 34629833, "link": "https://stackoverflow.com/questions/34629833/understanding-headers-and-include/34629995#34629995", "title": "Understanding headers and include", "body": "<p>1.\nThe language standard requires that the standard headers can be included several times without a problem. It doesn't say exactly <em>how</em> that works, but include guards is of course one way.</p>\n\n<p>3.\n One problem with <code>#pragma once</code> is that it is non-standard. The standards committee does not want to define exactly how it is supposed to work on all possible file systems, for all possible operating systems. If you have several network mounts from unknown sources and some hard-linked files, it can be very hard to determine which files are the same.</p>\n\n<p>On Windows and Linux it works with all major compilers. On other systems, we don't know.</p>\n"}], "owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 34629986, "answer_count": 2, "score": 0, "last_activity_date": 1618659662, "creation_date": 1452073226, "last_edit_date": 1618659662, "question_id": 34629833, "link": "https://stackoverflow.com/questions/34629833/understanding-headers-and-include", "title": "Understanding headers and include", "body": "<p>I am trying to grasp how actually multiple definitions of include files collaborate and sometimes collide. So I have a custom header file <code>file.h</code>, where some functions are declared within an <code>#include guard</code>. Example:</p>\n<pre><code>#ifndef FILE_Ariew7OGJknw00\n#define FILE_Ariew7OGJknw00\n\n#include &lt;stdlib.h&gt;  //assume minimal\n\n//interfaces of functions\n\n#endif\n</code></pre>\n<p>Now I have several questions.</p>\n<p><strong>1.</strong> Since <code>#include &lt;stdlib.h&gt;</code> is already included in the header <code>file.h</code>, I don't need to include it in my <code>file.c</code>. Because <code>file.c</code> includes the <code>file.h</code> which includes <code>stdlib.h</code>. However when I include <code>&lt;stdlib.h&gt;</code> after <code>file.h</code> in my <code>.c</code>, it still works properly. Why is that so? Like:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &quot;file.h&quot;\n#include &lt;stdlib.h&gt; \n//code\n</code></pre>\n<p><strong>2.</strong> Also what happens if I do:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &quot;file.h&quot; \n//code\n</code></pre>\n<p>In reality <em>nothing</em> but why isn't <code>file.h</code> definition skipped (<em>or is it?</em>) based on the guards, since the library <code>stdlib</code> is <em>already</em> included.</p>\n<p>Lastly, a more general question: Why are #include guards more widespread used than <code>#pragma once</code> even though the latter has several advantages such as:</p>\n<blockquote>\n<p>\u2022 less code <br>\n\u2022 avoidance of name clashes (i.e. <code>FILE_Ariew7OGJknw00</code>)<br>\n\u2022 improvement in compilation speed</p>\n</blockquote>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 897, "user_id": 2217157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r1rLY.jpg?s=128&g=1", "display_name": "Bechir", "link": "https://stackoverflow.com/users/2217157/bechir"}, "edited": false, "score": 0, "creation_date": 1452069977, "post_id": 34628771, "comment_id": 57003039, "body": "I hope this may answer your questions: <a href=\"http://stackoverflow.com/questions/12393888/where-are-string-constants-stored-by-gcc-and-from-where-these-pointers-are-mappe\" title=\"where are string constants stored by gcc and from where these pointers are mappe\">stackoverflow.com/questions/12393888/&hellip;</a>"}, {"owner": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "reply_to_user": {"reputation": 897, "user_id": 2217157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r1rLY.jpg?s=128&g=1", "display_name": "Bechir", "link": "https://stackoverflow.com/users/2217157/bechir"}, "edited": false, "score": 0, "creation_date": 1452070485, "post_id": 34628771, "comment_id": 57003320, "body": "@Bechir I don&#39;t understand why I can Change the char*, if it is in read-only Memory. Does it reallocate it or what happens?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452072028, "post_id": 34628771, "comment_id": 57004211, "body": "<b><code>char*</code> is not a string.</b> C does not have a string type anyway. And there are good reasons a pointer is not called &quot;array&quot; and vice versa."}, {"owner": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452072086, "post_id": 34628771, "comment_id": 57004242, "body": "@Olaf  Thanks for the Explanation."}], "answers": [{"comments": [{"owner": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "edited": false, "score": 0, "creation_date": 1452070351, "post_id": 34628897, "comment_id": 57003237, "body": "So the Compiler looks for the biggest string literal known at compile-time and allocates Memory for it? Because I can do cpHelloWorld = &quot;Very Very Long Phrase&quot;; and it will Change the Content."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1452070362, "post_id": 34628897, "comment_id": 57003242, "body": "It is bad idea to modify the string in first case but is many cases it is possible. The string is in read only memory in case of embedded firmware, etc."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "edited": false, "score": 1, "creation_date": 1452070472, "post_id": 34628897, "comment_id": 57003311, "body": "@ElMac See your string is constant , that is <i>you cannot di this</i> <code>cpHelloWorld[0]=&#39;a&#39;;</code> , but _your pointer is not constant , so changing what pointer points to is valid . Therefore , <code>cpHelloWorld = &quot;Very Very Long Phrase&quot;; </code> , does not change the content of string , but it change to what pointer <code>cpHelloWorld</code> points to ."}, {"owner": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1452070593, "post_id": 34628897, "comment_id": 57003383, "body": "@ameyCU but how does the pointer know how much Memory it will Need for the string Array? If I make a bigger string than the first one, it could write into the Memory of an other stack variable."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452070706, "post_id": 34628897, "comment_id": 57003457, "body": "In the case of an <i>initialized</i> string - it counts characters and adds 1. Otherwise, you are responsible for specifying, or allocating, or reallocating."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "edited": false, "score": 1, "creation_date": 1452070734, "post_id": 34628897, "comment_id": 57003469, "body": "@ElMac In first declaration you showed , what actually happening is , a <code>char</code> array is initialized with that string literal in read only memory , and the pointer <code>cpHelloWorld</code> just points to the first element of that array . Memory is not allocated to pointer (<i>therefore , also no need to</i> <code>free</code> it)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1452070860, "post_id": 34628897, "comment_id": 57003559, "body": "That is a good point -- you can only <code>free</code> what you have allocated with <code>malloc</code> or <code>calloc</code>, etc. Some functions will also allocate storage for you. It will be plainly apparent from the <i>man page</i> for that function if that is the case. Otherwise, you do NOT <code>free</code> what you did not allocate."}, {"owner": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "edited": false, "score": 0, "creation_date": 1452070921, "post_id": 34628897, "comment_id": 57003587, "body": "I know how I can allocate the Memory, but I didn&#39;t think about the String Literals being stored in the data-part of the program. If the pointer just changes the Destination address, it is clear how it works. It does not actually Change the string, just takes an other already existing (known) string in the Memory."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1452072501, "post_id": 34628897, "comment_id": 57004517, "body": "Using <code>sizeof</code> like <code>dynobj = malloc(sizeof(*dynobj))</code> is actually a good thing, as that will always use the correct size and avoids redundancy. Nonsense is to use <code>sizeof(char)</code>, i.e. using the <code>char</code> type directly. This 1) is error-prone when changing the base-type of the pointer (this is true for any other type, too) 2) Superfluous for the reason you mentioned (<code>sizeof(char)</code> is defined by the C standard to be <code>1</code>)."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 3, "last_activity_date": 1452239975, "last_edit_date": 1452239975, "creation_date": 1452070158, "answer_id": 34628897, "question_id": 34628771, "link": "https://stackoverflow.com/questions/34628771/c-pointer-to-array-and-array-of-characters/34628897#34628897", "title": "C: Pointer-to-array and array of characters", "body": "<pre><code>char* cpHelloWorld = \"Hello World!\";\n</code></pre>\n\n<p>is a <em>String Literal</em> stored in <em>read-only</em> memory. You cannot modify the contents of this string.</p>\n\n<pre><code>char cHelloWorld[] = \"Hello World!\";\n</code></pre>\n\n<p>is an <em>array of</em> <code>char</code> initialized to <code>\"Hello World!\\0\"</code>.\n(<strong>note:</strong> where the brackets are placed)</p>\n\n<p>The amount of memory allocated at run-time by the compiler is set by the initialization <code>\"This is a pretty long ... phrase above.\";</code> The compiler will initialize the literal allowing 1 <code>char</code> for each char in the initialization string <code>+1</code> for the required <em>nul-terminating</em> character.</p>\n\n<p>Whether you use a statically declared array (e.g. <code>char my_str[ ] = \"stuff\";</code>) or you seek to dynamically allocate storage for the characters, largely depends on whether you know what, and how much, of whatever you wish to store. Obviously, if you know beforehand what the string is, using a <em>string literal</em> or an initialized <em>array of type char</em> is a simple way to go. </p>\n\n<p>However, when you do NOT know what will be stored, or how much, then declaring a <em>pointer to char</em> (e.g. <code>char *my_string;</code> and then once you have the data to store, you can allocate storage for <code>my_string</code> (e.g. <code>my_string = malloc (len * sizeof *my_string);</code> (of course <code>sizeof *my_string</code> will be <code>1</code> for character arrays, so that can be omitted) (<strong>note:</strong> parenthesis are required with <code>sizeof (explicit type)</code>, e.g. <code>sizeof (int)</code>, but are optional when used with a variable)</p>\n\n<p>Then simply <code>free</code> whatever you have allocated when the values are no longer needed.</p>\n"}, {"tags": [], "owner": {"reputation": 1376, "user_id": 1176983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a25b8d4a12f70f66fe008a1c10a682f?s=128&d=identicon&r=PG", "display_name": "Tomer", "link": "https://stackoverflow.com/users/1176983/tomer"}, "is_accepted": false, "score": 0, "last_activity_date": 1452070455, "creation_date": 1452070455, "answer_id": 34628998, "question_id": 34628771, "link": "https://stackoverflow.com/questions/34628771/c-pointer-to-array-and-array-of-characters/34628998#34628998", "title": "C: Pointer-to-array and array of characters", "body": "<p>As a matter of fact all strings known to the compiler at compile-time are allocated in the data segment of the program. The pointer itself is located on the stack.</p>\n\n<p>There is no memory allocation at run-time, so it is nothing like malloc. There are no performance drawbacks here.</p>\n"}, {"comments": [{"owner": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "edited": false, "score": 0, "creation_date": 1452070677, "post_id": 34629042, "comment_id": 57003438, "body": "So all the strings I declared are in the Read-Only-Memory because they are constants and the char* just changes the Destination address to the other string in the ROM?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "edited": false, "score": 0, "creation_date": 1452070748, "post_id": 34629042, "comment_id": 57003477, "body": "Essentially, yes.  The strings may or may not be in protected memory, but you should always treat them as if they are."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1452075462, "post_id": 34629042, "comment_id": 57006391, "body": "Even if they are not in protected memory, they might be in overlapping memory. For example, two identical string literals may share the same memory, or two string literals where one string literal is the tail end of another string literal (e.g. <code>&quot;there&quot;</code> and <code>&quot;here&quot;</code>) may share the same memory."}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 0, "last_activity_date": 1452070589, "creation_date": 1452070589, "answer_id": 34629042, "question_id": 34628771, "link": "https://stackoverflow.com/questions/34628771/c-pointer-to-array-and-array-of-characters/34629042#34629042", "title": "C: Pointer-to-array and array of characters", "body": "<p>Each of the constant \"anonymous\" strings used in these contexts exists at its fixed address.  The only dynamic part is the actual pointer assignment.  You should get the same string address each time you execute a specific pointer assignment from a specific anonymous string (each string has its own address).</p>\n"}], "owner": {"reputation": 2682, "user_id": 2632991, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f288d74aee52861accfceba53ec0bfcd?s=128&d=identicon&r=PG", "display_name": "El Mac", "link": "https://stackoverflow.com/users/2632991/el-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 34628897, "answer_count": 3, "score": 0, "last_activity_date": 1508695948, "creation_date": 1452069638, "last_edit_date": 1452070290, "question_id": 34628771, "link": "https://stackoverflow.com/questions/34628771/c-pointer-to-array-and-array-of-characters", "title": "C: Pointer-to-array and array of characters", "body": "<p>there are many similar questions regarding this Topic, but they do not answer the following question:</p>\n\n<h2>Taking a swing</h2>\n\n<p><em>I am going to take a swing, if you want go straight to the question in the next heading.</em> Please correct me if I make any wrong assumptions here.</p>\n\n<p>Lets assume, I have this string declaration</p>\n\n<pre><code>char* cpHelloWorld = \"Hello World!\";\n</code></pre>\n\n<p>I understand the Compiler will make a <code>char*</code> to an anonymous Array stored somewhere in the Memory (<em>by the way: where is it stored?</em>).</p>\n\n<p>If I have this declaration</p>\n\n<pre><code>char cHelloWorld[] = \"Hello World!\";\n</code></pre>\n\n<p>There will be no anonymous Array, as the Compiler will create the Array <code>cHelloWorld</code> right away.</p>\n\n<p>The first difference between these two variables is that I can change <code>cpHelloWorld</code>, whereas the Array <code>cHelloWorld</code> is read-only, and I would have to redeclare it if I want to Change it.</p>\n\n<h2>My question is following</h2>\n\n<pre><code>cpHelloWorld = \"This is a pretty long Phrase, compared to the Hello World phrase above.\";\n</code></pre>\n\n<p>How does my application allocate at runtime a new, bigger (anonymous) Array at runtime? Should I use this approach with the pointer, as it seems easier to use or are there any cons? On paper, I would have used malloc, if I had to work with dynamic Arrays.</p>\n\n<p>My guess is that the Compiler (or runtime Environment?) creates a new anonymous Array every time I change the Content of my Array.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 893, "user_id": 5016201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axdqP.jpg?s=128&g=1", "display_name": "aurelienC", "link": "https://stackoverflow.com/users/5016201/aurelienc"}, "edited": false, "score": 0, "creation_date": 1452069926, "post_id": 34628712, "comment_id": 57003009, "body": "You mean, you want the program to <code>printf(&quot;You entered \\n\\tpositive number::: %d ....)</code> and then quit, after the user typed &#39;q&#39; in the terminal? If its the case you have to ask for input inside of the loop, i am sure you can figure this one out."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3476799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFyva.jpg?s=128&g=1", "display_name": "bulmac", "link": "https://stackoverflow.com/users/3476799/bulmac"}, "is_accepted": false, "score": 0, "last_activity_date": 1452069955, "creation_date": 1452069955, "answer_id": 34628843, "question_id": 34628712, "link": "https://stackoverflow.com/questions/34628712/how-to-use-a-character-to-quit-a-loop-in-c-language/34628843#34628843", "title": "How to use a character to quit a loop in c Language?", "body": "<p>You should move the scanf line inside the loop.</p>\n\n<pre><code>for(i=0;num!=\"q\";i++)\n{\n  scanf(\"%d\",&amp;num);\n  ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1452070356, "last_edit_date": 1452070356, "creation_date": 1452070032, "answer_id": 34628859, "question_id": 34628712, "link": "https://stackoverflow.com/questions/34628712/how-to-use-a-character-to-quit-a-loop-in-c-language/34628859#34628859", "title": "How to use a character to quit a loop in c Language?", "body": "<pre><code>scanf(\"%d\",&amp;num);      /*     &lt;-- for initializing num before using    */\nfor(i=0;num!='q';i++)  /*     &lt;-- compare with 'q' and not with \"q\"    */\n{\n     scanf(\"%d\",&amp;num); /*     &lt;-- take input                           */\n     //your code \n}\n</code></pre>\n\n<p>Comapare with <code>'q'</code> (<em>character</em>) and not with string literal <code>\"q\"</code> which comparises of <code>'q'</code> and <code>'\\0'</code> (<strong><em>take note of single quotes</em></strong>).</p>\n\n<p>And also you need to take input inside loop , or <em>else value of</em> <code>num</code> <em>does not change in loop</em> .</p>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 5177969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ada7d97fce49402439073b2eeaf051b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Kor", "link": "https://stackoverflow.com/users/5177969/mike-kor"}, "is_accepted": false, "score": 0, "last_activity_date": 1452070058, "creation_date": 1452070058, "answer_id": 34628867, "question_id": 34628712, "link": "https://stackoverflow.com/questions/34628712/how-to-use-a-character-to-quit-a-loop-in-c-language/34628867#34628867", "title": "How to use a character to quit a loop in c Language?", "body": "<p>Try changing for to while and place scanf inside loop.</p>\n\n<pre><code>scanf(\"%d\",&amp;num);\nwhile(num!=\"q\")\n{\n    if(num&gt;0)\n    {\n        pos++;\n    }\n    if(num&lt;0)\n    {\n        neg++;\n    }\n    if(num==0)\n    {\n        zero++;\n    }\n    scanf(\"%d\",&amp;num);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1452074946, "last_edit_date": 1452074946, "creation_date": 1452071149, "answer_id": 34629207, "question_id": 34628712, "link": "https://stackoverflow.com/questions/34628712/how-to-use-a-character-to-quit-a-loop-in-c-language/34629207#34629207", "title": "How to use a character to quit a loop in c Language?", "body": "<p>First you should actually loop:</p>\n\n<pre><code>while(1) { // infinite loop\n ...\n}\n</code></pre>\n\n<p>... then scan for integers inside the loop:</p>\n\n<pre><code>while(1) { // infinite loop\n scanf(\"%d\",&amp;num)\n ...\n};\n</code></pre>\n\n<p>... then remember that, oops, the user can enter \"q\" that is <em>not</em> a number</p>\n\n<pre><code>while(1) { // infinite loop\n char input[100];\n scanf(\"%s\", input);\n if( strcmp( input, \"q\" ) == 0 ) {\n     break;\n }\n else {\n    sscanf( input, \"%d\", &amp;num); \n }\n ...\n}\n</code></pre>\n\n<p>... then add your tests</p>\n\n<pre><code>   while(1) { // infinite loop\n     char input[100];\n     scanf(\"%s\", input);\n     if( strcmp( input, \"q\" ) == 0 ) {\n         break;\n     }\n     else {\n        sscanf( input, \"%d\", &amp;num); \n     }\n\n     if(num&gt;0) {\n        pos++;\n     }\n     if(num&lt;0) {\n        neg++;\n     }\n     if(num==0) {\n        zero++;\n     }\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "is_accepted": false, "score": 0, "last_activity_date": 1452074244, "last_edit_date": 1452074244, "creation_date": 1452072887, "answer_id": 34629735, "question_id": 34628712, "link": "https://stackoverflow.com/questions/34628712/how-to-use-a-character-to-quit-a-loop-in-c-language/34629735#34629735", "title": "How to use a character to quit a loop in c Language?", "body": "<p>I would do it this way:</p>\n\n<pre><code>int fldCnt = scanf(\"%d\", &amp;num);\nwhile (fldCnt == 1)\n{\n    // your code\n    fldCnt = scanf(\"%d\", &amp;num);\n}\n</code></pre>\n\n<p>When you enter a \"q\", zero fields get converted to <code>%d</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1452073629, "creation_date": 1452073629, "answer_id": 34629985, "question_id": 34628712, "link": "https://stackoverflow.com/questions/34628712/how-to-use-a-character-to-quit-a-loop-in-c-language/34629985#34629985", "title": "How to use a character to quit a loop in c Language?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    int pos=0, neg=0, zero=0;\n    int i, ch, num;\n\n    printf(\"Input numbers.\\n\");\n    do {\n        while(1 == scanf(\"%d\", &amp;num)){//input into inside loop\n            if(num &gt; 0)\n                pos++;\n            else if(num &lt; 0)\n                neg++;\n            else //if(num==0)\n                zero++;\n        }\n        ch = getchar();//q not allow `scanf(\"%d\", &amp;num)`\n    } while(ch != 'q' &amp;&amp; ch != EOF);\n    printf(\"You entered \\n\\tpositive number:::%d times\\n\\tNegative number:::%d times\\n\\tZero:::%d times\\n\",pos,neg,zero);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5751298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e56dae6d21d2774e56585bce67028cc?s=128&d=identicon&r=PG&f=1", "display_name": "bluerebelsmoke2710", "link": "https://stackoverflow.com/users/5751298/bluerebelsmoke2710"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 800, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1452074946, "creation_date": 1452069406, "question_id": 34628712, "link": "https://stackoverflow.com/questions/34628712/how-to-use-a-character-to-quit-a-loop-in-c-language", "title": "How to use a character to quit a loop in c Language?", "body": "<p><strong>How to use q as character to  exit ?</strong>\nHow to use q as a quit to this code. It loops till it gets the ASCII values of q.\n`</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n  int pos=0,neg=0,zero=0,i=0,num;\n  printf(\"Input numbers.\");\n  scanf(\"%d\",&amp;num);\n  for(i=0;num!=\"q\";i++)\n  {\n\n      if(num&gt;0)\n      {\n          pos++;\n      }\n      if(num&lt;0)\n      {\n          neg++;\n      }\n      if(num==0)\n      {\n          zero++;\n      }\n  }\n  printf(\"You entered \\n\\tpositive number::: %d times\\nNegative number:::%d times\\nZero:::%d times\",pos,neg,zero);\n\n\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 1, "creation_date": 1452069975, "post_id": 34628628, "comment_id": 57003037, "body": "@rootkea: Please don&#39;t suggest edits where you move all <code>{</code> into a new line. If the OP prefers to put <code>{</code> on the same line and they do it consistently, then please leave the code as it is."}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1452070489, "post_id": 34628628, "comment_id": 57003326, "body": "What kind of &quot;accidents&quot; occur? Please be aware that Stack Overflow is no debugging service. You have to provide more details on what you expect and what you actually get. Also please read: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "reply_to_user": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1452070538, "post_id": 34628628, "comment_id": 57003355, "body": "@honk: Got that! Then may be I should move <code>main</code> function&#39;s <code>{</code> on the same line as <code>int main()</code> for consistency&#39;s sake."}, {"owner": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "edited": false, "score": 0, "creation_date": 1452070838, "post_id": 34628628, "comment_id": 57003545, "body": "Thank you,@rootkea,@honk.  The compiler said no error,but when i am running it,the program stopped accidently."}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "reply_to_user": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1452070911, "post_id": 34628628, "comment_id": 57003583, "body": "@rootkea: I just did that for you. But, please don&#39;t suggest edits where you just propose to move a few parentheses. Please focus on posts that need overall edits and fix as much as you can. That would help SO most. If you get &gt; 2k rep, you can also do minor edit, because then you no longer bind the time of reviewers for that."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452071322, "post_id": 34628628, "comment_id": 57003799, "body": "First of all <i>bubble sorting</i> a linked list is about the least efficient way you can sort a list of any size. That being said, there are many examples of bubble sort for arrays on this site. Where they iterate (e.g. <code>for (i = 1, i &lt; n-1....) for (j = 0; ...)</code> you will need to iterate over your list. e.g. <code>list *iter = list; while (iter-&gt;next) ... compare iter, iter-&gt;next; ... iter=iter-&gt;next;</code> for the next comparison. You can set up 2 <code>iter</code> type variables and basically recreate your bubble sort on a list that way."}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1452071784, "post_id": 34628628, "comment_id": 57004076, "body": "@eric: You have <code>malloc</code> in your code, but no <code>free</code>. So, you produce a memory leak. Please also learn how to clean up allocated memory when you no longer need it."}, {"owner": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "reply_to_user": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1452072200, "post_id": 34628628, "comment_id": 57004325, "body": "@honk:Now I freed pTail,there is no longer memory leak.but problem still exists."}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1452072544, "post_id": 34628628, "comment_id": 57004537, "body": "Voting to close as why isn&#39;t this code working."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "edited": false, "score": 0, "creation_date": 1452072710, "post_id": 34629512, "comment_id": 57004649, "body": "Thank you,@Airsource Ltd,awesome!"}, {"owner": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "edited": false, "score": 0, "creation_date": 1452073637, "post_id": 34629512, "comment_id": 57005283, "body": "Bug 1)I have solved the problem.                                                                              Bug 2)pHead is only a pointer,there is no actually data.                                  Bug 3)I will clean up my memory allocations.                                                     Thank you,@Airsource Ltd,this is the 1st time that i am trying to ask question here,and get the good answer,thank you again,i will walk around here usually."}, {"owner": {"reputation": 31206, "user_id": 18017, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PNf9N.png?s=128&g=1", "display_name": "Airsource Ltd", "link": "https://stackoverflow.com/users/18017/airsource-ltd"}, "reply_to_user": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "edited": false, "score": 0, "creation_date": 1452075655, "post_id": 34629512, "comment_id": 57006532, "body": "Bug 2), yes I see. But then pHead does not need to be a NODE... I&#39;ve modified my answer. BTW by far the simplest way to find issues is to run the code in a debugger."}], "tags": [], "owner": {"reputation": 31206, "user_id": 18017, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PNf9N.png?s=128&g=1", "display_name": "Airsource Ltd", "link": "https://stackoverflow.com/users/18017/airsource-ltd"}, "is_accepted": true, "score": 0, "last_activity_date": 1452075557, "last_edit_date": 1452075557, "creation_date": 1452072223, "answer_id": 34629512, "question_id": 34628628, "link": "https://stackoverflow.com/questions/34628628/how-do-i-bubble-sort-a-linked-list/34629512#34629512", "title": "How do I Bubble Sort a linked list?", "body": "<p>You are running off the end of your list in sortList</p>\n\n<pre><code>p=pHead-&gt;pNext;\nfor(i=0;i&lt;len-1;i++)\n{\n    for(j=0;j&lt;len-i;j++)\n    {\n        q=p-&gt;pNext;\n        ....\n        p=q;//here may be the error\n    }\n}\n</code></pre>\n\n<p>Bug 1) Your list is only <code>len</code> long but you are attempting to advance <code>p</code> to <code>p-&gt;pNext</code> far more then <code>len</code> times. </p>\n\n<p>Bug 2) pHead does not need to be a full NODE - it's just a PNODE pointer. You never use its data field. You should have pHead point to the first node in the list, and then start your iteration at pHead rather than pHead->pNext.</p>\n\n<p>Bug 3) You never clean up your memory allocations.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "edited": false, "score": 0, "creation_date": 1452073988, "post_id": 34629915, "comment_id": 57005501, "body": "Thank you,@Mayukh Sarkar,I will try!That will be more concise!"}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "reply_to_user": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "edited": false, "score": 0, "creation_date": 1452074751, "post_id": 34629915, "comment_id": 57005985, "body": "you should upvote both @Airsource and me if you find the solutions interesting."}], "tags": [], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1452076998, "last_edit_date": 1452076998, "creation_date": 1452073432, "answer_id": 34629915, "question_id": 34628628, "link": "https://stackoverflow.com/questions/34628628/how-do-i-bubble-sort-a-linked-list/34629915#34629915", "title": "How do I Bubble Sort a linked list?", "body": "<p>As @Airsource pointed out the bugs, keep in mind most of them are caused because of poor designing choice of your program. Try to do it like below &amp; you will run into less errors</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\ntypedef struct _Node{\n    int data;\n    struct _Node* next;\n}Node;\n\ntypedef struct {\n    Node* headPtr;\n    Node* tailPtr;\n    unsigned size;\n}List;\n\nstatic void create_node(List* list, int element) {\n    if (list-&gt;headPtr == NULL) {\n        // List is empty\n        list-&gt;headPtr = (Node* )malloc(sizeof(Node));\n        list-&gt;headPtr-&gt;data = element;\n        list-&gt;headPtr-&gt;next = 0;\n        list-&gt;tailPtr = list-&gt;headPtr;\n        list-&gt;size++;\n    }else{\n        // List was already populated\n        Node* temp = (Node* )malloc(sizeof(Node));\n        temp-&gt;data = element;\n        temp-&gt;next = 0;\n        list-&gt;tailPtr-&gt;next = temp;\n        list-&gt;tailPtr = temp;\n        list-&gt;size++;\n    }\n}\n\nvoid create_list(List* list, int length){\n    int ele;\n    int i;\n    list-&gt;headPtr = list-&gt;tailPtr = 0;\n    list-&gt;size = 0;\n\n    for (i = 0; i &lt; length; i++) {\n        scanf(\"%d\", &amp;ele);\n        create_node(list, ele);\n    }\n}\n\nvoid print_list(List* list){\n    Node* loop = list-&gt;headPtr;\n    while(loop){\n        printf(\"%d \", loop-&gt;data);\n        loop = loop-&gt;next;\n    }\n    printf(\"\\n\");\n}\n\n\n int main(){\n    List* list;\n    int n;\n    printf(\"Enter the length of the list: \");\n    scanf(\"%d\", &amp;n);\n    create_list(list, n);\n    print_list(list);\n    bubble_sort(list);\n    print_list(list);\n    if (cleanup(list))\n        printf(\"Memory rescued!!\\n\");\n    else\n        printf(\"OOPS!! Error\\n\");\n return 0;\n}\n</code></pre>\n\n<p>Moreover, you can get the size anytime just by <code>list-&gt;size</code>. No need for separate function to do that.</p>\n\n<p>Finally to sort it using bubble sort you could do something like this below</p>\n\n<pre><code>void bubble_sort(List* list) {\n    int i, j;\n    Node* first, *second;\n    int temp;\n    first = list-&gt;headPtr;\n    second = list-&gt;headPtr-&gt;next;\n    for (i = 0; i &lt; list-&gt;size - 1; i++) {\n        for (j = 0; j &lt; list-&gt;size - i - 1; j++) {\n            if (first-&gt;data &gt; second-&gt;data){\n                temp = first-&gt;data;\n                first-&gt;data = second-&gt;data;\n                second-&gt;data = temp;\n            }\n            first = second;\n            second = second-&gt;next;\n        }\n        first = list-&gt;headPtr;\n        second = list-&gt;headPtr-&gt;next;\n    }\n}\n</code></pre>\n\n<p>and for cleanup you do this </p>\n\n<pre><code>bool cleanup(List* list) {\n    Node* curr = list-&gt;headPtr;\n    Node* nxt = list-&gt;headPtr-&gt;next;\n    while(nxt){\n        free(curr);\n        curr = nxt;\n        nxt = curr-&gt;next;\n    }\n    list-&gt;headPtr = list-&gt;tailPtr = 0;\n    list-&gt;size = 0;\n    return !nxt ? true: false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 0, "last_activity_date": 1452089346, "last_edit_date": 1452089346, "creation_date": 1452075519, "answer_id": 34630635, "question_id": 34628628, "link": "https://stackoverflow.com/questions/34628628/how-do-i-bubble-sort-a-linked-list/34630635#34630635", "title": "How do I Bubble Sort a linked list?", "body": "<p>There are couple of bugs in your program. I will address them one by one:  </p>\n\n<ol>\n<li><p>Line 28  <code>PNODE pHead=(PNODE)malloc(sizeof(NODE));</code>\nHere you are allocating a memory and creating a node before checking if n>0 or not.  </p></li>\n<li><p>Line 36  <code>printf(\"please input the length of the LinkedList:\");</code><br>\nNow up to this point you have created a one node, <code>head</code> node which has <em>no</em> value in it (so contains garbage)  </p></li>\n</ol>\n\n<p>In effect your <code>createList()</code> creates a linked list with <code>n+1</code> nodes instead of <code>n</code> and the <code>head-&gt;value</code> contains garbage.  </p>\n\n<p>Solution:  </p>\n\n<pre><code>printf(\"please input the length of the LinkedList:\");\nscanf(\"%d\", &amp;n);\nfor(i=0; i&lt;n; i++)\n{\n    PNODE pNew = (PNODE)malloc(sizeof(NODE));\n\n    if(pNew == NULL)\n    {\n        printf(\"failed to create!\\n\");\n        exit(-1);\n    }\n\n    scanf(\"%d\", &amp;val);\n    pNew-&gt;data = val;\n    pNew-&gt;pNext = NULL;\n\n    if (!i)\n        pHead = pNew;\n    else\n        pTail-&gt;pNext = pNew;\n    pTail = pNew;      \n}\n\nreturn pHead;\n</code></pre>\n\n<ol start=\"3\">\n<li>Line 59 <code>PNODE p=pHead-&gt;pNext;</code><br>\nHere you are counting nodes starting from the second node (leaving out <code>head</code>). No wonder you will get <code>length</code> as <code>n</code> as you have created a linked list of length <code>n+1</code> in your <code>createList()</code>  </li>\n</ol>\n\n<p>Imagine what if <code>n = 0</code> and thus <code>pHead = NULL</code>?<br>\nThen this line will result in <code>SegFault</code>.  </p>\n\n<p>Solution:<br>\nchange <code>PNODE p=pHead-&gt;pNext;</code> to <code>PNODE p = pHead;</code>  </p>\n\n<ol start=\"4\">\n<li><p>Line 73 <code>p=pHead-&gt;pNext;</code><br>\nHere you will start sorting excluding the first node, <code>head</code> node.<br>\nAlso this should be inside the outter <code>for</code> and outside of the inner <code>for</code> to reset the <code>p</code> to first node for each pass.  </p></li>\n<li><p>Line 76 <code>for(j=0;j&lt;len-i;j++)</code><br>\nHere j must be less than <code>len - 1 - i</code> as in pass 1 (<code>i = 0</code>) in the worst case j will be equal to <code>len-1</code> for <code>j &lt; len-i</code>, where <code>p</code> will point to the last node of linked list and <code>q</code> will be NULL as <code>q = p -&gt; pNext</code>. Which will make <code>q-&gt;data</code> to result in <code>SegFault</code>.  </p></li>\n</ol>\n\n<p>To summarise, your sort routine is producing <code>SegFault</code> in the very first Pass and even if it didn't (by properly adjusting the loop-terminating expression in inner <code>for</code>) the outer <code>for</code> loop is contributing nothing towards the sorting except increasing the time complexity.</p>\n\n<p>Solution:  </p>\n\n<pre><code>for(i = 0; i &lt; len - 1; i++)\n{\n    p = pHead;\n    for(j = 0; j &lt; len - 1 - i; j++)\n    {\n        q = p -&gt; pNext;\n        if(p-&gt;data &gt; q-&gt;data)\n        {\n            t = p -&gt; data;\n            p -&gt; data = q -&gt; data;\n            q -&gt; data = t;\n        }\n        p = q;\n    }\n}\n</code></pre>\n\n<p>A question:<br>\nHow are you checking whether element have been sorted or not?<br>\nA <code>printList()</code> routine would have been helpful in spotting the above bugs.  </p>\n\n<p><strong>\"Always verify whether you correctly stored the input or not by explicitly printing the same before processing it!\"</strong></p>\n"}], "owner": {"reputation": 81, "user_id": 5739854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ivjsM.jpg?s=128&g=1", "display_name": "eric", "link": "https://stackoverflow.com/users/5739854/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 34629512, "answer_count": 3, "score": 0, "last_activity_date": 1452089346, "creation_date": 1452069031, "last_edit_date": 1452071409, "question_id": 34628628, "link": "https://stackoverflow.com/questions/34628628/how-do-i-bubble-sort-a-linked-list", "title": "How do I Bubble Sort a linked list?", "body": "<p>I am trying to create a linked list and sort it by Bubble Sort. I succeeded to create the linked list, but when I am trying to Bubble Sort it, some accidents occur and I do not know the problem. What is the problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//the struct of LinkedList\ntypedef struct Node\n{\n    int data;\n    struct Node * pNext;\n}NODE,*PNODE;\n\nPNODE createList();//Creat one LinkedList\nint lengthList(PNODE pHead);//get the length of LinkedList\nvoid sortList(PNODE);//bubble sort\n\nint main()\n{\n    int length;\n    PNODE pHead=NULL;\n    pHead=createList();\n    sortList(pHead);\n    return 0;\n}\n//Create LinkedList\nPNODE createList()\n{\n    int i,n;\n    int val;\n    PNODE pHead=(PNODE)malloc(sizeof(NODE));\n    if(pHead==NULL)\n    {\n        printf(\"failed to create!\\n\");\n        exit(-1);\n    }\n    pHead-&gt;pNext=NULL;\n    PNODE pTail=pHead;\n    printf(\"please input the length of the LinkedList:\");\n    scanf(\"%d\",&amp;n);\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"number %d is:\\n\",i+1);\n        scanf(\"%d\",&amp;val);\n        PNODE pNew=(PNODE)malloc(sizeof(NODE));\n        if(pNew==NULL)\n        {\n            printf(\"failed to create\\n\");\n            exit(-1);\n        }\n        pNew-&gt;data=val;\n        pTail-&gt;pNext=pNew;\n        pNew-&gt;pNext=NULL;\n        pTail=pNew;\n    }\n    return pHead;\n}\n//get the length of LinkedList\nint lengthList(PNODE pHead)\n{\n    int i=0;\n    PNODE p=pHead-&gt;pNext;\n    while(p!=NULL)\n{\n        i++;\n        p=p-&gt;pNext;\n    }\n    return i;\n}\n//bubble sort\nvoid sortList(PNODE pHead)\n{\n    int i,j,t,len;\n    PNODE p,q;\n    len=lengthList(pHead);\n    p=pHead-&gt;pNext;\n    for(i=0;i&lt;len-1;i++)\n    {\n        for(j=0;j&lt;len-i;j++)\n        {\n            q=p-&gt;pNext;\n            if( p-&gt;data &gt; q-&gt;data)\n            {\n                t=p-&gt;data;\n                p-&gt;data=q-&gt;data;\n                q-&gt;data=t;\n            }\n            p=q;//here may be the error\n        }\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "header-files"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 4, "creation_date": 1452067611, "post_id": 34628293, "comment_id": 57001815, "body": "The <i>declaration</i> (signature) of the function becomes known, so the code can be <i>compiled</i>. Once each <code>.cpp</code> file has been compiled, they get <i>linked</i> together into the final progam. This is when all the function <i>definitions</i> are matched up."}, {"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1452067680, "post_id": 34628293, "comment_id": 57001845, "body": "Please give some more explanation"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1452067771, "post_id": 34628293, "comment_id": 57001891, "body": "I emphasised the key terms to aid your research. I don&#39;t have time at this second to write up a full answer."}, {"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1452067819, "post_id": 34628293, "comment_id": 57001917, "body": "Ohh. No problem you can provide the complete details some time later :)"}, {"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "reply_to_user": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1452068361, "post_id": 34628293, "comment_id": 57002181, "body": "@enhzflep asking me the same question &quot;What did your last slave die of?&quot; :p :p"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1452069577, "post_id": 34628293, "comment_id": 57002821, "body": "@Brut3Forc3 - I wasn&#39;t trying to be unkind or offensive, as it seems someone has deemed me to be. It was an ill-considered response that aimed to address the manner in which you requested further info from BobTFish - I.e, you gave him permission to furnish a longer answer, rather than asking for more detail. Swapping &quot;you&quot; and &quot;can&quot; in addition to adding a question mark (?) at the end makes all the difference. I imagine you&#39;re far more accomplished than I at human languages, I only know one and a <i>tiny</i> part of German. Again, sorry for my poor judgement. :)"}, {"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "reply_to_user": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1452069985, "post_id": 34628293, "comment_id": 57003044, "body": "@enhzflep Oops I really didn&#39;t meant to be that harsh :( (I really didn&#39;t) . I actually said this way because BobTFish said that he didn&#39;t had much time and so had I asked him one more question(&quot;&quot;Swapping &quot;you&quot; and &quot;can&quot; in addition to adding a question mark (?) at the end &quot;&quot;) he might have got offended. That&#39;s why I said it this way. Had I the chance now, I would have surely edited my comment :D. No hard feeling man. And thanks, I&#39;ll surely take care next time."}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1452070969, "post_id": 34628293, "comment_id": 57003605, "body": "@Brut3Forc3 - No problem, I didn&#39;t (ever) think that to be your intended meaning, hence what was supposed to be a joke, along with my explanation and finally, mention of languages. All the best. :)"}], "answers": [{"comments": [{"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 0, "creation_date": 1452068587, "post_id": 34628406, "comment_id": 57002307, "body": "isn&#39;t this a very time taking process.. first compile all files then find all functions that are not defined in main.cpp file and then find definitions to those functions in all files compiled(it would take really long time if number of files are large ~100)."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 0, "creation_date": 1452068661, "post_id": 34628406, "comment_id": 57002346, "body": "@Brut3Forc3 Now, it&#39;s not - it&#39;s <i>precisely</i> what is happening during <i>every</i> linking of a program/library. <i>This is simply how linking works.</i> Although, of course, linking large binaries can take tens of seconds. But then again, compiling them usually takes tens of minutes."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1452068681, "post_id": 34628406, "comment_id": 57002356, "body": "It takes quite some time (I have not done any measurement), but still, it should be faster that lexical analysis of each source file."}, {"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 0, "creation_date": 1452068830, "post_id": 34628406, "comment_id": 57002429, "body": "Sorry I&#39;m still unable to understand how linking function definition and function declaration works. A simple explanation on the above would be appreciated :)"}, {"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 0, "creation_date": 1452069037, "post_id": 34628406, "comment_id": 57002522, "body": "Basically if I&#39;m not wrong the linker searches every file in that project to match the function definition and once it finds it, it links function declaration to definition, and starts searching for another function definition until all declarations are resolved."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 1, "creation_date": 1452071737, "post_id": 34628406, "comment_id": 57004041, "body": "@Brut3Forc3 &quot;How does C linker work&quot; is quite <a href=\"http://www.lurklurk.org/linkers/linkers.html\" rel=\"nofollow noreferrer\">googlable</a>."}], "tags": [], "owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "is_accepted": true, "score": 3, "last_activity_date": 1452068595, "last_edit_date": 1452068595, "creation_date": 1452067998, "answer_id": 34628406, "question_id": 34628293, "link": "https://stackoverflow.com/questions/34628293/how-are-function-definitions-provided-by-the-header-file/34628406#34628406", "title": "How are function definitions provided by the header file", "body": "<p>The function definition is still unknown to compiler at the time of compilation of <code>main.cpp</code> (where it becomes <code>main.obj</code> or simillar depending on the compiler/platform). It just has to know the signature of that function (its name, return value, parameters), provided by declaration in <code>headerFile.h</code>. In the compiled object file there will be written (by machine language).</p>\n\n<blockquote>\n  <p>here, the user is calling some function1, please, linker, find its address and insert it there.</p>\n</blockquote>\n\n<p>Now, when you compile <code>file1.cpp</code> into <code>file1.obj</code>, <code>file1.obj</code> will contain compiled <code>function1</code>.</p>\n\n<p>Finally, when you link these two files into executable (or library), linker will resolve all issues of calling only declared (but not defined) functions. So the quoted part will become</p>\n\n<blockquote>\n  <p>here, the user is calling the function1, and it's definition is located at 0x0123ABC.</p>\n</blockquote>\n\n<p>If you do, however, provide object files with function calls, which can't be resolved, you'll get a linker error (something like)</p>\n\n<blockquote>\n  <p>/tmp/ccwckoGI.o: In function <code>main</code>:<br>\n  /home/user/file.cpp:5: undefined reference to <code>foo()</code></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 0, "creation_date": 1452069042, "post_id": 34628516, "comment_id": 57002523, "body": "Basically if I&#39;m not wrong the linker searches every file in that project to match the function definition and once it finds it, it links function declaration to definition, and starts searching for another function definition until all declarations are resolved."}, {"owner": {"reputation": 965, "user_id": 5699814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48775c3e681f68fdeb7d02444bd7667?s=128&d=identicon&r=PG&f=1", "display_name": "Madhav Datt", "link": "https://stackoverflow.com/users/5699814/madhav-datt"}, "reply_to_user": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 1, "creation_date": 1452069244, "post_id": 34628516, "comment_id": 57002662, "body": "It links all the object files by replacing the references to undefined symbols with the correct addresses. Each of these symbols can be defined in other object files or in libraries. If they are defined in libraries other than the standard library, you need to tell the linker about them."}, {"owner": {"reputation": 965, "user_id": 5699814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48775c3e681f68fdeb7d02444bd7667?s=128&d=identicon&r=PG&f=1", "display_name": "Madhav Datt", "link": "https://stackoverflow.com/users/5699814/madhav-datt"}, "reply_to_user": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 0, "creation_date": 1452070046, "post_id": 34628516, "comment_id": 57003079, "body": "No, it doesn&#39;t do that on its own - you usually have to do it through a Makefile or your IDE, but you can also do the linking in your compilation statement."}, {"owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "edited": false, "score": 0, "creation_date": 1452070266, "post_id": 34628516, "comment_id": 57003188, "body": "I meant that during linking process, the linker searches every file to match the function declaration to the function definition and keeps searching until it finds it. Is this how it works ?"}], "tags": [], "owner": {"reputation": 965, "user_id": 5699814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48775c3e681f68fdeb7d02444bd7667?s=128&d=identicon&r=PG&f=1", "display_name": "Madhav Datt", "link": "https://stackoverflow.com/users/5699814/madhav-datt"}, "is_accepted": false, "score": 1, "last_activity_date": 1452068535, "creation_date": 1452068535, "answer_id": 34628516, "question_id": 34628293, "link": "https://stackoverflow.com/questions/34628293/how-are-function-definitions-provided-by-the-header-file/34628516#34628516", "title": "How are function definitions provided by the header file", "body": "<p>The header file - <code>headerFile.h</code> contains the declaration of the function, and must be accompanied by a source file - <code>headerFile.cpp</code>. </p>\n\n<p>Now, when you do a <code>#include \"headerFile.h\"</code> the declaration of the function becomes known and so the code can be compiled. At this point - when <code>main.cpp</code> is compiled, <code>main.obj</code> doesn't have definitions of the function. After each .cpp file has been compiled and <code>.obj</code> files are made, they get linked together, by the <code>linker</code> to give you the program.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5742975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e26b03fa489c78d2dc3639f706444031?s=128&d=identicon&r=PG&f=1", "display_name": "dingo1220", "link": "https://stackoverflow.com/users/5742975/dingo1220"}, "is_accepted": false, "score": 0, "last_activity_date": 1452069079, "creation_date": 1452069079, "answer_id": 34628639, "question_id": 34628293, "link": "https://stackoverflow.com/questions/34628293/how-are-function-definitions-provided-by-the-header-file/34628639#34628639", "title": "How are function definitions provided by the header file", "body": "<pre><code>// headerFile.h\n\n#ifndef HEADERFILE_H_\n#define HEADERFILE_H_\n\n// add extern to tell the compiler that this function definition is in other file, yes it is in file1, complied into file1.obj\nextern void function1();\n\n#endif /* HEADERFILE_H_ */\n</code></pre>\n\n<p>The linker will find function1()'s definition in the file1.obj. You should add to your build command of course.</p>\n"}], "owner": {"reputation": 674, "user_id": 5116129, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh4.googleusercontent.com/-9XVYikcoOug/AAAAAAAAAAI/AAAAAAAAACY/-XiMKaUO0Yc/photo.jpg?sz=128", "display_name": "Shivam Aggarwal", "link": "https://stackoverflow.com/users/5116129/shivam-aggarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 34628406, "answer_count": 3, "score": 0, "last_activity_date": 1452069079, "creation_date": 1452067518, "question_id": 34628293, "link": "https://stackoverflow.com/questions/34628293/how-are-function-definitions-provided-by-the-header-file", "title": "How are function definitions provided by the header file", "body": "<p>I have three files- main.cpp, file1.cpp and headerFile.h.<br><br>\n<strong>file1 is-</strong> </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nvoid function1(){\n    cout&lt;&lt;\"this is function1 from file1\"&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p><strong>headerFile.h is-</strong></p>\n\n<pre><code>#ifndef HEADERFILE_H_\n#define HEADERFILE_H_\n\nvoid function1();\n\n#endif /* HEADERFILE_H_ */\n</code></pre>\n\n<p><strong>main.cpp file is-</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n#include \"headerFile.h\"\n\nint main(){\n\nfunction1();\n\n    cout&lt;&lt;\"this is main function from mainFile\"&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>Until this stage function1() is unknown to main.cpp file.<br>\nNow people say that as the compiler encounters <code>#include \"headerFile.h\"</code> in main file it simply copies the code of headerFile.h into main file,<br> <strong>hence the main file becomes-</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\n\n#ifndef HEADERFILE_H_\n#define HEADERFILE_H_\n\nvoid function1();\n\n#endif /* HEADERFILE_H_ */\n\n\nint main(){\n\nfunction1();\n\n    cout&lt;&lt;\"this is main function from mainFile\"&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>Now, here definition of function1() is still unknown to the compiler. How is this definition resolved ? Kindly explain.</p>\n"}, {"tags": ["c", "string"], "answers": [{"tags": [], "owner": {"reputation": 773, "user_id": 3578345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Z5O5r.jpg?s=128&g=1", "display_name": "Dhruv Khatri", "link": "https://stackoverflow.com/users/3578345/dhruv-khatri"}, "is_accepted": false, "score": 0, "last_activity_date": 1452062430, "creation_date": 1452062430, "answer_id": 34627115, "question_id": 34626945, "link": "https://stackoverflow.com/questions/34626945/character-string-or-string-constant/34627115#34627115", "title": "character string or string constant", "body": "<p>string constant:\nText enclosed in double quote characters (such as \"example\" ) is a string constant. </p>\n\n<p>Character String:\nStrings are actually one-dimensional array of characters terminated by a null character '\\0'.\nSo basically the difference is character String is the object and string constant is the way to representation.</p>\n"}, {"tags": [], "owner": {"reputation": 1578, "user_id": 2693199, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/tOXez.jpg?s=128&g=1", "display_name": "Rudra", "link": "https://stackoverflow.com/users/2693199/rudra"}, "is_accepted": false, "score": 2, "last_activity_date": 1452069418, "last_edit_date": 1452069418, "creation_date": 1452063383, "answer_id": 34627336, "question_id": 34626945, "link": "https://stackoverflow.com/questions/34626945/character-string-or-string-constant/34627336#34627336", "title": "character string or string constant", "body": "<ol>\n<li>A character constant consists of a single characters enclosed within single inverted commas.</li>\n<li>A string constant may consist of any combination of digits, letters, escaped sequences and spaces, a sequence of characters enclosed in double quotes.</li>\n</ol>\n\n<p>Check out this <a href=\"http://aboutc.weebly.com/string-constants.html\" rel=\"nofollow noreferrer\">link</a> \n<a href=\"https://i.stack.imgur.com/jx1p6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jx1p6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "is_accepted": false, "score": 2, "last_activity_date": 1452068396, "creation_date": 1452068396, "answer_id": 34628496, "question_id": 34626945, "link": "https://stackoverflow.com/questions/34626945/character-string-or-string-constant/34628496#34628496", "title": "character string or string constant", "body": "<p>A <em>string constant</em> is a sequence of characters enclosed in double quotes. A <em>character string</em> is a sequence of characters ending with '\\0' stored in a character array or pointed to by a character pointer.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nchar s[4];\n\nstrcpy(s, \"foo\"); /*\"foo\" is a string constant and s contains a character string*/\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 5750904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/84mQ6.png?s=128&g=1", "display_name": "Edgar Oliveira", "link": "https://stackoverflow.com/users/5750904/edgar-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452069418, "creation_date": 1452061672, "last_edit_date": 1452064593, "question_id": 34626945, "link": "https://stackoverflow.com/questions/34626945/character-string-or-string-constant", "title": "character string or string constant", "body": "<p>I am reading the book \"The C Programming Language\" by Brian W. Kernighan and Dennis M. Ritchie. </p>\n\n<p>They talk about \"character string\" and \"string constant\". What is the difference between these concepts?</p>\n"}, {"tags": ["java", "android", "c++", "c", "android-ndk"], "comments": [{"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1452064804, "post_id": 34626536, "comment_id": 57000631, "body": "In a virtual machine, there is no guarantee where, if any where, a local variable might be.  Note; even if you find the location for cold code, it could change if the code warms up (although Android doesn&#39;t tend to do this ATM)"}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 0, "creation_date": 1452121641, "post_id": 34626536, "comment_id": 57034973, "body": "<code>int magicNumber = 0x23420023 ;</code> does not need to be allocated anywhere, the compiler can (and very probably will) elide it as a constant"}], "answers": [{"tags": [], "owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "is_accepted": true, "score": 1, "last_activity_date": 1452082625, "creation_date": 1452082625, "answer_id": 34632976, "question_id": 34626536, "link": "https://stackoverflow.com/questions/34626536/how-to-find-the-memory-address-of-a-java-local-variable-programmatically-using-a/34632976#34632976", "title": "How to find the memory address of a Java local variable programmatically using a native code?", "body": "<p>the JNI provides a mechanism for accessing the java variables in the native code, this is described here: <a href=\"http://www.math.uni-hamburg.de/doc/java/tutorial/native1.1/implementing/field.html\" rel=\"nofollow\">http://www.math.uni-hamburg.de/doc/java/tutorial/native1.1/implementing/field.html</a></p>\n\n<p>then you can use </p>\n\n<pre><code>  &amp;x; // gets the address of x\n</code></pre>\n\n<p>to get the address of your variable</p>\n\n<p>another approach is to use assembler, i.e. the following code prints the begin of the stack (by printing the address of stack pointer and base pointer)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunsigned long get_sp(){\n__asm__(\"mov %rsp, %rax \");\n}\n\nunsigned long get_bp(){\n__asm__(\"mov %rbp, %rax \");\n}\n\nint main(int argc, char **argv)\n{\nint n;\nprintf(\"SP 0x%x\\n\", get_sp());\nprintf(\"BP 0x%x\\n\", get_bp());\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 5725479, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8361fce491e67e5ffc81e252952ee7a6?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/5725479/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 2, "accepted_answer_id": 34632976, "answer_count": 1, "score": 1, "last_activity_date": 1452120779, "creation_date": 1452059731, "last_edit_date": 1495535373, "question_id": 34626536, "link": "https://stackoverflow.com/questions/34626536/how-to-find-the-memory-address-of-a-java-local-variable-programmatically-using-a", "title": "How to find the memory address of a Java local variable programmatically using a native code?", "body": "<p>Although there are similar questions (such as <a href=\"https://stackoverflow.com/questions/1961146/memory-address-of-variables-in-java\">1</a>, <a href=\"https://stackoverflow.com/questions/28928500/how-do-i-find-a-memory-address-programmatically\">2</a>, <a href=\"https://stackoverflow.com/questions/33587224/memory-address-of-global-and-local-variable\">3</a>), their answers do not solve my problem.</p>\n\n<p>I\u2019m using Android NDK with Android Studio 1.5.1 targeting Android API 18 (before Android KitKat 4.4, so I\u2019m dealing with Dalvik, not ART runtime). </p>\n\n<p>I know that a primitive Java local variable should be on the Dalvik interpreter stack but I could not find it.</p>\n\n<p>I used the following code to declare a Java local integer magic number (0x23420023) in the Java code and search for it using a native code (C code). </p>\n\n<p>I pass the process id (pid) and the thread id (tid) of the Java code to the C code, so I can search the virtual address space occupied by Java method that declared that magic number variable.</p>\n\n<p>In the C code, I get the memory regions for the Java code by reading and parsing the file /proc/pid/task/tid/maps</p>\n\n<p><strong>What is the problem?</strong></p>\n\n<p>When I scan the memory region (extracted from the file /proc/pid/task/tid/maps):</p>\n\n<p><code>ad5b1000-ad7d7000 r--p 00000000 1f:01 756        /data/dalvik-  cache/data@app@com.example.magicnumber2-1.apk@classes.dex</code></p>\n\n<p>I can find the magic number immediately but the problem is that memory region is occupied by the app object file and not the Dalvik stack. You can confirm that by un-commenting the first if-statement labeled \u201c//1-dex:\u201d and commenting out the second and third if-statments labeled \u201c//2-permission:\u201d and \u201c//3-inode\u201d between the two while-loops in the C code.</p>\n\n<p>However, when I search the other remaining memory regions (extracted from the file /proc/pid/task/tid/maps) that have read, write, and private permissions \u201crw-p\u201d (because the Dalvik stack should have a read/write/private permissions), I get a segmentation fault error.  You can confirm that by commenting out the first if-statement labeled \u201c//1-dex:\u201d and un-commenting the second and third if-statments labeled \u201c//2-permission:\u201d and \u201c//3-inode\u201d between the two while-loops in the C code.</p>\n\n<p><strong>The Java code:</strong></p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\nstatic {\n    System.loadLibrary(\"MyLibrary\");\n}\n\npublic native boolean findMagicNumber(int pid, int tid);\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    int magicNumber = 0x23420023 ;\n    int pid = android.os.Process.myPid();\n    int tid = android.os.Process.myTid();\n    findMagicNumber(pid, tid);\n    System.out.println(\"********** magicNumber = \" + magicNumber + \" PID=\" + pid + \" TID=\" + tid);\n}\n}\n</code></pre>\n\n<p><strong>The C code:</strong></p>\n\n<pre><code>#include \"com_example_magicnumber2_MainActivity.h\"\n#include &lt;jni.h&gt;\n#include &lt;android/log.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nJNIEXPORT jboolean JNICALL Java_com_example_magicnumber2_MainActivity_findMagicNumber(JNIEnv *env, jobject obj, jint pid, jint tid) {\n\n    long long startaddr, endaddr, size, offset, inode;\n    char permissions[8], device[8], filename[200], line[250];\n    char *start, *end, *candidate;\n    char filepath[100];\n\n    //pid is the process id and tid is the thread id of the Java calling method from the Java code\n    sprintf(filepath,\"/proc/%d/task/%d/maps\", pid, tid);\n    FILE* file = fopen(filepath, \"r\");\n\n    while (fgets(line, sizeof(line), file)) {\n        memset( filename, '\\0', sizeof(filename) );\n        sscanf(line,\"%llx-%llx %s %llx %s %llx %s\", &amp;startaddr, &amp;endaddr, permissions, &amp;offset, device, &amp;inode, filename);\n\n        //1-dex: examine only the memory region mapped to the app dex file\n        if ((strstr(filename,\".dex\"))==NULL) continue;\n\n        //2-permission: examine only read, write, and private memory regions\n        //if (((strstr(permissions, \"rw-p\")))==NULL) continue;\n\n        //3-inode: examine only the memory region that is not mapped to a file or device\n        //if (inode !=0) continue;\n\n        __android_log_print(ANDROID_LOG_DEBUG,\":\", \"%llx-%llx %s %llx %s %llx %s\",\n                            startaddr, endaddr, permissions, offset, device, inode, filename);\n        start = startaddr;\n        end = endaddr;\n        candidate = memchr( start, 0x14, (end-start));\n        while( candidate !=0){\n            if ((candidate[2]== 0x23) &amp;&amp;\n                (candidate[3] == 0x00) &amp;&amp;\n                (candidate[4] == 0x42) &amp;&amp;\n                (candidate[5] == 0x23)){\n                __android_log_print(ANDROID_LOG_DEBUG,\"@@@@@@@@@@\",\"The magic number is found at %p\", candidate);\n                break;\n            }\n            else\n                candidate = memchr(candidate+1, 0x14, (end-candidate));\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "select", "networking", "ncurses"], "comments": [{"owner": {"reputation": 3565, "user_id": 4932070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FShfu.png?s=128&g=1", "display_name": "A J", "link": "https://stackoverflow.com/users/4932070/a-j"}, "edited": false, "score": 1, "creation_date": 1452059855, "post_id": 34626439, "comment_id": 56998706, "body": "Please paste your code here."}, {"owner": {"reputation": 1584, "user_id": 5319663, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HRBQ5.jpg?s=128&g=1", "display_name": "Jeya Suriya Muthumari", "link": "https://stackoverflow.com/users/5319663/jeya-suriya-muthumari"}, "edited": false, "score": 0, "creation_date": 1452060590, "post_id": 34626439, "comment_id": 56998977, "body": "&quot; I tried everything possible ..  &quot; -- Please state here what are those possibilities."}, {"owner": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "edited": false, "score": 0, "creation_date": 1452061117, "post_id": 34626439, "comment_id": 56999185, "body": "I will paste the code later here as I am not able to do so now. By everything I meant forcing echo(), printing character by character in winput as I read them with waddch(), forks, threads .. I can&#39;t remember them all cause this issue ate 7 hours of my life."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1452061839, "post_id": 34626439, "comment_id": 56999449, "body": "The pastebin code seems to be a snippet out of a larger file.  Amongst other things, what header files are being #include&#39;d? how is the posted code being called."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1452067755, "post_id": 34626439, "comment_id": 57001886, "body": "There seems to be no way for the &#39;remote&#39; user to gracefully exit the program.   When the local user exits the program, the local users&#39; text input is broadcast rather than something like: &#39;&lt;user-name&gt; waved goodby as they exited the room`"}, {"owner": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "edited": false, "score": 0, "creation_date": 1452078956, "post_id": 34626439, "comment_id": 57008620, "body": "This is for a school project that I have to finish ASAP. Don&#39;t you think that what you said are my LAST problems ? Really. I&#39;ve just asked for a solution about the blocking issue..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "edited": false, "score": 0, "creation_date": 1452078370, "post_id": 34627909, "comment_id": 57008251, "body": "I don&#39;t understand what you mean by &quot;modifying&quot; the while(true) loop. Don&#39;t I already have that in the second if ?  I modified what you said but I still don&#39;t get it how to fix my code..."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "edited": false, "score": 0, "creation_date": 1452098139, "post_id": 34627909, "comment_id": 57021341, "body": "when reading from stdin, only input one char (not all the available characters) before returned to the top of the <code>while()</code> loop.   The only time to do anything else in the handling of stdin is when a &#39;\\n&#39; is input.  Then, and only then, process the whole input string, including the check for <code>&#47;quitchat</code> and calling safePrefWrite() then the I/O to the remote user will not be frozen while waiting for the local user to finish inputting the next line to transmit to the remote user."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1452067355, "last_edit_date": 1452067355, "creation_date": 1452065901, "answer_id": 34627909, "question_id": 34626439, "link": "https://stackoverflow.com/questions/34626439/ncurses-chat-misbehaving-blocking-in-select/34627909#34627909", "title": "NCurses chat misbehaving, blocking in select", "body": "<p>modify the <code>while(true)</code> loop to only handle one char at a time for the stdin. </p>\n\n<p>Which mostly means for stdin, read a single char:</p>\n\n<p>if char is '\\n' then handle as currently,  </p>\n\n<p>otherwise, just append char to the buffer to write.</p>\n\n<p>Always, before appending a char to buffer to write, check that buffer is not full.</p>\n\n<p>add code to handle the case where the buffer to write is full</p>\n\n<p>end the function with this sequence:</p>\n\n<pre><code>delwin(winput);\ndelwin(woutput);\nendwin();\nendwin();\n</code></pre>\n\n<p>to end both windows.</p>\n\n<p>Do not call endwin() during processing of the socket input.</p>\n\n<p>Do not call endwin() when <code>select()</code> returns an error condition</p>\n\n<p>the <code>fd_set</code> is not an intrinsic size in C, so use <code>memcpy()</code> to set \n <code>read_fds</code> from <code>all</code>. suggest:</p>\n\n<pre><code>memcpy( &amp;read_fds, &amp;all, sizeof read_fds );\n</code></pre>\n\n<p>the parameter: <code>currentUser</code> is not used, suggest inserting the line:</p>\n\n<pre><code> (void)currentUser;\n</code></pre>\n\n<p>to eliminate a compiler warning message.</p>\n\n<p>for readability, and ease of understandability, suggest #define the magic numbers 513 and 33 with meaningful names, then use those meaningful names throughout the code.</p>\n\n<pre><code>#define MAX_BUF_LEN (513)\n#define MAX_USER_LEN (33)  \n</code></pre>\n\n<p>this line: <code>outMesg[i] = a;</code> raises a compiler warning, suggest:</p>\n\n<pre><code>outMesg[i] = (char)a;\n</code></pre>\n\n<p>This line: <code>while ( (a = wgetch(winput)) != '\\n')</code> can allow the buffer outMesg[] to be overrun, resulting in undefined behaviour and can lead to a seg fault event.  suggest:</p>\n\n<pre><code>while ( i &lt; MAX_BUF_LEN &amp;&amp; (a = wgetch(winput)) != '\\n')\n</code></pre>\n\n<p>Suggest posting the prototypes for the safePrefWrite() and safePrefRead() functions, similar to:</p>\n\n<pre><code>void safePrefRead( int, char * );\nvoid safePrefWrite( int, char * );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "edited": false, "score": 0, "creation_date": 1452078521, "post_id": 34631248, "comment_id": 57008354, "body": "Doesn&#39;t cbreak() make my select() set the stdin as soon as the first letter is typed ? I mean, what is the point ? I also tried nodelay() but I didn&#39;t see any improvement.  What are my options to make this work the right way ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1452098800, "post_id": 34631248, "comment_id": 57021755, "body": "the posted code is using wgetch() for each input char.  The char will already be available due to the <code>select()</code> statement, so no need to &#39;timeout&#39; any of the wgetch() function as it will never be waiting.   If the input is run in <code>raw</code> mode then each key stroke will be immediately available; however, then the program will need to handle all the non printable keystrokes.  This will greatly complicate the code logic. but may be worthwhile to enable faster response to input from the remote user.  And that faster response is exactly what my answer addresses (along with several other problems."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1452099303, "post_id": 34631248, "comment_id": 57022110, "body": "I have used <code>select()</code> with ncurses in several projects,  it works very well.  If using &#39;cooked&#39; input mode, then <code>select()</code> will not be triggered by the local user entering keystrokes (however those keystrokes will be echo&#39;d and can be edited by <code>backspace</code>, etc.) Only when the local user enters a &#39;\\n&#39; or EOF will the <code>select()</code> be &#39;triggered&#39;.  Do not call wgetch() unless the <code>select()</code> has already indicated a char is available to input"}, {"owner": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "edited": false, "score": 0, "creation_date": 1452110315, "post_id": 34631248, "comment_id": 57029082, "body": "Can you give me a sample code for this ?Because as much as I&#39;m thinking for this solution, I can&#39;t get it right."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1452077375, "creation_date": 1452077375, "answer_id": 34631248, "question_id": 34626439, "link": "https://stackoverflow.com/questions/34626439/ncurses-chat-misbehaving-blocking-in-select/34631248#34631248", "title": "NCurses chat misbehaving, blocking in select", "body": "<p>As noted by @user3629249, there are several criticisms which can be applied to the sample code.  However, OP's question is not addressed by those improvements.</p>\n\n<p>OP seems to have overlooked these functions:</p>\n\n<ul>\n<li><a href=\"http://invisible-island.net/ncurses/man/curs_inopts.3x.html#h3-cbreak\" rel=\"nofollow\"><code>cbreak</code></a> or <a href=\"http://invisible-island.net/ncurses/man/curs_inopts.3x.html#h3-raw_noraw\" rel=\"nofollow\"><code>raw</code></a>, to make <code>wgetch</code> read unbuffered data, i.e., not waiting for <code>'\\n'</code>.</li>\n<li><a href=\"http://invisible-island.net/ncurses/man/curs_inopts.3x.html#h3-nodelay\" rel=\"nofollow\"><code>nodelay</code></a> or <a href=\"http://invisible-island.net/ncurses/man/curs_inopts.3x.html#h3-timeout_wtimeout\" rel=\"nofollow\"><code>timeout</code></a>, to control the amount of time <code>wgetch</code> spends waiting for input.</li>\n</ul>\n\n<p>By the way, making <code>select</code> work with a curses program will make assumptions about the curses library internal behavior: getting that to work reliably can be troublesome.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "is_accepted": false, "score": 0, "last_activity_date": 1452138678, "creation_date": 1452138678, "answer_id": 34647070, "question_id": 34626439, "link": "https://stackoverflow.com/questions/34626439/ncurses-chat-misbehaving-blocking-in-select/34647070#34647070", "title": "NCurses chat misbehaving, blocking in select", "body": "<p>Fixed it finally by using only the big loop.</p>\n\n<p>Here is the code if anyone has the same problem in the future :</p>\n\n<pre><code>if (FD_ISSET(0, &amp;read_fds))\n    {\n\n\n        inChar = wgetch(winput);\n\n        if (inChar == 27)\n        {\n            safePrefWrite(sC, \"/quit\");\n            break;\n        }\n\n        if (inChar == KEY_UP || inChar == KEY_DOWN || inChar == KEY_LEFT || inChar == KEY_RIGHT)\n            continue;\n\n        if (inChar == KEY_BACKSPACE || inChar == KEY_DC || inChar == 127)\n        {\n            wdelch(winput);\n            wrefresh(winput);\n            if (i != 0)\n            {\n                outMesg[i - 1] = 0;\n                i--;\n            }\n        }\n        else\n        {\n            outMesg[i] = (char)inChar;\n            i++;\n        }\n\n\n        if (outMesg[i - 1] == '\\n')\n        {\n            outMesg[i - 1] = 0;\n            i = 0;\n\n            if (outMesg[0] == 0)\n                continue;\n\n            if (strcmp(outMesg, \"/quit\") == 0)\n            {\n                safePrefWrite(sC, outMesg);\n                break;\n            }\n\n            safePrefWrite(sC, outMesg);\n            delwin(winput);\n            winput = newwin(1, wincols, winrows - 1, 0);\n            keypad(winput, true);\n            wrefresh(winput);\n            memset(outMesg, 0, 513);\n        }\n    }\n</code></pre>\n\n<p>I also use raw() to disable signals and to treat the codes how I want.\nAnything else above and below this \"if\" is just like in the 1st post.</p>\n"}], "owner": {"reputation": 1, "user_id": 5748511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTcSe.jpg?s=128&g=1", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/5748511/xskyripper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452138678, "creation_date": 1452059214, "last_edit_date": 1452078279, "question_id": 34626439, "link": "https://stackoverflow.com/questions/34626439/ncurses-chat-misbehaving-blocking-in-select", "title": "NCurses chat misbehaving, blocking in select", "body": "<p>I wrote a C application for a socialization network and also a simple room-based chat. I used ncurses, sockets and basic networking stuff.</p>\n\n<p>The problem is that my function uses select() to read from server socket AND stdin so when I start to write a message, the output window freezes and only shows messages from other clients after I hit enter.</p>\n\n<p>I tried everything possible .. Is there a way to fix this ?</p>\n\n<p>I also tried to force nocbreak().It works okay but if I do that, when I write the message, the echoing is disabled and nothing shows up in the input window as I type, even though the message is there but like \"invisible\".</p>\n\n<p>Here is the code : </p>\n\n<pre><code>ssize_t safePrefRead(int sock, void *buffer)\n{\n    size_t length = strlen(buffer);\n\n    ssize_t nbytesR = read(sock, &amp;length, sizeof(size_t));\n    if (nbytesR == -1)\n    {\n        perror(\"read() error for length ! Exiting !\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    nbytesR = read(sock, buffer, length);\n    if (nbytesR == -1)\n    {\n        perror(\"read() error for data ! Exiting !\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    return nbytesR;\n}\n\nssize_t safePrefWrite(int sock, const void *buffer)\n{\n    size_t length = strlen(buffer);\n\n    ssize_t nbytesW = write(sock, &amp;length, sizeof(size_t));\n    if (nbytesW == -1)\n    {\n        perror(\"write() error for length ! Exiting !\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    nbytesW = write(sock, buffer, length);\n    if (nbytesW == -1)\n    {\n        perror(\"write() error for data ! Exiting !\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    return nbytesW;\n}\n\nvoid activeChat(int sC, const char *currentUser, const char *room)\n{\n    char inMesg[513], outMesg[513];\n    char user[33];\n\n\n    int winrows, wincols;\n    WINDOW *winput, *woutput;\n\n    initscr();\n    nocbreak();\n    getmaxyx(stdscr, winrows, wincols);\n    winput = newwin(1, wincols, winrows - 1, 0);\n    woutput = newwin(winrows - 1, wincols, 0, 0);\n    keypad(winput, true);\n    scrollok(woutput, true);\n    wrefresh(woutput);\n    wrefresh(winput);\n\n\n\n    fd_set all;\n    fd_set read_fds;\n    FD_ZERO(&amp;all);\n    FD_ZERO(&amp;read_fds);\n    FD_SET(0, &amp;all);\n    FD_SET(sC, &amp;all);\n\n    wprintw(woutput, \"Welcome to room '%s' \\n Use /quitChat to exit !\\n!\", room);\n    wrefresh(woutput);\n\n    while (true)\n    {\n        memcpy( &amp;read_fds, &amp;all, sizeof read_fds );\n        if (select(sC + 1, &amp;read_fds, NULL, NULL, NULL) == -1)\n        {\n            perror(\"select() error or forced exit !\\n\");\n            break;\n        }\n\n        if (FD_ISSET(sC, &amp;read_fds))\n        {\n            memset(inMesg, 0, 513);\n            safePrefRead(sC, user);\n            safePrefRead(sC, inMesg);\n            wprintw(woutput, \"%s : %s\\n\", user, inMesg);\n            wrefresh(woutput);\n            wrefresh(winput);\n        }\n\n        if (FD_ISSET(0, &amp;read_fds))\n        {\n\n            //wgetnstr(winput, \"%s\", outMesg);\n\n            int a, i = 0;\n\n            while ( i &lt; MAX_BUF_LEN &amp;&amp; (a = wgetch(winput)) != '\\n')\n            {\n                outMesg[i] = (char)a;\n                i++;\n            }\n            outMesg[i] = 0;\n\n\n            if (outMesg[0] == 0)\n                continue;\n            if (strcmp(outMesg, \"/quitChat\") == 0)\n            {\n                safePrefWrite(sC, outMesg);\n                break;\n            }\n            safePrefWrite(sC, outMesg);\n            delwin(winput);\n            winput = newwin(1, wincols, winrows - 1, 0);\n            keypad(winput, true);\n            wrefresh(winput);\n        }\n    }\n\n    delwin(winput);\n    delwin(woutput);\n    endwin();\n}\n</code></pre>\n\n<p>-safePrefWrite and safePrefRead are wrappers for prexied read / write and error treating\n-sC is the server socket.</p>\n\n<p>LE: I tried using fork and threads. Using fork was behaving the same and threads were a disaster, the terminal was messed up.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c", "macos"], "comments": [{"owner": {"reputation": 2058, "user_id": 1154316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c10daf4440c356c23e8f65414376b9?s=128&d=identicon&r=PG", "display_name": "tillz", "link": "https://stackoverflow.com/users/1154316/tillz"}, "edited": false, "score": 0, "creation_date": 1452073961, "post_id": 34626142, "comment_id": 57005489, "body": "Are you sure <code>task_for_pid()</code> is the reason for EXC_BAD_ACCESS? Probably the return value is negative (If it returns a permission error, there are other resources for this problem!) and therefore leads to an invalid access in the following code? Also, while this <i>should</i> not be the reason, did you try disabling SIP?"}], "answers": [{"comments": [{"owner": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "edited": false, "score": 0, "creation_date": 1452093558, "post_id": 34636134, "comment_id": 57018187, "body": "Would this be an issue if I&#39;m trying to read the memory of a third party process?"}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "edited": false, "score": 0, "creation_date": 1452093707, "post_id": 34636134, "comment_id": 57018283, "body": "No, it won&#39;t as the 3rd party process can&#39;t have a certificate with the rootless entitlement. If this is still causing an issue, ensure that the process calling task_for_pid is running as root."}, {"owner": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "edited": false, "score": 0, "creation_date": 1452093800, "post_id": 34636134, "comment_id": 57018347, "body": "Hmm. The process that I&#39;m using is running as root (without root I get a seg fault). Which is a bit curious, because the seg fault seems to originating from the <code>task_for_pid()</code> line, even though (from my understanding) the function doesn&#39;t actually access memory (which would be <code>vm_read()</code>)."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "edited": false, "score": 0, "creation_date": 1452094048, "post_id": 34636134, "comment_id": 57018535, "body": "Are you handling the return from calling task_for_pid, or still calling vm_read even if it fails? Perhaps updating your question with a code example would be beneficial."}], "tags": [], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "is_accepted": false, "score": 1, "last_activity_date": 1452092525, "last_edit_date": 1492087507, "creation_date": 1452092197, "answer_id": 34636134, "question_id": 34626142, "link": "https://stackoverflow.com/questions/34626142/exc-bad-access-from-task-for-pid/34636134#34636134", "title": "EXC_BAD_ACCESS from task_for_pid()", "body": "<p>Before El Capitan (10.11), in order to call <code>task_for_pid</code>, the calling process must either be root, or a member of the procmod group, else the function will fail.</p>\n\n<p>Since El Capitan's introduction of System Integrity Protection (SIP - aka rootless), calling task_for_pid is no longer possible for processes that are marked as part of SIP, which mostly are processes that are part of the operating system or provided by Apple.</p>\n\n<p>In order to call task_for_pid under El Capitan, the calling process must be signed witha special entitlement in its certificate, which is currently only available to Apple and not to developers.</p>\n\n<p>You can <a href=\"https://apple.stackexchange.com/questions/208478/how-do-i-disable-system-integrity-protection-sip-aka-rootless-on-os-x-10-11\">turn off SIP</a> by booting into Recovery Mode, but this is not recommended for production code, as it disables multiple security systems, such as protection from running unsigned kernel extensions and modifying system files.</p>\n"}], "owner": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "closed_date": 1452105587, "answer_count": 1, "score": 0, "last_activity_date": 1452092525, "creation_date": 1452057679, "question_id": 34626142, "link": "https://stackoverflow.com/questions/34626142/exc-bad-access-from-task-for-pid", "closed_reason": "Not suitable for this site", "title": "EXC_BAD_ACCESS from task_for_pid()", "body": "<p>I'm trying to use <code>task_for_pid()</code> for the ultimate goal of reading another (non-system) process' memory through <code>vm_read()</code>.  However, whenever I run my code as root, I get an <code>EXC_BAD_ACCESS</code> error flag whenever <code>task_for_pid()</code> is executed.  Is there a newer alternative for OSX that I'm overlooking?</p>\n"}, {"tags": ["c", "net-snmp", "snmptrapd"], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "edited": false, "score": 0, "creation_date": 1452056850, "post_id": 34625963, "comment_id": 56997695, "body": "I am  already using the net-snmp headers inside my code to send traps. I am just clueless on how to start a trap listener from inside the code. Can you point me to some sample code  which has snmp trap listener using the net-snmp lib?"}, {"owner": {"reputation": 15, "user_id": 4247846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nHDdC9_lrwo/AAAAAAAAAAI/AAAAAAAABMo/huWn4tWM8ro/photo.jpg?sz=128", "display_name": "Santhosh Nagasanthosh", "link": "https://stackoverflow.com/users/4247846/santhosh-nagasanthosh"}, "reply_to_user": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "edited": false, "score": 0, "creation_date": 1452058380, "post_id": 34625963, "comment_id": 56998173, "body": "There is not enough documentation. But, here&#39;s a reference  link to <a href=\"http://fossies.org/linux/net-snmp/apps/snmptrapd.c\" rel=\"nofollow noreferrer\">snmptrapd</a>"}], "tags": [], "owner": {"reputation": 15, "user_id": 4247846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nHDdC9_lrwo/AAAAAAAAAAI/AAAAAAAABMo/huWn4tWM8ro/photo.jpg?sz=128", "display_name": "Santhosh Nagasanthosh", "link": "https://stackoverflow.com/users/4247846/santhosh-nagasanthosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1452056585, "creation_date": 1452056585, "answer_id": 34625963, "question_id": 34625864, "link": "https://stackoverflow.com/questions/34625864/receiving-snmptraps-in-a-c-program/34625963#34625963", "title": "Receiving snmptraps in a C program", "body": "<p>One of the best library is to use <a href=\"http://www.net-snmp.org/\" rel=\"nofollow\">net-snmp</a>. It supports both C and C++ linkages. </p>\n"}], "owner": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 389, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454085346, "creation_date": 1452056025, "last_edit_date": 1454085346, "question_id": 34625864, "link": "https://stackoverflow.com/questions/34625864/receiving-snmptraps-in-a-c-program", "title": "Receiving snmptraps in a C program", "body": "<p>I want to write a C program which receives snmptraps sent from another machine and parses them.\nI am able to do this from the  command line, but have no idea on how to implement this in C.</p>\n\n<p>I searched online and found most code was in ruby or the atleast C++ which had a traplistener class.</p>\n\n<p>Is there any way to receive snmptraps from within a C program ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1452055448, "post_id": 34625725, "comment_id": 56997285, "body": "Well you already have a memory corruption problem here.  Your &quot;buffer&quot; is a single character.  Even if only a single character is entered, it will write a terminating null byte past the end of it, i.e. to the following location on the stack."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1452058236, "post_id": 34625725, "comment_id": 56998130, "body": "The best solution might be writing your own scanf function."}], "answers": [{"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1452085292, "post_id": 34625900, "comment_id": 57012478, "body": "You really shouldn&#39;t stick to some <code>scanf()</code> workaround. Use <code>fgets()</code> and be safe."}], "tags": [], "owner": {"reputation": 636, "user_id": 5593397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d90813af2d5aba390dd748d4bed83d6?s=128&d=identicon&r=PG&f=1", "display_name": "marian0", "link": "https://stackoverflow.com/users/5593397/marian0"}, "is_accepted": false, "score": 2, "last_activity_date": 1452085021, "last_edit_date": 1495542197, "creation_date": 1452056226, "answer_id": 34625900, "question_id": 34625725, "link": "https://stackoverflow.com/questions/34625725/how-to-prevent-non-numeric-or-non-character-input-or-symbols-and-getting-desired/34625900#34625900", "title": "How to prevent non numeric or non character input or symbols and getting desired output in C", "body": "<p>If you want to avoid this kind of behavior you should read the entire line for each user option and validate it completely. </p>\n\n<p>To read the entire line you can use <code>scanf(\" %[^\\n]\",str)</code>(*) instead of using <code>%d</code> or <code>%s</code>. Then you can validate user input to check if its exactly what you wanted.</p>\n\n<p><strong>Extra:</strong>\nTo validate age you can use: <code>strtol</code> as explained <a href=\"https://stackoverflow.com/questions/9753346/determine-if-a-c-string-is-a-valid-int-in-c\">here</a>, and to validate gender I think a simple string comparison will do the trick.</p>\n\n<p>(*) There are several options available to read an entire line in C (fgets for example), and there are also reasons not to use <code>scanf(\" %[^\\n]\",str)</code> (possible buffer overflows) but I tried to show you a solution with the function that you were using, for a nice discussion about this topic take a look at <a href=\"https://stackoverflow.com/questions/17294809/reading-a-line-using-scanf-not-good\">this post</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1452059773, "creation_date": 1452059773, "answer_id": 34626542, "question_id": 34625725, "link": "https://stackoverflow.com/questions/34625725/how-to-prevent-non-numeric-or-non-character-input-or-symbols-and-getting-desired/34626542#34626542", "title": "How to prevent non numeric or non character input or symbols and getting desired output in C", "body": "<p>The issue you are dealing with has to do with characters that remain in the <em>input buffer</em> (<code>stdin</code>) after you read input with <code>scanf</code>. When you read <code>age</code>, the conversion reads digits from <code>stdin</code> up to the number of bytes that make up and <code>int</code>. Any additional characters following your <code>int</code> remain in the input buffer. (e.g. <code>18a</code>, <code>scanf</code> reads <code>18</code> and <code>a</code> is left in the input buffer after the following:).</p>\n\n<pre><code>int c, age;\n\nif (scanf (\" %d\", &amp;age) != 1) {\n    printf (\"invalid age input - conversion failed.\\n\");\n    return 1;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> you can also perform the same additional character check using <code>strtol</code> for the conversion and checking <code>endptr</code> after your call)</p>\n\n<p>The <code>'a'</code> left in your input buffer is then taken as input by your <em>gender</em> test. (since it is already in the input buffer, it is automatically read by <code>scanf</code> following the prompt for <em>gender</em>) To check whether all input has been consumed, you can simply check whether the character that remains in the input buffer is <code>'\\n'</code> (the result of the user pressing <kbd>Enter</kbd>). If the next character in the input buffer is not <code>'\\n'</code>, then additional characters were entered following <code>age</code>.</p>\n\n<pre><code>if ((c = getchar()) != '\\n') {\n    printf (\"invalid input - additional characters.\\n\");\n    return 1;\n}\n</code></pre>\n\n<p>You can then impose your age restriction after you check for the remaining characters:</p>\n\n<pre><code>if (age &lt; 18)  {\n    printf (\"Nothing to see here!\\n\\n\");\n    return 1;\n}\n</code></pre>\n\n<p>A short example for your <code>age</code> test could be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    int c, age;\n\n    if (scanf (\" %d\", &amp;age) != 1) {\n        printf (\"invalid age input - conversion failed.\\n\");\n        return 1;\n    }\n    if ((c = getchar()) != '\\n') {\n        printf (\"invalid input - additional characters.\\n\");\n        return 1;\n    }\n\n    if (age &lt; 18)  {\n        printf (\"Nothing to see here!\\n\\n\");\n        return 1;\n    }\n\n    printf (\"\\n age: %d\\n\\n\", age);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>$ ./bin/age\n18\n\n age: 18\n\n$ ./bin/age\n17\nNothing to see here!\n\n$ ./bin/age\n18a\ninvalid input - additional characters.\n\n$ ./bin/age\naa\ninvalid age input - conversion failed.\n</code></pre>\n\n<p>Look it over and let me know if you have any questions.</p>\n"}], "owner": {"reputation": 1, "user_id": 5562584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e85ac9df99a306a23bc437934573f1?s=128&d=identicon&r=PG&f=1", "display_name": "shovon", "link": "https://stackoverflow.com/users/5562584/shovon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452189442, "creation_date": 1452055058, "last_edit_date": 1452189442, "question_id": 34625725, "link": "https://stackoverflow.com/questions/34625725/how-to-prevent-non-numeric-or-non-character-input-or-symbols-and-getting-desired", "title": "How to prevent non numeric or non character input or symbols and getting desired output in C", "body": "<p>Here's a source code I modified from a youtube tutorial. The purpose of the program is: </p>\n\n<p>it ask your age. If you put 18 or more it ask your gender than print  that you can enter dude or m'lady(depends on your gender). If you put your age less than 18 it prints \"Nothing to see here!\"  </p>\n\n<p>I want to make sure that if the input isn't exactly what I ask(only number or only character) it shows \"Invalid input\". In my program, the first part where the program ask for age, when the input for age is either alphabet or symbol it shows invalid input. But whenever I combine alphabet with number like 18a or 18/ it shows:</p>\n\n<p>\"Please enter you gender.(m/f)\"\n\"Invalid input.\"</p>\n\n<p>also, if I input 18 or more and go to the part where the program ask about gender(m/f) it shows Invalid input if I put number or symbol.. But when I combine like m1 or m/ it shows:</p>\n\n<p>\"You may enter this website dude.\"</p>\n\n<p>Can anyone help me about how can I remove this problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;conio.h&gt;\n\nint main(void)  {\n\n   char gender; \n   int age=0;\n\n   printf(\"Please enter your age. \\n\");\n\n   if(scanf(\" %d\",&amp;age)!=1)  {\n      printf(\"invalid input. \\n\");\n      return 0;\n   }\n\n   if(age&gt;=18)  {\n\n      printf(\"Please enter your gender.(m/f) \\n\");\n\n      if(scanf(\" %s\", &amp;gender) !=1)  {\n         printf(\"Invalid input.\\n\");\n\n         return 0;\n      }\n\n      else if(gender== 'm')  {\n         printf(\"You may enter this website dude.\\n\");\n      }\n\n      else if(gender== 'f')  {\n         printf(\"You may enter this website m'lady.\\n\");\n      }\n\n      else  {\n         printf(\"Invalid input. \\n\");\n         return 0;\n      }\n   }\n\n   else if(age&lt;18)  {\n      printf(\"Nothing to see here! \\n\\n\");\n      return 0;\n   }\n\n      return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "cmake"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 1, "creation_date": 1452067937, "post_id": 34625627, "comment_id": 57001968, "body": "Why do you set CXX flags? These are for C++, not C. And you have not defined the language for your project, should be <code>enable_language(C)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1381, "user_id": 5337834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/44deb1355d80f62fd7b32a58510f1347?s=128&d=identicon&r=PG&f=1", "display_name": "John Strood", "link": "https://stackoverflow.com/users/5337834/john-strood"}, "edited": false, "score": 5, "creation_date": 1469557436, "post_id": 34628342, "comment_id": 64582365, "body": "It&#39;s surprising this isn&#39;t needed for Cygwin on Windows. But sadly is required on *nix."}, {"owner": {"reputation": 16382, "user_id": 254477, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a5f7ff911c368f70c10417b8de5c8c2c?s=128&d=identicon&r=PG", "display_name": "Sled", "link": "https://stackoverflow.com/users/254477/sled"}, "edited": false, "score": 2, "creation_date": 1547753446, "post_id": 34628342, "comment_id": 95310372, "body": "Can you write out the full correct answer? Is <code>m</code> a placeholder? or is it just common knowledge that <code>math.c</code> is in a library called <code>m</code>? Or is it declared in a way that I don&#39;t fathom in the script above?"}, {"owner": {"reputation": 16382, "user_id": 254477, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a5f7ff911c368f70c10417b8de5c8c2c?s=128&d=identicon&r=PG", "display_name": "Sled", "link": "https://stackoverflow.com/users/254477/sled"}, "edited": false, "score": 1, "creation_date": 1547824721, "post_id": 34628342, "comment_id": 95337630, "body": "Awesome, I get it now. I linked to a question that I had asked earlier about how &quot;libm&quot; becomes just &quot;m&quot; just for completeness."}, {"owner": {"reputation": 3076, "user_id": 2631470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3109e3bc44b885b83ca49bc39e591153?s=128&d=identicon&r=PG", "display_name": "Wouter Beek", "link": "https://stackoverflow.com/users/2631470/wouter-beek"}, "edited": false, "score": 2, "creation_date": 1562411643, "post_id": 34628342, "comment_id": 100370131, "body": "With MSVC this results in the following build error: <code>[CMake] LINK : fatal error LNK1104: cannot open file &#39;m.lib&#39;</code>"}, {"owner": {"reputation": 790, "user_id": 2513149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35afd7b9f89a411fca20f8a38fa050a?s=128&d=identicon&r=PG", "display_name": "user2513149", "link": "https://stackoverflow.com/users/2513149/user2513149"}, "edited": false, "score": 1, "creation_date": 1563114713, "post_id": 34628342, "comment_id": 100585712, "body": "I am trying to build <code>GLFW</code> from source and there is no line <code>add_executable</code> in <code>CMakeLists.txt</code>. What should I do?"}], "tags": [], "owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "is_accepted": true, "score": 48, "last_activity_date": 1547824649, "last_edit_date": 1547824649, "creation_date": 1452067698, "answer_id": 34628342, "question_id": 34625627, "link": "https://stackoverflow.com/questions/34625627/how-to-link-to-the-c-math-library-with-cmake/34628342#34628342", "title": "How to link to the C math library with CMake?", "body": "<p>Many mathematical functions (<code>pow</code>, <code>sqrt</code>, <code>fabs</code>, <code>log</code> etc.) are declared in <code>math.h</code> and <a href=\"https://en.wikipedia.org/wiki/C_mathematical_functions#libm\" rel=\"noreferrer\">require the library <code>libm</code></a> to be linked. Unlike <code>libc</code>, which is automatically linked, <code>libm</code> is a separate library and often <a href=\"https://stackoverflow.com/q/1033898/2799037\">requires explicit linkage</a>. <a href=\"https://stackoverflow.com/questions/3355372/cannot-find-c-library-when-linking-error-compliling-the-boostprogram-optio#comment3483942_3355464\">The linker presumes all libraries to begin with <code>lib</code></a>, so to link to <code>libm</code> you link to <code>m</code>.</p>\n\n<p>You have to use it like <code>target_link_libraries(ch4 m)</code> to link <code>libm</code>to your target. The first argument must be a target. Thus it must be used after <code>add_executable(ch4 ch4.c)</code> like:</p>\n\n<pre><code>add_executable(ch4 ch4.c)\ntarget_link_libraries(ch4 m)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 814, "user_id": 2127708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d64afdd088f639d50e4b9d2d14c729a?s=128&d=identicon&r=PG", "display_name": "Michael Ambrus", "link": "https://stackoverflow.com/users/2127708/michael-ambrus"}, "is_accepted": false, "score": 2, "last_activity_date": 1595432099, "creation_date": 1595432099, "answer_id": 63037953, "question_id": 34625627, "link": "https://stackoverflow.com/questions/34625627/how-to-link-to-the-c-math-library-with-cmake/63037953#63037953", "title": "How to link to the C math library with CMake?", "body": "<p>For various targets it's a good idea to test if adding a library is needed or not and if so where it's located of how it's named. Here's one way to do it:</p>\n<pre><code>:\ninclude(CheckLibraryExists)\n\nCHECK_LIBRARY_EXISTS(m sin &quot;&quot; HAVE_LIB_M)                                                                                                \n                                                                                                                                         \nif (HAVE_LIB_M)                                                                                                                          \n    set(EXTRA_LIBS ${EXTRA_LIBS} m)                                                                                                      \nendif (HAVE_LIB_M)\n\n:\n//More tests &amp; build-up of ${EXTRA_LIBS}\n:\n\nadd_executable(ch4 ch4.c)\ntarget_link_libraries(ch4 PUBLIC ${EXTRA_LIBS})\n</code></pre>\n<p>For targets where <code>libm</code> is part of <code>libc</code>, the above test should fail, i.e. <code>${EXTRA_LIBS}</code> will miss it and <code>target_link</code> will not try to add.</p>\n"}], "owner": {"reputation": 1256, "user_id": 3128069, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4cdd27382d73700ac43edb0becdc1a7b?s=128&d=identicon&r=PG&f=1", "display_name": "phillipsK", "link": "https://stackoverflow.com/users/3128069/phillipsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28553, "favorite_count": 4, "accepted_answer_id": 34628342, "answer_count": 2, "score": 33, "last_activity_date": 1595432099, "creation_date": 1452054337, "last_edit_date": 1547827365, "question_id": 34625627, "link": "https://stackoverflow.com/questions/34625627/how-to-link-to-the-c-math-library-with-cmake", "title": "How to link to the C math library with CMake?", "body": "<p>How do I add the <code>math</code> library to my CMake file? This <a href=\"https://stackoverflow.com/questions/33639775/clion-cmake-how-to-add-library-so\">post</a> references adding a <a href=\"https://devnet.jetbrains.com/thread/472180\" rel=\"noreferrer\">target link library</a>, yet I am not too familiar with C. An <a href=\"https://stackoverflow.com/questions/11783932/how-to-add-linker-or-compile-flag-in-cmake-file\">Additional post</a> - Could someone please demonstrate an example. <a href=\"https://cmake.org/cmake/help/v3.0/command/target_link_libraries.html\" rel=\"noreferrer\">Documentation</a> I am using C and I receive an <code>undefined reference to 'pow'</code> with the pow method of the math header.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(CSCI-E-28-Unix-Linux-Systems-Programming)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\n\nset(SOURCE_FILES\n    CMakeLists.txt\n    getchar.c\n    main.cpp\n        hw0\n    more01.c)\n\n#target_link_libraries(&lt;math.h&gt; m)\n\nadd_executable(main main.cpp)\nadd_executable(getchar getchar.c)\nadd_executable(more01 more01.c)\nadd_executable(argu print_all_arguments.c)\nadd_executable(chars chars.c)\nadd_executable(ch4 ch4.c)\n</code></pre>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 6, "creation_date": 1452053590, "post_id": 34625487, "comment_id": 56996758, "body": "in the signed / unsigned comparison, <code>i</code> gets converted to <code>0xffffffff</code>, which is way bigger than <code>all_mem - 2</code>. At least I think that&#39;s what&#39;s happening. Why are you starting <code>i</code> at -1? I don&#39;t think I&#39;ve ever seen code that does that."}, {"owner": {"reputation": 107, "user_id": 5215187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4906d944d30ca87ac2d6cb46b840cf?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Shaikh", "link": "https://stackoverflow.com/users/5215187/shahroz-shaikh"}, "edited": false, "score": 0, "creation_date": 1452054711, "post_id": 34625487, "comment_id": 56997075, "body": "IS there nothing seen on the screen ?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 107, "user_id": 5215187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4906d944d30ca87ac2d6cb46b840cf?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Shaikh", "link": "https://stackoverflow.com/users/5215187/shahroz-shaikh"}, "edited": false, "score": 0, "creation_date": 1452055702, "post_id": 34625487, "comment_id": 56997358, "body": "@ShahrozShaikh: Since the loop condition fails immediately, you wouldn&#39;t expect anything. The program could simplify to <code>int main(void) { return 0; }</code> which would produce any output."}], "answers": [{"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1452055129, "post_id": 34625558, "comment_id": 56997194, "body": "Shouldn&#39;t that be an <code>(int)</code> cast?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1452055567, "post_id": 34625558, "comment_id": 56997313, "body": "@TomKarzes: Point. In practice, I usually use <code>size_t</code> or <code>ssize_t</code> types for my index variables to avoid the issue, so the <code>for</code> loop would remain as my answer specifies, and the declaration of <code>i</code> would change to <code>ssize_t i;</code>. Sure, <code>ssize_t</code> <i>could</i> have problems, but in practice, user virtual memory is usually bounded at half the total memory space anyway, so it&#39;s okay to assume the array length will fit in a signed <code>size_t</code>. Of course, we know for a fact the array is tiny, so <code>int</code> overflow can&#39;t occur (pretty sure no version of C has <code>int</code> less than 5 bits :-) )."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1452055675, "post_id": 34625558, "comment_id": 56997348, "body": "But it won&#39;t solve the problem.  Since <code>i</code> starts at <code>-1</code>, the loop will immediately exit, exactly as OP reported.  It doesn&#39;t work.  The cast, in fact, has no effect since it&#39;s <i>already</i> a <code>size_t</code>."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1452055766, "post_id": 34625558, "comment_id": 56997377, "body": "@TomKarzes: You&#39;re misreading. I suggested a cast to <code>ssize_t</code> (note extra leading <code>s</code>, meaning signed <code>size_t</code>), not <code>size_t</code> (which it already was)."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1452055844, "post_id": 34625558, "comment_id": 56997396, "body": "Oh, yes, you&#39;re absolutely right, I was misreading it.  My mistake!"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1452056014, "post_id": 34625558, "comment_id": 56997443, "body": "@TomKarzes: :-) I suspect the ease of misreading is why many large projects coded in C choose to use a <code>typedef</code> with a more distinct name (e.g. CPython&#39;s <code>Py_ssize_t</code>, with almost no use of <code>size_t</code> itself; <code>Py_ssize_t</code> is also there because <code>ssize_t</code> is POSIX, not C standard, and not all compilers support POSIX types)."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1452053873, "creation_date": 1452053873, "answer_id": 34625558, "question_id": 34625487, "link": "https://stackoverflow.com/questions/34625487/for-loop-condition/34625558#34625558", "title": "For Loop condition", "body": "<p>The <code>all_mem</code> macro is returning a <code>size_t</code> value; integer promotion rules mean the comparison of <code>i &lt;= (all_mem - 2)</code> is promoting <code>i</code> to a <code>size_t</code>, which means the value is huge, rather than <code>-1</code>. Try casting to ensure signed comparison:</p>\n\n<pre><code>for(i = -1; i &lt;=(ssize_t)(all_mem- 2); ++i)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1452101113, "creation_date": 1452101113, "answer_id": 34639013, "question_id": 34625487, "link": "https://stackoverflow.com/questions/34625487/for-loop-condition/34639013#34639013", "title": "For Loop condition", "body": "<p>after making a few corrections to the code, forinstance, sizeof() returns a <code>size_t</code>, not an <code>int</code>  the code worked perfectly.</p>\n\n<p>Here is the modified code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define all_mem (sizeof(x) /sizeof(x[0]))\n\nint x[] ={1,2,3,4,5,6,7,8,9,10};\n\nint main(void)\n{\n    printf( \"all_mem = %ld\\n\", all_mem ); // &lt;&lt; added for debugging\n\n    //  printf(\"The condition is %d\",(all_mem-2));\n    int i;\n        for(i=-1;i&lt;=(int)(all_mem-2);i++) // &lt;&lt; \n        // &lt;&lt; properly cast to int\n        // otherwise compiler raises warning and unsigned comparison made\n    {\n        printf(\"The number is %d\\n\",i);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Here is the output from the above code:</p>\n\n<pre><code>all_mem = 10\nThe number is -1\nThe number is 0\nThe number is 1\nThe number is 2\nThe number is 3\nThe number is 4\nThe number is 5\nThe number is 6\nThe number is 7\nThe number is 8\n</code></pre>\n\n<p>When compiling, always enable all the warnings, then fix those warnings. </p>\n\n<p>If the above statement had been followed, then you would have seen the problem, without our help.</p>\n\n<p>(for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code> and I also add: <code>-Wconversion -std=c99</code>)</p>\n"}], "owner": {"reputation": 803, "user_id": 2751962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac7856e40ad7f9cddacf7781a131c075?s=128&d=identicon&r=PG&f=1", "display_name": "anavaras lamurep", "link": "https://stackoverflow.com/users/2751962/anavaras-lamurep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 34625558, "answer_count": 2, "score": 1, "last_activity_date": 1452101113, "creation_date": 1452053401, "question_id": 34625487, "link": "https://stackoverflow.com/questions/34625487/for-loop-condition", "title": "For Loop condition", "body": "<pre><code>#include &lt;stdio.h&gt;\n#define all_mem (sizeof(x) /sizeof(x[0]))\nint x[] ={1,2,3,4,5,6,7,8,9,10};\n\n     int main(void) {\n            //  printf(\"The condition is %d\",(all_mem-2));\n            int i;\n                for(i=-1;i&lt;=(all_mem-2);i++)\n            {\n                printf(\"The number is %d\",i);\n            }\n            return 0;\n        }\n</code></pre>\n\n<p>In the above code for loop is not even executing for a single time, i tried printing condition and its satisfies for loop condition. Any insights how macro expression in for loop condition is evaluated to the value less than -1?</p>\n"}, {"tags": ["c++", "c", "macos", "memory"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1452053486, "post_id": 34625455, "comment_id": 56996730, "body": "Possibly of interest:  <a href=\"http://apple.stackexchange.com/questions/114319/how-to-access-dev-mem-in-osx\" title=\"how to access dev mem in osx\">apple.stackexchange.com/questions/114319/&hellip;</a>"}, {"owner": {"reputation": 181, "user_id": 5658989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa23e60815e22c46d844691b84677f5?s=128&d=identicon&r=PG&f=1", "display_name": "Koebmand STO", "link": "https://stackoverflow.com/users/5658989/koebmand-sto"}, "edited": false, "score": 0, "creation_date": 1452053719, "post_id": 34625455, "comment_id": 56996798, "body": "If you can just read any memery, OSX is a really shitty OS. You probably want some segment of shared memory."}, {"owner": {"reputation": 181, "user_id": 5658989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa23e60815e22c46d844691b84677f5?s=128&d=identicon&r=PG&f=1", "display_name": "Koebmand STO", "link": "https://stackoverflow.com/users/5658989/koebmand-sto"}, "edited": false, "score": 0, "creation_date": 1452053882, "post_id": 34625455, "comment_id": 56996851, "body": "When you run your program inside the GDB, the GDB owns all the memory and it is reading its own, not another process&#39;s."}, {"owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1452054686, "post_id": 34625455, "comment_id": 56997065, "body": "Have you tried <a href=\"https://github.com/jonathan-og/xnumem\" rel=\"nofollow noreferrer\">github.com/jonathan-og/xnumem</a>?"}, {"owner": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "reply_to_user": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1452054730, "post_id": 34625455, "comment_id": 56997080, "body": "@dtmilano I saw that before, I forgot about it.  I&#39;ll take another look."}, {"owner": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "reply_to_user": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1452057564, "post_id": 34625455, "comment_id": 56997910, "body": "@dtmilano Yeah, so it gives me the same <code>EXC_BAD_ACCESS</code> that I got with my own code."}], "owner": {"reputation": 1034, "user_id": 1974738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kfSTy.png?s=128&g=1", "display_name": "The Obscure Question", "link": "https://stackoverflow.com/users/1974738/the-obscure-question"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452053171, "creation_date": 1452053171, "question_id": 34625455, "link": "https://stackoverflow.com/questions/34625455/how-can-i-read-memory-from-a-specific-address-thats-allocated-to-a-different-pr", "title": "How can I read memory from a specific address that&#39;s allocated to a different process in OSX?", "body": "<p>Let's say that there's a value of interest, and it is located at <code>address</code>.  However, this memory is owned by process <code>a.dylib</code>.  I won't be able to access this memory through <code>./code</code> with <code>int x = *(int*)address</code> because <code>./code</code> does not own the memory that holds <code>address</code>.</p>\n\n<p>How can I access <code>address</code> with <code>./code</code> in OSX, preferably without root?  Am I required to go through <code>vm_read()</code>?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 2082, "user_id": 5442132, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/U09W8.jpg?s=128&g=1", "display_name": "myselfmiqdad", "link": "https://stackoverflow.com/users/5442132/myselfmiqdad"}, "edited": false, "score": 0, "creation_date": 1452052456, "post_id": 34625339, "comment_id": 56996435, "body": "<a href=\"http://man7.org/linux/man-pages/man2/fcntl.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/fcntl.2.html</a>"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1452052891, "post_id": 34625339, "comment_id": 56996544, "body": "What part of the documentation didn&#39;t you understand?"}, {"owner": {"reputation": 43, "user_id": 5245789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1779145294721208505595fb7c25a8?s=128&d=identicon&r=PG&f=1", "display_name": "Pawn Pod", "link": "https://stackoverflow.com/users/5245789/pawn-pod"}, "reply_to_user": {"reputation": 2082, "user_id": 5442132, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/U09W8.jpg?s=128&g=1", "display_name": "myselfmiqdad", "link": "https://stackoverflow.com/users/5442132/myselfmiqdad"}, "edited": false, "score": 0, "creation_date": 1452053881, "post_id": 34625339, "comment_id": 56996850, "body": "@miqdadamirali Oh.I get it.Thanks a lot"}, {"owner": {"reputation": 43, "user_id": 5245789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1779145294721208505595fb7c25a8?s=128&d=identicon&r=PG&f=1", "display_name": "Pawn Pod", "link": "https://stackoverflow.com/users/5245789/pawn-pod"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1452053910, "post_id": 34625339, "comment_id": 56996860, "body": "@EJP I&#39;ve got it.Thanks:)"}], "answers": [{"tags": [], "owner": {"reputation": 2082, "user_id": 5442132, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/U09W8.jpg?s=128&g=1", "display_name": "myselfmiqdad", "link": "https://stackoverflow.com/users/5442132/myselfmiqdad"}, "is_accepted": true, "score": 2, "last_activity_date": 1452053981, "creation_date": 1452053981, "answer_id": 34625572, "question_id": 34625339, "link": "https://stackoverflow.com/questions/34625339/whats-the-third-arg-in-fcntl/34625572#34625572", "title": "What&#39;s the third arg in fcntl()", "body": "<blockquote>\n  <p>fcntl() can take an optional third argument.  Whether or not this\n         argument is required is determined by cmd.  The required argument\n         type is indicated in parentheses after each cmd name (in most cases,\n         the required type is int, and we identify the argument using the name\n         arg), or void is specified if the argument is not required.</p>\n  \n  <p>F_SETLK, F_SETLKW, and F_GETLK are used to acquire, release, and test\n         for the existence of record locks (also known as byte-range, file-\n         segment, or file-region locks).  The third argument, lock, is a\n         pointer to a structure that has at least the following fields (in\n         unspecified order).</p>\n  \n  <p>As with traditional advisory locks, the third argument to fcntl(),\n         lock, is a pointer to an flock structure.  By contrast with\n         traditional record locks, the l_pid field of that structure must be\n         set to zero when using the commands described below.</p>\n</blockquote>\n\n<p>This link will assist you with your question\n<a href=\"http://man7.org/linux/man-pages/man2/fcntl.2.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man2/fcntl.2.html</a></p>\n"}], "owner": {"reputation": 43, "user_id": 5245789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1779145294721208505595fb7c25a8?s=128&d=identicon&r=PG&f=1", "display_name": "Pawn Pod", "link": "https://stackoverflow.com/users/5245789/pawn-pod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "closed_date": 1452084860, "accepted_answer_id": 34625572, "answer_count": 1, "score": -2, "last_activity_date": 1452053981, "creation_date": 1452052341, "last_edit_date": 1452052532, "question_id": 34625339, "link": "https://stackoverflow.com/questions/34625339/whats-the-third-arg-in-fcntl", "closed_reason": "Not suitable for this site", "title": "What&#39;s the third arg in fcntl()", "body": "<p>I'm not sure about the third arg in <code>fcntl()</code>, I do know that it's different when the second arg changes, and it is a pointer when the second arg is <code>F_GETLK</code> etc. But when the 2nd arg is <code>F_GETFL</code> etc, what should 3rd arg be?</p>\n\n<p>From APUE, it is 0 when 2nd arg is <code>F_GETFL</code></p>\n\n<p>Thanks anyway:)</p>\n"}, {"tags": ["c", "windows", "turbo-c"], "comments": [{"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 2, "creation_date": 1452052886, "post_id": 34625331, "comment_id": 56996541, "body": "that because clrscr() and getch() are nonstandard in c language. some compilers implement it, but it has no relation with the system used."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1452053264, "post_id": 34625331, "comment_id": 56996648, "body": "They are just library functions.  Not that you can easily use them on Windows either, it does require a product from a museum.  Linux programmers usually swear at curses.h"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5721274"}, "edited": false, "score": 0, "creation_date": 1452053305, "post_id": 34625453, "comment_id": 56996667, "body": "what is about the claim that this book is using ansi c? is it wrong or right?"}, {"owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "edited": false, "score": 0, "creation_date": 1452053658, "post_id": 34625453, "comment_id": 56996778, "body": "@MRMillon Actually is valid ANSI C, just not cross platform (as far as I know Turbo C is for Windows) nor compiler (not part of the standard)."}], "tags": [], "owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "is_accepted": true, "score": 0, "last_activity_date": 1452053140, "creation_date": 1452053140, "answer_id": 34625453, "question_id": 34625331, "link": "https://stackoverflow.com/questions/34625331/what-is-the-proper-ansi-c-example-for-windows/34625453#34625453", "title": "What is the proper ansi c example for windows?", "body": "<p>As @milevyo said, those functions are implemented by Borland's compilers. On Windows you can replace <code>clrscr()</code> with <code>system(\"cls\")</code> and <code>getch();</code> with <code>_getch();</code> or, even better, <code>getchar()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 5750652, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CFf26.png?s=128&g=1", "display_name": "Sneha", "link": "https://stackoverflow.com/users/5750652/sneha"}, "is_accepted": false, "score": 0, "last_activity_date": 1452056647, "creation_date": 1452056647, "answer_id": 34625970, "question_id": 34625331, "link": "https://stackoverflow.com/questions/34625331/what-is-the-proper-ansi-c-example-for-windows/34625970#34625970", "title": "What is the proper ansi c example for windows?", "body": "<p><code>conio.h</code> file directory is only supported by <code>Borland C</code>.You can use <code>getchar()</code> instead of <code>getch()</code>.</p>\n\n<p>If you have to use <code>getch()</code> anyhow then You can use <code>curses.h</code> file instead of <code>conio.h</code>. It gives mostly all the functionality of <code>conio.h</code> with <code>getch()</code>.</p>\n\n<p>If you don't get <code>curses.h</code> directory installed then you can download from <a href=\"http://cvsweb.netbsd.org/bsdweb.cgi/src/lib/libcurses/curses.h?rev=1.86&amp;content-type=text/x-cvsweb-markup.\" rel=\"nofollow\">here</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ncurses.h&gt;\n\nint main()\n{\n    initscr();              /* start the curses mode */\n    int a;\n    scanf(\"%d\", &amp;a);\n    printf(\"%d\",a);\n\n    getch();\n    endwin();\n\n return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5721274"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1452256184, "accepted_answer_id": 34625453, "answer_count": 2, "score": 1, "last_activity_date": 1452056647, "creation_date": 1452052279, "last_edit_date": 1452052918, "question_id": 34625331, "link": "https://stackoverflow.com/questions/34625331/what-is-the-proper-ansi-c-example-for-windows", "closed_reason": "Not suitable for this site", "title": "What is the proper ansi c example for windows?", "body": "<p>Some books claim that they used ansi c and use turbo c compiler to run these example. i tried to run these on linux but I found that these example are only for windows.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n/* #include&lt;dos.h&gt; */\nint main()\n{\n    int a;\n    clrscr();\n    scanf(\"%d\", &amp;a);\n    printf(\"%d\",a);\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>Can I call the above example ansi c? why or why not?</p>\n"}, {"tags": ["c", "linux", "shell"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452054607, "post_id": 34625123, "comment_id": 56997046, "body": "It&#39;s not clear why you have come to the conclusion that the <code>waitpid</code> is the cause of the error you are seeing. The connection may be obvious but I&#39;m not seeing it. Since the error only occurs very occasionally how do you know that it is not an existing bug independent of <code>waitpid</code>? FWIW, the <code>waitpid</code> snippet looks fine to me except for the fact that <code>waitpid</code> is called even if <code>fork</code> fails (but that is unlikely to be a factor in the current question)."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1452054623, "post_id": 34625123, "comment_id": 56997050, "body": "&quot;<i>but very rarely it exhibits strange errors.</i>&quot; What are these strange errors? Is it that <code>cc1</code> error you posted?"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1452054743, "post_id": 34625123, "comment_id": 56997085, "body": "@Cornstalks yes that is the error"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452054830, "post_id": 34625123, "comment_id": 56997108, "body": "@kaylum well, if I don&#39;t change the code as above, everything works fine, including recompilation of that kernel module.  It has to work fine, because that is the only modification of <code>dash</code> that I do and <code>dash</code> is a known, well debugged program.So it is <code>fork</code> or <code>waitpid</code> that is causing the problem or both."}, {"owner": {"reputation": 965, "user_id": 633525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lh1Al.png?s=128&g=1", "display_name": "darklion", "link": "https://stackoverflow.com/users/633525/darklion"}, "edited": false, "score": 0, "creation_date": 1452054873, "post_id": 34625123, "comment_id": 56997126, "body": "Does the program do anything between the waitpid and the exit? (Note that fork() returns -1 if it fails which would cause it to go through the waitpid() statement, though I see nothing in your snippet which would cause a problem even in this case.)"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 965, "user_id": 633525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lh1Al.png?s=128&g=1", "display_name": "darklion", "link": "https://stackoverflow.com/users/633525/darklion"}, "edited": false, "score": 0, "creation_date": 1452054939, "post_id": 34625123, "comment_id": 56997144, "body": "@darklion no I am telling you, does not, that&#39;s the point, I eliminated all the extra code, leaving only <code>fork</code> and <code>waitpid</code> and the error remains"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452055186, "post_id": 34625123, "comment_id": 56997203, "body": "The argument <code>unrecognized command line option &quot;-mfentry&quot;</code> suggests you have <code>&quot;-mfentry&quot;</code> as part of <code>argv</code> and it is not recognized by the program or script you pass as <code>cmd</code>. It also implies that you are passing <code>cc1</code> as <code>cmd</code>. Are you also passing <code>cc1</code> as <code>argv[0]</code> as per the convention?"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452055290, "post_id": 34625123, "comment_id": 56997229, "body": "@DavidC.Rankin yes I know...  but so what, that&#39;s why it is a &quot;strange&quot; error, it should not happen.  The arguments to that program, cc1, are the same regardless of the shell, if I recompile the dash shell as above, it should not change anything"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452055344, "post_id": 34625123, "comment_id": 56997248, "body": "Are there any patches not applied or missing when you recompile that could account for the shell no longer accepting that option? And both <code>argv</code> and <code>envp</code> are terminated by a <code>NULL</code> as the last element of each?? Only other thing I could think of that might cause <code>execve</code> to walk off the end of either <code>argv</code> or <code>envp</code> and pick up some stray option."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452055595, "post_id": 34625123, "comment_id": 56997324, "body": "@DavidC.Rankin David I am not sure if you are understanding the question, or maybe I have not explained.  I don&#39;t have anything to do with cc1.  I am modifying <code>dash</code> as above and running programs under the modified shell.  They run fine most of the time, which means, the shell is modified correctly, more or less.  I can recompile simple kernel modules under the modified shell, no problem.  But a particular kernel module &quot;biosutility&quot; does not recompile, it exits with the error as above."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452055714, "post_id": 34625123, "comment_id": 56997363, "body": "@DavidC.Rankin again, the code without the above modification, is perfectly fine, it is the <code>dash</code> source code, unmodified, so it has to have the correctly setup call to <code>execve</code>, there cannot possibly be a problem with unterminated args or anything like that."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452055941, "post_id": 34625123, "comment_id": 56997421, "body": "Lightbulb on. OK, that makes sense. I was just looking at it from the <code>execve</code> use standpoint. What could cause it to behave differently. The only other thing I can think of is if in your recompile you changed the <code>#!</code> interpreter name somehow, and <code>cmd</code> was a script -- that could cause problems as well. Not knowing how you modify dash I&#39;m all out of ammo. If all works prior to recompile and not after recompile, it is almost like something gets left out or altered in the dash rebuild. Good luck."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1452056337, "post_id": 34625123, "comment_id": 56997531, "body": "@DavidC.Rankin thank you for trying to help...  no there are no other modifications of anything, only the above lines are added.  No other changes."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1452056502, "post_id": 34625123, "comment_id": 56997580, "body": "Maybe it is the <code>fork</code> rather than the <code>waitpid</code> that is the cause of the problem. With the change, the child process is the one that does the <code>execve</code> and not the parent process which would have been the case without the change. That can subtly change things. For example, any signals that are sent to the parent process will now no longer be handled correctly by the actual <code>execve</code> application. But not sure how that would translate to the symptoms you are seeing. So just a line of thought."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1452056643, "post_id": 34625123, "comment_id": 56997619, "body": "Forking an extra process and then hanging in a wait loop means that a bunch of file descriptors were duplicated and remain open, although they&#39;re not going to be used. That can have non-local consequences. There are some other details, like terminal ownership and signal handling. And of course, there is the issue that the pid of the process which is about to be exec&#39;d will be different, so if it has already been stored somewhere for later use, that will be incorrect, too."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452056823, "post_id": 34625123, "comment_id": 56997683, "body": "@kaylum  OK that&#39;s great, thank you.  Do you know then, how to correctly find out when the execve has finished"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1452056885, "post_id": 34625123, "comment_id": 56997705, "body": "@rici  OK great insight, thank you, I don&#39;t like forking either... but then, how else can I know that execve has finished...??"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452057594, "post_id": 34625123, "comment_id": 56997921, "body": "@kaylum - <code>fork</code> to blame - perhaps...  if I don&#39;t wait, just call <code>fork</code> and exit the parent, then,...  again everything works 99% of the time, except that particular kernel module compilation that is giving error above, now fails altogether, without emitting any error."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1452057625, "post_id": 34625123, "comment_id": 56997936, "body": "Dash must already have a mechanism, since it doesn&#39;t leave zombies lying around. I don&#39;t know anything about dash internals, though, so i wouldn&#39;t even know where to look."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452057823, "post_id": 34625123, "comment_id": 56997990, "body": "Can&#39;t really tell you how to do it in the dash context. Because the code you have is largely correct for waiting for child process to exit but perhaps needs to be placed in a different part of the dash code."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452057934, "post_id": 34625123, "comment_id": 56998035, "body": "@kaylum I am not trying to get you to do my work for me...  I just wanted to know if what I am doing is theoretically correct...  that is the only place in <code>dash</code> code that does the <code>execve</code> - there is nowhere else to put it.  I am trying to do the same modification now to <code>bash</code> to see if the same behaviour happens."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452057982, "post_id": 34625123, "comment_id": 56998053, "body": "@MarkGaleck Wasn&#39;t implying that you are trying to get me to do your work. Just saying that the limits of my knowledge have been reached."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452058149, "post_id": 34625123, "comment_id": 56998100, "body": "@kaylum thank you I appreciate greatly.  Yes the same modification to <code>bash</code> produces the same exact problem.  So this has nothing to do with <code>dash</code> .  I am just not understanding some deeper consequence of what I am doing.  Darn.  I wish I knew where to start looking....  thank you again."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1452059529, "post_id": 34625123, "comment_id": 56998588, "body": "Ok, following up on my observation that you are confusing dash&#39;s memory of pids, and remembering that dash already has a mechanism to track child processes. Dash thinks it has started process pidx and it will want to know its status code at exit. But your fork means that you are process pidx and the child is now pidy. The child finishes, you reap and ignore its status code, and do a successful return. Result: bash thinks the child succeeded. Maybe it failed and the script wants to do something only on success..."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1452059700, "post_id": 34625123, "comment_id": 56998659, "body": "... The bottom line is that dash already tracks child lifetimes, but you haven&#39;t hooked into its existing mechanism. You should do that, because adding a different mechanism is not going to be easy. Tbh, I suspect an XY problem here."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1452059952, "post_id": 34625123, "comment_id": 56998748, "body": "@rici yes I think you are right on point, if you make it into the answer I will accept it.  I made a &quot;mini-shell&quot; which just does <code>execve</code> on whatever is passed to it...  Lo and behold, it does not suffer from the problem above.  So...  yes I agree with you, I have to understand what it is in the &#39;real&#39; shell that makes my modification fail."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1452186866, "post_id": 34625123, "comment_id": 57067786, "body": "Haven&#39;t read through all of these comments, but are you running on some obscure platform which guarantees that fork() never fails?  It seems odd that you are not doing any error checking at all on the fork."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1452968310, "post_id": 34625123, "comment_id": 57402517, "body": "You have your last paragraph mentioning a compilation error, that should be a separate question and you should give the entire compilation command"}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1452967804, "post_id": 34626728, "comment_id": 57402343, "body": "@BasileStarynkevitch: except the question itself :)"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1452062031, "last_edit_date": 1452062031, "creation_date": 1452060656, "answer_id": 34626728, "question_id": 34625123, "link": "https://stackoverflow.com/questions/34625123/how-to-correctly-wait-for-execve-to-finish/34626728#34626728", "title": "how to correctly wait for execve to finish?", "body": "<p>Here's one possibility.</p>\n\n<p><code>dash</code> does, in fact, need to know when a child process terminates. It must reap the child (by <code>wait</code>ing it) to avoid filling the process table with zombies, and anyway it cares about the exit status of the process.</p>\n\n<p>Now, it knows what the PID of the process it started was, and it can use that when it does a <code>wait</code> to figure out which process terminated and therefore what to do with the exit status.</p>\n\n<p>But you are doing an extra <code>fork</code>. So <code>dash</code> thinks it started some process with PID, say, 368. But you <code>fork</code> a new child, say PID 723. Then you <code>wait</code> for that child, but you ignore the status code. Finally, your process terminates successfully. So then <code>dash</code> notices that process 368 terminated successfully. Even if it didn't.</p>\n\n<p>Now suppose <code>dash</code> was actually executing a script like</p>\n\n<pre><code>do_something &amp;&amp; do_something_else\n</code></pre>\n\n<p>The programmer has specified that the shell definitely shouldn't <code>do_something_else</code> if <code>do_something</code> failed. Terrible things could happen. Or at least mysterious things. Yet, you have hidden that failure. So <code>dash</code> cheerfully fires up <code>do_something_else</code>. <em>Et voil\u00e0</em></p>\n\n<p>Well, it's just a theory. I have no idea, really, but it shows the sort of thing that can happen.</p>\n\n<p>The bottom line is that <code>dash</code> has some mechanism which lets it know when child processes have finished, and if you want to hook into the exit handling of a child process, you'd be much better off figuring out how that mechanism works so that you can hook into it. Trying to add your own additional mechanism is almost certain to end in tears.</p>\n"}, {"comments": [{"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1452185959, "post_id": 34640031, "comment_id": 57067126, "body": "you provide good coding practices, but...  they are not applicable in an SSCCE.  You don&#39;t answer the question."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1452217986, "post_id": 34640031, "comment_id": 57082309, "body": "@MarkGaleck, just what is a SSCCE?   It seemed to me the question was along the line of: <code>my code does not consistently work, why not?</code>  It does not consistently work because the call to <code>fork()</code> and its&#39; returned value is not being correctly handled and the call to <code>execve()</code> is not properly handled.  I presented a way to fix that problem and to properly handle the returned value from <code>fork()</code> and the call to <code>execve()</code>.  The OP did not provide enough info to proceed beyond that info."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1452218571, "post_id": 34640031, "comment_id": 57082470, "body": "@MarkGaleck,   The OP did not provide a complete code example, nor just what the displayed problems (that occur occasionally) nor what is in argv[] on failure.  I could just vote to close because the question was about a runtime problem because the OP did not provide the required info. instead I tried to be helpful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1452219037, "post_id": 34640031, "comment_id": 57082585, "body": "@MarkGaleck, of course, the OP did not mention if the compile works successfully with the original <code>dash</code> code (and did not post the unmodified code)  So, given the scant info, my only choice was to assume that the modified code was the root of the problem."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 1, "creation_date": 1452266411, "post_id": 34640031, "comment_id": 57106131, "body": "If you want to know what SSCCE is, google it, it&#39;s easy.  Questions and answers on this website should be presented with SSCCE. That&#39;s not my own opinion, everybody knows that.  SSCCE does not include error handling, unless it is relevant.  In this case, it is not.  If I follow your answer as to error handling, nothing changes.  The problem has nothing to do with error handling of execve or fork."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1452266665, "post_id": 34640031, "comment_id": 57106332, "body": "I did in fact provide &quot;complete&quot; code, that is what SSCCE does.  I am sorry, in my opinion, you don&#39;t understand how to pose questions correctly, and how to use SSCCE.  Posting the &quot;whole&quot; code from beginning to end, is in fact the wrong thing to do.  Yes many posters do it - because I am afraid they are lazy.  One should always show research effort and post the minimal example relevant.  If you disagree with me, I don&#39;t want to argue, about things that are obvious, let&#39;s just agree to disagree."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1452351356, "post_id": 34640031, "comment_id": 57135844, "body": "@MarkGaleck,  in this case, the answer was about the proper usage of the <code>fork()</code> and the <code>execve()</code> function,  that includes the necessary error handling.  The OPs posted code will call <code>waitpid()</code> with a PID of -1 when the <code>fork()</code> fails.  That is definitely an error and needed to be addressed.  The posted code will always call <code>execve()</code>, even if the <code>fork()</code> fails.  That is an error and needed to be addressed."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1452351458, "post_id": 34640031, "comment_id": 57135884, "body": "@MarkGaleck,  Reading the &#39;help center&#39; for stack overflow says for the OP to produce a MCVE,  not a SSCCE.  This is further discussed at: &lt;<a href=\"http://meta.stackoverflow.com/questions/283437/mcve-vs-sscce-battle\" title=\"mcve vs sscce battle\">meta.stackoverflow.com/questions/283437/mcve-vs-sscce-battl&zwnj;&#8203;e</a>&gt; and elsewhere.  And since the posted code does not work in all cases, it is not a SSCCE.  When the OP has a runtime problem, they are expected to post a short code that cleanly compiles and still shows the problem.  Then we can debug the code."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": -1, "last_activity_date": 1452965448, "last_edit_date": 1452965448, "creation_date": 1452104471, "answer_id": 34640031, "question_id": 34625123, "link": "https://stackoverflow.com/questions/34625123/how-to-correctly-wait-for-execve-to-finish/34640031#34640031", "title": "how to correctly wait for execve to finish?", "body": "<p>for this question: \"is anything wrong with the above??\"</p>\n\n<p>and regarding this code: </p>\n\n<pre><code>if (child = fork()) {\n    waitpid(child, NULL, 0);\n    /*now I know execve is finished*/\n    exit(0);\n}\n\nexecve(cmd, argv, envp);\n</code></pre>\n\n<ol>\n<li><p>the <code>fork()</code> function has three kinds of returned value:</p>\n\n<ul>\n<li><code>-1</code> means an error occurred</li>\n<li><code>=0</code> means <code>fork()</code> was successful and the child process is running</li>\n<li><code>&gt;0</code> means <code>fork()</code> was successful and the parent process is running</li>\n</ul></li>\n<li>the call to <code>execvp()</code> needs to be followed </li>\n</ol>\n\n<p>(for the rare case of the call failing) with</p>\n\n<pre><code> perror( \"execvp failed\" );\n exit( EXIT_FAILURE );\n</code></pre>\n\n<ol start=\"3\">\n<li>the call to <code>fork()</code> returns a <code>pid_t</code>.  </li>\n</ol>\n\n<p>After the call, the code needs to be similar to: (using <code>child</code> as the pid variable)</p>\n\n<pre><code>if( 0 &gt; child )\n{\n    perror( \"fork failed\");\n    exit( EXIT_FAILURE );\n}\n\nelse if( 0 == child )\n{ // then child process\n    execve(cmd, argv, envp);\n    perror( \"execvp failed\" );\n    exit( EXIT_FAILURE );\n}\n\n//else\n//{ // else parent process\nwaitpid(child, NULL, 0);\nexit( EXIT_SUCCESS );\n</code></pre>\n\n<p>for your second question, about the error message:</p>\n\n<pre><code>cc1: error: unrecognized command line option \"-mfentry\"\n</code></pre>\n\n<p>the word: <code>unrecognized</code> is mis-spelled, so this is not the actual error message.</p>\n\n<p>This error message is not related to your question about the changes you made to <code>dash</code>.</p>\n\n<p>However, the <code>dash</code> does not directly invoke any compile operations, so I suspect the questions are totally unrelated.</p>\n\n<p>Suggest looking at the makefile for the <code>biosutility</code> utility for why there is a invalid parameter being passed to <code>cc1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8861, "user_id": 298656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/722360c2469d7dec462ada999a2f80a7?s=128&d=identicon&r=PG", "display_name": "jilles", "link": "https://stackoverflow.com/users/298656/jilles"}, "edited": false, "score": 1, "creation_date": 1452205878, "post_id": 34661167, "comment_id": 57078537, "body": "The <code>waitpid()</code> call will fail with <code>ECHILD</code> since <code>parent</code> is not a direct child of the current process. If you want to go this way, you will have to use some (non-portable and usually complicated) mechanism to wait for a process to terminate which is not a child."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 8861, "user_id": 298656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/722360c2469d7dec462ada999a2f80a7?s=128&d=identicon&r=PG", "display_name": "jilles", "link": "https://stackoverflow.com/users/298656/jilles"}, "edited": false, "score": 0, "creation_date": 1452215299, "post_id": 34661167, "comment_id": 57081647, "body": "@jilles yes indeed, that was a bad idea, it &quot;worked&quot; at first :)"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "reply_to_user": {"reputation": 8861, "user_id": 298656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/722360c2469d7dec462ada999a2f80a7?s=128&d=identicon&r=PG", "display_name": "jilles", "link": "https://stackoverflow.com/users/298656/jilles"}, "edited": false, "score": 0, "creation_date": 1452267422, "post_id": 34661167, "comment_id": 57106867, "body": "@jilles I fixed the problem and edited the answer, thank you jilles!"}], "tags": [], "owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1452267384, "last_edit_date": 1452267384, "creation_date": 1452186611, "answer_id": 34661167, "question_id": 34625123, "link": "https://stackoverflow.com/questions/34625123/how-to-correctly-wait-for-execve-to-finish/34661167#34661167", "title": "how to correctly wait for execve to finish?", "body": "<p>Following Rici's excellent comments and answer, I found the root cause of the problem.  </p>\n\n<p>The original code exits with whatever <code>cmd</code> exited. I changed that to exit with 0 always.  That is why the code behaves differently.  </p>\n\n<p>The following fix does not exhibit the error:</p>\n\n<pre><code>int status;\n\nif (child = fork()) {\n        waitpid(child, &amp;status, 0);\n        /*now we know execve is finished*/\n        if (WIFEXITED(status))\n            exit(WEXITSTATUS(status));\n        exit(1);\n    }\n\nexecve(cmd, argv, envp);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1452968612, "last_edit_date": 1452968612, "creation_date": 1452967520, "answer_id": 34830310, "question_id": 34625123, "link": "https://stackoverflow.com/questions/34625123/how-to-correctly-wait-for-execve-to-finish/34830310#34830310", "title": "how to correctly wait for execve to finish?", "body": "<p>Read <em>carefully</em> documentation of <a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow\">execve(2)</a> and of <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow\">fork(2)</a> and of <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow\">waitpid(2)</a>. Both <code>execve</code> &amp; <code>fork</code> are tricky and <strong><a href=\"https://en.wikipedia.org/wiki/Fork_%28system_call%29\" rel=\"nofollow\">fork</a> is difficult to understand</strong>. I strongly suggest to read <a href=\"http://www.makelinux.net/alp/\" rel=\"nofollow\"><em>Advanced Linux Programming</em></a> (freely available online, but you could buy the paper book) which has <em>several chapters</em> for these questions.</p>\n\n<p><sup>(Don't be afraid of spending a few days reading and understanding these system calls, they <em>are</em> tricky)</sup></p>\n\n<p>Some important points.</p>\n\n<ul>\n<li><p><strong><em>every</em> <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow\">system call</a> <em>can fail</em> and you should <em>always</em> handle its failure</strong>, at least by showing some error message with <a href=\"http://man7.org/linux/man-pages/man3/perror.3.html\" rel=\"nofollow\">perror(3)</a> and immediately <a href=\"http://man7.org/linux/man-pages/man3/exit.3.html\" rel=\"nofollow\">exit(3)</a>-ing.</p></li>\n<li><p>the <strong><a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow\">execve(2)</a></strong> syscall <em>usually never returns</em>, since it <strong>returns <em>only</em> on failure</strong> (when successful, it does not return, since the calling program has been replaced so wiped out!) hence most calls to it (and similar <a href=\"http://man7.org/linux/man-pages/man3/exec.3.html\" rel=\"nofollow\">exec(3)</a> functions) are often like:</p>\n\n<pre><code>if (execve(cmd, argv, envp)) { perror (cmd); exit(127); };\n/* else branch cannot be reached! */\n</code></pre>\n\n<p>it is customary to use a weird exit code like 127 (usually unused, except like above) on <code>execve</code>  failure, and very often you could not do anything else.\nWhen used (almost always) with <code>fork</code> you'll often call <code>execve</code> in the <em>child</em> process.</p></li>\n<li><p>the <strong><a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow\">fork(2)</a> syscall returns <em>twice</em> on success</strong> (once in parent process, once in child process). This is tricky to understand, read the references I gave. It returns <em>once only on failure</em>. So you <strong>always keep the result of <code>fork</code></strong>, so typical code would be:</p>\n\n<pre><code> pid_t pid = fork ();\n if (pid&lt;0) { // fork has failed \n    perror(\"fork\"); exit(EXIT_FAILURE);\n }\n else if (pid==0) { // successful fork in the child process\n   // very often you call execve in child, so you don't continue here.\n   // example code:\n   if (execve(cmd, argv, envp)) { perror (cmd); exit(127); };\n   // not reached! \n};\n// here pid is positive, we are in the parent and fork succeeded....\n/// do something sensible, at some point you need to call waitpid and use pid\n</code></pre></li>\n</ul>\n\n<p>Suggestion: use <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow\">strace(1)</a> on some programs, perhaps try <code>strace -f bash -c 'date; pwd'</code> and study the output. It mentions many <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow\">syscalls(2)</a>....</p>\n\n<p>Your sample code might (sometimes) work by just adding some <code>else</code> like</p>\n\n<pre><code>// better code, but still wrong because of unhandled failures....\nif ((child = fork())&gt;0) { \n  waitpid(child, NULL, 0);\n  /*now I know execve is finished*/\n  exit(0);\n}\n/// missing handling of `fork`  failure!\nelse if (!child) {\n   execve(cmd, argv, envp);\n   /// missing handling of `execve` failure\n}\n</code></pre>\n\n<p>but that code is still incorrect because failures are not handled.</p>\n"}], "owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5627, "favorite_count": 1, "accepted_answer_id": 34626728, "answer_count": 4, "score": 3, "last_activity_date": 1452968612, "creation_date": 1452050780, "last_edit_date": 1452052446, "question_id": 34625123, "link": "https://stackoverflow.com/questions/34625123/how-to-correctly-wait-for-execve-to-finish", "title": "how to correctly wait for execve to finish?", "body": "<p>A C source code (compiled and running Linux Centos 6.3) has the line:</p>\n\n<pre><code>execve(cmd, argv, envp);\n</code></pre>\n\n<p><code>execve</code> does not return, but I want to modify the code to know when it is finished.  So I do this:</p>\n\n<pre><code>if (child = fork()) {\n    waitpid(child, NULL, 0);\n    /*now I know execve is finished*/\n    exit(0);\n}\n\nexecve(cmd, argv, envp);\n</code></pre>\n\n<p>When I do this, the resulting program works 99% of the time, but very rarely it exhibits strange errors.  </p>\n\n<p>Is anything wrong with the above??  I expect the above code to run precisely (except a little slower) as before.  Am I correct?</p>\n\n<p>If you want to know the background, the modified code is <code>dash</code>.  The <code>execve</code> call is used to run a simple command, after <code>dash</code> has figured out the string to run.  When I modify precisely as above (without even running anything after waiting) and recompile and run programs under the modified dash, most of the time they run fine.  However, a recompilation of one particular kernel module called \"biosutility\" gives me this error</p>\n\n<pre><code>cc1: error: unrecognized command line option \"-mfentry\"\n</code></pre>\n"}, {"tags": ["c", "math", "sum", "constants"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 2, "creation_date": 1452049210, "post_id": 34624879, "comment_id": 56995606, "body": "Wow. So you haven&#39;t even tried to do the actual &quot;summing&quot; work?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1452049260, "post_id": 34624879, "comment_id": 56995618, "body": "You might want to actually include some code that (a) compiles and (b) actually attempts to compute the sum of values you&#39;re interested in.   Then people will be more willing to help.   Otherwise, it just looks like you&#39;re trying to get someone else to do work you haven&#39;t bothered to do."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1452049422, "post_id": 34624879, "comment_id": 56995662, "body": "Do <i>not</i> read the inputs with scanf.  Take them as command line arguments."}, {"owner": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "edited": false, "score": 3, "creation_date": 1452049674, "post_id": 34624879, "comment_id": 56995726, "body": "Also, don&#39;t use a <code>for</code> loop to compute the sum. Instead, ask yourself: WWGD (<a href=\"http://mathcentral.uregina.ca/QQ/database/QQ.02.06/jo1.html\" rel=\"nofollow noreferrer\">what would Gauss do</a>)?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452050811, "post_id": 34624879, "comment_id": 56996027, "body": "Are you trying to calculate the sum of <i>all</i> numbers or the sum of <i>all even</i> numbers?"}, {"owner": {"reputation": 1820, "user_id": 141642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8fc1089bebc52c24f073c22d6b6e15fd?s=128&d=identicon&r=PG", "display_name": "tletnes", "link": "https://stackoverflow.com/users/141642/tletnes"}, "edited": false, "score": 0, "creation_date": 1452057370, "post_id": 34624879, "comment_id": 56997843, "body": "Someone has changed the question to hold the answer rather than answer."}], "answers": [{"tags": [], "owner": {"reputation": 1820, "user_id": 141642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8fc1089bebc52c24f073c22d6b6e15fd?s=128&d=identicon&r=PG", "display_name": "tletnes", "link": "https://stackoverflow.com/users/141642/tletnes"}, "is_accepted": false, "score": 0, "last_activity_date": 1452057031, "creation_date": 1452057031, "answer_id": 34626032, "question_id": 34624879, "link": "https://stackoverflow.com/questions/34624879/sum-of-the-all-the-numbers-between-a-and-b/34626032#34626032", "title": "Sum of the all the numbers between a and b", "body": "<p>I would start by implementing a loop to compute:\n$$\\sum_{n=a}^{b}\nn$$</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 0, "last_activity_date": 1452057254, "creation_date": 1452057254, "answer_id": 34626073, "question_id": 34624879, "link": "https://stackoverflow.com/questions/34624879/sum-of-the-all-the-numbers-between-a-and-b/34626073#34626073", "title": "Sum of the all the numbers between a and b", "body": "<p>The code given looks OK, but if you want the sum without including the last number, as is generally the case you should change the for loop like this</p>\n\n<pre><code>for(; index &lt; endno; index ++)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5606354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e563d84294c75e61c23928dd2455e0ce?s=128&d=identicon&r=PG&f=1", "display_name": "W.W", "link": "https://stackoverflow.com/users/5606354/w-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1452105573, "accepted_answer_id": 34626073, "answer_count": 2, "score": -5, "last_activity_date": 1452057254, "creation_date": 1452049100, "last_edit_date": 1452053309, "question_id": 34624879, "link": "https://stackoverflow.com/questions/34624879/sum-of-the-all-the-numbers-between-a-and-b", "closed_reason": "Needs details or clarity", "title": "Sum of the all the numbers between a and b", "body": "<p>I need to create a program that gives the sum of the all the numbers between the constants of <code>a</code> and <code>b</code> given by the user.  <code>b</code> needs to be greater than <code>a</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main()\n{\n    int index, begno, endno, sum = 0;\n    printf(\"Program for sum of all numbers in the given range\\n\");\n\n    printf(\"Enter Beg. No.: \");\n    scanf(\"%d\", &amp;begno);\n    printf(\"Enter End. No.: \");\n    scanf(\"%d\", &amp;endno);\n    index = begno;\n\n    for(; index &lt;= endno; index ++)\n        sum = sum + index;\n\n    printf(\"The sum of even numbers between %d and %d is: %d\", begno, endno, sum);\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "recursion", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 581, "user_id": 2247221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fdf6c9917441f15f4d3b80eeedad3cc6?s=128&d=identicon&r=PG", "display_name": "RichardBruce", "link": "https://stackoverflow.com/users/2247221/richardbruce"}, "edited": false, "score": 0, "creation_date": 1452043735, "post_id": 34624158, "comment_id": 56994100, "body": "I cant really tell from the diff, but how much work does each task have? To pay off the overhead of threading you will need ~100,000&#39;s of cycles of work in each task"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 581, "user_id": 2247221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fdf6c9917441f15f4d3b80eeedad3cc6?s=128&d=identicon&r=PG", "display_name": "RichardBruce", "link": "https://stackoverflow.com/users/2247221/richardbruce"}, "edited": false, "score": 0, "creation_date": 1452045230, "post_id": 34624158, "comment_id": 56994552, "body": "Cutoff is at 48 for mult. and 120 for sqr.. Do you really think it is the overhead? I know that threading in Linux is not as lightweight as elsewhere but 10^5 ops per thread?"}, {"owner": {"reputation": 581, "user_id": 2247221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fdf6c9917441f15f4d3b80eeedad3cc6?s=128&d=identicon&r=PG", "display_name": "RichardBruce", "link": "https://stackoverflow.com/users/2247221/richardbruce"}, "edited": false, "score": 0, "creation_date": 1452060034, "post_id": 34624158, "comment_id": 56998788, "body": "My number came from an older versions of Intel&#39;s Thread Building Blocks documentation. It feels about right in my experience, you need quite a few cycle of work to use threading"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1452109320, "post_id": 34624158, "comment_id": 57028451, "body": "@HighPerformanceMark I didn&#39;t measure anything I just ran some simple Real-World-Tests(TM), expected from my experience with pthreads a small loss at most and was so baffled by the extremely large losses that I <i>really</i> thought I made something wrong. I took a short glimpse at libgomp and saw a lot of reasons for a large overhead, especially the large safety net that eats a lot. But implementing the thing by hand with pthreads is complicated, tedious, and error-prone, so OpenMP was definitely worth a try."}], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452048251, "creation_date": 1452043278, "last_edit_date": 1452048251, "question_id": 34624158, "link": "https://stackoverflow.com/questions/34624158/parallelizing-libtommaths-karatsuba-impl-with-openmp-failed", "title": "Parallelizing LibTomMath&#39;s Karatsuba impl. with OpenMP failed", "body": "<p>I thought I'll give OpenMP a try before I roll it myself but I (it?) failed quite miserably.</p>\n\n<p>The Karatsuba multiplying and squaring needed a small change to recurse to itself instead of to the common multiplication branches in <code>bn_mp_mul.c</code> and the addition of the OpenMP pragmas.</p>\n\n<p>Changes for Karatsuba multiplication as a diff (squaring is done in the same manner) to <a href=\"https://github.com/libtom/libtommath/tree/master\" rel=\"nofollow\">LibTomMath master</a>:</p>\n\n<pre><code>diff -rtbBw libtommath-master-original/bn_mp_mul.c libtommath-master/bn_mp_mul.c\n32a34,37\n&gt; #ifdef USE_OPEN_MP\n&gt; #include &lt;omp.h&gt;\n&gt;          #pragma omp parallel\n&gt;          #pragma omp master\n33a39,41\n&gt; #else\n&gt;          res = mp_karatsuba_mul(a, b, c);\n&gt; #endif\ndiff -rtbBw libtommath-master-original/bn_mp_karatsuba_mul.c  libtommath-master/bn_mp_karatsuba_mul.c 51a52,54\n&gt; #ifdef USE_OPEN_MP\n&gt;    int e1,e2;\n&gt; #endif\n57c60,62\n&lt; \n---\n&gt;    if (B &lt; KARATSUBA_MUL_CUTOFF) {\n&gt;       return mp_mul(a,b,c);\n&gt;    }\n120c125,135\n&lt;    if (mp_mul(&amp;x0, &amp;y0, &amp;x0y0) != MP_OKAY)\n---\n&gt; #ifdef USE_OPEN_MP\n&gt; #include &lt;omp.h&gt;\n&gt;    #pragma omp task shared(x0y0)\n&gt;    e1 = mp_karatsuba_mul(&amp;x0, &amp;y0, &amp;x0y0);\n&gt;    #pragma omp task shared(x1y1)\n&gt;    e2 = mp_karatsuba_mul(&amp;x1, &amp;y1, &amp;x1y1);\n&gt;    #pragma omp taskwait\n&gt;    if ((e1 != MP_OKAY) || (e2 != MP_OKAY))\n&gt;       goto X1Y1;\n&gt; #else\n&gt;    if (mp_karatsuba_mul(&amp;x0, &amp;y0, &amp;x0y0) != MP_OKAY)\n122c137\n&lt;    if (mp_mul(&amp;x1, &amp;y1, &amp;x1y1) != MP_OKAY)\n---\n&gt;    if (mp_karatsuba_mul(&amp;x1, &amp;y1, &amp;x1y1) != MP_OKAY)\n123a139\n&gt; #endif\n130,131d145\n&lt;    if (mp_mul(&amp;t1, &amp;x0, &amp;t1) != MP_OKAY)\n&lt;       goto X1Y1;          /* t1 = (x1 + x0) * (y1 + y0) */\n132a147,157\n&gt; #ifdef USE_OPEN_MP\n&gt; #include &lt;omp.h&gt;\n&gt;    #pragma omp task shared(t1)\n&gt;    e1 = mp_karatsuba_mul(&amp;t1, &amp;x0, &amp;t1);\n&gt;    #pragma omp taskwait\n&gt;    if (e1 != MP_OKAY)\n&gt;       goto X1Y1;\n&gt; #else\n&gt;    if (mp_karatsuba_mul(&amp;t1, &amp;x0, &amp;t1) != MP_OKAY)\n&gt;       goto X1Y1;          /* t1 = (x1 + x0) * (y1 + y0) */\n&gt; #endif\ndiff -rtbBw libtommath-master-original/makefile  libtommath-master/makefile\n17c17,19\n&lt; CFLAGS += -O3 -funroll-loops\n---\n&gt; #CFLAGS += -O3 -funroll-loops\n&gt; # the oficial macro is _OPENMP\n&gt; CFLAGS += -g3 -O3  -funroll-loops -fopenmp -DUSE_OPEN_MP\n</code></pre>\n\n<p>Using OpenMP's <code>task</code> as recommended by many for such a recursive function. A test with computing log(2) to 50,000 bits (with LibTomFloat) for one thread (by adding <code>num_threads(1)</code> after the <code>parallel</code>) gave the expected result on an AMD A8-6600K (with gcc-4.8.real (Ubuntu 4.8.4-2ubuntu1~14.04) 4.8.4 and Kernel Linux debian2 3.16.0-38-generic, all for 64-bit).</p>\n\n<pre><code>real    0m7.748s\nuser    0m7.728s\nsys 0m0.013s\n</code></pre>\n\n<p>But with more threads? Well...with two threads</p>\n\n<pre><code>real    0m8.025s\nuser    0m14.936s\nsys 0m0.060s\n</code></pre>\n\n<p>and with four threads</p>\n\n<pre><code>real    0m14.198s\nuser    0m48.224s\nsys 0m0.109s\n</code></pre>\n\n<p>You can see the CPUs sweating in a graphing system-monitor but to no avail here.</p>\n\n<p>I used the atanh() method to compute the constant log(2) in Libtomfloat and implemented the calculation of the acoth() with a binary splitting algorithm. <em>That</em> recursion works (switched off for the test above) and is also implemented with OpenMP's <code>task</code> in the same way as for the Karatsuba recursion. It does not gain much for log(2) (about 5%), but it gains at least <em>something</em> although the 5% are quite close to the statistical error.</p>\n\n<p>So, what did I do wrong here?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I ran some more tests to try the overhead as suggested by RichardBruce. With the Karatsube set to 250 (was 120 not 48, sorry RichardBruce) I get some optimum for Karatsuba with 1.1 min. real time (for 200k bits) for one and four threads and 1.5min. user time for four threads: no gain. With the cutoff set to 500 I get 1.5 min. real time for one thread and  1.3 with four threads and 2.3 min. user time with four threads: a relative gain but an absolute loss.</p>\n\n<p>I really didn't expect so much overhead from OpenMP. So is it handrolled pthreads or does anybody find a grave error?</p>\n"}, {"tags": ["c", "arrays", "memory", "unions"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1452042517, "post_id": 34624027, "comment_id": 56993723, "body": "Are you compiling as a 64-bit binary?"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 3, "creation_date": 1452042758, "post_id": 34624027, "comment_id": 56993794, "body": "I&#39;m guessing the compiler has a limit of <code>0x7fffffff</code> bytes on the size of statically-sized arrays. To fix this, the union should contain pointer elements, which point to the start of the appropriate array (<code>union { char* c; uint8_t* u8, ...} Typ; Typ foo; foo.u8 = calloc(sizeof(foo.u8), NUMBER_OF_ELEMENTS);</code>)"}, {"owner": {"reputation": 549, "user_id": 5624836, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0c64388f8bc649d7aa0d2a73af663bbc?s=128&d=identicon&r=PG&f=1", "display_name": "TimFinnegan", "link": "https://stackoverflow.com/users/5624836/timfinnegan"}, "edited": false, "score": 0, "creation_date": 1452043012, "post_id": 34624027, "comment_id": 56993878, "body": "Yes, I try to compile with x64 but 2GB memory should normally work also on 32bit."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1452048987, "post_id": 34624027, "comment_id": 56995559, "body": "@TimFinnegan: On normal Windows x86 setups, 2 GB is the total user mode virtual memory space for the whole process. You couldn&#39;t create an array that large though, because some of that 2 GB is reserved (to make <code>NULL</code> dereference invalid, and at end to avoid issues with pointer arithmetic wrapping), some is occupied by the stack, the heap, and the rest of the program (and all the DLLs it uses, which may be scattered around by ASLR). In practice, 32 bit code relying on &gt;1.5GB of contiguous address space being available, even at program startup, is stupidly optimistic; I&#39;d stick to 1 GB or less."}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 1, "creation_date": 1452057585, "post_id": 34624027, "comment_id": 56997914, "body": "Another strategy that you can consider is just to have a void* pointer and fill it with whatever the heck you want, then access specialized data types with a getter. For example, <code>asChar()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": true, "score": 4, "last_activity_date": 1452057584, "last_edit_date": 1452057584, "creation_date": 1452056762, "answer_id": 34625991, "question_id": 34624027, "link": "https://stackoverflow.com/questions/34624027/how-to-create-a-fast-huge-union-array-without-wasting-memory-in-c/34625991#34625991", "title": "How to create a fast &amp; huge union array without wasting memory in C?", "body": "<blockquote>\n  <p>I'd like to store different datatypes in the same memory using union. This array has a fixed length</p>\n</blockquote>\n\n<p>Going by the code you posted, the arrays have the same <em>byte</em>-length, but hold <em>different</em> number of elements based on their type.</p>\n\n<blockquote>\n  <p>I receive an error C2148: total size of array must not exceed 0x7fffffff bytes.</p>\n</blockquote>\n\n<p>If I were to guess, this might be related to the 2 GB limit on <em>static</em> data that applies even to 64-bit compiles, meaning that a union of type <code>array_type</code> could never be instantiated as either a global/static variable, or a local/stack one (<a href=\"https://software.intel.com/en-us/articles/memory-limits-applications-windows\" rel=\"nofollow\">Memory Limits for Applications on Windows</a>). Which, in the end, means that the only choice left is to allocate such an array dynamically on the heap.</p>\n\n<blockquote>\n  <p>But with this version I might waste memory\n  <br>...or need to build a time-consuming function that calculates the both indices</p>\n</blockquote>\n\n<p>You could achieve (nearly) the same effect by slightly modifying the <code>union</code> definition, without memory waste and without additional accessors.</p>\n\n<pre><code>#define RESERVED_BYTES 2147483648\n\ntypedef union {\n    void *pv;\n    char *pc;\n    uint8_t *pu8;\n    uint16_t *pu16;\n} parray_type;\n\nint main(void)\n{\n    parray_type parray;\n    parray.pv = calloc(RESERVED_BYTES, 1);\n\n    // last element in allocated buffer for each type\n    char c = parray.pc[RESERVED_BYTES - 1];\n    uint8_t u8 = parray.pu8[RESERVED_BYTES - 1];\n    uint16_t u16 = parray.pu16[RESERVED_BYTES / 2 - 1];\n\n    return 0;\n}\n</code></pre>\n\n<p>Of course, you'll have to always remember that the max index for <code>pu16</code> is half that of <code>pc</code> and <code>pu8</code> but that's the premise in the original code as well.</p>\n"}], "owner": {"reputation": 549, "user_id": 5624836, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0c64388f8bc649d7aa0d2a73af663bbc?s=128&d=identicon&r=PG&f=1", "display_name": "TimFinnegan", "link": "https://stackoverflow.com/users/5624836/timfinnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 34625991, "answer_count": 1, "score": 0, "last_activity_date": 1452057584, "creation_date": 1452042326, "last_edit_date": 1452056985, "question_id": 34624027, "link": "https://stackoverflow.com/questions/34624027/how-to-create-a-fast-huge-union-array-without-wasting-memory-in-c", "title": "How to create a fast &amp; huge union array without wasting memory in C?", "body": "<p>I'd like to store different datatypes in the same memory using <code>union</code>. This array has a fixed length and shall be accessed quickly and shall waste as little memory as possible.</p>\n\n<p>I will define areas in which the same datatypes are stored. So I do this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;inttypes.h&gt;\n\n#define RESERVED_BYTES 1073741824\n//#define RESERVED_BYTES 2147483648\n\ntypedef union {\n    char c[RESERVED_BYTES];             //1Byte\n    uint8_t u8[RESERVED_BYTES];         //1Byte\n    uint16_t u16[RESERVED_BYTES / 2];   //2Byte\n} array_type;\n\nint main(void)\n{\n    array_type *array;\n    array = calloc(1, sizeof(array_type));\n\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>This code works and allocates 1GB of memory and the elements of that array can be used with <code>array[0].u8[3]</code> e.g. I know I have to take care of indices because they depend on the byte-size.</p>\n\n<p>Sadly the code fails to compile if I increase the memory size(see <code>#define RESERVED_BYTES 2147483648</code>) and with MSVS 2013 on a 64bit machine I receive an <code>error C2148: total size of array must not exceed 0x7fffffff bytes</code>. On the other hand it is no problem to put the 2GB straight into the <code>calloc</code> like that <code>array = calloc(2147483648, sizeof(*array));</code>.</p>\n\n<p>But with this version I might waste memory:</p>\n\n<pre><code>union {\n    char c;             //1Byte\n    uint8_t u8;         //1Byte\n    uint16_t u16;   //2Byte\n} *array;\n</code></pre>\n\n<p>or need to build a time-consuming function that calculates the both indices I want to avoid:</p>\n\n<pre><code>union {\n    char c[2];             //1Byte\n    uint8_t u8[2];          //1Byte\n    uint16_t u16[1];    //2Byte\n} *array;\narray[3].u8[2] = 1;\n</code></pre>\n\n<p>So how to deal with that issue?</p>\n"}, {"tags": ["python", "c", "linux", "subprocess", "fsync"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452048654, "post_id": 34623639, "comment_id": 56995461, "body": "&quot;all open C streams with unwritten buffered data are flushed, all open C streams are closed&quot;. Aren&#39;t there two statements there saying that the streams are both flushed and closed? The <a href=\"http://man7.org/linux/man-pages/man3/exit.3.html\" rel=\"nofollow noreferrer\">Linux exit man page</a> has similar wording: &quot;All open stdio(3) streams are flushed and closed.&quot;"}, {"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452279711, "post_id": 34623639, "comment_id": 57114616, "body": "Neither a flush nor a close is the same as a call to fsync(), so it&#39;s possible that after the process exits, the OS will keep the data in its own buffers for some amount of time, and not write it onto the physical disk until later. While the data is in an OS buffer and not yet physically on the disk, is it visible to other processes?"}], "answers": [{"comments": [{"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1452109898, "post_id": 34626301, "comment_id": 57028831, "body": "So the OS doesn&#39;t guarantee that data gets written to disk when you close a file descriptor, but it does guarantee that all other readers on the filesystem will see your writes?"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1452135446, "post_id": 34626301, "comment_id": 57038943, "body": "@interfect: <code>close(fd)</code> is unrelated. Yes, after successful <code>write(fd, data)</code> there is no guarantee that the data is written to disk physically  but it doesn&#39;t prevent you from reading it back."}, {"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1452199928, "post_id": 34626301, "comment_id": 57075471, "body": "What about other processes reading it back? Is the buffer holding the data not yet committed to disk global, or per-process? What I&#39;m worried is that the filesystem may provide only read-your-own-writes consistency, and may re-order writes and reads by different processes arbitrarily. See for eample the question and answer here <a href=\"http://stackoverflow.com/a/19406462/402891\">stackoverflow.com/a/19406462/402891</a> about data not being readable by another process when it receives an inotify message that a file has been closed."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1452230414, "post_id": 34626301, "comment_id": 57085588, "body": "@interfect: again, the answer you&#39;ve linked is completely unrelated to your case (it discusses when the data is written <i>physically</i> to disk). Yes, <a href=\"http://goo.gl/Pavl03\" rel=\"nofollow noreferrer\">if you write to the same file from different processes without synchronization then there is no definite order</a>. I don&#39;t see how it is relevant to your case: only the child writes to the file and only the parent reads from the file after the child is already dead in your case -- the order is fixed -- it is the order used by the child."}, {"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1452279306, "post_id": 34626301, "comment_id": 57114383, "body": "The discussion there is using &quot;on disk&quot; as a synonym for &quot;can be read by another process&quot;; in that case, a process is getting a notification that another process has closed a file, but cannot see the data that the other process has written. Whether the data is physically on disk or in a shared cache is not really what they&#39;re getting at there. That answer provides some evidence that a write and a close from one process that happen before a read from another can be placed after it by the OS; I want to know if the death of one process in the intervening time adds additional ordering guarantees."}, {"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1452279903, "post_id": 34626301, "comment_id": 57114722, "body": "Just to be clear, I see that you&#39;re asserting that the data should indeed be readable by other processes, because the relevant OS buffers are shared between processes. But what&#39;s your source for that assertion? Is there a place in a spec or the Linux documentation you can point to that guarantees that those buffers are shared?"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 1, "creation_date": 1452280779, "post_id": 34626301, "comment_id": 57115185, "body": "@interfect:  look for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html\" rel=\"nofollow noreferrer\"><i>&quot;After a write() to a regular file has successfully returned&quot;</i></a>"}, {"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1452538205, "post_id": 34626301, "comment_id": 57203755, "body": "&quot;Any successful read() from each byte position in the file that was modified by that write shall return the data specified by the write() for that position until such byte positions are again modified.&quot;  That sure sounds like other processes should also be able to see the data with a read."}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 1, "last_activity_date": 1456597777, "last_edit_date": 1495540236, "creation_date": 1452058530, "answer_id": 34626301, "question_id": 34623639, "link": "https://stackoverflow.com/questions/34623639/redirected-output-from-a-subprocess-call-getting-lost/34626301#34626301", "title": "Redirected output from a subprocess call getting lost?", "body": "<p>Yes, there could be minutes before the data is written to the disk (physically). But you can read it long before that.</p>\n\n<p>Unless you are worrying about a power failure or a kernel panic; it doesn't matter whether the data is on disk. The important part whether the kernel thinks that the data is written.</p>\n\n<p>It is safe to read from the file as soon as <code>check_call()</code> returns. If you don't see all the data; it may indicate a bug in <code>bcftools</code> or that <code>writeGlobalFile()</code> doesn't upload all the data from the file. You could try to workaround the former by disabling the block-buffering mode for <code>bsftools</code>' stdout (<a href=\"https://stackoverflow.com/a/12471855/4279\">provide a pseudo-tty, use <code>unbuffer</code> command-line utility, etc</a>).</p>\n\n<blockquote>\n  <p><strong>Q:</strong> Is my reading of the specs correct? Can a child process appear to its parent to have terminated before its redirected standard output is available on disk?</p>\n</blockquote>\n\n<p>yes. yes.</p>\n\n<blockquote>\n  <p><strong>Q:</strong> Is it possible to somehow wait until all data written by the child process to files has actually been synced to disk by the OS?</p>\n</blockquote>\n\n<p>no. <code>fsync()</code> is not enough in the general case. Likely, you don't need it anyway (reading data back is a different issue, from making sure that it is written to disk). </p>\n\n<blockquote>\n  <p><strong>Q:</strong> Should I be calling flush() or some Python version of fsync() on the parent process's copy of the file object? Can that force writes to the same file descriptor by child processes to be committed to disk?</p>\n</blockquote>\n\n<p>It would be pointless. <code>.flush()</code> flushes buffers that are internal to the parent process (you can use <code>open(filename, 'wb', 0)</code> to avoid creating unnecessary buffers in the parent).</p>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fsync.html\" rel=\"nofollow noreferrer\"><code>fsync()</code></a> works on a file descriptor (the child has its own file descriptor). I don't know whether the kernel uses different buffers for different file descriptors referring to the same disk file. Again, it doesn't matter -- if you observe data missing (no-crashes); <code>fsync()</code> won't help here.</p>\n\n<blockquote>\n  <p><strong>Q:</strong> Just to be clear, I see that you're asserting that the data should indeed be readable by other processes, because the relevant OS buffers are shared between processes. But what's your source for that assertion? Is there a place in a spec or the Linux documentation you can point to that guarantees that those buffers are shared? </p>\n</blockquote>\n\n<p>Look for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html\" rel=\"nofollow noreferrer\"><em>\"After a <code>write()</code> to a regular file has successfully returned\"</em></a>:</p>\n\n<blockquote>\n  <p><em>Any successful <code>read()</code> from each byte position in the file that was\n  modified by that write shall return the data specified by the <code>write()</code>\n  for that position until such byte positions are again modified.</em></p>\n</blockquote>\n"}], "owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 34626301, "answer_count": 1, "score": 1, "last_activity_date": 1456597777, "creation_date": 1452039706, "last_edit_date": 1456506442, "question_id": 34623639, "link": "https://stackoverflow.com/questions/34623639/redirected-output-from-a-subprocess-call-getting-lost", "title": "Redirected output from a subprocess call getting lost?", "body": "<p>I have some Python code that goes roughly like this, using some libraries that you may or may not have:</p>\n\n<pre><code># Open it for writing\nvcf_file = open(local_filename, \"w\")\n\n# Download the region to the file.\nsubprocess.check_call([\"bcftools\", \"view\",\n    options.truth_url.format(sample_name), \"-r\",\n    \"{}:{}-{}\".format(ref_name, ref_start, ref_end)], stdout=vcf_file)\n\n# Close parent process's copy of the file object\nvcf_file.close()\n\n# Upload it\nfile_id = job.fileStore.writeGlobalFile(local_filename)\n</code></pre>\n\n<p>Basically, I'm starting a subprocess that's supposed to go download some data for me and print it to standard out. I'm redirecting that data to a file, and then, as soon as the subprocess call returns, I'm closing my handle to the file and then copying the file elsewhere.</p>\n\n<p><strong>I'm observing that, sometimes, the tail end of the data I'm expecting isn't making it into the copy.</strong> Now, it's possible that <code>bcftools</code> is just occasionally not writing that data, but I'm worried that I might be doing something unsafe and somehow getting access to the file after <code>subprocess.check_call()</code> has returned, but <em>before</em> the data that the child process writes to standard output makes it onto the disk where I can see it.</p>\n\n<p>Looking at the C standard (since bcftools is implemented in C/C++), it looks like when a program exits normally, all open streams (including standard output) are flushed and closed. See the <code>[lib.support.start.term]</code> section <a href=\"http://www.open-std.org/jtc1/sc22/open/n2356/lib-support.html\" rel=\"nofollow\">here</a>, describing the behavior of <code>exit()</code>, which is called implicitly when <code>main()</code> returns:</p>\n\n<blockquote>\n  <p>--Next, all open C streams (as mediated  by  the  function  signatures\n      declared  in ) with unwritten buffered data are flushed, all\n      open C streams are closed, and all files  created  by  calling  tmp-\n      file() are removed.30)</p>\n  \n  <p>--Finally,  control is returned to the host environment.  If status is\n      zero or EXIT_SUCCESS, an implementation-defined form of  the  status\n      successful  termination  is returned.  If status is EXIT_FAILURE, an\n      implementation-defined form of the status  unsuccessful  termination\n      is     returned.      Otherwise     the     status    returned    is\n      implementation-defined.31)</p>\n</blockquote>\n\n<p>So before the child process exits, it closes (and thus flushes) standard output.</p>\n\n<p>However, the <a href=\"http://man7.org/linux/man-pages/man2/close.2.html\" rel=\"nofollow\">manual page</a> for Linux <code>close(2)</code> notes that closing a file descriptor does not necessarily guarantee that any data written to it has actually made it to disk:</p>\n\n<blockquote>\n  <p>A successful close does not guarantee that the data has been\n         successfully saved to disk, as the kernel defers writes.  It is not\n         common for a filesystem to flush the buffers when the stream is\n         closed.  If you need to be sure that the data is physically stored,\n         use fsync(2).  (It will depend on the disk hardware at this point.)</p>\n</blockquote>\n\n<p>Thus, it would appear that, when a process exits, its standard output stream is flushed, but if that stream is actually backed by a file descriptor pointing to a file on disk, the write to disk is not guaranteed to have completed. I suspect that that may be what is going on here.</p>\n\n<p><strong>So, my actual questions:</strong></p>\n\n<ol>\n<li><p>Is my reading of the specs correct? Can a child process appear to its parent to have terminated before its redirected standard output is available on disk?</p></li>\n<li><p>Is it possible to somehow wait until all data written by the child process to files has actually been synced to disk by the OS?</p></li>\n<li><p>Should I be calling <code>flush()</code> or some Python version of <code>fsync()</code> on the parent process's copy of the file object? Can that force writes to the same file descriptor by child processes to be committed to disk?</p></li>\n</ol>\n"}, {"tags": ["c", "fifo", "named"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1452057463, "post_id": 34623536, "comment_id": 56997880, "body": "There is EOF because there is no more data and no writes into pipe possible because it isn&#39;t opened for writing anywhere. Check out <a href=\"http://stackoverflow.com/a/34327108/744720\">stackoverflow.com/a/34327108/744720</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1452069090, "post_id": 34623536, "comment_id": 57002553, "body": "this line: <code>perror(&quot;argument error&quot;);</code> is rather useless to the user of the program.  Suggest something similar to: <code>fprintf( stderr, &quot;Usage %s &lt;input file&gt; &lt;output file&gt;\\n&quot;, argv[0] );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1452069172, "post_id": 34623536, "comment_id": 57002619, "body": "regarding these lines: <code>if( (fdOut = open(argv[2], O_WRONLY ) )&lt;0)     {         perror(&quot;pipe input error open&quot;);         exit(1);     }</code>,  the text in the call to <code>perror()</code> is not correct, (probably a copy-and-paste error)"}], "owner": {"reputation": 231, "user_id": 5601739, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8b3c899ed5f481c971c85c92794a1c5?s=128&d=identicon&r=PG&f=1", "display_name": "gino gino", "link": "https://stackoverflow.com/users/5601739/gino-gino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452039013, "creation_date": 1452039013, "question_id": 34623536, "link": "https://stackoverflow.com/questions/34623536/named-fifo-c-issue", "title": "named fifo C issue", "body": "<p>I have this C code:</p>\n\n<pre><code>#define BUFSIZE 256\n\nint main ( int argc, char *argv[])\n{\n    int fdIn;\n    int fdOut;\n\n    if( argc != 3)\n    {\n        perror(\"argument error\");\n        exit(1);\n    }\n\n    if( (fdIn = open(argv[1], O_RDONLY ) )&lt;0)\n    {\n        perror(\"pipe input error open\");\n        exit(1);\n    }\n\n    if( (fdOut = open(argv[2], O_WRONLY ) )&lt;0)\n    {\n        perror(\"pipe input error open\");\n        exit(1);\n    }\n\n\n    int c = 2;\n    while(c--)\n    {\n        char var1[BUFSIZE];\n        char var2[BUFSIZE];\n        char string[100];\n\n        memset(var1, 0, sizeof(var1));\n        memset(var2, 0, sizeof(var2));\n        memset(string, 0, sizeof(string));\n\n        if( readLine(fdIn, var1, sizeof(var1)) == 0)\n        {\n            printf(\"exit1\\n\");\n            exit(0);\n        }\n\n        if( readLine(fdIn, var2, sizeof(var2)) == 0)\n        {\n            printf(\"exit2\\n\");\n            exit(0);\n        }\n\n        removeNewLine(var1);\n        removeNewLine(var2);\n\n        printf(\"%s\\n\",var1);\n        printf(\"%s\\n\",var2);\n\n        int n = atoi(var1);\n        int m = atoi(var2);\n\n        if (n!=0 &amp;&amp; m % n == 0 ) {\n\n            sprintf(string,\"multiple\\n\");\n\n        }\n        else{\n            sprintf(string,\"negative\\n\");\n\n        }\n\n        printf(\"%s\", string);\n        writeLine(fdOut, string, strlen(string));\n    }\n    close(fdOut);\n    close(fdIn);\n    exit(0);\n}\n</code></pre>\n\n<p>This program accepts 2 inputs: first is input fifo's name and second is output fifo's name.\nThis program does this: reads in the input fifo 2 numbers and then establishes if second number is multiple of first number and then writes on output fifo \"multiple\" or \"negative\".\nThis all for 2 times; my problem is when it executed the second loop where the first <code>ReadLine</code> returns 0 and it prints <code>exit1</code>.\nthe program should not stop on the <code>readLine</code> pending content in the FIFO?</p>\n\n<p>functions used in the program:</p>\n\n<pre><code>int readLine( int fd, char* str, int bufferSize)\n{\n    return readToDel(fd, '\\n', str, bufferSize);\n}\n\nint readToDel( int fd, char delimiter, char* str, int bufferSize)\n{\n    int n;\n    int byteLetti =0;\n    int index=0;\n\n\n\n    do /* Read characters until NULL or end-of-input */\n    {\n\n        if( (n = read (fd, str+index, 1)) &lt; 0)\n        {\n            perror(\"Errore: lettura dal file descriptor fallita\");\n            exit(1);\n        }\n        byteLetti+=n;\n\n    }\n    while (n &gt; 0 &amp;&amp; *(str+index++) != delimiter &amp;&amp; index &lt; bufferSize);     \n    return byteLetti; /* Return false if end-of-input */\n}\n</code></pre>\n\n<p>For testing this program I do like this:\nopen first terminal and I write in the input fifo in this way: </p>\n\n<pre><code>echo \"4\" &gt; input \necho \"8\" &gt; input\n</code></pre>\n\n<p>then open other terminal and I execute the program in this way:</p>\n\n<pre><code>./program input output\n</code></pre>\n\n<p>and when the program is blocked on <code>writeLine(fdOut, string, strlen(string));</code> ( because there isn't reader on output fifo) open other terminal and I do : <code>cat output</code></p>\n\n<p>and the I get(based on those input):</p>\n\n<pre><code>multiple\nexit1\n</code></pre>\n\n<p>and I dont understand why.\nshould not wait until more input on input fifo?</p>\n"}, {"tags": ["c", "macos", "debugging", "gdb", "lldb"], "comments": [{"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 1, "creation_date": 1452038209, "post_id": 34623379, "comment_id": 56992383, "body": "Do you have symbolic debugging information enabled in the executable?"}, {"owner": {"reputation": 53, "user_id": 4039978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78436a862086b55d3ba8da33fcc25aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Vorbide", "link": "https://stackoverflow.com/users/4039978/vorbide"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1452038345, "post_id": 34623379, "comment_id": 56992430, "body": "I don&#39;t know, does it has something to do with my ~/.lldbinit config file ?"}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1452039498, "post_id": 34623379, "comment_id": 56992823, "body": "You do have debug information.  You can tell because lldb found a file &amp; line number for your breakpoint.  If you didn&#39;t have debug info it would only be an address."}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 5325222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oGTZH.png?s=128&g=1", "display_name": "Andy Piper", "link": "https://stackoverflow.com/users/5325222/andy-piper"}, "edited": false, "score": 0, "creation_date": 1569345772, "post_id": 34623591, "comment_id": 102564582, "body": "I see this when debugging arducopter on macOS. Is there now an option to prevent this? It&#39;s driving me mad!"}, {"owner": {"reputation": 467, "user_id": 5325222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oGTZH.png?s=128&g=1", "display_name": "Andy Piper", "link": "https://stackoverflow.com/users/5325222/andy-piper"}, "edited": false, "score": 0, "creation_date": 1569346281, "post_id": 34623591, "comment_id": 102564784, "body": "Ahh I see that <a href=\"https://stackoverflow.com/a/57065760/5325222\">stackoverflow.com/a/57065760/5325222</a> has the answer"}], "tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 2, "last_activity_date": 1452039335, "creation_date": 1452039335, "answer_id": 34623591, "question_id": 34623379, "link": "https://stackoverflow.com/questions/34623379/weird-lldb-behavior-comparing-to-gdb-c/34623591#34623591", "title": "Weird lldb behavior (comparing to gdb) C", "body": "<p>Looks like your program re-exec's itself - maybe this is actually something that ASAN is doing for you?  You can see this in the lldb output, where it says:</p>\n\n<pre><code>* thread #1: tid = 0x43c1e7, 0x00007fff5fc01000 dyld`_dyld_start,\n                   stop reason = exec\n</code></pre>\n\n<p>If you had actually hit your breakpoint, the reason would be <code>stop reason = breakpoint 1.1</code> or whatever breakpoint number was appropriate.</p>\n\n<p>In lldb, we stop on re-exec, my guess is gdb auto-continues after an exec, which is why you didn't notice this in gdb.  You should be able to continue, and you will hit your real breakpoint in a bit.</p>\n\n<p>Might be a good idea to have a setting to control whether to continue past exec or not.  Feel free to file a bug with the lldb.llvm.org bug reporter.</p>\n"}], "owner": {"reputation": 53, "user_id": 4039978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78436a862086b55d3ba8da33fcc25aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Vorbide", "link": "https://stackoverflow.com/users/4039978/vorbide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 34623591, "answer_count": 1, "score": 0, "last_activity_date": 1452039335, "creation_date": 1452038114, "question_id": 34623379, "link": "https://stackoverflow.com/questions/34623379/weird-lldb-behavior-comparing-to-gdb-c", "title": "Weird lldb behavior (comparing to gdb) C", "body": "<p>I come from freebsd and I'm used to debug with GDB, unfortunately, GDB is not natif on my macbook, I wanted to debug using LLDB.</p>\n\n<p>Unfortunately, I don't understand this weird behavior :</p>\n\n<p>When I launch a C program and I breakpoint on one function, and then I launch it using \"run\", I go to the breakpoint but then it appears that I can read through but in the assembly code = hard debuging, not like in GDB where it is straight line by line => easy debuging</p>\n\n<p>look at the .c, (I know this code is awful but it's not the point, it's just for trying to set lldb properly)</p>\n\n<pre><code>int ft_count_point(char *m, int i)\n{\n    int count;\n    int count_c;\n\n    count = 0;\n    count_c = 0;\n    while (m[i] != '\\0' || (m[i] != '\\n' &amp;&amp; m[i + 1] != '\\n'))\n    {\n        if (m[i] == '.')\n        {\n            count_c++;\n            count++;\n        }\n        if (m[i] == '\\n' || m[i] == '#')\n            count++;\n        i++;\n    }\n    if (count != 20 &amp;&amp; count_c != 16)\n        return (1);\n    exit (0);\n}\n</code></pre>\n\n<p>The main function contains only a call on this fonction and return 0.</p>\n\n<p>Look at what I get using lldb with a breakpoint on ft_count_point:</p>\n\n<pre><code>(lldb) target create \"./a.out\"\nCurrent executable set to './a.out' (x86_64).\n(lldb) settings set -- target.run-args  \"tests/error1\"\n(lldb) b ft_count_point\nBreakpoint 1: where = a.out`ft_count_point + 35\n    at ft_count_point.c:5, address = 0x00000001000073e3\n(lldb) r\nProcess 17302 launched: './a.out' (x86_64)\nAddressSanitizer debugger support is active. Memory error breakpoint\nhas been installed and you can now use the 'memory history' command.\nProcess 17302 stopped\n* thread #1: tid = 0x43c1e7, 0x00007fff5fc01000 dyld`_dyld_start,\n                   stop reason = exec\n    frame #0: 0x00007fff5fc01000 dyld`_dyld_start\ndyld`_dyld_start:\n-&gt;  0x7fff5fc01000 &lt;+0&gt;: popq   %rdi\n    0x7fff5fc01001 &lt;+1&gt;: pushq  $0x0\n    0x7fff5fc01003 &lt;+3&gt;: movq   %rsp, %rbp\n    0x7fff5fc01006 &lt;+6&gt;: andq   $-0x10, %rsp\n</code></pre>\n\n<p>I can go step by step into this but seriously, it's a waste of time.</p>\n"}, {"tags": ["c", "function", "pointers", "linked-list", "function-pointers"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1452037138, "post_id": 34623203, "comment_id": 56992016, "body": "Do not <code>typedef</code> pointers. It makes it hard to tell what is a pointer and what is a double pointer. Also, add braces to the <code>while</code> block, it&#39;s really confusing as it is."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1452037373, "post_id": 34623203, "comment_id": 56992111, "body": "Rather than making us explain the code line by line it would be best if you can tell us what specifically you don&#39;t understand. And have you walked through the code in a debugger or even on paper?"}, {"owner": {"reputation": 31, "user_id": 5153964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0947563360713375d240e273e42802d0?s=128&d=identicon&r=PG&f=1", "display_name": "TheColloto", "link": "https://stackoverflow.com/users/5153964/thecolloto"}, "edited": false, "score": 0, "creation_date": 1452037601, "post_id": 34623203, "comment_id": 56992192, "body": "Yes, I walked trough the code using debugger and paper, my problem is to understand, how here pointers are working."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452037733, "post_id": 34623203, "comment_id": 56992231, "body": "I don&#39;t think this is the real code. Don&#39;t use single characters as specifiers, you can&#39;t be that lazy since your editor very likely helps you with it&#39;s autocompleter."}, {"owner": {"reputation": 31, "user_id": 5153964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0947563360713375d240e273e42802d0?s=128&d=identicon&r=PG&f=1", "display_name": "TheColloto", "link": "https://stackoverflow.com/users/5153964/thecolloto"}, "edited": false, "score": 0, "creation_date": 1452038970, "post_id": 34623203, "comment_id": 56992656, "body": "Yes, this is real code from study, but everything&#39;s hard in the beginning. In this example, the hardest are still pointers."}, {"owner": {"reputation": 35158, "user_id": 395202, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c422b640dd62b019c125836b1059e231?s=128&d=identicon&r=PG", "display_name": "Adrian Shum", "link": "https://stackoverflow.com/users/395202/adrian-shum"}, "edited": false, "score": 0, "creation_date": 1452047132, "post_id": 34623203, "comment_id": 56995073, "body": "what is the meaning for <code>el</code>, <code>elListy</code>, <code>zm</code>, <code>k</code> etc? First thing you need to do is to rename everything to something meaningful, and it will help you to understand with a lot less effort"}], "answers": [{"tags": [], "owner": {"reputation": 312, "user_id": 4937663, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-YSvZC4-OU58/AAAAAAAAAAI/AAAAAAAAADc/VdJ7JGPckN4/photo.jpg?sz=128", "display_name": "Andrea Martinelli", "link": "https://stackoverflow.com/users/4937663/andrea-martinelli"}, "is_accepted": true, "score": 0, "last_activity_date": 1452041082, "last_edit_date": 1452041082, "creation_date": 1452040468, "answer_id": 34623775, "question_id": 34623203, "link": "https://stackoverflow.com/questions/34623203/c-linked-list-understending-how-to-delete-the-same-element-on-list/34623775#34623775", "title": "C Linked List - understending, how to delete the same element on list", "body": "<p>I didn't tried it, but I'm happy to help you. Let's take a look. As other users suggest, double typedef is really annoying; code isn't clear at all and it's more complex to understand what this code do. The struct composition is about a key, a label, and a pointer to the next struct. The function <code>delete()</code> is comparing his <code>int zm</code>, which takes it as argument, with any node of the linked list. The second argument is the linked list root pointer, or the start pointer.</p>\n\n<p>About the function:\nIn words, the function is reading any value (key) of the linked list and comparing it to the int zm. If key is different, (*k) will be the next pointer. This method permitts to read every node from the starting node argument. Take care in the last line where <code>n</code> should be <code>next</code>.</p>\n\n<p>If key and zm are equals, the function free the node of the list with the <code>free()</code> function (because linked list node are usually build with malloc or calloc function) and set that the value of k - which is a double pointer and (*k), the value of the first pointer, is also a pointer - point to the next one, in order to check next node and delete it if needed.</p>\n\n<p>In particular, if zm is equals to the key, the function:</p>\n\n<ul>\n<li><p>saves the value of the pointer in the p variable;</p></li>\n<li><p>set that k points to the next struct, because the while condition is configured on the k value and it is possible to find 2 or more nodes with the same key;</p></li>\n<li><p>free the correct memory pointed by p;</p></li>\n</ul>\n\n<p>It is important to focus on two things:\n1) setting that the k values points to the next struct is important because prevents the code to not stop to the first value it finds.\n2) the while condition, (*k), means you are checking the value of k, which is a pointer, until it is NULL, which means the end.</p>\n\n<p>Hope it's clear enough, I'm here for other help.</p>\n"}, {"comments": [{"owner": {"reputation": 35158, "user_id": 395202, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c422b640dd62b019c125836b1059e231?s=128&d=identicon&r=PG", "display_name": "Adrian Shum", "link": "https://stackoverflow.com/users/395202/adrian-shum"}, "edited": false, "score": 0, "creation_date": 1452047297, "post_id": 34624450, "comment_id": 56995108, "body": "<code>elment</code>? Make sure you have correct spelling if you are trying to make thing clearer"}, {"owner": {"reputation": 35158, "user_id": 395202, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c422b640dd62b019c125836b1059e231?s=128&d=identicon&r=PG", "display_name": "Adrian Shum", "link": "https://stackoverflow.com/users/395202/adrian-shum"}, "edited": false, "score": 0, "creation_date": 1452047973, "post_id": 34624450, "comment_id": 56995271, "body": "well, actually no.  and your change in logic seems flawed too: if it is the first node to be removed, <code>l</code> is not updated accordingly and it lost the reason to pass the ptr-to-ptr-to-node as input param."}, {"owner": {"reputation": 35158, "user_id": 395202, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c422b640dd62b019c125836b1059e231?s=128&d=identicon&r=PG", "display_name": "Adrian Shum", "link": "https://stackoverflow.com/users/395202/adrian-shum"}, "edited": false, "score": 0, "creation_date": 1452049063, "post_id": 34624450, "comment_id": 56995573, "body": "so you are 1. not illustrating the original code of OP, 2. not cleaning up the original code to make it easier to understand (as the whole logic changed), 3. your new logic is flawed.  Sorry I cannot assume your answer to be relevant"}, {"owner": {"reputation": 35158, "user_id": 395202, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c422b640dd62b019c125836b1059e231?s=128&d=identicon&r=PG", "display_name": "Adrian Shum", "link": "https://stackoverflow.com/users/395202/adrian-shum"}, "edited": false, "score": 0, "creation_date": 1452053001, "post_id": 34624450, "comment_id": 56996568, "body": "it is better but still you are : 1. not illustrating the original code of OP, 2. not cleaning up the original code to make it easier to understand (as the whole logic changed)"}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": -1, "last_activity_date": 1452052392, "last_edit_date": 1452052392, "creation_date": 1452045569, "answer_id": 34624450, "question_id": 34623203, "link": "https://stackoverflow.com/questions/34623203/c-linked-list-understending-how-to-delete-the-same-element-on-list/34624450#34624450", "title": "C Linked List - understending, how to delete the same element on list", "body": "<p>AT YOUR OWN RISK!!!</p>\n\n<pre><code>// sory i have chaged the names, this will make it litle bit clearer\n\ntypedef struct elment elment, *p_elment;\n\ntypedef p_elment *list;\n\nstruct elment{\n    int         key;\n    p_elment    next;\n    p_elment    prev; // you will need it;\n};\n\n\nvoid delete(list *l, int zm) {\n\n    p_elment    k,p;\n\n    k = (p_elment) *l; // cast to avoid warnings\n\n    while (k){\n        p = k;\n        k=k-&gt;next;\n\n        if (p-&gt;key == zm) {\n\n            if (*l == p) \n                  *l=p-&gt;next;\n\n            if(p-&gt;prev)\n                p-&gt;prev-&gt;next = p-&gt;next;\n\n            if(p-&gt;next)\n                p-&gt;next-&gt;prev = p-&gt;prev;\n\n            free(p);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5153964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0947563360713375d240e273e42802d0?s=128&d=identicon&r=PG&f=1", "display_name": "TheColloto", "link": "https://stackoverflow.com/users/5153964/thecolloto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1452209621, "accepted_answer_id": 34623775, "answer_count": 2, "score": -1, "last_activity_date": 1452052392, "creation_date": 1452036985, "last_edit_date": 1452037266, "question_id": 34623203, "link": "https://stackoverflow.com/questions/34623203/c-linked-list-understending-how-to-delete-the-same-element-on-list", "closed_reason": "Needs details or clarity", "title": "C Linked List - understending, how to delete the same element on list", "body": "<p>Can someone tell my, how it's possible, that this function is working ?\nThis is my structure : </p>\n\n<pre><code>struct el{\n    int key;\n    struct el *next;\n};\ntypedef struct el elListy;\ntypedef elListy *list;\n</code></pre>\n\n<p>And this is function:</p>\n\n<pre><code>void delete(list *l, int zm)\n{\n    list p, *k;\n    k = l;\n    while ((*k))\n    {\n        if ((*k)-&gt;key == zm) {\n            p = *k;\n            *k = (*k)-&gt;next;\n            free(p);\n        }\n        else\n        {\n            k = &amp;(*k)-&gt;n;\n        }\n    }\n}\n</code></pre>\n\n<p>If someone can illustrate it, will be awesome.</p>\n"}, {"tags": ["c", "linux", "linker", "64-bit", "elf"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452036026, "post_id": 34623009, "comment_id": 56991628, "body": "You mean like <code>gcc -c</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1589, "user_id": 2770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2321a7b8ee2a179e16b50242ecb21c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilio Pardo", "link": "https://stackoverflow.com/users/2770092/cecilio-pardo"}, "is_accepted": false, "score": 1, "last_activity_date": 1452036012, "creation_date": 1452036012, "answer_id": 34623039, "question_id": 34623009, "link": "https://stackoverflow.com/questions/34623009/how-to-create-an-low-level-object-file/34623039#34623039", "title": "How to create an low-level object file?", "body": "<p>Just generate assembly code, and use the assembler to convert to object format.</p>\n"}], "owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1452037985, "answer_count": 1, "score": -1, "last_activity_date": 1452036012, "creation_date": 1452035838, "question_id": 34623009, "link": "https://stackoverflow.com/questions/34623009/how-to-create-an-low-level-object-file", "closed_reason": "Needs more focus", "title": "How to create an low-level object file?", "body": "<p>Basically what I want is to create an object file (maybe x64 ELF one) with assembly code which could then be linked with other object files in order to create one executable. Also I would like to export some addresses from this object and also to import some from the other object files it will link to.</p>\n\n<p>I'll be happy if it can target linux x64 (I'm using OpenSuse now) and can be used with some default linker (like 'ld' maybe).</p>\n\n<p><em>I want to make a compiler using 'C' language.</em></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1452034908, "post_id": 34622769, "comment_id": 56991236, "body": "This answer mentions that it&#39;s advisable to compile twice to to avoid the PIC overhead for static libs: <a href=\"http://stackoverflow.com/questions/4863791/creating-both-static-and-shared-c-libraries\" title=\"creating both static and shared c libraries\">stackoverflow.com/questions/4863791/&hellip;</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1452034910, "post_id": 34622769, "comment_id": 56991238, "body": "Library flavors are an attribute of the binary format(s) supported by the OS.  Neither C nor C++ knows anything about them, nor even about libraries themselves."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452038047, "post_id": 34622769, "comment_id": 56992325, "body": "There is no language C/C++. And the question is not specific to a PL."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452071426, "post_id": 34622769, "comment_id": 57003852, "body": "Shared libraries are not related to <code>-FPIC</code> actually. That is a different thing."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452072888, "post_id": 34622769, "comment_id": 57004759, "body": "@Olaf Related they are.  But as far as I understand, you can have a shared library without involving PIC code in it  but then the linker needs to do more work and modify whole .text segments instead of just a couple of tables. Also it should work on on 32 bit, but it doesn&#39;t work on x86_64. At least gcc won&#39;t even let me make a shared library out of non-PIC on x86_64."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452073140, "post_id": 34622769, "comment_id": 57004960, "body": "Please elaborate how they are related in thour thoughts. These are two different options with <code>-fPIC</code> generating different code. Note that you cannot generate position-independent code. also PIC requires run-time support to load base-addresses, etc. Btw. this is more an issue of the loader (although some linkers include these features, too)."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1452073310, "post_id": 34622769, "comment_id": 57005066, "body": "@Olaf I think my comment says it. If you can have a shared library made out of non-PIC, then it should be performance-wise inferior to a shared library made out of PIC + you need PIC to make a shared library on x86_64. You&#39;re right that the C tag is only tangentially related to the question. It&#39;s an OS question. Feel free to edit it or retag it or downvote. I don&#39;t care that much about pidgeoholing it super well."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1452073511, "post_id": 34622769, "comment_id": 57005190, "body": "Load-time might be longer (this depends on the architecture), but run-time is well-possible slower for PIC do to (more or less) frequent loading of base-pointers through tables (similar to OOP vtables). Also on quite some targets PIC has limited brancing range, so needs more trampolines, etc. As always things are not that simple as one thinks."}], "answers": [{"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1452035703, "post_id": 34622843, "comment_id": 56991516, "body": "Thanks. I  do use prelink on my Linux.  I&#39;m curious if it is possible to link a static library statically, though. I think at least theoretically it should be since PIC object files link in just fine."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1452035730, "post_id": 34622843, "comment_id": 56991525, "body": "&quot;Then shared libraries came along fixing these issues.&quot; ...and create hundreds more..."}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1452036008, "post_id": 34622843, "comment_id": 56991625, "body": "@PSkocik Yes, it is possible, <a href=\"http://statifier.sourceforge.net/\" rel=\"nofollow noreferrer\">statifier.sourceforge.net</a> and <a href=\"http://magicermine.com/\" rel=\"nofollow noreferrer\">magicermine.com</a> do so, but beware the binaries they generate are very very large, substantially slower than dynamic or normal static ones and often flaky or unreliable"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1452036646, "post_id": 34622843, "comment_id": 56991845, "body": "Thanks. I just found out that static libs with rellocatable code are linkable statically and very fast to transform into a shared library. I think that&#39;s what I was looking for."}], "tags": [], "owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "is_accepted": true, "score": 6, "last_activity_date": 1452034980, "creation_date": 1452034980, "answer_id": 34622843, "question_id": 34622769, "link": "https://stackoverflow.com/questions/34622769/why-do-we-have-two-kinds-of-libraries-in-c-c/34622843#34622843", "title": "Why do we have two kinds of libraries in C/C++?", "body": "<p>This is partially a historical issue. Once there were only static libraries. They were linked statically to every binary the system compiled. However this represented a maintenance nightmare among other things, requiring all the using packages to be recompiled if a library was patched or changed.</p>\n\n<p>Then shared libraries came along fixing these issues. Now for your question, firstly there are some significant optimisations that can take place in a statically linked library that it is impossible to perform on a dynamic one, therefore even if one were to transform dynamic libraries into static ones it would likely be less efficient than code compiled statically in the first place.</p>\n\n<p>Secondly, most modern systems use solely shared libraries anyway, so there is not much of an issue, things are compiled only once, as a shared library.</p>\n\n<p>As a slight aside, however still relevant you might look into <a href=\"https://en.wikipedia.org/wiki/Prelink\" rel=\"noreferrer\">prelinking</a>. A step that takes away some of the start-up overhead (though still not necessarily achieving the same performance as a static link) and allowing software that dynamically links in libraries to launch faster.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1452036348, "last_edit_date": 1452036348, "creation_date": 1452035764, "answer_id": 34622994, "question_id": 34622769, "link": "https://stackoverflow.com/questions/34622769/why-do-we-have-two-kinds-of-libraries-in-c-c/34622994#34622994", "title": "Why do we have two kinds of libraries in C/C++?", "body": "<p>Although in theory, one surely <em>could</em> post-process dynamic libraries into static ones, the difficulty of such a task -- especially of doing it well -- would be comparable to compiling from scratch.  Getting the same result by post-processing as by performing a from-scratch static build is probably more difficult than simply building again, plus any tool to do that would carry its own maintenance burden.  Why go for that when there is already a perfectly good way to reach the same objective?</p>\n\n<p>Moreover, building both static and shared libraries is by no means required.  Even where you want to do that, the incremental cost of doing so is (should be) a quite small part of the overall development time.</p>\n"}, {"tags": [], "owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 0, "last_activity_date": 1452036043, "creation_date": 1452036043, "answer_id": 34623044, "question_id": 34622769, "link": "https://stackoverflow.com/questions/34622769/why-do-we-have-two-kinds-of-libraries-in-c-c/34623044#34623044", "title": "Why do we have two kinds of libraries in C/C++?", "body": "<p>You would use static libraries when you want your executable to not depend on some library. Basically the library is \"shipped\" within the executable.</p>\n\n<p>Of course this is very situational as most of the times shared libraries are the way to go.</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 2, "accepted_answer_id": 34622843, "answer_count": 3, "score": 5, "last_activity_date": 1452036348, "creation_date": 1452034606, "question_id": 34622769, "link": "https://stackoverflow.com/questions/34622769/why-do-we-have-two-kinds-of-libraries-in-c-c", "title": "Why do we have two kinds of libraries in C/C++?", "body": "<p>There are static libraries and then there are shared libraries.\nWouldn't it be possible to have just the shared ones and link them in statically if needed?</p>\n\n<p>Compiling once with <code>-fPIC</code> and once without seems like a waste.\nI don't know much assembly, but shouldn't it be possible to transform rellocatable code into static code orders of magnitude faster than recompiling everything?</p>\n"}, {"tags": ["c", "image", "interpolation", "bicubic"], "comments": [{"owner": {"reputation": 9021, "user_id": 1250381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88331c480b23341e10b1b0c0051f4eee?s=128&d=identicon&r=PG", "display_name": "dAm2K", "link": "https://stackoverflow.com/users/1250381/dam2k"}, "edited": false, "score": 0, "creation_date": 1534888558, "post_id": 34622717, "comment_id": 90865006, "body": "lol ... #include &lt;windows.h&gt;  // for bitmap headers.  Sorry non windows people!"}], "answers": [{"tags": [], "owner": {"reputation": 1141, "user_id": 5749944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9f0cd3fedf76ad126abaab58a572c?s=128&d=identicon&r=PG", "display_name": "ThorngardSO", "link": "https://stackoverflow.com/users/5749944/thorngardso"}, "is_accepted": true, "score": 1, "last_activity_date": 1452036467, "creation_date": 1452036467, "answer_id": 34623115, "question_id": 34622717, "link": "https://stackoverflow.com/questions/34622717/bicubic-interpolation-in-c/34623115#34623115", "title": "Bicubic interpolation in C", "body": "<p>From your resize_image() function:</p>\n\n<pre><code>destination_image-&gt;data[x+((destination_image-&gt;y)*y)].red   = sample[0];\n</code></pre>\n\n<p>That should probably be</p>\n\n<pre><code>destination_image-&gt;data[x+((destination_image-&gt;x)*y)].red   = sample[0];\n</code></pre>\n\n<p>What helps debugging such cases is initializing your destination image with some \"magic color\" that's not present in your actual data (e.g. some awful pink:-)). Then you would probably notice that some destination pixels still have that color after the resize_image() call. This hints to the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 7911130, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-miH-j5yFnOk/AAAAAAAAAAI/AAAAAAAAAGM/1511gdxqvVA/photo.jpg?sz=128", "display_name": "Joseph Pena", "link": "https://stackoverflow.com/users/7911130/joseph-pena"}, "is_accepted": false, "score": 0, "last_activity_date": 1617991640, "creation_date": 1617991640, "answer_id": 67026231, "question_id": 34622717, "link": "https://stackoverflow.com/questions/34622717/bicubic-interpolation-in-c/67026231#67026231", "title": "Bicubic interpolation in C", "body": "<p>I tested your code and I noticed that there is another problem.</p>\n<p>From your init_destination_image() function:</p>\n<pre><code>img-&gt;data = (PPMPixel*)malloc(W * H * (int)scale * sizeof(PPMPixel));\n</code></pre>\n<p>Should be:</p>\n<pre><code>img-&gt;data = (PPMPixel*)malloc(W * H * (int)scale * (int)scale * sizeof(PPMPixel));\n</code></pre>\n<p>Such as both, the <code>W</code> and <code>H</code> are being scaled.</p>\n"}], "owner": {"reputation": 61, "user_id": 4257916, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f2cdab7b51193a70615eab3f74e83e42?s=128&d=identicon&r=PG&f=1", "display_name": "Felix K.", "link": "https://stackoverflow.com/users/4257916/felix-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5476, "favorite_count": 0, "accepted_answer_id": 34623115, "answer_count": 2, "score": 3, "last_activity_date": 1617991640, "creation_date": 1452034326, "question_id": 34622717, "link": "https://stackoverflow.com/questions/34622717/bicubic-interpolation-in-c", "title": "Bicubic interpolation in C", "body": "<p>im trying to deal with the <strong>bicubic image interpolation in c</strong>. Therefore i've built this small script.</p>\n\n<p><em>1. the \"resize_image\"-function:</em></p>\n\n<pre><code>    void resize_image(PPMImage *source_image, PPMImage *destination_image, float scale) {\n\n        uint8_t sample[3];\n        int y, x;\n\n        destination_image-&gt;x = (long)((float)(source_image-&gt;x)*scale);\n        destination_image-&gt;y = (long)((float)(source_image-&gt;y)*scale);\n\n        for (y = 0; y &lt; destination_image-&gt;y; y++) {\n\n            float v = (float)y / (float)(destination_image-&gt;y - 1);\n\n            for (x = 0; x &lt; destination_image-&gt;x; ++x) {\n\n                float u = (float)x / (float)(destination_image-&gt;x - 1);\n                sample_bicubic(source_image, u, v, sample);\n\n                destination_image-&gt;data[x+((destination_image-&gt;y)*y)].red   = sample[0];\n                destination_image-&gt;data[x+((destination_image-&gt;y)*y)].green = sample[1];  \n                destination_image-&gt;data[x+((destination_image-&gt;y)*y)].blue  = sample[2];  \n            }\n        }\n    }\n</code></pre>\n\n<p><em>2. the \"sample_bicubic\"-function</em></p>\n\n<pre><code>    void sample_bicubic(PPMImage *source_image, float u, float v, uint8_t sample[]) {\n\n        float x = (u * source_image-&gt;x)-0.5;\n        int xint = (int)x;\n        float xfract = x-floor(x);\n\n        float y = (v * source_image-&gt;y) - 0.5;\n        int yint = (int)y;\n        float yfract = y - floor(y);\n\n        int i;\n\n        uint8_t p00[3];\n        uint8_t p10[3];\n        uint8_t p20[3];\n        uint8_t p30[3];\n\n        uint8_t p01[3];\n        uint8_t p11[3];\n        uint8_t p21[3];\n        uint8_t p31[3];\n\n        uint8_t p02[3];\n        uint8_t p12[3];\n        uint8_t p22[3];\n        uint8_t p32[3];\n\n        uint8_t p03[3];\n        uint8_t p13[3];\n        uint8_t p23[3];\n        uint8_t p33[3];\n\n        // 1st row\n        get_pixel_clamped(source_image, xint - 1, yint - 1, p00);   \n        get_pixel_clamped(source_image, xint + 0, yint - 1, p10);\n        get_pixel_clamped(source_image, xint + 1, yint - 1, p20);\n        get_pixel_clamped(source_image, xint + 2, yint - 1, p30);\n\n        // 2nd row\n        get_pixel_clamped(source_image, xint - 1, yint + 0, p01);\n        get_pixel_clamped(source_image, xint + 0, yint + 0, p11);\n        get_pixel_clamped(source_image, xint + 1, yint + 0, p21);\n        get_pixel_clamped(source_image, xint + 2, yint + 0, p31);\n\n        // 3rd row\n        get_pixel_clamped(source_image, xint - 1, yint + 1, p02);\n        get_pixel_clamped(source_image, xint + 0, yint + 1, p12);\n        get_pixel_clamped(source_image, xint + 1, yint + 1, p22);\n        get_pixel_clamped(source_image, xint + 2, yint + 1, p32);\n\n        // 4th row\n        get_pixel_clamped(source_image, xint - 1, yint + 2, p03);\n        get_pixel_clamped(source_image, xint + 0, yint + 2, p13);\n        get_pixel_clamped(source_image, xint + 1, yint + 2, p23);\n        get_pixel_clamped(source_image, xint + 2, yint + 2, p33);\n\n        // interpolate bi-cubically!\n        for (i = 0; i &lt; 3; i++) {\n\n            float col0 = cubic_hermite(p00[i], p10[i], p20[i], p30[i], xfract);\n            float col1 = cubic_hermite(p01[i], p11[i], p21[i], p31[i], xfract);\n            float col2 = cubic_hermite(p02[i], p12[i], p22[i], p32[i], xfract);\n            float col3 = cubic_hermite(p03[i], p13[i], p23[i], p33[i], xfract);\n\n            float value = cubic_hermite(col0, col1, col2, col3, yfract);\n\n            CLAMP(value, 0.0f, 255.0f);\n\n            sample[i] = (uint8_t)value;\n\n            printf(\"sample[%d]=%d\\n\",i,sample[i]);      \n\n        }\n    }\n</code></pre>\n\n<p><em>3. the \"interpolation helpers\"</em></p>\n\n<pre><code>    float cubic_hermite(float A, float B, float C, float D, float t) {\n\n        float a = -A / 2.0f + (3.0f*B) / 2.0f - (3.0f*C) / 2.0f + D / 2.0f;\n        float b = A - (5.0f*B) / 2.0f + 2.0f*C - D / 2.0f;\n        float c = -A / 2.0f + C / 2.0f;\n        float d = B;\n\n        return a*t*t*t + b*t*t + c*t + d;\n    }\n\n    void get_pixel_clamped(PPMImage *source_image, int x, int y, uint8_t temp[])  {\n\n        CLAMP(x, 0, source_image-&gt;x - 1);\n        CLAMP(y, 0, source_image-&gt;y - 1);\n\n        temp[0] = source_image-&gt;data[x+(W*y)].red;\n        temp[1] = source_image-&gt;data[x+(W*y)].green;\n        temp[2] = source_image-&gt;data[x+(W*y)].blue;\n    }\n</code></pre>\n\n<p>I've uploaded the complete code with all the stuff around <a href=\"http://pastebin.com/sQDQg7SG\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><strong>There are no syntax errors executing this code.</strong></p>\n\n<p>But the output image confused me.</p>\n\n<p><strong>The input Image (21x20Pixel):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Dm2T7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dm2T7.jpg\" alt=\"INPUT IMAGE: 21x20Pixel\"></a></p>\n\n<p><strong>This input image is scaled up by 2 (42x40Pixel):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/KxeqR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KxeqR.jpg\" alt=\"OUTPUT IMAGE: 42x40Pixel\"></a></p>\n\n<p>The interpolation seems to work fine at some points, but the image looks like pixels are shifted.</p>\n\n<p>Can someone tell me what i'm doing wrong?\nThis script was made with the help of:\n<a href=\"http://blog.demofox.org/2015/08/15/resizing-images-with-bicubic-interpolation/\" rel=\"nofollow noreferrer\">http://blog.demofox.org/2015/08/15/resizing-images-with-bicubic-interpolation/</a></p>\n\n<p><strong>Thanks guys!</strong></p>\n\n<p>(Please don't consider the efficiency of this code ... its aweful i know)</p>\n"}, {"tags": ["c", "sdl"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1452034887, "post_id": 34622680, "comment_id": 56991229, "body": "Posting definitions of <code>GameState, HMALIENS, LEFT, RIGHT</code>, etc. would help in understanding the issue."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1452036841, "post_id": 34622680, "comment_id": 56991902, "body": "aliens moves in block all to gather in same direction, (odd first then even if you wish, but in same direction), you don&#39;t have to set every one&#39;s direction. set the direction a global variable"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1452037063, "post_id": 34622680, "comment_id": 56991990, "body": "to make it easy, set a rect that holds all the aliens, then do test collusion with the wall."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1452037640, "post_id": 34622680, "comment_id": 56992209, "body": "you even don&#39;t have to do test collision.  just do <code>move five steps left then down , five steps right then down, and so ...</code>, on every down check if any has riched the bottom."}, {"owner": {"reputation": 21, "user_id": 5749751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94b57f87b1fdbede0f61c712356f19?s=128&d=identicon&r=PG&f=1", "display_name": "xaxaia", "link": "https://stackoverflow.com/users/5749751/xaxaia"}, "edited": false, "score": 1, "creation_date": 1452038149, "post_id": 34622680, "comment_id": 56992366, "body": "I&#39;m not sure if I&#39;m getting this right but later on in the game player will be able to shoot at enemies so anytime the rightmost/leftmost enemy would get killed number of steps would change"}, {"owner": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "reply_to_user": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1452038286, "post_id": 34622680, "comment_id": 56992407, "body": "@milevyo, in Space Invaders it&#39;s possible some of the aliens will be destroyed. If the ones on the edges are gone, it won&#39;t be 5 steps any more. Steps could be checked instead of rects, but additional logic is needed to handle missing aliens."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 1, "creation_date": 1452038941, "post_id": 34622680, "comment_id": 56992642, "body": "as i remember, the steps do not change. anyway do what makes your life easier, it doesn&#39;t matter if steps change or not, you can update later the game to your needs"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5749751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94b57f87b1fdbede0f61c712356f19?s=128&d=identicon&r=PG&f=1", "display_name": "xaxaia", "link": "https://stackoverflow.com/users/5749751/xaxaia"}, "edited": false, "score": 0, "creation_date": 1452040224, "post_id": 34623498, "comment_id": 56993035, "body": "isn&#39;t return true/return false c++?"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 21, "user_id": 5749751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94b57f87b1fdbede0f61c712356f19?s=128&d=identicon&r=PG&f=1", "display_name": "xaxaia", "link": "https://stackoverflow.com/users/5749751/xaxaia"}, "edited": false, "score": 1, "creation_date": 1452040339, "post_id": 34623498, "comment_id": 56993076, "body": "@AnielaOprz\u0105dek, indeed yes, but you can define them; its just for clarity"}, {"owner": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "edited": false, "score": 0, "creation_date": 1452624280, "post_id": 34623498, "comment_id": 57248739, "body": "@milevyo, this is a nice rewrite, +1."}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 1, "last_activity_date": 1452040721, "last_edit_date": 1452040721, "creation_date": 1452038804, "answer_id": 34623498, "question_id": 34622680, "link": "https://stackoverflow.com/questions/34622680/c-space-invaders-enemy-movement/34623498#34623498", "title": "C Space Invaders enemy movement", "body": "<pre><code>typedef enum{\n    LEFT,\n    RIGHT\n}GAME_DIRECTION;\n\nint dir=LEFT;\n\n#define SPRITE_WIDTH    50\n#define SPRITE_HEIGHT   50\n#define BOTTOM_LINE     600\n\n\nvoid move_down (GameState *game)\n{\n    int i; \n    for(i=0; i &lt; HMALIENS; i++)\n        game-&gt;alien1[i].y += 25;\n\n}\n\nvoid do_slide(GameState *game)\n{\n    int i; \n    for(i=0; i &lt; HMALIENS; i++)\n        game-&gt;alien1[i].x += dir?10:-10;\n\n}\n\n\nint collided(GameState *game)\n {\n    int i;\n\n    for(i=0; i &lt; HMALIENS; i++){\n        if(\n            game-&gt;alien1[i].x &lt;= game-&gt;leftwall.x                 || \n            game-&gt;alien1[i].x &gt;= game-&gt;rightwall.x +SPRITE_WIDTH  || \n            game-&gt;alien1[i].y &gt;= BOTTOM_LINE - SPRITE_HEIGHT\n        )\n        return true;\n    } \n    return false;\n }\n\n\nvoid move_aliens(GameState *game)\n{\n    if(collided(game)){\n        move_down (game);\n        dir=!dir;         // update direction; \n    }else{\n        do_slide (game);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "is_accepted": true, "score": 0, "last_activity_date": 1452040174, "last_edit_date": 1452040174, "creation_date": 1452039141, "answer_id": 34623562, "question_id": 34622680, "link": "https://stackoverflow.com/questions/34622680/c-space-invaders-enemy-movement/34623562#34623562", "title": "C Space Invaders enemy movement", "body": "<p>Maybe something like:</p>\n\n<pre><code>void move_aliens(GameState *game)\n{\n    int i=0;\n    for(; i &lt; HMALIENS; i++)\n    {\n        if (game-&gt;alien1[i].dir==LEFT)\n            game-&gt;alien1[i].x -= 10;\n        if (game-&gt;alien1[i].dir==RIGHT)\n            game-&gt;alien1[i].x += 10;\n    }\n\n    if (collided(\n        game-&gt;alien1[0].x, game-&gt;alien1[0].y,\n        game-&gt;leftwall.x, game-&gt;leftwall.y,\n        50, 50, 1, 600))\n    {\n        int i = 0;\n\n        for(; i &lt; HMALIENS; i++)\n            game-&gt;alien1[i].dir=RIGHT;\n\n         move_down(game);\n    }\n\n    if(collided(\n        game-&gt;alien1[HMALIENS-1].x, game-&gt;alien1[HMALIENS-1].y,\n        game-&gt;rightwall.x, game-&gt;rightwall.y,\n        50, 50, 1, 600))\n    {\n        int i = 0;\n        for(; i &lt; HMALIENS; i++)\n            game-&gt;alien1[i].dir=LEFT;\n\n        move_down(game);\n    }\n}\n</code></pre>\n\n<p>I have tried to make the minimum changes. But @milevyo's more extensive rewrite looks good as well.</p>\n\n<p>The problem, I think (just from looking), is you has the left collision test inside the loop so when that hits, the movement gets out of sync.</p>\n\n<p>Also it was pretty subtle that the right collision test used <code>i</code> from the previous loop which happens to index the last element (the rightmost alien). I changed that to explicitly use <code>HMALIENS - 1</code>. When you start destroying aliens,\nyou'll have to track the first (leftmost) and last (rightmost) living aliens and use them for you collision tests.</p>\n\n<p>Your indentation and formatting were a little off which makes the code much harder to read. Formatting is important, and will be even more so when your code gets more complicated.</p>\n"}, {"tags": [], "owner": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "is_accepted": false, "score": 1, "last_activity_date": 1452039217, "creation_date": 1452039217, "answer_id": 34623577, "question_id": 34622680, "link": "https://stackoverflow.com/questions/34622680/c-space-invaders-enemy-movement/34623577#34623577", "title": "C Space Invaders enemy movement", "body": "<p>Without rewriting your code, the problem is that you have already moved the first alien ([0]) left,</p>\n\n<pre><code>if (game-&gt;alien1[i].dir==LEFT)\n       game-&gt;alien1[i].x -= 10;\n</code></pre>\n\n<p>and <em>then</em> you are doing the collision test and flagging all of them to move right, but the loop continues with [1..10], while [0] has already moved.</p>\n"}], "owner": {"reputation": 21, "user_id": 5749751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94b57f87b1fdbede0f61c712356f19?s=128&d=identicon&r=PG&f=1", "display_name": "xaxaia", "link": "https://stackoverflow.com/users/5749751/xaxaia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1373, "favorite_count": 0, "accepted_answer_id": 34623562, "answer_count": 3, "score": 1, "last_activity_date": 1452040721, "creation_date": 1452034176, "last_edit_date": 1452037328, "question_id": 34622680, "link": "https://stackoverflow.com/questions/34622680/c-space-invaders-enemy-movement", "title": "C Space Invaders enemy movement", "body": "<p>I have to write a clone of space invaders game for university in C language using SDL library for graphics.I am very new to C and programming in general so i struggle with it a lot. For now I have one row of enemies and I'm trying to make it move correctly. This are functions for movement of aliens, which check for the collision with right/left wall(which are SDL_Rects near window edges) and if it happens, enemies move one line lower in the opposite direction. The problem is it works okay for all ten enemies except the first one. Each time when collision with left wall occurs the first alien sort of moves away a bit from others instead of moving in one block as I want it to. I noticed that if I change the first for loop in move_aliens function to start from i=11 and i--, the same thing will happen to the enemy in last column. But I still dont know how to fix it.\nI would appreciate if someone could tell me what I'm doing wrong, give me an idea or sollution :). \nI uploaded a video of whats happening <a href=\"http://sendvid.com/dt1reizc\" rel=\"nofollow\">http://sendvid.com/dt1reizc</a></p>\n\n<pre><code>void move_down (GameState *game)\n{\n    int i=0; \n    for(; i &lt; HMALIENS; i++)\n        game-&gt;alien1[i].y += 25;\n}\n\nint collided(int a1, int b1, int a2, int b2, int width1, \n             int height1, int width2, int height2)\n {\n     return (!((a1 &gt; (a2+width2)) || (a2 &gt; (a1+width1)) || \n            (b1 &gt; (b2+height2)) || (b2 &gt; (b1+height1))));\n }\n\n\nvoid move_aliens(GameState *game)\n{\n    int i=0;\n    for(; i &lt; HMALIENS; i++)\n    {\n    if (game-&gt;alien1[i].dir==LEFT)\n       game-&gt;alien1[i].x -= 10;\n    if (game-&gt;alien1[i].dir==RIGHT)\n       game-&gt;alien1[i].x += 10;\n\n    if (collided(game-&gt;alien1[i].x, game-&gt;alien1[i].y, \n        game-&gt;leftwall.x, game-&gt;leftwall.y, 50, 50, 1, 600))\n     {\n         int i = 0;\n\n         for(; i &lt; HMALIENS; i++)\n            game-&gt;alien1[i].dir=RIGHT;\n         move_down(game);\n     }\n  }\n\nif(collided(game-&gt;alien1[i].x, game-&gt;alien1[i].y, game-&gt;rightwall.x, \n   game-&gt;rightwall.y, 50, 50, 1, 600))\n{\n    int i = 0;\n    for(; i &lt; HMALIENS; i++)\n        game-&gt;alien1[i].dir=LEFT;\n\n     move_down(game);\n }\n}\n}\n</code></pre>\n\n<p>//edit\nHMALIENS is just a constant (11), the number of living enemies at the start\nGameState is a structure.\nLEFT/RIGHT stand for direction of movement (quite obvious) [enum Direction {LEFT, RIGHT};]. I have in my alien1 structure enum Direction dir and in the function which load_game function i set it to RIGHT.</p>\n\n<pre><code>typedef struct\n{\n    Player player;\n    Rightwall rightwall;\n    Leftwall leftwall;\n    Alien1 alien1[HMALIENS];\n    SDL_Texture *bulet;\n    SDL_Texture *ship;\n    SDL_Texture *Alien1;\n    SDL_Renderer *renderer;\n } GameState;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1497, "user_id": 4987223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0850ea3162cafc96ef345404cf7dcca0?s=128&d=identicon&r=PG&f=1", "display_name": "vmachan", "link": "https://stackoverflow.com/users/4987223/vmachan"}, "edited": false, "score": 0, "creation_date": 1452033915, "post_id": 34622571, "comment_id": 56990802, "body": "This earlier <a href=\"http://stackoverflow.com/questions/19059730/cannot-figure-out-how-to-use-getchar-in-c\">SO post</a> should help"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1452038686, "post_id": 34622571, "comment_id": 56992544, "body": "This is an awful usage of <code>goto</code>. Use 70ies BASIC if you insist on using it. Otherwise use a loop statement in any &quot;modern&quot; (i.e. post 70ies) language."}], "answers": [{"tags": [], "owner": {"reputation": 636, "user_id": 5593397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d90813af2d5aba390dd748d4bed83d6?s=128&d=identicon&r=PG&f=1", "display_name": "marian0", "link": "https://stackoverflow.com/users/5593397/marian0"}, "is_accepted": false, "score": 2, "last_activity_date": 1452039484, "last_edit_date": 1452039484, "creation_date": 1452033851, "answer_id": 34622597, "question_id": 34622571, "link": "https://stackoverflow.com/questions/34622571/instruction-executes-twice/34622597#34622597", "title": "Instruction executes twice", "body": "<p>You should use: <code>if (c != 'a' &amp;&amp; c != 'r')</code></p>\n\n<p>Also to avoid duplicated messages you should replace <code>getchar()</code> with <code>scanf(\"%c\", &amp;c)</code></p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 5749836, "user_type": "registered", "profile_image": "https://graph.facebook.com/211647825841231/picture?type=large", "display_name": "Tomasz Tarka", "link": "https://stackoverflow.com/users/5749836/tomasz-tarka"}, "edited": false, "score": 0, "creation_date": 1452034204, "post_id": 34622606, "comment_id": 56990930, "body": "I put <code>getchar()</code> in <code>if</code>, before <code>goto</code>, and changed <code>||</code> to <code>&amp;&amp;</code> as marian0 suggested and now it seems to work"}], "tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": true, "score": 0, "last_activity_date": 1452033887, "creation_date": 1452033887, "answer_id": 34622606, "question_id": 34622571, "link": "https://stackoverflow.com/questions/34622571/instruction-executes-twice/34622606#34622606", "title": "Instruction executes twice", "body": "<p>If the user enters <code>a</code>, they have to press the <kbd>enter</kbd> key on their keyboard for the input to register. This key leaves a newline character in standard input and therefore that character is read the second time around and the test fails again.</p>\n\n<p>The test fails for any input because you are trying to have the input be two things at the same time. You have to use <code>&amp;&amp;</code> instead of <code>||</code> in order to just check if the input is either one of the characters you are looking for. I know this sounds like it should be the other way around, but that is definitely not the case as you have observed.</p>\n"}], "owner": {"reputation": 111, "user_id": 5749836, "user_type": "registered", "profile_image": "https://graph.facebook.com/211647825841231/picture?type=large", "display_name": "Tomasz Tarka", "link": "https://stackoverflow.com/users/5749836/tomasz-tarka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1452034376, "accepted_answer_id": 34622606, "answer_count": 2, "score": 0, "last_activity_date": 1452039484, "creation_date": 1452033725, "last_edit_date": 1452034927, "question_id": 34622571, "link": "https://stackoverflow.com/questions/34622571/instruction-executes-twice", "closed_reason": "Duplicate", "title": "Instruction executes twice", "body": "<p>I have the following piece of code. I want a user to enter <code>a</code> or <code>r</code> and continue executing the program, or try to get user input if he enters something else.</p>\n\n<p>But my problem is, when I enter an illegal value the program shows the message twice, and not just once. How can I make the message only ever show once?</p>\n\n<pre><code>label: \n    puts (\"a/r?\"); \n    c = getchar (); \n    if (c != 'a' || c != 'r') \n      goto label; \n</code></pre>\n"}]