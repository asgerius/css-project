[{"tags": ["c"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 6, "creation_date": 1551311822, "post_id": 54916343, "comment_id": 96598817, "body": "1. C&#39;s type system does not provide you tools for that"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1551312101, "post_id": 54916343, "comment_id": 96598892, "body": "I suspect what you want is not possible, though if you clarify what exactly you want, people here might find a solution. You might want to add an example to your question and describe how you want your example to behave. You can <a href=\"https://stackoverflow.com/posts/54916343/edit\">edit</a> your question to clarify it."}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1551312288, "post_id": 54916343, "comment_id": 96598932, "body": "<code>char a[1024]</code> is an array of 1024 chars. In C, strings are <code>&#39;\\0&#39;</code> terminated, meaning that even if there is a string terminator that makes said string smaller, the array is still 1024 chars large."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1551312381, "post_id": 54916343, "comment_id": 96598945, "body": "You may not limit a variable\u2019s range on your own but you may enforce a range with your code i.e. <code>if(n &lt; lbound || n &gt; ubound) ...</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1551314808, "post_id": 54916343, "comment_id": 96599533, "body": "The answer to 1 is to use the <a href=\"https://en.wikipedia.org/wiki/Ada_(programming_language)#Data_types\" rel=\"nofollow noreferrer\">Ada programming language</a>."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1551313366, "last_edit_date": 1551313366, "creation_date": 1551313050, "answer_id": 54916526, "question_id": 54916343, "link": "https://stackoverflow.com/questions/54916343/how-to-set-the-maximum-and-minimum-limit-for-a-variable-in-c/54916526#54916526", "title": "How to set the maximum and minimum limit for a variable in C?", "body": "<blockquote>\n  <p>1.If I want to set a int variable which is \"larger or equal to 100\" and \"smaller or equal to 200\", how do I do that?</p>\n</blockquote>\n\n<p>The range of a C integer object is set by constants of its type such as <code>INT_MIN, UCHAR_MAX, LLONG_MIN</code>.  There are not user selectable to 100 or 200.</p>\n\n<blockquote>\n  <p>2.I heard it is like \"char a[1024]\" if I want to set maximum string length to 1024 but how to set minimum string length?</p>\n</blockquote>\n\n<p>First: off-by-1: the legitimate possible values from <code>strlen(a)</code> would be [0...1023], not 1024.</p>\n\n<p>The minimum and maximum length is not controllable in C with an overall settable limit.  Code needs to be judiciously written to not attempt exceeding a destination array bounds (of 1023 + 1 for the <em>null character</em> in OP's example)</p>\n\n<p>Code could use care in populating an array with various means.  If  destination array is insufficient, code will likely need to take a different path.</p>\n\n<pre><code>int len = snprintf(a, sizeof a, \"%d %s\", some_int, some_string);\nif (len &lt; 0 || (unsigned) len &gt;= sizeof a) {\n  puts(\"Encoding error, or buffer is too small\");\n  // Destination was likely too small.\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10507245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206dd1090ac2e40f5c0c50fa4cb6c23c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/10507245/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "closed_date": 1551355754, "answer_count": 1, "score": -3, "last_activity_date": 1551313366, "creation_date": 1551311664, "question_id": 54916343, "link": "https://stackoverflow.com/questions/54916343/how-to-set-the-maximum-and-minimum-limit-for-a-variable-in-c", "closed_reason": "Needs details or clarity", "title": "How to set the maximum and minimum limit for a variable in C?", "body": "<ol>\n<li><p>If I want to set a int variable which is \"larger or equal to 100\" and \"smaller or equal to 200\", how do I do that?</p></li>\n<li><p>I heard it is like \"char a[1024]\" if I want to set maximum string length to 1024 but how to set minimum string length?</p></li>\n</ol>\n"}, {"tags": ["c", "mips", "code-translation"], "comments": [{"owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 1, "creation_date": 1551310714, "post_id": 54916090, "comment_id": 96598559, "body": "What does not work in your program? Have you tried to use a debugger on it?"}, {"owner": {"reputation": 37, "user_id": 10547576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38de28c4b6f67f5f7aeb7a1803f9705?s=128&d=identicon&r=PG&f=1", "display_name": "Mark T.", "link": "https://stackoverflow.com/users/10547576/mark-t"}, "reply_to_user": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 0, "creation_date": 1551311136, "post_id": 54916090, "comment_id": 96598665, "body": "I&#39;ve tried running QtSpim on it, yes. I&#39;m still somewhat new to MIPS though, so I wasn&#39;t sure how to interpret the errors."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1551312320, "post_id": 54916090, "comment_id": 96598936, "body": "why not just use gcc?"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1551431429, "post_id": 54916090, "comment_id": 96645523, "body": "@Swordfish, can it be because it can be a homework task?  can it be a challenge not looking at the back for a solution?"}], "answers": [{"tags": [], "owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "is_accepted": false, "score": 1, "last_activity_date": 1551312787, "creation_date": 1551312787, "answer_id": 54916488, "question_id": 54916090, "link": "https://stackoverflow.com/questions/54916090/c-to-mips-translation-decoder/54916488#54916488", "title": "C to MIPS translation: decoder", "body": "<p>I have corrected the first part of your code. And 80% of instructions where incorrect syntactically. This is something that the asm should have told you. And many, many logical errors.\nOne of the main is that you need to manage addresses of the array elements.</p>\n\n<pre><code>decode_request:\n    li      $t0, 0      # int i = 0;\n### we assume $t4=@array and $t5=array[i]\n\n    add $t5, $t4, zero  ## t5=&amp;array[0]\nfirst_loop:\n### bge is bge reg1, reg2, offset. Cant use an immediate\n### slti does a compare and then a branch is possible\n    sltiu $t1, $t0, 6                  # i&lt;6 ?\n    beq $t0, zero, after_first_loop    # false ? goto end first loop\n### i=i*4??? what is it supposed to do?\n####mul $t0, $t0, 4 # account for ints; storage size = word\n### and $t1, $a0, 0x0000001f ... should be andi\n    andi $t1, $a0, 0x0000001f # lo &amp; 0x0000001f;\n### not sw $t1, 4($t1) which does not make sense\n### array[i] is $t5 and data to store is $t1\n    sw $t1, 0($t5) # array[i] = lo &amp; 0x0000001f;\n    srl $t2, $a0, 5 # lo &gt;&gt; 5;\n### why do you want to store lo? Just keep it is register $t2.\n### And your store is anyway incorrect. Should be sw $t2,0($t6) \n####                           where $t6 is the address of lo\n##    sw $t2, 0($t2) # lo = lo &gt;&gt; 5;\n### add add $t0 ... should be addi\n    addi $t0, $t0, 1 # ++i\n#### and you must increment array address\n    addi $t5, $t5, 4 # $t5++ -&gt; $t5==array[i+1]\n    j first_loop # jump back to top of loop\n</code></pre>\n\n<p>Now try to correct the rest of your program. Errors in the asm should be explicit.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11050687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc5cb6c2e6c6475e0c01d7db8f1fb0e?s=128&d=identicon&r=PG&f=1", "display_name": "user611988", "link": "https://stackoverflow.com/users/11050687/user611988"}, "is_accepted": false, "score": 0, "last_activity_date": 1551391621, "creation_date": 1551391621, "answer_id": 54935017, "question_id": 54916090, "link": "https://stackoverflow.com/questions/54916090/c-to-mips-translation-decoder/54935017#54935017", "title": "C to MIPS translation: decoder", "body": "<p>I've used Alain's corrections to try and do the second loop</p>\n\n<pre><code>loop_two:\n# these loops go from 0-5 and then from 7-10\n# since t5 has been incremented each time, $t5 = array[5]\n# have to add 8 to get $t5 = array[7]\n# do this in between_loops\nslti $t7, $t6, 11              # i &lt; 11 ?\nbeq $t6, zero, end                       # if false, done with loop, go to end\n\n# loop body goes here\nandi $t6, $a1, 0x0000001f        # hi &amp; 0x0000001f\n# array[i] is $t5 and data to store is $t6\nsw $t6, 0($t5)                               # array[i] = hi &amp; 0x0000001f;\nsrl $t7, $a0, 5                              # hi &gt;&gt; 5;\nadd $t6, $t6, 1                                 # ++i\naddi $t5, $t5, 4                                # increment array address, $t5++ -&gt; $t5==array[i+1]\nj loop_two\n</code></pre>\n\n<p>This assumes that the code below was declared in decode_request</p>\n\n<pre><code>li $t6, 7   # t3 is our second counter (int i = 7)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10547576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38de28c4b6f67f5f7aeb7a1803f9705?s=128&d=identicon&r=PG&f=1", "display_name": "Mark T.", "link": "https://stackoverflow.com/users/10547576/mark-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1551391621, "creation_date": 1551310017, "question_id": 54916090, "link": "https://stackoverflow.com/questions/54916090/c-to-mips-translation-decoder", "title": "C to MIPS translation: decoder", "body": "<p>We're given the following code in C and asked to translate it into MIPS. We don't need to handle lo and hi; they're stored for us in $a0 and $a1:</p>\n\n<pre><code>void decode_request(unsigned long int request, int* array) {\n\n   // lo and hi are already stored for us in $a0 and $a1\n  unsigned lo = (unsigned)((request &lt;&lt; 32) &gt;&gt; 32);\n  unsigned hi = (unsigned)(request &gt;&gt; 32);\n\n  for (int i = 0; i &lt; 6; ++i) {\n    array[i] = lo &amp; 0x0000001f;\n    lo = lo &gt;&gt; 5;\n }\n  unsigned upper_three_bits = (hi &lt;&lt; 2) &amp; 0x0000001f;\n  array[6] = upper_three_bits | lo;\n  hi = hi &gt;&gt; 3;\n\n  for (int i = 7; i &lt; 11; ++i) {\n    array[i] = hi &amp; 0x0000001f;\n    hi = hi &gt;&gt; 5;\n  }\n</code></pre>\n\n<p>This is my attempt of it:</p>\n\n<pre><code>.globl decode_request\ndecode_request:\n    li      $t0, 0      # int i = 0;\n\nfirst_loop:\n    bge $t0, 6, after_first_loop    # branch if greater than or equal to 6\n    mul $t0, $t0, 4 # account for ints; storage size = word\n    and $t1, $a0, 0x0000001f # lo &amp; 0x0000001f;\n    sw $t1, 4($t1) # array[i] = lo &amp; 0x0000001f;\n    srl $t2, $a0, 5 # lo &gt;&gt; 5;\n    sw $t2, 0($t2) # lo = lo &gt;&gt; 5;\n    add $t0, $t0, 1 # ++i\n    j first_loop # jump back to top of loop\n\nafter_first_loop:\n    sll $t3, $a1, 2 # (hi &lt;&lt; 2)\n    and $t3, $t3, 0x0000001f # &amp; 0x0000001f\n    mul $t3, $t3, 4 # account for ints; storage size = word\n    sw $t3, 0($t3) # store back into memory\n    or $t4, $t3, $a0 # array[6] = upper_three_bits | lo;\n    sw $t4, 24($t4) # store back into memory; use 24 since int = 4 bytes and we have offset of 6\n    srl $a1, $a1, 3 # hi &gt;&gt; 3;\n    sw $a1, 0($a1) # hi = hi &gt;&gt; 3;\n\nsecond_loop:\n    li $t5, 7 # int i = 7;\n    bge $t0, 11, end    # branch if greater than or equal to 11\n    mul $t5, $t5, 4  # account for ints; storage size = word\n    and $t6, $a1, 0x0000001f # hi &amp; 0x0000001f\n    sw $t6, 4($t6) # array[i] = hi &amp; 0x0000001f;\n    srl $t7, $a0, 5 # hi &gt;&gt; 5;\n    sw $t7, 0($t7) # lo = lo &gt;&gt; 5;\n    add $t5, $t5, 1 # ++i\n    j second_loop # jump back to top of second_loop\nend:\n    jr  $ra\n</code></pre>\n\n<p>Any ideas as to where I could be going wrong, or possibly other approaches?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "codeblocks"], "comments": [{"owner": {"reputation": 3518, "user_id": 4959547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIjar.png?s=128&g=1", "display_name": "molamk", "link": "https://stackoverflow.com/users/4959547/molamk"}, "edited": false, "score": 2, "creation_date": 1551309924, "post_id": 54916063, "comment_id": 96598351, "body": "chars take single quotes like <code>&#39;M&#39;</code>. Use <code>sexo == &#39;m&#39; || sexo == &#39;M&#39;</code>"}, {"owner": {"reputation": 3518, "user_id": 4959547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIjar.png?s=128&g=1", "display_name": "molamk", "link": "https://stackoverflow.com/users/4959547/molamk"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551310086, "post_id": 54916063, "comment_id": 96598395, "body": "@EugeneSh. yes, that too"}], "answers": [{"tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": true, "score": 2, "last_activity_date": 1551310556, "last_edit_date": 1551310556, "creation_date": 1551309925, "answer_id": 54916076, "question_id": 54916063, "link": "https://stackoverflow.com/questions/54916063/i-cant-use-char-names-in-if-statements/54916076#54916076", "title": "I can&#39;t use char names in if statements", "body": "<p>they way you used m &amp; M &amp; f &amp; F is like they are variable not characters \nthis is what you meant to do</p>\n\n<p>2- the comparison operator is ==  not = only ( which is the assignment operator)</p>\n\n<pre><code>if (sexo=='m'||sexo=='M'||sexo=='f'||sexo=='F')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 11078764, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kbElKkbyRl8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPDUvEbIZcdiAnJw2Kd5HsVMPQCjQ/mo/photo.jpg?sz=128", "display_name": "nissim abehcera", "link": "https://stackoverflow.com/users/11078764/nissim-abehcera"}, "is_accepted": false, "score": 1, "last_activity_date": 1551311439, "last_edit_date": 1551311439, "creation_date": 1551309948, "answer_id": 54916080, "question_id": 54916063, "link": "https://stackoverflow.com/questions/54916063/i-cant-use-char-names-in-if-statements/54916080#54916080", "title": "I can&#39;t use char names in if statements", "body": "<p>Replace this line</p>\n\n<pre><code>if (sexo=m||sexo=M||sexo=f||sexo=F)\n</code></pre>\n\n<p>by</p>\n\n<pre><code>if (sexo=='m'||sexo=='M'||sexo=='f'||sexo=='F')\n</code></pre>\n\n<p>Character constants are enclosed in single quotes.</p>\n"}, {"tags": [], "owner": {"reputation": 535, "user_id": 7927200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a94c975d5ce0fe1b5f06edf3dc043a?s=128&d=identicon&r=PG&f=1", "display_name": "Niloy Rashid", "link": "https://stackoverflow.com/users/7927200/niloy-rashid"}, "is_accepted": false, "score": 0, "last_activity_date": 1551312968, "creation_date": 1551312968, "answer_id": 54916514, "question_id": 54916063, "link": "https://stackoverflow.com/questions/54916063/i-cant-use-char-names-in-if-statements/54916514#54916514", "title": "I can&#39;t use char names in if statements", "body": "<p><strong>Firstly</strong>, You must use <code>==</code> if you want to compare two value,  not <code>=</code>. A single equel (<code>=</code>) is used for initial a value in a variable. </p>\n\n<p><strong>Secondly</strong>, If you want to compare a value with a character you must put a single quotation before and after it, like <code>sexo == 'A'</code>. Comparing it without quotation, like <code>sexo == A</code> means that you compare it with <em>value of variable A</em> not the <em>value of A</em>. So you need to change your code in following way:</p>\n\n<p>Change:</p>\n\n<pre><code>if (sexo=m||sexo=M||sexo=f||sexo=F)\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>if (sexo=='m'||sexo=='M'||sexo=='f'||sexo=='F')\n</code></pre>\n\n<p>And change:</p>\n\n<pre><code>if (sexo=m||sexo=M)\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>if (sexo=='m'||sexo=='M')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11127846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cuDBTdouy2w/AAAAAAAAAAI/AAAAAAAAABQ/YsBJIY2qpHs/photo.jpg?sz=128", "display_name": "alwaysNever", "link": "https://stackoverflow.com/users/11127846/alwaysnever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54916076, "answer_count": 3, "score": -2, "last_activity_date": 1551318434, "creation_date": 1551309771, "last_edit_date": 1551318434, "question_id": 54916063, "link": "https://stackoverflow.com/questions/54916063/i-cant-use-char-names-in-if-statements", "title": "I can&#39;t use char names in if statements", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main()\n{\n    char sexo;\n    float alt,peso;\n    printf(\"Qual o seu sexo? (M/F)\");\n    sexo=getch();\n    printf(\"Insira a sua altura: \");\n    scanf(\"&amp;f\", &amp;alt);\n    if (sexo=m||sexo=M||sexo=f||sexo=F)\n    {\n        if (sexo=m||sexo=M)\n        peso=(72.7*alt)-58;\n        else\n        peso=(62.1*alt)-44.7;\n        printf(\"O peso recomendado para o seu sexo e %.2fKg\",peso);\n    }\n    else\n        printf(\"Sexo invalido\");\n}\n</code></pre>\n\n<p>Once I try to compile this I get errors on line 11 saying:</p>\n\n<pre><code>error: 'm' undeclared (first use in this function)\nerror: 'M' undeclared (first use in this function)\nerror: 'f' undeclared (first use in this function)\nerror: 'F' undeclared (first use in this function)\n\n||=== Build failed: 4 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===||\n</code></pre>\n\n<p>Anyone knows what's happening?</p>\n"}, {"tags": ["c", "64-bit", "language-lawyer", "c99"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1551308254, "post_id": 54915742, "comment_id": 96597872, "body": "Not sure about C99, but <code>int64_t</code> is definitely optional in C11, except when it&#39;s not. See section 7.20.1.1 of the C11 specification for details."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1551308373, "post_id": 54915742, "comment_id": 96597912, "body": "@user3386109: Could I trouble you for a link? Also, your phrasing is rather cryptic."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1551308485, "post_id": 54915742, "comment_id": 96597946, "body": "Sorry, I don&#39;t have a link. But the draft of the C11 specification is freely available online, and can be found by searching for <code>N1570</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1551308605, "post_id": 54915742, "comment_id": 96597965, "body": "<a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.20.1.1p3\" rel=\"nofollow noreferrer\">Link to C11 draft</a>. The types are optional but should be provided if the machine architecture has an appropriate type, and must be provided if some integer type has the same characteristics."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1551308891, "post_id": 54915742, "comment_id": 96598067, "body": "Anyway, the answer is &quot;no&quot;. You cannot count on the types existing."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1551371117, "post_id": 54915742, "comment_id": 96624741, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/51173366/understanding-fixed-width-integer-types\">Understanding fixed width integer types</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1551372014, "post_id": 54915742, "comment_id": 96625232, "body": "<a href=\"https://stackoverflow.com/q/51590607/995714\">Are there any platforms where fixed width types (intXX_t) are missing?</a>, <a href=\"https://stackoverflow.com/q/15336136/995714\">Can stdint&#39;s int8_t exist on an architecture that does not have 8-bit bytes?</a>, <a href=\"https://stackoverflow.com/q/51173366/995714\">Understanding fixed width integer types</a>, <a href=\"https://stackoverflow.com/q/18131032/995714\">How to check if uint8_t exists as a type, instead of unsigned char?</a>, <a href=\"https://stackoverflow.com/q/31037764/995714\">Are the fixed width integer types guaranteed to be typedefs for the standard built in types?</a>"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1551399821, "post_id": 54915742, "comment_id": 96636702, "body": "@phuclv: All of that stuff is simply not what I asked."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1551404075, "post_id": 54915742, "comment_id": 96637591, "body": "definitely yes. They all say that fixed-width integers are not required on systems that can&#39;t support them. Only the <code>least</code> variant is required"}], "answers": [{"comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1551309072, "post_id": 54915934, "comment_id": 96598124, "body": "Using the word &quot;probably&quot; does not sound like a definite answer."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 3, "creation_date": 1551309977, "post_id": 54915934, "comment_id": 96598365, "body": "Yuu could have as easily referenced the C99 draft and been definitive.  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf</a>"}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1551363895, "last_edit_date": 1551363895, "creation_date": 1551308864, "answer_id": 54915934, "question_id": 54915742, "link": "https://stackoverflow.com/questions/54915742/does-c99-mandate-a-int64-t-type-be-available-always/54915934#54915934", "title": "Does C99 mandate a `int64_t` type be available, always?", "body": "<h2>No, C99 does not mandate an <code>int64_t</code> type.</h2>\n\n<p>(Thanks @user3386109, @Clifford)</p>\n\n<p>An <code>int64_t</code> type is not required to be available. Quoting the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">C99 standard draft document N1256</a>:</p>\n\n<blockquote>\n  <p>7.18.11.1  Exact-width integer  types </p>\n  \n  <ol>\n  <li>The  typedef  name int <strong>N</strong>_t designates  a  signed  integer  type etc. etc.\n  ...</li>\n  <li>These  types  are optional. However,  if  an  implementation  provides  integer  types with widths  of  ... 64  bits... that  have  a two\u2019s complement\n  representation... it shall define the corresponding typedef name.</li>\n  </ol>\n</blockquote>\n\n<p>But see @chux and @JohnBollinger's answers about <code>long long</code> having 64 bits.</p>\n"}, {"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551309879, "post_id": 54916000, "comment_id": 96598333, "body": "C does not require <code>long long</code> to be 64-bit. <code>LLONG_MIN</code> is permitted to be <code>-0x7fffffffffffffff</code>, which makes it almost 100 zeptobits short of 64-bit if the implementation makes such a bad choice (and, for practical purposes, 63-bit)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310333, "post_id": 54916000, "comment_id": 96598465, "body": "@R.. Agree &quot;C does not require <code>long long</code> to be 64-bit.&quot;, that is why the answer has &quot;<code>long long</code> which is at <i>least</i> 64-bits.&quot;.  It could be wider.  It could have a range as narrow as [-0x7fff-ffff-ffff-ffff ... +0x7fff-ffff-ffff-ffff]"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310415, "post_id": 54916000, "comment_id": 96598485, "body": "It doesn&#39;t even require it to be &quot;at least 64 bits&quot;. it requires it to be at least 63.999999999999999999921... bits. Sorry my first comment was misworded and missing the phrase &quot;at least&quot;, but the point was that the &quot;at least&quot; is false due to the backwards provisions for allowing ones-complement, sign/magnitude, and &quot;deficient twos complement&quot; implementations."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310516, "post_id": 54916000, "comment_id": 96598512, "body": "@R.. Since there&#39;s no such thing as fractional bits, that&#39;s the same thing as &quot;at least 64 bits&quot;."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1551310580, "post_id": 54916000, "comment_id": 96598528, "body": "@Barmar: No, you have to round down if you only want to count whole bits, in which case it&#39;s effectively 63-bit (i.e. the largest power-of-two interval that&#39;s fully representable in the range is 2^63 in length, not 2^64). One way of thinking of this is that one bit is potentially &quot;not fully usable&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310666, "post_id": 54916000, "comment_id": 96598548, "body": "@R.. Signed types are limited to the common <i>two\u2019s complement</i>.  The rare <i>sign and magnitude</i> and <i>ones\u2019 complement</i> optional encoding require a minimal 64-bit encoding as well.  Of course, we are splitting hairs/bits. ;-)"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310682, "post_id": 54916000, "comment_id": 96598550, "body": "Note that the next version of the C standard will fix this, mandating full-range twos complement for all integer types. We have SO&#39;s own JF Bastien to thank for this! :-)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310764, "post_id": 54916000, "comment_id": 96598573, "body": "@R.. If you require at least 63.9999... bits, and you round down, you&#39;ll have less than that many bits and won&#39;t be able to encode the full range."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310781, "post_id": 54916000, "comment_id": 96598576, "body": "@R.. Interesting news about next version of the C.  Have an anticipated year?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1551310822, "post_id": 54916000, "comment_id": 96598584, "body": "I think it will be more focused on very important issues  like trigraphs and so on. Any modernisation attempt will be opposed by IBM (as always) as they have created 60 years ago weird architectures and they want C standard to be implementable on it"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1551310839, "post_id": 54916000, "comment_id": 96598586, "body": "@Barmar: The point is that you cannot represent a full 64-bit range on such an implementation, so if you want to treat <code>long long</code> as having power-of-two range, you have to treat it as only being 63-bit. Of course you can treat it as having the full almost-64-bit range, but that&#39;s not a 64-bit range and it&#39;s incorrect to describe it as such."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551310939, "post_id": 54916000, "comment_id": 96598608, "body": "@chux: I think I saw an estimate somewhere but I don&#39;t recall where. I&#39;ve been in contact with jfbastien on and off via Twitter and other channels regarding the proposal and its acceptance, though."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1551311066, "post_id": 54916000, "comment_id": 96598644, "body": "@R.. My point is how many bits you need to represent the required range. A sign/magnitude representation can&#39;t represent the same range as 64-bit two&#39;s complement, but it still needs 64 bits to represent that range (63 bits of magnitude, 1 bit of sign)."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1551311242, "post_id": 54916000, "comment_id": 96598691, "body": "@Barmar: Generally when using a type you care about the range of values it can represent, not (or at least more than) the amount of storage it requires. If you&#39;re talking about storage you&#39;d also count padding bits."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1551311371, "post_id": 54916000, "comment_id": 96598719, "body": "@R.. Of course. But you were the one who said &quot;it requires it to be at least 63.999999999999999999921... bits&quot;, which seems to be talking about the amount of storage."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1551313176, "post_id": 54916000, "comment_id": 96599157, "body": "@Barmar: Rather it&#39;s talking about a space of possible values. Fractional bits make sense when talking about entropy/possibilities."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1551311479, "last_edit_date": 1551311479, "creation_date": 1551309288, "answer_id": 54916000, "question_id": 54915742, "link": "https://stackoverflow.com/questions/54915742/does-c99-mandate-a-int64-t-type-be-available-always/54916000#54916000", "title": "Does C99 mandate a `int64_t` type be available, always?", "body": "<blockquote>\n  <p>Does the C99 standard mandate that a conforming compiler have a 64-bit int64_t defined (and usable)? </p>\n</blockquote>\n\n<p>No, yet C99 requires <code>long long</code> which is at <em>least</em> 64-bits.</p>\n\n<p>Further, <code>int64_t</code> is very commonly available.  It would be very  unlikely you will encounter a conformant C99 without <code>int64_t</code> as it <strong>is required</strong> on nearly all platforms.</p>\n\n<blockquote>\n  <p>C11dr  7.20.1.1 Exact-width integer types<br>\n  (<code>int64_t</code>) .... if an implementation provides integer types with\n  widths of 8, 16, 32, or 64 bits, no padding bits, and (for the signed types) that have a two\u2019s complement representation, it shall define the corresponding typedef names.  </p>\n</blockquote>\n\n<p>The bit width of the processor is not a factor in this functionality - <code>long long</code> must exist. If that <code>long long</code> (or any standard type is 64-bit 2's compliment), then <code>int64_t</code> <strong>must</strong> exist too.   A processer's bit width does affect <em>performance</em>.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/questions/54915742/does-c99-mandate-a-int64-t-type-be-available-always/54916000?noredirect=1#comment96598333_54916000\">@R..</a> comment emphasizes that a <code>long long</code> that takes 64-bits of memory to encode, can, by spec only support the range of [-0x7fff-ffff-ffff-ffff ... +0x7fff-ffff-ffff-ffff], one shy of <code>int64_t</code> range of [-0x8000-0000-0000-0000 ... +0x7fff-ffff-ffff-ffff].  Such platforms these days are exceedingly rare, if they exist.</p>\n"}, {"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1551310292, "post_id": 54916073, "comment_id": 96598453, "body": "<code>There used to be computers with 36-bit words, and others with 60-bit words.</code>  New standard should forget 40-50 years old computers. And yes there will not be conforming C21 compilers for them. Some standard fanatics would have a heart attack - there will be no way of writing portable code for the ferrite memory machines. End of the world. The life will be senseless."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1551310530, "post_id": 54916073, "comment_id": 96598514, "body": "What was faintly relevant twenty years ago is not so relevant now.  In 1999, there were at least some machines of those types still running outside of computer museums.  These days, not so much."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1551310908, "post_id": 54916073, "comment_id": 96598600, "body": "Also, there are DSP-class machines with <code>CHAR_BIT</code> of 16.  They have problems with <code>int8_t</code>, but not the other types."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1551311036, "post_id": 54916073, "comment_id": 96598634, "body": "Note that while <code>int_least64_t</code> is mandated to exist, it need not have range at least as large as <code>int64_t</code> would if it existed. <code>int_least64_t</code> is permitted to only go down to -2^63+1 rather than all the way down to -2^63. This will be fixed in the next edition of the C standard. See <i>7.20.2.2 Limits of minimum-width integer types</i>."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1551311589, "post_id": 54916073, "comment_id": 96598768, "body": "@JonathanLeffler no one writes portable code for them. If someone tries to use uint8_t on them, should find an easier job"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1551309890, "creation_date": 1551309890, "answer_id": 54916073, "question_id": 54915742, "link": "https://stackoverflow.com/questions/54915742/does-c99-mandate-a-int64-t-type-be-available-always/54916073#54916073", "title": "Does C99 mandate a `int64_t` type be available, always?", "body": "<p>There are three sets of <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.20.1\" rel=\"nofollow noreferrer\">integer types</a>:</p>\n\n<ul>\n<li><code>intN_t</code> \u2014 such as <code>int64_t</code> and their unsigned counterparts; these exact types may not be available.</li>\n<li><code>int_leastN_t</code> \u2014 such as <code>int_least64_t</code>; types <code>int_least8_t</code>, <code>int_least16_t</code>, <code>int_least32_t</code> and <code>int_least64_t</code> and their unsigned counterparts are required \u2014 other types are optional.</li>\n<li><code>int_fastN_t</code> \u2014 such as <code>int_fast64_t</code>; types <code>int_fast8_t</code>, <code>int_fast16_t</code>, <code>int_fast32_t</code> and <code>int_fast64_t</code> are required (they're the fastest type with at least the given width).</li>\n</ul>\n\n<p>The standard also requires support for <code>long long</code>, and the minimum acceptable range for <code>long long</code> requires at least 64 bits (see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.2.4.2.1\" rel=\"nofollow noreferrer\">\u00a75.2.4.1 Sizes of integer types <code>&lt;limits.h&gt;</code></a>).  Therefore, the standard can legitimately demand support for the 'least' and 'fast' types at 64 bits or more \u2014 it also requires that to support <code>long long</code>.</p>\n\n<p>There used to be computers with 36-bit words, and others with 60-bit words.  Both of these would struggle to provide (basically, \"couldn't provide\") the exact width types, but can easily provide support for the 'least' and 'fast' types.</p>\n\n<p>The standard does not mandate the 'exact width types' \u2014 see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.20.1.1p3\" rel=\"nofollow noreferrer\">\u00a77.20.1.1 Exact-width integer types \u00b63</a>:</p>\n\n<blockquote>\n  <p>These types are optional. However, if an implementation provides integer types with widths of 8, 16, 32, or 64 bits, no padding bits, and (for the signed types) that have a two's complement representation, it shall define the corresponding typedef names.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1551342806, "post_id": 54916128, "comment_id": 96607787, "body": "So can you have a C99-conforming compiler which does not provide <code>int64_t</code>? I mean, can, say <code>long long</code> have a non-power-of-2 size, or 128 bits, and <code>int64_t</code> be missing?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1551363207, "post_id": 54916128, "comment_id": 96619790, "body": "Yes, @einpoklum, in principle you can.  As I said, &quot;a conforming implementation is not required to provide any type that exactly matches the characteristics of an int64_t, and if it doesn&#39;t, then it needn&#39;t (indeed, must not [...]) provide type int64_t&quot;.  However, in practice, I am not aware of any existing, conforming C99 or C11 implementation that fails to provide <code>int64_t</code>."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1551310283, "creation_date": 1551310283, "answer_id": 54916128, "question_id": 54915742, "link": "https://stackoverflow.com/questions/54915742/does-c99-mandate-a-int64-t-type-be-available-always/54916128#54916128", "title": "Does C99 mandate a `int64_t` type be available, always?", "body": "<blockquote>\n  <p>Does the C99 standard mandate that a conforming compiler have a 64-bit\n  int64_t defined (and usable)? Or is it optional, and just happens to\n  be defined by all popular compilers?</p>\n</blockquote>\n\n<p>The type is optional, in one sense, and conditionally required in a different sense.  Specifically, <a href=\"http://port70.net/~nsz/c/c99/n1256.html#7.18.1.1\" rel=\"noreferrer\">C99 says</a>,</p>\n\n<blockquote>\n  <p>The typedef name intN_t designates a signed integer type with width N\n  , no padding bits, and a two's complement representation. [...]</p>\n  \n  <p>These types are optional. However, if an implementation provides\n  integer types with widths of 8, 16, 32, or 64 bits, no padding bits,\n  and (for the signed types) that have a two's complement\n  representation, it shall define the corresponding typedef names.</p>\n</blockquote>\n\n<p>Thus, <code>int64_t</code> is optional in the sense that a conforming implementation is not required to provide any type that exactly matches the characteristics of an <code>int64_t</code>, and if it doesn't, then it needn't (indeed, must not, according to another section) provide type <code>int64_t</code>.</p>\n\n<p>C99 does specify that there is a type <code>long long int</code> whose required minimum range necessitates a representation at least 64 bits wide.  Now it is possible that in some implementation there is no signed integer type <em>exactly</em> 64 bits wide (for example, maybe <code>int</code> is 24 bits, <code>long</code> 48, and <code>long long</code> 96), and it is possible that there is a 64-value-bit integer type, but it contains padding bits or is not represented in two's complement.  Such implementations could be fully conforming and yet not define an <code>int64_t</code>.  In practice, though, there aren't any such implementations in common use today.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 54916128, "answer_count": 4, "score": 2, "last_activity_date": 1551364166, "creation_date": 1551307665, "last_edit_date": 1551364166, "question_id": 54915742, "link": "https://stackoverflow.com/questions/54915742/does-c99-mandate-a-int64-t-type-be-available-always", "title": "Does C99 mandate a `int64_t` type be available, always?", "body": "<p>Does the C99 standard mandate that a conforming compiler have a 64-bit <code>int64_t</code>  defined (and usable)? Or is it optional, and just happens to be defined by all popular compilers? I'm obviously asking specifically about platforms on which the CPU can't process 64-bit values directly, but the question is more general</p>\n\n<p>I can't really figure this out from the <a href=\"https://en.wikipedia.org/wiki/C_data_types#Fixed-width_integer_types\" rel=\"nofollow noreferrer\">C data types Wikipedia page</a>, nor from <a href=\"https://stackoverflow.com/a/5531421/1593077\">this answer</a> to a related question.</p>\n"}, {"tags": ["c", "linked-list", "time-complexity", "complexity-theory"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1551309586, "post_id": 54915688, "comment_id": 96598256, "body": "So,the list is unsorted?"}, {"owner": {"reputation": 75, "user_id": 8357124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08828e00d17c69a32a99a100c8fd6414?s=128&d=identicon&r=PG&f=1", "display_name": "Constellation", "link": "https://stackoverflow.com/users/8357124/constellation"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1551309719, "post_id": 54915688, "comment_id": 96598294, "body": "@wildplasser thank you for your answer. The list is already sorted"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1551309882, "post_id": 54915688, "comment_id": 96598335, "body": "In that case the duplicate(s) can only be directly suivant. (and you would n&#39;t need an O(n*n) algoritm)"}, {"owner": {"reputation": 75, "user_id": 8357124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08828e00d17c69a32a99a100c8fd6414?s=128&d=identicon&r=PG&f=1", "display_name": "Constellation", "link": "https://stackoverflow.com/users/8357124/constellation"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1551310484, "post_id": 54915688, "comment_id": 96598505, "body": "@wildplasser i don&#39;t understand your answer. you mean, i don&#39;t need the while loop?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 3, "creation_date": 1551313418, "post_id": 54915688, "comment_id": 96599220, "body": "If the list is sorted, the algorithm becomes linear.  &quot;Is previous value same as current, then remove current&quot;  One walk through list."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 8357124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08828e00d17c69a32a99a100c8fd6414?s=128&d=identicon&r=PG&f=1", "display_name": "Constellation", "link": "https://stackoverflow.com/users/8357124/constellation"}, "edited": false, "score": 0, "creation_date": 1551311773, "post_id": 54916251, "comment_id": 96598810, "body": "&quot;del&quot; is not initialized? and why did you use declare ll as pointer in the function parameter?same i don&#39;t understant this notation &quot;llist**pp&quot;"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 75, "user_id": 8357124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08828e00d17c69a32a99a100c8fd6414?s=128&d=identicon&r=PG&f=1", "display_name": "Constellation", "link": "https://stackoverflow.com/users/8357124/constellation"}, "edited": false, "score": 0, "creation_date": 1551312108, "post_id": 54916251, "comment_id": 96598894, "body": "I don&#39;t typedef pointers (since it is a bad habit) and <code>; del = *pp;</code> is an assignment."}, {"owner": {"reputation": 75, "user_id": 8357124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08828e00d17c69a32a99a100c8fd6414?s=128&d=identicon&r=PG&f=1", "display_name": "Constellation", "link": "https://stackoverflow.com/users/8357124/constellation"}, "edited": false, "score": 0, "creation_date": 1551312508, "post_id": 54916251, "comment_id": 96598982, "body": "and for the complexity?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 75, "user_id": 8357124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08828e00d17c69a32a99a100c8fd6414?s=128&d=identicon&r=PG&f=1", "display_name": "Constellation", "link": "https://stackoverflow.com/users/8357124/constellation"}, "edited": false, "score": 0, "creation_date": 1551312687, "post_id": 54916251, "comment_id": 96599031, "body": "Complexity is O(n), obviously. (the inner loop shortens the chain, or executes only once)"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": -1, "last_activity_date": 1551342877, "last_edit_date": 1551342877, "creation_date": 1551311093, "answer_id": 54916251, "question_id": 54915688, "link": "https://stackoverflow.com/questions/54915688/complexity-of-a-linked-list-which-eliminates-redundant-elements/54916251#54916251", "title": "Complexity of a linked list which eliminates redundant elements", "body": "<pre><code>void undup(struct llist* ll)\n{\nfor( ;ll; ll=ll-&gt;next) {        //walk the chain\n        struct llist **pp,*del;\n        for(pp = &amp;ll-&gt;next; del = *pp;) {\n                // since the list is sorted, duplicates MUST be adjecent.\n                // if the next node has a different value, there are no more dups\n                // (wrt ll-&gt;val) in the rest of the chain\n                if (del-&gt;val != ll-&gt;val) break;\n                *pp = del-&gt;next;\n                free(del);\n                }\n        }\nreturn;\n}\n</code></pre>\n\n<hr>\n\n<p>Complexity is O(n), obviously. (the inner loop shortens the chain, or executes only once)</p>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 1, "last_activity_date": 1551322876, "creation_date": 1551322876, "answer_id": 54917756, "question_id": 54915688, "link": "https://stackoverflow.com/questions/54915688/complexity-of-a-linked-list-which-eliminates-redundant-elements/54917756#54917756", "title": "Complexity of a linked list which eliminates redundant elements", "body": "<p>Yes, that is right.</p>\n\n<p>The outer loop goes through all the elements, and the inner loop goes through all the elements <em>after</em> the one the outer loop is on.</p>\n\n<p>On average the inner loop goes through half the elements, but that makes no difference to the complexity, which is still O(n\u00b2).</p>\n"}], "owner": {"reputation": 75, "user_id": 8357124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08828e00d17c69a32a99a100c8fd6414?s=128&d=identicon&r=PG&f=1", "display_name": "Constellation", "link": "https://stackoverflow.com/users/8357124/constellation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551342877, "creation_date": 1551307385, "last_edit_date": 1551309645, "question_id": 54915688, "link": "https://stackoverflow.com/questions/54915688/complexity-of-a-linked-list-which-eliminates-redundant-elements", "title": "Complexity of a linked list which eliminates redundant elements", "body": "<p>I want to calculate the complexity of this function. The following code eliminates redundant elements from an ordered list.</p>\n\n<p>My answer to its complexity is <code>O(n\u00b2) = O(n*n)</code> \"n\" for the first <code>while</code> and \"n\" for the second <code>while</code>.</p>\n\n<p>Is my answer correct? If not, how to correctly calculate the complexity?</p>\n\n<pre><code>liste redondance(liste l){\nliste red,p,prev;\nif(l==NULL)\n   return l;\nred=l;\nwhile(red!=NULL){\n   p=red-&gt;suivant;\n   prev=red;\n   while(p!=NULL){\n       if(p-&gt;val==red-&gt;val){\n           prev-&gt;suivant=p-&gt;suivant;\n           free(p);\n           p=prev-&gt;suivant;\n       }\n       else{\n           p=p-&gt;suivant;\n           prev=prev-&gt;suivant;\n       }\n   }\n   red=red-&gt;suivant;\n   }\n  return(l);\n}\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c", "types", "printf", "typecasting-operator"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1551307328, "post_id": 54915658, "comment_id": 96597565, "body": "<a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ASCII</a>"}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 4, "creation_date": 1551307333, "post_id": 54915658, "comment_id": 96597571, "body": "because the ASCII value of the string &#39;5&#39; is 53.  If you want to print it as a string then use %c"}, {"owner": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "edited": false, "score": 0, "creation_date": 1551307553, "post_id": 54915658, "comment_id": 96597644, "body": "I know what ASCII is and how printf works. Take a look at the code again, the castChar is a type-casted char. And it prints 5, that is the translated value from ASCII. The realChar is initialized to a char, and not type-casted as castChar. Both are chars but they print out different values."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1551307555, "post_id": 54915658, "comment_id": 96597646, "body": "@OldProgrammer You cannot assume ASCII character set"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1551307827, "post_id": 54915658, "comment_id": 96597732, "body": "<code>(char)5</code> and <code>&#39;5&#39;</code> mean completely different things."}, {"owner": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1551307916, "post_id": 54915658, "comment_id": 96597759, "body": "@user2357112 could you please explain how they are different? From my understanding, a type conversion is basically a change of how the data is stored in the memory."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 2, "creation_date": 1551308026, "post_id": 54915658, "comment_id": 96597796, "body": "@OldProgrammer <code>&#39;5&#39;</code> is not string, it&#39;s character. String comes in <code>&quot; &quot;</code> double quote in C. <a href=\"https://stackoverflow.com/a/3683613/7508077\">stackoverflow.com/a/3683613/7508077</a>"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 0, "creation_date": 1551308341, "post_id": 54915658, "comment_id": 96597900, "body": "C is not an object-oriented language and casting != conversion."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1551310203, "post_id": 54915658, "comment_id": 96598432, "body": "Link explain difference between casting and conversion: <a href=\"https://softwareengineering.stackexchange.com/a/133078/325759\">softwareengineering.stackexchange.com/a/133078/325759</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1551308198, "post_id": 54915795, "comment_id": 96597857, "body": "i hear in C we can use other character set instead of ASCII, is it possible that <code>realChar</code> in the <code>char realChar = &#39;5&#39;;</code> have different value than 53?"}, {"owner": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "edited": false, "score": 0, "creation_date": 1551308332, "post_id": 54915795, "comment_id": 96597893, "body": "Does that mean that the maximum value of casted ints differs from non-casted ints?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1551308359, "post_id": 54915795, "comment_id": 96597904, "body": "@EsmaeelE: C leaves it up to the underlying platform - as long as the basic character set is supported and encodings for decimal digits are contiguous, it doesn&#39;t really care whether the underlying representation is ASCII or EBCDIC or whatever."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "edited": false, "score": 0, "creation_date": 1551308992, "post_id": 54915795, "comment_id": 96598100, "body": "@MoonOnAStick: Not quite sure what you mean by that.  If you try to cast an integer value to a <i>signed</i> integer type that&#39;s too small to hold it (for example, <code>signed char x = (signed char) 12345;</code>), you&#39;ll get an implementation-defined result (or a trap).  If you try to cast an integer value to an <i>unsigned</i> type that&#39;s too small, you&#39;ll get the modulus."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1551309570, "post_id": 54915795, "comment_id": 96598249, "body": "Is is true?    If the system coding is EBCDIC, <code>char realChar = &#39;5&#39;</code> put in <code>realChar</code>,  <code>hF5: 11110101</code> the decimal equivalent 20."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1551309805, "post_id": 54915795, "comment_id": 96598317, "body": "@EsmaeelE: Decimal equivalent 245, but yes, it will be a different value from the ASCII code for <code>&#39;5&#39;</code>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1551310899, "post_id": 54915795, "comment_id": 96598597, "body": "<i>&quot;i hear in C we can use other character set instead of ASCII&quot;</i> - You cannot arbitrarily choose the character set or encoding - that is platform specific not something you can select in the language.  On modern platforms you generally have a choice between ASCII/ANSI and Unicode in the <i>execution environment</i>, but it is complicated because Unicode does not define a single encoding and there are several variable width encodings."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1551311215, "post_id": 54915795, "comment_id": 96598685, "body": "Talk of EBCDIC is largely relevant - you cannot choose to use it if the platform does not use it and platforms that do are obsolete - its encoding is designed to be convenient for use on punched cards.  Which makes it inconvenient for almost any other purpose."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1551312969, "post_id": 54915795, "comment_id": 96599100, "body": "@Clifford <i>On modern platforms you generally have a choice between ASCII/ANSI</i>, How i can choose between them? And why we do this selections? what is application of that things? Is it possible to code on a machine with ASCII coding like my current PC and develop an application that must run on other coding like ANSI?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1551323619, "post_id": 54915795, "comment_id": 96601455, "body": "@EsmaeelE: You don\u2019t make that choice.  It\u2019s whatever comes with the platform."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1551351349, "post_id": 54915795, "comment_id": 96612794, "body": "@EsmaeelE: It is possible to write code that is designed to work correctly regardless of the source or execution character set."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1551357187, "post_id": 54915795, "comment_id": 96616222, "body": "@EsmaeelE ; SO is not a discussion forum; you should not ask further questions in comments - especially comments against an answer where the question is unrelated. Unicode supports thousands of code-points and thus supports Kanji, Catacana, Hebrew, Cyrilic, European accented characters etc. - even Egyptian hieroglyphs!  With 8 bit character sets, you are limited to languages with small alphabets and the use of locale specific code-pages. C itself does not have direct support for Unicode or code-pages - its is a platform issue.    Research first: <a href=\"https://unicodebook.readthedocs.io/index.html\" rel=\"nofollow noreferrer\">unicodebook.readthedocs.io/index.html</a>"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1551308026, "creation_date": 1551308026, "answer_id": 54915795, "question_id": 54915658, "link": "https://stackoverflow.com/questions/54915658/printing-type-cast-types-in-c/54915795#54915795", "title": "Printing type-cast types in C", "body": "<p>Because the value of <code>castChar</code> is the integer value <code>5</code>, while the value of <code>realChar</code> is the <em>integer encoding of the character value</em> <code>'5'</code> (ASCII 53).  These are not the same values.  </p>\n\n<p>Casting has nothing to do with it.  Or, more accurately, casting <code>nr</code> to <code>char</code> doesn't give you the <em>character value</em> <code>'5'</code>, it just assigns the integer value <code>5</code> to a narrower type.  </p>\n\n<p>If you expect the output <code>5</code>, then you need to print <code>realChar</code> with the <code>%c</code> specifier, not the <code>%d</code> specifier.  </p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "edited": false, "score": 0, "creation_date": 1551308589, "post_id": 54915819, "comment_id": 96597960, "body": "What&#39;s the point of type-casting if it doesn&#39;t behave as the type casted?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "edited": false, "score": 0, "creation_date": 1551308742, "post_id": 54915819, "comment_id": 96598010, "body": "Casts should generally be avoided. There is almost always a way to write code that uses a type cast into cleaner code that does not use it. Type-casting in C would be used to reinterpret a type as a different type, such as a signed integer as an unsigned integer."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "edited": false, "score": 1, "creation_date": 1551308961, "post_id": 54915819, "comment_id": 96598090, "body": "Strict aliasing requires an object to only be interpreted by its own type or as <code>char</code>. So, you will sometimes see an object pointer be treated as a <code>char *</code>, and sometimes this will be done via a cast."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "edited": false, "score": 0, "creation_date": 1551309592, "post_id": 54915819, "comment_id": 96598257, "body": "@MoonOnAStick: it <i>does</i> behave like the type casted - if necessary, the value being cast will be converted to a different representation.  It will not change the <i>value</i>, though.  Again, the integer value <code>5</code> and the character value <code>&#39;5&#39;</code> are not the same, and a simple cast won&#39;t convert one to the other."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1551310291, "post_id": 54915819, "comment_id": 96598452, "body": "Another case where a cast is required is to make sure a pointer is passed into a variable argument function that expects to see a NULL pointer. Since <code>NULL</code> may be defined as a bare <code>0</code>, it would be passed as an <code>int</code> without a cast."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1551308157, "creation_date": 1551308157, "answer_id": 54915819, "question_id": 54915658, "link": "https://stackoverflow.com/questions/54915658/printing-type-cast-types-in-c/54915819#54915819", "title": "Printing type-cast types in C", "body": "<p><code>(char)5</code> and <code>'5'</code> are not the same thing.</p>\n\n<p>The literal <code>'5'</code> is an integer value that represents the character 5. Its value depends on the platform. Assuming ASCII representation for characters, this would be 53.</p>\n\n<p>The literal <code>(char)5</code> is the integer value 5 that has been cast to type <code>char</code>. This means it retains the value of 5 after the cast.</p>\n"}], "owner": {"reputation": 35, "user_id": 11127663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16193c0523175ecfecb5263ae8c0224f?s=128&d=identicon&r=PG&f=1", "display_name": "MoonOnAStick", "link": "https://stackoverflow.com/users/11127663/moononastick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1551310166, "creation_date": 1551307199, "last_edit_date": 1551310166, "question_id": 54915658, "link": "https://stackoverflow.com/questions/54915658/printing-type-cast-types-in-c", "title": "Printing type-cast types in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  int nr = 5;\n  char castChar = (char)nr;\n  char realChar = '5';\n  printf(\"The value is: %d\\n\", castChar);\n}\n</code></pre>\n\n<p>If the above code is compiled, the output will be:</p>\n\n<pre><code>The value is: 5\n</code></pre>\n\n<p>But if the code below is compiled, the console will output the value 53 instead. Why doesn't it print the same as the when the \"castChar\" is printed?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  int nr = 5;\n  char castChar = (char)nr;\n  char realChar = '5';\n  printf(\"The value is: %d\\n\", realChar);\n}\n</code></pre>\n"}, {"tags": ["c", "bgi"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 7, "creation_date": 1551305476, "post_id": 54915245, "comment_id": 96596888, "body": "Yikes  Why do I keep read about universities using 20+ year old C compilers."}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 3, "creation_date": 1551307017, "post_id": 54915245, "comment_id": 96597453, "body": "Welcome to StackOverflow! Can you clarify: a) which is the compiler and its version?, b) <code>BGI</code> is Borland Graphic Interface - is it right? c) which OS and version? @DavidHoelzer I can&#39;t believe too - I used BGI as student and it was .. 26 years ago! Wow!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551323877, "post_id": 54915245, "comment_id": 96601498, "body": "the header file: <code>conio.h</code> is strickly for a windows OS.  I.E. it is not portable.  Suggest using the standard C library functions for i/O with the user and not using <code>conio.h</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551324070, "post_id": 54915245, "comment_id": 96601532, "body": "here is why your getting unexpected font:  <code>settextstyle(EUROPEAN_FONT, 0, 16);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551324212, "post_id": 54915245, "comment_id": 96601558, "body": "the posted code is including <code>stdlib.h</code> twice, Why?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551324290, "post_id": 54915245, "comment_id": 96601573, "body": "it is poor programming practice to include header files those contents are not used.  Suggest removing the statement: <code>#include &lt;math.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551324523, "post_id": 54915245, "comment_id": 96601614, "body": "regarding: <code>void main(void) {</code>  In modern C, there are only two valid signatures for <code>main()</code> Both of them have a returned  type of <code>int</code>, not <code>void</code>"}, {"owner": {"reputation": 1, "user_id": 11127561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1d1a371a0e550d3b1b09d95b0df6d?s=128&d=identicon&r=PG&f=1", "display_name": "jbreaper", "link": "https://stackoverflow.com/users/11127561/jbreaper"}, "reply_to_user": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1551343333, "post_id": 54915245, "comment_id": 96608026, "body": "@AlexYu A) Visual Studio 2017 15.9.5 (but others using a 2015 version have the same problem) B) Yes, I&#39;m not even going to get into how frustrating this class is (seriously I had a programming class last semester and 2 this semester and they are still going over the basics (how to do maths)) C) windows 10 pro 1809"}, {"owner": {"reputation": 1, "user_id": 11127561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1d1a371a0e550d3b1b09d95b0df6d?s=128&d=identicon&r=PG&f=1", "display_name": "jbreaper", "link": "https://stackoverflow.com/users/11127561/jbreaper"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551343570, "post_id": 54915245, "comment_id": 96608123, "body": "@user3629249 replies in order of comments  1) It doesn&#39;t need to be portable, and if i remember correctly I was some of it&#39;s functionality.  2) I hadn&#39;t noticed stblib.h, thanks I&#39;ll fix that, but the main problem existed before I added the second.  3) As I said I only included the relevant code, math.h is being used in the code.  4) That part of the program was given to me by the lecturer."}, {"owner": {"reputation": 1, "user_id": 11127561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1d1a371a0e550d3b1b09d95b0df6d?s=128&d=identicon&r=PG&f=1", "display_name": "jbreaper", "link": "https://stackoverflow.com/users/11127561/jbreaper"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551344075, "post_id": 54915245, "comment_id": 96608387, "body": "@user3629249 sorry didn&#39;t see <code>settextstyle(EUROPEAN_FONT, 0, 16); </code> not sure what you mean, I have tried using different fonts and I&#39;m still getting the non-latin characters"}, {"owner": {"reputation": 1, "user_id": 11127561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1d1a371a0e550d3b1b09d95b0df6d?s=128&d=identicon&r=PG&f=1", "display_name": "jbreaper", "link": "https://stackoverflow.com/users/11127561/jbreaper"}, "reply_to_user": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1551953394, "post_id": 54915245, "comment_id": 96833119, "body": "@AlexYu I believe that I have worked out a possible reason for the problem, I think it&#39;s using the hex ascii values and trying to put them into unicode. i found this by checking the hex ascii for two letters combining them and putting the result into a unicode checker. it&#39;s not the exact character but it seems that doing it that way puts all the characters in the CJK sections of unicode."}], "owner": {"reputation": 1, "user_id": 11127561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1d1a371a0e550d3b1b09d95b0df6d?s=128&d=identicon&r=PG&f=1", "display_name": "jbreaper", "link": "https://stackoverflow.com/users/11127561/jbreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1551322892, "creation_date": 1551305166, "last_edit_date": 1551322892, "question_id": 54915245, "link": "https://stackoverflow.com/questions/54915245/characters-displaying-in-wrong-language", "title": "Characters displaying in wrong language", "body": "<p>I'm working on a project for university using <code>c</code>.</p>\n\n<p>We were given the framework for the project (basic GUI implementation using BGI). </p>\n\n<p>For some reason it is all the text in the display windows is coming out in south east Asian characters.</p>\n\n<p><img src=\"https://i.stack.imgur.com/OoNQ4.png\"></p>\n\n<p>Here is the code I'm currently using for this (well what seems relevant at least),</p>\n\n<pre><code>#include &lt;graphics.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid startScreen() {\n   settextstyle(EUROPEAN_FONT, 0, 16);\n   outtextxy((getmaxx() / 2) - (textwidth(\"TOWER OF POWER\") / 2), 0, \"TOWER OF POWER\");\n   outtextxy((getmaxx() / 2) - (textwidth(\"PRESS ANY KEY\")/2), getmaxy() - textheight(\"PRESS ANY KEY\"), \"PRESS ANY KEY\");\n\n   tower();\n\n   readkey();\n   clearviewport();\n}\n\nvoid main(void) {\n    // Initialise graphic window (x = 639 , y = 479)\n    int gd = DETECT, gm = 0;\n    initgraph(&amp;gd, &amp;gm, \"\");\n    startScreen();\n}\n</code></pre>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["c", "for-loop", "random", "while-loop", "corruption"], "comments": [{"owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "edited": false, "score": 1, "creation_date": 1551304463, "post_id": 54915062, "comment_id": 96596507, "body": "can you post the input <code>numbers.txt</code> as well?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1551304541, "post_id": 54915062, "comment_id": 96596545, "body": "Why <code>free(filer);</code>?"}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 1, "creation_date": 1551304743, "post_id": 54915062, "comment_id": 96596617, "body": "<code>num[5]</code> is accessing outside the bounds of the array (which is indexed from 0 to 4)"}, {"owner": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551459819, "post_id": 54915062, "comment_id": 96661229, "body": "Thanks phil M, the count starts at 0!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551310636, "post_id": 54915587, "comment_id": 96598539, "body": "Woooow! Your code makes more things than I can think! Thanks a lot! I&#39;ll study it and if there is something unclear I&#39;ll ask again!"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551382437, "post_id": 54915587, "comment_id": 96630345, "body": "@caesar753 sure you can"}, {"owner": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551383135, "post_id": 54915587, "comment_id": 96630701, "body": "1) i cannot understand what your first while loop does 2)what the meaning of <code>for (;;)</code>? 3)in your for loop i cannot figure out how the i variable gets the numbers contained in the file and read in the while loop (i guess) and so how the program knows  which line contains the extracted number, if present in number.txt"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551383690, "post_id": 54915587, "comment_id": 96630978, "body": "@caesar753  the <i>while</i> at the beginning reads all the integers from the file, while  <i>scanf</i> read an integer it returns 1 (because the format manage only %d, so 1 element). To be compatible with any number of numbers in the file I do not use an array with a fixed size but realloc to increase its size, loot on internet about <i>realloc</i>"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551383801, "post_id": 54915587, "comment_id": 96631040, "body": "@caesar753 <code>for(;;)</code> is like <code>for(;true;)</code> or <code>while(1)</code>, it loops without condition, it is necessary to do a <i>break</i> to go out (or a return of course)"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551383894, "post_id": 54915587, "comment_id": 96631081, "body": "@caesar753 <i>i</i> is just an index in the array, <code>nums[i]</code> is one of the read numbers. The program doesn&#39;t know the line where a number was, only the rank of the number. As you see in my files all the numbers are on the same line, but using several lines changes nothing in the code nor at the execution, <i>fscanf</i> bypass the newlines"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "edited": false, "score": 0, "creation_date": 1551384199, "post_id": 54915587, "comment_id": 96631219, "body": "@caesar753 if needed execute the program in a debugger step by step if you still do not understand and look at what happens / variables changes"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 2, "last_activity_date": 1551309830, "last_edit_date": 1551309830, "creation_date": 1551306844, "answer_id": 54915587, "question_id": 54915062, "link": "https://stackoverflow.com/questions/54915062/c-cannot-get-search-number-in-array-inside-while-loop-to-work-and-double-free-o/54915587#54915587", "title": "C cannot get search number in array inside while loop to work and &quot;double free or corruption&quot; error", "body": "<p>There are several problems in your code</p>\n\n<p>1) <code>printf(\"ERROR Creating File!\");</code> is a bad message, you do not try to create the file, you open it to read inside</p>\n\n<p>2) <code>num[5] = 0;</code> has an undefined behavior because you write out of <em>num</em> whose size is 5 (<code>int num[5];</code>)</p>\n\n<p>3) <code>free(filer);</code> <em>filer</em> is a <code>FILE *</code>, the behavior is undefined, what did you wanted to do ? This is very probably the reason of your :</p>\n\n<blockquote>\n  <p>Moreover, sometimes, after various iterations, the program stops with the error \"double free or corruption (! prev)\", what causes it?</p>\n</blockquote>\n\n<p>4) <code>get = 0;</code> is useless, you do not use <em>get</em> before to assign it again with the result of <em>rand()</em></p>\n\n<p>5) <code>r = 0;</code> is useless too because you do not use <em>r</em> before to do <code>scanf (\" %c\", &amp;r);</code></p>\n\n<p>6) <code>srand(time(0));</code> that must be done only one time at the beginning of the program, not several times because if you do two times in the same second the <code>rand()</code> will return the same value. </p>\n\n<p>7) you do</p>\n\n<pre><code>    for (n = 0; n &lt; 5; n++){\n    fscanf(filer, \"%d\\n\", &amp;num[n]);\n    }\n</code></pre>\n\n<p>for each <code>do .. while</code> but you never go back to the beginning of the file, so each time you progress and you do not check the end of the file. When you reach the end of the file <code>fscanf(filer, \"%d\\n\", &amp;num[n]);</code> does nothing and <em>num</em> is unchanged.</p>\n\n<p>You just need to read the numbers from the file only one time at the beginning of the execution</p>\n\n<p>8) You ask <em>rand()</em> to return a value between 1 and 27, so only few possibilities, this is probably why you have :</p>\n\n<blockquote>\n  <p>numbers in the list are often extracted.</p>\n</blockquote>\n\n<hr>\n\n<p>Here a proposal taking into account the remarks (except the last about the range of values), <em>numbers.txt</em> is not limited to 5 numbers. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#define rangeMAX 27 //Upper limit of range.\n#define rangeMIN 1  //Lower limit of range.\n\nint main()\n{\n  srand(time(0)); // this will ensure that every time, program will generate different set of numbers. If you remove this, same set of numbers will generated every time you run the program.\n\n  FILE * filer = fopen(\"numbers.txt\", \"r\");\n\n  if (filer == NULL)\n  {\n    printf(\"ERROR cannot read numbers.txt\");\n    exit(1);\n  }\n\n  int * nums = NULL;\n  int num;\n  size_t sz = 0, nnums = 0;\n\n  while (fscanf(filer, \"%d\", &amp;num) == 1) {\n    if (nnums == sz) {\n      sz += 100;\n      nums = realloc(nums, sz * sizeof(int));\n    }\n    nums[nnums++] = num;\n  }\n  fclose(filer);\n\n  printf(\"When you are ready press any key to continue\\n\");\n  getchar();\n\n  char yn[16];\n\n  do {\n    int get = ((rand() % (rangeMAX-rangeMIN+1)) + rangeMIN); // generate random number.\n    size_t i = 0;\n\n    for (;;) {\n      if (i == nnums) {\n        printf(\"%d is not in the file\\n\", get);\n        break;\n      }\n      if (get == nums[i]) {\n        printf(\"%d is the number rank %d in the file\\n\", get, i + 1);\n        break;\n      }\n      i += 1;\n    }\n\n    printf (\"Do you want another number? Y/N \");\n    if (scanf (\"%15s\", yn) != 1)\n      break;\n  } while (*yn == 'y' || *yn == 'Y');\n\n  return(0);\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ gcc -pedantic -Wall -g r.c\npi@raspberrypi:/tmp $ cat numbers.txt \n1 3 7 9 10 20 23\npi@raspberrypi:/tmp $ ./a.out\nWhen you are ready press any key to continue\n\n12 is not in the file\nDo you want another number? Y/N Y\n12 is not in the file\nDo you want another number? Y/N Y\n4 is not in the file\nDo you want another number? Y/N Y\n3 is the number rank 2 in the file\nDo you want another number? Y/N Y\n12 is not in the file\nDo you want another number? Y/N Y\n15 is not in the file\nDo you want another number? Y/N Y\n16 is not in the file\nDo you want another number? Y/N Y\n8 is not in the file\nDo you want another number? Y/N N\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "is_accepted": false, "score": 0, "last_activity_date": 1551462038, "last_edit_date": 1551462038, "creation_date": 1551461205, "answer_id": 54949563, "question_id": 54915062, "link": "https://stackoverflow.com/questions/54915062/c-cannot-get-search-number-in-array-inside-while-loop-to-work-and-double-free-o/54949563#54949563", "title": "C cannot get search number in array inside while loop to work and &quot;double free or corruption&quot; error", "body": "<p>Ok, i studied your code and i understood more or less what your program does and how variables are assigned, but this is my problem now:\ni set the dimension of the array to five because i want to read only the last (or the first, for now) five number in number.txt (which should be the latest extracted, because in a further step i'd like to append each extracted number in that file), so i managed to modify your code to do so (just modified the first while loop), and this works fine.\nWhat i cannot solve is why your for(;;) loop works great and my code nope, that is why in my code</p>\n\n<pre><code>for (n = 0; n &lt; sizeof(num[5]); n++){\n        if (get == num[n]){\n        printf(\"false\\n\");\n        printf(\"%d\\n\", n);\n        break;\n        }\nelse{\n        printf(\"true\");\n        break\n    }\n}\n</code></pre>\n\n<p>(added else) works only for the first number in the array, but if is extracted a number which is the second, the third ... in the array (which are loaded in the array, because i can print it) the program doesn't see it.</p>\n\n<p>@stensal In my numbers.txt file each number is located in a new line.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "is_accepted": false, "score": 0, "last_activity_date": 1553188027, "creation_date": 1553188027, "answer_id": 55285718, "question_id": 54915062, "link": "https://stackoverflow.com/questions/54915062/c-cannot-get-search-number-in-array-inside-while-loop-to-work-and-double-free-o/55285718#55285718", "title": "C cannot get search number in array inside while loop to work and &quot;double free or corruption&quot; error", "body": "<p>Ok, my program grew and now has many new functions:</p>\n\n<ol>\n<li>you can choose a file from which a list of names is loaded</li>\n<li>you can choose the file containing the numbers that have been yet extracted in previous sessions</li>\n<li>you can add the numbers of the students who weren't present at last lesson or who have a justistification for not having studied the lesson (I need this program to call students in classe)</li>\n<li>If a number has been yet extracted the program tries a second and then a third extraction</li>\n</ol>\n\n<p>and this is the code (comments are in italian)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#define rangeMAX 27 //Upper limit of range.\n#define rangeMIN 1  //Lower limit of range.\n\nint main()\n{\n  srand(time(0)); // this will ensure that every time, program will generate different set of numbers. If you remove this, same set of numbers will generated every time you run the program.\n\n char elenco[20], filelenco[30];\n    printf(\"inserire il nome del file elenco: \");\n    fgets(elenco, 20, stdin);\n    elenco[strlen(elenco)-1]='\\0';\n    sprintf(filelenco, \"%s.txt\", elenco);\n\n//lettura dell'elenco dei nomi\nchar nomi[27][20];\nFILE * nomif = fopen(filelenco, \"r\");\n\n  if (nomif == NULL)\n  {\n    printf(\"ERROR impossibile leggere %s\",filelenco);\n    exit(1);\n  }\n\n    size_t g = 0;\n\n        for (g = 0; g &lt;=27; g++) {\n                fscanf(nomif, \"%s\", nomi[g]);\n                }\n\n\n//prompt per la scelta del file in cui leggere i numeri di quelli gi\u00e0 chiamati\n    char fname[20], filename[30];\n    printf(\"inserire il nome del file: \");\n    fgets(fname, 20, stdin);\n    fname[strlen(fname)-1]='\\0';\n    sprintf(filename, \"%s.txt\", fname);\n   FILE * filer = fopen(filename, \"r\");\n\n  if (filer == NULL)\n  {\n    printf(\"ERROR impossibile leggere %s\\n\", fname);\n    exit(1);\n  }\n\n//creazione dell'array contenente i numeri di quelli gi\u00e0 chiamati\n  int * nums = NULL;\n  int num;\n  size_t sz = 0, nnums = 0;\n  char yn[16];\n  int c;\n\n  while (fscanf(filer, \"%d\", &amp;num) == 1) {\n    if (nnums == sz) {\n      sz += 100;\n      nums = realloc(nums, sz * sizeof(int));\n    }\n    nums[nnums++] = num;\n  }\n  fclose(filer);\n\n//creazione del file contenente gli assenti della volta precedente e i giustificati\nchar data[30], nome[20];\nchar ass[20];\nstruct tm ora;\ntime_t now;\nnow = time(NULL);//epoch time\nora = *(localtime(&amp;now)); //conversione nell'ora locale\nstrftime(data,30,\"%Y%m%d\",&amp;ora); //formattazione della data secondo lo standard  YYYYMMDD\nsprintf(nome, \"%s_giustificati_%s.txt\", data, fname); //creazione della stringa da usare come nome file\n//printf(\"%s\\n\", nome);\n\nFILE * assenti;\n\n    assenti = fopen(nome,  \"w+\"); //creazione vera e propria del file, con il nome formato al comando precedente\n    printf(\"Inserite i numeri degli assenti/giustificati\\n\");\n    scanf(\"%[^\\n]\", ass);\n    fprintf(assenti, \"0 %s\", ass);\n    fclose(assenti);\n\n//creazione dell'array degi assenit/giustificati tramite lettura del file appena creato\n  assenti = fopen(nome, \"r\");\n  int * nums1 = NULL;\n  int num1;\n  size_t sz1 = 0, nnums1 = 0;\n  int d;\n\n  while (fscanf(assenti, \"%d\", &amp;num1) == 1) {\n    if (nnums1 == sz1) {\n      sz1 += 100;\n      nums1 = realloc(nums1, sz1 * sizeof(int));\n    }\n    nums1[nnums1++] = num1;\n  }\n  fclose(assenti);\n\n//attesa dell'input\n  while ((getchar()) != '\\n'); \n\n  printf(\"Se siete pronti premete un tasto per continuare\\n\");\n  getchar();\n\n//scelta della pi\u00f9 grande tra le due variabili nnums (numero di elementi dell'array dei gi\u00e0 chiamati) e nnums1 (numero di elementi dell'array degli assenti/giustificati) - serve per le iterazioni del ciclo for all'interno del do...while\n    size_t max = ((nnums &gt;= nnums1) ? nnums : nnums1);\n//    printf(\"max %d\\n\", max);\n\n//somma delle due variabili nnums (numero di elementi dell'array dei gi\u00e0 chiamati) e nnums1 (numero di elementi dell'array degli assenti/giustificati)\n//  size_t total = nnums + nnums1;\n//  printf(\"total %d\\n\", total);\n\n  do {\n    int get = ((rand() % (rangeMAX-rangeMIN+1)) + rangeMIN); // generate random number.\n    size_t i = 0;\n\n//ciclo for che verifica che il numero non sia presente nel file dei gi\u00e0 chiamati e in quello degli assenti e giustificati. Solo dietro queste due condizioni estrae il numero\n    for (;;) {\n\n    if (i == max) {\n        printf(\"E' stato estratto il %d,\\n ovvero\\n\", get);\n    sleep(2);\n    printf(\"%s\\n\", nomi[get-1]);\n    filer = fopen(filename, \"a\");\n    fprintf (filer, \"%d\\n\", get);\n    fclose(filer);\n        break;\n      }\n\n//se il numero \u00e8 gia presente nell'array dei gi\u00e0 chiamati crea un interrupt e fa ripartire il do\n      if (get == nums[i]) {\n//      printf(\"%d is the number rank %d in the file\\n\", get, i + 1);\n    printf(\"prima estrazione: Il %d e' gia' stato chiamato\\n\", get);\n    get = ((rand() % (rangeMAX-rangeMIN+1)) + rangeMIN);\n    size_t z = 0;\n    for (;;) {\n        if (z == max) {\n            printf(\"E' stato estratto il %d,\\n ovvero\\n\", get);\n                sleep(2);\n                printf(\"%s\\n\", nomi[get-1]);\n                filer = fopen(filename, \"a\");\n                fprintf (filer, \"%d\\n\", get);\n                fclose(filer);\n                break;}\n\n        if (get == nums[z]){\n            printf(\"seconda estrazione: Il %d e' gia' stato chiamato\\n\", get);\n                get = ((rand() % (rangeMAX-rangeMIN+1)) + rangeMIN);\n                    size_t w = 0;\n                    for (;;) {\n                            if (w == max) {\n                                    printf(\"E' stato estratto il %d,\\n ovvero\\n\", get);\n                                    sleep(2);\n                                    printf(\"%s\\n\", nomi[get-1]);\n                                    filer = fopen(filename, \"a\");\n                                    fprintf (filer, \"%d\\n\", get);\n                                    fclose(filer);\n                                    break;}\n\n                            if (get == nums[w]){\n                        printf(\"e' stato di nuovo estratto il %d\\n\", get);\n                        break;}\n\n                    w += 1;}\n            break;}\n\n        z += 1;}\n\n        break;\n    }\n\n//se il numero \u00e8 presente nell'array degli assenti/giustificati crea un messaggio a video e fa ripartire il do\n    if (get == nums1[i]) {\n    printf(\"Il %d, ovvero %s, era assente o e' giustificato\\n\", get, nomi[get-1]);\n    break;\n      }\n\n      i += 1;\n    }\n\n//scelta se continuare ad estrarre o meno\n    printf (\"Volete estrarre un altro numero? Y/N \");\n    if (scanf (\"%15s\", yn) != 1)\n      break;\n  } while (*yn == 'y' || *yn == 'Y');\n\n\n  return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11127493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8aeffa70022298febcc808ae6ca66d?s=128&d=identicon&r=PG&f=1", "display_name": "caesar753", "link": "https://stackoverflow.com/users/11127493/caesar753"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 54915587, "answer_count": 3, "score": 0, "last_activity_date": 1553188027, "creation_date": 1551304293, "question_id": 54915062, "link": "https://stackoverflow.com/questions/54915062/c-cannot-get-search-number-in-array-inside-while-loop-to-work-and-double-free-o", "title": "C cannot get search number in array inside while loop to work and &quot;double free or corruption&quot; error", "body": "<p>i'm noob in C programming and I'm sorry for this question which could be very easy, but i cannot solve this problem after searching all the afternoon.\nI'm trying to write a program that generates a random number, checking that this is not already present in a list contained in the file number.txt. At the end the program has to ask if you want to extract another number and, if Yes, re-run it.\nI tried various for and while loops but none of these worked: numbers in the list are often extracted, What's wrong?</p>\n\n<p>Moreover, sometimes, after various iterations, the program stops with the error\n\"double free or corruption (! prev)\", what causes it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#define rangeMAX 27 //Upper limit of range.\n#define rangeMIN 1  //Lower limit of range.\n\n\nint main()\n{\n  int get, i, n;\n  int num[5];\n  char r;\n  FILE *filer;\n    filer = fopen(\"numbers.txt\", \"r\");\n    printf(\"When you are ready press any key to continue\\n\");\n    getchar();\n    if (filer == NULL)\n    {\n        printf(\"ERROR Creating File!\");\n        exit(1);\n    }\n    do {\n        num[5] = 0;\n        n = 0;\n        i = 0;\n        free(filer);\n        get = 0;\n        r = 0;\n            srand(time(0)); // this will ensure that every time, program will generate different set of numbers. If you remove this, same set of numbers will generated every time you run the program.\n            get = ((rand() % (rangeMAX-rangeMIN+1)) + rangeMIN); // generate random number.\n        for (n = 0; n &lt; 5; n++){\n        fscanf(filer, \"%d\\n\", &amp;num[n]);\n        }\n            for (n = 0; n &lt; 5; n++){\n                if (get == num[n]){\n                printf(\"false\\n\");\n                printf(\"%d\\n\", n);\n                break;\n                }\n            }\n                i=get;\n                printf(\"%d\\n\",i);\n    printf (\"Do you want another number? Y/N \");\n    scanf (\" %c\", &amp;r);\n    } while (r == 'y' || r == 'Y');\n    return(0);\n\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "quicksort"], "comments": [{"owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "edited": false, "score": 1, "creation_date": 1551304609, "post_id": 54915050, "comment_id": 96596577, "body": "it seems you have  non-terminated recursion and it causes call stack overflow."}, {"owner": {"reputation": 47, "user_id": 11127412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4c759240ffc7f42d9dd2d7fb897343?s=128&d=identicon&r=PG&f=1", "display_name": "XJZ", "link": "https://stackoverflow.com/users/11127412/xjz"}, "reply_to_user": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "edited": false, "score": 0, "creation_date": 1551305543, "post_id": 54915050, "comment_id": 96596916, "body": "Oh, I know. I should replace &quot; quicksort(a,lo,p); &quot;  with  &quot; quicksort(a,lo,p-1); &quot;. Thank you!"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1551305667, "post_id": 54915050, "comment_id": 96596961, "body": "I also recommend adding this line at the beginning of your <code>quicksort</code> function: <code>printf(&quot;qs: lo=%d, hi=%d\\n&quot;, lo, hi);</code>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1551309223, "post_id": 54915050, "comment_id": 96598164, "body": "@XJZ If your problem is solved, post an answer for it and explain."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551325055, "post_id": 54915050, "comment_id": 96601735, "body": "OT: for ease of readability and understanding: 1) variable (and parameter) names should indicate <code>usage</code> or <code>content</code> (or better, both)  2) please consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces. 3) insert an appropriate space: inside parens, inside braces, inside brackets, after commas, after semicolons, around C operators"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551325536, "post_id": 54915050, "comment_id": 96601837, "body": "regarding: <code>if(a[j] &lt; pivot)</code>  This seems to be trying to sort descending. It that what you want?"}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1551348402, "post_id": 54915050, "comment_id": 96610916, "body": "@EsmaeelE i have posted have a look"}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551348509, "post_id": 54915050, "comment_id": 96610984, "body": "@user3629249 well it is in ascending order only , have a look , comment me if u dont get it"}, {"owner": {"reputation": 47, "user_id": 11127412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4c759240ffc7f42d9dd2d7fb897343?s=128&d=identicon&r=PG&f=1", "display_name": "XJZ", "link": "https://stackoverflow.com/users/11127412/xjz"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551362828, "post_id": 54915050, "comment_id": 96619543, "body": "@user3629249 It makes sense. I forget to insert spaces sometimes."}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "is_accepted": true, "score": 1, "last_activity_date": 1551348139, "creation_date": 1551348139, "answer_id": 54922967, "question_id": 54915050, "link": "https://stackoverflow.com/questions/54915050/c-quicksort-segmentation-fault/54922967#54922967", "title": "C quicksort segmentation fault", "body": "<p>Well it appears you have made a simple mistake understanding quick sort.</p>\n\n<p>The thing is you put pivot element in the correct position inside array while calling <code>partition()</code>.</p>\n\n<p>What I mean to say is consider the elements initially inside array as </p>\n\n<p>[ 3 , 4 , 6 , 7 , 5 , 8 , 9 , 2 , 1 , <b>4</b> ]</p>\n\n<p>Now after calling <code>partition()</code> , the array should look like this (kindly note that you have selected last element as pivot element , marked with bold above)</p>\n\n<p>[ 3 , 2 , 1 , <b>4</b> , 5 , 8 , 9 , 4 , 6 , 7 ]</p>\n\n<p>Now the array should be divided into three parts</p>\n\n<p>[ 3 , 2 , 1 ]  [ <b>4</b> ] [ 5 , 8 , 9 , 4 , 6 , 7 ]</p>\n\n<p>We know that the pivot element is in correct position , so no need to touch the middle part, just proceed  with remaining left and right part.</p>\n\n<p>What you have done is considered only two part after <code>partition()</code></p>\n\n<p>[ 3 , 2 , 1 , <b>4</b> ] [ 5 , 8 , 9 , 4 , 6 , 7 ]</p>\n\n<p>Now for [ 3 , 2 , 1 , <b>4</b> ] , when you call <code>quicksort()</code> , it will fall in infinite recursion.</p>\n\n<p>I have modified the portion below , hope it helps</p>\n\n<pre><code>void quicksort(int *a,int lo,int hi)\n{\n  if(lo &lt; hi)\n    {\n      int p = partition(a,lo,hi);\n      quicksort(a,lo,p-1);\n      quicksort(a,p+1,hi);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 11127412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4c759240ffc7f42d9dd2d7fb897343?s=128&d=identicon&r=PG&f=1", "display_name": "XJZ", "link": "https://stackoverflow.com/users/11127412/xjz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 54922967, "answer_count": 1, "score": 2, "last_activity_date": 1551348139, "creation_date": 1551304219, "question_id": 54915050, "link": "https://stackoverflow.com/questions/54915050/c-quicksort-segmentation-fault", "title": "C quicksort segmentation fault", "body": "<p>I want to write a quicksort code in c, the compiler complains \" Segmentation fault (core dumped)\" when I try to run this code. I can't find where the problem is.\nCould someone help me find the problem ? Thanks.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int *m,int *n)\n{\n  int t;\n  t = *m;\n  *m = *n;\n  *n = t;\n}\n\nint partition(int *a,int lo,int hi)\n{\n  int pivot = a[hi];\n  int i = lo;\n  for(int j = lo;j &lt; hi;j++)\n    {\n      if(a[j] &lt; pivot)\n    {\n      //swap(&amp;a[i],&amp;a[j]);\n      int t = a[i];\n      a[i] = a[j];\n      a[j] = t;\n      i++;\n    }\n    }\n  // swap(&amp;a[i],&amp;a[hi]);\n  int t = a[hi];\n  a[hi] = a[i];\n  a[i] = t;\n  return i;\n}\n\nvoid quicksort(int *a,int lo,int hi)\n{\n  if(lo &lt; hi)\n    {\n      int p = partition(a,lo,hi);\n      quicksort(a,lo,p);\n      quicksort(a,p+1,hi);\n    }\n}\n\nint main(void)\n{\n  int a[10] = {3,4,6,7,5,8,9,2,1,0};\n  quicksort(a,0,9);\n  for(int i = 0;i &lt; 10;i++)\n    printf(\"%d \",a[i]);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "pthreads", "coredump", "pthread-join"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1551304093, "post_id": 54914974, "comment_id": 96596349, "body": "Why are you assigning to <code>tid[i]</code>?  In either loop?  <code>pthread_create()</code> fills in the appropriate value, and those are the values you must later pass to <code>pthread_join()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "is_accepted": false, "score": 0, "last_activity_date": 1551304725, "creation_date": 1551304725, "answer_id": 54915159, "question_id": 54914974, "link": "https://stackoverflow.com/questions/54914974/pthread-join-causing-segmentation-fault/54915159#54915159", "title": "pthread_join() causing segmentation fault", "body": "<p>You code has an out-of-bounds write bug. <a href=\"https://segfault.stensal.com/a/8RB7j38J6PaKwlIH\" rel=\"nofollow noreferrer\">A live test of your code</a></p>\n\n<p>The following is the error message. </p>\n\n<p>== Start of Stensal DTS message == copy start here ==(56.127)==</p>\n\n<p>Runtime error: <strong>[out-of-bounds write]</strong><br>\n  Continuing execution can cause undefined behavior, abort!</p>\n\n<pre><code>-\n- Writing 4 bytes to 0x8fa0090 will corrupt the adjacent data.\n- \n- The object to-be-written (start:0x8fa0010, size:128 bytes) is allocated at\n-     file:/prog.c::10, 24\n- \n-  0x8fa0010               0x8fa008f\n-  +------------------------+\n-  |the object to-be-written|......\n-  +------------------------+\n-                            ^~~~~~~~~~\n-        the write starts at 0x8fa0090 that is right after the object end.\n- \n- Stack trace (most recent call first) of the write.\n- [1]  file:/prog.c::18, 17\n- [2]  file:/musl-1.1.10/src/thread/pthread_create.c::168, 17\n-\n</code></pre>\n\n<p>=== End of Stensal DTS message ==== copy end here ============</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1551309086, "creation_date": 1551309086, "answer_id": 54915967, "question_id": 54914974, "link": "https://stackoverflow.com/questions/54914974/pthread-join-causing-segmentation-fault/54915967#54915967", "title": "pthread_join() causing segmentation fault", "body": "<p>Running your program under <code>valgrind</code> confirms your diagnosis that the issue occurs when you call <code>pthread_join</code>.  That could also be determined by running it in a debugger, but Valgrind is often especially helpful with segfaults, because its memory-use analysis often helps identify the cause of the problem, too.</p>\n\n<p>In this case, however, the primary issue is clear: you call <code>pthread_join()</code> with an invalid first argument.  You seem to have a bit of a misunderstanding:</p>\n\n<blockquote>\n  <p>My understanding is that the for loop needs to be the same as the one\n  for the <code>pthread_create()</code></p>\n</blockquote>\n\n<p>No, not necessarily.  The only significant association with <code>pthread_create</code> is that the first argument, a thread ID, needs to be a value that was stored by <code>pthread_create()</code>, identifying a thread that has neither been detached nor already joined.  It may be appropriate to perform your joins in a loop <em>similar to</em> the one in which you launch the threads, but that's driven by your application's particular requirements.  Typically, though, those requirements include that all the worker threads complete before the main thread proceeds past some point, and to achieve that, each one must be joined.</p>\n\n<blockquote>\n  <p>and that the variable that is passed in is\n  the dereferenced pointer being passed into the pthread_exit()\n  function.</p>\n</blockquote>\n\n<p>Knowing as I do what the behavior of <code>pthread_join()</code> is, I can just about squeeze those words into a shape that fits.  Myself, I would say something more like, \"The second argument, if non-null, is a pointer to a location in which to write the thread function's return value, or the value it passed to <code>pthread_exit()</code>.\"</p>\n\n<p>Anyway, the main problem is what I already expressed in comments: in your join loop, you are overwriting the thread IDs provided by <code>pthread_create</code>, and passing your arbitrary values to <code>pthread_join</code>.  <strong>These do not identify your threads</strong>, and in the event that your pthreads implementation is like mine, the bad thread IDs end up in fact being invalid pointers.  What you seem not to appreciate is that it is <code>pthread_create</code> that generates and assigns thread IDs.  That's why you have to pass it an address in which to store the ID.  As a corollary, it is not useful to initialize the thread ID variable before passing its address to <code>pthread_create</code>.</p>\n\n<hr>\n\n<p>Cleaning up that issue and running your program under valgrind again reveals that you have an additional issue in your thread function, as also referenced in your other answer.  This is happening in part because your fourth argument to <code>pthread_create</code> is mismatched with your thread function's usage of its argument.</p>\n\n<p>The fourth argument to <code>pthread_create</code> is passed straight through to the thread function.  You are passing <code>&amp;argv[i]</code>, which is the address of a <code>char *</code>, a.k.a. a <code>char **</code>, automatically converted to a <code>void *</code>.  Your thread function passes its argument directly to <code>atoi()</code>, with an automatic conversion to type <code>char *</code>.  Note well that <code>char *</code> != <code>char **</code>.  I think you want the fourth argument to <code>pthread_create</code> to be simply <code>argv[i]</code>.  At least that has a type matching your use.</p>\n\n<hr>\n\n<p>Having made <em>that</em> correction, too, I find that your program ends up in the infinite loop inside your <code>pthread_join</code> loop.  I'm not sure why you're looping there -- it appears wholly gratuitous.</p>\n"}], "owner": {"reputation": 19, "user_id": 11105101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J-6UA3fMKFA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOqR3lOI-YVskofQyBzO2GzNpUHEA/mo/photo.jpg?sz=128", "display_name": "Patrick Kesler", "link": "https://stackoverflow.com/users/11105101/patrick-kesler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551309086, "creation_date": 1551303862, "question_id": 54914974, "link": "https://stackoverflow.com/questions/54914974/pthread-join-causing-segmentation-fault", "title": "pthread_join() causing segmentation fault", "body": "<p>I'm working on understanding threads and have run up against this segmentation fault that I can't seem to correct.  I have narrowed down the error to the <code>pthread_join()</code> function, but can't seem to go any further.  My understanding is that the for loop needs to be the same as the one for the <code>pthread_create()</code> and that the variable that is passed in is the dereferenced pointer being passed into the <code>pthread_exit()</code> function. Any direction would be greatly appreciated. </p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n//void *runner(void *param);\n\nvoid *pFactor(void *param)\n{\n        int *pFArray = malloc(sizeof(int) *32);\n        int myNum = atoi(param);\n        int count = 0;\n\n        printf(\"I'm getting here\");\n\n        while (myNum % 2 == 0)\n        {\n                pFArray[count] = 2;\n                myNum = myNum/2;\n                count++;\n        }\n\n        for (int i = 3; i &lt; sqrt(myNum); i += 2)\n        {\n                while (myNum % i == 0)\n                {\n                        pFArray[count] = i;\n                        myNum = myNum/i;\n                        count++;\n                }\n        }\n\n        if (myNum &gt; 2)\n        {\n                pFArray[count] = myNum;\n        }\n\n        //int *arrPtr = (int*) malloc(10);\n        //arrPtr = pFArray;\n        //return (void *) arrPtr;\n        //return fprint(\"I made it to the end of the pFactor function\")\n        pthread_exit(pFArray);\n\n}\n\nint main(int argc, char *argv[])\n{\n        pthread_t tid[argc];\n        pthread_attr_t attr;\n\n        if (argc == 0)\n        {\n                fprintf(stderr, \"usage: a.out &lt;integer value&gt;\\n\");\n                return -1;\n        }\n        if (argc &lt; 0)\n        {\n                fprintf(stderr, \"%d must be &gt;= 0\\n\", atoi(argv[1]));\n                return -1;\n        }\n\n        /* Get the default attributes */\n        pthread_attr_init(&amp;attr);\n        /* Create the thread */\n        for (int i = 1; i &lt; argc; i++)\n        {\n                tid[i] = i;\n                pthread_create(&amp;tid[i], &amp;attr, pFactor, &amp;argv[i]);\n                printf(\"still working\\n\");\n        }\n        printf(\"still working\\n\");\n        /* Wait for the thread to exit */\n        for (int i = 1; i &lt; argc; i++)\n        {\n                tid[i] = i;\n                void *my_Ptr;\n                printf(\"still working 1\\n\");\n                pthread_join(tid[i], &amp;my_Ptr);\n                printf(\"still working 2\\n\");\n                for (;;)\n                {\n                        printf(\"%d\", atoi(argv[i]));\n                        printf(\": %d\",((int*) my_Ptr)[i-1]);\n                }\n                //printf(\"%d\", atoi(argv[i]));\n                //printf(\": %d\",((int*) my_Ptr)[i-1]);\n        } /*This is where you want to pass in the sum variable*/\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1551304454, "post_id": 54914886, "comment_id": 96596503, "body": "What prevents you from using <code>*Pntr +=1;</code>? It should behave identically to <code>*Pntr = *Pntr + 1;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551303851, "post_id": 54914927, "comment_id": 96596239, "body": "And, of course, this is all about &quot;operator precedence&quot;, in case the OP wants to put a searchable name on it."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1551303666, "creation_date": 1551303666, "answer_id": 54914927, "question_id": 54914886, "link": "https://stackoverflow.com/questions/54914886/why-dont-compound-assignment-or-iterative-operators-work-on-dereferenced-pointe/54914927#54914927", "title": "Why don&#39;t compound assignment or iterative operators work on dereferenced pointers", "body": "<pre><code>*Pntr +=1;\n</code></pre>\n\n<p>This increments the value the pointer is pointing to.</p>\n\n<pre><code>*Pntr++;\n</code></pre>\n\n<p>This is the same as:</p>\n\n<pre><code>*(Pntr++);\n</code></pre>\n\n<p>Which increments the pointer, dereferences the original value of the pointer, and discards the retrieved value.</p>\n\n<pre><code> *Pntr = *Pntr + 1;\n</code></pre>\n\n<p>This, like the first line, increments the value the pointer is pointing to.</p>\n"}, {"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1551325376, "last_edit_date": 1592644375, "creation_date": 1551325376, "answer_id": 54918051, "question_id": 54914886, "link": "https://stackoverflow.com/questions/54914886/why-dont-compound-assignment-or-iterative-operators-work-on-dereferenced-pointe/54918051#54918051", "title": "Why don&#39;t compound assignment or iterative operators work on dereferenced pointers", "body": "<blockquote>\n<p>If I want to <strong>increment a pointer</strong> that's referencing a the location of an int... <em>[emphasis added]</em></p>\n</blockquote>\n<p>Note that when you increment a pointer, <strong>it gets incremented in steps of the object size that the pointer can point to</strong>.</p>\n<p>Since you have mentioned -</p>\n<blockquote>\n<p>using this method works with no problems:</p>\n<p><code>*Pntr = *Pntr + 1;</code></p>\n</blockquote>\n<p>So, it looks like you want to increase the value at location, pointed by <code>Pntr</code>, by <code>1</code>.</p>\n<p>The precedence of postfix <code>++</code> operator is higher than unary <code>*</code> operator (check <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\"><strong>operator precedence</strong></a> table). So, the expression</p>\n<pre><code>*Pntr++;\n</code></pre>\n<p>will be evaluated as</p>\n<pre><code>*(Pntr++);\n</code></pre>\n<p>which will move the pointer <code>Pntr</code> by size of <code>int</code> and then dereference it.<br />\nTo increment the value of pointer, you can do:</p>\n<pre><code>(*Pntr)++;\n</code></pre>\n<p>You can also use the prefix <code>++</code> operator:</p>\n<pre><code>++*Pntr;\n</code></pre>\n<p>The expression</p>\n<pre><code>*Pntr +=1;\n</code></pre>\n<p>is same as</p>\n<pre><code>*Pntr = *Pntr + 1;\n</code></pre>\n<p>and both will increase the value at location pointed by <code>Pntr</code> by <code>1</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 11045534, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WB_KgWspIVo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOKtwlXXhfl00hDyl9r-WMFLDRhHQ/mo/photo.jpg?sz=128", "display_name": "Deeswoc", "link": "https://stackoverflow.com/users/11045534/deeswoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 54918051, "answer_count": 2, "score": 0, "last_activity_date": 1551325458, "creation_date": 1551303499, "last_edit_date": 1551325458, "question_id": 54914886, "link": "https://stackoverflow.com/questions/54914886/why-dont-compound-assignment-or-iterative-operators-work-on-dereferenced-pointe", "title": "Why don&#39;t compound assignment or iterative operators work on dereferenced pointers", "body": "<p>If I want to increment a pointer that's referencing a the location of an <code>int</code> I can't use these methods:</p>\n\n<pre><code> *Pntr +=1;\n *Pntr++;\n</code></pre>\n\n<p>However, using this method works with no problems:</p>\n\n<pre><code> *Pntr = *Pntr + 1;\n</code></pre>\n\n<p>What's happening that causes these shorthand methods not to work. (Also must point out I'm using Visual Studio and it acts weird at times so I think I should mention that)</p>\n"}, {"tags": ["c++", "c", "debugging"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551305397, "post_id": 54914872, "comment_id": 96596864, "body": "No hints as to that the error was, I suspect. What happens when you try to run <code>arm-none-eabi-gdb.exe --version</code> from the command line?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551307892, "post_id": 54914872, "comment_id": 96597749, "body": "It runs fine. I really think it\u2019s a bug in this plugin because that exe isn\u2019t supposed to be run because SEGGER has its own versions of gcc utils."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551308089, "post_id": 54914872, "comment_id": 96597816, "body": "Can you point the debugger at it? I remember using segger under eclipse, but something like ten years ago. I had to use a remote launcher that&#39;s since been replaced with a much smarter tool that&#39;s a lot more limited."}], "answers": [{"comments": [{"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1551304085, "post_id": 54914957, "comment_id": 96596345, "body": "And it gave it explicitly: <code>&quot;C:\\Program Files (x86)\\CodeSourcery\\Sourcery_CodeBench_Lite_for_ARM_EABI\\bin\\&zwnj;&#8203;arm-none-eabi-gdb.ex&zwnj;&#8203;e&quot;</code>"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1551387508, "post_id": 54914957, "comment_id": 96632738, "body": "I also have PEmicro debugger and within KDS and it works fine."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1551402194, "post_id": 54914957, "comment_id": 96637159, "body": "Yes you&#39;re right. I had to hard-code <code>C:\\Freescale\\KDS_v3\\Toolchain\\bin\\arm-none-eabi-gdb.exe</code> to replace their macro."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1551303815, "creation_date": 1551303815, "answer_id": 54914957, "question_id": 54914872, "link": "https://stackoverflow.com/questions/54914872/kds-with-segger-error-while-launching-command-arm-none-eabi-gdb-version/54914957#54914957", "title": "kds with segger - Error while launching command: arm-none-eabi-gdb --version", "body": "<p>It probably does not know where your gdb is. Set the full path or add the path to the system env. </p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 54914957, "answer_count": 1, "score": 0, "last_activity_date": 1551303815, "creation_date": 1551303430, "question_id": 54914872, "link": "https://stackoverflow.com/questions/54914872/kds-with-segger-error-while-launching-command-arm-none-eabi-gdb-version", "title": "kds with segger - Error while launching command: arm-none-eabi-gdb --version", "body": "<p>I have a Segger and correctly select \"Segger\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/9xWYQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9xWYQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>yet when I click <strong>Debug</strong>, I get an error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TP49n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TP49n.png\" alt=\"enter image description here\"></a></p>\n\n<p>NXP support is not helpful: <a href=\"https://community.nxp.com/message/1118372\" rel=\"nofollow noreferrer\"><em>make sure you correctly select Seegger</em></a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551302790, "post_id": 54914730, "comment_id": 96595782, "body": "The very first sentence does not make sense. Pointers are very valid way to access array elements.  The code seem to be too complicated to illustrate your problem as articulated."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551303252, "post_id": 54914730, "comment_id": 96595967, "body": "The reason to access the array by index is that after calling <code>realloc</code> the array can be at a completely different location. So any pointers stored before then become invalid, but an array index stored remains valid. For example, you might be tracking the largest value in the array. BTW the question title says the opposite of the question body."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1551302964, "creation_date": 1551302964, "answer_id": 54914782, "question_id": 54914730, "link": "https://stackoverflow.com/questions/54914730/growing-arrays-refer-to-the-elements-by-pointers-not-indexes/54914782#54914782", "title": "Growing arrays. Refer to the elements by pointers, not indexes", "body": "<p>This is not valid syntax:</p>\n\n<pre><code>nvtab. *(nameval+i).name\n</code></pre>\n\n<p>The member access operator <code>.</code> expects to be followed by the name of the member.  What you want is:</p>\n\n<pre><code> (*(nvtab.nameval+i)).name\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 11112358, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bX7-1Hb7kA0/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1CwzvIxNXUwj3for3KwPo7t3SYw/mo/photo.jpg?sz=128", "display_name": "CyberFlex", "link": "https://stackoverflow.com/users/11112358/cyberflex"}, "edited": false, "score": 0, "creation_date": 1551358253, "post_id": 54914891, "comment_id": 96616867, "body": "I rewrite first row like this:                                                                                                                                                 <code>Nameval *foo = &amp;nvtab.nameval[0];</code>                                                    And <code>printf(&quot;%s %d\\n&quot;, foo-&gt;name, foo-&gt;value);</code> always prints  0-th item of nvtab after adding new items. Does it mean that realloc does`t move the allocation?"}, {"owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "reply_to_user": {"reputation": 43, "user_id": 11112358, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bX7-1Hb7kA0/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1CwzvIxNXUwj3for3KwPo7t3SYw/mo/photo.jpg?sz=128", "display_name": "CyberFlex", "link": "https://stackoverflow.com/users/11112358/cyberflex"}, "edited": false, "score": 0, "creation_date": 1551360978, "post_id": 54914891, "comment_id": 96618443, "body": "@\u0410\u043d\u0434\u0440\u0456\u0439\u041f\u0440\u043e\u0434\u0430\u043d Yes, it does. Usually the allocation is only moved once it exceeds a certain size limit. As long as there is spare address space behind the original pointer it&#39;s just extended. Try executing the 2nd and 3rd line together in a loop. It should crash eventually. (And do it in &quot;Debug&quot; build, in optimized builds memory may be left intact even after <code>realloc</code> freed it.)"}], "tags": [], "owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "is_accepted": true, "score": 1, "last_activity_date": 1551303515, "creation_date": 1551303515, "answer_id": 54914891, "question_id": 54914730, "link": "https://stackoverflow.com/questions/54914730/growing-arrays-refer-to-the-elements-by-pointers-not-indexes/54914891#54914891", "title": "Growing arrays. Refer to the elements by pointers, not indexes", "body": "<p>You are not supposed to assign a pointer calculated for a specific index to a variable with storage duration which could extend over an insert operation.</p>\n\n<p>That pointer could become invalid, so the lesson behind that example is to always re-evaluate iterators on dynamic data structures.</p>\n\n<p>E.g. what <strong><em>not</em></strong> to do:</p>\n\n<pre><code>auto *foo = &amp;nvtab.nameval[i];\naddname(&amp;nvtab, (Nameval) {.name=\"Billy\", .value=18});\nprintf(\"%s %d\\n\", foo-&gt;name, foo-&gt;value);\n</code></pre>\n\n<p>In the last line it can work or crash. Depending on whether <code>realloc</code> moved the allocation or resized in-place. Except that you can never know for sure until you execute it, as it isn't even fully deterministic.</p>\n"}], "owner": {"reputation": 43, "user_id": 11112358, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bX7-1Hb7kA0/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1CwzvIxNXUwj3for3KwPo7t3SYw/mo/photo.jpg?sz=128", "display_name": "CyberFlex", "link": "https://stackoverflow.com/users/11112358/cyberflex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54914891, "answer_count": 2, "score": 0, "last_activity_date": 1551303748, "creation_date": 1551302690, "last_edit_date": 1551303748, "question_id": 54914730, "link": "https://stackoverflow.com/questions/54914730/growing-arrays-refer-to-the-elements-by-pointers-not-indexes", "title": "Growing arrays. Refer to the elements by pointers, not indexes", "body": "<p>Since the array address may change when memory is reallocated,\nthe main part of the program (in the body of the function main ()) should refer to the elements by\nindexes, not pointers. Why? \nCan you show an example of accessing items with pointers?\n(Sorry for my English).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct Nameval Nameval;\n\nstruct Nameval {\n    char *name;\n    int value;\n};\n\nstruct NVtab {\n    int nval;         /* current number of values */ \n    int max;          /* allocated number of values */\n    Nameval *nameval; /* array of name-value pairs */\n};\n\nenum {NVINIT = 1, NVGROW = 2};\n\n/* addname: add new name and value to nvtab */\nint addname(struct NVtab *nvtab, Nameval newname) {\n    Nameval *nvp;\n    if (nvtab-&gt;nameval == NULL) { /* first time */\n        nvtab-&gt;nameval = (Nameval *) malloc(NVINIT * sizeof(Nameval));\n        if (nvtab-&gt;nameval == NULL) \n            return -1;\n        nvtab-&gt;max = NVINIT;\n        nvtab-&gt;nval = 0;\n    } else if (nvtab-&gt;nval &gt;= nvtab-&gt;max) { /* grow */\n        nvp = (Nameval *) realloc(nvtab-&gt;nameval,\n                                  (NVGROW*nvtab-&gt;max)*sizeof(Nameval));\n        if (nvp == NULL)\n            return -1;\n        nvtab-&gt;max *= NVGROW;\n        nvtab-&gt;nameval = nvp;\n\n    }\n    nvtab-&gt;nameval[nvtab-&gt;nval] = newname;\n    return nvtab-&gt;nval++;\n}\n\nint main(void) {\n    struct NVtab nvtab = {0, 0, NULL};\n\n    int curnum;\n    curnum = addname(&amp;nvtab, (Nameval) {.name=\"Andy\", .value=12});\n    printf(\"%d\\n\", curnum);\n    curnum = addname(&amp;nvtab, (Nameval) {.name=\"Billy\", .value=18});\n    printf(\"%d\\n\", curnum);\n    curnum = addname(&amp;nvtab, (Nameval) {.name=\"Jack\", .value=71});\n    printf(\"%d\\n\", curnum);\n    for (int i = 0; i &lt; nvtab.nval; i++) {\n        printf(\"%s %d\\n\", nvtab.nameval[i].name,\n                          nvtab.nameval[i].value);\n    }\n}\n</code></pre>\n\n<p>For example, why can`t we show array like this:</p>\n\n<pre><code>for (int i = 0; i &lt; nvtab.nval; i++)\n    printf(\"%s %d\\n\", nvtab.*(nameval+i).name, nvtab.*(nameval+i).value);\n</code></pre>\n"}, {"tags": ["c", "ada", "gprbuild"], "answers": [{"comments": [{"owner": {"reputation": 1409, "user_id": 1677089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iohnm.jpg?s=128&g=1", "display_name": "Fr&#233;d&#233;ric Praca", "link": "https://stackoverflow.com/users/1677089/fr%c3%a9d%c3%a9ric-praca"}, "edited": false, "score": 0, "creation_date": 1551307083, "post_id": 54915391, "comment_id": 96597469, "body": "I hoped there would be another way :)"}], "tags": [], "owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "is_accepted": false, "score": 3, "last_activity_date": 1551305852, "creation_date": 1551305852, "answer_id": 54915391, "question_id": 54914533, "link": "https://stackoverflow.com/questions/54914533/shell-command-to-compile-c-in-gprbuild/54915391#54915391", "title": "Shell command to compile C in Gprbuild", "body": "<p>Your best bet will be to do what GtkAda does: Look at its <a href=\"https://github.com/AdaCore/gtkada/blob/master/shared.gpr.in\" rel=\"nofollow noreferrer\"><code>shared.gpr.in</code></a> file, it uses the token <code>@GTK_LIBS_GPR@</code> which will be replaced by the configure script, giving a usable <code>shared.gpr</code>.</p>\n\n<p>Thing is, you need to issue the pkg-config call and build your gpr file from the result <em>somehow</em>. GPRBuild is not equipped to do this for you and process the result. If you're comfortable with GNU autotools, you can look further at how GtkAda achieves it:</p>\n\n<p><code>GTK_LIBS_GPR</code> is set in <a href=\"https://github.com/AdaCore/gtkada/blob/master/aclocal.m4#L330\" rel=\"nofollow noreferrer\">aclocal.m4</a> using a macro that converts the C-style flags to a GPR array. The value comes from <code>GTK_LIBS</code> which is queried <a href=\"https://github.com/AdaCore/gtkada/blob/master/aclocal.m4#L282\" rel=\"nofollow noreferrer\">here</a> via pkg-config.</p>\n\n<p>If you're not comfortable with GNU autotools, you can write your configure script using basic shell commandos, a scripting language like Python or with whatever other tool you're comfortable with. </p>\n"}, {"comments": [{"owner": {"reputation": 22472, "user_id": 40851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwWVj.jpg?s=128&g=1", "display_name": "Simon Wright", "link": "https://stackoverflow.com/users/40851/simon-wright"}, "edited": false, "score": 0, "creation_date": 1551355712, "post_id": 54915704, "comment_id": 96615330, "body": "I wondered whether you could provide a special addition to the GPR configuration database which would use the <code>&lt;external&gt;</code> feature, which runs an external command; but it\u2019s only legal in a <code>&lt;compiler_description&gt;</code> element, and introducing a new &quot;compiler&quot; for this seems ... wrong. Also, not sure how to get the result as a list - it\u2019s intended for querying the compiler, e.g. <code>-dumpmachine</code>."}, {"owner": {"reputation": 1409, "user_id": 1677089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iohnm.jpg?s=128&g=1", "display_name": "Fr&#233;d&#233;ric Praca", "link": "https://stackoverflow.com/users/1677089/fr%c3%a9d%c3%a9ric-praca"}, "edited": false, "score": 1, "creation_date": 1551389109, "post_id": 54915704, "comment_id": 96633395, "body": "Your first solution is working !... And I agree with you, providing a special compiler description in the GPR configuration database for this seems to me quite wrong as it&#39;s not the main purpose of it."}], "tags": [], "owner": {"reputation": 22472, "user_id": 40851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwWVj.jpg?s=128&g=1", "display_name": "Simon Wright", "link": "https://stackoverflow.com/users/40851/simon-wright"}, "is_accepted": true, "score": 5, "last_activity_date": 1551307471, "creation_date": 1551307471, "answer_id": 54915704, "question_id": 54914533, "link": "https://stackoverflow.com/questions/54914533/shell-command-to-compile-c-in-gprbuild/54915704#54915704", "title": "Shell command to compile C in Gprbuild", "body": "<p>This might work for you:</p>\n\n<pre><code>project Config_Demo is\n   Pkg_Config := external_as_list (\"PKG_CONFIG\", \" \");\n   package Compiler is\n      --  only this file needs the extra switches\n      for Switches (\"myglade.gresource.c\") use Pkg_Config;\n   end Compiler;\nend Config_Demo;\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>gprbuild -P config_demo -XPKG_CONFIG=\"`pkg-config -cflags gio-2.0`\"\n</code></pre>\n"}], "owner": {"reputation": 1409, "user_id": 1677089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iohnm.jpg?s=128&g=1", "display_name": "Fr&#233;d&#233;ric Praca", "link": "https://stackoverflow.com/users/1677089/fr%c3%a9d%c3%a9ric-praca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54915704, "answer_count": 2, "score": 1, "last_activity_date": 1551307471, "creation_date": 1551301782, "question_id": 54914533, "link": "https://stackoverflow.com/questions/54914533/shell-command-to-compile-c-in-gprbuild", "title": "Shell command to compile C in Gprbuild", "body": "<p>Using GtkAda, I'm trying to use the resource API to include the Glade file directly inside my code.</p>\n\n<p>For this, we can generate C code from a set of resources using <a href=\"https://developer.gnome.org/gio/stable/glib-compile-resources.html\" rel=\"nofollow noreferrer\"><em>glib-compile-resources</em></a> which can then be linked to the Ada code.</p>\n\n<p>The problem is that this C code requires Gtk includes which we usually get from the <em>pkg-config</em> command under Linux such as</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>gcc -c -x c `pkg-config --cflags gio-2.0` myglade.gresource.c\n</code></pre>\n\n<p>I'd like to know how to provide the same kind of information in a <em>GPRBuild</em> project file.</p>\n\n<p>FYI, I already tried to use the <em>pkg-config</em> command inside the compiler package for C language without any success. Of course, I managed to build by hand but that's a bit long :)</p>\n"}, {"tags": ["c", "string", "replace", "word"], "comments": [{"owner": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "edited": false, "score": 1, "creation_date": 1551301114, "post_id": 54914066, "comment_id": 96595024, "body": "One of the challenges here that is sort inextricable from the algorithmic aspect of this problem is the issue of memory management. C forces you to worry about this a lot, for example, what if replacing the words makes the string longer than it already was? Will you overrun allocated memory that the caller gave you? Do you know how much you have? If you&#39;re required to edit the same string you&#39;re given you can probably only do it in all cases by allocating a temporary string, too. You&#39;ve not stated any particular parameters around the input-- e.g. are spaces the only whitespace that matters?"}, {"owner": {"reputation": 45, "user_id": 11124190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yc8gEs8hZK4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfwkT0u6jqG12S8IC7VrIYk3kBMsw/mo/photo.jpg?sz=128", "display_name": "Mihail Yonchev", "link": "https://stackoverflow.com/users/11124190/mihail-yonchev"}, "reply_to_user": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "edited": false, "score": 0, "creation_date": 1551301342, "post_id": 54914066, "comment_id": 96595121, "body": "@BenZotto spaces are the only delimiters and the string to be replaced is not longer than the original one"}, {"owner": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "edited": false, "score": 0, "creation_date": 1551301355, "post_id": 54914066, "comment_id": 96595129, "body": "In your edit, you say that the string is not longer than the original. Yet it is in your example of replacing &quot;tree&quot; with &quot;banana&quot;. The new string is two characters longer than the original. And if the input was &quot;tree tree tree&quot; it would be six chars longer. Ie, unpredictable change in the size of the resulting output, which is a useful data point for you to work with. It tells you that this function alone, without further context about allocated string sizes, can&#39;t really work."}, {"owner": {"reputation": 45, "user_id": 11124190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yc8gEs8hZK4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfwkT0u6jqG12S8IC7VrIYk3kBMsw/mo/photo.jpg?sz=128", "display_name": "Mihail Yonchev", "link": "https://stackoverflow.com/users/11124190/mihail-yonchev"}, "reply_to_user": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "edited": false, "score": 0, "creation_date": 1551301437, "post_id": 54914066, "comment_id": 96595171, "body": "I am sorry it&#39;s my wrong I edited it :)  Thanks for mentioning it"}, {"owner": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "edited": false, "score": 0, "creation_date": 1551301510, "post_id": 54914066, "comment_id": 96595201, "body": "Ah OK. That makes a substantial difference in how possible and easy the function can be, if you&#39;re only shrinking the input length, never expanding it."}, {"owner": {"reputation": 526, "user_id": 6655392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60df9610a4f28d142c0669d8b1dafe65?s=128&d=identicon&r=PG&f=1", "display_name": "flu", "link": "https://stackoverflow.com/users/6655392/flu"}, "edited": false, "score": 0, "creation_date": 1551301959, "post_id": 54914066, "comment_id": 96595411, "body": "If you&#39;re supposed to do an in-place replacement, then using strtok is probably a poor choice to start with, since it will modify the original string with newline characters."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1551304891, "post_id": 54914066, "comment_id": 96596668, "body": "<code>strtok()</code> is <i>always</i> a bad choice."}], "answers": [{"comments": [{"owner": {"reputation": 526, "user_id": 6655392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60df9610a4f28d142c0669d8b1dafe65?s=128&d=identicon&r=PG&f=1", "display_name": "flu", "link": "https://stackoverflow.com/users/6655392/flu"}, "edited": false, "score": 0, "creation_date": 1551304106, "post_id": 54914602, "comment_id": 96596352, "body": "<code>search</code> and <code>replace</code> should be <code>const char *</code>"}, {"owner": {"reputation": 526, "user_id": 6655392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60df9610a4f28d142c0669d8b1dafe65?s=128&d=identicon&r=PG&f=1", "display_name": "flu", "link": "https://stackoverflow.com/users/6655392/flu"}, "edited": false, "score": 0, "creation_date": 1551305848, "post_id": 54914602, "comment_id": 96597037, "body": "another minor suggest: replace <code>strcpy</code> with <code>memcpy</code> to avoid the unnecessary insertion of null char."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1551307874, "post_id": 54914602, "comment_id": 96597747, "body": "This seems to have trouble with a replacement term of equal or greater length than the search term."}, {"owner": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "reply_to_user": {"reputation": 526, "user_id": 6655392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60df9610a4f28d142c0669d8b1dafe65?s=128&d=identicon&r=PG&f=1", "display_name": "flu", "link": "https://stackoverflow.com/users/6655392/flu"}, "edited": false, "score": 0, "creation_date": 1551308691, "post_id": 54914602, "comment_id": 96597996, "body": "@flu: Thanks, not just unncessary but also incorrect here for some cases. Fixed."}, {"owner": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1551308881, "post_id": 54914602, "comment_id": 96598065, "body": "@DavidC.Rankin Thanks, FYI per OP&#39;s clarification in comments (and edit), the greater-length case isn&#39;t actually (I think?) part of the problem space here.  Agree that it opens a whole other algorithmic can of worms if it were and this approach is insufficient without at least creating an additional temp buffer of.. some unknowable length."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1551309006, "post_id": 54914602, "comment_id": 96598105, "body": "No worries, I wasn&#39;t entirely clear on what all his constraints were. I was just messing around running your code (I like it) and tried it with several variation of the replacement."}], "tags": [], "owner": {"reputation": 66964, "user_id": 73297, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GhFGC.jpg?s=128&g=1", "display_name": "Ben Zotto", "link": "https://stackoverflow.com/users/73297/ben-zotto"}, "is_accepted": false, "score": 2, "last_activity_date": 1551308451, "last_edit_date": 1551308451, "creation_date": 1551302062, "answer_id": 54914602, "question_id": 54914066, "link": "https://stackoverflow.com/questions/54914066/replacing-a-whole-word-and-not-substrings-in-a-string-in-c/54914602#54914602", "title": "Replacing a whole word and not substrings in a string in C", "body": "<p>I would avoid <code>strtok</code> in this case (because it will modify the string as a side effect of tokenizing it), and approach this by looking at the string essentially character-by-character and maintaining a \"read\" and \"write\" index. Because the output can never be longer than the input, the write index will never get ahead of the read one, and you can \"write-back\" and make the change within the same string.</p>\n\n<p>To visualize this, I find it useful to write out the input in boxes and draw arrows to current read and write indexes and track through the process so you can verify that you have a system that will do what you want it to do and that your loops and indexes all work like you expect. </p>\n\n<p>Here is one implementation that matches how my own mind tends to approach this sort of algorithm. It walks the string and looks ahead to try matching from the current character. If it finds a match, it copies the replace onto the current spot, and increments both indexes accordingly.</p>\n\n<pre><code>void wordreplace(char * string, const char * search, const char * replace) {\n\n    // This is required to be true since we're going to do the replace\n    // in-place:\n    assert(strlen(replace) &lt;= strlen(search)); \n\n    // Get ourselves set up\n    int r = 0, w = 0; \n    int str_len = strlen(string);\n    int search_len = strlen(search);\n    int replace_len = strlen(replace);\n\n    // Walk through the input character by character.\n    while (r &lt; str_len) {\n\n        // Is this character the start of a matching token? It is\n        // if we see the search string followed by a space or end of\n        // string. \n        if (strncmp(&amp;string[r], search, search_len) == 0 &amp;&amp;\n            (string[r+search_len] == ' ' || string[r+search_len] == '\\0')) { \n\n            // We matched the search token. Copy the replace token.\n            memcpy(&amp;string[w], replace, replace_len);\n\n            // Update our indexes.\n            w += replace_len;\n            r += search_len;\n        } else {\n            // Otherwise just copy this character.\n            string[w++] = string[r++];\n        }\n    }\n\n    // Be sure to terminate the final version of the string.\n    string[w] = '\\0';\n}\n</code></pre>\n\n<p>(Note that I tweaked your function signature to use the more idiomatic pointer notation rather than char arrays, and per flu's comment below, I marked the search and replace tokens as \"const\" which is a way of the function advertising that it will not modify those strings.)</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1551308223, "last_edit_date": 1551308223, "creation_date": 1551307551, "answer_id": 54915718, "question_id": 54914066, "link": "https://stackoverflow.com/questions/54914066/replacing-a-whole-word-and-not-substrings-in-a-string-in-c/54915718#54915718", "title": "Replacing a whole word and not substrings in a string in C", "body": "<p>To do what you want to do becomes a little more involved because you need to handle the scenarios where:</p>\n\n<ol>\n<li>replacement <strong>is shorter than</strong> original -- so you will need to move the remainder of line to follow the replacement text to avoid leaving empty space;</li>\n<li>replacement <strong>is same length</strong> as original -- trivial case, just overwrite original with replacement; and finally</li>\n<li>replacement <strong>is longer than</strong> original -- where you must validate the original string plus the replacement length difference will still fit in the storage for the original string, you must copy the end of line to a temporary buffer before making the replacement, and then add the rest of the line in the temporary buffer to the end.</li>\n</ol>\n\n<p><code>strtok</code> is some disadvantages here due to it making changes to the original string during the tokenizing process. (you can just make a copy, but if you want an in-place replacement, you need to look further). A combination of <code>strstr</code> and <code>strcspn</code> allow you to operate on the original string in more efficient manner when looking for a specific search string within the original. </p>\n\n<p><code>strcspn</code> can be used like <code>strtok</code> with the set of delimiters to provide the length of the current token found (to ensure <code>strstr</code> didn't match your search term as a <em>lesser-included-substring</em> of a longer word, like <code>tree</code> in <code>trees</code>) Then it becomes a simple matter of looping with <code>strstr</code> and validating the length of the token with <code>strcspn</code> and then just applying one of the three cases above.</p>\n\n<p>A short example implementation with comments included in-line to help you follow along could be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLIN 100\n\nvoid wordreplace (char *str, const char *srch,\n                    const char *repl, const char *delim)\n{\n    char *p = str;                      /* pointer to str */\n    size_t  lenword,                    /* length of word found */\n            lenstr = strlen (str),      /* length of total string */\n            lensrch = strlen (srch),    /* length of search word */\n            lenrepl = strlen (repl);    /* length of replace word */\n\n    while ((p = strstr (p, srch))) {    /* srch exist in rest of string? */\n            lenword = strcspn (p, delim);   /* get length of word found */\n        if (lenword == lensrch) {       /* word len match search len */\n            if (lenrepl == lensrch)     /* if replace is same len */\n                memcpy (p, repl, lenrepl);  /* just copy over */\n            else if (lenrepl &gt; lensrch) {   /* if replace is longer */\n                /* check that additional lenght will fit in str */\n                if (lenstr + lenrepl - lensrch &gt; MAXLIN - 1) {\n                    fputs (\"error: replaced length would exeed size.\\n\",\n                            stderr);\n                    return;\n                }\n                if (!p[lenword]) {          /* if no following char */\n                    memcpy (p, repl, lenrepl);  /* just copy replace */\n                    p[lenrepl] = 0;             /* and nul-terminate */\n                }\n                else {  /* store rest of line in buffer, replace, add end */\n                    char endbuf[MAXLIN];    /* temp buffer for end */\n                    size_t lenend = strlen (p + lensrch);   /* end length */\n                    memcpy (endbuf, p + lensrch, lenend + 1); /* copy end */\n                    memcpy (p, repl, lenrepl);  /* make replacement */\n                    memcpy (p + lenrepl, endbuf, lenend); /* add end after */\n                }\n            }\n            else {  /* otherwise replace is shorter than search */\n                size_t lenend = strlen (p + lenword);   /* get end length */\n                memcpy (p, repl, lenrepl);              /* copy replace */\n                /* move end to after replace */\n                memmove (p + lenrepl, p + lenword, lenend + 1);\n            }\n        }\n    }\n}\n\nint main (int argc, char **argv) {\n\n    char str[MAXLIN] = \"apple tree house in the elm tree\";\n    const char  *search = argc &gt; 1 ? argv[1] : \"tree\",\n                *replace = argc &gt; 2 ? argv[2] : \"12\",\n                *delim = \" \\t\\n\";\n\n    wordreplace (str, search, replace, delim);\n\n    printf (\"str: %s\\n\", str);\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>Your replace <code>\"tree\"</code> with <code>\"12\"</code> example in <code>\"apple tree house in the elm tree\"</code>:</p>\n\n<pre><code>$ ./bin/wordrepl_strstr_strcspn\nstr: apple 12 house in the elm 12\n</code></pre>\n\n<p>A simple same-length replacement of <code>\"tree\"</code> with <code>\"core\"</code>, e.g.</p>\n\n<pre><code>$ ./bin/wordrepl_strstr_strcspn tree core\nstr: apple core house in the elm core\n</code></pre>\n\n<p>The \"longer than\" replacemnt of <code>\"tree\"</code> with <code>\"bobbing\"</code>:</p>\n\n<pre><code>$ ./bin/wordrepl_strstr_strcspn tree bobbing\nstr: apple bobbing house in the elm bobbing\n</code></pre>\n\n<p>There are many different ways you can approach this problem, so no one way is the right way. The key is to make it understandable and reasonably efficient. Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 45, "user_id": 11124190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yc8gEs8hZK4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfwkT0u6jqG12S8IC7VrIYk3kBMsw/mo/photo.jpg?sz=128", "display_name": "Mihail Yonchev", "link": "https://stackoverflow.com/users/11124190/mihail-yonchev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 54915718, "answer_count": 2, "score": 2, "last_activity_date": 1551308451, "creation_date": 1551299761, "last_edit_date": 1551301397, "question_id": 54914066, "link": "https://stackoverflow.com/questions/54914066/replacing-a-whole-word-and-not-substrings-in-a-string-in-c", "title": "Replacing a whole word and not substrings in a string in C", "body": "<p>I am trying to replace a whole word in C array of characters and skip the substrings. I made research and I ended up with really hard resolutions while I think I have better idea if someone can give me a hand.\nLet's say I have the string:</p>\n\n<pre><code>char sentence[100]= \"apple tree house\";\n</code></pre>\n\n<p>And I would like to replace tree with the number 12: </p>\n\n<pre><code>\"apple 12 house\"\n</code></pre>\n\n<p>I know that the words are delimited by space so my idea is to :</p>\n\n<p>1.Tokenize the string with delimiter white space<br>\n2.In the while loop checking with the library function STRCMP if the string is equal to the token and if it is then to be replaced.  </p>\n\n<p>The problem for me comes when I try to replace the string as I couldn't make it.</p>\n\n<pre><code>void wordreplace(char string[], char search[], char replace[]) {\n\n  // Tokenize\n  char * token = strtok(string, \" \");\n\n  while (token != NULL) {\n    if (strcmp(search, token) == 0) {\n      REPLACE SEARCH STRING WITH REPLACE STRING\n    }\n    token = strtok(NULL, \" \");\n  }\n  printf(\"Sentence : %s\", string);\n\n}\n</code></pre>\n\n<p>Any suggestions what I can use ? I guess it might be really simple but I am beginner much appreciated :)<br>\n[EDIT]: Spaces are the only delimiters and usually the string to be replaced is not longer than the original.</p>\n"}, {"tags": ["c", "pointers", "struct", "segmentation-fault"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 2, "creation_date": 1551299715, "post_id": 54913993, "comment_id": 96594413, "body": "Am I missing something?  You&#39;ve narrowed down the problem to a single line in the <code>cpyNode()</code> function, but you never post the <code>cpyNode()</code> function itself?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551299851, "post_id": 54913993, "comment_id": 96594486, "body": "How can you be getting a segfault before reaching <code>main</code>? Is your testing at fault? BTW love the &quot;braces art&quot; at the bottom of the code."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1551301352, "post_id": 54913993, "comment_id": 96595126, "body": "&quot;BEFORE the program even reaches main&quot;. When someone makes that particular claim about a C program, it usually means they don&#39;t understand that stdout is line buffered. Post a <i>minimal</i> but <i>complete</i> program that <i>still shows the problem</i>. Otherwise we&#39;re just guessing, and it is very hard to help you."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1551301500, "post_id": 54913993, "comment_id": 96595197, "body": "@WeatherVane <i>How can you be getting a segfault before reaching main?</i> It is possible - wrong linker file and for example .data segment in the RO memory. But it is not the case here of course"}, {"owner": {"reputation": 797, "user_id": 99124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb4a98e32eb0337a855061470ea7a19?s=128&d=identicon&r=PG", "display_name": "mlp", "link": "https://stackoverflow.com/users/99124/mlp"}, "edited": false, "score": 0, "creation_date": 1551302118, "post_id": 54913993, "comment_id": 96595486, "body": "<code>sizeof(char)</code> is by definition 1, and has been since Dennis and Ken made their first C compiler work in the early 70s."}, {"owner": {"reputation": 797, "user_id": 99124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb4a98e32eb0337a855061470ea7a19?s=128&d=identicon&r=PG", "display_name": "mlp", "link": "https://stackoverflow.com/users/99124/mlp"}, "edited": false, "score": 1, "creation_date": 1551302165, "post_id": 54913993, "comment_id": 96595511, "body": "And you should always check the return value from <code>malloc()</code> et al."}, {"owner": {"reputation": 1, "user_id": 8929596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b65e6b50850bbb1f9d2e1895bd9e54?s=128&d=identicon&r=PG&f=1", "display_name": "NoobProgrammer", "link": "https://stackoverflow.com/users/8929596/noobprogrammer"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551394429, "post_id": 54913993, "comment_id": 96635372, "body": "@WeatherVane The &quot;Braces art&quot; is because I was editing the code in UNIX. I had to open the source file in Visual Studio to upload it here."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8929596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b65e6b50850bbb1f9d2e1895bd9e54?s=128&d=identicon&r=PG&f=1", "display_name": "NoobProgrammer", "link": "https://stackoverflow.com/users/8929596/noobprogrammer"}, "edited": false, "score": 0, "creation_date": 1551399293, "post_id": 54914452, "comment_id": 96636590, "body": "Man I am such an idiot! Thanks for the help. The reason as to why I didnt put more code was because the rest of it was pretty much just an empty framework. Though I think I could&#39;ve posted the cpyNode function :/. About passing a BST pointer though, is it safe to reference the members of the node as (BST pointer)-&gt;(Node pointer)-&gt;(member)? In any case in which you have to access a member of the head node of the BST, is there a way to reference it so that it is more easily readable and safe?"}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 2, "last_activity_date": 1551301435, "creation_date": 1551301435, "answer_id": 54914452, "question_id": 54913993, "link": "https://stackoverflow.com/questions/54913993/i-keep-getting-a-segmentation-fault-here-been-at-this-for-4-hours/54914452#54914452", "title": "I keep getting a segmentation fault here. Been at this for 4 hours", "body": "<p>You may have other errors, but these are problems you need to address:</p>\n\n<pre><code>if(iflag == 0){\n    char curr_string[300];\n    BST binary_tree;\n</code></pre>\n\n<p>Here, <code>binary_tree</code> is uninitialized.</p>\n\n<pre><code>        addTreeNode(\"Hello There!\", binary_tree.root);\n        //Adds the node to the binary tree.\n</code></pre>\n\n<p>You expect this call to add a node to the tree, but you are passing the uninitialized <code>root</code> member in by value, and so the pointer will retain its uninitialized state after the function call returns.</p>\n\n<p>You should modify your <code>addTreeNode</code> function to accept a pointer to a <code>BST</code>, and pass the address of <code>binary_tree</code> to the function.</p>\n"}], "owner": {"reputation": 1, "user_id": 8929596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b65e6b50850bbb1f9d2e1895bd9e54?s=128&d=identicon&r=PG&f=1", "display_name": "NoobProgrammer", "link": "https://stackoverflow.com/users/8929596/noobprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1551301573, "creation_date": 1551299446, "last_edit_date": 1551301573, "question_id": 54913993, "link": "https://stackoverflow.com/questions/54913993/i-keep-getting-a-segmentation-fault-here-been-at-this-for-4-hours", "title": "I keep getting a segmentation fault here. Been at this for 4 hours", "body": "<p>I really need some help here because I have been trying to find a solution to this for hours and nothing works.</p>\n\n<p>I have these two structs:</p>\n\n<pre><code>typedef struct NODE {\n    char* line;\n    int count;\n    struct NODE *left, *right;\n} NODE;\n\ntypedef struct BST {\n    NODE *root;\n} BST;\n</code></pre>\n\n<p>And these lines of code which appear suspiscious:</p>\n\n<pre><code>if (iflag == 0) {\n    char curr_string[300];\n    BST binary_tree;\n\n    //fpointer_in = fopen(filename_in, \"r\");\n\n    //while (!feof(fpointer_in)) {\n\n        //fgets(curr_string, 300, fpointer_in);\n        addTreeNode(\"Hello There!\", binary_tree.root); // Adds the node to the binary tree.\n\n    //}\n    NODE *cpy = malloc(sizeof(NODE));\n    cpy-&gt;line = calloc(25, sizeof(char));\n\n    cpy-&gt;count = 0;\n    cpyNode(cpy, binary_tree.root);\n\n    free(cpy);\n    free(binary_tree.root);\n    //printf(\"%s\\n\", cpy-&gt;line);\n    //free(binary_tree.root);\n    //fclose(fpointer_in);\n}\n</code></pre>\n\n<p>This is the addTreeNode function:</p>\n\n<pre><code>void addTreeNode(char* line_string, NODE* root) {\n\n    if (root == NULL) {\n        root = calloc(25, sizeof(char)); // 25 is a test var.\n        root-&gt;line = calloc(25, sizeof(char)); // 25 is a test variable.\n        strcpy(root-&gt;line, line_string);\n        root-&gt;count = 0;    \n    }\n    else {\n        NODE *add_node = malloc(sizeof(NODE));\n        add_node-&gt;line = calloc(25, sizeof(char)); // 25 is a test variable.\n        strcpy(add_node-&gt;line, line_string);\n\n        while (root != NULL) {\n            if (strcmp(line_string, root-&gt;line) &lt; 0 &amp;&amp; root-&gt;left == NULL) {\n                //cpyNode(node_ptr-&gt;left, add_node);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The if block in the addTreeNode function has been tested but I have yet to test the else block. Regardless, it is never used so I don't think it's an issue.</p>\n\n<p>The issue here is that I am getting a segmentation faule BEFORE the program even reaches main. When I comment out the cpyNode(cpy, binary_tree.root); statement, then it works. I then proceeded to comment out the entire cpyNode funcition minus the first line. I figured out that the first line is giving me a segmentation fault and I can't figure out why. Some help would be greatly appreciated.</p>\n"}, {"tags": ["c", "segmentation-fault", "palindrome"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1551298888, "post_id": 54913837, "comment_id": 96594070, "body": "This code is hard to read, but I would bet on the out-of-bounds access somewhere."}, {"owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "edited": false, "score": 2, "creation_date": 1551298926, "post_id": 54913837, "comment_id": 96594085, "body": "<code>*(str + i)</code> is the same as <code>str[i]</code>, which is much easier to read."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1551299008, "post_id": 54913837, "comment_id": 96594115, "body": "<i>It also detects palindromes with spaces.</i> \u2013 How is a palindrome containing spaces different from other palindromes?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 4, "creation_date": 1551299108, "post_id": 54913837, "comment_id": 96594159, "body": "@Felix it isn&#39;t modified."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551299218, "post_id": 54913837, "comment_id": 96594196, "body": "Your <code>j</code> is being decreased uncontrollably. If it becomes 0, you are underflowing size_t (and it becomes huge number)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551299277, "post_id": 54913837, "comment_id": 96594218, "body": "If the test string begins with a space then the <code>j</code> control is in trouble. But it compiles and runs on MSVC without any trouble and I can&#39;t see any other problem (apart from its efficiency - it should stop in the middle)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551299982, "post_id": 54913837, "comment_id": 96594544, "body": "That&#39;s a good point, does OP know the test string that caused a failure?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 2, "creation_date": 1551300224, "post_id": 54913837, "comment_id": 96594650, "body": "code has undefined behaviour if the platform where you upload your code tests with  <code>str</code> being <code>NULL</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "is_accepted": false, "score": -2, "last_activity_date": 1551300695, "creation_date": 1551300695, "answer_id": 54914267, "question_id": 54913837, "link": "https://stackoverflow.com/questions/54913837/c-palindrome-program-working-on-local-pc-but-not-on-inginious/54914267#54914267", "title": "C palindrome program working on local PC, but not on INGInious", "body": "<p>In the loop below:</p>\n\n<pre><code>while(*(str + i) != '\\0'){\n    if(*(str + i) == ' '){\n        i++;\n        continue;\n    }else if(*(str + j) == ' '){\n        j--;\n        continue;\n    }else{\n        if(*(str + i) != *(str + j)){\n            return 0;\n        }\n    }\n    i++;\n    j--;\n}\n</code></pre>\n\n<p>When <code>*(str + i) == '\\0'</code>, it should be <code>i == strlen(str)</code> and <code>j == -1</code> (if no space in the string. Otherwise I am not so sure) and that might be the issue. But again, I can't really see you will not access <code>str</code> out of range. I would suggest to do this instead to make your loop easier to see the terminating condition:</p>\n\n<pre><code>while(i &lt; j){\n    // ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1551300770, "creation_date": 1551300770, "answer_id": 54914291, "question_id": 54913837, "link": "https://stackoverflow.com/questions/54913837/c-palindrome-program-working-on-local-pc-but-not-on-inginious/54914291#54914291", "title": "C palindrome program working on local PC, but not on INGInious", "body": "<p>Like I said in my comments, you are not controlling for value of <code>j</code>, and because of that your code can potentially exhibit <em>undefined behavior</em> - when j becomes 0, but you keep decreasing it, it wraps around and becomes maximum value of <code>size_t</code> type (quite an impressive number on modern platform).</p>\n\n<p>This does not happen with the string you provided, but, I imagine your testing platform tests it on another string (this is the only explanation I have for the crash).</p>\n\n<p>For example, your code would be exposed to undefined behavior on following string: <code>\"a   bcd\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1551316304, "last_edit_date": 1551316304, "creation_date": 1551300783, "answer_id": 54914297, "question_id": 54913837, "link": "https://stackoverflow.com/questions/54913837/c-palindrome-program-working-on-local-pc-but-not-on-inginious/54914297#54914297", "title": "C palindrome program working on local PC, but not on INGInious", "body": "<p>Your code is way too complicated.</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nbool is_palindrome(char const *str)\n{\n    size_t length = strlen(str);\n\n    for (char const *front = str, *back = str + length - 1; front != back; ++front, --back) {\n        while (isspace((char unsigned) *front) &amp;&amp; front != str + length - 1)\n            ++front;\n\n        while (isspace((char unsigned) *back) &amp;&amp; back != str)\n            --back;\n\n        if (front == back)\n            break;\n\n        if (*front != *back)\n            return false;\n    }\n    return true;\n}\n\nint main(void)\n{\n    char const *foo = \"a man a plan a canal panama\";\n    printf(\"%d\\n\", is_palindrome(foo));\n\n    char const *bar = \"hello\";\n    printf(\"%d\\n\", is_palindrome(bar));\n}\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1\n0\n</code></pre>\n"}], "owner": {"reputation": 30, "user_id": 8950402, "user_type": "registered", "profile_image": "https://graph.facebook.com/1478666348883561/picture?type=large", "display_name": "Gabriel Bernardo Lutiano", "link": "https://stackoverflow.com/users/8950402/gabriel-bernardo-lutiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1551316304, "creation_date": 1551298791, "question_id": 54913837, "link": "https://stackoverflow.com/questions/54913837/c-palindrome-program-working-on-local-pc-but-not-on-inginious", "title": "C palindrome program working on local PC, but not on INGInious", "body": "<p>I have a c program that detects a palindrome. It also detects palindromes with spaces. It returns -1 if the string is null, 1 if it is a palindrome and 0 otherwise. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint pal(char *str){\n\n    if(str[0] == '\\0'){\n        return -1;\n    }else{\n        size_t i = 0;\n        size_t j = strlen(str) - 1;\n        while(*(str + i) != '\\0'){\n            if(*(str + i) == ' '){\n                i++;\n                continue;\n            }else if(*(str + j) == ' '){\n                j--;\n                continue;\n            }else{\n                if(*(str + i) != *(str + j)){\n                    return 0;\n                }\n            }\n            i++;\n            j--;\n        }\n\n        return 1;\n\n    }\n\n}\n\n\nint main(){\n\n    char *str = \"a man a plan a canal panama\";\n    printf(\"%d\", pal(str));\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>When I compiled and ran this program at my local machine, it worked fine. But when I uploaded it to a INGInious question of my CS course (INGInious is a platform where people can upload their answers about a specific topic and the system reviews it), it causes a Segmentation Fault. Is there any scenario that could lead to a SegFault that I am not aware?</p>\n"}, {"tags": ["c", "json", "arduino"], "comments": [{"owner": {"reputation": 11, "user_id": 10307298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76df188409f3339edb2ca1a0216389a7?s=128&d=identicon&r=PG", "display_name": "user870", "link": "https://stackoverflow.com/users/10307298/user870"}, "edited": false, "score": 0, "creation_date": 1551295805, "post_id": 54913103, "comment_id": 96592670, "body": "Also, for a string it&#39;s not quite as important, as I could interpret a blank string as a NULL.  However, zero is a valid numeric type, and a common one.  So other than shifting and essentially escaping values of zero on both sides, it would be nice to validate the existence of the parameter in the JSON or JsonObject."}, {"owner": {"reputation": 11, "user_id": 10307298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76df188409f3339edb2ca1a0216389a7?s=128&d=identicon&r=PG", "display_name": "user870", "link": "https://stackoverflow.com/users/10307298/user870"}, "edited": false, "score": 1, "creation_date": 1551296304, "post_id": 54913103, "comment_id": 96592865, "body": "Dammit.  I searched for this for an hour; found JsonObject.containsKey() just now, and it works.  I swear posting to forums makes my google-Fu better.  Thanks for reading.  I&#39;ll leave it here in case it helps others."}], "owner": {"reputation": 11, "user_id": 10307298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76df188409f3339edb2ca1a0216389a7?s=128&d=identicon&r=PG", "display_name": "user870", "link": "https://stackoverflow.com/users/10307298/user870"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551295717, "creation_date": 1551295717, "question_id": 54913103, "link": "https://stackoverflow.com/questions/54913103/arduinojson-test-if-property-exists-in-json-conversion", "title": "ArduinoJSON; test if property exists in JSON / Conversion", "body": "<p>I have code running on a microcontroller, and I am parsing the control command it will receive.</p>\n\n<p>The command is JSON, and looks approximately like this...</p>\n\n<pre><code>{[PARAMTER_1]:[VALUE_1], [...] , [PARAMTER_N]:[VALUE_N]}\n</code></pre>\n\n<p>So it could be...</p>\n\n<pre><code>{\"opMode\"=1, \"StringA\" = \"Hello\"}\n</code></pre>\n\n<p>or it could be</p>\n\n<pre><code>{\"brightness\"=5, \"StringB\"=\"Goodbye\"}\n</code></pre>\n\n<p>How can I test to see if a parameter is included?</p>\n\n<p>For example, if I process with this code:</p>\n\n<pre><code>String command = &lt;JSON COMMAND&gt;\nchar conString[200];\n\ncommand.toCharArray(conString, sizeof(conString));\nStaticJsonBuffer&lt;1000&gt; jsonBuffer;\nJsonObject&amp; root = jsonBuffer.parseObject(conString);\n</code></pre>\n\n<p>How can I test the resultant root[\"PARAMTER\"] outputs to see if they existed?  The problem is that if I just do something like...</p>\n\n<pre><code>resultString = root[\"StringA\"];\nresultInt    = root[\"opMode\"];\n</code></pre>\n\n<p>If those exist but are \"\" and 0, they will return the same values as if they were not included in the JSON in the first place.</p>\n\n<p>Do I have to use something like command.indexOf(\"opMode\") on the raw JSON string to make sure it's there?  (In this example, that would work.  But with more complicated JSON, that seems to be a lot of work to make sure a response is valid/existing)</p>\n"}, {"tags": ["c", "arrays", "adt", "realloc"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1551294499, "post_id": 54912769, "comment_id": 96592060, "body": "How do you print the array?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 6, "creation_date": 1551294594, "post_id": 54912769, "comment_id": 96592103, "body": "The indentation does not prevent <code>set_add(odds, numbers[i]);</code> being called unconditionally. The <code>else</code> code block needs <code>{</code> braces <code>}</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1551294617, "post_id": 54912769, "comment_id": 96592119, "body": "Why are you using <code>void**</code> as a datatype here for what appears to be a 2D array? How are you using this code? Also as Weather Vane points out, it may be in your best interest to <i>always</i> use the <code>{ ... }</code> braces on an <code>if</code> statement to avoid the mistake you&#39;ve made here."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1551294832, "post_id": 54912769, "comment_id": 96592238, "body": "There is also the possibility that <code>for (i = 0; i &lt;= n; i++)</code> in <code>main()</code> breaks the array upper bound of <code>numbers[]</code> although there is not enough code posted to be sure."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10603856"}, "edited": false, "score": 0, "creation_date": 1551296203, "post_id": 54912769, "comment_id": 96592821, "body": "the else braces was a typo only here and not in the code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1551297405, "post_id": 54912769, "comment_id": 96593379, "body": "@Terrowin that is one reason why a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> is asked for. You posted a rag-bag of disconnected code with typos that cannot be compiled and run. Also the <i>act</i> of preparing the MCVE can tip you off as to where the problem is. By the time you correct typos and explain what is missing, commenters might have lost interest and moved on."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551297562, "post_id": 54912769, "comment_id": 96593452, "body": "What&#39;s <code>n</code>? What&#39;s <code>numbers</code>? What&#39;s <code>set_iter_t</code>? Why is <code>set_add</code> looking at the counters while <code>set_hasnext</code> is looking at the elements?"}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 3344587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d246b94ff48978d81b706630d0102196?s=128&d=identicon&r=PG&f=1", "display_name": "Loc Tran", "link": "https://stackoverflow.com/users/3344587/loc-tran"}, "is_accepted": true, "score": 0, "last_activity_date": 1551297108, "creation_date": 1551297108, "answer_id": 54913441, "question_id": 54912769, "link": "https://stackoverflow.com/questions/54912769/whats-causing-my-array-to-be-filled-with-unwanted-numbers/54913441#54913441", "title": "What&#39;s causing my array to be filled with unwanted numbers", "body": "<p>In function <code>set_add</code> you should change the <code>if</code> condition:</p>\n\n<pre><code> if (set-&gt;numitems + 1 &gt;= set-&gt;maxitems) // Make new bigger array if full\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (set-&gt;numitems  &gt;= set-&gt;maxitems) // Make new bigger array if full\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11126237, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qKPeAeQCPW8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUV6tNWSFA79FsFwN9T0njiMpkHA/mo/photo.jpg?sz=128", "display_name": "mage Anthony", "link": "https://stackoverflow.com/users/11126237/mage-anthony"}, "edited": false, "score": 0, "creation_date": 1551305292, "post_id": 54914223, "comment_id": 96596821, "body": "I don&#39;t think this work either. Since you know how many elements in your set by visiting set-&gt;numitems, you can just print them with a for loop with n&lt;=set-&gt;numitems."}], "tags": [], "owner": {"reputation": 1, "user_id": 11126237, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qKPeAeQCPW8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUV6tNWSFA79FsFwN9T0njiMpkHA/mo/photo.jpg?sz=128", "display_name": "mage Anthony", "link": "https://stackoverflow.com/users/11126237/mage-anthony"}, "is_accepted": false, "score": 0, "last_activity_date": 1551300476, "creation_date": 1551300476, "answer_id": 54914223, "question_id": 54912769, "link": "https://stackoverflow.com/questions/54912769/whats-causing-my-array-to-be-filled-with-unwanted-numbers/54914223#54914223", "title": "What&#39;s causing my array to be filled with unwanted numbers", "body": "<p>Let's look at the definition of realloc():  The contents will be unchanged in the range from the start of the region up to the minimum of the old and new sizes. If the new size is larger than the old size, <strong>the added memory will not be initialized</strong>.\nSo I believe you shouldn't use if (iter->set->array[iter->cur] == NULL) in set_hasnext(set_iter_t *iter) as you didn't initialize the re-allocate array to NULL. In another word, the value in the array may be random. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10603856"}, "is_accepted": false, "score": 0, "last_activity_date": 1551308093, "creation_date": 1551308093, "answer_id": 54915807, "question_id": 54912769, "link": "https://stackoverflow.com/questions/54912769/whats-causing-my-array-to-be-filled-with-unwanted-numbers/54915807#54915807", "title": "What&#39;s causing my array to be filled with unwanted numbers", "body": "<p>The 2 two changes that fix my issue:</p>\n\n<p>In add_set(), change </p>\n\n<pre><code>if (set-&gt;numitems + 1 &gt;= set-&gt;maxitems)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (set-&gt;numitems  &gt;= set-&gt;maxitems)\n</code></pre>\n\n<p>And in set_hasnext(), change</p>\n\n<pre><code>if (iter-&gt;set-&gt;array[iter-&gt;cur] == NULL)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (iter-&gt;cur &gt;= iter-&gt;set-&gt;numitems)\n</code></pre>\n\n<p>Thanks to Tran and Anthony.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10603856"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 54913441, "answer_count": 3, "score": 0, "last_activity_date": 1551308093, "creation_date": 1551294369, "last_edit_date": 1551296953, "question_id": 54912769, "link": "https://stackoverflow.com/questions/54912769/whats-causing-my-array-to-be-filled-with-unwanted-numbers", "title": "What&#39;s causing my array to be filled with unwanted numbers", "body": "<p>I am trying to implement a set ADT using dynamic arrays. I have a set for odd and even numbers. When a array is full I use realloc to get a bigger array.\nThe problem is that this also seems to fill the array with unwanted numbers.</p>\n\n<pre><code>struct set\n{\n    void **array;\n    int numitems;\n    int maxitems;\n    cmpfunc_t cmpfunc;\n};\n</code></pre>\n\n<p>.</p>\n\n<pre><code>void set_add(set_t *set, void *elem)\n{\n    if (!set_contains(set, elem))\n    {\n        if (set-&gt;numitems + 1 &gt;= set-&gt;maxitems) // Make new bigger array if full\n        {\n            void **new_array = realloc(set-&gt;array, sizeof(void *) * set-&gt;maxitems * 2);\n            if (new_array == NULL)\n                printf(\"Error\");\n            set-&gt;maxitems *= 2;\n            set-&gt;array = new_array;\n        }\n        set-&gt;array[set-&gt;numitems] = elem;\n        set-&gt;numitems++;\n    }\n}\n</code></pre>\n\n<p>In main i use this to add numbers.</p>\n\n<pre><code>for (i = 0; i &lt;= n; i++) {\n    if (i % 2 == 0)\n        set_add(evens, numbers[i]);\n    else\n    {\n        printset(\"Odd numbers\":, odds);\n        set_add(odds, numbers[i]);\n    }\n}\n</code></pre>\n\n<p>This is the output I get.</p>\n\n<p>Output:</p>\n\n<ul>\n<li><p>Odd numbers: 1</p></li>\n<li><p>Odd numbers: 1 3</p></li>\n<li><p>Odd numbers: 1 3 5</p></li>\n</ul>\n\n<p>...</p>\n\n<ul>\n<li><p>Odd numbers: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29</p></li>\n<li><p>Odd numbers: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31</p></li>\n<li><p>Odd numbers: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 17 18 19 20 21 22 23 24 25 26 27 28 29 30</p></li>\n<li><p>Odd numbers: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 18 19 20 21 22 23 24 25 26 27 28 29 30</p></li>\n</ul>\n\n<p>...</p>\n\n<p>After 31 is added, the array maxsize (=16) is doubled. Any ideas what causes the rest of the array to be filled? This is just a small part of the code, so if nothing here seems to be the cause I can post more.</p>\n\n<p>=== Addition info: ===</p>\n\n<pre><code>static void printset(char *prefix, set_t *set)\n{\n    set_iter_t *it;\n\n    printf(\"%s\", prefix);\n    it = set_createiter(set);\n    while (set_hasnext(it)) {\n        int *p = set_next(it);\n        printf(\" %d\", *p);\n    }\n    printf(\"\\n\");\n    set_destroyiter(it);\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>set_iter_t *set_createiter(set_t *set)\n{\n    set_iter_t *iter = malloc(sizeof(set_iter_t));\n    if (iter == NULL)\n        return NULL;\n    bobsort(set);\n    iter-&gt;set = set;\n    iter-&gt;cur = 0;\n\n    return iter;\n}\n\nint set_hasnext(set_iter_t *iter)\n{\n    if (iter-&gt;set-&gt;array[iter-&gt;cur] == NULL)\n        return 0;\n    else\n        return 1;\n}\n\nvoid *set_next(set_iter_t *iter)\n{\n    if (iter-&gt;set-&gt;array[iter-&gt;cur] == NULL)\n        return NULL;\n    else\n    {\n        void *elem = iter-&gt;set-&gt;array[iter-&gt;cur];\n        iter-&gt;cur++;\n        return elem;\n    }\n}\n</code></pre>\n\n<p>It's for an assignment, so I'm following the function signatures. I'm used to make adt list with linked list and not arrays.</p>\n"}, {"tags": ["c", "linux", "fork"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1551294164, "post_id": 54912662, "comment_id": 96591906, "body": "Please consolidate your code quotes into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1551294225, "post_id": 54912662, "comment_id": 96591937, "body": "I am always getting suspicious about lines like <code>&#47;&#47; some code that parses input, firstArgs == input</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551294325, "post_id": 54912662, "comment_id": 96591986, "body": "Your <code>execSimpleCmd</code> is almost the same as the <code>system</code> command. What if you use it instead? What if you <i>don&#39;t</i> use it at all and just have some stub?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1551294358, "post_id": 54912662, "comment_id": 96592004, "body": "Detail: <code>execvp()</code> only returns on failure.  Corollaries: (1) there&#39;s no need to test the return value; (2) it is better to report errors on <code>stderr</code> than <code>stdout</code>; (3) it is better to exit with an error status such as <code>exit(EXIT_FAILURE);</code> or variations on the theme of <code>exit(127);</code> etc \u2014 see POSIX for the details of what&#39;s recommended.  Also note that the child process should close the file so that the executed program can&#39;t screw things up."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 3, "creation_date": 1551294985, "post_id": 54912662, "comment_id": 96592305, "body": "Protip: copy the code from your post into a new file, compile/run it, and verify that it still produces the same error you write about. This is how you ensure that your question contains all relevant details. If you instead post pseudo-code roughly equivalent to what you run, you&#39;ll often end up leaving out important details that make all the difference"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1551295946, "post_id": 54912662, "comment_id": 96592725, "body": "I think the problem here is that you are forking and doing execvp when it is sufficient to just do one. Both commands spawn a new process"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1551296069, "post_id": 54912662, "comment_id": 96592765, "body": "@smac89  No. Only <code>fork</code> does."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1551296166, "post_id": 54912662, "comment_id": 96592805, "body": "I spoke too soon, looks like execvp replaces the current process, which makes sense why you fork"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1551296499, "post_id": 54912662, "comment_id": 96592963, "body": "I don&#39;t know why, but removing the <code>else</code> part in your code makes it to run to completion. The reason for removing the else has to do with the fact that each child process <code>exits</code> after it runs the command, so there is really nothing to wait for..."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1551296627, "post_id": 54912662, "comment_id": 96593018, "body": "However, I don&#39;t know why removing the wait part causes it not to infinitely loop as it did before"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551296930, "post_id": 54912662, "comment_id": 96593181, "body": "The code cannot be compiled as posted, because essential parts like <code>#include</code> directives and declarations are omitted."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551296943, "post_id": 54912662, "comment_id": 96593184, "body": "By the way, you never close your file. Each <code>fork</code> is duplicating the file descriptor and it remains open in that child process."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1551297358, "post_id": 54912662, "comment_id": 96593361, "body": "Here is an MVC if anyone wants to test this: <a href=\"https://wandbox.org/permlink/FwUHnH5YPwUDeYmC\" rel=\"nofollow noreferrer\">wandbox.org/permlink/FwUHnH5YPwUDeYmC</a>"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1551297405, "post_id": 54912662, "comment_id": 96593380, "body": "When I remove the exit command for the child process and put back the wait in the parent, it also allows the program to complete..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1551297781, "post_id": 54912662, "comment_id": 96593536, "body": "@smac89 Your example works for me with both <code>exit</code> and <code>wait</code>."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551297915, "post_id": 54912662, "comment_id": 96593607, "body": "@EugeneSh. That&#39;s interesting. On my machine it doesn&#39;t work, but online it does...My kernel version is 4.15, but the online machine is running version 4.4. I wonder if that makes a difference"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551297972, "post_id": 54912662, "comment_id": 96593631, "body": "Waaaait. Are you seeing the output from <code>printf(&quot;%s\\n&quot;, input);</code> several times and thinking that it is because of the loop running more than it should? I would say it&#39;s because of IO buffering, while the buffer is duplicated by <code>fork</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551298019, "post_id": 54912662, "comment_id": 96593651, "body": "Anyway, looks like the OP have abandoned this question and we are wasting time here."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551298109, "post_id": 54912662, "comment_id": 96593692, "body": "@EugeneSh. you&#39;re right, OP has left the chat. Anyways, what I mean is that all the commands in the file seem to be repeatedly running, not just the printf commands; And I have to manually Ctrl + C to exit. I think this is what OP meant as well"}, {"owner": {"reputation": 23, "user_id": 8763792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wfKHmPkd6jU/AAAAAAAAAAI/AAAAAAAAABE/V0Y06YhjR_c/photo.jpg?sz=128", "display_name": "Kasymbek Tashbaev", "link": "https://stackoverflow.com/users/8763792/kasymbek-tashbaev"}, "edited": false, "score": 0, "creation_date": 1551298981, "post_id": 54912662, "comment_id": 96594104, "body": "The program is working correctly if there is no non-existing command in the input file."}, {"owner": {"reputation": 23, "user_id": 8763792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wfKHmPkd6jU/AAAAAAAAAAI/AAAAAAAAABE/V0Y06YhjR_c/photo.jpg?sz=128", "display_name": "Kasymbek Tashbaev", "link": "https://stackoverflow.com/users/8763792/kasymbek-tashbaev"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551299150, "post_id": 54912662, "comment_id": 96594174, "body": "@EugeneSh even if I remove prinf part, the program infinitely runing"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551299856, "post_id": 54912662, "comment_id": 96594487, "body": "You are closing the input file after each call to <code>execSimpleCmd()</code>, and then trying to read from that file again.  This constitutes a definite error, with accompanying undefined behavior, though I cannot be certain that it is responsible for your specific observations."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551300469, "post_id": 54912662, "comment_id": 96594747, "body": "@JohnBollinger Ah.. that&#39;s probably it, missed this line completely"}], "answers": [{"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1551316200, "post_id": 54915495, "comment_id": 96599823, "body": "Note that <code>exit</code> is only called in the child if <code>execvp</code> fails -- if it succeeds, it never returns.  Still it is usual to <code>_exit</code> rather than <code>exit</code> after a failed exec for precisely the reasons you describe."}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1551342563, "post_id": 54915495, "comment_id": 96607678, "body": "@ChrisDodd, hmm yeah, you&#39;re right. That&#39;s what I get for trying to reduce the problem too much, d&#39;oh. If the <code>exec</code> succeeds, the stdio buffers will get thrashed and there&#39;s no cleanup, at least directly from what the parent did. Though I suppose what happens then depends on what the <code>exec</code>&#39;d process does, not that I was smart enough to test that. In to the trashcan this answer goes, I think."}, {"owner": {"reputation": 23, "user_id": 8763792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wfKHmPkd6jU/AAAAAAAAAAI/AAAAAAAAABE/V0Y06YhjR_c/photo.jpg?sz=128", "display_name": "Kasymbek Tashbaev", "link": "https://stackoverflow.com/users/8763792/kasymbek-tashbaev"}, "edited": false, "score": 0, "creation_date": 1551354187, "post_id": 54915495, "comment_id": 96614476, "body": "@ilkkachu Thanks. I replaced exit() with _exit(), and for my test cases, the program worked correctly."}], "tags": [], "owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "is_accepted": true, "score": 1, "last_activity_date": 1551306319, "creation_date": 1551306319, "answer_id": 54915495, "question_id": 54912662, "link": "https://stackoverflow.com/questions/54912662/getline-is-repeatedly-reading-the-file-when-fork-is-used/54915495#54915495", "title": "getline() is repeatedly reading the file, when fork() is used", "body": "<p>It appears that closing a <code>FILE</code> in some cases seeks the underlying file descriptor back to the position where the application actually read to, effectively undoing the effect of the read buffering. This matters, since the OS level file descriptors of the parent and the child point to the same <em>file description</em>, and the same file offset in particular.</p>\n\n<p>The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799.2018edition/functions/fclose.html\" rel=\"nofollow noreferrer\">POSIX description of <code>fclose()</code></a> has this phrase:</p>\n\n<blockquote>\n  <p>[CX] [Option Start] If the file is not already at EOF, and the file is one capable of seeking, <strong>the file offset of the underlying open file description shall be set to the file position of the stream</strong> if the stream is the active handle to the underlying file description.</p>\n</blockquote>\n\n<p>(Where <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799.2018edition/help/codes.html#CX\" rel=\"nofollow noreferrer\">CX means an extension to the ISO C standard</a>, and <code>exit()</code> of course runs <code>fclose()</code> on all streams.)</p>\n\n<p>I can reproduce the odd behavior with this program (on Debian 9.8):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main(int argc, char *argv[]){\n    FILE *f;\n    if ((f = fopen(\"testfile\", \"r\")) == NULL) {\n        perror(\"fopen\");\n        exit(1);\n    }\n\n    int right = 0;\n    if (argc &gt; 1)\n        right = 1;\n\n    char *line = NULL;\n    size_t len = 0;\n    // first line \n    getline(&amp;line, &amp;len, f);\n    printf(\"%s\", line);\n\n    pid_t p = fork();\n    if (p == -1) {\n        perror(\"fork\");\n    } else if (p == 0) {\n        if (right)\n            _exit(0);  // exit the child \n        else\n            exit(0);   // wrong way to exit\n    } else {\n        wait(NULL);  // parent\n    }\n\n    // rest of the lines\n    while (getline(&amp;line, &amp;len, f) &gt; 0) {\n        printf(\"%s\", line);\n    }\n\n    fclose(f);\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>$ printf 'a\\nb\\nc\\n' &gt; testfile\n$ gcc -Wall -o getline getline.c\n$ ./get\ngetline   getline2  \n$ ./getline\na\nb\nc\nb\nc\n</code></pre>\n\n<p>Running it with <code>strace -f ./getline</code> clearly shows the child seeking the file descriptor back:</p>\n\n<pre><code>clone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f63794e0710) = 25117\nstrace: Process 25117 attached\n[pid 25116] wait4(-1,  &lt;unfinished ...&gt;\n[pid 25117] lseek(3, -4, SEEK_CUR)      = 2\n[pid 25117] exit_group(1)               = ?\n</code></pre>\n\n<p>(I didn't see the seek back with a code that didn't involve forking, but I don't know why.)</p>\n\n<p>So, what happens is that the C library on the main program reads a block of data from the file, and the application prints the first line. After the fork, the child exits, and seeks the fd back to where the application level file pointer is. Then the parent continues, processes the rest of the read buffer, and when it's finished, it continues reading from the file. Because the file descriptor was seeked back, the lines starting from the second are again available.</p>\n\n<p>In your case, the repeated <code>fork()</code> on every iteration seems to result in an infinite loop.</p>\n\n<p>Using <code>_exit()</code> instead of <code>exit()</code> in the child fixes the problem <em>in this case</em>, since <code>_exit()</code> only exits the process, it doesn't do any housekeeping with the stdio buffers. </p>\n\n<p>With <code>_exit()</code>, any output buffers are also not flushed, so you'll need to call <code>fflush()</code> manually on <code>stdout</code> and any other files you're writing to.</p>\n\n<p>However, if you did this the other way around, with the child reading and buffering more than it processes, then it would be useful for the child to seek back the fd so that the parent could continue from where the child actually left.</p>\n\n<p>Another solution would be not to mix <code>stdio</code> with <code>fork()</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 8763792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wfKHmPkd6jU/AAAAAAAAAAI/AAAAAAAAABE/V0Y06YhjR_c/photo.jpg?sz=128", "display_name": "Kasymbek Tashbaev", "link": "https://stackoverflow.com/users/8763792/kasymbek-tashbaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 1, "accepted_answer_id": 54915495, "answer_count": 1, "score": 1, "last_activity_date": 1551354537, "creation_date": 1551293939, "last_edit_date": 1551354537, "question_id": 54912662, "link": "https://stackoverflow.com/questions/54912662/getline-is-repeatedly-reading-the-file-when-fork-is-used", "title": "getline() is repeatedly reading the file, when fork() is used", "body": "<p>I am developing a simple shell program, a command line interpreter and I wanted to read input from the file line by line, so I used getline() function. At the first time, the program works correctly, however, when it reaches the end of the file, instead of terminating, it starts to read a file from the start and it runs infinitely.\nHere are some codes in main function that are related to getline():</p>\n\n<pre><code>int main(int argc,char *argv[]){\n    int const IN_SIZE = 255;\n    char *input = NULL;\n    size_t len = IN_SIZE;\n    // get file address\n    fileAdr = argv[2];\n\n    // open file\n    srcFile = fopen(fileAdr, \"r\");\n\n    if (srcFile == NULL) {\n        printf(\"No such file!\\n\");\n        exit(-1);\n    }\n\n    while (getline( &amp;input, &amp;len, srcFile) != -1) {\n        strtok(input, \"\\n\");\n        printf(\"%s\\n\", input);\n        // some code that parses input, firstArgs == input\n        execSimpleCmd(firstArgs);            \n    }\n    fclose(srcFile);\n}\n</code></pre>\n\n<p>I am using fork() in my program and most probably it causes this problem.</p>\n\n<pre><code>void execSimpleCmd(char **cmdAndArgs) {\n\n    pid_t pid = fork();\n    if (pid &lt; 0) {\n        // error\n        fprintf(stderr, \"Fork Failed\");\n        exit(-1);\n    } else if (pid == 0) {\n        // child process\n        if (execvp(cmdAndArgs[0], cmdAndArgs) &lt; 0) {\n            printf(\"There is no such command!\\n\");\n        }\n        exit(0);\n    } else {\n        // parent process\n        wait(NULL);\n        return;\n    }\n}\n</code></pre>\n\n<p>In addition, sometimes the program reads and prints a combinations of multiple lines. For example, if an input file as below:</p>\n\n<pre><code>ping\nww    \nls\nls -l\npwd\n</code></pre>\n\n<p>it prints something like pwdg, pwdww, etc. How to fix it?</p>\n"}, {"tags": ["c", "linux", "process"], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1551297747, "creation_date": 1551297747, "answer_id": 54913618, "question_id": 54912342, "link": "https://stackoverflow.com/questions/54912342/is-there-a-mechanism-for-manipulating-a-process-like-prctl-but-for-forked-exe/54913618#54913618", "title": "Is there a mechanism for manipulating a process like prctl(), but for forked/exec*()d processes?", "body": "<blockquote>\n  <p>I don't want others to be able to read this process data from <code>/proc</code>. Is there some alternative way to do this?</p>\n</blockquote>\n\n<p>The contents of the per-process subdirectories in <code>/proc</code> are ordinarily owned by the effective uid and effective gid of the corresponding process.  The only <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">documented</a> condition in which that's different is when the process's <code>dumpable</code> attribute has a value different from 1.</p>\n\n<blockquote>\n  <p>The reason I want this is that I have a program which runs as a regular user and reads sensitive data (passwords) from stdin</p>\n</blockquote>\n\n<p><strong>If the program in question runs as a regular user <em>that you can choose</em></strong>, then the easiest thing to do is to choose a for-purpose user with a private primary group. For the purpose of <code>/proc</code> access, that should be about as good as setting the process non-dumpable or running it as root.  Maybe better, if the process wants to be able to read from its own <code>/proc</code> entry.  This is pretty natural, too.  It does not, however, serve the <em>primary</em> purpose of turning off the <code>dumpable</code> flag -- i.e. to prevent the process from dumping core.</p>\n\n<p><strong>If the program itself is under your control</strong>, then you can simply modify it to issue an appropriate <code>prctl()</code> call.  I suppose that this is not your case.</p>\n\n<p>Otherwise, <strong>the program cannot be modified and must be runnable by arbitrary users</strong>.  According to <a href=\"http://man7.org/linux/man-pages/man2/prctl.2.html\" rel=\"nofollow noreferrer\">the <code>prctl()</code> documentation</a>, there are four ways other than calling <code>prctl()</code> to cause a process's <code>dumpable</code> flag to be turned off:</p>\n\n<blockquote>\n  <ul>\n  <li><p>The process's effective user or group ID is changed.</p></li>\n  <li><p>The process's filesystem user or group ID is changed (see\n               credentials(7)).</p></li>\n  <li><p>The process executes (execve(2)) a set-user-ID or set-\n               group-ID program, resulting in a change of either the\n               effective user ID or the effective group ID.</p></li>\n  <li><p>The process executes (execve(2)) a program that has file\n               capabilities (see capabilities(7)), but only if the\n               permitted capabilities gained exceed those already\n               permitted for the process.</p></li>\n  </ul>\n</blockquote>\n\n<p>These all describe situations in which the process is differently affected by access controls than ordinary processes started by the same user, which comes back around to my original suggestion of arranging for appropriate access control simply by controlling the user as which the program runs.  After all, who cares if a random user runs the program and is able to retrieve secrets that they themselves entered? An issue arises only if <em>other</em> people can be tricked into divulging secrets to the program.  But if you're considering this alternative then you've already rejected the easy option.</p>\n\n<p>With the program ultimately being launched by a non-privileged user, changing its effective or filesystem credentials, even via a wrapper program, is not a viable alternative by itself.  You're left, then, with making the program SUID or SGID, or assigning it capabilities that you can rely on differing from the user's normal ones.  Note that the SUID / SGID target, if you go that way, does not need to be <em>root</em>; it just needs to be different from the user's own.  This does, however, return again to having a designated identity for the program to run as.</p>\n\n<p>The capabilites option requires your system to support capabilities, of course.  If it doesn't then SUID / SGID is your only remaining option.  Both of these are controlled by attributes attached to the program binary in the filesystem, so they do not require you to modify the program itself.</p>\n"}], "owner": {"reputation": 252, "user_id": 4208360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7c25f8bfb5b065fed9fa20dbe7ddc7?s=128&d=identicon&r=PG&f=1", "display_name": "mkcms", "link": "https://stackoverflow.com/users/4208360/mkcms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 54913618, "answer_count": 1, "score": 0, "last_activity_date": 1551297747, "creation_date": 1551292558, "question_id": 54912342, "link": "https://stackoverflow.com/questions/54912342/is-there-a-mechanism-for-manipulating-a-process-like-prctl-but-for-forked-exe", "title": "Is there a mechanism for manipulating a process like prctl(), but for forked/exec*()d processes?", "body": "<p>Is it possible to do the equivalent of <code>prctl(PR_SET_DUMPABLE, 0)</code>, but for other process, e.g. a child process, or one that was <code>exec</code>'d? The program below demonstrates that the dumpable flag is not inherited by a process that was <code>execv</code>'d.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/prctl.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char **argv) {\n    struct stat st;\n\n    if (argc &lt; 2) {\n        fprintf(stderr, \"usage: %s PROGRAM [ARGS...]\\n\", argv[0]);\n        return EXIT_FAILURE;\n    }\n\n    if (stat(\"/proc/self/fd\", &amp;st)) {\n        perror(\"stat\");\n        return EXIT_FAILURE;\n    }\n    printf(\"before: owner of /proc/self/fd: %d\\n\", st.st_uid);\n\n    if (prctl(PR_SET_DUMPABLE, 0) == -1) {\n        perror(\"prctl\");\n        return EXIT_FAILURE;\n    }\n\n    if (stat(\"/proc/self/fd\", &amp;st)) {\n        perror(\"stat\");\n        return EXIT_FAILURE;\n    }\n    printf(\"after: owner of /proc/self/fd: %d\\n\", st.st_uid);\n\n    if (execv(argv[1], argv + 1) == -1) {\n        perror(\"execv\");\n        return EXIT_FAILURE;\n    }\n}\n\n</code></pre>\n\n<pre><code>$ ./a.out /usr/bin/stat -c 'in execed process: %u' /proc/self/fd\nbefore: owner of /proc/self/fd: 1000\nafter: owner of /proc/self/fd: 0\nin execed process: 1000\n</code></pre>\n\n<p>The reason I want this is that I have a program which runs as a regular user and reads sensitive data (passwords) from stdin, and I don't want others to be able to read this process data from <code>/proc</code>. Is there some alternative way to do this?</p>\n"}, {"tags": ["c", "macos"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1551293278, "post_id": 54912242, "comment_id": 96591522, "body": "On a Mac, <code>gcc</code> is (by default) a link to <code>clang</code>, so the error message mentioning <code>clang</code> isn&#39;t altogether surprising. On the face of it, the linker is telling you that the source file you compiled doesn&#39;t contain <code>main()</code>. What you show obviously does contain <code>main()</code>. You need to look again at <code>hello_world.c</code> (e.g. <code>cat hello_world.c</code>) because it would appear that you do not have the code you show in it.  For example, you might have an incomplete multiline comment that effectively erases the definition of <code>main()</code>.  Try adding <code>-Wall</code> to the compilation options: <code>gcc -Wall hello_world.c</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 3, "creation_date": 1551293882, "post_id": 54912242, "comment_id": 96591780, "body": "Did you save the file in the editor before compiling it? Is the editor writing to the same directory as the working directory in the Terminal window where you executed gcc?"}, {"owner": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "edited": false, "score": 1, "creation_date": 1551294152, "post_id": 54912242, "comment_id": 96591899, "body": "Thank you. Somehow I forgot to save the file in my editor.My bad."}], "owner": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551293102, "creation_date": 1551292201, "last_edit_date": 1551293102, "question_id": 54912242, "link": "https://stackoverflow.com/questions/54912242/linker-error-when-running-a-simple-hello-world-on-mac-mojave", "title": "linker error when running a simple hello world on Mac Mojave", "body": "<p>I am getting the following linker error:</p>\n\n<p>Source (<code>hello_world.c</code>):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n   printf(\"hello world\\n\");\n   return 0;\n}\n</code></pre>\n\n<p>Compilation:</p>\n\n<pre><code>$ gcc hello_world.c \nUndefined symbols for architecture x86_64:\n  \"_main\", referenced from:\nimplicit entry/start for main executable\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n$\n</code></pre>\n"}, {"tags": ["c", "comments", "c-preprocessor"], "comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551292252, "post_id": 54912093, "comment_id": 96591015, "body": "you have several problems in your code, look at my answer if you want"}, {"owner": {"reputation": 551, "user_id": 3754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd8b6fcb4d65f7a0a68b3b5c74b0d7c?s=128&d=identicon&r=PG", "display_name": "David C.", "link": "https://stackoverflow.com/users/3754173/david-c"}, "edited": false, "score": 2, "creation_date": 1551292582, "post_id": 54912093, "comment_id": 96591194, "body": "In addition to Bruno&#39;s comments, think about what happens if the sequence &quot;<code>&#47;&#47;</code>&quot; appears in a string literal (where it&#39;s not a comment)"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 551, "user_id": 3754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd8b6fcb4d65f7a0a68b3b5c74b0d7c?s=128&d=identicon&r=PG", "display_name": "David C.", "link": "https://stackoverflow.com/users/3754173/david-c"}, "edited": false, "score": 0, "creation_date": 1551293243, "post_id": 54912093, "comment_id": 96591506, "body": "@DavidC. yes, I was thinking about too ;-)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1551293739, "post_id": 54912093, "comment_id": 96591712, "body": "Note that your code will damage <code>puts(&quot;This &#47;&#47; does not mark the start of an inline comment&quot;);</code> \u2014 once you&#39;ve got the basics working, you may need to worry about strings (and even multi-character character literals: <code>int c = &#39;&#47;&#47;XY&#39;;</code> is valid C with implementation-defined results \u2014 though such literals are vanishingly rare in real C code)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1551294120, "post_id": 54912093, "comment_id": 96591883, "body": "Two other nasties for you: <code>&#47;&#47; this comment continues \\</code> (with the backslash immediately before a newline) means that the one line comment continues onto at least the next line.  The similar structure at the start of a comment \u2014 a string containing <code>&quot;&#47;\\\\\\n&#47; This is a comment\\n&quot;</code> where there is a backslash-newline sequence (or multiple BSNL sequences) between the first and second slashes also marks the start of a comment.  Granted, the programmer who writes such code should be shot, hung, drawn and quartered, but some programs need to be bullet-proof. Your call on whether to worry about it."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551294285, "post_id": 54912093, "comment_id": 96591960, "body": "You are right for a/b =&gt; a/, I edited my code to solve that bug"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551294494, "post_id": 54912093, "comment_id": 96592055, "body": "There was an other problem, if simple &#39;/&#39; terminate the file it was removed, also corrected in my answer"}, {"owner": {"reputation": 45, "user_id": 11124190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yc8gEs8hZK4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfwkT0u6jqG12S8IC7VrIYk3kBMsw/mo/photo.jpg?sz=128", "display_name": "Mihail Yonchev", "link": "https://stackoverflow.com/users/11124190/mihail-yonchev"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1551294684, "post_id": 54912093, "comment_id": 96592155, "body": "@bruno Thank you. Thanks to all of you guys!"}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 3, "last_activity_date": 1551294737, "last_edit_date": 1551294737, "creation_date": 1551291908, "answer_id": 54912162, "question_id": 54912093, "link": "https://stackoverflow.com/questions/54912093/unexpected-behaviour-when-removing-inline-comments-in-c/54912162#54912162", "title": "Unexpected behaviour when removing inline comments in C", "body": "<p>after</p>\n\n<pre><code>while((c = fgetc(in)) != '\\n');\n</code></pre>\n\n<p>you need a <code>fputc('\\n', out);</code></p>\n\n<p>Additional remarks :</p>\n\n<p>In</p>\n\n<pre><code>char c;\nwhile((c = fgetc(in)) != EOF)\n</code></pre>\n\n<p><em>c</em> must be an <em>int</em> to manage EOF</p>\n\n<p>Just a typo : <em>ouput</em> must be <em>output</em> to compile</p>\n\n<p>You do not manages well the EOF after you read a '/'</p>\n\n<p>You missed to check the result of the <em>fopen</em></p>\n\n<hr>\n\n<p>A proposal :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid removeComments(char* input, char* output)\n{\n    FILE* in = fopen(input,\"r\");\n    FILE* out = fopen(output,\"w\");\n\n    if (in == NULL) {\n      printf(\"cannot read %s\\n\", input);\n      return; /* change signature to return 0 ? */\n    }\n    if (out == NULL) {\n      printf(\"cannot write in %s\\n\", output);\n      return; /* change signature to return 0 ? */\n    }\n\n    int c;\n\n    while((c = fgetc(in)) != EOF)\n    {\n       if(c == '/')\n       {\n          c = fgetc(in);\n\n          if(c == '/')\n          {\n            while((c = fgetc(in)) != '\\n')\n            {\n              if (c == EOF) {\n                fclose(in);\n                fclose(out);\n                return; /* change signature to return 1 ? */\n              }\n            }\n            fputc('\\n', out);\n          }\n          else if (c == EOF) {\n            fputc('/', out);\n            break;\n          }\n          else\n            fputc('/', out);\n            fputc(c, out);\n       }\n       else\n       {\n         fputc(c,out);\n       }\n    }\n\n    fclose(in);\n    fclose(out);\n     /* change signature to return 1 ? */\n}\n\nint main(int argc, char ** argv)\n{\n  removeComments(argv[1], argv[2]);\n}\n</code></pre>\n\n<hr>\n\n<p>As Tormund Giantsbane says in a remark it is better to completely remove the line containing only a comment (comment starting on the first column), that new proposal does that :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid removeComments(char* input, char* output)\n{\n    FILE* in = fopen(input,\"r\");\n    FILE* out = fopen(output,\"w\");\n\n    if (in == NULL) {\n      printf(\"cannot read %s\\n\", input);\n      return; /* change signature to return 0 ? */\n    }\n    if (out == NULL) {\n      printf(\"cannot write in %s\\n\", output);\n      return; /* change signature to return 0 ? */\n    }\n\n    int c;\n    int startline = 1;\n\n    while((c = fgetc(in)) != EOF)\n    {\n       if(c == '/')\n       {\n          c = fgetc(in);\n\n          if(c == '/')\n          {\n            while((c = fgetc(in)) != '\\n')\n            {\n              if (c == EOF) {\n                fclose(in);\n                fclose(out);\n                return; /* change signature to return 1 ? */\n              }\n            }\n            if (! startline)\n              fputc('\\n', out);\n            startline = 1;\n          }\n          else if (c == EOF) {\n            fputc('/', out);\n            break;\n          }\n          else {\n            fputc('/', out);\n            fputc(c, out);\n            startline = 0;\n          }\n       }\n       else\n       {\n         fputc(c,out);\n         startline = (c == '\\n');\n       }\n    }\n\n    fclose(in);\n    fclose(out);\n     /* change signature to return 1 ? */\n}\n\nint main(int argc, char ** argv)\n{\n  removeComments(argv[1], argv[2]);\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ gcc -pedantic -Wextra -g r.c\npi@raspberrypi:/tmp $ cat i\n// Parameters: a, the first integer; b the second integer.\n// Returns: the sum.\nint add(int a, int b) \n{\n    return a + b/c; // An inline comment.\n}\nint sample = sample;\npi@raspberrypi:/tmp $ ./a.out i o\npi@raspberrypi:/tmp $ cat o\nint add(int a, int b) \n{\n    return a + b/c; \n}\nint sample = sample;\n</code></pre>\n\n<hr>\n\n<p>As said by DavidC. in a remark if // is placed in a string the result will not be the expected one, it is also the case in a character even illegal (I mean '//' must not be changed), what about the C comments (/* .. // ... */) etc</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1551292542, "creation_date": 1551292542, "answer_id": 54912339, "question_id": 54912093, "link": "https://stackoverflow.com/questions/54912093/unexpected-behaviour-when-removing-inline-comments-in-c/54912339#54912339", "title": "Unexpected behaviour when removing inline comments in C", "body": "<blockquote>\n  <p>When removing the inline comment it fails to reach the '\\n' for some reason</p>\n</blockquote>\n\n<p>Well no, if it failed to reach or see the newline at the end of an inline comment then the program would, presumably, consume the entire rest of the file.  What it actually fails to do is <em>write</em> such newlines to the output.</p>\n\n<p>Consider your comment-eating code:</p>\n\n<blockquote>\n<pre><code>           while((c = fgetc(in)) != '\\n');\n</code></pre>\n</blockquote>\n\n<p>That loop terminates when a newline is read.  At that point, the newline, having already been read, is not available to be read from the input again, so your general read / write provisions will not handle it.  If you want the such newlines to be preserved, then you need to print them in the comment-handling branch.</p>\n\n<p>Additional notes:</p>\n\n<ol>\n<li><p><code>fgetc</code> returns an <code>int</code>, not a <code>char</code>, and you need to handle it as such in order to be able to correctly detect end-of-file.</p></li>\n<li><p>Your program will go into an infinite loop if the input ends with an inline comment that is not terminated by a newline.  Such source is technically non-conforming, but even so, you ought to handle it.</p></li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 11124190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yc8gEs8hZK4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfwkT0u6jqG12S8IC7VrIYk3kBMsw/mo/photo.jpg?sz=128", "display_name": "Mihail Yonchev", "link": "https://stackoverflow.com/users/11124190/mihail-yonchev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 54912162, "answer_count": 2, "score": 1, "last_activity_date": 1551294737, "creation_date": 1551291661, "last_edit_date": 1551293939, "question_id": 54912093, "link": "https://stackoverflow.com/questions/54912093/unexpected-behaviour-when-removing-inline-comments-in-c", "title": "Unexpected behaviour when removing inline comments in C", "body": "<p>Stack Overflow! I am on my learning process with the C technology. I have a function which gets an input file, seeks through the file and writes the contents  to the output file without the comments.\nThe function works but it also brakes at some cases.\nMy Function: </p>\n\n<pre><code>    void removeComments(char* input, char* output)\n{\n    FILE* in = fopen(input,\"r\");\n    FILE* out = fopen(ouput,\"w\");\n    char c;\n    while((c = fgetc(in)) != EOF)\n    {\n       if(c == '/')\n       {\n\n          c = fgetc(in);\n          if(c == '/')\n          {\n           while((c = fgetc(in)) != '\\n');\n          }\n          else\n          {\n            fputc('/', out);\n          }\n       }\n       else\n       {\n           fputc(c,out);\n       }\n    }\n    fclose(in);\n    fclose(out);\n}\n</code></pre>\n\n<p>But when I give a file like this as input:</p>\n\n<pre><code>// Parameters: a, the first integer; b the second integer.\n// Returns: the sum.\nint add(int a, int b) \n{\n    return a + b; // An inline comment.\n}\nint sample = sample;\n</code></pre>\n\n<p>When removing the inline comment it fails to reach the '\\n' for some reason and it gives output:</p>\n\n<pre><code>int add(int a, int b) \n{\n    return a + b; }\nint sample = sample;\n</code></pre>\n\n<p>[EDIT] \nThanks for helping me! It works with the case I posted but it brakes in another.\nCurrent code: </p>\n\n<pre><code>FILE* in = fopen(input,\"r\");\nFILE* out = fopen(output,\"w\");\n\nif (in == NULL) {\n  printf(\"cannot read %s\\n\", input);\n  return; /* change signature to return 0 ? */\n}\nif (out == NULL) {\n  printf(\"cannot write in %s\\n\", output);\n  return; /* change signature to return 0 ? */\n}\n\nint c;\nint startline = 1;\n\nwhile((c = fgetc(in)) != EOF)\n{\n   if(c == '/')\n   {\n      c = fgetc(in);\n\n      if(c == '/')\n      {\n        while((c = fgetc(in)) != '\\n')\n        {\n          if (c == EOF) {\n            fclose(in);\n            fclose(out);\n            return; /* change signature to return 1 ? */\n          }\n        }\n        if (! startline)\n          fputc('\\n', out);\n        startline = 1;\n      }\n      else if (c == EOF)\n        break;\n      else {\n        fputc('/', out);\n        startline = 0;\n      }\n   }\n   else\n   {\n     fputc(c,out);\n     startline = (c == '\\n');\n   }\n}\n\nfclose(in);\nfclose(out);\n</code></pre>\n\n<p>When the file contains division the second variable disappears.\nExample:</p>\n\n<pre><code>int divide(int a, int b) \n    {\n        return a/b; \n    }\n</code></pre>\n\n<p>It gives back:</p>\n\n<pre><code>int divide(int a, int b) \n    {\n        return a/; \n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 3, "creation_date": 1551292069, "post_id": 54912091, "comment_id": 96590932, "body": "Floating point rounding errors..."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1551292086, "post_id": 54912091, "comment_id": 96590940, "body": "Have you checked what the specific values that <code>x</code> takes on in both situations?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1551292995, "post_id": 54912091, "comment_id": 96591397, "body": "Instead of <code>&quot;%.3f&quot;</code> for <code>x</code>, try <code>&quot;%.12f&quot;</code> both with <code>float</code> and <code>double</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1551293223, "post_id": 54912091, "comment_id": 96591499, "body": "Instead of <code>while (x &lt;= xmax)</code>, try <code>while (x &lt;= xmax + epsilon)</code>, where epsilon is some very small value (and specifically, must be less than dx)."}], "answers": [{"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 3, "creation_date": 1551293956, "post_id": 54912496, "comment_id": 96591817, "body": "&quot;The only numbers exactly represented are 2^k, with k:integer &quot; -- disagree. You can, for example, exactly represent 3.0 as a <code>float</code>."}], "tags": [], "owner": {"reputation": 96, "user_id": 6737701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1baebede220f922567186b80b8803bbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranG", "link": "https://stackoverflow.com/users/6737701/frang"}, "is_accepted": true, "score": -1, "last_activity_date": 1551295457, "last_edit_date": 1551295457, "creation_date": 1551293223, "answer_id": 54912496, "question_id": 54912091, "link": "https://stackoverflow.com/questions/54912091/while-loop-condition-with-double-and-float/54912496#54912496", "title": "While loop condition with double and float", "body": "<p>That makes sense. Float or double are an approximation rather an exact representation of Rational Numbers a/b:integers, b!=0. The closer you are to 1.000... the better the approximation but still an approximation. </p>\n\n<p>A subset of rational numbers guaranteed to be exactly represented by floating point representation are rationals: 2^k, with k:integer [-126&lt;= x &lt;= 127 . Eg. const float dx = 0.25f; ~ 1/(2^2) would have worked fine. </p>\n\n<blockquote>\n  <p>0.2 is not represented as 0.2 rather as: 0.20000000298023223876953125<br>\n  The next closest approximation to 0.2 is: 0.199999988079071044921875<br>\n  <a href=\"https://www.h-schmidt.net/FloatConverter/IEEE754.html\" rel=\"nofollow noreferrer\">https://www.h-schmidt.net/FloatConverter/IEEE754.html</a></p>\n</blockquote>\n\n<p>An alternative way to loop floats might be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    float x,xmin,xmax,dx,y;\n    printf(\"Input the values of xmin xmax i dx\");\n    scanf(\"%f%f%f\",&amp;xmin,&amp;xmax,&amp;dx);\n    x=xmin;\n\n    //expected cummulative error\n    const float e = 0.7 * dx;\n\n    do \n    {\n        y=(x*x-2*x-2)/(x*x+1);\n        printf(\"%.3f   %.3f\\n\",x,y);\n        x=x+dx;\n    }\n    while(!(x &gt; (xmax + e)));\n}\n</code></pre>\n\n<p>The solution above appears to be working as expected but it would only do so for small number of iterations.</p>\n"}], "owner": {"reputation": 307, "user_id": 11115799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18720e3259cc9270f7e1304661336436?s=128&d=identicon&r=PG&f=1", "display_name": "dzi", "link": "https://stackoverflow.com/users/11115799/dzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 0, "accepted_answer_id": 54912496, "answer_count": 1, "score": 1, "last_activity_date": 1551295457, "creation_date": 1551291655, "question_id": 54912091, "link": "https://stackoverflow.com/questions/54912091/while-loop-condition-with-double-and-float", "title": "While loop condition with double and float", "body": "<p>i have a simple task that says 'Write the value of y with the following formula for the range between xmin and xmax with the difference of dx.\nThe only problem i have is that when using while with float, such as in code i am going to provide, i am getting one less output of y than i should have.\nFor the following code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    float x,xmin,xmax,dx,y;\n    printf(\"Input the values of xmin xmax i dx\");\n    scanf(\"%f%f%f\",&amp;xmin,&amp;xmax,&amp;dx);\n    x=xmin;\n    while(x&lt;=xmax) {\n        y=(x*x-2*x-2)/(x*x+1);\n        printf(\"%.3f   %.3f\\n\",x,y);\n        x=x+dx;\n    }\n}\n</code></pre>\n\n<p>for the input of (-2 2 0.2) i get output only up to 1.8 (that's 20 outputs) and not up to 2.\nBut when i use double instead of float everything works just fine (Has 21 outputs).\nIs there something connected to the while condition that i am not aware of?</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1551291527, "post_id": 54911848, "comment_id": 96590661, "body": "So this application worked for 10+ years and now you see new behavior? Has the code changed? Any updates to the OS, libraries, system settings etc that you know about that would change your codes behavior?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551291953, "post_id": 54911848, "comment_id": 96590869, "body": "MCVE please. Where would EWOULDBLOCK come from? For starters, I would improve error handling in this piece of code, so that it would be clearer where the error is coming from."}, {"owner": {"reputation": 621, "user_id": 670195, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/2dd9a81bc35a51328d4276ac6d70696e?s=128&d=identicon&r=PG", "display_name": "Kelly Beard", "link": "https://stackoverflow.com/users/670195/kelly-beard"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1551292071, "post_id": 54911848, "comment_id": 96590934, "body": "@Chimera, it was worked without problems.  No real code changes recently.   Certainly I am looking at system-related possibilities, but since this has started happening, we&#39;ve found nothing (yet).  I am adding more logging code at this moment.  I am also doing some research with getsockopt() that might tell me a better story."}, {"owner": {"reputation": 621, "user_id": 670195, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/2dd9a81bc35a51328d4276ac6d70696e?s=128&d=identicon&r=PG", "display_name": "Kelly Beard", "link": "https://stackoverflow.com/users/670195/kelly-beard"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551292212, "post_id": 54911848, "comment_id": 96590995, "body": "@SergeyA.  I feel certain that recvmsg() in the recvfd() routine is causing the problem.  I am adding more logging code at the moment.  Thanks for your response."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551292493, "post_id": 54911848, "comment_id": 96591146, "body": "The only way that <code>recvmsg()</code> can report <code>EWOULDBLOCK</code> is if either 1) <code>s</code> is a non-blocking socket and there is no data waiting to be read when <code>recvmsg()</code> is called, or 2) <code>s</code> is a blocking socket with a receive timeout assigned and <code>recvmsg()</code> times out before any data is received. What logic are you using to determine when <code>recvfd()</code> should be called? Are you using <code>select()</code> or <code>(e)poll()</code> at all? Are you sure that <code>s</code> is actually referring to the correct socket that you are expecting to read from?"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1551294085, "post_id": 54911848, "comment_id": 96591868, "body": "This might be helpful? <a href=\"https://www.ibm.com/support/knowledgecenter/ssw_ibm_i_71/rzab6/rzab6.pdf\" rel=\"nofollow noreferrer\">ibm.com/support/knowledgecenter/ssw_ibm_i_71/rzab6/rzab6.pdf</a>"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551295081, "post_id": 54911848, "comment_id": 96592347, "body": "I echo @RemyLebeau comment. Are you using <code>select()</code> or <code>poll()</code> to determine if the socket has data to be read?"}, {"owner": {"reputation": 621, "user_id": 670195, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/2dd9a81bc35a51328d4276ac6d70696e?s=128&d=identicon&r=PG", "display_name": "Kelly Beard", "link": "https://stackoverflow.com/users/670195/kelly-beard"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1551298373, "post_id": 54911848, "comment_id": 96593806, "body": "@Chimera Admittedly I&#39;m not.  It&#39;s never needed it before and you can run things through this all day and it won&#39;t happen until later or it may happen right away.  <i>something</i> has changed - not sure what yet.  Thanks."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1551299347, "post_id": 54911848, "comment_id": 96594251, "body": "@KellyBeard - you should be using <code>select</code> at least to determine if the socket actually has data ready to be read to avoid the EWOULDBLOCK problem."}, {"owner": {"reputation": 621, "user_id": 670195, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/2dd9a81bc35a51328d4276ac6d70696e?s=128&d=identicon&r=PG", "display_name": "Kelly Beard", "link": "https://stackoverflow.com/users/670195/kelly-beard"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1551300323, "post_id": 54911848, "comment_id": 96594692, "body": "@Chimera Understood, but theoretically I shouldn&#39;t need to because fd 0 is a blocking socket.  I&#39;m putting more logging statements in and a call to fcntl() to see if the blocking status has changed somehow.   I will put a select() in though."}], "owner": {"reputation": 621, "user_id": 670195, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/2dd9a81bc35a51328d4276ac6d70696e?s=128&d=identicon&r=PG", "display_name": "Kelly Beard", "link": "https://stackoverflow.com/users/670195/kelly-beard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551293170, "creation_date": 1551290709, "last_edit_date": 1551293170, "question_id": 54911848, "link": "https://stackoverflow.com/questions/54911848/recvmsg-randomly-returns-ewouldblock", "title": "recvmsg() randomly returns EWOULDBLOCK", "body": "<p>I have a TCP client/server program set that has been running for 10+ years without problems.  The 'head' job spawns a body of child processes (I am on the AS400 platform which does not support fork()/exec()).  The head job sets itself up as a TCP server and as soon as a connection comes in, it immediately gives away the connection to one of the child jobs via sendmsg().  The usual pattern of socketpair(), etc is used.  I admit that when I was piecing this all together 12 years ago, I didn't understand everything that was going on.  The code I found to pass an open connection is below.  So, the head job is waiting on accept() and calling sendfd() when accept() returns.</p>\n\n<pre><code>int sendfd(int s, int fd)\n{\n    char buf[1];\n    struct iovec iov;\n    struct msghdr msg;\n    struct cmsghdr *cmsg;\n    int n;\n    char cms[CMSG_SPACE(sizeof(int))];\n\n    buf[0] = 0;\n    iov.iov_base = buf;\n    iov.iov_len = 1;\n\n    memset(&amp;msg, 0, sizeof msg);\n    msg.msg_iov = &amp;iov;\n    msg.msg_iovlen = 1;\n    msg.msg_control = (caddr_t)cms;\n    msg.msg_controllen = CMSG_LEN(sizeof(int));\n\n    cmsg = CMSG_FIRSTHDR(&amp;msg);\n    cmsg-&gt;cmsg_len = CMSG_LEN(sizeof(int));\n    cmsg-&gt;cmsg_level = SOL_SOCKET;\n    cmsg-&gt;cmsg_type = SCM_RIGHTS;\n    memmove(CMSG_DATA(cmsg), &amp;fd, sizeof(int));\n\n    if ((n = sendmsg(s, &amp;msg, 0)) != iov.iov_len) {\n        return -1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>So, the child jobs run a routine to receive the connection.  It is below.  The pool of child processes effectively run this routine like \"recvfd(0);\"  Our QA dept will get an automated test going and as of last week, the entire body of child processes will die, seemingly randomly, down to the second, with EWOULDBLOCK.  I am confused by this error.  recvmsg() is always blocking, waiting for a message.  Is the error pertain to the socket that is being received, or the \"0\" that it is being used to receive on?  Nothing in my code is changing the qualities of file descriptor 0. I am really befuddled on why the entire body of child processes dies.  Something tells me the 0 file descriptor is being changed, but there is nothing in the code for either program that does any manipulation like this.</p>\n\n<pre><code>int recvfd(int s)\n{\n    int ret, fd;\n    char buf[1];\n    struct iovec iov;\n    struct msghdr msg;\n    struct cmsghdr *cmsg;\n    char cms[CMSG_SPACE(sizeof(int))];\n\n    iov.iov_base = buf;\n    iov.iov_len = 1;\n\n    memset(&amp;msg, 0, sizeof msg);\n    msg.msg_name = 0;\n    msg.msg_namelen = 0;\n    msg.msg_iov = &amp;iov;\n    msg.msg_iovlen = 1;\n\n    msg.msg_control = (caddr_t)cms;\n    msg.msg_controllen = sizeof cms;\n\n    if ((ret = recvmsg(s, &amp;msg, 0)) &lt; 0) {\n        return -1;\n    }\n\n    if (ret == 0) {\n        return -1;\n    }\n\n    cmsg = CMSG_FIRSTHDR(&amp;msg);\n    memmove(&amp;fd, CMSG_DATA(cmsg), sizeof(int));\n\n    return fd;\n}\n</code></pre>\n\n<p>I can post more code if more detail is needed.  I have to find this bug right away as it is the core of our business.  Thanks in advance!</p>\n\n<p>EDIT:  Here is a snippet from the child code.  See that 'worker_sd' is explicitly set to 0.  A problem I need to fix is that exiting the loop means exiting the program, but I don't know if there is a way to handle this error.</p>\n\n<p>The error message eventually will be:\n<strong>Transaction child is exiting with new_sock=-1 and error=Operation would have caused the process to be suspended.</strong></p>\n\n<pre><code>// worker_sd is explicitly set to 0 because the parent set the child's 0 file descriptor (the usual one\n// reserved for standard input) to be the socket over which open descriptors come.\nint worker_sd = 0;\n\njobSwitches.get();\nlogging_on = jobSwitches[QQJobSwitches::LOGGING_ON] == '1';\ndebug_on = jobSwitches[QQJobSwitches::DEBUG_ON] == '1';\nwait_on_child_process = jobSwitches[QQJobSwitches::WAIT_ON_CHILD] == '1';\n\nif (debug_on) {\n    CERR &lt;&lt; \"START:  Waiting for a message...\" &lt;&lt; endl;\n}\nwhile ((new_sock = recvfd(worker_sd)) &gt;= 0) {\n    stringstream sstr;\n    string ip_str, port_str;\n    bool success;\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1551290065, "post_id": 54911591, "comment_id": 96589986, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13554691/errno-11-resource-temporarily-unavailable\">Errno: 11, Resource Temporarily Unavailable</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1551290454, "post_id": 54911591, "comment_id": 96590181, "body": "There may be nothing wrong with your code; the system may be swamped with work and not have sufficient resources.  In theory, you should wait a short while and try again \u2014 the resource is temporarily unavailable and will become available again soon, probably.  OTOH, it is also quite possible that the resource won&#39;t become available, especially if you&#39;ve already allocated a lot of the resource and not freed it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1551290679, "post_id": 54911591, "comment_id": 96590280, "body": "Given the extra information added to the question, we probably need to see an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  It won&#39;t contain any of the code called after this block \u2014 and you&#39;ll have print statements to show what&#39;s in <code>dadesSoftConfig-&gt;ipServidor</code> so we can see what you&#39;re requesting.  Maybe there are simply too many hosts identified by your request?  It should be quite small as you don&#39;t need much of the setup work.  Note that the MCVE <i>must</i> (repeat <b>must</b>) reproduce the error."}, {"owner": {"reputation": 196, "user_id": 6645610, "user_type": "registered", "profile_image": "https://graph.facebook.com/317792928562854/picture?type=large", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/6645610/dmitry"}, "edited": false, "score": 0, "creation_date": 1551291096, "post_id": 54911591, "comment_id": 96590498, "body": "I&#39;d recommend to use getaddrinfo, because gethostbyname is obsoleted"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1551291686, "post_id": 54911591, "comment_id": 96590753, "body": "For starters, you should be using <code>h_errno</code>, not <code>errno</code>."}, {"owner": {"reputation": 65, "user_id": 8786678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000e8c9e285db851ab39069171779b89?s=128&d=identicon&r=PG&f=1", "display_name": "Jo4nP4l4u", "link": "https://stackoverflow.com/users/8786678/jo4np4l4u"}, "edited": false, "score": 0, "creation_date": 1551292554, "post_id": 54911591, "comment_id": 96591180, "body": "I tried reading the name of the server from the file and directly using the function and still the same result. Could it be the NET config of my pc?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551293390, "post_id": 54911591, "comment_id": 96591560, "body": "@SergeyA or <code>gethostbyname(2)_r()</code>, which outputs the <code>h_errno</code> value to a caller-supplied variable."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551293527, "post_id": 54911591, "comment_id": 96591626, "body": "@RemyLebeau here is no arguing that <code>_r</code> versions are unquestionably better than legacy. It is also true that getaddrinfo should be preferred."}, {"owner": {"reputation": 65, "user_id": 8786678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000e8c9e285db851ab39069171779b89?s=128&d=identicon&r=PG&f=1", "display_name": "Jo4nP4l4u", "link": "https://stackoverflow.com/users/8786678/jo4np4l4u"}, "edited": false, "score": 0, "creation_date": 1551293957, "post_id": 54911591, "comment_id": 96591819, "body": "I&#39;m studying networks at this moment, professor told us to use this functions, can&#39;t argue with this. The _r version maybe should be fine, I&#39;ll have to ask him."}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 8786678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000e8c9e285db851ab39069171779b89?s=128&d=identicon&r=PG&f=1", "display_name": "Jo4nP4l4u", "link": "https://stackoverflow.com/users/8786678/jo4np4l4u"}, "is_accepted": false, "score": 0, "last_activity_date": 1551315031, "creation_date": 1551315031, "answer_id": 54916750, "question_id": 54911591, "link": "https://stackoverflow.com/questions/54911591/resource-temporarily-unavailable-in-gethostbyname/54916750#54916750", "title": "Resource temporarily unavailable in gethostbyname()", "body": "<p>As pointed by my prints, the data structure was correct, but the data it contained was not. Info should be displayed separated by \\t\\t not a \\n\\t\\t.</p>\n\n<p>The problem was solved when setting correctly the delimiters to strtok() function which parses the input.</p>\n"}], "owner": {"reputation": 65, "user_id": 8786678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000e8c9e285db851ab39069171779b89?s=128&d=identicon&r=PG&f=1", "display_name": "Jo4nP4l4u", "link": "https://stackoverflow.com/users/8786678/jo4np4l4u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 566, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1551315031, "creation_date": 1551289835, "last_edit_date": 1551293089, "question_id": 54911591, "link": "https://stackoverflow.com/questions/54911591/resource-temporarily-unavailable-in-gethostbyname", "title": "Resource temporarily unavailable in gethostbyname()", "body": "<p>I was writing my first client in C when I reached the point where I have to send a socket to the server. When i try to get its address I get a </p>\n\n<blockquote>\n  <p>Resource temporarily unavailable</p>\n</blockquote>\n\n<p>and I can't find what is causing this problem. </p>\n\n<p>dadesSoftConfig->ipServer has inside localhost</p>\n\n<pre><code>    struct hostent *ent;\n\n    ent = gethostbyname(dadesSoftConfig-&gt;ipServidor);\n    if (ent == NULL) {\n        int errnum = errno;\n        fprintf(stderr, \"Client finalitzat: %s\\n\", strerror(errnum));\n        exit(EXIT_FAILURE);\n    }\n</code></pre>\n\n<p>I do not send any socket, wait for any data yet when I do this call , this is happening at the very beginning, even before the register phase of my protocol.</p>\n\n<p>As requested, this is a print of the dadesSoftConfig:</p>\n\n<pre><code>DEBUG_INFO:     Nom: SW-01\n                Mac: 89F107457A36\n                Server: localhost\n                Server-port: 2019\n</code></pre>\n\n<p>And this is how I print it:</p>\n\n<pre><code>void print_software_configuration(TDadesSoftConfig *dades) {\n    char *msg;\n    msg = (char *) malloc(sizeof(char) * 75);\n    if (sprintf(msg, \"\\tNom: %s \\t\\tMac: %s \\t\\tServer: %s \\t\\tServer-port: %d\\n\", \n                dades-&gt;nom, dades-&gt;mac, dades-&gt;ipServidor, dades-&gt;serverPort) &lt; 0) {\n        fprintf(stderr, \"No s'ha pogut mostrar el contingut llegit\\n\");\n    } else {\n        print_debug_info(msg);\n    }\n    free(msg);\n}\n</code></pre>\n\n<p>I tried sending \"127.0.0.1\" to gethostbyname() function and the code perfectly works, even when I store it to my struct. Any idea why it doesn't work when sending \"localhost\"?</p>\n"}, {"tags": ["c", "design-patterns", "globals"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1551289654, "post_id": 54911523, "comment_id": 96589791, "body": "Is adding a parameter an option?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1551289879, "post_id": 54911523, "comment_id": 96589895, "body": "Either add a parameter or split the function up into two \u2014 <code>bar_foo()</code> and <code>tar_foo()</code> and do the appropriate work in each, using a common function to do the common work.  (<code>void bar_foo(void) { common_foo(); do_this();</code> }` and <code>void tar_foo(void) { common_foo(); do_that(); }</code>)  Eschew the global variable; it is a gruesome nightmare."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551289924, "post_id": 54911523, "comment_id": 96589914, "body": "Avoiding global variables is traditionally done by introducing extra function parameters."}, {"owner": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1551331849, "post_id": 54911523, "comment_id": 96603383, "body": "There are alot of functions in between the two functions (bar() and foo()), so should I add another parameter to all the functions and update all the callers in the codebase (which is fairly large)? @Yunnosch"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1551338261, "post_id": 54911523, "comment_id": 96605858, "body": "Well my question was whether that would be an option. The one to answer that question is probably you. Or your superior, or software architect, or Product Owner, ... just not me... But if the question is whether adding an additional parameter in only one of the functions in between helps, then the answer is no, that would just return you to the initial problem this question is asking about."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1551338381, "post_id": 54911523, "comment_id": 96605927, "body": "Consider extending your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, adding one layer of in-between functions, as a  placeholder for the multiple levels of in betweens. (Actually you would probably have to turn your code quotes/pseudo code into an MCVE, then extend it with the placeholder functions...). By the way StackOverflow users love MCVEs, some of them (including me when I am not careful) complain about not seeing one even if the question does not need one. Doing everything to make one, even if not entirely necessary, therefor (unfairly) gets you even better perception... just as a &quot;trick&quot; for the future. ;-)"}, {"owner": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1551347115, "post_id": 54911523, "comment_id": 96610152, "body": "I have updated the code snippet. Is it better now? @Yunnosch"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1551353124, "post_id": 54911523, "comment_id": 96613870, "body": "Better, I recommend to change &quot;place holder for multiple functions&quot; to &quot;place holder for multiple levels of function calls, ending at foo()&quot;."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1551353364, "post_id": 54911523, "comment_id": 96614024, "body": "I think it gets clearer now why you implicitly dislike another parameter. I think I would still go that way, which is basically calebs answer. Sigh, I should have made my own answer immediatly, instead of first clarifying your situation and needs."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1551290100, "post_id": 54911644, "comment_id": 96590006, "body": "The common bit in <code>foobar()</code> and <code>footar()</code> (represented by <code>...</code>) shouldn&#39;t be repeated; you could add a <code>foocommon()</code> function that is called by <code>foobar()</code> and <code>footar()</code>.  It&#39;s fairly easy while all the functions take zero parameters.  (I&#39;d prefer to see the functions defined with <code>(void)</code> instead of <code>()</code> too.)"}, {"owner": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "edited": false, "score": 0, "creation_date": 1551346371, "post_id": 54911644, "comment_id": 96609677, "body": "Thanks Paul! I&#39;ll check if I can use this method to make changes. Meanwhile, I have updated the question to reflect my current situation. Please refer to the &quot;Edit&quot; section. Thanks for you response."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1551346653, "post_id": 54911644, "comment_id": 96609844, "body": "If you have a chain of functions eventually calling <code>foo</code>, then you need to pass the context as a parameter. As in many cases you need to refactor the code anyway, you might want to do a (partial) redesign."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 2, "last_activity_date": 1551290231, "last_edit_date": 1551290231, "creation_date": 1551290008, "answer_id": 54911644, "question_id": 54911523, "link": "https://stackoverflow.com/questions/54911523/how-to-avoid-using-global-in-c-to-detect-setting-of-variable/54911644#54911644", "title": "How to avoid using global in C to detect setting of variable?", "body": "<p>If you want to avoid this, then <em>don't</em> have <code>bar</code> call <code>foo</code>. Since obviously <code>bar</code> knows about <code>foo</code>, it can call the appropriate version and leave that decission to the caller.</p>\n\n<p>Create a separate function for the case of <code>bar</code> calls <code>foo</code> and for <code>tar</code> calling <code>foo</code>:</p>\n\n<pre><code>void bar () {\n    ...\n    foobar();\n    ..\n}\n\nvoid tar() {\n    ...\n    footar();\n    ...\n}\n\nvoid foobar() {\n    ...\n    do_this();\n}\nvoid footar() {\n    ...\n    do_that();\n}\n</code></pre>\n\n<p><hr>\nEdit:</p>\n\n<p>To avoid having to make many code changes, you can change only where currently the global variable is used (and added Jonathan Leffler's suggestion):</p>\n\n<pre><code>void bar () {\n    ...\n    foobar(); // change only here\n    ..\n}\n\nvoid tar() {\n    ...\n    foo();\n    ...\n}\n\nvoid foobar() {\n    foocommon();\n    do_this();\n}\nvoid foo() {\n    foocommon();\n    do_that();\n}\nvoid foocommon()\n{\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "edited": false, "score": 0, "creation_date": 1551346190, "post_id": 54912206, "comment_id": 96609565, "body": "Thanks Caleb! That&#39;s a good way of thinking about function and their expected behavior. I&#39;ll try to refactor the functions in order to incorporate your suggestions."}, {"owner": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "edited": false, "score": 0, "creation_date": 1551346254, "post_id": 54912206, "comment_id": 96609608, "body": "BTW, I have updated the question. If you could take a look again. Thanks!"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "edited": false, "score": 0, "creation_date": 1551463542, "post_id": 54912206, "comment_id": 96662911, "body": "@Deeps I&#39;ve added examples based on your example code."}, {"owner": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "edited": false, "score": 1, "creation_date": 1551770045, "post_id": 54912206, "comment_id": 96750616, "body": "Wow! That is some great explanation and in depth solution. I have taken your suggestion and broke the foo() into two parts and called each version from two code flows, which made it easy to pass info to each version correctly. Thanks a lot!"}], "tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": true, "score": 2, "last_activity_date": 1551463505, "last_edit_date": 1551463505, "creation_date": 1551292087, "answer_id": 54912206, "question_id": 54911523, "link": "https://stackoverflow.com/questions/54911523/how-to-avoid-using-global-in-c-to-detect-setting-of-variable/54912206#54912206", "title": "How to avoid using global in C to detect setting of variable?", "body": "<blockquote>\n  <p>Is there way to handle the above mentioned situation?</p>\n</blockquote>\n\n<p>It sounds like <code>foo()</code> needs some sort of information about the context in which it's running in order to do the right thing. If you think about it that way, then that context, whatever it is, is clearly an input into <code>foo()</code>, and so should be passed in as a parameter. In other words, you should call it something like <code>foo(context)</code>.</p>\n\n<blockquote>\n  <p>Or is there a design flaw here?</p>\n</blockquote>\n\n<p>That depends on the circumstance. A function shouldn't really know or care where it's called from, but perhaps there's some information related to the caller that makes sense as an input. For example, if you know that <code>bar()</code> is only called when there's some data available, and <code>tar()</code> is only called when data isn't available, then you could pass in a parameter that indicates whether data is available. Or, you could just pass in the data itself if it's available or <code>nil</code> if it's not.</p>\n\n<p>The reason a function shouldn't care about who is calling it is that that kind of knowledge makes the function fragile, hard to test, and hard to use. It's fragile because the function might break if the caller's circumstances change. It's hard to test because testing generally involves calling the function, and there's an expectation that the function's behavior will be the same no matter where it's called from. And it's hard to use because you need to know about the function's dependence on the caller: if you ever want to call it from somewhere else, you have to update the function.</p>\n\n<blockquote>\n  <p>There are cases when bar() &amp; tar() are not calling foo() directly i.e. there are alot of calls in between, but decision has to be made at bar() &amp; tar().</p>\n</blockquote>\n\n<p>The answer is still pretty much the same: the caller has some information that's an input to the callee, so it should pass it as a parameter. Let's consider your call chain:</p>\n\n<blockquote>\n  <p>tar()->func1()->func2()->foo()</p>\n</blockquote>\n\n<p>Since <code>tar()</code> calls <code>func1()</code> instead of <code>foo()</code>, it shouldn't make any assumptions about how <code>func1()</code> works \u2014\u00a0it should just pass in the information that <code>func1()</code> needs to do its job and get back the result that <code>func1()</code> returns. The \"decision\" that <code>tar()</code> and <code>bar()</code> make, whatever that actually is, is according to you a necessary input to <code>foo()</code>, and therefore it's a necessary input to <code>func2()</code>, and therefore it's a necessary input to <code>func1()</code>, even if <code>func1()</code> and <code>func2()</code> don't use that information other than to call some other function. So, one option is to have the intermediate functions each take a new parameter that they just pass along to the next function in the chain.</p>\n\n<p>Another option which might work better if there could be more than one \"decision\" that affect <code>foo()</code>, is to create some sort of structure that provides \"context\" or \"environment\" information, and have the intermediate functions each pass that along. You see that style a lot in graphics systems, where there's a drawing context with a large number of parameters that can changed, and that context is a parameter passed to most of the functions in the system.</p>\n\n<p>The problem you're facing is the procedural version of the \"how do I get the data I need\" problem that often comes up in object oriented programming. The choices are either: 1) have the object make an assumption about where to get the data it needs; or 2) tell the object where to get the data it needs. Option 1 typically involves a singleton or other globally-accessible chunk of data. Option 2 is known as <em>dependency injection</em> and is often summarized as \"tell, don't ask.\"</p>\n\n<p>Another solution that you might not have considered is to break <code>foo()</code> up into two or more functions, so that <code>tar()</code> and <code>bar()</code> end up calling two different functions that each do the right thing for their situation. That could work if the call chains for <code>tar()</code> and <code>bar()</code> really are distinct. In this case, you're still essentially passing the same information \u2014\u00a0you're just doing it implicitly using the function name.</p>\n\n<p>Let's try to make this advice more concrete by looking at the code you provided:</p>\n\n<pre><code>void foo()\n{\n    if (!IN_BAR)\n        data = calculate();\n    // Use data in this method.\n    printf(\"Data: %d\\n\", data);\n}\n</code></pre>\n\n<p>The reason that <code>foo()</code> here depends on <code>IN_BAR</code> is that <code>bar()</code> calls <code>calculate()</code> and stores the result in <code>data</code>, which is another global variable. If <code>foo()</code> is invoked as part of <code>tar()</code>, then <code>calculate()</code> hasn't been called and <code>data</code> presumably won't have a useful value, so you need to call it inside <code>foo()</code> in that case.</p>\n\n<p>Your specific question seems to be about ways to avoid the need for <code>IN_BAR</code>, so let's look at that first. One solution here is to just make a valid <code>data</code> a requirement for calling <code>foo()</code>. If you do that, then <code>foo()</code> doesn't need <code>IN_BAR</code> -- it can just assume that <code>data</code> is always valid, because calling it without that is an error. It moves the responsibility for calling <code>calculate()</code> out of <code>foo()</code>'s realm, and it lets you call <code>calculate()</code> anywhere higher up the chain -- you could do it in <code>tar()</code> or in <code>func_tar()</code> or anywhere else, as long as you do it prior to calling <code>foo()</code>, and <code>foo()</code> becomes simpler:</p>\n\n<pre><code>void foo()\n{\n    // Use data in this method.\n    printf(\"Data: %d\\n\", data);\n}\n</code></pre>\n\n<p>If there's some reason that you can't do that, then you can at least tie the validity of <code>data</code> to that one variable. You could do that either by defining some value for <code>data</code> that means \"invalid\", so that you can <em>just</em> look at data and know whether or not it's valid. For example, you could change it's type to <code>int*</code> and initialize it to <code>nil</code>, and then have <code>calculate()</code> return a pointer to the <code>int</code> that it calculates:</p>\n\n<pre><code>void foo()\n{\n    if (data == nil)\n        data = calculate();\n    // Use data in this method.\n    printf(\"Data: %d\\n\", data);\n}\n</code></pre>\n\n<p>It would be much better, though, to reimplement <code>foo()</code> so that <code>data</code> is passed in explicitly:</p>\n\n<pre><code>void foo(int data)\n{\n    // Use data in this method.\n    printf(\"Data: %d\\n\", data);\n}\n</code></pre>\n\n<p>Now you don't need either <code>data</code> or <code>IN_BAR</code> as globals, and <code>foo()</code>'s need for a value for <code>data</code> is explicit. If it's okay for <code>foo()</code> to call <code>calculate()</code> itself when there's no <code>data</code> value, the surely it must be OK for <code>func_tar()</code> to call <code>calculate()</code> immediately before calling <code>foo()</code>:</p>\n\n<pre><code>void func_tar()\n{\n    foo( calculate() );\n}\n</code></pre>\n\n<p>In the case of <code>bar()</code>, which calls <code>calculate()</code> itself, you've already got a <code>data</code> value, and that should be passed along to it's subsidiary functions:</p>\n\n<pre><code>void func_bar(int data)\n{\n    foo(data);\n}\n</code></pre>\n\n<p>That's true even if <code>func_bar()</code> is a stand-in for several functions. <strong>The bottom line is that using a global variable to avoid passing <code>data</code> information in parameters is a bad idea.</strong> Perhaps <code>data</code> is also a stand-in for several different values; in that case, combine them all into a single structure as I described in the discussion above.</p>\n"}], "owner": {"reputation": 43, "user_id": 9092537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f00b735505ea9421b1dfed1b4e3f4de?s=128&d=identicon&r=PG", "display_name": "Deeps", "link": "https://stackoverflow.com/users/9092537/deeps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 54912206, "answer_count": 2, "score": 4, "last_activity_date": 1551463505, "creation_date": 1551289544, "last_edit_date": 1551347083, "question_id": 54911523, "link": "https://stackoverflow.com/questions/54911523/how-to-avoid-using-global-in-c-to-detect-setting-of-variable", "title": "How to avoid using global in C to detect setting of variable?", "body": "<p>I have function foo() which is called from two different code flows.\nLets say these two code flows have two different functions calling foo()</p>\n\n<p>bar() and tar()</p>\n\n<p>I want to do make some decision on the basis of which function(bar() or tar()) has called foo().\nCurrently, I am setting global variable IN_BAR = 1; in case of bar() and IN_BAR = 0; in case of tar.\nThen I check the value of \"IN_BAR\" in foo() and do something.</p>\n\n<pre><code>int IN_BAR = 0; // global\n\nvoid bar () {\n...\nIN_BAR = 1;\nfoo();\nIN_BAR = 0;\n..\n}\n\nvoid tar() {\n...\nfoo();\n...\n}\n\nvoid foo() {\n...\nif (IN_BAR)\n   do_this();\nelse\n   do_that();\n}\n</code></pre>\n\n<p>Currently, there is a lot of places (in codebase) which look like this. I want to avoid using globals and setting &amp; resetting of global variables.\nIs there way to handle the above mentioned situation? Or is there a design flaw here?</p>\n\n<p>EDIT:<br>\nThere are cases when bar() &amp; tar() are not calling foo() directly i.e. there are alot of calls in between, but decision has to be made at bar() &amp; tar().</p>\n\n<p>bar()-><em>filler1()->filler2()</em>->foo()<br>\ntar()-><em>func1()->func2()</em>->foo()</p>\n\n<p>test.c  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n// globals\nint data = 0;\nint IN_BAR = 0;\n\nint calculate()\n{\n    // Some algorithm.\n    return 10;\n}\n\nvoid foo()\n{\n    if (!IN_BAR)\n        data = calculate();\n    // Use data in this method.\n    printf(\"Data: %d\\n\", data);\n}\n\n// This function is a place holder for multiple functions.\nvoid func_bar()\n{\n    foo();\n}\n\nvoid bar()\n{\n    IN_BAR = 1;\n    data = calculate();\n    func_bar();\n    IN_BAR = 0;\n}\n\n// This function is a place holder for multiple functions.\nvoid func_tar()\n{\n    foo();\n}\n\nvoid tar()\n{\n    func_tar();\n}\n\nint main()\n{\n    int c = 1;\n    if (c == 1)\n        bar();\n    else\n        tar();\n    return 1;\n}\n</code></pre>\n\n<p>I am calculating something inside bar and want to reuse in foo(), but in case of tar I am not calculating and want to calculate again as no calculation is done.</p>\n\n<p>How can I handle this case?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1551289098, "post_id": 54911338, "comment_id": 96589512, "body": "Please post <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and define the &quot;doesn&#39;t work&quot; thing."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1551289106, "post_id": 54911338, "comment_id": 96589517, "body": "Don&#39;t ever do that unless you have considerable experience with file-systems and the inner workings of NTFS. A single byte written in the wrong place can destroy the whole disk."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1551289264, "post_id": 54911338, "comment_id": 96589591, "body": "Please elaborate what exactly you mean b &quot;directly&quot; and explain why you want that, in contrast to e.g. &quot;conveniently&quot;, &quot;safely&quot;, ..."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1551289429, "post_id": 54911338, "comment_id": 96589669, "body": "If you&#39;re in user mode, you cannot get around the operating system."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1551289592, "post_id": 54911338, "comment_id": 96589757, "body": "@GovindParmar That comment is quite close to an answer. Am I guessing correctly that you also wait for a clarification of &quot;directly&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 2, "last_activity_date": 1551391858, "last_edit_date": 1551391858, "creation_date": 1551289759, "answer_id": 54911575, "question_id": 54911338, "link": "https://stackoverflow.com/questions/54911338/how-to-write-directly-to-a-disk/54911575#54911575", "title": "How to write directly to a disk?", "body": "<p>Windows imposes <a href=\"https://support.microsoft.com/en-us/help/942448/changes-to-the-file-system-and-to-the-storage-stack-to-restrict-direct\" rel=\"nofollow noreferrer\">special requirements for direct write access to disk volumes</a>. You have to have administrative privileges <em>and</em> you have to take extra steps to demonstrate to the operating system that you are not going to overwrite the contents of a mounted file system (which could cause the entire computer to crash).  <code>fopen(\"//./D:\", \"w\")</code> does not take those extra steps.  It appears to me that you can't do this with <code>fopen</code>, <code>fread</code>, <code>fwrite</code>, etc; you need to use the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-createfilea\" rel=\"nofollow noreferrer\">CreateFile</a>, ReadFile, WriteFile, etc operating system primitives directly.</p>\n\n<p>(As discussed in the Q&amp;A that this is now closed as a duplicate of, the first of these \"extra steps\" is opening the device pathname for <em>read and write</em> access, even if you only mean to write -- <code>GENERIC_READ|GENERIC_WRITE</code> at the CreateFile level.  fopen mode <code>\"w\"</code> supplies only <code>GENERIC_WRITE</code> to CreateFile.  You also need to specify a particular disposition, sharing mode, file attributes, security attributes, etc.)</p>\n"}], "owner": {"reputation": 83, "user_id": 9127341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bcd75783dc2e0b7cfc0fc38cf4427b9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Mercer", "link": "https://stackoverflow.com/users/9127341/alex-mercer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "closed_date": 1551291841, "accepted_answer_id": 54911575, "answer_count": 1, "score": -5, "last_activity_date": 1551391858, "creation_date": 1551288896, "question_id": 54911338, "link": "https://stackoverflow.com/questions/54911338/how-to-write-directly-to-a-disk", "closed_reason": "Duplicate", "title": "How to write directly to a disk?", "body": "<p>I am a amateur programmer in C programming, I know how to read data directly from a drive (file = fopen(\"//./D:\", \"r\"); ). Now I want to write data to the disk directly using the same way by changing the second argument of the mentioned function  to \"w\". But it doesn't work even when I run the program as administrator. I was wondering:</p>\n\n<ol>\n<li><p>How to write data directly to a drive or flash drive using C?</p></li>\n<li><p>How the programs like Diskpart.exe write to a disk?</p></li>\n</ol>\n\n<p>I am using Windows.</p>\n"}, {"tags": ["c", "sockets", "networking", "network-programming"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1551288052, "post_id": 54911004, "comment_id": 96589008, "body": "An endian fixup cannot possibly be a performance bottlekneck in an application pumping data over a wire. This is <a href=\"http://wiki.c2.com/?PrematureOptimization\" rel=\"nofollow noreferrer\">premature optimization</a> taken to another level. I can think of NO reason not to use hton in the very context it was made for. If you&#39;re talking about <i>your</i> data, not the lib api arguments, you could get away with it, but unless you measured and can <i>prove</i> this is a serious concern, why bother."}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 2, "creation_date": 1551290483, "post_id": 54911004, "comment_id": 96590199, "body": "The problem with not using hton is that it makes your code less portable to other systems.   I actually work in a place where a predecessor made the assumption that some code would always use big endian, and that the code was only going to be used for a specific purpose -- neither of which are true anymore, and now we&#39;re paying a heavy price for it."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1551287901, "creation_date": 1551287901, "answer_id": 54911072, "question_id": 54911004, "link": "https://stackoverflow.com/questions/54911004/should-i-convert-to-network-byte-order-hton-if-all-machines-on-the-network-us/54911072#54911072", "title": "Should I convert to network byte order (hton*) if all machines on the network use little-endian?", "body": "<p>Your protocol could always be used in ways you don't expect.  The program may get picked up by someone running on an ARM or Sun system, for example.  </p>\n\n<p>Since values sent over a network are generally expected to be in network byte order, it's best to convert your values before sending.  Any effect on performance would be negligible and would be considered premature optimization.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11126281"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 54911072, "answer_count": 1, "score": 3, "last_activity_date": 1551287901, "creation_date": 1551287646, "question_id": 54911004, "link": "https://stackoverflow.com/questions/54911004/should-i-convert-to-network-byte-order-hton-if-all-machines-on-the-network-us", "title": "Should I convert to network byte order (hton*) if all machines on the network use little-endian?", "body": "<p>I am writing a client-server application that uses UDP to send datagrams between two Intel x64 computers. I control the hardware on both sides and have verified that they use identical little-endian architecture.</p>\n\n<p>As I can confirm both machines are little-endian, are there any benefits given by using <code>hton*</code> functions to change the byte order before sending my data? Surely this creates a very slight performance decrease and gives no benefit?</p>\n"}, {"tags": ["c", "list", "sorting"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 3, "creation_date": 1551287589, "post_id": 54910959, "comment_id": 96588760, "body": "Would you mind posting a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1551287907, "post_id": 54910959, "comment_id": 96588932, "body": "Please explain why you are sorting a linked list by copying contents of nodes around. The point of a linked list is NOT to do that and do pointer manipulation instead. In this special case of strings, you are running many risks relating to different lengths; admittedly not for your example of three equally long &quot;a&quot;, &quot;b&quot;, &quot;c&quot; - but the problems are going to find you sooner or later..."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1551293328, "post_id": 54910959, "comment_id": 96591539, "body": "You are comparing <code>*temp</code> and <code>*temp-&gt;next</code> You should instead compare  <code>*p</code> and <code>*temp</code> And, you could rewrite your <code>while</code> loops into <code>for()</code>loops, saving 3 lines, and avoiding a lot of possible errors."}], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 10801822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146a7214b29438ffcb5a9ee6ce8b90ff?s=128&d=identicon&r=PG", "display_name": "LeoVen", "link": "https://stackoverflow.com/users/10801822/leoven"}, "is_accepted": false, "score": 2, "last_activity_date": 1551290306, "last_edit_date": 1551290306, "creation_date": 1551289218, "answer_id": 54911426, "question_id": 54910959, "link": "https://stackoverflow.com/questions/54910959/sorting-linked-list-contents-in-c-alphabetically-for-movie-titles/54911426#54911426", "title": "Sorting linked list contents in c alphabetically for movie titles", "body": "<p>Insteand of using <code>strcpy</code> why not simply move the node's pointers? If it is a singly-linked list you'll need a <code>before</code> node that is the previous one to the <code>temp</code> node, so when you do <code>temp = temp-&gt;next</code> you first do <code>before = temp</code>. This is how you would do with a doubly-linked node:</p>\n\n<pre><code>if (strcmp(/*...*/) &gt; 0) {\n    ReviewNode *swap = temp-&gt;next;\n    temp-&gt;next = swap-&gt;next;\n    swap-&gt;prev = temp-&gt;prev;\n    swap-&gt;next = temp;\n    temp-&gt;prev = swap;\n}\n</code></pre>\n\n<p>This way you don't have to copy the strings around which might take much longer than simply moving the nodes around. A good way to know how to move these links around is to grab a pencil and a piece of paper and simulate the list being sorted. It takes time but you end up learning a lot from it!</p>\n\n<p>Without much more information its hard to know what problems you are facing. Good luck!</p>\n"}], "owner": {"reputation": 9, "user_id": 9403152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15b4d149d0624cbfe2893aaf6875278a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9403152/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1551290306, "creation_date": 1551287472, "last_edit_date": 1551288524, "question_id": 54910959, "link": "https://stackoverflow.com/questions/54910959/sorting-linked-list-contents-in-c-alphabetically-for-movie-titles", "title": "Sorting linked list contents in c alphabetically for movie titles", "body": "<p>I am trying to sort a linked list of movie titles alphabetically in c , but I can't figure it out. This is what I have so far:</p>\n\n<pre><code>ReviewNode *sortReviewsByTitle(ReviewNode *head)\n{\n    char tempTitle[MAX_STR_LEN];\n    ReviewNode *p = NULL;\n    ReviewNode *temp = NULL;\n    p = head;\n    while (p!= NULL){\n        temp = p;\n        while(temp-&gt;next != NULL){\n            if(strcmp(temp-&gt;review.movie_title, temp-&gt;next-&gt;review.movie_title) &gt; 0){\n                strcpy(tempTitle, temp-&gt;review.movie_title);\n                strcpy(temp-&gt;review.movie_title, temp-&gt;next-&gt;review.movie_title);\n                strcpy(temp-&gt;next-&gt;review.movie_title, tempTitle);\n            }\n            temp = temp-&gt;next;\n        }\n        p = p -&gt;next;\n    }\n    return head;\n</code></pre>\n\n<p>one of my test cases: sorts: c, b, a and returns b, a, c</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1551287053, "post_id": 54910815, "comment_id": 96588473, "body": "Don&#39;t use numerical types/constants as credit card numbers. These are too long for standard types to handle. Use strings instead."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551287101, "post_id": 54910815, "comment_id": 96588494, "body": "@EugeneSh. A US card number fits into a <code>uint64_t</code> and is probably appropriate &quot;enough&quot; for an intro class assignment where the goal is to use numeric functions/constructs."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1551287215, "post_id": 54910815, "comment_id": 96588551, "body": "@AndreyAkhmetov Intro class is not supposed to use <code>stdint</code> types, if you ask me. Perhaps <code>unsigned long long</code> will do, but it&#39;s a sloppy path."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1551287260, "post_id": 54910815, "comment_id": 96588575, "body": "Yet <code>double</code> is certainly <i>in</i>appropriate, and, moreover, floating-point arithmetic and comparisons do not appear to be what the OP actually wants."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551287360, "post_id": 54910815, "comment_id": 96588628, "body": "@flodrian, what happens if <code>nr</code> passes the <code>nr &#47; 100000000000000 &lt; 10</code> test, but not either of the two equality tests within that <code>if</code> block?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 3, "creation_date": 1551287405, "post_id": 54910815, "comment_id": 96588655, "body": "&quot;just seems to not work&quot; is not a proper problem report. Please specify the problem exactly: what happens? what does not happen? what is expected to happen? Ideally with cut-and-paste of the actual console output (text, not images). Please learn to do this - it will serve you well throughout  your career."}, {"owner": {"reputation": 3081, "user_id": 2711811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc519c42e8a7c55c1e33af5ca6203f4?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/2711811/andy"}, "edited": false, "score": 1, "creation_date": 1551287625, "post_id": 54910815, "comment_id": 96588785, "body": "Also working from a test-driven approach (and post your test cases for assistance) may help you realize you have a path through the loop which is infinite - e.g. nr=0."}, {"owner": {"reputation": 3081, "user_id": 2711811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc519c42e8a7c55c1e33af5ca6203f4?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/2711811/andy"}, "edited": false, "score": 1, "creation_date": 1551288767, "post_id": 54910815, "comment_id": 96589364, "body": "I may be wrong on this (still checking) but a 64-bit double (52 bits of mantissa) can only represent 15 decimal digits in all cases - where the OP code apparently is dealing with 16 decimal digit cc #s."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1551294356, "post_id": 54910815, "comment_id": 96592002, "body": "If nothing else, please perform the division <code>nr &#47; 100000000000000</code> exactly <b>once</b> and store the result in a temporary variable. You can then print this out, which will help in troubleshooting"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551287554, "post_id": 54910932, "comment_id": 96588739, "body": "I would be surprised to find that the OP&#39;s <code>long</code> has 16 decimal digits of precision.  On all the popular C implementations for Linux, Mac, and Windows, <code>long</code> has the same size and representation as <code>int</code> (32-bit two&#39;s complement)."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551287598, "post_id": 54910932, "comment_id": 96588767, "body": "@JohnBollinger Please refer to the <a href=\"https://github.com/cs50/libcs50/blob/develop/src/cs50.h\" rel=\"nofollow noreferrer\">header</a> that the CS50 program uses. The authors of that header guarantee that on the environment used for that class, <code>long</code> will be a 64-bit signed type. My out-of-the-box C environment (installed from my package manager on a popular distro) also happens to make <code>long</code> have the same size and representation as a 64-bit signed (2s-complement) integer. I&#39;m adding notes to caution readers to not generalize."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1551287943, "post_id": 54910932, "comment_id": 96588949, "body": "@JohnBollinger <i>On all the popular C implementations for Linux, Mac, and Windows, long has the same size and representation as int (32-bit two&#39;s complement).</i> This is incorrect."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551288131, "post_id": 54910932, "comment_id": 96589049, "body": "Well that would be yet another reason to dislike CS50.  But more importantly, neither header or library does anything to ensure that <code>long</code> actually is a 64-bit type.  Many people do CS50 independently, not in a special environment prepared for the in-person class, and they are likely to find that they actually have only 32-bit <code>long</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1551288207, "post_id": 54910932, "comment_id": 96589081, "body": "Apparently you have a counterexample, @n.m..  Did you intend to share?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1551288401, "post_id": 54910932, "comment_id": 96589184, "body": "@JohnBollinger have a few thousands of those in the building I&#39;m in. All computers running Linux and all computers here running Mac OS X on the x64 platform have 64 bit longs, and have had for quite some time. I would be hard pressed to find any that still has 32 bit longs by default"}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551288540, "post_id": 54910932, "comment_id": 96589242, "body": "@JohnBollinger Calling libCS50 faulty isn&#39;t terribly helpful to the OP. I certainly wouldn&#39;t ever use it for my own projects, but given the nature of the question I am prepared to provide a recommendation for what is, given what I know about the OP&#39;s situation, an appropriate numeric type to complete the assignment (while giving a warning to this effect). You are welcome to add an answer that recommends patching or getting rid of CS50 if you think it will be more useful to the asker."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551288947, "post_id": 54910932, "comment_id": 96589452, "body": "@JohnBollinger Digging deeper, whether or not this decision is correct or good, it&#39;s useful to know that it was a <a href=\"https://github.com/cs50/libcs50/pull/109\" rel=\"nofollow noreferrer\">conscious decision</a>, deprecating a similar function called <code>get_long_long</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551289057, "post_id": 54910932, "comment_id": 96589495, "body": "You don&#39;t have to beleve me. You can just check your own Linux or Mac computer. Just in case all of them are being unavalilable right now, you can  find counterexamples online. There&#39;s no need to stretch your imagination too far. <a href=\"https://ideone.com/a0nLeP\" rel=\"nofollow noreferrer\">ideone.com/a0nLeP</a> What do you think this one is running? If all else fails, I heard there&#39;s a way to find such information over the Internet."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1551291635, "post_id": 54910932, "comment_id": 96590719, "body": "Ok, <i>mea culpa</i>.  At this point, I have no idea how I acquired that idea, since in fact I use and program for a 64-bit Linux machine every day.  I suppose I can take pride at least in having practiced good enough programming discipline to not have been bitten by my misconception."}], "tags": [], "owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "is_accepted": false, "score": 2, "last_activity_date": 1551288697, "last_edit_date": 1551288697, "creation_date": 1551287404, "answer_id": 54910932, "question_id": 54910815, "link": "https://stackoverflow.com/questions/54910815/running-a-conditional-into-a-true-statement-of-a-conditional/54910932#54910932", "title": "Running a conditional into a true statement of a conditional", "body": "<p>You are using a <code>double</code> (a representation of a floating point number that need not be an integer), meaning that when you divide it by your divisors, the result is not truncated. For your example (input is <code>378282246310005</code>), the value of <code>nr / 10000000000000</code> is not 37, but is actually a <code>double</code> with value approximately 37.8282246...</p>\n\n<p>The input will not fit into an int, so the <code>get_int</code> function available in cs50.h will be inappropriate. However, the value <em>will</em> fit into a <code>long</code>, <em>on the environment that CS50 uses</em><sup>1</sup></p>\n\n<p>Declare <code>nr</code> with type <code>long</code>, and use <code>get_long()</code> to obtain the input from the user. Then the value of <code>nr / 10000000000000</code> will be truncated toward zero to become 37, exactly as you need here.</p>\n\n<h2>Note regarding types:</h2>\n\n<p><sup>1</sup> The authors of <code>libcs50</code> document <code>get_long()</code> with a 64-bit signed type for <code>long</code> in mind, having the expected toolchain and environment in mind. This is not always the case, especially if your environment (OS, compiler, etc) doesn't match what the authors of CS50 expect you to use.</p>\n\n<p>You will want to make sure that your assumptions hold if you want to use <code>long</code> on other environments; it is unwise to generalize that <code>long</code> will be 64 bits in the future, without first carefully verifying that this is the case. For the purposes of this assignment, the given type will be sufficient, but you may want to consider learning about the <a href=\"https://pubs.opengroup.org/onlinepubs/009695399/basedefs/stdint.h.html\" rel=\"nofollow noreferrer\"><code>stdint.h</code></a> header, which provides types that have a guaranteed, specified size.</p>\n"}], "owner": {"reputation": 11, "user_id": 11126356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a849934608b6141efa4facf67f4104a2?s=128&d=identicon&r=PG&f=1", "display_name": "flodrian", "link": "https://stackoverflow.com/users/11126356/flodrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551288697, "creation_date": 1551286985, "last_edit_date": 1551287504, "question_id": 54910815, "link": "https://stackoverflow.com/questions/54910815/running-a-conditional-into-a-true-statement-of-a-conditional", "title": "Running a conditional into a true statement of a conditional", "body": "<p>I'm currently going through the CS50 course and already hit the first obstacle. Basically I am trying to check different conditions to be true in order for an output, however even if what I am introducing is correct, it just seems to not work.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n\nint main(void)\n{\n    int test = 0;\n    double nr = get_double(\"Your card number please:\\n \");\n        while(test &lt; 1)\n        {\n            if(nr / 100000000000000 &lt; 10)\n            {\n                if(nr / 10000000000000 == 37)\n                {\n                    printf(\"AMEX\");\n                    test++;\n                }\n                else if(nr / 10000000000000 == 34)\n                {\n                    printf(\"AMEX\");\n                    test++;\n                }\n            }\n            else {\n            printf(\"false\");\n            }\n        }\n}\n</code></pre>\n\n<p>Here is an example that should work:378282246310005. Even if I introduce a wrong number, nothing is being displayed.\nAlso, I reckon the while loop is not breaking because the conditions aren't run, or is there another mistake I am missing?</p>\n\n<p>Thanks in advance peeps</p>\n"}, {"tags": ["c", "struct", "gdb"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 5, "creation_date": 1551284035, "post_id": 54909780, "comment_id": 96586591, "body": "<code>p *((s_a*)(0x61b2e0))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1551284164, "creation_date": 1551284164, "answer_id": 54909851, "question_id": 54909780, "link": "https://stackoverflow.com/questions/54909780/print-values-of-struct-type-in-gdb-using-address/54909851#54909851", "title": "Print values of struct type in gdb using address", "body": "<p>You can use the <a href=\"http://visualgdb.com/gdbreference/commands/x\" rel=\"nofollow noreferrer\"><code>x</code> command</a> to print from a given address.</p>\n\n<pre><code>x (s_a*) 0x61b2e0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1551290683, "post_id": 54911278, "comment_id": 96590283, "body": "While this works, using a cast in the print as @meowgoesthedog mentioned is a better answer."}, {"owner": {"reputation": 1, "user_id": 10535337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d99c4c9a8d99963fbd1b8541dda1d21?s=128&d=identicon&r=PG&f=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/10535337/hari"}, "reply_to_user": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1551681432, "post_id": 54911278, "comment_id": 96714114, "body": "I agree as well."}], "tags": [], "owner": {"reputation": 1, "user_id": 10535337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d99c4c9a8d99963fbd1b8541dda1d21?s=128&d=identicon&r=PG&f=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/10535337/hari"}, "is_accepted": false, "score": 0, "last_activity_date": 1551288660, "creation_date": 1551288660, "answer_id": 54911278, "question_id": 54909780, "link": "https://stackoverflow.com/questions/54909780/print-values-of-struct-type-in-gdb-using-address/54911278#54911278", "title": "Print values of struct type in gdb using address", "body": "<p>To examine memory without dependence on the program's data type gdb provides the x command with follow syntax,</p>\n\n<pre><code>x/nfu addr\n</code></pre>\n\n<p>Here the <code>/nfu</code> is optional, where </p>\n\n<p>n - how much memory to display in count according to the option u. Negative sign at front will cause the read with decremented address</p>\n\n<p>f - display format</p>\n\n<p>u - unit size. For E.g., 'h' correspond to halfwords</p>\n\n<p>For the given structure, read for two integer sizes according to your machine will give the structure content. The first integer for the value of <code>n</code> and second for the pointer address. So here for two word read, </p>\n\n<pre><code>x/2uw 0x61b2e0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196, "user_id": 6645610, "user_type": "registered", "profile_image": "https://graph.facebook.com/317792928562854/picture?type=large", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/6645610/dmitry"}, "is_accepted": false, "score": 3, "last_activity_date": 1551291026, "creation_date": 1551291026, "answer_id": 54911934, "question_id": 54909780, "link": "https://stackoverflow.com/questions/54909780/print-values-of-struct-type-in-gdb-using-address/54911934#54911934", "title": "Print values of struct type in gdb using address", "body": "<p><code>(gdb) p *((s_a *)(&lt;address&gt;))</code> should help you to print a content of the structure referenced by <code>&lt;address&gt;</code> virtual address\ni.e. in you case it would be:\n<code>(gdb) p *((s_a *)(0x61b2e0))</code></p>\n"}], "owner": {"reputation": 172, "user_id": 8009911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K2k2w_0_Hhg/AAAAAAAAAAI/AAAAAAAADG0/3VecVECHR6Q/photo.jpg?sz=128", "display_name": "Robin Sharma", "link": "https://stackoverflow.com/users/8009911/robin-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3035, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1551291026, "creation_date": 1551283902, "last_edit_date": 1551285444, "question_id": 54909780, "link": "https://stackoverflow.com/questions/54909780/print-values-of-struct-type-in-gdb-using-address", "title": "Print values of struct type in gdb using address", "body": "<p>Given an address of a struct type variable let's say : 0x61b2e0 .\nI know this address points to a struct of type : s_a, which is defined as </p>\n\n<pre><code>typedef struct {\n\nint n;\nchar *v;\n\n} s_a;\n</code></pre>\n\n<p>How could I print values of this struct filed using the address I know.</p>\n\n<p>thanks,</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "edited": false, "score": 5, "creation_date": 1551283407, "post_id": 54909529, "comment_id": 96586149, "body": "side note DONT USE &#39;gets&#39; its not safe"}, {"owner": {"reputation": 3, "user_id": 10939609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434bc29851010c1c857171de275ef8be?s=128&d=identicon&r=PG&f=1", "display_name": "Jashkirat", "link": "https://stackoverflow.com/users/10939609/jashkirat"}, "reply_to_user": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "edited": false, "score": 0, "creation_date": 1551283554, "post_id": 54909529, "comment_id": 96586253, "body": "then what i should use?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 2, "creation_date": 1551283643, "post_id": 54909529, "comment_id": 96586313, "body": "&quot; I am not able to get proper output&quot;... please post your actual input, your actual output and the desired output."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1551283862, "post_id": 54909529, "comment_id": 96586478, "body": "consider null-terminating your output string and using %s to printf"}, {"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "edited": false, "score": 1, "creation_date": 1551283881, "post_id": 54909529, "comment_id": 96586494, "body": "you  can use fgets(string,size,stdin); but i don&#39;t really see the use of the gets after you read the input using scanf"}, {"owner": {"reputation": 3, "user_id": 10939609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434bc29851010c1c857171de275ef8be?s=128&d=identicon&r=PG&f=1", "display_name": "Jashkirat", "link": "https://stackoverflow.com/users/10939609/jashkirat"}, "edited": false, "score": 0, "creation_date": 1551284028, "post_id": 54909529, "comment_id": 96586585, "body": "as i will give any para containing more than two lines, then after removing a character from that para i want to get remaining lines of that para except that para.."}, {"owner": {"reputation": 3, "user_id": 10939609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434bc29851010c1c857171de275ef8be?s=128&d=identicon&r=PG&f=1", "display_name": "Jashkirat", "link": "https://stackoverflow.com/users/10939609/jashkirat"}, "edited": false, "score": 0, "creation_date": 1551284099, "post_id": 54909529, "comment_id": 96586636, "body": "okk i am trying.. thank you!"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551289276, "post_id": 54909529, "comment_id": 96589601, "body": "@RudraPratapSingh you already accepted my answer, however I edited it to add a proposal"}, {"owner": {"reputation": 3, "user_id": 10939609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434bc29851010c1c857171de275ef8be?s=128&d=identicon&r=PG&f=1", "display_name": "Jashkirat", "link": "https://stackoverflow.com/users/10939609/jashkirat"}, "edited": false, "score": 0, "creation_date": 1551330826, "post_id": 54909529, "comment_id": 96603115, "body": "sorry, i thing your edited ans can see everyone...."}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 0, "last_activity_date": 1551289220, "last_edit_date": 1551289220, "creation_date": 1551286241, "answer_id": 54910568, "question_id": 54909529, "link": "https://stackoverflow.com/questions/54909529/how-to-remove-a-character-from-a-paragraph-in-c/54910568#54910568", "title": "how to remove a character from a paragraph in c?", "body": "<p>There are several problems in your program</p>\n\n<p>1) With</p>\n\n<pre><code>scanf (\"%[^;]s\", inputString);\ngets(inputString);\n</code></pre>\n\n<p>you rewrite <em>inputString</em> with the gets after the <em>scanf</em>, for instance if the input is <code>foo bar loop;</code> you set <em>inputString</em> with <code>foo bar loop</code> then you set it again with <code>;</code> so you lost all you got with <em>scanf</em></p>\n\n<p>2) Both <em>scanf</em> and <em>gets</em> can write out of <em>inputString</em>, you do not have any protection, the max size to read can be given to <em>scanf</em> and you can replace the use of <em>gets</em> by <em>fgets</em> (forgetting the fact you rewrite in <em>inputString</em>)</p>\n\n<p>3) you never take into account the EOF case, always supposing something is enter</p>\n\n<p>4) In</p>\n\n<pre><code>    if(inputString[i]==ch)\n    {\n        outputString[j]=inputString[i+1];\n        i++;\n    }\n    else\n    {\n        outputString[j]=inputString[i];\n    }\n    j++;\n</code></pre>\n\n<p><code>outputString[j]=inputString[i+1];</code> supposes you never have two consecutive times the character to remove, that way to do is wrong.</p>\n\n<p>5) To use fixed size of array is not mandatory, allocate array then <em>realloc</em> when needed</p>\n\n<p>6) In</p>\n\n<pre><code>for (i=0;i&lt;j;i++)\n{\n    printf (\"%c\", outputString[i]);\n}\n</code></pre>\n\n<p>better to end <em>outputString</em> with a null character to just print by <em>fputs</em> or <em>puts</em> to add a final \\n in case it is missing</p>\n\n<hr>\n\n<p>Here a proposal :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  char * inputString = NULL;\n  size_t sz = 0, used = 0;\n  int v;\n\n  printf (\"Enter a multi line string (ended by ';'):\\n\");\n\n  while ((v = getchar()) != ';') {\n    if (v == EOF) {\n      puts(\"premature EOF, abort\");\n      return -1;\n    }\n\n    if (used == sz) {\n      sz += 100;\n      inputString = realloc(inputString, sz);\n      if (inputString == NULL) {\n        puts(\"not enough memory\");\n        return -1;\n      }\n    }\n    inputString[used++] = v;\n  }\n\n  /* read up to end of line */\n  char * outputString = 0;\n\n  if (getline(&amp;outputString, &amp;sz, stdin) == -1) {\n    puts(\"premature EOF or not enough memory\");\n    return -1;\n  }\n  free(outputString);\n\n  printf (\"Enter a letter to be removed:\\n\");\n\n  char ch;\n\n  if (scanf (\"%c\", &amp;ch) != 1) {\n     puts(\"premature EOF, abort\");\n     return -1;\n  }\n\n  size_t i, j = 0;\n\n  outputString = malloc(used + 1); /* worst case, +1 to have place for null character */\n\n  for (i = 0; i != used; ++i)\n  {\n    if (inputString[i] != ch)\n      outputString[j++] = inputString[i];\n  }\n  outputString[j] = 0;\n\n  puts(outputString);\n\n  free(inputString);\n  free(outputString);\n\n  return 0;\n}\n</code></pre>\n\n<p>Compilation and execution:</p>\n\n<pre><code>pi@raspberrypi:/tmp $ gcc -pedantic -Wextra -g l.c\npi@raspberrypi:/tmp $ ./a.out\nEnter a multi line string (ended by ';'):\nthis is a paragraph\n  terminated by\na ;!!\nEnter a letter to be removed:\ni\nths s a paragraph\n  termnated by\na \n</code></pre>\n\n<p>Execution under <em>valgrind</em> :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ valgrind ./a.out\n==3900== Memcheck, a memory error detector\n==3900== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==3900== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==3900== Command: ./a.out\n==3900== \nEnter a multi line string (ended by ';'):\nthis is a paragraph\n  terminated by\na ;!!\nEnter a letter to be removed:\ni\nths s a paragraph\n  termnated by\na \n==3900== \n==3900== HEAP SUMMARY:\n==3900==     in use at exit: 0 bytes in 0 blocks\n==3900==   total heap usage: 5 allocs, 5 frees, 2,307 bytes allocated\n==3900== \n==3900== All heap blocks were freed -- no leaks are possible\n==3900== \n==3900== For counts of detected and suppressed errors, rerun with: -v\n==3900== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 3)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10939609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434bc29851010c1c857171de275ef8be?s=128&d=identicon&r=PG&f=1", "display_name": "Jashkirat", "link": "https://stackoverflow.com/users/10939609/jashkirat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54910568, "answer_count": 1, "score": 0, "last_activity_date": 1551289220, "creation_date": 1551283082, "last_edit_date": 1551283828, "question_id": 54909529, "link": "https://stackoverflow.com/questions/54909529/how-to-remove-a-character-from-a-paragraph-in-c", "title": "how to remove a character from a paragraph in c?", "body": "<p>I have written a c program which removes a character from a string, not from multiple lines then I write code to store multiple lines of a string but when I am compiling my code, I am not able to get proper output. Please, somebody, have a look.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char inputString[1000], ch, outputString[1000];\n\n    int i,j=0;\n\n    printf (\"Enter a multi line string:\\n\");\n    scanf (\"%[^;]s\", inputString);\n    gets(inputString);\n\n    printf (\"Enter a letter to be removed:\\n\");\n    scanf (\"%c\", &amp;ch);\n    for (i=0; inputString[i]!='\\0';i++)\n    {\n        if(inputString[i]==ch)\n        {\n            outputString[j]=inputString[i+1];\n            i++;\n        }\n        else\n        {\n            outputString[j]=inputString[i];\n        }\n        j++;\n    }\n    for (i=0;i&lt;j;i++)\n    {\n        printf (\"%c\", outputString[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "malloc", "nodes"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1551282691, "post_id": 54909344, "comment_id": 96585640, "body": "<code>After looking around I still don&#39;t know where to start</code> - start with reading your course materials. We will not do your homework for you."}, {"owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551282878, "post_id": 54909344, "comment_id": 96585777, "body": "@SergeyA I have and I can&#39;t get my head around it. Also if you read my post you&#39;ll see that I&#39;ve asked for tips on how to get started and did not state anywhere that I want someone to do the whole thing for me."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551283211, "post_id": 54909344, "comment_id": 96586011, "body": "You can&#39;t simply say &#39;can&#39;t get my head around it&#39; (I mean, you can, but it is not going to get you anywhere). You need to break problem down into smaller parts, and ask specific, pointed questions. Do you understand what a linked list is (in general)? Do you know how to allocate memory dynamically? Do you... As of now, the question is almost an iconic example of a bad SO question."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1551284264, "post_id": 54909344, "comment_id": 96586736, "body": "A Google search of &quot;what is a linked list&quot; and &quot;linked list in C&quot; should provide such a deluge of useful links, that it should give you plenty of ideas."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1551284318, "post_id": 54909344, "comment_id": 96586770, "body": "If you have successfully created the list, it seems that the next step (as provided in the instructions you give) is to traverse the list."}, {"owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551284337, "post_id": 54909344, "comment_id": 96586787, "body": "@SergeyA I&#39;ve edited the question to hopefully make it clearer..."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1551284390, "post_id": 54909344, "comment_id": 96586820, "body": "A Google search on &quot;using pointers in C&quot; should help you with <code>-&gt;</code>."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1551284453, "post_id": 54909344, "comment_id": 96586861, "body": "If you don&#39;t understand <code>-&gt;</code>, then don&#39;t use it.  Instead of <code>a-&gt;b</code>, you can write <code>(*a).b</code>.  Instead of <code>a-&gt;b-&gt;c</code>, you can write <code>(*((*a).b)).c</code>.  After you do that a bit, you&#39;ll start to appreciate the value of <code>-&gt;</code>"}, {"owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1551284508, "post_id": 54909344, "comment_id": 96586895, "body": "@lurker Thanks man. I&#39;ve looked around on Google but all the examples seem to be more more complicated applications. Which does help a beginner!"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1551284741, "post_id": 54909344, "comment_id": 96587018, "body": "Google search &quot;pointer to structures in C&quot;. One of the first hits: <a href=\"https://www.programiz.com/c-programming/c-structures-pointers\" rel=\"nofollow noreferrer\">C structures pointers</a>"}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 0, "creation_date": 1551285104, "post_id": 54909344, "comment_id": 96587263, "body": "You might like this answer that I did a while ago <a href=\"https://stackoverflow.com/a/20305243/1153938\">stackoverflow.com/a/20305243/1153938</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 6645610, "user_type": "registered", "profile_image": "https://graph.facebook.com/317792928562854/picture?type=large", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/6645610/dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1551284254, "creation_date": 1551284254, "answer_id": 54909877, "question_id": 54909344, "link": "https://stackoverflow.com/questions/54909344/c-setting-up-linked-list-using-malloc/54909877#54909877", "title": "C: setting up linked list using malloc()", "body": "<p>I recommend you to take a look into <a href=\"https://github.com/torvalds/linux/blob/master/include/linux/list.h\" rel=\"nofollow noreferrer\">linux kernel linked list implementation</a>. It is very simple and can be applicable for your task. Multiple open source projects use this implementation for their needs</p>\n"}, {"comments": [{"owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "reply_to_user": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1551285476, "post_id": 54910098, "comment_id": 96587513, "body": "If it was a good explanation, upvote it! If it solved your question, mark it as an answer!  Yes, every malloc for every node. Check the edited answer! @OllieParsons"}, {"owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1551285887, "post_id": 54910098, "comment_id": 96587780, "body": "Ok I see. So for my example I&#39;d have to use 10 mallocs for each node. Then have the pointer to every node = NULL. And then assign the order using -&gt; ?? Then to assign an int to each node do A = 1, B = 4 ect?"}, {"owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "reply_to_user": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1551286118, "post_id": 54910098, "comment_id": 96587928, "body": "<code>a-&gt;data=1</code>for example. Remember you are accessing a value of a <code>Struct</code>. <code>A=1</code>won&#39;t do.  You can malloc it directly, but assigning it to NULL is to ensure nothing wrong happens with memory, and if something happens, it will point to NULL.  You can do a list of nodes, and do all of that in a <code>for</code>but yeah, that would do! @OllieParsons"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551286214, "post_id": 54910098, "comment_id": 96587989, "body": "<code>(struct Node*)malloc(...)</code> is <b>bad</b> code."}, {"owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551286457, "post_id": 54910098, "comment_id": 96588138, "body": "I used the example that I linked in the answer so as he can understand it better. I think it is better to write some code he can look in a source, and it will be as much equal as possible. But yes, you are right. @SergeyA I do not think it is such a bad answer as to downvote it, really."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551286646, "post_id": 54910098, "comment_id": 96588225, "body": "@M.K you might benefit from reading this link: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551286940, "post_id": 54910098, "comment_id": 96588414, "body": "You are right and I should have written that in the first place so as he learns it is bad to do it. Still, I do not think it is that of a bad answer to down vote it. It is a <b>usefull</b> answer, well explained, with sources. And still... Well, it frustrates me actually. But thanks for your input! @SergeyA"}], "tags": [], "owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1551286812, "last_edit_date": 1551286812, "creation_date": 1551284953, "answer_id": 54910098, "question_id": 54909344, "link": "https://stackoverflow.com/questions/54909344/c-setting-up-linked-list-using-malloc/54910098#54910098", "title": "C: setting up linked list using malloc()", "body": "<p>What you basically need to understand is that you need to create several nodes. Let's think about 4 nodes. Node A, B, C and D. So the use of <code>malloc()</code>is going to be to save in memory this 4 nodes (not in order, obviously).  </p>\n\n<p>It is a linked list, not a sequential list. This means that you should be able to \"access\" it like you would normally do in a sequential list, but they are not sequentially saved in memory  (hardware speaking).</p>\n\n<p>So: Your node A will have a pointer. This pointer will point to Node B. Same goes to Node B to node C, and Node C to Node D.</p>\n\n<p><strong>A->B->C->D</strong></p>\n\n<p>Remember <strong>ALL NODES</strong> must have whatever content you want, and a pointer to the next node, so you can access it from there. </p>\n\n<p>This means that Node A can be in (imagine), position 4 in memory, Node B in position 16 in memory, Node C in position 2 in memory, and node D in position 300 in memory. </p>\n\n<p>For example, an easy example using <code>struct</code>:</p>\n\n<pre><code>struct Node {\n   int data;\n   struct Node *next;\n};\n</code></pre>\n\n<p>When you insert a new node, you just need to change the pointers:</p>\n\n<blockquote>\n  <p>A->B->C->D    E (you want to insert it in the second position).</p>\n</blockquote>\n\n<p>So you need to change pointers. Something like:</p>\n\n<pre><code> E=A-&gt;nextNode; //A is no longer pointing to B\nB=E-&gt;nextNode; //Now E is pointing to B\n</code></pre>\n\n<p>To use malloc as you are asking:</p>\n\n<pre><code>struct Node* A= malloc(sizeof(struct Node));   \n  struct Node* B = malloc(sizeof(struct Node));  \n</code></pre>\n\n<p>Take a look in <a href=\"https://www.geeksforgeeks.org/linked-list-set-1-introduction/\" rel=\"nofollow noreferrer\">here</a> to see it better</p>\n"}], "owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1303, "favorite_count": 0, "closed_date": 1551290598, "accepted_answer_id": 54910098, "answer_count": 2, "score": -3, "last_activity_date": 1551286812, "creation_date": 1551282586, "last_edit_date": 1551285072, "question_id": 54909344, "link": "https://stackoverflow.com/questions/54909344/c-setting-up-linked-list-using-malloc", "closed_reason": "Needs more focus", "title": "C: setting up linked list using malloc()", "body": "<p>I'm completely new to linked lists and have been give the below task:</p>\n\n<p>\"</p>\n\n<blockquote>\n  <p>Write a program that creates a Linked List of 10 int values (ranging\n  from 1 to 10) using malloc().</p>\n</blockquote>\n\n<p>\" (There are further parts to this question but don't relate to what I'm stuck on)</p>\n\n<p>I understand the concept of a linked list and I know how to use <code>malloc()</code>. However, the part I don't understand is nodes. </p>\n\n<p>For example: how do you use <code>malloc()</code> on the nodes and the meaning of <code>-&gt;</code>. If someone could explain how the nodes work to set up the linked list of 10 int values that would be great.</p>\n"}, {"tags": ["c", "memory-management", "malloc", "free"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1551282003, "post_id": 54909132, "comment_id": 96585162, "body": "Isn&#39;t it self-explanatory? <code>cube[c][b][a]</code> is <code>char</code> and not a pointer."}, {"owner": {"reputation": 79, "user_id": 8053569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae98c833befca2999bb61102a856307?s=128&d=identicon&r=PG&f=1", "display_name": "Desibre93", "link": "https://stackoverflow.com/users/8053569/desibre93"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551282235, "post_id": 54909132, "comment_id": 96585345, "body": "@EugeneSh. What do I need to fix in code to make it work properly?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1551282675, "post_id": 54909132, "comment_id": 96585632, "body": "Since <code>DIM</code> is a compile-time constant, why mess with dynamic allocation at all?  Just declare cube in <code>main</code> as <code>char cube[DIM][DIM][DIM];</code> and avoid both <code>malloc()</code> and <code>free()</code> altogether.  You can use the same type for function parameters accepting that type, too, which will fix one of the errors in <code>showCube()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1551282377, "creation_date": 1551282377, "answer_id": 54909274, "question_id": 54909132, "link": "https://stackoverflow.com/questions/54909132/free-gives-me-an-error-invalid-conversation-from-chat-to-void/54909274#54909274", "title": "free() gives me an error invalid conversation from chat to void", "body": "<p>When you allocate space for the array, you allocate memory at three levels:</p>\n\n<pre><code>  char*** cube = (char***)malloc(sizeof(char**) * DIM);\n  int a, b, c;\n  for(c = 0; c &lt; DIM; c++) {\n    cube[c] = (char**)malloc(sizeof(char**) * DIM);\n    for(b = 0; b &lt; DIM; b++) {\n      cube[c][b] = (char*)malloc(sizeof(char*) * DIM);\n      for(a = 0; a &lt; DIM; a++) {\n        cube[c][b][a] = ((a + b + c) % 26) + 'A'; \n      }\n    }\n  }\n</code></pre>\n\n<p>But try to free it at 4 levels:</p>\n\n<pre><code>  for(c = 0; c &lt; DIM; c++) {\n    for(b = 0; b &lt; DIM; b++) {\n      for(a = 0; a &lt; DIM; a++) {\n        free(cube[c][b][a]); \n      }\n      free(cube[c][b]);\n    }\n    free(cube[c]);\n  }\n  free(cube);\n</code></pre>\n\n<p><code>cube[c][b][a]</code> is a <code>char</code>, not a <code>char *</code>, so you can't free it.  Get rid of the innermost loop.</p>\n\n<pre><code>  for(c = 0; c &lt; DIM; c++) {\n    for(b = 0; b &lt; DIM; b++) {\n      free(cube[c][b]);\n    }\n    free(cube[c]);\n  }\n  free(cube);\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8053569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae98c833befca2999bb61102a856307?s=128&d=identicon&r=PG&f=1", "display_name": "Desibre93", "link": "https://stackoverflow.com/users/8053569/desibre93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551282377, "creation_date": 1551281951, "last_edit_date": 1551282022, "question_id": 54909132, "link": "https://stackoverflow.com/questions/54909132/free-gives-me-an-error-invalid-conversation-from-chat-to-void", "title": "free() gives me an error invalid conversation from chat to void", "body": "<p>I am learning stuff about dynamic memory and trying to write some code. However whey I try to run it it outputs an error and I cannot solve the mistake. There must me something wrong with malloc() usage but I am not sure.</p>\n\n<p>The error points here -> free(cube[c][b][a]);</p>\n\n<p>Thank you!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define DIM 4\n\nvoid showCube(char**** cube, int dim) {\n  int a, b, c;\n  for(c = 0; c &lt; dim; c++) {\n    for(b = 0; b &lt; dim; b++) {\n      for(a = 0; a &lt; dim; a++) {\n        printf(\"%c \", *cube[c][b][a]); \n      }\n      printf(\"\\n\");\n    }\n    printf(\"50*-\\n\");\n  }\n}\n\nint main() {\n  char*** cube = (char***)malloc(sizeof(char**) * DIM);\n  int a, b, c;\n  for(c = 0; c &lt; DIM; c++) {\n    cube[c] = (char**)malloc(sizeof(char**) * DIM);\n    for(b = 0; b &lt; DIM; b++) {\n      cube[c][b] = (char*)malloc(sizeof(char*) * DIM);\n      for(a = 0; a &lt; DIM; a++) {\n        cube[c][b][a] = ((a + b + c) % 26) + 'A'; \n      }\n    }\n  }\n\n  showCube(&amp;cube, DIM);\n\n  for(c = 0; c &lt; DIM; c++) {\n    for(b = 0; b &lt; DIM; b++) {\n      for(a = 0; a &lt; DIM; a++) {\n        free(cube[c][b][a]); \n      }\n      free(cube[c][b]);\n    }\n    free(cube[c]);\n  }\n  free(cube);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "opengl", "data-visualization"], "answers": [{"tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": false, "score": 1, "last_activity_date": 1551284692, "last_edit_date": 1551284692, "creation_date": 1551284386, "answer_id": 54909921, "question_id": 54908946, "link": "https://stackoverflow.com/questions/54908946/need-help-understanding-a-color-mapping-algorithm/54909921#54909921", "title": "Need help understanding a color-mapping algorithm", "body": "<p>I suspect that this is a variation of <a href=\"https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion\">HSV to RGB</a>.</p>\n\n<p>The idea is that you can map your fluid density (on a linear scale) to the Hue parameter of a color in <a href=\"https://en.wikipedia.org/wiki/HSL_and_HSV\" rel=\"nofollow noreferrer\">HSV format</a>.  Saturation and Value can just maintain constant value of 1.  Normally Hue starts and ends at red, so you also want to shift your Hue values into the [red, blue] range.  This will give you a \"heatmap\" of colors in HSV format depending on the fluid density, which you then have to map to RGB in the shader.</p>\n\n<p>Because some of your values can be kept constant and because you don't care about any of the intermediate results, the algorithm that transforms fluid density to RGB can be simplified to the snippet above.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 5646170, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a22d5e7bb95aaa144ff9fb76aa936e70?s=128&d=identicon&r=PG&f=1", "display_name": "K. Saudi", "link": "https://stackoverflow.com/users/5646170/k-saudi"}, "edited": false, "score": 0, "creation_date": 1551294642, "post_id": 54910433, "comment_id": 96592137, "body": "I&#39;m not sure if I completely follow your explanation of this line in particular:  <code>*R = max(0.0,(3-fabs(value-4)-fabs(value-5))&#47;2);</code>  If you could break it down a tad more that&#39;d be awesome because as of right now I&#39;m not sure why the output is what it is.  Sorry for the trouble!"}, {"owner": {"reputation": 593, "user_id": 5516907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566557951fcc6a16368cc900b1dfdb35?s=128&d=identicon&r=PG&f=1", "display_name": "PeaBrain", "link": "https://stackoverflow.com/users/5516907/peabrain"}, "reply_to_user": {"reputation": 47, "user_id": 5646170, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a22d5e7bb95aaa144ff9fb76aa936e70?s=128&d=identicon&r=PG&f=1", "display_name": "K. Saudi", "link": "https://stackoverflow.com/users/5646170/k-saudi"}, "edited": false, "score": 0, "creation_date": 1551295609, "post_id": 54910433, "comment_id": 96592583, "body": "<code>fabs(value-4)</code> equals <code>value-4</code> if <code>value</code> is bigger than 4, and <code>4-value</code> otherwise. Applying this logic to <code>fabs(value-5)</code> too, you get a total of 3 different outcomes; one for <code>value&lt;4</code>, one for <code>4&lt;value&lt;5</code> and one for <code>5&lt;value</code>. Solving the equations for each of these cases gives the results I described above. So for example if <code>value&lt;4</code>, <code>(3-fabs(value-4)-fabs(value-5))&#47;2</code> is the same as <code>(3-(4-value)-(5-value))&#47;2</code> which equals <code>(3-9+2*value)&#47;2</code> or just <code>value-3</code>."}, {"owner": {"reputation": 47, "user_id": 5646170, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a22d5e7bb95aaa144ff9fb76aa936e70?s=128&d=identicon&r=PG&f=1", "display_name": "K. Saudi", "link": "https://stackoverflow.com/users/5646170/k-saudi"}, "edited": false, "score": 0, "creation_date": 1551296724, "post_id": 54910433, "comment_id": 96593072, "body": "Just a second, in your example if you&#39;re taking <code>value&lt;4</code> then wouldn&#39;t it be <code>(3-(value-4)-(value-5))&#47;2)</code> ? Also how&#39;d you go (mathematically) from <code>(3-(4-value)-(5-value))&#47;2</code> to <code>(3-9+2*value)&#47;2 or just value-3</code>"}, {"owner": {"reputation": 593, "user_id": 5516907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566557951fcc6a16368cc900b1dfdb35?s=128&d=identicon&r=PG&f=1", "display_name": "PeaBrain", "link": "https://stackoverflow.com/users/5516907/peabrain"}, "reply_to_user": {"reputation": 47, "user_id": 5646170, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a22d5e7bb95aaa144ff9fb76aa936e70?s=128&d=identicon&r=PG&f=1", "display_name": "K. Saudi", "link": "https://stackoverflow.com/users/5646170/k-saudi"}, "edited": false, "score": 0, "creation_date": 1551297181, "post_id": 54910433, "comment_id": 96593277, "body": "When <code>value</code> is smaller than four, <code>value-4</code> would be negative - so <code>fabs(value-4)</code> actually results in <code>4-value</code> in this case. And regarding your second question, <code>3-(4-value)-(5-value)</code> can be written as <code>3-((4-value)+(5-value) )</code> and that is equal to ``3-(9-2*value)` or <code>3-9+2*value</code>."}], "tags": [], "owner": {"reputation": 593, "user_id": 5516907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566557951fcc6a16368cc900b1dfdb35?s=128&d=identicon&r=PG&f=1", "display_name": "PeaBrain", "link": "https://stackoverflow.com/users/5516907/peabrain"}, "is_accepted": false, "score": 1, "last_activity_date": 1551285869, "creation_date": 1551285869, "answer_id": 54910433, "question_id": 54908946, "link": "https://stackoverflow.com/questions/54908946/need-help-understanding-a-color-mapping-algorithm/54910433#54910433", "title": "Need help understanding a color-mapping algorithm", "body": "<p>I'm not sure which part of the function you don't understand, so let me explain this line by line:</p>\n\n<pre><code>void rainbow(float value,float* R,float* G,float* B){\n\n}\n</code></pre>\n\n<p>This part is probably clear to you - the function takes in a single density/color value and outputs a rainbow color in rgb space.</p>\n\n<pre><code>const float dx=0.8;\n</code></pre>\n\n<p>Next, the constant <code>dx</code> is initialised. I'm not sure what the name \"dx\" stands for, but looks like it's later used to determine which part of the color spectrum is used.</p>\n\n<pre><code>if (value&lt;0) value=0; if (value&gt;1) value=1;\n</code></pre>\n\n<p>This clamps the input to a value between 0 and 1.</p>\n\n<pre><code>   value = (6-2*dx)*value+dx;\n</code></pre>\n\n<p>This maps the input to a value between <code>dx</code> and <code>6-dx</code>.</p>\n\n<pre><code>   *R = max(0.0,(3-fabs(value-4)-fabs(value-5))/2);\n</code></pre>\n\n<p>This is probably the most complicated part. If <code>value</code> is smaller than 4, this simplifies to <code>max(0.0,(2*value-6)/2)</code> or <code>max(0.0,value-3)</code>. This means that if <code>value</code> is less than 3, the red output will be 0, and if it is between 3 and 4, it will be <code>value-3</code>.</p>\n\n<p>If <code>value</code> is between 4 and 5, this line instead simplifies to <code>max(0.0,(3-(value-4)-(5-value))/2)</code> which is equal to 1. So if <code>value</code> is between 4 and 5, the red output will be 1.</p>\n\n<p>Lastly, if <code>value</code> is greater than 5, this line simplifies to <code>max(0.0,(12-2*value)/2)</code> or just <code>6-value</code>.</p>\n\n<p>So the output <code>R</code> is 1 when <code>value</code> is between 4 and 5, 0 when <code>value</code> is smaller than 3, and something in between otherwise. The calculations for the green and blue output or pretty much the same, just with tweaked value; green is brightest for values between 2 and 4, and blue is brightest for values between 1 and 2. This way the output forms a smooth rainbow color spectrum.</p>\n"}], "owner": {"reputation": 47, "user_id": 5646170, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a22d5e7bb95aaa144ff9fb76aa936e70?s=128&d=identicon&r=PG&f=1", "display_name": "K. Saudi", "link": "https://stackoverflow.com/users/5646170/k-saudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551285869, "creation_date": 1551281332, "last_edit_date": 1551283447, "question_id": 54908946, "link": "https://stackoverflow.com/questions/54908946/need-help-understanding-a-color-mapping-algorithm", "title": "Need help understanding a color-mapping algorithm", "body": "<p>So I'm working on a project that involves taking pre-existing skeleton code of an application that simulates \"fluid flow and visualization\" and applying different visualization techniques on it.</p>\n\n<p>The first step of the project is to apply different color-mapping techniques on three different data-sets which are as follows: fluid density (rho), fluid velocity magnitude (||v||) and the force field magnitude ||f||.</p>\n\n<p>The skeleton code provided already has an example that I can study to be able to determine how best to design and implement different color-maps such as red-to-white or blue-to-yellow or what have you.</p>\n\n<p>The snippet of code I'm trying to understand is the following:</p>\n\n<pre><code>//rainbow: Implements a color palette, mapping the scalar 'value' to a rainbow color RGB\n    void rainbow(float value,float* R,float* G,float* B)\n    {                          \n       const float dx=0.8; \n       if (value&lt;0) value=0; if (value&gt;1) value=1;\n       value = (6-2*dx)*value+dx;\n       *R = max(0.0,(3-fabs(value-4)-fabs(value-5))/2);\n       *G = max(0.0,(4-fabs(value-2)-fabs(value-4))/2);\n       *B = max(0.0,(3-fabs(value-1)-fabs(value-2))/2);\n    }\n</code></pre>\n\n<p>The <code>float value</code>being passed by the first parameter is, as far as I can tell, the fluid density. I've determined this by studying these two snippets.</p>\n\n<pre><code>//set_colormap: Sets three different types of colormaps\nvoid set_colormap(float vy)\n{\n   float R,G,B; \n\n   if (scalar_col==COLOR_BLACKWHITE)\n       R = G = B = vy;\n   else if (scalar_col==COLOR_RAINBOW)\n       rainbow(vy,&amp;R,&amp;G,&amp;B); \n   else if (scalar_col==COLOR_BANDS)\n       {  \n          const int NLEVELS = 7;\n          vy *= NLEVELS; vy = (int)(vy); vy/= NLEVELS; \n          rainbow(vy,&amp;R,&amp;G,&amp;B);   \n       }\n\n   glColor3f(R,G,B);\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>set_colormap(rho[idx0]);\nglVertex2f(px0, py0);\nset_colormap(rho[idx1]);\nglVertex2f(px1, py1);\nset_colormap(rho[idx2]);\nglVertex2f(px2, py2);\n\n\nset_colormap(rho[idx0]);\nglVertex2f(px0, py0);\nset_colormap(rho[idx2]);\nglVertex2f(px2, py2);\nset_colormap(rho[idx3]);\nglVertex2f(px3, py3);\n</code></pre>\n\n<p>With all of this said, could somebody please explain to me how the first method works?</p>\n\n<p>Here's the output when the method is invoked by the user and matter is injected into the window by means of using the cursor:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nk9rF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nk9rF.png\" alt=\"-\"></a></p>\n\n<p>Whereas otherwise it would look like this (gray-scale):</p>\n\n<p><a href=\"https://i.stack.imgur.com/jgEdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jgEdn.png\" alt=\"-\"></a></p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551281770, "post_id": 54908822, "comment_id": 96585003, "body": "Seg fault when <i>compiling</i>?  Then submit a compiler bug.  I think it&#39;s more likely that you have a fault when you run the compiled code; then you should run it under Valgrind to see where the problem lies."}], "answers": [{"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1551281650, "post_id": 54908982, "comment_id": 96584934, "body": "As <code>maximum</code> is an automatic variable, it is not necessarily a null pointer, but its value is unspecified and it is UB to de-reference it."}, {"owner": {"reputation": 904, "user_id": 2714128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2218a1e5916b32e837386473fece442e?s=128&d=identicon&r=PG&f=1", "display_name": "ConsistentProgrammer", "link": "https://stackoverflow.com/users/2714128/consistentprogrammer"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1551281953, "post_id": 54908982, "comment_id": 96585126, "body": "@SergeBallesta: This is true for un-optimized code. Compile at <code>-Os</code> will make it null."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1551282280, "post_id": 54908982, "comment_id": 96585382, "body": "OP has not specified the compilation options, and they are not specified in your answer either ;-). What I say is that the standard says <i>If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate</i>. Indeterminate allows compilers to provide a well known value in that case as extentions."}], "tags": [], "owner": {"reputation": 904, "user_id": 2714128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2218a1e5916b32e837386473fece442e?s=128&d=identicon&r=PG&f=1", "display_name": "ConsistentProgrammer", "link": "https://stackoverflow.com/users/2714128/consistentprogrammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1551281455, "creation_date": 1551281455, "answer_id": 54908982, "question_id": 54908822, "link": "https://stackoverflow.com/questions/54908822/segmentation-error-while-compiling-c-code-with-pointers/54908982#54908982", "title": "Segmentation error while compiling c code with pointers", "body": "<p>The reason you are getting a segmentation fault is because you trying to de-reference a <code>NULL</code> pointer in when <code>maximum</code> is not set.</p>\n\n<p>The correct way is (as mentioned in your code):</p>\n\n<pre><code>   maximum  = array;  // set the pointer to 'array'\n  *maximum = *array;  // then de-reference.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "edited": false, "score": 0, "creation_date": 1551282058, "post_id": 54908989, "comment_id": 96585209, "body": "Maximum is an invalid pointer because it&#39;s datatype is not defined?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "edited": false, "score": 0, "creation_date": 1551282120, "post_id": 54908989, "comment_id": 96585262, "body": "@Combospirit The datatype is defined, otherwise it wouldn&#39;t compile.  Without <code>maximum  = array;</code> it&#39;s invalid because it doesn&#39;t point anywhere."}, {"owner": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "edited": false, "score": 0, "creation_date": 1551282916, "post_id": 54908989, "comment_id": 96585806, "body": "Oh okay.So if the array were  an integer, it would be something like, maximum=&amp;array to dereference it.Is that right?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "edited": false, "score": 0, "creation_date": 1551283092, "post_id": 54908989, "comment_id": 96585921, "body": "@Combospirit That&#39;s assigning, not dereferencing (i.e. using <code>*</code> to get the value stored at a pointer), and that wouldn&#39;t work because the types are not compatible.  As is, <code>maximum</code> has type <code>long *</code> but <code>&amp;array</code> has type <code>long (*)[1000]</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1551281480, "creation_date": 1551281480, "answer_id": 54908989, "question_id": 54908822, "link": "https://stackoverflow.com/questions/54908822/segmentation-error-while-compiling-c-code-with-pointers/54908989#54908989", "title": "Segmentation error while compiling c code with pointers", "body": "<p><code>maximum</code> is defined as a pointer to <code>long</code>.  If you don't set that pointer to point to something, you invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> by reading and dereferencing an invalid pointer.</p>\n\n<p>Also, because you point <code>maximum</code> to the first element of the array, anytime you update <code>*maximum</code> you're changing the first value in the array, which is probably not what you want.</p>\n\n<p>There's really no need for <code>maximum</code> to be a pointer, so change the definition to <code>long</code> and change the references accordingly.</p>\n\n<pre><code>int main()\n{\n  long array[1000], maximum, size, c, location = 1;\n\n  printf(\"Enter the number of elements in array\\n\");\n  scanf(\"%ld\", &amp;size);\n\n  printf(\"Enter %ld integers\\n\", size);\n\n  for ( c = 0 ; c &lt; size ; c++ )\n    scanf(\"%ld\", &amp;array[c]);\n\n   maximum = array[0];\n\n  for (c = 1; c &lt; size; c++)\n  {\n    if (array[c]) &gt; maximum)\n    {\n       maximum = array[c]);\n       location = c+1;\n    }\n  }\n\n  printf(\"Maximum element is present at location number %ld and it's value is %ld.\\n\", location, maximum);\n  return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54908989, "answer_count": 2, "score": 0, "last_activity_date": 1551281480, "creation_date": 1551281009, "question_id": 54908822, "link": "https://stackoverflow.com/questions/54908822/segmentation-error-while-compiling-c-code-with-pointers", "title": "Segmentation error while compiling c code with pointers", "body": "<pre><code>int main()\n{\n  long array[1000], *maximum, size, c, location = 1;\n\n  printf(\"Enter the number of elements in array\\n\");\n  scanf(\"%ld\", &amp;size);\n\n  printf(\"Enter %ld integers\\n\", size);\n\n  for ( c = 0 ; c &lt; size ; c++ )\n    scanf(\"%ld\", &amp;array[c]);\n\n   maximum  = array;\n  *maximum = *array;\n\n  for (c = 1; c &lt; size; c++)\n  {\n    if (*(array+c) &gt; *maximum)\n    {\n       *maximum = *(array+c);\n       location = c+1;\n    }\n  }\n\n  printf(\"Maximum element is present at location number %ld and it's value is %ld.\\n\", location, *maximum);\n  return 0;\n}\n</code></pre>\n\n<p>In this code to find the maximum number in an array,without the 'maximum  = array' ,i'm getting segmentation fault.What could be the reason?</p>\n"}, {"tags": ["c", "intel-ipp", "npp"], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 8954109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d28782000a41def96439e083ba0a1f1?s=128&d=identicon&r=PG&f=1", "display_name": "plswork04", "link": "https://stackoverflow.com/users/8954109/plswork04"}, "is_accepted": true, "score": 1, "last_activity_date": 1551811840, "creation_date": 1551811840, "answer_id": 55009600, "question_id": 54908635, "link": "https://stackoverflow.com/questions/54908635/how-to-calculate-image-rotation-shift-for-npp/55009600#55009600", "title": "How to calculate image rotation shift for NPP?", "body": "<p>Alright, working out the math. It seems <code>ippiGetRotateShift</code> returns the difference of P and P' after rotation. (P'.x = x - x cos(-angle) - y sin(-angle); P'.y = y cos(-angle) + x sin(-angle)). </p>\n"}], "owner": {"reputation": 199, "user_id": 8954109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d28782000a41def96439e083ba0a1f1?s=128&d=identicon&r=PG&f=1", "display_name": "plswork04", "link": "https://stackoverflow.com/users/8954109/plswork04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 55009600, "answer_count": 1, "score": 0, "last_activity_date": 1551811840, "creation_date": 1551280400, "question_id": 54908635, "link": "https://stackoverflow.com/questions/54908635/how-to-calculate-image-rotation-shift-for-npp", "title": "How to calculate image rotation shift for NPP?", "body": "<p><a href=\"https://software.intel.com/en-us/ipp-dev-reference-getrotatetransform#4C030409-BE05-4638-96ED-8E504A95B65A\" rel=\"nofollow noreferrer\">ippiGetRotateTransform</a> and <a href=\"https://docs.nvidia.com/cuda/npp/group__rotate__.html\" rel=\"nofollow noreferrer\">nppiRotate</a> both take x and y shift parameters but I am unsure how they work. IPP and NPP both rotate around (0, 0) then shift the result. <a href=\"https://software.intel.com/en-us/ipp-dev-reference-rotate-sample\" rel=\"nofollow noreferrer\">This example</a> shows using <a href=\"https://software.intel.com/en-us/ipp-dev-reference-getrotateshift\" rel=\"nofollow noreferrer\">ippiGetRotateShift</a> to rotate around the center, but does not explain how it is used.</p>\n\n<p>Relevant part of the example:</p>\n\n<pre><code>Ipp8u src[4*4] = ...;\nIpp8u dst[6*6];\ndouble xShift;\ndouble yShift;\ndouble xShiftTmp;\ndouble yShiftTmp;\ndouble xCenterSrc = 2.0;  \ndouble yCenterSrc = 2.0; \ndouble xCenterDst = 3.5;\ndouble yCenterDst = 2.5;\ndouble angle = 35.0;\nippiGetRotateShift ( xCenterSrc, yCenterSrc, angle, &amp;xShift, &amp;yShift );\n/* xShift = -0.79 , yShift = 1.51 */\nippiGetRotateShift ( 1.0, 1.0, angle, &amp;xShiftTmp, &amp;yShiftTmp);\nxShift += xShiftTmp; yShift += yShiftTmp; \n/* xShift = -1.18, yShift = 2.26 */\nxShift += xCenterDst - xCenterSrc;\nyShift += yCenterDst - yCenterSrc;\n/* xShift = 0.32, yShift = 2.76 */\n</code></pre>\n\n<p>The example documents what the values change to but not how or why. Even the destination center point is unexplained. Why is it (3.5, 2.5) instead of (3, 3)?</p>\n\n<p>Anyway, the x and y shift parameters appear to behave the same. <strong>How can I calculate them for NPP without depending on IPP?</strong></p>\n"}, {"tags": ["c", "pointers", "arduino"], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 2, "last_activity_date": 1551281319, "last_edit_date": 1551281319, "creation_date": 1551280819, "answer_id": 54908771, "question_id": 54908601, "link": "https://stackoverflow.com/questions/54908601/how-can-a-union-member-have-a-pointer-to-an-instance-of-the-union/54908771#54908771", "title": "How can a union member have a pointer to an instance of the union?", "body": "<p>Declaring a pointer to some <code>T</code> only requires that <code>T</code> be declared, not necessarily defined. So just do this:</p>\n\n<pre><code>union Entry;\n\ntypedef struct {\n  char* entryName;\n  const te_UIEntryType entryType = UI_ENTRY_SUBMENU;\n  union Entry *entries[];\n} ts_EntrySubmenu;\n\ntypedef union Entry {\n  /* as before */\n} tsEntry;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 948, "user_id": 1535041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/483ed12e6ca8199c85dd8234766409f5?s=128&d=identicon&r=PG", "display_name": "Craig Graham", "link": "https://stackoverflow.com/users/1535041/craig-graham"}, "edited": false, "score": 0, "creation_date": 1551281512, "post_id": 54908807, "comment_id": 96584858, "body": "I thought there&#39;d be some mechanism to do that but when I tried- and tried again with a cut and paste from your message- I get a compilation error &quot;error: conflicting declaration &#39;typedef union tuEntry tuEntry&#39;&quot;"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 948, "user_id": 1535041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/483ed12e6ca8199c85dd8234766409f5?s=128&d=identicon&r=PG", "display_name": "Craig Graham", "link": "https://stackoverflow.com/users/1535041/craig-graham"}, "edited": false, "score": 0, "creation_date": 1551281573, "post_id": 54908807, "comment_id": 96584889, "body": "@CraigGraham You only use the <code>typedef</code> once.  When you define the union later, you just define  it without the typedef."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1551280948, "creation_date": 1551280948, "answer_id": 54908807, "question_id": 54908601, "link": "https://stackoverflow.com/questions/54908601/how-can-a-union-member-have-a-pointer-to-an-instance-of-the-union/54908807#54908807", "title": "How can a union member have a pointer to an instance of the union?", "body": "<p>You need to forward declare <code>tuEntry</code> so that you can use it in <code>ts_EntrySubmenu</code>.  You'll need to give a tag name to that union so it can be  referenced later.</p>\n\n<p>Also, you can't initialize a field of a struct or union as a default when it is defined in C.  You need to set that field in each relevant instance.</p>\n\n<pre><code>typedef union tuEntry tuEntry;\n\ntypedef struct {\n  char* entryName;\n  const te_UIEntryType entryType;   // no default value\n  tuEntry *entries[];\n} ts_EntrySubmenu;\n\n\nunion tuEntry\n{\n  tsEntry entry;\n  ts_EntryInt entryInt;\n  ts_EntrySingle entrySingle;\n  ts_EntryBool entryBool;\n  ts_EntryDiscrete entryDiscrete;\n  ts_EntrySubmenu entrySubmenu;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1551281741, "last_edit_date": 1551281741, "creation_date": 1551281326, "answer_id": 54908942, "question_id": 54908601, "link": "https://stackoverflow.com/questions/54908601/how-can-a-union-member-have-a-pointer-to-an-instance-of-the-union/54908942#54908942", "title": "How can a union member have a pointer to an instance of the union?", "body": "<blockquote>\n  <p>Problem is, the submenu entry is a member of the union, so it needs to\n  be defined before the union.</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>But it has a pointer to an array of\n  instances of this union, which causes a compile error because the\n  union's not defined yet.</p>\n</blockquote>\n\n<p>The union does not need to have been defined for you to declare a pointer to that type.  It only needs to have been <em>declared</em>.  The definition can come later.</p>\n\n<blockquote>\n  <p>Is there a typesafe way of dealing with this, or does my pointer in\n  the submenu entry have to be a void*?</p>\n</blockquote>\n\n<p>Yes.  Forward-declare the union before the structure definition, and put the union definition later.  This does require you to provide a tag for your union type, else the forward declaration and later definition would not refer to the same type.</p>\n\n<p>Example:</p>\n\n<pre><code>typedef union entry tuEntry;\n\ntypedef struct {\n  // ...\n  tuEntry *entries[];\n} ts_EntrySubmenu;\n\n\nunion entry\n{\n  // ...\n  ts_EntrySubmenu entrySubmenu;\n};\n</code></pre>\n\n<hr>\n\n<p>Additionally, I cannot help noticing that your original code completely avoids declaring any structure or union tags.  I want to make sure you understand that that's a <em>style choice</em>, and especially that the <code>typedef</code> keyword is not about defining types, but rather about declaring <em>aliases</em> for type names.  Your style is not inherently wrong, but it does not support what you want to do.  You need to use structure and union types with tags to link multiple declarations of the same type in the same scope.</p>\n"}], "owner": {"reputation": 948, "user_id": 1535041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/483ed12e6ca8199c85dd8234766409f5?s=128&d=identicon&r=PG", "display_name": "Craig Graham", "link": "https://stackoverflow.com/users/1535041/craig-graham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 54908807, "answer_count": 3, "score": 3, "last_activity_date": 1551281741, "creation_date": 1551280297, "last_edit_date": 1551280573, "question_id": 54908601, "link": "https://stackoverflow.com/questions/54908601/how-can-a-union-member-have-a-pointer-to-an-instance-of-the-union", "title": "How can a union member have a pointer to an instance of the union?", "body": "<p>I might be overcomplicating this..</p>\n\n<p>I'm trying to make a fairly reusable hierarchical menu system for an embedded app, in C on Arduino. I have structures to represent the different types of menu item, including those that are submenus, and a union of these to be a generic menu entry. An array of menu entries is one level of the menu. A submenu entry has a pointer to another array of menu entries.</p>\n\n<p>Problem is, the submenu entry is a member of the union, so it needs to be defined before the union. But it has a pointer to an array of instances of this union, which causes a compile error because the union's not defined yet.</p>\n\n<p>Is there a typesafe way of dealing with this, or does my pointer in the submenu entry have to be a void*? </p>\n\n<p>Code:</p>\n\n<pre><code>typedef enum {UI_STATE_HOME, UI_STATE_MENU, UI_STATE_DIALOG} te_UIState;\ntypedef enum {UI_ENTRY_SUBMENU, UI_ENTRY_NUMERIC_INT, UI_ENTRY_NUMERIC_FLOAT, UI_ENTRY_BOOL, UI_ENTRY_DISCRETE} te_UIEntryType;\n\n/* Typedefs for the different types of entry\n *  \n */\n\ntypedef struct {\n  char* entryName; // pointer to one of our string entries, eg MNU_Light\n  te_UIEntryType entryType;\n} tsEntry;\n\ntypedef struct {\n  char* entryName;\n  te_UIEntryType entryType;\n  int (* finalIntHandler)(int selectedValue); //The function that should be called when a number has been selected\n  int (* initialIntValue) (); //The function that should be called to obtain the starting value for the selector\n} ts_EntryInt;\n\ntypedef struct {\n  char* entryName;\n  te_UIEntryType entryType;\n  int (* finalIntHandler)(float selectedValue);\n  float (* initialSingleValue) ();\n} ts_EntrySingle;\n\ntypedef struct {\n  char* entryName;\n  te_UIEntryType entryType;\n  int (* finalIntHandler)(bool selectedValue);\n  bool (* initialBoolValue) ();\n} ts_EntryBool;\n\ntypedef struct {\n  char* entryName;\n  te_UIEntryType entryType;\n  int (* handler)();\n  char* (* optionalEntryNamePtrFunction)(); //If this points to a function, it'll be called to determine what text to display as the entry name.\n  // This is for things like enable/disable where the text changes depending on the present state.\n} ts_EntryDiscrete;\n\ntypedef struct {\n  char* entryName;\n  const te_UIEntryType entryType = UI_ENTRY_SUBMENU;\n  void *entries[];\n} ts_EntrySubmenu;\n\n\ntypedef union\n{\n  tsEntry entry;\n  ts_EntryInt entryInt;\n  ts_EntrySingle entrySingle;\n  ts_EntryBool entryBool;\n  ts_EntryDiscrete entryDiscrete;\n  ts_EntrySubmenu entrySubmenu;\n} tuEntry;\n</code></pre>\n"}, {"tags": ["c", "language-lawyer", "increment", "evaluation"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 18, "creation_date": 1551285482, "post_id": 54908480, "comment_id": 96587518, "body": "Seemingly arbitrary usage of parentheses is common in macro definitions.  Where they <i>do</i> make a big difference, you&#39;d like the error message you get.  Well, usually."}, {"owner": {"reputation": 11, "user_id": 6872902, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9Zn34PXLGl0/AAAAAAAAAAI/AAAAAAAAB0o/UPKJNlVW1Wk/photo.jpg?sz=128", "display_name": "Tomasz Kornuta", "link": "https://stackoverflow.com/users/6872902/tomasz-kornuta"}, "edited": false, "score": 3, "creation_date": 1551324015, "post_id": 54908480, "comment_id": 96602767, "body": "There is no difference in those for ints. However, it is not always the case and you must be cautious when combining brackets and operators, @govin-parmar have shown a good example what can happen with pointers."}, {"owner": {"reputation": 376, "user_id": 4107516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/590700e7fec0dfcce5b5b9542736dcad?s=128&d=identicon&r=PG&f=1", "display_name": "osuka_", "link": "https://stackoverflow.com/users/4107516/osuka"}, "edited": false, "score": 1, "creation_date": 1551366576, "post_id": 54908480, "comment_id": 96621957, "body": "To be clear, <i>both</i> of these cases are well-defined (i.e., not UB) and will store 3 in <code>j</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1551816654, "post_id": 54908480, "comment_id": 96776365, "body": "&quot;<i>am I overthinking it</i>&quot; yes."}], "answers": [{"comments": [{"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 2, "creation_date": 1551338234, "post_id": 54908538, "comment_id": 96605847, "body": "For completeness, has this always been the case? I mean, I know it has, but your reference says C 2018 (i.e. the latest version), so it can&#39;t hurt to have it spelled out."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 7, "creation_date": 1551345058, "post_id": 54908538, "comment_id": 96608890, "body": "@MrLister Yes, even pre-ANSI C (1978) had this behavior. It&#39;s not spelled out formally (so little was), but it&#39;s required for some examples in the first edition of K&amp;R, such as <code>(*ptr)++</code>."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 94, "last_activity_date": 1551339091, "last_edit_date": 1551339091, "creation_date": 1551280108, "answer_id": 54908538, "question_id": 54908480, "link": "https://stackoverflow.com/questions/54908480/difference-between-i-and-i-in-c/54908538#54908538", "title": "Difference between i++ and (i)++ in C", "body": "<p><code>i++</code> and <code>(i)++</code> behave identically.  C 2018 6.5.1 5 says:</p>\n\n<blockquote>\n  <p>A parenthesized expression is a primary expression. Its type and value are identical to those of the unparenthesized expression. It is an lvalue, a function designator, or a void expression if the unparenthesized expression is, respectively, an lvalue, a function designator, or a void expression.</p>\n</blockquote>\n\n<p>The wording is the same in C 1999.</p>\n"}, {"comments": [{"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 7, "creation_date": 1551316358, "post_id": 54908749, "comment_id": 96599873, "body": "So for example, if you define a macro <code>#define postinc(x) x++</code> then <code>postinc(*p)</code> will not do what you expect given the function-like notation.  That&#39;s why in writing macros it&#39;s common to heavily parenthesize e.g. <code>#define postinc(x) ((x)++)</code>"}, {"owner": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "edited": false, "score": 11, "creation_date": 1551347609, "post_id": 54908749, "comment_id": 96610465, "body": "Your answer boils down to &quot;parenthesis can be used to enforce operator precedence&quot; which is obvious and not what the OP asked."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "edited": false, "score": 3, "creation_date": 1551355548, "post_id": 54908749, "comment_id": 96615249, "body": "@GiacomoAlzetta There was a lengthy discussion on this answer that was removed by moderation. The short of it is that I felt that explaining this particular nuance is important because mixing these two expressions up in particular is a common source of bugs for beginners in C."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "edited": false, "score": 7, "creation_date": 1551355927, "post_id": 54908749, "comment_id": 96615454, "body": "@GiacomoAlzetta Remember, SO answers are supposed to be useful for anyone reading the question, not just the OP or people already familiar with the technology being asked about. In my experience the most common usage of <code>(expr)++</code> is to increment a dereferenced value, so giving beginners the impression that <code>expr++</code> is equivalent is detrimental."}, {"owner": {"reputation": 2652, "user_id": 5445670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrwS2.png?s=128&g=1", "display_name": "Solomon Ucko", "link": "https://stackoverflow.com/users/5445670/solomon-ucko"}, "edited": false, "score": 0, "creation_date": 1551368676, "post_id": 54908749, "comment_id": 96623272, "body": "I.e. <code>*p++</code> is equivalent to <code>*(p++)</code>?"}, {"owner": {"reputation": 862, "user_id": 1560126, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8cebd478b6291f992ce5b2547b9c36f3?s=128&d=identicon&r=PG", "display_name": "ale10ander", "link": "https://stackoverflow.com/users/1560126/ale10ander"}, "reply_to_user": {"reputation": 2652, "user_id": 5445670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrwS2.png?s=128&g=1", "display_name": "Solomon Ucko", "link": "https://stackoverflow.com/users/5445670/solomon-ucko"}, "edited": false, "score": 3, "creation_date": 1551385280, "post_id": 54908749, "comment_id": 96631729, "body": "@SolomonUcko No, the first would dereference the pointer and then increment it. The second would increment the pointer THEN dereference it."}, {"owner": {"reputation": 2652, "user_id": 5445670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrwS2.png?s=128&g=1", "display_name": "Solomon Ucko", "link": "https://stackoverflow.com/users/5445670/solomon-ucko"}, "reply_to_user": {"reputation": 862, "user_id": 1560126, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8cebd478b6291f992ce5b2547b9c36f3?s=128&d=identicon&r=PG", "display_name": "ale10ander", "link": "https://stackoverflow.com/users/1560126/ale10ander"}, "edited": false, "score": 0, "creation_date": 1551385886, "post_id": 54908749, "comment_id": 96632062, "body": "@ale10ander So it is impossible to add parentheses within <code>*p++</code> without changing the meaning?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 2652, "user_id": 5445670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrwS2.png?s=128&g=1", "display_name": "Solomon Ucko", "link": "https://stackoverflow.com/users/5445670/solomon-ucko"}, "edited": false, "score": 2, "creation_date": 1551385927, "post_id": 54908749, "comment_id": 96632079, "body": "@SolomonUcko Sure, <code>(*p++);</code>"}, {"owner": {"reputation": 2652, "user_id": 5445670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrwS2.png?s=128&g=1", "display_name": "Solomon Ucko", "link": "https://stackoverflow.com/users/5445670/solomon-ucko"}, "edited": false, "score": 0, "creation_date": 1551386021, "post_id": 54908749, "comment_id": 96632139, "body": "@GovindParmar That wouldn&#39;t be within it; it would be around it. Also, where would this be covered in the specifications?"}, {"owner": {"reputation": 2652, "user_id": 5445670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrwS2.png?s=128&g=1", "display_name": "Solomon Ucko", "link": "https://stackoverflow.com/users/5445670/solomon-ucko"}, "reply_to_user": {"reputation": 862, "user_id": 1560126, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8cebd478b6291f992ce5b2547b9c36f3?s=128&d=identicon&r=PG", "display_name": "ale10ander", "link": "https://stackoverflow.com/users/1560126/ale10ander"}, "edited": false, "score": 0, "creation_date": 1551410101, "post_id": 54908749, "comment_id": 96638751, "body": "@ale10ander Actually, when would the order of those operations matter <i>in C</i>? Post-increment returns the original value. Supporting references: <a href=\"https://stackoverflow.com/a/9255177/5445670\">stackoverflow.com/a/9255177/5445670</a>, <a href=\"https://denniskubes.com/2012/08/14/do-you-know-what-p-does-in-c/\" rel=\"nofollow noreferrer\">denniskubes.com/2012/08/14/do-you-know-what-p-does-in-c</a>, <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/operator_precedence</a>, <a href=\"https://www.quora.com/What-is-the-difference-between-%2Ap++-and-++%2Ap-in-pointers-of-c++/answer/Gajanan-Hegde\" rel=\"nofollow noreferrer\">https://www.quora.com/What-is-the-difference-between-*p++-an&zwnj;&#8203;d-++*p-in-pointers-o&zwnj;&#8203;f-c++/answer/Gajanan&zwnj;&#8203;-Hegde</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1551816881, "post_id": 54908749, "comment_id": 96776481, "body": "The statement is correct but does not answer the question. There are more pitfalls with ++."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 54, "last_activity_date": 1551283709, "last_edit_date": 1551283709, "creation_date": 1551280746, "answer_id": 54908749, "question_id": 54908480, "link": "https://stackoverflow.com/questions/54908480/difference-between-i-and-i-in-c/54908749#54908749", "title": "Difference between i++ and (i)++ in C", "body": "<p>In your simple example of <code>i++</code> versus <code>(i)++</code>, there is no difference, as noted in Eric Postpischil's answer.</p>\n\n<p>However, this difference is actually meaningful if you are dereferencing a pointer variable with the <code>*</code> operator and using the increment operator; there is a difference between <code>*p++</code> and <code>(*p)++</code>. </p>\n\n<p>The former statement dereferences the pointer and then increments the pointer itself; the latter statement dereferences the pointer then increments the dereferenced value.</p>\n"}], "owner": {"reputation": 938, "user_id": 8729682, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s2KzqrtgW0U/AAAAAAAAAAI/AAAAAAAAAIg/qbPWQjqCWNo/photo.jpg?sz=128", "display_name": "Polaris000", "link": "https://stackoverflow.com/users/8729682/polaris000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6544, "favorite_count": 5, "protected_date": 1551417050, "accepted_answer_id": 54908538, "answer_count": 2, "score": 51, "last_activity_date": 1552896351, "creation_date": 1551279936, "last_edit_date": 1552209877, "question_id": 54908480, "link": "https://stackoverflow.com/questions/54908480/difference-between-i-and-i-in-c", "title": "Difference between i++ and (i)++ in C", "body": "<pre><code>int i = 3;\nint j = (i)++;\n</code></pre>\n\n<p>vs </p>\n\n<pre><code>int i = 3;\nint j = i ++;\n</code></pre>\n\n<p>Is there a difference between how the above two cases are evaluated?</p>\n\n<p>Is the first case equivalent to incrementing an rvalue or is it undefined behaviour?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1551279454, "post_id": 54908259, "comment_id": 96583540, "body": "The structure member <code>id</code> is a <i>pointer</i>, but you initialize it as a <i>value</i> in your array. That actually leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a> since you use the wrong <code>printf</code> format to print the &quot;pointers&quot;."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1551279548, "post_id": 54908259, "comment_id": 96583607, "body": "What are you trying to do with <code>return e2-&gt;gender - e1-&gt;gender</code>? it doesn&#39;t look right"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1551280365, "post_id": 54908259, "comment_id": 96584128, "body": "Compile with warnings enabled and treat them as errors"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1551281130, "post_id": 54908259, "comment_id": 96584624, "body": "Aside: conversion from <code>void*</code> doesn&#39;t need a cast, so you can write <code>const struct class *e1 = s1;</code> etc."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1551281273, "post_id": 54908259, "comment_id": 96584722, "body": "What output do you expect?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11125717"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551283869, "post_id": 54908259, "comment_id": 96586483, "body": "@Jabberwocky i want the outcome to be   2000\tmale\tAAA 1000\tfemale \tBBB 300  \tmale\tCCC. = sorted by their names"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551286731, "post_id": 54908259, "comment_id": 96588289, "body": "@L.P See anwers below. Upvote/accept them at your convenience."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551321657, "post_id": 54908259, "comment_id": 96601010, "body": "Regarding: <code>main()</code>  there are two valid signatures for the <code>main()</code> function:  They are: <code>int main( void )</code> and <code>int main( int argc, *argv[] )</code>  Notice that they both have a return type of <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551321799, "post_id": 54908259, "comment_id": 96601041, "body": "the posted code does not compile!  amongst other things, it is missing the statement: <code>#include &lt;string.h&gt;</code> for the function: <code>strcmp()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551322150, "post_id": 54908259, "comment_id": 96601127, "body": "Per this:  <code>struct class {   char gender[13];   char name[13];   int *id; };</code>  the third member of the struct is an <code>pointer to int</code>  however, the initialization is showing the third member to be an <code>int</code>  This is a major problem in the posted code.  When compiling, always enable the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std=gnu11</code> )  Note: other compilers use different options to perform the same activities"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551322725, "post_id": 54908259, "comment_id": 96601243, "body": "In C, the compiler does not know anything about any meaning to indenting the code. However, <code>gcc</code> will assume that the person doing the coding means that a looping statement (<code>for()</code>, <code>while()</code>, etc) followed by indented code means the person wants the indented lines to be grouped within the loop.  To actually include those indented lines as part of the loop, must enclose those lines with an opening brace &#39;{&#39; followed by the lines to be included in the loop, followed by a closing brace &#39;};"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551322866, "post_id": 54908259, "comment_id": 96601282, "body": "regarding: <code>return e2-&gt;gender - e1-&gt;gender;</code>  In C, a string can only be compared with a function, like: <code>strcmp()</code>  in C, a reference to an array name degrades to the address of the first byte of the array.  This line only compares the address of the two different fields.  Suggest: <code>return  strcmp( e1-&gt;gender, e2-&gt;gender);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551323396, "post_id": 54908259, "comment_id": 96601395, "body": "in function: compare() regarding: <code>return -gendercompare;</code>  this will sort descending rather than the desired ascending order because of the <code>-</code> sign"}], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551281968, "post_id": 54908688, "comment_id": 96585135, "body": "Somewhat pedantic, but it&#39;s actually <code>*e1</code> and <code>*e2</code> that must be const (though we could make all four const, i.e. <code>const struct class *const e1</code>)"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1551281970, "last_edit_date": 1551281970, "creation_date": 1551280556, "answer_id": 54908688, "question_id": 54908259, "link": "https://stackoverflow.com/questions/54908259/sorting-name-and-id-in-c/54908688#54908688", "title": "Sorting name and id in C", "body": "<p>There are several problems, see the <code>// &lt;&lt;&lt;&lt;</code> comments I added:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;   // &lt;&lt;&lt;&lt; you forgot to include string.h\n\nstruct class {\n  char gender[13];\n  char name[13];\n  int id;            // &lt;&lt;&lt;&lt; int *id; having a pointer here is pointless,\n                     //      you simple want an integer value here.\n                     //      That's the main problem in your code\n};\n\nint compare(const void *s1, const void *s2)\n{\n  struct class *e1 = (struct class *)s1;\n  struct class *e2 = (struct class *)s2;\n  int gendercompare = strcmp(e1-&gt;name, e2-&gt;name);\n  if (gendercompare == 0)\n    return e2-&gt;gender - e1-&gt;gender;\n  else\n    return -gendercompare;\n}\n\nint main(void)   // &lt;&lt;&lt;&lt; it's int main(void) , not main()\n{\n  int i;\n  int employeecount;\n\n  struct class info[] = { {\"male\",\"AAA\",2000},{\"female\",\"BBB\",1000},{\"male\",\"CCC\",3000} };\n\n  employeecount = 3;\n\n  for (i = 0; i &lt; employeecount; ++i)\n    printf(\"%i\\t%s\\t%s\\n\", info[i].id, info[i].gender, info[i].name);\n  printf(\"\\n\");\n\n  // &lt;&lt;&lt;&lt; use employeecount instead of 3, it's the same thing but it's more consistent.\n  //      Not something that would prevent your code from working\n  qsort(info, employeecount, sizeof(struct class), compare);\n\n  for (i = 0; i &lt; employeecount; ++i)\n    printf(\"%i\\t%s\\t%s\\n\", info[i].id, info[i].gender, info[i].name);\n}\n</code></pre>\n\n<p>There is also a logic problem in your <code>compare</code> function, it seems you want to sort by gender, males first.</p>\n\n<p>As the compare function must return a value &lt;0, 0 or >0 you can simply return the return value of <code>strcmp</code>. Also you don't need the casts, but <code>e1</code> and <code>e2</code> must be <code>const</code> as <code>s1</code> and <code>s2</code> are <code>const</code>.</p>\n\n<pre><code>int compare(const void *s1, const void *s2)\n{\n  const struct class *e1 = s1;\n  const struct class *e2 = s2;\n  return -strcmp(e1-&gt;gender, e2-&gt;gender);\n}\n</code></pre>\n\n<p>See also ConsistentProgrammer's answer for a compare function that sorts by name.</p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1551281930, "post_id": 54908836, "comment_id": 96585102, "body": "I think he wants to sort by gender, and not by name (not entirely sure though...)"}, {"owner": {"reputation": 904, "user_id": 2714128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2218a1e5916b32e837386473fece442e?s=128&d=identicon&r=PG&f=1", "display_name": "ConsistentProgrammer", "link": "https://stackoverflow.com/users/2714128/consistentprogrammer"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551282167, "post_id": 54908836, "comment_id": 96585300, "body": "Thanks @Jabberwocky:  I updated the code. In such a case we can use strcmp too."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1551282250, "post_id": 54908836, "comment_id": 96585361, "body": "No, leave it, your answer was good (I upvoted it). I&#39;m refering to your answer in my answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11125717"}, "edited": false, "score": 0, "creation_date": 1551284010, "post_id": 54908836, "comment_id": 96586570, "body": "@ConsistentProgrammer"}], "tags": [], "owner": {"reputation": 904, "user_id": 2714128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2218a1e5916b32e837386473fece442e?s=128&d=identicon&r=PG&f=1", "display_name": "ConsistentProgrammer", "link": "https://stackoverflow.com/users/2714128/consistentprogrammer"}, "is_accepted": true, "score": 1, "last_activity_date": 1551282120, "last_edit_date": 1551282120, "creation_date": 1551281046, "answer_id": 54908836, "question_id": 54908259, "link": "https://stackoverflow.com/questions/54908259/sorting-name-and-id-in-c/54908836#54908836", "title": "Sorting name and id in C", "body": "<p>I think you might need to update your <code>compare</code> function as follows:</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nstruct class {\n  char gender[13];\n  char name[13];\n  int id;\n};\n\nint compare(const void *s1, const void *s2)\n{\n  struct class *e1 = (struct class *)s1;\n  struct class *e2 = (struct class *)s2;\n  return strcmp(e1-&gt;gender, e2-&gt;gender);\n}\n</code></pre>\n\n<p>The <code>strcmp</code> is enough to perform comparison. </p>\n\n<p>Other minor details are mentioned very well in @Jabberwocky's answers.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1551281561, "creation_date": 1551281561, "answer_id": 54909008, "question_id": 54908259, "link": "https://stackoverflow.com/questions/54908259/sorting-name-and-id-in-c/54909008#54909008", "title": "Sorting name and id in C", "body": "<p>Compile with more warnings enabled, to help you diagnose problems:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc -std=c17 -fPIC -g -Wall -Wextra -Wwrite-strings -Wno-parentheses -Wpedantic -Warray-bounds         54908259.c    -o 54908259\n54908259.c: In function \u2018compare\u2019:\n54908259.c:14:23: warning: implicit declaration of function \u2018strcmp\u2019 [-Wimplicit-function-declaration]\n   int gendercompare = strcmp(e1-&gt;name, e2-&gt;name);\n                       ^~~~~~\n54908259.c: At top level:\n54908259.c:21:1: warning: return type defaults to \u2018int\u2019 [-Wimplicit-int]\n main()\n ^~~~\n54908259.c: In function \u2018main\u2019:\n54908259.c:26:38: warning: initialization of \u2018int *\u2019 from \u2018int\u2019 makes pointer from integer without a cast [-Wint-conversion]\n   struct class info[]={{\"male\",\"AAA\",2000},{\"female\",\"BBB\",1000},{\"male\",\"CCC\",3000}};\n                                      ^~~~\n54908259.c:26:38: note: (near initialization for \u2018info[0].id\u2019)\n54908259.c:26:60: warning: initialization of \u2018int *\u2019 from \u2018int\u2019 makes pointer from integer without a cast [-Wint-conversion]\n   struct class info[]={{\"male\",\"AAA\",2000},{\"female\",\"BBB\",1000},{\"male\",\"CCC\",3000}};\n                                                            ^~~~\n54908259.c:26:60: note: (near initialization for \u2018info[1].id\u2019)\n54908259.c:26:80: warning: initialization of \u2018int *\u2019 from \u2018int\u2019 makes pointer from integer without a cast [-Wint-conversion]\n   struct class info[]={{\"male\",\"AAA\",2000},{\"female\",\"BBB\",1000},{\"male\",\"CCC\",3000}};\n                                                                                ^~~~\n54908259.c:26:80: note: (near initialization for \u2018info[2].id\u2019)\n54908259.c:31:14: warning: format \u2018%i\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018int *\u2019 [-Wformat=]\n     printf(\"%i\\t%s\\t%s\\n\", info[i].id, info[i].gender, info[i].name);\n             ~^             ~~~~~~~~~~\n             %ls\n54908259.c:30:3: warning: this \u2018for\u2019 clause does not guard... [-Wmisleading-indentation]\n   for (i = 0; i &lt; employeecount; ++i)\n   ^~~\n54908259.c:32:5: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the \u2018for\u2019\n     printf(\"\\n\");\n     ^~~~~~\n54908259.c:37:14: warning: format \u2018%i\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018int *\u2019 [-Wformat=]\n     printf(\"%i\\t%s\\t%s\\n\", info[i].id, info[i].gender, info[i].name);\n             ~^             ~~~~~~~~~~\n             %ls\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11125717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 54908836, "answer_count": 3, "score": 0, "last_activity_date": 1551282120, "creation_date": 1551279369, "question_id": 54908259, "link": "https://stackoverflow.com/questions/54908259/sorting-name-and-id-in-c", "title": "Sorting name and id in C", "body": "<p>Im trying to write a code that can sort names. So I have tried to write a program but its not working as I want it to. I want the names to sort alphabetic. I would also want to sort the id based on which id has the highest value. all help appreciated. Kinda new to C and coding in general!  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct class {\n  char gender[13];\n  char name[13];\n  int *id;\n};\n\nint compare(const void *s1, const void *s2)\n{\n  struct class  *e1 = (struct class *)s1;\n  struct class *e2 = (struct class *)s2;\n  int gendercompare = strcmp(e1-&gt;name, e2-&gt;name);\n  if (gendercompare == 0)  \n    return e2-&gt;gender - e1-&gt;gender;\n  else\n    return -gendercompare;\n}\n\nmain()\n{\n  int i;\n  int employeecount;\n\n  struct class info[]={{\"male\",\"AAA\",2000},{\"female\",\"BBB\",1000},{\"male\",\"CCC\",3000}};\n\n  employeecount=3; \n\n  for (i = 0; i &lt; employeecount; ++i)\n    printf(\"%i\\t%s\\t%s\\n\", info[i].id, info[i].gender, info[i].name);\n    printf(\"\\n\");\n\n  qsort(info, 3, sizeof(struct class), compare);\n\n  for (i = 0; i &lt; employeecount; ++i)\n    printf(\"%i\\t%s\\t%s\\n\", info[i].id, info[i].gender, info[i].name);\n}\n</code></pre>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551279448, "post_id": 54908185, "comment_id": 96583529, "body": "Disable padding and check then. <code>#pragma pack(push) #pragma pack(1) &#47;* struct definition here *&#47; #pragma pack(pop)</code>."}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551282321, "post_id": 54908185, "comment_id": 96585406, "body": "@Lundin Tried, but I&#39;ve got the same result -- everything works."}], "answers": [{"comments": [{"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "edited": false, "score": 0, "creation_date": 1551284821, "post_id": 54908906, "comment_id": 96587070, "body": "But the union approach still assumes that the anonymous struct is not padded, right? What if filed types are compound, e.g. other structures?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "edited": false, "score": 0, "creation_date": 1551286957, "post_id": 54908906, "comment_id": 96588421, "body": "@ivaigult: yes I assume here that no padding is involved, which is not guaranteed per standard, but most if not all compiler respect that. In fact, they just have no reason to add padding between  elements of same type."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1551286835, "last_edit_date": 1551286835, "creation_date": 1551281220, "answer_id": 54908906, "question_id": 54908185, "link": "https://stackoverflow.com/questions/54908185/contiguously-allocated-vs-sequentially-allocated/54908906#54908906", "title": "Contiguously allocated vs sequentially allocated", "body": "<p>The difference is that an array, two elements have to be contiguous, with no interleaving padding, while in a struct they are sequential, but padding <em>can</em> be present, in an implementation defined way.</p>\n\n<p>Now for your questions:</p>\n\n<blockquote>\n  <p>Are there any real world examples when the layout is different?</p>\n</blockquote>\n\n<p>AFAIK, not with common compilers. In addition, most have options by which a programmer can ask to add no padding in a struct.</p>\n\n<blockquote>\n  <p>Is is safe to cast such structure instance to the array?</p>\n</blockquote>\n\n<p>No because a struct does not declare an equivalent array, and a single variable can only be aliased to an array of size 1. So is <code>a</code> is a single variable, <code>*(&amp;a + 1)</code> is formally Undefined Behaviour.</p>\n\n<blockquote>\n  <p>Would it be safer with union?</p>\n</blockquote>\n\n<p>Yes, according of <a href=\"https://stackoverflow.com/a/48385026/3545273\">that other SO post</a> it can be done through an union. This is legal C:</p>\n\n<pre><code>union B {\n    struct {\n        struct A x0;\n        struct A x1;\n        struct A x2;\n    };\n    struct A x[3];\n};\n</code></pre>\n\n<p>Even if the standard does not guarantee it, common compiler never add padding between elements of same type, be the type simple or derived (struct). Same reason as for the first question.</p>\n"}], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 54908906, "answer_count": 1, "score": 2, "last_activity_date": 1551286835, "creation_date": 1551279167, "question_id": 54908185, "link": "https://stackoverflow.com/questions/54908185/contiguously-allocated-vs-sequentially-allocated", "title": "Contiguously allocated vs sequentially allocated", "body": "<p>The C11 standard section 6.2.5.20 defines array as:</p>\n\n<blockquote>\n  <p>An array type describes a contiguously allocated nonempty set of\n  objects with a particular member object type, called the element type.</p>\n</blockquote>\n\n<p>while struct is defined as:</p>\n\n<blockquote>\n  <p>A structure type describes a sequentially allocated nonempty set of\n  member objects (and, in certain circumstances, an incomplete array),\n  each of which has an optionally specified name and possibly distinct\n  type.</p>\n</blockquote>\n\n<p>The 6.7.2.1 section says that padding could be inserted between fileds:</p>\n\n<blockquote>\n  <p>Each non-bit-field member of a structure or union object is aligned in\n  an implementation- defined manner appropriate to its type.</p>\n  \n  <p>Within a structure object, the non-bit-field members and the units in\n  which bit-fields reside have addresses that increase in the order in\n  which they are declared. A pointer to a structure object, suitably\n  converted, points to its initial member (or if that member is a\n  bit-field, then to the unit in which it resides), and vice versa.\n  There may be unnamed padding within a structure object, but not at its\n  beginning.</p>\n</blockquote>\n\n<p>But does this all mean that the following objects could have different memory layouts?</p>\n\n<pre><code>struct A {\n    char x0;\n    short x1;\n};\n\nstruct B {\n    struct A x0;\n    struct A x1;\n    struct A x2;\n};\n\nassert(sizeof(struct B) == sizeof(struct A[3]));\n</code></pre>\n\n<p>I created this test script to check the memory layout for GCC:</p>\n\n<pre><code>import itertools\nimport subprocess\n\nsrc = \"\"\"\n#include \"assert.h\"\n\nstruct A {\n{fields}\n};\n\nstruct B {\n    struct A x0;\n    struct A x1;\n    struct A x2;\n};\n\nint main(int argc, char** argv) {\n    assert(sizeof(struct B) == sizeof(struct A[3]));\n    return 0;\n}\n\"\"\"\n\ndef main():\n    all_types = [\"char\", \"short\", \"int\", \"long long\"]\n\n    for types in itertools.product(all_types, repeat=3):\n        rendered = src.replace(\"{fields}\", \"\".join([\n            \"        {} x{};\\n\".format(t, i)\n            for i, t in enumerate(types)]))\n        with open(\"main.c\", \"w\") as f:\n            f.write(rendered)\n        subprocess.call([\"gcc\", \"main.c\"])\n        subprocess.call([\"./a.out\"])\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>But GCC <em>always</em> produces the same memory layout for the array and the structure. </p>\n\n<ul>\n<li>Are there any real world examples when the layout is different?</li>\n<li>Is is safe to cast such structure instance to the array?</li>\n<li>Would it be safer with union?</li>\n</ul>\n"}, {"tags": ["c", "embedded", "stm32"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1551276737, "post_id": 54907346, "comment_id": 96581818, "body": "There are physical things happening that are slower than your run-time clock speed.  The delay provides enough time for the value of <code>uart_data</code> to change before testing it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551277272, "post_id": 54907346, "comment_id": 96582172, "body": "You have race conditions here. You need to ensure that those variables cannot be accessed from two places at once. The delay makes the bugs surface far less frequently. See <a href=\"https://electronics.stackexchange.com/a/329961/6102\">this</a> for advise of how to write interrupts proper."}, {"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1551277298, "post_id": 54907346, "comment_id": 96582189, "body": "I don&#39;t understand. Why it doesn&#39;t change in the interrupt in the first place and also I sample it in a loop - if it didn&#39;t change the first time, why not the next time I take a sample? Also I didn&#39;t note that my clock is derived from MSI and is slowed down to around 4MHz to optimize consumption."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551277603, "post_id": 54907346, "comment_id": 96582408, "body": "When &quot;it does not work&quot; you can drop a breakpoint as <code>adc_transmit_reading</code> and see what manner of crap you got in <code>uart_data</code>. Make sure that interrupts freeze during debug break."}, {"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1551277693, "post_id": 54907346, "comment_id": 96582454, "body": "So I just need to write get() function where the ISR is implemented and use that function instead of reading directly the extern global variable? It makes sense, but it seems a little bit less efficient unfortunately.  In this case it doesn&#39;t matter, but is there any way to make my implementation work?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551277928, "post_id": 54907346, "comment_id": 96582586, "body": "You need to protect against race conditions and its best to keep that code inside the UART driver where it belongs, rather than to &quot;spaghetti outsource&quot; it to some unrelated part of the code. Your MCU is probably some 100 times faster than the UART, too, so the bottleneck is clocking in the data. Unrelated, you most likely have the option to DMA the incoming data, which is always a better solution than interrupts, even if it comes with other kinds of complexity."}, {"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1551277972, "post_id": 54907346, "comment_id": 96582618, "body": "Oh - I also didn&#39;t mention that when it doesn&#39;t work it didn&#39;t even go into the if() statement"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551278050, "post_id": 54907346, "comment_id": 96582664, "body": "When you disassemble it, does it generate code for the if statement at all? Otherwise you got the bug pointed out in the answer by Louis."}, {"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1551278502, "post_id": 54907346, "comment_id": 96582964, "body": "I also thought about DMA, but since I have one task and one task only and every three bytes can be a potential command, I decide to check on every incoming byte and figured out that it wouldn&#39;t be more efficient with DMA. Am I wrong?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551279262, "post_id": 54907346, "comment_id": 96583414, "body": "Depends on baudrate and how much work your CPU has to do overall. If it has nothing better to do, then sure you can have byte-wise UART interrupts. Interrupts are kind of the root of all evil though... but sometimes a necessary evil."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551278071, "post_id": 54907696, "comment_id": 96582680, "body": "This might be one of the problems indeed."}, {"owner": {"reputation": 423, "user_id": 2881888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e0fbc6a1dfaad72922f383a4917ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Caron", "link": "https://stackoverflow.com/users/2881888/louis-caron"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551278810, "post_id": 54907696, "comment_id": 96583154, "body": "The code has, indeed, a couple of other issues, with the uart_stack handling but this is not the scope of the question! ;-)"}, {"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1551279379, "post_id": 54907696, "comment_id": 96583496, "body": "Thank you a lot sir, you were right. Also If you have the time, I&#39;ll be really glad to know about the other issues of my code :)  I know it&#39;s not pretty what I&#39;ve done with uart_stack and uart_buff, but it seemed that it will not cause undefined behaviour or smt nasty"}, {"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1551281338, "post_id": 54907696, "comment_id": 96584767, "body": "Maybe I have to memset the first two bytes of uart_buff to 0 or smt to prevent error if I receive &quot;\\r\\n&quot; at the very beginning?"}], "tags": [], "owner": {"reputation": 423, "user_id": 2881888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e0fbc6a1dfaad72922f383a4917ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Caron", "link": "https://stackoverflow.com/users/2881888/louis-caron"}, "is_accepted": true, "score": 3, "last_activity_date": 1551277630, "creation_date": 1551277630, "answer_id": 54907696, "question_id": 54907346, "link": "https://stackoverflow.com/questions/54907346/why-cant-i-read-interrupt-flag-from-my-main-loop/54907696#54907696", "title": "Why can&#39;t I read interrupt flag from my main loop?", "body": "<p>The problem is that you have indicated that your <code>uart_data</code> points to volatile data.  But in your loop, you are testing the pointer and not the data.  </p>\n\n<p>So you must indicate that your pointer is volatile as well:</p>\n\n<pre><code>extern volatile uint8_t * volatile uart_data;\n</code></pre>\n\n<p>You can find more information in this post: <a href=\"https://stackoverflow.com/questions/9935190/why-is-a-point-to-volatile-pointer-like-volatile-int-p-useful\">Why is a point-to-volatile pointer, like &quot;volatile int * p&quot;, useful?</a></p>\n"}], "owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 54907696, "answer_count": 1, "score": 1, "last_activity_date": 1551280566, "creation_date": 1551276588, "last_edit_date": 1551280566, "question_id": 54907346, "link": "https://stackoverflow.com/questions/54907346/why-cant-i-read-interrupt-flag-from-my-main-loop", "title": "Why can&#39;t I read interrupt flag from my main loop?", "body": "<p>I'm writing code for stm32l011 MCU and it have to do one basic task for now - wait for a specific byte(predefined by me) from the UART and following \"\\r\\n\" or \"\\n\\r\" sequence. If it receives that, it set's a null pointer to the address of the predefined char, which is read and handled in the main loop.</p>\n\n<pre><code>    volatile uint8_t uart_buff[UART_BUFF_LEN] = {'\\0'};\n    volatile uint8_t *uart_data = NULL;\n    volatile uint8_t *uart_stack = uart_buff+2;\n\n    void USART2_IRQHandler(void){\n        if(LL_USART_IsActiveFlag_RXNE(USART2)){\n            *uart_stack = LL_USART_ReceiveData8(USART2);\n            user_uart_send_byte(*uart_stack);\n\n            //same as if(!(strcmp((uart_stack-1), \"\\r\\n\") || strcmp((uart_stack-1), \"\\n\\r\")))\n            if((*uart_stack == '\\r' || *uart_stack == '\\n') &amp;&amp; (*(uart_stack-1) == '\\r' || *(uart_stack-1) == '\\n'))\n            {\n                uart_data = uart_stack - 2;\n                uart_stack = uart_buff+2;\n            }\n\n            uart_stack++;\n        }\n    }\n</code></pre>\n\n<p>and main:</p>\n\n<pre><code>    extern volatile uint32_t systick_counter_ms;\n    extern volatile uint8_t *uart_data;\n\n    int main(void){\n\n        init();\n\n        while(1)\n        {\n            LL_GPIO_TogglePin(GPIOB, LL_GPIO_PIN_3);\n            //delay_ms(1); //without that it doesn't want to work\n            if(uart_data)\n            {\n                adc_transmit_reading(*uart_data);\n                uart_data = NULL;\n            }\n        }\n    }\n</code></pre>\n\n<p>I wrote the C program above and it didn't seem to work. But when I introduced delay in the main loop it just magically sprang to life. Why is that? Key things to note:\nThere's echo from the UART so I'm sure that it handles the interrupt properly in both cases, also I tried to remove optimizations of the compiler(which optimizes for size(Os)) by using volatile variables. Also the delay is made by while loop, which waits interrupt which increments variable every millisecond.</p>\n\n<p>My layman's guess is that because I'm only looping around that uart_data pointer, somehow the synchronization between the interrupt and main loop isn't happening.</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1551276320, "post_id": 54907222, "comment_id": 96581540, "body": "Try <code>unsigned long long</code> and with of a bit of luck that goes up to a maximum of <code>18446744073709551615</code>. And if that&#39;s not enough, you&#39;ll have to implement your own arbitrary precision multiplication or use an existing bignum library. If you want to know how high <code>unsigned long long</code> goes on your compiler, check <code>ULLONG_MAX</code> from <code>&lt;limits.h&gt;</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1551276466, "post_id": 54907222, "comment_id": 96581626, "body": "The factorial grows <i>very</i> quickly.  13! is already outside the range representable by a 32-bit unsigned integer.  You get only the 32 least-significant bits for larger inputs."}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1551276587, "post_id": 54907222, "comment_id": 96581714, "body": "Either use a long long or you can use a library which has unbounded ints if that is not enough for your purposes"}], "answers": [{"tags": [], "owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "is_accepted": false, "score": 0, "last_activity_date": 1551276931, "last_edit_date": 1551276931, "creation_date": 1551276611, "answer_id": 54907353, "question_id": 54907222, "link": "https://stackoverflow.com/questions/54907222/heres-a-program-to-find-the-factorial-of-a-number-why-am-i-getting-0-as-the-an/54907353#54907353", "title": "Here&#39;s a program to find the factorial of a number. Why am I getting 0 as the answer? Which datatype should I use instead?", "body": "<p>Your assumption <strong>The datatype I've used has a range of 0-4294967295.</strong> is not right. you define <code>ans</code> parameter as <code>unsigned int</code> which has range of <code>0-4294967295</code> but in your fact function, you are using int which has range of <code>-2,147,483,648 to 2,147,483,647</code>.</p>\n\n<p>So you should change yout code as this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nunsigned int fact(unsigned int n)\n{\n        unsigned int result;\n        if(n==0 || n==1)\n                result=1;\n        else\n                result=n*fact(n-1);\n        return result;\n}\nint main()\n{\n        unsigned int n,ans;\n        printf(\"Enter n:\");\n        scanf(\"%u\",&amp;n);\n        ans=fact(n);\n        printf(\"Factorial of %u:%u\",n,ans);\n}\n</code></pre>\n\n<p>You can also use <code>unsigned long long</code> instead of <code>unsigned int</code> which will support bigger numbers and is more suitable for factorial calculation.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nunsigned long long fact(unsigned int n)\n{\n        unsigned long long result;\n        if(n==0 || n==1)\n                result=1;\n        else\n                result=n*fact(n-1);\n        return result;\n}\nint main()\n{\n        unsigned int n;\n        unsigned long long ans;\n        printf(\"Enter n:\");\n        scanf(\"%u\",&amp;n);\n        ans=fact(n);\n        printf(\"Factorial of %u:%u\",n,ans);\n}\n</code></pre>\n\n<p>More reading on data types and their range: \n<a href=\"https://www.tutorialspoint.com/cprogramming/c_data_types.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cprogramming/c_data_types.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1551278276, "last_edit_date": 1551278276, "creation_date": 1551276664, "answer_id": 54907375, "question_id": 54907222, "link": "https://stackoverflow.com/questions/54907222/heres-a-program-to-find-the-factorial-of-a-number-why-am-i-getting-0-as-the-an/54907375#54907375", "title": "Here&#39;s a program to find the factorial of a number. Why am I getting 0 as the answer? Which datatype should I use instead?", "body": "<p><code>33!</code> is actually way out of the range of a 32 bit <code>int</code>, whether signed or unsigned.  <code>12!</code> has a value of 479001600, while <code>13!</code> has a value of <code>6227020800</code>, so you go out of range at <code>13!</code>.  </p>\n\n<p>Note also that <code>result</code> is defined as an <code>int</code> and you return an <code>int</code> from <code>fact</code>.  This means you end up with signed integer overflow which invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  This can be fixed by changing the type of both to <code>unsigned</code>, although you're still limited to <code>12!</code>.</p>\n\n<p>You can try using <code>unsigned long long</code> for your types instead.  That will get you up to <code>20!</code>.  If you want values larger than that, you need to use a bigint library such as GMP.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1551277042, "creation_date": 1551277042, "answer_id": 54907489, "question_id": 54907222, "link": "https://stackoverflow.com/questions/54907222/heres-a-program-to-find-the-factorial-of-a-number-why-am-i-getting-0-as-the-an/54907489#54907489", "title": "Here&#39;s a program to find the factorial of a number. Why am I getting 0 as the answer? Which datatype should I use instead?", "body": "<p><strong>The factorial grows very quickly</strong>. 13! is already outside the range representable by a 32-bit unsigned integer. Unsigned arithmetic returns the remainder when a result is not representable -- that is, you get only the least-significant bits of the true mathematical result.  You could go a bit higher by using a wider data type, but not much.  You need an arbitrary-precision arithmetic package and a lot of memory to go much further.</p>\n\n<p><strong>As for why the result you get for 34! is exactly zero</strong>, note that among the factors 1 * 2 * 3 * ... * 33 * 34 there are 17 that are multiples of two, 8 of which are also multiples of 4, 4 of which are also multiples of 8, two of which are multiples of 16, and one of which is 32.  That's a total of 32 2s in the prime factorization of the mathematical result, so the remainder modulo 2<sup>32</sup> is exactly zero.</p>\n"}, {"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1551629344, "post_id": 54907821, "comment_id": 96700976, "body": "My happiness is overflowing when I see your posts."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1551632279, "post_id": 54907821, "comment_id": 96701883, "body": "@SomberoChicken Alas underflow is a form of overflow."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1551278022, "creation_date": 1551278022, "answer_id": 54907821, "question_id": 54907222, "link": "https://stackoverflow.com/questions/54907222/heres-a-program-to-find-the-factorial-of-a-number-why-am-i-getting-0-as-the-an/54907821#54907821", "title": "Here&#39;s a program to find the factorial of a number. Why am I getting 0 as the answer? Which datatype should I use instead?", "body": "<p>You get 0 when you overflow your data types. Formally the behaviour on overflowing an <code>int</code> is <em>undefined</em>. If you switch <em>consistently</em> to <code>unsigned</code> types, then the overflow is such that the behaviour is consistent with arithmetic modulo 2 raised to the power of the number of bits in your <code>unsigned</code> type.</p>\n\n<p>Since a large factorial is a multiple of a power of 2, 0 will be attained for a surprisingly small input, as you observe here.</p>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 1418958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T1SIJ.png?s=128&g=1", "display_name": "Cas Dekkers", "link": "https://stackoverflow.com/users/1418958/cas-dekkers"}, "is_accepted": false, "score": 1, "last_activity_date": 1551282846, "last_edit_date": 1551282846, "creation_date": 1551281273, "answer_id": 54908924, "question_id": 54907222, "link": "https://stackoverflow.com/questions/54907222/heres-a-program-to-find-the-factorial-of-a-number-why-am-i-getting-0-as-the-an/54908924#54908924", "title": "Here&#39;s a program to find the factorial of a number. Why am I getting 0 as the answer? Which datatype should I use instead?", "body": "<p>An <code>unsigned int</code> has a range of <code>0</code> to <code>2^32-1</code>, or <code>2^32 = 4,294,967,296</code> different values. Assigning your <code>result</code> a value higher than <code>2^32-1 = 4,294,967,295</code> makes the value overflow. This simply means it loops back to <code>0</code>, after which it can increase up to <code>4,294,967,295</code> again.</p>\n\n<p>The first overflow happens when calculating <code>13!</code>, when we would expect the <code>result</code> value to be <code>13! = 6,227,020,800</code>. However, we did not take the overflow into account. The value of <code>result</code> will instead equal the remainder of the equation <code>13! % 2^32</code>, or <code>1,932,053,504</code>, because that's how much <code>result</code> increases after the last (and, in this case, only) loop back to <code>0</code>.</p>\n\n<p>Now, <code>33!</code> or <code>34!</code> represent values that are are unimaginably large, and make <code>result</code> overflow many times. We can calculate how many times <code>33!</code> causes an overflow simply by dividing it by <code>2^32</code>, resulting in around <code>2.02e27</code> overflows. However, your question isn't concerned with how many overflows happen, but with the value of the remainder after the last overflow. In this case, it equals <a href=\"https://www.wolframalpha.com/input/?i=33!%252%5E32\" rel=\"nofollow noreferrer\"><code>33! % 2^32 = 2,147,483,648</code></a>. We can do the same for <code>34</code>: <a href=\"https://www.wolframalpha.com/input/?i=34!%252%5E32\" rel=\"nofollow noreferrer\"><code>34! % 2^32 = 0</code></a>.</p>\n\n<p>What this means is that, coincidentally, <code>2^32</code> is a proper divisor of <code>34!</code>. Or, isn't this coincidental <a href=\"https://stackoverflow.com/a/54907489/1418958\">after all</a>?</p>\n\n<p><strong>Edit</strong>: like others have suggested, you should take a look at <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">the GMP Bignum library</a> with no limit in precision arithmetic except that of your machine.</p>\n"}], "owner": {"reputation": 245, "user_id": 8845766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8e7a1906931acac086bc70a6d4ad56?s=128&d=identicon&r=PG&f=1", "display_name": "U. Watt", "link": "https://stackoverflow.com/users/8845766/u-watt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 54907375, "answer_count": 5, "score": 1, "last_activity_date": 1551282846, "creation_date": 1551276170, "last_edit_date": 1551276459, "question_id": 54907222, "link": "https://stackoverflow.com/questions/54907222/heres-a-program-to-find-the-factorial-of-a-number-why-am-i-getting-0-as-the-an", "title": "Here&#39;s a program to find the factorial of a number. Why am I getting 0 as the answer? Which datatype should I use instead?", "body": "<p>I'm relatively new to C. I made this program to find the factorial of any number. Upon executing the program, when I provide 33 as the input - I get 2147483648 as the answer. If I provide 34, I get 0 as the answer.</p>\n\n<p>Getting to my question - Why did I get 0 as the answer? The datatype I've used has a range of 0-4294967295. Am I getting 0 cause this is outside the range of unsigned int? Which datatype should I use if I want to get a large number as the output? </p>\n\n<p>Compiler used - GCC 8.2.1 </p>\n\n<p>Here's the code - </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nint fact(unsigned int n)\n{\n        int result;\n        if(n==0 || n==1)\n                result=1;\n        else\n                result=n*fact(n-1);\n        return result;\n}\nint main()\n{\n        unsigned int n,ans;\n        printf(\"Enter n:\");\n        scanf(\"%u\",&amp;n);\n        ans=fact(n);\n        printf(\"Factorial of %u:%u\",n,ans);\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "random"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276484, "post_id": 54907170, "comment_id": 96581643, "body": "What are &quot;keys&quot; that you mention?"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276534, "post_id": 54907170, "comment_id": 96581681, "body": "It&#39;s an unsigned int. It could be any non-negative number. I use it as a seed for srand()"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276560, "post_id": 54907170, "comment_id": 96581701, "body": "How do you handle the case where all values from 0 to (im-&gt;height - 1) is already in the array?"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276637, "post_id": 54907170, "comment_id": 96581746, "body": "if visitedPixelsIndex == im-&gt;height . I should have named it visitedPixelsCounter"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276643, "post_id": 54907170, "comment_id": 96581752, "body": "So what do you mean by &quot;but at longer keys...&quot; ? The word &quot;longer&quot; seems strange for an unsigned int"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276697, "post_id": 54907170, "comment_id": 96581785, "body": "So it works fine for values like &lt;10. But after that it just gets stuck at that loop."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276701, "post_id": 54907170, "comment_id": 96581787, "body": "But there is no code like <code>if visitedPixelsIndex == im-&gt;height</code>?"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276814, "post_id": 54907170, "comment_id": 96581880, "body": "I&#39;m sorry about that. I removed the code quite a bit and accidentally removed that as well. I haven&#39;t slept in the past 30 hours trying to finish this assignment so my brain isn&#39;t functioning properly."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276827, "post_id": 54907170, "comment_id": 96581892, "body": "Hmm... so you are saying that, e.g. with <code>srand(8)</code> all is fine but with <code>srand(23765)</code> it will fail (with infinite loop)? That sounds strange - do you call <code>srand</code> more than once?"}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 1, "creation_date": 1551276859, "post_id": 54907170, "comment_id": 96581913, "body": "If all values from <code>0</code> to <code>im-&gt;height</code> are in your array there will be an infinite loop"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551276951, "post_id": 54907170, "comment_id": 96581958, "body": "OT but .... I would strongly recommend an ordinary <code>if</code> statement instead of <code>? :</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1551277107, "post_id": 54907170, "comment_id": 96582061, "body": "<code>visitedPixelsIndex == im-&gt;height</code> that is wrong! Should be <code>*visitedPixelsIndex == im-&gt;height</code>"}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551277186, "post_id": 54907170, "comment_id": 96582119, "body": "@4386427 It&#39;s always a shame when they don&#39;t show us the whole function to begin with"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1551277254, "post_id": 54907170, "comment_id": 96582163, "body": "I don&#39;t think all the values from 0 -&gt; im-&gt;height can be in the list. The message is merely 10 letters in my testing. I&#39;m converting each letter into 9 digit binary before encoding it into pixels. So at max I could have 10*9 out of 400 values/iterations.  I am calling srand twice but it is in two different functions so it is completely out of scope (I think)"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1551277376, "post_id": 54907170, "comment_id": 96582251, "body": "@MitchelPaulin This is pretty much the whole function. Everytime I post a full function I get negative ratings for not posting MVCE. :(  Still the same issue after changing it to *visitedPixelsIndex."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551277438, "post_id": 54907170, "comment_id": 96582295, "body": "Well, we can&#39;t help if you don&#39;t post more code. The best would be if you could post code that allowed us to reproduce the problem. It should be fairly easy to make a short <code>main</code> function with hard initialization of the variables."}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1551277494, "post_id": 54907170, "comment_id": 96582330, "body": "Don&#39;t have an array for visited pixels. This is bad as you&#39;re essentially throwing a dart a a board blindfolded to try to find an unvisited one which is extremely slow. Have an array of <i>unvisited</i> pixels, choose randomly from the list then remove the value from the list. This way every choice is <i>guaranteed</i> to return an unvisited pixel. Having loops which have the possibility to run infinitely is bad design"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1551277500, "post_id": 54907170, "comment_id": 96582332, "body": "Um... I&#39;ll have to post pretty much the whole code as this relies on encoding/decoding and that relies on getting the file, readinging through it, populating its values etc. Should I post it here?"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1551277571, "post_id": 54907170, "comment_id": 96582390, "body": "@MitchelPaulin Are you referring to Fisher-Yates Shuffle? I tried to implement that but I cannot do it :("}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1551277627, "post_id": 54907170, "comment_id": 96582424, "body": "It doesn&#39;t have to be some special shuffle. Just randomly swap pixel indexes for a few thousand iterations. And loop through the list"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1551277804, "post_id": 54907170, "comment_id": 96582516, "body": "Suggestion: rewrite your conditional operator expressions with simple <code>if</code>."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1551278049, "post_id": 54907170, "comment_id": 96582663, "body": "@pmg done. What&#39;s the beniefit for it? I have a lot of small if/else statements in my code so I did that to keep it short."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551278213, "post_id": 54907170, "comment_id": 96582768, "body": "Do <code>im-&gt;height</code> have the <b>same</b> value in every call of this function?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1551278238, "post_id": 54907170, "comment_id": 96582784, "body": "It was a suggestion. In your code, for me, an <code>if</code> is very very much easier to grasp than the conditional operator. I like to keep the expressions in the conditional operator as simple as possible (and definitely not full statements as in your code)."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551278519, "post_id": 54907170, "comment_id": 96582976, "body": "@4386427 Yes it does."}], "answers": [{"comments": [{"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1551281140, "post_id": 54908104, "comment_id": 96584633, "body": "I just tested it and you&#39;re right, it is reaching the index limit. I&#39;ll try to fix it. Thank a lot."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 1, "last_activity_date": 1551279766, "last_edit_date": 1551279766, "creation_date": 1551278953, "answer_id": 54908104, "question_id": 54907170, "link": "https://stackoverflow.com/questions/54907170/c-trying-to-fix-infinite-loop/54908104#54908104", "title": "C trying to fix infinite loop", "body": "<p>As far as I can see the code will generate an infinite loop when you insert the last free index into the array.</p>\n\n<p>Assume that:</p>\n\n<p>1) <code>im-&gt;height</code> is 500 so that valid index is in the range [0 .. 499]</p>\n\n<p>2) You have already inserted 499 values, i.e. <code>*visitedPixelsIndex</code> is 499</p>\n\n<p>So when the function is called this condition <code>*visitedPixelsIndex == im-&gt;height</code> will be false so you don't exit but continue on and you insert value number 500 in the array.</p>\n\n<p>Then you do <code>(*visitedPixelsIndex)++;</code> so that <code>*visitedPixelsIndex</code> becomes 500.</p>\n\n<p>After that you enter the <code>while</code> loop trying to find a new unused <code>index</code>. However - since you have already used all 500 valid index values, you'll never find an unused index. </p>\n\n<p>In other words - <strong>an infinite loop</strong></p>\n\n<p>Maybe you should do:</p>\n\n<pre><code>(*visitedPixelsIndex)++;\nif(*visitedPixelsIndex == im-&gt;height) {\n    perror(\"Cannot encode anymore: pixels limit reached\");\n    exit(1);\n}\n</code></pre>\n\n<p>I also think you should generate a new <code>index</code> <strong>before</strong> the <code>while</code> loop.</p>\n\n<p>However, in general I think your code would be more clear if you split the current function into two functions. Like</p>\n\n<pre><code>int isPresent(int index, int *visitedPixels, int N) \n{\n    for(int i = 0; i&lt;N; ++i)\n    {\n        if (index == visitedPixels[i]) return 1;\n    }\n    return 0;\n}\n\nint getNewIndex(PPM *im, int index, int *visitedPixels, int *visitedPixelsIndex) \n{\n    visitedPixels[*visitedPixelsIndex] = index;\n\n    (*visitedPixelsIndex)++;\n\n    if (*visitedPixelsIndex == im-&gt;height) {\n        perror(\"Cannot encode anymore: pixels limit reached\");\n        exit(1);\n    }\n\n    do\n    {\n        index = rand() % im-&gt;height;\n    } while(isPresent(index, visitedPixels, *visitedPixelsIndex));\n\n    return index;\n}\n</code></pre>\n"}], "owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 54908104, "answer_count": 1, "score": 0, "last_activity_date": 1551279766, "creation_date": 1551275985, "last_edit_date": 1551278103, "question_id": 54907170, "link": "https://stackoverflow.com/questions/54907170/c-trying-to-fix-infinite-loop", "title": "C trying to fix infinite loop", "body": "<p>I have a function that gets an index value, puts it in an array. Then generates a new new random index using rand + srand(<strong>key</strong>). And it checks if the newly generated index is in array already, it will will keep on generating new index and checking until a unique value is generated.</p>\n\n<p>The problem is that it works fine for small <strong>keys</strong>, but at longer keys it gets stuck in an infinite loop and can never find a unique value. Here's my code:</p>\n\n<pre><code>int getNewIndex(PPM *im, int index, int *visitedPixels, int *visitedPixelsIndex) {\n\n    int i = 0;\n    if(*visitedPixelsIndex == im-&gt;height) {\n        perror(\"Cannot encode anymore: pixels limit reached\");\n        exit(1);\n    }\n\n    visitedPixels[*visitedPixelsIndex] = index;\n    (*visitedPixelsIndex)++;\n    // If index is already in the list, generate a new number and check again.\n    while (i &lt; *visitedPixelsIndex) {\n        if(index == visitedPixels[i]) {\n            index = rand() % im-&gt;height;\n            i = 0;\n        } else {\n            i++;\n        }\n    }\n\n    return index;\n}\n</code></pre>\n\n<p>EDIT: <code>im-&gt;height</code> which is the image height is about 400-600 in average.</p>\n"}, {"tags": ["c", "unix", "linker"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1551274454, "post_id": 54906594, "comment_id": 96580386, "body": "Are you asking what the difference is between dynamic and static linking ? Or are you asking what gcc does by default ? Or something else ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1551275705, "post_id": 54906594, "comment_id": 96581157, "body": "None of this is standardized. I started writing an answer but it doesn&#39;t make much sense from a generic point-of-view. You need to narrow this down to a specific system. Linux?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551276104, "post_id": 54906594, "comment_id": 96581406, "body": "Short (oversimplified) answer: static linking =&gt; printf code is copied into the executable, dynamic linking =&gt; printf code is not copied into the executable and printf code is in a common library"}, {"owner": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551276440, "post_id": 54906594, "comment_id": 96581614, "body": "@Jabberwocky assume i have done a dynamic linking, If I open up the executable file and turn in into ascii format, will I see &quot;printf()&quot; in it or &quot;write()&quot;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551278368, "post_id": 54906594, "comment_id": 96582868, "body": "@Alex that&#39;s another (longer) story. Short (again oversimplified answer): it&#39;s actually the other way round: if you have static linking, you wont see any symbols (C is a compiled language) even if the <code>printf</code> code <i>is</i> included. .With dynamic linking the symbol name of linked function is normally included, but that is platform dependent. Read this: <a href=\"https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work\" title=\"how does the compilation linking process work\">stackoverflow.com/questions/6264249/&hellip;</a>. I think John Bollinger&#39;s answer below is good"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551278608, "post_id": 54906594, "comment_id": 96583041, "body": "Other potentially interesting links: <a href=\"https://stackoverflow.com/questions/1993390/static-linking-vs-dynamic-linking\" title=\"static linking vs dynamic linking\">stackoverflow.com/questions/1993390/&hellip;</a>, <a href=\"http://cs-fundamentals.com/tech-interview/c/difference-between-static-and-dynamic-linking.php\" rel=\"nofollow noreferrer\">cs-fundamentals.com/tech-interview/c/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "edited": false, "score": 0, "creation_date": 1551278646, "post_id": 54907916, "comment_id": 96583072, "body": "Thanks, still need to clear this, assume i have done a dynamic linking, If I open up the executable file and turn in into ascii format, will I see &quot;printf()&quot; in it or &quot;write()&quot;?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "edited": false, "score": 1, "creation_date": 1551278822, "post_id": 54907916, "comment_id": 96583160, "body": "@Alex, In a dynamically-linked Linux executable that calls the C standard library&#39;s <code>printf()</code> function, the compiled binary will (probably) contain the string &quot;printf&quot; (no parentheses).  It would not necessarily contain the string &quot;write&quot; -- certainly not because of the <code>printf()</code> call.  In a statically-linked binary with debug information stripped, you would be unlikely to see either."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1551279048, "post_id": 54907916, "comment_id": 96583286, "body": "Note that just because a program calls <code>printf</code> does not mean its assembly code will contain \u201cprintf\u201d. Compilers may optimize some calls, so that <code>printf</code> is not actually called."}, {"owner": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "edited": false, "score": 0, "creation_date": 1551279098, "post_id": 54907916, "comment_id": 96583323, "body": "So the translation between printf and write and the final syscall all happens during runtime, so my code (when compiled dynamically) is pretty much useless without the c runtime"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "edited": false, "score": 0, "creation_date": 1551279275, "post_id": 54907916, "comment_id": 96583424, "body": "Yes, @Alex, see what I already wrote in response to your question (3).  But I emphasize that on a typical Unix or Linux system, <i>everything</i> is dynamically linked against the C library, so the C dynamic library being unavailable is probably not a situation you realistically need to consider.  A bigger concern, if you&#39;re building a program that will run on a different machine, is that the runtime machine&#39;s C library will be incompatible with your program in some way (too old, for example).  Accounting for problems of that sort is a reason for static linking."}, {"owner": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "edited": false, "score": 0, "creation_date": 1551279386, "post_id": 54907916, "comment_id": 96583503, "body": "I&#39;m practicing writing a <code>hello world</code> kernel, using OsDev wiki, this is where C lib doesn&#39;t exist. So trying to put this all together in my head."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "edited": false, "score": 0, "creation_date": 1551279559, "post_id": 54907916, "comment_id": 96583615, "body": "Well you should have said so, @Alex.  If you&#39;re writing a kernel, then you simply cannot rely on the C standard library functions <i>at all</i>.  If you&#39;re using GCC for this, then you should be compiling with the <a href=\"https://stackoverflow.com/q/17692428/2402272\"><code>-ffreestanding</code></a> option, which will avoid linking the C library, among other things."}, {"owner": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "edited": false, "score": 0, "creation_date": 1551279671, "post_id": 54907916, "comment_id": 96583688, "body": "That right, it was actually mentioned in the wiki. But I still wanted to understand this whole linking process a bit better in Unix vs outside of an OS."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1551278360, "creation_date": 1551278360, "answer_id": 54907916, "question_id": 54906594, "link": "https://stackoverflow.com/questions/54906594/does-a-linker-copy-the-content-of-a-function-or-simply-makes-a-link-to-it/54907916#54907916", "title": "Does a linker copy the content of a function or simply makes a link to it", "body": "<blockquote>\n  <ol>\n  <li>When doing a normal compile with <code>gcc test.c</code>, does the linker make a dynamic link to <code>printf</code> or a static link?</li>\n  </ol>\n</blockquote>\n\n<p>It depends.  Given that specific compilation command, if a dynamic version of the C library is available, and if GCC is built to use it (both of which are highly likely), then GCC will perform a dynamic link.  If only a static version of the C library is available, or if GCC is built or configured to link statically by default, then a static link will be performed.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><code>printf</code> ultimately makes a <code>write()</code> system call. Is the linker copying the C lib defined <code>printf</code> over to the final executable (which\n  will end up calling <code>write()</code> at runtime) or is it copying <code>write()</code>\n  over in the final executable directly.</li>\n  </ol>\n</blockquote>\n\n<p>If GCC is performing a static link then it will copy all functions directly or indirectly required by the program, and maybe others, into the final binary.  I'm uncertain about the GNU linker in particular, but some linkers will include the whole target library in the final binary.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>If I compile my code and then uninstall the C lib will my code still run? since <code>printf</code> isn't defined anywhere anymore.</li>\n  </ol>\n</blockquote>\n\n<p>If you statically link the C library into your program, then removing the C library afterward will not (directly) prevent your program running.  But depending on the details, it might prevent <em>everything else</em> from running, including the GUI, your other applications, and even the shell, thus mooting the question.</p>\n\n<p>Statically linking <em>all</em> required libraries is a reasonable technique for minimizing the runtime dependencies of your binaries, which can improve compatibility with systems differing from the build environment.  That does tend to produce <em>much</em> larger binaries, however.  In any case, unless you build every program that way, removing the libraries after the fact is not usually a viable alternative.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1551278829, "creation_date": 1551278829, "answer_id": 54908055, "question_id": 54906594, "link": "https://stackoverflow.com/questions/54906594/does-a-linker-copy-the-content-of-a-function-or-simply-makes-a-link-to-it/54908055#54908055", "title": "Does a linker copy the content of a function or simply makes a link to it", "body": "<p>First, some background. On Unix systems (all that I know of) C runtime contains both standard C functions implementation and so-called <em>glue</em> code (required to call low-level OS functions from C programs).</p>\n\n<p>In your example, <code>printf()</code> is a C runtime function, and <code>write()</code> is a <em>glue</em> interface to <code>write</code> syscall. Assuming we are talking about linux, both would live in glibc library.</p>\n\n<p>When you link your program, by default gcc linker will first try to link to glibc dynamically (using .so). This can be changed, by using -static argument to the linker - it will force static linking of glibc, more can be found here: <a href=\"https://stackoverflow.com/questions/14567689/static-linking-of-glibc\">Static linking of Glibc</a></p>\n\n<p>You can check the end result by issuing <code>ldd &lt;path to your executable&gt;</code> - this will show you all the .so library requested by the linker.</p>\n"}], "owner": {"reputation": 31, "user_id": 11125217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fd8a6101d847f41a559e7b55724fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11125217/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1551279233, "creation_date": 1551274044, "last_edit_date": 1551279233, "question_id": 54906594, "link": "https://stackoverflow.com/questions/54906594/does-a-linker-copy-the-content-of-a-function-or-simply-makes-a-link-to-it", "title": "Does a linker copy the content of a function or simply makes a link to it", "body": "<p>Assume I have the fowling C code, and I'm compiling it on a linux machine with gcc.</p>\n\n<p>test.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    printf(\"hi\\n\"); \n    return 0;\n}\n</code></pre>\n\n<p>I know that <code>stdio.h</code> defines <code>printf</code> and body of printf exists within the <code>C library</code> in binary format.</p>\n\n<p>Here are my questions:</p>\n\n<ol>\n<li><p>When doing a normal compile with <code>gcc test.c</code>, does the linker make a dynamic link to <code>printf</code> or a static link?</p></li>\n<li><p>printf ultimately makes a <code>write()</code> system call. Is the linker copying the C lib defined <code>printf</code> over to the final executable (which will end up calling write() at runtime) or is it copying <code>write()</code> over in the final executable directly.</p></li>\n</ol>\n\n<p>or in another words:\n If I open up the executable file and turn in into ascii format, will I see \"printf()\" in it or \"write()\"?</p>\n\n<ol start=\"3\">\n<li>If I compile my code and then uninstall the <code>C lib</code> will my code still run? since <code>printf</code> isn't defined anywhere anymore.</li>\n</ol>\n"}, {"tags": ["c", "binary"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1551273289, "post_id": 54906339, "comment_id": 96579706, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1551273350, "post_id": 54906339, "comment_id": 96579743, "body": "<code>binary[i + 1]</code> will access <code>binary[30]</code> in the last iteration leading to undefined behavior since the valid locations are <code>0 ... 29</code>"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1551273448, "post_id": 54906339, "comment_id": 96579817, "body": "<code>for (unsigned int i = 20; i &gt;= 0; i--) {</code> those loops are wrong. Since it&#39;s <code>unsigned</code>, <code>i &gt;= 0</code> will never be false, so <code>i</code> is just going to roll over to 4.2 billion when decreasing at <code>0</code>, causing undefined behavior on the next <code>sum[i]</code>."}, {"owner": {"reputation": 21, "user_id": 10960150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee4d57f87efe06b105c09da39911278e?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Altieri", "link": "https://stackoverflow.com/users/10960150/marco-altieri"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1551273768, "post_id": 54906339, "comment_id": 96579990, "body": "@Blaze Thank you! Just had to remove the unsigned and the code works."}], "owner": {"reputation": 21, "user_id": 10960150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee4d57f87efe06b105c09da39911278e?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Altieri", "link": "https://stackoverflow.com/users/10960150/marco-altieri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1551279600, "creation_date": 1551273197, "question_id": 54906339, "link": "https://stackoverflow.com/questions/54906339/binary-addition-in-c-why-does-run-time-error-occur", "title": "Binary addition in c, why does run time error occur?", "body": "<p>i'm trying to write a code which can convert 2 decimal numbers 0 to 1 into binary, then adding them and printing the binary values for the 2 initial numbers AND the final sum. It compiles with no problems however when I run it crashes right after it converts and prints num1 and num2 (the initial numbers), I can't seem to find the problem. \nthe general formula for binary addition is:</p>\n\n<p>*ith bit of sum = ith bit of binary1 + ith bit of binary2 + carry factor (0 or 1)</p>\n\n<p>if sum > 1, subtract 2 and add 1 to the next operation (which is the carry factor i mentions earlier)</p>\n\n<p>Below is the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// Converting decimal number to a binary number\nvoid convertDecToBin(double num, int len, int binary[]) {\n\n    // this function STORES conversion result in binary[]\n\n    double tmp = num;\n    binary[0] = 0;\n    for (int i = 0; i &lt; len; i++) {\n        tmp *= 2;\n        binary[i + 1] = tmp &gt;= 1;\n        if (tmp &gt;= 1) {\n            tmp -= 1;    \n        }\n    }\n\n}\n\n\n// Binary number addition\nvoid addTwoBinary(int binary1[], int binary2[], int sum[]) {\n\n    int tmp;\n    int carry;\n\n    for (unsigned int i = 20; i &gt;= 0; i--) {\n        if (i == 20 || tmp &lt;= 1) {\n            carry = 0;\n        }\n        else if (tmp &gt; 1) {\n            carry = 1;\n        }\n        sum[i] = binary1[i] + binary2[i] + carry;\n        tmp = sum[i];\n        if (sum[i] &gt; 1) {\n            sum[i]-=2;\n        }\n    }\n}\n\n//Printing the numbers\nvoid PrintBinary(int binary[], int len) {\n    for (unsigned int i = 0; i &lt; len; i++) {\n            printf(\"%d\", binary[i]);\n\n    }\n}\n\nint main(void) {\n\n    double num1, num2;\n    int binary1[30], binary2[30], sum[30];\n\n    scanf(\"%lf\", &amp;num1);\n    scanf(\"%lf\", &amp;num2);\n\n    convertDecToBin(num1, 30, binary1);\n    convertDecToBin(num2, 30, binary2);\n\n    printf(\"num1 is \");\n    PrintBinary(binary1, 21);\n    printf(\"\\nnum2 is \");\n    PrintBinary(binary2, 21);\n\n    addTwoBinary(binary1, binary2, sum);\n\n    printf(\"\\nsum is \");\n    PrintBinary(sum, 21);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opencl"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 2, "creation_date": 1551272507, "post_id": 54906046, "comment_id": 96579243, "body": "This question makes no sense. Your CUDA code is using C++ language features (like member functions in classes). OpenCL is C99 based. There are no classes and structures cannot have member functions. There is no &quot;translation&quot; for insoluble problems like this"}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1551273408, "post_id": 54906046, "comment_id": 96579792, "body": "OpenCL does support limited C++ features if it is AMD GPU with high enough version support. But it is needed to build those objects with a kernel and send construction data through arrays-only(kernel parameters). Maybe only Sycl can share host object definitions with a GPU."}], "owner": {"reputation": 39, "user_id": 10085006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc15bdeca4be51b688f883ad3dea745a?s=128&d=identicon&r=PG&f=1", "display_name": "Mstislaw", "link": "https://stackoverflow.com/users/10085006/mstislaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551758692, "creation_date": 1551272204, "last_edit_date": 1551758692, "question_id": 54906046, "link": "https://stackoverflow.com/questions/54906046/how-to-translate-particle-rendering-from-cuda-code-to-opencl-kernels-if-header-f", "title": "How to translate particle rendering from CUDA code to OpenCL kernels if header files for kernels can&#39;t have function qualifiers in them?", "body": "<p>I am trying to take apart a simple particle collision OpenGL programm in order to make it use OpenCL 2.0 instead of CUDA for GPU calculations. However, my lack of experience with OpenCL ended up leaving me stuck on distribution of memory between host and kernel, apparently quite different here from what I know about CUDA.</p>\n\n<p>Code fragment below is used in my <code>renderScene()</code> function now located in <code>main.cu</code></p>\n\n<pre><code>  glColor3f(0.2f, 0.3f, 0.5f);\n  if (g_numParticles &gt; 0)\n  {\n    int blockSize = 32;\n    int gridSize = 1000;\n    int numElemsPerThread = (g_numParticles + blockSize * gridSize - 1) / (blockSize * gridSize);\n\n    cudaMemcpy(g_particlesGPU, g_particles, g_numParticles * sizeof(Particle), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_timesGPU, g_times, g_numParticles * sizeof(float), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_normalsGPU, normals, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_centersGPU, centers, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_tang1GPU, tang1, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_tang2GPU, tang2, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_wGPU, w, g_m * sizeof(float), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_hGPU, h, g_m * sizeof(float), cudaMemcpyHostToDevice);\n\n\n    float4* positions;\n    cudaGraphicsMapResources(1, &amp;g_verticesCuda, 0);\n    size_t num_bytes;\n    cudaGraphicsResourceGetMappedPointer((void**)&amp;positions, &amp;num_bytes, g_verticesCuda);\n\n    moveAndDrawParticles&lt;&lt;&lt;gridSize, blockSize&gt;&gt;&gt;(g_numParticles, g_particlesGPU, g_timesGPU, g_m, g_normalsGPU, g_centersGPU, g_tang1GPU, g_tang2GPU, g_wGPU, g_hGPU, t, positions, numElemsPerThread);\n    //std::cout &lt;&lt; cudaGetLastError() &lt;&lt; std::endl;\n\n    cudaDeviceSynchronize();\n\n    cudaGraphicsUnmapResources(1, &amp;g_verticesCuda, 0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, g_vertices);\n    glVertexPointer(3, GL_FLOAT, 16, 0);\n    glEnableClientState(GL_VERTEX_ARRAY);\n    glDrawArrays(GL_POINTS, 0, g_numParticles);\n    glDisableClientState(GL_VERTEX_ARRAY);\n\n    cudaMemcpy(g_particles, g_particlesGPU, g_numParticles * sizeof(Particle), cudaMemcpyDeviceToHost);\n    cudaMemcpy(g_times, g_timesGPU, g_numParticles * sizeof(float), cudaMemcpyDeviceToHost);\n\n    for (int i = 0; i &lt; g_numParticles; ++i)\n    {\n      if (g_times[i] - t &lt; 0)\n      {\n        g_particles[i] = g_particles[g_numParticles - 1];\n        g_times[i] = g_times[g_numParticles - 1];\n        --g_numParticles;\n        --i;\n      }\n    }\n  }\n</code></pre>\n\n<p>As you can see, here I copy particle information on CUDA device, run <code>moveAndDrawParticles</code> kernel function, synchronize and copy back to host. Translation of this part seems manageable enough: slap some boilerplate code from documentation to initialize OpenCL with all the necessary buffers, replace cudaMemcpy with <code>clEnqueueRead(Write)Buffer()</code>, swap <code>moveAndDrawParticles()</code> for a dedicated <code>kernel.cl</code> that will be compiled using my OCL SDK. </p>\n\n<p>However, the latest turns out to be the point where problems make themselves visible.\nBesides <code>main.cu</code>, I use only two files - <code>particle.cu</code> and its header, <code>particle.h</code>, which you can see below</p>\n\n<pre><code>#include &lt;GL/glew.h&gt;\nstruct Point\n{\n  float x;\n  float y;\n  float z;\n  CUDA_CALLABLE Point(float _x, float _y, float _z) : x(_x), y(_y), z(_z) {}\n};\nstruct Particle\n{\n  Point pos;\n  Point v;\n  CUDA_CALLABLE Particle(Point _pos, Point _v) : pos(_pos), v(_v) {}\n};\n__global__ void moveAndDrawParticles(int n, Particle *particles, float *g_times, int m, const Point *normals, const Point *centers, const Point *tang1, const Point *tang2,\n  const float *w, const float *h, float dt, float4 *positions, int numElemsPerThread);\n</code></pre>\n\n<p>Both Point and Particle structures implemented in particle.cu are used in the host-based part of the main.cu before anything is written to the GPUs. What is more, <code>CUDA_CALLABLE</code> here stands for <code>__host__ __device__</code> and OpenCL has no similar qualifiers.\nThe last problem here is in the <code>moveAndDrawParticles()</code> function - if I turn particle.cu file into OpenCL kernel, it will be necessary to preface every input variable with an appropriate qualifier, which appears impossible to do in the header file - or, for that matter, anywhere outside of kernels themselves. </p>\n\n<p>I would be thankful for any help in clearing up these translation issues, and any pointers to errors in my reading of OpenCL documentation would also be appreciated. As the actual rendering code is quite verbose by necessity, I've omitted plenty of it in hopes that above snippets will be enough for a reasonable impression, if not a readily runnable programm.</p>\n"}, {"tags": ["c", "constants", "variable-length-array"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551269764, "post_id": 54905198, "comment_id": 96577576, "body": "You cannot have static or global VLAs"}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551269815, "post_id": 54905198, "comment_id": 96577604, "body": "@Jabberwocky Why is the second case a VLA, but first one isn&#39;t?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551269871, "post_id": 54905198, "comment_id": 96577642, "body": "Because <code>NUM_IDS</code> is a compile time constant. <code>nr_names</code> is not"}, {"owner": {"reputation": 69870, "user_id": 457352, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71fae1115a09663bed6c685c523cb0f0?s=128&d=identicon&r=PG", "display_name": "Benoit", "link": "https://stackoverflow.com/users/457352/benoit"}, "edited": false, "score": 0, "creation_date": 1551270036, "post_id": 54905198, "comment_id": 96577742, "body": "This is why <code>constexpr</code> was introduced in C++11."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1551270043, "post_id": 54905198, "comment_id": 96577746, "body": "<code>nr_names</code> is not known until run-time.  <code>static char* const names[nr_names]</code> needs an array size at compile time.  What value did you want <code>nr_names</code> to have at compile time?"}, {"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1551270050, "post_id": 54905198, "comment_id": 96577752, "body": "I recommend you take a look at <a href=\"http://web.cse.ohio-state.edu/~reeves.92/CSE2421au12/SlidesDay20.pdf\" rel=\"nofollow noreferrer\">this</a>, maybe can help you understand better"}], "answers": [{"comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1551270067, "post_id": 54905324, "comment_id": 96577760, "body": "Well, if you don&#39;t want to change the pointers, it makes sense to have the <code>const</code> at both places. So it&#39;s not necessarily wrong, it&#39;s just that the other <code>const</code> is missing."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1551270244, "post_id": 54905324, "comment_id": 96577868, "body": "&quot;either way the char needs to be const:&quot; --&gt; No. That is not needed here."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1551270314, "post_id": 54905324, "comment_id": 96577911, "body": "Oh wow, for some reason I though this was C++. You&#39;re right, it&#39;s not needed. I&#39;ll fix the answer."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 3, "last_activity_date": 1551270503, "last_edit_date": 1551270503, "creation_date": 1551269876, "answer_id": 54905324, "question_id": 54905198, "link": "https://stackoverflow.com/questions/54905198/array-size-of-enum-length-gives-compilation-error/54905324#54905324", "title": "Array size of enum length gives compilation error", "body": "<p><code>static char* const names[nr_names]</code> is a VLA because <code>nr_names</code> isn't a constant expression, but a (non-const) <code>int</code>. Sure, in this short example it's always equal to <code>NUM_IDS</code>, but you still can't do that.</p>\n\n<hr>\n\n<p>On an unrelated side note, it is recommended that the <code>char</code> is defined as <code>const</code>, as modifying it won't work because it's part of the program's binary (in C++ it wouldn't let you have it non-const):</p>\n\n<pre><code>static const char* const names[NUM_IDS] = { \"name X\" , \"name Y\" };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1551276880, "last_edit_date": 1551276880, "creation_date": 1551271677, "answer_id": 54905877, "question_id": 54905198, "link": "https://stackoverflow.com/questions/54905198/array-size-of-enum-length-gives-compilation-error/54905877#54905877", "title": "Array size of enum length gives compilation error", "body": "<p>The problem is that VLAs are not allowed to have static storage duration</p>\n\n<p>Quoting from ISO 9899 6.7.5.2 Array declarators</p>\n\n<blockquote>\n  <p>If an identifier is declared to be an object with static storage\n  duration, it shall not have a variable length array type.</p>\n</blockquote>\n\n<p>So, you are not allowed to declare a static VLA in general.  Because <code>nr_names</code> is not constant, you are not allowed to use static in your second code.</p>\n\n<p>The first code is correct, as <code>NUM_IDS</code> is constant expression.</p>\n\n<p>Other problem with your second code is that a VLA cannot be initialized. </p>\n\n<p>I quote from ISO 9899 6.7.8 Initialization</p>\n\n<blockquote>\n  <p>The type of the entity to be initialized shall be an array of unknown\n  size or an object type that is not a variable length array type</p>\n</blockquote>\n"}], "owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 54905324, "answer_count": 2, "score": 1, "last_activity_date": 1569398754, "creation_date": 1551269496, "last_edit_date": 1569398754, "question_id": 54905198, "link": "https://stackoverflow.com/questions/54905198/array-size-of-enum-length-gives-compilation-error", "title": "Array size of enum length gives compilation error", "body": "<p>Have a look at the code below,</p>\n\n<p>This code compiles fine:</p>\n\n<pre><code>enum ids {\n    X,\n    Y,\n    NUM_IDS,\n}\n\nvoid some_func(void)\n{\n    static char* const names[NUM_IDS] = { \"name X\" , \"name Y\"};\n}\n</code></pre>\n\n<p>However this code doesn't compile: \n<em>error: storage size of 'names' isn't constant</em></p>\n\n<pre><code>enum ids {\n    X,\n    Y,\n    NUM_IDS,\n}\n\nvoid some_func(void)\n{\n    int nr_names = NUM_IDS;\n    static char* const names[nr_names] = { \"name X\" , \"name Y\"};\n}\n</code></pre>\n\n<p>I think I misunderstood the meaning of a constant expression. Is it the case that in second way it is becoming a VLA which is not present in C90? Somebody please clarify.</p>\n"}, {"tags": ["c", "cmake", "clion", "lzma", "xz"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551269513, "post_id": 54905153, "comment_id": 96577442, "body": "For the first example, you need to <i>link</i> with the actual library file. With CMake you do that with <a href=\"https://cmake.org/cmake/help/latest/command/target_link_libraries.html\" rel=\"nofollow noreferrer\"><code>target_link_libraries</code></a>."}, {"owner": {"reputation": 35, "user_id": 11119050, "user_type": "registered", "profile_image": "https://graph.facebook.com/1460460454091168/picture?type=large", "display_name": "Nguy\u1ec5n Thu Ph\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/11119050/nguy%e1%bb%85n-thu-ph%c6%b0%c6%a1ng"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551270121, "post_id": 54905153, "comment_id": 96577791, "body": "Again, not familiar with Cmake, but if I want to use target_link_library, am I need to ADD_LIBRARY first? And If I do that, I need to know all the files in the library? How can I know that?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551271038, "post_id": 54905153, "comment_id": 96578331, "body": "You can use a full path to an on-disk library if you want. As in <code>target_link_libraries(YourExecutableTarget &quot;C:\\\\Path\\\\To\\\\library.lib&quot;)</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551271271, "post_id": 54905153, "comment_id": 96578468, "body": "Also, <a href=\"https://cmake.org/cmake/help/latest/module/FindLibLZMA.html\" rel=\"nofollow noreferrer\"><code>find_package(LibLZMA REQUIRED)</code></a> should set <code>LIBLZMA_LIBRARIES</code> that you can pass to <code>target_link_libraries</code>. As in <code>target_link_libraries(YourExecutableTarget ${LIBLZMA_LIBRARIES})</code>. Or better yet use the imported target <code>LibLZMA::LibLZMA</code> (as in <code>target_link_libraries(YourExecutableTarget LibLZMA::LibLZMA)</code>)"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1551271464, "post_id": 54905153, "comment_id": 96578585, "body": "As only the second variant allows you to build the program successfully, I would suggest to stay on it and provide more details about the error. Start with the exact error message and the files location (executable, libraries)."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 11119050, "user_type": "registered", "profile_image": "https://graph.facebook.com/1460460454091168/picture?type=large", "display_name": "Nguy\u1ec5n Thu Ph\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/11119050/nguy%e1%bb%85n-thu-ph%c6%b0%c6%a1ng"}, "is_accepted": false, "score": 1, "last_activity_date": 1551277444, "creation_date": 1551277444, "answer_id": 54907627, "question_id": 54905153, "link": "https://stackoverflow.com/questions/54905153/a-non-painful-way-to-compile-lzma-library-on-windows-with-cmake-clion/54907627#54907627", "title": "A non-painful way to compile lzma library on Windows with Cmake/CLion?", "body": "<p>Thank you <a href=\"https://stackoverflow.com/users/440558/some-programmer-dude\">Some programmer dude</a>.</p>\n\n<p>For anyone happen to google this, in order to make Xz Utils (the method 4 I tried) to work on Cmake with Clion, I am being very 101 here for any newbie like me now:</p>\n\n<p>1) Create a folder named Cmake in your project source folder. </p>\n\n<p>2) Put the file <a href=\"https://github.com/Kitware/CMake/blob/master/Modules/FindLibLZMA.cmake\" rel=\"nofollow noreferrer\">FindLibLZMA.Cmake</a> into that folder. </p>\n\n<p>3) Add these lines to your CMakeList.txt</p>\n\n<pre><code>set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} \"${PROJECT_SOURCE_DIR}/Cmake\")\nfind_package(LibLZMA REQUIRED)\ninclude_directories(${LIBLZMA_INCLUDE_DIRS})\ntarget_link_libraries(DukasCompiler ${LIBLZMA_LIBRARIES})\n</code></pre>\n\n<p>4) Open the FindLibLZMA.Cmake, and at the beginning, add</p>\n\n<pre><code>set(LIBLZMA_INCLUDE_DIR \"LINK\")\n</code></pre>\n\n<p>with \"LINK\" is the link to the include folder that you have downloaded from <a href=\"https://tukaani.org/xz/\" rel=\"nofollow noreferrer\">XZ Utils</a> for Windows.</p>\n\n<p>And you are good to go.</p>\n\n<p>THAT BEING SAID:  lzma_stream_decoder only accept .xz file, not .lzma file. So yeah, I am back to square one.</p>\n"}, {"tags": [], "owner": {"reputation": 1149, "user_id": 6743700, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118316188179293/picture?type=large", "display_name": "Zerte", "link": "https://stackoverflow.com/users/6743700/zerte"}, "is_accepted": false, "score": 0, "last_activity_date": 1551435391, "last_edit_date": 1551435391, "creation_date": 1551432487, "answer_id": 54941593, "question_id": 54905153, "link": "https://stackoverflow.com/questions/54905153/a-non-painful-way-to-compile-lzma-library-on-windows-with-cmake-clion/54941593#54941593", "title": "A non-painful way to compile lzma library on Windows with Cmake/CLion?", "body": "<p>If you are not too afraid by calling Ada from C, there is a standalone decoder for .lzma files in the open-source <a href=\"https://unzip-ada.sourceforge.io/\" rel=\"nofollow noreferrer\">Zip-Ada</a> project. The difficulty may be to find a relatively recent version of GNAT (the GCC compiler for Ada) running on Cygwin. The up-to-date versions for Windows are usually MinGW-ish.</p>\n"}], "owner": {"reputation": 35, "user_id": 11119050, "user_type": "registered", "profile_image": "https://graph.facebook.com/1460460454091168/picture?type=large", "display_name": "Nguy\u1ec5n Thu Ph\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/11119050/nguy%e1%bb%85n-thu-ph%c6%b0%c6%a1ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551435391, "creation_date": 1551269302, "question_id": 54905153, "link": "https://stackoverflow.com/questions/54905153/a-non-painful-way-to-compile-lzma-library-on-windows-with-cmake-clion", "title": "A non-painful way to compile lzma library on Windows with Cmake/CLion?", "body": "<p>I have spent 2 days on this problem, and still have no idea how to do it.</p>\n\n<p>All I am trying to do is build a program, or rather function, in C that would take in a compressed lzma file, and extract it on Windows. I am doing it with CLion, with Cygwin 64 3.0.1.</p>\n\n<p>Sound easy? Probably, except for the fact that all method I tried just simple does not work.</p>\n\n<p>Let me get this out of the way first that I am not familiar with Cmake, so that is pretty much why I am asking for advice.</p>\n\n<p>Methods I have tried:</p>\n\n<p>1)</p>\n\n<p>Searching many code on github, I simply see them do</p>\n\n<pre><code>#include &lt;lzma.h&gt;\n</code></pre>\n\n<p>Nice, just does not work on Windows. When I compile, I got the error:</p>\n\n<pre><code>undefined reference to `lzma_stream_decoder'\nundefined reference to `lzma_code'\n</code></pre>\n\n<p>Googling tell me that I am lacking the library for lzma development, and the solution is simply do a sudo apt, and...  you guess it: not for Windows. </p>\n\n<p>2)</p>\n\n<p>Maybe it is a Cmake thing, so let's try to compile with simple gcc first. I grab a simple decompress code with    <code>#include &lt;lzma.h&gt;</code> and tried to compile it on Ubuntu. Awesome, everything went smoothly.</p>\n\n<p>Back to Windows, I opened up the Cygwin terminal. Oh of course In Cygwin, I have downloaded liblzma-devel.</p>\n\n<p>Compile is running great to. BUT when firing up the executable: </p>\n\n<pre><code>cygwin1.dll and cyglzma-5.dll are missing\n</code></pre>\n\n<p>What the... Even when I specifically downloaded those files and put them to the same folder with the executable, it still fails to start correctly.</p>\n\n<p>3)</p>\n\n<p>Back to Clion/Cmake.</p>\n\n<p>I have looked in to the <a href=\"https://www.7-zip.org/sdk.html\" rel=\"nofollow noreferrer\">Lzma SDK</a> and no avail. What code should I write to the Cmake file? I cannot find any guide that says how to make use of this in C, let alone compile it using Cmake.</p>\n\n<p>Googling \"Cmake Lzma\" lead me to the <a href=\"https://cmake.org/cmake/help/latest/module/FindLibLZMA.html\" rel=\"nofollow noreferrer\">FindLibLZMA</a>, which I have no idea what they are writing about. I still have no clue what line to put into my CmakeList.txt file, like <code>add_library</code> or <code>find_package</code>... nope, nothing.</p>\n\n<p>4)</p>\n\n<p>Finally, <a href=\"https://tukaani.org/xz/\" rel=\"nofollow noreferrer\">Xz Utils</a>... the most extensive Lzma tool as far as I can understand, and of course somehow, it also does not work.</p>\n\n<p>I put the file FindLibLZMA.cmake (which I pull down from github) into a folder called Cmake. Then I added</p>\n\n<pre><code>find_package(LibLZMA REQUIRED)\ninclude_directories(${LIBLZMA_INCLUDE_DIRS})\n</code></pre>\n\n<p>into the CmakeList.txt file. Then I set the <code>LIBLZMA_INCLUDE_DIR</code> in the FindLibLZMA.cmake file to the folder include of the Xz Utils for Windows... and u guess it, compilation error:</p>\n\n<pre><code>#   LIBLZMA_HAS_AUTO_DECODER  - True if lzma_auto_decoder() is found (required).\n#   LIBLZMA_HAS_EASY_ENCODER  - True if lzma_easy_encoder() is found (required).\n#   LIBLZMA_HAS_LZMA_PRESET   - True if lzma_lzma_preset() is found (required).\n</code></pre>\n\n<p>All these library or something are required, yet where are they? The compiler could not find it, so yeah... again, I am stuck.</p>\n\n<p>I have been trying from yesterday, and I am still stuck.</p>\n\n<p>So please, I am very tired now. Any kind soul would tell me how to make the Lzma library work with Cmake on Windows...Please...Please. Thank you!</p>\n"}, {"tags": ["c", "binary", "fread"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1551269381, "post_id": 54905059, "comment_id": 96577361, "body": "Better code would use the return value from <code>fread()</code> to know how many bytes were read."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1551269471, "post_id": 54905059, "comment_id": 96577420, "body": "Why use <code>char</code> for <code>char buffer[8];</code> and a different type <code>int</code> in <code>int header[6][8]</code> for pattern matching?"}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 4338278, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/405fa2c886c2a647619689a73079e5c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis H.", "link": "https://stackoverflow.com/users/4338278/dennis-h"}, "edited": false, "score": 0, "creation_date": 1551276055, "post_id": 54905118, "comment_id": 96581361, "body": "Ah i searched for something like memcmp. Did not find this. Thank you."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 4, "last_activity_date": 1551269154, "creation_date": 1551269154, "answer_id": 54905118, "question_id": 54905059, "link": "https://stackoverflow.com/questions/54905059/program-to-read-binary-and-determine-filetype/54905118#54905118", "title": "Program to read binary and determine filetype", "body": "<p>You forgot to make your buffer <code>unsigned char</code>, so you're getting sign extension on the values.</p>\n\n<p>Clearly the table of built-in magic signatures should be <code>const unsigned char</code>, too, and the comparison should be made with a single <code>memcmp()</code> call.</p>\n"}, {"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 1, "last_activity_date": 1551270803, "last_edit_date": 1551270803, "creation_date": 1551269536, "answer_id": 54905215, "question_id": 54905059, "link": "https://stackoverflow.com/questions/54905059/program-to-read-binary-and-determine-filetype/54905215#54905215", "title": "Program to read binary and determine filetype", "body": "<p>Use <code>unsigned char</code> for <code>buffer</code> (you can also for <code>header</code>) to avoid problem if your <code>char</code> are signed and give a negative value (you compare with <em>int</em> like 0x89 where the bit 7 is set)</p>\n\n<p>You also have a problem for PNG because the values for PNG are :</p>\n\n<blockquote>\n  <p>{0x89,0x50,0x4E,0x47,0x0D,0x0A,0x1A,0x0A},</p>\n</blockquote>\n\n<p>there are not ended by 0 like in all the other cases, this is needed because your algorithm need to find 0 to indicate you found :</p>\n\n<pre><code>        if (header[i][j] == 0x00) {\n            printf(\"%s: %s\",\"Found file type\",filetype[i]);\n            return 1;\n        }\n</code></pre>\n\n<p>Just add a column to also have 0 also for PNG.</p>\n\n<p>Finally :</p>\n\n<pre><code>const unsigned char header[6][9] =    { \n                            {0x89,0x50,0x4E,0x47,0x0D,0x0A,0x1A,0x0A, 0x00},\n                            {0xFF,0xD8,0x00,0x00,0x00,0x00,0x00,0x00, 0x00},\n                            {0xFF,0xFB,0x00,0x00,0x00,0x00,0x00,0x00, 0x00},\n                            {0x49,0x44,0x33,0x00,0x00,0x00,0x00,0x00, 0x00},\n                            {0x25,0x50,0x44,0x46,0x2D,0x00,0x00,0x00, 0x00},\n                            {0x42,0x4C,0x45,0x4E,0x44,0x45,0x52,0x00, 0x00} \n                            };\n\nconst char* filetype[6] = {\"PNG\",\"JPG\",\"MP3\",\"MP3v2\",\"PDF\",\"Blender\"};\n\nint main()\n{\n    FILE *fd;\n    unsigned char buffer[sizeof(header[0])];\n\n\n    if ((fd = fopen(\"C:\\\\Users\\\\***\\\\Desktop\\\\Unnamed.jpg\", \"rb\")) == NULL) {\n        return -1;\n    }\n\n    fread(buffer, sizeof(buffer), 1, fd);\n\n    for (int i = 0; i &lt; ; i++) {\n        for(int j = 0; j &lt; sizeof(header[0]); j++){\n            printf(\"%s[%d][%d]: %x\\n\",\"Header\",i,j,header[i][j]);\n            printf(\"%s[%d]: %x\\n\", \"Buffer\", j, buffer[j]);\n\n            if (header[i][j] == 0x00) {\n                printf(\"%s: %s\",\"Found file type\",filetype[i]);\n                return 1;\n            }\n            if (header[i][j] != buffer[j]) {\n                break;\n            }\n        }\n    }\n    printf(\"%s\", \"Couldn't determine filetype - Not in library\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 4338278, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/405fa2c886c2a647619689a73079e5c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis H.", "link": "https://stackoverflow.com/users/4338278/dennis-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 54905215, "answer_count": 2, "score": -1, "last_activity_date": 1551270803, "creation_date": 1551268947, "question_id": 54905059, "link": "https://stackoverflow.com/questions/54905059/program-to-read-binary-and-determine-filetype", "title": "Program to read binary and determine filetype", "body": "<p>I wrote this code which reads a file binary and determines its filetype (for a few test fileendings).It works fine for PDF, MP3 but not for jpg.</p>\n\n<p>What is the problem? For jpg the line <code>printf(\"%s[%d]: %x\\n\", \"Buffer\", j, buffer[j]);</code> shows me multiple bytes (i.e ffffff instead of just one byte)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nconst int header[6][8] =    { \n                            {0x89,0x50,0x4E,0x47,0x0D,0x0A,0x1A,0x0A},\n                            {0xFF,0xD8,0x00,0x00,0x00,0x00,0x00,0x00},\n                            {0xFF,0xFB,0x00,0x00,0x00,0x00,0x00,0x00},\n                            {0x49,0x44,0x33,0x00,0x00,0x00,0x00,0x00},\n                            {0x25,0x50,0x44,0x46,0x2D,0x00,0x00,0x00},\n                            {0x42,0x4C,0x45,0x4E,0x44,0x45,0x52,0x00} \n                            };\n\nconst char* filetype[6] = {\"PNG\",\"JPG\",\"MP3\",\"MP3v2\",\"PDF\",\"Blender\"};\n\nint main()\n{\n    FILE *fd;\n    char buffer[8];\n\n\n    if ((fd = fopen(\"C:\\\\Users\\\\***\\\\Desktop\\\\Unnamed.jpg\", \"rb\")) == NULL) {\n        return -1;\n    }\n\n    //fread(buffer, sizeof(char), 8, fd);\n    fread(buffer, sizeof(buffer), 1, fd);\n\n    for (int i = 0; i &lt; 6; i++) {\n        for(int j = 0; j &lt; 8; j++){\n            printf(\"%s[%d][%d]: %x\\n\",\"Header\",i,j,header[i][j]);\n            printf(\"%s[%d]: %x\\n\", \"Buffer\", j, buffer[j]);\n\n            if (header[i][j] == 0x00) {\n                printf(\"%s: %s\",\"Found file type\",filetype[i]);\n                return 1;\n            }\n            if (header[i][j] != buffer[j]) {\n                break;\n            }\n        }\n    }\n    printf(\"%s\", \"Couldn't determine filetype - Not in library\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "pass-by-reference", "pass-by-value", "call-by-value"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1551268869, "post_id": 54904740, "comment_id": 96577072, "body": "@MikeKinghan Please don&#39;t recommend that list to anyone, it is complete trash and in desperate need of a major clean-up. See <a href=\"https://meta.stackoverflow.com/questions/355588/the-c-book-list-has-gone-haywire-what-to-do-with-it\" title=\"the c book list has gone haywire what to do with it\">meta.stackoverflow.com/questions/355588/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 10990812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8TEkPXbIl-I/AAAAAAAAAAI/AAAAAAAACA0/8EqDkyQvoNs/photo.jpg?sz=128", "display_name": "Tina", "link": "https://stackoverflow.com/users/10990812/tina"}, "edited": false, "score": 0, "creation_date": 1551268745, "post_id": 54904916, "comment_id": 96577006, "body": "Ah, thanks. That makes much more sense. Since it&#39;s arrays I am passing, the code <code>analyse_inst(&amp;mnemonic, &amp;operands)</code> would not be allowed, right?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 179, "user_id": 10990812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8TEkPXbIl-I/AAAAAAAAAAI/AAAAAAAACA0/8EqDkyQvoNs/photo.jpg?sz=128", "display_name": "Tina", "link": "https://stackoverflow.com/users/10990812/tina"}, "edited": false, "score": 0, "creation_date": 1551269582, "post_id": 54904916, "comment_id": 96577476, "body": "@Tina You are not passing arrays, they cannot be directly passed to a function in C. What happens is that the name of the array sometimes converted to a pointer to the first element of the array."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1551268468, "creation_date": 1551268468, "answer_id": 54904916, "question_id": 54904740, "link": "https://stackoverflow.com/questions/54904740/how-can-i-understand-the-concept-of-pointers-and-address-of-operators/54904916#54904916", "title": "How can I understand the concept of pointers (*) and address-of (&amp;) operators?", "body": "<p>Strings in C are stored as arrays of characters, terminated by a character with the value <code>'\\0'</code> (\"NIL\"). You cannot directly pass around arrays, so instead a pointer to the first character is used, which is why you must pass <code>char *</code>s to the function in order to access strings.</p>\n\n<p>A character is typically much smaller than a pointer (think 8 vs 32/64 bits), so you cannot squeeze a pointer value into a single character.</p>\n\n<p>C does not have pass by reference; it's pass by value only. Sometimes that value <em>is</em> as close to a reference as the language can come (i.e. a pointer), but then that pointer is in turn passed by value.</p>\n\n<p>Consider this:</p>\n\n<pre><code>static void put_next(const char *s)\n{\n  putchar(*s++);\n}\n\nint main(void)\n{\n  const char *string = \"hello\";\n  put_next(string);\n  put_next(string);\n}\n</code></pre>\n\n<p>This will print <code>hh</code>, since it's being passed the same value <code>string</code> every time, the fact that <code>s</code>, which is a different variable holding a copy of the same value, is incremented inside the function doesn't matter. The incremented value is local to the function, and thrown away once it goes out of scope.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1551268701, "creation_date": 1551268701, "answer_id": 54904989, "question_id": 54904740, "link": "https://stackoverflow.com/questions/54904740/how-can-i-understand-the-concept-of-pointers-and-address-of-operators/54904989#54904989", "title": "How can I understand the concept of pointers (*) and address-of (&amp;) operators?", "body": "<blockquote>\n  <p>which means that I will be passing pointers to the function. But why is that required? </p>\n</blockquote>\n\n<p>Because what you have in main are pointers, and what <code>printf(\"%s\"</code> expects is a <code>char*</code>.</p>\n\n<p>\"Pass by reference\" is a broad term in programming, meaning passing along an address rather than a copy of the object. In your case, you pass a pointer to the first element of each string, rather than making a copy of the whole string, since that would waste execution time and memory.</p>\n\n<p>So while the strings themselves could be said to be \"passed by reference\", strictly speaking C actually only allows parameters to be passed by value. <em>The pointers themselves</em> are passed by value. Your function parameters will be copies of the pointers you have allocated in main(). But they point at the same strings as the pointers in main() do.</p>\n\n<blockquote>\n  <p>From that, I got that passing a variable by reference and then modifying that value would mean that the same variable outside the function would be changed as well;</p>\n</blockquote>\n\n<p>Indeed, you could change the string from inside the function through the pointer and then it would affect the string in main(). But in this case, you haven't allocated any memory to modify - you would attempt to modify a string literal <code>\"...\"</code>, which would have been a bug. If you were to modify the strings, you should have declared them as arrays in main(): <code>char mnemonic[] = \"add\";</code></p>\n\n<p>Now as it turns out, whenever you use an array like the one in my example inside an expression, it \"decays\" into a pointer to the first element. So we wouldn't actually be able to pass the array by value to the function, as the C language would have changed it between the lines to a pointer to the first element.</p>\n\n<p>You can play around with this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid analyse_inst(char* mnemonic, char* operands);\n\nint main()\n{\n    char mnemonic[] = \"add\";\n    char operands[] = \"five to two\";\n\n    analyse_inst(mnemonic, operands);\n    printf(\"%s\\n\", mnemonic);\n}\n\nvoid analyse_inst(char* mnemonic, char* operands)\n{\n    printf(\"%s \", mnemonic);\n    printf(\"%s\\n\", operands);\n\n    strcpy(mnemonic, \"hi\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 8215760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b80f894cb855a7e91202d4546cc609c?s=128&d=identicon&r=PG&f=1", "display_name": "techStud", "link": "https://stackoverflow.com/users/8215760/techstud"}, "is_accepted": false, "score": 2, "last_activity_date": 1551268895, "creation_date": 1551268895, "answer_id": 54905045, "question_id": 54904740, "link": "https://stackoverflow.com/questions/54904740/how-can-i-understand-the-concept-of-pointers-and-address-of-operators/54905045#54905045", "title": "How can I understand the concept of pointers (*) and address-of (&amp;) operators?", "body": "<p>When you write something like <code>char *mnemonic</code> that means you are creating a pointer variable (variable that will hold the address of another variable) but since the data type of the <code>mnemonic</code> is <code>char</code> it will hold the address of variable with <code>char</code> datatype only.</p>\n\n<p>Now, inside your code you have written <code>mnemonic = \"add\"</code> so here \"add\" is the string that is array of characters and mnemonic is pointing to the base address of that array.</p>\n\n<p>and while calling the function you are passing the references of these <code>char arrays</code>, so you need to change <code>void analyse_inst(char mnemonic, char operands)</code> to <code>void analyse_inst(char *mnemonic, char *operands)</code> to get the references in these respective pointer variables. Reason is same <strong>We need pointer variables to hold the references</strong>.</p>\n\n<p>And the <code>&amp;</code> returns the address of the variable, that means the reference to the memory location in which the variable is stored.</p>\n\n<p>Hope this will help. </p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1551291837, "creation_date": 1551291837, "answer_id": 54912141, "question_id": 54904740, "link": "https://stackoverflow.com/questions/54904740/how-can-i-understand-the-concept-of-pointers-and-address-of-operators/54912141#54912141", "title": "How can I understand the concept of pointers (*) and address-of (&amp;) operators?", "body": "<p>I will discuss things in the context of your code, but I want to get some basics out of the way first.  </p>\n\n<p>In a <em>declaration</em>, the unary <code>*</code> operator indicates that the thing being declared has pointer type:</p>\n\n<pre><code>T *p;       // for any type T, p has type \"pointer to T\"\nT *p[N];    // for any type T, p has type \"N-element array of pointer to T\"\nT (*p)[N];  // for any type T, p has type \"pointer to N-element array of T\"\nT *f();     // for any type T, f has type \"function returning pointer to T\"\nT (*f)();   // for any type T, f has type \"pointer to function returning T\"\n</code></pre>\n\n<p>The unary <code>*</code> operator has lower precedence then the postfix <code>[]</code> subscript and <code>()</code> function operators, so if you want a pointer to an array or a function, the <code>*</code> must be explicitly grouped with the identifier.  </p>\n\n<p>In an <em>expression</em>, the unary <code>*</code> operator <em>dereferences</em> the pointer, allowing us to access the pointed-to object or function:</p>\n\n<pre><code>int x;\nint *p;\np = &amp;x;  // assign the address of x to p\n*p = 10; // assigns 10 to x via p - int = int\n</code></pre>\n\n<p>After the above code has executed, the following are true:</p>\n\n<pre><code> p == &amp;x       // int * == int *\n*p ==  x == 10 // int   == int   == int\n</code></pre>\n\n<p>The <em>expressions</em> <code>p</code> and <code>&amp;x</code> have type <code>int *</code> (pointer to <code>int</code>), and their value is the (virtual) address of <code>x</code>.  The <em>expressions</em> <code>*p</code> and <code>x</code> have type <code>int</code>, and their value is <code>10</code>.  </p>\n\n<p>A valid<sup>1</sup> object pointer value is obtained in one of three ways (function pointers are also a thing, but we won't get into them here):</p>\n\n<ul>\n<li>using the unary <code>&amp;</code> operator on an lvalue<sup>2</sup> (<code>p = &amp;x;</code>);</li>\n<li>allocating dynamic memory via <code>malloc()</code>, <code>calloc()</code>, or <code>realloc()</code>;</li>\n<li>and, what is relevant for your code, using an <em>array expression</em> without a <code>&amp;</code> or <code>sizeof</code> operator.  </li>\n</ul>\n\n<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operator, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"N-element array of <code>T</code>\" is converted (\"decays\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression is the address of the first element of the array<sup>3</sup>.  So, if you create an array like</p>\n\n<pre><code>int a[10];\n</code></pre>\n\n<p>and pass that array expression as an argument to a function like</p>\n\n<pre><code>foo( a );\n</code></pre>\n\n<p>then before the function is called, the expression <code>a</code> is converted from type \"10-element array of <code>int</code>\" to \"pointer to <code>int</code>\", and the value of <code>a</code> is the address of <code>a[0]</code>.  So what the function actually receives is a pointer value, not an array:</p>\n\n<pre><code>void foo( int *a ) { ... }\n</code></pre>\n\n<p>String literals like <code>\"add\"</code> and <code>\"five to two\"</code> are array expressions - <code>\"add\"</code> has type \"4-element array of <code>char</code>\" and <code>\"five to two\"</code> has type \"12-element array of <code>char</code>\" (an N-character string requires at least N+1 elements to store because of the string terminator).  </p>\n\n<p>In the statements</p>\n\n<pre><code>mnemonic = \"add\";\noperands = \"five to two\";\n</code></pre>\n\n<p>neither string literal is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, and they're not being used to initialize a character array in a declaration, so both expressions are converted to type <code>char *</code> and their values are the addresses of the first element of each array.  Both <code>mnemonic</code> and <code>operands</code> are declared as <code>char *</code>, so this is fine.  </p>\n\n<p>Since the types of <code>mnemonic</code> and <code>operands</code> are both <code>char *</code>, when you call</p>\n\n<pre><code>analyse_inst( mnemonic, operands );\n</code></pre>\n\n<p>the types of the function's formal arguments must also be <code>char *</code>:</p>\n\n<pre><code>void analyse_inst( char *mnemonic, char *operands ) \n{\n  ...\n}\n</code></pre>\n\n<p>As far as the \"pass by reference\" bit...</p>\n\n<p>C passes all function arguments <em>by value</em>.  That means the formal argument in the function definition is a different object in memory from the actual argument in the function call, and any changes made to the formal argument are not reflected in the actual argument.  Suppose we write a <code>swap</code> function as:</p>\n\n<pre><code>int swap( int a, int b )\n{\n  int tmp = a;\n  a = b;\n  b = tmp;\n}\n\nint main( void )\n{\n  int x = 2;\n  int y = 3;\n\n  printf( \"before swap: x = %d, y = %d\\n\", x, y );\n  swap( x, y );\n  printf( \"after swap: x = %d, y = %d\\n\", x, y );\n  ...\n}\n</code></pre>\n\n<p>If you compile and run this code, you'll see that the values of <code>x</code> and <code>y</code> don't change after the call to <code>swap</code> - the changes to <code>a</code> and <code>b</code> had no effect on <code>x</code> and <code>y</code>, because they're different objects in memory.  </p>\n\n<p>In order for the <code>swap</code> function to work, we have to pass <em>pointers</em> to <code>x</code> and <code>y</code>:</p>\n\n<pre><code>void swap( int *a, int *b )\n{\n  int tmp = *a;\n  *a = *b;\n  *b = tmp;\n}\n\nint main( void )\n{\n  ...\n  swap( &amp;x, &amp;y );\n  ...\n}\n</code></pre>\n\n<p>In this case, the <em>expressions</em> <code>*a</code> and <code>*b</code> in <code>swap</code> refer to the same objects as the expressions <code>x</code> and <code>y</code> in <code>main</code>, so the changes to <code>*a</code> and <code>*b</code> are reflected in <code>x</code> and <code>y</code>:</p>\n\n<pre><code> a == &amp;x,  b == &amp;y\n*a ==  x, *b ==  y\n</code></pre>\n\n<p>So, in general:</p>\n\n<pre><code>void foo( T *ptr ) // for any non-array type T\n{\n  *ptr = new_value(); // write a new value to the object `ptr` points to\n}\n\nvoid bar( void )\n{\n  T var;\n  foo( &amp;var ); // write a new value to var\n}\n</code></pre>\n\n<p>This is also true for pointer types - replace <code>T</code> with a pointer type <code>P *</code>, and we get the following:</p>\n\n<pre><code>void foo( P **ptr ) // for any non-array type T\n{\n  *ptr = new_value(); // write a new value to the object `ptr` points to\n}\n\nvoid bar( void )\n{\n  P *var;\n  foo( &amp;var ); // write a new value to var\n}\n</code></pre>\n\n<p>In this case, <code>var</code> stores a pointer value.  If we want to write a new pointer value to <code>var</code> through <code>foo</code>, then we must still pass a pointer to <code>var</code> as the argument.  Since <code>var</code> has type <code>P *</code>, then the <em>expression</em> <code>&amp;var</code> has type <code>P **</code>.    </p>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>A pointer value is valid if it points to an object within that object's lifetime.  \n<li>An lvalue is an expression that refers to an object such that the object's value may be read or modified.  \n<li>Believe it or not there is a good reason for this rule, but it means that array expressions lose their \"array-ness\" under most circumstances, leading to much confusion among people first learning the language.\n</ol>\n\n<p></sup></p>\n"}], "owner": {"reputation": 179, "user_id": 10990812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8TEkPXbIl-I/AAAAAAAAAAI/AAAAAAAACA0/8EqDkyQvoNs/photo.jpg?sz=128", "display_name": "Tina", "link": "https://stackoverflow.com/users/10990812/tina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 54904989, "answer_count": 4, "score": 0, "last_activity_date": 1551382382, "creation_date": 1551267883, "last_edit_date": 1551382382, "question_id": 54904740, "link": "https://stackoverflow.com/questions/54904740/how-can-i-understand-the-concept-of-pointers-and-address-of-operators", "title": "How can I understand the concept of pointers (*) and address-of (&amp;) operators?", "body": "<p>I am trying to understand the significance of these two operators, so I wrote this code just for that purpose.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char *mnemonic, *operands;\n\n    mnemonic = \"add\";\n    operands = \"five to two\";\n\n    analyse_inst(mnemonic, operands);\n\n}\n\nvoid analyse_inst(char mnemonic, char operands)\n{\n    printf(\"%s\", mnemonic);\n    printf(\"%s\", operands);\n}\n</code></pre>\n\n<p>However, I noticed that it wouldn't work unless I change the arguments of <code>analyse_inst()</code> function to <code>analyse_inst(char * mnemonic, char * operands)</code>, which means that I will be passing pointers to the function. But why is that required? </p>\n\n<p>Also, I looked up about \"passing by reference.\" And according to tutorialspoint.com, its definition:</p>\n\n<blockquote>\n  <p>The call by reference method of passing arguments to a function copies\n  the address of an argument into the formal parameter. Inside the\n  function, the address is used to access the actual argument used in\n  the call. It means the changes made to the parameter affect the passed\n  argument.</p>\n</blockquote>\n\n<p>From that, I got that passing a variable by reference and then modifying that value would mean that the same variable outside the function would be changed as well; whereas for passing a variable by value would not change the same variable located outside the function. </p>\n\n<p>Am I going wrong anywhere?</p>\n\n<p>How can I can modify my code such that I am passing the two variables by reference?</p>\n\n<p>(P.S. I have read other Stack Overflow threads on the same topic, but I would appreciate it if anyone could explain it in the context of the code I wrote)</p>\n"}, {"tags": ["c", "algorithm", "divide-and-conquer"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1551268071, "post_id": 54904737, "comment_id": 96576620, "body": "You can use as condition <code>A[i] &gt; 0</code> and only then perform the increment."}, {"owner": {"reputation": 123, "user_id": 11117526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vTEAjiOITMw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6NiW0oM0inFkFE_mUQwyYQtdPKg/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11117526/kyle"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1551268249, "post_id": 54904737, "comment_id": 96576728, "body": "But if I set this condition, the code will return wrong answer in the situation that whole array is negative number."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1551269123, "post_id": 54904737, "comment_id": 96577215, "body": "<code>sum += A[i];</code> is certainly overflowing.  Try <code>long long left_sum = INT_MIN; long long sum = 0;</code>"}, {"owner": {"reputation": 123, "user_id": 11117526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vTEAjiOITMw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6NiW0oM0inFkFE_mUQwyYQtdPKg/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11117526/kyle"}, "edited": false, "score": 0, "creation_date": 1551270883, "post_id": 54904737, "comment_id": 96578223, "body": "It still doesn&#39;t work. I check the value of INT_MIN in long long on my computer is still  -2147483648."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 11117526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vTEAjiOITMw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6NiW0oM0inFkFE_mUQwyYQtdPKg/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11117526/kyle"}, "edited": false, "score": 0, "creation_date": 1551270930, "post_id": 54905125, "comment_id": 96578262, "body": "I try to use long and long long , and it seems that my computer can only let the value be no more than  -2147483648."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 123, "user_id": 11117526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vTEAjiOITMw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6NiW0oM0inFkFE_mUQwyYQtdPKg/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11117526/kyle"}, "edited": false, "score": 0, "creation_date": 1551271508, "post_id": 54905125, "comment_id": 96578617, "body": "warning use the suffix &#39;l&#39; to force literal value to be a long else is an integer, example <code>2147483648l</code> rather than <code>2147483648</code>. If you have a doubt about the <i>sizeof</i> of <i>long</i> and <i>long long</i> just add a <i>printf</i> in your code to print their <i>sizeof</i>"}, {"owner": {"reputation": 123, "user_id": 11117526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vTEAjiOITMw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6NiW0oM0inFkFE_mUQwyYQtdPKg/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11117526/kyle"}, "edited": false, "score": 0, "creation_date": 1551272162, "post_id": 54905125, "comment_id": 96579021, "body": "Thank you so much ! It work ! Turns out I forgot to change other variable that I store the final result."}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 1, "last_activity_date": 1551269185, "creation_date": 1551269185, "answer_id": 54905125, "question_id": 54904737, "link": "https://stackoverflow.com/questions/54904737/special-case-in-maximum-subarray/54905125#54905125", "title": "Special case in maximum subarray", "body": "<blockquote>\n  <p>max sum is 2147483648</p>\n</blockquote>\n\n<p>2147483648 (decimal) is 2^31, if your <em>int</em> are on 32 bits 2147483648 overflow for a signed <em>int</em>, so <code>max_sum</code> cannot be 2147483648</p>\n\n<p>use <em>long</em> (supposing on 64b) for <code>sum</code> and <code>left_sum</code></p>\n"}], "owner": {"reputation": 123, "user_id": 11117526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vTEAjiOITMw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6NiW0oM0inFkFE_mUQwyYQtdPKg/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11117526/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1551269185, "creation_date": 1551267879, "question_id": 54904737, "link": "https://stackoverflow.com/questions/54904737/special-case-in-maximum-subarray", "title": "Special case in maximum subarray", "body": "<p>I use the divide and conquer to solve maximum subarray problem.\nIt works fine on most common case but fail on special one.\nI think the problem might happen here :</p>\n\n<pre><code>struct subarray maximum_crossing(int A[], int low, int mid ,int high){\n    int left_sum = INT_MIN;\n    int left_max = mid;\n    int sum = 0;\n    for (int i=mid; i &gt;= low; i--){\n        sum += A[i];\n        if (sum &gt; left_sum){\n            left_sum = sum;\n            left_max = i;\n        };\n    };\n    ..........\n    ..........\n</code></pre>\n\n<p>I test it and it really work well on common case.\nBut When the array looks something like this : {-2147483648, -2147483648, -2147483648}, it will return the maximum subarray is started at 0 and ends at 1, and max sum is 0. I think it's because INT_MIN + INT_MIN will be 0 in C.  </p>\n\n<p>Or in {-2147483648, -1, 0}, the code will find the maximum subarray is started at 0 an ended at 1, max sum is 2147483648. Because of this problem, once the array has -2147483648 and other negative value, the code won't work.  </p>\n\n<p>I try to use if statement to check A[i]'s value first but I found that it's not a best solution. Because other negative value can still add together to exceed -2147483648. So is there any more suitable way to solve with this kind of case ?</p>\n"}, {"tags": ["c", "dynamic-arrays"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 2, "creation_date": 1551266801, "post_id": 54904347, "comment_id": 96575889, "body": "Where are you initializing <code>v-&gt;size</code> ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1551266803, "post_id": 54904347, "comment_id": 96575891, "body": "Remember that <code>malloc</code> doesn&#39;t initialize the contents of the memory it allocates. The contents of that memory is <i>indeterminate</i> and seem like random or garbage."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1551266814, "post_id": 54904347, "comment_id": 96575902, "body": "malloc(0) isn&#39;t well-defined."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1551268830, "post_id": 54904347, "comment_id": 96577048, "body": "@Lundin <code>malloc(0)</code> is well-defined, the man page says: If size is 0, then malloc() returns either NULL, or a unique pointer value that can later be successfully passed to free()."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1551269164, "post_id": 54904347, "comment_id": 96577246, "body": "@mch No it is not well-defined, but implementation-defined. Forget about man and read C17 7.22.3 <code>If the size of the space requested is zero, the behavior is implementation-defined: either a null pointer is returned, or the behavior is as if the size were some nonzero value, except that the returned pointer shall not be used to access an object.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1551343972, "post_id": 54904678, "comment_id": 96608331, "body": "Would also suggest <code>const</code>-ing the argument when applicable, i.e. in <code>array_size()</code>. Also function naming is not consistent, perhaps they should all have an <code>array_</code> prefix."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1551269650, "last_edit_date": 1551269650, "creation_date": 1551267712, "answer_id": 54904678, "question_id": 54904347, "link": "https://stackoverflow.com/questions/54904347/getting-the-wrong-number-of-elements-in-a-dynamic-array/54904678#54904678", "title": "Getting the wrong number of elements in a dynamic array", "body": "<p><code>array_init()</code> did not assign anything to <code>.size</code> and <code>.capacity</code> members.</p>\n\n<p>Suggested changes:</p>\n\n<pre><code>struct array {\n    // long size;\n    // long capacity;\n    // `size_t` is the right-size for array indexing.\n    // Be mindful that `size_t` is some _unsigned_ type.\n    size_t size;\n    size_t capacity;\n    int* data;\n};\n\n// struct array* array_init(long initial_capacity) {\nstruct array* array_init(size_t initial_capacity) {\n    struct array* v = malloc(sizeof(struct array)); \n    if (v == NULL) {\n       return NULL;\n    }\n    v-&gt;data = malloc(sizeof(int)*initial_capacity );\n    // If initial_capacity is 0, a NULL return does not certainly mean out of memory\n    //if (v-&gt;data==NULL){\n    if (v-&gt;data==NULL &amp;&amp; initial_capacity != 0){\n       free(v); // also free prior allocation\n       return NULL;\n    }\n\n    // Add\n    v-&gt;size = 0;\n    v-&gt;capacity = initial_capacity;\n\n    return v;\n}    \n</code></pre>\n\n<hr>\n\n<p><code>v-&gt;capacity *= 2</code> is weak as it is not known that <code>v-&gt;capacity &gt; 0</code>.</p>\n\n<pre><code>int append(struct array *v, int elem) {\n    if (v-&gt;size &gt;= v-&gt;capacity) {\n        // v-&gt;capacity *= 2;\n        v-&gt;capacity = v-&gt;capacity &gt; 0 ? v-&gt;capacity*2 : 1;\n</code></pre>\n\n<hr>\n\n<p><code>indexget()</code> is unclear.  Why imply returning a <em>pointer</em> when index is out of range? </p>\n\n<pre><code>#define BAD_VALUE 0  /* or some unused `int` value for the application */\nint indexget(struct array *v, long index) {\n    // if (index &gt;= v-&gt;size) {  incomplete test if `index` is signed\n    if (index &gt;= v-&gt;size || index &lt; 0) {\n        // return NULL;\n        return BAD_VALUE;\n    }\n    return v-&gt;data[index];\n}\n</code></pre>\n\n<p><strong>or</strong></p>\n\n<p>Is code returning the address of the element of the array?</p>\n\n<pre><code>//int indexget(struct array *v, long index) {\nint *indexget(struct array *v, size_t index) {\n    if (index &gt;= v-&gt;size) {\n        return NULL;\n    }\n    // return v-&gt;data[index];\n    return &amp;v-&gt;data[index];\n}\n</code></pre>\n\n<hr>\n\n<p><code>append()</code> lacks re-allocation success check.</p>\n\n<pre><code>        // v-&gt;data = realloc(v-&gt;data, sizeof(int) * v-&gt;capacity);\n        void *p = realloc(v-&gt;data, sizeof(int) * v-&gt;capacity);\n        if (p == NULL) {\n          return EXIT_FAILURE; // Handle out-of-memory in some fashion\n        }\n        v-&gt;data = p;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1551268298, "creation_date": 1551268298, "answer_id": 54904869, "question_id": 54904347, "link": "https://stackoverflow.com/questions/54904347/getting-the-wrong-number-of-elements-in-a-dynamic-array/54904869#54904869", "title": "Getting the wrong number of elements in a dynamic array", "body": "<p>inside <code>array_init</code> you should set <code>size</code> and <code>capacity</code> to 0, otherwise they will have random values.</p>\n\n<p>also, inside <code>append</code>, after <code>realloc</code> you need to check for NULL.</p>\n"}], "owner": {"reputation": 313, "user_id": 8570841, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6f2d8c696aad1a336ce8135e04b5ac84?s=128&d=identicon&r=PG&f=1", "display_name": "N.W.", "link": "https://stackoverflow.com/users/8570841/n-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 54904678, "answer_count": 2, "score": 1, "last_activity_date": 1551300845, "creation_date": 1551266598, "last_edit_date": 1551300845, "question_id": 54904347, "link": "https://stackoverflow.com/questions/54904347/getting-the-wrong-number-of-elements-in-a-dynamic-array", "title": "Getting the wrong number of elements in a dynamic array", "body": "<p>I am a beginner in C and I'm trying to build a very simple dynamic array. My code compiles, but outputs the wrong size when returning the array size. For example, when I test it for a final array size of 0, it outputs 13744632839234567870, which is very big and very wrong.</p>\n\n<p>I don't think my <code>array_size</code> function is wrong. I suspect it goes wrong in <code>append</code>, but I just can't find what's wrong with it. </p>\n\n<p>If anyone would be willing to help me, I would be extremely grateful! </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nstruct array\n{\n    long size;\n    long capacity;\n    int* data;\n};\n\nstruct array* array_init(long initial_capacity) {\n    struct array* v = malloc(sizeof(struct array)); \n    if (v==NULL){\n        return NULL;\n    }\n}    \n\nint append(struct array *v, int elem) {\n    if (v-&gt;size &gt;= v-&gt;capacity) {\n\n        v-&gt;capacity *= 2;\n        v-&gt;data = realloc(v-&gt;data, sizeof(int) * v-&gt;capacity);\n    }\n    v-&gt;data[v-&gt;size] = elem;\n    v-&gt;size++;\n    return 0;    \n}\n\nint indexget(struct array *v, long index) {\n    if (index &gt;= v-&gt;size) {\n        return NULL;\n    }\n    return v-&gt;data[index];\n}\n\nlong array_size(struct array *v) {\n    return v-&gt;size;\n}\n</code></pre>\n"}, {"tags": ["c", "syntax", "standards"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1551266701, "post_id": 54904340, "comment_id": 96575822, "body": "It uses <a href=\"https://en.cppreference.com/w/c/language/operator_other#Comma_operator\" rel=\"nofollow noreferrer\">the comma operator</a>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1551266795, "post_id": 54904340, "comment_id": 96575887, "body": "C does not have the syntax <code>[a,b]</code> to index multi-dimensional arrays. C has however the comma operator which executes the expressions separated by the comma sequentially, yielding the last result as the result of the sequence. This means that your expression is equivalent to <code>tab[2]</code>."}], "owner": {"reputation": 11, "user_id": 11124520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d1cce4b0991fd35a56a82060586f45f?s=128&d=identicon&r=PG&f=1", "display_name": "choukette", "link": "https://stackoverflow.com/users/11124520/choukette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1551266899, "answer_count": 0, "score": 1, "last_activity_date": 1551266754, "creation_date": 1551266584, "question_id": 54904340, "link": "https://stackoverflow.com/questions/54904340/c-syntax-and-behaviour-of-arraya-b", "closed_reason": "Duplicate", "title": "c syntax and behaviour of array[a,b]", "body": "<p>By mistake I wrote something like this:</p>\n\n<pre><code>int tab[2][4] = {{1, 2, 3}, {4, 5, 6}};\nint c = tab[1, 2]; /* expect compilation failure */\n</code></pre>\n\n<p>I expect this syntax cause compilation failure (linux, gcc 4.7), but gcc warn and compile.\nWhat is the meaning of the second line? Is the behavior defined in the standard? I don't find answer in it.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551266677, "post_id": 54904086, "comment_id": 96575811, "body": "I suggest learning some basics of formal language theory."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1551269026, "post_id": 54904086, "comment_id": 96577155, "body": "One other gotcha you need to be aware of - strings in C need to be terminated with a NUL (<code>&#39;\\0&#39;</code>) character otherwise you&#39;ll experience all manner of fun undefined behaviour. It needs something akin to <code>str2[i] = &#39;\\0&#39;;</code> before you can use it, like with <code>printf</code>"}], "answers": [{"tags": [], "owner": {"reputation": 114, "user_id": 4650828, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7c3ac75868538d3cb30249fc62145d9a?s=128&d=identicon&r=PG&f=1", "display_name": "aragon", "link": "https://stackoverflow.com/users/4650828/aragon"}, "is_accepted": false, "score": 0, "last_activity_date": 1551267182, "creation_date": 1551267182, "answer_id": 54904522, "question_id": 54904086, "link": "https://stackoverflow.com/questions/54904086/how-to-printc-code-only-the-xml-tags-by-skipping-all-the-values-in-between-the/54904522#54904522", "title": "How to print(C code) only the XML tags by skipping all the values in between the tags?", "body": "<p>You need to improve your code:</p>\n\n<ul>\n<li>First of all include in parenthesis the two pair AND conditions,</li>\n<li>Forgot to include in if statement the slash(/) and the greater\ncharacter(>)</li>\n<li>You will gonna need a second int variable for indexing the str2 array</li>\n<li>The printf be outside of while.</li>\n</ul>\n\n<p>Also is good to initialize the str2 with 0 values. See memset.</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1551267403, "creation_date": 1551267403, "answer_id": 54904587, "question_id": 54904086, "link": "https://stackoverflow.com/questions/54904086/how-to-printc-code-only-the-xml-tags-by-skipping-all-the-values-in-between-the/54904587#54904587", "title": "How to print(C code) only the XML tags by skipping all the values in between the tags?", "body": "<p>One problem with your code is that you use <code>i</code> for writing into <code>str2</code>. However, as you don't want to write all characters from <code>str1</code> into <code>str2</code> you need two index-variables, i.e. one for reading and another for writing.</p>\n\n<p>A very simple approach for your task is to look for <code>'&lt;'</code> and then copy all following characters until you see a <code>'&gt;'</code>. That could look like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n    char str1[50] = {\"&lt;a&gt;1&lt;/a&gt;&lt;b&gt;2&lt;/b&gt;&lt;c&gt;3&lt;/c&gt;\"};\n    char str2[50] = { 0 };\n    int i, j;\n    i = 0;\n    j = 0;\n\n    while(str1[i] !='\\0')\n    {\n      if(str1[i] == '&lt;')\n      {\n        // Found tag\n        // Now copy all characters to str2 until end-of-tag is found\n        do\n        {\n          str2[j++] = str1[i++];\n          if (str1[i] =='\\0') exit(1); // Unexpected format.. terminate\n        } while (str1[i] != '&gt;');\n        str2[j++] = str1[i];           // Also copy the '&gt;'\n      }\n      ++i;\n    }\n    printf(\"%s\\n\",str2);\n}\n</code></pre>\n\n<p>However, notice that parsing (user) input is a pretty complicated task because you need to handle all sort of errors in the input. The code above has (nearly) no error check and is therefore not useful for passing real (user) input. The code only handles \"well formed\" input.</p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "is_accepted": false, "score": 0, "last_activity_date": 1554410102, "last_edit_date": 1554410102, "creation_date": 1551267605, "answer_id": 54904647, "question_id": 54904086, "link": "https://stackoverflow.com/questions/54904086/how-to-printc-code-only-the-xml-tags-by-skipping-all-the-values-in-between-the/54904647#54904647", "title": "How to print(C code) only the XML tags by skipping all the values in between the tags?", "body": "<p><b>Kindly note it does not cover all test cases scenarios.</b></p>\n\n<p>My code have some code writing standard issues, but I made as minimal changes as possible so that you can understand the changes made.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char str1[50] = {\"&lt;a&gt;1&lt;/a&gt;&lt;b&gt;2&lt;/b&gt;&lt;c&gt;3&lt;/c&gt;\"};\n    char str2[20];\n    int i,j;\n    i = 0,j = 0;\n\n    while(str1[i] !='\\0') {\n        if(str1[i] == '&lt;' ){\n            do {\n                str2[j] = str1[i];\n                i++;\n                j++;\n\n             }while( str1[i] &gt;= 'A' &amp;&amp; str1[i] &lt;='Z' || str1[i] &gt;= 'a' &amp;&amp; str1[i] &lt;='z' || str1[i] == '/');\n\n             if(str1[i] == '&gt;' ){\n                str2[j] = str1[i];\n                i++;\n                j++;\n                continue;\n             }\n             else {\n                //todo error condition\n             }\n        }\n        i++;\n    }\n    str2[j] = '\\0';\n    printf(\"%s\",str2);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10160949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wVGbBc6fVYg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q6fJ6rmvq5HLOsHlv4sWNYE0LkLQ/mo/photo.jpg?sz=128", "display_name": "sunil ", "link": "https://stackoverflow.com/users/10160949/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 54904587, "answer_count": 3, "score": 0, "last_activity_date": 1554410102, "creation_date": 1551265658, "last_edit_date": 1551266095, "question_id": 54904086, "link": "https://stackoverflow.com/questions/54904086/how-to-printc-code-only-the-xml-tags-by-skipping-all-the-values-in-between-the", "title": "How to print(C code) only the XML tags by skipping all the values in between the tags?", "body": "<p>Here my requirement is to skip all values between the tags and printing the same, i tried it in brute force way but still not getting, anyone please suggest.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char str1[50] = {\"&lt;a&gt;1&lt;/a&gt;&lt;b&gt;2&lt;/b&gt;&lt;c&gt;3&lt;/c&gt;\"};\n    char str2[20];\n    int i;\n    i = 0;\n\n    while(str1[i] !='\\0')\n    {\n        if(str1[i] == '&lt;' || str1[i] &gt;= 'A' &amp;&amp; str1[i] &lt;='Z' || str1[i] &gt;= 'a' &amp;&amp; str1[i] &lt;='z')\n        {\n            str2[i] = str1[i];\n        }\n        i++;\n        printf(\"%s\",str2);\n    }\n}\n</code></pre>\n\n<p>Actual output: <code>&lt;&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a&lt;a</code></p>\n\n<p>Expected output: <code>&lt;a&gt;&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&lt;c&gt;&lt;/c&gt;</code></p>\n"}, {"tags": ["python", "c", "nmea", "gpsd"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9240522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571818400c550760b98ad0dc51afc40a?s=128&d=identicon&r=PG&f=1", "display_name": "Juha", "link": "https://stackoverflow.com/users/9240522/juha"}, "is_accepted": false, "score": 1, "last_activity_date": 1551358290, "creation_date": 1551358290, "answer_id": 54926207, "question_id": 54903967, "link": "https://stackoverflow.com/questions/54903967/gpsd-how-to-create-a-virtual-gps-source-with-lat-lon-as-input/54926207#54926207", "title": "GPSD - How to create a virtual GPS Source with lat/lon as input", "body": "<p>I found out how to pipe the data:</p>\n\n<pre><code>stdbuf -oL build/samples_generate | gpsd -n -N /dev/stdin\n</code></pre>\n\n<ul>\n<li><em>stdbuf -oL</em> makes output of samples_generate line buffered, otherwise the text could be buffered and written in large chunks instead of line per line</li>\n</ul>\n\n<p>Hope this helps someone with the same issue.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iNfQ4.png\" rel=\"nofollow noreferrer\">GPSMON log of the working setup</a></p>\n"}], "owner": {"reputation": 21, "user_id": 9240522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571818400c550760b98ad0dc51afc40a?s=128&d=identicon&r=PG&f=1", "display_name": "Juha", "link": "https://stackoverflow.com/users/9240522/juha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551358290, "creation_date": 1551265342, "last_edit_date": 1551265734, "question_id": 54903967, "link": "https://stackoverflow.com/questions/54903967/gpsd-how-to-create-a-virtual-gps-source-with-lat-lon-as-input", "title": "GPSD - How to create a virtual GPS Source with lat/lon as input", "body": "<p>I have a system that uses gpsd as a source for positioning. I need to integrate it with another system that gives me latitude, longitude &amp; time.</p>\n\n<p>I was able to generate NMEA sentences using nmealib:</p>\n\n<pre><code>user@locahost :~/Desktop/nmealib$ build/samples_generate \n$GPGGA,154400.00,5000.0000,N,3600.0000,E,3,01,0.0,10.9,M,0.0,M,0.0,0000*7d\n$GPGSA,A,3,00,00,00,00,00,00,00,00,00,00,00,00,0.0,0.0,0.0*32\n$GPGSV,1,1,01,00,00,000,00,00,00,000,00,00,00,000,00,00,00,000,00*78\n</code></pre>\n\n<p>My goal was then to pipe this to gpsd.</p>\n\n<p>Option 1: with a FIFO file:</p>\n\n<pre><code>mkfifo /tmp/mkfifo    \ngpsd /tmp/mkfifo    \n./samples_generate &gt; /tmp/mkfifo\n</code></pre>\n\n<p>Option 2: with a TCP socket:</p>\n\n<pre><code>gpsd tcp://localhost:8888\n/samples_generate | nc -p 8888\n</code></pre>\n\n<p>On both situation, gpsd gave an error.</p>\n\n<p>In essence, I would like to have similar functionality to gpsfake, but without using a logfile, instead using the stdout from my script.</p>\n\n<p>Do you have any idea on how to realise this setup?</p>\n"}, {"tags": ["c++", "c", "tcp", "server", "pipe"], "answers": [{"tags": [], "owner": {"reputation": 392, "user_id": 4175326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4063dc584aafb9bb0bd60d7213becc23?s=128&d=identicon&r=PG&f=1", "display_name": "Dariusz Ostolski", "link": "https://stackoverflow.com/users/4175326/dariusz-ostolski"}, "is_accepted": false, "score": 2, "last_activity_date": 1551265023, "creation_date": 1551265023, "answer_id": 54903870, "question_id": 54903744, "link": "https://stackoverflow.com/questions/54903744/replicate-broken-pipe-error-with-tcp-socket/54903870#54903870", "title": "Replicate broken pipe error with tcp socket", "body": "<p>You may use kill to send specific signal to a process, e.g.:</p>\n\n<pre><code>kill -s PIPE 3363\n\n</code></pre>\n\n<p>The other solution is to create a client that will exit early i.e. it will close socket before your call to send.</p>\n"}], "owner": {"reputation": 19, "user_id": 3965288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d58b6d92cfeaf9b9eed9d7379de8c81?s=128&d=identicon&r=PG&f=1", "display_name": "pm40", "link": "https://stackoverflow.com/users/3965288/pm40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "closed_date": 1551265310, "answer_count": 1, "score": -1, "last_activity_date": 1551265102, "creation_date": 1551264631, "question_id": 54903744, "link": "https://stackoverflow.com/questions/54903744/replicate-broken-pipe-error-with-tcp-socket", "closed_reason": "Duplicate", "title": "Replicate broken pipe error with tcp socket", "body": "<p>I have a a tcp server.\nThis is the code </p>\n\n<p><a href=\"https://pastebin.com/paesU39X\" rel=\"nofollow noreferrer\">https://pastebin.com/paesU39X</a></p>\n\n<p>I had the following error during debugging:</p>\n\n<pre><code>Thread 10 \"testserver\" received signal SIGPIPE, Broken pipe.\n[Switching to Thread 0x7f71feeec0 (LWP 5475)]\n0x0000007fb6f13f70 in __libc_send (sockfd=50, buffer=0x7f71fee1e0, len=0,    flags=0)\nat ../sysdeps/unix/sysv/linux/generic/send.c:27\n27  ../sysdeps/unix/sysv/linux/generic/send.c: No such file or directory.\n</code></pre>\n\n<p>How can I replicate the broken pipe error to test a solution?</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c", "bit-shift", "klocwork"], "comments": [{"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1551263487, "post_id": 54903162, "comment_id": 96573816, "body": "<code>UINT8_C</code> seems to be a macro. What does it do?"}, {"owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "reply_to_user": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1551263624, "post_id": 54903162, "comment_id": 96573893, "body": "@P.W See e.g. <a href=\"https://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">this</a>."}], "answers": [{"tags": [], "owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "is_accepted": false, "score": 1, "last_activity_date": 1551265242, "last_edit_date": 1551265242, "creation_date": 1551264908, "answer_id": 54903833, "question_id": 54903162, "link": "https://stackoverflow.com/questions/54903162/understand-klocwork-bitwise-operation-sign/54903833#54903833", "title": "Understand Klocwork bitwise operation sign", "body": "<p>In most expressions integer types of rank smaller than that of <code>int</code> get converted into <code>int</code> (if <code>int</code> can represent all values without a loss) or <code>unsigned int</code> (otherwise).</p>\n\n<p>To simplify it a bit, consider the rank to correspond to the number of bits in the type, the more bits, the higher the rank (for a definitive treatment of the term, see a language reference (e.g. you may start <a href=\"https://en.cppreference.com/w/c/language/conversion\" rel=\"nofollow noreferrer\">here</a>)).</p>\n\n<p>And it seems to be the case here, the type returned by <code>UINT8_C()</code> (possibly <code>unsigned char</code> in disguise) has smaller rank than <code>int</code> and so you end up having a signed type.</p>\n\n<p>Now, the reason for the warning is that shifting signed integer types is not well defined in all cases. Shifting negative values left or overflowing while shifting amounts to <em>undefined behavior</em>, meaning the program may misbehave in a wide variety of ways if either of those two conditions is encountered. (It's legal to overflow when shifting unsigned types, you get a truncated value).</p>\n\n<p>Also, the shift count can't be negative.</p>\n\n<p>However, if this is the exact code, the warning is unnecessary because it should be obvious that shifting 0 left by 4 positions is completely safe. If you used variables instead of constants, the compiler (or the tool) would not always be able to deduce safety of this shift and in that case you should pay attention to the warning and rewrite your code in such a way that there would be neither undefined behavior nor warning.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 5, "last_activity_date": 1551267816, "last_edit_date": 1551267816, "creation_date": 1551267507, "answer_id": 54904615, "question_id": 54903162, "link": "https://stackoverflow.com/questions/54903162/understand-klocwork-bitwise-operation-sign/54904615#54904615", "title": "Understand Klocwork bitwise operation sign", "body": "<p>For those unaware, <code>UINT8_C</code> is a C standard macro<sup>1)</sup> for getting an integer constant of type <code>uint_least8_t</code> rather than the default <code>int</code>.</p>\n\n<p>Thus <code>UINT8_C(0)</code> is equivalent to <code>(uint_least8_t)0</code>. This will be a small integer type. And as such it is subject to integer promotion<sup>2)</sup> when passed on as left operand to <code>&lt;&lt;</code>. After promotion it ends up as type <code>int</code>, equivalent to just writing <code>0</code>.</p>\n\n<p>You should never use signed operands with bitwise operators, so this is the core reason for the error message. Corrected code should look like <code>0u &lt;&lt; 4</code>. Although this code is of course pointless for anything except self-documenting code. (And of course shifting the value 0 is always harmless.)</p>\n\n<p>Using <code>UINT8_C</code>on the right operand of <code>&lt;&lt;</code> is nonsense - that operand does not partake in any type promotion of the result. If you need to use unsigned literals just to sate a coding standard, then use <code>4u</code>. Notably, standards like MISRA-C do <em>not</em> require <code>u</code> suffix in cases where you actually don't need an unsigned type - this is a common source of false positives from tools.</p>\n\n<p>Summary - use this:</p>\n\n<pre><code>pTxData[index] =  0u &lt;&lt; 4;\n</code></pre>\n\n<p>In addition, Klockwork is giving an incorrect diagnostic message. The operators in your expression are both likely equivalent to <code>unsigned char</code> and definitely not <code>signed char</code> like the tool says.</p>\n\n<hr>\n\n<p><sup>1)</sup> Introduced in C99 <a href=\"http://port70.net/~nsz/c/c99/n1256.html#7.18.4.1\" rel=\"nofollow noreferrer\">7.18.4.1</a>.  </p>\n\n<p><sup>2)</sup> See <a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">Implicit type promotion rules</a></p>\n"}], "owner": {"reputation": 1447, "user_id": 6746897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1eb640fcdc6847c55c189ceddb6afca5?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6746897/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 54904615, "answer_count": 2, "score": 2, "last_activity_date": 1551267816, "creation_date": 1551262939, "question_id": 54903162, "link": "https://stackoverflow.com/questions/54903162/understand-klocwork-bitwise-operation-sign", "title": "Understand Klocwork bitwise operation sign", "body": "<p>When analysed by klocwork, the following line</p>\n\n<pre><code>pTxData[index] =  ( UINT8_C(0) &lt;&lt; UINT8_C(4) );\n</code></pre>\n\n<p>gives error</p>\n\n<blockquote>\n  <p>Operand of bitwise operation has type 'signed char' instead of\n  'unsigned integer'</p>\n</blockquote>\n\n<p>I already reduced the problem to the minimum by removing any <code>#define</code> and have absolutely no clue why this can happen.</p>\n"}, {"tags": ["c", "file", "pointers", "null", "initialization"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1551261228, "post_id": 54902447, "comment_id": 96572353, "body": "<code>errorList</code> is not pointing to anything - it is uninitialised. So in function <code>addError</code> when you dereference it, that is <i>undefined behaviour</i>. Also, you don&#39;t check if the file opened successfully."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1551261396, "post_id": 54902447, "comment_id": 96572435, "body": "You have managed to make your code unreadable to yourself by hiding pointers behind typedefs. So you don&#39;t even see that you never allocate any memory to point at."}, {"owner": {"reputation": 50, "user_id": 6118773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vG5OW.jpg?s=128&g=1", "display_name": "oriel", "link": "https://stackoverflow.com/users/6118773/oriel"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551263301, "post_id": 54902447, "comment_id": 96573688, "body": "Sorry, I added it. my mistake. But, it still the same result. @WeatherVane Does it matter if file isn&#39;t open properly.? I don&#39;t use it."}, {"owner": {"reputation": 50, "user_id": 6118773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vG5OW.jpg?s=128&g=1", "display_name": "oriel", "link": "https://stackoverflow.com/users/6118773/oriel"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551272994, "post_id": 54902447, "comment_id": 96579519, "body": "O.K. I found the problem. the variable &quot;errorList&quot; get a random initial value -&gt; sometimes it get NULL. My method access it&#39;s &quot;next&quot; data-member in case it is (!=NULL) hence sometimes it dropped me &quot;seg fault&quot;. it only worked well when the random value was NULL. I think it depends on the compiler and that&#39;s why in terminal it had worked always because it gives it always 0 (NULL). Even though I don&#39;t allocated memory for it in <code>addError</code> This is suppouse to work. Thank you for trying to help. @Lundin, can you please remove the &quot;duplicate question&quot; it not even close to that one."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1551289217, "post_id": 54902447, "comment_id": 96589567, "body": "@oriel it does not depend on the compiler, but on your luck. You have to initialise variables. Sometimes they happen to be NULL but it&#39;s basically random. This is what one of the duplicates is about and it is very close."}], "owner": {"reputation": 50, "user_id": 6118773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vG5OW.jpg?s=128&g=1", "display_name": "oriel", "link": "https://stackoverflow.com/users/6118773/oriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "closed_date": 1551261431, "answer_count": 0, "score": 0, "last_activity_date": 1551262829, "creation_date": 1551260872, "last_edit_date": 1551262829, "question_id": 54902447, "link": "https://stackoverflow.com/questions/54902447/c-segmentation-fault-core-dumped-undefined-behavior-without-assign-null-to", "closed_reason": "Duplicate", "title": "C - Segmentation fault (core dumped): Undefined behavior without assign NULL to a pointer", "body": "<pre><code>typedef struct node* ptr;\n\ntypedef struct node {\n  ptr next;\n} error;\n\n/*Methods*/\nvoid addError(ptr*);\n\nint main(int argc, char* argv[]){\n\nFILE *file;\nptr errorList;\nchar line[82];\n\nwhile(*(++argv)){\n    file = fopen (\"avc\",\"r\");\n    addError(&amp;errorList);\n    }\nreturn 0;\n}\nvoid addError(ptr *hptr){\n    ptr t = *hptr;\n    while (t)\n        t = t -&gt; next;\n    t = (ptr) malloc(sizeof(error));\n}\n</code></pre>\n\n<p>Hello, \nI have a problem with understand some basics.\nthis code is a part of a larger program I'm writing.\nWhen I run the whole program in ubuntu terminal it work properly but when I try it on codeblocks it have undefined behavior - sometimes it have seg fault and sometimes it work well.\nI run this with the same 3 arguments each time.</p>\n\n<p>I have tried to isolate to problematic code with deleting some lines that have no affect on the issue and that (code above) is the minimal result.</p>\n\n<p>I have noticed 3 different cases that I need help to understand,</p>\n\n<ol>\n<li><p>If I delete <code>char line[82];</code> it work properly. How this affect the behavior in running time? maybe my answer in Q2 is the same here?</p></li>\n<li><p>If I assign NULL to file variable I get: <code>FILE *file = NULL;</code> and leave the <code>char line[82];</code> as it is in the code above - it work properly. MY guess is that the garbage in <code>file</code> pointer is mixed with the allocated memory for <code>line</code>. Am I right? \nIf so, why a pointer with that declaration need to be initialized with NULL? I saw in some sites that it not NECESSARY.</p></li>\n<li><p>with that minimal code I get the same behavior in both 'terminal and codeblocks' - the problem that sometimes it have \"seg fault\" and sometimes not. - why in larger code it work properly in terminal but with deleting some code lines that have no connection with those variable, it getting worst - the unexpected result.</p></li>\n</ol>\n\n<p>Thank you guys, very much!</p>\n"}, {"tags": ["c++", "c", "printf"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1551260972, "post_id": 54902438, "comment_id": 96572185, "body": "Why the cast to <code>char*</code> and the use of <code>%s</code>? Are you saying that <code>ID</code> holds string data really even though it is declared as <code>uint64_t[10]</code>?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1551261274, "post_id": 54902438, "comment_id": 96572378, "body": "<code>using sprintf.</code> - The data are numbers between 0 and 2^64 - 1. In what <i>format</i> do you want to store the data? As a string representing a binary number? As a string with a base 10 number? As a string with a hexadecimal number? As a string with a octal numbers? Or do you want to copy the bytes that consist of the number exactly into other memory address?"}, {"owner": {"reputation": 27, "user_id": 10083150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e42245d85c73dca35779b6446beae2d?s=128&d=identicon&r=PG&f=1", "display_name": "blazingcannon", "link": "https://stackoverflow.com/users/10083150/blazingcannon"}, "edited": false, "score": 0, "creation_date": 1551261322, "post_id": 54902438, "comment_id": 96572401, "body": "ID is set from my app, so if I set ID as Hello from my app, ID will look like -   ID[0]=&#39;H&#39;, ID[1] = &#39;e&#39;,ID[2] = &#39;l&#39;, ID[3] = &#39;l&#39;, ID[4] = &#39;0&#39;; each of them is index is unsigned long long"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1551261624, "post_id": 54902438, "comment_id": 96572583, "body": "@blazingcannon This information should be in the question. It&#39;s vital to understand what you want to do."}, {"owner": {"reputation": 27, "user_id": 10083150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e42245d85c73dca35779b6446beae2d?s=128&d=identicon&r=PG&f=1", "display_name": "blazingcannon", "link": "https://stackoverflow.com/users/10083150/blazingcannon"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1551261648, "post_id": 54902438, "comment_id": 96572594, "body": "@KamilCuk - Like I&#39;ve given an example above, I just want Hello to get appended to my dispvar as characters."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1551261648, "post_id": 54902438, "comment_id": 96572596, "body": "Can you give example input and example output? As in <code>ID[0] = 48, ID[1] = 49, ID[3] = 50</code> and <code>dispvar=&quot;123&quot;</code> ? <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ascii table</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551261993, "post_id": 54902438, "comment_id": 96572818, "body": "The whole point of using sprintf is for it to do the string conversion. If the data was in string format in the first place, you wouldn&#39;t need it. Thus the <code>%s</code> format specifier and the <code>char*</code> cast is nonsense. The correct format specifier to use for printing uint64_t is <code>&quot;%&quot;PRIu64</code> from inttypes.h."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551262157, "post_id": 54902438, "comment_id": 96572930, "body": "@Lundin But (for some unknown reason) the OP really does have character data in the ID array"}, {"owner": {"reputation": 1317, "user_id": 545546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce09f7d092cbe5f4cdf3977c736eac81?s=128&d=identicon&r=PG", "display_name": "sdkljhdf hda", "link": "https://stackoverflow.com/users/545546/sdkljhdf-hda"}, "edited": false, "score": 0, "creation_date": 1551264131, "post_id": 54902438, "comment_id": 96574222, "body": "<code>auto p = dispvar + sprintf(dispvar, &quot;\\n Device ID is &quot;); std::copy(std::begin(ID), std::end(ID), p);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1551261725, "creation_date": 1551261725, "answer_id": 54902768, "question_id": 54902438, "link": "https://stackoverflow.com/questions/54902438/how-to-use-sprintf-to-append-array-of-uint-64-type-to-an-array-of-char/54902768#54902768", "title": "How to use sprintf to append array of uint_64 type to an array of char?", "body": "<p>The ID values apparently contain character data with a terminating zero, at least that's what I'm assuming below.</p>\n\n<pre><code>char buffer[11];\nfor (int i = 0; i &lt; 10; ++i)\n    buffer[i] = ID[i];\nbuffer[10] = '\\0';\nsprintf(dispvar,\"\\n Device ID is %s\", buffer);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1551262207, "post_id": 54902857, "comment_id": 96572962, "body": "The <code>if (ID[i] == &#39;\\0&#39;)</code> shouldn&#39;t be necessary. If it was, you should iterate <code>while(ID[i] != &#39;\\0&#39;)</code> instead."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1551261977, "creation_date": 1551261977, "answer_id": 54902857, "question_id": 54902438, "link": "https://stackoverflow.com/questions/54902438/how-to-use-sprintf-to-append-array-of-uint-64-type-to-an-array-of-char/54902857#54902857", "title": "How to use sprintf to append array of uint_64 type to an array of char?", "body": "<p>There is a little need for conversion, because the data are stored in <code>uint64_t</code> array.</p>\n\n<pre><code>// first populate the dispvar with initial string\nint idx = sprintf(dispvar, \"\\n Device ID is \");\n\n// we have the array\nuint64_t ID[10] = { 'H', 'e', 'l', 'l', 'o', '\\0' };\n// for each element in ID\nfor (size_t i = 0; i &lt; sizeof(ID)/sizeof(*ID); ++i) {\n      // assert(isprint(ID[i])); // extra assertion\n      // we put the ID[i] into our dispvar\n      dispvar[idx++] = ID[i];\n      // null terminte character is also copied. We need to break.\n      if (ID[i] == '\\0') {\n           break;\n      }\n}\n\n// should work as expected\nprintf(\"%s\\n\", dispvar);\n</code></pre>\n\n<p>There is no way you could do this using <code>sprintf</code>. You also can copy the array into a char buffer manually and then call <code>sprintf</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 10083150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e42245d85c73dca35779b6446beae2d?s=128&d=identicon&r=PG&f=1", "display_name": "blazingcannon", "link": "https://stackoverflow.com/users/10083150/blazingcannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 54902857, "answer_count": 2, "score": 0, "last_activity_date": 1551439468, "creation_date": 1551260833, "last_edit_date": 1551439468, "question_id": 54902438, "link": "https://stackoverflow.com/questions/54902438/how-to-use-sprintf-to-append-array-of-uint-64-type-to-an-array-of-char", "title": "How to use sprintf to append array of uint_64 type to an array of char?", "body": "<p>I want to append the data in <code>ID[10]</code> to <code>dispvar</code> using sprintf. But the problem is that ID is of <code>uint64_t</code> type and <code>dispvar</code> is of type <code>char</code>. So when I try the below code, I get only the first value stored in <code>ID</code> appended to <code>dispvar</code>. How can I append the entire content of <code>ID</code> to <code>dispvar</code>? </p>\n\n<pre><code>char dispvar[150]={0};\n\nunion Device_Details{\n    struct DeviceDetails{\n        uint64_t FirmwareID[10];\n        uint64_t No_of_Mot;\n        uint64_t ID[10];\n        uint64_t RTC_Data[7];\n        uint64_t BatStat;       \n    }Device;\n    uint64_t Buffer[11];\n}DeviceData;\n\nsprintf(dispvar,\"\\n Device ID is %s\", ( char *)ID);\n</code></pre>\n\n<p>ID is set from my app, so if I set ID as Hello from my app, ID will look like - ID[0]='H',ID[1] = 'e',ID[2] = 'l', ID[3] = 'l', ID[4] = '0'; each of them is index of unsigned long long type.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZkReg.jpg\" rel=\"nofollow noreferrer\">IMAGE</a></p>\n"}, {"tags": ["c", "gcc", "cygwin", "gcc8"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551260658, "post_id": 54902205, "comment_id": 96571954, "body": "Cygwin uses a different standard lib than gcc/Linux so that would be why. You appear to have numerous bugs caused by the use of <code>strncpy</code>. It is safer to use <code>strcpy</code> or <code>memcpy</code> instead. See <a href=\"https://stackoverflow.com/a/46563868/584518\">Which functions from the standard library must (should) be avoided?</a>"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1551260772, "post_id": 54902205, "comment_id": 96572038, "body": "I&#39;m not sure it is related to the problem, but normally <code>strncpy</code> is used with a length depending on the available space in the buffer. If you copy <code>strlen(sourcestring)</code> you do not prevent buffer overflow and you will not copy the terminating <code>\\0</code>. In the second case if the specified length equals the size of the destination you don&#39;t reserve a byte for the terminating <code>\\0</code>. Both warnings indicate possible problems. (I don&#39;t know if the warning level depends on the GCC version.)"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1551263601, "post_id": 54902205, "comment_id": 96573875, "body": "@Bodo: I&#39;m adding the +1 and am copying the terminating <code>\\0</code>."}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551260871, "creation_date": 1551260159, "last_edit_date": 1551260871, "question_id": 54902205, "link": "https://stackoverflow.com/questions/54902205/gcc-8-wstringop-truncation-inconsistent-behavior", "title": "gcc-8 -Wstringop-truncation - inconsistent behavior?", "body": "<p>I'm compiling some C code (will provide link if really necessary) using GCC 8.2.0 on Linux, and using GCC 8.1.0 on Cygwin (the latter is an automated CI build).</p>\n\n<p>On Linux, everything passes fine. On Cygwin, I get - among others - the following warnings:</p>\n\n<pre><code>C:\\Users\\travis\\build\\eyalroz\\ssb-dbgen\\src\\bm_utils.c: In function 'e_str':\nC:\\Users\\travis\\build\\eyalroz\\ssb-dbgen\\src\\bm_utils.c:199:5: warning: 'strncpy' output truncated before terminating nul copying as many bytes from a string as its length [-Wstringop-truncation]\n     strncpy(dest + loc, strtmp, len);\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nC:\\Users\\travis\\build\\eyalroz\\ssb-dbgen\\src\\bm_utils.c:197:11: note: length computed here\n     len = strlen(strtmp);\n           ^~~~~~~~~~~~~~\n</code></pre>\n\n<p>and</p>\n\n<pre><code>C:\\Users\\travis\\build\\eyalroz\\ssb-dbgen\\src\\build.c:697:5: warning: 'strncpy' specified bound 10 equals destination size [-Wstringop-truncation]\n     strncpy(d-&gt;dayofweek, weekday_names[d-&gt;daynuminweek-1],D_DAYWEEK_LEN+1);\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nC:\\Users\\travis\\build\\eyalroz\\ssb-dbgen\\src\\build.c:698:5: warning: 'strncpy' specified bound 10 equals destination size [-Wstringop-truncation]\n     strncpy(d-&gt;month,month_names[d-&gt;monthnuminyear-1],D_MONTH_LEN+1);\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>I'm not doing anything, as far as I can tell, which should cause different compilation flags in both cases. Why am I getting the warnings only in one environment? Could it be the GCC version?</p>\n"}, {"tags": ["c", "regex", "posix"], "comments": [{"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551260775, "post_id": 54902103, "comment_id": 96572040, "body": "Only <code>regcomp</code> needs <code>REG_EXTENDED</code>. Then use <code>regexec(&amp;regexCompiled, input, 0, NULL, 0)</code>"}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551263469, "post_id": 54902103, "comment_id": 96573803, "body": "You can see <a href=\"https://ideone.com/e8nlYl\" rel=\"nofollow noreferrer\">it works well</a>. You must have another issue somewhere."}, {"owner": {"reputation": 23, "user_id": 6946169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557663c8f99e31e1a89ed3beee341bdf?s=128&d=identicon&r=PG&f=1", "display_name": "jake929", "link": "https://stackoverflow.com/users/6946169/jake929"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551263992, "post_id": 54902103, "comment_id": 96574123, "body": "@WiktorStribi\u017cew Thanks, after some time looking at the code, I noticed that I was missed a symbol in my pattern."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6946169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557663c8f99e31e1a89ed3beee341bdf?s=128&d=identicon&r=PG&f=1", "display_name": "jake929", "link": "https://stackoverflow.com/users/6946169/jake929"}, "edited": false, "score": 0, "creation_date": 1551261474, "post_id": 54902241, "comment_id": 96572491, "body": "I changed to following and it does not work. Removing REG_EXTENDED does not work at all: int rc = regcomp(&amp;regexCompiled, pattern, REG_EXTENDED); regexec(&amp;regexCompiled, &quot;0 1&quot;, 0, NULL, 0)"}, {"owner": {"reputation": 23, "user_id": 6946169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557663c8f99e31e1a89ed3beee341bdf?s=128&d=identicon&r=PG&f=1", "display_name": "jake929", "link": "https://stackoverflow.com/users/6946169/jake929"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551262588, "post_id": 54902241, "comment_id": 96573216, "body": "@WiktorStribi\u017cew Can you provide full code in separate answer?"}, {"owner": {"reputation": 23, "user_id": 6946169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557663c8f99e31e1a89ed3beee341bdf?s=128&d=identicon&r=PG&f=1", "display_name": "jake929", "link": "https://stackoverflow.com/users/6946169/jake929"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551262972, "post_id": 54902241, "comment_id": 96573454, "body": "@WiktorStribi\u017cew I put a 0 on ct_flags argument for regexec and it didn&#39;t work. I tried that with and without REG_EXTENDED supplied as a flag to regcomp. Followed what was described as the solution and it&#39;s not working."}, {"owner": {"reputation": 23, "user_id": 6946169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557663c8f99e31e1a89ed3beee341bdf?s=128&d=identicon&r=PG&f=1", "display_name": "jake929", "link": "https://stackoverflow.com/users/6946169/jake929"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551263311, "post_id": 54902241, "comment_id": 96573699, "body": "@WiktorStribi\u017cew Alright, I&#39;ve added the edits in main post."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1551260271, "creation_date": 1551260271, "answer_id": 54902241, "question_id": 54902103, "link": "https://stackoverflow.com/questions/54902103/start-and-end-anchors-not-working/54902241#54902241", "title": "Start (^) and end ($) anchors not working", "body": "<p>You are passing <code>REG_EXTENDED</code> to <code>regexec()</code>, that's not a valid flag for that call.</p>\n\n<p><a href=\"https://linux.die.net/man/3/regcomp\" rel=\"nofollow noreferrer\">The manual page</a> says:</p>\n\n<blockquote>\n  <p>eflags may be the bitwise-or of one or both of <code>REG_NOTBOL</code> and <code>REG_NOTEOL</code> which cause changes in matching behavior described below. </p>\n</blockquote>\n\n<p>Probably the actual value of <code>REG_EXTENDED</code> matches one of those.</p>\n\n<p>Changing the code to pass <code>0</code> as the final argument to <code>regexec()</code> makes it match.</p>\n"}], "owner": {"reputation": 23, "user_id": 6946169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557663c8f99e31e1a89ed3beee341bdf?s=128&d=identicon&r=PG&f=1", "display_name": "jake929", "link": "https://stackoverflow.com/users/6946169/jake929"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 54902241, "answer_count": 1, "score": 0, "last_activity_date": 1551263728, "creation_date": 1551259839, "last_edit_date": 1551263728, "question_id": 54902103, "link": "https://stackoverflow.com/questions/54902103/start-and-end-anchors-not-working", "title": "Start (^) and end ($) anchors not working", "body": "<p>Basically I'm using following pattern in my C program (See <a href=\"https://stackoverflow.com/q/54900643/6946169\">Regular expression matching an infinite pattern</a>):</p>\n\n<pre><code>^[0-9]( [0-9])*$\n</code></pre>\n\n<p>with following code:</p>\n\n<pre><code>char *pattern = \"^[0-9]( [0-9])*$\";\nregex_t regexCompiled;\nint rc = regcomp(&amp;regexCompiled, pattern, REG_EXTENDED);\nif (rc != 0) {\n    char msgbuf[100];\n    regerror(rc, &amp;regexCompiled, msgbuf, sizeof (msgbuf));\n    fprintf(stderr, \"Regex match failed: %s\\n\", msgbuf);\n    exit(EXIT_FAILURE);\n}\n\nif (regexec(&amp;regexCompiled, \"0 1\", 0, NULL, REG_EXTENDED) == 0) {\n    printf(\"Valid\\n\");\n} else {\n    printf(\"Invalid\\n\");\n}\n</code></pre>\n\n<p>Where I exec against the string \"0 1\", which is valid for the pattern and it's not working. The '^' and '$' are not functioning. Why is that? and how can I make it work?</p>\n"}, {"tags": ["c", "matlab"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551259961, "post_id": 54901941, "comment_id": 96571509, "body": "Have you tried any of the offerings revealed by <a href=\"https://www.google.com/search?q=emlrt.h\" rel=\"nofollow noreferrer\">https://www.google.com/search?q=emlrt.h</a>?"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1551263501, "post_id": 54901941, "comment_id": 96573825, "body": "It is just an interface for exporting that you probably don&#39;t need."}], "owner": {"reputation": 11, "user_id": 11124048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WiooTY27DRo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBl630EixQSAL4yermchemNPDzXQ/mo/photo.jpg?sz=128", "display_name": "Reut Yfrach", "link": "https://stackoverflow.com/users/11124048/reut-yfrach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551295620, "creation_date": 1551259347, "last_edit_date": 1551295620, "question_id": 54901941, "link": "https://stackoverflow.com/questions/54901941/emlrt-h-file-in-c-language-wasnt-found", "title": "emlrt.h file in c language wasn&#39;t found", "body": "<p>We converted the MATLAB files to the C language, and ran the files in Visual-Studio.</p>\n\n<p>We have inserted all the required classes except the class: \"emlrt.h\". We were unable to insert and cause the project to compile properly.</p>\n\n<p>If someone knows of a version of the \"emlrt.h\" class that works on files that have been converted from Matlab, we will be happy to see it.</p>\n"}, {"tags": ["c++", "c", "visual-studio", "ide", "c-preprocessor"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551260141, "post_id": 54901860, "comment_id": 96571624, "body": "If your IDE can understand how the file will be compiled, then it should be able to do that. Probably CLion can do that as well."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1551260216, "post_id": 54901860, "comment_id": 96571678, "body": "Most modern IDEs do have some form of syntax highlighting that recognises preprocessor directives.   I&#39;m not aware of any that will do what you want.  Practically, the logic to identify code that has been removed by the preprocessor would be computationally too expensive to run in an IDE (slow down echoing of input, etc) and probably get things wrong too often to be useful.  A number of IDEs do handle some simple cases (e.g. greying out text wrapped in <code>#ifdef 0</code> and <code>#endif</code>) but you&#39;re seeking much more than that.  Main tip:  don&#39;t rely excessively on the preprocessor."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1551260531, "post_id": 54901860, "comment_id": 96571880, "body": "@Peter At least Visual Studio 2015 and later do this properly. I don&#39;t agree that letting the preprocessor run over a source file (and, implicitly, its includes) is costly. Of course you don&#39;t want to do it after every key stroke but this is pretty trivial stuff to get right."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1551260704, "post_id": 54901860, "comment_id": 96571992, "body": "I don&#39;t understand the question with regards to Visual Studio. It <a href=\"https://i.stack.imgur.com/68jN0.png\" rel=\"nofollow noreferrer\">already does exactly what you ask for</a>, so what&#39;s the question? Going by <a href=\"https://stackoverflow.com/questions/14586672/disable-or-fix-ifdef-sensitive-colouring-and-intellisense-in-visual-studio\">this</a> random Q/A, it exists since at least VS2005 and works much better since VS2010."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551261398, "post_id": 54901860, "comment_id": 96572436, "body": "@MaxLanghof - I didn&#39;t say running the preprocessor is costly.   I said that the logic to characterise how it changes the code would be, in order to identify and display/highlight the deltas.   For simple cases, yeah okay.   But for macros that do token pasting, stringification, and the like, the notion of &quot;removed&quot; is a lot more nebulous.  And there are many other things the preprocessor can do."}, {"owner": {"reputation": 1659, "user_id": 76608, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c63f79977d96c05797657de07362d6a6?s=128&d=identicon&r=PG", "display_name": "Olav", "link": "https://stackoverflow.com/users/76608/olav"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551262061, "post_id": 54901860, "comment_id": 96572856, "body": "@MaxLanghof that&#39;s an answer!  Will try to add it in my project settings."}, {"owner": {"reputation": 1659, "user_id": 76608, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c63f79977d96c05797657de07362d6a6?s=128&d=identicon&r=PG", "display_name": "Olav", "link": "https://stackoverflow.com/users/76608/olav"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1551262140, "post_id": 54901860, "comment_id": 96572911, "body": "@Peter Calculating everything is perhaps expensive, but the main usecase is checking the effect of single defines."}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 9, "last_activity_date": 1551261302, "last_edit_date": 1551261302, "creation_date": 1551259191, "answer_id": 54901889, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised/54901889#54901889", "title": "How can C/C++ #define directives be visualised?", "body": "<p>One way is to see the source after the preprocessing, using <em>gcc</em> (for C) or <em>g++</em> (for c++) just use the option <code>-E</code></p>\n\n<p>For instance having the file <code>p.cc</code></p>\n\n<pre><code>#ifdef FOO\n# define BAR 1\n#else\n# define BAR 2\n#endif\n\nint main()\n{\n  return BAR;\n}\n</code></pre>\n\n<p>if I do without defining  <em>FOO</em> I have :</p>\n\n<pre><code>/tmp % gcc -E p.cc\n# 1 \"p.cc\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 1 \"p.cc\"\n\nint main()\n{\n  return 2;\n}\n</code></pre>\n\n<p>if I do defining  <em>FOO</em> I have :</p>\n\n<pre><code>/tmp % gcc -DFOO -E p.cc\n# 1 \"p.cc\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 1 \"p.cc\"\n\nint main()\n{\n  return 1;\n}\n</code></pre>\n\n<hr>\n\n<p>Note : you probably have <code>#include</code> in your source so after the preprocessing you get a lot of lines coming from the included files, for the question <a href=\"https://stackoverflow.com/questions/54891248/how-to-show-preprocessed-code-ignoring-includes-with-gcc/54891562\">How to show 'preprocessed' code ignoring includes with GCC</a> I put an answer to bypass them.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1551263878, "last_edit_date": 1551263878, "creation_date": 1551262420, "answer_id": 54903009, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised/54903009#54903009", "title": "How can C/C++ #define directives be visualised?", "body": "<p>Visual Studio does this already by default, at least since VS2005 and much better since VS2010 (going by <a href=\"https://stackoverflow.com/questions/14586672/disable-or-fix-ifdef-sensitive-colouring-and-intellisense-in-visual-studio\">this</a> Q/A):</p>\n\n<p><a href=\"https://i.stack.imgur.com/68jN0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/68jN0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Edit: Added in response to another answer:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Fx3Du.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fx3Du.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551263897, "post_id": 54903116, "comment_id": 96574065, "body": "How is your example a problem for the feature in question? <a href=\"https://i.stack.imgur.com/Fx3Du.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/Fx3Du.png</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551264025, "post_id": 54903116, "comment_id": 96574150, "body": "It just requires the entire preprocessed form to be available."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1551264313, "post_id": 54903116, "comment_id": 96574359, "body": "That is also true for both intellisense-esque things and the actual compiler (and in both cases preprocessing a single TU should not take a significant amount of time). But I guess we both have different ideas of what &quot;visualize <code>#define</code>s&quot; implies."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551264333, "post_id": 54903116, "comment_id": 96574374, "body": "Yes, certainly."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1551264317, "last_edit_date": 1551264317, "creation_date": 1551262785, "answer_id": 54903116, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised/54903116#54903116", "title": "How can C/C++ #define directives be visualised?", "body": "<blockquote>\n  <p>How can i visualise C/C++ #define's?</p>\n</blockquote>\n\n<p>Short answer: in general <strong>you cannot</strong> (and notice that you don't define what \"visualize\" means in your question). You really want to look at the preprocessed form. With <a href=\"https://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> you practically get it with <code>gcc -C -E</code>.</p>\n\n<p>As a provocative example, <code>__TIME__</code> or <code>__LINE__</code> is a <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html\" rel=\"nofollow noreferrer\"><em>preprocessor magic predefined macro</em></a> (and so is the <code>__COUNT__</code> which is a GCC extension). You are allowed to code</p>\n\n<pre><code>#if __LINE__ % 2 == 0\nprintf(\"hello from line %d\\n\", __LINE__);\n#endif\n</code></pre>\n\n<p>and the behavior depends upon where that weird code is located (on an even-numbered line, or an odd-numbered one).</p>\n\n<p>Ok, that example is contrived, but legal. Check by reading the C11 standard <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a>.</p>\n\n<p>You could also imagine some <code>#if __TIME__[1] == '2'</code> but probably that won't compile (because preprocessor expressions cannot use the <code>[]</code> indexing). However, some <code>if (_TIME__[5] == '2') printf(\"hello\\n\");</code> would compile (and be optimized differently, depending on the moment you are compiling it).</p>\n\n<p>And in practice, code nearly as contrived as the one above does exist. A good example of C code using a lot various preprocessor features is the Linux <a href=\"https://www.kernel.org/\" rel=\"nofollow noreferrer\">kernel source</a> code (you might be interested by <a href=\"http://coccinelle.lip6.fr/\" rel=\"nofollow noreferrer\">coccinelle</a>, a tool knowing that). The first step of its build (using <code>make config</code> or <code>make menuconfig</code>) generates a lot of headers defining the features of your particular kernel. There are many thousands of such configuration options (my <code>/boot/config-4.19.0-3-amd64</code> has 7352 configuration choices, and each of them translates to some preprocessor macro used in <code>#if</code>).</p>\n"}], "owner": {"reputation": 1659, "user_id": 76608, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c63f79977d96c05797657de07362d6a6?s=128&d=identicon&r=PG", "display_name": "Olav", "link": "https://stackoverflow.com/users/76608/olav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 54903009, "answer_count": 3, "score": 1, "last_activity_date": 1551264317, "creation_date": 1551259091, "last_edit_date": 1551263509, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised", "title": "How can C/C++ #define directives be visualised?", "body": "<p>I am looking for ways to visualize the effects of #define's - For example that code not seen by the compiler is shown in a different color.</p>\n\n<p>Primarily visual studio, but nice to know about other environments?\nIdeally, also code seen by the compiler, but will not be run.</p>\n"}, {"tags": ["c++", "c", "visual-studio", "debugging", "configuration"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1551259229, "post_id": 54901837, "comment_id": 96571073, "body": "Nope. A simple demo is to declare two arrays, and write past the end of one to modify the other."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1551259501, "post_id": 54901837, "comment_id": 96571229, "body": "Use the STL (many implementations of the STL have debugging support), don&#39;t use arrays or pointers, generally adopt a safety first approach."}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1551259919, "creation_date": 1551259919, "answer_id": 54902126, "question_id": 54901837, "link": "https://stackoverflow.com/questions/54901837/is-an-ill-formed-c-or-c-program-guaranteed-to-crash-under-debug-configuration/54902126#54902126", "title": "Is an ill formed C or C++ program guaranteed to crash under DEBUG configuration in Visual Studio", "body": "<p>No.  There is no way to <em>guarantee</em> that code with undefined behaviour will crash.</p>\n\n<p>Certainly selecting the DEBUG configuration will increase the chance that some undefined behaviours will be detected at run time (although it can cause others to <em>not</em> be detected).  In particular if you don't use raw arrays and pointers, but instead use the STL, then the DEBUG version has <em>many</em> more checks for valid use.  (I assume you are using the Microsoft library, because gcc/clang don't tend to use the terms DEBUG and RELEASE.)  </p>\n\n<p>It is also much harder (although not impossible) to compile code with UB or memory leaks if you use the STL.</p>\n"}, {"comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1551275396, "post_id": 54902143, "comment_id": 96580987, "body": "Sorry, but <i>Tools like VS has a tendency to zero-out all memory in debug build - even local memory, making bugs pass unnoticed</i> is generally wrong. Since at least VS.2005 it has had bit patterns of various fills to explicitely find issues like these in debug builds. See <a href=\"https://stackoverflow.com/a/127404/2331956\">stackoverflow.com/a/127404/2331956</a> Sure, those values themselves can also hide bugs but they&#39;re generally chosen to expose more bugs than they hide."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1551275949, "post_id": 54902143, "comment_id": 96581295, "body": "@MikeVine Okay. Luckily I haven&#39;t used VS since early 2000s, when it definitely did crap like that. There&#39;s no version mentioned in the question though :) And VS isn&#39;t/wasn&#39;t the only compiler which liked to sugar-coat debug builds with zero-out of the stack. Still, the remark about optimization holds true for any compiler, so there&#39;s plenty of UB which won&#39;t surface during debug, but only in release build."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1551276085, "post_id": 54902143, "comment_id": 96581383, "body": "@MikeVine Btw the magic numbers in the linked post have nothing to do with stack zero-out in debug build. That would be a &quot;stack canary&quot;."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1551276120, "post_id": 54902143, "comment_id": 96581420, "body": "The stacks are all set to <code>0xCC</code> in debug builds afair."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1551276792, "post_id": 54902143, "comment_id": 96581858, "body": "@MikeVine Ok, I fail to get anything but gibberish out of VS online C compilers when I try to dump the stack but maybe I failed to compile in debug build."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1551259960, "creation_date": 1551259960, "answer_id": 54902143, "question_id": 54901837, "link": "https://stackoverflow.com/questions/54901837/is-an-ill-formed-c-or-c-program-guaranteed-to-crash-under-debug-configuration/54902143#54902143", "title": "Is an ill formed C or C++ program guaranteed to crash under DEBUG configuration in Visual Studio", "body": "<p>No. It's the programmer's responsibility to handle poorly-defined behavior.</p>\n\n<p>The summary list of <em>documented</em> cases of UB in C alone is 15 pages long. The undocumented cases are even more numerous - that is, doing things beyond what's even mentioned in the standard. And lets not even mention C++, where the list of poorly-defined behavior could probably be distributed as a separate, thick publication.</p>\n\n<p>And then each single case of UB is wildly different, many of them only appearing in run-time, and the outcome could be anything. The compiler can only do so much to help, it's not it's job to point out potential run-time errors. And then the VS C compiler barely follows the standard in the first place.</p>\n\n<p>Debug builds could actually be worse for detecting UB than release builds. Tools like VS has a tendency to zero-out all memory in debug build - even local memory, making bugs pass unnoticed. And with no/low optimizations in debug mode, some bugs will never manifest themselves.</p>\n\n<p>To weed out undefined behavior, you could use external static/dynamic analysis tools and coding standards such as MISRA or CERT. But in the end it always comes down to language knowledge. Code reviews where some hardened C or C++ veteran get to have a say are very valuable, in order to catch bugs early on.</p>\n"}], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 54902143, "answer_count": 2, "score": 0, "last_activity_date": 1551259960, "creation_date": 1551259017, "question_id": 54901837, "link": "https://stackoverflow.com/questions/54901837/is-an-ill-formed-c-or-c-program-guaranteed-to-crash-under-debug-configuration", "title": "Is an ill formed C or C++ program guaranteed to crash under DEBUG configuration in Visual Studio", "body": "<p>Many of the times that I used to code C and some C++ under the RELEASE configuration in visual studio, I had slippery bugs that escaped my notice, and the code, though invoking undefined behavior, seemed to work fine. After several runs however, it becomes apparent that the program is bugged due to different unusual results and/or crashes.</p>\n\n<p>So I decided to save my self the trouble and be on the safe side by selecting the DEBUG configuration while the code is still under development.</p>\n\n<p>But does that guarantee that the program will come to a stop if the code is invoking undefined behavior of any sort?</p>\n"}, {"tags": ["c++", "c", "linux", "epoll"], "answers": [{"comments": [{"owner": {"reputation": 6384, "user_id": 269469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bvqvR.png?s=128&g=1", "display_name": "goji", "link": "https://stackoverflow.com/users/269469/goji"}, "edited": false, "score": 0, "creation_date": 1551253680, "post_id": 54900412, "comment_id": 96568362, "body": "Okay, I did read the docs but missed the part about EPOLLERR and EPOLLHUP. Thanks."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 3, "last_activity_date": 1551253499, "creation_date": 1551253499, "answer_id": 54900412, "question_id": 54900175, "link": "https://stackoverflow.com/questions/54900175/is-it-valid-to-add-a-file-descriptor-to-epoll-with-events-set-to-zero/54900412#54900412", "title": "Is it valid to add a file descriptor to epoll with events set to zero?", "body": "<p>It should be valid, and the <code>EPOLLERR</code> and <code>EPOLLHUP</code> are always included even if you're not requesting them, so setting <code>events = 0</code> will still respond on those 2 events.\nRemember to check the return value of <code>epoll_ctl</code> though.</p>\n\n<p>The documentation states:</p>\n\n<blockquote>\n  <p>The events member is a bit mask composed by ORing together <strong>zero or more</strong> of the following  available event types:</p>\n  \n  <p>EPOLLERR\n                Error  condition happened on the associated file descriptor.  This event is also reported for the write end of a pipe\n  when the read end has been closed.  <strong>epoll_wait(2) will always report\n  for this event; it is not nec\u2010\n                essary to set it in events.</strong></p>\n  \n  <p>EPOLLHUP\n                Hang up happened on the associated file descriptor.  <strong>epoll_wait(2) will always wait for this event; it is not necessary to set it in events.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 6384, "user_id": 269469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bvqvR.png?s=128&g=1", "display_name": "goji", "link": "https://stackoverflow.com/users/269469/goji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 54900412, "answer_count": 1, "score": 2, "last_activity_date": 1551253499, "creation_date": 1551252568, "last_edit_date": 1551253142, "question_id": 54900175, "link": "https://stackoverflow.com/questions/54900175/is-it-valid-to-add-a-file-descriptor-to-epoll-with-events-set-to-zero", "title": "Is it valid to add a file descriptor to epoll with events set to zero?", "body": "<p>Is it valid to add a file descriptor to epoll with epoll_event.events set to zero? What can be expected to happen when calling epoll_wait? See abridged example:</p>\n\n<pre><code>struct epoll_event event = {};\nevent.data.fd = fd;\nevent.events = 0;\n\nepoll_ctl(efd, EPOLL_CTL_ADD, fd, &amp;event);\nepoll_wait(efd, &amp;event, 1, -1);\n</code></pre>\n\n<p>What semantics can I rely on from the epoll_wait call in this instance? Are there any events that are still delivered even when events = 0?</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 1972, "user_id": 4177009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c85e085e7e8690bb0ebcd33d054c69?s=128&d=identicon&r=PG", "display_name": "Ture P&#229;lsson", "link": "https://stackoverflow.com/users/4177009/ture-p%c3%a5lsson"}, "edited": false, "score": 0, "creation_date": 1551253145, "post_id": 54900071, "comment_id": 96568157, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12882314/a-way-to-reverse-a-string-using-recursion-in-c-strange-to-me\">A way to reverse a string using recursion in C strange to me</a>"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "edited": false, "score": 0, "creation_date": 1551259012, "post_id": 54900302, "comment_id": 96570951, "body": "Isn&#39;t the if condition defined for both the function call as well as for the printf function.So does that mean when the condition is satisfied it skips both of them?"}, {"owner": {"reputation": 473, "user_id": 10691622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf43e4207699099be344ca313e702b6?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10691622/patrick"}, "reply_to_user": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "edited": false, "score": 0, "creation_date": 1551259479, "post_id": 54900302, "comment_id": 96571215, "body": "Yes. When the condition isn&#39;t satisfied (c = \\n) it will skip both of them and not print the newline."}], "tags": [], "owner": {"reputation": 473, "user_id": 10691622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf43e4207699099be344ca313e702b6?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10691622/patrick"}, "is_accepted": false, "score": 2, "last_activity_date": 1551253102, "creation_date": 1551253102, "answer_id": 54900302, "question_id": 54900071, "link": "https://stackoverflow.com/questions/54900071/string-reverse-using-recursion-exit-criteria/54900302#54900302", "title": "String reverse using recursion exit criteria", "body": "<p>When the function calls itself the printf just goes on hold, until the called function is done.</p>\n\n<p>With input \"Hi\\n\" it will look like this:</p>\n\n<pre><code>scanf -&gt; H\nreverseSentence()\n    scanf -&gt; i\n    reverseSentence()\n        scanf -&gt; \\n\n        return\n    printf -&gt; i\n    return\nprintf -&gt; H\nreturn\n</code></pre>\n\n<p>Stepping through with a debugger could help you understand.</p>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 2, "last_activity_date": 1551253495, "creation_date": 1551253495, "answer_id": 54900410, "question_id": 54900071, "link": "https://stackoverflow.com/questions/54900071/string-reverse-using-recursion-exit-criteria/54900410#54900410", "title": "String reverse using recursion exit criteria", "body": "<p>To understand this code, let's first look at the non-reversing version:</p>\n\n<pre><code>void reverseSentence() { \n    char c; \n    scanf(\"%c\", &amp;c); \n\n    if (c != '\\n')\n    {\n        printf(\"%c\",c); \n        reverseSentence(); \n    }\n}\n</code></pre>\n\n<p>It reads <em>one</em> character from stdin, and if that character isn't a newline, writes it back out. Then, instead of looping explicitly, it implicitly loops via recursion to read and print the next character:</p>\n\n<pre><code>local&gt; echo \"The elephants are coming!\" | ./a.out\nThe elephants are coming!local&gt;\n</code></pre>\n\n<p>The function is reading in and printing <em>one</em> character on every recursion.  Now if we reverse the order of these two lines as in the original:</p>\n\n<pre><code>        reverseSentence(); \n        printf(\"%c\",c); \n</code></pre>\n\n<p>The same thing happens except now we're putting procesing the next character ahead of processing the current one:</p>\n\n<pre><code>local&gt; echo \"The elephants are coming!\" | ./a.out\n!gnimoc era stnahpele ehTlocal&gt;\n</code></pre>\n\n<p>Still reading in and writing <em>one</em> character on each recursion but taking advantage of the fact that recurring first, then processing the current item processes data in reverse order.  Processing the current item and then recuring, processes data in the forward order.</p>\n"}], "owner": {"reputation": 313, "user_id": 5206986, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/075aae008a4545b7c6bf7db6b5fdd70b?s=128&d=identicon&r=PG&f=1", "display_name": "Combospirit", "link": "https://stackoverflow.com/users/5206986/combospirit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54900410, "answer_count": 2, "score": 0, "last_activity_date": 1551254936, "creation_date": 1551252117, "last_edit_date": 1551254936, "question_id": 54900071, "link": "https://stackoverflow.com/questions/54900071/string-reverse-using-recursion-exit-criteria", "title": "String reverse using recursion exit criteria", "body": "<pre><code>void reverseSentence() \n{ \n    char c; \n    scanf(\"%c\", &amp;c); \n\n    if(c != '\\n') \n    { \n        reverseSentence(); \n        printf(\"%c\", c); \n    } \n}\n</code></pre>\n\n<p>What I don't understand here is, if the recursion function is called again and again, when does the control go to print function and print the call stack?</p>\n"}, {"tags": ["c", "arrays", "loops", "math"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1551252243, "post_id": 54900049, "comment_id": 96567777, "body": "A few points about your code: Why do you pass <code>i</code> as an argument to the <code>fib</code> function, instead of defining it as a local variable inside the function? And after the loop the value of <code>i</code> can be equal to <code>50</code>, which is <i>out of bounds</i> of the array. Or the value of <code>i</code> could be less than <code>2</code> which means <code>i - 1</code> and <code>i - 2</code> could be out of bounds."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1551252461, "post_id": 54900049, "comment_id": 96567856, "body": "Regarding your problem, you might want to do some <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber duck debugging</a>. Why do you expect multiple outputs from your code, considering that you only have a <i>single</i> (and conditional!) <code>printf</code> call? Your function really doesn&#39;t make much sense, and it most certainly won&#39;t calculate a Fibonacci sequence. My guess is that you should do some <i>recursion</i> (since that&#39;s used in the formula you show)."}], "answers": [{"tags": [], "owner": {"reputation": 5258, "user_id": 1722025, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aS04m.jpg?s=128&g=1", "display_name": "asimes", "link": "https://stackoverflow.com/users/1722025/asimes"}, "is_accepted": true, "score": 1, "last_activity_date": 1551253777, "creation_date": 1551253777, "answer_id": 54900491, "question_id": 54900049, "link": "https://stackoverflow.com/questions/54900049/in-c-computing-an-equation-using-user-input-values-is-not-giving-the-expected-r/54900491#54900491", "title": "In C, computing an equation using user input values is not giving the expected result?", "body": "<p><strong>A couple points</strong>:</p>\n\n<ul>\n<li>Your program isn't recursive</li>\n<li>Compute all of Fib first with your recursive function then after\nhandle user input in a loop</li>\n</ul>\n\n<p><strong>The code below has the structure for dealing with user input, do the recursion</strong>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// It would make sense for this to store unsigned long long instead of double\n// because Fibonacci numbers are always positive integers\nunsigned long long Fib[50];\n\n// Your assignment specifically said use a recursive program to compute Fib.\n// This is not a recursive function, but it is correct, I will leave the\n// recursion for you to work out\nvoid populateFib() {\n    Fib[0] = 1;\n    Fib[1] = 1;\n    unsigned i;\n    for (i = 2; i &lt; 50; ++i)\n        Fib[i] = Fib[i - 1] + Fib[i - 2];\n}\n\nint main() {\n    // First compute Fib\n    populateFib();\n\n    // Deal with user input in an infinite loop\n    for (;;) {\n        int input;\n        scanf(\"%d\", &amp;input);\n\n        // Condition for breaking the infinite loop\n        if (input == -1)\n            break;\n\n        // Sanity check the user won't read out of bounds\n        if (input &lt; 0 || input &gt;= 50) {\n            printf(\"No!\\n\");\n            continue;\n        }\n\n        // Display what the user wants\n        printf(\"%d %llu\\n\", input, Fib[input]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 54900491, "answer_count": 1, "score": -3, "last_activity_date": 1551253777, "creation_date": 1551252032, "question_id": 54900049, "link": "https://stackoverflow.com/questions/54900049/in-c-computing-an-equation-using-user-input-values-is-not-giving-the-expected-r", "title": "In C, computing an equation using user input values is not giving the expected result?", "body": "<p>I am doing an assignment for my class but I am stuck. The assignment is to:</p>\n\n<p>Write a recursive program to precompute Fibonacci numbers and store them in an array. Fibonacci formula is Fib(0) = 1, Fib(1) = 1 and Fib(i) = Fib(i \u2212 1) + Fib(i \u2212 2). Store the ith Fibonacci number at index i. Have a loop to read i and print i and ith Fibonacci number. Use \u22121 to quit the loop. My output is wrong but I don't know how to fix it. I have been trying for a while now but I just couldn't pinpoint my mistake.</p>\n\n<p>My code is     </p>\n\n<pre><code>#include &lt;stdio.h&gt;  \ndouble Fib[50]; //globally declared \nint fib(int i)\n{               \n    for(i=0; i&lt;50; i++) //loop to scan \n    {   \n        scanf(\"%lf\", &amp;Fib[i]); //scan and store numbers in an array\n        if (Fib[i]==-1) //i =-1 will end loop\n            break;\n    }       \n    Fib[i]= Fib[i-1]+Fib[i-2];//formula     \n    if(Fib[i]==0||Fib[i]==1) //i=0 and i=1 will print 1\n        Fib[i]=1;\n    else if(i&gt;1) //performs the operation with the formula\n        printf(\"%d  %lf\\n\", i, Fib[i]);\n}   \nint main()\n{\n    int i=0;\n    fib(i); \nreturn 0;    \n}\nExpected result:\nuser input: 4 10 20 15 5 -1\noutput:\n4 5.000000\n10 89.000000\n20 10946.000000\n15 987.000000\n5 8.000000  \n\nMy output:\n5  20.000000\n</code></pre>\n"}, {"tags": ["c", "redis"], "comments": [{"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "edited": false, "score": 0, "creation_date": 1551268622, "post_id": 54899977, "comment_id": 96576935, "body": "You seem to be wrongly interpreting &quot;memory used&quot; as &quot;size of file on disk&quot;."}, {"owner": {"reputation": 123, "user_id": 10228048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SwyOT.jpg?s=128&g=1", "display_name": "nobody", "link": "https://stackoverflow.com/users/10228048/nobody"}, "reply_to_user": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "edited": false, "score": 0, "creation_date": 1551269391, "post_id": 54899977, "comment_id": 96577374, "body": "@KevinChristopherHenry Oh, D&#39;oh! Thanks! I didn&#39;t realized that. I read the code again and I found that the number means &quot;Private dirty memory&quot;. But, then again, I have another question for that. I will edit the post."}], "owner": {"reputation": 123, "user_id": 10228048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SwyOT.jpg?s=128&g=1", "display_name": "nobody", "link": "https://stackoverflow.com/users/10228048/nobody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551271078, "creation_date": 1551251659, "last_edit_date": 1551271078, "question_id": 54899977, "link": "https://stackoverflow.com/questions/54899977/why-does-redis-save-partial-data-sets", "title": "Why does Redis save partial data sets?", "body": "<p><strong>Version</strong>: Redis 5.0.3  </p>\n\n<p>In <code>redis.conf</code> there is an option to set snapshot period. I set this period as every 5 sec if one value is changed to see the Redis performance when it dumps. I ran two application; one is <code>redis-server</code> and the other is <code>redis-benchmark</code>.\nWhile I was watching a log, I found out some interesting thing like below.</p>\n\n<pre><code>7269:C 27 Feb 2019 14:48:39.463 * RDB: 4535 MB of memory used by copy-on-write\n7257:M 27 Feb 2019 14:48:39.939 * Background saving terminated with success\n7257:M 27 Feb 2019 14:48:45.085 * 10 changes in 5 seconds. Saving...\n7257:M 27 Feb 2019 14:48:45.187 * Background saving started by pid 7270\n7270:C 27 Feb 2019 14:49:00.313 * DB saved on disk\n7270:C 27 Feb 2019 14:49:00.401 * RDB: 4535 MB of memory used by copy-on-write\n7257:M 27 Feb 2019 14:49:00.882 * Background saving terminated with success\n7257:M 27 Feb 2019 14:49:06.011 * 10 changes in 5 seconds. Saving...\n7257:M 27 Feb 2019 14:49:06.114 * Background saving started by pid 7271\n7271:C 27 Feb 2019 14:49:21.086 * DB saved on disk\n7271:C 27 Feb 2019 14:49:21.173 * RDB: 4534 MB of memory used by copy-on-write\n7257:M 27 Feb 2019 14:49:21.706 * Background saving terminated with success\n7257:M 27 Feb 2019 14:49:27.048 * 10 changes in 5 seconds. Saving...\n7257:M 27 Feb 2019 14:49:27.155 * Background saving started by pid 7273\n7273:C 27 Feb 2019 14:49:42.295 * DB saved on disk\n7273:C 27 Feb 2019 14:49:42.382 * RDB: 4529 MB of memory used by copy-on-write\n7257:M 27 Feb 2019 14:49:42.846 * Background saving terminated with success\n7257:M 27 Feb 2019 14:49:48.023 * 10 changes in 5 seconds. Saving...\n7257:M 27 Feb 2019 14:49:48.126 * Background saving started by pid 7274\n7274:C 27 Feb 2019 14:50:05.251 * DB saved on disk\n7274:C 27 Feb 2019 14:50:05.367 * RDB: 15 MB of memory used by copy-on-write\n7257:M 27 Feb 2019 14:50:05.583 * Background saving terminated with success\n</code></pre>\n\n<p>As you can see, the dumped data has almost same size with others and the last one is even little. The thing that I don't understand is why the size is the same and why the last one has small size. (While the redis is dumping, the client requests <code>set</code> operation and the last dump probably means the end of <code>set</code> operation and start of <code>get</code> operation.)</p>\n\n<p>To find out the reason, I look up the code but still don't know why the number has shown like above.</p>\n\n<p>If you see <code>rdb.c</code> in the redis package, you can find this kind of source code.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int rdbSave(char *filename, rdbSaveInfo *rsi) {\n    ...\n    snprintf(tmpfile, 256, \"temp-%d.rdb\", (int) getpid());\n    fp = fopen(tmpfile, \"w\");\n    ...\n    rdbSaveRio(...);\n}\n</code></pre>\n\n<p>From my understanding, everytime redis dumps the in-memory data, it should overwrite the previous saved data and this data should be lager than before. However, based on the log, the size is not linearly increased and even it is decreased at the last dump.</p>\n\n<p>Am I missing some part of Redis features?</p>\n\n<h1>Edit</h1>\n\n<p>According to the comment, I definitely misinterpreted the logs. However, I still have a question about the performance. When snapshotting happens and if there are private dirty memories, the system saves them into the disk. In this point, based on the Redis dump mechanism, although the system sees the private dirty memory caused by <code>set</code> operation and only records this number on the log, it saves the all data from the memory. It means that everytime dumping happens, the size of disk expands and I'm pretty sure that it would lead to worse performance. But, when I see the result of benchmark, I can see the same performance drop despite of increasing disk size. I wonder why this shows the same drop rate and what is going on internally.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iIeRx.png\" rel=\"nofollow noreferrer\">graph</a></p>\n\n<p>In the above graph, the blue line indicates the throughput and you can see that it drops when snapshot happens and you can also notice that even though the second drop phase saves the larger disk size than the first phase, the drop rate is the same. So, <strong>my question would be is performance only affected by the private memory saving?</strong></p>\n"}, {"tags": ["c", "stack", "pseudocode"], "comments": [{"owner": {"reputation": 356910, "user_id": 1221571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GLKUy.jpg?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1221571/eran"}, "edited": false, "score": 0, "creation_date": 1551248589, "post_id": 54899234, "comment_id": 96566355, "body": "What do you mean by &quot;similar&quot;? having the same elements in the same order?"}, {"owner": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "reply_to_user": {"reputation": 356910, "user_id": 1221571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GLKUy.jpg?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1221571/eran"}, "edited": false, "score": 0, "creation_date": 1551248621, "post_id": 54899234, "comment_id": 96566369, "body": "Yes, sorry. Should&#39;ve clarified."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551248802, "post_id": 54899234, "comment_id": 96566439, "body": "This looks strange <code>if A_element == null &amp;&amp; B_element != null</code> but besides that I think your answer is a bit unclear. Is it all elements in stack A that has to be identical to all elements in Stack B - in the same order?"}, {"owner": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "edited": false, "score": 0, "creation_date": 1551248930, "post_id": 54899234, "comment_id": 96566494, "body": "Same elements in same order."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551249080, "post_id": 54899234, "comment_id": 96566544, "body": "@SamSepiol OT but in that case I suggest you call your function <b>identical</b> instead of <b>similar</b>. Similar is confusing..."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1551251075, "post_id": 54899234, "comment_id": 96567341, "body": "the java-tag has been removed as OP (in comment) told that OP wants C code"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "edited": false, "score": 0, "creation_date": 1551249459, "post_id": 54899316, "comment_id": 96566695, "body": "So would I change this line:     <code>if A_element == null &amp;&amp; B_element != null {</code>  to this?     <code>if (A_element == null &amp;&amp; B_element != null) or (A_element !=null &amp;&amp; B_element == null) {</code>  Honestly, I don&#39;t really know how to compare the element I&#39;m removing from A to the element I&#39;m removing from B. Would it just be like:  <code>if (A_element == B_element){</code> <code>A.push(A_element);</code> <code>B.push(B_element);</code>  <code>return true;</code>"}, {"owner": {"reputation": 356910, "user_id": 1221571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GLKUy.jpg?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1221571/eran"}, "reply_to_user": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "edited": false, "score": 0, "creation_date": 1551249751, "post_id": 54899316, "comment_id": 96566815, "body": "@SamSepiol <code>if (A_element == null &amp;&amp; B_element != null) or (A_element != null &amp;&amp; !A_element.equals(B_element) {...}</code> should be sufficient a condition for returning false. This would also cover the case when A_element != null and B_element == null. You don&#39;t need to add another condition that returns true. You only return true if the recursive call returns true."}], "tags": [], "owner": {"reputation": 356910, "user_id": 1221571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GLKUy.jpg?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1221571/eran"}, "is_accepted": false, "score": 0, "last_activity_date": 1551250048, "last_edit_date": 1551250048, "creation_date": 1551248824, "answer_id": 54899316, "question_id": 54899234, "link": "https://stackoverflow.com/questions/54899234/stack-pseudocode-comparison/54899316#54899316", "title": "Stack Pseudocode Comparison", "body": "<p>Your logic is almost right.</p>\n\n<p>The thing you are missing is a proper comparison of the element you are removing from A to the element you are removing from B.</p>\n\n<p>You only check whether A_element is null and B_element is not, and return false in this case.</p>\n\n<p>You should also return false if A_element is not null and B_element is null, or if they are both not null, but not equal to each other.</p>\n\n<p>Only if they are equal to each other (either both null or both not null and equal) you should make the recursive call, which would compare the rest of the stacks.</p>\n\n<pre><code>boolean isABSimilar(A,B){\n    if (A.isEmptyStack() != B.isEmptyStack()) \n        return false; // stacks same\n    if (A.isEmptyStack() &amp;&amp; B.isEmptyStack()) \n        return true; // stacks are the same\n    A_element = A.pop(); // grab elements\n    B_element = B.pop();\n    if ((A_element == null &amp;&amp; B_element != null) || (A_element != null &amp;&amp; !A_element.equals(B_element))) {\n        A.push(A_element); // if !=, restore them and return false\n        B.push(B_element);\n        return false;\n    }\n    answer = isABASimilar(A, B); // compare\n    A.push(A_element);  // restore\n    B.push(B_element);\n    return answer; // return answer\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "edited": false, "score": 0, "creation_date": 1551250218, "post_id": 54899526, "comment_id": 96566999, "body": "Would I just declare at the top <code>A_element = Stack1() B_element = Stack2()</code>? What would I replace boolean with?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "edited": false, "score": 0, "creation_date": 1551250564, "post_id": 54899526, "comment_id": 96567128, "body": "@SamSepiol I justed noticed that you have tagged with both C and java. My answer is for C. What are you looking for?"}, {"owner": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "edited": false, "score": 0, "creation_date": 1551250654, "post_id": 54899526, "comment_id": 96567155, "body": "My bad. Its for C."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1551251236, "last_edit_date": 1551251236, "creation_date": 1551249793, "answer_id": 54899526, "question_id": 54899234, "link": "https://stackoverflow.com/questions/54899234/stack-pseudocode-comparison/54899526#54899526", "title": "Stack Pseudocode Comparison", "body": "<p>You have some minor problem with your code. Try like this:</p>\n\n<pre><code>boolean isABSimilar(A,B){\n    if (A.isEmptyStack() &amp;&amp; B.isEmptyStack()) return true; // stacks are the same\n\n    if (A.isEmptyStack()) return false;  // stacks are different\n    if (B.isEmptyStack()) return false;\n    if (A.top() != B.top()) return false;\n\n    A_element = A.pop(); // grab elements\n    B_element = B.pop();\n\n    answer = isABASimilar(A, B); // ckech remaining stack\n\n    A.push(A_element);  // restore\n    B.push(B_element);\n\n    return answer; // return answer\n}\n</code></pre>\n\n<p>Notice that a recursive method like the above is only to be used when you know that the size of the stacks are pretty small.</p>\n\n<p>Also notice that <strong>the above \"code\" can't compile as C code</strong> for a number of reasons. Example:</p>\n\n<ol>\n<li><p><code>boolean isABSimilar(A,B)</code> is not a valid function prototype</p></li>\n<li><p><code>A_element</code> and <code>B_element</code> and <code>answer</code> are undefined</p></li>\n</ol>\n\n<p>You need to fix that before compiling.</p>\n\n<p>In C there isn't a built-in stack type so I assume that it's a custom type in your code. Something like:</p>\n\n<pre><code>struct Stack\n{\n    ... Member function pointers\n    ... Member data\n};\n</code></pre>\n\n<p>In that case your function should look like:</p>\n\n<pre><code>int isABSimilar(struct Stack A, struct Stack B){\n    int answer;\n    int A_element;  // I just assume that data type is int\n    int B_element;  // but it can be other types (OP never told us)\n\n    ... the code from above\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11123302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8k-vMOdlaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSeUfXNXKt1fXPltQRjTMwuU4COA/mo/photo.jpg?sz=128", "display_name": "Sam Sepiol", "link": "https://stackoverflow.com/users/11123302/sam-sepiol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551255282, "creation_date": 1551248421, "last_edit_date": 1551255282, "question_id": 54899234, "link": "https://stackoverflow.com/questions/54899234/stack-pseudocode-comparison", "title": "Stack Pseudocode Comparison", "body": "<p>I need to check two queues, (a and b) to see whether they are identical or not (same elements in same order). And at the end both queues need to look the same as the start. Only using push, pop, top and EmptyStack.</p>\n\n<p>This is what I have but it doesn't make sense to me.</p>\n\n<pre><code>boolean ABSimilar(A,B){\n    if (A.EmptyStack() != B.EmptyStack()) return false; // stacks same\n    if (A.EmptyStack() &amp;&amp; B.EmptyStack()) return true; // stacks are the same\n    A_element = A.pop(); // grab elements\n    B_element = B.pop();\n    if A_element == null &amp;&amp; B_element != null {\n      A.push(A_element); // if !=, restore them and return false\n      B.push(B_element);\n      return false;\n    }\n    answer = ABASimilar(A, B); // compare\n    A.push(A_element);  // restore\n    B.push(B_element);\n    return answer; // return answer\n}\n</code></pre>\n"}, {"tags": ["c", "ipc", "semaphore"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1551245381, "post_id": 54898512, "comment_id": 96565302, "body": "It&#39;s called a race condition.  You need some king of atomic test-and-set operation, which you don&#39;t have.  Otherwise both processes can see it as zero, then they will both try to change it to 1, each thinking they were the first one to do so.  Basically you have no way to know that it hasn&#39;t changed between seeing it as zero and setting it to one."}, {"owner": {"reputation": 49, "user_id": 7775273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J2kdQ.jpg?s=128&g=1", "display_name": "Luke4211", "link": "https://stackoverflow.com/users/7775273/luke4211"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1551245795, "post_id": 54898512, "comment_id": 96565434, "body": "Exactly what my worry is. This implementation seems to work fine as a binary semaphore, because two processes won&#39;t be waiting at the same time. I&#39;m unaware of a way to check a value and increment a value in the same statement, do you have any ideas?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1551246782, "post_id": 54898512, "comment_id": 96565727, "body": "You don&#39;t <i>implement</i> a semaphore. You use one (with the help of some external library)"}, {"owner": {"reputation": 49, "user_id": 7775273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J2kdQ.jpg?s=128&g=1", "display_name": "Luke4211", "link": "https://stackoverflow.com/users/7775273/luke4211"}, "edited": false, "score": 1, "creation_date": 1551247113, "post_id": 54898512, "comment_id": 96565831, "body": "At some point someone implemented it. Understanding what your code does to the lowest level makes you a better programmer than just accepting that something works and moving on."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551250867, "post_id": 54898512, "comment_id": 96567251, "body": "<code>while( (*shmPtr) != 0);</code> Your compiler would be within its rights to optimise this loop away entirely."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551252367, "post_id": 54898512, "comment_id": 96567829, "body": "<a href=\"https://godbolt.org/z/c2tQq0\" rel=\"nofollow noreferrer\">To put my money where my mouth is</a>. Here at optimisation levels 2 and 3, the loop is infinite. It won&#39;t check any memory location repeatedly. At -O2, it will check a <i>register</i>, which is quite useless. At -O3, it&#39;s just an infinite loop without any checks. So &quot;working&quot; it isn&#39;t."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551252868, "post_id": 54898512, "comment_id": 96568041, "body": "&quot;At some point someone implemented it&quot;. is not possible to implement it in standard C. Somebody has implemented it for your platform, using platform-specific code."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1551255663, "post_id": 54898512, "comment_id": 96569207, "body": "the semaphores must be implemented in kernel mode, not in user mode"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1551261399, "post_id": 54898512, "comment_id": 96572437, "body": "@alinsoar &quot;must&quot; is a bit harsh word, and &quot;kernel mode&quot; is not a fundamental constant (what&#39;s a kernel on a chip with no MMU and no privileged instructions?), but yeah, <i>usually</i> the semaphores are <i>best</i> implemented in kernel mode."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7775273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J2kdQ.jpg?s=128&g=1", "display_name": "Luke4211", "link": "https://stackoverflow.com/users/7775273/luke4211"}, "edited": false, "score": 1, "creation_date": 1551246921, "post_id": 54898741, "comment_id": 96565771, "body": "This is merely an exercise, I normally use sys/sem.h when I need to synchronize. However, I added wikipedia&#39;s implementation of testAndSet in my post, and I have a question about that. If I replaced the conditional in the while loop with a call to testAndSet, couldn&#39;t the same issue occur? If two threads are waiting and the semaphore changes to 0, suppose the first process to call testAndSet switches context after the the oldValue is read. Wouldn&#39;t this cause the exact same issue that I was having to begin with?"}, {"owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "reply_to_user": {"reputation": 49, "user_id": 7775273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J2kdQ.jpg?s=128&g=1", "display_name": "Luke4211", "link": "https://stackoverflow.com/users/7775273/luke4211"}, "edited": false, "score": 0, "creation_date": 1551247494, "post_id": 54898741, "comment_id": 96565964, "body": "Yes the same issue would occur. The &quot;implementation&quot; found on Wikipedia is only for illustration and has the same race-condition."}], "tags": [], "owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "is_accepted": false, "score": 1, "last_activity_date": 1551246029, "creation_date": 1551246029, "answer_id": 54898741, "question_id": 54898512, "link": "https://stackoverflow.com/questions/54898512/implementation-of-a-semaphore-in-c/54898741#54898741", "title": "Implementation of a semaphore in C", "body": "<p>As Tom commented, for semaphores to be correct you need an atomic test-and-set or a compare-and-swap (compare-exchange).</p>\n\n<p>But that is not all. Since you are using shared memory (ie. by multiple processes), the atomic operations provided by C11 (<a href=\"https://gcc.gnu.org/wiki/Atomic/C11\" rel=\"nofollow noreferrer\">Link</a>) are not sufficient.</p>\n\n<p>Since you are calling Posix functions anyway, I asume that you have access to Posix semaphores.</p>\n\n<p><em>\"POSIX semaphores allow processes and threads to synchronize their actions.\"</em> (<a href=\"https://linux.die.net/man/7/sem_overview\" rel=\"nofollow noreferrer\">Link</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "is_accepted": false, "score": 0, "last_activity_date": 1551334812, "last_edit_date": 1551334812, "creation_date": 1551333110, "answer_id": 54919203, "question_id": 54898512, "link": "https://stackoverflow.com/questions/54898512/implementation-of-a-semaphore-in-c/54919203#54919203", "title": "Implementation of a semaphore in C", "body": "<p>I don't know how to do it on a PC (if you find out, please do come back and post your own answer), but what you need is what I call \"<strong>atomic access guards</strong>.\" In other words, you need a mechanism to force atomic access to a given variable for a set amount of time. What that means is that you essentially force all threads/processes to pause for a moment, while 1 and only 1 thread gets access to a variable. It then does its thing with the variable (ex: reads, modifies, writes to it), then re-enables the other threads when done. In this way, you <em>guarantee</em> atomic access to that variable by that thread during those operations. Now, all race conditions are solved. </p>\n\n<p>In C, this is highly architecture-dependent I believe, and relies on C functions written in inline assembly code via something like the <code>__asm</code> keyword, and/or it relies on setting bits in specific hardware registers to certain values in order to enforce certain behavior. Example of using the <code>__asm</code> keyword: <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.100748_0606_00_en/ddx1471430827125.html\" rel=\"nofollow noreferrer\">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.100748_0606_00_en/ddx1471430827125.html</a>. </p>\n\n<p>Sample of inline assembly code wrapped up in a C function:</p>\n\n<pre><code>int add(int i, int j)\n{\n  int res = 0;\n  __asm (\"ADD %[result], %[input_i], %[input_j]\"\n    : [result] \"=r\" (res)\n    : [input_i] \"r\" (i), [input_j] \"r\" (j)\n  );\n  return res;\n}\n</code></pre>\n\n<p>Once you have your \"<strong>atomic access guard</strong>\" functions to give you atomic access, you can do something like the following:</p>\n\n<pre><code>// atomic access guard ON\n\n// Do whatever you want here: it's all atomic now!\n// Read, modify, write, etc.\n// - CAUTION: NO OTHER THREADS CAN RUN DURING THIS TIME, SO GET OUT OF THIS QUICKLY\n\n// atomic access guard OFF\n</code></pre>\n\n<p>On single-core systems, such as the microcontrollers I'm familiar with (STM32 and AVR/Arduino), atomic access is ensured simply by turning off all interrupts. Ex: on ARM-core STM32 microcontrollers, do it as follows by using the necessary CMSIS (ARM-provided) functions:</p>\n\n<pre><code>// Read PRIMASK register, check interrupt status before you disable them \n// Returns 0 if they are enabled, or non-zero if disabled \nuint32_t prim = __get_PRIMASK();\n\n// Disable interrupts \n__disable_irq();\n\n// Do some stuff here which can not be interrupted \n\n// Enable interrupts back, but only if they were previously enabled (prevents nesting problems)\nif (!prim) \n{\n    __enable_irq();\n}\n</code></pre>\n\n<p>Source: <a href=\"https://stm32f4-discovery.net/2015/06/how-to-properly-enabledisable-interrupts-in-arm-cortex-m/\" rel=\"nofollow noreferrer\">https://stm32f4-discovery.net/2015/06/how-to-properly-enabledisable-interrupts-in-arm-cortex-m/</a></p>\n\n<p>If using <a href=\"https://www.freertos.org/\" rel=\"nofollow noreferrer\">FreeRTOS (Free Real-Time Operating System)</a>, do the following:</p>\n\n<pre><code>taskENTER_CRITICAL() // This supports nested calls, and ends up calling `portDISABLE_INTERRUPTS()` anyway.\n\n// do your atomic access here\n\ntaskEXIT_CRITICAL() \n</code></pre>\n\n<p>See: <a href=\"https://www.freertos.org/taskENTER_CRITICAL_taskEXIT_CRITICAL.html\" rel=\"nofollow noreferrer\">https://www.freertos.org/taskENTER_CRITICAL_taskEXIT_CRITICAL.html</a></p>\n\n<p>If using AVR-core microcontrollers, such as the ATmega328 (basic Arduino Uno processor), do the following:</p>\n\n<pre><code>uint8_t SREG_bak = SREG; //save global interrupt state\ncli(); //clear (disable) interrupts\n\n//atomic variable access guaranteed here\n\nSREG = SREG_bak; //restore interrupt state\n</code></pre>\n\n<p>See my answer here: <a href=\"https://stackoverflow.com/a/39693278/4561887\">https://stackoverflow.com/a/39693278/4561887</a></p>\n\n<p>So now you need to go do some research (and please do post back), on how to enforce such a principle in C on your given operating system and/or architecture, and/or via some special calls to your kernel or something. This may even require that you write your own inline assembly to do this stuff, then wrap it up in a C function to call. </p>\n\n<p>I look forward to seeing how you accomplish it.</p>\n\n<p><strong>Update</strong>: I just did some digging in the FreeRTOS source code to see how they disable interrupts, and here's what I found for the ARM Cortex M3 processor, such as STM32 microcontrollers, when using the GCC compiler: </p>\n\n<p>From \"FreeRTOSv9.0.0/FreeRTOS/Source/portable/GCC/ARM_CM3/portmacro.h\":</p>\n\n<pre><code>#define portDISABLE_INTERRUPTS() vPortRaiseBASEPRI()\n\nportFORCE_INLINE static void vPortRaiseBASEPRI( void )\n{\nuint32_t ulNewBASEPRI;\n\n    __asm volatile\n    (\n        \"   mov %0, %1                                              \\n\" \\\n        \"   msr basepri, %0                                         \\n\" \\\n        \"   isb                                                     \\n\" \\\n        \"   dsb                                                     \\n\" \\\n        :\"=r\" (ulNewBASEPRI) : \"i\" ( configMAX_SYSCALL_INTERRUPT_PRIORITY )\n    );\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7775273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J2kdQ.jpg?s=128&g=1", "display_name": "Luke4211", "link": "https://stackoverflow.com/users/7775273/luke4211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2186, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1551334812, "creation_date": 1551244859, "last_edit_date": 1551247035, "question_id": 54898512, "link": "https://stackoverflow.com/questions/54898512/implementation-of-a-semaphore-in-c", "title": "Implementation of a semaphore in C", "body": "<p>I am working on a simple implementation of a semaphore in C, and while my implementation is working (as a binary semaphore), I have a question regarding its validity.</p>\n\n<p>My concern stems from my definition of my wait function: </p>\n\n<pre><code>void Wait(int semid) {\n    char *shmPtr;\n\n    shmPtr = shmat(semid, NULL, 0);\n\n    if(shmPtr == (void *) -1){\n        printf(\"Could not attach to semaphore...\\n\");\n        exit(1);\n    } \n\n    //Wait for the value in shared memory to \n    //equal 0, then set it equal to 1,\n    //detach and return\n    while( (*shmPtr) != 0);\n\n    (*shmPtr) = 1;\n\n    if(shmdt(shmPtr) &lt; 0) {\n        printf(\"Cannot detach from semaphore...\");\n    }\n\n    return;\n\n}\n</code></pre>\n\n<p>My question lies with the while( (*shmPtr) != 0)\nloop. Lets say we have 2 processes that are waiting. A third process changes the value of a semaphore to equal 0 (ignore the fact that this is a binary implementation of a semaphore). </p>\n\n<p>My concern is that if process 1 evaluates the condition of the while loop to be false, and then the CPU context switches to process 2 before setting the semaphore value equal to 1, both processes will enter the critical section. </p>\n\n<p>Is there a better way to implement the waiting functionality? I've seen a lot of people using pthread_cond_wait, but that uses a mutex which essentially defeats the purpose of the semaphore implementation.</p>\n\n<p>Thank you</p>\n\n<p>EDIT: Adding Wikipedia's implementation of TestAndSet in C to reference in the comments</p>\n\n<pre><code>#define LOCKED 1\n\nint TestAndSet(int* lockPtr) {\n    int oldValue;\n\n    oldValue = *lockPtr;\n    *lockPtr = LOCKED;\n    // -- End of atomic segment --\n\n    return oldValue;\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "embedded", "unions", "bit-fields"], "comments": [{"owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "edited": false, "score": 2, "creation_date": 1551246609, "post_id": 54898273, "comment_id": 96565682, "body": "The consistency is probably needed to write macros. Also it might be possible that some platforms can work with unaligned uint32&#39;s but can&#39;t work with unaligned uint32 bitfields? (Adding an alignment-attribute would force other platforms to obey it even though they don&#39;t need it)"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1551306809, "post_id": 54898273, "comment_id": 96597370, "body": "since we dont work there we cant be 100% sure, so this is primarily opinion based.  But I assume it was for consistency."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1551306881, "post_id": 54898273, "comment_id": 96597396, "body": "you should avoid code that uses this union cr@p , which unfortunately means toss out cmsis and vendor libraries...and or fix them before you use them."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 6, "last_activity_date": 1551254995, "creation_date": 1551254995, "answer_id": 54900774, "question_id": 54898273, "link": "https://stackoverflow.com/questions/54898273/is-there-any-difference-between-the-members-of-this-c-union/54900774#54900774", "title": "Is there any difference between the members of this C union?", "body": "<p>From a general point of view, it's just code bloat - there is no reason why you would ever want to write code like that. However, the ASF coding style is that every register access ends with <code>.reg</code>, so that's the reason here: they want to keep register naming and use consistent.</p>\n\n<p>They could of course just have done that with <code>typedef struct { uint32_t reg; } PORT_DIRSET_Type</code> but this code base is rarely ever rationally written. It could have been automatically generated through some script.</p>\n\n<p>As a rule of thumb, register maps like these are always horribly ugly and non-portable, filled with irrational code. Those shipped as part of ASF are some of the worst I've ever seen all categories. </p>\n"}], "owner": {"reputation": 175, "user_id": 7437693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zh2rK.jpg?s=128&g=1", "display_name": "crj11", "link": "https://stackoverflow.com/users/7437693/crj11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 54900774, "answer_count": 1, "score": 5, "last_activity_date": 1551255165, "creation_date": 1551243388, "last_edit_date": 1551255165, "question_id": 54898273, "link": "https://stackoverflow.com/questions/54898273/is-there-any-difference-between-the-members-of-this-c-union", "title": "Is there any difference between the members of this C union?", "body": "<p>The typedef below is for the DIR register from the Atmel SAMD21 ARM MCU include file.  Since the bit struct member and the reg member are both 32 bits, is there any difference between the two members in the union?</p>\n\n<p>I'm trying to understand why they did not just use a uint32_t as the type for the DIRSET register.  My only thought that they just defined it this way to be consistent with other registers where there are multiple fields within the bit struct.</p>\n\n<pre><code>typedef union {\n    struct {\n        uint32_t DIRSET:32;\n    } bit;\n    uint32_t reg;\n} PORT_DIRSET_Type;\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "break"], "comments": [{"owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 2, "creation_date": 1551242093, "post_id": 54898079, "comment_id": 96564504, "body": "i won&#39;t be -1. i is your loop variable. Fib[i] might be -1"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1551242101, "post_id": 54898079, "comment_id": 96564505, "body": "How will <code>i</code> ever be negative in that loop?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1551242219, "post_id": 54898079, "comment_id": 96564533, "body": "Also <code>Fib</code> is an array of doubles and you&#39;re telling <code>scanf()</code> to assign an int to an element of it. Isn&#39;t your compiler warning you about that?"}, {"owner": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1551242600, "post_id": 54898079, "comment_id": 96564622, "body": "@Shawn The user input will be -1 which will then terminate the loop because i can&#39;t be -1."}, {"owner": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "edited": false, "score": 0, "creation_date": 1551242661, "post_id": 54898079, "comment_id": 96564640, "body": "No the compiler didn&#39;t say anything."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1551242734, "post_id": 54898079, "comment_id": 96564653, "body": "You never compare your user input against anything, and if you fix that, it&#39;s still not going to work until you fix your use of <code>scanf()</code>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1551242793, "post_id": 54898079, "comment_id": 96564667, "body": "<b>Always</b> turn on a healthy set of warnings, and pay attention to them. <code>-Wall -Wextra</code> is good if using gcc or clang."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "edited": false, "score": 0, "creation_date": 1551243210, "post_id": 54898192, "comment_id": 96564755, "body": "I made the changes after seeing your code.                                                                                                           for(i=0; i&lt;50 &amp;&amp; i&gt;=0; i++) \t\t{    \t\t\tscanf(&quot;%d&quot;, &amp;Fib[i]);  \t\t\tif(Fib[i]==-1) //changed \t\t\t\tbreak; \t\t} \t \t\tprintf(&quot;numbers entered &quot;); \t\t\t\t \t\t//new loop \t\tfor(j=0; j&lt;sizeof(Fib); j++) \t\t\tprintf(&quot;%lf\\n&quot;, Fib[i]);                                                                                     but it stil didn&#39;t work."}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "edited": false, "score": 0, "creation_date": 1551243505, "post_id": 54898192, "comment_id": 96564819, "body": "I wrote this in hurry , some heartless have downvoted me @Su.she . I have edited but I think if(Fib[i]==-1) is the problem now"}, {"owner": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1551244213, "post_id": 54898192, "comment_id": 96564975, "body": "@chux  I changed the lf part but now this is only printing -1.00000 after the loop ends.     for(i=0; i&lt;50 &amp;&amp; i&gt;=0; i++) \t\t{    \t\t\tscanf(&quot;%lf&quot;, &amp;Fib[i]);  \t\t\tif(Fib[i]==-1) //changed \t\t\t\tbreak;\t\t\t \t\t}\t\t\t\t \t\tprintf(&quot;numbers entered %lf\\n&quot;, Fib[i]);"}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "edited": false, "score": 1, "creation_date": 1551246641, "post_id": 54898192, "comment_id": 96565694, "body": "@Su.she just confirm the code is working or not <a href=\"https://ideone.com/xGvPad\" rel=\"nofollow noreferrer\">ideone.com/xGvPad</a>"}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "edited": false, "score": 1, "creation_date": 1551246703, "post_id": 54898192, "comment_id": 96565709, "body": "@Su.she sometimes what happen is 1 in double is taken as 1.000000001 and so 1 != 1.000000001 so u might get a error"}], "tags": [], "owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "is_accepted": false, "score": 1, "last_activity_date": 1551243425, "last_edit_date": 1551243425, "creation_date": 1551242660, "answer_id": 54898192, "question_id": 54898079, "link": "https://stackoverflow.com/questions/54898079/why-does-my-loop-terminate-even-with-a-condition/54898192#54898192", "title": "Why does my loop terminate even with a condition?", "body": "<p>This code has many code writing standard issues but it seems you are new so I am making minimal changes just for your understanding</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ndouble Fib[50];//globally declared  \nint fib(int n)\n{\n    int i,j;\n\n    for(i=0; i&lt;50; i++)\n    {   \n        scanf(\"%lf\", &amp;Fib[i]); \n        if(Fib[i]==-1)\n         break;\n    }  \n    printf(\"numbers entered \\n\");\n    for(int j=0;j&lt;i;j++)\n    {\n        printf(\"%lf\\n\",Fib[j]);\n    }\n}\nint main()\n{\n    int i, n;\n    fib(n);\n    return 0;\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "edited": false, "score": 0, "creation_date": 1551244844, "post_id": 54898201, "comment_id": 96565146, "body": "So I fixed it but now it goes to infinite loop of 0.                                                                for(i=0; i&lt;50 &amp;&amp; i&gt;=0; i++) \t\t{    \t\t\tscanf(&quot;%lf&quot;, &amp;Fib[i]);  \t\t\tif(Fib[i]==-1) //changed \t\t\t\tbreak;\t\t\t \t\t}\t \t\t \t\tprintf(&quot;numbers entered &quot; ); \t\t \t\tfor(j=0; j&lt;sizeof(Fib); i++)\t//why is j&lt;i ??? i is seprate right? what is i here? \t\t{\t\t \t\tprintf(&quot;%d\\n&quot;, Fib[j]); \t   }"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "edited": false, "score": 1, "creation_date": 1551246196, "post_id": 54898201, "comment_id": 96565557, "body": "@Su.she You changed the <code>scanf</code> format specifier to <code>%lf</code> but left the <code>printf</code> one as <code>%d</code>.  Either use <code>double</code> for all or use <code>int</code> for all.  Using <code>sizeof(Fib)</code> is not correct because that is the number of <i>bytes</i> in <code>Fib</code>, not the number of elements.  We&#39;re using <code>i</code> instead because that was the index of the last value the user entered, so once <code>j</code> hits <code>i</code> we can stop."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1551242760, "creation_date": 1551242760, "answer_id": 54898201, "question_id": 54898079, "link": "https://stackoverflow.com/questions/54898079/why-does-my-loop-terminate-even-with-a-condition/54898201#54898201", "title": "Why does my loop terminate even with a condition?", "body": "<p>First issue: you declare <code>Fib</code> as an array of <code>double</code>:</p>\n\n<pre><code>double Fib[50];\n</code></pre>\n\n<p>But you use <code>%d</code> to read the values, which is for reading an <code>int</code>:</p>\n\n<pre><code>scanf(\"%d\", &amp;Fib[i]); \n</code></pre>\n\n<p>Using the wrong format specifier invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>.  You presumably want to store integers, so change the array to <code>int</code>:</p>\n\n<pre><code>int Fib[50];\n</code></pre>\n\n<p>Next is your array breakout condition:</p>\n\n<pre><code>if(i==-1)\n</code></pre>\n\n<p><code>i</code> is your array index, which ranges from 0 to 49, so this will never be true.  You want to stop when the user enters -1, and that value will be in <code>Fib[i]</code>:</p>\n\n<pre><code>if(Fib[i]==-1)\n</code></pre>\n\n<p>Finally, printing the array:</p>\n\n<pre><code>printf(\"numbers entered %d\\n\", Fib[i]);\n</code></pre>\n\n<p>This doesn't print the array.  It just prints the element at the last index of <code>i</code>, and the value at that index will always be -1.  You need a separate loop to print the values:</p>\n\n<pre><code>int j;\nprintf(\"numbers entered:\\n\");\nfor (j=0; j&lt;i; j++) {\n    printf(\"%d\\n\", Fib[j]);\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9426531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e088b6de203b8255d4c4abafcc46802?s=128&d=identicon&r=PG&f=1", "display_name": "Su.she", "link": "https://stackoverflow.com/users/9426531/su-she"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1551243425, "creation_date": 1551241851, "last_edit_date": 1551242698, "question_id": 54898079, "link": "https://stackoverflow.com/questions/54898079/why-does-my-loop-terminate-even-with-a-condition", "title": "Why does my loop terminate even with a condition?", "body": "<p>I am trying to get user input and store them in an array Fib[i]. After that print the Fib[i] array. When the user enters -1 the loop will quit and the program will end. But my code is not printing or terminating.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ndouble Fib[50];//globally declared  \nint fib(int n)\n{\n    int i;\n\n    for(i=0; i&lt;50; i++)\n    {   \n        scanf(\"%d\", &amp;Fib[i]); \n        if(i==-1)\n         break;\n       //printf(\"numbers entered %d\\n\", Fib[i]); // &lt;- doesn't terminate if printf is here\n    }\n        printf(\"numbers entered %d\\n\", Fib[i]); //doesn't print anything??\n\n}\nint main()\n{\n    int i, n;\n//calling the function\n    fib(n);\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>user input:</p>\n\n<pre><code>4\n5\n-1\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>Numbers entered \n4\n5\n</code></pre>\n"}, {"tags": ["c", "thread-safety", "posix"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1617720714, "post_id": 66970592, "comment_id": 118380143, "body": "The question seems to be asking for a mechanism based (only) on standard C.  That would not be this."}, {"owner": {"reputation": 340, "user_id": 1430535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4306e7b044a8edf6340721d02acc8c56?s=128&d=identicon&r=PG", "display_name": "Polluks", "link": "https://stackoverflow.com/users/1430535/polluks"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1617721368, "post_id": 66970592, "comment_id": 118380502, "body": "@JohnBollinger Well, Microsoft standard ;-)"}], "tags": [], "owner": {"reputation": 340, "user_id": 1430535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4306e7b044a8edf6340721d02acc8c56?s=128&d=identicon&r=PG", "display_name": "Polluks", "link": "https://stackoverflow.com/users/1430535/polluks"}, "is_accepted": false, "score": 0, "last_activity_date": 1617721678, "last_edit_date": 1617721678, "creation_date": 1617719178, "answer_id": 66970592, "question_id": 54897650, "link": "https://stackoverflow.com/questions/54897650/c11-equivalent-of-posix-flockfile/66970592#66970592", "title": "C11 equivalent of POSIX flockfile()?", "body": "<p>Windows implementation in Stockfish:</p>\n<pre><code>void flockfile(FILE *F)\n{\n  if ((F &gt;= (&amp;__iob_func()[0])) &amp;&amp; (F &lt;= (&amp;__iob_func()[_IOB_ENTRIES-1]))) {\n    _lock(_STREAM_LOCKS + (int)(F - (&amp;__iob_func()[0])));\n    F-&gt;_flag |= _IOLOCKED;\n  } else\n    EnterCriticalSection(&amp;(((_FILEX *)F)-&gt;lock));\n}\n\nvoid funlockfile(FILE *F)\n{\n  if ((F &gt;= (&amp;__iob_func()[0])) &amp;&amp; (F &lt;= (&amp;__iob_func()[_IOB_ENTRIES-1]))) {\n    F-&gt;_flag &amp;= ~_IOLOCKED;\n    _unlock(_STREAM_LOCKS + (int)(F - (&amp;__iob_func()[0])));\n  } else\n    LeaveCriticalSection(&amp;(((_FILEX *)F)-&gt;lock));\n}\n</code></pre>\n<p><a href=\"https://github.com/syzygy1/Cfish/blob/5dbf00f9ffae28b0c96a713e897d718204af73e9/src/misc.c#L299\" rel=\"nofollow noreferrer\">https://github.com/syzygy1/Cfish/blob/5dbf00f9ffae28b0c96a713e897d718204af73e9/src/misc.c#L299</a></p>\n<p>or how Android it does:</p>\n<pre><code>void\nflockfile(FILE * fp)\n{\n    LockTable*  t = lock_table_lock();\n    if (t != NULL) {\n        FileLock**  lookup = lock_table_lookup(t, fp);\n        FileLock*   lock   = *lookup;\n        if (lock == NULL) {\n            pthread_mutexattr_t  attr;\n            /* create a new node in the hash table */\n            lock = malloc(sizeof(*lock));\n            if (lock == NULL) {\n                lock_table_unlock(t);\n                return;\n            }\n            lock-&gt;next        = NULL;\n            lock-&gt;file        = fp;\n            pthread_mutexattr_init(&amp;attr);\n            pthread_mutexattr_settype(&amp;attr, PTHREAD_MUTEX_RECURSIVE);\n            pthread_mutex_init( &amp;lock-&gt;mutex, &amp;attr );\n            *lookup           = lock;\n        }\n        lock_table_unlock(t);\n        /* we assume that another thread didn't destroy 'lock'\n        * by calling fclose() on the FILE*. This can happen if\n        * the client is *really* buggy, but we don't care about\n        * such code here.\n        */\n        pthread_mutex_lock(&amp;lock-&gt;mutex);\n    }\n}\n</code></pre>\n<p><a href=\"https://source.codeaurora.org/external/gigabyte/qrd-gb-ssss-7225/plain/android/bionic/libc/stdio/flockfile.c\" rel=\"nofollow noreferrer\">https://source.codeaurora.org/external/gigabyte/qrd-gb-ssss-7225/plain/android/bionic/libc/stdio/flockfile.c</a></p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1617725224, "creation_date": 1617725224, "answer_id": 66972333, "question_id": 54897650, "link": "https://stackoverflow.com/questions/54897650/c11-equivalent-of-posix-flockfile/66972333#66972333", "title": "C11 equivalent of POSIX flockfile()?", "body": "<blockquote>\n<p>Both POSIX and C11 require that streams have an associated lock to prevent data races and interleaving.</p>\n</blockquote>\n<p>Yes, but there is no requirement on the particular form of that lock, nor does C have any requirement to make that lock directly accessible to programs, nor any standard mechanism for doing so.</p>\n<blockquote>\n<p>POSIX documents flockfile() and related functions to allow thread-safe I/O to span multiple calls. Is there an equivalent C function?</p>\n</blockquote>\n<p>No published version of the C language specification documents an analogue of <code>flockfile()</code>, <code>ftrylockfile()</code>, or <code>funlockfile()</code>.  A strictly conforming C11 or C17 program wanting to provide for preventing calls to I/O functions by different threads being interleaved will (because it is strictly conforming) be using the C threads library on an implementation that does not define the macro <code>__STDC_NO_THREADS__</code>. Such a program can use that library's mutex implementation for the purpose.  There is no standard way to directly access any locks associated directly with individual <code>FILE</code> objects.</p>\n<blockquote>\n<p>On a related note, is it safe to assume any implementation claiming\nPOSIX conformance will respect flockfile() when using C11 threads.h?</p>\n</blockquote>\n<p>To the best of my knowledge, the POSIX C language interfaces are still defined in terms of C99 specifically, so POSIX is blind to C11 threads.  In that sense, no, it is not safe to assume that POSIX provisions about the behavior of threads will apply to C11 threads.</p>\n<blockquote>\n<p>I\nthink most major POSIX-compliant C implementations that support\nthreads.h do so by building on pthreads, which would imply such an\nassumption is usually safe. However, multithreading is hard, and it\nwould be helpful to know of exceptions.</p>\n</blockquote>\n<p>In practice, it is my expectation that C11 and later implementations on POSIX systems will ensure that C11 threads in fact do have the semantics of POSIX threads, whether by implementing C11 threads on top of POSIX threads or by some other means.  It is reasonable, then, to hope that C11 threads will interoperate as desired with <code>flockfile()</code>, but not reasonable to omit unit tests probing that detail specifically.</p>\n<p>Note also that in a context such as this, &quot;usually safe&quot; is a tricksome way of saying &quot;unsafe&quot;.</p>\n"}], "owner": {"reputation": 261, "user_id": 9964991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c6d11f9efac33f7b0493cf41d9942f?s=128&d=identicon&r=PG&f=1", "display_name": "ov2k", "link": "https://stackoverflow.com/users/9964991/ov2k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1617725224, "creation_date": 1551238712, "question_id": 54897650, "link": "https://stackoverflow.com/questions/54897650/c11-equivalent-of-posix-flockfile", "title": "C11 equivalent of POSIX flockfile()?", "body": "<p>Both POSIX and C11 require that streams have an associated lock to prevent data races and interleaving.  POSIX documents <code>flockfile()</code> and related functions to allow thread-safe I/O to span multiple calls.  Is there an equivalent C function?  I don't recall one and haven't been able to find one mentioned, which doesn't necessarily mean one doesn't exist.</p>\n\n<p>On a related note, is it safe to assume any implementation claiming POSIX conformance will respect <code>flockfile()</code> when using C11 threads.h?  I think most major POSIX-compliant C implementations that support threads.h do so by building on pthreads, which would imply such an assumption is usually safe.  However, multithreading is hard, and it would be helpful to know of exceptions.</p>\n"}, {"tags": ["c", "format", "printf"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1551238207, "post_id": 54897509, "comment_id": 96563723, "body": "What output do you expect for the given age?  You could print <code>age % 100</code> to print a 2-digit number between <code>00</code> and <code>99</code>, for example.  Centenarians get upset by this sort of treatment, though."}, {"owner": {"reputation": 126, "user_id": 2356491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c212a25471819cb14d9d545acb5515b1?s=128&d=identicon&r=PG", "display_name": "foodtooth", "link": "https://stackoverflow.com/users/2356491/foodtooth"}, "edited": false, "score": 0, "creation_date": 1551238823, "post_id": 54897509, "comment_id": 96563839, "body": "Cut off an integer does not mean anything. It is not a precision control in the aspect of floating number"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9726190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0jQ9bKidzag/AAAAAAAAAAI/AAAAAAAAAJ4/FgTbJt1ztRQ/photo.jpg?sz=128", "display_name": "Chase Allen", "link": "https://stackoverflow.com/users/9726190/chase-allen"}, "edited": false, "score": 0, "creation_date": 1551238340, "post_id": 54897539, "comment_id": 96563748, "body": "So does that mean its impossible for me to limit the max number of output digits from an int, implying that what the lab is asking is impossible?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 23, "user_id": 9726190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0jQ9bKidzag/AAAAAAAAAAI/AAAAAAAAAJ4/FgTbJt1ztRQ/photo.jpg?sz=128", "display_name": "Chase Allen", "link": "https://stackoverflow.com/users/9726190/chase-allen"}, "edited": false, "score": 0, "creation_date": 1551238441, "post_id": 54897539, "comment_id": 96563770, "body": "@ChaseAllen Perhaps you should limit the input to numbers from 0 to 99."}, {"owner": {"reputation": 23, "user_id": 9726190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0jQ9bKidzag/AAAAAAAAAAI/AAAAAAAAAJ4/FgTbJt1ztRQ/photo.jpg?sz=128", "display_name": "Chase Allen", "link": "https://stackoverflow.com/users/9726190/chase-allen"}, "edited": false, "score": 0, "creation_date": 1551240134, "post_id": 54897539, "comment_id": 96564078, "body": "Well the instructions say to use 22 as my int value and to format the printf statement so that only 2 digits are output... I assumed that meant to limit its min and max to 2... what would you recommend I do? (I used a different int larger than 22 to test to see if my formatting was working btw hence the 2232)"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 23, "user_id": 9726190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0jQ9bKidzag/AAAAAAAAAAI/AAAAAAAAAJ4/FgTbJt1ztRQ/photo.jpg?sz=128", "display_name": "Chase Allen", "link": "https://stackoverflow.com/users/9726190/chase-allen"}, "edited": false, "score": 0, "creation_date": 1551240184, "post_id": 54897539, "comment_id": 96564087, "body": "@ChaseAllen How would you expect such a value to be displayed?"}, {"owner": {"reputation": 23, "user_id": 9726190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0jQ9bKidzag/AAAAAAAAAAI/AAAAAAAAAJ4/FgTbJt1ztRQ/photo.jpg?sz=128", "display_name": "Chase Allen", "link": "https://stackoverflow.com/users/9726190/chase-allen"}, "edited": false, "score": 0, "creation_date": 1551240538, "post_id": 54897539, "comment_id": 96564165, "body": "It says the output should be \u201cMy friend is 22 years old\u201d which I can do no problem but it\u2019s the part where it says to format the printf to only display 2 digits is what confuses me..."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 23, "user_id": 9726190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0jQ9bKidzag/AAAAAAAAAAI/AAAAAAAAAJ4/FgTbJt1ztRQ/photo.jpg?sz=128", "display_name": "Chase Allen", "link": "https://stackoverflow.com/users/9726190/chase-allen"}, "edited": false, "score": 0, "creation_date": 1551240632, "post_id": 54897539, "comment_id": 96564183, "body": "@ChaseAllen It sounds like there&#39;s an implicit assumption that the value will be less that 100.  If I asked you to write, on paper, the number 2322 using only 2 digits, how would you do it?  You can&#39;t."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1551237923, "creation_date": 1551237923, "answer_id": 54897539, "question_id": 54897509, "link": "https://stackoverflow.com/questions/54897509/printf-formatting-an-integer-to-have-a-maximum-and-minimum-of-2-digits-displayed/54897539#54897539", "title": "Printf formatting an integer to have a maximum and minimum of 2 digits displayed", "body": "<p>For the <code>%i</code> format specifier, the digit before the decimal specifies the minimum field width, which is the number of spaces the value will take up, and the number after the decimal is the minimum number of digits to display, meaning that the result would be left padded with zeros if too short.</p>\n\n<p>You can't display less digits than is needed to print the number for an integer.  Only for floating point types can you display less digits.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1551240779, "last_edit_date": 1551240779, "creation_date": 1551240327, "answer_id": 54897891, "question_id": 54897509, "link": "https://stackoverflow.com/questions/54897509/printf-formatting-an-integer-to-have-a-maximum-and-minimum-of-2-digits-displayed/54897891#54897891", "title": "Printf formatting an integer to have a maximum and minimum of 2 digits displayed", "body": "<p><code>\"%2.2i\"</code> prints with a <em>minimum</em> of 2 characters<sup>1</sup> (first <code>2</code>), padding with spaces as needed, and at least 2 digits (2nd <code>2</code>).</p>\n\n<p>To \"have a ... minimum of 2 digits\", use <code>\"%.2i\"</code> </p>\n\n<p>To \"have a maximum ... of 2 digits\", insure the value is in the range [-99...99].  Example, use <code>age % 100</code></p>\n\n<pre><code>printf(\"My friend is %.2i years old.\",age%100);\n</code></pre>\n\n<hr>\n\n<p>Folks over age 99 <a href=\"https://en.wikipedia.org/wiki/List_of_the_verified_oldest_people\" rel=\"nofollow noreferrer\">Jeanne Calment</a>, <a href=\"https://en.wikipedia.org/wiki/Methuselah\" rel=\"nofollow noreferrer\">Methuselah</a>, <a href=\"https://www.toptenz.net/top-10-fictional-characters-who-lived-over-a-thousand-years.php\" rel=\"nofollow noreferrer\">Imhotep</a> will print a truncated year.<a href=\"https://stackoverflow.com/questions/54897509/printf-formatting-an-integer-to-have-a-maximum-and-minimum-of-2-digits-displayed/54897891#comment96563723_54897509\">@Jonathan Leffler</a></p>\n\n<hr>\n\n<p><sup>1</sup> \"<em>minimum</em> of 2 characters\" includes a potential sign character.</p>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1551240397, "creation_date": 1551240397, "answer_id": 54897895, "question_id": 54897509, "link": "https://stackoverflow.com/questions/54897509/printf-formatting-an-integer-to-have-a-maximum-and-minimum-of-2-digits-displayed/54897895#54897895", "title": "Printf formatting an integer to have a maximum and minimum of 2 digits displayed", "body": "<p>If you want to control the <em>minimum</em> number of digits output, you can use a length specifier like <code>%.2d</code>. However, you may not limit the <em>maximum</em> number of digits output. </p>\n\n<p>What you can do instead is limit the <code>int</code> value before the call:</p>\n\n<pre><code>#ifndef min\n#define min(a,b) (((a) &lt; (b)) ? (a) : (b))\n#endif\n\nprintf(\"My friend is %.2d years old.\\n\", min(age, 99));\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9726190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0jQ9bKidzag/AAAAAAAAAAI/AAAAAAAAAJ4/FgTbJt1ztRQ/photo.jpg?sz=128", "display_name": "Chase Allen", "link": "https://stackoverflow.com/users/9726190/chase-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3543, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1551240779, "creation_date": 1551237636, "question_id": 54897509, "link": "https://stackoverflow.com/questions/54897509/printf-formatting-an-integer-to-have-a-maximum-and-minimum-of-2-digits-displayed", "title": "Printf formatting an integer to have a maximum and minimum of 2 digits displayed", "body": "<p>In one of my assignments, one line is required to <code>printf</code> \"My friend is __ years old\" where the empty space must contain no more and no less than 2 digits from an integer but no matter what I try, nothing is working...</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int age = 22332;\n\nprintf(\"My friend is %2.2i years old.\",age);\n</code></pre>\n\n<p>Yet the output ends up being</p>\n\n<blockquote>\n  <p>My friend is 22332 years old.</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "embedded", "avr", "atmega"], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 9233445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe412753ae2567aeb3a295d326d58cd?s=128&d=identicon&r=PG&f=1", "display_name": "R.k. Lohana", "link": "https://stackoverflow.com/users/9233445/r-k-lohana"}, "is_accepted": false, "score": 0, "last_activity_date": 1551249581, "creation_date": 1551249581, "answer_id": 54899475, "question_id": 54897476, "link": "https://stackoverflow.com/questions/54897476/passing-pin-status-as-a-function-parameter/54899475#54899475", "title": "Passing PIN status as a function parameter", "body": "<p>Well in AVR ports are special IO registers and they are accessed using IN and OUT instructions. Not like memory using LDR etc.</p>\n\n<p>From the port definition you can see that you need to make the port pointer volatile. which the compiler would have also told you as a warning when you would had tried to pass PORT to the function.</p>\n\n<pre><code>#define PORTB _SFR_IO8(0x05)\n</code></pre>\n\n<p>which maps to</p>\n\n<pre><code>#define _SFR_IO8(io_addr) _MMIO_BYTE((io_addr) + __SFR_OFFSET)\n#define _MMIO_BYTE(mem_addr) (*(volatile uint8_t *)(mem_addr))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 11122698, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jJZv2BtP76Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reQduqfhNhjefXYRzft8Xl4HqI_AQ/mo/photo.jpg?sz=128", "display_name": "Jaywalk", "link": "https://stackoverflow.com/users/11122698/jaywalk"}, "edited": false, "score": 0, "creation_date": 1551313768, "post_id": 54900591, "comment_id": 96599299, "body": "I&#39;ll give it another go with this in mind, thank you. Unfortunately my first attempt at debouncing was exactly as you said, just wait 10ms(which I found was the recommended wait time for SW debouncing) and recheck. I&#39;m taking a class right now and the professor decided to introduce state space design using debouncing and dictated both the technique used and delays, so I don&#39;t have any say in the matter (That being said in reality I won&#39;t be using that method)."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1551254199, "creation_date": 1551254199, "answer_id": 54900591, "question_id": 54897476, "link": "https://stackoverflow.com/questions/54897476/passing-pin-status-as-a-function-parameter/54900591#54900591", "title": "Passing PIN status as a function parameter", "body": "<p>Various issues:</p>\n\n<ul>\n<li>The function should be <code>void debounceSwitch(volatile uint8_t* port, uint8_t pin)</code>. Pointers to hardware registers must always be <code>volatile</code>. It doesn't make sense to return anything.</li>\n<li>Never use <code>1</code> signed <code>int</code> literals when bit-shifting. Should be <code>1u &lt;&lt; n</code> or your program will bug out when <code>n</code> is larger than 8.</li>\n<li>Burning away 30ms several times over in a busy-delay is horrible practice. It will lock your CPU at 100% doing nothing meaningful, for an eternity.</li>\n</ul>\n\n<p>There are many ways to debounce buttons. The simplest professional form is probably to have a periodic timer running with interrupt every 10ms (should be enough, if in doubt measure debounce spikes of your button with a scope). It will look something like the following pseudo code:</p>\n\n<pre><code>volatile bool button_pressed = false;\n\nvoid timer_interrupt (void)\n{\n  uint8_t button = port &amp; mask;\n  button_pressed = button &amp;&amp; prev;\n  prev = button;\n}\n</code></pre>\n\n<p>This assuming that buttons use active high logic. </p>\n"}, {"tags": [], "owner": {"reputation": 479, "user_id": 8321975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d934a13d46469176a140ba9b04c929c?s=128&d=identicon&r=PG&f=1", "display_name": "kesselhaus", "link": "https://stackoverflow.com/users/8321975/kesselhaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1551377839, "creation_date": 1551377839, "answer_id": 54931887, "question_id": 54897476, "link": "https://stackoverflow.com/questions/54897476/passing-pin-status-as-a-function-parameter/54931887#54931887", "title": "Passing PIN status as a function parameter", "body": "<p>What I dislike on your implementation is the pure dependency on PORT/IO handling and the actual filter/debouncing logic. What are you doing then, when the switch input comes over a signal e.g. from CAN?</p>\n\n<p>Also, it can be handled much easier, if you think in configurable/parameterizable filters. You implement the logic once, and then just create proper configs and pass separate state variables into the filter.</p>\n\n<pre><code>// Structure to keep state\ntypedef struct {\n    boolean state;\n    uint8   cnt;\n} deb_state_t;\n\n// Structure to configure the filters debounce values\ntypedef struct {\n    uint8 cnt[2]; // [0] = H-&gt;L transition, [1] = L-&gt;H transition\n} deb_config_t;\n\nboolean debounce(boolean in, deb_state_t *state, const deb_config_t *cfg)\n{\n    if (state-&gt;state != in) {\n        state-&gt;cnt++;\n        if (state-&gt;cnt &gt;= cfg-&gt;cnt[in]) {\n            state-&gt;state = in;\n            state-&gt;cnt = 0;\n        }\n    } else {\n        state-&gt;cnt = 0;\n    }\n    return state-&gt;state;\n}\n\nstatic const deb_config_t debcfg_pin = { {3,4} };\nstatic const deb_config_t debcfg_can = { {2,1} };\n\nint main(void)\n{\n    boolean in1, in2, out1, out2;\n    deb_state_t debstate_pin = {0, 0};\n    deb_state_t debstate_can = {0, 0};\n    while(1) {\n        // read pin and convert to 0/1\n        in1 = READ_PORT(PORTx, PINxy); // however this is defined on this architecture\n        out1 = debounce(in1, &amp;debstate_pin, &amp;debcfg_pin);\n        // same handling, but input from CAN\n        in2 = READ_CAN(MSGx, SIGxy); // however this is defined on this architecture\n        out2 = debounce(in2, &amp;debstate_can, &amp;debcfg_can);\n\n        // out1 &amp; out2 are now debounced\n }\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 11122698, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jJZv2BtP76Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reQduqfhNhjefXYRzft8Xl4HqI_AQ/mo/photo.jpg?sz=128", "display_name": "Jaywalk", "link": "https://stackoverflow.com/users/11122698/jaywalk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551377839, "creation_date": 1551237364, "question_id": 54897476, "link": "https://stackoverflow.com/questions/54897476/passing-pin-status-as-a-function-parameter", "title": "Passing PIN status as a function parameter", "body": "<p>I want to write a function for my AVR ATmega328 that debounces switches using state space to confirm a switch press. After finishing it I wanted to generalize my function so that I may reuse it in the future with little work, but that involves passing the pin I want to use as a function parameter, and I just can't get that to work.</p>\n\n<p>This is what I have now:</p>\n\n<pre><code>int debounceSwitch(unsigned char *port, uint8_t mask)\n{\nint n = 0;\nwhile (1)\n{\n    switch (n)\n    {\n        case 0: //NoPush State\n        _delay_ms(30);\n        if(!(*port &amp; (1&lt;&lt;mask))){n = n + 1;}\n        else {return 0;}\n        break;\n\n        case 1: //MaybePush State\n        _delay_ms(30);\n        if(!(*port &amp; (1&lt;&lt;mask))){n = n + 1;}\n        else {n = n - 1;}\n        break;\n\n        case 2: //YesPush State\n        _delay_ms(30);\n        if(!(*port &amp; (1&lt;&lt;mask))){return 1;}\n        else {n = n - 1;}\n        break;\n    }\n}\n} \n</code></pre>\n\n<p>I have a hunch my issue is with the data type I'm using as the parameter, and I seem to have gotten different answers online.</p>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["c", "linux", "operating-system", "shared-memory", "systems-programming"], "comments": [{"owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1551236803, "post_id": 54897357, "comment_id": 96563411, "body": "Yeah, I thought it is going to ask for the code after I pressed continue, but it directly posted the question. Anyways, added now. ;)"}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1551237545, "post_id": 54897357, "comment_id": 96563586, "body": "As per the shared memory operation, this seems fine. and tried to execute this and it gets the shared memory fine and print is fine.  is shmget() is getting success? is the segmentation fault is in checkArgs()? put more printf to check for the position of the crash."}, {"owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "reply_to_user": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1551237710, "post_id": 54897357, "comment_id": 96563622, "body": "No, Error occurred since I added the variable to test if the data is being written to the shared mem. Until I added ms and ns, everything was fine."}, {"owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "reply_to_user": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1551237962, "post_id": 54897357, "comment_id": 96563666, "body": "I just found out that the shared memory isn&#39;t getting created. After removing all ms and ns assignments, I got &quot;Error creating shared memory&quot; from the check."}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 1, "creation_date": 1551240039, "post_id": 54897752, "comment_id": 96564065, "body": "This key should have proper number, and should be unique for writing and reading process/thread to create the same shared memory id. this should be fine with hard coded value also. just pass 1000 as key and it should work fine. usually this key is generated using ftok ()."}], "tags": [], "owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "is_accepted": false, "score": 0, "last_activity_date": 1551239321, "creation_date": 1551239321, "answer_id": 54897752, "question_id": 54897357, "link": "https://stackoverflow.com/questions/54897357/segmentation-fault-core-dumped-while-trying-to-write-integers-into-shared-memo/54897752#54897752", "title": "Segmentation fault (core dumped) while trying to write integers into Shared Memory in C", "body": "<p>I found the problem. Instead of defining a key using #define KEY  and using that in the shmget(), I used key_t to create a key variable. This fixed the problem of \"Invalid argument\"</p>\n\n<p>Here's the updated code:</p>\n\n<pre><code>void createSharedMem()\n{\n    key_t key;\n    int shmid = shmget(key, 4096, 0666 | IPC_CREAT);\n    if(shmid &lt; 0)\n        perror(\"\\n Error creating shared memory\");\n    ms = shmat(shmid, NULL,0);\n    ns = shmat(shmid,NULL,0);\n    *ms =0\n    *ns=0;\n    printf(\"%d\",*ms);\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551239321, "creation_date": 1551236497, "last_edit_date": 1551236744, "question_id": 54897357, "link": "https://stackoverflow.com/questions/54897357/segmentation-fault-core-dumped-while-trying-to-write-integers-into-shared-memo", "title": "Segmentation fault (core dumped) while trying to write integers into Shared Memory in C", "body": "<p>I'm trying to use shared memory between processes. I'm just implementing the features step-by-step. I keep getting Segmentation fault (core dumped) while I try to write something into it.</p>\n\n<pre><code>int* ms; // Pointer for milliseconds\nint* ns; // Pointer for nanoseconds\n\nvoid checkArgs(int argc, char* argv[]);\nvoid createSharedMem();\nvoid createSharedMem()\n{\n    int shmid = shmget(KEY, sizeof(int)*128, IPC_CREAT |0666 );\n    if(shmid &lt; 0)\n        printf(\"\\n Error creating shared memory\");\n    ms = shmat(shmid, NULL,0);\n    ns = shmat(shmid,NULL,0);\n    *ms = 0;\n    *ns = 0;\n}\n\n\nint main(int argc, char* argv[])\n{\n\n    checkArgs(argc,argv);\n    createSharedMem();            \n\n    *ms = 1;\n    *ns = 1;\n\n    printf(\"ms : %d ns : %d\", *ms,*ns);\n\n}\n</code></pre>\n"}, {"tags": ["c", "switch-statement"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11003835, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NjxUzU4BOxY/AAAAAAAAAAI/AAAAAAAAABQ/3DvBTGCm_r8/photo.jpg?sz=128", "display_name": "babySteps", "link": "https://stackoverflow.com/users/11003835/babysteps"}, "edited": false, "score": 0, "creation_date": 1551234715, "post_id": 54897115, "comment_id": 96562981, "body": "thanks, should i be in habit of always putting space before % even if d, f, or lf for similar reasons?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 39, "user_id": 11003835, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NjxUzU4BOxY/AAAAAAAAAAI/AAAAAAAAABQ/3DvBTGCm_r8/photo.jpg?sz=128", "display_name": "babySteps", "link": "https://stackoverflow.com/users/11003835/babysteps"}, "edited": false, "score": 0, "creation_date": 1551234884, "post_id": 54897115, "comment_id": 96563012, "body": "@babySteps Only for <code>%c</code>.  The others will flush out leading whitespace."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 39, "user_id": 11003835, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NjxUzU4BOxY/AAAAAAAAAAI/AAAAAAAAABQ/3DvBTGCm_r8/photo.jpg?sz=128", "display_name": "babySteps", "link": "https://stackoverflow.com/users/11003835/babysteps"}, "edited": false, "score": 0, "creation_date": 1551234915, "post_id": 54897115, "comment_id": 96563019, "body": "@babySteps \u2014 only 3 format specifiers don&#39;t skip leading white space: <code>%c</code>, <code>%[\u2026]</code> (scan sets) and <code>%n</code>.  For all others, white space is skipped automatically.  It rarely does any harm to add white space; it is not usually necessary (except with <code>%c</code> in particular)."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1551234511, "creation_date": 1551234511, "answer_id": 54897115, "question_id": 54897040, "link": "https://stackoverflow.com/questions/54897040/switch-statement-registering-as-default-when-i-input-case-triggers/54897115#54897115", "title": "switch statement registering as default when i input case triggers", "body": "<p>The variable <code>decider</code> has type <code>int</code> and you're using the <code>%d</code> format specifier to read in a value, which expect a decimal integer as input.  So unless you enter in a number that is the ASCII code for one of the given letters, you'll always go to the default.</p>\n\n<p>You're looking for a character, so make <code>decider</code> a <code>char</code> instead and use <code>%c</code> to read it:</p>\n\n<pre><code>char decider;\n...\nscanf(\" %c\", &amp;decider);\n</code></pre>\n\n<p>Also note the space before <code>%c</code>.  The space will absorb any whitespace characters, including the newline that finished the last line of text.  This is needed for <code>%c</code> because unlike other format specifiers, <code>%c</code> will read and store a whitespace character.</p>\n"}], "owner": {"reputation": 39, "user_id": 11003835, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NjxUzU4BOxY/AAAAAAAAAAI/AAAAAAAAABQ/3DvBTGCm_r8/photo.jpg?sz=128", "display_name": "babySteps", "link": "https://stackoverflow.com/users/11003835/babysteps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 54897115, "answer_count": 1, "score": 0, "last_activity_date": 1551234541, "creation_date": 1551233798, "last_edit_date": 1551234541, "question_id": 54897040, "link": "https://stackoverflow.com/questions/54897040/switch-statement-registering-as-default-when-i-input-case-triggers", "title": "switch statement registering as default when i input case triggers", "body": "<p>switch not working quite correctly not sure why, thanks cheerz\ndisregard possible incorrect math ill figure it out later, or u can fix it too :P\nit just skips to the default statement if i put c or C\nthe first two input seem to work fine </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int decider;\n    double radius, height, circumference, surfaceArea, volume;\n    const double PI = 3.14159265;\n\n    printf(\"please enter radius in cm:\");\n    scanf(\"%lf\", &amp;radius);\n    printf(\"please enter height in cm:\");\n    scanf(\"%lf\", &amp;height);\n    printf(\"C. Calculate and display the circumference of the base of the cone\\n\"\n           \"S. Calculate and display the surface area of the cone\\n\"\n           \"V. Calculate and display the volume of the cone\\n\");\n    scanf(\"%d\", &amp;decider);\n    switch(decider)\n    {\n        case 'c':\n        case 'C':\n            circumference = (2.0f*PI)*radius;\n            printf(\"%lf cm\", circumference);\n            break;\n        case 's':\n        case 'S':\n            surfaceArea = PI * (pow(radius, 2)) + (PI * radius) * (sqrt((pow(height, 2)) + (pow(radius, 2))));\n            printf(\"%lf cm sqaured\", surfaceArea);\n            break;\n        case 'v':\n        case 'V':\n            volume = PI * (pow(radius, 2)) * (height/3.0f);\n            printf(\"%lf cm cubed\", volume);\n            break;\n        default:\n            printf(\"An invalid option was selected!\");\n    }\n\n    getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "getchar"], "comments": [{"owner": {"reputation": 8707, "user_id": 6919963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f6e821b392cb6c281097a8f668669efe?s=128&d=identicon&r=PG", "display_name": "Miguel Ruivo", "link": "https://stackoverflow.com/users/6919963/miguel-ruivo"}, "edited": false, "score": 0, "creation_date": 1551231612, "post_id": 54896725, "comment_id": 96562262, "body": "Can you provide a full example?"}, {"owner": {"reputation": 83, "user_id": 3327790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7c9bffdf465d73152cc78bd3257313?s=128&d=identicon&r=PG&f=1", "display_name": "Bondspencil", "link": "https://stackoverflow.com/users/3327790/bondspencil"}, "edited": false, "score": 0, "creation_date": 1551232026, "post_id": 54896725, "comment_id": 96562353, "body": "There isn&#39;t any error it just the desire result don&#39;t count all words. It will mis count. I have updated and include full code."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1551232308, "post_id": 54896725, "comment_id": 96562412, "body": "<i><code>if (!(lastch == &#39; &#39; &amp;&amp; ch == &#39; &#39;))</code></i> \u2013 sure?"}, {"owner": {"reputation": 83, "user_id": 3327790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7c9bffdf465d73152cc78bd3257313?s=128&d=identicon&r=PG&f=1", "display_name": "Bondspencil", "link": "https://stackoverflow.com/users/3327790/bondspencil"}, "edited": false, "score": 0, "creation_date": 1551232478, "post_id": 54896725, "comment_id": 96562462, "body": "Yep, it just missed &quot;I&quot; or any symbols. It counts any length of characters words with double space without any issue."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1551318528, "post_id": 54896725, "comment_id": 96600340, "body": "Exhibiting a behavior that you don&#39;t want\u2014like failing to count single character words as words\u2014*is* an error. It&#39;s not a compilation error or a run-time crash but it&#39;s still an error."}], "answers": [{"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1551233496, "last_edit_date": 1551233496, "creation_date": 1551232897, "answer_id": 54896914, "question_id": 54896725, "link": "https://stackoverflow.com/questions/54896725/wordcount-in-c-that-supports-singlar-letter-input/54896914#54896914", "title": "Wordcount in C that supports singlar letter input", "body": "<p>You are over-complicating your conditional tests. If I understand your purpose, the only thing you are concerned with is if <code>lastch != ' '</code> and either <code>(ch == ' ' || ch == '\\n')</code>.</p>\n\n<p>Additionally, <code>getchar</code> returns type <code>int</code>. Therefore, <code>ch</code> should be type <code>int</code> to properly detect <code>EOF</code> on all systems.</p>\n\n<p>Simplifying with those changes, you could do something similar to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    int wordcount = 0,\n        lastch = 0,     /* just initialize to zero */\n        ch;             /* ch should be an int */\n\n    while ((ch = getc (stdin)) != EOF) {\n        if (lastch &amp;&amp; lastch != ' ' &amp;&amp; (ch == ' ' || ch == '\\n'))\n            wordcount++;\n        lastch = ch;\n    }\n    if (lastch != '\\n') /* handle no '\\n' on final line */\n        wordcount++;\n\n    printf (\"The document contains %d %s.\\n\", \n            wordcount, wordcount != 1 ? \"words\" : \"word\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ echo \"     \" | ./bin/wordcnt\nThe document contains 0 words.\n\n$ echo \"   t  \" | ./bin/wordcnt\nThe document contains 1 word.\n\n$ echo \"   t t  \" | ./bin/wordcnt\nThe document contains 2 words.\n</code></pre>\n\n<p><strong>Note:</strong> in order to protect against a corner-case of a file not containing a POSIX <code>eof</code> (e.g. <code>'\\n'</code> at the end of the file), you would need to add an additional flag that at least one character was found and check <code>lastch</code> in combination after you exit the loop, e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    int wordcount = 0,\n        lastch = 0,     /* just initialize to zero */\n        ch,             /* ch should be an int */\n        c_exist = 0;    /* flag at least 1 char found */\n\n    while ((ch = getc (stdin)) != EOF) {\n        if (lastch &amp;&amp; lastch != ' ' &amp;&amp; (ch == ' ' || ch == '\\n'))\n            wordcount++;\n        if (ch != ' ' &amp;&amp; ch != '\\n')    /* make sure 1 char found */\n            c_exist = 1;\n        lastch = ch;\n    }\n    if (c_exist &amp;&amp; lastch != '\\n')  /* handle no '\\n' on final line */\n        wordcount++;\n\n    printf (\"The document contains %d %s.\\n\", \n            wordcount, wordcount != 1 ? \"words\" : \"word\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Corner-case Example</strong></p>\n\n<pre><code>$ echo -n \"   t\" | ./bin/wordcnt\nThe document contains 1 word.\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 3327790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7c9bffdf465d73152cc78bd3257313?s=128&d=identicon&r=PG&f=1", "display_name": "Bondspencil", "link": "https://stackoverflow.com/users/3327790/bondspencil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1551498981, "accepted_answer_id": 54896914, "answer_count": 1, "score": 0, "last_activity_date": 1551233496, "creation_date": 1551231381, "last_edit_date": 1551232768, "question_id": 54896725, "link": "https://stackoverflow.com/questions/54896725/wordcount-in-c-that-supports-singlar-letter-input", "closed_reason": "Not suitable for this site", "title": "Wordcount in C that supports singlar letter input", "body": "<p>I have some issues with 'wordcount' counting correctly as it missed singular letter such as  'I'. </p>\n\n<p>Essentially if space between a character/symbol or standalone character/symbol will counts a word count. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int wordcount;\n    int ch;\n    char lastch = -1;\n\n    wordcount = 0;\n\n    while ((ch = getc(stdin)) != EOF) {\n        if (ch == ' ' || ch == '\\n')\n        {\n            if (!(lastch == ' ' &amp;&amp; ch == ' '))\n            {\n                wordcount++;\n            }\n        }\n        lastch = ch;\n    }\n\n    printf(\"The document contains %d words.\", wordcount);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "ubuntu", "gtk", "gtk2"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "edited": false, "score": 0, "creation_date": 1551324091, "post_id": 54910928, "comment_id": 96601534, "body": "solved my problem, but you could have told me that g_timeout_add_seconds goes before gtk_main"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1551345716, "post_id": 54910928, "comment_id": 96609249, "body": "To be clear: nothing should ever go after the <code>gtk_main</code> call. <code>gtk_main</code> is what runs the event loop that continuously checks what events GTK+ need to be process. Once you call <code>gtk_main_quit</code>, you exit the event loop and get out of <code>gtk_main</code>, so everything you do after that point won&#39;t be processed by GTK+. See <a href=\"https://en.wikipedia.org/wiki/Event_loop\" rel=\"nofollow noreferrer\">event loops</a>."}], "tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": true, "score": 1, "last_activity_date": 1551287376, "creation_date": 1551287376, "answer_id": 54910928, "question_id": 54896585, "link": "https://stackoverflow.com/questions/54896585/in-gtk-how-can-i-switch-to-a-new-screen-with-new-buttons-and-other-widgets-bu/54910928#54910928", "title": "In gtk, how can I switch to a new screen with new buttons, and other widgets, but on the same window?", "body": "<p>Don't use <code>sleep</code>. GTK+ uses an event loop to react to event, so you won't reach your <code>sleep</code> call until <code>gtk_main_quit</code> has been called, which is already too late. You're supposed to use <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-timeout-add-seconds\" rel=\"nofollow noreferrer\"><code>g_timout_add_seconds</code></a> instead to add an event source that will call your callback after your 3 seconds. In that callback, you can call your <code>DisplayMainMenu</code> function.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 54910928, "answer_count": 1, "score": 1, "last_activity_date": 1551287376, "creation_date": 1551230289, "last_edit_date": 1551287047, "question_id": 54896585, "link": "https://stackoverflow.com/questions/54896585/in-gtk-how-can-i-switch-to-a-new-screen-with-new-buttons-and-other-widgets-bu", "title": "In gtk, how can I switch to a new screen with new buttons, and other widgets, but on the same window?", "body": "<p>In gtk, I am trying to make a game that displays the creator in big letters for 3 (three) seconds before displaying the main menu. I know that nothing is wrong /w the function <code>DisplayMainMenu</code>. For some reason this makes it just show the Asadefa screen for ever. How can I fix?</p>\n\n<pre><code>#define NOTHING\n#define EMPTYSTRING \"\\0\"\n\nint main(int argc, char *argv[]) {\n    gtk_init (&amp;argc, &amp;argv);\n    Window = gtk_window_new(0);\n    Box = gtk_hbox_new(00, 00);\n\n    gtk_window_set_position(GTK_WINDOW(Window), 1);\n    gtk_window_set_default_size(GTK_WINDOW(Window),800, 500);\n    gtk_window_set_title(GTK_WINDOW(Window), \"Fakecraft\" );\n    g_signal_connect(Window, \"destroy\", gtk_main_quit, NULL);\n    gtk_container_set_border_width(GTK_CONTAINER(Window),16);\n\n    char *TXT=(\"&lt;span font=\\\"72\\\"&gt;ASADEFA &lt;/span&gt;\");\n    GtkWidget (*Label) = gtk_label_new(EMPTYSTRING);\n    gtk_container_add(GTK_CONTAINER(Window), Box);\n    gtk_container_add(GTK_CONTAINER(Box), Label);\n    gtk_label_set_markup(GTK_LABEL(Label), TXT);\n\n    gtk_widget_show_all(Window);\n    gtk_main( NOTHING NOTHING );\n\n    sleep(3);\n\n    DisplayMainMenu();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "date", "struct", "digits", "octal"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 4, "creation_date": 1551229227, "post_id": 54896421, "comment_id": 96561822, "body": "Get rid of all of the numbers with a 0 at the beginning, unless you purposefully mean an octal number. <code>result.month == 09</code> is invalid in base-8. If you want to allow a leading zero you&#39;ll have to handle input as text and parse it appropriately."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1551230231, "post_id": 54896421, "comment_id": 96561987, "body": "@RetiredNinja Write answers instead of comments."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1551230564, "post_id": 54896421, "comment_id": 96562039, "body": "Note that <code>%i</code> can lead to unexpected results when people enter dates in August or September."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1551231052, "post_id": 54896421, "comment_id": 96562148, "body": "Compile with all warnings enabled (at least <code>-W3</code>.  The results may surprise you."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1551240031, "post_id": 54896421, "comment_id": 96564062, "body": "@Swordfish Figured it would get closed as typo or too broad. It&#39;s also kinda rambly and feels like a morpher. Someone else jumped on the grenade. :)"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1551240469, "post_id": 54896421, "comment_id": 96564149, "body": "@RetiredNinja chux isn&#39;t someone likely to jump on grenades."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1551232876, "creation_date": 1551232876, "answer_id": 54896913, "question_id": 54896421, "link": "https://stackoverflow.com/questions/54896421/c-program-structs-assignment-invalid-octal-digit/54896913#54896913", "title": "C Program Structs Assignment Invalid Octal Digit", "body": "<p>The <code>0</code> in <code>result.month == 09</code> begins an <em>octal integer constant</em> yet the rest (<code>9</code>) is not octal.  Hence the coding error.  Use <code>result.month == 9</code> instead.</p>\n\n<p>Change <code>scanf_s(\"%i\",...</code> to <code>scanf_s(\"%d\",...</code> to read input only a decimal.  </p>\n\n<p>Other problems may exist.</p>\n"}], "owner": {"reputation": 23, "user_id": 10741340, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--JwpRSvRR0Y/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gt8-Tv2yT7t03yTuZ1kiSMEmp0yA/mo/photo.jpg?sz=128", "display_name": "ender987", "link": "https://stackoverflow.com/users/10741340/ender987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551232876, "creation_date": 1551228902, "question_id": 54896421, "link": "https://stackoverflow.com/questions/54896421/c-program-structs-assignment-invalid-octal-digit", "title": "C Program Structs Assignment Invalid Octal Digit", "body": "<blockquote>\n  <p>Program Specifications:</p>\n  \n  <p>DESIGN and IMPLEMENT a program that will CREATE and use three\n  different variables of type PERSON.</p>\n  \n  <p>Create a struct using the typedef command for a DATE.</p>\n  \n  <p>Create a struct for a PERSON with the following fields.</p>\n  \n  <p>name [this will be a string] birthdate [this will be a DATE] gender\n  [this will be a char] annualIncome [this will be either float or\n  double, your choice] Create three variables of type PERSON.  Create a\n  function that populates the data for each person (all 3 of them). \n  Create a function that outputs all data about each of the people in a\n  nice formatted manner.</p>\n  \n  <p>Data Validation:</p>\n  \n  <p>All dates entered must be validated.  Make sure you account for the\n  number of days in each month, the fact that there are exactly 12\n  months and every four years there is a leap year.</p>\n  \n  <p>The name for each PERSON will be stored in sentence case.</p>\n  \n  <p>The gender will either be M, F, or O.</p>\n  \n  <p>The annual income will between 0 dollars and 1 million dollars.</p>\n</blockquote>\n\n<pre><code>   /*Programmer: John B.*/\n/*Date: 2/26/19*/\n/*Program to demonstrate structs for a date and person with specified fields.*/\n#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define PAUSE system(\"pause\")\n#define CLS system(\"cls\")\n#define FLUSH nothingFlush()\n\nvoid nothingFlush() {\n    char nothing;\n    while (scanf(\"%c\", &amp;nothing) == NULL);\n}\n\ntypedef struct {\n    int month;\n    int day;\n    int year;\n} DATE;\n\ntypedef struct {\n    char name[100];\n    char lastName[100];\n    DATE dob;\n    char gender;\n    float anualIncome;\n} PERSON;\n\n//Prototype Functions\nvoid displayDate(DATE birthday);\nvoid displayWorkers(PERSON wOne, PERSON wTwo, PERSON wThree);\nDATE getDate();\nfloat getAnualIncome(PERSON *wOne, PERSON *wTwo, PERSON *wThree);\nvoid getThings(PERSON *wOne, PERSON *wTwo, PERSON *wThree);\n\n//Main\nmain() {\n    DATE birthday;\n    PERSON workerOne, workerTwo, workerThree;\n\n    getThings(&amp;workerOne, &amp;workerTwo, &amp;workerThree);\n    displayWorkers(workerOne, workerTwo, workerThree);\n\n    PAUSE;\n}//End Main\n\n//Write Functions\nvoid displayDate(DATE birthday) {\n    printf(\"\\n\\t%i/%i/%i\\n\", birthday.month, birthday.day, birthday.year);\n}//End Display Date\n\nvoid displayWorkers(PERSON wOne, PERSON wTwo, PERSON wThree) {\n    CLS;\n\n    strcpy(wOne.name, \"Austin\");\n    strcpy(wOne.lastName, \"Warner\");\n    strcpy(wTwo.name, \"Lee\");\n    strcpy(wTwo.lastName, \"Cousins\");\n    strcpy(wThree.name, \"McKinley\");\n    strcpy(wThree.lastName, \"Alitolof\");\n\n    printf(\"\\n\\tFirst: %s\\n\", wOne.name);\n    printf(\"\\n\\tLast: %s\\n\", wOne.lastName);\n    displayDate(wOne.dob);\n    printf(\"\\n\\tGender: %c\\n\", wOne.gender);\n    printf(\"\\n\\tAnual Income: %.2f\\n\", wOne.anualIncome);\n\n    printf(\"\\n\\tFirst: %s\\n\", wTwo.name);\n    printf(\"\\n\\tLast: %s\\n\", wTwo.lastName);\n    displayDate(wTwo.dob);\n    printf(\"\\n\\tGender: %c\\n\", wTwo.gender);\n    printf(\"\\n\\tAnual Income: %.2f\\n\", wTwo.anualIncome);\n\n    printf(\"\\n\\tFirst: %s\\n\", wThree.name);\n    printf(\"\\n\\tLast: %s\\n\", wThree.lastName);\n    displayDate(wThree.dob);\n    printf(\"\\n\\tGender: %c\\n\", wThree.gender);\n    printf(\"\\n\\tAnual Income: %.2f\\n\", wThree.anualIncome);\n\n}//End Display Workers\n\nfloat getAnualIncome(PERSON *wOne, PERSON *wTwo, PERSON *wThree) {\n    float result;\n\n    do {\n        printf(\"\\n\\tEnter The Anual Income Of The Worker: \");\n        scanf_s(\"%f\", &amp;result); FLUSH;\n        if (result &lt; 0 || result &gt; 1000000)\n            printf(\"Invalid Number--- Try Again\\n\");\n    } while (result &lt; 0 || result &gt; 1000000);\n\n    return result;\n}\n\nDATE getDate() {\n    DATE result;\n\n    do {\n        printf(\"\\n\\tEnter Year: \");\n        scanf_s(\"%i\", &amp;result.year); FLUSH;\n        if (result.year &lt; 1900 || result.year &gt; 5000)\n            printf(\"\\tInvalid Number--- Try Again\\n\");\n    } while (result.year &lt; 1900 || result.year &gt; 5000);\n\n    do {\n        printf(\"\\n\\tEnter Month: *****Please enter single digit months as a single digit***** \");\n        scanf_s(\"%i\", &amp;result.month); FLUSH;\n        if (result.month &lt; 0 || result.month &gt; 12)\n            printf(\"\\tInvalid Number--- Try Again\\n\");\n    } while (result.month &lt; 0 || result.month &gt; 12);\n\n    do {\n        printf(\"\\n\\tEnter Day: \");\n        scanf_s(\"%i\", &amp;result.day); FLUSH;\n        if (result.day &lt; 1 || result.day &gt; 31) {\n                printf(\"\\tInvalid Number--- Try Again\\n\");\n        }\n        if (result.month == 2 || result.month == 02) { //Check for leap year\n            if (((result.year % 4 == 0) &amp;&amp; result.year % 100 != 0) ||\n                (result.year % 400 == 0)) {\n                while (result.day &lt; 1 || result.day &gt; 29) { //Leap year feb dates 1-29\n                    printf(\"\\tLeap Year--- Try Again\\n\");\n                    printf(\"\\n\\tEnter Day: \");\n                    scanf_s(\"%i\", &amp;result.day); FLUSH;\n                }\n            }\n            else {\n                while (result.day &lt; 1 || result.day &gt; 28) { //Leap year feb dates 1-29\n                    printf(\"\\tInvalid Number--- Try Again\\n\");\n                    printf(\"\\n\\tEnter Day: \");\n                    scanf_s(\"%i\", &amp;result.day); FLUSH;\n                }\n            }\n        }\n\n        if (result.month == 4 || result.month == 04 || result.month == 6 || // Check if month has only 30 days\n            result.month == 06 || result.month == 9 || result.month == 09 || result.month == 11) { //Invalid Octal Digit??\n            while (result.day &lt; 1 || result.day &gt; 30) {\n                printf(\"\\tInvalid Day--- Try Again\\n\");\n                printf(\"\\n\\tEnter Day: \");\n                scanf_s(\"%i\", &amp;result.day); FLUSH;\n            }\n        }\n    } while (result.day &lt; 1 || result.day &gt; 31);\n\n    return result;\n}//End Get Date\n\nchar getGender(PERSON *wOne, PERSON *wTwo, PERSON *wThree) {\n    char result;\n    do {\n        printf(\"\\n\\tEnter The Gender For The Worker: \");\n        scanf_s(\"%c\", &amp;result); FLUSH;\n        if (result != 'F' &amp;&amp; result != 'f' &amp;&amp; result != 'M' &amp;&amp; result != 'm' &amp;&amp; \n            result != 'O' &amp;&amp; result != 'o')\n            printf(\"\\n\\tERROR-- Try Again...\\n\");\n    } while (result != 'F' &amp;&amp; result != 'f' &amp;&amp; result != 'M' &amp;&amp; result != 'm' &amp;&amp;\n        result != 'O' &amp;&amp; result != 'o');\n\n    return result;\n}//End Get Gender\n\nvoid getThings(PERSON *wOne, PERSON *wTwo, PERSON *wThree) {\n    CLS;\n\n    printf(\"\\n\\tEnter The Date Of Birth Of Austin: \\n\");\n    wOne-&gt;dob = getDate();\n    wOne-&gt;gender = getGender(&amp;wOne, &amp;wTwo, &amp;wThree);\n    wOne-&gt;anualIncome = getAnualIncome(&amp;wOne, &amp;wTwo, &amp;wThree);\n\n    printf(\"\\n\\tEnter The Date Of Birth Of Lee: \\n\");\n    wTwo-&gt;dob = getDate();\n    wTwo-&gt;gender = getGender(&amp;wOne, &amp;wTwo, &amp;wThree);\n    wTwo-&gt;anualIncome = getAnualIncome(&amp;wOne, &amp;wTwo, &amp;wThree);\n\n    printf(\"\\n\\tEnter The Date Of Birth Of McKinley: \\n\");\n    wThree-&gt;dob = getDate();\n    wThree-&gt;gender = getGender(&amp;wOne, &amp;wTwo, &amp;wThree);\n    wThree-&gt;anualIncome = getAnualIncome(&amp;wOne, &amp;wTwo, &amp;wThree);\n\n}//End Get Things\n</code></pre>\n\n<p>So my program runs pretty solid, but I do get an error saying Invalid Octal Digit because of result.month == 09 (where it checks if its a month with only 30 days, Line 139). I was including single digit months as both 9 and 09 in case people put them in that way. And it didn't become an issue until i got above 7. How do I fix this to allow the month to be entered as either 9 or 09. Currently when someone enters 09, the value for result.month is 0 or some weird number, it doesn't stop the number from being entered and allows the days for 09 to be 31 when it should only be 30. Hopefully this is clear enough for someone to understand, and I tried to provide as much info as possible.  Thanks for they help!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1966, "user_id": 10953328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2f9870ea4a1a14bf72bfe62d6f21ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ignatius", "link": "https://stackoverflow.com/users/10953328/ignatius"}, "edited": false, "score": 0, "creation_date": 1551226178, "post_id": 54896094, "comment_id": 96561178, "body": "Without the full code and with the ugly indent it&#39;s hard to say, but did you try fixing <code>strcmp(choice,Rock)</code> and others to <code>strcmp(choice,&quot;Rock&quot;)</code>?"}, {"owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "reply_to_user": {"reputation": 1966, "user_id": 10953328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2f9870ea4a1a14bf72bfe62d6f21ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ignatius", "link": "https://stackoverflow.com/users/10953328/ignatius"}, "edited": false, "score": 0, "creation_date": 1551226311, "post_id": 54896094, "comment_id": 96561202, "body": "I think so but I will try."}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 1, "creation_date": 1551226409, "post_id": 54896094, "comment_id": 96561225, "body": "You should edit to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 165, "user_id": 9179851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HBOKd.png?s=128&g=1", "display_name": "Sympleque", "link": "https://stackoverflow.com/users/9179851/sympleque"}, "edited": false, "score": 0, "creation_date": 1551226472, "post_id": 54896094, "comment_id": 96561239, "body": "in <code>strcmp(choice,Rock)</code>, <code>strcmp(choice,Paper)</code>, <code>strcmp(choice,Scissors)</code> are <code>Rock</code>, <code>Paper</code>, and <code>Scissors</code> meant to be variable names or string literals?"}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1551226478, "post_id": 54896094, "comment_id": 96561241, "body": "One thing to note is that you have, in your if statements, things like <code>char computerString[30] = &quot;Paper&quot;;</code>. These declare variables that are only visible within that if, as they go out of scope when the if block ends. If you have another variable with the same name declared outside the block, these lines do not update that one. You&#39;d most likely need a call to <code>strcpy</code> to do that"}, {"owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "edited": false, "score": 0, "creation_date": 1551226494, "post_id": 54896094, "comment_id": 96561248, "body": "I also have a warning in the code that says, &quot;Warning: unused variable &quot;computerString&quot; &quot;"}, {"owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "edited": false, "score": 0, "creation_date": 1551226625, "post_id": 54896094, "comment_id": 96561292, "body": "thanks so much everyone! and Rock, Paper and Scissors are names with strings attached."}, {"owner": {"reputation": 165, "user_id": 9179851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HBOKd.png?s=128&g=1", "display_name": "Sympleque", "link": "https://stackoverflow.com/users/9179851/sympleque"}, "reply_to_user": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1551226777, "post_id": 54896094, "comment_id": 96561333, "body": "The warning is as straightforward as it seems, you are just not using the variable, you can remove it and your code will do the exact same thing it&#39;s doing now. In fact, your compiler will probably optimize it out anyways. As mentioned by @PhilM, the variable goes out of scope at the end of the <code>if</code> statement."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1551227055, "post_id": 54896094, "comment_id": 96561392, "body": "@ZacharyHunter That warning means that you have declared the variable &quot;coupterString&quot; but are not using it."}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1551227364, "post_id": 54896094, "comment_id": 96561472, "body": "You also have an infinite do-while loop in there."}, {"owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "edited": false, "score": 0, "creation_date": 1551227844, "post_id": 54896094, "comment_id": 96561573, "body": "This is only a part of a 200 line code it ends later and the do while thing != 0 is declared as 0 earlier, I used it to break up the if statements."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "edited": false, "score": 0, "creation_date": 1551227530, "post_id": 54896233, "comment_id": 96561503, "body": "I just made some these changes and It is working amazing!"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1551227459, "last_edit_date": 1551227459, "creation_date": 1551227134, "answer_id": 54896233, "question_id": 54896094, "link": "https://stackoverflow.com/questions/54896094/c-programming-strcmp-in-if-statement-not-evaluating-true/54896233#54896233", "title": "C programming strcmp in if statement not evaluating true", "body": "<pre><code>            else\n            {\n                system(\"cls\");\n                printf(\"\\t\\t\\t\\t\\tZack's Miraculus MiniGames\\n\\n\\n\");\n                printf(\"Computer Chose scissors\\n\");\n                char computerString[30] = \"Scissors\";\n            }\n            }while (thing != 0);\n\n\n            if(strcmp(choice, computerString) == 0)\n            {\n                printf(\"It Is A Draw!\\n\");\n                printf(\"Type Anything To Continue: \");\n                scanf(\"%s\", placeHolder);\n            }\n</code></pre>\n\n<p>The <code>char computerString[30] = \"Scissors\";</code> creates a variable whose scope is the block in which it was created. The following <code>}</code> ends that block, so the variable no longer exists. Further down in the code, when you pass <code>computerString</code> to <code>strcmp</code>, there is no variable with that name in scope.</p>\n\n<p>To fix it, create <code>computerString</code> earlier in the code, in a scope that includes all the code that needs to access it. Use <code>strcpy</code> to set values for <code>computerString</code>.</p>\n\n<p>Your compiler was warning you that you assigned <code>computerString</code> a value and then let it go out of scope without using that value.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "edited": false, "score": 0, "creation_date": 1551230236, "post_id": 54896253, "comment_id": 96561988, "body": "I just finished the Rock, Paper, Scissors part and it works amazing thanks to everyone!"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "edited": false, "score": 0, "creation_date": 1551233253, "post_id": 54896253, "comment_id": 96562638, "body": "Glad you got it working. If my example helped you at all, please upvote my answer so a get a little reputation. :-)"}], "tags": [], "owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "is_accepted": false, "score": 0, "last_activity_date": 1551229292, "last_edit_date": 1551229292, "creation_date": 1551227353, "answer_id": 54896253, "question_id": 54896094, "link": "https://stackoverflow.com/questions/54896094/c-programming-strcmp-in-if-statement-not-evaluating-true/54896253#54896253", "title": "C programming strcmp in if statement not evaluating true", "body": "<p>I went ahead and created a small sample that fixes a few things for you. It doesn't do everything, but it does show you how to properly compare strings etc.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char choice[10];\n    char *computerChoices[] = {\"Rock\", \"Paper\", \"Scissors\"};\n    char *computerChoice = NULL;\n\n    /* Use current time as seed for random generator */\n    srand(time(0));     \n\n    do\n    {\n        printf(\"\\t\\t\\t\\t\\tZack's Miraculus MiniGames\\n\\n\\n\");\n        printf(\"What Is Your Choice? Rock, Paper or Scissors\\n\");\n        printf(\"Enter Your Answer Here: \");\n        scanf(\"%s\", choice);\n    }while (strcmp(choice, computerChoices[0]) != 0 &amp;&amp; strcmp(choice, computerChoices[1]) != 0 &amp;&amp; strcmp(choice, computerChoices[2]) != 0);\n\n    computerChoice = computerChoices[rand()%3];\n    printf(\"Computer Chose %s\\n\", computerChoice);\n\n    if(strcmp(choice, computerChoice) == 0)\n    {\n        printf(\"It Is A Draw!\\n\");\n    }\n    return(0);\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1551227209, "answer_count": 2, "score": -1, "last_activity_date": 1551246164, "creation_date": 1551225893, "last_edit_date": 1551246164, "question_id": 54896094, "link": "https://stackoverflow.com/questions/54896094/c-programming-strcmp-in-if-statement-not-evaluating-true", "closed_reason": "Not suitable for this site", "title": "C programming strcmp in if statement not evaluating true", "body": "<p>I am a Young Coder who is making a Mini Game Lobby, and it doesn't matter what I do the if statements will are not true, and It loops through 3 times then continues not interacting with the loops. All help is appreciated I am trying to finish to show to my friends. I have looked up strcmp things but I still can't figure out what I am doing wrong. I have been working on this for several days each time restarting from the ground up, this is also my first time using strcmp.</p>\n\n<pre><code>   for(i = 1; i &lt;= 3; i++)\n    {\n    do{\n    system(\"cls\");\n    printf(\"\\t\\t\\t\\t\\tZack's Miraculus MiniGames\\n\\n\\n\");\n    printf(\"What Is Your Choice? Rock, Paper or Scissors\\n\");\n    printf(\"Enter Your Answer Here: \");\n    scanf(\"%s\", choice);\n    }while (strcmp(choice,Rock) != 0 &amp;&amp; strcmp(choice,Paper) != 0 &amp;&amp; strcmp(choice,Scissors) != 0);\n\n\n    do\n    {\n    computer = (rand() %3) + 1;\n\n    if(computer == 1)\n    {\n        system(\"cls\");\n        printf(\"\\t\\t\\t\\t\\tZack's Miraculus MiniGames\\n\\n\\n\");\n        printf(\"Computer Chose Rock\\n\");\n        char computerString[30] = \"Rock\";\n    }\n\n    else if(computer == 2)\n    {\n        system(\"cls\");\n        printf(\"\\t\\t\\t\\t\\tZack's Miraculus MiniGames\\n\\n\\n\");\n        printf(\"Computer Chose Paper\\n\");\n        char computerString[30] = \"Paper\";\n    }\n\n    else\n    {\n        system(\"cls\");\n        printf(\"\\t\\t\\t\\t\\tZack's Miraculus MiniGames\\n\\n\\n\");\n        printf(\"Computer Chose scissors\\n\");\n        char computerString[30] = \"Scissors\";\n    }\n    }while (thing != 0);\n\n\n    if(strcmp(choice, computerString) == 0)\n    {\n        printf(\"It Is A Draw!\\n\");\n        printf(\"Type Anything To Continue: \");\n        scanf(\"%s\", placeHolder);\n    }\n\n    else if(strcmp(choice, \"Rock\") == 0 &amp;&amp; strcmp(computerString, \"Scissors\") == 0)\n    {\n        printf(\"Winner, Winner Chicken Dinner!\\n\");\n        score++;\n        printf(\"Type Anything To Continue: \");\n        scanf(\"%s\", placeHolder);\n    }\n\n    else if(strcmp(choice, \"Paper\") == 0 &amp;&amp; strcmp(computerString, \"Rock\") == 0)\n    {\n        printf(\"Man Will Always Beat Machine! (You Win)\\n\");\n        score++;\n        printf(\"Type Anything To Continue: \");\n        scanf(\"%s\", placeHolder);\n    }\n\n    else if(strcmp(choice, \"Scissors\") == 0 &amp;&amp; strcmp(computerString, \"Paper\") == 0)\n    {\n        printf(\"You Win!\\n\");\n        score++;\n        printf(\"Type Anything To Continue: \");\n        scanf(\"%s\", placeHolder);\n    }\n\n    else if(strcmp(choice, \"Scissors\") == 0 &amp;&amp; strcmp(computerString, \"Rock\") == 0)\n    {\n        printf(\"Better Luck Next Time, Computer Wins!\\n\");\n        printf(\"Type Anything To Continue: \");\n        scanf(\"%s\", placeHolder);\n        computerScore++;\n    }\n\n    else if(strcmp(choice, \"Rock\") == 0 &amp;&amp; strcmp(computerString, \"Paper\") == 0)\n    {\n        printf(\"Computer Beats %s\\n\", name);\n        printf(\"Type Anything To Continue: \");\n        scanf(\"%s\", placeHolder);\n        computerScore++;\n    }\n\n    else if(strcmp(choice, \"Paper\") == 0 &amp;&amp; strcmp(computerString, \"Scissors\") == 0){\n        printf(\"Computer Prevails!\\n\");\n        printf(\"Type Anything To Continue: \");\n        scanf(\"%s\", placeHolder);\n        computerScore++;\n    }\n\n    }\n\n    printf(\"The Final Score Is %s %d and Computer %d\", name, score, computerScore);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 165, "user_id": 9179851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HBOKd.png?s=128&g=1", "display_name": "Sympleque", "link": "https://stackoverflow.com/users/9179851/sympleque"}, "edited": false, "score": 2, "creation_date": 1551225415, "post_id": 54896018, "comment_id": 96560971, "body": "shouldn&#39;t it be <code>scanf(&quot;%i&quot;, diag);</code>? Are you trying to store the input value into an <code>int</code> at the address <code>diag</code>?"}, {"owner": {"reputation": 1109, "user_id": 8124866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df28dcb0bdf19b402f3a3a2d92132e0e?s=128&d=identicon&r=PG&f=1", "display_name": "Mauricio De armas", "link": "https://stackoverflow.com/users/8124866/mauricio-de-armas"}, "reply_to_user": {"reputation": 165, "user_id": 9179851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HBOKd.png?s=128&g=1", "display_name": "Sympleque", "link": "https://stackoverflow.com/users/9179851/sympleque"}, "edited": false, "score": 0, "creation_date": 1551225491, "post_id": 54896018, "comment_id": 96560987, "body": "it doesnt work."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1551225653, "post_id": 54896018, "comment_id": 96561032, "body": "&quot;It doesnt work&quot; is not a description of the problem really."}, {"owner": {"reputation": 1109, "user_id": 8124866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df28dcb0bdf19b402f3a3a2d92132e0e?s=128&d=identicon&r=PG&f=1", "display_name": "Mauricio De armas", "link": "https://stackoverflow.com/users/8124866/mauricio-de-armas"}, "edited": false, "score": 0, "creation_date": 1551225812, "post_id": 54896018, "comment_id": 96561077, "body": "I mean that especific case that he said. An trying to set  any of the types to return a value with a void function int * float* etc. anyways i will change it in the title."}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1551226007, "post_id": 54896018, "comment_id": 96561141, "body": "You should edit to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> showing how you&#39;re actually using the function, and include what input you expect to get, and what you get instead. Or, any compiler errors."}], "answers": [{"comments": [{"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1551241640, "post_id": 54896067, "comment_id": 96564396, "body": "Never knew that <code>bool </code> is available in <code>C</code>, Thanks"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 1, "creation_date": 1551242929, "post_id": 54896067, "comment_id": 96564689, "body": "@Mayur It&#39;s basically an integral type that defines <code>bool</code>. But <code>&lt;stdbool.h&gt;</code> defines <code>bool</code>, <code>true</code> and <code>false</code> since C99 if my memory serves me correctly."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 8, "last_activity_date": 1551243016, "last_edit_date": 1551243016, "creation_date": 1551225626, "answer_id": 54896067, "question_id": 54896018, "link": "https://stackoverflow.com/questions/54896018/how-to-get-a-int-with-scanf/54896067#54896067", "title": "How to get a int with scanf()", "body": "<p><code>diag</code> is already a pointer so no need for the address-of operator (<code>&amp;</code>) in the call to <code>scanf()</code>:</p>\n\n<pre><code>void pedir_diag(int *diag)\n{\n    scanf(\"%d\", diag);\n}\n</code></pre>\n\n<p>But to do it that way is kinda stupid. You have no way to check for erroneous input.<br />\nBetter:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nbool pedir_diag(int *diag)\n{\n    return scanf(\"%d\", diag) == 1;  // *)\n}\n</code></pre>\n\n<p>*) <code>scanf()</code> returns the number of successful conversions, so if the number of successful conversions is 1 we return <code>true</code>.</p>\n\n<p>Usage:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int foo;\n\n    if (!pedir_diag(&amp;foo)) {\n        fputs(\"Input error :(\\n\\n\", stderr);\n    }\n    else {\n        // have fun with foo\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 7150270, "user_type": "registered", "profile_image": "https://graph.facebook.com/1483937508290037/picture?type=large", "display_name": "Konstantinos T. Pantelis", "link": "https://stackoverflow.com/users/7150270/konstantinos-t-pantelis"}, "is_accepted": false, "score": 2, "last_activity_date": 1551241440, "last_edit_date": 1551241440, "creation_date": 1551241070, "answer_id": 54897971, "question_id": 54896018, "link": "https://stackoverflow.com/questions/54896018/how-to-get-a-int-with-scanf/54897971#54897971", "title": "How to get a int with scanf()", "body": "<p>The best way to use <code>scanf</code> through your entire coding life is by remembering the following rule</p>\n\n<pre><code>scanf(\"%[direction_of_what_to_scan][special format character]\",\n    Pointer_on_some_memory_location);\n</code></pre>\n\n<p>What <code>scanf</code> does is that it stores what the input was (with some length restrictions) to a memory address.  So, either:</p>\n\n<pre><code>int n1;\nscanf(\"%d\",&amp;n); //which means the address of variable n1 in memory\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int *n2 = &amp;n1;\nscanf(\"%d\",n) // &amp;doesn't need to be used cause n2 is now already pointer to an integer\n</code></pre>\n\n<p>Both will are different implementations of the same thing, they differ to the part of using pointers,for which C is well-known,and even applicable these days.</p>\n"}], "owner": {"reputation": 1109, "user_id": 8124866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df28dcb0bdf19b402f3a3a2d92132e0e?s=128&d=identicon&r=PG&f=1", "display_name": "Mauricio De armas", "link": "https://stackoverflow.com/users/8124866/mauricio-de-armas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551243016, "creation_date": 1551225264, "last_edit_date": 1551235086, "question_id": 54896018, "link": "https://stackoverflow.com/questions/54896018/how-to-get-a-int-with-scanf", "title": "How to get a int with scanf()", "body": "<pre><code>void pedir_diag(int* diag){\n  scanf(\"%i\", &amp;diag);\n}\n\nint main() {\n  int number;\n\n  pedir_diag(&amp;number);\n\n  return 0;\n}\n</code></pre>\n\n<p>When I compile introduce an integer and expect that number int variable in the main have the value introduced but is not set</p>\n\n<p>I have this, in my code but i am not able to set diag variable with scanf() function.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 2, "creation_date": 1551224472, "post_id": 54895888, "comment_id": 96560749, "body": "What are you expecting to get written?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1551224522, "post_id": 54895888, "comment_id": 96560760, "body": "If you don&#39;t understand the relationship between your array contents and the file, look at the file -- and your memory -- with a hex editor. Memory contents aren&#39;t encoded in ASCII (absent an effort to make it so), so you can&#39;t expect a textual representation when you dump them directly to disk."}, {"owner": {"reputation": 193, "user_id": 9437393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Shiro Pie", "link": "https://stackoverflow.com/users/9437393/shiro-pie"}, "edited": false, "score": 0, "creation_date": 1551224716, "post_id": 54895888, "comment_id": 96560815, "body": "I just write to print the integer to the console."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1551224890, "post_id": 54895888, "comment_id": 96560870, "body": "100000 is 000186a0 in hex.  So the bytes are 00, 01, 86, a0.  If your machine is little-endian, then they will come out as a0, 86, 01, 00.  The first two characters are non-ascii.  What exactly are you expecting?  If you want to see a textual representation of your integer, then you first need to convert it to a printable string."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1551224921, "post_id": 54895888, "comment_id": 96560880, "body": "<code>write</code> prints raw bytes, and the raw bytes of 100000 aren&#39;t the same as the raw bytes of the string &quot;100000&quot;. Even though write is async-signal-safe, it doesn&#39;t fit your other important requirement that you print an integer as a string."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551225083, "post_id": 54895888, "comment_id": 96560909, "body": "Maybe convert the integer into an array of characters?"}, {"owner": {"reputation": 38064, "user_id": 683080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ad2af1f028b1b7e76c14f83bdf26cb?s=128&d=identicon&r=PG", "display_name": "John Szakmeister", "link": "https://stackoverflow.com/users/683080/john-szakmeister"}, "edited": false, "score": 0, "creation_date": 1551225523, "post_id": 54895888, "comment_id": 96560996, "body": "Just for reference, there&#39;s list of signal safe functions <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1551225916, "post_id": 54895962, "comment_id": 96561113, "body": "<a href=\"https://stackoverflow.com/a/29544416/315052\">stackoverflow.com/a/29544416/315052</a>"}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 2, "last_activity_date": 1551228473, "last_edit_date": 1551228473, "creation_date": 1551224885, "answer_id": 54895962, "question_id": 54895888, "link": "https://stackoverflow.com/questions/54895888/write-gives-weird-symbols-for-integer/54895962#54895962", "title": "Write() gives weird symbols for integer", "body": "<p>When I compile your program and redirect the output through <code>hexdump</code>, this is the output I get:</p>\n\n<blockquote>\n<pre><code>$ gcc t.c\n$ ./a.out | hexdump\n0000000 86a0 0001\n0000004\n$\n</code></pre>\n</blockquote>\n\n<p>Then, we note that <code>100000</code> in hexadecimal is <code>0x186a0</code>. What your program does is emit the raw bytes for the object that represents the number <code>100000</code>.</p>\n\n<p>If you want to print the number <code>100000</code> to the output in ASCII, you can write your own routine for doing so. For example:</p>\n\n<pre><code>void\nprint_number(unsigned x) {\n    if (x &gt;= 10) print_number(x/10);\n    write(1, \"0123456789\" + (x%10), 1);\n}\n</code></pre>\n\n<p>A better way would be to emit the converted characters into a buffer, and use a single <code>write</code> call on the buffer text that now holds the string version of the number.</p>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 9437393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Shiro Pie", "link": "https://stackoverflow.com/users/9437393/shiro-pie"}, "edited": false, "score": 0, "creation_date": 1551225326, "post_id": 54895972, "comment_id": 96560957, "body": "Thank you for the advice. But I sorta have to use write() inside a signal handler and its not optional.This is just one part of my project. Is there any advice on how to fix this?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 193, "user_id": 9437393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Shiro Pie", "link": "https://stackoverflow.com/users/9437393/shiro-pie"}, "edited": false, "score": 0, "creation_date": 1551228396, "post_id": 54895972, "comment_id": 96561662, "body": "Use a different function to convert the number into decimal digits first. Such as snprintf. But I&#39;m not sure if snprintf can be used inside a signal handler either."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 1, "last_activity_date": 1551224955, "creation_date": 1551224955, "answer_id": 54895972, "question_id": 54895888, "link": "https://stackoverflow.com/questions/54895888/write-gives-weird-symbols-for-integer/54895972#54895972", "title": "Write() gives weird symbols for integer", "body": "<p>Here are the bytes that make up the integer 100000 in memory, that I've converted to hexadecimal:</p>\n\n<pre><code>A0 86 01 00\n</code></pre>\n\n<p>Here are the bytes that <code>write(1, x, sizeof(x))</code> prints, in hexadecimal:</p>\n\n<pre><code>A0 86 01 00\n</code></pre>\n\n<p>Here are the bytes that <code>printf(\"%d\", x[0])</code> prints, in hexadecimal:</p>\n\n<pre><code>31 30 30 30 30 30\n</code></pre>\n\n<p>31 (hexadecimal) is the ASCII code for the digit 1 and 30 is for the digit 0. But A0, 87, 01 and 00 are strange symbols. When you use <code>printf</code> it converts the number into something designed for humans to read; <code>write</code> does not such conversion.</p>\n\n<p>To print numbers to the console in a way that can be understood by people, use <code>printf</code>. But you shouldn't use <code>printf</code> inside a signal handler, you say - that's correct, because you shouldn't <em>write to the console</em> inside a signal handler. (Would it be okay if your signal handler writes in the middle of a different write?)</p>\n\n<p>If this is just a test, calling <code>printf</code> in the signal handler might be good enough, but every now-and-again it'll crash, so don't do that in programs that you give to other people.</p>\n"}], "owner": {"reputation": 193, "user_id": 9437393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Shiro Pie", "link": "https://stackoverflow.com/users/9437393/shiro-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1551225240, "answer_count": 2, "score": 0, "last_activity_date": 1551228473, "creation_date": 1551224382, "question_id": 54895888, "link": "https://stackoverflow.com/questions/54895888/write-gives-weird-symbols-for-integer", "closed_reason": "Duplicate", "title": "Write() gives weird symbols for integer", "body": "<p>I need to print out a string along with a integer in a signal handler function. I was told that write is signal safe. So far I have tried to print out an integer with write but it gives off weird symbols. Write worked for a char array of characters but doesn't work for integers. Any advice would be much appreciated. Below is my code which gave off the error.</p>\n\n<pre><code>    #include&lt;stdio.h&gt; \n    #include&lt;wait.h&gt; \n    #include&lt;signal.h&gt; \n    #include&lt;unistd.h&gt;\n    int main() \n    { \n        int x[] = {100000};\n        write(1, x, sizeof(x));\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "gtk", "gtk2"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "is_accepted": false, "score": 0, "last_activity_date": 1551286995, "last_edit_date": 1551286995, "creation_date": 1551224751, "answer_id": 54895942, "question_id": 54895628, "link": "https://stackoverflow.com/questions/54895628/gtk-critical-160421-737-gtk-box-pack-assertion-gtk-is-widget-child-f/54895942#54895942", "title": "Gtk-CRITICAL **: 16:04:21.737: gtk_box_pack: assertion &#39;GTK_IS_WIDGET (child)&#39; failed", "body": "<p>Oh, you just forgot to initialize the button with <code>gtk_button_new</code>. The problem is that it cannot put NULL into a vbox or hbox. Here you go:</p>\n\n<pre><code>void ButtonHandler(void) {\n    GtkWidget *Button = gtk_button_new_with_label(\"Button\");// &lt;--- add this\n    GtkWidget *Entry = gtk_entry_new();\n    GtkWidget *Vbox = gtk_vbox_new(0, 8);\n    GtkWidget *Hbox = gtk_hbox_new(0, 8);\n    FILE *SelectedWorld;\n\n    gtk_container_add(GTK_CONTAINER(Vbox), Hbox);\n    gtk_box_pack_start(GTK_BOX(Vbox), Entry, 1, 1, 0);\n    gtk_box_pack_start(GTK_BOX(Hbox),Button, 1, 1, 0);\n    printf(\"Button pushed\\n\");\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10997028"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551286995, "creation_date": 1551222585, "question_id": 54895628, "link": "https://stackoverflow.com/questions/54895628/gtk-critical-160421-737-gtk-box-pack-assertion-gtk-is-widget-child-f", "title": "Gtk-CRITICAL **: 16:04:21.737: gtk_box_pack: assertion &#39;GTK_IS_WIDGET (child)&#39; failed", "body": "<p>I m compiling and running a gtk app and i get that error while running when I try to put a button in an hbox. What does this error mean/how can I fix this. I get this when running it through the terminal, and somehow GTK prints this when I push a button that runs this function:</p>\n\n<pre><code>void ButtonHandler(void) {\n    GtkWidget (*Button) = NULL;\n    GtkWidget (*Entry) = gtk_entry_new();\n    GtkWidget (*Vbox) = gtk_vbox_new(0, 8);\n    GtkWidget (*Hbox) = gtk_hbox_new(0, 8);\n    FILE (*SelectedWorld);\n    gtk_container_add(GTK_CONTAINER(Vbox), Hbox);\n    gtk_box_pack_start(GTK_BOX(Vbox), Entry, 1, 1, 0);\n    gtk_box_pack_start(GTK_BOX(Hbox),Button, 1, 1, 0);//&lt;---- here is the problem\n    printf(\"Button pushed\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "dynamic-memory-allocation", "realloc", "calloc"], "comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1551219009, "post_id": 54894919, "comment_id": 96558926, "body": "what does <code>struct</code> utmp look like?"}, {"owner": {"reputation": 602, "user_id": 7072727, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9636cb05bd2854648fe5b1e6d069bbd0?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Nieffenegger", "link": "https://stackoverflow.com/users/7072727/dustin-nieffenegger"}, "edited": false, "score": 0, "creation_date": 1551219024, "post_id": 54894919, "comment_id": 96558936, "body": "<code>roster</code> is a pointer, not an array. You can&#39;t know the size of the underlying data with <code>sizeof</code> on a pointer.  You allocated 1 <code>struct utmp</code>, so the size of the underlying data is <code>1*sizeof(struct utmp)</code>."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1551221638, "post_id": 54894919, "comment_id": 96559854, "body": "@Kody Richardson - there are several problems in your sample code.  I tried to break them down in a response, but somebody cut me off at the knees with downvotes.  BASIC PROBLEM: &quot;sizeof(ptr)&quot; doesn&#39;t return the size of a struct, array or object - it merely returns the #/bytes in a &quot;pointer&quot; (often &quot;4&quot;, for a 32-bit CPU).  No: &quot;free()&quot; does NOT return ANYTHING.  Look here: <a href=\"https://linux.die.net/man/3/free\" rel=\"nofollow noreferrer\">man free</a>.  Finally, no: you can&#39;t &quot;realloc()&quot; memory you&#39;ve already free()&#39;ed. Q: Questions answered?"}, {"owner": {"reputation": 11, "user_id": 9877905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78ae1c2548a883fe3119e708d5dacdb?s=128&d=identicon&r=PG&f=1", "display_name": "Kody Richardson", "link": "https://stackoverflow.com/users/9877905/kody-richardson"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1551308426, "post_id": 54894919, "comment_id": 96597926, "body": "@paulsm4 Yes that clears many things up! Thank you!"}, {"owner": {"reputation": 11, "user_id": 9877905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78ae1c2548a883fe3119e708d5dacdb?s=128&d=identicon&r=PG&f=1", "display_name": "Kody Richardson", "link": "https://stackoverflow.com/users/9877905/kody-richardson"}, "reply_to_user": {"reputation": 602, "user_id": 7072727, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9636cb05bd2854648fe5b1e6d069bbd0?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Nieffenegger", "link": "https://stackoverflow.com/users/7072727/dustin-nieffenegger"}, "edited": false, "score": 0, "creation_date": 1551308509, "post_id": 54894919, "comment_id": 96597950, "body": "@DustinNieffenegger Thank you for pointing out my error with the roster!!"}], "owner": {"reputation": 11, "user_id": 9877905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78ae1c2548a883fe3119e708d5dacdb?s=128&d=identicon&r=PG&f=1", "display_name": "Kody Richardson", "link": "https://stackoverflow.com/users/9877905/kody-richardson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1551219592, "answer_count": 0, "score": 1, "last_activity_date": 1551219172, "creation_date": 1551218776, "question_id": 54894919, "link": "https://stackoverflow.com/questions/54894919/using-calloc-to-create-dynamic-struct-utmp-array", "closed_reason": "Duplicate", "title": "Using calloc() to create dynamic struct utmp array", "body": "<p>I'm attempting to create a dynamic array in C but I am a little confused on how to go about it. Firstly calloc() seems to be giving me strange results. I have some code as follows:</p>\n\n<pre><code>struct utmp userRec;\nprintf(\"%d\\n\", sizeof(userRec)); //should print size of object\nstructutmp * roster = calloc(1, sizeof(userRec));\nprintf(\"%d\\n\", sizeof(roster)); //should print total size of all objects in array\nprintf(\"%d\\n\", sizeof(roster)/sizeof(roster[0])); //should print number of elements in array\n</code></pre>\n\n<p>Now the results of the prints are:</p>\n\n<pre><code>384\n8\n0\n</code></pre>\n\n<p>This output seems odd to me, since the first print seems okay. If that is the size of that particular object then fine, but then I thought the size of the array roster would be equal to that, since calloc was told to make room for one object with the same size as userRec. Finally the result of this one is also confusing. Shouldn't the result of this calculation be one? Since again I allocated space for one struct utmp, then the result should be that I have room for one struct utmp. Not zero. Any insight into why I'm getting these results would be appreciated!</p>\n\n<p>Also one more question for if/when I finally get calloc() to work for me. I would like this array to be able to grow! I read that the realloc() function could be useful for this, but I am unsure. Does realloc() maintain the state of the array while adding more space? Also does free() return a pointer to the same memory block so I could call realloc() on it again?</p>\n\n<p>Thanks for any answers!</p>\n"}, {"tags": ["c", "loops", "while-loop"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1551218706, "post_id": 54894879, "comment_id": 96558793, "body": "Turn on compiler warnings. Fix them all."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1551218749, "post_id": 54894879, "comment_id": 96558810, "body": "<code>scanf(&quot;%d&quot;, weight);</code> ==&gt; <code>scanf(&quot;%d&quot;, &amp;weight);</code> and same for <code>quantity</code>."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1551218820, "post_id": 54894879, "comment_id": 96558837, "body": "And do <b>check</b> the return value of <code>scanf()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1551219634, "post_id": 54894910, "comment_id": 96559161, "body": "Even after my fixes to the code, I spotted one more bug that remains.   But this should get you going."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 1, "last_activity_date": 1551219143, "last_edit_date": 1551219143, "creation_date": 1551218741, "answer_id": 54894910, "question_id": 54894879, "link": "https://stackoverflow.com/questions/54894879/how-to-fix-segmentation-fault-for-while-loop-in-c/54894910#54894910", "title": "How to fix segmentation fault for while loop in c", "body": "<p>This is not how you use <code>scanf</code></p>\n\n<pre><code>scanf(\"%d\", weight);\nscanf(\"%d\", quantity);\n</code></pre>\n\n<p>You should pass the address of the variable, not the value of the variable.</p>\n\n<p>That would look like this:</p>\n\n<pre><code>scanf(\"%d\", &amp;weight);\nscanf(\"%d\", &amp;quantity);\n</code></pre>\n\n<hr>\n\n<p>Your while loop depends on value <code>weight</code>.  The value of <code>weight</code> never changes in your loop, so the loop can never exit.</p>\n\n<hr>\n\n<p>This line:</p>\n\n<pre><code>total_weight= total_weight + (quantity*weight);\n</code></pre>\n\n<p>uses the value of <code>total_weight</code>, which was never initialized.<br>\nYou should initialize your variables.</p>\n\n<p><hr>\nAll in all, I think your fixed code should look like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int weight       = 0; //weight of boxes\n    int quantity     = 0; //number of boxes \n    int total_weight = 0; //total weight\n    int n            = 1;\n\n    while(weight!=-1)\n    {\n        printf(\"Enter weight (lbs) of Type %d box: \", n);\n        scanf(\"%d\", &amp;weight);        // Update weight **inside** the loop\n        printf(\"Enter quantity: \\n\");\n        scanf(\"%d\", &amp;quantity);\n\n        total_weight= total_weight + (quantity*weight);\n        n++;\n    }\n\n    printf(\"The total weight is %0.2d\", total_weight);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 11078764, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kbElKkbyRl8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPDUvEbIZcdiAnJw2Kd5HsVMPQCjQ/mo/photo.jpg?sz=128", "display_name": "nissim abehcera", "link": "https://stackoverflow.com/users/11078764/nissim-abehcera"}, "is_accepted": false, "score": 0, "last_activity_date": 1551218939, "creation_date": 1551218939, "answer_id": 54894954, "question_id": 54894879, "link": "https://stackoverflow.com/questions/54894879/how-to-fix-segmentation-fault-for-while-loop-in-c/54894954#54894954", "title": "How to fix segmentation fault for while loop in c", "body": "<pre><code>while(weight!=-1) //Iterate loop until w=-1 \n{\nprintf(\"Enter quantity: \\n\");\nscanf(\"%d\", quantity);\n\ntotal_weight= total_weight + (quantity*weight);\nn++;\n}\n</code></pre>\n\n<p>Problem is in while condition, weight never change it's value so the condition always true  so infinite loop.</p>\n\n<p>Fix this statement <code>scanf(\"%d\", &amp;weight);</code></p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 11122233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYlZGIRVa_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOCx9QiCKUhiEWB6APDz6Awy7cqg/mo/photo.jpg?sz=128", "display_name": "Zachary Hunter", "link": "https://stackoverflow.com/users/11122233/zachary-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1551231571, "creation_date": 1551231571, "answer_id": 54896748, "question_id": 54894879, "link": "https://stackoverflow.com/questions/54894879/how-to-fix-segmentation-fault-for-while-loop-in-c/54896748#54896748", "title": "How to fix segmentation fault for while loop in c", "body": "<p>Your problem is you are trying to assign a value to the pointer of <code>quantity</code> and <code>weight</code>, instead you need to put <code>&amp;quantity</code> and <code>&amp;weight</code> also you do not have another input for the weight, you should also use a do while instead of a while loop. It should look like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\nint weight; //weight of boxes\nint quantity; //number of boxes \nint total_weight; //total weight\nint n = 1;\n    do\n    {\n    printf(\"Enter weight (lbs) of Type %d box: \", n);\n    scanf(\"%d\", &amp;weight);\n    printf(\"Enter quantity: \\n\");\n    scanf(\"%d\", &amp;quantity);\n\n    total_weight= total_weight + (quantity*weight);\n    n++;\n}while (weight != -1);\n\nprintf(\"The total weight is %0.2d\", total_weight);\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 11, "user_id": 10881752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9c1f2eb86b46b79f011e8683534d938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebeca", "link": "https://stackoverflow.com/users/10881752/rebeca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1551231571, "creation_date": 1551218602, "last_edit_date": 1551218772, "question_id": 54894879, "link": "https://stackoverflow.com/questions/54894879/how-to-fix-segmentation-fault-for-while-loop-in-c", "title": "How to fix segmentation fault for while loop in c", "body": "<p>I'm working on an assignment and trying to write the code to answer this question:</p>\n\n<blockquote>\n  <p>Write a program that computes the total weight of a cargo. The user has many types of boxes (numbered 1 to n). For each box type, the program asks the user about the weight and quantity. The program thencomputes and prints the total cargo weight.\n  In the output sample below, the user has three box types. For box type 2, the user enters the sentinel -1 to\n  indicate they\u2019re done with the input. Your program should print Type 1, 2, 3, etc. as shown in the\n  output below.</p>\n</blockquote>\n\n<pre><code>Enter weight (lbs) of Type 1 box: 4\nEnter quantity: 2\nEnter weight (lbs) of Type 2 box: -1 \nThe total weight is 8 lbs.\n</code></pre>\n\n<p>When i run this code it runs the first line to input weight but then gives me a segmentation fault and says (core dumped). -1 is the sentinel and even when the enter weight is inside the while loop the result is the same. What am I doing wrong? I'm sorry I'm new to C</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int weight; //weight of boxes\n    int quantity; //number of boxes \n    int total_weight; //total weight\n    int n = 1;\n\n    printf(\"Enter weight (lbs) of Type %d box: \", n);\n    scanf(\"%d\", weight);\n    while(weight!=-1) //Iterate loop until w=-1 \n    {\n        printf(\"Enter quantity: \\n\");\n        scanf(\"%d\", quantity);\n\n        total_weight= total_weight + (quantity*weight);\n        n++;\n    }\n\n    printf(\"The total weight is %0.2d\", total_weight);\n    return 0;\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "syntax"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551218642, "post_id": 54894874, "comment_id": 96558761, "body": "<code>myVar.jac</code> is a pointer to a function which is taking <code>void*</code> and <code>float*</code> and returning <code>int</code>."}, {"owner": {"reputation": 23, "user_id": 11121909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7b67b121c82b10c7c5f0103f9f9b70?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/11121909/richard"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551219584, "post_id": 54894874, "comment_id": 96559142, "body": "Thanks for your quick response!"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1551219111, "creation_date": 1551219111, "answer_id": 54894999, "question_id": 54894874, "link": "https://stackoverflow.com/questions/54894874/c-syntax-with-multiple-pointers-and-parentheses/54894999#54894999", "title": "C syntax with multiple pointers and parentheses", "body": "<p><code>state</code> and <code>J</code> are not fields of your struct.  They're parameters of the function pointer <code>jac</code>, which <em>is</em> a member of your struct.  This points to a function which takes a  <code>void *</code> and a <code>float *</code> as parameters and returns an <code>int</code>.  You can use it like this, for example:</p>\n\n<pre><code>int myfunc(void *state, float *J)\n{\n   ...\n}\n\n...\n\na_type myVar;\nmyVar.jac =  myfunc;\nchar buffer[100];\nfloat f;\n...\nmyVar.jac(buffer, &amp;f);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11121909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7b67b121c82b10c7c5f0103f9f9b70?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/11121909/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54894999, "answer_count": 1, "score": 2, "last_activity_date": 1551219111, "creation_date": 1551218574, "question_id": 54894874, "link": "https://stackoverflow.com/questions/54894874/c-syntax-with-multiple-pointers-and-parentheses", "title": "C syntax with multiple pointers and parentheses", "body": "<p>Could someone explain to me the following syntax:</p>\n\n<pre><code>typedef struct {\n    int (*jac) (void *state, float * J);\n} aType;\n\n(...)\n\naType myVar;\n</code></pre>\n\n<p>I can access myVar.jac, but what are \"state\" and \"J\" and how to access them?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "qt"], "comments": [{"owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "edited": false, "score": 0, "creation_date": 1551218333, "post_id": 54894492, "comment_id": 96558646, "body": "C code should be compiled with the C compiler. The <code>header</code> should be marked with <code>extern &quot;C&quot;</code> and the build system should do the right thing from there."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551218505, "post_id": 54894492, "comment_id": 96558705, "body": "You can&#39;t include a C file in a C++ file. A single file has to be compiled with a single compiler, so you can&#39;t mix C and C++ code in the same compilation unit. Your choices are to include the C file in another C file or to fix the C file so it can be compiled with a C++ compiler. (The <code>extern &quot;C&quot;</code> thing is to allow C code to be called from C++ code, not compiled.)"}, {"owner": {"reputation": 367, "user_id": 9400045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/315735b371e5f05eb60b2e8a46957d0b?s=128&d=identicon&r=PG&f=1", "display_name": "morteza ali ahmadi", "link": "https://stackoverflow.com/users/9400045/morteza-ali-ahmadi"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551219329, "post_id": 54894492, "comment_id": 96559048, "body": "@DavidSchwartz thanks, but the answer of these questions and some similar questions is to doing that: [<a href=\"https://stackoverflow.com/questions/34979280/compile-and-link-c-and-c-programms-together-with-qt-creator]\" title=\"compile and link c and c programms together with qt creator%5d\">stackoverflow.com/questions/34979280/&hellip;</a> [<a href=\"https://www.qtcentre.org/threads/33974-Compiling-c-files-using-C-and-QT]\" rel=\"nofollow noreferrer\">qtcentre.org/threads/33974-Compiling-c-files-using-C-and-QT&zwnj;&#8203;]</a>"}, {"owner": {"reputation": 367, "user_id": 9400045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/315735b371e5f05eb60b2e8a46957d0b?s=128&d=identicon&r=PG&f=1", "display_name": "morteza ali ahmadi", "link": "https://stackoverflow.com/users/9400045/morteza-ali-ahmadi"}, "reply_to_user": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "edited": false, "score": 0, "creation_date": 1551219362, "post_id": 54894492, "comment_id": 96559060, "body": "@MichaelSurette thanks, but the answer of these questions and some similar questions is to doing that: [<a href=\"https://stackoverflow.com/questions/34979280/compile-and-link-c-and-c-programms-together-with-qt-creator]\" title=\"compile and link c and c programms together with qt creator%5d\">stackoverflow.com/questions/34979280/&hellip;</a> [<a href=\"https://www.qtcentre.org/threads/33974-Compiling-c-files-using-C-and-QT]\" rel=\"nofollow noreferrer\">qtcentre.org/threads/33974-Compiling-c-files-using-C-and-QT&zwnj;&#8203;]</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1551219690, "post_id": 54894492, "comment_id": 96559179, "body": "You are misunderstanding the links that you posted. Here is a better link to explain what extern &quot;C&quot; does: <a href=\"https://stackoverflow.com/questions/1041866/what-is-the-effect-of-extern-c-in-c\" title=\"what is the effect of extern c in c\">stackoverflow.com/questions/1041866/&hellip;</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551219811, "post_id": 54894492, "comment_id": 96559221, "body": "@mortezaaliahmadi Those links are about calling C code from C++ code, which is one of your options. The C code still has to be compiled by a C compiler, which means it has to be in a separate compilation unit. All that <code>extern &quot;C&quot;</code> does is arrange for the proper linking format to connect C++ code to C code compiled by a C compiler. The C code still has to be compiled with a C compiler or the linking won&#39;t work."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551219934, "post_id": 54894492, "comment_id": 96559251, "body": "Fundamentally, you have two choices. You can compile the code with a C compiler or you can compile it with a C++ compiler. If you&#39;re going to compile it with a C compiler, it has to be in a separate compilation unit from C++ code because a C compiler can&#39;t compile C++ code. If you&#39;re going to compile it with a C++ compiler, it has to be legal C++ code. There is no other option. A compilation unit has to be compiled by a single compiler."}, {"owner": {"reputation": 367, "user_id": 9400045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/315735b371e5f05eb60b2e8a46957d0b?s=128&d=identicon&r=PG&f=1", "display_name": "morteza ali ahmadi", "link": "https://stackoverflow.com/users/9400045/morteza-ali-ahmadi"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551220006, "post_id": 54894492, "comment_id": 96559281, "body": "@DavidSchwartz It means that I should compile and create a C library from my source and after that I can use that in my C++ project?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1551220151, "post_id": 54894492, "comment_id": 96559334, "body": "That is one of your two options. The other is to make the C code compile with a C++ compiler by, for example, adding casts. If you choose to compile it with a C compiler, you can use <code>extern &quot;C&quot;</code> in your C++ code to allow the C and C++ code to successfully link after being compiled by the two compilers."}, {"owner": {"reputation": 367, "user_id": 9400045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/315735b371e5f05eb60b2e8a46957d0b?s=128&d=identicon&r=PG&f=1", "display_name": "morteza ali ahmadi", "link": "https://stackoverflow.com/users/9400045/morteza-ali-ahmadi"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551221031, "post_id": 54894492, "comment_id": 96559627, "body": "@DavidSchwartz thanks, I built my source file and now I have a lib*.so. I added this lib to my project and I use <code>extern &quot;C&quot; {  #include &quot;mySource.c&quot;}</code> in mainwindow.cpp but in compiling, the mentioned error still appears."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551221558, "post_id": 54894492, "comment_id": 96559832, "body": "@mortezaaliahmadi Yeah, don&#39;t do that. In the <code>extern &quot;C&quot;</code> block, you must put C++ code that explains how to link to the C code. Don&#39;t include the actual source! (Look at some examples of how to properly use <code>extern &quot;C&quot;</code>.)"}, {"owner": {"reputation": 367, "user_id": 9400045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/315735b371e5f05eb60b2e8a46957d0b?s=128&d=identicon&r=PG&f=1", "display_name": "morteza ali ahmadi", "link": "https://stackoverflow.com/users/9400045/morteza-ali-ahmadi"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551221720, "post_id": 54894492, "comment_id": 96559886, "body": "@DavidSchwartz I used this [<a href=\"https://isocpp.org/wiki/faq/mixing-c-and-cpp]\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/mixing-c-and-cpp]</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551221751, "post_id": 54894492, "comment_id": 96559900, "body": "Yep, read the section on calling C functions from C++."}, {"owner": {"reputation": 367, "user_id": 9400045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/315735b371e5f05eb60b2e8a46957d0b?s=128&d=identicon&r=PG&f=1", "display_name": "morteza ali ahmadi", "link": "https://stackoverflow.com/users/9400045/morteza-ali-ahmadi"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551222154, "post_id": 54894492, "comment_id": 96560033, "body": "@DavidSchwartz Until I don&#39;t identify the mySource.c to my project, I can&#39;t access to a function in it. How can I identify the source to mainwindow.cpp?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1551223719, "post_id": 54894492, "comment_id": 96560524, "body": "Follow the examples. If the library provided some include files to use, use those. If not, make them yourself. If you need to call a C function like <code>int foo(int, double);</code> then put in your C++ code, <code>extern &quot;C&quot; int foo(int, double);</code>."}], "owner": {"reputation": 367, "user_id": 9400045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/315735b371e5f05eb60b2e8a46957d0b?s=128&d=identicon&r=PG&f=1", "display_name": "morteza ali ahmadi", "link": "https://stackoverflow.com/users/9400045/morteza-ali-ahmadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551216943, "creation_date": 1551216943, "question_id": 54894492, "link": "https://stackoverflow.com/questions/54894492/compile-a-c-source-file-from-a-library-in-a-qt-project", "title": "Compile a C source file from a library in a Qt project", "body": "<p>I have created a <em>Qt Widgets Application</em> project. In <code>mainwindow.cpp</code>, I want to add a <code>C</code> source file (<code>mySource.c</code>) from a library which includes some rules written in <code>C</code> language that is not allowed to compile with <code>C++</code> compiler. One of the error which is appeared is:</p>\n\n<pre><code>error: invalid conversion from \u2018const char*\u2019 to \u2018gchar* {aka char*}\u2019 \n</code></pre>\n\n<p>When I create a <em>Plain C Application</em> project in Qt, I can simply compile that source. So I need <code>C</code> compiler.</p>\n\n<p>I also used the following code which does not solve the error:</p>\n\n<pre><code>extern \"C\" {\n    #include \"mySource.c\"\n}\n</code></pre>\n\n<p>When I go to the <code>Tools -&gt; Options -&gt; Kits -&gt; Kits</code>, I see <em>Desktop Qt 5.12.0 GCC 64bit</em> and after clicking on it I can see the C and C++ compiler as follows:</p>\n\n<ul>\n<li>C: GCC(C,X86 64bit in /usr/bin)</li>\n<li>C++: GCC(C++,X86 64bit in /usr/bin)</li>\n</ul>\n\n<p>I have searched a lot and tested different solutions but I can not solve the problem. What is the solution? Is it a specific flag that I should enable in <em>.pro</em>?</p>\n"}, {"tags": ["java", "c", "reflection"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1551219052, "post_id": 54894449, "comment_id": 96558946, "body": "You&#39;ll need to write (or find) a parser to extract function names from the C source. The language itself has no builtin support for reflection."}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 9501325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4723c1665b8a0b592e1355035e91a27?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Fried", "link": "https://stackoverflow.com/users/9501325/markus-fried"}, "is_accepted": false, "score": 0, "last_activity_date": 1551245577, "creation_date": 1551245577, "answer_id": 54898648, "question_id": 54894449, "link": "https://stackoverflow.com/questions/54894449/how-to-get-names-of-methods-and-parameters-from-inside-c-file-in-java/54898648#54898648", "title": "How to Get Names of Methods and Parameters from inside C File in Java?", "body": "<p>As already mentioned you need a C parser for Java - have a look at this answer: <a href=\"https://stackoverflow.com/a/10300668/396730\">Eclipse CDT project</a></p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1551356236, "creation_date": 1551356236, "answer_id": 54925556, "question_id": 54894449, "link": "https://stackoverflow.com/questions/54894449/how-to-get-names-of-methods-and-parameters-from-inside-c-file-in-java/54925556#54925556", "title": "How to Get Names of Methods and Parameters from inside C File in Java?", "body": "<p>You have several approaches here:</p>\n\n<ul>\n<li>As it has been already answered in the comments to the question by @user3386109, you can scan the source file and extract the names of the functions included.  This requires you to preprocess the file (with <code>cpp(1)</code>) because the actual function names can be hidden in macro constructions, and then extract the function definition names (this will require a parser or not, depending on the restrictions you impose to the source file you want to scan).  Anyway, this will be a complex task, the more the less restrictions you assume to the format in the source file.</li>\n<li>You can <code>dlopen(3)</code> the object file (the program or the shared library involved) and scan for function identifiers.  This will be tedious also, as it forces you to a binary format (mainly ELF) to be used as the target architecture of your program.  It depends on executable format and will  not always be possible.</li>\n<li><p>A simpler approach is to tag those identifiers in the source (like annotations in java) with a TAG macro that expands to nothing, and mark the places where a function identifier is going to happen.  For example:</p>\n\n<pre><code>#define TAG\nvoid TAG myFunc(int a, int b, int c)\n</code></pre>\n\n<p>Then you can search the file for <code>TAG</code> and extract the identifier that comes next.</p></li>\n</ul>\n\n<p>Java language requires the identifiers to be included in the executable in string format, so you can apply introspection to get that info, but this is not a requirement in C/C++.  And all the classes hierarchy structure is also included in the executable as a static data structure, so you are able to navigate and discover all the java types hierarchy.  This is not possible in C, as the primary intent of C programming is efficiency.  Having all the type information included in a program forces a lot of memory to be used for describing the data definitions, and so, it is not included in C/C++.</p>\n\n<p>Anyway, you can compile a list yourself with the name identifiers you physically see in the files, so probably you don't even need to automatically process your files at build time do that.</p>\n\n<p>Another simple approach to automatically do what you ask for is to define a macro:</p>\n\n<pre><code>#define FUNCTION_NAME(typ, name) char name##_string[] = #name; typ name\n</code></pre>\n\n<p>and use it as</p>\n\n<pre><code>FUNCTION_NAME(void, myFunc)(int par1, char *par2, int par3)\n{\n    ...\n}\n</code></pre>\n\n<p>that expands to</p>\n\n<pre><code>char myFunc_string[] = \"myFunc\";\nvoid myFunc(int par1, char *par2, int par3)\n{\n    ...\n}\n</code></pre>\n\n<p>so for each function <code>x</code>, you will have a static string <code>x_string</code> with the name as a string and the function header free of declaring whatever you want (even a variadic func)</p>\n\n<p>By the way, there's an implicit macro defined inside the body of a function that expands to a string containing the function name <code>__func__</code>.  But this has the problem of being usable only inside a function body.</p>\n"}], "owner": {"reputation": 1, "user_id": 11121800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5cee7fd8e80d8879d2c38c1fe1768e3?s=128&d=identicon&r=PG&f=1", "display_name": "Emre Ozuslu", "link": "https://stackoverflow.com/users/11121800/emre-ozuslu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551356236, "creation_date": 1551216727, "last_edit_date": 1551238661, "question_id": 54894449, "link": "https://stackoverflow.com/questions/54894449/how-to-get-names-of-methods-and-parameters-from-inside-c-file-in-java", "title": "How to Get Names of Methods and Parameters from inside C File in Java?", "body": "<p>I have a question about this topic. I want to get the names of methods and parameters. I used the Reflection API. If the class which I need to get names of the methods for is a Java Class, it works, but I have a C file. I couldn't do that. How do I reach this C file and get names of the methods and parameters?</p>\n\n<pre><code>package odev1;\nimport java.io.*;\nimport java.lang.reflect.Method;\n\npublic class Odev1 {    \n    public static void main(String[] args) throws FileNotFoundException, ClassNotFoundException, IOException {\n        try {\n            Class cls = Odev1.class;\n            for (Method m : cls.getDeclaredMethods()) {\n                m.getName();\n                m.getReturnType();\n                m.getParameterCount();\n                System.out.println(\" Name of Method : \" + m.getName() + \" \\n\"\n                    + \" Return Type of Method : \" + m.getReturnType() + \" \\n\"\n                    + \" Count of Parametres : \" + m.getParameterCount());\n            } \n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>This is the C file that will be read for parameters and methods:</p>\n\n<pre><code>#include \"stdio.h\" \n#include \"stdlib.h\" \n\nvoid DiziYazdir(int *p,int uzunluk)\n{   \n    int i=0;  \n    for(;i&lt;uzunluk;i++) \n    printf(\"%d \",p[i]); \n} \n\nint DiziTopla(int *p,int uzunluk)\n{ \n    int i=0;  int toplam=0;  \n    for(;i&lt;uzunluk;i++) \n    toplam += p[i];  \n    return toplam; \n}\n\nint main()\n{ \n    int x,y;  \n    printf(\"x:\");  \n    scanf(\"%d\",&amp;x);  \n    printf(\"y:\");  \n    scanf(\"%d\",&amp;y);  \n    int sonuc = x + y;  \n    printf(\"Sonuc:%d\\n\\n\",sonuc);  \n    int *dizi = malloc(3*sizeof(int));  \n    dizi[0]=x;  \n    dizi[1]=y;  \n    dizi[2]=sonuc;  \n    DiziYazdir(dizi,3);  \n    printf(\"\\n\\nToplam Deger:%d\",DiziTopla(dizi,3));  \n    free(dizi);  \n    return 0; \n}\n</code></pre>\n\n<p>How can I get the names of methods and parameters in the C file?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "edited": false, "score": 0, "creation_date": 1551216016, "post_id": 54894239, "comment_id": 96557668, "body": "<code>if( node-&gt;child[0] == NULL ) free(node);</code> is not executed if first child is not NULL."}, {"owner": {"reputation": 388, "user_id": 7728099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J8n2ORRSP9I/AAAAAAAAAAI/AAAAAAAAAA8/6nmjUZY1NS4/photo.jpg?sz=128", "display_name": "thejonny", "link": "https://stackoverflow.com/users/7728099/thejonny"}, "edited": false, "score": 1, "creation_date": 1551216021, "post_id": 54894239, "comment_id": 96557673, "body": "a description of the Node structure would be usefull. what does it mean for child pointer to be NULL?"}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1551229503, "post_id": 54894310, "comment_id": 96561869, "body": "<code>node-&gt;child[i] = NULL;</code> is actually unnecessary."}], "tags": [], "owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "is_accepted": true, "score": 0, "last_activity_date": 1551216129, "creation_date": 1551216129, "answer_id": 54894310, "question_id": 54894239, "link": "https://stackoverflow.com/questions/54894239/freeing-the-memory-in-a-quad-tree-project/54894310#54894310", "title": "Freeing the memory in a quad tree project", "body": "<p>In the case where you have children, you'll leak the current node. The algorithm should look something like this:</p>\n\n<pre><code>void removeTree(Node *node)\n{\n    if (node == NULL) \n        return;\n\n    int i;\n    for (i = 0; i &lt; 4; ++i) {\n        removeTree(node-&gt;child[i]);\n        node-&gt;child[i] = NULL;\n    }\n\n    free(node);\n} \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10442151, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTGHPjTsTo4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX5MuSGLsT8p1UfjEanNITvRFnVPw/mo/photo.jpg?sz=128", "display_name": "Aimee Boyle", "link": "https://stackoverflow.com/users/10442151/aimee-boyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54894310, "answer_count": 1, "score": 0, "last_activity_date": 1551216129, "creation_date": 1551215801, "question_id": 54894239, "link": "https://stackoverflow.com/questions/54894239/freeing-the-memory-in-a-quad-tree-project", "title": "Freeing the memory in a quad tree project", "body": "<p>I have a program that creates a quad tree using malloc. I then have a function that then removes the tree by freeing all nodes.</p>\n\n<p>On a level one tree I free all 5 allocs, however on a level 2 I only free 17 of 21 allocs an I'm having trouble seeing where the problem is.</p>\n\n<p>Any help in this would be very helpful, below is the removeTree function:</p>\n\n<pre><code>void removeTree(Node *node)\n {\n  int i = 0;\n\n     if( node-&gt;child[0] == NULL )\n        free(node);\n    else {\n      for ( i=0; i&lt;4; ++i ) {\n        removeTree( node-&gt;child[i]);\n         }\n       }\n\n    return;\n  } \n</code></pre>\n"}, {"tags": ["c", "string", "floating-point", "double", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1551215765, "post_id": 54894208, "comment_id": 96557553, "body": "<code>string_two</code> is not null-terminated."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1551215844, "post_id": 54894208, "comment_id": 96557593, "body": "<code>string_two</code> is not a string. You cannot use it with most <code>&lt;string.h&gt;</code> functions, with <code>&quot;%s&quot;</code> in <code>printf()</code>, as 1st argument to <code>sscanf()</code>, ..."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1551215961, "post_id": 54894208, "comment_id": 96557644, "body": "You aren&#39;t allowing enough characters for <code>string_two</code>. `&quot;1.2e-4&quot; needs 7 chars, not 6, since strings require a null terminator."}, {"owner": {"reputation": 1, "user_id": 10353424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2518c75267ad755bfeee73f82822ca91?s=128&d=identicon&r=PG&f=1", "display_name": "gtsc", "link": "https://stackoverflow.com/users/10353424/gtsc"}, "edited": false, "score": 2, "creation_date": 1551216103, "post_id": 54894208, "comment_id": 96557713, "body": "Okay thanks a lot guys, I hadn&#39;t heard about the null-terminator. So in general if I would construct my own string I would always have to add the null terminator <code>&#39;\\0&#39;</code> as last character (and make each array of <code>char</code> one element longer?)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551216375, "post_id": 54894208, "comment_id": 96557814, "body": "Depends on how you construct it. the initializer such as the one for <code>string_one</code> is doing it for you."}, {"owner": {"reputation": 1, "user_id": 10353424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2518c75267ad755bfeee73f82822ca91?s=128&d=identicon&r=PG&f=1", "display_name": "gtsc", "link": "https://stackoverflow.com/users/10353424/gtsc"}, "edited": false, "score": 0, "creation_date": 1551216599, "post_id": 54894208, "comment_id": 96557902, "body": "Okay got it - thank you :-) If you submit an answer I can approve it as the correct one."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551220814, "post_id": 54894208, "comment_id": 96559549, "body": "Think about it -- how could <code>sscanf</code> know how long <code>string_two</code> is?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1551223402, "post_id": 54894208, "comment_id": 96560400, "body": "OT: regarding: <code>int main (int argc, char **argv)</code>  When the parameters to <code>main()</code> are not going to be used, then use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1551223991, "post_id": 54894208, "comment_id": 96560601, "body": "Note that the exponent <code>E-41</code> probably means that <code>string_two</code> was stored so that the next character was the start of <code>string_one</code>.  Had you reversed the declations, you might well get a different result.  However, any result is correct because <code>string_two</code> is misnamed because it is not a string (no null terrminator, as everyone else said)."}, {"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1551513066, "post_id": 54894208, "comment_id": 96674760, "body": "You can limit the number of chars used for decoding the field like this: <code>sscanf(string_two,&quot;%6lf&quot;,&amp;two);</code>. Whether there are other side effects or not for missing null terminator in string_two is left undetermined though."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1551232592, "last_edit_date": 1551232592, "creation_date": 1551228662, "answer_id": 54896391, "question_id": 54894208, "link": "https://stackoverflow.com/questions/54894208/sscanf-does-not-correctly-convert-floats-when-size-of-array-is-fixed/54896391#54896391", "title": "sscanf does not correctly convert floats when size of array is fixed", "body": "<p><code>char string_two[6] = \"1.2e-4\"; ... sscanf(string_two, \"%lf\", &amp;two);</code> expects to scan a <em>string</em>.  <code>string_two[]</code> is not a <em>string</em> as it lacks a <em>null character</em>.  Result: <em>undefined behavior</em> (UB).</p>\n\n<p>Solution: Insure <code>string_two[]</code> is a <em>string</em>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10353424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2518c75267ad755bfeee73f82822ca91?s=128&d=identicon&r=PG&f=1", "display_name": "gtsc", "link": "https://stackoverflow.com/users/10353424/gtsc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 54896391, "answer_count": 1, "score": 0, "last_activity_date": 1551232592, "creation_date": 1551215697, "last_edit_date": 1551215827, "question_id": 54894208, "link": "https://stackoverflow.com/questions/54894208/sscanf-does-not-correctly-convert-floats-when-size-of-array-is-fixed", "title": "sscanf does not correctly convert floats when size of array is fixed", "body": "<p>I am trying to use <code>sscanf</code> to convert an array of <code>char</code> in C to a <code>double</code>. My issue is best described in this short minimal working example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (int argc, char **argv)\n{\n  char string_one[]  = \"1.2e-4\";\n  char string_two[6] = \"1.2e-4\";\n\n  double one, two;\n\n  sscanf(string_one, \"%lf\", &amp;one);\n  sscanf(string_two, \"%lf\", &amp;two);\n\n  printf(\"%e, %e\\n\", one, two);\n\n  return 0;\n}\n</code></pre>\n\n<p>Compiled with GCC and running the resulting executable returns <code>1.200000e-04, 1.200000e-41</code>, instead of the same number twice. The issue does not appear if the floating point number I want to convert is of the form <code>3e4</code>(if there is no decimal separator).</p>\n\n<p>For my program I have to define an array of <code>char</code> with a fixed size (as I am filling the array during the course of the program), which is why I am running into this issue.</p>\n\n<p>I guess the problem might be pretty obvious - but as I am a newbie in C I am out of ideas what the problem could be. Any help appreciated!</p>\n"}, {"tags": ["c", "string", "glibc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1551214754, "post_id": 54893953, "comment_id": 96557111, "body": "You have not passed enough arguments to <code>strtol</code>."}, {"owner": {"reputation": 9, "user_id": 3494378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec1c92034289d55f8a87bcec84867bbb?s=128&d=identicon&r=PG&f=1", "display_name": "rolind", "link": "https://stackoverflow.com/users/3494378/rolind"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551214767, "post_id": 54893953, "comment_id": 96557114, "body": "it&#39;s in the real code, i messed it up when writing it here, sorry"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1551214788, "post_id": 54893953, "comment_id": 96557130, "body": "This is why we <i>always</i> ask for <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1551214803, "post_id": 54893953, "comment_id": 96557140, "body": "Well, please don&#39;t post fake code, or you introduce problems that didn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 3494378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec1c92034289d55f8a87bcec84867bbb?s=128&d=identicon&r=PG&f=1", "display_name": "rolind", "link": "https://stackoverflow.com/users/3494378/rolind"}, "edited": false, "score": 0, "creation_date": 1551214989, "post_id": 54893984, "comment_id": 96557214, "body": "That makes so much sense, you&#39;re right. Thank you very much."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1551215253, "post_id": 54893984, "comment_id": 96557326, "body": "Maybe even better: don&#39;t be smart and use 2 simpler statements instead."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 3, "last_activity_date": 1551214690, "creation_date": 1551214690, "answer_id": 54893984, "question_id": 54893953, "link": "https://stackoverflow.com/questions/54893953/cant-use-strstr-properly-in-c/54893984#54893984", "title": "Can&#39;t use strstr() properly in C", "body": "<p>You have the order of operations wrong. Try this instead:</p>\n\n<pre><code>if ((start_pointer = strstr(request, \"Cookie:\")) != NULL){\n</code></pre>\n\n<p>Otherwise, you are setting <code>start_pointer</code> to the result of the comparison, which is <code>1</code> (true).</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1551215212, "creation_date": 1551215212, "answer_id": 54894097, "question_id": 54893953, "link": "https://stackoverflow.com/questions/54893953/cant-use-strstr-properly-in-c/54894097#54894097", "title": "Can&#39;t use strstr() properly in C", "body": "<pre><code>if ((start_pointer = strstr(request, \"Cookie:\") != NULL)){\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if (((start_pointer = strstr(request, \"Cookie:\")) != NULL){\n</code></pre>\n\n<p>Notice the change of bracket's location.</p>\n\n<p>Assigment operator <code>=</code> has the lower precedence than <code>!=</code> operator. So what you have is equivalent to:</p>\n\n<pre><code>if ((start_pointer = (strstr(request, \"Cookie:\") != NULL)){\n</code></pre>\n\n<p>which is basically assign the result of the comparison to <code>start_pointer</code>.</p>\n\n<p>However, you don't need to compare with NULL at all (because any non-zero value is \"true\" in C). You could simply write:</p>\n\n<pre><code>if ((start_pointer = strstr(request, \"Cookie:\"))){\n    ...\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>char * start_pointer = strstr(request, \"Cookie:\");\nif (start_pointer) {\n    ...\n}\n</code></pre>\n\n<p>This way it's much easier to read &amp; helps avoid such mistakes.</p>\n"}], "owner": {"reputation": 9, "user_id": 3494378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec1c92034289d55f8a87bcec84867bbb?s=128&d=identicon&r=PG&f=1", "display_name": "rolind", "link": "https://stackoverflow.com/users/3494378/rolind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551215212, "creation_date": 1551214562, "last_edit_date": 1551214831, "question_id": 54893953, "link": "https://stackoverflow.com/questions/54893953/cant-use-strstr-properly-in-c", "title": "Can&#39;t use strstr() properly in C", "body": "<p>So I'm building a web server in C. I wanna parse the requests using regex but for the moment I thought I'd make something quick to make it work first. Currently, I'm implementing cookies and to find if a request has the cookie field I'm using this.</p>\n\n<pre><code>int find_cookie(const char * request){\n    char * start_pointer = NULL;\n    long ret = 0;\n\n    if ((start_pointer = strstr(request, \"Cookie:\") != NULL)){\n        //Do stuff with the pointer\n        //such as using strtol to get the value as a number\n        ret = strtol(start_pointer + strlen(\"Cookie:\"), NULL, 10);\n    }else return 0;\n\n    return (int) ret;\n}\n</code></pre>\n\n<p>Now, one would think that the problem lies on the strtol(). However, after using GDB I noticed that when there's no cookie field, it returns NULL (as expected) but, on the other hand if it's there and I try to print the value of start_pointer, it will print: \"Can't access memory address 0x1\". What's the matter here? By the way, when I debug the program I can see that the request variable contains the whole request and I added a '\\0' at the end.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1551214019, "post_id": 54893731, "comment_id": 96556801, "body": "Your question is unclear.  Your code seems to be properly reading in the values and printing them back out.  What exactly do you want to do that you aren&#39;t currently doing?"}, {"owner": {"reputation": 35, "user_id": 10890280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C2xxM2q2f9k/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ7EtK0oPTS7ZZb2o1uKN4cEyGr0Q/mo/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/10890280/max"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1551216047, "post_id": 54893731, "comment_id": 96557685, "body": "@dbush please, pay attention in output. When I am trying to scan mac addresses from the line  <code>communication2</code> in my <code>Mac1[**1**]</code> i have the same value as in <code>Mac1[**0**]</code> in <code>communication1</code> raw. I am expecting via this code, that I will have in  <code>Mac1[**1**]</code>  value like <code>mm:27:eb:cf:54:2c</code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1551216232, "post_id": 54893731, "comment_id": 96557761, "body": "That wasn&#39;t clear from your explanation.  <code>mm</code> isn&#39;t a valid hexadecimal string, nor is <code>xx</code>, so no nothing gets read into <code>mac1</code> and <code>mac2</code> and their prior values are unchanged."}, {"owner": {"reputation": 35, "user_id": 10890280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C2xxM2q2f9k/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ7EtK0oPTS7ZZb2o1uKN4cEyGr0Q/mo/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/10890280/max"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1551216872, "post_id": 54893731, "comment_id": 96558011, "body": "@dbush you are right! the dumbest question in stackoverflow, i guess. Thank you."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551316519, "post_id": 54893731, "comment_id": 96599909, "body": "regarding: <code>void main(){</code>  There are two valid signatures for function: <code>main()</code>  <code>int main( void )</code> and <code>int main( int argc, char *argv[] )</code>  Note that both signatures have a return type if <code>int</code>, not <code>void</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551316655, "post_id": 54893731, "comment_id": 96599944, "body": "when compiling, always enable the warnings, then fix those warnings.  ( for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std=gnu11</code> ) Note: other compilers use different options to produce the same things"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551316810, "post_id": 54893731, "comment_id": 96599981, "body": "when working with &#39;mac&#39; address, URLS, IP addresses, etc it is (almost) always best to treat them as a <code>char</code> string"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551317082, "post_id": 54893731, "comment_id": 96600046, "body": "regarding: <code>sscanf(mac_s, &quot;%x:%x:%x:%x:%x:%x&quot;, &amp;mac1[0], &amp;mac1[1], &amp;mac1[2], &amp;mac1[3], &amp;mac1[4], &amp;mac1[5]);</code>  1)  always check the returned value (not the parameter values) to assure the operation was successful.  In this case, any returned value other than 6 indicates an error occurred  2) these statements cause the compiler to output: <i>untitled.c:28:33: warning: format \u2018%x\u2019 expects argument of type \u2018unsigned int *\u2019, but argument 3 has type \u2018int *\u2019 [-Wformat=]</i>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10890280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C2xxM2q2f9k/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ7EtK0oPTS7ZZb2o1uKN4cEyGr0Q/mo/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/10890280/max"}, "edited": false, "score": 0, "creation_date": 1551216538, "post_id": 54893942, "comment_id": 96557880, "body": "I guess there is a difference in your code and mine - I don&#39;t have 2 uint8_t arrays, i have just one array and pointers of type int.  so if i will do smth like  <code>memcpy(Mac1[i].address_bytes[j], (uint8_t) mac1[j], 6*sizeof(uint8_t));</code> I will have segmentation fault"}, {"owner": {"reputation": 479, "user_id": 8321975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d934a13d46469176a140ba9b04c929c?s=128&d=identicon&r=PG&f=1", "display_name": "kesselhaus", "link": "https://stackoverflow.com/users/8321975/kesselhaus"}, "reply_to_user": {"reputation": 35, "user_id": 10890280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C2xxM2q2f9k/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ7EtK0oPTS7ZZb2o1uKN4cEyGr0Q/mo/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/10890280/max"}, "edited": false, "score": 0, "creation_date": 1551218750, "post_id": 54893942, "comment_id": 96558811, "body": "@Max: you asked about a duplication of pointers and refered to strdup() yourself, and Stephan showed you memcpy(). You know what strdup() does, do you?"}, {"owner": {"reputation": 35, "user_id": 10890280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C2xxM2q2f9k/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ7EtK0oPTS7ZZb2o1uKN4cEyGr0Q/mo/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/10890280/max"}, "reply_to_user": {"reputation": 479, "user_id": 8321975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d934a13d46469176a140ba9b04c929c?s=128&d=identicon&r=PG&f=1", "display_name": "kesselhaus", "link": "https://stackoverflow.com/users/8321975/kesselhaus"}, "edited": false, "score": 0, "creation_date": 1551246124, "post_id": 54893942, "comment_id": 96565533, "body": "@kesselhaus From my point of view strdup() is trying to allocate memory to hold the string, which was given like a pointer to that string,  isn&#39;t it?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1551253658, "post_id": 54893942, "comment_id": 96568356, "body": "<code>strdup</code> requires a <code>\\0</code>-terminated string (instead of any &quot;length&quot;-parameter), whereas <code>memcpy</code> is for copying arbitrary memory chunks (but requires to specify the length in bytes). <code>memcpy</code> does not allocate memory; adapted the answer to show how it works if you have to allocate memory, too."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 1, "last_activity_date": 1551253735, "last_edit_date": 1551253735, "creation_date": 1551214526, "answer_id": 54893942, "question_id": 54893731, "link": "https://stackoverflow.com/questions/54893731/how-to-duplicate-pointer-to-type-int-into-uint8-t-array-inside-structure-array/54893942#54893942", "title": "How to duplicate pointer to type int into uint8_t array inside structure array?", "body": "<p>To copy plain bytes like <code>uint8_t</code>, use <code>memcpy</code>:</p>\n\n<pre><code>int main() {\n    uint8_t s[6] = { 0x1, 0x2, 0x3,0x4,0x5,0x6 };\n    uint8_t *t;\n\n    t = malloc(6*sizeof(uint8_t));\n    memcpy(t,s,6*sizeof(uint8_t));\n    printf(\"%x %x %x %x %x %x\\n\", t[0],t[1],t[2],t[3],t[4],t[5]);\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10890280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C2xxM2q2f9k/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ7EtK0oPTS7ZZb2o1uKN4cEyGr0Q/mo/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/10890280/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 54893942, "answer_count": 1, "score": 0, "last_activity_date": 1551253735, "creation_date": 1551213623, "question_id": 54893731, "link": "https://stackoverflow.com/questions/54893731/how-to-duplicate-pointer-to-type-int-into-uint8-t-array-inside-structure-array", "title": "How to duplicate pointer to type int into uint8_t array inside structure array?", "body": "<p>I am writing a program which will read the file and save values in arrays. \nthis is my file:</p>\n\n<pre><code>communication1 : b8:27:eb:cf:54:2c, b8:27:eb:75:85:e4, 2000000;\ncommunication2 : mm:27:eb:cf:54:2c, xx:27:eb:75:85:e4, 2200000;\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\nstruct mac{\n        uint8_t address_bytes [6];\n};\n\nvoid main(){\n    int count = 2, i = 0;\n    char *Trash[4], *Time[4];\n    int k=0;\n    int mac1[6], mac2[6];\n    char tempbuff[100];\n    char trash[20], mac_s[20], mac_d[20], time[20];\n    struct mac Mac1[2], Mac2[2];\n    int j = 0;\n\n    FILE *fptr =  fopen(\"config\", \"r\");\n    fseek(fptr, 0, SEEK_SET);\n    while(!feof(fptr)){\n       if (fgets(tempbuff,100,fptr)) {\n               printf(\"\\n%s\", tempbuff);\n               sscanf(tempbuff, \"%15s : %17[^;], %17[^;], %17[^;];\", trash, mac_s, mac_d, time);\n                Trash[i] = strdup(trash);\n                Time[i] = strdup(time);\n                sscanf(mac_s, \"%x:%x:%x:%x:%x:%x\", &amp;mac1[0], &amp;mac1[1], &amp;mac1[2], &amp;mac1[3], &amp;mac1[4], &amp;mac1[5]);\n                sscanf(mac_d, \"%x:%x:%x:%x:%x:%x\", &amp;mac2[0], &amp;mac2[1], &amp;mac2[2], &amp;mac2[3], &amp;mac2[4], &amp;mac2[5]);\n                for(j = 0; j &lt; 6; j++){\n                        Mac1[i].address_bytes[j] = (uint8_t) mac1[j];\n                        Mac2[i].address_bytes[j] = (uint8_t) mac2[j];\n                }\n                printf (\"Mac1[%d] is %02x:%02x:%02x:%02x:%02x:%02x and Time is %s\\n\", i, Mac1[i].address_bytes[0], Mac1[i].address_bytes[1], Mac1[i].address_bytes[2], Mac1[i].address_bytes[3],\n                                 Mac1[i].address_bytes[4],  Mac1[i].address_bytes[5], Time[i]);\n                printf (\"Mac2[%d] is %02x:%02x:%02x:%02x:%02x:%02x \\n\", i, Mac2[i].address_bytes[0], Mac2[i].address_bytes[1], Mac2[i].address_bytes[2], Mac2[i].address_bytes[3],\n                                 Mac2[i].address_bytes[4],  Mac2[i].address_bytes[5]);\n       }\n       i++;\n    }\n\n    printf(\" \\n  time0 is %s time1 is %s \\n\", Time[0], Time[1]);\n\n\n    fclose(fptr);\n\n}\n</code></pre>\n\n<p>As you see, I am <code>sscanf</code> file and take 4 variables, than separately I <code>sscanf</code> mac addresses as pointers to type int and than trying to write them to a structure array. I have to achieve <code>uint8_t</code> values.</p>\n\n<p>Output of this code is:</p>\n\n<pre><code>communication1 : b8:27:eb:cf:54:2c, b8:27:eb:75:85:e4, 2000000;\nMac1[0] is b8:27:eb:cf:54:2c and Time is 2000000\nMac2[0] is b8:27:eb:75:85:e4 \n\ncommunication2 : mm:27:eb:cf:54:2c, xx:27:eb:75:85:e4, 2200000;\nMac1[1] is b8:27:eb:cf:54:2c and Time is 2200000\nMac2[1] is b8:27:eb:75:85:e4 \n\n  time0 is 2000000 time1 is 2200000 \n</code></pre>\n\n<p>The problem is, that I can't find the way to duplicate pointers into <code>uint8_t</code> field of structure array. With strings I already got the hint - <code>strdup</code>, what about <code>uint8_t</code>?</p>\n"}, {"tags": ["c", "valgrind"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1551212710, "post_id": 54893473, "comment_id": 96556140, "body": "Without seeing the calling code, it&#39;s impossible to answer your question.  But it sure look like the code you posted is based on the assumption that the <code>char</code> value immediately before the start of a string will be a <code>\\0</code> character, and that is one horribly incorrect assumption.  It&#39;s not even safe to assume that value can be read at all."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551212968, "post_id": 54893473, "comment_id": 96556279, "body": "That wouldn&#39;t help you much. In most realistic cases, <code>Start[0]</code> will be in allocated memory, just memory that was allocated for something else entirely. The way <code>valgrind</code> catches this is by intentionally inserting dead space around allocations that aren&#39;t normally there."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1551213231, "post_id": 54893473, "comment_id": 96556411, "body": "Well, first you do <code>while(Length &gt; 0 &amp;&amp; Start[0]){Length--; Start--; }</code>. After it <code>Length == 0</code> or <code>start[0] = &#39;\\0&#39;</code> - both situations for me mean the end of string. After that you reached the end of buffer, you read 10 bytes from <code>Start</code> in <code>strncpy(LookBuffer, Start, sizeof(LookBuffer));</code>. It makes no sense to me, I don&#39;t know what is the purpose of this function."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 1, "creation_date": 1551213265, "post_id": 54893473, "comment_id": 96556429, "body": "The use of <code>strncpy</code> is also broken because <code>lookBuffer</code> will typically not get nul-terminated, and so <code>strstr</code> will read past its end.  Basically, I think you should toss this out and start over."}, {"owner": {"reputation": 77, "user_id": 10473606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61d5945edb8b1fffff51c83f04f1923?s=128&d=identicon&r=PG&f=1", "display_name": "Yamcha_Kippur", "link": "https://stackoverflow.com/users/10473606/yamcha-kippur"}, "reply_to_user": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1551214068, "post_id": 54893473, "comment_id": 96556825, "body": "@NateEldredge Maybe it is best to scrap this and switch to a regex idea instead. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "is_accepted": true, "score": 2, "last_activity_date": 1551212716, "creation_date": 1551212716, "answer_id": 54893540, "question_id": 54893473, "link": "https://stackoverflow.com/questions/54893473/invalid-read-of-size-1-in-while-loop-condition/54893540#54893540", "title": "Invalid read of size 1 in while loop condition", "body": "<p>For C functions that are working with memory buffers, it is caller responsibility to pass valid pointers. There might be some platform-specific trick, but in terms of standard C there's no way, as well as for many platforms (for example just-freed memory is often indistinguishable from still allocated).</p>\n"}, {"tags": [], "owner": {"reputation": 479, "user_id": 8321975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d934a13d46469176a140ba9b04c929c?s=128&d=identicon&r=PG&f=1", "display_name": "kesselhaus", "link": "https://stackoverflow.com/users/8321975/kesselhaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1551216018, "creation_date": 1551216018, "answer_id": 54894291, "question_id": 54893473, "link": "https://stackoverflow.com/questions/54893473/invalid-read-of-size-1-in-while-loop-condition/54894291#54894291", "title": "Invalid read of size 1 in while loop condition", "body": "<p>The function is called <code>LookBack</code>, so it seems to be called in some string processing / tokenization process similar to strtok(), which insert some <code>\\0</code> at the split point.</p>\n\n<p><code>while(Start[-1] &amp;&amp; Length--) Start--;</code> \nLook at the position before Start[0], if it is not a <code>\\0</code> string terminator. If it is not a <code>\\0</code> go one back. </p>\n\n<p><code>while( (*(Start-1) != '\\0') &amp;&amp; (0 != (Length--))) Start--;</code></p>\n\n<p>So, after the while loop you actually get a \"start\"-pointer in the string passed by Start pointer without readjusting it by +1 to actually get the second string part.</p>\n\n<p>In your replacement, you actually miss to advance the Start pointer afterwards, because now it is pointing to a <code>\\0</code>, which ends a string, so your string functions will just see an string of strlen(Start) = 0.</p>\n"}], "owner": {"reputation": 77, "user_id": 10473606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61d5945edb8b1fffff51c83f04f1923?s=128&d=identicon&r=PG&f=1", "display_name": "Yamcha_Kippur", "link": "https://stackoverflow.com/users/10473606/yamcha-kippur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 54893540, "answer_count": 2, "score": 0, "last_activity_date": 1551216018, "creation_date": 1551212425, "question_id": 54893473, "link": "https://stackoverflow.com/questions/54893473/invalid-read-of-size-1-in-while-loop-condition", "title": "Invalid read of size 1 in while loop condition", "body": "<p>I recently inherited code, written in C, without any documentation. I've been working at optimizing and fixing it and I've come across this.</p>\n\n<pre><code>int  LookBack(char * Start, int Length, char *Ignore)\n{\n  char  LookBuffer[10];\n  //while(Start[-1] &amp;&amp; Length--) Start--; // Start[-1]. No idea what that is supposed to mean.\n  while(Length &gt; 0 &amp;&amp; Start[0]){\n    Start--;\n    Length--;\n  }\n  strncpy(LookBuffer, Start, sizeof(LookBuffer));\n  if(strcasestr(LookBuffer, Ignore)) {\n    return(1);\n  }\n  return(0);\n}\n</code></pre>\n\n<p>This function is used to determine if a substring is a certain distance in front of the string <code>Start</code>. For example, take the string <code>The designation is API RP 5L1</code> and <code>Start</code> is a pointer to <code>API RP 5L1</code>. So, if <code>Ignore = \"The\"</code> and <code>Length = 10</code>, the function will return <code>0</code>.</p>\n\n<p>My Question</p>\n\n<p>Valgrind gives me the <code>Invalid read of size 1</code> error because it is reading past the allocated memory at <code>while(Length &gt; 0 &amp;&amp; Start[0])</code>, or so I believe. Is there any way I can check that <code>Start[0]</code> is in allocated memory without doing an invalid read?</p>\n"}, {"tags": ["c", "pointers", "function-pointers"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1551211475, "post_id": 54893103, "comment_id": 96555559, "body": "Please explain what you want help with. What is not working? What happens and what should happen instead?"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1551211630, "post_id": 54893103, "comment_id": 96555637, "body": "Hi. So the problem is that the visitedPixels and visitedPixelsIndex values are not being updated. From my understanding, the pointer values should remain the same as previous iteration each time the function is called. For example, the in the first iteration, 7 will be added to vistedPixels array. I want that 7 to stay in the array the next time the function is called, instead of it and visitedPixelsIndex being reset."}, {"owner": {"reputation": 439, "user_id": 1060774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e522563914f35f6a67ad7811c5ca89e?s=128&d=identicon&r=PG", "display_name": "Ken Jackson", "link": "https://stackoverflow.com/users/1060774/ken-jackson"}, "edited": false, "score": 1, "creation_date": 1551211636, "post_id": 54893103, "comment_id": 96555642, "body": "Array <code>visitedPixels[]</code> only has two elements allocated, but 16 elements are looped through, and the elements are never initialized.  Integer <code>visitedPixelsIndex</code> is passed by value to pointer parameter.  You should pass <code>&amp;visitedPixesIndex</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551211702, "post_id": 54893103, "comment_id": 96555673, "body": "Aside: please note that <code>srand(1);</code> will produce the same sequence every time \u2014 useful for debugging but is usually better to comment out <code>&#47;&#47;srand(time(NULL));</code>"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 439, "user_id": 1060774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e522563914f35f6a67ad7811c5ca89e?s=128&d=identicon&r=PG", "display_name": "Ken Jackson", "link": "https://stackoverflow.com/users/1060774/ken-jackson"}, "edited": false, "score": 0, "creation_date": 1551212173, "post_id": 54893103, "comment_id": 96555873, "body": "@KenJackson Passing the value by &amp; seems to have fixed it. Thank you!"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1551212269, "post_id": 54893103, "comment_id": 96555930, "body": "One more question though. So if I have allocated the memory by size 2 in the beginning, I want to reallocate the memory each time a new value is added. But when I try to do     visitedPixels = realloc(visitedPixels, (visitedPixelsIndex+1) * sizeof(int));  it says Invalid operands to binary expression (&#39;int *&#39; and &#39;unsigned long&#39;). What does that mean? How can I fix it?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1551212684, "post_id": 54893103, "comment_id": 96556126, "body": "@NaeemKhan Since <code>visitedPixelsIndex</code> is a pointer, that code is now incorrect."}], "answers": [{"comments": [{"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1551271632, "post_id": 54893502, "comment_id": 96578697, "body": "This was very helpful. I just realized a lot of mistakes I have done allocating memory because of this. Thank you!"}], "tags": [], "owner": {"reputation": 3728, "user_id": 152043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7fe904771aa932cb3ab37553916c45?s=128&d=identicon&r=PG", "display_name": "Michael Speer", "link": "https://stackoverflow.com/users/152043/michael-speer"}, "is_accepted": true, "score": 1, "last_activity_date": 1551212519, "creation_date": 1551212519, "answer_id": 54893502, "question_id": 54893103, "link": "https://stackoverflow.com/questions/54893103/c-function-with-array-pointer/54893502#54893502", "title": "C function with array pointer", "body": "<p>Okay, so. I'm going to try to explain with a metaphor. Hopefully it helps rather than confusing more.</p>\n\n<p>Imagine memory is a long board you can write numbers on. It takes an inch of board to write a small number. Bigger numbers can be represented by writing across more slots.</p>\n\n<p>An array, in our metaphor, is just a contiguous length of board you can write stuff into. If you want an array of 5 integers, and each integer takes 4 inches, you'll need 20 inches of board for it. If you wanted to pass all these integers to a function, instead of copying them all across, you would instead write down how many inches from the end of the board your array is. That's what a pointer is. It's a number telling where something is.</p>\n\n<p>When you called <code>malloc( 2 * sizeof( int ) )</code>, you requested for a segment of the board big enough for two integers, and you received how many inches from the end of the board that new segment is. So we've got 8 inches of board X inches from the end, with X being our pointer.</p>\n\n<p>Incrementing a pointer says \"increase this value to point at the next element of the underlying array\". A <code>int*</code> will increase by 4, a pointer to a structure by the size of the structure plus any alignment offset the compiler has decided for it.</p>\n\n<p>It does not increase the amount of storage.</p>\n\n<p>If I have a pointer to two 8 inches of board, write a 4 inch number, increment the pointer to point 4 inches more in, write another 4 inch number and increment again, my pointer is now right after the last element of the array. If I write here, all bets are off. What was on the board after the array? Who knows. It could be anything. Maybe it was a different array. Maybe it was information for keeping track of what parts of the board have been handed out to the program. Maybe it was the end of my board and I'll write off the end. Writing to memory you haven't received permission to from the operating system is where signals for \"segment violations\", SIGSEGV, program failures come from.</p>\n\n<p>You need to request more space up front, or bigger arrays as you need them. There's also a realloc that will do this too. And for all of them, you have to check if the call failed and terminate or otherwise recover appropriately.</p>\n\n<p>Hopefully this is more helpful than confusing. Good luck :)</p>\n"}], "owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54893502, "answer_count": 1, "score": -1, "last_activity_date": 1551212519, "creation_date": 1551210909, "last_edit_date": 1551211384, "question_id": 54893103, "link": "https://stackoverflow.com/questions/54893103/c-function-with-array-pointer", "title": "C function with array pointer", "body": "<p>I'm trying to write a function that when given an array and a value, it checks if the value is in that array. If it is there then keep finding a new unique random value before adding it to the array. This is what I have done so far but I think the problem is my lack of understanding of pointers. Here is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint getNewIndex(int index, int *visitedPixels, int *visitedPixelsIndex);\n\nint main() {\n\nint *visitedPixels = malloc(2 * sizeof(int));\nint *visitedPixelsIndex = 0;\nsrand(1);\nint randIndex = rand() % 16, i;\n\nprintf(\"Initial randIndex = %d\\n\", randIndex);\n\nfor(i =  0; i &lt; 16; i++) {\n    randIndex = getNewIndex(randIndex, visitedPixels, visitedPixelsIndex);  \n    printf(\"randIndex[%d] = %d\\n\", i, visitedPixels[i]);\n}\nreturn 0;\n}\nint getNewIndex(int index, int *visitedPixels, int *visitedPixelsIndex) {\n\n    int i = 0;\n    while (i &lt; *visitedPixelsIndex) {\n        (index == visitedPixels[i]) ? index = rand() % 16, i = 0 : i++;\n\n    }\n\n    visitedPixels[*visitedPixelsIndex] = index;\n    (*visitedPixelsIndex)++;\n    //(*visitedPixels) = realloc(visitedPixels, (*visitedPixelsIndex+1) * sizeof(int));\n\n    return index;\n}\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "c", "fork"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1551210992, "post_id": 54893100, "comment_id": 96555368, "body": "you can run it and count the number of processes, no?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1551211353, "post_id": 54893100, "comment_id": 96555510, "body": "None, the code fails to compile :)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1551211517, "post_id": 54893100, "comment_id": 96555577, "body": "There&#39;s no loop, so it can&#39;t be a fork bomb."}], "answers": [{"comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551212159, "post_id": 54893303, "comment_id": 96555865, "body": "No, after the first fork, the parent process continues with the next fork while the child process branches to exit the program.  Look at the return value of fork."}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "edited": false, "score": 0, "creation_date": 1551217224, "post_id": 54893303, "comment_id": 96558190, "body": "@selbie That makes it a race condition. If we have threads 1 through 5, we don&#39;t know how quickly thread 2 will continue to live. After the second fork, we don&#39;t know how long thread 1 will exist, etc. It is unlikely that all 5 will exist at once, but it really depends on when the OS actually lets the threads do some work, and that is going to vary dramatically based on CPU cores, isn&#39;t it?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "edited": false, "score": 0, "creation_date": 1551224738, "post_id": 54893303, "comment_id": 96560823, "body": "@JosephLarson: Since 5 processes are created by that sequence of <code>fork()</code> calls, the maximum number of simultaneously existing processes is 5 (if they all exist at the same time).  The number could be smaller, but it won&#39;t be bigger."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "edited": false, "score": 0, "creation_date": 1551227205, "post_id": 54893303, "comment_id": 96561427, "body": "@JosephLarson - the OP&#39;s question is literally: <i>what is the maximum number?</i>  The sleep call is introduced to reliably simulate an opportunity for all processes to be running at the same time."}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1551303585, "post_id": 54893303, "comment_id": 96596114, "body": "@JonathanLeffler -- I agree with you."}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "edited": false, "score": 0, "creation_date": 1551303732, "post_id": 54893303, "comment_id": 96596182, "body": "@selbie -- right. The sleep removes the timing issue. I didn&#39;t realize that you posted an answer plus a comment to your answer, and was only replying to your comment. I wonder if that was a response to someone else&#39;s comment, now disappeared. But if you look at your original answer (which I didn&#39;t realize was yours) followed by your first comment, then my comment back to you may make more sense."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1551321868, "post_id": 54893303, "comment_id": 96601054, "body": "<i>But if you look at your original answer (which I didn&#39;t realize was yours) followed by your first comment, then my comment back to you may make more sense.</i> - and now I&#39;m completely lost.  :)"}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 2, "last_activity_date": 1551227389, "last_edit_date": 1551227389, "creation_date": 1551211689, "answer_id": 54893303, "question_id": 54893100, "link": "https://stackoverflow.com/questions/54893100/what-is-the-maximum-number-of-simultaneously-existing-processes-resulting-from-t/54893303#54893303", "title": "What is the maximum number of simultaneously existing processes resulting from this program, including the original one?", "body": "<p>Five.  The original process, plus one for each fork call.  Add a sleep statement and print call to validate.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    printf(\"Process Starting\\n\");\n\n    if (fork()){\n        if(!fork()) {\n            if(fork()){\n                fork();\n            }\n        }\n    }\n\n    printf(\"Process Exiting\\n\");\n    sleep(2); // sleep 2 seconds\n    return 0;\n}\n</code></pre>\n\n<p>I'm asserting you'll see 5 \"Process Exiting\" statements printed.</p>\n"}], "owner": {"reputation": 63, "user_id": 11091914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc74a12c8e8ba52b82b5fc0238696b4?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/11091914/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1551227389, "creation_date": 1551210888, "question_id": 54893100, "link": "https://stackoverflow.com/questions/54893100/what-is-the-maximum-number-of-simultaneously-existing-processes-resulting-from-t", "title": "What is the maximum number of simultaneously existing processes resulting from this program, including the original one?", "body": "<p>How can I determine this for the following program?</p>\n\n<pre><code>if (fork()){\n    if(!fork()){\n        if(fork()){\n            fork();\n        }\n    }\n}\nexit(0);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1551210367, "post_id": 54892951, "comment_id": 96555116, "body": "<code>printf(&quot;%f&quot;, result);</code> --&gt;<code>printf(&quot;%f&quot;, *result);</code> Also you have undefined behavior as you are de-referencing <code>result</code> without valid memory"}, {"owner": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1551210419, "post_id": 54892951, "comment_id": 96555138, "body": "I tried that but I get &quot;Segmentation fault (core dumped)&quot; xD"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1551210453, "post_id": 54892951, "comment_id": 96555149, "body": "Why is <code>result</code> a pointer at all?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1551210455, "post_id": 54892951, "comment_id": 96555150, "body": "Because <code>result</code> is pointing to nowhere."}, {"owner": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1551210502, "post_id": 54892951, "comment_id": 96555166, "body": "Because of  float* Calculate(char* buffer)"}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1551213473, "post_id": 54893181, "comment_id": 96556534, "body": "Code without explanation is not an appropriate answer."}], "tags": [], "owner": {"reputation": 177, "user_id": 9499535, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Horacio Goetendia", "link": "https://stackoverflow.com/users/9499535/horacio-goetendia"}, "is_accepted": false, "score": 0, "last_activity_date": 1551211188, "creation_date": 1551211188, "answer_id": 54893181, "question_id": 54892951, "link": "https://stackoverflow.com/questions/54892951/c-error-format-f-expects-argument-of-type-double/54893181#54893181", "title": "C : Error : &quot;format \u2018%f\u2019 expects argument of type \u2018double\u2019&quot;", "body": "<p>Your code needs many validations and changes to be reliable, but i made few changes to reach your initial purpose.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nfloat Calculate(char* buffer)\n{\n    int number1, number2;\n\n    char *firstPart = (char *)malloc(strlen(buffer));\n    char *secondPart = (char *)malloc(strlen(buffer));\n    float result;\n\n    strncpy(firstPart, buffer + 1, 4);\n    strncpy(secondPart, buffer + 5, 4);\n    number1 = atoi(firstPart);\n    number2 = atoi(secondPart);\n\n\n    if( buffer[0] == '0')\n    {\n        result = (float)number1 + (float)number2;\n    }\n    else if(buffer[0] == '1')\n    {\n        result = (float)number1 - (float)number2;\n    }\n    else if(buffer[0] == '2')\n    {\n        result = (float)number1 * (float)number2;\n    }\n    else if(buffer[0] == '3')\n    {\n        result = (float)number1 / (float)number2;\n    }\n\n    free(firstPart);\n    free(secondPart);\n\n    return result;\n}\n\nint main()\n{\n    char buffer[20];\n    printf(\"Insert code word: \");\n    scanf(\"%s\", buffer);\n\n    float result = Calculate(buffer);\n    printf(\"%f\", result);\n\n    return 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1551211401, "post_id": 54893184, "comment_id": 96555534, "body": "I see that you removed a pointer from the function, it supposed to be float* Calculate(char * buffer). Why?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1551211499, "post_id": 54893184, "comment_id": 96555568, "body": "@Stefan There&#39;s no need for a pointer to be returned.  The function can simply return a <code>float</code> value."}, {"owner": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1551211660, "post_id": 54893184, "comment_id": 96555655, "body": "I just asked because in the text of this assignment  the name of the function contained the pointer that is why asked. Thanks for your help."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1551212158, "post_id": 54893184, "comment_id": 96555864, "body": "@Stefan If the assignment requires this function to return a pointer, then allocate memory for <code>result</code> in <code>Calculate</code>, and change the <code>printf</code> line in <code>main</code> to dereference the pointer."}, {"owner": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1551212458, "post_id": 54893184, "comment_id": 96556026, "body": "That is the answer I wanted, so I needed to allocate memory for the result, know I understand. Thanks again @dbush, for you help!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1551213206, "post_id": 54893184, "comment_id": 96556403, "body": "@Stefan the requirement of the assignment sounds fishy"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "edited": false, "score": 0, "creation_date": 1607517193, "post_id": 54893184, "comment_id": 115296101, "body": "@Stefan May I ask why you unaccepted this answer more than 2 years later?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1551211454, "last_edit_date": 1551211454, "creation_date": 1551211198, "answer_id": 54893184, "question_id": 54892951, "link": "https://stackoverflow.com/questions/54892951/c-error-format-f-expects-argument-of-type-double/54893184#54893184", "title": "C : Error : &quot;format \u2018%f\u2019 expects argument of type \u2018double\u2019&quot;", "body": "<p>In your <code>printf</code> call:</p>\n\n<pre><code>printf(\"%f\", result);\n</code></pre>\n\n<p>The <code>%f</code> format specifier expects a <code>double</code> (or a <code>float</code> which gets automatically converted), but you're passing it a <strong>pointer</strong> to a float.  You need to dereference the pointer to get the <code>float</code> value:</p>\n\n<pre><code>printf(\"%f\", *result);\n</code></pre>\n\n<p><strong>However</strong>, you have another problem.</p>\n\n<p>Inside of <code>Calculate</code> you define <code>result</code>, which is what you return from the function, as a pointer to a <code>float</code>, but you never set it to point anywhere.  So anytime you try do dereference this pointer you're reading an uninitialized value and using it as a valid pointer.  Doing so invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>There's no reason to use a pointer to a <code>float</code> in your code, so change both <code>result</code> in <code>main</code> and <code>result</code> in <code>Calculate</code> from <code>float *</code> to <code>float</code>, and change <code>Calculate</code> to return a <code>float</code>.</p>\n\n<p>Also, the <code>strncpy</code> function doesn't always null terminate the destination string, and <code>malloc</code> returns uninitialized memory, so <code>atoi</code> will can read past the end of allocated memory when it reads the strings.  You can fix this by using <code>calloc</code> instead of <code>malloc</code> which returns memory initialized to all 0's.  Also, be sure to <code>free</code> those buffers when you're done with them.</p>\n\n<pre><code>float Calculate(char* buffer)\n{\n    int number1, number2;\n\n    char *firstPart = calloc(strlen(buffer), 1);\n    char *secondPart = calloc(strlen(buffer), 1);\n\n    strncpy(firstPart, buffer+1, 4);\n    strncpy(secondPart, buffer+5, 8);\n\n    number1 = atoi(firstPart);\n    number2 = atoi(secondPart);\n\n    free(firstPart);\n    free(secondPart);\n\n    float result;\n\n    if( buffer[0] == '0')\n    {\n        result = (float)number1 + (float)number2;\n    }\n    else if(buffer[0] == '1')\n    {\n        result = (float)number1 - (float)number2;\n    }\n    else if(buffer[0] == '2')\n    {\n        result = (float)number1 * (float)number2;\n    }\n    else if(buffer[0] == '3')\n    {\n        result = (float)number1 / (float)number2;\n    }\n\n    return result;\n}\n\nint main()\n{\n    char buffer[20];\n    printf(\"Insert code word: \");\n    scanf(\"%s\", buffer);\n\n    float result = Calculate(buffer);\n    printf(\"%f\", result);\n\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 326, "user_id": 9195303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQ2uZ.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9195303/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1090, "favorite_count": 0, "accepted_answer_id": 54893184, "answer_count": 2, "score": -1, "last_activity_date": 1551211454, "creation_date": 1551210292, "question_id": 54892951, "link": "https://stackoverflow.com/questions/54892951/c-error-format-f-expects-argument-of-type-double", "title": "C : Error : &quot;format \u2018%f\u2019 expects argument of type \u2018double\u2019&quot;", "body": "<p>I'm getting back to C and have just been doing some small exercises, and I stumbled at this one and can't get the reason why this is happening??</p>\n\n<p>The program takes a 9 word long code example \"011112222\". The first number is the code for the operation (0 for +, 1 for -, 2 for *, 3 for /) the next 4 numbers are the first number and other 4 is the other number so for \"011112222\" the result should be 1111+2222.</p>\n\n<p>But I get a constant error of : \nIn function \u2018main\u2019:</p>\n\n<pre><code>zadatak.c:54:14: warning: format \u2018%f\u2019 expects argument of type \u2018double\u2019, but argument 2 has type \u2018float *\u2019 [-Wformat=]\n     printf(\"%f\", result);\n</code></pre>\n\n<p>It would be great if someone can shed a light to this problem, I would be grateful.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n\n    float* Calculate(char* buffer)\n    {\n        int number1, number2;\n\n        char *firstPart = (char *)malloc(strlen(buffer));\n        char *secondPart = (char *)malloc(strlen(buffer));\n\n        strncpy(firstPart, buffer+1, 4);\n        strncpy(secondPart, buffer+5, 8);\n\n        number1 = atoi(firstPart);\n        number2 = atoi(secondPart);\n\n        float *result;\n\n        if( buffer[0] == '0')\n        {\n            *result = (float)number1 + (float)number2;\n        }\n        else if(buffer[0] == '1')\n        {\n            *result = (float)number1 - (float)number2;\n        }\n        else if(buffer[0] == '2')\n        {\n            *result = (float)number1 * (float)number2;\n        }\n        else if(buffer[0] == '3')\n        {\n            *result = (float)number1 / (float)number2;\n        }\n\n        return result;\n    }\n\n    int main()\n    {\n        char buffer[20];\n        printf(\"Insert code word: \");\n        scanf(\"%s\", buffer);\n\n        float *result = Calculate(buffer);\n        printf(\"%f\", result);\n\n        return 1;\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 1, "creation_date": 1551209474, "post_id": 54892758, "comment_id": 96554711, "body": "Your code is huge and doesn&#39;t include any comments. For more users to be willing to answer your question, please edit your question so as to indicate what you&#39;re trying to do with your program, and perhaps also add a few more relevant tags."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1551209485, "post_id": 54892758, "comment_id": 96554717, "body": "It&#39;s <code>while(1)</code> without any <code>break</code> related to it. Why would it ever stop?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1551209599, "post_id": 54892758, "comment_id": 96554777, "body": "You never check the return value from <code>scanf()</code> to see if it converts any input.  That will infinite loop if someone answers <code>Q</code> to <code>How many students are in the class?</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1551209888, "post_id": 54892758, "comment_id": 96554909, "body": "Wha&#39;ts <code>class[1].[j]</code> supposed to be?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1551209921, "post_id": 54892758, "comment_id": 96554926, "body": "Please see <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">scanf() leaves the newline char in the buffer</a>. Change <code>scanf(&quot;%c\\n&quot;, &amp;option);</code> to <code>scanf(&quot; %c&quot;, &amp;option);</code> note the added space and removal of newline"}, {"owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1551210018, "post_id": 54892758, "comment_id": 96554970, "body": "For those noting the while(1), case &#39;z&#39; does a return so that will definitely exit the loop."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1551210281, "post_id": 54892758, "comment_id": 96555075, "body": "@JimRhodes Yeah, well spotted."}, {"owner": {"reputation": 17, "user_id": 11029669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvTEG.jpg?s=128&g=1", "display_name": "Andromeda", "link": "https://stackoverflow.com/users/11029669/andromeda"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551210395, "post_id": 54892758, "comment_id": 96555131, "body": "@WeatherVane Thank you. I removed the new line. That cleared it up."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1551210515, "post_id": 54892758, "comment_id": 96555175, "body": "Better add the space too: it filters out the leading whitespace which other format specifiers such as <code>%d</code> and <code>%f</code> and <code>%s</code> do automatically, but not <code>%c</code> and <code>%[]</code> and <code>%n</code>."}, {"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 1, "creation_date": 1551212988, "post_id": 54892758, "comment_id": 96556297, "body": "Why are you using a Do While loop infinitely?  Just use a While loop infinitely, less typing.  And I don&#39;t need to scroll to the bottom for the loop to see that there&#39;s nothing tested."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551224293, "post_id": 54892758, "comment_id": 96560701, "body": "OT: regarding: <code>switch (option)</code>  By changing this to <code>switch ( toupper(option) )</code> then each lower case &#39;case&#39; statement can be removed.  Note: <code>toupper()</code> is found in the header file: <code>ctype.h</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1551224497, "post_id": 54892758, "comment_id": 96560756, "body": "OT: regarding this kind of statement: <code>average = 0;</code>  The variable <code>average</code> is a <code>float</code>, so any assignments should be <code>float</code>  I.E. change to: <code>average = 0.0f;</code>  Then instead of trying force an <code>int</code> into a <code>float</code> the code would be assigning a <code>float</code> from a <code>float</code>"}], "owner": {"reputation": 17, "user_id": 11029669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvTEG.jpg?s=128&g=1", "display_name": "Andromeda", "link": "https://stackoverflow.com/users/11029669/andromeda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551209664, "creation_date": 1551209374, "last_edit_date": 1551209664, "question_id": 54892758, "link": "https://stackoverflow.com/questions/54892758/stuck-in-a-do-while-loop-and-i-cant-get-out", "title": "Stuck in a do while loop and I cant get out", "body": "<p>This code is not making it through the second dowhile loop. It seems to be cycling through the default statement and looping back to the option loop. I am not sure what the issue is, but I have rewritten it at least a dozen times, and still I am having trouble with it. What am I leaving out? I'm positive it's something simple that I am just overlooking. Is there an easy way to identify these types of issues?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int j = 0;\n    int i = 0;\n    int classSize = 0;\n    int position = 0;\n    int studentID = 0;\n    float average = 0;\n    char option = ' ';\n\n\n    do\n    {\n        printf(\"How many students are in the class?\\n \");\n        scanf(\"%d\", &amp;classSize);\n    }while (classSize == 0);\n\n    float class[4][classSize];\n    float final[classSize];\n\n\n    for (i = 0; i &lt; 4; i++)\n    {\n        for (j = 0; j &lt; classSize; j++)\n            class[i][j] = 0;\n    }\n\n    for(j = 0; j &lt; classSize; j++)\n        final[j] = 0;\n    do\n    {\n\n        printf (\"Please select an option:\\n\");\n        printf (\"'A'to add student info one student at a time \\n\");\n        printf (\"'D' to display student\u2019s info \\n\");\n        printf (\"'T' to display class average for homework\\n\");\n        printf (\"'S' to display class average for quizzes\\n\");\n        printf (\"'B' to display class average for final exams\\n\");\n        printf (\"'W' to display class average for student\u2019s final \n                 grade\\n\");\n        printf (\"'Z' to exit program\\n\");\n        scanf(\"%c\\n\", &amp;option);\n\n        switch (option)\n        {\n            case 'a': case 'A':\n                if (position &lt; classSize)\n                {\n\n                    printf (\"Please enter student's number:\\n\");\n                    scanf(\"%f\", &amp;class[0][position] );\n\n                    printf (\"Please enter student's homework grade:\\n\");\n                    scanf(\"%f\", &amp;class[1][position] );\n\n                    printf (\"Please enter student's quiz grade:\\n\");\n                    scanf(\"%f\", &amp;class[2][position] );\n\n                    printf (\"Please enter student's final exam grade:\\n\");\n                    scanf(\"%f\", &amp;class[3][position] );\n\n                    position++;\n\n                }\n                else\n                    puts(\"The table is full.\\n\");\n\n                break;\n\n            case 'd': case 'D':\n\n                printf(\"Enter student number:\\n\");\n                scanf(\"%d\", &amp;studentID);\n\n                for(j = 0; j &lt; classSize; j++)\n                {\n                    if (class[0][j] == studentID)\n                    {\n                        printf (\"The student's number is %d. \\n\", studentID);\n                        printf (\"The student's homework grade is %.2f.\\n\", class[1][j]);\n                        printf (\"The Student's quiz score is %.2f. \\n\", class[2][j]);\n                        printf (\"The student's final exam score is %.2f.\\n\", class[3][j]);\n                        printf (\"The student's total grade is %.2f. \\n\",\n                            ((class[1].[j]*.5)+(class[2][j]*.1)+(class[3][j]*.4)));\n\n                        break;\n                    }\n                    else\n                        continue;\n                    }\n\n                    if (class[0][j] == studentID)\n                    {\n                        for(j = 0; j &lt; classSize; j++)\n                            break;\n                    }\n                    else\n                    {\n                        printf(\"No match\\n\");\n                        break;\n                    }\n                    break;\n\n            case 't': case 'T':\n\n                average = 0;\n                for(j = 0; j &lt; classSize; j++)\n                    average = average + class[1][j];\n\n                    average = average / classSize;\n                printf(\"The average homework grade is %.2f\\n\", average);\n\n                break;\n\n            case 's': case 'S':\n\n                average = 0;\n\n                for(j = 0; j &lt; classSize; j++)\n                    average = average + class[2][j];\n                    average = average / classSize;\n                printf (\"The average quiz grade is %.2f\\n\", average);\n\n                break;\n\n            case 'b': case 'B':\n\n                average = 0;\n\n                for(j = 0; j &lt; classSize; j++)\n                    average = average + class[3][j];\n                average = average / classSize;\n                printf(\"The average class final grade is %.2f\\n\", average);\n                break;\n\n            case 'w': case 'W':\n\n                average = 0;\n\n                for( j = 0; j &lt; classSize; j++)\n                    final[j] = ((class[1][j] * .5) + (class[2][j] * .1) +\n                                (class[3][j] * .4));\n\n                for(j = 0; j &lt; classSize; j++)\n                    average = average + final[j];\n                average = average / classSize;\n\n                printf(\"The class average is %.2f\\n\", average);\n\n                break;\n\n            case 'z': case 'Z':\n\n                return 0;\n\n                break;\n\n\n            default:\n            printf(\"Error...try again\\n\");\n        }\n    }\n    while(1);\n\n}\n</code></pre>\n"}]