[{"tags": ["c", "sockets", "client-server", "telnet", "kill"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474502681, "post_id": 39628027, "comment_id": 66561924, "body": "Where do you check for the &quot;exit&quot; input?"}, {"owner": {"reputation": 328, "user_id": 6762142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70f0ddb770d4f893fed76e34dae7bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "posixKing", "link": "https://stackoverflow.com/users/6762142/posixking"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474505549, "post_id": 39628027, "comment_id": 66562523, "body": "When my client gets connected to server, it execs bash on the server. So now I am interacting with the server&#39;s bash, not mine. Once I type exit, that bash ends and I should get my computer&#39;s prompt back, but the client hangs."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474506108, "post_id": 39628027, "comment_id": 66562620, "body": "&quot;When my client gets connected to server, it execs bash on the server&quot;. That&#39;s rather important info that you should be providing up front don&#39;t you think? Show how you have implemented that. We can&#39;t help you unless you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474556334, "post_id": 39628027, "comment_id": 66588340, "body": "you need to actually <code>exit()</code> the child, when finished processing in the child function.  The posted code is falling out of the child loop, into the parent loop."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474556424, "post_id": 39628027, "comment_id": 66588404, "body": "There is NOTHING in the posted code about checking for a client receiving <code>exit</code> from the terminal.   So your question has nothing to do with the posted code.  Please post a MCVE."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474556780, "post_id": 39628027, "comment_id": 66588646, "body": "the <code>error()</code> function, found in the header file: <code>error.h</code> does not have the syntax of your posted code.  The correct syntax is: <code>void error(int status, int errnum, const char *format, ...);</code>"}], "owner": {"reputation": 328, "user_id": 6762142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70f0ddb770d4f893fed76e34dae7bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "posixKing", "link": "https://stackoverflow.com/users/6762142/posixking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474500587, "creation_date": 1474500587, "question_id": 39628027, "link": "https://stackoverflow.com/questions/39628027/how-to-prevent-my-client-from-hanging-when-exit-is-typed", "title": "How to prevent my client from hanging when exit is typed?", "body": "<p>I am trying to implement a telnet like application where the user can connect to someone else's machine remotely. I have both server and client codes, but I feel like my client code is where I am wrong at. When user types \"exit\" I want my client to exit and get back to my working directory, but it doesn't. It hangs indefinitely. So I am posting only some code instead of posting the entire thing and also I have removed some error checking just for the sake of question here.</p>\n\n<pre><code>pid_t pid = fork();\nswitch(pid)\n{\n    case -1: \n        error(\"Client: Error in forking.\\n\");\n    break;\n    case 0: // We are in the child process\n    {\n        char buffer[BUFFER_SIZE];\n        int nread;\n        // Read from the terminal/stdin and write to the socket\n        while((nread = read(STDIN_FILENO, buffer, BUFFER_SIZE)) &gt; 0)\n        {\n            int result = write(sockfd, buffer, nread); \n            if(result == -1)\n            {\n                error(\"Error while writing to socket\\n\");\n            }\n        } // end while\n    } // end child\n\n} // end switch\n\n// Parent Read from the socket and write to the terminal/stdout\nint nRead;\nchar buffer[BUFFER_SIZE];\nwhile((nRead = read(sockfd, buffer, 512)) &gt; 0)\n{\n    int result = write(STDOUT_FILENO, buffer, nRead);\n    if(result == -1)\n    {\n        error(\"Client: Error while writing to stdout from socket.\\n\");\n    }\n} // end while\n\nkill(pid, SIGKILL);\nclose(sockfd);\n// Wait for child to end before the parent\nwait(NULL);\n</code></pre>\n\n<p>So basically after forking, </p>\n\n<p>My child process will do this : read from terminal/stdin and write to the socket.</p>\n\n<p>My parent will do this: read from the socket and write to the terminal or stdout.</p>\n\n<p>The problem is that when I type exit, I want the child process to die since there is nothing else to write to the socket(since I want to close the connection with the server), but the kill statement never gets executed. I put a printf before to check that. I feel that the while loop before kill statement is infinite, if so, what to do to stop it. </p>\n"}, {"tags": ["c", "arrays", "string", "file", "io"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1474500600, "post_id": 39627998, "comment_id": 66561471, "body": "This code can not compile."}, {"owner": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "edited": false, "score": 0, "creation_date": 1474500839, "post_id": 39627998, "comment_id": 66561532, "body": "There are only string literals in C. They have type char[] and are just null-terminated character arrays. See <a href=\"http://stackoverflow.com/questions/2245664/what-is-the-type-of-string-literals-in-c-and-c\" title=\"what is the type of string literals in c and c\">stackoverflow.com/questions/2245664/&hellip;</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474500849, "post_id": 39627998, "comment_id": 66561534, "body": "The line <code>(fscan(file(&quot;%s %s %d&quot;, name, degree, &amp;mark) != EOF);</code> contains several mistakes, please check your transcription"}, {"owner": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 0, "creation_date": 1474501774, "post_id": 39627998, "comment_id": 66561745, "body": "Answers below cover your question, but to augment them, higher level languages (Python, Java, C#, C++, ...) use char arrays to represent their strings internally, but that is made invisible to you."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "edited": false, "score": 2, "creation_date": 1474502693, "post_id": 39627998, "comment_id": 66561927, "body": "@MickSharpe: There are string literals in C source code. A string literal is a syntactic construct delimited by double-quote characters. C certainly does have strings, but a string is a data format, not a data type. It is by definition &quot;a contiguous sequence of characters terminated by and including the first null character&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "edited": false, "score": 0, "creation_date": 1474506379, "post_id": 39627998, "comment_id": 66562673, "body": "@MickSharpe  C <i>strings</i> as deifned in the standard library are a sub-set of <i>string literals.  E. g. <code>&quot;abc\\0xyx&quot;</code> is an 8 character _string literal</i> but not an 8 character <i>string</i>."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1474500579, "creation_date": 1474500579, "answer_id": 39628026, "question_id": 39627998, "link": "https://stackoverflow.com/questions/39627998/why-in-c-when-reading-files-do-we-have-to-use-a-character-array/39628026#39628026", "title": "Why in C, when reading files, do we have to use a character array?", "body": "<p>Take <code>name[]</code> for example. It's an array of <code>char</code>s, a collection of <code>char</code>s if you like.</p>\n\n<p>There is no string type in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a>, so we use an array an array of <code>char</code>s when we want to use a string.</p>\n\n<p>The code is written as such, so that we can read the actual string in a line of the file, in our array.</p>\n\n<hr>\n\n<p>As a side note, this program will produce syntax errors.</p>\n"}, {"tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": false, "score": 0, "last_activity_date": 1474501919, "last_edit_date": 1474501919, "creation_date": 1474501168, "answer_id": 39628087, "question_id": 39627998, "link": "https://stackoverflow.com/questions/39627998/why-in-c-when-reading-files-do-we-have-to-use-a-character-array/39628087#39628087", "title": "Why in C, when reading files, do we have to use a character array?", "body": "<p>What you have in every non-empty file is a series of <em>bytes</em>. Therefor, what your C program has to do is read <em>bytes</em>. Since the variable type <code>char</code> is used to represent a byte, and since you want to read multiple bytes at once for efficiency purposes, you read an array of chars. That's for the general understanding of what <em>reading from a file</em> means.</p>\n\n<p>Going back to your example, there is no <em>string</em> type in C. A string is an array of bytes (<code>char[]</code>) ended by a nul character.\nWhat the lecturer is doing is:</p>\n\n<ol>\n<li>define an array of chars (which will contain a string) => <code>char name[10]</code> is an array that may contain a string of at most 9 characters (the last byte would be used for <code>'\\0'</code>).</li>\n<li>ask <code>fscanf</code> to read a <em>string</em>, which means it will read multiple bytes (multiple <code>char</code>s) until it finds a nul character (<code>'\\0'</code>) and put all of that in the given array.</li>\n</ol>\n\n<p>To understand what's happening, forget about string as an opaque data type (which might be true in other programming languages) and see them as what they really are: arrays of chars.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1474506506, "post_id": 39628312, "comment_id": 66562694, "body": "A patient and compete answer."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1474503530, "last_edit_date": 1474503530, "creation_date": 1474503008, "answer_id": 39628312, "question_id": 39627998, "link": "https://stackoverflow.com/questions/39627998/why-in-c-when-reading-files-do-we-have-to-use-a-character-array/39628312#39628312", "title": "Why in C, when reading files, do we have to use a character array?", "body": "<p>There are multiple typos on this line:</p>\n\n<pre><code>while (fscan(file(\"%s %s %d\", name, degree, &amp;mark) != EOF);\n    printf(\"%s %s %d\", name, degree, mark);\n</code></pre>\n\n<p>It should read:</p>\n\n<pre><code>while (fscanf(file, \"%s %s %d\", name, degree, &amp;mark) == 3)\n    printf(\"%s %s %d\", name, degree, mark);\n</code></pre>\n\n<p>Can you spot the 4 mistakes?</p>\n\n<ul>\n<li>The function is called <code>fscanf</code></li>\n<li><code>file</code> is an argument followed by <code>,</code>, not a function name followed by <code>(</code></li>\n<li>you should keep looping for as long as <code>fscanf</code> converts 3 values. If conversion fails, for example because the third field is not a number, it will return a short count, not necessarily <code>EOF</code>.</li>\n<li>you typed an extra <code>;</code> after the condition.  This is parsed as an empty statement: the loop keeps reading until end of file, doing nothing, and finally executes <code>printf</code> just once, with potentially invalid arguments.</li>\n</ul>\n\n<p>The programmer uses <code>char</code> arrays and passes their address to <code>fscanf</code>.  If he had used pointers (<code>char *</code>), he would have needed to allocate memory to make them point to something and pass their <strong>values</strong> to <code>fscanf</code>, a different approach that is not needed for fixed array sizes.</p>\n\n<p>Note that the code should prevent potential buffer overflows by specifying the maximum number of characters to store into the arrays:</p>\n\n<pre><code>while (fscanf(file, \"%9s %4s %d\", name, degree, &amp;mark) == 3) {\n    printf(\"%s %s %d\", name, degree, mark);\n}\n</code></pre>\n\n<p>Note also that these hard-coded numbers must match the array sizes minus 1, an there is no direct way to pass the array sizes to <code>fscanf()</code>, a common source of bugs when the code is modified.  This function has many quirks and shortcomings, use with extreme care.</p>\n"}], "owner": {"reputation": 37, "user_id": 5442960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d8JeV.jpg?s=128&g=1", "display_name": "Flo Suess", "link": "https://stackoverflow.com/users/5442960/flo-suess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 39628312, "answer_count": 3, "score": 2, "last_activity_date": 1474503765, "creation_date": 1474500391, "last_edit_date": 1474503765, "question_id": 39627998, "link": "https://stackoverflow.com/questions/39627998/why-in-c-when-reading-files-do-we-have-to-use-a-character-array", "title": "Why in C, when reading files, do we have to use a character array?", "body": "<p>I've literally just started programming in C. Coming from a little understanding of Python. </p>\n\n<p>Just had a lecture on C, the lecture was about this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    FILE *file;\n    char name[10], degree[5];\n    int mark;\n    file = fopen(\"file.txt\", \"r\");\n    while (fscan(file(\"%s %s %d\", name, degree, &amp;mark) != EOF);\n        printf(\"%s %s %d\", name, degree, mark);\n    fclose(file);\n}\n</code></pre>\n\n<p>I'm specifically asking why we the lecturer would have used an array rather than just declaring two string variables. Searching for a deeper answer than just, \"that's just C for you\". </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1474499643, "post_id": 39627860, "comment_id": 66561268, "body": "<code>scanf(&quot;%d&quot;</code> means to scan an integer ... <code>dog</code> is not an integer. You could use <code>fgets(string, sizeof string, stdin);</code> instead, and then use <code>sscanf</code> to check if there is a number in the string."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1474500050, "post_id": 39627860, "comment_id": 66561358, "body": "I&#39;d bet that if you say <code>int num = 5;</code> up top, the output from <code>&quot;dog&quot;</code> will be <code>5</code> as well, yeah?"}, {"owner": {"reputation": 23, "user_id": 6861039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd4e132401245d0205c82e17dcf0573f?s=128&d=identicon&r=PG&f=1", "display_name": "happymasssacre", "link": "https://stackoverflow.com/users/6861039/happymasssacre"}, "edited": false, "score": 0, "creation_date": 1474500112, "post_id": 39627860, "comment_id": 66561370, "body": "So it will never get any kind of string that way? That&#39;s disappointing. I&#39;ll look into the option you suggest, thanks for your reply."}, {"owner": {"reputation": 23, "user_id": 6861039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd4e132401245d0205c82e17dcf0573f?s=128&d=identicon&r=PG&f=1", "display_name": "happymasssacre", "link": "https://stackoverflow.com/users/6861039/happymasssacre"}, "edited": false, "score": 0, "creation_date": 1474500250, "post_id": 39627860, "comment_id": 66561402, "body": "Yep still no dog with 5...  I cry evrytime :("}], "answers": [{"tags": [], "owner": {"reputation": 54473, "user_id": 41747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc53a4faffef3f7a1d0a3c492d21757?s=128&d=identicon&r=PG", "display_name": "D.Shawley", "link": "https://stackoverflow.com/users/41747/d-shawley"}, "is_accepted": false, "score": 1, "last_activity_date": 1474499936, "creation_date": 1474499936, "answer_id": 39627925, "question_id": 39627860, "link": "https://stackoverflow.com/questions/39627860/sprintf-to-copy-int-into-string-in-c/39627925#39627925", "title": "sprintf to copy int into string in C", "body": "<p>I recommend looking at the return value from <code>scanf</code>.  It is likely returning zero.  It is failing and not storing a value in <code>num</code>.  The <code>2</code> is likely the indeterminate value that was on the stack when the program started.</p>\n\n<p>If you want to read the value that was input, then use <code>fgets</code> to read the input into the buffer and then <code>sscanf</code> to extract it.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6861039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd4e132401245d0205c82e17dcf0573f?s=128&d=identicon&r=PG&f=1", "display_name": "happymasssacre", "link": "https://stackoverflow.com/users/6861039/happymasssacre"}, "edited": false, "score": 0, "creation_date": 1474501723, "post_id": 39628025, "comment_id": 66561735, "body": "Thanks a lot, very enlightening answer."}], "tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": true, "score": 1, "last_activity_date": 1474500941, "last_edit_date": 1474500941, "creation_date": 1474500567, "answer_id": 39628025, "question_id": 39627860, "link": "https://stackoverflow.com/questions/39627860/sprintf-to-copy-int-into-string-in-c/39628025#39628025", "title": "sprintf to copy int into string in C", "body": "<p><code>int num;</code> leaves <code>num</code> uninitialized. When you input <code>\"dog\"</code>, the <code>scanf</code> operation doesn't match anything against <code>num</code>, so nothing is stored in it. Thus when you <code>printf</code> <code>num</code> it is still uninitialized and the value you get is garbage.</p>\n\n<p>You could test for this by examining the return of <code>scanf</code>. <code>scanf</code> will return the number of successful matches, which you should expect to be <code>1</code> if a number was entered</p>\n\n<pre><code>printf(\"Number: \");\nif (scanf(\"%d\",&amp;num) != 1) {\n    puts(\"You didn't enter a number!\");\n}\n</code></pre>\n\n<p>For a better proof it is not being set, try initializing <code>num</code> to something and see what gets printed</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n  int num = 5; // I'm initializing to 5\n  char string[31];\n\n  printf(\"Number: \");\n  scanf(\"%d\",&amp;num);\n\n  sprintf(string, \"%d\", num);\n\n  printf(\"%s\", string);  // now this prints \"5\" if I input \"dog\"\n  return 0;\n}\n</code></pre>\n\n<p>For further evidence of this, running your original program through valgrind prints a bunch of errors about using an uninitialized value. I've edited out some of the noise in the below:</p>\n\n<pre><code>$ echo \"dog\" | valgrind ./a.out\n==32450== \n==32450== Use of uninitialised value of size 8\n==32450==    at _itoa_word\n==32450==    by vfprintf \n==32450==    by vsprintf\n==32450==    by  sprintf\n==32450==    by main\n==32450== \n==32450== Conditional jump or move depends on uninitialised value(s)\n==32450==    at vfprintf \n==32450==    by vsprintf\n==32450==    by sprintf\n==32450==    by main\n</code></pre>\n\n<p>To accomplish your goal of reading a string then checking it, you'll want to use <code>fgets</code> instead</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main() {\n  char input[31];\n  printf(\"Number: \");\n  fgets(input, sizeof input, stdin);  // read up to a line of input as a string\n  if (isdigit(input[0])) {  // check if it's a number\n    puts(\"this is a number (or at least starts with one)\");\n  } else {\n    puts(\"this is not a number\");\n    return 1;\n  }\n\n  int num = 0;\n  char string[31];\n\n  sscanf(input, \"%d\", &amp;num);  // now you can do the scanf on the input string\n\n  sprintf(string, \"%d\", num);\n  printf(\"%s\", string);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6861039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd4e132401245d0205c82e17dcf0573f?s=128&d=identicon&r=PG&f=1", "display_name": "happymasssacre", "link": "https://stackoverflow.com/users/6861039/happymasssacre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1797, "favorite_count": 0, "accepted_answer_id": 39628025, "answer_count": 2, "score": 2, "last_activity_date": 1474500941, "creation_date": 1474499459, "last_edit_date": 1474499782, "question_id": 39627860, "link": "https://stackoverflow.com/questions/39627860/sprintf-to-copy-int-into-string-in-c", "title": "sprintf to copy int into string in C", "body": "<p>I'm trying to convert an integer to string using <code>sprintf</code> but it's not working as expected.</p>\n\n<p>When I input a number it works fine, I can show the number on screen. But if I input a string it always shows <code>\"2\"</code> on screen.</p>\n\n<p>I was planning to get the string so that I can check if it's a number or not with the <code>isdigit()</code> function.</p>\n\n<p>Tried <code>itoa()</code> too but it was pretty much the same story.</p>\n\n<pre><code>int main()\n{\n    int num;\n    char string[31];\n\n    printf(\"Number: \");\n    scanf(\"%d\",&amp;num);\n\n    sprintf(string, \"%d\", num);\n\n    printf(\"%s\", string);\n    return 0;\n}\n</code></pre>\n\n<p>If I input <code>2999</code>: it shows <code>\"2999\"</code></p>\n\n<p>If I input <code>\"dog\"</code>: it shows <code>\"2\"</code></p>\n\n<p>How can I get that string? For what I've seen it should work, perhaps something's up with my IDE? I have Code Blocks 16.01.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1474499407, "post_id": 39627835, "comment_id": 66561218, "body": "&quot;Apologies&quot;, don&#39;t be sorry but do perform basic search for an answer before asking a new question."}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1474499525, "post_id": 39627835, "comment_id": 66561240, "body": "if you track the elements in an array with size_of_array.... just do <code>size_of_array = 3</code>  done!"}], "answers": [{"comments": [{"owner": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 0, "creation_date": 1474500204, "post_id": 39627877, "comment_id": 66561391, "body": "How does this get rid of the values equal to or greater than the 3rd index? Wouldn&#39;t this leave me with the 1st 3 elements?"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 0, "creation_date": 1474500330, "post_id": 39627877, "comment_id": 66561417, "body": "It does not &quot;get rid&quot; of any values, as I said, doing so is impossible with an array in C. Instead, you can simply ignore them, yes, they will still exist in memory but as long as you only do your work on the first 3 elements, what does it matter if more exist if you ignore them?"}, {"owner": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 0, "creation_date": 1474500544, "post_id": 39627877, "comment_id": 66561456, "body": "Ok, then how does this ignore the values greater than or equal to the specified_index?"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 1, "creation_date": 1474500575, "post_id": 39627877, "comment_id": 66561464, "body": "Let me add a small example to show what I mean."}, {"owner": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 0, "creation_date": 1474501003, "post_id": 39627877, "comment_id": 66561568, "body": "I think I know what you mean, I would change the size_of_array and then have to change where the starting_index is correct?"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 1, "creation_date": 1474501014, "post_id": 39627877, "comment_id": 66561575, "body": "@rebbailey Does that edit clear it up? You can probably actually run that code assuming I didn&#39;t typo to see that it works."}], "tags": [], "owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "is_accepted": true, "score": 1, "last_activity_date": 1474500996, "last_edit_date": 1474500996, "creation_date": 1474499565, "answer_id": 39627877, "question_id": 39627835, "link": "https://stackoverflow.com/questions/39627835/how-to-delete-elements-of-an-array-after-a-specified-index/39627877#39627877", "title": "How to delete elements of an array after a specified index", "body": "<p>You cannot resize an array in C. Once it is created its size is fixed.\nIf you are OK to use dynamic memory and a pointer instead of an array you could resize it using <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/realloc.html\" rel=\"nofollow\"><code>realloc</code></a>.</p>\n\n<p>However looking at your purposes you don't actually need to resize the array, you can just decrease <code>size_of_array</code> and ignore the remaining values, eg:</p>\n\n<pre><code>size_of_array -= 4;\n</code></pre>\n\n<p><strong>Edit:</strong>\nTo clarify what I mean by ignoring values. I assume that by creating an array you intend to actually so some work with its elements, else having the array would be pointless. Therefore when you do your work on the array, just only do it on elements which you are not ignoring. Let us for the sake of example say we want to print the values of the array as our \"work\":</p>\n\n<pre><code>void printArray(int *array, size_t size) {\n    for (size_t itr = 0; itr &lt; size; ++itr) { printf(\"%d\", array[itr])); }\n}\n\nint main(int argc, char *argv[]) {\n    int values[] = {1,2,3,4,5,6,7};\n    int size_of_array = 7;\n    int specified_index = 3;\n    // Print the whole array\n    printArray(values, size_of_array);\n    // Print the 'shortened' array by ignoring the rest of the values\n    size_of_array -= 4;\n    printArray(values, size_of_array);\n}\n</code></pre>\n"}], "owner": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1474522576, "accepted_answer_id": 39627877, "answer_count": 1, "score": 1, "last_activity_date": 1474500996, "creation_date": 1474499295, "question_id": 39627835, "link": "https://stackoverflow.com/questions/39627835/how-to-delete-elements-of-an-array-after-a-specified-index", "closed_reason": "Duplicate", "title": "How to delete elements of an array after a specified index", "body": "<p>I am trying to remove the elements of an array that have an index greater than, or equal to a specified index value. </p>\n\n<pre><code>int values[] = {1,2,3,4,5,6,7};\nint size_of_array = 7;\nint specified_index = 3;\n\nfor(int i = size_of_array; i &gt;= specified_index; size_of_array--){\n  values[middle_index + 1] = NULL;\n}\n</code></pre>\n\n<p>I am very new to C so it is still a little confusing. Apologies if this is duplicate.</p>\n"}, {"tags": ["c++", "c", "compression", "zlib", "heap-memory"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1474498130, "post_id": 39627654, "comment_id": 66560917, "body": "Your post  in its current form is too broad and not a good fit for Stack Overflow. Please visit the <a href=\"http://stackoverflow.com/help\">help center</a> and read the section <a href=\"http://stackoverflow.com/help/how-to-ask\">how do I ask a good question</a>."}, {"owner": {"reputation": 457, "user_id": 60629, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/znZlm.jpg?s=128&g=1", "display_name": "JGood", "link": "https://stackoverflow.com/users/60629/jgood"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1474506755, "post_id": 39627654, "comment_id": 66562733, "body": "@CaptainObvlious: updated the question to be less vague for you by simplifying and pointing out an example might be log files.. Still can&#39;t find anything on Stackoverflow that matches and am looking into Adler&#39;s answer. Which seems to be spot on."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1474508921, "post_id": 39627654, "comment_id": 66563234, "body": "@CaptainObvlious The question didn&#39;t seem too broad to me. It was quite simple and specific. &quot;How do you append to a zlib stream?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1905, "user_id": 2094844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/NE8It.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/2094844/sagar"}, "edited": false, "score": 0, "creation_date": 1520236868, "post_id": 39627707, "comment_id": 85216514, "body": "<code>gzappend</code> takes <code>gzip</code> file as an input, but what if I want to append data to zlib compressed file ? Please correct me if I am wrong."}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1474498327, "creation_date": 1474498327, "answer_id": 39627707, "question_id": 39627654, "link": "https://stackoverflow.com/questions/39627654/append-to-compressed-file-using-zlib/39627707#39627707", "title": "Append to compressed file using zlib", "body": "<p>It sounds like you are trying to keep something like a compressed log, appending small amounts of data each time. For that you can look at <a href=\"https://github.com/madler/zlib/blob/master/examples/gzlog.h\" rel=\"nofollow\"><code>gzlog.h</code></a> and <a href=\"https://github.com/madler/zlib/blob/master/examples/gzlog.c\" rel=\"nofollow\"><code>gzlog.c</code></a> for an example of how to do this.</p>\n\n<p>You can also look at <a href=\"https://github.com/madler/zlib/blob/master/examples/gzappend.c\" rel=\"nofollow\"><code>gzappend</code></a>, which appends data to a gzip file.</p>\n\n<p>These are all easily adaptable to a zlib stream.</p>\n"}, {"tags": [], "owner": {"reputation": 457, "user_id": 60629, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/znZlm.jpg?s=128&g=1", "display_name": "JGood", "link": "https://stackoverflow.com/users/60629/jgood"}, "is_accepted": false, "score": 0, "last_activity_date": 1488322858, "creation_date": 1488322858, "answer_id": 42520356, "question_id": 39627654, "link": "https://stackoverflow.com/questions/39627654/append-to-compressed-file-using-zlib/42520356#42520356", "title": "Append to compressed file using zlib", "body": "<p>Mark Adler's answer was very close to what I needed, but due to already being entrenched in the zlib library and on an embedded device with limited resources I was/am stuck. </p>\n\n<p>I ended up simply appending a delimiter to each section of data (ex: @@delimiter@@) and once ready to read the finished file, (different application) it seeks these sections and creates an array object of the compressed sections that are then individually decompressed. </p>\n\n<p>I am still marking Adler's answer as correct, as it was useful info that will be of more help to other programmers. </p>\n"}], "owner": {"reputation": 457, "user_id": 60629, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/znZlm.jpg?s=128&g=1", "display_name": "JGood", "link": "https://stackoverflow.com/users/60629/jgood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1180, "favorite_count": 1, "accepted_answer_id": 39627707, "answer_count": 2, "score": 1, "last_activity_date": 1488322858, "creation_date": 1474497975, "last_edit_date": 1474506505, "question_id": 39627654, "link": "https://stackoverflow.com/questions/39627654/append-to-compressed-file-using-zlib", "title": "Append to compressed file using zlib", "body": "<p>Looking around I have found the question being asked, but not great answers. If this is a stackoverflow duplicate (sorry!)</p>\n\n<p>My goal is to have a zlib compressed file that I append to using C/C++ at different intervals (such as a log file). Due to buffer size constraints I was hoping to avoid having to keep the entire file in memory for appending new items. </p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474498409, "post_id": 39627596, "comment_id": 66560994, "body": "<code>malloc (sizeof(int unsigned) * image_size);</code> That is not how to allocate a 2D array."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1474498422, "post_id": 39627596, "comment_id": 66561000, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15062718/allocate-memory-2d-array-in-function-c\">Allocate memory 2d array in function C</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474499563, "post_id": 39627596, "comment_id": 66561244, "body": "@Iztok <a href=\"http://ideone.com/B39d3W\" rel=\"nofollow noreferrer\">sample code</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474504272, "post_id": 39627596, "comment_id": 66562301, "body": "A pointer is not an array and vice-versa. Any reason you think the types of the pointer you pass and the type of the paramter for it should differ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474504340, "post_id": 39627596, "comment_id": 66562315, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/35614862/passing-a-2d-array-of-structs\">Passing a 2D array of structs</a>"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1474506204, "post_id": 39627596, "comment_id": 66562634, "body": "warning says it all, the function accepts a pointer to 2d array, but your <code>image</code> in <code>main</code> function is a pointer to 1d array, the address of which is a pointer to a pointer to 1d array. so obviously they are incompatible."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474510377, "post_id": 39627596, "comment_id": 66563556, "body": "<code>image = (int unsigned (*) [] [size]) malloc (sizeof(int unsigned) * image_size);</code> - please explain that monstrosity before <code>malloc</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474511975, "post_id": 39627596, "comment_id": 66563956, "body": "@Olaf the suggested duplicate doesn&#39;t cover having the function allocate the array"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474550110, "post_id": 39627596, "comment_id": 66583821, "body": "C does not support references!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474578842, "post_id": 39627596, "comment_id": 66601326, "body": "@Olaf Please learn about &quot;pass by reference&quot;. Here is an entry from the <a href=\"http://clc-wiki.net/wiki/C_language:Terms:Pass_by_reference\" rel=\"nofollow noreferrer\">comp.lang.c wiki</a>."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2963756, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eefd0f4fee822eb9eb3384ce5a50248?s=128&d=identicon&r=PG&f=1", "display_name": "Iztok Jeras", "link": "https://stackoverflow.com/users/2963756/iztok-jeras"}, "edited": false, "score": 0, "creation_date": 1474567808, "post_id": 39629268, "comment_id": 66595404, "body": "thanks M.M this was a great answer, it works as advertised"}, {"owner": {"reputation": 71, "user_id": 2963756, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eefd0f4fee822eb9eb3384ce5a50248?s=128&d=identicon&r=PG&f=1", "display_name": "Iztok Jeras", "link": "https://stackoverflow.com/users/2963756/iztok-jeras"}, "edited": false, "score": 0, "creation_date": 1474568405, "post_id": 39629268, "comment_id": 66595724, "body": "What I still do not understand is why the double pointer to an array. I thought the array itself was a pointer so only one * would be needed to implement referencing. While debugging this issue I already learned parentheses are needed because [] has priority, but the above still bothers me. Pointers are far from magic, but the syntax still makes me question my intelligence."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 71, "user_id": 2963756, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eefd0f4fee822eb9eb3384ce5a50248?s=128&d=identicon&r=PG&f=1", "display_name": "Iztok Jeras", "link": "https://stackoverflow.com/users/2963756/iztok-jeras"}, "edited": false, "score": 0, "creation_date": 1474578711, "post_id": 39629268, "comment_id": 66601273, "body": "@IztokJeras arrays and pointers are different. An array is not a pointer. An array is a block of contiguous storage. A pointer is something that indicates whereabouts in memory another object can be found."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 71, "user_id": 2963756, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eefd0f4fee822eb9eb3384ce5a50248?s=128&d=identicon&r=PG&f=1", "display_name": "Iztok Jeras", "link": "https://stackoverflow.com/users/2963756/iztok-jeras"}, "edited": false, "score": 0, "creation_date": 1474579672, "post_id": 39629268, "comment_id": 66601662, "body": "Further to that: A named array cannot be modified or resized once it has been declared.  So it is not possible to declare a named array in <code>main</code> and then pass something to <code>func</code> to allocate the array.  The only option is that the array is dynamically allocated, and in <code>main</code> there is a named pointer that points to either the entire array, or the array&#39;s first row (those are the two different cases I gave examples of in my answer).   Then, since <code>func</code> needs to modify that pointer declared in <code>main</code>, it must pass a pointer to that pointer. (Unless you use the return value instead)"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": -1, "last_activity_date": 1474512271, "last_edit_date": 1474512271, "creation_date": 1474511036, "answer_id": 39629268, "question_id": 39627596, "link": "https://stackoverflow.com/questions/39627596/passing-a-2d-vla-array-to-a-function-by-reference-returning-allocated-memory-n/39629268#39629268", "title": "passing a 2D VLA array to a function by reference, returning allocated memory, no pointer arrays", "body": "<p>I'm assuming your requirements are:</p>\n\n<ul>\n<li>The function \"returns\" a pointer-to-VLA via an out-parameter.</li>\n<li>Caller does not know the number of rows beforehand; the function decides it and \"returns\" it via out-parameter.</li>\n</ul>\n\n<p>The code could look like:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nvoid init(int rows, int cols, unsigned arr[rows][cols])   // same as \"unsigned (*arr)[cols]\"\n{\n   for (int r = 0; r &lt; rows; ++r)\n        for (int c = 0; c &lt; cols; ++c)\n             arr[r][c] = r*c;       \n}\n\nvoid func(int *p_rows, int cols, unsigned (**p_arr)[][cols])\n{\n   *p_rows = 7;\n   *p_arr = malloc( sizeof(unsigned[*p_rows][cols]) );\n\n   if ( !*p_arr )\n       exit(EXIT_FAILURE);\n\n   // Possible to initialize here but it makes for more readable code to use a separate function\n   // (**p_arr)[2][3] = 5;\n\n   init(*p_rows, cols, **p_arr);\n}\n\n\nint main()\n{\n   int cols = 7;\n   int rows;\n\n   unsigned (*p_arr)[][cols];\n   func(&amp;rows, cols, &amp;p_arr);\n\n   // Could do this here instead of calling init() from func()\n   init(rows, cols, *p_arr);\n   (*p_arr)[2][3] = 5;\n\n   // Optional - allow simpler access syntax\n   unsigned (*arr)[cols] = (void *)p_arr;\n   init(cols, rows, arr);  \n   arr[2][3] = 5;\n}\n</code></pre>\n\n<hr>\n\n<p>NB. It would simplify the code if you made a separate function for getting the rowcount than for doing the allocation.  It would also simplify the code to return the allocated pointer, instead of using an out-parameter.</p>\n"}], "owner": {"reputation": 71, "user_id": 2963756, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eefd0f4fee822eb9eb3384ce5a50248?s=128&d=identicon&r=PG&f=1", "display_name": "Iztok Jeras", "link": "https://stackoverflow.com/users/2963756/iztok-jeras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474568606, "creation_date": 1474497612, "last_edit_date": 1474568606, "question_id": 39627596, "link": "https://stackoverflow.com/questions/39627596/passing-a-2d-vla-array-to-a-function-by-reference-returning-allocated-memory-n", "title": "passing a 2D VLA array to a function by reference, returning allocated memory, no pointer arrays", "body": "<p>I would like to have a function which allocates a 2D array with one of the dimensions fixed and provides the allocated memory back to the caller using a pointer to an array pointer.</p>\n\n<p>For example the <code>function()</code> would return a 2D image, where the line <code>size</code> is fixed but the <code>number</code> of lines is determined inside the function.</p>\n\n<p>The arrays are defined using C99 VLA syntax, so I can access the image as a normal 2D array <code>image[y][x]</code> inside and outside the function.</p>\n\n<p>I think <code>function()</code> is written mostly correctly, but I do not know how to write the code in main (array declaration). In any case I can not access the image outside the function, I get a segmentation fault and the compiler complains.</p>\n\n<p>I do not wish to have an array of pointers, there should be a single <code>malloc()</code> and <code>free()</code> and all allocated memory should be continuous.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint function (size_t size, size_t *number, int unsigned (*image) [] [size]);\n\nint function (size_t size, size_t *number, int unsigned (*image) [] [size]) {\n    size_t image_size;\n\n    *number = 9;\n    image_size = (*number) * size;\n\n    printf (\"INSIDE malloc: number=%zu size=%zu image_size=%zu\\n\", *number, size, image_size); fflush(stdout);\n    image = (int unsigned (*) [] [size]) malloc (sizeof(int unsigned) * image_size);\n\n    printf (\"INSIDE assign: number=%zu size=%zu\\n\", *number, size); fflush(stdout);\n    for (int unsigned l=0; l&lt;*number; l++) {\n        for (int unsigned s=0; s&lt;size; s++) {\n            (*image) [l] [s] = (l &lt;&lt; 16) + s;\n        }\n    }\n    (*image) [0] [0] = 0xDEADC0DE;\n\n    printf (\"INSIDE print: number=%zu size=%zu\\n\", *number, size); fflush(stdout);\n    for (int unsigned l=0; l&lt;*number; l++) {\n        printf (\"l=%u:\", l);\n        for (int unsigned s=0; s&lt;size; s++) {\n            printf (\" %08x\", (*image) [l] [s]);\n        }\n        printf (\"\\n\");\n    }\n\n    return (0);\n}\n\nint main (int argc, char **argv) {\n    size_t size;\n    size_t number;\n\n    size = 5;\n    int unsigned (* image) [size];\n\n    printf (\"TEST:\\n\"); fflush(stdout);\n\n    function (size, &amp;number, &amp;image);\n\n    fflush(stdout);\n//    printf (\"OUTSIDE print: number=%zu size=%zu\\n\", number, size); fflush(stdout);\n//    for (int unsigned l=0; l&lt;number; l++) {\n//        printf (\"l=%u:\", l);\n//        for (int unsigned s=0; s&lt;size; s++) {\n//            printf (\" %08x\", (*image) [l] [s]);\n//        }\n//        printf (\"\\n\");\n//    }\n\n//    free(image);\n\n    return (0);\n}\n</code></pre>\n\n<p>I am compiling with <code>clang</code> and <code>gcc</code> and getting the next warning:</p>\n\n<pre><code>clang -o test test.c -g -std=c99\ntest.c:44:34: warning: incompatible pointer types passing 'unsigned int (**)[size]' to parameter of type 'unsigned int (*)[][*]' [-Wincompatible-pointer-types]\n        function (size, &amp;number, &amp;image);\n                                 ^~~~~~\ntest.c:6:63: note: passing argument to parameter 'image' here\n    int function (size_t size, size_t *number, int unsigned (*image) [] [size]) {\n                                                              ^\n1 warning generated.\n</code></pre>\n\n<p>Actually my problem has one dimension more than the given example (<code>list [i] [y][x]</code>) but the same solution should apply.</p>\n"}, {"tags": ["c", "segmentation-fault", "word", "puzzle", "cs50"], "comments": [{"owner": {"reputation": 991, "user_id": 3510424, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a62a33ee186ed8c655492271bca43649?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/3510424/ankush"}, "edited": false, "score": 1, "creation_date": 1474496166, "post_id": 39627337, "comment_id": 66560335, "body": "When using Valgrind, the error messages (like <code>invalid read of size 1</code>) should have a line number associated with them - often Valgrind will tell you the line number of where the pointer was malloc&#39;d. If you do not see this line number, try adding <code>-g</code> to your compile flags (i.e. <code>gcc -g -o prog sourceFile.c</code>), and then running Valgrind on your program in the usual way"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1474496433, "post_id": 39627337, "comment_id": 66560427, "body": "If the segfault occurrs in malloc then the heap is corrupted. It means you probably have written outside your allocated memory, or are still using a block that you have freed earlier."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474496578, "post_id": 39627337, "comment_id": 66560471, "body": "I think you&#39;re calling <code>free(data)</code> too much. Try to organize your malloc and free differently so that it&#39;s obvious just by glancing at the code which <code>free</code> corresponds to which <code>malloc</code>"}, {"owner": {"reputation": 102, "user_id": 6214619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b9eea28579184267566ee2b79ec548?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cross", "link": "https://stackoverflow.com/users/6214619/brian-cross"}, "edited": false, "score": 0, "creation_date": 1474496761, "post_id": 39627337, "comment_id": 66560527, "body": "So you created heap memory called newData inside a function that you hit recursively over-and-over. Do you ever free that memory?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 102, "user_id": 6214619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b9eea28579184267566ee2b79ec548?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cross", "link": "https://stackoverflow.com/users/6214619/brian-cross"}, "edited": false, "score": 0, "creation_date": 1474497785, "post_id": 39627337, "comment_id": 66560814, "body": "@BrianCross: not freeing allocated memory would not lead to a segfault. OP gets one when he <i>does</i> free them, though - so most likely either freeing some twice, or overwriting an allocated block."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1474524136, "post_id": 39627337, "comment_id": 66567430, "body": "Side note: <code>sizeof(char) == 1</code> by definition (C-language standard)."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1474524266, "post_id": 39627337, "comment_id": 66567490, "body": "Side note #2: Try to <code>free</code> a memory block in the same scope where you&#39;ve <code>malloc</code>ed it. For example, your call to <code>free(data)</code> does not follow this rule. It&#39;ll save you a lot of memory management issues."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1474524699, "post_id": 39627337, "comment_id": 66567691, "body": "Side note #3: Does the C-language standard define <code>bool</code>, <code>true</code> and <code>false</code>? Maybe C99 does, C89 doesn&#39;t IMO..."}, {"owner": {"reputation": 21, "user_id": 6860997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8896b16c342a780901d63eeb35528d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Tung", "link": "https://stackoverflow.com/users/6860997/jeremy-tung"}, "edited": false, "score": 0, "creation_date": 1474548897, "post_id": 39627337, "comment_id": 66582992, "body": "Thanks for the comments everyone. cdlane&#39;s answer below has sorted things out. The way I was organising memory allocation and freeing was too complicated like some of you suggested."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6860997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8896b16c342a780901d63eeb35528d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Tung", "link": "https://stackoverflow.com/users/6860997/jeremy-tung"}, "edited": false, "score": 0, "creation_date": 1474548453, "post_id": 39631169, "comment_id": 66582623, "body": "Thanks very much cdlane, that helps a lot about how to organise code. I was calling the functions removeLeftOfIndex and removeElementAtIndex inside the parameter list for calls to other functions and not saving them to a pointer variable (like you did with &quot;reduced&quot;) so then I had no choice but to free the callers memory in a subroutine call as had no pointer to them in the caller. All the memory stuff is sorted now though so thanks again"}, {"owner": {"reputation": 21, "user_id": 6860997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8896b16c342a780901d63eeb35528d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Tung", "link": "https://stackoverflow.com/users/6860997/jeremy-tung"}, "edited": false, "score": 0, "creation_date": 1474548485, "post_id": 39631169, "comment_id": 66582659, "body": "Also I tried to up vote your post but do not have enough reputation yet"}, {"owner": {"reputation": 21, "user_id": 6860997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8896b16c342a780901d63eeb35528d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Tung", "link": "https://stackoverflow.com/users/6860997/jeremy-tung"}, "edited": false, "score": 0, "creation_date": 1474548672, "post_id": 39631169, "comment_id": 66582815, "body": "And last thing, I don&#39;t know if it would be considered going off topic as is less of a precise question, but I thought my code might have been &quot;a spider&#39;s web&quot; perhaps not just in terms of memory allocation and freeing. If anyone has any other pointers about how to improve I would be very appreciative again!"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 1, "last_activity_date": 1474523375, "creation_date": 1474523375, "answer_id": 39631169, "question_id": 39627337, "link": "https://stackoverflow.com/questions/39627337/writing-a-word-puzzle-solver-and-getting-segmentation-fault-freeing-heap-memory/39631169#39631169", "title": "Writing a word puzzle solver and getting segmentation fault freeing heap memory", "body": "<p>Your code is quite a spider's web of memory allocation and freeing.  I've reworked it so the memory allocation make a little more sense (to me, anyway.)  Having a subroutine free memory of its caller is odd -- the opposite is OK, having a caller free the return result of a subroutine.</p>\n\n<p>Although the basic case (exact match for word in dictionary) seems to work, I can't say I was able to test the other possibilities so this code may need more debugging.  But it's not complaining about memory errors:</p>\n\n<pre><code>/**\n * Program to solve word puzzles from the TV show Countdown. \n * Asks for 9 letters for input and then prints out the\n * maximum score and an example word of that score\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n/**\n uses recursion to iterate over combinations of size \"length\" from \n data[] of size \"lengthData.\" Stores combinations generated in\n combination[] and permutations in permutation[]. For each combination\n calls checkPermutations to iterate over all permutations\n of the combination checking against a dictionary for word matches \n returning true if a match is found\n */\nbool checkForWords(char data[], int lengthData, int length, char combination[], int lengthCombination, char permutation[]);\n\n/**\n * takes in an array - (in practice combination[] from main()) and\n * iterates through all the permutations of the array storing\n * generated permutations in permutation[] by using recursion. For \n * each checks against a dictionary for word match. Returns true\n * when match is found\n */\nbool checkPermutations(char data[], int lengthData, char permutation[], int lengthPermutation);\n\n/**\n * takes an array of some length and an index and then returns a\n * pointer to an array on the heap that is the same but with the\n * elements at the index and to the left removed and then remaining \n * elements \"shifted down\"\n */\nchar *removeLeftOfIndex(char data[], int lengthData, int index);\n\n/**\n * takes an array of some length and index position and returns a\n * pointer to an array on the heap that has the element removed\n * and remaining elements \"shifted down\"\n */\nchar *removeElementAtIndex(char data[], int lengthData, int index);\n\n#define LETTER_COUNT (9)\n\nint main(void)\n{\n    char letters[LETTER_COUNT];\n\n    // getting letters\n    for (int i = 0; i &lt; LETTER_COUNT; i++)\n    {\n        printf(\"Please enter letter %i: \", i + 1);\n        letters[i] = GetChar();\n    }\n\n    // formatting\n    printf(\"\\n\");\n\n    bool success = false;\n\n    char *data = malloc(LETTER_COUNT);\n    char *permutation = malloc(LETTER_COUNT + 1);\n    char *combination = malloc(LETTER_COUNT);\n\n    // iterating over the length of word to look for starting at 9 and decrementing\n    for (int i = LETTER_COUNT; i &gt; 0; i--)\n    {\n        (void) strncpy(data, letters, LETTER_COUNT);\n\n        // checks to see if there is a word of length i\n        if (checkForWords(data, LETTER_COUNT, i, combination, i, permutation))\n        {\n            printf(\"Max score: %i\\nExample word: %s\\n\", i, permutation);\n            success = true;\n            break;\n        }\n    }\n\n    if (!success)\n    {\n        printf(\"Max score: 0\\nNo words can be made\\n\");\n    }\n\n    free(data);\n    free(permutation);\n    free(combination);\n\n    return EXIT_SUCCESS;\n}\n\nbool checkForWords(char data[], int lengthData, int length, char combination[], int lengthCombination, char permutation[])\n{\n    // base recursive case\n    if (length == 0)\n    { \n        // checks for permutations for the fixed combination\n        return checkPermutations(combination, lengthCombination, permutation, lengthCombination);\n    }\n\n    // generating combination by fixing one element and the recursively generating and checking\n    for (int j = 0; j &lt;= lengthData - length; ++j)\n    { \n        // fixes one element\n        combination[lengthCombination - length] = data[j];\n\n        // recursive part\n        char *reduced = removeLeftOfIndex(data, lengthData, j);\n        if (checkForWords(reduced, lengthData - j - 1, length - 1, combination, lengthCombination, permutation))\n        {\n            free(reduced);\n            return true;\n        }\n        free(reduced);\n    }\n\n    return false;\n}\n\nbool checkPermutations(char data[], int lengthData, char permutation[], int lengthPermutation)\n{\n    // base recursive case\n    if (lengthData == 0)\n    { \n        // null character for printing string later\n        permutation[lengthPermutation] = '\\0';\n\n        // checking against dictionary - make this much faster with binary search!!!!\n        FILE* dictionary= fopen(\"/usr/share/dict/words\", \"r\");\n        char word[64];\n\n        while (fgets(word, sizeof(word), dictionary) != NULL)\n        { \n            // checks to see if match\n            if (strncmp(permutation, word, lengthPermutation) == 0)\n            { \n                fclose(dictionary);\n                return true;\n            }\n        }\n\n        // not in dictionary\n        fclose(dictionary);\n        return false;\n    }\n\n    // generating permutations and checking for words by fixing one element and then using recursion.\n    for (int j = 0; j &lt; lengthData; j++)\n    { \n        // fixing element\n        permutation[lengthPermutation - lengthData] = data[j];\n\n        // recursive part\n        char *reduced = removeElementAtIndex(data, lengthData, j);\n        if (checkPermutations(reduced, lengthData - 1, permutation, lengthPermutation))\n        {\n            free(reduced);\n            return true;\n        }\n        free(reduced);\n    }\n\n    return false;\n}\n\nchar *removeLeftOfIndex(char data[], int lengthData, int index)\n{ \n    // allocating heap memory\n    char *newData = malloc(lengthData - index - 1);\n\n    // loop to copy relevant parts\n    for (int j = 0; j &lt; lengthData - index - 1; j++)\n    {\n        newData[j] = data[j + index + 1];\n    }\n\n    return newData;\n}\n\nchar *removeElementAtIndex(char data[], int lengthData, int index)\n{ \n    // allocating heap memory\n    char *newData = malloc(lengthData - 1);\n\n    // loops to copy relevant parts\n    for (int i = 0; i &lt; index; i++)\n    {\n        newData[i] = data[i];\n    }\n\n    for (int i = index; i &lt; lengthData - 1; i++)\n    {\n        newData[i] = data[i + 1];\n    }\n\n    return newData;\n}\n</code></pre>\n\n<p>Good luck and I hope this helps!</p>\n"}], "owner": {"reputation": 21, "user_id": 6860997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8896b16c342a780901d63eeb35528d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Tung", "link": "https://stackoverflow.com/users/6860997/jeremy-tung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 39631169, "answer_count": 1, "score": 1, "last_activity_date": 1476666301, "creation_date": 1474495803, "last_edit_date": 1476666301, "question_id": 39627337, "link": "https://stackoverflow.com/questions/39627337/writing-a-word-puzzle-solver-and-getting-segmentation-fault-freeing-heap-memory", "title": "Writing a word puzzle solver and getting segmentation fault freeing heap memory", "body": "<p>I am having some trouble with heap memory. I am writing some code in C to solve word puzzles - (from a game called Countdown here in the UK). The game is that you are given 9 letters and the goal is to make the longest word you can. </p>\n\n<p>My code works (although I haven't fully tested it) if I comment out all the calls to free() but when I put the free calls in I get a segmentation fault. I have run valgrind and get error messages like \"Address 0x9cbe627 is 7 bytes inside a block of size 9 free'd\" and \"invalid read of size 1.\" I have tried looking online to find out about this and I still don't understand. </p>\n\n<p>Can anyone take a look and explain what is going on? (Code given below) I would be very appreciative!</p>\n\n<pre><code>/**\n * Program to solve word puzzles from the TV show Countdown. Asks for 9 \n * letters for input and then prints out the\n * maximum score and an example word of that score\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;string.h&gt;\n\n/*\n uses recursion to iterate over combinations of size \"length\" from \n data[] of size \"lengthData.\" Stores combinations generated in\n combination[] and permutations in permutation[]. For each combination  \n calls checkPermutations to iterate over all permutations\n of the combination checking against a dictionary for word matches   \n returning true if a match is found\n */\nbool checkForWords(char data[], int lengthData, int length, char  \n                   combination[], int lengthCombination, char permutation[]);\n\n/**\n  * takes in an array - (in practice combination[] from main()) and  \n  * iterates through all the permutations of the array storing\n  * generated permutations in permutation[] by using recursion. For   \n  * each checks against a dictionary for word match. Returns true\n  * when match is found\n  */\nbool checkPermutations(char data[], int lengthData, char permutation[],  \n                       int lengthPermutation);\n\n/**\n * takes an array of some length and an index and then retruns a  \n * pointer to an array on the heap that is the same but with the\n * elements at the index and to the left removed and then remaining \n * elements \"shifted down\"\n */\nchar* removeLeftOfIndex(char data[], int lengthData, int index);\n\n/**\n * takes an array of some length and index position and returns a    \n * pointer to an array on the heap that has the element removed\n * and remaining elements \"shifted down\"\n */\nchar* removeElementAtIndex(char data[], int lengthData, int index);\n\nint main(void)\n{\nchar letters[9];\n\n// getting letters\nfor (int i = 0; i &lt; 9; i++)\n{\n    printf(\"Please enter letter %i: \", i + 1);\n    letters[i] = GetChar();\n}\n\n// formatting\nprintf(\"\\n\");\n\n\n// iterating over the length of word to look for starting at 9 and  \n   decrementing\nfor (int i = 9; i &gt; 0; i--)\n{\n    char* data = malloc(9 * sizeof(char));\n    char* permutation = malloc(10 * sizeof(char));\n    char* combination = malloc(9 * sizeof(char));\n\n    for (int j = 0; j &lt; 9; j++)\n        data[j] = letters[j];\n\n    // checks to see if there is a word of length i\n    if (checkForWords(data, 9, i, combination, i, permutation) == true)\n    {   \n        printf(\"Max score: %i\\nExample word: %s\\n\", i, permutation);\n        free(permutation);\n        return 0;\n    }\n\n    free(permutation);\n}\n\n// no words found\nprintf(\"Max score: 0\\nNo words can be made\\n\");\nreturn 0;\n}\n\nbool checkForWords(char data[], int lengthData, int length, char  \n                   combination[], int lengthCombination, char permutation[])\n{   \n// base recursive case\nif (length == 0)\n{   \n    free(data);\n\n    // checks for permutations for the fixed combination\n    return checkPermutations(combination, lengthCombination, permutation, lengthCombination);\n}\n\nelse\n{   \n    // generating combination by fixing one element and the recursively generating and checking\n    for (int j = 0; j &lt;= lengthData - length; ++j)\n    {   \n        // fixes one element\n        combination[lengthCombination - length] = data[j];\n\n        // recursive part\n        if (checkForWords(removeLeftOfIndex(data, lengthData, j), lengthData - j - 1, length - 1, combination, \n           lengthCombination, permutation) == true)\n           {\n                free(data);\n                return true;\n           }\n    }\n\n    free(data);\n    return false;\n}\n}\n\nbool checkPermutations(char data[], int lengthData, char permutation[],  int lengthPermutation)\n{   \n\n// base recursive case\nif (lengthData == 0)\n{   \n    // null character for printing string later\n    permutation[lengthPermutation] = '\\0';\n\n\n    // checking against dictionary - make this much faster with binary search!!!!\n    FILE* dictionary= fopen(\"/usr/share/dict/words\", \"r\");\n    char word[15];\n    while (fgets(word, sizeof(word), dictionary) != NULL)\n    {   \n        // checks to see if match\n        if (strncmp(permutation, word, lengthPermutation) == 0)\n        {   \n            fclose(dictionary);\n            free(data);\n            return true;\n        }\n\n    }\n\n    // not in dictionary\n    fclose(dictionary);\n\n\n    free(data);\n    return false;\n\n}\n\nelse\n{   \n    // generating permutations and checking for words by fixing one element and then using recursion.\n    for (int j = 0; j &lt; lengthData; j++)\n    {   \n        // fixing element\n        permutation[lengthPermutation - lengthData] = data[j];\n\n        // recursive part\n        if (checkPermutations(removeElementAtIndex(data, lengthData, j), lengthData - 1, permutation, lengthPermutation) == true)\n        {\n            free(data);\n            return true;\n        }\n\n    }\n    free(data);\n    return false;\n}\n}\n\nchar* removeLeftOfIndex(char data[], int lengthData, int index)\n{   \n// allocating heap memory\nchar* newData = malloc((lengthData - index - 1) * sizeof(char));\n\n// loop to copy relevant parts\nfor (int j = 0; j &lt; lengthData - index - 1; j++)\n    newData[j] = data[j + index + 1];\n\nreturn newData;\n}\n\nchar* removeElementAtIndex(char data[], int lengthData, int index)\n{   \n// allocating heap memory\nchar* newData = malloc((lengthData - 1) * sizeof(char));\n\n// loops to copy relevant parts\nfor (int i = 0; i &lt; index; i++)\n    newData[i] = data[i];\nfor(int i = index; i &lt; lengthData - 1; i++)\n    newData[i] = data[i + 1];\n\nreturn newData;\n\n}\n</code></pre>\n\n<p>It might also be worth mentioning that when I tried debugging that the segmentation fault appeared to be happening on a call to <code>malloc()</code> in the implementation of the last function in the code:</p>\n\n<pre><code>// allocating heap memory\nchar* newData = malloc((lengthData - 1) * sizeof(char));\n</code></pre>\n"}, {"tags": ["c", "time.h"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 6, "creation_date": 1474494414, "post_id": 39627055, "comment_id": 66559660, "body": "This is not a thing that can be done using only ISO C facilities.  On a Unix system you are looking for <a href=\"https://linux.die.net/man/2/getrusage\" rel=\"nofollow noreferrer\">getrusage</a>.  I don&#39;t know what the WIndows equivalent is."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1474494547, "post_id": 39627055, "comment_id": 66559730, "body": "I think you should read <a href=\"http://stackoverflow.com/q/5431941/10077\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474494569, "post_id": 39627055, "comment_id": 66559736, "body": "<code>while(!feof(fp)) </code> is wrong!"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1474523171, "post_id": 39627055, "comment_id": 66567035, "body": "Useful link : <a href=\"http://nadeausoftware.com/articles/2012/04/c_c_tip_how_measure_elapsed_real_time_benchmarking\" rel=\"nofollow noreferrer\">nadeausoftware.com/articles/2012/04/&hellip;</a>"}], "owner": {"reputation": 193, "user_id": 6079824, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a66858cc4efcc57b306294ea130a731f?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/6079824/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474510239, "creation_date": 1474494288, "last_edit_date": 1474510239, "question_id": 39627055, "link": "https://stackoverflow.com/questions/39627055/how-can-i-count-elapsed-real-user-and-sys-time-in-c", "title": "How can I count elapsed real,user and sys time in c?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n    int i;\n    FILE *fp;\n    int n = 0;\n    int sum = 0;\n    fp = fopen(\"test.txt\",\"r\");\n    /*count real, user, and sys time  */\n    clock_t start = clock();\n\n    while(!feof(fp)) \n    {\n        fscanf(fp, \"%d\", &amp;n);\n        sum += n;\n    }\n\n    if(sum &gt; 100)\n        printf(\"Great.\\n\");\n    else\n        printf(\"...\\n\");\n\n    printf(\"Sum: %d\", sum);\n    fclose(fp);\n    /*End...*/\n    clock_t end = clock();\n    float seconds = (float)(end - start) / CLOCKS_PER_SEC;\n    printf(\"\\nTime: %lf\\n\", seconds);  \n\n    return 0;\n}\n</code></pre>\n\n<p>In test.txt:</p>\n\n<blockquote>\n  <p>1 2 3 4 5 </p>\n  \n  <p>6 7 8 9 10</p>\n</blockquote>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>sh-4.3$ main<br>\n  ...<br>\n  Sum: 55<br>\n  Time: 0.000102</p>\n</blockquote>\n\n<p>My goal is to count time of real, user and sys for output.</p>\n\n<p>So, is this Time considered as real time?</p>\n\n<p>If yes, how to calculate user and sys time here?</p>\n"}, {"tags": ["c", "function", "variables"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1474493269, "post_id": 39626828, "comment_id": 66559136, "body": "That&#39;s not how functions work in C. Maybe try <a href=\"https://stackoverflow.com/documentation/c/1006/function-parameters\">stackoverflow.com/documentation/c/1006/function-parameters</a>"}, {"owner": {"reputation": 577, "user_id": 3034338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9324b483505227ab1839298f7159d1?s=128&d=identicon&r=PG&f=1", "display_name": "fernando.reyes", "link": "https://stackoverflow.com/users/3034338/fernando-reyes"}, "edited": false, "score": 0, "creation_date": 1474493382, "post_id": 39626828, "comment_id": 66559189, "body": "You seem a bit clueless. What part of the C class are you at? Do you know what a pointer and pass by reference is?"}, {"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474493740, "post_id": 39626828, "comment_id": 66559350, "body": "I am clueless. We haven&#39;t learned about pass by&#39;s and pointers yet."}, {"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474493921, "post_id": 39626828, "comment_id": 66559438, "body": "What needs to be fixed?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474494638, "post_id": 39626828, "comment_id": 66559769, "body": "C is strictly pass-by-value!"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474494483, "post_id": 39626971, "comment_id": 66559693, "body": "It won&#39;t let me do it this way."}], "tags": [], "owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "is_accepted": false, "score": 3, "last_activity_date": 1474493841, "creation_date": 1474493841, "answer_id": 39626971, "question_id": 39626828, "link": "https://stackoverflow.com/questions/39626828/uninitialized-variables/39626971#39626971", "title": "Uninitialized variables", "body": "<p>Wow,  a lot of bad stuff going on here.  Other than the uninitialized variables declared in main() (yes, the compiler is correct) C passes parameters by-value.  vi and vf parameters <em>values</em> are stored on the stack.  Your scanf then takes the address of that stack variable, assigns a value to it, the function returns, and the assigned values are gone - poof!  </p>\n\n<pre><code>void input_instructions(double vi, double vf)\n{\n    printf(\"Enter inital velocity=&gt;\");\n    scanf(\"%lf\", &amp;vi);\n    printf(\"Enter final velocity\");\n    scanf(\"%lf\", &amp;vf);\n\n    // function returns and input parameter values are gone.\n }\n</code></pre>\n\n<p>You want to pass in the pointer to your variables, like this:</p>\n\n<pre><code>void input_instructions(double *vi, double *vf)\n    {\n        printf(\"This program will calculate the rate of accleration and the time it takes/\"\n                \"the cyclist to come to rest\\n\");\n        printf(\"Enter inital velocity=&gt;\");\n        scanf(\"%lf\", vi);\n        printf(\"Enter final velocity\");\n        scanf(\"%lf\", vf);\n</code></pre>\n\n<p>and call from main() like this:</p>\n\n<pre><code>   input_instructions(&amp;vi, &amp;vf);\n</code></pre>\n\n<p>See <a href=\"http://www.c4learn.com/c-programming/c-function-parameter-passing/\" rel=\"nofollow\">examples</a> .</p>\n"}, {"comments": [{"owner": {"reputation": 102, "user_id": 6214619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b9eea28579184267566ee2b79ec548?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cross", "link": "https://stackoverflow.com/users/6214619/brian-cross"}, "edited": false, "score": 0, "creation_date": 1474495302, "post_id": 39627081, "comment_id": 66560032, "body": "Not sure why this was down voted. I suspect the global variable solution is the one the professor was looking for in this case since he indicated they haven&#39;t covered pass by reference yet."}], "tags": [], "owner": {"reputation": 21, "user_id": 6858331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0428b03eabd392cabe9d95655005617f?s=128&d=identicon&r=PG&f=1", "display_name": "Maco", "link": "https://stackoverflow.com/users/6858331/maco"}, "is_accepted": false, "score": 0, "last_activity_date": 1474494420, "creation_date": 1474494420, "answer_id": 39627081, "question_id": 39626828, "link": "https://stackoverflow.com/questions/39626828/uninitialized-variables/39627081#39627081", "title": "Uninitialized variables", "body": "<p>Declare vi,vf,acc and t as global variables (outside the main).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid input_instructions();\ndouble compute_acceleration();\ndouble vi;\ndouble vf;\ndouble acc;\ndouble t;\nint main()\n{\n\n\n\n    input_instructions();\n\n    acc = compute_acceleration();\n\n    t = (vf - vi)/acc;\n\n    printf(\"The constant acceleration of the cyclist is %.2f and it will take him %.2f minutes/seconds/\"\n            \"to come to rest with an initial velocity of 10mi/hr.\\n\", acc, t);\n}\n\nvoid input_instructions()\n{\n    printf(\"This program will calculate the rate of accleration and the time it takes/\"\n            \"the cyclist to come to rest\\n\");\n    printf(\"Enter inital velocity=&gt;\");\n    scanf(\"%lf\", &amp;vi);\n    printf(\"Enter final velocity\");\n    scanf(\"%lf\", &amp;vf);\n}\n\ndouble compute_acceleration()\n{\n    double t = 1;\n    double a = (vf-vi)/t;\n    return (a);\n}\n</code></pre>\n\n<p>Or you can use pointers and pass them to 'input_instructions' function. </p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474505173, "post_id": 39627085, "comment_id": 66562452, "body": "How do I make the variables of the two functions local to each other in the main function?"}, {"owner": {"reputation": 102, "user_id": 6214619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b9eea28579184267566ee2b79ec548?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cross", "link": "https://stackoverflow.com/users/6214619/brian-cross"}, "reply_to_user": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474555386, "post_id": 39627085, "comment_id": 66587637, "body": "Functions spin up their own variables that only they can use on the stack. They are not available to any other function and as soon as the function ends, they are cleaned up from the stack. Functions called by main don&#39;t even have access to the variables from main. The first solution I gave uses global, not local variables. Global variables are created on the heap, not the stack so they they are accessible across the solution."}, {"owner": {"reputation": 102, "user_id": 6214619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b9eea28579184267566ee2b79ec548?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cross", "link": "https://stackoverflow.com/users/6214619/brian-cross"}, "reply_to_user": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474555493, "post_id": 39627085, "comment_id": 66587721, "body": "The second solution uses pass by reference. New variables are still spun up inside the functions called by main, but they pass into them (through the parameters) the memory locations on the stack for the values in main.This enable you to make changes that affect parts of the stack you don&#39;t normally have access to."}], "tags": [], "owner": {"reputation": 102, "user_id": 6214619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b9eea28579184267566ee2b79ec548?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cross", "link": "https://stackoverflow.com/users/6214619/brian-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1474494426, "creation_date": 1474494426, "answer_id": 39627085, "question_id": 39626828, "link": "https://stackoverflow.com/questions/39626828/uninitialized-variables/39627085#39627085", "title": "Uninitialized variables", "body": "<p>You are reading in the variables in your input_instructions function so they can't be \"passed in\". And since their memory is spun up inside the function, they are not accessible outside of it. </p>\n\n<p>One option for you is to change the variables vi and vf to global variables by declaring them outside of main,  do not bother having them in the signature of input_functions, and the rest will likely be fine. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Prototypes */\nvoid input_instructions();\ndouble compute_acceleration(double new_vi, double new_vf);\n\n/* Globals */\ndouble vi;\ndouble vf;\n\nint main()\n{\n</code></pre>\n\n<p>In this case, since you're passing globals around, you wouldn't even necessarily need to accept parameters on the compute_acceleration function either. I don't usually recommend globals but that seems to be the least of the issues you are dealing with. </p>\n\n<p>Another option is to initialize the variables vi and vf in main to 0, and then pass them by reference into the input_instructions so that their value can be changed by the function. </p>\n\n<p>for example:</p>\n\n<pre><code> void input_instructions(double *i, double *f);\n double compute_acceleration(double x, double y);\n\n\n int main()\n {\n     double vi = 0;\n     double vf = 0;\n     double acc = 0;\n     double t = 0;\n\n\n     input_instructions(&amp;vi, &amp;vf);\n     acc = compute_acceleration(vi,vf);\n</code></pre>\n\n<p>I've change the name of the variables to help understand where the memory locations of variables exist and show how in your example, vi in main is actually a different variable than vi inside the called methods. </p>\n"}, {"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1474494823, "last_edit_date": 1474494823, "creation_date": 1474494438, "answer_id": 39627087, "question_id": 39626828, "link": "https://stackoverflow.com/questions/39626828/uninitialized-variables/39627087#39627087", "title": "Uninitialized variables", "body": "<p>In</p>\n\n<pre><code>void input_instructions(double vi, double vf)\n{\n.\n.\n}\n</code></pre>\n\n<p>The variables <code>vi</code> are <code>vf</code> are local to the function and have no bearing on similarly named variables in the <code>main()</code> function. In other words they have <code>function-scope</code> and they cease to exist after the function returns.</p>\n\n<p>What you should've been doing is :</p>\n\n<pre><code>input_instructions(&amp;vi,&amp;vf); // pass the address in the main()\n</code></pre>\n\n<p>and rewrite the function as :</p>\n\n<pre><code>void input_instructions(double *vi, double *vf) // Using pointers\n{\n    printf(\"This program will calculate the rate of accleration and the time it takes/\"\n            \"the cyclist to come to rest\\n\");\n    printf(\"Enter inital velocity=&gt;\");\n    scanf(\"%lf\", vi); // Hmm, you're changing the value in the main()\n    printf(\"Enter final velocity\");\n    scanf(\"%lf\", vf); // Note no '&amp;' since we're dealing with pointers.\n}\n</code></pre>\n\n<p>Here persistent changes are made to <code>main()</code>'s <code>vf</code> and <code>vi</code> using the the formal arguments <code>*vf</code> and <code>*vi</code> of the function <code>input_instructions</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1474494823, "creation_date": 1474493199, "question_id": 39626828, "link": "https://stackoverflow.com/questions/39626828/uninitialized-variables", "title": "Uninitialized variables", "body": "<p>I am trying to write two functions, one that takes input the other calculates acceleration. The compiler is telling me that my variables are uninitialized but they should have values from the input. What am I doing wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid input_instructions(double vi, double vf);\ndouble compute_acceleration(double vi, double vf);\n\nint main()\n{\n    double vi;\n    double vf;\n    double acc;\n    double t;\n\n\n    input_instructions(vi, vf);\n\n    acc = compute_acceleration(vi,vf);\n\n    t = (vf - vi)/acc;\n\n    printf(\"The constant acceleration of the cyclist is %.2f and it will take him %.2f minutes/seconds/\"\n            \"to come to rest with an initial velocity of 10mi/hr.\\n\", acc, t);\n}\n\nvoid input_instructions(double vi, double vf)\n{\n    printf(\"This program will calculate the rate of accleration and the time it takes/\"\n            \"the cyclist to come to rest\\n\");\n    printf(\"Enter inital velocity=&gt;\");\n    scanf(\"%lf\", &amp;vi);\n    printf(\"Enter final velocity\");\n    scanf(\"%lf\", &amp;vf);\n}\n\ndouble compute_acceleration(double vi, double vf)\n{\n    double t = 1;\n    double a = (vf-vi)/t;\n    return (a);\n}\n</code></pre>\n"}, {"tags": ["c", "switch-statement", "unions"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1474492841, "post_id": 39626730, "comment_id": 66558933, "body": "The first thing that will get you to problems is your code formatting."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474492966, "post_id": 39626730, "comment_id": 66558993, "body": "<code>case &#39;H&#39;:</code> is missing <code>break</code> statement ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474493301, "post_id": 39626730, "comment_id": 66559156, "body": "<code>(convert_func)toupper</code> probably leads to undefined behaviour. To confirm this please show the definition of <code>convert_func</code>"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 1, "creation_date": 1474493302, "post_id": 39626730, "comment_id": 66559158, "body": "What is <code>convert_func</code>?  That you seem to need to explicitly cast <code>toupper</code> is a strong indication that you&#39;re dong something wrong."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1474494911, "post_id": 39626730, "comment_id": 66559896, "body": "<code>check(buffer)==false</code> is better written as <code>! check(buffer)</code>. Don&#39;t compare boolean values for equality to <code>false</code> or <code>true</code>. Just test them directly. That&#39;s what boolean values are for, after all."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6860678, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154434322986346/picture?type=large", "display_name": "Elias Sannefur", "link": "https://stackoverflow.com/users/6860678/elias-sannefur"}, "edited": false, "score": 0, "creation_date": 1474506071, "post_id": 39627035, "comment_id": 66562611, "body": "I see, never thought that toupper would be of type int, rookie-mistake. But now i used your magical function and it completed my program so thanks a lot man, really appreciate it!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1474494174, "creation_date": 1474494174, "answer_id": 39627035, "question_id": 39626730, "link": "https://stackoverflow.com/questions/39626730/switch-statement-using-a-union-in-c-got-me-into-problems-whats-wrong-with-my/39627035#39627035", "title": "Switch statement using a union in C, got me into problems, what&#39;s wrong with my code?", "body": "<p>When <code>convert</code> points to <code>toupper()</code>, this line ...</p>\n\n<pre><code>answer_t result = convert(buffer);\n</code></pre>\n\n<p>... definitely produces undefined behavior, because <code>toupper()</code> takes a parameter of type <code>int</code> and returns an <code>int</code>, but you are passing a <code>char *</code> and assuming that the return value is an <code>answer_t</code>.  If you prefer, you can say that it is the cast of <code>toupper</code> to <code>convert_func</code> that is ultimately responsible for this UB.</p>\n\n<p>If you need a function that returns an <code>answer_t</code>, then you'll need to wrap <code>toupper()</code>.  It's unclear exactly what form a <code>convert_func</code> is supposed to have, but this would be compatible with the way you are trying to use it:</p>\n\n<pre><code>answer_t toupper_wrap(char *buffer) {\n    return (answer_t) { .d = toupper(*buffer) };\n}\n</code></pre>\n\n<p>Pass a pointer to that instead of a pointer directly to <code>toupper()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6860678, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154434322986346/picture?type=large", "display_name": "Elias Sannefur", "link": "https://stackoverflow.com/users/6860678/elias-sannefur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490544039, "creation_date": 1474492638, "last_edit_date": 1490544039, "question_id": 39626730, "link": "https://stackoverflow.com/questions/39626730/switch-statement-using-a-union-in-c-got-me-into-problems-whats-wrong-with-my", "title": "Switch statement using a union in C, got me into problems, what&#39;s wrong with my code?", "body": "<p>I'm almost done with my assignment where I was supposed to build a program where the user interacts with a warehouseprogram, where you can delete, add, edit... However in my <code>event_loop</code> function, no matter what input I type to choose from the menu goes to default in my switch statement. I'm using a uniontype answer_t in my ask_question_menu, so maybe it has something to do with the return from that function that I want to be a single char. Can someone tell me what the heck is going on here?</p>\n\n<p>Very thankful for help!</p>\n\n<pre><code>typedef union {\n    int   i;\n    float f;\n    char *s;\n    char d;\n} answer_t;\n\nchar ask_question_menu(char *question){\n    answer_t answer = ask_question(question, correct_input, (convert_func) toupper);\n    return answer.d;\n}\n//my general function for user input follows here...\nanswer_t ask_question(char *question, check_func check, convert_func convert)\n{\n    int buffersize = 50;\n    char buffer[buffersize];\n\n    do\n        {\n            printf(\"%s\\n\", question);\n            read_string(buffer, buffersize);\n        }\n\n    while(check(buffer)==false);\n\n    answer_t result = convert(buffer);\n\n    return result;\n}\n\nint event_loop(item_t *db, int *db_size)\n{\n    while(true){\n        char choise = ask_question_menu(\" [L]\u00e4gga till en vara\\n [T]a bort en vara\\n [R]edigera en vara\\n \u00c5n[g]ra senaste \u00e4ndringen\\n Lista [h]ela varukatalogen\\n [A]vsluta\\n\");\n\n        switch(choise)\n            {\n            case 'L':\n                add_item_to_db(db, db_size);\n                break;\n            case 'T':\n                remove_item_from_db(db, db_size);\n                break;\n            case 'R':\n                edit_db(db, *db_size);\n                break;\n            case 'G':\n                printf(\"Not yet implemented\\n\");\n                break;\n            case 'H':\n                list_db(db, *db_size);\n            case 'A':\n                return 0;\n                break;\n            default:\n                printf(\"Wrong input\\n\");\n                break;\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "parallel-processing", "synchronization"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474491798, "post_id": 39626253, "comment_id": 66558394, "body": "I don&#39;t think I understand well enough what you are attempting to do.  What is supposed to be accomplished by accepting connections and then leaking them?  How does any of this produce any synchronization?  Or have you cut out some important bits that feed your synchronization and non-resource-leakage objectives?"}, {"owner": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474525411, "post_id": 39626253, "comment_id": 66568072, "body": "The idea is that the first process will wait at <code>pthread_join</code> until the others have reach a given point. I only use sockets for synchronizing them, I am not interested in communicating the processes."}], "answers": [{"comments": [{"owner": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "edited": false, "score": 0, "creation_date": 1474525107, "post_id": 39626682, "comment_id": 66567905, "body": "So, even though a process connects and the <code>accept()</code> has not been issued yet, the client connection will remain in the backlog, right? Regarding the bugs, you are right, I have too many <code>socket()</code> calls. However, I cannot close the socket after <code>accept()</code> because I only have one socket opened (it is only one thread that performs the <code>listener()</code>. Should I create a thread for each <code>accept()</code>? Thank you."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "edited": false, "score": 0, "creation_date": 1474527491, "post_id": 39626682, "comment_id": 66569094, "body": "@SergioIserte yes, a connection remains in the backlog until removed by <code>accept()</code>. If you intend to service multiple clients at a time, you will have to create a new thread/process per accepted client (not per call to <code>accept()</code> itself), or otherwise multiplex multiple clients in a thread (such as making the sockets non-blocking and then use <code>select()</code>/<code>epoll()</code> to manage them), so you can go back to <code>accept()</code> regularly."}, {"owner": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "edited": false, "score": 0, "creation_date": 1474529325, "post_id": 39626682, "comment_id": 66570196, "body": "Sorry, I am not sure about what you mean with <i>accepted client</i>. What I was refering, was to create <code>n</code> threads each one calling an <code>accept()</code>. What&#39;s your point? Thank you for your time."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "edited": false, "score": 0, "creation_date": 1474531473, "post_id": 39626682, "comment_id": 66571556, "body": "@SergioIserte a connection is &quot;accepted&quot; when <code>accept()</code> returns it. You can&#39;t call <code>accept()</code> from <code>n</code> threads, it should only be called by one thread. You need to accept a client and delegate the workload for that client, and then go back to <code>accept()</code> to accept the next client. Either 1) call <code>accept()</code> in a loop and pass each client to another thread, or 2) use <code>select()</code>/<code>epoll()</code> to monitor multiple socets ay a time to be notified when to call <code>accept()</code>/<code>recv()</code>/<code>send()</code> for them. This should be covered by any decent socket book/tutorial."}, {"owner": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "edited": false, "score": 0, "creation_date": 1474535551, "post_id": 39626682, "comment_id": 66573996, "body": "Ok, now I get it. However, in my question is detailed your first option (except for the later communications, which I don&#39;t have) and it returns a <i>connection refused</i>. Moreover, I&#39;m closing the socket as soon as I don&#39;t need it (just after all the <code>accepts()</code> have been connected. We are at the beggining again :(  Thank you."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "edited": false, "score": 0, "creation_date": 1474557825, "post_id": 39626682, "comment_id": 66589357, "body": "@SergioIserte you are closing the listening socket, not the client sockets. And I already addressed the refusal error (your clients are exceeding the backlog)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1474493129, "last_edit_date": 1474493129, "creation_date": 1474492381, "answer_id": 39626682, "question_id": 39626253, "link": "https://stackoverflow.com/questions/39626253/socket-connection-refused-due-to-a-burst-of-connections/39626682#39626682", "title": "Socket connection refused due to a burst of connections", "body": "<blockquote>\n  <p>Now, the problem I have is when I have a lot of processes trying to connect at the same time to the server, some of them are throwing connection refused errors.</p>\n</blockquote>\n\n<p>A listening TCP socket has a backlog of pending connections.  The 2nd parameter of <code>listen()</code> specifies how many connections are allowed to be in the backlog queue before they are accepted.  If a new client tries to connect when the backlog is full, the client is refused.  There is nothing the client or server can do about that.  It is the client's responsibility to detect the error and re-connect at a later time.</p>\n\n<p>Your <code>listener()</code> is accepting clients until it reaches a designated number of connections, but you are also using that same number for the listen backlog queue size.  The number of active connections and the number of pending connections are two different things.  If you are expecting a lot of clients to connect at the same time, you need a large backlog size to avoid the refusal errors.  But that backlog should be sized proportional to the traffic you are expecting.  If you have 1000 clients, but they connect only 20 at a time, you would set the backlog to, say, 25, not 1000.</p>\n\n<p>Your <code>listener()</code> has some other logic bugs.  It is calling <code>socket()</code> twice and saving the two sockets to the same <code>sockfd</code> variable, so it is leaking the first socket.  You need to remove the second call to <code>socket()</code> (the one just before <code>setsockopt()</code>).  You are also leaking the sockets that <code>accept()</code> returns.  You need to <code>close()</code> an accepted socket after you are doing using it.</p>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 4262207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iHUQgHLj_t0/AAAAAAAAAAI/AAAAAAAAACM/nE_ak8mRoJE/photo.jpg?sz=128", "display_name": "lolololol ol", "link": "https://stackoverflow.com/users/4262207/lolololol-ol"}, "is_accepted": false, "score": 0, "last_activity_date": 1474492721, "last_edit_date": 1474492721, "creation_date": 1474492394, "answer_id": 39626684, "question_id": 39626253, "link": "https://stackoverflow.com/questions/39626253/socket-connection-refused-due-to-a-burst-of-connections/39626684#39626684", "title": "Socket connection refused due to a burst of connections", "body": "<p>Just make your server concurrent by calling fork to spawn a child for each client.  Easiest way to do it, IMO.  Avoids threading and will stop the connection refused errors.</p>\n\n<p>EDIT:  You could also look into pre-forking your server.  You'd have to research how you want to handle locking around accept, though (if you're locking at all).</p>\n"}], "owner": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 39626682, "answer_count": 2, "score": 0, "last_activity_date": 1474535669, "creation_date": 1474490574, "last_edit_date": 1474535669, "question_id": 39626253, "link": "https://stackoverflow.com/questions/39626253/socket-connection-refused-due-to-a-burst-of-connections", "title": "Socket connection refused due to a burst of connections", "body": "<p>I am using sockets in order to synchronize several remote processes.</p>\n\n<p>The idea is that a process creates a pthread which manages the server side, just like that:</p>\n\n<pre><code>void *listener(void * in) {\n  int sockfd;\n  socklen_t clilen;\n  struct sockaddr_in serv_addr, cli_addr;\n  int n = *((int *) in);\n\n  sockfd = socket(AF_INET, SOCK_STREAM, 0);\n  if (sockfd &lt; 0)\n      error(\"ERROR opening socket\");\n\n  int option = 1;\n  setsockopt(sockfd, SOL_SOCKET, (SO_REUSEPORT | SO_REUSEADDR), (char*) &amp;option, sizeof (option));\n  bzero((char *) &amp;serv_addr, sizeof (serv_addr));\n  serv_addr.sin_family = AF_INET;\n  serv_addr.sin_addr.s_addr = INADDR_ANY;\n  serv_addr.sin_port = htons(PORT);\n\n  if (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof (serv_addr)) &lt; 0)\n      error(\"ERROR on binding\");\n\n  if (listen(sockfd, n) &lt; 0)\n      error(\"ERROR when listening\");\n\n  clilen = sizeof (cli_addr);\n  int cnt = 0;\n  while (cnt &lt; n) {\n      int newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen);\n      if (newsockfd &lt; 0) {\n          error(\"ERROR on accept\");\n      }\n      cnt++;\n  }\n  close(sockfd);\n  return 0;\n}\n</code></pre>\n\n<p>Meanwhile, the other processes would execute:</p>\n\n<pre><code>int sockfd;\nstruct sockaddr_in serv_addr;\nstruct hostent *server;\n\nsockfd = socket(AF_INET, SOCK_STREAM, 0);\nif (sockfd &lt; 0)\n  error(\"ERROR opening socket\");\n\nserver = gethostbyname(_managementHost); //managementHost);\nif (server == NULL)\n  error(\"ERROR, no such host\\n\");\n\nbzero((char *) &amp;serv_addr, sizeof (serv_addr));\nserv_addr.sin_family = AF_INET;\nbcopy((char *) server-&gt;h_addr, (char *) &amp;serv_addr.sin_addr.s_addr, server-&gt;h_length);\nserv_addr.sin_port = htons(PORT);\n\nif (connect(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof (serv_addr)) &lt; 0)\n  error(\"ERROR connection\");\n\nclose(sockfd);\n</code></pre>\n\n<p>Now, the problem I have is when I have a lot of processes trying to connect at the same time to the server, some of them are throwing <em>connection refused</em> errors.</p>\n\n<p>I guess that is because the accepts may not be ready... In fact, I have read that it could happen, but I have not found my specific case.</p>\n\n<p>Could anyone shed light on the matter?</p>\n\n<p>A possible solution that occurs to me, is to create a thread for each accept, but I would prefer to avoid it.</p>\n\n<p>Thank you.</p>\n\n<p>EDIT: corrected double initialization of socket in the server. Thanks to @Remy Lebeau.</p>\n"}, {"tags": ["python", "c", "numpy"], "comments": [{"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474564917, "post_id": 39626233, "comment_id": 66593828, "body": "the 2nd guess seems wrong. numpy seems to use multi-index."}], "answers": [{"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1474496041, "post_id": 39626641, "comment_id": 66560301, "body": "<code>np.lib.stride_tricks.broadcast_arrays</code> is better spelt <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.broadcast_arrays.html\" rel=\"nofollow noreferrer\"><code>np.broadcast_arrays</code></a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 3, "creation_date": 1474496458, "post_id": 39626641, "comment_id": 66560435, "body": "Though the whole <code>stride_tricks.py</code> file is good reading if you need to dig deeper."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474556720, "post_id": 39626641, "comment_id": 66588601, "body": "I try to read the nditer c code, but don&#39;t quite understand it yet. Does nditer sacrifice performance? Does niter treat the nested loop as a single loop with variable stride?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1474560837, "post_id": 39626641, "comment_id": 66591545, "body": "I haven&#39;t dug into the <code>nditer</code> code; with all the options it is complicated.  But I&#39;ve added some examples that show how it iterates.  <code>external_loop</code> is needed to get the best speed improvement."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 6, "last_activity_date": 1474562852, "last_edit_date": 1495540307, "creation_date": 1474492158, "answer_id": 39626641, "question_id": 39626233, "link": "https://stackoverflow.com/questions/39626233/how-did-numpy-implement-multi-dimensional-broadcasting/39626641#39626641", "title": "How did numpy implement multi-dimensional broadcasting?", "body": "<p>To really get into broadcasting details you need to understand array shape and strides.  But a lot of the work is now implemented in <code>c</code> code using <code>nditer</code>.  You can read about it at <a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html\" rel=\"nofollow noreferrer\">http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html</a>.  <code>np.nditer</code> gives you access to the tool at the Python level, but its real value comes when used with <code>cython</code> or your own <code>c</code> code.</p>\n\n<p><code>np.lib.stride_tricks</code> has functions that let you play with strides.  One of its functions helps visualize how arrays are broadcasted together.  In practice the work is done with <code>nditer</code>, but this function may help understand the action:</p>\n\n<pre><code>In [629]: np.lib.stride_tricks.broadcast_arrays(np.arange(6).reshape(2,3), \n                                  np.array([[1],[2]]))\nOut[629]: \n[array([[0, 1, 2],\n        [3, 4, 5]]), \n array([[1, 1, 1],\n        [2, 2, 2]])]\n</code></pre>\n\n<p>Note that, effectively the 2nd array has been replicated to match the 1st's shape.  But the replication is done with stride tricks, not with actual copies.</p>\n\n<pre><code>In [631]: A,B=np.lib.stride_tricks.broadcast_arrays(np.arange(6).reshape(2,3), \n                                      np.array([[1],[2]]))\nIn [632]: A.shape\nOut[632]: (2, 3)\nIn [633]: A.strides\nOut[633]: (12, 4)\nIn [634]: B.shape\nOut[634]: (2, 3)\nIn [635]: B.strides\nOut[635]: (4, 0)         \n</code></pre>\n\n<p>It's this <code>(4,0)</code> strides that does the replication without copy.</p>\n\n<p>=================</p>\n\n<p>Using the python level <code>nditer</code>, here's what it does during broadcasting.</p>\n\n<pre><code>In [1]: A=np.arange(6).reshape(2,3)\nIn [2]: B=np.array([[1],[2]])\n</code></pre>\n\n<p>The plain nditer feeds elements one set at a time\n<a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html#using-an-external-loop\" rel=\"nofollow noreferrer\">http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html#using-an-external-loop</a></p>\n\n<pre><code>In [5]: it =np.nditer((A,B))\nIn [6]: for a,b in it:\n   ...:     print(a,b)\n\n0 1\n1 1\n2 1\n3 2\n4 2\n5 2\n</code></pre>\n\n<p>But when I turn <code>extenal_loop</code> on, it iterates in chunks, here respective rows of the broadcasted arrays:</p>\n\n<pre><code>In [7]: it =np.nditer((A,B), flags=['external_loop'])\nIn [8]: for a,b in it:\n   ...:     print(a,b)\n\n[0 1 2] [1 1 1]\n[3 4 5] [2 2 2]\n</code></pre>\n\n<p>With a more complex broadcasting the <code>external_loop</code> still produces 1d arrays that allow simple <code>c</code> style iteration:</p>\n\n<pre><code>In [13]: A1=np.arange(24).reshape(3,2,4)\nIn [18]: it =np.nditer((A1,np.arange(3)[:,None,None]), flags=['external_loop'])\nIn [19]: while not it.finished:\n    ...:     print(it[:])\n    ...:     it.iternext()\n    ...:     \n(array([0, 1, 2, 3, 4, 5, 6, 7]), array([0, 0, 0, 0, 0, 0, 0, 0]))\n(array([ 8,  9, 10, 11, 12, 13, 14, 15]), array([1, 1, 1, 1, 1, 1, 1, 1]))\n(array([16, 17, 18, 19, 20, 21, 22, 23]), array([2, 2, 2, 2, 2, 2, 2, 2]))\n</code></pre>\n\n<p>Note that while <code>A1</code> is (3,2,4), the nditer loop yields 3 steps (1st axis) with 2*4 length elements.  </p>\n\n<p>I found in another <code>cython/nditer</code> SO question that the first approach did not produce much of a speed improvement, but the 2nd helped a lot.  In <code>c</code> or <code>cython</code> the <code>external_loop</code> case would do simple low level iteration.</p>\n\n<p>===============</p>\n\n<p>If I broadcast on the 1 and 3rd axis, the iterator takes 2*3 steps (effectively flattening the 1st 2 axes, and feeding the 3rd):</p>\n\n<pre><code>In [20]: it =np.nditer((A1,np.arange(2)[None,:,None]), flags=['external_loop'])\nIn [21]: while not it.finished:\n    ...:     print(it[:])\n    ...:     it.iternext()\n    ...:     \n(array([0, 1, 2, 3]), array([0, 0, 0, 0]))\n(array([4, 5, 6, 7]), array([1, 1, 1, 1]))\n(array([ 8,  9, 10, 11]), array([0, 0, 0, 0]))\n(array([12, 13, 14, 15]), array([1, 1, 1, 1]))\n(array([16, 17, 18, 19]), array([0, 0, 0, 0]))\n(array([20, 21, 22, 23]), array([1, 1, 1, 1]))\n</code></pre>\n\n<p>But with <code>buffered</code>, it iterates once, feeding me 2 1d arrays:</p>\n\n<pre><code>In [22]: it =np.nditer((A1,np.arange(2)[None,:,None]), flags=['external_loop','buffered'])\nIn [23]: while not it.finished:\n    ...:     print(it[:])\n    ...:     it.iternext()\n    ...:     \n(array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]), \n array([0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1]))\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/39058641/does-cython-offer-any-reasonably-easy-and-efficient-way-to-iterate-numpy-arrays\">Does Cython offer any reasonably easy and efficient way to iterate Numpy arrays as if they were flat?</a>\nhas some speed tests, showing that buffered external loop is fastest</p>\n\n<p><code>cython</code> translates this into fast simple <code>c</code> iteration:</p>\n\n<pre><code>for xarr in it:\n   x = xarr\n   size = x.shape[0]\n   for i in range(size):\n       x[i] = x[i]+1.0\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 2, "accepted_answer_id": 39626641, "answer_count": 1, "score": 5, "last_activity_date": 1474579525, "creation_date": 1474490524, "last_edit_date": 1474579525, "question_id": 39626233, "link": "https://stackoverflow.com/questions/39626233/how-did-numpy-implement-multi-dimensional-broadcasting", "title": "How did numpy implement multi-dimensional broadcasting?", "body": "<p>Memory (row major order):</p>\n\n<pre><code>[[A(0,0), A(0,1)]\n [A(1,0), A(1,1)]]\n\nhas this memory layout: \n[A(0,0), A(0,1), A(1,0), A(1,1)]\n</code></pre>\n\n<p>I guess the algorithm work like this in the following cases.</p>\n\n<p>Broadcasting Dimension is last dimension:</p>\n\n<pre><code>[[0, 1, 2, 3]         [[1]\n                  x\n [4, 5, 6, 7]]         [10]]\n\n   A (2 by 4)            B (2 by 1)\n\nIterate 0th dimensions of A and B simultaneously {\n    Iterate last dimension of A{\n        multiply;\n    } \n}\n</code></pre>\n\n<p>Broadcasting dimension is 0th dimension:</p>\n\n<pre><code>[[0, 1, 2, 3]   \n                  x    [[1,10,100,1000]]\n [4, 5, 6, 7]]\n\n   A (2 by 4)              B (1 by 4)\n\nIterate 0th dimension of A{\n    Iterate 1st dimensions of A and B simultaneously{\n        multiply;\n    }\n}\n</code></pre>\n\n<p>Question:</p>\n\n<ol>\n<li><p>How does numpy know which order of multiplication is the best.\n(reading memory in order is better than reading memory all over the place. but how did numpy figure that out?)</p></li>\n<li><p>What would numpy do if the arrays have more than two dimension</p></li>\n<li>What would numpy do if the broadcasting dimension is not the last dimension?</li>\n</ol>\n\n<p>2nd guess of what is going on:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main(void){\n    const int nA = 12;\n    const int nB = 3;\n    int A[nA];\n    int B[nB];\n    for(int i = 0; i != nA; ++i) A[i] = i+1;\n    for(int i = 0; i != nB; ++i) B[i] = i+1;\n    //dimension\n    int dA[] = {2,3,2};\n    int dB[] = {1,3,1};\n\n    int* pA = A;\n    int* pB = B;\n    int* pA_end = A + nA;\n    //is it possible to make the compiler\n    //generate the iA and sA?\n    int iB = 0;\n    int iB_max = 2;\n    int sB[] = {1,0};\n\n    while(pA != pA_end){\n        std::cout &lt;&lt; \"*pA, *pB: \" &lt;&lt; *pA &lt;&lt; \", \" &lt;&lt; *pB &lt;&lt;std::endl;\n        std::cout &lt;&lt; \"iB: \" &lt;&lt; iB &lt;&lt;std::endl;\n        *(pA) *= *(pB);\n        ++pA;\n        pB += sB[iB];\n        ++iB;\n        if (iB == iB_max) {iB = 0; pB = B;}\n    }\n\n    for(pA = A; pA != pA_end; ++pA){\n        std::cout &lt;&lt; *(pA) &lt;&lt; \", \";\n    }\n    std::cout &lt;&lt; std::endl;       \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474489945, "post_id": 39626042, "comment_id": 66557410, "body": "<code>printf(&quot;The array is sorted!...); return true;</code> That would do it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1474490112, "post_id": 39626042, "comment_id": 66557498, "body": "Delete <code>return true;</code>."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "edited": false, "score": 0, "creation_date": 1474490290, "post_id": 39626042, "comment_id": 66557600, "body": "In your first <code>for</code> loop leave <code>break;</code> and remove <code>return true</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1474490727, "post_id": 39626042, "comment_id": 66557827, "body": "<code>if ( values[i] &gt; values[i + 1] )</code> is a problem when <code>i</code> is <code>2</code>. It leads to UB."}], "answers": [{"tags": [], "owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "is_accepted": true, "score": 2, "last_activity_date": 1474490701, "last_edit_date": 1474490701, "creation_date": 1474490191, "answer_id": 39626139, "question_id": 39626042, "link": "https://stackoverflow.com/questions/39626042/for-loop-not-printing-array/39626139#39626139", "title": "For-loop not printing array", "body": "<p>Your <code>return true</code> after the array is sorted is popping out of the <code>main</code> function, so the print code at the bottom is never reached.</p>\n"}], "owner": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1474520287, "accepted_answer_id": 39626139, "answer_count": 1, "score": 1, "last_activity_date": 1474490701, "creation_date": 1474489818, "question_id": 39626042, "link": "https://stackoverflow.com/questions/39626042/for-loop-not-printing-array", "closed_reason": "Not suitable for this site", "title": "For-loop not printing array", "body": "<p>I have successfully sorted the <code>values</code>, but when trying to print them with the for-loop or printf at the end, the program does nothing. </p>\n\n<pre><code>int main(void){\n    int values[] = {23,19,1};\n    int size = 3;\n    int counter = 0;\n    int i;\n    int holder;\n\n    for(i = 0; i &lt; size; i++){\n        counter = 0;\n        if(values[i] &gt; values[i + 1]){\n            holder = values[i];\n            values[i] = values[i + 1];\n            values[i + 1] = holder;\n            counter = 1;\n            printf(\"index: %i = %i, index: %i = %i\\n\", i, values[i], i + 1, values[i + 1]);\n            printf(\"Sorting..\\n\");\n        }\n        if((i + 2) == size){\n            if(counter == 0){\n                printf(\"The array is sorted! %i, %i, %i\\n\", values[0], values[1], values[2]);\n                return true;\n                break;\n            }\n            else {\n                i = -1;\n            }\n        }\n    }\n\n    printf(\"%i\\n\", values[0]);\n\n    for(i = 0; i &lt; size; i++){\n        printf(\"%i\\n\", values[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The programs output is: </p>\n\n<pre><code>index: 0 = 19, index: 1 = 23\nSorting..\nindex: 1 = 1, index: 2 = 23\nSorting..\nindex: 0 = 1, index: 1 = 19\nSorting..\nThe array is sorted! 1, 19, 23\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2012", "visual-studio-2015"], "answers": [{"tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 1, "last_activity_date": 1474490910, "creation_date": 1474490910, "answer_id": 39626334, "question_id": 39626009, "link": "https://stackoverflow.com/questions/39626009/visual-studio-2015-vs-2012/39626334#39626334", "title": "Visual Studio 2015 vs 2012", "body": "<p>In general, static libraries are not compatible between different versions of Visual Studio. </p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Visual_C%2B%2B#Compatibility\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Visual_C%2B%2B#Compatibility</a></p>\n\n<blockquote>\n  <p>The Visual C++ compiler ABI have historically changed between major\n  compiler releases. This is especially the case for STL containers,\n  where container sizes have varied a lot between compiler releases.\n  Microsoft therefore recommends against using C++ interfaces at module\n  boundaries when one wants to enable client code compiled using a\n  different compiler version. Instead of C++, Microsoft recommends using\n  C or COM interfaces, which are designed to have a stable ABI\n  between compiler releases.</p>\n</blockquote>\n\n<p>I have not specifically tried doing VS2015 -> VS2012, but going the other way definitely has some issues (VS2012/VS2013 -> VS2015). However, in VS2015, there are undocumented libraries (legacy_stdio_definitions.lib and legacy_stdio_wide_specifiers.lib) which attempt to mitigate some specific problems, but they aren't a catch-all for compatibility.</p>\n\n<p>The best solution is to compile the static library with the version of Visual Studio you intend to consume it in.</p>\n"}], "owner": {"reputation": 169, "user_id": 6138473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c7d2606df401ca6dfdf5c4766ec44b?s=128&d=identicon&r=PG&f=1", "display_name": "CS_EE", "link": "https://stackoverflow.com/users/6138473/cs-ee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474490910, "creation_date": 1474489683, "question_id": 39626009, "link": "https://stackoverflow.com/questions/39626009/visual-studio-2015-vs-2012", "title": "Visual Studio 2015 vs 2012", "body": "<ul>\n<li><p>Can a static library compiled in VS 2015 can be used in VS 2012? The C compiler of VS 2012 is very old. The most common problem I encounter is the variable declaration location. A variable has to be declared in the beginning of its scope in VS 2012.</p></li>\n<li><p>If there is such a compatibility then I just need to fix compilation errors in header files and call the functions from the library. Is that right?</p></li>\n</ul>\n"}, {"tags": ["c", "regex", "capture-group"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474488613, "post_id": 39625696, "comment_id": 66556653, "body": "what language are you using?"}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1474488661, "post_id": 39625696, "comment_id": 66556680, "body": "You may be re-inventing the wheel since most languages provide enough built-in means to parse URLs."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1474488664, "post_id": 39625696, "comment_id": 66556681, "body": "Better programmers than me (and maybe you) puzzled their head over the exact same question - use eg <a href=\"http://php.net/manual/en/function.parse-url.php\" rel=\"nofollow noreferrer\"><b><code>parse-url()</code></b></a> for <code>PHP</code> instead. For <code>C</code>: <a href=\"http://stackoverflow.com/questions/726122/best-ways-of-parsing-a-url-using-c\" title=\"best ways of parsing a url using c\">stackoverflow.com/questions/726122/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474488697, "post_id": 39625696, "comment_id": 66556704, "body": "@davidhu2000 language is C."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1474488799, "post_id": 39625696, "comment_id": 66556762, "body": "@Jan I&#39;m going to be using C (sorry for not tagging it, I&#39;ll do it now). But didn&#39;t even know about that PHP function but good to know, I do write most my applications in PHP."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1474488970, "post_id": 39625696, "comment_id": 66556886, "body": "@WiktorStribi\u017cew I&#39;ve looked but haven&#39;t seen any that handle all the different possible url formats from the list in the example."}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1474489177, "post_id": 39625696, "comment_id": 66556987, "body": "See <a href=\"http://stackoverflow.com/questions/726122/best-ways-of-parsing-a-url-using-c\" title=\"best ways of parsing a url using c\">stackoverflow.com/questions/726122/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1474489746, "post_id": 39625696, "comment_id": 66557301, "body": "@WiktorStribi\u017cew I mean I like how the <code>sscanf()</code> function works and I&#39;ll definitely use it, but I still need the pattern to extract into the capturing groups I have listed above."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "edited": false, "score": 0, "creation_date": 1474490363, "post_id": 39626111, "comment_id": 66557639, "body": "It only matched the 1st URL example, it also didn&#39;t return the right parts of the url in the specific capture groups."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "edited": false, "score": 0, "creation_date": 1474490398, "post_id": 39626111, "comment_id": 66557654, "body": "1. protocol 2. sub 3.domain 4.domain-extension 5.directory path 6. file name 7. file-extension"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "edited": false, "score": 0, "creation_date": 1474491261, "post_id": 39626111, "comment_id": 66558112, "body": "also <code>(com|net)</code> would work, but what I&#39;m really looking for is a universal way to get the domain-extension so regardless to what is between that (.) and the opening (/) of the path (com,net,co,etc..)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "edited": false, "score": 0, "creation_date": 1474491702, "post_id": 39626111, "comment_id": 66558341, "body": "nice! could you modify it to only return <code>&#47;path&#47;to&#47;</code> for the directory path (so removing the file name)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "edited": false, "score": 0, "creation_date": 1474491847, "post_id": 39626111, "comment_id": 66558422, "body": "I already fixed the <code>(com|net)</code> you can just replace with <code>(\\w+)</code> since it will stop on the (&#41; at the start of the path."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "edited": false, "score": 0, "creation_date": 1474493573, "post_id": 39626111, "comment_id": 66559276, "body": "You sir our a beast, I figured out the last piece I needed, if you want to add this to the answer. <code>&#47;(https?):\\&#47;\\&#47;(?:([\\w-]+)\\.)?([\\w-]+)\\.(\\w+)((?:\\&#47;[\\w-]+)*\\&#47;&zwnj;&#8203;)([\\w-]+)+\\.([\\w]+)&#47;&zwnj;&#8203;gm</code>"}], "tags": [], "owner": {"reputation": 56, "user_id": 3481282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e3d6f9bb4fbf82221d864d96c2719b?s=128&d=identicon&r=PG&f=1", "display_name": "gpoussif", "link": "https://stackoverflow.com/users/3481282/gpoussif"}, "is_accepted": true, "score": 3, "last_activity_date": 1474574218, "last_edit_date": 1474574218, "creation_date": 1474490096, "answer_id": 39626111, "question_id": 39625696, "link": "https://stackoverflow.com/questions/39625696/regex-url-capturing-group/39626111#39626111", "title": "Regex URL Capturing Group", "body": "<p>You can use <a href=\"https://regex101.com/\" rel=\"nofollow\">https://regex101.com/</a> to check the group numbers.</p>\n\n<p>If you <strong>DO</strong> care about the numbers, you can always use \"non-capturing groups (?:)</p>\n\n<pre><code>(https?):\\/\\/(?:([\\w-]+)\\.)?([\\w-]+)\\.(\\w+)((?:\\/[\\w-]+)*\\/)([\\w-]+)+\\.([\\w]+)\n</code></pre>\n\n<p>That Way you'll indeed get </p>\n\n<p>Group 1:    protocol</p>\n\n<p>Group 2.    subdomain</p>\n\n<p>Group 3.    domain</p>\n\n<p>Group 4.    domain extension (TLD)</p>\n\n<p>Group 5.    /path/to/</p>\n\n<p>Group 6.    filename</p>\n\n<p>Group 7.    extension</p>\n\n<hr>\n\n<p>If having extra groups doesn't bother you then with</p>\n\n<pre><code>/(https?):\\/\\/(([\\w-]+)\\.)?([\\w-]+)\\.(\\w+)((\\/[\\w-]+)*\\/)([\\w-]+)+\\.([\\w]+)/\n</code></pre>\n\n<p>you'll get</p>\n\n<p>Group 1:    protocol</p>\n\n<p>Group 3.    subdomain</p>\n\n<p>Group 4.    domain</p>\n\n<p>Group 5.    Top Level Domain (or as you say domain extension)</p>\n\n<p>Group 6.    /path/to/</p>\n\n<p>Group 8.    filename</p>\n\n<p>Group 9.    extension</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7892649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2894, "favorite_count": 0, "accepted_answer_id": 39626111, "answer_count": 1, "score": 3, "last_activity_date": 1474574218, "creation_date": 1474488523, "last_edit_date": 1474493633, "question_id": 39625696, "link": "https://stackoverflow.com/questions/39625696/regex-url-capturing-group", "title": "Regex URL Capturing Group", "body": "<p>I'm writing a regex expression and trying to get each part of a URL into it's own capture group for extraction:</p>\n\n<ul>\n<li><strong>Protocol</strong> <em>(http,https)</em></li>\n<li><strong>Sub Domain</strong> <em>(sub)</em></li>\n<li><strong>Domain</strong> <em>(domain)</em></li>\n<li><strong>Domain Extension</strong> <em>(com,net)</em></li>\n<li><strong>Path</strong> <em>(/path/to/file - this is to be the path to the directory the file is contained in)</em> </li>\n<li><strong>URI</strong> <em>(file name)</em></li>\n<li><strong>URI Extension</strong> <em>(file extension - js,css,pdf)</em></li>\n</ul>\n\n<p><strong>Sample URLs:</strong></p>\n\n<pre><code>http://domain.com/path1/to/file.js\nhttp://domain.com/path-dash/to-dash/file.js\nhttp://domain.com/path-dash/to-dash/file-name.js\nhttps://sub.domain.com/path/to/file.js\nhttp://sub.domain-dash.net/path/to/file.js\nhttp://sub-dash.domain.com/path/to/file.js\nhttp://sub-dash.domain-dash.com/path/to/file.js\n</code></pre>\n\n<p>What I have so far:</p>\n\n<pre><code>/(https?):\\/\\/(\\w+[\\-]?\\w+)?.?(\\w+[\\-]?\\w+)?/gm\n</code></pre>\n\n<p><strong>Desired Output:</strong></p>\n\n<ul>\n<li><strong>Group1:</strong> protocol</li>\n<li><strong>Group2:</strong> sub domain (if exist, or blank if not)</li>\n<li><strong>Group3:</strong> domain</li>\n<li><strong>Group4:</strong> domain extension</li>\n<li><strong>Group5:</strong> directory path</li>\n<li><strong>Group6:</strong> file name</li>\n<li><strong>Group7:</strong> file extension</li>\n</ul>\n\n<p><strong>Question:</strong> How can I get each URL part into it's own <em>capture group</em> across all the examples I have listed above?</p>\n"}, {"tags": ["c", "function", "sockets", "networking"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1474491080, "post_id": 39625352, "comment_id": 66558021, "body": "See also <a href=\"http://stackoverflow.com/questions/1449181/\">What does double-underscore (<code>__const</code>) mean in C?</a> which quotes the C standard on the subject of names starting with underscores."}], "answers": [{"tags": [], "owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "is_accepted": false, "score": 5, "last_activity_date": 1474487743, "creation_date": 1474487743, "answer_id": 39625476, "question_id": 39625352, "link": "https://stackoverflow.com/questions/39625352/why-do-some-functions-in-c-have-an-underscore-prefix/39625476#39625476", "title": "Why do some functions in C have an underscore prefix?", "body": "<p>Leading underscores usually indicate one of 3 things:</p>\n\n<ol>\n<li>The definition is not part of the C standard, so it's not portable</li>\n<li>The definition is internal to a library or compiler, and should not be used from outside</li>\n<li>The definition should not be used lightly, as it implies some risk or necessary configuration that requires extra knowledge.</li>\n</ol>\n\n<p>In this case, <code>__SOCKADDR_COMMON</code> is (2): an internal definition, part of the <code>struct sockaddr_in</code> type, which is the one you usually access from userland.</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "edited": false, "score": 0, "creation_date": 1474488758, "post_id": 39625502, "comment_id": 66556739, "body": "Thank you. In this part of the code <i>_SOCKADDR_COMMON (sin</i>); what does the (sin_) mean?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "edited": false, "score": 1, "creation_date": 1474489014, "post_id": 39625502, "comment_id": 66556913, "body": "It&#39;s part of the implementation details of how the library works, it&#39;s not really important.  In this particular case it&#39;s probably the prefix used to construct the common socket field names, so you get <code>sin_family</code> for <code>struct sockaddr_in</code> and <code>sun_family</code> for <code>struct sockaddr_un</code>.  This, I believe, is either a historical quirk, or an allowance for defining header fields with macros."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1474489732, "post_id": 39625502, "comment_id": 66557295, "body": "Part 1 okay [but has typo: <code>int x; &#47;&#47; ok inside structure</code> --&gt; <code>int _x; &#47;&#47; ok inside structure</code>. But, I don&#39;t see how a <i>scoped</i> <code>__x</code> or <code>_X</code> is worse than an <code>_x</code> one. Also, global scope with <code>static</code> should be fine. If we define <i>literally</i> <code>__my_func</code> no lib will use that, so obscure names are fine. It&#39;s a convention. It&#39;s up to the programmer to assess collision risk. If pgmr uses <code>_access</code> and there is no conflict, but lib later [in time] defines this, pgmr must resolve issue. But, this is a pgmr choice as to such risk. 99.44% of all such names will <i>never</i> conflict"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1474489917, "post_id": 39625502, "comment_id": 66557392, "body": "@CraigEstey <code>__x</code> and <code>_X</code> may be macros.  <i>But, this is a pgmr choice as to such risk. 99.44% of all such names will never conflict</i>  And good luck figuring out the problem if there is a conflict.  Given how easy it is to put bugs into code, why on God&#39;s good Earth would you <i>ever</i> do anything that you know could introduce impossible-to-figure-out bugs?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1474491020, "post_id": 39625502, "comment_id": 66557988, "body": "@AndrewHenle As a practical matter, I&#39;ve been using <code>_whatever</code> for 35+ years in C and have <i>never</i>, not even <i>once</i> experienced a conflict. The only conflicts I&#39;ve experienced were rebuilding old(er) C code using C++ and having to change <code>for (try = 1; try &lt;= 10; ++try)</code> into <code>for (trycount = 1; trycount &lt;= 10; ++trycount)</code>. Same for <code>new</code>, etc. that became keywords. People even try to apply the no underscore stuff to <code>#define X(_x,_y)</code> where it doesn&#39;t even apply. The &quot;_&quot; is a POSIX lib convention [IIRC], so R/T, kernel non-issue. Even with a macro, it&#39;s easy to detect/fix/workaround."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1474491363, "post_id": 39625502, "comment_id": 66558168, "body": "@CraigEstey: you&#39;re lucky, then.  I&#39;ve only been coding about 33 years in C, and I&#39;ve run into some nasty problems because of internal code using names starting with underscore that conflicted with a system function of the same name.  Things go badly wrong when your code defines <code>int _bind(int x, char y);</code> and the system defines and calls <code>char *_bind(void *p, char *a, int f);</code> or something similar \u2014 and the system library code ends up calling your <code>_bind()</code> instead of the intended one.  That was a good few years ago (another millennium, in fact), but I remember that and a few similar cases."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1474491750, "post_id": 39625502, "comment_id": 66558369, "body": "@CraigEstey <i>The &quot;_&quot; is a POSIX lib convention</i>  Please read <b>7.1.3 Reserved identifiers</b> of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">the C Standard</a>: <i>All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use.</i> and <i>All identifiers that begin with an underscore are always reserved for use as identifiers with file scope in both the ordinary and tag name spaces.</i>  Logically, your argument is the same as &quot;I swam with sharks while covered in blood and didn&#39;t get eaten.&quot;  35 years you say?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1474493339, "post_id": 39625502, "comment_id": 66559172, "body": "@JonathanLeffler I &quot;make my own luck&quot; by using <code>_obscure</code>. Like other conventions masquerading as &quot;rules&quot;, my main point is the <i>programmer</i> should decide. Follow the &quot;rule&quot; most of the time, but... IMO, it is blatant <i>hubris</i> for POSIX to usurp the C namespace. If they want, they can usurp <code>_posix_*</code> instead of <code>_*</code>. I&#39;ve looked at [a lot] of modern glibc source. It would handle <code>_bind</code> and call its internal version even if the pgm defined it, using linker script trickery, <code>__bind</code> (nee <code>_bind</code>) has a symbol bind type of LOCAL in <code>libc.so</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1474493685, "post_id": 39625502, "comment_id": 66559327, "body": "@CraigEstey: that was why I mentioned &#39;another millennium&#39; \u2014 the problems are often different these days, but the choice of names can still cause problems.  That is one of a few (less than half-a-dozen, I think) cases of interference with leading-underscore names. (I&#39;ll add, the local use of <code>_bind()</code> as a name wasn&#39;t my choice, and it didn&#39;t cause a problem until ported to a new platform.)  I&#39;ve had more problems with <code>_t</code> suffixes on types which POSIX reserves.  In theory, you have to actively activate POSIX functionality \u2014 pace <code>-std=gnu11</code> which does it automatically. <i>[\u2026continued\u2026]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1474493819, "post_id": 39625502, "comment_id": 66559390, "body": "<i>[\u2026continuation\u2026]</i> The POSIX rules are there so that if you violate them and it hurts, you don&#39;t have a comeback.  To a large extent, that&#39;s true of the C rules too.  They also guide the developers of systems \u2014 if they follow the rules, they won&#39;t hurt their users if those users also follow the rules.  The tricky bit is that newbies look at system headers and think &quot;oh, that must be how I should write my headers too&quot;, and immediately break all the rules set up to prevent the users and the system providers from hurting each other.  Ultimately, that&#39;s an education problem.  SO can help."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1474495527, "post_id": 39625502, "comment_id": 66560118, "body": "@CraigEstey: Regarding your first comment: The reason why it is still <i>not okay</i> to use <code>static ... _x</code> is because the library may be using <code>_x</code> in a header file you are using, and then you would get an error for multiple incompatible declarations of <code>_x</code>.  You say it is up to the programmer to assess risk, which is correct, but only part of the truth\u2014the programmer should also be assessing benefits.  The benefits of using leading underscores in names, assuming you don&#39;t have an entrenched convention, are nil.  I would expect code which uses such names to fail code review."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1474496541, "post_id": 39625502, "comment_id": 66560455, "body": "@AndrewHenle IIRC, It&#39;s not in the <i>real</i> C standard: K&amp;R :-) I was <i>already</i> aware of this [which originated in the POSIX lib spec, IIRC]. Don&#39;t be slavish to a <i>convention</i> like this. Would <code>_Andrew_Henle_whatever</code> be likely to collide? It&#39;s intended for extern/global conflicts, but it&#39;s worded such that <i>scoped</i> are an issue. But, they are no more an issue than <code>int fnc(void) { int fopen = 37; return fopen; }</code> or <code>struct foobar { int fopen; };</code>. And, why is a <i>language</i> spec saying <i>anything</i> about support libs? It&#39;s a separate document, IMO. kernel has <i>no</i> libc but uses C."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1474498072, "post_id": 39625502, "comment_id": 66560898, "body": "@CraigEstey: If I understand you correctly, you&#39;re saying that (1) it&#39;s okay, usually, to use underscores at the beginning of identifiers because if you make a judgment call about it, and (2) something about support libraries and what happens if you don&#39;t use the standard library?  Not sure what the last three sentences of the comment are addressing."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1474499827, "post_id": 39625502, "comment_id": 66561305, "body": "@JonathanLeffler You got the operative word: <i>newbies</i>. They shouldn&#39;t do what I&#39;m talking about and should listen to ... <i>Experts</i> (e.g. you and [maybe ;-)] me). We can do so <i>if</i> we choose, because of our experience/judgement [to adhere or not]. (e.g.) I wouldn&#39;t do <code>_bind</code> but I&#39;d do <code>_qbind</code> and take my chances. I&#39;ve never had to, but if I <i>did</i> have to fix a conflict, I would simply do it. I have an automated [perl] script to change <code>foo_t</code> because sometimes I&#39;ve created <code>abc_t</code> and then realized I wanted <code>def_t</code>. Also, other scripts (250,000 lines) to make this a 10 second exercise."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1474500640, "post_id": 39625502, "comment_id": 66561480, "body": "@JonathanLeffler Regarding headers, I&#39;m assuming you mean the <code>#ifndef _STDIO_H</code> lock? For me, if I had a file <code>...&#47;xyzlib&#47;xyzdef.h</code>, I&#39;d use: <code>#ifndef _xyzlib_xyzdef_h_</code>, so I&#39;d be less likely to get a conflict. Also, who came up with the use <code>#include &lt;stdio.h&gt;</code> for standard headers and use <code>#include &quot;xyzdef.h&quot;</code> for project specific. I use <code>&lt;&gt;</code> for all and just add <code>-I.</code> when compiling. It <i>is</i> education. SO does explain the <i>why</i>. But, it shouldn&#39;t have to. If a spec is going to mandate <code>_whatever</code> as reserved, <i>it</i> should explain why. ISO/C is notorious for <i>not</i> doing this. POSIX does."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 21, "last_activity_date": 1474498106, "last_edit_date": 1474498106, "creation_date": 1474487851, "answer_id": 39625502, "question_id": 39625352, "link": "https://stackoverflow.com/questions/39625352/why-do-some-functions-in-c-have-an-underscore-prefix/39625502#39625502", "title": "Why do some functions in C have an underscore prefix?", "body": "<p>The underscore prefix is reserved for functions and types used by the compiler and standard library.  The standard library can use these names freely because they will never conflict with correct user programs.</p>\n\n<p>The other side to this is that you are not allowed to define names that begin with an underscore.</p>\n\n<p>Well, that is the gist of the rule.  The actual rule is this:</p>\n\n<ul>\n<li><p>You cannot define any identifiers in global scope whose names begin with an underscore, because these may conflict with hidden (private) library definitions.  So this is invalid in your code:</p>\n\n<pre><code>#ifndef _my_header_h_\n#define _my_header_h_ // wrong\nint _x; // wrong\nfloat _my_function(void); // wrong\n#endif\n</code></pre>\n\n<p>But this is valid:</p>\n\n<pre><code>#ifndef my_header_h\n#define my_header_h // ok\nint x; // ok\nfloat my_function(void) { // ok\n    int _x = 3; // ok in function\n}\nstruct my_struct {\n    int _x; // ok inside structure\n};\n#endif\n</code></pre></li>\n<li><p>You cannot define any identifiers in any scope whose names begin with two underscores, or one underscore followed by a capital letter.  So this is invalid:</p>\n\n<pre><code>struct my_struct {\n    int _Field; // Wrong!\n    int __field; // Wrong!\n};\nvoid my_function(void) {\n    int _X; // Wrong!\n    int __y; // Wrong!\n}\n</code></pre>\n\n<p>But this is okay:</p>\n\n<pre><code>struct my_struct {\n    int _field; // okay\n};\nvoid my_function(void) {\n    int _x; // okay\n}\n</code></pre></li>\n</ul>\n\n<p>There are actually a few more rules, just to make things complicated, but the ones above are the most often violated and the easiest to remember.</p>\n"}], "owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12511, "favorite_count": 5, "accepted_answer_id": 39625502, "answer_count": 2, "score": 13, "last_activity_date": 1474498106, "creation_date": 1474487335, "question_id": 39625352, "link": "https://stackoverflow.com/questions/39625352/why-do-some-functions-in-c-have-an-underscore-prefix", "title": "Why do some functions in C have an underscore prefix?", "body": "<p>I recently started learning networking in C and I saw some functions that start with an underscore- like _function()- what does that mean exactly? I also saw this :</p>\n\n<pre><code> struct sockaddr_in  {  \n\n__SOCKADDR_COMMON (sin_);  \n\n in_port_t sin_port;    \n\n struct in_addr sin_addr;    \n\n unsigned char sin_zero[sizeof (struct sockaddr) - \n\n __SOCKADDR_COMMON_SIZE -  \n\nsizeof (in_port_t) -         \n\nsizeof (struct in_addr)];  \n\n};\n</code></pre>\n\n<p>what does this parts of the code mean:</p>\n\n<pre><code>__SOCKADDR_COMMON (sin_);\n\nunsigned char sin_zero[sizeof (struct sockaddr) - \n\n __SOCKADDR_COMMON_SIZE -  \n\nsizeof (in_port_t) -         \n\nsizeof (struct in_addr)];\n</code></pre>\n"}, {"tags": ["c", "stream", "stdio", "standard-library", "format-specifiers"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474489167, "post_id": 39625316, "comment_id": 66556982, "body": "I deleted that comment after noticing your remark about run time. But are you so tight on stack memory that you cannot use a local buffer?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1474489408, "post_id": 39625316, "comment_id": 66557123, "body": "Often serial access can be handled through <code>fopen()</code> even in embedded,  Is <code>fprintf()</code> an option?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1474489426, "post_id": 39625316, "comment_id": 66557134, "body": "I don&#39;t think there&#39;s any way to do this portably. You need some way to hook into the output buffering of <code>stdio</code> streams."}, {"owner": {"reputation": 65, "user_id": 1265195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51179fcba322b2c9cc9486c531ff8299?s=128&d=identicon&r=PG", "display_name": "user1265195", "link": "https://stackoverflow.com/users/1265195/user1265195"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474489487, "post_id": 39625316, "comment_id": 66557167, "body": "@weather-van. Right now, using the stack is exactly what I am doing. However this is a very rude thing to do, because one person might want to use something &quot;debug print&quot; to print tiny strings from a context with tens of bytes of stack, and someone else might want to print a massive 1KB string from another context where stack isn&#39;t an issue. In my environment, variable stack translate to a literal call to malloc(), so that isn&#39;t an option. I could make the caller provide the neccessary scratch space explicitly, however at some point my function changes from a &quot;helper&quot; to a &quot;hinder&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1474489647, "post_id": 39625316, "comment_id": 66557247, "body": "Could process the <code>format</code> looking for <code>&quot;%&quot;</code>.  If the types used is a small-ish sub-set like <code>%d</code> <code>%s</code>, then code could handle the debug print one argument at a time with  a <code>switch(format_specifier)</code>"}, {"owner": {"reputation": 65, "user_id": 1265195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51179fcba322b2c9cc9486c531ff8299?s=128&d=identicon&r=PG", "display_name": "user1265195", "link": "https://stackoverflow.com/users/1265195/user1265195"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474489665, "post_id": 39625316, "comment_id": 66557259, "body": "@Chux - I think you might have found the answer I am looking for fprintf and (retarget.c) ! Can you post a short answer that I can approve?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474489701, "post_id": 39625316, "comment_id": 66557273, "body": "Which comment?? I posted 2"}, {"owner": {"reputation": 65, "user_id": 1265195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51179fcba322b2c9cc9486c531ff8299?s=128&d=identicon&r=PG", "display_name": "user1265195", "link": "https://stackoverflow.com/users/1265195/user1265195"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474489747, "post_id": 39625316, "comment_id": 66557302, "body": "@chux - It looks like I need to read up on this: <a href=\"http://www.keil.com/support/man/docs/gsac/gsac_retargetcortex.htm\" rel=\"nofollow noreferrer\">keil.com/support/man/docs/gsac/gsac_retargetcortex.htm</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474489829, "post_id": 39625316, "comment_id": 66557342, "body": "If it is about my first comment, looks like you could post own based on your referenced link."}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 1265195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51179fcba322b2c9cc9486c531ff8299?s=128&d=identicon&r=PG", "display_name": "user1265195", "link": "https://stackoverflow.com/users/1265195/user1265195"}, "is_accepted": false, "score": 0, "last_activity_date": 1474490441, "creation_date": 1474490441, "answer_id": 39626210, "question_id": 39625316, "link": "https://stackoverflow.com/questions/39625316/is-there-a-way-to-incrementally-process-format-specifier-strings-in-c/39626210#39626210", "title": "Is there a way to incrementally process format specifier strings in C?", "body": "<p>Big thanks to @chux for guiding me in the right direction.</p>\n\n<p>The answer is that the runtime environment's implementation of putc() can be hooked so that when fprintf is called, I can consume the resulting strings one byte at a time. The is quite non-portable. For each environment the exact way to accomplish this will be different.</p>\n\n<p>In my case (Cortex M on Keil), the instructions are provided by Keil here:\n<a href=\"http://www.keil.com/support/man/docs/gsac/gsac_retargetcortex.htm\" rel=\"nofollow\">http://www.keil.com/support/man/docs/gsac/gsac_retargetcortex.htm</a></p>\n"}], "owner": {"reputation": 65, "user_id": 1265195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51179fcba322b2c9cc9486c531ff8299?s=128&d=identicon&r=PG", "display_name": "user1265195", "link": "https://stackoverflow.com/users/1265195/user1265195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474490441, "creation_date": 1474487219, "question_id": 39625316, "link": "https://stackoverflow.com/questions/39625316/is-there-a-way-to-incrementally-process-format-specifier-strings-in-c", "title": "Is there a way to incrementally process format specifier strings in C?", "body": "<p>In embedded programming, I often end up with code that looks something like this:</p>\n\n<pre><code>void debug_terminal_printf(const char* format, va_list ap){\n    char tmp[ARBITRARY_LIMITATION];\n    vsprintf( tmp, format, ap );\n    for(int pos=0; pos&lt;strlen(tmp); pos++){\n        if( tmp[pos] == 0 ) break;\n        uart_putc( tmp[pos] );\n    }\n}\n</code></pre>\n\n<p>I want my interface to provide the convenience of string formats, but typically the consumers of the formatted string are things that consume the formatted strings a few bytes at a time, like a UART in this case. So I end up with these little temporary buffers in each of my helper functions. Use of dynamic memory is not really suitable, because decisions about the use of dynamic memory are made at the system level, and it would be inappropriate to use it in embedded platform code.</p>\n\n<p>What I <em>wish</em> to be able to do is process the string incrementally, something like this:</p>\n\n<pre><code>void debug_terminal_printf(const char* format, va_list ap){\n    char tmp[MAX_TOKEN_SIZE];\n    while(*format){\n        int len = single_token_sprintf( tmp, format, ap );\n        uart_puts(tmp);\n        format += len;\n    }\n}\n</code></pre>\n\n<p>This way I never need enough memory for the entire formatted string, I can wait until that hardware has consumed the last token before continuing to decode the next token.</p>\n\n<p>Has anyone ever seen a (hopefully portable) idiom like this that gets rid of the need for a large temporary buffer?</p>\n"}, {"tags": ["c", "nodes", "codeblocks"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1474485346, "post_id": 39624776, "comment_id": 66554855, "body": "<code>strcpy(J-&gt;AIRPORT, &quot;TOR&quot;)</code> - <code>J-&gt;AIRPORT</code> is not a <code>char</code> array."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474485517, "post_id": 39624776, "comment_id": 66554936, "body": "That would need <code>char * AIRPORT[4];</code> --&gt; <code>char AIRPORT[4];</code> but also be very careful when chasing links. In a linked list, you should check every link pointer before running ahead. And the badly formatted code is difficult to read."}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 1, "creation_date": 1474485535, "post_id": 39624776, "comment_id": 66554952, "body": "please tell me the formatting is due to having trouble with the interface here, and is not really how you format your <code>if</code> statements."}, {"owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "edited": false, "score": 0, "creation_date": 1474485584, "post_id": 39624776, "comment_id": 66554982, "body": "Also, you should set the node after <code>BOS</code> to <code>null</code> or <code>0</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474485629, "post_id": 39624776, "comment_id": 66555006, "body": "1) Format this mess properly. 2) Text has to be <b>in the question itself</b>, no images, no links! 3) See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "edited": false, "score": 0, "creation_date": 1474485654, "post_id": 39624776, "comment_id": 66555020, "body": "@Riley: What is <code>null</code>? That is not part of the C standard."}, {"owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474486016, "post_id": 39624776, "comment_id": 66555224, "body": "@Olaf The standard consistently uses <code>null</code> to reference things with the value <code>0</code>. &quot;An integer constant expression with the value 0, or such an expression cast to type void *, is called a null pointer constant&quot; or &quot;A byte with all bits zero shall be interpreted as a null character&quot;."}, {"owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474486108, "post_id": 39624776, "comment_id": 66555271, "body": "@Olaf I&#39;m assuming you are trying talk about the macro <code>NULL</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "edited": false, "score": 0, "creation_date": 1474486190, "post_id": 39624776, "comment_id": 66555329, "body": "@Riley whatever the standard might say, there is less confusion if you use the term <code>nul</code> to indicate the character <code>&#39;\\0&#39;</code> as shown in the ASCII charts. You said &quot;&quot;A byte with all bits zero shall be interpreted as a null character&quot;. That is unrelated to pointer values."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "edited": false, "score": 0, "creation_date": 1474486243, "post_id": 39624776, "comment_id": 66555352, "body": "@Riley: As you write it in code-tags, you mean an identifer. While there is the macro <code>NULL</code>, which evaluates to a <i>null pointer constants</i>, there is no standard name <code>null</code>. Nor does the standard write about <i>null</i> as itself, but a <i><b>null pointer constant</b></i> and (elsewhere) about <i>null pointers</i>, but never <i>null</i> by itself. Similar for the (unrelated) <i>null <b>character</b></i>. Also a <i>null pointer</i> is not the same as the <i>integer value</i> <code>0</code>. The <i>null pointer</i> need not have an all-bits-zero representation."}, {"owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474486277, "post_id": 39624776, "comment_id": 66555378, "body": "@Olaf That&#39;s even less clear. <code>struct node*</code> is not a character."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "edited": false, "score": 0, "creation_date": 1474486357, "post_id": 39624776, "comment_id": 66555426, "body": "@Riley: It was not me starting with <i>null characters</i>! And I clearly wrote it is unrelated."}, {"owner": {"reputation": 241, "user_id": 6860348, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ed7e687b609c4ab8f9b25a490d2ec67?s=128&d=identicon&r=PG&f=1", "display_name": "boss revs", "link": "https://stackoverflow.com/users/6860348/boss-revs"}, "edited": false, "score": 0, "creation_date": 1474486720, "post_id": 39624776, "comment_id": 66555624, "body": "ty for the help guys, i&#39;m really new to programming in general so i do not understand what you mean by char * AIRPORT[4] not being an array but it works nonetheless and the error i found was that i did not set the last link to NULL, thereby the whileloop iterates one more printloop then nessesary. Adding this line worked: J-&gt;LINK-&gt; LINK -&gt; LINK = &#39;NULL&#39;;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474486935, "post_id": 39624776, "comment_id": 66555737, "body": "Did that cure the compiler warnings, which you should have enabled? Your array of pointers has enough <i>space</i> but is of the wrong type."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474487059, "post_id": 39624776, "comment_id": 66555803, "body": "@bossrevs: Of course <code>AIRPORT</code> is an array!"}, {"owner": {"reputation": 241, "user_id": 6860348, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ed7e687b609c4ab8f9b25a490d2ec67?s=128&d=identicon&r=PG&f=1", "display_name": "boss revs", "link": "https://stackoverflow.com/users/6860348/boss-revs"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474487225, "post_id": 39624776, "comment_id": 66555893, "body": "@Weather Vane my code has tons of warnings but as i said, i&#39;m retarded when it comes to coding and I see the diagnoses but do not know what they even mean. I&#39;m using learn-c.org to learn this and this is my best attempt so far.  I tried changing it to char AIRPORT[4] and the code just fails to work. i need that astrisk thingy to make this code work. give me a year and i&#39;ll be at a level where you and i can talk without me being confused as hell"}, {"owner": {"reputation": 1290, "user_id": 3227815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/932904f6217c372e891e1a36631019f1?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/3227815/katie"}, "edited": false, "score": 1, "creation_date": 1474487550, "post_id": 39624776, "comment_id": 66556063, "body": "You should definitely look into how to use a debugger to investigate what&#39;s going on."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474502577, "post_id": 39624776, "comment_id": 66561892, "body": "&quot; The code works but i get point.exe stopped working. &quot;  - so, it doesn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1474502232, "creation_date": 1474502232, "answer_id": 39628202, "question_id": 39624776, "link": "https://stackoverflow.com/questions/39624776/simple-c-programming-code-containing-nodes-runs-but-creates-an-error-on-codebloc/39628202#39628202", "title": "Simple C programming code containing nodes runs but creates an error on codeblock", "body": "<p>The <code>AIRPORT</code> member of the <code>nodez</code> structure should be defined as <code>char AIRPORT[4];</code>, as currently defined it is an array of 4 pointer to <code>char</code>. The compiler produces warnings that should not be ignored.</p>\n\n<p>Furthermore, you construct a list of linked nodes but forget to set the <code>LINK</code> of the last node to <code>NULL</code>. <code>malloc()</code> returns uninitialized memory, the <code>LINK</code> member probably contains an invalid address, invoking undefined behavior when you iterate through the list.</p>\n\n<p>Fix it by setting <code>J-&gt;LINK-&gt;LINK-&gt;LINK = NULL;</code> after the last <code>strcpy()</code>.</p>\n"}], "owner": {"reputation": 241, "user_id": 6860348, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ed7e687b609c4ab8f9b25a490d2ec67?s=128&d=identicon&r=PG&f=1", "display_name": "boss revs", "link": "https://stackoverflow.com/users/6860348/boss-revs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1474502232, "creation_date": 1474485236, "last_edit_date": 1474492905, "question_id": 39624776, "link": "https://stackoverflow.com/questions/39624776/simple-c-programming-code-containing-nodes-runs-but-creates-an-error-on-codebloc", "title": "Simple C programming code containing nodes runs but creates an error on codeblock", "body": "<p>//this program creates a struct node with 2 pointer variables, an airport and a link to another node. It simply links toronto, miami and boston airport and prints it out through a while loop. The code works but i get point.exe stopped working. I took a picture.<a href=\"https://gyazo.com/e58ba30ea0da3e8039ad445fb3128d21\" rel=\"nofollow\">https://gyazo.com/e58ba30ea0da3e8039ad445fb3128d21</a> </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct node{\n    char * AIRPORT[4];\n    struct node * LINK;\n\n} nodez;\n\nint main (){\n    nodez *J,*K;\n    J = malloc(sizeof(nodez));\n    if (J == NULL){\n        return 1;\n\n    }\n    strcpy(J-&gt;AIRPORT, \"TOR\");\n    J-&gt;LINK = malloc(sizeof(nodez));\n    if (J -&gt; LINK == NULL){\n        return 1;\n\n    }\n    strcpy(J-&gt;LINK-&gt;AIRPORT, \"MIA\");\n    J-&gt;LINK-&gt;LINK = malloc(sizeof(nodez));\n    if (J -&gt; LINK -&gt; LINK == NULL){\n        return 1;\n\n    }\n    strcpy(J-&gt;LINK-&gt; LINK -&gt; AIRPORT, \"BOS\");\n\n    nodez *current = J;\n    while (current){\n        printf(\"%s\\n\", current -&gt; AIRPORT);\n        current = current -&gt; LINK;\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Here is a picture of what i get</p>\n"}, {"tags": ["c", "arrays", "normalization", "func"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1474485273, "post_id": 39624305, "comment_id": 66554802, "body": "Please don&#39;t edit your post in a way that makes answers non-sensical. With your update, the part of my answer that tells to add the declaration at the top does not make sense any more."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474484995, "post_id": 39624510, "comment_id": 66554659, "body": "Hi @R Sahu thanks for helping. <code>i = nrMeasurements</code> fixed my issue. Secondly i properly declared everything but now its not compiling. for the line <code>normValue(normTable, nrMeasurements);</code> i get a error message saying too few arguments to function call. what does it mean?"}, {"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474485993, "post_id": 39624510, "comment_id": 66555206, "body": "@R Sahu Hi thanks again. Sorry i should not have edited the post. However back to the questions im getting normalized values such as 0, 0, 0, 1. This is from entering 1,2,3,4 in the array.  do i something wrong in my function?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474486918, "post_id": 39624510, "comment_id": 66555728, "body": "@Alex, that&#39;s most likely the result of integer division. You should change the normalized values to float or double, and make sure to update the line that computes them to use floating point division."}, {"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474488485, "post_id": 39624510, "comment_id": 66556578, "body": "@R Sahu hmm i&#39;ve tried that now i can get negative and decimal numbers, but they all turn into the same values like -0.10 even though all entered values are different. Is there a way to get whole number and or negative number?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474488918, "post_id": 39624510, "comment_id": 66556851, "body": "@Alex, try to use a debugger. it&#39;s difficult for me to see where the problem could be."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1474485110, "last_edit_date": 1474485110, "creation_date": 1474484369, "answer_id": 39624510, "question_id": 39624305, "link": "https://stackoverflow.com/questions/39624305/how-to-normalize-data-and-clear-array/39624510#39624510", "title": "How to normalize data and clear array", "body": "<blockquote>\n  <p>when i enter values and exit. When i re-enter it starts from 0 again, as if everything cleared.</p>\n</blockquote>\n\n<p>That happens since you are always starting from <code>i = 0;</code> in <code>enterMeasurements</code>. You need to initialize it to the arugment <code>nrMeasurements</code>.</p>\n\n<blockquote>\n  <p>im trying to compute normalized values but program quits everytime.</p>\n</blockquote>\n\n<p>That's happening most likely because you are not passing enough arguments to <code>normValue</code>.</p>\n\n<p>Change the call to:</p>\n\n<pre><code>normValue(min, max, avg, arrayTable, nrMeasurements, normTable);\n</code></pre>\n\n<p>You should update the function declarations to contain all the arguments. This would have avoided the above error.</p>\n\n<pre><code>int enterMeasurements(int arrayTable[], int nrMeasurements);\nvoid printArray(int arrayTable[], int nrMeasurements);\nint minValue(int arrayTable[], int nrMeasurements);\nint maxValue(int arrayTable[], int nrMeasurements);\nfloat avgValue(int arrayTable[], int nrMeasurements);\nvoid normValue(int min, int max, int avg, int arrayTable[], int nrMeasurements, int normTable[]);\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1683, "favorite_count": 0, "accepted_answer_id": 39624510, "answer_count": 1, "score": 0, "last_activity_date": 1474486075, "creation_date": 1474483589, "last_edit_date": 1474486075, "question_id": 39624305, "link": "https://stackoverflow.com/questions/39624305/how-to-normalize-data-and-clear-array", "title": "How to normalize data and clear array", "body": "<p>Hi i've written a small program that let's me choose from a menu what i want to do ie view, enter values, compute etc. its doing most of the stuff im asking it, so im on the right track. However, there are a few things i dont know how to fix. </p>\n\n<ol>\n<li><p>when i enter values and exit. When i re-enter it starts from 0 again, as if everything cleared. I want to start off where i left off. Secondly. i want to have MAX 10 values as input. I should not be able to keep entering. I want to erase the array using my function instead. </p></li>\n<li><p>im trying to compute normalized values but program quits everytime. </p></li>\n</ol>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define LENGTH 10\n\nint enterMeasurements();\nvoid printArray();\nint minValue();\nint maxValue();\nfloat avgValue();\nvoid normValue();\n\nint main(void)\n{\n   char input;\n   int nrMeasurements=0;\n   int arrayTable[LENGTH] = {0};\n   int normTable[LENGTH] = {0};\n   int max, min, norm;\n   float avg;\n   //main menu\n   do\n   {\n\n      printf(\"\\nMeasurement tool 1.0\\n\");\n      printf(\"V for (View)\\n\");\n      printf(\"E for (Enter Values)\\n\");\n      printf(\"C for (Compute Values)\\n\");\n      printf(\"R for (Reset Values)\\n\");\n      printf(\"Q for (Quit)\\n\");\n      printf(\"\\nEnter input: \");\n      scanf(\" %c\", &amp;input);\n\n      if(input == 'v' || input == 'V')\n      {\n         // function to print array values\n         printArray(arrayTable, nrMeasurements);\n      }\n      else if(input == 'e' || input == 'E')\n      {\n         // enter values here\n         nrMeasurements = enterMeasurements(arrayTable,nrMeasurements);\n      }\n      else if (input == 'c' || input == 'C')\n      {\n         // enter function to calc min, max and avg and prints it.\n         max = maxValue(arrayTable, nrMeasurements);\n         min = minValue(arrayTable, nrMeasurements);\n         avg = avgValue(arrayTable, nrMeasurements);\n         printf(\"Maximum value is: %d\\n\", max);\n         printf(\"Minimum value is: %d\\n\", min);\n         printf(\"Average value is: %.2f\\n\", avg);\n         normValue(normTable, nrMeasurements);\n\n\n      }\n      else if (input == 'r' || input == 'R')\n      {\n         // enter function that erase the entire array.\n         printf(\"[   erase array   ]\\n\");\n      }\n   }\n   while (input !='q' &amp;&amp; input != 'Q');\n   return 0;\n}\n\nint enterMeasurements(int arrayTable[], int nrMeasurements)\n{\n   int i;\n\n   for (i = 0; i &lt; LENGTH; i++)\n   {\n      printf(\"Enter Measurement #%i (or 0): \", i+1);\n      scanf(\"%d\", &amp;arrayTable[i]);\n\n\n      if (arrayTable[i] == 0 )\n         break;\n   }\n   return i;\n}\n\nvoid printArray(int arrayTable[], int nrMeasurements)\n{\n   int i;\n\n   for (i = 0; i &lt; nrMeasurements; i++)\n   {\n      printf(\" array[%2d] : %d\\n\", i, arrayTable[i]);\n   }\n}\n\nint maxValue(int arrayTable[], int nrMeasurements)\n{\n   int i, max;\n   max = arrayTable[0];\n   for (i=1; i&lt;nrMeasurements; i++)\n   {\n      if (arrayTable[i]&gt;max)\n      {\n         max=arrayTable[i];\n      }\n   }\n   return(max);\n}\n\nint minValue(int arrayTable[], int nrMeasurements)\n{\n   int i, min;\n   min = arrayTable[0];\n   for (i=1; i&lt;nrMeasurements; i++)\n   {\n      if (arrayTable[i]&lt;min)\n      {\n         min=arrayTable[i];\n      }\n   }\n   return(min);\n}\n\nfloat avgValue(int arrayTable[], int nrMeasurements)\n{\n   int sum,i;\n   float avg;\n   sum=0;\n   avg=0;\n\n   for (i=0; i&lt;nrMeasurements;i++)\n   {\n      sum=sum+arrayTable[i];\n      avg=(float)sum/(i+1);\n   }\n   return(avg);\n}\n\nvoid normValue(int min, int max, int avg, int arrayTable[], int nrMeasurements, int normTable[])\n{\n   int i;\n\n   for (i=0; i&lt;nrMeasurements; i++)\n   {\n      normTable[i]=(arrayTable[i]-min)/ (max-min);\n   }\n   for (i=0; i&lt;10; i++)\n      printf(\"Normalized Values: %d\\n\", normTable[i]);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7478, "user_id": 2658173, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a53cc204289b776e5e12dc9d43d2cbe6?s=128&d=identicon&r=PG&f=1", "display_name": "C.B.", "link": "https://stackoverflow.com/users/2658173/c-b"}, "edited": false, "score": 0, "creation_date": 1474482694, "post_id": 39624015, "comment_id": 66553426, "body": "Depends on the nature of the association. Is it static or dynamic?"}, {"owner": {"reputation": 357, "user_id": 2634349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cfabaf9c284e6cd31f9c8894402f873e?s=128&d=identicon&r=PG", "display_name": "Guilherme Costa", "link": "https://stackoverflow.com/users/2634349/guilherme-costa"}, "reply_to_user": {"reputation": 7478, "user_id": 2658173, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a53cc204289b776e5e12dc9d43d2cbe6?s=128&d=identicon&r=PG&f=1", "display_name": "C.B.", "link": "https://stackoverflow.com/users/2658173/c-b"}, "edited": false, "score": 0, "creation_date": 1474482793, "post_id": 39624015, "comment_id": 66553472, "body": "Static. Will edit the question, thanks."}, {"owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "edited": false, "score": 0, "creation_date": 1474482838, "post_id": 39624015, "comment_id": 66553503, "body": "Hashmaps do this in near-constant time, but they are not trivial to implement. Iterating the set is the simplest option, and if it&#39;s only a few elements, you&#39;ll notice no difference"}], "answers": [{"tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": 1, "last_activity_date": 1474483094, "creation_date": 1474483094, "answer_id": 39624169, "question_id": 39624015, "link": "https://stackoverflow.com/questions/39624015/fast-way-to-map-unrelated-values-to-another-value/39624169#39624169", "title": "Fast way to map unrelated values to another value", "body": "<p><em>Associative Arrays</em>, also called <em>Maps</em> or <em>Hashed Maps</em> or <em>Red-Black-Trees</em> would be the right solution for large amounts. Google 'std:map' for more details (that is C++, but you can use the concept, of course you have to implement it yourself)</p>\n\n<p>For small amounts (maybe up to 20 or 30), a simple loop through is even faster, as there is no hashing overhead.</p>\n"}, {"comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1474483717, "post_id": 39624219, "comment_id": 66553979, "body": "An almost complete answer. The only option I&#39;m missing is using a sorted array + binary search which would come out to O(log(n)) complexity. (Equal to using a balanced tree but much better memory access / cache friendlier.)"}, {"owner": {"reputation": 1458, "user_id": 3643303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sIpdl.jpg?s=128&g=1", "display_name": "Amber Beriwal", "link": "https://stackoverflow.com/users/3643303/amber-beriwal"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1474484195, "post_id": 39624219, "comment_id": 66554243, "body": "How would it be O(log(n))? Wouldn&#39;t the cost of sorting or balancing add up? You mean something like TreeMap in java? A balanced red-black tree."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1474484420, "post_id": 39624219, "comment_id": 66554381, "body": "Since the data doesn&#39;t change in this scenario, it only needs to be sorted once and for all. This can (and should) be done even before the program is started: Simply sort the array in the source code."}, {"owner": {"reputation": 1458, "user_id": 3643303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sIpdl.jpg?s=128&g=1", "display_name": "Amber Beriwal", "link": "https://stackoverflow.com/users/3643303/amber-beriwal"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1474485238, "post_id": 39624219, "comment_id": 66554789, "body": "Sounds good...but I couldn&#39;t find..how will you keep mapping of values?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1474485912, "post_id": 39624219, "comment_id": 66555167, "body": "You use an array of (<i>key</i>, <i>value</i>) pairs, sorted by <i>key</i>. As you found the entry with the matching <i>key</i> through binary search, you look up the <i>value</i> in the same entry. Equivalently, you could also use two arrays; one for the keys and one for the values. As you fond the index in the sorted key-array, you look up the same index in the value array."}], "tags": [], "owner": {"reputation": 1458, "user_id": 3643303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sIpdl.jpg?s=128&g=1", "display_name": "Amber Beriwal", "link": "https://stackoverflow.com/users/3643303/amber-beriwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1474483268, "creation_date": 1474483268, "answer_id": 39624219, "question_id": 39624015, "link": "https://stackoverflow.com/questions/39624015/fast-way-to-map-unrelated-values-to-another-value/39624219#39624219", "title": "Fast way to map unrelated values to another value", "body": "<p>In the above example, domain of values is 8 bit so you can have an array of 256 values for that. Similarly if you a set of thousand values, you can simply have an array of that size. Although, this approach will be rough on memory, but it will give O(1) time complexity.</p>\n\n<p>If the domain and range of values is unknown, then a hashtable/hashmap can be implemented. Although, that would be hard to implement but it will give O(1) time complexity.</p>\n\n<p>Iteration would be easy to implement, but O(n) time complexity would be there.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1474495800, "last_edit_date": 1474495800, "creation_date": 1474492683, "answer_id": 39626735, "question_id": 39624015, "link": "https://stackoverflow.com/questions/39624015/fast-way-to-map-unrelated-values-to-another-value/39626735#39626735", "title": "Fast way to map unrelated values to another value", "body": "<p>With only 3 possible input values mapping to 3 consecutive values.</p>\n\n<pre><code>int getIndexFromWeirdValue(int x) {\n  static const int x[3] = {0xFE, 0x84, 0x35};\n  static const int y[3] = {0,1,2};\n  return (x==x[0])*y[0] + (x==x[1])*y[1] + (x==x[2])*y[2];\n}\n</code></pre>\n\n<p>Other methods exist that perform in a similar non-branching fashion.</p>\n\n<p>Using 4-byte math to map 1 byte to 1 byte and <code>x[]</code> are distinct, always an answer of the form below can be made - fast if <code>int</code> division is fast  YMMV.  C0, C1, C2, D based on mapping.  If mapping is constant, these values can be determined at compile time.</p>\n\n<pre><code>y = (((C0*x + C1)*x + C2)/D + y[0];\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 2634349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cfabaf9c284e6cd31f9c8894402f873e?s=128&d=identicon&r=PG", "display_name": "Guilherme Costa", "link": "https://stackoverflow.com/users/2634349/guilherme-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1474495800, "creation_date": 1474482585, "last_edit_date": 1474482869, "question_id": 39624015, "link": "https://stackoverflow.com/questions/39624015/fast-way-to-map-unrelated-values-to-another-value", "title": "Fast way to map unrelated values to another value", "body": "<p>What is a fast way (in C) to get a corresponding value based on other value from a set of completely unrelated values?</p>\n\n<p>Example:</p>\n\n<p>The values {0xFE, 0x84, 0x35} correspond to values {0, 1, 2}, which are used to index an array of functions.</p>\n\n<pre><code>void doStuff(int weirdValue)\n{\n  int correspondingIndex = getIndexFromWeirdValue(weirdValue);\n\n  doMoreStuff[correspondingIndex]();\n}\n</code></pre>\n\n<p>I know that I can use values {0, 1, 2} to index an array and access {0xFE, 0x84, 0x35} through it, but is there any way to do the reverse operation without having to iterate through the set comparing values if these values are to be statically associated?</p>\n"}, {"tags": ["c", "makefile", "math.h"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474482536, "post_id": 39623955, "comment_id": 66553335, "body": "And the makefile will build the executable <code>p1</code> from what object files? And please post the output from running the <code>make</code> command (after <code>make clean</code>)."}, {"owner": {"reputation": 400, "user_id": 5533643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9MWx.png?s=128&g=1", "display_name": "Angen", "link": "https://stackoverflow.com/users/5533643/angen"}, "edited": false, "score": 0, "creation_date": 1474482540, "post_id": 39623955, "comment_id": 66553336, "body": "Do you use pow function in your code?"}, {"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474482861, "post_id": 39623955, "comment_id": 66553518, "body": "Yes I used pow in my code."}, {"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474482881, "post_id": 39623955, "comment_id": 66553534, "body": "Where would i find the object files?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474482932, "post_id": 39623955, "comment_id": 66553569, "body": "I mean, you say that <code>all</code> depend on $(EXECS)` (i.e. <code>p1</code>). But what does <code>$(EXECS)</code> depend on?"}, {"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474483032, "post_id": 39623955, "comment_id": 66553618, "body": "I&#39;m not sure how I would know. I am new to all of this."}, {"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474483261, "post_id": 39623955, "comment_id": 66553738, "body": "I was told that as long as I have the -lm then it should link math.h."}, {"owner": {"reputation": 400, "user_id": 5533643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9MWx.png?s=128&g=1", "display_name": "Angen", "link": "https://stackoverflow.com/users/5533643/angen"}, "edited": false, "score": 0, "creation_date": 1474483541, "post_id": 39623955, "comment_id": 66553873, "body": "in which folder do you have math.h and in which folder do you have your code"}, {"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474483863, "post_id": 39623955, "comment_id": 66554066, "body": "My code is in the folder &#39;CH3-Programs&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 0, "creation_date": 1474484907, "post_id": 39624537, "comment_id": 66554613, "body": "Yes!! It worked! Thank you very much. I can&#39;t thank you enough."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "reply_to_user": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "edited": false, "score": 1, "creation_date": 1474484992, "post_id": 39624537, "comment_id": 66554655, "body": "@BryceMarshall You can thank the answerer more effectively by upvoting and accepting his answer :-)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1474530381, "last_edit_date": 1474530381, "creation_date": 1474484480, "answer_id": 39624537, "question_id": 39623955, "link": "https://stackoverflow.com/questions/39623955/why-am-i-getting-the-error-undefined-reference-to-pow-collect2-error-ld-re/39624537#39624537", "title": "Why am I getting the error, &quot;undefined reference to `pow&#39; collect2: error: ld returned 1 exit status make: *** [p1] Error 1&quot;?", "body": "<p>The problem here is the order you link with the math library (the <code>-lm</code> option). Libraries should be after the sources or object files on the command line when building.</p>\n\n<p>So if you ran the command to build manually, it should look like</p>\n\n<pre><code>gcc p1.c -o p1 -lm\n</code></pre>\n\n<p>The problem is that your makefile doesn't really do anything, and it lives on <em>implicit</em> rules alone. The implicit rules use certain variables in a certain order which do not place the library in the right position in your makefile.</p>\n\n<p>Try instead something like this makefile:</p>\n\n<pre><code># The C compiler to use.\nCC = gcc\n\n# The C compiler flags to use.\n# The -g flag is for adding debug information.\n# The -Wall flag is to enable more warnings from the compiler\nCFLAGS = -g -Wall\n\n# The linker flags to use, none is okay.\nLDFLAGS = \n\n# The libraries to link with.\nLDLIBS = -lm\n\n# Define the name of the executable you want to build.\nEXEC = p1\n\n# List the object files needed to create the executable above.\nOBJECTS = p1.o\n\n# Since this is the first rule, it's also the default rule to make\n# when no target is specified. It depends only on the executable\n# being built.\nall: $(EXEC)\n\n# This rule tells make that the executable being built depends on\n# certain object files. This will link using $(LDFLAGS) and $(LDLIBS).\n$(EXEC): $(OBJECTS)\n\n# No rule needed for the object files. The implicit rules used\n# make together with the variable defined above will make sure\n# they are built with the expected flags.\n\n# Target to clean up. Removes the executable and object files.\n# This target is not really necessary but is common, and can be\n# useful if special handling is needed or there are many targets\n# to clean up.\nclean:\n    -rm -f *.o $(EXEC)\n</code></pre>\n\n<p>If you run <code>make</code> using the above makefile, the <code>make</code> program should first build the object file <code>p1.o</code> from the source file <code>p1.c</code>. Then is should use the <code>p1.o</code> object file to link the executable <code>p1</code> together with the standard math library.</p>\n"}], "owner": {"reputation": 35, "user_id": 5947603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153205190706741/picture?type=large", "display_name": "Bryce Marshall", "link": "https://stackoverflow.com/users/5947603/bryce-marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1463, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474530381, "creation_date": 1474482407, "last_edit_date": 1474482938, "question_id": 39623955, "link": "https://stackoverflow.com/questions/39623955/why-am-i-getting-the-error-undefined-reference-to-pow-collect2-error-ld-re", "title": "Why am I getting the error, &quot;undefined reference to `pow&#39; collect2: error: ld returned 1 exit status make: *** [p1] Error 1&quot;?", "body": "<p>Here is my makefile:</p>\n\n<pre><code>CC=gcc \n\nCFLAGS=-g\n\nLDFLAGS=-lm\n\nEXECS= p1\n\n\nall: $(EXECS)\n\nclean: \n    rm -f *.o $(EXECS)\n</code></pre>\n\n<p>14:32:16 **** Build of configuration Default for project CH3-Programs ****\nmake p1 \ngcc  -g  -ggdb -lm  p1.c   -o p1\n/tmp/ccNTyUSA.o: In function <code>main':\n/home/bm5788/fromVM/Workspace/CH3-Programs//p1.c:28: undefined reference to</code>pow'\ncollect2: error: ld returned 1 exit status\nmake: *** [p1] Error 1\n: recipe for target 'p1' failed</p>\n"}, {"tags": ["c++", "c", "google-chrome", "google-chrome-extension", "google-nativeclient"], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 4743133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e1645f846ef7aee07092bfd003337b?s=128&d=identicon&r=PG", "display_name": "Sun Dro", "link": "https://stackoverflow.com/users/4743133/sun-dro"}, "edited": false, "score": 0, "creation_date": 1474481161, "post_id": 39623360, "comment_id": 66552628, "body": "Thanks but when player will be released in production, I cant tell users to use chrome from Dev channel.. :("}], "tags": [], "owner": {"reputation": 1087, "user_id": 92554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bab2622df953f1abc15d8acdc8359957?s=128&d=identicon&r=PG", "display_name": "bbudge", "link": "https://stackoverflow.com/users/92554/bbudge"}, "is_accepted": false, "score": 0, "last_activity_date": 1474480221, "creation_date": 1474480221, "answer_id": 39623360, "question_id": 39623111, "link": "https://stackoverflow.com/questions/39623111/adjust-volume-in-google-native-client/39623360#39623360", "title": "Adjust Volume In Google Native-Client", "body": "<p>The web page containing the plugin could use the chrome.audio API to do this. Unfortunately, this will only work in Dev channel Chrome.</p>\n\n<p><a href=\"https://developer.chrome.com/apps/audio\" rel=\"nofollow\">https://developer.chrome.com/apps/audio</a></p>\n"}], "owner": {"reputation": 453, "user_id": 4743133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e1645f846ef7aee07092bfd003337b?s=128&d=identicon&r=PG", "display_name": "Sun Dro", "link": "https://stackoverflow.com/users/4743133/sun-dro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474543077, "creation_date": 1474479448, "last_edit_date": 1474543077, "question_id": 39623111, "link": "https://stackoverflow.com/questions/39623111/adjust-volume-in-google-native-client", "title": "Adjust Volume In Google Native-Client", "body": "<p>I've wrote media/stream player using google chrome native-client (nacl). The problem is that Pepper audio API does not have function to control audio level. Is there any way to adjust volume with nacl while playback? </p>\n\n<p>[EDIT]</p>\n\n<p>I've fixed this problem with the manually change volume in the audio sample buffer.</p>\n"}, {"tags": ["c", "encoding", "compression", "chess"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1474480210, "post_id": 39623081, "comment_id": 66552185, "body": "You&#39;re talking about your encoded representation in terms of its efficiency.  I guess you mean its space efficiency, but I&#39;m not seeing what actually makes it any smaller in practice than the na&#239;ve representation.  If it is not smaller, then the <b><i>in</i></b>efficiency of encoding and decoding that representation would seem to be pointless."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474480714, "post_id": 39623081, "comment_id": 66552418, "body": "@JohnBollinger The implementation should be <i>time</i> efficient as for my task the encoding function is part of the critical path the determines how many hours it takes to build the table base. The encoding itself is <i>space</i> efficient in that it reduces a larger encoding space into a smaller one (thus reducing the tablebase size), but its space efficiency isn&#39;t dependent on its implementation."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474481772, "post_id": 39623081, "comment_id": 66552940, "body": "Yes, the na&#239;ve representation provides a value space that includes invalid values.  <i>In principle</i>, a representation that affords only valid values could occupy less space, but whether it occupies less space in practice is a question of a lower level of encoding, which you have not discussed.  One way to do that would be for the elements of your tuple to be variable-length, but even that doesn&#39;t gain much unless the number of pieces is a large fraction of the number of squares."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1474481921, "post_id": 39623081, "comment_id": 66553018, "body": "Is the actual game played on a 8x8 board, so six out of 64 squares would be occupied in your example?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1474481982, "post_id": 39623081, "comment_id": 66553058, "body": "@user3386109 The game I am concerned about has a 5&#215;5 board with up to 12 squares occupied."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474482210, "post_id": 39623081, "comment_id": 66553171, "body": "@JohnBollinger I have computed that using the <i>compact</i> representation as opposed to the <i>na&#239;ve</i> representation can reduce the encoding space by a factor of 24. Since we are talking about a table several terabytes in size, this optimization is worthwhile. Please stay on topic though, whether what I want to do is very useful or only slightly is not an important part of the question."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474482525, "post_id": 39623081, "comment_id": 66553330, "body": "@JohnBollinger Or to say it another way: I&#39;m sick of people always wanting me to justify why I want to compute certain things. That&#39;s not part of the question I&#39;m asking so don&#39;t steer the discussion towards it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474482686, "post_id": 39623081, "comment_id": 66553420, "body": "For space efficiency, simple &quot;zip&quot; the data.  Yet the goal is space and time efficiency (without a clear factor rating time vs. space leading to lack of clarity in the question.)  For a balanced approach and on a sparsely  populated board with more than 16 spaces, I see little better than <code>uint8_t piece[12]</code> or if you like bit twiddling for a 5x5 board (25 places --&gt; 5 bits) and 12 pieces, use 60 bits of a <code>uint64_t</code>."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1474482698, "post_id": 39623081, "comment_id": 66553429, "body": "A factor of 24??? Are you sure? How do you compare both representations?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474482798, "post_id": 39623081, "comment_id": 66553477, "body": "For your 6 pieces in 9 positions the na&#239;ve solution requires 6*4 = 24 bits to represent. The next solution requires 4+3+3+3+3+2 = 18 bits to represent. If you pack it even further with no wastage it would need 9*8*7*6*5*4 = 60480 values to represent, now a 16-bit value."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1474482809, "post_id": 39623081, "comment_id": 66553487, "body": "6 positions in a space of size 9: you can encode each position into 4 bits, leading to 24 bits for each set of position, without any too strong (de)encoding. Isn&#39;t it sufficient?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474482816, "post_id": 39623081, "comment_id": 66553493, "body": "@FUZxxl, you have a very clever encoding of this representation indeed if it&#39;s saving you more than about 5%.  But I will not go into further detail, since you do not want to talk about it."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1474482937, "post_id": 39623081, "comment_id": 66553572, "body": "what is the real number of pieces and the size of the space?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1474483182, "post_id": 39623081, "comment_id": 66553706, "body": "If math serves correct, up to 12 pieces on a 5x5 boards is more combinations than 2^32, but less than 2^64.  If goal is a fixed size record. looks like the fastest 64-bit encoding/decoding is the way to go.  <code>uint64_t state; pos = 31 &amp; (state &gt;&gt; (piece_index*5));</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474483330, "post_id": 39623081, "comment_id": 66553769, "body": "I think you&#39;ve already answered the question in the last snippet. Create an array where the values are initially equal to the indexes. When you use a square, take its value from the array, and decrement all the values to the right. If the board size was huge, you could optimize this with binning. But with only 25 entries in the array, a simple loop is going to be the fastest."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474483333, "post_id": 39623081, "comment_id": 66553773, "body": "@chux I have tested a na&#239;ve encoding with gzip. This is extremely slow as I have to go through an extremely large number of invalid encodings (which you need to decode to determine that they are invalid) while building the table. Also, gzip streams aren&#39;t seekable. While this can be avoided with some tricks, it turns out that rolling out an effective encoding and custom compression can achieve better time and space performance than that. However, all of this is not part of the question."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474483401, "post_id": 39623081, "comment_id": 66553799, "body": "@chux Please stop suggesting alternative approaches. That&#39;s not what this question is about. I do not want to hear about your alternative approaches. I have considered them and determined that I want to do is the best choice for the problem at hand. Please stay on topic."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1474483470, "post_id": 39623081, "comment_id": 66553823, "body": "@Jean-BaptisteYun&#232;s 25 squares and up to 12 pieces, with the number of pieces being known in advance from another part of the encoding."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1474483517, "post_id": 39623081, "comment_id": 66553861, "body": "Not sure but you may not search to encode efficiently each position of the game but encode difference in between two positions (moves) efficiently. If this is fixed size then a seek is easy, if not, you can <i>cut</i> your data into chunks of known size and begin each chunk with the full description of the position..."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1474483543, "post_id": 39623081, "comment_id": 66553875, "body": "@Jean-BaptisteYun&#232;s I am not interested in suggestions for alternative encodings. Please stay on topic."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1474483564, "post_id": 39623081, "comment_id": 66553888, "body": "OP commented that the question does not contain the actual constraints. For your 12 pieces in 25 positions the na&#239;ve solution requires 12*5 = 60 bits to represent. The next solution requires (10*5) + (2*4)  = 58 bits to represent. If you pack it even further with no wastage it would need 25*24*23*22*21*20*19*18*17*16*15*14 = 2490952020480000 values to represent, which is still a 64-bit value."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474483613, "post_id": 39623081, "comment_id": 66553913, "body": "@WeatherVane That is unimportant. Please stay on topic."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1474483677, "post_id": 39623081, "comment_id": 66553956, "body": "@FUZxxl you have confused the question with the new constraints. Please advise the correct topic. I previously commented that a 16-bit value could encode <b><i>the question</i></b>."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474483764, "post_id": 39623081, "comment_id": 66554012, "body": "@WeatherVane The correct topic is to find an efficient (as in: actually efficient) way to implement the encoding and decoding functions described in the question in the C99 programming language as indicated in the <b>The Question</b> section."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474483827, "post_id": 39623081, "comment_id": 66554045, "body": "@WeatherVane The input and output of the encoding and decoding functions are six-tuples of integers in certain ranges, not 16 bit values. Please do not describe alternative functions, I am not interested in them unless they are then immediately used to implement the function I am interested in."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474483898, "post_id": 39623081, "comment_id": 66554088, "body": "I am sorry, I thought you wanted to encode an efficient look-up table. Encoding each position as a 16-bit integer, is more efficient than using 24-bit."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474484185, "post_id": 39623081, "comment_id": 66554235, "body": "&quot;However, this representation is not efficient:&quot; implies an efficiency of <i>space</i>.  Striking this line would help us all as it is not relevant to the goal of &quot;How can I efficiently convert&quot; (a time efficiency) from one form to another."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474484251, "post_id": 39623081, "comment_id": 66554277, "body": "@chux This sentence is part of the motivation that introduces the compact representation. Striking it removes the motivation and makes the question unclear. Let me replace \u201cefficient\u201d with \u201coptimal\u201d instead."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474484295, "post_id": 39623081, "comment_id": 66554305, "body": "@FUZxxl OK I deleted that. But I gave a perfectly clear comment as how an efficient - which you actually hedge at defining - compression can be to only 16 bits, for your example."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474484404, "post_id": 39623081, "comment_id": 66554369, "body": "@WeatherVane That encoding is less efficient as it contains codes that do not correspond to any position. It is important that the number of such codes is as low as possible as I need to iterate over all positions/encodings. However, as I said, other encodings/representations are not the topic of this question."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474484650, "post_id": 39623081, "comment_id": 66554482, "body": "@FUZxxl well you did not digest it. There is no wastage whatsoever in the 9*8*7*6*5*4 = 60480 different positions, which is as low as you can get for the original question (subject to any posssible illegal positions)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474484724, "post_id": 39623081, "comment_id": 66554515, "body": "Posting the not-quite-efficient-enough C code that you have that converts from one form into the other would provide an example of the bottlenecks code is experiencing.  I would be interesting in then seeing how bit fields, bit-dibbling or other standard C constructs would apply or is this just an algorithm post?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1474485353, "post_id": 39623081, "comment_id": 66554862, "body": "@WeatherVane Sorry, I confused your answer. Point is, I don&#39;t actually need to encode the representation into bytes as I never store a representation. The encoded representation is used as an index into a (very large) array (with each array entry containing some knowledge about that position), so it&#39;s the total number of possible encodings that matters. Invalid encodings mean that space is wasted in the array, so I need to avoid these."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1474485498, "post_id": 39623081, "comment_id": 66554928, "body": "@chux I actually haven&#39;t implemented it yet. The na&#239;ve approach to implement this involves two nested loops and runtime of order O(n<i>k) where *n</i> is the number of squares and <i>k</i> is the number of pieces, which is clearly not really fast. Since I wasn&#39;t able to come up with a better idea to implement this conversion of representations, I asked this question."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474485962, "post_id": 39623081, "comment_id": 66555191, "body": "@FUZxxl that was my (not clearly made) point. I meant that <code>60480</code> different positions requires the smallest possible table, whatever the <i>content</i> of that table is, and there are no unused index values (below <code>60481</code>)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474486081, "post_id": 39623081, "comment_id": 66555252, "body": "@WeatherVane Indeed. My comment concerned your comment about 2490952020480000 still being a 64 bit value. Using a lookup table to compute the function is possible in the simplified example I gave  in the question but it is not applicable in the actual case I want to use it in since the number of possible representations is just too large."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474486423, "post_id": 39623081, "comment_id": 66555468, "body": "Now I spent an hour explaining why I want to compute this. Why can&#39;t all of you just believe that the question I ask is the question I want to know an answer for without doubting that I know what I am doing?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474486711, "post_id": 39623081, "comment_id": 66555619, "body": "Going from &quot;na&#239;ve&quot; to &quot;compact&quot; can be done in <code>O((k+n)*log(n))</code> time by using an array <code>n</code> into a height balanced BST.  Uncertain if the added complexity is worth the order-of-complexity savings."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1474496024, "post_id": 39623081, "comment_id": 66560292, "body": "A lot of brain juice was spent on this intricate question, well deserving a round of up-votes."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1474497123, "post_id": 39623081, "comment_id": 66560622, "body": "@Jean-Baptiste Yun&#232;s To your question about the 24 fold improvement: that&#39;s the size difference of the encoding space. The na&#239;ve encoding has a 24 times larger space than the compact one for 12 pieces on 25 squares. That means that with the na&#239;ve encoding, my database would be 24 times larger than with the compact one."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474485662, "post_id": 39624588, "comment_id": 66555026, "body": "This approach is the obvious one, but it is pretty slow as you have to count values at every step. Do you have an idea how to implement this conversion any faster?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474486986, "post_id": 39624588, "comment_id": 66555755, "body": "You may use some obvious shortcuts by retaining the last greatest value and last minimal one... Maybe some tree structure but does it worth the effort?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1474487151, "post_id": 39624588, "comment_id": 66555854, "body": "That&#39;s why I&#39;m asking."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474487309, "post_id": 39624588, "comment_id": 66555935, "body": "Yes a binary tree. At each point you know the value and the number of values less and the number of values greater than the node itself, but constructing and descending the tree may not be very interesting comparing to the naive algorithm..."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474487614, "post_id": 39624588, "comment_id": 66556109, "body": "Such a tree is a solution but I am actually not convinced that for 12 pieces is worth the effort... There is too much overhead in building a tree."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1474900104, "post_id": 39624588, "comment_id": 66709078, "body": "I have implemented a solution using a difference tree; it is quite fast but there are even faster solutions."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1474484640, "creation_date": 1474484640, "answer_id": 39624588, "question_id": 39623081, "link": "https://stackoverflow.com/questions/39623081/how-can-i-effectively-encode-decode-a-compressed-position-description/39624588#39624588", "title": "How can I effectively encode/decode a compressed position description?", "body": "<p>To go from (5, 2, 3, 0, 7, 4) to (5, 2, 2, 0, 3, 1) you just have to :</p>\n\n<ul>\n<li>start with (5, 2, 3, 0, 7, 4), push five in the result (5)</li>\n<li>take 2 and count the number of preceding values less than 2, 0 then push 2-0: (5, 2)</li>\n<li>take 3, count the number of preceding values less than 3, 1 then push 3-1: (5, 2, 2)</li>\n<li>take 0, count the number of preceding values less than 0, 0 then push 0-0 (5,2, 2, 0)</li>\n<li>take 7, count..., 4 then push 7-4: (5,2,2,0,3)</li>\n<li>take 4, count..., 3 then push 4-3: (5,2,2,0,3,1)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474486318, "post_id": 39625018, "comment_id": 66555403, "body": "This is basically the code that I came up with while thinking about the problem, too (though I didn&#39;t write it down yet). I wonder if there is any faster way to compute the conversions... Note that in my use case, I do not actually store the encoded positions. The position code is used as an index into the table base (basically a very large, potentially Huffman encoded array) which contains information about each position. Thus the most important property I need is having as little invalid codes as possible as each invalid code is wasted space."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474488669, "post_id": 39625018, "comment_id": 66556686, "body": "@FUZxxl, I don&#39;t think the conversion you asked about can be done significantly more efficiently.  The conversion you <i>did not</i> ask about may be of interest, however -- I refer to converting the encoded output to an index into your tablebase.  I have added some commentary about that.  Perhaps you already reached a similar conclusion, but perhaps the update will give you something new to think about."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474489657, "post_id": 39625018, "comment_id": 66557252, "body": "To your update: I have thought about that. Point is, using the compressed representation discussed in the question reduces the table base size by a factor of up to 24, so that&#39;s definitely a very useful piece. For the rest, I do have efficient means but they are not part of this question and I do not like to discuss this here."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1474497228, "post_id": 39625018, "comment_id": 66560658, "body": "To further reduce the size of the encoded compact form, you could use arithmetic encoding with a decreasing base for each position.  If the number of pieces is close to the number of positions, this would greatly reduce the resulting table size: <code>for (result = 0, i = 0; i &lt; num_elements; i++) { result = result * (BOARD_SIZE - i) + compact[i]; }</code>"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1474490755, "last_edit_date": 1474490755, "creation_date": 1474486036, "answer_id": 39625018, "question_id": 39623081, "link": "https://stackoverflow.com/questions/39623081/how-can-i-effectively-encode-decode-a-compressed-position-description/39625018#39625018", "title": "How can I effectively encode/decode a compressed position description?", "body": "<p>Your encoding technique has the property that the value of each element of the output tuple depends on the values of the corresponding element and all preceding elements of the input tuple.  <s>I don't see a way to accumulate partial results during computation of one encoded element that could be reused in computation of a different one, and without that, no computation of the encoding can scale more (time) efficiently than o(n<sup>2</sup>) in the number of elements to be encoded.  Therefore,</s> For the problem size you describe, I don't think you can do much better than this:</p>\n\n<pre><code>typedef &lt;your choice&gt; element_t;\n\nvoid encode(element_t in[], element_t out[], int num_elements) {\n    for (int p = 0; p &lt; num_elements; p++) {\n        element_t temp = in[p];\n\n        for (int i = 0; i &lt; p; i++) {\n            temp -= (in[i] &lt; in[p]);\n        }\n\n        out[p] = temp;\n    }\n}\n</code></pre>\n\n<p>The corresponding decoding could be done like this:</p>\n\n<pre><code>void decode(element_t in[], element_t out[], int num_elements) {\n    for (int p = 0; p &lt; num_elements; p++) {\n        element_t temp = in[p];\n\n        for (int i = p - 1; i &gt;= 0; i--) {\n            temp += (in[i] &lt;= temp);\n        }\n\n        out[p] = temp;\n    }\n}\n</code></pre>\n\n<p>There are approaches that scale better, some of them discussed in comments and in other answers, but my best guess is that your problem size is not large enough for their improved scaling to overcome their increased overhead.</p>\n\n<p>Obviously, these transformation do not themselves change the size of the representation at all.  The encoded representation <em>is</em> easier to validate, however, because each position in a tuple can be validated independently from the others.  For that reason, the whole space of valid tuples also can be enumerated much more efficiently in the encoded form than in the decoded form.</p>\n\n<p>I continue to maintain that the decoded form can be stored almost as efficiently as the encoded form, especially if you want to be able to address individual position descriptions.  If your objective for the encoded form is to support bulk enumeration, then you could consider enumerating tuples in the \"encoded\" form, but storing and subsequently using them in the <em>decoded</em> form.  The small amount of extra space needed might very well be worth it for the benefit of not needing to perform the decoding after reading, especially if you plan to read a lot of these.</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>In response to your comment, the elephant in the room is the question of how you convert the encoded form to a single index such as you describe, such that there are as few unused indices as possible.  I think that is the disconnect that spawned so much discussion that you considered off-topic, and I presume that you have some assumptions about that feeding into your assertion of a 24x space savings.</p>\n\n<p>The encoded form <em>is</em> more easily converted to a compact index.  For example, you can treat the position as a little-endian number with the board size as its radix:</p>\n\n<pre><code>#define BOARD_SIZE 25\ntypedef &lt;big enough&gt; index_t;\n\nindex_t to_index(element_t in[], int num_elements) {\n    // The leading digit must not be zero\n    index_t result = in[num_elements - 1] + 1;\n\n    for (int i = num_elements - 1; i--; ) {\n        result = result * BOARD_SIZE + in[i];\n    }    \n}\n</code></pre>\n\n<p>There are still gaps in that, to be sure, but I estimate them to constitute a reasonably small proportion of the overall range of index values used (and arranging for that to be so is the reason for taking a little-endian interpretation).  I leave the reverse transformation as an exercise :).</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474489635, "post_id": 39625492, "comment_id": 66557241, "body": "Interesting.  It seems like your binning technique would be more difficult to apply to <i>de</i>coding (not that that would in any way invalidate it).  Do you disagree?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474490665, "post_id": 39625492, "comment_id": 66557790, "body": "@JohnBollinger TBH, I haven&#39;t given any thought to decoding. I assume that OP already has a satisfactory decoding algorithm and only needs an efficient encoding algorithm, i.e. OP just wants to know how to convert  <code>(5, 2, 3, 0, 7, 4)</code> to <code>(5, 2, 2, 0, 3, 1)</code>. However, your question is interesting, let me think about it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474493812, "post_id": 39625492, "comment_id": 66559382, "body": "@JohnBollinger I believe that binning can be used, but haven&#39;t worked out all the details. If you want to start a new question, I&#39;ll see what I can do. But I&#39;ll expect an upvote and a shiny green thing, feeling under appreciated here :("}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474494751, "post_id": 39625492, "comment_id": 66559825, "body": "@user3386109, yes, not too much appreciation going around on this Q.  The decode binning is not so important to me as to ask you to work out the details, but I gave you an UV on this answer."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1474494914, "post_id": 39625492, "comment_id": 66559897, "body": "@JohnBollinger Thanks, I just finished working out the details, and binning definitely works for decoding."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474496925, "post_id": 39625492, "comment_id": 66560571, "body": "Interesting approach. I think one could avoid the modulo by using four bins of size eight with the last bin containing only one element."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474497309, "post_id": 39625492, "comment_id": 66560683, "body": "@FUZxxl Good point. The optimal number of bins is <code>sqrt(n)</code>, but avoiding the nasty division/modulo might justify using a slightly non-optimal bin count. So the question is, &quot;How bad is a division on a modern processor?&quot; That can only be answered by profiling the code."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1474497431, "post_id": 39625492, "comment_id": 66560716, "body": "@user3386109 Division is terribly slow though the compiler can do some tricks to get it down to 20 or so cycles. If the optimal number is sqrt(n), then surely seven bins of four each is good, too."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474498138, "post_id": 39625492, "comment_id": 66560922, "body": "@FUZxxl Yup, I agree."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1474501454, "post_id": 39625492, "comment_id": 66561677, "body": "@user3386109: division by a constant is usually implemented as a multiplication with a minimal adjustment, much less than 20 cycles. You can avoid the modulo with by subtracting the multiplied quotient."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1474504298, "post_id": 39625492, "comment_id": 66562304, "body": "@chqrlie Looking at the optimized assembly code, you are correct. There&#39;s a multiplication followed by 8 additional simple instructions. On the other hand, the <code>for</code> loops are exactly 4 instructions long. On a modern processor, I&#39;m not sure how that trade-off (multiply/adjust versus a couple extra passes through a short loop) works out. So I agree with FUZxxl that seven bins of four each should be good, too. If I had a large chunk of input data, I would profile the code to see how that trade-off works out in the real world."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 3, "last_activity_date": 1474504117, "last_edit_date": 1474504117, "creation_date": 1474487799, "answer_id": 39625492, "question_id": 39623081, "link": "https://stackoverflow.com/questions/39623081/how-can-i-effectively-encode-decode-a-compressed-position-description/39625492#39625492", "title": "How can I effectively encode/decode a compressed position description?", "body": "<p>The naive solution to the problem: create an array where the values are initially equal to the indexes. When you use a square, take its value from the array, and decrement all the values to the right. The running time of this solution is <code>O(n*p)</code> where <code>n</code> is the number of squares on the board and <code>p</code> is the number of pieces on the board.</p>\n\n<pre><code>int codes[25];\n\nvoid initCodes( void )\n{\n    for ( int i = 0; i &lt; 25; i++ )\n        codes[i] = i;\n}\n\nint getCodeForLocation( int location )\n{\n    for ( int i = location + 1; i &lt; 25; i++ )\n        codes[i]--;\n    return codes[location];\n}\n</code></pre>\n\n<p>You can attempt to improve the performance of this code with binning. Consider the locations on the board as 5 bins of 5 locations each. Each bin has an offset and each location in a bin has an value. When a value is taken from bin <code>y</code> at location <code>x</code>, then the offsets for all bins below <code>y</code> are decremented. And all values to the right of <code>x</code> in bin <code>y</code> are decremented. </p>\n\n<pre><code>int codes[5][5];\nint offset[5];\n\nvoid initCodes( void )\n{\n    int code = 0;\n    for ( int row = 0; row &lt; 5; row++ )\n    {\n        for ( int col = 0; col &lt; 5; col++ )\n            codes[row][col] = code++;\n        offset[row] = 0;\n    }\n}\n\nint getCodeForLocation( int location )\n{\n    int startRow = location / 5;\n    int startCol = location % 5;\n    for ( int col = startCol+1; col &lt; 5; col++ )\n        codes[startRow][col]--;\n    for ( int row = startRow+1; row &lt; 5; row++ )\n        offset[row]--;\n    return codes[startRow][startCol] + offset[startRow];\n}\n</code></pre>\n\n<p>The running time of this solution is <code>O(sqrt(n) * p)</code>. However, on a board with 25 squares, you won't see much improvement. To see why consider the actual operations done by the naive solution versus the binned solution. Worst case, the naive solution updates 24 locations. Worst case, the binned solution updates 4 entries in the <code>offset</code> array, and 4 locations in the <code>codes</code> array. So that seems like a 3:1 speedup. However, the binned code contains a nasty division/modulo instruction, and is more complicated overall. So you might get a 2:1 speedup if you're lucky.</p>\n\n<p>If the board size was huge, e.g. 256x256, then binning would be great. The worst case for the naive solution would be 65535 entries, whereas binning would update a maximum of 255+255=510 array entries. So that would definitely make up for the nasty division and increased code complexity. </p>\n\n<p>And therein lies the futility of trying to optimize small problem sets. You don't save much changing <code>O(n)</code> to <code>O(sqrt(n))</code> or <code>O(log(n))</code> when you have <code>n=25 sqrt(n)=5 log(n)=5</code>. You get a theoretical speedup, but that's almost always a false savings when you consider the myriad constant factors that big-O so blithely ignores.</p>\n\n<hr>\n\n<p>For completeness, here's the driver code that can be used with either snippet above</p>\n\n<pre><code>int main( void )\n{\n    int locations[6] = { 5,2,3,0,7,4 };\n    initCodes();\n    for ( int i = 0; i &lt; 6; i++ )\n        printf( \"%d \", getCodeForLocation(locations[i]) );\n    printf( \"\\n\" );\n}\n</code></pre>\n\n<p>Output: <code>5 2 2 0 3 1</code></p>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474895932, "post_id": 39626304, "comment_id": 66706000, "body": "Having benchmarked various approaches over the weekend I can confirm that this is the fastest approach for encoding. Decoding is indeed tricky and I haven&#39;t found a faster approach than the na&#239;ve one that doesn&#39;t require inline assembly (needed for an approach using a difference tree since gcc isn&#39;t smart enough to make use of the carry flag for branch-less code) or fancy intrinsics (<code>pdep</code> and <code>pext</code> blow this problem away)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474896177, "post_id": 39626304, "comment_id": 66706178, "body": "Interestingly, a difference-tree based approach is very fast for decoding on ARM since it has conditional execution and can thus avoid branches in the critical path."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474900323, "post_id": 39626304, "comment_id": 66709218, "body": "After further testing, the vector-approach works fine, too."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1474491614, "last_edit_date": 1474491614, "creation_date": 1474490817, "answer_id": 39626304, "question_id": 39623081, "link": "https://stackoverflow.com/questions/39623081/how-can-i-effectively-encode-decode-a-compressed-position-description/39626304#39626304", "title": "How can I effectively encode/decode a compressed position description?", "body": "<p>To convert from naive to compact position, you can iterate over the n-tuple and perform these steps for each position <code>p</code>:</p>\n\n<ol>\n<li>optionally check that position <code>p</code> is available</li>\n<li>set position <code>p</code> as busy</li>\n<li>subtract from <code>p</code> the number of lower positions that are busy</li>\n<li>store the result into the destination n-tuple</li>\n</ol>\n\n<p>You can do this by maintaining an array of <code>n</code> bits for the busyness state:</p>\n\n<ul>\n<li>step 1, 2 and 4 are computed in constant time</li>\n<li>step 3 can be computed efficiently if the array is small, ie: 64 bits.</li>\n</ul>\n\n<p>Here is an implementation:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* version for up to 9 positions */\n#define BC9(n)  ((((n)&gt;&gt;0)&amp;1) + (((n)&gt;&gt;1)&amp;1) + (((n)&gt;&gt;2)&amp;1) + \\\n                 (((n)&gt;&gt;3)&amp;1) + (((n)&gt;&gt;4)&amp;1) + (((n)&gt;&gt;5)&amp;1) + \\\n                 (((n)&gt;&gt;6)&amp;1) + (((n)&gt;&gt;7)&amp;1) + (((n)&gt;&gt;8)&amp;1))\n#define x4(m,n)    m(n), m((n)+1), m((n)+2), m((n)+3)\n#define x16(m,n)   x4(m,n), x4(m,(n)+4), x4(m,(n)+8), x4(m,(n)+12)\n#define x64(m,n)   x16(m,n), x16(m,(n)+16), x16(m,(n)+32), x16(m,(n)+48)\n#define x256(m,n)  x64(m,n), x64(m,(n)+64), x64(m,(n)+128), x64(m,(n)+192)\n\nstatic int const bc512[1 &lt;&lt; 9] = {\n    x256(BC9, 0),\n    x256(BC9, 256),\n};\n\nint encode9(int dest[], int src[], int n) {\n    unsigned int busy = 0;\n    for (int i = 0; i &lt; n; i++) {\n        int p = src[i];\n        unsigned int bit = 1 &lt;&lt; p;\n        //if (busy &amp; bit) return 1;  // optional validity check\n        busy |= bit;\n        dest[i] = p - bc512[busy &amp; (bit - 1)];\n    }\n    return 0;\n}\n\n/* version for up to 64 positions */\nstatic inline int bitcount64(unsigned long long m) {\n    m = m - ((m &gt;&gt; 1) &amp; 0x5555555555555555);\n    m = (m &amp; 0x3333333333333333) + ((m &gt;&gt; 2) &amp; 0x3333333333333333);\n    m = (m + (m &gt;&gt; 4)) &amp; 0x0f0f0f0f0f0f0f0f;\n    m = m + (m &gt;&gt; 8);\n    m = m + (m &gt;&gt; 16);\n    m = m + (m &gt;&gt; 16 &gt;&gt; 16);\n    return m &amp; 0x3f;\n}\n\nint encode64(int dest[], int src[], int n) {\n    unsigned long long busy = 0;\n    for (int i = 0; i &lt; n; i++) {\n        int p = src[i];\n        unsigned long long bit = 1ULL &lt;&lt; p;\n        //if (busy &amp; bit) return 1;  // optional validity check\n        busy |= bit;\n        dest[i] = p - bitcount64(busy &amp; (bit - 1));\n    }\n    return 0;\n}\n\nint main(int argc, char *argv[]) {\n    int src[argc], dest[argc];\n    int cur, max = 0, n = argc - 1;\n\n    for (int i = 0; i &lt; n; i++) {\n        src[i] = cur = atoi(argv[i + 1]);\n        if (max &lt; cur)\n            max = cur;\n    }\n    if (max &lt; 9) {\n        encode9(dest, src, n);\n    } else {\n        encode64(dest, src, n);\n    }\n    for (int i = 0; i &lt; n; i++) {\n        printf(\"%d \", dest[i]);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>The core optimisation is in the implementation of <code>bitcount()</code>, which you can tailor to your needs by specializing it to the actual number of positions.  I posted above efficient solutions for small numbers upto 9 and large numbers upto 64, but you can craft a more efficient solution for 12 or 32 positions.</p>\n\n<p>In terms of time complexity, in the general case, we still have <strong>O(n<sup>2</sup>)</strong>, but for small values of <code>n</code>, it actually runs in <strong>O(n.Log(n))</strong> or better, since the implementation of <code>bitcount()</code> in parallel can be reduced to log(n) steps or less for <code>n</code> up to 64.</p>\n\n<p>You can look at <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive\" rel=\"nofollow\">http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive</a> for inspiration and amazement.</p>\n\n<p>Unfortunately, I'm still looking for ways to use this or a similar trick for decoding...</p>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474495560, "post_id": 39627199, "comment_id": 66560137, "body": "Very interesting!"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1474496784, "post_id": 39627199, "comment_id": 66560533, "body": "You can also extend the method by using multiple 64-bit values. The (quite clever) optimization here is that you&#39;re updating multiple counters with a single subtraction. With 4 bit counters, you get 16 subtractions for the price of one. With 5 bit counters, you get 12 subtractions for the price of one, etc."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474497908, "post_id": 39627199, "comment_id": 66560852, "body": "@user3386109: true, but unfortunately, you cannot handle 25 positions with two 64-bit words because each word can only hold 12 complete positions... If the grid is square, the next size up from 4x4 is 5x5, requiring 3 words, then 6x6 requiring 4 words, 7x7 requiring 5 words and 8x8 requiring 7 words.  Parallel subtraction is still reasonably simple, but extraction and deletion are more cumbersome with multiple words."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474498719, "post_id": 39627199, "comment_id": 66561064, "body": "@chqrlie That&#39;s true. You could put an 8x8 board into eight 64-bit words, with an 8:1 speed up on the subtractions. But I agree that the 5x5 case is rather annoying because it doesn&#39;t quite fit into 2 words."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474555640, "post_id": 39627199, "comment_id": 66587826, "body": "I benchmarked this vs. the implementation of the naive approach in my own answer.  I generated 100000000 random valid inputs of length 12, and tested the times to encode them all and to decode them all, averaging the results over four trials with different input sets.  The naive encoding averaged 5.07 ns on my hardware for encoding each input and 6.28 ns for decoding.  But <b>this</b> implementation was much faster at 1.10 ns per input to encode, and 1.86 ns per input to decode.  (gcc 4.4.7, optimizing at level -O3)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474555886, "post_id": 39627199, "comment_id": 66588004, "body": "@JohnBollinger: my pleasure ;-)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474556156, "post_id": 39627199, "comment_id": 66588190, "body": "It will not surprise anyone that the difference is smaller when the input length is shorter.  In fact, I find that the naive decoding is actually slightly faster (&lt; 10% difference) for inputs of length 3, though the naive <i>en</i>coding is still more than twice as slow at that length."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1474900429, "post_id": 39627199, "comment_id": 66709286, "body": "In my own tests, this was the fastest approach that doesn&#39;t need non-standard extensions (if your platform has a 128 bit integer that is). I am going to write up an answer with some other ideas I had, but yours is the best according to the constraints I set out."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1474495733, "last_edit_date": 1474495733, "creation_date": 1474495013, "answer_id": 39627199, "question_id": 39623081, "link": "https://stackoverflow.com/questions/39623081/how-can-i-effectively-encode-decode-a-compressed-position-description/39627199#39627199", "title": "How can I effectively encode/decode a compressed position description?", "body": "<p>I have found a more elegant solution for up to 16 positions using 64-bit integers with a single loop for both encoding and decoding:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid encode16(int dest[], int src[], int n) {\n    unsigned long long state = 0xfedcba9876543210;\n    for (int i = 0; i &lt; n; i++) {\n        int p4 = src[i] * 4;\n        dest[i] = (state &gt;&gt; p4) &amp; 15;\n        state -= 0x1111111111111110 &lt;&lt; p4;\n    }\n}\n\nvoid decode16(int dest[], int src[], int n) {\n    unsigned long long state = 0xfedcba9876543210;\n    for (int i = 0; i &lt; n; i++) {\n        int p4 = src[i] * 4;\n        dest[i] = (state &gt;&gt; p4) &amp; 15;\n        unsigned long long mask = ((unsigned long long)1 &lt;&lt; p4) - 1;\n        state = (state &amp; mask) | ((state &gt;&gt; 4) &amp; ~mask);\n    }\n}\n\nint main(int argc, char *argv[]) {\n    int naive[argc], compact[argc];\n    int n = argc - 1;\n\n    for (int i = 0; i &lt; n; i++) {\n        naive[i] = atoi(argv[i + 1]);\n    }\n\n    encode16(compact, naive, n);\n    for (int i = 0; i &lt; n; i++) {\n        printf(\"%d \", compact[i]);\n    }\n    printf(\"\\n\");\n\n    decode16(naive, compact, n);\n    for (int i = 0; i &lt; n; i++) {\n        printf(\"%d \", naive[i]);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>The code uses 64-bit unsigned integers to hold arrays of 16 values in the range <code>0..15</code>. Such an array can be updated in parallel in a single step, extracting a value is straightforward and deleting a value is a bit more cumbersome but still only a few steps.</p>\n\n<p>You could extend this method to 25 positions using non-portable 128-bit integers (type <code>__int128</code> is supported by both gcc and clang), encoding each position on 5 bits, taking advantage of the fact that <code>5 * 25 &lt; 128</code>, but the magical constants are more cumbersome to write.</p>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1599169712, "post_id": 39706321, "comment_id": 112699236, "body": "@facetus I have not!  Though as far as I&#39;m concerned, the Bene\u0161 network does not perform a 1:1 mapping of permutations to integers in the range (0, n! - 1) so it&#39;s not really useful for my purpose.  Feel free to add an answer about Bene\u0161 networks though; it&#39;s certainly going to be interesting to a lot of people!"}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1599193225, "post_id": 39706321, "comment_id": 112703805, "body": "Yes, it uses (n lg(n) - n + 1) bits, instead of lg(n!). I wonder if it has any speed benefits as a compromise. I am working on it. Will be glad to share the results."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1599205624, "post_id": 39706321, "comment_id": 112707639, "body": "@facetus The main problem is that I build a table with one entry per permutation for my use case.  So if the encoding uses more bits than needed, I waste considerable amounts of space."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1599220088, "post_id": 39706321, "comment_id": 112714006, "body": "Sure, no problem. I won&#39;t share anything then."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1599227878, "post_id": 39706321, "comment_id": 112717854, "body": "@facetus It might still be interesting to other readers stumbling upon this question.  Do as you like."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1599259916, "post_id": 39706321, "comment_id": 112729611, "body": "Relax, I was just pulling your lag. I am not doing experiments for you in the first place, and of course I don&#39;t need a permission to do whatever I want."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 1, "last_activity_date": 1475010918, "last_edit_date": 1495541213, "creation_date": 1474902480, "answer_id": 39706321, "question_id": 39623081, "link": "https://stackoverflow.com/questions/39623081/how-can-i-effectively-encode-decode-a-compressed-position-description/39706321#39706321", "title": "How can I effectively encode/decode a compressed position description?", "body": "<p>In this answer, I want to show some of my own ideas for implementing the conversions as well as some benchmarking results.</p>\n\n<p>You can find the code <a href=\"https://github.com/fuzxxl/permcode\" rel=\"nofollow noreferrer\">on Github</a>. These are the results on my main machine:</p>\n\n<pre><code>algorithm   ------ total  time ------  ---------- per  call -----------\n            decoding encoding total    decoding   encoding   total\nbaseline    0.0391s  0.0312s  0.0703s    3.9062ns   3.1250ns   7.0312ns\ncount       1.5312s  1.4453s  2.9766s  153.1250ns 144.5312ns 297.6562ns\nbitcount    1.5078s  0.0703s  1.5781s  150.7812ns   7.0312ns 157.8125ns\ndecrement   2.1875s  1.7969s  3.9844s  218.7500ns 179.6875ns 398.4375ns\nbin4        2.1562s  1.7734s  3.9297s  215.6250ns 177.3438ns 392.9688ns\nbin5        2.0703s  1.8281s  3.8984s  207.0312ns 182.8125ns 389.8438ns\nbin8        2.0547s  1.8672s  3.9219s  205.4688ns 186.7188ns 392.1875ns\nvector      0.3594s  0.2891s  0.6484s   35.9375ns  28.9062ns  64.8438ns\nshuffle     0.1328s  0.3438s  0.4766s   13.2812ns  34.3750ns  47.6562ns\ntree        2.0781s  1.7734s  3.8516s  207.8125ns 177.3438ns 385.1562ns\ntreeasm     1.4297s  0.7422s  2.1719s  142.9688ns  74.2188ns 217.1875ns\nbmi2        0.0938s  0.0703s  0.1641s    9.3750ns   7.0312ns  16.4062ns\n</code></pre>\n\n<h2>Implementations</h2>\n\n<ul>\n<li><strong>baseline</strong> is an implementation that does nothing except reading the input. It's purpose is measuring function call and memory access overhead.</li>\n<li><strong>count</strong> is a \u201cna\u00efve\u201d implementations that stores an occupancy map indicating which squares have pieces on them already</li>\n<li><strong>bitcount</strong> is the same thing but with the occupancy map stored as a bitmap. <code>__builtin_popcount</code> is used for encoding, speeding things up considerably. If one uses a hand-written popcount instead, <strong>bitcount</strong> is still the fastest portable implementation of encoding.</li>\n<li><strong>decrement</strong> is the second na\u00efve implementation. It stores the encoding for each square of the board, after adding a piece all square numbers to the right are decremented.</li>\n<li><strong>bin4</strong>, <strong>bin5</strong>, and <strong>bin8</strong> use binning with bins sized 4, 5, and 8 entries as suggested by <a href=\"https://stackoverflow.com/a/39625492/417501\">user3386109</a>.</li>\n<li><strong>shuffle</strong> computes a slightly different encoding based on the <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">Fisher-Yates shuffle</a>. It works by reconstructing the random values that would have went into a shuffle generating the permuation we want to encode. The code is branchless and fast, in particular when decoding.</li>\n<li><strong>vector</strong> uses a vector of five bit numbers as suggested by <a href=\"https://stackoverflow.com/a/39627199/417501\">chqrlie</a>.</li>\n<li><p><strong>tree</strong> uses a <em>difference tree</em> which is a data structure I made up. It's a full binary tree of depth &lceil;log<sub>2</sub>&thinsp;<em>n</em>&rceil; where the leaves represent each square and the inner nodes on the path to each leave sum to the code of that square (only the nodes where you go right are added). The square numbers are not stored, leading to <em>n</em> &minus; 1 words of extra memory.</p>\n\n<p>With this data structure, we can compute the code for each square in &lceil;log<sub>2</sub>&thinsp;<em>n</em>&rceil; &minus; 1 steps and mark a square as occupied in the same number of steps. The inner loop is <a href=\"https://github.com/fuzxxl/permcode/blob/master/tree.c\" rel=\"nofollow noreferrer\">very simple</a> comprising a branch and two actions, depending on whether you descend to the left or to the right. On ARM, this branch compiles to a few conditional instructions, leading to a very fast implementation. On x86, neither gcc nor clang are smart enough to get rid of the branches.</p></li>\n<li><strong>treeasm</strong> is a variant of <strong>tree</strong> that uses <a href=\"https://github.com/fuzxxl/permcode/blob/master/treeasm.c\" rel=\"nofollow noreferrer\">inline assembly</a> to implement the inner loop of <strong>tree</strong> without branches by carefully manipulating the carry flag.</li>\n<li><strong>bmi2</strong> uses the <code>pdep</code> and <code>pext</code> instructions from the BMI2 instruction set to implement the algorithm in a very fast manner.</li>\n</ul>\n\n<p>For my actual project, I'm probably going to use the <strong>shuffle</strong> implementation since it is the fastest one that does not depend on any unportable extensions (such as Intel intrinsics) or implementation details (such as the availability of 128 bit integers).</p>\n"}], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 2, "accepted_answer_id": 39627199, "answer_count": 6, "score": 4, "last_activity_date": 1599207291, "creation_date": 1474479374, "last_edit_date": 1599207291, "question_id": 39623081, "link": "https://stackoverflow.com/questions/39623081/how-can-i-effectively-encode-decode-a-compressed-position-description", "title": "How can I effectively encode/decode a compressed position description?", "body": "<p>I am writing a tablebase for a Japanese chess variant. To index the table base, I encode each chess position as an integer. In one of the encoding steps, I encode where the pieces are on the board. Since the actual method is a bit complicated, let me explain the problem in a simplified manner.</p>\n<h2>The Encoding</h2>\n<p>In the endgame tablebase, I have (let's say) six distinct chess pieces that I want to distribute over a board with 9 squares. I can na\u00efvely represent their positions by a six-tuple (<em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>, <em>e</em>, <em>f</em>\u2009) where each of the variables <em>a</em> to <em>f</em> is a number in the range 0 to 8 inclusive indicating where the corresponding chess piece is located.</p>\n<p>However, this representation is not optimal: no two chess pieces can occupy the same square but the aforementioned encoding happily allows this. We can encode the same position by a six-tuple [<em>a, b', c', d', e', f'</em>\u2009] where <em>a</em> is the same <em>a</em> as before, <em>b'</em> is a number from 0 to 7 inclusive indicating the number of the square the second piece is on. This works by assigning a number from 0 to 7 to each square the first piece is not on. For example, if the first piece is on square 3, the square numbers for the second piece are:</p>\n<pre><code>1st piece: 0 1 2 3 4 5 6 7 8\n2nd piece: 0 1 2 - 3 4 5 6 7\n</code></pre>\n<p>the other pieces are encoded similarly, <em>c'</em> as a number from 0 to 6, <em>d'</em> as a number from 0 to 5, etc. For example the na\u00efve encoding (5, 2, 3, 0, 7, 4) yields the compact encoding (5, 2, 2, 0, 3, 1):</p>\n<pre><code>1st: 0 1 2 3 4 5 6 7 8 --&gt; 5\n2nd: 0 1 2 3 4 - 5 6 7 --&gt; 2\n3rd: 0 1 - 2 3 - 4 5 6 --&gt; 2\n4th: 0 1 - - 2 - 3 4 5 --&gt; 0\n5th: - 0 - - 1 - 2 3 4 --&gt; 3\n6th: - 0 - - 1 - 2 - 3 --&gt; 1\n</code></pre>\n<p>In my actual encoding, the number of pieces I want to encode is not fixed. The number of squares on the board however is.</p>\n<h2>The Question</h2>\n<p>How can I efficiently convert the na\u00efve representation to the compact representation and vice versa? I use standard C99 for the program. In the context of this question, I am not interested in answers that use non-standard constructs, inline assembly or intrinsics.</p>\n<h2>Question Clarification</h2>\n<p>As there seems to be some confusion about the question:</p>\n<ul>\n<li>The question is to find a practically efficient way to implement the conversion between the <em>na\u00efve</em> and the <em>compact</em> position representations</li>\n<li>Both representations are <em>n</em>-tuples of integers in certain ranges. The question is not about how to encode these representations into anything else.</li>\n<li>In one of the cases I have, the number of squares is 25 and the number of pieces is up to 12. I am however interested in an implementation that works for a reasonable parameter space (e.g. up to 64 squares and up to 32 pieces).</li>\n<li>I am not interested in alternative representations or encodings, especially representations or encodings that are not optimal.</li>\n<li>Nor am I interested in remarks that the <em>compact</em> representation isn't worth the effort.</li>\n</ul>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1474476928, "post_id": 39622332, "comment_id": 66550399, "body": "Why does code use <code>double</code> in <code>swapByteOrder_int16(double *current, int16_t *rawsignal, int64_t length)</code> instead of <code>int16_t</code>?"}, {"owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474477090, "post_id": 39622332, "comment_id": 66550491, "body": "The rest of the code uses <code>double</code> to process the output of the I/O section of the code. Since I&#39;m casting from <code>int16_t</code> to <code>double</code> there should be no loss of precision. There is an implicit cast in the assignment to <code>current[i]</code>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1474477198, "post_id": 39622332, "comment_id": 66550553, "body": "<code>rawsignal[2*i]</code> means that the input is 32 bits per int. Now, if those are also swapped, you should use <code>rawsignal[2*(i+1)-1]</code> Use a debugger to check what is happening."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1474477335, "post_id": 39622332, "comment_id": 66550643, "body": "<code>rawsignal</code> should be unsigned. Otherwise the <code>&gt;&gt; 8</code> may move in 1-bits (sign extension)."}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1474477362, "post_id": 39622332, "comment_id": 66550654, "body": "You may not need to port this to C.  See <a href=\"http://docs.scipy.org/doc/numpy/user/basics.byteswapping.html\" rel=\"nofollow noreferrer\">Byte-swapping Introduction to byte ordering and ndarrays</a> from the <code>numpy</code> docs."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474477417, "post_id": 39622332, "comment_id": 66550679, "body": "OK, so code used <code>double</code> later on, then why call the function <code>swapByteOrder_int16()</code> as doing some <code>double</code> math in it mis-leads."}, {"owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1474477487, "post_id": 39622332, "comment_id": 66550720, "body": "@Paul Ogilvie I don&#39;t quite understand. <code>rawsignal[2*i]</code> just refers to the 2i-th <code>16-bit </code>int` int he array, no? I will change to an unsigned array for rawsignal."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474477542, "post_id": 39622332, "comment_id": 66550748, "body": "Perhaps <code>((rawsignal[2*i] &lt;&lt; 8) | ((rawsignal[2*i] &gt;&gt; 8) &amp; 0xFF))</code> --&gt; <code>((rawsignal[i] &lt;&lt; 8) | ((rawsignal[i] &gt;&gt; 8) &amp; 0xFF))</code>  Why the *2`?"}, {"owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474477594, "post_id": 39622332, "comment_id": 66550781, "body": "@chux, no, because then I will get alternating values from each column. the data is stored as [good value][bad value][good value][badvalue]. I need to pick out the good values and discard the bad ones."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474477642, "post_id": 39622332, "comment_id": 66550800, "body": "I see the &quot;pick off every other value&quot; now."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1474478139, "post_id": 39622332, "comment_id": 66551037, "body": "<code>hton[s|l]</code> and <code>ntoh[s|l]</code> are useful library functions/macros to reverse byte order."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1474478335, "post_id": 39622332, "comment_id": 66551155, "body": "@tofro <code>ntoh[s|l]</code> and company do not necessarily reverse the byte order.  Then adjust the byte order from local (LE, BE, etc.) to network endian (BE) which may be a no-op.  What we know here is the C code and the file data are opposites."}, {"owner": {"reputation": 3600, "user_id": 3841161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf3ec13097b93112cf97da8cf4e06a9?s=128&d=identicon&r=PG&f=1", "display_name": "coladict", "link": "https://stackoverflow.com/users/3841161/coladict"}, "edited": false, "score": 0, "creation_date": 1474478447, "post_id": 39622332, "comment_id": 66551214, "body": "Big Endian is also called network order. You can use ntoh() for 16 bits, ntohl() for 32. <a href=\"https://www.gnu.org/software/libc/manual/html_node/Byte-Order.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Byte-Order.html</a> Those functions are also available on Windows. If you&#39;re using the GNU compiler, it might be even better to use the intrinsic functions <code>__builtin_bswap16</code> <code>__builtin_bswap32</code> <code>__builtin_bswap64</code> because they only generate one instruction for the whole conversion."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474478696, "post_id": 39622332, "comment_id": 66551337, "body": "@chux But in this case, the raw data is effectively in &quot;network byte order&quot; (i.e. big-endian), so <code>ntohs</code> should effectively do the right thing, but the result will still need converting casting to <code>int16_t</code> before converting to <code>double</code>. (I know that conversion to <code>int16_t</code> is non-portable, but it&#39;s easy!)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1474478831, "post_id": 39622332, "comment_id": 66551398, "body": "@Ian True, OP did say &quot;Because my machine is natively little-endian&quot; thus implying <code>BE</code> in the file."}, {"owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "edited": false, "score": 0, "creation_date": 1474479130, "post_id": 39622332, "comment_id": 66551553, "body": "Thanks for the help, all"}], "answers": [{"comments": [{"owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "edited": false, "score": 0, "creation_date": 1474478226, "post_id": 39622726, "comment_id": 66551087, "body": "This does the trick. I figured it out slightly differently, but I think our approaches are equivalent."}, {"owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "edited": false, "score": 0, "creation_date": 1474478818, "post_id": 39622726, "comment_id": 66551392, "body": "See my posted answer for the way I implemented it, but this post gave me the answer so I accepted it."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1474478085, "creation_date": 1474478085, "answer_id": 39622726, "question_id": 39622332, "link": "https://stackoverflow.com/questions/39622332/reading-big-endian-files-in-little-endian-system/39622726#39622726", "title": "reading big-endian files in little-endian system", "body": "<p>Perform the endian swap as unsigned math and then assign to <code>double</code>.</p>\n\n<pre><code>void swapByteOrder_int16(double *current, const int16_t *rawsignal, size_t length) {\n    for (size_t i = 0; i &lt; length; i++) {\n      int16_t x = rawsignal[2*i];\n      x = (x*1u &lt;&lt; 8) | (x*1u &gt;&gt; 8);\n      current[i] = x;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "edited": false, "score": 0, "creation_date": 1474478699, "post_id": 39622807, "comment_id": 66551339, "body": "I believe this is equivalent to the answer I accepted, but you were slightly slower ^_^. For interest, I posted my solution as implemented as another answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1474478709, "post_id": 39622807, "comment_id": 66551344, "body": "The first <code>&amp; 0xffu</code> is not needed.  The second <code>&amp; 0xffu</code> is wrong, perhaps 0xFF00 (and also not needed)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1474480733, "post_id": 39622807, "comment_id": 66552429, "body": "Please fix the masking since it is not correct - this code won&#39;t work."}, {"owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "edited": false, "score": 0, "creation_date": 1474482036, "post_id": 39622807, "comment_id": 66553081, "body": "chux: yes, the first <code>&amp;</code> is not needed.  But it makes things more symmetrically (e.g. when converting an <code>uint32_t</code>).  It increases readability too and almost every compiler will optimize it away."}], "tags": [], "owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "is_accepted": false, "score": -1, "last_activity_date": 1474481539, "last_edit_date": 1474481539, "creation_date": 1474478352, "answer_id": 39622807, "question_id": 39622332, "link": "https://stackoverflow.com/questions/39622332/reading-big-endian-files-in-little-endian-system/39622807#39622807", "title": "reading big-endian files in little-endian system", "body": "<p>Swapping bits with unsigned types will make things much easier:</p>\n\n<pre><code>void swapByteOrder_int16(double *current, void const *rawsignal_, size_t length)\n{\n    uint16_t const *rawsignal = rawsignal_;\n    size_t i;\n    for (i=0; i&lt;length; i++)\n    {\n       uint16_t tmp = rawsignal[2*i];\n       tmp = ((tmp &gt;&gt; 8) &amp; 0xffu) | ((tmp &lt;&lt; 8) &amp; 0xff00u);\n       current[i] = (int16_t)(tmp);\n    }\n}\n</code></pre>\n\n<p>NOTE: when <code>rawsignal</code> is not aligned, you have to <code>memcpy()</code> it.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 6386975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6WTcG.jpg?s=128&g=1", "display_name": "Felipe Ortiz", "link": "https://stackoverflow.com/users/6386975/felipe-ortiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1474478400, "creation_date": 1474478400, "answer_id": 39622827, "question_id": 39622332, "link": "https://stackoverflow.com/questions/39622332/reading-big-endian-files-in-little-endian-system/39622827#39622827", "title": "reading big-endian files in little-endian system", "body": "<p>I prefer this mask and shift combination: </p>\n\n<pre><code>current[i] = ((rawsignal[2*i] &amp; 0x00ff) &lt;&lt; 8) | (rawsignal[2*i] &gt;&gt; 8)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "is_accepted": false, "score": 0, "last_activity_date": 1474478763, "creation_date": 1474478763, "answer_id": 39622944, "question_id": 39622332, "link": "https://stackoverflow.com/questions/39622332/reading-big-endian-files-in-little-endian-system/39622944#39622944", "title": "reading big-endian files in little-endian system", "body": "<p>As suggested by several people, doing the shifts as unsigned does the trick. I am answering this with my implementation just for the sake of completeness since I tweaked it a little from the accepted answer:</p>\n\n<pre><code>void swapByteOrder_int16(double *current, uint16_t *rawsignal, int64_t length)\n{\n    union int16bits bitval;\n\n    int64_t i;\n    for (i=0; i&lt;length; i++)\n    {\n        bitval.bits = rawsignal[2*i];\n        bitval.bits = (bitval.bits &lt;&lt; 8) | (bitval.bits &gt;&gt; 8);\n        current[i] = (double) bitval.currentval;\n    }\n}\n\nunion int16bits\n{\n    uint16_t bits;\n    int16_t currentval;\n};\n</code></pre>\n"}], "owner": {"reputation": 1089, "user_id": 2521423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1076e7e984770f40a8dfdc3241f2f41f?s=128&d=identicon&r=PG", "display_name": "KBriggs", "link": "https://stackoverflow.com/users/2521423/kbriggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 39622726, "answer_count": 4, "score": 1, "last_activity_date": 1474481539, "creation_date": 1474476797, "last_edit_date": 1474477037, "question_id": 39622332, "link": "https://stackoverflow.com/questions/39622332/reading-big-endian-files-in-little-endian-system", "title": "reading big-endian files in little-endian system", "body": "<p>I have a data file that I need to read in C. It is compirsed of alternating 16-bit integer stored in binary form, and I need only the first column (ie, every other entry starting at 0)</p>\n\n<p>I have a simple python script that reads the files accurately:</p>\n\n<pre><code>import numpy as np\n\n\nfname = '[filename]'\ncolumntypes = np.dtype([('curr_pA', '&gt;i2'),('volts', '&gt;i2')])\ntest = np.memmap(fname, dtype=columntypes,mode='r')['curr_pA']\n</code></pre>\n\n<p>I want to port this to C. Because my machine is natively little-endian I need to manually perform the byte swap. Here's what I have done:</p>\n\n<pre><code>void swapByteOrder_int16(double *current, int16_t *rawsignal, int64_t length)\n{\n    int64_t i;\n    for (i=0; i&lt;length; i++)\n    {\n        current[i] = ((rawsignal[2*i] &lt;&lt; 8) | ((rawsignal[2*i] &gt;&gt; 8) &amp; 0xFF));\n    }\n}\n\n\nint64_t read_current_int16(FILE *input, double *current, int16_t *rawsignal, int64_t position, int64_t length)\n{\n    int64_t test;\n\n    int64_t read = 0;\n\n    if (fseeko64(input,(off64_t) position*2*sizeof(int16_t),SEEK_SET))\n    {\n        return 0;\n    }\n    test = fread(rawsignal, sizeof(int16_t), 2*length, input);\n    read = test/2;\n    if (test != 2*length)\n    {\n        perror(\"End of file reached\");\n    }\n    swapByteOrder_int16(current, rawsignal, length);\n    return read;\n}\n</code></pre>\n\n<p>In the <code>read_current_int16</code> function I use <code>fread</code> to read a large chunk of data (both columns) into <code>rawsignal</code> array. I then call <code>swapByteOrder_int16</code> to pick off every other value, and swap its bytes around. I then cast the result to <code>double</code> and store it in <code>current</code>.</p>\n\n<p>It doesn't work. I get garbage as the output in the C code. I think I've been starting at it for too long and can no longer see my own errors. Can anyone spot anything glaringly wrong?</p>\n"}, {"tags": ["c", "char", "int", "bit"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1474475583, "post_id": 39621937, "comment_id": 66549611, "body": "<code>scanf(&quot;%d&quot;,&amp;n);</code> the format specifier does not match the data type, and the other <code>scanf</code> too."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1474475589, "post_id": 39621937, "comment_id": 66549614, "body": "<code>scanf(&quot;%d&quot;,&amp;n)</code> with <code>char n</code> yields undefined behavior. Same for <code>scanf(&quot;%d&quot;,&amp;pos)</code>. In practice, <code>scanf</code> writes 4 bytes of data into a variable whose size is 1 byte (though these sizes in general are not dictated by the language standard, this is the case on most platforms). You need to make up your mind what type of data you want to scan from the keyboard. With <code>&quot;%d&quot;</code> - use <code>int</code>. For <code>char</code> - use <code>&quot;%c&quot;</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1474475626, "post_id": 39621937, "comment_id": 66549628, "body": "Please submit formatted code"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474475866, "post_id": 39621937, "comment_id": 66549770, "body": "Aside: always use parentheses in a macro, like <code>#define SETBIT(A,B) (A|1&lt;&lt;B)</code>"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1474475898, "post_id": 39621937, "comment_id": 66549796, "body": "@WeatherVane: I think you mean <code>((A)|1&lt;&lt;(B))</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1474475925, "post_id": 39621937, "comment_id": 66549808, "body": "No I meant what I wrote. If <code>A</code> or <code>B</code> arguments are macros, then they too will be parenthesised, but your version is safer."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1474476277, "post_id": 39621937, "comment_id": 66550006, "body": "@WeatherVane all macro arguments should be parenthesized in the macro. <code>SETBIT(1, 2|4)</code> may have a different result than <code>SETBIT(1, 6)</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474476755, "post_id": 39621937, "comment_id": 66550285, "body": "<code>char n; scanf(&quot;%d&quot;,&amp;n);</code> raises a warning on good compilers and those with warnings well enabled.  Save time.  Enable all warnings."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5039663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5fa14dfd53dcc438e56b041fa30e6f?s=128&d=identicon&r=PG&f=1", "display_name": "rin92", "link": "https://stackoverflow.com/users/5039663/rin92"}, "edited": false, "score": 0, "creation_date": 1474480218, "post_id": 39622797, "comment_id": 66552192, "body": "Still  output is same."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1474478323, "creation_date": 1474478323, "answer_id": 39622797, "question_id": 39621937, "link": "https://stackoverflow.com/questions/39621937/why-the-below-code-is-giving-different-output-when-variable-type-is-different/39622797#39622797", "title": "Why the below code is giving different output when variable type is different?", "body": "<p>For the <code>*scanf</code> functions, the <code>d</code> conversion specifier expects its corresponding parameter to have type <code>int *</code>; if that's not the case, then the behavior is <em>undefined</em>, and pretty much <em>any</em> result is possible.  </p>\n\n<p>If you want to use <code>char</code> for <code>pos</code> and <code>n</code>, then you must use <code>%hhd</code> instead of <code>%d</code> in the <code>scanf</code> call.  </p>\n"}], "owner": {"reputation": 23, "user_id": 5039663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5fa14dfd53dcc438e56b041fa30e6f?s=128&d=identicon&r=PG&f=1", "display_name": "rin92", "link": "https://stackoverflow.com/users/5039663/rin92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1474478323, "creation_date": 1474475430, "last_edit_date": 1474475650, "question_id": 39621937, "link": "https://stackoverflow.com/questions/39621937/why-the-below-code-is-giving-different-output-when-variable-type-is-different", "title": "Why the below code is giving different output when variable type is different?", "body": "<pre><code>//o/p when i/p is 16 and 2 is 4 and if  variable is int then o/p will be 20;   \n\n#define SETBIT(A,B) A|1&lt;&lt;B\n\nint main(){\n    char n,pos;\n    printf(\"Enter a value\");\n    scanf(\"%d\",&amp;n);\n    printf(\"Enter position\");\n    scanf(\"%d\",&amp;pos);\n    printf(\"Value after setting %d\",SETBIT(n,pos));\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "signals", "alarm"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1474475780, "post_id": 39621838, "comment_id": 66549709, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "edited": false, "score": 0, "creation_date": 1474476131, "post_id": 39622063, "comment_id": 66549925, "body": "Just for some extra knowledge, is alarm the replacement of ualarm?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "edited": false, "score": 1, "creation_date": 1474479181, "post_id": 39622063, "comment_id": 66551595, "body": "@duckvader, <code>alarm()</code> does not have the same resolution as <code>ualarm()</code>, but it&#39;s a fine alternative if that&#39;s sufficient.  In BSD, were it originated, <code>ualarm()</code> was a wrapper around <code>getitimer()</code> / <code>setitimer()</code>.  Those are now also obsolete (though maybe not yet removed).  The recommended replacement is POSIX timers, accessed via <code>timer_gettime()</code> / <code>timer_settime()</code>."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1474475887, "creation_date": 1474475887, "answer_id": 39622063, "question_id": 39621838, "link": "https://stackoverflow.com/questions/39621838/issues-with-using-ualarm/39622063#39622063", "title": "Issues with using ualarm", "body": "<p><code>ualarm()</code> is obsolete, and in fact has been removed from POSIX.  Do not use it.</p>\n\n<p>If you insist on using it anyway, the Linux manual page for it notes this:</p>\n\n<blockquote>\n  <p>The type useconds_t is an unsigned integer type capable of holding integers in the range [0,1000000].</p>\n</blockquote>\n\n<p>, which I guess is a reference to the one-time POSIX specification.  What you should take from that is that POSIX <code>ualarm()</code> was never guaranteed to be able to handle a first argument larger than 1000000.  It's unclear whether any implementations ever did handle larger values, but the fact that POSIX specified it as it did suggests that at least some implementations did not.</p>\n\n<blockquote>\n  <p>Is there any way to get ualarm to work for over 1 second?</p>\n</blockquote>\n\n<p>Since there is not (any longer) any standard for <code>ualarm()</code>, the answer is necessarily implementation-dependent.  Based on what you presented, I'm inclined to think that with your implementation, the answer is \"no\".</p>\n"}], "owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 39622063, "answer_count": 1, "score": 0, "last_activity_date": 1474475887, "creation_date": 1474475120, "question_id": 39621838, "link": "https://stackoverflow.com/questions/39621838/issues-with-using-ualarm", "title": "Issues with using ualarm", "body": "<p>In my code, i need to call sigalrm after 2 seconds. However, when i use             <code>ualarm(2000000, 0 )</code> it doesn't work. using <code>ualarm</code> less than 1 second works. Whereas <code>alarm(2)</code> works. Is there a reason why <code>ualarm</code> should be used at times over <code>alarm</code>? Is there any way to get <code>ualarm</code> to work for over 1 second?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1474474428, "post_id": 39621551, "comment_id": 66548935, "body": "<code>scanf (&quot;&#39;c&#39;&quot;,&amp;firstname)</code> -&gt; <code>scanf (&quot;%19s&quot;, firstname)</code>."}, {"owner": {"reputation": 13, "user_id": 6859418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qPWu_kSYUCM/AAAAAAAAAAI/AAAAAAAAAZQ/I67yhryKLZs/photo.jpg?sz=128", "display_name": "JaviHGM", "link": "https://stackoverflow.com/users/6859418/javihgm"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1474474684, "post_id": 39621551, "comment_id": 66549097, "body": "it still crashes, I use Dev c++ as the ide"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1474474801, "post_id": 39621551, "comment_id": 66549161, "body": "It doesn&#39;t compile or your compiler should at least issue warnings."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1474474813, "post_id": 39621551, "comment_id": 66549169, "body": "You have more of such errors. Also, you need to fix the <code>if</code> line. See <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 13, "user_id": 6859418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qPWu_kSYUCM/AAAAAAAAAAI/AAAAAAAAAZQ/I67yhryKLZs/photo.jpg?sz=128", "display_name": "JaviHGM", "link": "https://stackoverflow.com/users/6859418/javihgm"}, "edited": false, "score": 0, "creation_date": 1474474836, "post_id": 39621551, "comment_id": 66549186, "body": "It compiles and runs but when I type my name it crashes"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474485173, "post_id": 39621776, "comment_id": 66554746, "body": "Even though<code>scanf (&quot;%s&quot;, firstname);</code> is simpler for a  learner, suggest <code>scanf (&quot;%19s&quot;, firstname);</code> as it is easier to debug given we do not know what OP may enter."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474559209, "post_id": 39621776, "comment_id": 66590401, "body": "when using the <code>%s</code> format specifier in <code>scanf()</code>, always use a max characters modifier that is one less than the length of the input buffer so the user cannot overrun the input buffer as that would result in undefined behavior that can lead to a seg fault event.  I.E. <code>scanf (&quot;%19s&quot;, firstname)</code>"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1474475492, "last_edit_date": 1474475492, "creation_date": 1474474941, "answer_id": 39621776, "question_id": 39621551, "link": "https://stackoverflow.com/questions/39621551/c-program-error-with-char/39621776#39621776", "title": "C Program error with char", "body": "<p>There are many issues:</p>\n\n<p>You probably want this (untested code)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {    \n   char firstname[20];\n   char lastname[20];\n   char response[20];\n\n   printf (\"Type your first name:\\n\");\n   scanf (\"%s\", firstname);\n   printf (\"\\n\");  \n   printf (\"Type your last name:\\n\");\n   scanf (\"%s\", lastname);\n   printf (\"\\n\");\n\n   printf (\"Hi %s %s do you want to stop giving me information?\\nSay Y or  N\", firstname, lastname);\n   scanf (\"%s\",response);\n\n   if (response[0] == 'Y' || response[0] == 'y') {\n      system (\"pause&lt;NULL\");\n   }\n   printf(\"Thank you for using my program. Good Bye!\\n\\n\"); \n\n   system (\"pause&lt;NULL\");\n\n   return 0;\n}\n</code></pre>\n\n<ul>\n<li>There is no <code>'c'</code> format specifier, it's <code>%s</code></li>\n<li><code>scanf (\"%s\", &amp;firstname)</code> is wrong, <code>firstname</code> is already the address of the buffer</li>\n<li><code>response == 'y'</code>is wrong, <code>response</code> is the address of the buffer, you just need the first char of the buffer, that is <code>responde[0]</code> </li>\n<li><code>if (response[0] == 'Y' || response[0] == 'y'); {</code>, there was a stray <code>;</code> before the <code>{</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1474475842, "post_id": 39621780, "comment_id": 66549756, "body": "That&#39;s rather a comment than an answer"}], "tags": [], "owner": {"reputation": 31, "user_id": 4133084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02254b5016142b926c8e8566c5e9964?s=128&d=identicon&r=PG&f=1", "display_name": "Openeye", "link": "https://stackoverflow.com/users/4133084/openeye"}, "is_accepted": false, "score": 0, "last_activity_date": 1474474952, "creation_date": 1474474952, "answer_id": 39621780, "question_id": 39621551, "link": "https://stackoverflow.com/questions/39621551/c-program-error-with-char/39621780#39621780", "title": "C Program error with char", "body": "<p>Your problem is that you are asking for a char input, you want a string.</p>\n\n<p>tutorialspoint has a simlpe and claean example. \n<a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm\" rel=\"nofollow\">https://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm</a></p>\n"}], "owner": {"reputation": 13, "user_id": 6859418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qPWu_kSYUCM/AAAAAAAAAAI/AAAAAAAAAZQ/I67yhryKLZs/photo.jpg?sz=128", "display_name": "JaviHGM", "link": "https://stackoverflow.com/users/6859418/javihgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1474475492, "creation_date": 1474474112, "last_edit_date": 1474474695, "question_id": 39621551, "link": "https://stackoverflow.com/questions/39621551/c-program-error-with-char", "title": "C Program error with char", "body": "<p>When I execute the program it asks me for my name if I put more than one letter it has an error and it shuts down and in the second one anyting I put it fails and closes instantly</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\n\n   char firstname[20];\n   char lastname[20];\n   char response[20];\n\n   printf (\"Type your first name:\\n\");\n   scanf (\"'c'\",&amp;firstname);\n   printf (\"\\n\");  \n   printf (\"Type your last name:\\n\");\n   scanf (\"'c'\",&amp;lastname);\n   printf (\"\\n\");\n\n   printf (\"Hi %s %s do you want to stop giving me information?\\nSay Y or  N\");\n   scanf (\"%s\",&amp;response);\n\n   if (response == 'Y' || response == 'y'); {\n      system (\"pause&lt;NULL\");\n   }\n   printf(\"Thank you for using my program. Good Bye!\\n\\n\"); \n\n   system (\"pause&lt;NULL\");\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "char"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1474473771, "post_id": 39621342, "comment_id": 66548559, "body": "<code>scanf(&quot;%c &quot;,arr[tmp]);</code> --&gt; <code>scanf(&quot;%c&quot;, &amp;arr[tmp]);</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1474473773, "post_id": 39621342, "comment_id": 66548560, "body": "In the first case, you have an array of <code>char</code>, but you try to treat the <i>elements</i> as (pointers to) <code>char</code> arrays."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1474474535, "post_id": 39621342, "comment_id": 66549005, "body": "<code>fflush(stdin);</code> invokes undefined behaviour. You cannot flush input streams."}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 5793907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/915bf7644117e74a5068633e5d11421f?s=128&d=identicon&r=PG&f=1", "display_name": "Najat", "link": "https://stackoverflow.com/users/5793907/najat"}, "is_accepted": true, "score": 1, "last_activity_date": 1474475471, "creation_date": 1474475471, "answer_id": 39621950, "question_id": 39621342, "link": "https://stackoverflow.com/questions/39621342/want-to-store-char-values-in-array-in-c-language/39621950#39621950", "title": "Want to store &quot;char values&quot; in array (in C language)", "body": "<p>Array of char data type is called Sting. You can take a string's input using scanf() and gets(). But if you use scanf(), the string will be input by pressing Space-bar or Enter. But if you use gets(), input will be given only by pressing the Enter key. </p>\n\n<p>Example 1:</p>\n\n<pre><code>char s[100];\nscanf(\"%s\", s);\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>char s[100];\ngets(s);\n</code></pre>\n\n<p>Now, if you want to input every single character individually, you can do that also:</p>\n\n<pre><code>    char s[100], c;\n    int n, i, j;\n    scanf(\"%d\", &amp;n);\n    getchar();\n    for(i=0; i&lt;n; i++) {\n        scanf(\"%c\", &amp;s[i]);\n    }\n\n    s[i] = '\\0';\n</code></pre>\n\n<p>Now look, I wrote a <code>getchar()</code> after <code>scanf(\"%d\", &amp;n);</code>, because when you press enter after inputting n, a new line character ('\\n') is also taken as input in the character next to n. So you must do this in case like this.</p>\n\n<p>One more thing, you can take input any string containing spaces using <code>scanf()</code> also. Just do this:</p>\n\n<pre><code>char s[100];\nscanf(\"%[^\\n]\", s);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3142, "user_id": 2311167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZpVr.jpg?s=128&g=1", "display_name": "Adrian W", "link": "https://stackoverflow.com/users/2311167/adrian-w"}, "edited": false, "score": 0, "creation_date": 1556989373, "post_id": 55984717, "comment_id": 98618897, "body": "Pleas do not post images of code or of text output. Provide the text as text instead, please."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1556996071, "post_id": 55984717, "comment_id": 98620738, "body": "There is no function <code>gets</code> in C any more, it was removed as inherently unsafe. Use fgets instead."}], "tags": [], "owner": {"reputation": 1, "user_id": 11452641, "user_type": "registered", "profile_image": "https://graph.facebook.com/2180822228692443/picture?type=large", "display_name": "Chirag Bosamiya", "link": "https://stackoverflow.com/users/11452641/chirag-bosamiya"}, "is_accepted": false, "score": -2, "last_activity_date": 1556988320, "creation_date": 1556988320, "answer_id": 55984717, "question_id": 39621342, "link": "https://stackoverflow.com/questions/39621342/want-to-store-char-values-in-array-in-c-language/55984717#55984717", "title": "Want to store &quot;char values&quot; in array (in C language)", "body": "<p>You can not enter the individual character by following snippet of code.</p>\n\n<pre><code>    char arr[10] = {0};\n    //unsigned char ch;\n    unsigned int i = 0;\n    printf(\"Enter the array elements\\n\");\n    for(i = 0; i&lt;10; i++)\n    {\n            scanf(\"%c\", &amp;arr[i]);\n            printf(\"i = %d and arr[%d] = %c\\n\", i, i, arr[i]);\n    }\n</code></pre>\n\n<p>The result of this snippet is as per this image. <a href=\"https://i.stack.imgur.com/QRn0R.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>To avoid this issue, it is recommended to enter the character without new line charactoer '\\n' or without pressing enter. </p>\n\n<p>Or other method is to use the array as string and input the character by gets() like this snippet.</p>\n\n<pre><code>char s[100];\ngets(s);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6859334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffa9f57ad4ed4c99011d629e9d3ccc61?s=128&d=identicon&r=PG&f=1", "display_name": "user271018", "link": "https://stackoverflow.com/users/6859334/user271018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15272, "favorite_count": 0, "accepted_answer_id": 39621950, "answer_count": 2, "score": -5, "last_activity_date": 1556988320, "creation_date": 1474473455, "last_edit_date": 1474476131, "question_id": 39621342, "link": "https://stackoverflow.com/questions/39621342/want-to-store-char-values-in-array-in-c-language", "title": "Want to store &quot;char values&quot; in array (in C language)", "body": "<p>I want to store \"char data type values\" in an array, but it doesn't work.</p>\n\n<p>First, I tried using \"gets\"\nbut it gave me a run time error.\nCode was like this</p>\n\n<pre><code>   int tmp = 0;\n\n\n   char arr[100] = { 0, };\n   while (arr[tmp]!=NULL)\n   {\n      gets(arr[tmp]);\n      tmp++;\n   }\n   for (int rtmp = 0; rtmp &lt; a; rtmp++)\n    printf(\"%s \", arr[rtmp]);\n   return 0;\n</code></pre>\n\n<p>In a second way, I was using \"scanf\", but I couldn't store \"char data type(it should be more than one character like string)\", but only one character was available.(I tried %s, but it doesn't work)\nPlus, it doesn't print the last value of array.</p>\n\n<pre><code>int a = 0;\nscanf(\"%d\", &amp;a); //determine how much I input values\n\nint tmp = 0;\nchar arr[100] ={ 0 , };\nfor(tmp=0;tmp&lt;a;tmp++)\n{\n    scanf(\"%c \",arr[tmp]);\n    fflush(stdin);\n}\nfor (int rtmp = 0; rtmp &lt; a; rtmp++)\n    printf(\"%c \", arr[rtmp]);\nreturn 0;\n</code></pre>\n\n<p>The most \"identical\" for me is\nwithout notifying \"a\" values(\"a\" means how much values I input)\nand storing \"char values\" in array..</p>\n\n<p>How can I solve this problem? \nThanks in advance! Your help is always appreciated :)</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 6, "creation_date": 1474470070, "post_id": 39619990, "comment_id": 66546106, "body": "Turn on your compiler warnings, and pay attention to them.  It should be complaining about mismatched types between your function&#39;s parameters and its actual arguments."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1474470611, "post_id": 39619990, "comment_id": 66546488, "body": "Are you sure you pasted the <i>exact</i> output you got from exactly <i>one</i> run? Please double check."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1474470794, "post_id": 39619990, "comment_id": 66546612, "body": "To printf addresses you need to pass addresses. You pass doubles."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1474470879, "post_id": 39620370, "comment_id": 66546660, "body": "This would better suit as comment."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1474471346, "post_id": 39620370, "comment_id": 66546944, "body": "@alk There&#39;s a long history of <a href=\"http://meta.stackoverflow.com/q/255896/643383\">hand holding in answers</a> to obvious homework questions. What I&#39;ve written is as close as one might get to answering the question without spelling it out for the OP, and I think that&#39;s the most appropriate way to answer this kind of question."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1474471885, "post_id": 39620370, "comment_id": 66547315, "body": "Well, fair enough, make sense, yes."}, {"owner": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474472292, "post_id": 39620370, "comment_id": 66547581, "body": "Well no it is no homework question, but nvm.  I know &amp;x is the space *x points to but how can I switch the values of x,y using double pointers."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474472734, "post_id": 39620370, "comment_id": 66547863, "body": "@Raavgo In your code, <code>x</code> is a <code>double</code>, not a pointer to anything. <code>&amp;x</code> is not &quot;the space that <code>x</code> points to&quot;, but rather the address of <code>x</code>, so it&#39;s type is <code>double*</code>. As far as it being a homework question, it&#39;s certainly at least in the same vein -- you&#39;re trying to get your head around pointers, and while it&#39;s tempting to just get the answer, it&#39;ll stick with you much better if you figure it out yourself. You&#39;re almost there -- keep at it!"}, {"owner": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474473315, "post_id": 39620370, "comment_id": 66548239, "body": "yes I do know that, well I remembered it when you told me. So I got some doubles I wanna switch if I define a ptr_x = &amp;x; I can get a double pointer by typing &amp;ptr_x right?  now I got a double pointer suitable for swap(a,b) but now I wanna change the variables of x and this is the pointer structur:  &amp;ptr_x -&gt; ptr_x -&gt; x but now I just can copy the pointers but how do I access the values?"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474474224, "post_id": 39620370, "comment_id": 66548829, "body": "@Raavgo I guess the question is: do you want to swap the values of <code>x</code> and <code>y</code> or do you want to leave those values right where they are and swap pointers to those values? Right now your <code>main</code> function expects the former, but your <code>swap</code> function is set up to do the latter."}, {"owner": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474475118, "post_id": 39620370, "comment_id": 66549352, "body": "@Caleb I want to switch the values but the address of x and y needs to remain the same! If I simply switch x,y they get a new address! So if I could access the values of the variables that &amp;ptr_x or &amp;ptr_y points to I could just refer these values to their new location. Is there a way to store valueof(&amp;ptr_x) into a variable for example into double bufferValue"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474477399, "post_id": 39620370, "comment_id": 66550673, "body": "@Raavgo Look at <code>swap</code> then. Parameters <code>a</code> and <code>b</code> are <code>double **</code>, or in words, &quot;a pointer to a pointer to a double.&quot; If you want to switch the doubles themselves, you need to dereference those pointers twice (like: <code>**a</code> instead of <code>*a</code>), and you need to pass the pointers to pointers to doubles when you call <code>swap</code>. If you have <code>double x; double *ptr_x;</code> you can say <code>ptr_x = &amp;x;</code> and you can likewise say <code>double **ptr_ptr_x = &amp;ptr_x;</code>."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1474477526, "post_id": 39620370, "comment_id": 66550740, "body": "Usually, though, when a function takes an argument like <code>double **</code> in C, it&#39;s because the function wants to modify the pointer, not the <code>double</code>, so it&#39;s hard to see the point in passing <code>double **</code> in the case of your <code>swap</code> function."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1474482202, "post_id": 39620370, "comment_id": 66553169, "body": "You&#39;re still changing the pointer rather than the value. What you want is <code>**a = valueOfB; **b = valueOfA;</code>."}], "tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": false, "score": 0, "last_activity_date": 1474470683, "creation_date": 1474470683, "answer_id": 39620370, "question_id": 39619990, "link": "https://stackoverflow.com/questions/39619990/switch-value-of-variables-using-double-pointers/39620370#39620370", "title": "Switch value of variables using double pointers", "body": "<p>Look at what you're doing here:</p>\n\n<blockquote>\n  <p><code>switch_pp(&amp;x,&amp;y);</code></p>\n</blockquote>\n\n<p>and compare that to your <code>swap</code> function:</p>\n\n<blockquote>\n  <p><code>void switch_pp(double** a,double** b)</code></p>\n</blockquote>\n\n<p>What would you say the type of <code>&amp;x</code> is?</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474490182, "post_id": 39623811, "comment_id": 66557531, "body": "I know that it works that way but swap needs to be in this form:  void swap(double **a, double **b){...} this is the challange !"}, {"owner": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474529275, "post_id": 39623811, "comment_id": 66570171, "body": "okay now the value swaps but so do the addresses of the pointers. How can I store **a on the exact same spot **b was stored?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474541230, "post_id": 39623811, "comment_id": 66577786, "body": "@Raavgo No, the addresses are not swapped.  You&#39;re printing the addresses wrong."}, {"owner": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "edited": false, "score": 0, "creation_date": 1474543620, "post_id": 39623811, "comment_id": 66579291, "body": "Yes now it works! Thank you very much! so %p expects a void pointer?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1474541353, "last_edit_date": 1474541353, "creation_date": 1474481898, "answer_id": 39623811, "question_id": 39619990, "link": "https://stackoverflow.com/questions/39619990/switch-value-of-variables-using-double-pointers/39623811#39623811", "title": "Switch value of variables using double pointers", "body": "<p>What you had orignally doesn't work because you pass a <code>double *</code> to a function that expects a <code>double **</code>.  The types aren't compatible, and attempting to use them that way results in <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>With your edit, it still won't work because <code>ptr_x</code> and <code>ptr_y</code> are modified to contain the address of the variables <code>valueOfA</code> and <code>valueOfB</code> inside of <code>switch_pp</code>.  When the function returns, those variables are out of scope, so attempting to dereference those pointers again results in undefined behavior.</p>\n\n<p>You would only need a double pointer (i.e. a pointer to a pointer) if you are swapping pointers.  But you aren't swapping pointers, you're swapping values of type <code>double</code>.  So just pass the addresses of each and swap what each one points to:</p>\n\n<pre><code>void swap(double *a, double *b)\n{\n    double tmp = *a;\n    *a = *b;\n    *b = tmp;\n}\n</code></pre>\n\n<p>Then call it like this:</p>\n\n<pre><code>swap(&amp;a, &amp;b);\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If you really need to pass a pointer-to-pointer, then do this:</p>\n\n<pre><code>void swap(double **a, double **b)\n{\n    double tmp = **a;\n    **a = **b;\n    **b = tmp;\n}\n</code></pre>\n\n<p>EDIT2:</p>\n\n<p>The addresses are not changing, but it might appear that way because you're not printing them correctly:</p>\n\n<pre><code>printf(\"X -&gt; address: %p | value: %f || Y-&gt; address: %p | value: %f\\n\", x,x,y,y);\n</code></pre>\n\n<p>Here, you're passing a <code>double</code> to the <code>%p</code> format specifier which expects a <code>void *</code>.  You want this instead:</p>\n\n<pre><code>printf(\"X -&gt; address: %p | value: %f || Y-&gt; address: %p | value: %f\\n\", (void *)ptr_x,x,(void *)ptr_y,y);\n</code></pre>\n\n<p>Note that this is one of the rare time you actually need to cast a pointer to a <code>void *</code>.</p>\n"}], "owner": {"reputation": 77, "user_id": 4065451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJH31.jpg?s=128&g=1", "display_name": "Raavgo", "link": "https://stackoverflow.com/users/4065451/raavgo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 39623811, "answer_count": 2, "score": 1, "last_activity_date": 1474541353, "creation_date": 1474469719, "last_edit_date": 1474480549, "question_id": 39619990, "link": "https://stackoverflow.com/questions/39619990/switch-value-of-variables-using-double-pointers", "title": "Switch value of variables using double pointers", "body": "<p>I got a problem with my pointer program, it should use double pointers to switch the value of double values x and y. I am pretty new to pointers and I am not able to accomplish that.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n/*\ntodo\nimplement switch_pp(**a,**b)\nswitch the content of a,b using double pointers\nOnly switch the values all pointer addresses must remain the same! \n*/\n\n void switch_pp(double** a,double** b){\n   double valueOfA = **a;\n   double valueOfB = **b;\n   *a = &amp;valueOfB;\n   *b = &amp;valueOfA;\n}\n\nint main(int argc, char* argv[]){\n\n    double x = 14.435,y = 4.435; //needs to work with these parameters\n    double *ptr_x = &amp;x, *ptr_y= &amp;y;\n\n    printf(\"Swapping x and y\\n\");\n    printf(\"X -&gt; address: %p | value: %f || Y-&gt; address: %p | value: %f\\n\", x,x,y,y);\n    switch_pp(&amp;ptr_x,&amp;ptr_y);\n    printf(\"Done swapping x and y\\n\");\n    printf(\"X -&gt; address: %p | value: %f || Y-&gt; address: %p | value: %f\\n\", x,x,y,y);\n    return 0;\n }\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Swapping x and y\nX -&gt; address: A3D70A3D | value: -0.000000 || Y-&gt; address: 4011BD70 | value: 4.435000\nDone swapping x and y\nX -&gt; address: A3D70A3D | value: -0.000000 || Y-&gt; address: 4011BD70 | value: 4.435000\n\nProcess returned 0 (0x0)   execution time : 0.016 s\nPress any key to continue.\n</code></pre>\n\n<p>Okay now I rewrote my code still the values of x,y won 't swap! although I reference *a = &ValueOfB; But as far as I understood &amp;ptr_x -> ptr_x -> x so if I write *a = &amp;ValueOfB I could also substitute *a with ptr_x so I can further substitute to ptr_x = &amp;y! which should work</p>\n"}, {"tags": ["c", "algorithm", "data-structures"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1474469422, "post_id": 39619603, "comment_id": 66545648, "body": "Just because they are unary operators, they don&#39;t need to (and have not) the same preceedence."}, {"owner": {"reputation": 332, "user_id": 5663559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-oauRFGJ-qC8/AAAAAAAAAAI/AAAAAAAAA-I/E7WdZxXNNMI/photo.jpg?sz=128", "display_name": "Priyankar Kumar", "link": "https://stackoverflow.com/users/5663559/priyankar-kumar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474470338, "post_id": 39619603, "comment_id": 66546276, "body": "Corrected that. The textbook I refer mentions they do have the same order of precedence (++ and * and also &amp;) and so the evaluation is done from right to left..am I missing something?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474470641, "post_id": 39619603, "comment_id": 66546509, "body": "It does not tell the whole truth. Anyway, <code>*p++</code> has versy different semantics from <code>++*p</code> or even <code>*++p</code>. You might want to get a better textbook."}, {"owner": {"reputation": 332, "user_id": 5663559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-oauRFGJ-qC8/AAAAAAAAAAI/AAAAAAAAA-I/E7WdZxXNNMI/photo.jpg?sz=128", "display_name": "Priyankar Kumar", "link": "https://stackoverflow.com/users/5663559/priyankar-kumar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474470775, "post_id": 39619603, "comment_id": 66546597, "body": "Okay. I will remove that example. But I think the question holds even without that example?"}], "answers": [{"comments": [{"owner": {"reputation": 332, "user_id": 5663559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-oauRFGJ-qC8/AAAAAAAAAAI/AAAAAAAAA-I/E7WdZxXNNMI/photo.jpg?sz=128", "display_name": "Priyankar Kumar", "link": "https://stackoverflow.com/users/5663559/priyankar-kumar"}, "edited": false, "score": 0, "creation_date": 1474469916, "post_id": 39619753, "comment_id": 66545994, "body": "This makes sense. So what would be the right approach to convert to prefix by still keeping associativity in mind?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 332, "user_id": 5663559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-oauRFGJ-qC8/AAAAAAAAAAI/AAAAAAAAA-I/E7WdZxXNNMI/photo.jpg?sz=128", "display_name": "Priyankar Kumar", "link": "https://stackoverflow.com/users/5663559/priyankar-kumar"}, "edited": false, "score": 1, "creation_date": 1474470241, "post_id": 39619753, "comment_id": 66546216, "body": "@PriyankarKumar you have enumwrated two possible answers. use answer 1 for left associative operators and answer 2 for right associative operators."}], "tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": true, "score": 1, "last_activity_date": 1474468968, "creation_date": 1474468968, "answer_id": 39619753, "question_id": 39619603, "link": "https://stackoverflow.com/questions/39619603/when-converting-an-infix-expression-to-prefix-using-stacks-if-the-scanned-and-t/39619753#39619753", "title": "When converting an infix expression to prefix using stacks, if the scanned and top of the stack operators have same precedence, what should be done?", "body": "<p>It depends on the associativity of the operators. Some operators are left-associative. For example, 2-3-4 should be interpreted as (2-3)-4, not as 2-(3-4). Other operators are right-associative. For example, in C, x=y=z should be interpreted as x=(y=z), not as (x=y)=z.</p>\n"}], "owner": {"reputation": 332, "user_id": 5663559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-oauRFGJ-qC8/AAAAAAAAAAI/AAAAAAAAA-I/E7WdZxXNNMI/photo.jpg?sz=128", "display_name": "Priyankar Kumar", "link": "https://stackoverflow.com/users/5663559/priyankar-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 39619753, "answer_count": 1, "score": 0, "last_activity_date": 1474470822, "creation_date": 1474468607, "last_edit_date": 1474470822, "question_id": 39619603, "link": "https://stackoverflow.com/questions/39619603/when-converting-an-infix-expression-to-prefix-using-stacks-if-the-scanned-and-t", "title": "When converting an infix expression to prefix using stacks, if the scanned and top of the stack operators have same precedence, what should be done?", "body": "<p>This question was asked in a single choice MCQ test. While scanning an infix expression to convert to prefix, if the scanned operator and the operator at the top of the stack have the same order of precedence, what should be the course of action?</p>\n\n<p>The two options that made the most sense were:</p>\n\n<ol>\n<li>Simply push the incoming operator on to the stack.</li>\n<li>Pop the present operator on top of the stack and add it to the converted expression and then push the incoming operator on to the stack again.</li>\n</ol>\n\n<p>The answer as told by the instructor is option 1. However my answer was option 2. Both lines of thinking would yield different results:</p>\n\n<p>Say we have an infix expression a * b * c. If we go by method 1, it yields the prefix expression **abc. If we go by option 2, it yields the result  * a * bc.</p>\n\n<p>So what is the right answer?</p>\n\n<p>(This is the algorithm I used to answer this question: <a href=\"http://scanftree.com/Data_Structure/infix-to-prefix\" rel=\"nofollow\">http://scanftree.com/Data_Structure/infix-to-prefix</a> The confusion is at the part where operators of equal order of precedence get involved.)</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1474466732, "post_id": 39618781, "comment_id": 66543792, "body": "I advise reading the input with <code>fgets</code> and then applying <code>sscanf</code>. Then when only, say, 2 of the 3 fields you request are present, it is easy to ignore the rest of the line and move on to the next. And scan for three <i>strings</i>, before analysing as many as were entered. Use the function return value from <code>sscanf</code>."}, {"owner": {"reputation": 515, "user_id": 6183448, "user_type": "registered", "profile_image": "https://graph.facebook.com/1806456301/picture?type=large", "display_name": "Adrian Roman", "link": "https://stackoverflow.com/users/6183448/adrian-roman"}, "edited": false, "score": 1, "creation_date": 1474466833, "post_id": 39618781, "comment_id": 66543867, "body": "You could also use <code>%s</code> for the last one and parse that string afterwards (if it exists). But that&#39;s using a string/array and so is the above solution. Alternatively, you could use <code>%c%i</code> for the last one and check what the first char is."}, {"owner": {"reputation": 179, "user_id": 6120593, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f7e8ab8ed7b9da7f84a33371a041705?s=128&d=identicon&r=PG&f=1", "display_name": "Coma", "link": "https://stackoverflow.com/users/6120593/coma"}, "edited": false, "score": 0, "creation_date": 1474466951, "post_id": 39618781, "comment_id": 66543962, "body": "Guyssss please read the post fully - not allowed any form of array, including string. Though I&#39;ll check out Weather Vane&#39;s first solution, that might be correct because it still uses some sort of scanf, thanks!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474467077, "post_id": 39618781, "comment_id": 66544056, "body": "&quot;Not allowed to use any form of strings&quot; --&gt; Note: <code>&quot;%c%c%c A%i A%i&quot;</code> is a string."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474467573, "post_id": 39618781, "comment_id": 66544454, "body": "Do you need to be able to read a sequence of such instructions from the input, or do you only need to handle one?  Because running the <code>scanf()</code> you present in a loop will not do what you might expect.  Trailing whitespace (e.g. newlines) will trip it up."}, {"owner": {"reputation": 179, "user_id": 6120593, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f7e8ab8ed7b9da7f84a33371a041705?s=128&d=identicon&r=PG&f=1", "display_name": "Coma", "link": "https://stackoverflow.com/users/6120593/coma"}, "edited": false, "score": 0, "creation_date": 1474468321, "post_id": 39618781, "comment_id": 66545003, "body": "Hey John, yes I have to loop it until a termination command is entered."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1474468526, "post_id": 39618781, "comment_id": 66545132, "body": "Just read the whole input as a string with <code>fgets</code>and then parse that. Anything else is rather questionable practice."}, {"owner": {"reputation": 179, "user_id": 6120593, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f7e8ab8ed7b9da7f84a33371a041705?s=128&d=identicon&r=PG&f=1", "display_name": "Coma", "link": "https://stackoverflow.com/users/6120593/coma"}, "edited": false, "score": 0, "creation_date": 1474469777, "post_id": 39618781, "comment_id": 66545895, "body": "I know, but as I said many times before, I CANNOT use strings i.e. I have to parse letter by letter or not use char at all."}], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 6183448, "user_type": "registered", "profile_image": "https://graph.facebook.com/1806456301/picture?type=large", "display_name": "Adrian Roman", "link": "https://stackoverflow.com/users/6183448/adrian-roman"}, "is_accepted": false, "score": 0, "last_activity_date": 1474467152, "creation_date": 1474467152, "answer_id": 39619075, "question_id": 39618781, "link": "https://stackoverflow.com/questions/39618781/how-do-i-use-scanf-to-properly-parse-and-filter-dynamic-input/39619075#39619075", "title": "How do I use scanf to properly parse and filter dynamic input?", "body": "<p>The solution is to use <code>scanf(\"%c%c%c A%i %c%i\",&amp;c1,&amp;c2,&amp;c3,&amp;a, &amp;c4, &amp;val);</code>, check if c4 is a digit, in which case you have a little bit more work to do to get the proper val, but not much.</p>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 6120593, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f7e8ab8ed7b9da7f84a33371a041705?s=128&d=identicon&r=PG&f=1", "display_name": "Coma", "link": "https://stackoverflow.com/users/6120593/coma"}, "edited": false, "score": 0, "creation_date": 1474467483, "post_id": 39619142, "comment_id": 66544362, "body": "Can&#39;t believe this didn&#39;t cross my mind, thank you!!"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1474467488, "last_edit_date": 1474467488, "creation_date": 1474467345, "answer_id": 39619142, "question_id": 39618781, "link": "https://stackoverflow.com/questions/39618781/how-do-i-use-scanf-to-properly-parse-and-filter-dynamic-input/39619142#39619142", "title": "How do I use scanf to properly parse and filter dynamic input?", "body": "<p>Don't try to do it all in a single <code>scanf</code> call.  Instead, read the command first, check if it takes additional parameters, then read those:</p>\n\n<pre><code>n = scanf( \"%c%c%c\", &amp;c1, &amp;c2, &amp;c3 );\nif ( n != 3 )\n  // input error, bail out here\n\nif ( has_address( c1, c2, c3 ) )\n{\n  if ( scanf( \"A%i\", &amp;a1 ) != 1 )\n    // input error, bail out here\n}\n\nif ( has_2nd_address( c1, c2, c3 ) )\n{\n  if ( scanf( \"A%i\", &amp;a2 ) != 1 )\n    // input error, bail out here\n}\n\nif ( has_value( c1, c2, c3 ) )\n{\n  if ( scanf( \"%i\", &amp;val ) != 1 )\n    // input error\n}\n</code></pre>\n\n<p><code>has_address</code>, <code>has_2nd_address</code>, and <code>has_value</code> are simply placeholders for whatever logic you need to use to determine whether you need to read one or two address, and whether you need to read a value.  </p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1474467548, "creation_date": 1474467548, "answer_id": 39619234, "question_id": 39618781, "link": "https://stackoverflow.com/questions/39618781/how-do-i-use-scanf-to-properly-parse-and-filter-dynamic-input/39619234#39619234", "title": "How do I use scanf to properly parse and filter dynamic input?", "body": "<p>Check the return value.  If it is 4, the last number remains to be scanned.</p>\n\n<pre><code>// Add leading space to consume previous line's \\n\nint n = scanf(\" %c%c%c A%i A%i\", &amp;c1, &amp;c2, &amp;c3, &amp;a, &amp;val);\n\nswitch (n) {\n  case 5: Handle_XYZ_A1_A2(c1, c2, c3, a, val); break;\n  case 4: // A not detected\n    int n = scanf(\"%i\", &amp;val);\n    if (n == 1) { Handle_XYZ_A1_2(c1, c2, c3, a, val); break; }\n  default:\n    Handle_Bad_Input();\n}\n</code></pre>\n\n<p>Using <code>fgets()</code> first makes more sense, but seems to not be allowed given OP restrictions.</p>\n"}], "owner": {"reputation": 179, "user_id": 6120593, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f7e8ab8ed7b9da7f84a33371a041705?s=128&d=identicon&r=PG&f=1", "display_name": "Coma", "link": "https://stackoverflow.com/users/6120593/coma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 39619142, "answer_count": 3, "score": 0, "last_activity_date": 1474467548, "creation_date": 1474466465, "last_edit_date": 1474467246, "question_id": 39618781, "link": "https://stackoverflow.com/questions/39618781/how-do-i-use-scanf-to-properly-parse-and-filter-dynamic-input", "title": "How do I use scanf to properly parse and filter dynamic input?", "body": "<p>This is for homework, so I'm stuck with the requirements I describe.</p>\n\n<p>I need to handle input of the following general form:</p>\n\n<pre><code>XYZ A1 5\n</code></pre>\n\n<p>The first part (<code>XYZ</code>) is a command, <code>A1</code> is an address (I only need the 1), and <code>5</code> is the value of the command. Additionally, I need to handle commands that have neither address nor value (just <code>XYZ</code>, for example), and commands that have only an address but no value (<code>XYZ A1</code>).</p>\n\n<p>I managed to duck-tape this together which seems to handle everything <em>cough</em> pretty well:</p>\n\n<pre><code>n = scanf(\"%c%c%c A%i %i\",&amp;c1,&amp;c2,&amp;c3,&amp;a,&amp;val);\n</code></pre>\n\n<p>So I can use <code>n</code> (how many arguments/variables <code>scanf</code> managed to match) to figure out what sort of command it is, then do some basic checks to get what I need. And it works pretty well!</p>\n\n<p><strong>But here is my problem:</strong>\nThere is also a command in the format <code>XYZ A1 A2</code> - as in it has two 'address' values. How do I get <code>scanf</code> to parse this as well? Once again, I don't really need the 'A' to be parsed.</p>\n\n<p>If I do:</p>\n\n<pre><code>scanf(\"%c%c%c A%i A%i\",&amp;c1,&amp;c2,&amp;c3,&amp;a,&amp;val);\n</code></pre>\n\n<p>then the various other commands wont work when the address and value inputs don't have an 'A' before them.</p>\n\n<p><strong>P.S. Not allowed to use any form of strings / arrays, hence the chars;</strong></p>\n\n<p>What can I do here? </p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1474466503, "post_id": 39618610, "comment_id": 66543610, "body": "1. Join your threads in a followup for-loop. 2. You have a race condition. The same <code>count</code> back in main, that is changing with each loop iteration, is being addressed by <i>all</i> your threads. You&#39;re sending the same address to <i>all</i> of them. 3. <i>validate return results</i>."}, {"owner": {"reputation": 81, "user_id": 5361376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10153641774551369/picture?type=large", "display_name": "Souradeep Basu", "link": "https://stackoverflow.com/users/5361376/souradeep-basu"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1474466807, "post_id": 39618610, "comment_id": 66543851, "body": "@WhozCraig Thanks for your comment. Is it possible to send different vales of count to  the encrypt function for every new thread?"}], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 607567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2cdaf11bb9df57dba9722b7ca291ab17?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/607567/marco"}, "is_accepted": false, "score": 1, "last_activity_date": 1474467389, "last_edit_date": 1474467389, "creation_date": 1474466844, "answer_id": 39618948, "question_id": 39618610, "link": "https://stackoverflow.com/questions/39618610/multiple-file-access-using-threads/39618948#39618948", "title": "Multiple file access using threads", "body": "<p>There are missing things in the code, first, in your encrypt function you need to close the threads at the end and also in the main function BUT, before you do so, after your for loop you need to join them all, then they are going to be processed and closed correctly.</p>\n\n<p>The flow will go like this:</p>\n\n<pre><code>(void) pthread_join(th1, NULL);\n(void) pthread_join(th2, NULL);\n</code></pre>\n\n<p>You can put them all in a for to join them by tid.</p>\n\n<p>Another update: There is not really anything \"random\" going on, I would just start open the files according to its tid, and then add other big implementations, your as is will try to open files like crazy, it should work anyways but, just saying.</p>\n"}, {"tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 1, "last_activity_date": 1474467230, "creation_date": 1474467230, "answer_id": 39619100, "question_id": 39618610, "link": "https://stackoverflow.com/questions/39618610/multiple-file-access-using-threads/39619100#39619100", "title": "Multiple file access using threads", "body": "<p>Yes, you should join your threads, as none were created detached (and you're probably not deep enough in learning pthreads to deal with that anyway). </p>\n\n<p>That said, you have a significant logic problem in your thread parameters. They're <em>all</em> getting the address of the <em>same</em> <code>count</code> variable in <code>main</code>. Probably the fastest way to change that with no modifications to your thread-proc is simply stand up a side-by-side array of <code>int counts[NTHREADS]</code> matching your threads, using each element as the corresponding thread's data param:</p>\n\n<pre><code>int main()\n{\n    pthread_t threads[NTHREADS];\n    int counts[NTHREADS]; // HERE\n    int i,j,count =0;\n\n    for (i=0; i&lt;NTHREADS; i++)\n    {\n        counts[i] = (count += 20);\n        if(pthread_create(&amp;threads[i], NULL, encrypt, counts+i)!=0) // LAST PARAM\n        {\n            fprintf(stderr, \"error: Cannot create thread # %d\\n\", i);\n            break;\n        }\n    }\n\n    for (i=0; i&lt;NTHREADS; ++i)\n        pthread_join(threads[i], NULL));\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Alternatively, you could do some dynamic allocation hoops, or send the value via <code>intptr_t</code>, cast to <code>void*</code>, but the method shown above has the advantage of requiring no changes on your thread-proc, a target I was aiming for.</p>\n\n<p>I've left any issues in your thread proc to you to solve, but that should get you up and running on your thread stack, at least.</p>\n"}], "owner": {"reputation": 81, "user_id": 5361376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10153641774551369/picture?type=large", "display_name": "Souradeep Basu", "link": "https://stackoverflow.com/users/5361376/souradeep-basu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 39619100, "answer_count": 2, "score": 0, "last_activity_date": 1474467389, "creation_date": 1474466058, "question_id": 39618610, "link": "https://stackoverflow.com/questions/39618610/multiple-file-access-using-threads", "title": "Multiple file access using threads", "body": "<p>I am using multiple threads to access various random files using threads. However, I get an error <code>[Thread 0x7ffff7007700 (LWP 16256) exited]</code>. Also, info threads shows that only 2 threads are created. However, I am trying to  create 100 of them. Also, do I have to use the pthread_join() function in my case? The code:</p>\n\n<pre><code>#define NTHREADS 100\nvoid *encrypt(void *args)\n{\n    int count = *((int*) args);\n    AES_KEY enc_key;\n    AES_set_encrypt_key(key, 128, &amp;enc_key);\n\n    int i;\n\n    for(i=1;i&lt;=count;i++){\n\n    char *ifile;\n    char *ofile;\n    long length;\n    size_t result;\n    char * buffer;\n\n    sprintf(ifile,\"random_files/random_%d.txt\",i);\n    FILE *ifp = fopen(ifile,\"rb\");\n\n    if (ifp==NULL) {fputs (\"File error\",stderr); exit (1);}\n\n    fseek(ifp,0, SEEK_END);\n    length = ftell(ifp);\n    fseek (ifp,0, SEEK_SET);\n\n    buffer = (char*) malloc (sizeof(char)*length);\n    if (buffer == NULL) {fputs (\"Memory error\",stderr); exit (2);}\n    result = fread (buffer, 1, length, ifp);\n    if (result != length) {fputs (\"Reading error\",stderr); exit (3);}\n    printf(\"%s\",buffer);\n    fclose (ifp);\n    free(buffer);\n    }\n}\nint main(){\nint i,j,count =0;\npthread_t threads[NTHREADS];\n\nfor (i=0; i&lt;NTHREADS; i++){\n    count = count +20;\n    int *count_ptr = &amp;count;\n    if(pthread_create(&amp;threads[i], NULL, encrypt, count_ptr)!=0){\n            fprintf(stderr, \"error: Cannot create thread # %d\\n\", i);\n            break;\n        }\n}\n\nprintf(\"After Thread\\n\");\nexit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "loops"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 6, "creation_date": 1474465514, "post_id": 39618345, "comment_id": 66542809, "body": "<code>toupper</code> returns the uppercased letter. You have to assign back to the source string: <code>sentence[i] = toupper(sentence[i]);</code>"}, {"owner": {"reputation": 606, "user_id": 1864036, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PnVHS.jpg?s=128&g=1", "display_name": "starturtle", "link": "https://stackoverflow.com/users/1864036/starturtle"}, "edited": false, "score": 4, "creation_date": 1474465551, "post_id": 39618345, "comment_id": 66542839, "body": "or <code>putchar(toupper(sentence[i]))</code> if the result isn&#39;t needed any more."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1474465724, "post_id": 39618345, "comment_id": 66542976, "body": "Technically it should be <code>toupper((unsigned char)sentence[i])</code>, in case we&#39;re on an EBCDIC machine"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474466666, "post_id": 39618345, "comment_id": 66543728, "body": "@M.M On EBCDIC machine, the <code>unsigned char</code> is typically <i>not</i> needed as <code>char</code> is usually unsigned there.  It is on other machines with the common case where <code>char</code> is signed, that needs the <code>(unsigned char)</code> cast."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1474466465, "post_id": 39618414, "comment_id": 66543584, "body": "This code modifies <code>sentence[]</code>, which of course, the OP wants/needs.  A side effect is that code can not then optimize out the call to <code>strlen()</code> and thus oblige repeated <code>strlen()</code> calls.   Result: <code>O(n*n)</code> run-time.  Changing the loop end condition would make for improved code."}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": true, "score": 6, "last_activity_date": 1474466942, "last_edit_date": 1474466942, "creation_date": 1474465547, "answer_id": 39618414, "question_id": 39618345, "link": "https://stackoverflow.com/questions/39618345/toupper-function-in-c-with-for-loop/39618414#39618414", "title": "toupper function in C with for loop", "body": "<p>Replace the line:</p>\n\n<pre><code>   toupper(sentence[i]);\n</code></pre>\n\n<p>with this one:</p>\n\n<pre><code>   sentence[i] = toupper(sentence[i]);\n</code></pre>\n\n<p>The problem with your code is that <code>toupper</code> does not do the conversion in place, instead it returns the converted letter as its return value.</p>\n\n<p>If you don't want to modify the string and you are only want to print it in uppercase form, then use WolfieeifloW's solution.</p>\n\n<p><strong>Edit</strong>: As others have pointed out, <code>strlen</code> is slow function (it has to scan the entire string, so it takes <code>\u0398(n)</code> time) and the solution presented here will prevent the compiler from doing the smart optimization to evaluate it once. So it would be preferable to preevaluate it your self, like so:</p>\n\n<pre><code>int len = strlen(sentence);\n\nfor (i=0; i&lt;len; i++)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1474465732, "post_id": 39618455, "comment_id": 66542982, "body": "Upvoted. That&#39;s much nicer: it avoids the repeated computation of <code>strlen</code> that I allude to."}, {"owner": {"reputation": 537, "user_id": 3184087, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/54dacdbf275999e9a08e0b167b2e8155?s=128&d=identicon&r=PG&f=1", "display_name": "WolfieeifloW", "link": "https://stackoverflow.com/users/3184087/wolfieeiflow"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474465761, "post_id": 39618455, "comment_id": 66543002, "body": "@redneb&#39;s answer is better, but I would put <code>putchar(toupper(sentence[i]));</code>"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1474466224, "post_id": 39618455, "comment_id": 66543378, "body": "Why not <code>for (i = 0; sentence[i]; i++)</code>?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1474475014, "post_id": 39618455, "comment_id": 66549292, "body": "@WolfieeifloW - yes, there is a reason to downvote - though I did not.  The OP didn&#39;t read the man page for toupper, that&#39;s a fatal error."}], "tags": [], "owner": {"reputation": 537, "user_id": 3184087, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/54dacdbf275999e9a08e0b167b2e8155?s=128&d=identicon&r=PG&f=1", "display_name": "WolfieeifloW", "link": "https://stackoverflow.com/users/3184087/wolfieeiflow"}, "is_accepted": false, "score": 5, "last_activity_date": 1532699016, "last_edit_date": 1532699016, "creation_date": 1474465686, "answer_id": 39618455, "question_id": 39618345, "link": "https://stackoverflow.com/questions/39618345/toupper-function-in-c-with-for-loop/39618455#39618455", "title": "toupper function in C with for loop", "body": "<p>Try using a while loop:</p>\n\n<pre><code>int i = 0;    \n\nwhile(sentence[i]) {\n    putchar(toupper(sentence[i]));\n    i++;\n}\n</code></pre>\n\n<p>This also helps to avoid computing the <code>strlen</code> of <code>sentence[]</code> every loop.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1474466712, "last_edit_date": 1474466712, "creation_date": 1474465706, "answer_id": 39618468, "question_id": 39618345, "link": "https://stackoverflow.com/questions/39618345/toupper-function-in-c-with-for-loop/39618468#39618468", "title": "toupper function in C with for loop", "body": "<p><code>toupper(sentence[i]);</code> does not <em>modify</em> its argument, but returns it. The solution is therefore to replace the first statement in your loop body with</p>\n\n<p><code>sentence[i] = toupper((unsigned char)sentence[i]);</code></p>\n\n<p>I've also snook in an <code>(unsigned char)</code> cast for portability (acknowledge @M.M). (EBCDIC encoding requires 8 bits for alphanumeric characters.)</p>\n\n<p>Also, because you are mutating <code>sentence</code>, I imagine that no compiler on earth will optimise out the multiple calls of <code>strlen(sentence)</code> to a single call. Your O(N) algorithm has suddenly become O(N * N)! Consider pre-computing this, running the loop backwards, or ace it by using <code>sentence[i]</code> as the stopping expression? (Acknowledge @nwellnhof).</p>\n"}], "owner": {"reputation": 49, "user_id": 6858624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/038b35634739a47ba8e29b5a3837228e?s=128&d=identicon&r=PG&f=1", "display_name": "fais", "link": "https://stackoverflow.com/users/6858624/fais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1413, "favorite_count": 1, "accepted_answer_id": 39618414, "answer_count": 3, "score": 2, "last_activity_date": 1532699016, "creation_date": 1474465416, "question_id": 39618345, "link": "https://stackoverflow.com/questions/39618345/toupper-function-in-c-with-for-loop", "title": "toupper function in C with for loop", "body": "<p>I don't understand why the following code doesn't work as I wanted it to.</p>\n\n<pre><code>int main()\n{\n    char sentence[] = \"this will be capitalised\";\n    int i;\n\n    for (i=0; i&lt;strlen(sentence); i++)\n    {\n        toupper(sentence[i]);\n        putchar(sentence[i]);\n    }\n\n    printf(\"\\n\\n\");\n\n    return (0);\n}\n</code></pre>\n\n<p>I end up with this:</p>\n\n<pre><code>this will be capitalised\n\nProgram ended with exit code: 0\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "gcc", "macros", "stringification"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1474465811, "post_id": 39618298, "comment_id": 66543042, "body": "Note: &quot;spacebar&quot; is the large button on you keyboard which generates <i>space</i> characters."}], "answers": [{"comments": [{"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1474466400, "post_id": 39618708, "comment_id": 66543537, "body": "Spot on. Can you provide a link to the source document?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1474466614, "post_id": 39618708, "comment_id": 66543694, "body": "@user2162550, I generally refer to <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">a PDF version of the N1570 draft</a>.  My answer contains the section and paragraph numbers.  You can find other versions, including HTML renditions, by Googling for &quot;n1570&quot;.  The final standard document is not available for free, but it has only trivial differences from N1570."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1474466273, "creation_date": 1474466273, "answer_id": 39618708, "question_id": 39618298, "link": "https://stackoverflow.com/questions/39618298/stringification-macro-always-adds-a-single-space-character/39618708#39618708", "title": "Stringification macro always adds a single space character", "body": "<blockquote>\n  <p>Why is there always a single space there and is there a way to control the amount of spaces?</p>\n</blockquote>\n\n<p>Because that's what the stringification operator is specified to do:</p>\n\n<blockquote>\n  <p>If,  in  the  replacement  list,  a  parameter  is  immediately  preceded  by a <code>#</code> preprocessing token,  both  are  replaced  by  a  single  character  string  literal  preprocessing  token  that contains   the  spelling   of   the   preprocessing   token   sequence   for   the   corresponding argument.  <strong>Each occurrence of white space between the argument\u2019s preprocessing tokens becomes  a  single  space  character  in  the  character  string  literal.</strong></p>\n</blockquote>\n\n<p>(C2011 6.10.3.2/2; emphasis added)</p>\n\n<p>Of course, if there is no whitespace at all between the preprocessing tokens, then none appears in the stringification.</p>\n"}], "owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 39618708, "answer_count": 1, "score": 1, "last_activity_date": 1474472412, "creation_date": 1474465322, "last_edit_date": 1474472412, "question_id": 39618298, "link": "https://stackoverflow.com/questions/39618298/stringification-macro-always-adds-a-single-space-character", "title": "Stringification macro always adds a single space character", "body": "<p>Given the following code that prints a string which is a stringification of two words:</p>\n\n<pre><code>#define PORT_INFO_MAC_2(portNum)   port:     portNum\n\n#define PORT_INFO_MAC(portNum) PORT_INFO_MAC_2(portNum)\n\n/* Stringify macro expansion instead of the macro itself */\n#define INVOKE_MACRO(...) #__VA_ARGS__\n\nprintf(\" %s \" , INVOKE_MACRO(PORT_INFO_MAC(1)) ); /* In a more general way, I'll be using it like follows: INVOKE_MACRO(PORT_INFO_MAC(2), PORT_INFO_MAC(1), ...) */\n</code></pre>\n\n<p>The output is always <code>\" port: 1 \"</code> with a single space between the <code>\"port\"</code> and the <code>\"1\"</code>. Why is there always a single space there and is there a way to control the amount of spaces?</p>\n\n<p>changing the amount of spaces in <code>PORT_INFO_MAC_2</code> macro between <code>port</code> and <code>portNum</code> doesn't change the output space amount.</p>\n\n<p><strong>EDIT</strong><br>\nIt seems that there are two cases, at the fist case the <code>port</code> and <code>portNum</code> are closest- <code>PORT_INFO_MAC_2(portNum)   port:portNum</code> which then no space exist in the output between them. At the second case, in which any number of spaces exist in the macro between them, the amount of spaces in the output is always 1.\nIs there any formal explanation for that? Is there any control over that?</p>\n"}, {"tags": ["php", "c", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 1765, "user_id": 1106540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45196b9a98daeb606ee718a26e881b9b?s=128&d=identicon&r=PG", "display_name": "Ismael Luceno", "link": "https://stackoverflow.com/users/1106540/ismael-luceno"}, "is_accepted": true, "score": 1, "last_activity_date": 1474548049, "last_edit_date": 1474548049, "creation_date": 1474468907, "answer_id": 39619729, "question_id": 39618158, "link": "https://stackoverflow.com/questions/39618158/websocket-how-to-encode-a-text-to-send-to-a-client-in-c/39619729#39619729", "title": "Websocket: How to encode a text to send to a client, in C", "body": "<p>There's less need for bureaucracy, so it's much simpler to implement. Normally you expect the caller to provide the output buffer and the text size, so let's do that.</p>\n\n<p>Also, be extra careful with the endianness, your second use of <code>pack</code> in that PHP code should be with <code>'CCn'</code> instead of <code>'CCS'</code>.</p>\n\n<p>Example implementation:</p>\n\n<pre><code>static char *hdr_fill(char *buf, unsigned int hlen, size_t plen)\n{\n    *buf++ = 0x81; /* b1 */\n\n    switch (hlen) {\n    case 6:\n        *buf++ = 127;\n        break;\n    case 4:\n        *buf++ = 126;\n    }\n\n    /* Store length in big endian order */\n    switch (hlen) {\n    case 6:\n        *buf++ = plen &gt;&gt; 24;\n        *buf++ = plen &gt;&gt; 16;\n    case 4:\n        *buf++ = plen &gt;&gt; 8;\n    case 2:\n        *buf++ = plen;\n    }\n    return buf;\n}\n\nsize_t encode(char *buf, size_t bufsize, const char *text, size_t len)\n{\n    const unsigned int hdrlen = len &gt; 65535 ? 6 : (len &gt; 255 ? 4 : 2);\n    if (bufsize &lt; hdrlen + len)\n        return 0;\n    buf = hdr_fill(buf, hdrlen, len);\n    memcpy(buf, text, len);\n    return hdrlen + len;\n}\n</code></pre>\n\n<p>For convenience it returns the result's size. You will need at least <code>&lt;stddef.h&gt;</code> (unless you replace <code>size_t</code>) and <code>&lt;string.h&gt;</code>.</p>\n\n<p>However, you may want to use a scatter-gather approach instead, as it avoids the copying. In that case you just need to build the header and adjust it's vector. Also, IMO it's more elegant:</p>\n\n<pre><code>int setup_header(struct iovec *v, int n)\n{\n    /* We expect a valid buffer in v[0], and the payload in v[1+] */\n    if (n &lt; 2 || v[0]-&gt;iov_len &lt; 6)\n        return -1;\n\n    size_t len = v[1]-&gt;iov_len;\n    for (int i = 2; i &lt; n; i++)\n        len += v[n]-&gt;iov_len;\n\n    const unsigned int hdrlen = len &gt; 65535 ? 6 : (len &gt; 255 ? 4 : 2);\n    v[0]-&gt;iov_len = hdrlen;\n    hdr_fill(v[0]-&gt;iov_base, hdrlen, len);\n    return 0;\n}   \n</code></pre>\n\n<p>In this case the return value is zero if successful. For this one you need <code>&lt;sys/uio.h&gt;</code> or equivalent.</p>\n"}], "owner": {"reputation": 49, "user_id": 6858509, "user_type": "registered", "profile_image": "https://graph.facebook.com/625594907609325/picture?type=large", "display_name": "Jeko Eustaquio", "link": "https://stackoverflow.com/users/6858509/jeko-eustaquio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 39619729, "answer_count": 1, "score": 2, "last_activity_date": 1474548049, "creation_date": 1474464966, "question_id": 39618158, "link": "https://stackoverflow.com/questions/39618158/websocket-how-to-encode-a-text-to-send-to-a-client-in-c", "title": "Websocket: How to encode a text to send to a client, in C", "body": "<p>I'm trying to develop a function for encode a text in a correct format of websocket data send. this is a function in PHP but I can't translate this in C language.</p>\n\n<pre><code>private function encode($text) {\n// 0x1 text frame (FIN + opcode)\n$b1 = 0x80 | (0x1 &amp; 0x0f);\n$length = strlen($text);\n\nif($length &lt;= 125)\n    $header = pack('CC', $b1, $length);\nelseif($length &gt; 125 &amp;&amp; $length &lt; 65536)\n    $header = pack('CCS', $b1, 126, $length);\nelseif($length &gt;= 65536)\n    $header = pack('CCN', $b1, 127, $length);\n\nreturn $header.$text;\n}\n</code></pre>\n"}, {"tags": ["c", "xcode", "compiler-errors", "linker-errors", "invocation"], "comments": [{"owner": {"reputation": 1541, "user_id": 3565291, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/WpuIu.jpg?s=128&g=1", "display_name": "regina_fallangi", "link": "https://stackoverflow.com/users/3565291/regina-fallangi"}, "edited": false, "score": 0, "creation_date": 1537943372, "post_id": 39616462, "comment_id": 91962418, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48247294/use-v-to-see-invocation\">use -v to see invocation?</a>"}, {"owner": {"reputation": 1541, "user_id": 3565291, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/WpuIu.jpg?s=128&g=1", "display_name": "regina_fallangi", "link": "https://stackoverflow.com/users/3565291/regina-fallangi"}, "edited": false, "score": 0, "creation_date": 1537943384, "post_id": 39616462, "comment_id": 91962424, "body": "This question as an answer in <a href=\"https://stackoverflow.com/questions/48247294/use-v-to-see-invocation\" title=\"use v to see invocation\">stackoverflow.com/questions/48247294/use-v-to-see-invocation</a>"}], "owner": {"reputation": 139, "user_id": 5808083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-NMRpFjG0qM0/AAAAAAAAAAI/AAAAAAAABsU/DCSYfAAvevw/photo.jpg?sz=128", "display_name": "Darrell", "link": "https://stackoverflow.com/users/5808083/darrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1474460628, "creation_date": 1474460628, "question_id": 39616462, "link": "https://stackoverflow.com/questions/39616462/linker-error-use-v-to-see-invocation", "title": "Linker error - (use -v to see invocation)", "body": "<p>Often times upon compiling my 'c code' with Xcode, I get a \"linker command failed with exit code 1 (use -v to see invocation)\" error.</p>\n\n<p>I am interested in the \"use -v to see invocation\" statement. Where in Xcode can I \"use -v\" to see the invocation? Furthermore, is it useful in tracking down the error?</p>\n\n<p>Regards,\nDarrell</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1474460808, "post_id": 39616432, "comment_id": 66539456, "body": "@dbush I disagree with this dupe. The supposed dupe is about floating-point <i>computation</i> being potentially inexact, while this question is about <code>float</code> versus <code>double</code> constants. The same problem would occur if <code>a</code> was a <code>short</code> or <code>char</code> that could not represent an integer constant."}, {"owner": {"reputation": 75, "user_id": 6816941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff12d83b8c5cf5495f2a7e92d2047371?s=128&d=identicon&r=PG&f=1", "display_name": "Hariom", "link": "https://stackoverflow.com/users/6816941/hariom"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1474461168, "post_id": 39616432, "comment_id": 66539713, "body": "So why is it happening??"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1474461300, "post_id": 39616432, "comment_id": 66539795, "body": "Read <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a> (and that URL is important enough to be remembered)"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6816941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff12d83b8c5cf5495f2a7e92d2047371?s=128&d=identicon&r=PG&f=1", "display_name": "Hariom", "link": "https://stackoverflow.com/users/6816941/hariom"}, "edited": false, "score": 0, "creation_date": 1474461286, "post_id": 39616662, "comment_id": 66539788, "body": "in case of 2.5 it calculates it true?? Is it compiler specific??"}, {"owner": {"reputation": 1146, "user_id": 1248449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d8cdc612a969f3cc7bb32757dce1d4f?s=128&d=identicon&r=PG", "display_name": "Diti", "link": "https://stackoverflow.com/users/1248449/diti"}, "edited": false, "score": 0, "creation_date": 1474461294, "post_id": 39616662, "comment_id": 66539794, "body": "Can you cite the part of the ISO C standard which guarantees this behavior? (I know there is one.)"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 3, "creation_date": 1474461320, "post_id": 39616662, "comment_id": 66539811, "body": "Or rather ... don&#39;t use <code>==</code> for floating point values."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 75, "user_id": 6816941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff12d83b8c5cf5495f2a7e92d2047371?s=128&d=identicon&r=PG&f=1", "display_name": "Hariom", "link": "https://stackoverflow.com/users/6816941/hariom"}, "edited": false, "score": 0, "creation_date": 1474461321, "post_id": 39616662, "comment_id": 66539817, "body": "@Hariom: Yes, because for 2.5, both <code>float</code> and <code>double</code> happen to hold the exact same value. But that&#39;s essentially accidental. (It&#39;s because of the particular representation details of the types matching the particularly simple structure of 2.5, namely as a short, dense binary.)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1474461397, "post_id": 39616662, "comment_id": 66539868, "body": "I&#39;d probably also write <code>float a = 2.3f;</code>, since this should guarantee equality."}, {"owner": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "edited": false, "score": 0, "creation_date": 1474461488, "post_id": 39616662, "comment_id": 66539933, "body": "correct but more helpful if mention that <code>==</code> is not a good idea with <code>floats</code>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1474461496, "post_id": 39616662, "comment_id": 66539937, "body": "@pmg: I think that&#39;s overly FUDdy. You can use equality comparison if you know what it means and what you&#39;re doing. The OP&#39;s situation is blatantly solvable (e.g. with <code>a == 2.3f</code>), and I wouldn&#39;t call it bad. The important point is not to assume exact <i>computations</i>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "edited": false, "score": 1, "creation_date": 1474461523, "post_id": 39616662, "comment_id": 66539960, "body": "@DombiSzabolcs: See my previous comment. I don&#39;t agree with such an overly general statement. I prefer understanding over blind adherence to dogma."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1146, "user_id": 1248449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d8cdc612a969f3cc7bb32757dce1d4f?s=128&d=identicon&r=PG", "display_name": "Diti", "link": "https://stackoverflow.com/users/1248449/diti"}, "edited": false, "score": 1, "creation_date": 1474462231, "post_id": 39616662, "comment_id": 66540491, "body": "@Diti: C11 6.2.5, &quot;Types&quot;, says that the set of values representable by <code>float</code> is a subset of the values representable by <code>double</code>, and 6.3.1.5 on Conversions says that if a value can be represented exactly, the resulting value is that value. (C doesn&#39;t actually use the term &quot;promotion&quot; for floating point values, but C++ does.)"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 12, "last_activity_date": 1474462369, "last_edit_date": 1474462369, "creation_date": 1474461171, "answer_id": 39616662, "question_id": 39616432, "link": "https://stackoverflow.com/questions/39616432/why-ifa-2-3-evaluates-false-when-float-a-2-3/39616662#39616662", "title": "why if(a==2.3) evaluates false when float a=2.3", "body": "<p>The variable <code>a</code> is a <code>float</code> that holds some value close to the mathematical value 2.3.</p>\n\n<p>The literal <code>2.3</code> is a <code>double</code> that also holds some value close to the mathematical value 2.3, but because <code>double</code> has greater precision than <code>float</code>, this may be a different value from the value of <code>a</code>. Both <code>float</code> and <code>double</code> can only represent a finite number of values, so there are necessarily mathematical real numbers that cannot be represented exactly by either of those two types.</p>\n\n<p>In the comparison <code>a == 2.3</code>, the left operand is promoted from <code>float</code> to <code>double</code>. This promotion is exact and preserves the value (as all promotions do), but as discussed above, that value may be a different one from that of the <code>2.3</code> literal.</p>\n\n<p>To make a comparison between floats, you can use an appropriate float literal:</p>\n\n<pre><code>assert(a == 2.3f);\n//             ^\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1474462341, "post_id": 39616744, "comment_id": 66540582, "body": "An implementation that uses decimal floats could certainly represent both 2.3 and 2.5 exactly. This is ultimately implementation-defined. The important point is that <i>some</i> values cannot be represented exactly."}, {"owner": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1474463113, "post_id": 39616744, "comment_id": 66541137, "body": "no 2.3 will require infinite number of bits. C language never used decimal representation of floats, when you print the 2.3 it will show you a rounded number."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1474463518, "post_id": 39616744, "comment_id": 66541417, "body": "@DombiSzabolcs: C11 draft standard n1570: <i>5.2.4.2.2 Characteristics of floating types &lt;float.h&gt; 1 The characteristics of floating types are defined in terms of a model that describes a representation of floating-point numbers and values that provide information about an implementation\u2019s floating-point arithmetic. 21) The following parameters are used to define the model for each floating-point type: [...] b base or radix of exponent representation (an integer &gt; 1)</i> No requirement for <code>b</code> to be unequal to <code>10</code>."}, {"owner": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "edited": false, "score": 0, "creation_date": 1474463811, "post_id": 39616744, "comment_id": 66541642, "body": "interesting, i thought the values will be converted to <a href=\"https://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow noreferrer\">IEEE_floating_points</a>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1474469256, "post_id": 39616744, "comment_id": 66545614, "body": "@DombiSzabolcs: C was developed in the very late 60&#39;s and early 70&#39;s. The IEEE 754 binary floating-point standard was established 1985. How would you expect C to require IEEE 754?"}], "tags": [], "owner": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "is_accepted": false, "score": 3, "last_activity_date": 1474461687, "last_edit_date": 1474461687, "creation_date": 1474461355, "answer_id": 39616744, "question_id": 39616432, "link": "https://stackoverflow.com/questions/39616432/why-ifa-2-3-evaluates-false-when-float-a-2-3/39616744#39616744", "title": "why if(a==2.3) evaluates false when float a=2.3", "body": "<p><code>2.3</code> with binary representation is <code>01000000000100110011001100110011...</code>\nso you are not able to set a float exactly to <code>2.3</code>\nwith double precision you get something similar: <code>2.299999952316284</code></p>\n\n<p>you converted a double to float when you wrote:</p>\n\n<pre><code>float a = 2.3;\n</code></pre>\n\n<p>the if checks if the <code>float a</code> is equal to <code>double 2.299999952316284</code></p>\n\n<p>you should write:</p>\n\n<pre><code>float a = 2.3f;\n</code></pre>\n\n<p>and you can check:</p>\n\n<pre><code>if (a == 2.3f) {\n    ...\n}\n</code></pre>\n\n<p>i would rather test with:</p>\n\n<pre><code>if (fabs(a - 2.3f) &lt; 0.00001) {\n    ...\n}\n</code></pre>\n\n<p>the <code>2.5</code> represented with bits is: <code>01000000001000000000000000000000</code></p>\n\n<p><strong>EDIT:</strong> <code>fabs</code> is part of the <code>&lt;math.h&gt;</code> or <code>&lt;cmath&gt;</code></p>\n\n<blockquote>\n  <p>Read this: <a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">article</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 6774250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sruUzjfIs7k/AAAAAAAAAAI/AAAAAAAAADI/0mir0-9AWLc/photo.jpg?sz=128", "display_name": "michi7x7", "link": "https://stackoverflow.com/users/6774250/michi7x7"}, "is_accepted": false, "score": 0, "last_activity_date": 1474461947, "last_edit_date": 1495540844, "creation_date": 1474461947, "answer_id": 39616957, "question_id": 39616432, "link": "https://stackoverflow.com/questions/39616432/why-ifa-2-3-evaluates-false-when-float-a-2-3/39616957#39616957", "title": "why if(a==2.3) evaluates false when float a=2.3", "body": "<p>Comparing floating point values is not as easy as it might seem, have a look at <a href=\"https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison\">Most effective way for float and double comparison</a>.</p>\n\n<p>It all boils down to the fact, that floating point numbers are not exact (well \nmost are not). Usually you compare 2 floats by allowing a small error window (epsilon):</p>\n\n<pre><code>if( fabs(a - 2.3f) &lt; epsion) { ... }\n</code></pre>\n\n<p>where epsilon is small enough for your calculation, but not too small (bigger than <a href=\"https://en.wikipedia.org/wiki/Machine_epsilon\" rel=\"nofollow noreferrer\">Machine epsilon</a>).</p>\n"}], "owner": {"reputation": 75, "user_id": 6816941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff12d83b8c5cf5495f2a7e92d2047371?s=128&d=identicon&r=PG&f=1", "display_name": "Hariom", "link": "https://stackoverflow.com/users/6816941/hariom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "closed_date": 1474462638, "accepted_answer_id": 39616662, "answer_count": 3, "score": 4, "last_activity_date": 1474463855, "creation_date": 1474460495, "last_edit_date": 1474463855, "question_id": 39616432, "link": "https://stackoverflow.com/questions/39616432/why-ifa-2-3-evaluates-false-when-float-a-2-3", "closed_reason": "Duplicate", "title": "why if(a==2.3) evaluates false when float a=2.3", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\n    float a = 2.3;\n    if(a == 2.3) {\n        pritnf(\"hello\");\n    }\n    else {\n        printf(\"hi\");\n    }\n}\n</code></pre>\n\n<p>It prints \"hi\" in output, or we can say that if condition is getting false value.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\n    float a = 2.5;\n    if(a == 2.5)\n        printf(\"Hello\");\n    else\n        printf(\"Hi\");\n}\n</code></pre>\n\n<p>It prints hello.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1474457215, "post_id": 39615239, "comment_id": 66537126, "body": "C or C++, pick one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 7, "creation_date": 1474457235, "post_id": 39615239, "comment_id": 66537140, "body": "Just don&#39;t write spaghetti like this."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1474457288, "post_id": 39615239, "comment_id": 66537170, "body": "It is not about the code quality. It is about <code>defined</code> or may be <code>undefined</code> behavior."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1474457363, "post_id": 39615239, "comment_id": 66537227, "body": "You might want to add the &quot;language-lawyer&quot; tag then, to show that this is not a real-world program and that you are only interested in the language behavior."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 2, "creation_date": 1474457384, "post_id": 39615239, "comment_id": 66537242, "body": "I would not trust the debugger to show the PC very accurately; Try to put a dummy statement after <code>LABEL1</code> in the first example, I guess the PC will be set there if you do that."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1474457596, "post_id": 39615239, "comment_id": 66537402, "body": "@alain Put it as an answer, so I can check it as a valid answer. You are right, I guess it is some kind of compiler optimisation."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1474458250, "post_id": 39615239, "comment_id": 66537825, "body": "@Hairi <code>goto</code> is a high-level flow control keyword just like <code>if</code> statements and loops, so it isn&#39;t as simple as just setting the program counter. The functions setjmp/longjmp are closer to such low-level behavior. Though be aware that using those functions is even worse practice than using goto."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1474458478, "post_id": 39615542, "comment_id": 66537955, "body": "Good debuggers support op code level stepping/breakpoints. With a good debugger, you&#39;d be able to see exactly which instruction(s) that the C code corresponds to, and you would get an exact match between the code and the program counter. So this might actually just be a bad choice of tools (<i>cougheclipsesuckscough</i>)."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": true, "score": 0, "last_activity_date": 1475094908, "last_edit_date": 1475094908, "creation_date": 1474457908, "answer_id": 39615542, "question_id": 39615239, "link": "https://stackoverflow.com/questions/39615239/label-called-outside-the-loop-isnt-accessible-from-outside-the-loop/39615542#39615542", "title": "Label called outside the loop isn&#39;t accessible from outside the loop?", "body": "<p>The debugger does often not show the PC very accurately, because a single source line consists of multiple opcodes, and sometimes of no opcodes at all, so it can't always map the PC to the correct source line.</p>\n\n<p>Put a dummy statement after <code>LABEL1</code> in the first example to see if the PC is set there.</p>\n\n<p>An alternative is to switch to the 'disassembly view' or similar if your debugger supports it.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 39615542, "answer_count": 1, "score": 1, "last_activity_date": 1475094908, "creation_date": 1474457072, "last_edit_date": 1474459673, "question_id": 39615239, "link": "https://stackoverflow.com/questions/39615239/label-called-outside-the-loop-isnt-accessible-from-outside-the-loop", "title": "Label called outside the loop isn&#39;t accessible from outside the loop?", "body": "<p>This is the code I was debugging, when I found this(I find interesting).</p>\n\n<pre><code>int function(void) {\n    static int i, state = 0;\n    switch (state) {\n        case 0: goto LABEL0;\n        case 1: goto LABEL1;\n    }\n    LABEL0: /* start of function */\n    for (i = 0; i &lt; 10; i++) {\n        state = 1; /* so we will come back to LABEL1 */\n        return i;\n        LABEL1:; /* resume control straight after the return */\n    }\n}\n</code></pre>\n\n<p>So what I observed is that this statement -<code>goto LABEL1;</code> never moves the PC directly to the code after the label <strong>WHEN THE LABEL IS INSIDE A LOOP</strong>. So far so good. Things went really messy when I changed the code to this and debugged again:</p>\n\n<pre><code>int function(void) {\n    static int i, state = 0;\n    switch (state) {\n        case 0: goto LABEL0;\n        case 1: goto LABEL1;\n    }\n   for(;;){\n       i++;\n    LABEL0: /* start of function */\n    for (i = 0; i &lt; 10; i++) {\n        state = 1; /* so we will come back to LABEL1 */\n        return i;\n        LABEL1:; /* resume control straight after the return */\n    }\n   }\n}\n</code></pre>\n\n<p>I deliberately nested <code>LABEL0</code> into loop so I can confirm the results observed. Though the observations didn't confirm the expected result. This time the <code>goto</code> statement sent the program directly to the code after the label it refers to (<code>LABEL0:)</code>, despite the label was nested into the dummy <code>for(;;)</code> loop. </p>\n\n<p>I really hope you get the scenario. Can anyone explain the behavior(I can't find consistency in)? </p>\n"}, {"tags": ["c", "linked-list", "queue"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 1, "creation_date": 1474457195, "post_id": 39615012, "comment_id": 66537108, "body": "What do you mean by initiate the list?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1474458065, "post_id": 39615012, "comment_id": 66537711, "body": "<code>sList* create_sList(void) { sList *list = malloc(sizeof(*list)); list-&gt;count = 0; list-&gt;last = list-&gt;first = NULL; return list; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 1, "creation_date": 1474458769, "post_id": 39615740, "comment_id": 66538149, "body": "Why allocate memory for first node ? It&#39;s an empty list, so, <code>list-&gt;first</code> and <code>list-&gt;last</code> should be equal to <code>NULL</code> and <code>list-&gt;count</code> should be equal to zero"}, {"owner": {"reputation": 199, "user_id": 5747995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUewr.jpg?s=128&g=1", "display_name": "Cl&#233;ment P&#233;au", "link": "https://stackoverflow.com/users/5747995/cl%c3%a9ment-p%c3%a9au"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1474461293, "post_id": 39615740, "comment_id": 66539793, "body": "Didn&#39;t realise you wanted an empty list sorry :)"}], "tags": [], "owner": {"reputation": 199, "user_id": 5747995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUewr.jpg?s=128&g=1", "display_name": "Cl&#233;ment P&#233;au", "link": "https://stackoverflow.com/users/5747995/cl%c3%a9ment-p%c3%a9au"}, "is_accepted": false, "score": 0, "last_activity_date": 1474458507, "creation_date": 1474458507, "answer_id": 39615740, "question_id": 39615012, "link": "https://stackoverflow.com/questions/39615012/linked-list-in-c-with-header-node/39615740#39615740", "title": "Linked List in C with header node", "body": "<p>To \"initiate\"(create) the linked list you should allocate the head pointer by doing    </p>\n\n<pre><code>sList* create_sList(void) {\n  sList *list = NULL;\n  if ((list = malloc(sizeof(sList))) == NULL) // always check your mallocs  \n    return (NULL);\n  if ((list-&gt;first = malloc(sizeof(snodeType))) == NULL)\n    return (NULL);\n  bzero(list-&gt;first, sizeof(snodeType));\n  list-&gt;last = list-&gt;first;\n  return (list);\n}\n</code></pre>\n\n<p>then use <code>int insert_element_s(sList *L, snodeType *p, int value);</code>, *p being either the last or the first element of list, *L being list and value being the value. :)</p>\n"}, {"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1474531188, "post_id": 39616371, "comment_id": 66571361, "body": "@Garf365 Thanks, didn&#39;t see it due to the indent. Fixed."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1474531072, "last_edit_date": 1474531072, "creation_date": 1474460302, "answer_id": 39616371, "question_id": 39615012, "link": "https://stackoverflow.com/questions/39615012/linked-list-in-c-with-header-node/39616371#39616371", "title": "Linked List in C with header node", "body": "<p>That should just be:</p>\n\n<pre><code>sList * create_sList(void)\n{\n  sList *list = malloc(sizof *list);\n  if(list != NULL)\n  {\n    list-&gt;count = 0;\n    list-&gt;first = list-&gt;last = NULL;\n  }\n  return list;\n}\n</code></pre>\n\n<p>This returns a list head with no elements, i.e. an empty list header.</p>\n"}], "owner": {"reputation": 81, "user_id": 6857984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4enk8.jpg?s=128&g=1", "display_name": "Jakub Kubista", "link": "https://stackoverflow.com/users/6857984/jakub-kubista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1366, "favorite_count": 0, "accepted_answer_id": 39616371, "answer_count": 2, "score": 3, "last_activity_date": 1474531072, "creation_date": 1474456490, "question_id": 39615012, "link": "https://stackoverflow.com/questions/39615012/linked-list-in-c-with-header-node", "title": "Linked List in C with header node", "body": "<blockquote>\n  <p>The type definition of the list is in linkedList.h as usual.</p>\n</blockquote>\n\n<pre><code> #ifndef LINKEDLIST_H\n #define LINKEDLIST_H\n\n typedef struct snode {\n        int value;  \n        struct snode *next; \n } snodeType;\n\n typedef struct hnode {int count;\n        snodeType *first;\n        snodeType *last; \n } sList;\n\n sList* create_sList(void);\n int insert_element_s(sList *L, snodeType *p, int value);\n int delete_element_s(sList *L, snodeType *p); \n sList* merge_lists(sList *L1, sList *L2);\n\n #endif /* LINKEDLIST_H */\n</code></pre>\n\n<p>Question is:</p>\n\n<blockquote>\n  <p>sList * create_sList(void)  creates the list and returns it to the\n  caller. It has to allocate memory for the header node, initialize the\n  fields in the struct hnode.</p>\n</blockquote>\n\n<pre><code>sList* create_sList(void) {\n\n    sList *list = NULL;\n    list-&gt;first  = (sList*)malloc(sizeof(snodeType));\n    list-&gt;last  = (sList*)malloc(sizeof(snodeType));\n\n/*  2nd option\n    sList *list = NULL;\n    node = malloc(sizeof(snodeType));\n    node-&gt;next= NULL;\n    list-&gt;first = node;\n    list-&gt;last = node;\n*/\n\n    return list;\n}\n</code></pre>\n\n<p>I need to just initiate this linked list, is there somebody who know how?</p>\n"}, {"tags": ["c", "linux", "ssl", "tcp", "kernel-module"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1474456146, "post_id": 39614813, "comment_id": 66536422, "body": "Doing something like this in the kernel is probably not a good idea. I would recommend having the network communication in a user-space program that communicates with kernel module through some other means."}, {"owner": {"reputation": 547, "user_id": 2903797, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ac03324e358add38d469849ea85f975e?s=128&d=identicon&r=PG&f=1", "display_name": "Nic30g", "link": "https://stackoverflow.com/users/2903797/nic30g"}, "edited": false, "score": 0, "creation_date": 1495407338, "post_id": 39614813, "comment_id": 75225307, "body": "Are there any better options? I need somehow connect hardware simulator to kernel to test drivers."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9576923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561f0eb4c3a7df26835dc5c0f0d277a6?s=128&d=identicon&r=PG&f=1", "display_name": "gdb007", "link": "https://stackoverflow.com/users/9576923/gdb007"}, "is_accepted": false, "score": 0, "last_activity_date": 1522780618, "creation_date": 1522780618, "answer_id": 49637003, "question_id": 39614813, "link": "https://stackoverflow.com/questions/39614813/linux-kernel-module-tcp-connection/49637003#49637003", "title": "Linux kernel module tcp connection", "body": "<p>I would suggest to do such application (TCP/SSL) in user space and have a way to share buffer between userspace and kernel space to avoid copy overhead. Keep the kernel module processing simple and quick.</p>\n"}], "owner": {"reputation": 103, "user_id": 5259965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0aefff3ac8b39026b03cc6e34d1185b?s=128&d=identicon&r=PG&f=1", "display_name": "oel_runs_the_world", "link": "https://stackoverflow.com/users/5259965/oel-runs-the-world"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 720, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522780618, "creation_date": 1474455946, "question_id": 39614813, "link": "https://stackoverflow.com/questions/39614813/linux-kernel-module-tcp-connection", "title": "Linux kernel module tcp connection", "body": "<p>I am writing a kernel module which requires a tcp connection and it is really hard to find up-to-date manuals/examples/tutorials. I need the kernel module to be the client, to send and recive data and ssl encryption required too. Which of the dozen kernel tcp interfaces fits my needs and is the latest one?</p>\n"}, {"tags": ["c", "linux", "unicode", "utf-8"], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1474461756, "post_id": 39615057, "comment_id": 66540132, "body": "This works as long as the program is run in a UTF-8 locale, otherwise you&#39;d need to replace the empty string in the call to <code>setlocale</code> with the name of an installed UTF-8 locale."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": true, "score": 1, "last_activity_date": 1474456984, "last_edit_date": 1474456984, "creation_date": 1474456641, "answer_id": 39615057, "question_id": 39614722, "link": "https://stackoverflow.com/questions/39614722/unicode-code-point-to-utf8-and-wctomb/39615057#39615057", "title": "Unicode code point to utf8 and wctomb", "body": "<p>You should change program locale properly before using of <code>wctomb()</code>:</p>\n\n<pre><code>#include &lt;locale.h&gt;\n/* ... */\nsetlocale(LC_ALL, \"\");\n</code></pre>\n\n<p>This sets up program locale setting according to your environment. <a href=\"http://man7.org/linux/man-pages/man3/setlocale.3.html\" rel=\"nofollow\">man setlocale</a></p>\n\n<blockquote>\n  <p>If locale is an empty string, \"\", each part of the locale that should\n  be modified is set according to the environment variables.</p>\n</blockquote>\n\n<p>P.S. Actually <code>LC_CTYPE</code> is enough for <code>wctomb()</code>.</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 39615057, "answer_count": 1, "score": 2, "last_activity_date": 1474456984, "creation_date": 1474455711, "question_id": 39614722, "link": "https://stackoverflow.com/questions/39614722/unicode-code-point-to-utf8-and-wctomb", "title": "Unicode code point to utf8 and wctomb", "body": "<p>I was looking for ways to convert unicode codepoints to utf8.\nSo far, I've learned I can do it manually or use iconv.</p>\n\n<p>I also thought wctomb would work, but it doesn't:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define CENTER_UTF8 \"\\xf0\\x9d\\x8c\\x86\"\n#define CENTER_UNICODE 0x1D306\n\nint main(int argc, char** argv)\n{\n    puts(CENTER_UTF8); //OK\n    static char buf[10];\n    int r;\n\n#define WCTOMB(What) \\\n    wctomb(NULL,0); \\\n    r=wctomb(buf,What); \\\n    puts(buf); \\\n    printf(\"r=%d\\n\", r);\n\n    //Either one fails with -1\n    WCTOMB(CENTER_UNICODE);\n    WCTOMB(htonl(CENTER_UNICODE));\n}\n</code></pre>\n\n<p>Could someone please explain to me why wctomb won't convert a unicode codepoint to utf8. I'm on Linux with a utf8 locale.</p>\n"}, {"tags": ["c", "char", "do-while"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1474455750, "post_id": 39614655, "comment_id": 66536166, "body": "Because <code>char</code> is an 8-bit signed type. Using 2s complement, 127 is represented as 0x7F, and -128 is represented as 0x80. When incrementing 0x7F (127), we get 0x80 (-128)."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 1, "creation_date": 1474455855, "post_id": 39614655, "comment_id": 66536232, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9016741/behavior-of-increment-operator-at-bounds-for-char-type\">Behavior of increment operator at bounds for char type</a>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1474456089, "post_id": 39614655, "comment_id": 66536387, "body": "@barakmanos: <a href=\"http://stackoverflow.com/a/2054941/364696\"><code>char</code> actually has undefined signedness by the standard.</a>. That&#39;s why I was careful to note in my answer that this was a choice by his compiler. It&#39;s usually signed, but compiler flags can change it to unsigned, and either interpretation is standard legal."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1474456310, "post_id": 39614655, "comment_id": 66536528, "body": "@ShadowRanger: I actually think it&#39;s a shame that the language standard does not impose <code>sign</code>/<code>unsigned</code> next to every integral type, and on the other hand, allows declarations like <code>unsigned</code> (synonymous to <code>unsigned int</code>), <code>short int</code> (synonymous to <code>short</code>), and several other different forms like <code>long int</code>, <code>long long int</code>, etc. Not sure why they didn&#39;t take their time to come up with a minimal and concise set of (simple) rules, and in exchange, left all this ambiguity behind..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1474458597, "post_id": 39614655, "comment_id": 66538042, "body": "Should this be read as &quot;while there is c++, no good outcome is possible&quot;? :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500366542, "post_id": 39614655, "comment_id": 77291054, "body": "<i>Can anybody explain to me why after the first loop, the value of c will become to -128?</i>: how do you know that?  I see <code>count=130</code> whether <code>char</code> is signed or not, albeit not guaranteed."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1474458929, "post_id": 39614698, "comment_id": 66538262, "body": "Please note that signed integer overflow is actually undefined behavior. Wrap-around is not guaranteed. The program might as well halt and catch fire or seemingly work as expected."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1474467911, "post_id": 39614698, "comment_id": 66544702, "body": "<a href=\"http://stackoverflow.com/a/8010063/4944425\">AFAIK</a>, not even a two&#39;s complement representation is guarateed by the standard..."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 7, "last_activity_date": 1474455654, "creation_date": 1474455654, "answer_id": 39614698, "question_id": 39614655, "link": "https://stackoverflow.com/questions/39614655/increment-of-character-in-c/39614698#39614698", "title": "Increment of character in C", "body": "<p>Because your compiler defaults <code>char</code> to <code>signed char</code>. So the range of values for it is -128 to 127, and incrementing 127 is triggering wraparound. If you want to avoid this, be explicit, and declare your variable as <code>unsigned char</code>.</p>\n\n<p>Mind you, to do this correctly, you also want to change the <code>printf</code>; you're printing as a signed <code>int</code> value (<code>%d</code>); to be 100% type correct, you'd want to match types, so the format code should be <code>%hhd</code> for a signed char, or <code>%hhu</code> for an unsigned char. <code>%d</code> will work due to promotion rules with varargs, but it's a bad habit to just use <code>%d</code> all the time; when you print an <code>unsigned</code> with <code>%d</code>, your system will likely succeed, but it will show large values as being negative, confusing you.</p>\n"}, {"comments": [{"owner": {"reputation": 887, "user_id": 1691280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06b990f79e44451679541f695648de4?s=128&d=identicon&r=PG", "display_name": "Brandin", "link": "https://stackoverflow.com/users/1691280/brandin"}, "edited": false, "score": 0, "creation_date": 1474491140, "post_id": 39614715, "comment_id": 66558050, "body": "This doesn&#39;t answer the question. It is a valid comment however."}], "tags": [], "owner": {"reputation": 169, "user_id": 6138473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c7d2606df401ca6dfdf5c4766ec44b?s=128&d=identicon&r=PG&f=1", "display_name": "CS_EE", "link": "https://stackoverflow.com/users/6138473/cs-ee"}, "is_accepted": false, "score": 1, "last_activity_date": 1474466902, "last_edit_date": 1474466902, "creation_date": 1474455689, "answer_id": 39614715, "question_id": 39614655, "link": "https://stackoverflow.com/questions/39614655/increment-of-character-in-c/39614715#39614715", "title": "Increment of character in C", "body": "<p>try using unsigned char to count up to 255</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7549404"}, "edited": false, "score": 0, "creation_date": 1500399287, "post_id": 45161136, "comment_id": 77315259, "body": "Nice explanation and easily understand"}], "tags": [], "owner": {"reputation": 4169, "user_id": 7040040, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6aLN9.jpg?s=128&g=1", "display_name": "A.A Noman", "link": "https://stackoverflow.com/users/7040040/a-a-noman"}, "is_accepted": false, "score": 1, "last_activity_date": 1500365789, "creation_date": 1500365789, "answer_id": 45161136, "question_id": 39614655, "link": "https://stackoverflow.com/questions/39614655/increment-of-character-in-c/45161136#45161136", "title": "Increment of character in C", "body": "<p>Another easy explanation of this problem</p>\n\n<p>This situation is known as overflow of signed char. \nRange of unsigned char is <code>-128 to 127</code>. If we will assign a value greater than 127 then value of variable will be changed to a value if we will move clockwise direction as shown in the figure according to number. If we will assign a number which is less than -128 then we have to move in anti-clockwise direction.</p>\n\n<p>When variable value is 127 then it's ok. But if variable value increment by 1 then clock wise increment also 1 and it's position value -128. So your output  is -128.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4Zluu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Zluu.jpg\" alt=\"Demo Image\"></a></p>\n\n<p><a href=\"http://www.cquestions.com/2010/10/c-interview-questions-and-answers.html#Exlink16\" rel=\"nofollow noreferrer\">Demo Link</a></p>\n"}], "owner": {"reputation": 109, "user_id": 6564887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/733f338dd1cc6e10ef1ddb592c5918f9?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Nguyen", "link": "https://stackoverflow.com/users/6564887/dave-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10392, "favorite_count": 0, "accepted_answer_id": 39614698, "answer_count": 3, "score": 0, "last_activity_date": 1500365789, "creation_date": 1474455548, "question_id": 39614655, "link": "https://stackoverflow.com/questions/39614655/increment-of-character-in-c", "title": "Increment of character in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int count=0;\n    char c=127;\n\n    do\n      count++;\n    while(c++);\n    printf(\"count=%d \",count);\n    return 0;\n}\n</code></pre>\n\n<p>Can anybody explain to me why after the first loop, the value of c will become to -128?</p>\n"}, {"tags": ["c", "debugging", "gdb", "disassembly"], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 1, "last_activity_date": 1474457223, "creation_date": 1474457223, "answer_id": 39615307, "question_id": 39614568, "link": "https://stackoverflow.com/questions/39614568/how-to-use-gdb-to-debug-into-a-c-programs-corresponding-disassembly/39615307#39615307", "title": "How to use gdb to debug into a C program&#39;s corresponding disassembly?", "body": "<p>To jump to the next assembly instruction, use <code>stepi</code> (short <code>si</code>) instead.</p>\n\n<p>See <a href=\"ftp://ftp.gnu.org/pub/old-gnu/Manuals/gdb/html_node/gdb_37.html\" rel=\"nofollow\">this</a> for more information, especially how to use <code>display/i</code> to show the next machine instruction.</p>\n"}, {"tags": [], "owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "is_accepted": false, "score": 1, "last_activity_date": 1474464883, "creation_date": 1474464883, "answer_id": 39618134, "question_id": 39614568, "link": "https://stackoverflow.com/questions/39614568/how-to-use-gdb-to-debug-into-a-c-programs-corresponding-disassembly/39618134#39618134", "title": "How to use gdb to debug into a C program&#39;s corresponding disassembly?", "body": "<p>For a reasonably nice assembly view, use <code>la p</code> (<code>layout prev</code>) and step with <code>si</code> (<code>stepi</code>). Use <code>C-x a</code> to return to/from regular gdb prompt. In some cases, other layouts may be useful as well.</p>\n"}], "owner": {"reputation": 5623, "user_id": 6164172, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cfe3f1dd56fc9c05a01393d3c618d727?s=128&d=identicon&r=PG&f=1", "display_name": "Troskyvs", "link": "https://stackoverflow.com/users/6164172/troskyvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 39615307, "answer_count": 2, "score": 0, "last_activity_date": 1474976708, "creation_date": 1474455278, "last_edit_date": 1474976708, "question_id": 39614568, "link": "https://stackoverflow.com/questions/39614568/how-to-use-gdb-to-debug-into-a-c-programs-corresponding-disassembly", "title": "How to use gdb to debug into a C program&#39;s corresponding disassembly?", "body": "<p>Using VC can bring up disassembly window and travel across it. But using gdb seems not so direct:</p>\n\n<p>E.g. I've got a myadd.c</p>\n\n<pre><code>void main(){\n   int i=0;\n   int j=i+1;\n   j+=2;\n}\n</code></pre>\n\n<blockquote>\n  <p>gcc -g myadd.c</p>\n  \n  <p>gdb a.out</p>\n  \n  <p>b 2 //set break point at int j=1+1;</p>\n</blockquote>\n\n<p>Now I can use \"disassemble\" command to see disassembly code. My requirement is to debug \"into\" this disassembly code like VC could. I tried 's' command, it directly goes into next \"C\" statement, not disassembly statement.</p>\n\n<p>How to do that?</p>\n"}, {"tags": ["c++", "c", "function", "pointers", "visual-c++"], "comments": [{"owner": {"reputation": 3977, "user_id": 3286661, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2111859aa05157fab64e52e795cc1034?s=128&d=identicon&r=PG&f=1", "display_name": "nishantsingh", "link": "https://stackoverflow.com/users/3286661/nishantsingh"}, "edited": false, "score": 1, "creation_date": 1474454028, "post_id": 39614016, "comment_id": 66534957, "body": "You might want to have a look at <a href=\"http://stackoverflow.com/questions/12152167/why-is-using-the-function-name-as-a-function-pointer-equivalent-to-applying-the\">this</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 3977, "user_id": 3286661, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2111859aa05157fab64e52e795cc1034?s=128&d=identicon&r=PG&f=1", "display_name": "nishantsingh", "link": "https://stackoverflow.com/users/3286661/nishantsingh"}, "edited": false, "score": 0, "creation_date": 1474454094, "post_id": 39614016, "comment_id": 66535016, "body": "@user3286661: That&#39;s the reverse conversion."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1474454937, "post_id": 39614016, "comment_id": 66535606, "body": "@MSalters The accepted answer  to that question is a very good answer to this question."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1474458425, "post_id": 39614016, "comment_id": 66537924, "body": "Well, it was not possible to find that because that question was an answer to my question, lol. The author asked about quite different manifestation of same paradox. I can&#39;t say I blame newer standards or that I hate C++, but by piling up  features into standard they caused some issues."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1474462063, "post_id": 39614016, "comment_id": 66540381, "body": "Fun fact: the function-call operator, <code>()</code>, <i>always</i> operates on a pointer-to-function.  When you write <code>(*p)()</code>, the pointer is dereferenced, <i>and then immediately un-dereferenced again</i> so that the function call operator gets what it wants.  (C99 &#167;&#167; 6.3.2p4 and 6.5.2.2p1)"}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 1, "last_activity_date": 1474454156, "creation_date": 1474454156, "answer_id": 39614165, "question_id": 39614016, "link": "https://stackoverflow.com/questions/39614016/why-there-are-two-ways-to-call-function-by-pointer/39614165#39614165", "title": "Why there are two ways to call function by pointer?", "body": "<p>No, the dereference is not necessary. Pointers to functions are callable just like functions are. Even <code>p(5, 4.3f)</code> would have been acceptable.</p>\n"}], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1474454201, "accepted_answer_id": 39614165, "answer_count": 1, "score": 0, "last_activity_date": 1474454156, "creation_date": 1474453785, "question_id": 39614016, "link": "https://stackoverflow.com/questions/39614016/why-there-are-two-ways-to-call-function-by-pointer", "closed_reason": "Duplicate", "title": "Why there are two ways to call function by pointer?", "body": "<p>In project I'm working with I had found a complex macro that was creating  an map of pointers to functions loaded from shared library. To use it for another library which should be loaded same way I had to inspect that.. and found that it contains line that shouldn't be working as far as I know. To boil down it to simple code, I threw away all syntax sugar and made such example:  </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid func(int i, float f)\n{\n    cout &lt;&lt; \"Parameter is \" &lt;&lt; i &lt;&lt; \" and \" &lt;&lt; f  &lt;&lt; endl;\n}\n\n\ntypedef void (*FunctionFunc)(int i, float f);\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    FunctionFunc p = &amp;func;\n    (p)(5,4.3f);\n    return 0;\n}\n</code></pre>\n\n<p>Shouldn't the function call look like (*p)(5,4.3f) - according to books since K&amp;R's? Compiler is VS2010 and code above works both with asterisk and without.</p>\n"}, {"tags": ["c", "windows", "unix", "text", "binary"], "comments": [{"owner": {"reputation": 7673, "user_id": 3004881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lFgVw.jpg?s=128&g=1", "display_name": "Dan Getz", "link": "https://stackoverflow.com/users/3004881/dan-getz"}, "edited": false, "score": 0, "creation_date": 1474453881, "post_id": 39613946, "comment_id": 66534867, "body": "Making a function argument meaningless is simple; one can just ignore it and do the same thing whether it&#39;s there or not. It sounds like you&#39;re asking more about what binary access means on Windows?"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1474454101, "post_id": 39613946, "comment_id": 66535022, "body": "One distinction is that <code>fseek()</code> operates differently for the different modes"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1474454206, "post_id": 39613946, "comment_id": 66535094, "body": "And one would generally use <code>fread()</code> and <code>fwrite()</code> with binary but <code>fprintf()</code>, <code>fscanf()</code>, <code>fputc()</code> and <code>fgetc()</code> with text"}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1474454324, "post_id": 39613946, "comment_id": 66535177, "body": "@Toby OK. So does UNIX always treat files as binary? If you&#39;re writing code for UNIX, are you saying that you&#39;d generally use <code>fread()</code> and <code>fwrite()</code>?"}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "reply_to_user": {"reputation": 7673, "user_id": 3004881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lFgVw.jpg?s=128&g=1", "display_name": "Dan Getz", "link": "https://stackoverflow.com/users/3004881/dan-getz"}, "edited": false, "score": 0, "creation_date": 1474454356, "post_id": 39613946, "comment_id": 66535199, "body": "@Dan Getz - thanks, yes that answer was useful."}], "answers": [{"comments": [{"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "edited": false, "score": 0, "creation_date": 1474455368, "post_id": 39614551, "comment_id": 66535897, "body": "How does UNIX know that it&#39;s tried to read past the length of the string? Is the file / data length encoded in the file address somehow?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "edited": false, "score": 0, "creation_date": 1474455462, "post_id": 39614551, "comment_id": 66535958, "body": "Each file has associated metadata where the length is, as last modification date, owner, access rights, etc. So if the current position of the opened stream is past the length, you are at the end of file."}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "edited": false, "score": 0, "creation_date": 1474455501, "post_id": 39614551, "comment_id": 66535990, "body": "Brilliant. Thank you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474467914, "post_id": 39614551, "comment_id": 66544705, "body": "In Unix, if one reads a file with text and a beginning byte-order-mark <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">BOM</a>, is that BOM read as a few characters?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1474468520, "post_id": 39614551, "comment_id": 66545125, "body": "Of course... BOM is just a sequence of bytes, as any other. Applications may interpret them as something special, some other don&#39;t bother. At least the kernel makes no difference."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 2, "last_activity_date": 1474455232, "creation_date": 1474455232, "answer_id": 39614551, "question_id": 39613946, "link": "https://stackoverflow.com/questions/39613946/why-is-binary-access-meaningless-on-unix-systems/39614551#39614551", "title": "Why is &#39;binary access meaningless on UNIX systems&#39;?", "body": "<p>Traditional windows system have different representation of text and binary files. Text files have a end of file marker (^-Z marker), so you can't read that character if you open it in text mode, IO layer will just detect it and returns you that you are at the end of file. In binary mode, it behaves like Unix systems.</p>\n\n<p>Unix doesn't take care about file content, and provide no such semantic. On Unix, end of file, is just a try to read something past the length of the stream. This is why text or binary mode doesn't matters in Unix world, any character can appear in any kind of regular file.</p>\n"}], "owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1474468029, "accepted_answer_id": 39614551, "answer_count": 1, "score": 1, "last_activity_date": 1474455232, "creation_date": 1474453618, "last_edit_date": 1495541963, "question_id": 39613946, "link": "https://stackoverflow.com/questions/39613946/why-is-binary-access-meaningless-on-unix-systems", "closed_reason": "Duplicate", "title": "Why is &#39;binary access meaningless on UNIX systems&#39;?", "body": "<p>I am learning C from the K&amp;R handbook. I know (and read) that 'b' in a <code>fopen</code> call signals binary access. The book then goes on to say that this (binary access) is meaningless on UNIX systems.</p>\n\n<p>The inference is that it is meaningful on Windows.</p>\n\n<p>My question is, why does Windows make this distinction between text and binary and UNIX doesn't. Also, what is the distinction?</p>\n\n<p>I found some things that come close to answering it, but still don't quite satisfy me:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25823310/is-there-any-difference-between-text-and-binary-mode-in-file-access\">Is there any difference between text and binary mode in file access?</a></p>\n\n<p><a href=\"http://perlmaven.com/what-is-a-text-file\" rel=\"nofollow noreferrer\">http://perlmaven.com/what-is-a-text-file</a></p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "logical-operators", "short-circuiting"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1474453207, "post_id": 39613707, "comment_id": 66534434, "body": "<code>why do logical operators in C behave like that</code>...umm because that is how they are designed to behave?"}, {"owner": {"reputation": 37223, "user_id": 485561, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/61c769a3a57614e2cff3789076adde3d?s=128&d=identicon&r=PG", "display_name": "Mankarse", "link": "https://stackoverflow.com/users/485561/mankarse"}, "edited": false, "score": 0, "creation_date": 1474453241, "post_id": 39613707, "comment_id": 66534448, "body": "No, C doesn&#39;t need to evaluate the whole expression, since <code>false &amp;&amp; a</code> is false for all values of <code>a</code>, and <code>true || b</code> is true for all values of <code>b</code>. As for &quot;why?&quot;, the reason is simply that C is specified in this way; probably because this behaviour is often useful, and only rarely problematic."}], "answers": [{"comments": [{"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1474453729, "post_id": 39613748, "comment_id": 66534776, "body": "It would be nice to know the reason for the downvote."}, {"owner": {"reputation": 6181, "user_id": 1025555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GBIIj.png?s=128&g=1", "display_name": "Good Night Nerd Pride", "link": "https://stackoverflow.com/users/1025555/good-night-nerd-pride"}, "edited": false, "score": 0, "creation_date": 1474455466, "post_id": 39613748, "comment_id": 66535960, "body": "You kind of just reiterated what the question already stated. The crucial part is the last part of your last sentence. The rest could have been omitted."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 6181, "user_id": 1025555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GBIIj.png?s=128&g=1", "display_name": "Good Night Nerd Pride", "link": "https://stackoverflow.com/users/1025555/good-night-nerd-pride"}, "edited": false, "score": 0, "creation_date": 1474456792, "post_id": 39613748, "comment_id": 66536840, "body": "@GoodNightNerdPride Assuming you&#39;re the downvoter, <i>what</i> did this answer &quot;kind of just reiterate&quot;?  Currently, neither the question nor <i>any</i> answer succinctly uses the example of a NULL pointer check and a dereference of that same pointer to illustrate the usefulness of short-circuit evaluation.  Not only that, the &quot;last part of [the] last sentence&quot; makes no sense without an explanation.  On top of all that, <b>what&#39;s wrong with a fully-explained answer in the first place</b>, even if it does reiterate something?  That &quot;something&quot; may be edited in the future."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 1, "last_activity_date": 1474453070, "creation_date": 1474453070, "answer_id": 39613748, "question_id": 39613707, "link": "https://stackoverflow.com/questions/39613707/why-do-logical-operators-in-c-not-evaluate-the-entire-expression-when-its-not-n/39613748#39613748", "title": "Why do logical operators in C not evaluate the entire expression when it&#39;s not necessary to?", "body": "<p>A typical example is a null-pointer check:</p>\n\n<pre><code>if(ptr != NULL &amp;&amp; ptr-&gt;value) {\n    ....\n}\n</code></pre>\n\n<p>Without short-circuit-evaluation, this would cause an error when the null-pointer is dereferenced.</p>\n\n<p>The program first checks the left part <code>ptr != NULL</code>. If this evaluates to <code>false</code>, it does not have to evaluate the second part, because it is already clear that the result will be <code>false</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1474453900, "post_id": 39613775, "comment_id": 66534877, "body": "Ick. I would not encourage <code>&amp;</code> and <code>|</code> like that. Aside from precedence issues with the bitwise operators, they&#39;re not equivalent. Testing <code>if (func1() &amp;&amp; func2())</code> is not equivalent to <code>if (func1() &amp; func2())</code> even beyond the &quot;want both functions evaluated&quot; case; if either of them returns a truthy value that&#39;s not just <code>1</code>, you could end up with <code>0x8 &amp; 0x1</code> (both truthy values) producing <code>0x0</code>, false (because the bits don&#39;t line up), where <code>0x8 &amp;&amp; 0x1</code> would produce true. Fixing it means remembering to put <code>!!</code> in front of everything or other hacks that <code>&amp;&amp;</code> wouldn&#39;t need."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1474472487, "post_id": 39613775, "comment_id": 66547711, "body": "@ShadowRanger I do agree with the short-comings you commented, but agree with Bathsheba that &quot;if you do always need both arguments evaluated&quot;, this is <i>a</i> way to do so.  A stronger argument against <code>if (func1() &amp; func2())</code> would include a proposed alternative."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1474453475, "last_edit_date": 1474453475, "creation_date": 1474453135, "answer_id": 39613775, "question_id": 39613707, "link": "https://stackoverflow.com/questions/39613707/why-do-logical-operators-in-c-not-evaluate-the-entire-expression-when-its-not-n/39613775#39613775", "title": "Why do logical operators in C not evaluate the entire expression when it&#39;s not necessary to?", "body": "<p>It's just the rule and is extremely useful. Perhaps that's why it's the rule. It means we can write clearer code. An alternative - using <code>if</code> statements would produce much more verbose code since you can't use <code>if</code> statements directly within <em>expressions</em>.</p>\n\n<p>You already give one example. Another is something like <code>if (a &amp;&amp; b / a)</code> to prevent integer division by zero, the behaviour of which is <em>undefined</em> in C. <em>That's</em> what the author is guarding themselves from in writing <code>a &amp;&amp; 5/a</code>.</p>\n\n<p>Very occasionally if you do always need both arguments evaluated (perhaps they call functions with side effects), you can always use <code>&amp;</code> and <code>|</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1143, "user_id": 4110059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/e7MnF.jpg?s=128&g=1", "display_name": "Tom Cornebize", "link": "https://stackoverflow.com/users/4110059/tom-cornebize"}, "is_accepted": false, "score": 1, "last_activity_date": 1474453235, "creation_date": 1474453235, "answer_id": 39613816, "question_id": 39613707, "link": "https://stackoverflow.com/questions/39613707/why-do-logical-operators-in-c-not-evaluate-the-entire-expression-when-its-not-n/39613816#39613816", "title": "Why do logical operators in C not evaluate the entire expression when it&#39;s not necessary to?", "body": "<p>In the expression <code>X &amp;&amp; Y</code>, if <code>X</code> is evaluated to <code>false</code>, then we know that <code>X &amp;&amp; Y</code> will always be <code>false</code>, whatever is the value of <code>Y</code>. Therefore, there is no need to evaluate <code>Y</code>.</p>\n\n<p>This trick is used in your example to avoid a division by <code>0</code>. If <code>a</code> is evaluated to <code>false</code> (i.e. <code>a == 0</code>), then we do not evaluate <code>5/a</code>.</p>\n\n<p>It can also save a lot of time. For instance, when evaluating <code>f() &amp;&amp; g()</code>, if the call to <code>g()</code> is expensive and if <code>f()</code> returns <code>false</code>, not evaluating <code>g()</code> is a nice feature.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1474453333, "creation_date": 1474453333, "answer_id": 39613844, "question_id": 39613707, "link": "https://stackoverflow.com/questions/39613707/why-do-logical-operators-in-c-not-evaluate-the-entire-expression-when-its-not-n/39613844#39613844", "title": "Why do logical operators in C not evaluate the entire expression when it&#39;s not necessary to?", "body": "<blockquote>\n  <p><em>wouldn't C need to evaluate the whole expression because &amp;&amp; requires both predicates to be true?</em></p>\n</blockquote>\n\n<p>Answer: <strong>No.</strong> <strong><em>Why work more when the answer is known \"already\"?</em></strong></p>\n\n<p>As per the definition of the logical AND operator, quoting <code>C11</code>, chapter \u00a76.5.14</p>\n\n<blockquote>\n  <p>The <code>&amp;&amp;</code> operator shall yield <code>1</code> <strong>if both of its operands compare unequal to 0; otherwise, it\n  yields 0.</strong></p>\n</blockquote>\n\n<p>Following that analogy, for an expression of the form <code>a &amp;&amp; b</code>, in case <code>a</code> evaluates to FALSE, irrespective of the evaluated result of <code>b</code>, the result will be FALSE. No need to waste machine cycle checking the <code>b</code> and then returning FALSE, anyway.</p>\n\n<p>Same goes for logical OR operator, too, in case the first argument evaluates to TRUE, the return value condition is already found, and no need to evaluate the second argument.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1474462482, "post_id": 39613976, "comment_id": 66540692, "body": "Performance has nothing to do with this. The compiler is perfectly able to optimize code without the language dictating such things."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1474490288, "post_id": 39613976, "comment_id": 66557598, "body": "@Lundin: If the short-circuiting and evaluation order rules weren&#39;t in effect, the compiler couldn&#39;t make any optimizations that skipped any test that it couldn&#39;t verify deterministically was side-effect free (which, without link time optimization, means basically any function call outside the current compilation unit). Granted, the spec could have made short-circuiting optional (which would mean it was only a possible optimization, not useful for control flow), but performance is a big part of this."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1474525977, "post_id": 39613976, "comment_id": 66568340, "body": "That doesn&#39;t make any sense. If there <i>were</i> side effects, you wouldn&#39;t <i>want</i> the compiler to optimize them away. Because these operators mandate order of evaluation, they can be used for flow control, just as much as <code>if - else</code>. If you write something like <code>if(true){} else</code>  then you don&#39;t want the else to be executed no matter what&#39;s inside it. If you write something like <code>a + b</code> though, you want both operands to be evaluated. Comparing sequenced or non-sequenced expressions in terms of side-effects is like comparing apples and oranges."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1474525985, "post_id": 39613976, "comment_id": 66568344, "body": "Take the example <code>if(a() | b())</code>. An optimizing compiler will not evaluate both operands if it finds that the first operand is not-zero. This isn&#39;t required by the standard but very likely to happen. If order of evaluation had been forced on this expression, the compiler might be forced to skip all optimizations it could have done on the temporary results, because all evaluations has to be completed. Nor can it re-order the instructions. Essentially, a sequence point might work as a memory barrier. Furthermore, the sequence point will create a conditional branch, which slows down execution."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1474455495, "last_edit_date": 1474455495, "creation_date": 1474453683, "answer_id": 39613976, "question_id": 39613707, "link": "https://stackoverflow.com/questions/39613707/why-do-logical-operators-in-c-not-evaluate-the-entire-expression-when-its-not-n/39613976#39613976", "title": "Why do logical operators in C not evaluate the entire expression when it&#39;s not necessary to?", "body": "<p>Short-circuiting is a performance enhancement that happens to be useful for other purposes.</p>\n\n<p>You say \"wouldn't C need to evaluate the whole expression because <code>&amp;&amp;</code> requires both predicates to be true?\" But think about it. If the left hand side of the <code>&amp;&amp;</code> is false, does it matter what the right hand side evaluates to? <code>false &amp;&amp; true</code> or <code>false &amp;&amp; false</code>, the result is the same: false.</p>\n\n<p>So when the left hand side of an <code>&amp;&amp;</code> is determined to be false, or the left hand side of a <code>||</code> is determined to be true, the value on the right doesn't matter, and can be skipped. This makes the code faster by removing the need to evaluate a potentially expensive second test. Imagine if the right-hand side called a function that scanned a whole file for a given string? Wouldn't you want that test skipped if the first test meant you already knew the combined answer?</p>\n\n<p>C decided to go beyond guaranteeing short-circuiting to guaranteeing order of evaluation because it means safety tests like the one you provide are possible. As long as the tests are idempotent, or the side-effects are intended to occur only when not short-circuited, this feature is desirable.</p>\n"}], "owner": {"reputation": 97, "user_id": 2020493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6deecfc7faff693bcb387f3b0417a42f?s=128&d=identicon&r=PG", "display_name": "user2020493", "link": "https://stackoverflow.com/users/2020493/user2020493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 1, "answer_count": 5, "score": 4, "last_activity_date": 1474462323, "creation_date": 1474452978, "last_edit_date": 1474453626, "question_id": 39613707, "link": "https://stackoverflow.com/questions/39613707/why-do-logical-operators-in-c-not-evaluate-the-entire-expression-when-its-not-n", "title": "Why do logical operators in C not evaluate the entire expression when it&#39;s not necessary to?", "body": "<p>I was reading my textbook for my computer architecture class and I came across this statement.</p>\n\n<blockquote>\n  <p>A second important distinction between the logical operators '<code>&amp;&amp;</code>' and '<code>||</code>' versus their bit-level counterparts '<code>&amp;</code>' and '<code>|</code>' is that the logical operators do not evaluate their second argument if the result of the expression can be determined by evaluating the first argument. Thus, for example, the expression <code>a &amp;&amp; 5/a</code> will never cause a division by zero, and the expression <code>p &amp;&amp; *p++</code> will never cause the dereferencing of a null pointer. (Computer Systems: A Programmer's Perspective by Bryant and O'Hallaron, 3rd Edition, p. 57)</p>\n</blockquote>\n\n<p>My question is why do logical operators in C behave like that? Using the author's example of <code>a &amp;&amp; 5/a</code>, wouldn't C need to evaluate the whole expression because <code>&amp;&amp;</code> requires both predicates to be true? Without loss of generality, my same question applies to his second example.</p>\n"}, {"tags": ["c", "assembly", "segmentation-fault"], "comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1474454908, "post_id": 39613511, "comment_id": 66535582, "body": "Sorta looks like you are on Windows (both your calling convention and error code) trying to write a 64-bit program? We need to know your platform. If this is targeting Win64 then your lacking shadow space for 4 64-bit registers (32 bytes) prior to the call. <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms235286.aspx</a>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1474455227, "post_id": 39613511, "comment_id": 66535806, "body": "What happens if you put <code>sub $32, %rsp</code> just before the <code>call printf</code> and then <code>add $32, %rsp</code> right after the call?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1474462750, "post_id": 39613511, "comment_id": 66540875, "body": "@MichaelPetch 16-byte stack alignment is also required (per <a href=\"https://msdn.microsoft.com/en-us/library/ew5tede7.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ew5tede7.aspx</a>) but it&#39;s not clear to me whether that means %rsp is supposed to be aligned on entry to the callee, or immediately before the <code>call</code> instruction.  Either way, your suggested offsets are not quite right."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1474463199, "post_id": 39613511, "comment_id": 66541199, "body": "Yes I know @Zwol however in this case he happens to be 16 byte aligned because <code>main</code> was misaligned by the return address on the stack and the <code>push %rbp</code> aligned back to 16-bytes. So subtracting 32 from that is of course still aligned. At function call it is aligned. But after control is transferred the call misaligns by 8. Push of one 64-bit register realigns to 16. Had the PUSH not been there then I would have complained about alignment."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1474463395, "post_id": 39613511, "comment_id": 66541328, "body": "@MichaelPetch Oh, OK. I think I was doing the math for 32-bit mode in my head without realizing it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1474559443, "post_id": 39613511, "comment_id": 66590559, "body": "the posted code is not <code>C</code>, so please remove the <code>c</code> tag"}], "owner": {"reputation": 21, "user_id": 5873768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70bbac339193b0ac55786803222f9a4?s=128&d=identicon&r=PG", "display_name": "Colorfusion", "link": "https://stackoverflow.com/users/5873768/colorfusion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "closed_date": 1524024573, "answer_count": 0, "score": 0, "last_activity_date": 1524025532, "creation_date": 1474452448, "last_edit_date": 1474462398, "question_id": 39613511, "link": "https://stackoverflow.com/questions/39613511/segmentation-fault-while-calling-printf", "closed_reason": "Duplicate", "title": "Segmentation Fault while calling Printf", "body": "<p>I'm having trouble understanding why my code causes segmentation fault.</p>\n\n<pre><code>.section .rdata\nformat:\n    .asciz \"Hello world\\n\"\n\n.text\n\n.globl main\n\nmain:\n    pushq %rbp\n    leaq format(%rip), %rcx\n    call printf\n    popq %rbp\n    ret\n</code></pre>\n\n<p>This is a simple assembly code that I wrote, and I compiiled using the following command using GCC in 64-bit windows.</p>\n\n<pre><code>gcc hello.s\n</code></pre>\n\n<p>After printing Hello world followed by a newline, the program crashes with Segmentation fault due to STATUS_ACCESS_VIOLATION. Is there anything wrong with my code?</p>\n"}, {"tags": ["c", "stm32", "cortex-m"], "comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1474451918, "post_id": 39612972, "comment_id": 66533563, "body": "From your question I cannot tell the code you&#39;ve written yourself (the stuff that doesn&#39;t work) from the library code that does. Can you please edit your question to include all relevant information? E.g. what does <code>IOInit()</code> do etc."}, {"owner": {"reputation": 99, "user_id": 5472835, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201071146376137/picture?type=large", "display_name": "Michal D", "link": "https://stackoverflow.com/users/5472835/michal-d"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1474452293, "post_id": 39612972, "comment_id": 66533825, "body": "Hi, i have edited it, so that it is the complete code, the one writen on std was another project, but it works and so i know that the configuration values are for both project the same..."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1474452396, "post_id": 39612972, "comment_id": 66533900, "body": "Just an idea: The discovery boards have jumpers that enable/disable hardware features. Are you testing the &quot;working&quot; code on same hardware setting as it has been verified on previously?"}, {"owner": {"reputation": 99, "user_id": 5472835, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201071146376137/picture?type=large", "display_name": "Michal D", "link": "https://stackoverflow.com/users/5472835/michal-d"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1474452612, "post_id": 39612972, "comment_id": 66534053, "body": "Yes, for both projects i use the same IDE, Compiler and Board"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1474452744, "post_id": 39612972, "comment_id": 66534136, "body": "Do you have access to an oscilloscope?"}, {"owner": {"reputation": 99, "user_id": 5472835, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201071146376137/picture?type=large", "display_name": "Michal D", "link": "https://stackoverflow.com/users/5472835/michal-d"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1474452986, "post_id": 39612972, "comment_id": 66534287, "body": "Not today, i borrowed my osci to a friend... Hopefully tommorow :/"}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 2, "creation_date": 1474466976, "post_id": 39612972, "comment_id": 66543979, "body": "One thing I notice, you&#39;re only or&#39;ing in config bits, some of white are multiple bits wide. If you don&#39;t clear the bits before or&#39;ing in your new bits, then the result may not have the value you&#39;re after in the field. Notably, I believe AFR defaults to 1&#39;s for all IO (not 100% on this, but I think 1 is GPIO and default). I&#39;d double check that you&#39;re actually getting the config you intended."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1474474635, "post_id": 39612972, "comment_id": 66549066, "body": "@rjp I agree with your suggestion to doublecheck that the registers are set to the same values as when using the working code."}], "owner": {"reputation": 99, "user_id": 5472835, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201071146376137/picture?type=large", "display_name": "Michal D", "link": "https://stackoverflow.com/users/5472835/michal-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474455034, "creation_date": 1474451082, "last_edit_date": 1474455034, "question_id": 39612972, "link": "https://stackoverflow.com/questions/39612972/spi-on-f3discovery", "title": "SPI on F3Discovery", "body": "<p>im trying to write SPI connection for the F3Disco and i have following problem:\nWhen i try to use Std libraries it works, but only with registers not...\nSettings:</p>\n\n<pre><code>void GyroSPIConf(){\nRCC-&gt;AHBENR |= RCC_AHBENR_GPIOAEN;\nRCC-&gt;AHBENR |= RCC_AHBENR_GPIOEEN;\nRCC-&gt;APB2ENR |= RCC_APB2ENR_SPI1EN;\n/* Set functions GPIO - SCK, MISO, MOSI */\nGPIOA-&gt;MODER |= GPIO_MODER_MODER5_1 | GPIO_MODER_MODER6_1 | GPIO_MODER_MODER7_1;\nGPIOA-&gt;OSPEEDR |= GPIO_OSPEEDER_OSPEEDR5 | GPIO_OSPEEDER_OSPEEDR6 | GPIO_OSPEEDER_OSPEEDR7;\nGPIOA-&gt;AFR[0] |= GPIO_AFRL_AFRL5 | GPIO_AFRL_AFRL6 | GPIO_AFRL_AFRL7;\n\n/* Set PE3 as CS - GPIO output */\nGPIOE-&gt;MODER |= GPIO_MODER_MODER3_0;\nGPIOE-&gt;OSPEEDR |= GPIO_OSPEEDER_OSPEEDR3;\nGPIOE-&gt;ODR |= GPIO_ODR_3;\n\n/* Set SPI MASTER 2,25 MHz; 8 bit */\nSPI1-&gt;CR1 |= SPI_CR1_SSM | SPI_CR1_SSI | SPI_CR1_MSTR | SPI_CR1_BR_1;// | SPI_CR1_BR_0;\nSPI1-&gt;CR2 |= SPI_CR2_FRXTH;\n\n/* SPI */\nSPI1-&gt;CR1 |= SPI_CR1_SPE;\nGPIOE-&gt;BSRR = (1 &lt;&lt; 3);\n}\nvoid IOInit(void)\n{\n    __GPIOE_CLK_ENABLE();\n    GPIO_InitTypeDef GPIO_InitStructure;\n\n    GPIO_InitStructure.Pin =    GPIO_PIN_12 |                   // LD9  - Blue\n                                GPIO_PIN_8  |                   // LD4  - Blue\n                                GPIO_PIN_15 |                   // LD6  - Green\n                                GPIO_PIN_14 |                   // LD8  - Orange\n                                GPIO_PIN_13 |                   // LD10 - Red \n                                GPIO_PIN_10 |                   // LD5  - Orange\n                                GPIO_PIN_11 |                   // LD7  - Green\n                                GPIO_PIN_9;                     // LD3  - Red\n\n    GPIO_InitStructure.Mode = GPIO_MODE_OUTPUT_PP;\n    GPIO_InitStructure.Speed = GPIO_SPEED_HIGH;\n    GPIO_InitStructure.Pull = GPIO_NOPULL;\n    HAL_GPIO_Init(GPIOE, &amp;GPIO_InitStructure);\n\n    __GPIOA_CLK_ENABLE();                                       // Will be overwritten\n}\n</code></pre>\n\n<p>Than main</p>\n\n<pre><code>int main(void)\n{\n    uint8_t Data[8];\n    HAL_Init();\n    IOInit();   \n    GyroSPIConf();  \n    GyroWriteByte(0x20, 0x0F);\n    while (1){\n        Data[0] = GyroReadByte(0x8f);\n    }\n}\n</code></pre>\n\n<p>Functions:</p>\n\n<pre><code>uint8_t GyroTransferByte(uint8_t val) {\n    volatile uint8_t * const ptr = (volatile uint8_t *)&amp;SPI1-&gt;DR;\n    while (!(SPI1-&gt;SR &amp; SPI_SR_TXE)) {};\n    *ptr = val;\n    while (!(SPI1-&gt;SR &amp; SPI_SR_RXNE)) {};\n    return *ptr;\n}\n\nvoid GyroWriteByte(uint8_t addr, uint8_t val) {\n    uint8_t d;\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 19);\n    d = GyroTransferByte(addr);\n    d = GyroTransferByte(val);\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 3);\n}\n\nuint8_t GyroReadByte(uint8_t addr) {\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 19);\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 24);\n    volatile uint8_t val;\n    //addr |= R_BIT;\n    val = GyroTransferByte(addr);\n    val = GyroTransferByte(DUMMY_BYTE);\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 3);\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 8); \n    return val;\n}\n</code></pre>\n\n<p>Any idea why i have always 0x00 in Data?</p>\n\n<p>After changing: </p>\n\n<pre><code>uint8_t GyroReadByte(uint8_t addr) {\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 19);\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 24);\n    volatile uint8_t val;\n    //addr |= R_BIT;\n    GyroSendByte(addr); //val = GyroTransferByte(addr);\n    val = GyroTransferByte(DUMMY);\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 3);\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 8); \n    return val;\n}\nvoid GyroSendByte(uint8_t data) {\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 19);\n    volatile uint8_t * const ptr = (volatile uint8_t *)&amp;SPI1-&gt;DR;\n    while (!(SPI1-&gt;SR &amp; SPI_SR_TXE)) {}\n    ;\n    *ptr = data;\n    GPIOE-&gt;BSRR = (1 &lt;&lt; 3);\n}\n</code></pre>\n\n<p>I get 0xff (the real value is 0xD4)</p>\n\n<p>EDIT:\nAfter the change i get in first run: FF\nAfter second run: DF\nAfter third run: D4 -Correct value \nAnd then for the rest runs FF ... </p>\n\n<p>So propably do i need to clear the buffer? </p>\n"}, {"tags": ["c", "windbg"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1474456593, "post_id": 39612816, "comment_id": 66536709, "body": "What does &quot;does not work&quot; mean? Does it break or not? Does it execute the command or not? Does it continue in wrong cases? Does it set the alias or not? Is there an error message?"}, {"owner": {"reputation": 33, "user_id": 6857574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7739a6f98d6609338fdc031cabd2c7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Howard Lynn", "link": "https://stackoverflow.com/users/6857574/howard-lynn"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1474463040, "post_id": 39612816, "comment_id": 66541093, "body": "Thanks for asking, Thomas. It doesn&#39;t break."}, {"owner": {"reputation": 33, "user_id": 6857574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7739a6f98d6609338fdc031cabd2c7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Howard Lynn", "link": "https://stackoverflow.com/users/6857574/howard-lynn"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1474466268, "post_id": 39612816, "comment_id": 66543416, "body": "Sorry, I meant it always break. This is not expected."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1474572994, "post_id": 39612816, "comment_id": 66598317, "body": "Related: <a href=\"http://stackoverflow.com/q/29372648/480982\">stackoverflow.com/q/29372648/480982</a>"}, {"owner": {"reputation": 33, "user_id": 6857574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7739a6f98d6609338fdc031cabd2c7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Howard Lynn", "link": "https://stackoverflow.com/users/6857574/howard-lynn"}, "edited": false, "score": 0, "creation_date": 1474600425, "post_id": 39612816, "comment_id": 66607063, "body": "Thanks! I will take a look."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6857574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7739a6f98d6609338fdc031cabd2c7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Howard Lynn", "link": "https://stackoverflow.com/users/6857574/howard-lynn"}, "edited": false, "score": 0, "creation_date": 1474600173, "post_id": 39625662, "comment_id": 66606987, "body": "Thanks blabb! I got some hints from your answer although I have some problems when following your steps. &quot;$$&gt;a&lt; strbpcond.txt&quot; doesn&#39;t work in my windbg."}, {"owner": {"reputation": 33, "user_id": 6857574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7739a6f98d6609338fdc031cabd2c7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Howard Lynn", "link": "https://stackoverflow.com/users/6857574/howard-lynn"}, "edited": false, "score": 0, "creation_date": 1474622126, "post_id": 39625662, "comment_id": 66616236, "body": "Finally, I got this work! Thanks a lot! I need to place the script file in the folder of windbg."}, {"owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "reply_to_user": {"reputation": 33, "user_id": 6857574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7739a6f98d6609338fdc031cabd2c7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Howard Lynn", "link": "https://stackoverflow.com/users/6857574/howard-lynn"}, "edited": false, "score": 0, "creation_date": 1474636757, "post_id": 39625662, "comment_id": 66625316, "body": "No that is not the requirement you can place it in any folder rtfm is kinda frowned upon here so i wouldn&#39;t suggest it but will have to ask you to read the fantastic, fabulous, fine , forsaken,.........., manual and maybe comment back what is expected"}, {"owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "edited": false, "score": 0, "creation_date": 1478103991, "post_id": 39625662, "comment_id": 68021756, "body": "I don&#39;t know what &quot;alias is not interpreted when you break when using alias you should always stuff them in a script file and execute the script file on each break&quot; even means, but my aliases are interpreted just fine when I use them in conditional breakpoints. Here&#39;s one I&#39;m using now <code>bu KERNELBASE!RegSetValueExW &quot;as &#47;mu RegVal poi(@esp+8); .block { .if ($scmp(\\&quot;${RegVal}\\&quot;,\\&quot;FooBar\\&quot;) != 0) { gc; } }; ad RegVal;&quot;</code> Works marvelously."}], "tags": [], "owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "is_accepted": true, "score": 1, "last_activity_date": 1474489073, "last_edit_date": 1474489073, "creation_date": 1474488406, "answer_id": 39625662, "question_id": 39612816, "link": "https://stackoverflow.com/questions/39612816/windbg-conditional-breakpoint-based-on-string-arguments/39625662#39625662", "title": "WinDBG conditional breakpoint based on string arguments", "body": "<p>you cannot use <strong>/mu</strong> on <strong>char *</strong>  /mu is for <strong>null terminated unicode string</strong> not <strong>ascii string</strong>  for ascii string <strong>use /ma</strong> </p>\n\n<p>I assume you have descriptive argument names and not an argument like <strong>d</strong> \nwhich would obviously clash with <strong>0xd aka 0n13</strong><br>\n <strong>is d a number , string or symbol ??</strong></p>\n\n<p>what would <strong>poi(d)</strong> resolve to in your case is it <strong>poi(0x13)</strong> which obviously is a bad de-referance<br>\nor a <strong>local symbol</strong> illogically named d ??</p>\n\n<p>also alias is not interpreted when you break \nwhen using alias you should always stuff them in a script file and execute \nthe script file on each break</p>\n\n<p>here is an example of a  script file </p>\n\n<pre><code>as /ma ${/v:MyAlias} poi(k)\n.block {\n    r $t0 = $spat(\"${MyAlias}\" , \"tiger\")\n    .printf \"%x\\t${MyAlias}\\n\" , @$t0 \n    .if(@$t0 != 1) {gc}\n}\n</code></pre>\n\n<p>here is code on which this is operated comipled in debug mode with optimizations turned off<br>\nin release mode compiler will be smart enough to inline the printf() call</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; //msvc _countof\nvoid func(char* h,char* i,char* j,char* k ) {\n    printf( \"%s %s %s %s\\n\" ,h,i,j,k );\n    return;\n}\nint main(void) {\n    char* foo[] = {\"goat\",\"dog\",\"sheep\",\"cat\",\"lion\",\"tiger\",0,\"vampire\"};\n    for(int x=0;x&lt;_countof(foo);x++) {\n        func(\"this\" , \"is\" , \"a\" , foo[x]);\n    }\n    return 0;    \n}\n</code></pre>\n\n<p>usage </p>\n\n<p>windbg app.exe </p>\n\n<p>set the break and run<br>\nkeep in mind this or any script that uses alias will fail on<br>\nevaluating the null entry before <strong>char * vampire</strong><br>\nif you want to break on <strong>\"vampire\"</strong> you may need to improvise without using alias at all</p>\n\n<pre><code>0:000&gt; bl\n0:000&gt; bp strbp!func \"$$&gt;a&lt; strbpcond.txt\"\n0:000&gt; bl\n 0 e 00171260     0001 (0001)  0:**** strbp!func \"$$&gt;a&lt; strbpcond.txt\"\n0:000&gt; g\nModLoad: 72670000 72673000   C:\\Windows\\system32\\api-ms-win-core-synch-l1-2-0.DLL\n0   goat\n0   dog\n0   sheep\n0   cat\n0   lion\n1   tiger\neax=00000005 ebx=7ffd7000 ecx=00000005 edx=001ac1e0 esi=001b6678 edi=001b667c\neip=00171260 esp=002bfa54 ebp=002bfa90 iopl=0         nv up ei ng nz ac po cy\ncs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000293\nstrbp!func:\n00171260 55              push    ebp\n0:000&gt; dv\n              h = 0x001ac1f8 \"this\"\n              i = 0x001ac1f4 \"is\"\n              j = 0x001ac1f0 \"a\"\n              k = 0x001ac1e0 \"tiger\"\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6857574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7739a6f98d6609338fdc031cabd2c7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Howard Lynn", "link": "https://stackoverflow.com/users/6857574/howard-lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 865, "favorite_count": 1, "accepted_answer_id": 39625662, "answer_count": 1, "score": 3, "last_activity_date": 1474489073, "creation_date": 1474450641, "last_edit_date": 1474450701, "question_id": 39612816, "link": "https://stackoverflow.com/questions/39612816/windbg-conditional-breakpoint-based-on-string-arguments", "title": "WinDBG conditional breakpoint based on string arguments", "body": "<p>I want to set a conditional breakpoint when the value of the 4th argument is equal to \"abc\".</p>\n\n<pre><code>void FunctionA(char* a, char* b, char* c, char* d)\n{\n`enter code here`//some code here\n}\n</code></pre>\n\n<p>I use the following command but it doesn't work. Could you help?</p>\n\n<pre><code>bp app!FunctionA \"as /mu ${/v:MyAlias} poi(d);.block{.if ($spat(\\\"${MyAlias}\\\", \\\"abc\\\") == 0)  { } .else { gc } }\"\n</code></pre>\n\n<p>Note: app.exe is my application name.</p>\n"}, {"tags": ["c", "winapi", "drag-and-drop"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474450224, "post_id": 39612616, "comment_id": 66532454, "body": "Please tag either C or C++: it&#39;s likely to attract downvotes if you keep it like this. Also tag windows API."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1474450384, "post_id": 39612616, "comment_id": 66532553, "body": "Please post <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1474450874, "post_id": 39612616, "comment_id": 66532887, "body": "Just guessing here. Apparently that particular function has a special case for value 0xFFFFFFFF. If the code is using that feature and someone wrote code like <code>~0</code> to get this value, then the code might turn non-portable when <code>int</code> sizes change."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474450925, "post_id": 39612616, "comment_id": 66532921, "body": "<code>int</code> and, bizarrely, <code>long</code> stay at 32 bit on 64 bit windows. I kid you not."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474451075, "post_id": 39612616, "comment_id": 66533006, "body": "Is this related? <a href=\"http://www.eightforums.com/general-support/23889-cant-drag-files-explorer-into-64-bit-programs.html\" rel=\"nofollow noreferrer\">eightforums.com/general-support/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1474451753, "post_id": 39612616, "comment_id": 66533443, "body": "@Bathsheba: That&#39;s not particularly bizarre."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1474451833, "post_id": 39612616, "comment_id": 66533498, "body": "@Lundin: There is no <code>int</code> in the function signature. You are referring to a parameter of type <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751.aspx#UINT\" rel=\"nofollow noreferrer\"><code>UINT</code></a>, which is defined to be 32 bits on every platform. At any rate, we need to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1474451965, "post_id": 39612616, "comment_id": 66533601, "body": "@LightnessRacesinOrbit: perhaps we&#39;ve gotten used to it. A <code>long</code> being 32 bit on a 64 bit OS seems perverse to me. <code>sizeof(long)</code> being less than <code>sizeof(sizeof(long))</code> is weird. Still it made porting my stuff from i686 to x64 a doddle ;-)"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474452055, "post_id": 39612616, "comment_id": 66533657, "body": "@Bathsheba: <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20050131-00/?p=36563\" rel=\"nofollow noreferrer\">Why did the Win64 team choose the LLP64 model?</a> (Official documentation: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384083.aspx\" rel=\"nofollow noreferrer\">Abstract Data Models</a>)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474452067, "post_id": 39612616, "comment_id": 66533664, "body": "@Bathsheba: <code>long</code> does not mean <code>longest</code>, and that portability argument is precisely why things are the way they are. We should all be using fixed-width types anyway, except for things like pointer range... which <i>is</i> 64-bit."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474470280, "post_id": 39612616, "comment_id": 66546240, "body": "This sounds like you are truncating and then widening your <code>wParam</code>, with sign extension. Which then leads to invalid looking data. Anyway, without the code (ideally a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), there&#39;s nothing we can do."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1474471067, "post_id": 39612616, "comment_id": 66546773, "body": "@IInspectable - i test this by self and got same result with WM_DROPFILES - high bits of wParam all set. so this is windows bug. however another way with RegisterDragDrop is work well"}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474471304, "post_id": 39612616, "comment_id": 66546913, "body": "@IInspectable: I explain exactly the opposite: the 0xF2 I get proves that I have the whole 64 bits. And this is the same executable used for the 3 steps."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474471796, "post_id": 39612616, "comment_id": 66547255, "body": "@v77: I don&#39;t see how that <i>&quot;proves&quot;</i> anything. There could be lots of reasons, why you see purportedly invalid data. Without the code, this question simply isn&#39;t useful. And with that last edit I would like to invite you to take the <a href=\"https://stackoverflow.com/tour\">tour</a> and visit the <a href=\"https://stackoverflow.com/help\">help center</a> to understand, what Stack Overflow is about, and why the code matters (even if you insist that it wouldn&#39;t)."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "edited": false, "score": 1, "creation_date": 1474472404, "post_id": 39612616, "comment_id": 66547645, "body": "Not useful? As I said, a lot of softwares are affected by this issue. This means that a lot of developers could be interested by an answer. But do as you wish..."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474473708, "post_id": 39612616, "comment_id": 66548519, "body": "@v77 - i test this also in WM_DROPFILES - high 32 bits of wParam always all 0 or 1 - so say about sign extend 32 bit value to 64. and in both case incorrect"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474475155, "post_id": 39612616, "comment_id": 66549376, "body": "@v77: The <b>question</b> (as currently written) is not useful. This does not mean that a potential answer wouldn&#39;t be. But you have to go by the rules. Since you opted against learning about them, chances for this question to get re-opened are slim. You have the power to <a href=\"http://stackoverflow.com/posts/39612616/edit\">change the odds</a>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474476737, "post_id": 39612616, "comment_id": 66550276, "body": "@IInspectable - strange - are you try by self do some research/coding on this ? why you decide that is v77 bug, but not windows bug ? because this is not documented in msdn ?"}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "edited": false, "score": 1, "creation_date": 1474476767, "post_id": 39612616, "comment_id": 66550298, "body": "The question will never be reopened, no matter what I do. But the message is wrong: I never asked debugging help. A lot of developers are concerned by the same issue, so it doesn&#39;t matter that my implementation is correct or not. Moreover, a code extract is not more relevant than putting my 900 lines of code."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474476942, "post_id": 39612616, "comment_id": 66550407, "body": "@v77 - this is very easy reproduce if you really programmer but not only read documentation . i paste minimal example for test"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474477181, "post_id": 39612616, "comment_id": 66550544, "body": "@RbMm: You are reading something into my comments, that isn&#39;t there. I never claimed either way. I&#39;m just <b>repeatedly</b> asking the OP to provide the code they are using, to eliminate programming errors as the source. Those are the rules around here, and they are here for good reasons (essentially to make Q&amp;A&#39;s better). Questions <b>do</b> get re-opened. This probably never happened to you (or v77), because you never decided to play by the rules (like v77)."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474477407, "post_id": 39612616, "comment_id": 66550675, "body": "@IInspectable - &quot;This sounds like you are truncating and then widening your wParam, with sign extension&quot; &quot;&quot;Questions seeking debugging help&quot; - however you even not try check this by self. but this very easy without OP src code."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474477501, "post_id": 39612616, "comment_id": 66550724, "body": "@IInspectable - and if you read my comments - i claim that this is not v77 error but windows bug. and i paste self minimal code example in place v77"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474478097, "post_id": 39612616, "comment_id": 66551022, "body": "@RbMm: <i>&quot;however you even not try check this by self&quot;</i> - Of course not. There wasn&#39;t any code to try. If I wrote a test case, there would be no way of knowing, whether I was testing the same code as the OP. This is neither efficient, nor effective. And since you still haven&#39;t done so, please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and spend some quality time in the <a href=\"https://stackoverflow.com/help\">help center</a>. Maybe you&#39;ll learn, why rules are the way they are."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474478311, "post_id": 39612616, "comment_id": 66551138, "body": "@IInspectable - i also not have any code from v77. but i unlike you just fill something interesting in this case - write code by self and test. are you still cannot understand that task NOT IN v77 code or my code. you can test this by self (if you can write code of course ) and got the same result"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474478641, "post_id": 39612616, "comment_id": 66551307, "body": "@RbMm: You still don&#39;t understand, why the OP needs to post their code, and you refuse to learn (by avoiding the <a href=\"https://stackoverflow.com/tour\">tour</a>, for example). At any rate, my time <b>does</b> have value (unlike yours, it appears). If you need to talk back, you get to have the last word. I would much rather hope you wouldn&#39;t, and use that time at the <a href=\"https://stackoverflow.com/help\">help center</a> instead."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474478856, "post_id": 39612616, "comment_id": 66551408, "body": "@IInspectable - i post self code, which reproduce problem - you can view it - this is not enough for you ?"}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474479169, "post_id": 39612616, "comment_id": 66551583, "body": "@IInspectable As I said, I can&#39;t put 900+ lines of codes. But as RbMm said, you can easily write your own code if you already worked on Win32 GUIs. And if you so much want know what is my code, you can download the source <a href=\"https://sourceforge.net/projects/imdisk-toolkit/files/20160917/\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474479333, "post_id": 39612616, "comment_id": 66551684, "body": "@v77: <i>&quot;I can&#39;t put 900+ lines of codes&quot;</i> - precisely the reason why I kept asking for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Like RbMm, you should take the <a href=\"https://stackoverflow.com/tour\">tour</a> as well, since you skipped over it, and are apparently quite confused, what Stack Overflow is."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474480677, "post_id": 39612616, "comment_id": 66552401, "body": "@IInspectable As I said, it doesn&#39;t matter that my implementation is correct or not, because many developers are facing the same issue. It&#39;s not a problem caused by MY code, but by the code of many developers (and seemingly the code of Windows). Anyway, your example is here. What&#39;s wrong with it? Did you already work with DragAcceptFiles?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474480973, "post_id": 39612616, "comment_id": 66552542, "body": "@v77: <i>&quot;What&#39;s wrong with it?&quot;</i> - The code doesn&#39;t match the question. Where is <code>DragQueryFile</code> called? At that level of cooperation, I have nothing to contribute. Good luck."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1474482398, "post_id": 39612616, "comment_id": 66553254, "body": "@IInspectable: &quot;Where is DragQueryFile called?&quot; Nowhere, so what? You missed my first edit: the bug is around wParam, not DragQueryFile. RbMm confirmed that."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474483085, "post_id": 39612616, "comment_id": 66553652, "body": "@v77: the code shown is not valid in 32bit, by virtue of the fact that <code>WindowProc()</code> is missing the <code>CALLBACK</code> (<code>__stdcall</code>) calling convention.  The default calling convention in C/C++ is <code>__cdecl</code>, so this code shouldn&#39;t even compile as shown, unless you are using a non-standard compiler configuration. In 64bit, it doesn&#39;t matter since 32bit calling conventions are ignored."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474483368, "post_id": 39612616, "comment_id": 66553790, "body": "@v77: <code>WPARAM</code> is 64bits in a 64bit process, but its value in <code>WM_DROPFILES</code> is an <code>HDROP</code> handle, which is a 32bit value even in a 64bit process. Per <a href=\"https://msdn.microsoft.com/en-us/library/aa384203.aspx\" rel=\"nofollow noreferrer\">Interprocess Communication Between 32-bit and 64-bit Applications</a>: &quot;<i>64-bit versions of Windows use 32-bit handles for interoperability. When sharing a handle between 32-bit and 64-bit applications, only the lower 32 bits are significant, so it is safe to truncate the handle (when passing it from 64-bit to 32-bit) or sign-extend the handle (when passing it from 32-bit to 64-bit)...</i>&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474483891, "post_id": 39612616, "comment_id": 66554084, "body": "@v77: &quot;<i>... Handles that can be shared include handles to user objects such as windows (HWND), handles to GDI objects such as pens and brushes (HBRUSH and HPEN), and handles to named objects such as mutexes, semaphores, and file handles.</i>&quot;  So, in your 64bit process, the <code>HDROP</code> value in <code>wParam</code> has simply been sign-extended to 64bits when originating from a 32bit process. That is OK. It is safe to truncate the value back to 32bits when casting it to <code>HDROP</code> to pass it to <code>DragQueryFile()</code>."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474485510, "post_id": 39612616, "comment_id": 66554932, "body": "@Remy Lebeau: HDROP truncates nothing, as it is a handle and therefore a 64-bit value in a 64-bit executable. As shown in the first edit, I get properly the 64-bit value from wParam. It&#39;s not the case only when the dropped file comes from a 32-bit executable. Despite that, if I replace the high order 32 bits, DragQueryFile works. The truncation is done before coming into the window procedure. Why Windows would send the correct data without the proper handle? But who cares? Even if I found a workaround, it will will disapear with the question."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474485545, "post_id": 39612616, "comment_id": 66554955, "body": "@RemyLebeau - &quot; The default calling convention..&quot; - i use __stdcall as default, and not set it explicit. so what ? you can easy  correct it. but task not in this"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474485723, "post_id": 39612616, "comment_id": 66555047, "body": "@RemyLebeau - are you still cannot understand that this is windows bug ?? wParam passing to WindowProc already invalid. only low 32 bit is correct. high 32 bit always all 0 or 1"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1474486542, "post_id": 39612616, "comment_id": 66555538, "body": "I can verify this issue; <code>DragQueryFile</code> does seem to return 0 when passed an <code>HDROP</code> that came from a drag from 32 to 64 bits. Looks like a Windows bug."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1474486920, "post_id": 39612616, "comment_id": 66555730, "body": "@JonathanPotter - task not in DragQueryFile but in invalid wParam in WM_DROPFILES message. only low 32 bit of it is valid. it is returned by GetMessage or PeekMessage. i add code snipet"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474487012, "post_id": 39612616, "comment_id": 66555781, "body": "@RbMm I think you are barking up the wrong tree going on about the value of <code>wParam</code>. Concentrate on the fact that when passing the value that <code>WM_DROPFILES</code> gives you to the API functions, it doesn&#39;t work. The actual value is a black box."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1474487128, "post_id": 39612616, "comment_id": 66555838, "body": "@JonathanPotter - no. you mistake. all task in invalid wParam from <code>WM_DROPFILES</code> . api function DragQueryFile here absolute not related - he got invalid parameter, as result and failed. but this is not they error"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1474487150, "post_id": 39612616, "comment_id": 66555850, "body": "Have it your way, your question will stay closed though. I am actually on your side though."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1474487494, "post_id": 39612616, "comment_id": 66556025, "body": "@Jonathan Potter: the value of wParam is correct and allows to use DragQueryFile, it just lacks its high order 32 bits when a file is dropped from a 32-bit process. I need to find a way to retrieve it."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474487751, "post_id": 39612616, "comment_id": 66556188, "body": "@v77 - you mistake. and contradicting yourself - &quot; value of wParam is correct&quot; - vs &quot; just lacks its high order 32 bits&quot; - all task in wParam - it incorrect. i have found similar bug many years ago on xp x64 (2003 x64) when invalid value returned by SetWindowLongPtr if debug registers active in thread. also high 32 bits is zeroed"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474488043, "post_id": 39612616, "comment_id": 66556344, "body": "@v77: you clearly did not read the link I posted. I already told you what is happening (<code>HDROP</code> is a 32bit value that is being sign-extended to 64bits, thus the extra high 1 bits) and what you can do to address it (truncate the high 32bits before casting, eg: <code>#ifdef _WIN64 wParam &amp;= 0x00000000FFFFFFFFull; #endif HDROP hDrop = (HDROP) wParam;</code> If you choose to ignore me, so be it. I said my piece."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474488699, "post_id": 39612616, "comment_id": 66556706, "body": "@Remy Lebeau: I have read your link, and a lot of others. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx\" rel=\"nofollow noreferrer\">HDROP</a> is defined as a HANDLE, which is defined as a PVOID, that is, a pointer, that is, a 64-bit value in a 64-bit process. And if the high 32bits are 0, this does not work."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1474488985, "post_id": 39612616, "comment_id": 66556893, "body": "@RemyLebeau - you mistake- value lost self high 32 bit already in kernel (assume win32k.sys bug) say for example i got <code>5d640078</code> in wParam when correct value is <code>1c05d640078</code> <a href=\"http://i.imgur.com/AMZRtdJ.png\" rel=\"nofollow noreferrer\">i.imgur.com/AMZRtdJ.png</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474489261, "post_id": 39612616, "comment_id": 66557040, "body": "@RemyLebeau - look  - are you can read ? all what you say about 32-64 is UNRELATED  here. how defined HDROP is unrelated. we already got incorrect 64bit value from kernel. so hard understand this ? so hard test this by self ? or if you not want or cannot test - why you so sure in self correct ?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1474489283, "post_id": 39612616, "comment_id": 66557057, "body": "@RbMm: that fact (the high 32bits were not zero in the original kernel object and were being lost during the exchange) was not made clearer earlier. <i>However</i>, that being said, that fact contradicts the documentation: &quot;<i>When sharing a handle between 32-bit and 64-bit applications, <b>only the lower 32 bits are significant</b>, so it is safe to truncate the handle (when passing it from 64-bit to 32-bit) or <b>sign-extend the handle (when passing it from 32-bit to 64-bit)</b>.</i>&quot;.  The original handle should not be using the high 32bits. If you feel this is an OS bug, <b>report it to Microsoft!</b>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474489546, "post_id": 39612616, "comment_id": 66557194, "body": "@RemyLebeau - again documentation and all what you write unrelated here. the wParam (HDROP) is really point on some address in process heap. this is HGLOBAL. this is NOT convesion between 32 and 64. win32k.sys (i think) ALLOCATE same data in 64 bit process heap. and must return address of this memory. but it return only 32 bit of adress !!! high 32 bit lost(or random). in win10 process heap usually have adress &gt; 0xffffffff - so address always incorrect if only 32 bit"}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474489625, "post_id": 39612616, "comment_id": 66557237, "body": "@Remy Lebeau: if you truncate the handle, even a file dropped from a 64-bit process will not work. The MSDN documentation is full of contradictions, and we have here a good example of that."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474489693, "post_id": 39612616, "comment_id": 66557270, "body": "<a href=\"http://i.imgur.com/AMZRtdJ.png\" rel=\"nofollow noreferrer\">i.imgur.com/AMZRtdJ.png</a> - yes, this is windows bug. i how say, many years ago view similar"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1474489854, "post_id": 39612616, "comment_id": 66557361, "body": "Fine, then simply stop using <code>WM_DROPFILES</code>.  It is deprecated anyway (and has been for a long time).  Use <code>IDropTarget</code> and <code>RegisterDragDrop()</code> instead, then you won&#39;t have this problem anymore."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474489917, "post_id": 39612616, "comment_id": 66557394, "body": "@RemyLebeau - yes, RegisterDragDrop + IDropTarget well work in 32-&gt;64 case"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1474490342, "post_id": 39612616, "comment_id": 66557630, "body": "@RemyLebeau for finish discussion - i try say last time - problem not related to extend 32bit value to 64bit. absolute another. somebody allocate DROPFILES structure in process heap (by GlobalAlloc) and return it value in wParam. but by mistake it return only 32-bit of this pointer. high 32 bit is random (i view all 1 or all 0 bits). begin from win 10 (or may be win 8) process heap always located at &gt;0x100000000 address. so wParam (pointer to address in heap) is always incorrect. this is for clear understand root of the problem."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "edited": false, "score": 0, "creation_date": 1474490888, "post_id": 39612616, "comment_id": 66557918, "body": "Even if it&#39;s old, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774303(v=vs.85).aspx\" rel=\"nofollow noreferrer\">WM_DROPFILES</a> is not marked as deprecated."}, {"owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474541134, "post_id": 39612616, "comment_id": 66577719, "body": "@RbMm: many thanks for your help. The closest value to wParam is given by GlobalAlloc(GMEM_MOVEABLE, 0), so I just have to extract its high order. I checked this behavior from XP to Win10. This will allow me to avoid the big and ugly OLE. :)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1474541447, "post_id": 39612616, "comment_id": 66577911, "body": "@v77 - yes, memory pointed by wParam (this is DROPFILES structure) really - allocated by call GlobalAlloc(LMEM_MOVEABLE, ) - however you got only low 32 bit of this address , when in win10 x64 process this heap base always have not zero high 32 bits. (this os special design). you can of course by self once allocate memory by GlobalAlloc(LMEM_MOVEABLE, )  and use(save) it high 32 bits - and then replace with it 32 high bits from wParam. this will be work now, but this is very ugly solution. i be use IDropTarget on your place"}], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "is_accepted": true, "score": 3, "last_activity_date": 1474646150, "last_edit_date": 1474646150, "creation_date": 1474645400, "answer_id": 39664759, "question_id": 39612616, "link": "https://stackoverflow.com/questions/39612616/drag-and-drop-from-32-to-64-bit/39664759#39664759", "title": "Drag-and-drop from 32 to 64-bit", "body": "<p>As the question has been reopened, I can post a proper answer.</p>\n\n<p>This is truly a bug of Windows. In a 64-bit process, wParam is a 64-bit value and is used as is to send a \"HDROP\", which is in fact a pointer to a pointer to a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773269(v=vs.85).aspx\" rel=\"nofollow\">DROPFILES</a> structure.\nThe tests showed that the shell uses the whole 64 bits, and writes the data into the heap.\nIf a file is dragged from a 32-bit application, the data are still properly written into the heap, <strong>even if the latter is located above 4GB</strong>. But despite that, in this case, wParam is converted to a 32-bit value, and then sign-extended to 64-bit.</p>\n\n<p>In fact, when we drag a file from a 32-bit application to a 64-bit one, the latter is supposed to crash, because we provide an incorrect pointer to <code>DragQueryFile()</code>. But it does not, because <code>DragQueryFile()</code> handles these exceptions.</p>\n\n<p>Now, the solutions:</p>\n\n<ul>\n<li><p>Use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679679(v=vs.85).aspx\" rel=\"nofollow\">IDropTarget</a> interface. This is a good solution (and recommended by Microsoft) if you don't care about using OLE and adding about 10KB in your executable only for reading a file name that is already in RAM (it's not my case).</p></li>\n<li><p>Find a way to retrieve the high part of wParam. As explained, this value is a pointer to the heap. The closest value is given by <code>GlobalAlloc(GMEM_MOVEABLE, 0)</code>. It usually gives the value of wParam (or the one it is supposed to have) +16. Even if it can be sometimes slightly higher, this is enough to retrieve the lacking high order 32 bits of wParam.\nTo cover the unlikely case where the heap overlaps a 4GB boundary, we can try by adding or removing 1 to the high order 32 bits.\nNote that <code>GlobalFree()</code> remains required. Otherwise, you consume a few bytes (16 according to my tests) after each call to <code>GlobalAlloc()</code>.</p></li>\n<li><p>Disable the <a href=\"https://msdn.microsoft.com/en-us/library/dn195771.aspx\" rel=\"nofollow\">High Entropy ASLR</a>. This one requires Windows 8 or later, and that's why this bug rarely occurs on Windows 7 and prior. On Windows 7, the addresses are randomized, but remain under the 4GB limit.\nThat said, you may still have to zero the high order 32 bits, because of the sign extension. And this solution means a security decrease.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6648148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37217603659c33ae523d6fd8d2e78fa6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclet", "link": "https://stackoverflow.com/users/6648148/niclet"}, "is_accepted": false, "score": 0, "last_activity_date": 1571894147, "creation_date": 1571894147, "answer_id": 58534553, "question_id": 39612616, "link": "https://stackoverflow.com/questions/39612616/drag-and-drop-from-32-to-64-bit/58534553#58534553", "title": "Drag-and-drop from 32 to 64-bit", "body": "<p>While I had same issue regarding drag&amp;drop of files from 32bit app to 64bit app, I have found a solution which seems to be more reliable than previous one, but greatly inspired from it.</p>\n\n<p>I enumerate all the memory block of the process heap until I find a match with truncated WPARAM.</p>\n\n<p>Hope it can help.</p>\n\n<pre><code>HDROP hDrop = NULL;\n\nHANDLE hProcessHeap = ::GetProcessHeap();\nif (NULL != hProcessHeap &amp;&amp; ::HeapLock(hProcessHeap))\n{\n  PROCESS_HEAP_ENTRY heapEntry = { 0 };\n  while(::HeapWalk(hProcessHeap, &amp;heapEntry) != FALSE)\n  {\n    if ((heapEntry.wFlags &amp; PROCESS_HEAP_ENTRY_BUSY) != 0)\n    {\n      HGLOBAL hGlobal = ::GlobalHandle(heapEntry.lpData);\n      // Assuming wParam is the WM_DROPFILES WPARAM\n      if ((((DWORD_PTR) hGlobal) &amp; 0xFFFFFFFF) == (wParam &amp; 0xFFFFFFFF))\n      {\n        hDrop = (HDROP) hGlobal; // We got it !!\n        break;\n      }\n    }\n  }\n  ::HeapUnlock(hProcessHeap);\n}\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 4932147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/428381d5d3eaf4e4f61453b08cd2ebee?s=128&d=identicon&r=PG&f=1", "display_name": "v77", "link": "https://stackoverflow.com/users/4932147/v77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1723, "favorite_count": 0, "accepted_answer_id": 39664759, "answer_count": 2, "score": 6, "last_activity_date": 1571894147, "creation_date": 1474450133, "last_edit_date": 1474486900, "question_id": 39612616, "link": "https://stackoverflow.com/questions/39612616/drag-and-drop-from-32-to-64-bit", "title": "Drag-and-drop from 32 to 64-bit", "body": "<p>I am writing a C program that accepts drag-and-drop of files.\nWhen it is compiled in 32-bit, it works in any case. But when it compiled in 64-bit, it works only for files dragged from a 64-bit application:</p>\n\n<ul>\n<li>32-bit -> 32-bit : success</li>\n<li>64-bit -> 64-bit : success</li>\n<li>64-bit -> 32-bit : success</li>\n<li>32-bit -> 64-bit : fail</li>\n</ul>\n\n<p>I still get the WM_DROPFILES message, but DragQueryFile returns nothing (the number of files is 0).</p>\n\n<p>This seems to be an issue for a lot of applications but I would like to know if there is a workaround about that.</p>\n\n<p>Edit:</p>\n\n<ul>\n<li>If I drag-and-drop a file from a 64-bit executable to my 64-bit application, wParam has a value such as 0x000000F211C000B8 (which shows that there is no cast issue).</li>\n<li>Next, without closing my application, if I drag the file from a 32-bit executable, wParam will have something like 0x0000000011C000B8 or 0xFFFFFFFF11C000B8, which means that the high order 32 bits are invalid.</li>\n<li>If I replace the invalid high order by a valid one from a previous message (in this example, this would be 0x000000F2), then DragQueryFile works!</li>\n</ul>\n\n<p>So the data are here, somewhere, I just don't know how to retrieve them (at least without an ugly hack).</p>\n\n<p>Edit 2:</p>\n\n<p>I will provide no code because I assume that those who answer know something about this issue that affects a large number of softwares.</p>\n\n<p>------ EDIT ----------</p>\n\n<p>minimal code that reproduces it</p>\n\n<pre><code>LRESULT WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    WCHAR sz[32];\n    switch (uMsg)\n    {\n    case WM_DROPFILES:\n        swprintf(sz, L\"%p\", wParam);// look for wParam\n        MessageBox(0,0,sz,0);\n        break;\n    case WM_NCCREATE:\n        DragAcceptFiles(hwnd, TRUE);\n        break;\n    case WM_NCDESTROY:\n        PostQuitMessage(0);\n        break;\n    }\n\n    return DefWindowProc(hwnd, uMsg, wParam, lParam);\n}\n\nvoid minimal()\n{\n    static WNDCLASS wndcls = { 0, WindowProc, 0, 0, 0, 0, 0, 0, 0, L\"testwnd\" };\n    if (RegisterClass(&amp;wndcls))\n    {\n        if (HWND hwnd = CreateWindowEx(WS_EX_ACCEPTFILES, wndcls.lpszClassName, 0, \n            WS_OVERLAPPEDWINDOW|WS_VISIBLE, CW_USEDEFAULT, CW_USEDEFAULT,\n            CW_USEDEFAULT, CW_USEDEFAULT, HWND_DESKTOP, 0, 0, 0))\n        {\n            MSG msg;\n            while (0 &lt; GetMessage(&amp;msg, 0, 0, 0))\n            {\n                if (msg.message == WM_DROPFILES)\n                {\n                    // look for msg.wParam returned by GetMessage\n                    WCHAR name[256];\n                    DragQueryFile((HDROP)msg.wParam, 0, name, RTL_NUMBER_OF(name));\n                }\n\n                DispatchMessage(&amp;msg);\n            }\n        }\n        UnregisterClass(wndcls.lpszClassName, 0);\n    }\n}\n</code></pre>\n\n<p>interesting that if call DragAcceptFiles (even only jump on first it instruction) high 32 bits of wParam will be all 1. if not call it, by set WS_EX_ACCEPTFILES exstyle by self - all high bits of wParam will be 0</p>\n\n<p>for test can exec 32 bit notepad, open Open File Dialog and drag-drop any file to our window</p>\n"}, {"tags": ["c", "function-pointers", "sub-array"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474450191, "post_id": 39612598, "comment_id": 66532428, "body": "Why do you declare <code>current_len</code> as a pointer? And what do you think initializing this pointer to <code>0</code> does?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474450314, "post_id": 39612598, "comment_id": 66532510, "body": "I also don&#39;t see why you pass <code>newArr</code> and <code>len_newArr</code> as arguments to the function? They are not used outside the <code>subarray</code> function. And <i>if</i> you use <code>newArr</code> outside the function you need to pass a pointer to the pointer (i.e. <code>product **</code>) to the function."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474450504, "post_id": 39612598, "comment_id": 66532650, "body": "Finally, you allocate memory for <code>newArr</code> in the <code>subarray</code> function, but you never initialize it before you print the contents of it. Lots and lots and lots of things that does (or could) lead to <i>undefined behavior</i>."}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1474451638, "last_edit_date": 1495535244, "creation_date": 1474450280, "answer_id": 39612679, "question_id": 39612598, "link": "https://stackoverflow.com/questions/39612598/c-longest-subarray-of-specified-elements-from-given-array/39612679#39612679", "title": "C - Longest subarray of specified elements from given array", "body": "<pre><code>int *current_len=0; /* assigining NULL to a pointer to int */\n</code></pre>\n\n<p>This</p>\n\n<pre><code>        *current_len++;\n</code></pre>\n\n<p>Is equivalent to <code>*NULL++</code> and you can not dereference a pointer to <code>NULL</code>. [<a href=\"https://stackoverflow.com/q/4007268/1606345\">More info</a>]</p>\n\n<p>Same here:</p>\n\n<pre><code>*current_len=1;\n</code></pre>\n\n<p>It seems that you want a plain <code>int</code> instead of a pointer to <code>int</code></p>\n"}], "owner": {"reputation": 93, "user_id": 6624110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca61c960c58c38eb9d3db18c3e481589?s=128&d=identicon&r=PG&f=1", "display_name": "ufo", "link": "https://stackoverflow.com/users/6624110/ufo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474455079, "creation_date": 1474450084, "last_edit_date": 1474455079, "question_id": 39612598, "link": "https://stackoverflow.com/questions/39612598/c-longest-subarray-of-specified-elements-from-given-array", "title": "C - Longest subarray of specified elements from given array", "body": "<p>I need help with the following problem:</p>\n\n<p>Given an array <code>arr</code> of <code>structs</code></p>\n\n<pre><code>typedef struct\n{\n    char name[20];\n    float amount,price;\n}product;\n</code></pre>\n\n<p>Print the longest subarray of elements from array <code>arr</code> such that the <code>arr</code> element has greater or equal <code>price</code> than some <code>value</code> which is read.</p>\n\n<p>Function to check if element has greater or equal <code>price</code> than a <code>value</code> is given as an argument of a function <code>void subarray(product *arr,int n,int (*check)(product * ,float ),\n        product *newArr,int *len_newArr,float value)</code>\nwhere <code>newArr</code> is the output subarray.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct\n{\n    char name[20];\n    float amount,price;\n}product;\n\nvoid subarray(product *arr,int n,int (*check)(product * ,float ),\n                product *newArr,int *len_newArr,float value)\n{\n    len_newArr=0;\n    int *current_len;\n    current_len=0;\n    int i;\n\n    for(i=0;i&lt;n;i++)\n    {\n        //if condition is true, increment current length of newArr\n        //and store that element to newArr\n        if((*check)(arr+i,value))\n        {\n            current_len++;\n            newArr[i]=arr[i];\n        }\n        else\n            //begin with the next subarray\n            current_len=1;\n\n        //update newArr length\n        if(current_len &gt; len_newArr)\n            len_newArr=current_len;\n    }\n\n    newArr=calloc(*len_newArr , sizeof(product));\n\n    //print the subarray\n    for(i=0;i&lt;len_newArr;i++)\n        printf(\"%-19s %6.2f %6.2f\\n\",newArr[i].name,newArr[i].amount,newArr[i].price);\n}\n\nint check(product *pr,float value)\n{\n    if(pr-&gt;price &gt;= value)\n        return 1;\n    return 0;\n}\n\nvoid inputProduct(product *pr)\n{\n    printf(\"name: \");\n    scanf(\"%s\",pr-&gt;name);\n    printf(\"amount: \");\n    scanf(\"%f\",&amp;pr-&gt;amount);\n    printf(\"price: \");\n    scanf(\"%f\",&amp;pr-&gt;price);\n}\n\nint main()\n{\n    int n,i;\n    product *arr,*newArr;\n    int len_newArr;\n    float value;\n\n    do\n    {\n        printf(\"n = \");\n        scanf(\"%d\",&amp;n);\n    }\n    while(n&lt;1);\n\n    arr=malloc(n * sizeof(product));\n    newArr=calloc(n,sizeof(product));\n\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"%d. product: \\n\",i+1);\n        inputProduct(arr+i);\n    }\n\n    printf(\"value: \");\n    scanf(\"%f\",&amp;value);\n\n    subarray(arr,n,&amp;check,newArr,&amp;len_newArr,value);\n\n    return 0;\n}\n</code></pre>\n\n<p>The program gives warnings <code>assignment makes pointer from integer without a cast</code> at line </p>\n\n<pre><code>    //begin with the next subarray\n    current_len=1;\n</code></pre>\n\n<p>and <code>comparison between pointer and integer</code> at line</p>\n\n<pre><code>//print the subarray\nfor(i=0;i&lt;len_newArr;i++)\n    printf(\"%-19s %6.2f %6.2f\\n\",newArr[i].name,newArr[i].amount,newArr[i].price);\n</code></pre>\n"}, {"tags": ["c", "arrays", "openmp"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1474448332, "post_id": 39611779, "comment_id": 66531084, "body": "Typical <code>float</code> types only have ~6 decimal digits of precision. Floating-point addition is not associative if some of the operations are inexact."}, {"owner": {"reputation": 1230, "user_id": 2862945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fc5d7d8f6dc3a297ad5cbe4c9652865b?s=128&d=identicon&r=PG&f=1", "display_name": "Alf", "link": "https://stackoverflow.com/users/2862945/alf"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1474448482, "post_id": 39611779, "comment_id": 66531200, "body": "@EOF ohhhh, of course! That is slightly embarrassing... thanks :) Type that as an answer and I mark it as solution."}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1474453692, "post_id": 39611779, "comment_id": 66534753, "body": "Depending on your compile options, your serial_sum may involve parallel batched sums, with different partitioning from your parallel reduction."}, {"owner": {"reputation": 1230, "user_id": 2862945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fc5d7d8f6dc3a297ad5cbe4c9652865b?s=128&d=identicon&r=PG&f=1", "display_name": "Alf", "link": "https://stackoverflow.com/users/2862945/alf"}, "reply_to_user": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1474454610, "post_id": 39611779, "comment_id": 66535369, "body": "@tim18 I was trying to keep the compiler options short, basically just <code>gcc -fopenmp -Wall</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1230, "user_id": 2862945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fc5d7d8f6dc3a297ad5cbe4c9652865b?s=128&d=identicon&r=PG&f=1", "display_name": "Alf", "link": "https://stackoverflow.com/users/2862945/alf"}, "edited": false, "score": 0, "creation_date": 1474448870, "post_id": 39612077, "comment_id": 66531512, "body": "and an easy fix for the above mentioned code would be <code>double serial_sum, parallel_sum;</code>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 1230, "user_id": 2862945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fc5d7d8f6dc3a297ad5cbe4c9652865b?s=128&d=identicon&r=PG&f=1", "display_name": "Alf", "link": "https://stackoverflow.com/users/2862945/alf"}, "edited": false, "score": 1, "creation_date": 1474449006, "post_id": 39612077, "comment_id": 66531623, "body": "@Alf: Well, you&#39;d end up running into the same problem for higher numbers. Around ~<code>pow(10,8)</code> or so."}], "tags": [], "owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "is_accepted": true, "score": 2, "last_activity_date": 1474455879, "last_edit_date": 1495535244, "creation_date": 1474448737, "answer_id": 39612077, "question_id": 39611779, "link": "https://stackoverflow.com/questions/39611779/summing-up-array-elements-using-openmp-is-not-working-correctly-for-large-arrays/39612077#39612077", "title": "Summing up array elements using OpenMP is not working correctly for large arrays (C)", "body": "<p>Since floating-point types have limited precision, addition is not associative (see <a href=\"https://stackoverflow.com/questions/13913017/are-floating-point-operations-in-c-associative\">Are floating point operations in C associative?</a> and <a href=\"https://stackoverflow.com/questions/10371857/is-floating-point-addition-and-multiplication-associative\">Is Floating point addition and multiplication associative?</a>).</p>\n\n<p>So <code>a + (b + c)</code> can evaluate unequal to <code>(a + b) + c</code>.</p>\n\n<p>When parallelizing/vectorizing, the order operations can indeed be different than adding the numbers from lowest to highest sequentially.</p>\n\n<p>If you printed out the computed values, you would likely find them quite close in this case, just not <em>exactly</em> equal.</p>\n"}], "owner": {"reputation": 1230, "user_id": 2862945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fc5d7d8f6dc3a297ad5cbe4c9652865b?s=128&d=identicon&r=PG&f=1", "display_name": "Alf", "link": "https://stackoverflow.com/users/2862945/alf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 39612077, "answer_count": 1, "score": 0, "last_activity_date": 1474455879, "creation_date": 1474447931, "last_edit_date": 1474448274, "question_id": 39611779, "link": "https://stackoverflow.com/questions/39611779/summing-up-array-elements-using-openmp-is-not-working-correctly-for-large-arrays", "title": "Summing up array elements using OpenMP is not working correctly for large arrays (C)", "body": "<p>I wanted to use OpenMP around a for-loop that basically sums up the array elements. For comparison, I also sum up the array elements in a serial fashion. For large array-sizes, <code>array_size&gt;=5795</code>, the sums are no longer equal.</p>\n\n<p>This is the OpenMP-parallelized loop:</p>\n\n<pre><code>#pragma omp parallel for reduction(+:parallel_sum)\n    for (i = 0; i &lt; array_size; i++) {\n        parallel_sum += array[i];\n    }\n</code></pre>\n\n<p>And this is the full code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;omp.h&gt;\n\nint main() {\n    float          *array, serial_sum, parallel_sum;\n    size_t          array_size, i;\n\n    serial_sum   = 0.;\n    parallel_sum = 0.;\n\n#pragma omp parallel\n    printf( \"number of threads used in parallized part: %d\\n\", omp_get_num_threads());\n\n    printf(\"enter size of array\\n\");\n    scanf(\"%zu\", &amp;array_size);\n\n    // memory allocation\n    array = (float *) malloc(sizeof(float) * array_size);\n\n    // initialize array\n    for (i = 0; i &lt; array_size; i++)\n        array[i] = i;\n\n    // calculate the array sums, parallel first, then serial\n#pragma omp parallel for reduction(+:parallel_sum)\n    for (i = 0; i &lt; array_size; i++) {\n        parallel_sum += array[i];\n    }\n\n    for (i = 0; i &lt; array_size; i++)\n        serial_sum = serial_sum + array[i];\n\n    if (serial_sum == parallel_sum)\n        printf(\"\\nserial and parallel sums are equal\\n\");\n    else\n        printf(\"\\nserial and Parallel sums are NOT equal\\n\");\n\n    // free memory\n    free(array);\n\n    return 0;\n}\n</code></pre>\n\n<p>Since the sum can be easily calculated by hand using the sum-formula by Gauss, sum = (n^2+n)/2, where n corresponds to <code>array_size</code>, both sums are wrong... I guess I am having some memory issues then...?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 8, "creation_date": 1474448060, "post_id": 39611772, "comment_id": 66530886, "body": "<code>=</code> is the assignment operator. That&#39;s pretty much the first thing you should&#39;ve learned about C. Also, I think you forgot an <code>f</code> in one of your variables unless you&#39;re making a very raunchy game."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1474448096, "post_id": 39611772, "comment_id": 66530919, "body": "<code>!=</code> operator result has <code>int</code> type and may be <code>0</code> or <code>1</code>, so <code>shiftleft</code> becomes <code>0</code> or <code>1</code>."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "reply_to_user": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 2, "creation_date": 1474448175, "post_id": 39611772, "comment_id": 66530973, "body": "@M.SChaudhari No, that question has absolutely nothing to do with this one."}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1474448369, "post_id": 39611772, "comment_id": 66531108, "body": "Why is the <code>if</code> instruction indented differently than the first instruction ?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1474448371, "post_id": 39611772, "comment_id": 66531110, "body": "<code>shitLeft</code> lmfao."}, {"owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1474448643, "post_id": 39611772, "comment_id": 66531320, "body": "@Serhio, I don&#39;t understand.. so shiftLeft becomes 1 if local.tasks.first is different than NULL?"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 1, "creation_date": 1474449475, "post_id": 39611772, "comment_id": 66531953, "body": "@user1797147 Yes, exactly. Another comparison and logical operators (but not bitwise ones!) act in similar way. See chapter 6.5 of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">this</a> draft for details."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 6666695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5034dbf0415fba32489608a1a78c843e?s=128&d=identicon&r=PG&f=1", "display_name": "Trebor", "link": "https://stackoverflow.com/users/6666695/trebor"}, "is_accepted": false, "score": 1, "last_activity_date": 1474448398, "creation_date": 1474448398, "answer_id": 39611948, "question_id": 39611772, "link": "https://stackoverflow.com/questions/39611772/what-is-the-meaning-of-expression-a-b-c/39611948#39611948", "title": "What is the meaning of expression a = b != c;", "body": "<p>The <strong>b != c</strong> part returns a boolean response (true or false). The result is then assigned to <strong>a</strong>.</p>\n\n<p>In your example if local.tasks.first is not null then shitLeft (sic) is true. Otherwise it is false.</p>\n"}, {"comments": [{"owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1474448712, "post_id": 39611978, "comment_id": 66531374, "body": "Is boolean, I stated in first post."}, {"owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1474448771, "post_id": 39611978, "comment_id": 66531428, "body": "But what I don&#39;t understand is this a short form of ternary such as shitLeft = local.tasks.first != NULL ? 0 :1;"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1474448875, "post_id": 39611978, "comment_id": 66531516, "body": "@user1797147, Think of the expression as <code>a = (b != c);</code>, which is conceptually no different from <code>y = x + z</code>. The ternary operator <code>?</code> is not involved, but you&#39;re generally correct; it&#39;s logically equivalent to <code>a = b != c ? 1 : 0</code>, and so on."}, {"owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1474449084, "post_id": 39611978, "comment_id": 66531682, "body": "Ok, thanks all, I didn&#39;t know that a != b can return something (unless you explicitely put in a IF condition), or if can be used to assign result of evaluation to another expression. Thanks!"}, {"owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1474449262, "post_id": 39611978, "comment_id": 66531806, "body": "I got&#39;it now, thanks very much for your support. Comparing to ternary just because I very often need a short form and I didn&#39;t know that is possible in such way. Well, every day learning something new about C.. this is what I love at this lang :)"}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "reply_to_user": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1474450205, "post_id": 39611978, "comment_id": 66532437, "body": "@user1797147 <code>!=</code> means &quot;not equal&quot;. It&#39;s not part of the <code>if</code> statement, it&#39;s just generally an expression that&#39;s <code>true</code> if two things are equal and false otherwise. True and false are normal values in C like 13.4 or &#39;y&#39;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1474451101, "post_id": 39611978, "comment_id": 66533020, "body": "&quot;...with something different than 0 for true (but we can&#39;t be sure what exactly).&quot;  This is incorrect. No matter the type of the variable, it will get value 0 or 1. <code>false</code> and <code>true</code> as just macros defined to 0 and 1. This is guaranteed by the standard and we can be 100% sure."}], "tags": [], "owner": {"reputation": 158, "user_id": 6792759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8036b5701f5cac87b5726dfa995599f4?s=128&d=identicon&r=PG&f=1", "display_name": "gravell", "link": "https://stackoverflow.com/users/6792759/gravell"}, "is_accepted": true, "score": 5, "last_activity_date": 1474448463, "creation_date": 1474448463, "answer_id": 39611978, "question_id": 39611772, "link": "https://stackoverflow.com/questions/39611772/what-is-the-meaning-of-expression-a-b-c/39611978#39611978", "title": "What is the meaning of expression a = b != c;", "body": "<p>This will return either true or false value (depending on fact if <code>local.task.first</code> is a <code>NULL</code> value or not). </p>\n\n<p>If <code>local.task.first</code> is <code>NULL</code> a <code>shiftLeft</code> variable will get <code>false</code> value, </p>\n\n<p>If <code>local.task.first</code> is not a <code>NULL</code> value a <code>shiftLeft</code> variable will get <code>true</code> value.</p>\n\n<p>What is important, we don't know type of <code>shiftLeft</code>, if it is a bool variable it will be \"filled\" with <code>true</code> or <code>false</code> value. If it is other kind of variable (for example an integer) it will be \"filled\" with 0 for <code>false</code> and with <strong>something different than 0</strong> for true (but we can't be sure what exactly).</p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 3, "last_activity_date": 1474448793, "creation_date": 1474448793, "answer_id": 39612103, "question_id": 39611772, "link": "https://stackoverflow.com/questions/39611772/what-is-the-meaning-of-expression-a-b-c/39612103#39612103", "title": "What is the meaning of expression a = b != c;", "body": "<p>Here <code>!=</code> expression is evaluated first because <code>!=</code> has higher precedence than <code>=</code>, so it first compares with <code>NULL</code> and then assign into  <code>shitLeft</code>.</p>\n\n<p>If <code>shitLeft</code> is true then <code>if</code> condition is <code>false</code>, otherwise <code>if</code> condition <code>true</code>.</p>\n"}], "owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 913, "favorite_count": 0, "accepted_answer_id": 39611978, "answer_count": 3, "score": 1, "last_activity_date": 1474452738, "creation_date": 1474447903, "last_edit_date": 1474452738, "question_id": 39611772, "link": "https://stackoverflow.com/questions/39611772/what-is-the-meaning-of-expression-a-b-c", "title": "What is the meaning of expression a = b != c;", "body": "<p>I have the following code that I don't understand</p>\n\n<pre><code>shiftLeft = local.tasks.first != NULL;\nif(!shiftLeft) \n  local.tasks.last = NULL;\n</code></pre>\n\n<p>I mean the shiftLeft variable (which is boolean) supposed to be evaluated last, so in the first place evaluates local.tasks.first != NULL, but what is that?</p>\n"}, {"tags": ["c", "addition", "operator-precedence", "compound-assignment", "relational-operators"], "comments": [{"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 2, "creation_date": 1474445693, "post_id": 39610984, "comment_id": 66529421, "body": "<code>last_word &lt; (s + strlen(s) - 1);</code> evaluates to either 1 or 0 (true or false)"}, {"owner": {"reputation": 1880, "user_id": 4098951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a881be644826f456f06c71635f849632?s=128&d=identicon&r=PG&f=1", "display_name": "Euan Smith", "link": "https://stackoverflow.com/users/4098951/euan-smith"}, "edited": false, "score": 0, "creation_date": 1474445975, "post_id": 39610984, "comment_id": 66529574, "body": "see <a href=\"http://stackoverflow.com/questions/2725044/can-i-assume-booltrue-int1-for-any-c-compiler\">here</a> for some discussion about casting  boolean to int"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1880, "user_id": 4098951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a881be644826f456f06c71635f849632?s=128&d=identicon&r=PG&f=1", "display_name": "Euan Smith", "link": "https://stackoverflow.com/users/4098951/euan-smith"}, "edited": false, "score": 0, "creation_date": 1474446965, "post_id": 39610984, "comment_id": 66530148, "body": "@EuanSmith how is that relevant here? relational operators return the result of type <code>int</code>. From where boolean comes into picture?"}, {"owner": {"reputation": 1880, "user_id": 4098951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a881be644826f456f06c71635f849632?s=128&d=identicon&r=PG&f=1", "display_name": "Euan Smith", "link": "https://stackoverflow.com/users/4098951/euan-smith"}, "edited": false, "score": 0, "creation_date": 1474452900, "post_id": 39610984, "comment_id": 66534227, "body": "Of course you are right in C.  I had forgotten that C does not have a native boolean type - spent too long in C++ and C#."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1474446712, "last_edit_date": 1474446712, "creation_date": 1474445872, "answer_id": 39611070, "question_id": 39610984, "link": "https://stackoverflow.com/questions/39610984/c-what-does-this-line-do/39611070#39611070", "title": "c: What does this line do?", "body": "<p>As per the <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">operator precedance</a> table, <code>&lt;</code> binds higher than <code>+=</code> operator, so your code is essentially</p>\n\n<pre><code> count += ( last_word &lt; (s + strlen(s) - 1)) ;\n</code></pre>\n\n<p>where, the <code>(A &lt; B)</code> evaluates to either 0 or 1 <sup>Note</sup>, so, finally, it reduces to</p>\n\n<pre><code>count += 0;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>count += 1;\n</code></pre>\n\n<p><strong><em>Note:</em></strong> related to the \"<code>1</code> or <code>0</code>\" part, quoting <code>C11</code>, chapter \u00a76.5.8/p6, <em>Relational operators</em></p>\n\n<blockquote>\n  <p>Each of the operators <code>&lt;</code> (less than), <code>&gt;</code> (greater than), <code>&lt;=</code> (less than or equal to), and <code>&gt;=</code>\n  (greater than or equal to) shall yield <code>1</code> if the specified relation is <code>true</code> and <code>0</code> if it is\n  <code>false</code>.<sup>107)</sup> The result has type <code>int</code>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474445973, "post_id": 39611089, "comment_id": 66529572, "body": "Surprise!! C has boolean."}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474446044, "post_id": 39611089, "comment_id": 66529611, "body": "@SouravGhosh do you mean the <code>stdbool</code> header?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474446083, "post_id": 39611089, "comment_id": 66529630, "body": "Yes, absolutely. :)"}, {"owner": {"reputation": 3489, "user_id": 1350184, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EQnef.jpg?s=128&g=1", "display_name": "tversteeg", "link": "https://stackoverflow.com/users/1350184/tversteeg"}, "edited": false, "score": 0, "creation_date": 1474446167, "post_id": 39611089, "comment_id": 66529688, "body": "Since C99 there also is a <code>_Bool</code> type you can use without using the <code>stdbool</code> header."}], "tags": [], "owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "is_accepted": false, "score": 0, "last_activity_date": 1474446224, "last_edit_date": 1474446224, "creation_date": 1474445940, "answer_id": 39611089, "question_id": 39610984, "link": "https://stackoverflow.com/questions/39610984/c-what-does-this-line-do/39611089#39611089", "title": "c: What does this line do?", "body": "<p>In C there is a the <code>stdbool.h</code> header which defines as true and false. Essentially you can think of the basic implemantation as:</p>\n\n<pre><code>#define bool int\n#define true 1\n#define false 0\n</code></pre>\n\n<p><code>true</code> and <code>false</code> are defined as not zero and equal to zero respectively. So basically when <code>last_word &lt; (s + strlen(s) - 1)</code>, count is incremented by one.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1474446289, "creation_date": 1474446289, "answer_id": 39611189, "question_id": 39610984, "link": "https://stackoverflow.com/questions/39610984/c-what-does-this-line-do/39611189#39611189", "title": "c: What does this line do?", "body": "<p>In C, <em>relational operators</em> always yield 0 or 1. So, this statement</p>\n\n<pre><code>count += last_word &lt; (s + strlen(s) - 1); \n</code></pre>\n\n<p>adds either 0 or 1 to <code>count</code> depending on the comparison's result. It can be written as (and equivalent to):</p>\n\n<pre><code>if (last_word &lt; (s + strlen(s) - 1)) {\n   count = count + 1;\n} else {\n   count = count + 0;\n}\n</code></pre>\n\n<p>(The <code>else</code> part is needless; added for explanatory purpose.)  </p>\n\n<p><strong>C11 (draft N1548.pdf), Relational operators, \u00a76.5.8, 6</strong></p>\n\n<blockquote>\n  <p>Each of the operators &lt; (less than), > (greater than), &lt;= (less than\n  or equal to), and >= (greater than or equal to) shall yield 1 if the\n  specified relation is true and 0 if it is false. 107) The result has\n  type int.</p>\n</blockquote>\n"}], "owner": {"reputation": 120, "user_id": 4055410, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/606d903359093452f0d33fb41c224794?s=128&d=identicon&r=PG&f=1", "display_name": "Koen ", "link": "https://stackoverflow.com/users/4055410/koen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 39611070, "answer_count": 3, "score": 2, "last_activity_date": 1474446839, "creation_date": 1474445640, "last_edit_date": 1474446839, "question_id": 39610984, "link": "https://stackoverflow.com/questions/39610984/c-what-does-this-line-do", "title": "c: What does this line do?", "body": "<p>I read some code and came over this rather cryptic syntax:</p>\n\n<pre><code>size_t count = 1;\nchar *s         = \"hello you\";\nchar *last_word = \"there\";\n\ncount += last_word &lt; (s + strlen(s) - 1); #line of interest\n</code></pre>\n\n<p>Count is incremented, somehow. But I thought the &lt; operator would return true or false.\nWhat does this line do?</p>\n"}, {"tags": ["c", "loops", "strchr"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6828110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94741a136c87d4a14c9ff211e4c5dc?s=128&d=identicon&r=PG&f=1", "display_name": "pole gar", "link": "https://stackoverflow.com/users/6828110/pole-gar"}, "edited": false, "score": 0, "creation_date": 1474447124, "post_id": 39611300, "comment_id": 66530248, "body": "Thanks for answering. I will use <code>strchr</code> , which has as argument the token, not the position i."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1474447157, "post_id": 39611300, "comment_id": 66530266, "body": "You do not change <code>ch</code> in the loop, so it is an endless loop."}, {"owner": {"reputation": 348, "user_id": 6847998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQFnM.jpg?s=128&g=1", "display_name": "Prashant Negi", "link": "https://stackoverflow.com/users/6847998/prashant-negi"}, "reply_to_user": {"reputation": 43, "user_id": 6828110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94741a136c87d4a14c9ff211e4c5dc?s=128&d=identicon&r=PG&f=1", "display_name": "pole gar", "link": "https://stackoverflow.com/users/6828110/pole-gar"}, "edited": false, "score": 0, "creation_date": 1474447581, "post_id": 39611300, "comment_id": 66530542, "body": "@polegar this should work strchr is taking two arguments the pointer and  the character you are looking for in the string"}], "tags": [], "owner": {"reputation": 348, "user_id": 6847998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQFnM.jpg?s=128&g=1", "display_name": "Prashant Negi", "link": "https://stackoverflow.com/users/6847998/prashant-negi"}, "is_accepted": false, "score": 3, "last_activity_date": 1474447410, "last_edit_date": 1474447410, "creation_date": 1474446641, "answer_id": 39611300, "question_id": 39610950, "link": "https://stackoverflow.com/questions/39610950/iterating-string-with-strchr-in-c/39611300#39611300", "title": "Iterating string with strchr in C", "body": "<p>Suppose you are storing the strchr in a char * ch</p>\n\n<p>Then ch-str+1 will return you the position of the character that you looked for in strchr</p>\n\n<p>Using a predefined substring function or defining a function of your own you can create a while loop like this :</p>\n\n<pre><code>i=0;\nwhile(ch != NULL)\n{\n    printf(\"Your subsrting is : %s\", substring_function(i,(ch-str+1)));\n    i = ch-str+1;\n    ch=strchr(ch+1,';');\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474475653, "post_id": 39618061, "comment_id": 66549639, "body": "This approach is a memory leak as the allocated <code>tokenized</code> is not certainly recoverable for a later <code>free()</code>."}, {"owner": {"reputation": 43, "user_id": 6828110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94741a136c87d4a14c9ff211e4c5dc?s=128&d=identicon&r=PG&f=1", "display_name": "pole gar", "link": "https://stackoverflow.com/users/6828110/pole-gar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474476294, "post_id": 39618061, "comment_id": 66550015, "body": "Thanks a lot, I can add a free after all. Beyond that?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474476534, "post_id": 39618061, "comment_id": 66550151, "body": "&quot;I can add a free after all&quot; --&gt; It is not that simple as code returns a pointer into allocated memory, but has lost the beginning of it.  Suggest posting an answer that uses your &quot;add a free&quot; idea."}, {"owner": {"reputation": 43, "user_id": 6828110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94741a136c87d4a14c9ff211e4c5dc?s=128&d=identicon&r=PG&f=1", "display_name": "pole gar", "link": "https://stackoverflow.com/users/6828110/pole-gar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474477323, "post_id": 39618061, "comment_id": 66550633, "body": "Delete strdup, use string directly in strtok with casting to char *."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474479264, "post_id": 39618061, "comment_id": 66551641, "body": "Using <code>strtok(string)</code> on a <code>const char *</code> is undefined behavior.  Try coding it and see if your well enabled compiler warns."}], "tags": [], "owner": {"reputation": 43, "user_id": 6828110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94741a136c87d4a14c9ff211e4c5dc?s=128&d=identicon&r=PG&f=1", "display_name": "pole gar", "link": "https://stackoverflow.com/users/6828110/pole-gar"}, "is_accepted": false, "score": 0, "last_activity_date": 1474475565, "last_edit_date": 1474475565, "creation_date": 1474464737, "answer_id": 39618061, "question_id": 39610950, "link": "https://stackoverflow.com/questions/39610950/iterating-string-with-strchr-in-c/39618061#39618061", "title": "Iterating string with strchr in C", "body": "<p>OK, found a solution with <code>strtok</code> and I'd like to convert it using <code>strchr</code>. Tokenizer is static variable which contains the character for tokenizing.  Any ideas?</p>\n\n<pre><code>static const char *a(const char *string,int tkn) {\n    char *tokenized=strdup(string);\n    char *token;\n    token=strtok(tokenized, tokenizer);\n    int i=0;\n    while(token != NULL) {\n      if (i == (tkn-1)) {\n        break;\n      }\n      token = strtok(NULL, tokenizer);\n      i++;\n   }\n   return token;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6828110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c94741a136c87d4a14c9ff211e4c5dc?s=128&d=identicon&r=PG&f=1", "display_name": "pole gar", "link": "https://stackoverflow.com/users/6828110/pole-gar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1474475565, "creation_date": 1474445539, "last_edit_date": 1474446793, "question_id": 39610950, "link": "https://stackoverflow.com/questions/39610950/iterating-string-with-strchr-in-c", "title": "Iterating string with strchr in C", "body": "<p>If I have a string like <code>char str [] = \"hello;people;how;are;you\"</code> \nand use <code>strchr(str,\";\")</code> how can I take the N-th token of the string?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel-module"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1474446658, "post_id": 39610893, "comment_id": 66529956, "body": "<code>so I guess I either forgot something or deleted too many things.</code> - Normal addition of the module into sysfs is performed via <a href=\"http://lxr.free-electrons.com/source/kernel/module.c#L1765\" rel=\"nofollow noreferrer\">mod_sysfs_setup</a>. As you can see, this functions does much more than simple <code>kobject_init_and_add</code>."}], "owner": {"reputation": 57, "user_id": 3922676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390109fa0cf112751015152147c0cbb2?s=128&d=identicon&r=PG&f=1", "display_name": "Varpie", "link": "https://stackoverflow.com/users/3922676/varpie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1474445364, "creation_date": 1474445364, "question_id": 39610893, "link": "https://stackoverflow.com/questions/39610893/module-hiding-deleting-sys-module-mymodule-content", "title": "Module hiding deleting /sys/module/mymodule content", "body": "<p>I'm doing a rootkit for educational purpose, but I ran into a problem :  whenever I hide my module and show it back, the content of <code>/sys/module/mymodule/</code> is erased.</p>\n\n<p>Here are my hide and show functions\u00a0:  </p>\n\n<pre><code>void module_hide(void) {\n        /* The module is already hidden, do nothing. */\n        if(module_hidden) return;\n\n        module_previous = THIS_MODULE-&gt;list.prev;\n        list_del(&amp;THIS_MODULE-&gt;list);\n        module_kobj_previous = THIS_MODULE-&gt;mkobj.kobj.entry.prev;\n        kobject_del(&amp;THIS_MODULE-&gt;mkobj.kobj);\n        list_del(&amp;THIS_MODULE-&gt;mkobj.kobj.entry);\n        module_hidden = !module_hidden;\n        printk(KERN_INFO \"Module hidden\\n\");\n}\n\nvoid module_show(void) {\n        /* The module is not hidden yet, nothing more to show. */\n        if(!module_hidden) return;\n\n        list_add(&amp;THIS_MODULE-&gt;list, module_previous);\n        kobject_add(&amp;THIS_MODULE-&gt;mkobj.kobj, THIS_MODULE-&gt;mkobj.kobj.parent, MODULE_NAME);\n        module_hidden = !module_hidden;\n        printk(KERN_INFO \"Module no longer hidden\\n\");\n}\n</code></pre>\n\n<p>I tried replacing <code>kobjec_add</code> with <code>kobject_init_and_add</code>, but it didn't work, so I guess I either forgot something or deleted too many things.<br>\nAlso, I'm trying to run this on Linux 4.7.</p>\n"}, {"tags": ["c", "shared-libraries", "undefined-reference"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1474446435, "post_id": 39610857, "comment_id": 66529835, "body": "You don&#39;t need to know the prototypes of the dummy functions as they are never actually called."}, {"owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1474448887, "post_id": 39610857, "comment_id": 66531525, "body": "Yes. correct. I used dummy functions and its working."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1474449407, "post_id": 39610857, "comment_id": 66531908, "body": "You just need to make sure that those dummy functions are actually never called by anyone."}, {"owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1474454136, "post_id": 39610857, "comment_id": 66535051, "body": "Yes. I got this. Thats why in my answer i have written that its a workaround. In my case those functions are not called."}], "answers": [{"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1474458092, "post_id": 39612274, "comment_id": 66537732, "body": "Indeed you are eliminating the dependencies, but introducing false implementations for those, and you will normally that library broken. <b>DO ONLY WHEN YOU ABSOLUTELLY KNOW WHAT ARE YOU DOING</b>"}, {"owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1474458584, "post_id": 39612274, "comment_id": 66538027, "body": "Yes the library is broken after doing this. A word has been sent to the person who developed the library and asked for answer for the undefined references. Meanwhile these false implementations, explains the working of my test app which at the moment is more important."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1474458746, "post_id": 39612274, "comment_id": 66538135, "body": "Well, nothing said then.... but it&#39;s important to mark it with large letters, as nobody can assume this is a general procedure to support for hidden/unreachable libraries."}, {"owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1474480604, "post_id": 39612274, "comment_id": 66552360, "body": "Edited the last comment to be more visible."}], "tags": [], "owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "is_accepted": false, "score": 2, "last_activity_date": 1474609445, "last_edit_date": 1474609445, "creation_date": 1474449316, "answer_id": 39612274, "question_id": 39610857, "link": "https://stackoverflow.com/questions/39610857/how-to-remove-undefined-symbols-from-a-o-file/39612274#39612274", "title": "How to remove undefined symbols from a .o file", "body": "<p>According to Michael Walz's comment, I didn't needed to strip the .o file. I just had to create a file depend.c. Put a definition for those functions which were undefined. Then build it </p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libdepend\nLOCAL_SRC_FILES := src/depend.cpp\n\nLOCAL_CFLAGS := -DCLR_INTERAPTIV_I7 -DCLR_INTERAPTIV -v\nLOCAL_C_INCLUDES := $(LOCAL_PATH)/../../RIP/include/ $(LOCAL_PATH)/../../../hardware/libhardware/include/hardware $(LOCAL_PATH)/../../../hardware/libhardware/include $(LOCAL_PATH)/src $(LOCAL_PATH)/../../RIP/inc\n\nLOCAL_SHARED_LIBRARIES = libsmem.sastra\n\nLOCAL_LDFLAGS := -v -L$(ANDROID_PRODUCT_OUT)/system/lib -lsmem.$(TARGET_BOARD_PLATFORM) -L$(LOCAL_PATH)/../../RIP/library -llibrary -llog -lcutils -lipc.$(TARGET_BOARD_PLATFORM)\n\n#this option will build executables instead of building library for android application.\ninclude $(BUILD_EXECUTABLE)\n</code></pre>\n\n<p>Take the .o of this file from out folder. \nGet all .os from the library.\nnow </p>\n\n<pre><code> ar -x library.a   //get original object files\n</code></pre>\n\n<p>pack all .os in this library with depend.o by this command</p>\n\n<pre><code> ar r library.a *.o  //put depend.o with other object files \n</code></pre>\n\n<p>Now build the shared library</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libRip\nLOCAL_SRC_FILES := src/Rip_api.cpp src/Rip_crypto.cpp\n\nLOCAL_CFLAGS := -DCLR_INTERAPTIV_I7 -DCLR_INTERAPTIV -v\n\n#only include corelockr and rip headers\nLOCAL_C_INCLUDES := $(LOCAL_PATH)/inc/ $(LOCAL_PATH)/include/  $(LOCAL_PATH)/../../hardware/libhardware/include/hardware/\n\nLOCAL_LDLIBS := -llog -L$(LOCAL_PATH)/library -llibrary\nLOCAL_SHARED_LIBRARIES = libsmem.sastra\n#test seqr library\n#LOCAL_LDFLAGS := -v -L$(LOCAL_PATH)/library -llibrary\n\n#this option will build static library\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>Now shared library should build without any issues.</p>\n\n<p>*******Its a workaround, not a real solution.*******</p>\n"}], "owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474609445, "creation_date": 1474445268, "last_edit_date": 1474609412, "question_id": 39610857, "link": "https://stackoverflow.com/questions/39610857/how-to-remove-undefined-symbols-from-a-o-file", "title": "How to remove undefined symbols from a .o file", "body": "<p>I have to build a shared library using another static library. In that static library there are some function calls that are undefined in <code>nm output</code>. I want to remove those symbols, by getting the object file. I cannot delete whole object file, as some part of it is used. Is there any way of doing that.</p>\n\n<p><strong><code>nm output</code></strong></p>\n\n<pre><code>request.o:\n         U CLR_SECURE_MEM_START_ADDR   //want to remove\n         U clrSMEMAlloc                //want to remove\n         U clrSMEMCopy                 //want to remove\n         U clrSMEMFree                 //want to remove\n         U clrSMEMSet                  //want to remove\n00000000 T copyBuffer\n00000000 T copyParameter\n00000000 T copyRequest\n00000000 T freeParameter\n00000000 T freeRequest\n00000000 T getLinkFromRequest\n         U _gp_disp\n00000000 T initializeRequest\n00000000 T initializeRequestQueue\n         U isClrSMEMBuffer\n00000000 T isParamInSharedMem\n00000000 T isRequestInSharedMem\n00000004 b RequestQueue\n00000000 b RequestQueueHead\n         U strlen\n00000000 T verifyParameter             ////want to keep\n00000000 T verifyParameterType\n00000000 T verifyParameterTypes\n00000000 T verifyRequestParameters\n</code></pre>\n\n<p>I don't have the source of this object file, so I don't know the prototype of the functions that I want to remove. If I had the source I could have written dummy definitions.\nP.S \n<strong>The library that I had was broken. Thats why I had undefined references.</strong></p>\n"}, {"tags": ["c", "windows", "makefile", "linker", "iar"], "comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1474445327, "post_id": 39610798, "comment_id": 66529219, "body": "Just a thought, but have you tried CMake?"}, {"owner": {"reputation": 13, "user_id": 6752576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebfb61112f70a6b8ea17b42b816992c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul-Alexandre Peyrat", "link": "https://stackoverflow.com/users/6752576/paul-alexandre-peyrat"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1474445977, "post_id": 39610798, "comment_id": 66529575, "body": "@rubenvb No I haven&#39;t, but I don&#39;t think this solve my problem. The makefile generated by CMake should send all object files to the linker, and the problem will be raised again, no ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474446074, "post_id": 39610798, "comment_id": 66529624, "body": "Is your <code>Makefile</code> correct? Does it spell <code>trunk</code> correctly? If you run the <code>Makefile</code> in a command-line environment and look at the output of each command, is it correct everywhere? Does the command-line build fail at the same place?"}, {"owner": {"reputation": 13, "user_id": 6752576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebfb61112f70a6b8ea17b42b816992c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul-Alexandre Peyrat", "link": "https://stackoverflow.com/users/6752576/paul-alexandre-peyrat"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474446308, "post_id": 39610798, "comment_id": 66529769, "body": "@JoachimPileborg I tried to compile again, this is the error: could not open file &quot;C:\\FW_Mirtic\\trunk\\src\\Sources\\mirtic_teat_roi\\mirtic_track&zwnj;&#8203;_roi_param.o&quot; and this is the given path:  &quot;C:\\FW_Mirtic\\trunk\\dev_tools\\../src/Sources/mirtic_treat_ro&zwnj;&#8203;i/mirtic_track_roi_p&zwnj;&#8203;aram.o&quot; Now it&#39;s not &quot;trunk&quot; but &quot;mirtic_treat_roi&quot; which becomes &quot;mirtic_teat_roi&quot;"}, {"owner": {"reputation": 1447, "user_id": 6746897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1eb640fcdc6847c55c189ceddb6afca5?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6746897/julien"}, "edited": false, "score": 0, "creation_date": 1474446566, "post_id": 39610798, "comment_id": 66529904, "body": "have you tried to rename the path to &quot;C:\\tunk\\src\\So...&quot; without the r to see if another letter will disappear ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474446573, "post_id": 39610798, "comment_id": 66529907, "body": "There&#39;s most likely something wrong with the makefile, not with Eclipse or how paths are handled. Either skip the makefile completely and create the Eclipse project from scratch. Or try to recreate the makefile from scratch, one step at a time."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1474446715, "post_id": 39610798, "comment_id": 66529992, "body": "CMake puts the commandlines in &quot;response files&quot;, which are passed to the compiler/linker to prevent commandline length issues such as the one you&#39;re experiencing. So if that is indeed the issue, yes, CMake will actually solve your problem."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474559840, "post_id": 39610798, "comment_id": 66590855, "body": "The problem is most likely the <code>makefile</code> but we cannot be sure because the <code>makefile</code> is not posted."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6752576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebfb61112f70a6b8ea17b42b816992c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul-Alexandre Peyrat", "link": "https://stackoverflow.com/users/6752576/paul-alexandre-peyrat"}, "edited": false, "score": 0, "creation_date": 1474465490, "post_id": 39617666, "comment_id": 66542794, "body": "I use relative paths for the compiler, but these lines: OBJDIR=$(SOURCES:.c=.o) $(OBJDIR)/%.o: %.c \t$(CC) $(CFLAGS) -c $&lt; -o $@ seem to translate the relative paths of .c files to absolute paths for the object files. I don&#39;t know how to change this"}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "reply_to_user": {"reputation": 13, "user_id": 6752576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebfb61112f70a6b8ea17b42b816992c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul-Alexandre Peyrat", "link": "https://stackoverflow.com/users/6752576/paul-alexandre-peyrat"}, "edited": false, "score": 0, "creation_date": 1474465679, "post_id": 39617666, "comment_id": 66542939, "body": "I don&#39;t know make well, but there are a lot of people here who do, so hopefully someone can help."}], "tags": [], "owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "is_accepted": false, "score": 0, "last_activity_date": 1474463781, "creation_date": 1474463781, "answer_id": 39617666, "question_id": 39610798, "link": "https://stackoverflow.com/questions/39610798/linker-option-sum-of-path-too-long/39617666#39617666", "title": "linker option, sum of path too long?", "body": "<p>I had a very similar problem when using IAR's Eclipse plugin, but for me it was on the compilation step. I had so many include paths that we were overrunning the command length limit. My solution, and maybe it will help you, was to make sure everything built using relative paths instead of absolute paths. In my case, it was a matter of changing the include directories inside of the Eclipse project to specify them as relative paths. I'm not sure if you can accomplish the same thing with your makefile, but hopefully this might help.</p>\n"}], "owner": {"reputation": 13, "user_id": 6752576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebfb61112f70a6b8ea17b42b816992c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul-Alexandre Peyrat", "link": "https://stackoverflow.com/users/6752576/paul-alexandre-peyrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474463781, "creation_date": 1474445083, "question_id": 39610798, "link": "https://stackoverflow.com/questions/39610798/linker-option-sum-of-path-too-long", "title": "linker option, sum of path too long?", "body": "<p>I have to migrate an IAR project to Eclipse IDE and GCC compiler.\nFor that, I do the process step by step, and the first step is to use Eclipse + makefile and IAR compiler.</p>\n\n<p>The compilation is not a problem, I have object files, the problem is during the link, the linker raise a problem:</p>\n\n<blockquote>\n  <p>IAR ELF Linker V7.10.3.6832/W32 for ARM\n     Copyright 2007-2014 IAR Systems AB.\n  Fatal error[Li001]: could not open file\n            \"C:\\tunk\\src\\Sources\\mirtic_meta_data\\mirtic_meta_data.o\"</p>\n</blockquote>\n\n<p>If I change the order of link files, it's not the same file which raises the error. But each time, a letter is missing in the path, and it's the same letter: \"r\"</p>\n\n<p>here, the file should be in directory \"trunk\" not \"tunk\".\nI checked, the path is correct when it sent to the linker.</p>\n\n<p>Apparently, it's Windows which can't handle many path. But I don't know how to solve my problem (I tried to put the project near \"C:\", with no result).\nI know there is a solution, because with IAR workbench, I can build a binary file.</p>\n"}, {"tags": ["c", "compiler-optimization", "cpu-architecture"], "comments": [{"owner": {"reputation": 8116, "user_id": 909655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d8d9d24942b0fe339ecedeb2c4c5e7?s=128&d=identicon&r=PG", "display_name": "Mats", "link": "https://stackoverflow.com/users/909655/mats"}, "edited": false, "score": 1, "creation_date": 1474445441, "post_id": 39610774, "comment_id": 66529281, "body": "If possible, you should explicitly tell the compiler. See <a href=\"http://stackoverflow.com/questions/30130930/\">stackoverflow.com/questions/30130930</a>"}, {"owner": {"reputation": 95, "user_id": 1350965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4578bf616e1fb78d19e9fef12df8fa4c?s=128&d=identicon&r=PG", "display_name": "Bram Bos", "link": "https://stackoverflow.com/users/1350965/bram-bos"}, "reply_to_user": {"reputation": 8116, "user_id": 909655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d8d9d24942b0fe339ecedeb2c4c5e7?s=128&d=identicon&r=PG", "display_name": "Mats", "link": "https://stackoverflow.com/users/909655/mats"}, "edited": false, "score": 0, "creation_date": 1474447545, "post_id": 39610774, "comment_id": 66530519, "body": "Thanks. I see &quot;__builtin_expect&quot; seems to be the commonly recommended solution. It somehow feels kludgy or at least inelegant. I was hoping for a general code pattern (such as ordering the code-flow or prioritizing true-conditions, etc.) that doesn&#39;t involve compiler-specific macros."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1474448558, "post_id": 39610774, "comment_id": 66531256, "body": "You will always have different ways to order your code to help with branch prediction. However, they will largely be code specific and it is hard to generalize, e.g. do X to always reduce branching. That said, you can always consider whether sorting data can help, etc.., You can search on something similar to <i>C methods to reduce branching</i> and the like to see what other generalities can be found,"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1474448991, "post_id": 39610774, "comment_id": 66531609, "body": "There is no standard way to communicate hot vs. cold code information to the compiler.  Compilers don&#39;t generally try to use the layout of the C to decide how to lay out the asm at all.  Instead, they have heuristics for guessing branch likelihoods.  Those heuristics can&#39;t usually do very well, but you can fix all that by using profile-guided optimization.  e.g. <code>gcc -fprofile-generate -O3</code>, run your program on some common inputs, recompile with <code>gcc -fprofile-use -O3</code>."}], "owner": {"reputation": 95, "user_id": 1350965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4578bf616e1fb78d19e9fef12df8fa4c?s=128&d=identicon&r=PG", "display_name": "Bram Bos", "link": "https://stackoverflow.com/users/1350965/bram-bos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474444998, "creation_date": 1474444998, "question_id": 39610774, "link": "https://stackoverflow.com/questions/39610774/cpu-compiler-branch-prediction", "title": "CPU/compiler branch prediction", "body": "<p>In time-critical processes I try avoid introducing branching, but sometimes there is no practical way around it. </p>\n\n<p>In those cases, is there a performance difference between different ways to test for a certain condition? Is it recommended to test for the most likely outcome, or would it make no difference? I.e. is there a different 'weight' between TRUE and FALSE conditions in CPU or compiler architectures?</p>\n\n<p>E.g. will there typically be a difference between the following three snippets:</p>\n\n<pre><code>// snippet 1: test for exception first\nif ( !likely_to_happen ) {\n  foo();\n} else {\n  bar();\n}\n\n// snippet 2: test for most common cases first\nif ( likely_to_happen ) {\n  bar();\n} else {\n  foo();\n}\n\n// snippet 3: test for exception in an alternative way\nif ( not_likely_to_happen) {\n  foo();\n} else {\n  bar();\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474444864, "post_id": 39610667, "comment_id": 66528951, "body": "Welcome to Stack Overflow! Please show your research/debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 7115, "user_id": 2347483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80792d6741e11aaa6bec5f80fcc30a9c?s=128&d=identicon&r=PG", "display_name": "Phylogenesis", "link": "https://stackoverflow.com/users/2347483/phylogenesis"}, "edited": false, "score": 2, "creation_date": 1474444937, "post_id": 39610667, "comment_id": 66528986, "body": "Whoa whoa whoa. David <i>Lightman</i>? First it is simple C stuff, then it&#39;s <a href=\"http://www.imdb.com/title/tt0086567/\" rel=\"nofollow noreferrer\">hacking into WOPR and nearly starting World War 3</a>. I think we should nip this in the bud right here."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1474445074, "post_id": 39610667, "comment_id": 66529071, "body": "introduce a variable <code>secondButMax</code> that gets assigned the current <code>max</code> value when this receives a new value because you have  found something bigger. And leave those nukes alone."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1474445269, "post_id": 39610667, "comment_id": 66529179, "body": "<a href=\"http://stackoverflow.com/questions/19438603/c-finding-second-largest-number-in-an-array\" title=\"c finding second largest number in an array\">stackoverflow.com/questions/19438603/&hellip;</a> , <a href=\"http://stackoverflow.com/questions/38396018/finding-the-largest-and-second-largest-number\" title=\"finding the largest and second largest number\">stackoverflow.com/questions/38396018/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474447764, "post_id": 39610667, "comment_id": 66530667, "body": "@SouravGhosh I edited the details. But still it&#39;s not working. Can you please check where I&#39;m doing wrong?"}, {"owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474447802, "post_id": 39610667, "comment_id": 66530697, "body": "@BLUEPIXY I edited the details. But still it&#39;s not working. Can you please check my code?"}, {"owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1474447845, "post_id": 39610667, "comment_id": 66530728, "body": "@tofro it&#39;s not working :3"}, {"owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "edited": false, "score": 0, "creation_date": 1474448784, "post_id": 39610667, "comment_id": 66531444, "body": "But your logic seems to be OK. Print value of x after every &#39;scanf&#39; and make sure , all values are reading in your program. Also it will not works for  negative values properly."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474449054, "post_id": 39610667, "comment_id": 66531658, "body": "@DavidLightman your code show <code>4</code> (<a href=\"http://ideone.com/yBqdYr\" rel=\"nofollow noreferrer\">DEMO</a> )"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474449371, "post_id": 39610667, "comment_id": 66531884, "body": "Do you rebuild <code>a.out</code>?"}, {"owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474479385, "post_id": 39610667, "comment_id": 66551723, "body": "@BLUEPIXY the code worked. Thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "edited": false, "score": 0, "creation_date": 1474455484, "post_id": 39611719, "comment_id": 66535976, "body": "But I cannot use an arrey. I have to make it without using an arrey."}, {"owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "edited": false, "score": 0, "creation_date": 1474479816, "post_id": 39611719, "comment_id": 66551967, "body": "Solved this problem. Thanks to everyone who helped."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "edited": false, "score": 0, "creation_date": 1474528096, "post_id": 39611719, "comment_id": 66569418, "body": "Programming is not about hacking characters into a computer. It is about ideas and algorithms. Try to understand ... and then you will find it very easy to replace my array with your input."}], "tags": [], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "is_accepted": false, "score": 0, "last_activity_date": 1474452326, "last_edit_date": 1474452326, "creation_date": 1474447786, "answer_id": 39611719, "question_id": 39610667, "link": "https://stackoverflow.com/questions/39610667/how-to-solve-this-c-programming-exercise/39611719#39611719", "title": "How to solve this C programming exercise?", "body": "<p>I made it easy for myself and replaced your input with an array.</p>\n\n<pre><code>int main (void)\n{\nchar lst [] = { 10, 11, 2, 33 };  // my input (must be char because \n  // I use sizeof to determine the number of inputs)\n\nint max = -1;   // biggest\nint submax = -1;  // 2nd biggest\n\nif (sizeof (lst) &lt; 2)  // must be &gt; 1 to find 2 biggest numbers\n{\n    printf (\"bad\");\n    return 0;\n}\n\nfor (int i = 0; i &lt; sizeof (lst); i ++)\n{\n    int x = lst [i];\n    if (x &gt; max)\n    {\n        submax = max;\n        max = x;  // new biggest makes the old biggest to 2nd biggest\n    }\n    else  // its not biggest but maybe 2nd biggest\n    {\n        if (x &gt; submax)\n        {\n            submax = x;\n        }\n    }\n\n    printf (\"\\n%d: check %d - max=%d, submax=%d\\n\", i, x, max, submax);\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "edited": false, "score": 0, "creation_date": 1474479589, "post_id": 39611839, "comment_id": 66551842, "body": "Thank you for the help. I meant non sorted input."}], "tags": [], "owner": {"reputation": 1403, "user_id": 5512755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6WoeX.jpg?s=128&g=1", "display_name": "Dunatotatos", "link": "https://stackoverflow.com/users/5512755/dunatotatos"}, "is_accepted": false, "score": 0, "last_activity_date": 1474448116, "creation_date": 1474448116, "answer_id": 39611839, "question_id": 39610667, "link": "https://stackoverflow.com/questions/39610667/how-to-solve-this-c-programming-exercise/39611839#39611839", "title": "How to solve this C programming exercise?", "body": "<p>What do you mean by \"any inputted number\" ? Non sorted input ? Negative as well ?\nHere is a function which takes a list of positive integers and return the second maximum, or -1 if an error is encountered (not enough arguments). To adapt to your needs.</p>\n\n<pre><code>int snd_max(int length, int* args) {\n    int max, max2;\n    max = -1;\n    max2 = -1;\n    for (int i = 0; i&lt; length; i++) {\n        if (args[i] &gt; max) {\n            max2 = max;\n            max = args[i];\n        } else if (args[i] &gt; max2 {\n            max2 = args[i]\n        }\n    }\n    return max2;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6857110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdff70653bbba4575267f892b7678054?s=128&d=identicon&r=PG&f=1", "display_name": "David Lightman", "link": "https://stackoverflow.com/users/6857110/david-lightman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1474453956, "creation_date": 1474444685, "last_edit_date": 1474453956, "question_id": 39610667, "link": "https://stackoverflow.com/questions/39610667/how-to-solve-this-c-programming-exercise", "title": "How to solve this C programming exercise?", "body": "<p>This is my first time learning C. So I have to write a code that can find the second largest number from any inputted numbers.</p>\n\n<p>The code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    int x, max, max2;\n    max = max2 = -1;\n\n    while (scanf(\"%d\", &amp;x) != EOF) {\n        if (x &gt; max) {\n            max2 = max;\n            max = x;\n        } else if (x &gt; max2) {\n            max2 = x;\n        }\n    }\n\n    printf(\"%d\\n\", max2);\n    return 0;\n}\n</code></pre>\n\n<p>The problem is, if I enter <code>1 2 3 4 5</code> here, the answer should be 4, as 4 is the second max number. But the code should work on any inputted number. I just couldn't figure it out. </p>\n\n<p>I have to use Linux terminal and vim to solve it. I made a input file in terminal using <code>vim input</code> and made a file and input <code>1 2 3 4 5</code> there. But when I run the code using <code>./a.out &lt;input</code>, it still shows 5. How do I solve this? </p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1474444607, "post_id": 39610610, "comment_id": 66528811, "body": "Do you know how to pass arguments to functions? Do you know how to create functions that takes one or more arguments?"}, {"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1474445081, "post_id": 39610610, "comment_id": 66529081, "body": "@JoachimPileborg Hi im reading on the topic but i&#39;m not really getting the hang of it. not sure when to declare it as int or void. i guess when i print something i should declare it as void. Not sure about my compute function though."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474447651, "post_id": 39611039, "comment_id": 66530598, "body": "thanks man. sort of get what you did. Now im printing out the values of my arrays, which is a great leap forward for me. I still dont understand how to turn my main array into a function. Shall i move the entire code in main down like you did with the print function and add <code>int input()</code> or something like that. Then afterwards calling it in my main?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1474447855, "post_id": 39611039, "comment_id": 66530733, "body": "No, that&#39;s where your conceptual train-wreck is occurring. You will not turn your array into anything -- it&#39;s an array and will always be an array. That said, you can pass your array to a function as above, and do to the numbers anything you like. You can also create several functions and pass the same array to them (e.g. <code>void printarray (...)</code> and <code>int arraymax (...same stuff...)</code>, etc.) But regardless, you are not turning your array into anything other that what it already is. Perhaps you can explain more what you need to accomplish?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1474448070, "post_id": 39611039, "comment_id": 66530896, "body": "Additionally, the <a href=\"http://stackoverflow.com/tags/c/info\"><b>c tag wiki</b></a> contains a list of good books and links that can help you learn the basics of C. Drop by and take a look."}, {"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1474448413, "post_id": 39611039, "comment_id": 66531134, "body": "@DavidC.Rankin Hi David, thanks for the input. Well im trying to build a simple menu where i have the option to view my arrray or store values into the array.  so if i input say &#39;c&#39; for compute, the computer asks me to input values, i can input say 1 2 3 4 then i type 0 to quit. I will now be back at the menu and be asked the same thing ie type V to view or C to compute, i type V now they print the values such as 1 2 3 4. I return to the main and now i get into C (compute) again and continue to store my 5th 6th values etc. Im not sure how to do this."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1474448916, "post_id": 39611039, "comment_id": 66531550, "body": "That makes more sense. All of that can be handled with a simple <i>loop</i>. You can enter an endless loop (e.g. <code>for (;;) { code }</code> or <code>while (1) { code }</code> and take input and use conditionals (e.g. <code>if, else</code> or <code>switch</code> to determine what actions to take, and finally, <code>if (input == &#39;0&#39;) break;</code> to exit the continual loop (you use <code>goto</code> to break out of <i>nested</i> loops). Your <code>code</code> above is simply that logic that takes input and makes decisions based thereon and takes the appropriate actions (hopefully). Drawing out a flow-chart of your inputs and actions can help."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1474446214, "last_edit_date": 1495541781, "creation_date": 1474445764, "answer_id": 39611039, "question_id": 39610610, "link": "https://stackoverflow.com/questions/39610610/turning-my-array-into-a-function-and-making-2nd-function-to-print-it/39611039#39611039", "title": "Turning my array into a function and making 2nd function to print it", "body": "<p>To help you get started (you should really <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">read a beginners book on the subject</a>) I will show you the <code>printArray</code> function.</p>\n\n<p>First of all the <code>printArray</code> function needs to know the actual array to print. it also needs to know the number of elements in the array. This can be accomplished in two ways: Global variables (which no-one is really recommending) or with <em>function arguments</em>.</p>\n\n<p>You first need to tell the compiler that the function takes arguments:</p>\n\n<pre><code>void printArray(int *array, size_t numElements)\n</code></pre>\n\n<p>The above line tells the compiler that the <code>printArray</code> function takes two arguments: One which is called <code>array</code> and is a pointer to <code>int</code> (arrays \"decays\" to pointers to their first element when passed to functions), and one argument that is named <code>numElements</code> and is of type <code>size_t</code> (which is a good type for sizes and number of elements and similar things). The function is declared to return nothing with the <code>void</code> keyword.</p>\n\n<p>The declared arguments can then be used inside the function like any other variables in the scope of the function, and are in fact just like any other local variable defined inside the function. So you can then use them like e.g.</p>\n\n<pre><code>void printArray(int *array, size_t numElements)\n{\n    for (size_t i = 0; i &lt; numElements; ++i)\n    {\n        printf(\"array[%d] = %d\\n\", i, array[i]);\n    }\n}\n</code></pre>\n\n<p>To call this function you need to pass the array and the number of elements, much like you pass arguments to any other function like <code>scanf</code> or <code>printf</code>:</p>\n\n<pre><code>printArray(arrayTable, i);\n</code></pre>\n\n<p>Note that the function doesn't return anything, which means you can't use it in <code>printf</code>, or any other expression that expects a value.</p>\n\n<p>You should of course also make your forward function prototype declaration match the actual function definition.</p>\n"}, {"comments": [{"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474469096, "post_id": 39615736, "comment_id": 66545497, "body": "Hi @David C. Rankin thanks detailed code but its a bit advance for me as we haven&#39;t gone through pointers yet. I written the base of the code but i have trouble to define my function at the bottom. Can you take a look, I&#39;ve edited my code at the top"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1474482957, "post_id": 39615736, "comment_id": 66553583, "body": "You redefine <code>char input;</code> twice. Just define it within the <code>do</code> loop as it isn&#39;t needed outside the loop. You place your function prototypes (e.g. <code>int enterMeasurements();</code> at the TOP of the code so when you use <code>enterMeasurements()</code>  within the code, it is defined (even though you put the actual code for the function at the bottom - if you define the function above <code>main</code>, then there is no need for a prototype). If you are NOT using functions (e.g. you are putting all your code in <code>main</code>) -- you do not need prototypes or functions at all. Give it another go."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1474494098, "last_edit_date": 1474494098, "creation_date": 1474458497, "answer_id": 39615736, "question_id": 39610610, "link": "https://stackoverflow.com/questions/39610610/turning-my-array-into-a-function-and-making-2nd-function-to-print-it/39615736#39615736", "title": "Turning my array into a function and making 2nd function to print it", "body": "<p>Alex, continuing from your last comment, to display a menu that will allow you to add values to your array, delete values from your array and view the array (along with the <em>max</em>, <em>min</em> and <em>average</em> of the values), can do something similar to the following. Note: the command line isn't a windowed user interface, so your menu operations are more like a printed receipt of your transactions with it. (you can do nice text windows and stationary menus, but that generally requires an text library, such as <code>ncurses</code> which is well beyond the scope of your question.</p>\n\n<p>As explained in the comment, your basic approach is simply to create a loop that repeats continually. It will display your menu and allow you to enter your selection from a list, e.g.:</p>\n\n<pre><code> ======== Program Menu =========\n\n  V)  View the Array.\n  I)  Insert New Value.\n  D)  Delete Existing Value.\n  N)  Display Minimum Value.\n  X)  Display Maximum Value.\n  A)  Display Average of Values.\n  S)  Display Sum of Values.\n\n  Q)  Quit.\n\n Selection: \n</code></pre>\n\n<p>After the user enters the selection, to make the comparison easier, the user's input in converted to <em>lower-case</em>. Also note, that the input is read as a string using <code>fgets</code> (a line-oriented input function) which makes taking user input much easier than having to worry about whether the <code>'\\n'</code> remains in the input buffer (<code>stdin</code>) just waiting to cause problems for your next input. (you can use the <code>scanf</code> family of functions, but YOU are the one responsible for accounting for each character entered by the user (and emptying the input buffer).</p>\n\n<p>Reading input with <code>fgets</code> will read up to and including the <code>'\\n'</code>, so their is no chance of the <code>'\\n'</code> being left unread in <code>stdin</code>. Also note that <code>fgets</code> will read a string or characters, where you are only interested in the first. That is easily handled simply by referencing the first character in the buffer. (e.g. if you are reading user-input into a buffer called <code>buf</code>, you can simply use <code>buf[0]</code> to access the first character, or simply <code>*buf</code> for that matter)</p>\n\n<p>After the user input is read, the first character is passed to a <code>switch</code> statement, where each <code>case</code> of the statement is compared against the first character. If the character matches a case, then the actions associated with that case are taken, ending with the <code>break</code> (you can read about fall-through processing if the <code>break</code> is omitted on your own)</p>\n\n<p>As mentioned in the comment, if you simply need to break out of one loop, then <code>break</code> is all you need. However here, your <code>switch</code> statement is inside the loop. A single <code>break</code> will only get you out of the <code>switch</code> but not the outside <code>for</code> loop. To break out of nested loops, use the <code>goto</code> statement. (you could also add more variables and set some type of <em>exit</em> flag, but why? This is what the <code>goto</code> was meant to do. (there are some cases where a flag is equally good as well)</p>\n\n<p>In each <code>case</code> within the <code>switch</code>, you are free to call whatever code is needed to handle that menu selection. You will note we simply call short helper functions from within the <code>switch</code> to print the array, insert values, remove values, etc. You can put all the code in the <code>switch</code> if you like, it just rapidly become unreadable.</p>\n\n<p>Putting that altogether, you can do something like the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;ctype.h&gt;\n\nenum { MAXN = 64 };  /* constant - max numbers of vals &amp; chars */\n\nvoid showmenu ();\nvoid prnarray (int *a, int n);\nint addvalue (int *a, int n, int newval);\nint delvalue (int *a, int n, int index);\nint minvalue (int *a, int n);\nint maxvalue (int *a, int n);\nint sumvalues (int *a, int n);\n\nint main (void) {\n\n    int vals[MAXN] = { 21, 18, 32, 3, 9, 6, 16 }, /* the array */\n        n = 7;\n\n    for (;;) {  /* loop until user quits or cancels, e.g. ctrl+d */\n\n        showmenu();                         /* show the menu */\n\n        char buf[MAXN] = \"\";\n        fgets (buf, MAXN, stdin);           /* read user input */\n        /* convert to lower-case for comparison of all entries */\n        switch (tolower (buf[0])) {         /* 1st char is entry */\n            case 'v' :  prnarray(vals, n);\n                        break;\n            case 'i' :  printf (\"\\n enter the new value: \");\n                        if (fgets (buf, MAXN, stdin) &amp;&amp;\n                            isdigit (buf[0])) {\n                            n = addvalue (vals, n, atoi (buf));\n                        }\n                        break;\n            case 'd' :  printf (\"\\n enter the index to delete: \");\n                        if (fgets (buf, MAXN, stdin) &amp;&amp;\n                            isdigit (buf[0])) {\n                            n = delvalue (vals, n, atoi (buf));\n                        }\n                        break;\n            case 'n' :  printf (\"\\n Mininum of '%d' values is : %d\\n\",\n                                n, minvalue (vals, n));\n                        break;\n            case 'x' :  printf (\"\\n Maxinum of '%d' values is : %d\\n\",\n                                n, maxvalue (vals, n));\n                        break;\n            case 'a' :  printf (\"\\n Average of '%d' values is : %.2lf\\n\",\n                                n, (double)sumvalues (vals, n)/n);\n                        break;\n            case 's' :  printf (\"\\n Sum of '%d' values is : %d\\n\",\n                                n, sumvalues (vals, n));\n                        break;\n            case 'q' :  printf (\" that's all folks...\\n\");\n                        goto done; \n            default  :  if (!buf[0]) {  /* check for manual EOF */\n                            putchar ('\\n');  /* tidy up */\n                            goto done;\n                        }\n                        fprintf (stderr, \"error: invalid selection.\\n\");\n        }\n    }\n    done:;  /* goto label - breaking 'for' and 'switch' */\n\n    return 0;\n}\n\nvoid showmenu ()\n{\n    fprintf(stderr, \"\\n ======== Program Menu =========\\n\\n\"\n                    \"  V)  View the Array.\\n\"\n                    \"  I)  Insert New Value.\\n\"\n                    \"  D)  Delete Existing Value.\\n\"\n                    \"  N)  Display Minimum Value.\\n\"\n                    \"  X)  Display Maximum Value.\\n\"\n                    \"  A)  Display Average of Values.\\n\"\n                    \"  S)  Display Sum of Values.\\n\"\n                    \"\\n\"\n                    \"  Q) Quit.\\n\"\n                    \"\\n\"\n                    \" Selection: \");\n}\n\nvoid prnarray (int *a, int n)\n{\n    int i;\n\n    printf (\"\\n there are '%d' values in the array:\\n\\n\", n);\n\n    for (i = 0; i &lt; n; i++)\n        printf (\" array[%2d] : %d\\n\", i, a[i]);\n}\n\nint addvalue (int *a, int n, int newval)\n{\n    if (n == MAXN) {\n        fprintf (stderr, \"error: all '%d' values filled.\\n\", n);\n        return n;\n    }\n    a[n++] = newval;\n\n    return n;\n}\n\nint delvalue (int *a, int n, int index)\n{\n    if (index &lt; 0 || index &gt; n - 1) {\n        fprintf (stderr, \"error: index out of range.\\n\");\n        return n;\n    }\n\n    int i;\n\n    for (i = index + 1; i &lt; n; i++)\n        a[i-1] = a[i];\n    a[i] = 0;\n\n    return --n;\n}\n\nint minvalue (int *a, int n)\n{\n    int i, min = INT_MAX;\n    for (i = 0; i &lt; n; i++)\n        if (a[i] &lt; min)\n            min = a[i];\n\n    return min;\n}\n\nint maxvalue (int *a, int n)\n{\n    int i, max = INT_MIN;\n    for (i = 0; i &lt; n; i++)\n        if (a[i] &gt; max)\n            max = a[i];\n\n    return max;\n}\n\nint sumvalues (int *a, int n)\n{\n    int i, sum = 0;\n    for (i = 0; i &lt; n; i++)\n        sum += a[i];\n\n    return sum;\n}\n</code></pre>\n\n<p>(note: there are always additional validation checks you can add to test whether you have read all the input the user provided, etc.. But given the crux of your question I'll leave that learning to you)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/menusimple\n\n ======== Program Menu =========\n\n  V)  View the Array.\n  I)  Insert New Value.\n  D)  Delete Existing Value.\n  N)  Display Minimum Value.\n  X)  Display Maximum Value.\n  A)  Display Average of Values.\n  S)  Display Sum of Values.\n\n  Q)  Quit.\n\n Selection: v\n\n there are '7' values in the array:\n\n array[ 0] : 21\n array[ 1] : 18\n array[ 2] : 32\n array[ 3] : 3\n array[ 4] : 9\n array[ 5] : 6\n array[ 6] : 16\n\n ======== Program Menu =========\n\n  V)  View the Array.\n  I)  Insert New Value.\n  D)  Delete Existing Value.\n  N)  Display Minimum Value.\n  X)  Display Maximum Value.\n  A)  Display Average of Values.\n  S)  Display Sum of Values.\n\n  Q)  Quit.\n\n Selection: i\n\n enter the new value: 77\n\n ======== Program Menu =========\n\n  V)  View the Array.\n  I)  Insert New Value.\n  D)  Delete Existing Value.\n  N)  Display Minimum Value.\n  X)  Display Maximum Value.\n  A)  Display Average of Values.\n  S)  Display Sum of Values.\n\n  Q)  Quit.\n\n Selection: v\n\n there are '8' values in the array:\n\n array[ 0] : 21\n array[ 1] : 18\n array[ 2] : 32\n array[ 3] : 3\n array[ 4] : 9\n array[ 5] : 6\n array[ 6] : 16\n array[ 7] : 77\n</code></pre>\n\n<p>Look things over and let me know if you have any questions. Also, as you are just learning, make sure you are compiling your code with <strong><em>compiler warnings enabled</em></strong> and that you don't consider your code reliable until it compiles without warning. That means you should be compiling with at least the <code>-Wall -Wextra</code> flags set. If you are using <code>gcc</code> and the command line, then it would be:</p>\n\n<pre><code>gcc -Wall -Wextra -O2 -o simplemenu simplemenu.c\n</code></pre>\n\n<p>To compile the code in <code>simplemenu.c</code> into an executable named <code>simplemenu</code> with the <code>-O2</code> optimizations applied. If you are really wanting to eliminate all warnings, add <code>-pedantic</code> as well. For codeblock or other IDE, look through the compiler menu options, they all provide a place to input all of the options you would like. Good luck with your code.</p>\n\n<hr>\n\n<p><strong>Procedural Approach Without Functions &amp; Input With <code>scanf</code></strong></p>\n\n<p>OK, now that we know how far we need to backup, let's look at rewriting the code in a bare minimum, top-down approach without using functions and taking user input with <code>scanf</code> (which will cause you more grief, especially taking mixed character and numeric input, but it can be done, if you account for the <code>'\\n'</code> left in <code>stdin</code>)</p>\n\n<p>First a note about taking input with <code>scanf</code>. When you ask for user input, like with the menu selection, and the user enters <code>V</code> and presses <kbd>Enter</kbd>, the input buffer <code>stdin</code> contains <code>\"V\\n\"</code> (the <code>'\\n'</code> as the result of pressing <kbd>Enter</kbd>). When you then use scanf to read a character (e.g. <code>char sel; scanf (\"%c\", &amp;sel);</code>) the <code>'V'</code> is taken from <code>stdin</code> and stored in <code>sel</code> leaving <code>'\\n'</code> in <code>stdin</code>. If you then attempt to read another character (e.g. <code>char nextch; scanf (\"%c\", &amp;nextch);</code>) it will appear that <code>scanf</code> has skipped reading <code>nextch</code> because it never allow you to enter a value. What has actually happened is <code>scanf (\"%c\", &amp;nextch);</code> has read the <code>'\\n'</code> that remained in <code>stdin</code> as your next character and is quite content with the value of <code>0xa</code> (10 decimal) in <code>nextch</code>.</p>\n\n<p>You must always account for the <code>'\\n'</code> when using <code>scanf</code>. You have two options, 1) leave a space before the <em>conversion specifier</em> (e.g. <code>scanf (\" %c\", &amp;nextch);</code> or 2) use the <em>assignment suppression operator</em> <code>'*'</code> (e.g. <code>scanf (\"%c%*c\", &amp;nextch);</code>), the second <code>%*c</code> telling <code>scanf</code> to <em>read and discard</em> the following character without adding the conversion to the <em>match count</em> (which is the integer value returned by <code>scanf</code>). Which brings up <em>the most important point</em> of all, <strong><em>always check the return</em></strong> of <code>scanf</code>. (otherwise, you have no clue whether you have an actual value to work with or just garbage) I will leave the reading of <code>man scanf</code> to you for further details on the effect of the space before the <em>conversion specifier</em>, and the <em>assignment suppression operator</em>. </p>\n\n<p>The return for <code>scanf</code> (the <em>match count</em>) is the number of successful conversions performed based on the number of <em>conversion specifiers</em> contained within the <em>format string</em> (e.g. <code>scanf (\" %c %d\", &amp;somechar, &amp;someint);</code> contains <code>2</code> <em>conversion specifiers</em> <code>%c</code> and <code>%d</code>, so the return for <code>scanf</code> after successful conversion of both would be <code>2</code>. If a matching or conversion failure occurs, the return will be less than <code>2</code> and if an error condition is encountered reading from the stream (<code>stdin</code> in this case) <code>EOF</code> is returned (generally a value of <code>-1</code>) <em>All of this, and more, is why <code>scanf</code> is NOT the preferred method for taking user input in C</em>. (that being said, it is what most tutorials, and most teachers, make the poor choice to expose new C programmers to without an understanding of the pitfalls)</p>\n\n<p>With that out of the way, if you work through the example below, you will see that I have simply moved the code from the functions to within the <code>if ... else if ... else</code> framework. (look at the one-to-one relationship from where I call functions from the <code>switch</code> in the first example and the code below) This should also show why breaking the code up into logical functions, improves readability and improves code re-use. Compare the use of the <code>switch</code> statement with the <code>if ... else if ... else</code> daisy chain. Both are fine, but to me, the <code>switch</code> is more easily readable at a glance.  </p>\n\n<p>You should make sure you understand both versions as they are both basic entry level approaches to using C. Take your time going through each and if you have questions that you cannot answer by consulting one of the references provided in the tag-wiki link, just ask.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; /* for atoi */\n#include &lt;limits.h&gt; /* for INT_MIN/INT_MAX */\n\nenum { MAXN = 64 };  /* constant - max numbers of vals &amp; chars */\n\nint main (void) {\n\n    int vals[MAXN] = { 21, 18, 32, 3, 9, 6, 16 }, /* the array */\n        n = 7;\n\n    for (;;) {\n\n        char c;\n\n        /* show the menu */\n        fprintf(stderr, \"\\n ======== Program Menu =========\\n\\n\"\n                        \"  V)  View the Array.\\n\"\n                        \"  I)  Insert New Value.\\n\"\n                        \"  D)  Delete Existing Value.\\n\"\n                        \"  N)  Display Minimum Value.\\n\"\n                        \"  X)  Display Maximum Value.\\n\"\n                        \"  S)  Display Sum of Values.\\n\"\n                        \"  A)  Display Average of Values.\\n\"\n                        \"\\n\"\n                        \"  Q) Quit.\\n\"\n                        \"\\n\"\n                        \" Selection: \");\n\n        /* read selection (inside of if is OK), check EOF or quit */\n        if (scanf (\" %c\", &amp;c) == EOF || c == 'q' || c == 'Q') {\n            printf (\"\\n that's all folks...\\n\");\n            break;\n        }\n\n        if (c == 'v' || c == 'V') {         /* view array code */\n            printf (\"\\n there are '%d' values in the array:\\n\\n\", n);\n            int i;\n            for (i = 0; i &lt; n; i++)\n                printf (\" array[%2d] : %d\\n\", i, vals[i]);\n        }\n        else if (c == 'i' || c == 'I') {    /* insert value code */\n            if (n == MAXN) {\n                fprintf (stderr, \"error: all '%d' values filled.\\n\", n);\n                continue;\n            }\n            int newval = 0;\n            printf (\"\\n enter the new value: \");\n            if (scanf (\" %d\", &amp;newval) == 1) {\n                vals[n] = newval;\n                n++;\n            }\n            else\n                fprintf (stderr, \"error: invalid input.\\n\");\n        }\n        else if (c == 'd' || c == 'D') {    /* delete value code */\n            int i, index = 0;\n            printf (\"\\n enter the index to delete: \");\n            if (scanf (\" %d\", &amp;index) != 1) {\n                fprintf (stderr, \"error: invalid input.\\n\");\n                continue;\n            }\n            if (index &lt; 0 || index &gt; n - 1) {\n                fprintf (stderr, \"error: index out of range.\\n\");\n                continue;\n            }\n            for (i = index + 1; i &lt; n; i++)\n                vals[i-1] = vals[i];\n            vals[i] = 0;\n            n--;\n        }\n        else if (c == 'n' || c == 'N') {    /* display minimum code */\n            int i, min = INT_MAX;\n            for (i = 0; i &lt; n; i++)\n                if (vals[i] &lt; min)\n                    min = vals[i];\n            printf (\"\\n Mininum of '%d' values is : %d\\n\",\n                    n, min);        \n        }\n        else if (c == 'x' || c == 'X') {    /* display maximum code */\n            int i, max = INT_MIN;\n            for (i = 0; i &lt; n; i++)\n                if (vals[i] &gt; max)\n                    max = vals[i];\n            printf (\"\\n Maxinum of '%d' values is : %d\\n\",\n                    n, max);        \n        }\n        else if (c == 's' || c == 'S') {    /* compute sum code */\n            int i, sum = 0;\n            for (i = 0; i &lt; n; i++)\n                sum += vals[i];\n            printf (\"\\n Sum of '%d' values is : %d\\n\",\n                                n, sum);\n        }\n        else if (c == 'a' || c == 'A') {    /* compute avg code */\n            int i, sum = 0;\n            double avg = 0.0;\n            for (i = 0; i &lt; n; i++)\n                sum += vals[i];\n            avg = (double)sum/n;\n            printf (\"\\n Average of '%d' values is : %.2lf\\n\",\n                    n, avg);\n        }\n        else    /* if not matched, then invalid selection */\n            fprintf (stderr, \"error: invalid selection.\\n\");\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>(the operation and output from both program versions will be identical)</p>\n"}], "owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1474494098, "creation_date": 1474444480, "last_edit_date": 1474469838, "question_id": 39610610, "link": "https://stackoverflow.com/questions/39610610/turning-my-array-into-a-function-and-making-2nd-function-to-print-it", "title": "Turning my array into a function and making 2nd function to print it", "body": "<p>Im trying to create a program that has 2 options, view and compute. Right now im trying to figure how to turn my array where i will input my values into a function, so i can go in and out several times to store the values. I also want to view to be a function where i can view the values several times. </p>\n\n<p>i've managed to get the computing part to work in my main, now i need to turn it into a function. Secondly how do i create a second function to view it? </p>\n\n<p>My code is a bit mess please bear with me. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define LENGTH 10\n\nint enterMeasurements();\n\nint main(void)\n{\nchar input;\nint nrMeasurements=0;\nint arrayTable[LENGTH] = {0};\n//main menu\ndo\n{\n    char input;\n    printf(\"\\nMeasurement tool 1.0\\n\");\n    printf(\"V for (View)\\n\");\n    printf(\"E for (Enter Values)\\n\");\n    printf(\"C for (Compute Values)\\n\");\n    printf(\"R for (Reset Values)\\n\");\n    printf(\"Q for (Quit)\\n\");\n    printf(\"\\nEnter input: \");\n    scanf(\" %c\", &amp;input);\n\n    if(input == 'v' || input == 'V')\n    {\n    // function to print array values\n    printf(\"[      ]\\n\");\n    }\n    else if(input == 'e' || input == 'E')\n    {\n    // enter values here\n        nrMeasurements = enterMeasurements(arrayTable,nrMeasurements); // my function for entering values\n    }\n    else if (input == 'c' || input == 'C')\n    {\n    // enter function to calc min, max and avg and prints it.\n    printf(\"[   min max avg   ]\\n\");\n    }\n    else if (input == 'r' || input == 'R')\n    {\n    // enter function that erase the entire array.\n    printf(\"[   erase array   ]\\n\");\n    }\n}\nwhile (input !='q' &amp;&amp; input != 'Q');\nreturn 0;\n}\n\nint enterMeasurements()\n{\nint enterMeasurements(int arrayTable[], int nrMeasurements)\n{\nint i;\n\nfor (i = 0; i &lt; LENGTH; i++)\n{\n    printf(\"Enter Measurement #%i (or 0): \", i+1);\n    scanf(\"%d\", &amp;arrayTable[i]);\n\n\n    if (arrayTable[i] == 0 )\n        break;\n}\n\n\nreturn i;\n\n\n}\n</code></pre>\n"}, {"tags": ["python", "c", "function"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1474445840, "post_id": 39610280, "comment_id": 66529495, "body": "Which version of python?"}, {"owner": {"reputation": 2037, "user_id": 2137364, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/qAVkA.jpg?s=128&g=1", "display_name": "themadmax", "link": "https://stackoverflow.com/users/2137364/themadmax"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1474484995, "post_id": 39610280, "comment_id": 66554658, "body": "I&#39;m using Python 2.7"}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1474539013, "post_id": 39611394, "comment_id": 66576326, "body": "Was there NewEx in Python 2?"}, {"owner": {"reputation": 2037, "user_id": 2137364, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/qAVkA.jpg?s=128&g=1", "display_name": "themadmax", "link": "https://stackoverflow.com/users/2137364/themadmax"}, "edited": false, "score": 0, "creation_date": 1474546565, "post_id": 39611394, "comment_id": 66581246, "body": "Yes in methodobject.h"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1474550032, "last_edit_date": 1474550032, "creation_date": 1474446913, "answer_id": 39611394, "question_id": 39610280, "link": "https://stackoverflow.com/questions/39610280/how-to-add-dynamically-c-function-in-embedded-python/39611394#39611394", "title": "How to add dynamically C function in embedded Python", "body": "<p>You need to construct a new <code>PyCFunctionObject</code> object from the <code>MyFunction</code>. Usually this is done under the hood using the module initialization code, but as you're now doing it the opposite way, you need to construct the <code>PyCFunctionObject</code> yourself, using the undocumented <code>PyCFunction_New</code> or <code>PyCFunction_NewEx</code>, and a suitable <a href=\"https://docs.python.org/3/c-api/structures.html#c.PyMethodDef\" rel=\"nofollow\"><code>PyMethodDef</code></a>:</p>\n\n<pre><code>static PyMethodDef myfunction_def = { \n    \"myfunction\", \n    MyFunction,\n    METH_VARARGS,\n    \"the doc string for myfunction\"\n};\n\n... \n\n    // Use PyUnicode_FromString in Python 3.\n    PyObject* module_name = PyString_FromString(\"mymodule\");\n    if (module_name == NULL) {\n        // error exit!\n    }\n\n    // this is adapted from code in code in \n    // Objects/moduleobject.c, for Python 3.3+ and perhaps 2.7\n    PyObject *func = PyCFunction_NewEx(&amp;myfunction_def, pymod, module_name);\n    if (func == NULL) {\n        // error exit!\n    }\n    if (PyObject_SetAttrString(module, myfunction_def.ml_name, func) != 0) {\n        Py_DECREF(func);\n        // error exit!\n    }\n    Py_DECREF(func);\n</code></pre>\n\n<p>Again, this is not the preferred way to do things; usually a C extension creates concrete module objects (such as <code>_mymodule</code>) and <code>mymodule.py</code> would import <code>_mymodule</code> and put things into proper places.</p>\n"}], "owner": {"reputation": 2037, "user_id": 2137364, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/qAVkA.jpg?s=128&g=1", "display_name": "themadmax", "link": "https://stackoverflow.com/users/2137364/themadmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 39611394, "answer_count": 1, "score": -1, "last_activity_date": 1474550032, "creation_date": 1474443499, "last_edit_date": 1474463251, "question_id": 39610280, "link": "https://stackoverflow.com/questions/39610280/how-to-add-dynamically-c-function-in-embedded-python", "title": "How to add dynamically C function in embedded Python", "body": "<p>I declare a C function as Python prototype</p>\n\n<pre><code>static PyObject* MyFunction(PyObject* self, PyObject* args)\n{\n    return Py_None ;\n}\n</code></pre>\n\n<p>Now I want to add it into a dynamically loaded module</p>\n\n<pre><code>PyObject *pymod = PyImport_ImportModule(\"mymodule\");\nPyObject_SetAttrString( pymod, \"myfunction\", ? );\n</code></pre>\n\n<p>How to convert C function into PyObject callable ?</p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array", "addressof"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "edited": false, "score": 0, "creation_date": 1474480515, "post_id": 39609940, "comment_id": 66552319, "body": "Thanks I think It is accurate for the Question asked"}, {"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1474503618, "post_id": 39609940, "comment_id": 66562171, "body": "&quot;s[i] is of type int *&quot; NO. <code>s[i]</code> is of type <code>int [2]</code>, an array type, which can be implicitly converted to <code>int *</code> in certain contexts. &quot;and &amp;s[i] is an address of an address (i.e. of type int **)&quot; NO. <code>&amp;s[i]</code> is of type <code>int (*)[2]</code>, a pointer-to-array type. &quot;When you apply * on it, you get an address (i.e. int *)&quot; Again, no. You get <code>int [2]</code>, which can be implicitly converted to <code>int *</code> in certain contexts."}, {"owner": {"reputation": 2203, "user_id": 6137423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1Rfu.jpg?s=128&g=1", "display_name": "AhmadWabbi", "link": "https://stackoverflow.com/users/6137423/ahmadwabbi"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1474532778, "post_id": 39609940, "comment_id": 66572304, "body": "@newacct LOL. ok. But I prefer saying things simply (but not %100 accurate) for a beginner to understand easily rather than saying accurate yet complex answers. Also, this distinction between <code>int [2]</code> and <code>int *</code> is somehow &quot;logical&quot;, and IMHO, not worth mentioning in the answer of this question, as @Kunal talks about addresses in his question."}, {"owner": {"reputation": 2203, "user_id": 6137423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1Rfu.jpg?s=128&g=1", "display_name": "AhmadWabbi", "link": "https://stackoverflow.com/users/6137423/ahmadwabbi"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1474533167, "post_id": 39609940, "comment_id": 66572523, "body": "@newacct You can see that the answer satisfied the PO more than &quot;real accurate&quot; answers."}], "tags": [], "owner": {"reputation": 2203, "user_id": 6137423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1Rfu.jpg?s=128&g=1", "display_name": "AhmadWabbi", "link": "https://stackoverflow.com/users/6137423/ahmadwabbi"}, "is_accepted": true, "score": 0, "last_activity_date": 1474445272, "last_edit_date": 1474445272, "creation_date": 1474442555, "answer_id": 39609940, "question_id": 39609702, "link": "https://stackoverflow.com/questions/39609702/pointer-to-the-address-of-element-of-an-array/39609940#39609940", "title": "Pointer to the Address of Element of an Array", "body": "<p>Your array is bi-dimensional. So, <code>s[i]</code> is the address of line <code>i</code> (i.e. <code>s[i]</code> is of type <code>int *</code>), and <code>&amp;s[i]</code> is an address of an address (i.e. of type <code>int **</code>). When you apply <code>*</code> on it, you get an address (i.e. <code>int *</code>).</p>\n\n<p>It is true that the operator <code>&amp;</code> means \"address-of\" and <code>*(&amp;x)</code> refers to the value of <code>x</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "edited": false, "score": 0, "creation_date": 1474480535, "post_id": 39609954, "comment_id": 66552325, "body": "Thanks Fro explaining"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1474444426, "last_edit_date": 1474444426, "creation_date": 1474442598, "answer_id": 39609954, "question_id": 39609702, "link": "https://stackoverflow.com/questions/39609702/pointer-to-the-address-of-element-of-an-array/39609954#39609954", "title": "Pointer to the Address of Element of an Array", "body": "<p><strong>Notice here</strong>, <code>s</code> is a two dimensional array, and array names decay to pointer to the first element, in certain cases. </p>\n\n<p>Here, <code>s[i]</code> is of type array, array of two <code>int</code>s. </p>\n\n<p>Then, quoting <code>C11</code>, chapter \u00a76.3.2.1,</p>\n\n<blockquote>\n  <p>Except when it is the operand of the <code>sizeof</code> operator, the <code>_Alignof</code> operator, or the\n  unary <code>&amp;</code> operator, or is a string literal used to initialize an array, an expression that has\n  type <em>\u2018\u2018array of type\u2019\u2019</em> is converted to an expression with type <em>\u2018\u2018pointer to type\u2019\u2019</em> that points\n  to the initial element of the array object and is not an lvalue. [...]</p>\n</blockquote>\n\n<p>Thus, </p>\n\n<ul>\n<li><p>In the first case,</p>\n\n<pre><code>*(s[i]+j)\n</code></pre>\n\n<p><code>s[i]</code> is of type <code>int [2]</code>, which decays to an <code>int *</code>, which is used in the pointer arithmetic, producing another <code>int *</code>. After the dereference, you get an <code>int</code>.</p></li>\n<li><p>In the second case, </p>\n\n<pre><code>*(&amp;s[i]+j)\n</code></pre>\n\n<p>due to the same aforesaid reason, in case of <code>&amp;s[i]</code>, <code>s[i]</code> does not <em>decay</em>, and the type is \"pointer to <code>int [2]</code>\" and the pointer arithmetic works on that. So, in this case, the result of the addition is also \"pointer to <code>int [2]</code>\" and after the final dereference, it becomes <code>int *</code>, which is the mismatch for <code>%d</code> and that is what reported by your compiler.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 42, "user_id": 5349199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iILM1.jpg?s=128&g=1", "display_name": "Shijo Joseph", "link": "https://stackoverflow.com/users/5349199/shijo-joseph"}, "edited": false, "score": 0, "creation_date": 1474455995, "post_id": 39614594, "comment_id": 66536324, "body": "@Kunal Verma : Hope this will be usefull."}, {"owner": {"reputation": 42, "user_id": 5349199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iILM1.jpg?s=128&g=1", "display_name": "Shijo Joseph", "link": "https://stackoverflow.com/users/5349199/shijo-joseph"}, "reply_to_user": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "edited": false, "score": 0, "creation_date": 1474556999, "post_id": 39614594, "comment_id": 66588808, "body": "@Kunal Verma : You are welcome. Please up vote the answer if you got the concepts clear, so that others can also check this. Thank you."}], "tags": [], "owner": {"reputation": 42, "user_id": 5349199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iILM1.jpg?s=128&g=1", "display_name": "Shijo Joseph", "link": "https://stackoverflow.com/users/5349199/shijo-joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1474455372, "creation_date": 1474455372, "answer_id": 39614594, "question_id": 39609702, "link": "https://stackoverflow.com/questions/39609702/pointer-to-the-address-of-element-of-an-array/39614594#39614594", "title": "Pointer to the Address of Element of an Array", "body": "<p><strong>First case</strong></p>\n\n<p>Your print statement is this.</p>\n\n<pre><code>printf(\"%d  \",*(s[i]+j));\n</code></pre>\n\n<p>Here s[i]+j is the address.</p>\n\n<p>lets consider i=0,j=1 , first i loop, second j loop.</p>\n\n<p>here s[i] will be the address in which value 1234 is residing. lets say it is 489000.\nso s[i]+j , here s[0]+1 will be the address at which value 56 is residing. lets say it is 489004</p>\n\n<p>So, *(s[i]+j) ,ie; here *(s[0]+1) will be giving the value at address 489004. ie 56.\nSo here it will print the values 1234, 56, 1212 etc.</p>\n\n<p><strong>Second Case</strong>\nYour print statement is this.</p>\n\n<pre><code>printf(\"%d  \",*(&amp;s[i]+j));\n</code></pre>\n\n<p>Here &amp;s[i]+j is the address.</p>\n\n<p>lets consider i=0,j=0 , first i loop, first j loop.</p>\n\n<p>here s[i] will be the address in which value 1234 is residing.\nLets say it is 489000.\nSo &amp;s[i] will be the address in which address 489000 is residing.\nLets say it is 380000.\nRecall the concepts of pointer's.</p>\n\n<p>So &amp;s[i]+j will be \"address in which address 489000 is residing + j\" .\nie; 380000+j</p>\n\n<p>we are applying a value at operator * on this particular 'address' we got.\n*(&amp;s[i]+j).\nSo it becomes, \nValue at['address in which address 489000 is residing' + j].\nValue at[380000 + j].</p>\n\n<p>when i=0,j=0, it will print,  Value At[380000] , ie; 489000.</p>\n\n<p>So it will print the address in which the values 1234, 56 , 1212 etc are stored.</p>\n"}], "owner": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 39609940, "answer_count": 3, "score": 0, "last_activity_date": 1474455372, "creation_date": 1474441869, "last_edit_date": 1474443839, "question_id": 39609702, "link": "https://stackoverflow.com/questions/39609702/pointer-to-the-address-of-element-of-an-array", "title": "Pointer to the Address of Element of an Array", "body": "<pre><code>int s[4][2]= {\n             {1234,56},\n             {1212,33},\n             {1434,80},\n             {1312,78}\n             };\nint i,j;\nfor(i=0;i&lt;=3;i++)\n{\n    printf(\"\\n\");\n    for(j=0;j&lt;=1;j++)\n    {\n        printf(\"%d  \",*(s[i]+j));\n    }\n}\n</code></pre>\n\n<p>Output Showing is </p>\n\n<blockquote>\n<pre><code>1234,56\n1212,33\n1434,80\n1312,78\n</code></pre>\n</blockquote>\n\n<p>As we know <code>*(&amp;Variable)</code> will print the Value of the Variable But when We implement the same concept in above program...</p>\n\n<pre><code>int s[4][2]= {\n             {1234,56},\n             {1212,33},\n             {1434,80},\n             {1312,78}\n             };\nint i,j;\nfor(i=0;i&lt;=3;i++)\n{\n    printf(\"\\n\");\n    for(j=0;j&lt;=1;j++)\n    {\n        printf(\"%d  \",*(&amp;s[i]+j));\n    }\n}\n</code></pre>\n\n<p>output is showing the Address of each element of array.</p>\n\n<p>Why this is happening? \nWhy Output is not equal to value of elements of Array??</p>\n"}, {"tags": ["c++", "c", "pointers", "structure"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1474441813, "post_id": 39609664, "comment_id": 66527096, "body": "You haven&#39;t initialized <code>_sock</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474441854, "post_id": 39609664, "comment_id": 66527127, "body": "<code>_sock_t *_sock</code>. You better learn about pointers before you proceed any further with your C programming. That&#39;s an uninitalised pointer and of course you can&#39;t dereference it."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1474441874, "post_id": 39609664, "comment_id": 66527136, "body": "The variable <code>_sock</code> is not initialized to point to a valid (properly allocated) memory block."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474441982, "post_id": 39609664, "comment_id": 66527204, "body": "Please don&#39;t downvote on the grounds of obviousness. This question, IMHO, is well written."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1474442085, "post_id": 39609664, "comment_id": 66527270, "body": "It&#39;s the difference between a <i>pointer</i> object  and a <i>struct</i> object. <code>_sock_t *_sock ;</code> defines a <i>pointer</i> object which doesn&#39;t point anywhere; if you try to access the object &quot;it points to&quot; with<code>_sock-&gt;_socket</code>(quotes because it doesn&#39;t), you segfault. By contrast, <code>_sock_t _sock ;</code> defines an object of type <code>_sock_t</code> which has an existing  field <code>_sock._socket</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1474441899, "post_id": 39609699, "comment_id": 66527145, "body": "The word &quot;type&quot; is redundant IMO."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1474441944, "post_id": 39609699, "comment_id": 66527174, "body": "@barakmanos: yes, I think you&#39;re correct; it does read better without it."}, {"owner": {"reputation": 868, "user_id": 1413253, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5c8cac06f5b4952dc51684963df6678a?s=128&d=identicon&r=PG", "display_name": "Courier", "link": "https://stackoverflow.com/users/1413253/courier"}, "edited": false, "score": 0, "creation_date": 1474442123, "post_id": 39609699, "comment_id": 66527288, "body": "I already tried <code>_sock_t *_sock=NULL</code>, but without success. Should I try <code>_sock_t *_sock = malloc(sizeof(_sock_t));</code>?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1474442254, "post_id": 39609699, "comment_id": 66527366, "body": "Absolutely! Don&#39;t forget to call <code>free</code> once you&#39;re done with <code>_sock</code>."}, {"owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "edited": false, "score": 1, "creation_date": 1474442801, "post_id": 39609699, "comment_id": 66527695, "body": "<code>_sock_t *_sock ;</code> Is this statement valid ? Since typedef is used in structure this statement might not be valid."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1474443016, "post_id": 39609699, "comment_id": 66527840, "body": "If this is a C++-question (it&#39;s tagged as such), you shouldn&#39;t be using <code>malloc</code>"}, {"owner": {"reputation": 868, "user_id": 1413253, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5c8cac06f5b4952dc51684963df6678a?s=128&d=identicon&r=PG", "display_name": "Courier", "link": "https://stackoverflow.com/users/1413253/courier"}, "edited": false, "score": 0, "creation_date": 1474443140, "post_id": 39609699, "comment_id": 66527918, "body": "Well, <code>ir_socket_t</code> is pure C, while  <code>_sock_t</code> is defined in C++ code."}, {"owner": {"reputation": 868, "user_id": 1413253, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5c8cac06f5b4952dc51684963df6678a?s=128&d=identicon&r=PG", "display_name": "Courier", "link": "https://stackoverflow.com/users/1413253/courier"}, "edited": false, "score": 0, "creation_date": 1474444317, "post_id": 39609699, "comment_id": 66528633, "body": "@Bathsheba, I just have updated my question. There is still one problem..."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1474443143, "last_edit_date": 1474443143, "creation_date": 1474441861, "answer_id": 39609699, "question_id": 39609664, "link": "https://stackoverflow.com/questions/39609664/structure-pointer-member-pointing-to-another-structure-leads-to-segmentation-fau/39609699#39609699", "title": "Structure pointer member pointing to another structure leads to segmentation fault (C/C++)", "body": "<p>That's hardly surprising. In writing <code>_sock_t *_sock</code> all you've done is declare a pointer.</p>\n\n<p>But it doesn't <em>point</em> to anything. The behaviour on <em>dereferencing</em> it (in your case via the pointer to member operator <code>-&gt;</code>) is <em>undefined</em>.</p>\n\n<p>You need to point it at allocated memory. Use <code>malloc</code> for this in C, and <code>new</code> in C++. Don't forget to call <code>free</code> and <code>delete</code> respectively once you're done with the pointer, else you'll <em>leak</em> memory.</p>\n\n<p>Finally, (acknowledge @Karthick), it appears you're using a C++ compiler to compile C code: in C you'd need to write <code>struct _sock_t *_sock;</code>.</p>\n"}], "owner": {"reputation": 868, "user_id": 1413253, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5c8cac06f5b4952dc51684963df6678a?s=128&d=identicon&r=PG", "display_name": "Courier", "link": "https://stackoverflow.com/users/1413253/courier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1474441919, "answer_count": 1, "score": -1, "last_activity_date": 1474448881, "creation_date": 1474441745, "last_edit_date": 1474448881, "question_id": 39609664, "link": "https://stackoverflow.com/questions/39609664/structure-pointer-member-pointing-to-another-structure-leads-to-segmentation-fau", "closed_reason": "Duplicate", "title": "Structure pointer member pointing to another structure leads to segmentation fault (C/C++)", "body": "<p>I get segmentation fault when a structure member points to another structure. In details, my new structure is</p>\n\n<pre><code>typedef struct _sock_t{\n  ir_socket_t *_socket;\n  bool flag;\n  extern_class obj;\n  double *vect;\n};\n</code></pre>\n\n<p>while the structure I want to point to is <code>ir_socket_t socket;</code>. In <code>main()</code>, if I do something like</p>\n\n<pre><code>  _sock_t *_sock ;\n  _sock-&gt;_socket = &amp;socket;\n</code></pre>\n\n<p>I then get segmentation fault. However, </p>\n\n<pre><code>  _sock_t _sock ;\n  _sock._socket = &amp;socket; \n</code></pre>\n\n<p>works fine. What is wrong about the first approach. </p>\n\n<p>P.S. Note that <code>ir_socket_t</code> is C not C++ structure.</p>\n\n<hr>\n\n<p>UPDATE:\n If I also consider a C++ class object as new a structure member, then I still get segmentation fault at</p>\n\n<pre><code>int n(4);\n_sock-&gt;obj.resize(4); // here segmentation fault\n</code></pre>\n\n<p>while there is no problem with the latter approach (no pointer). This happens even if I do <code>_sock_t *_sock = (_sock_t *)malloc(sizeof(_sock_t));</code>; using @Bathshebba answer.</p>\n\n<p>What could be the issue please? </p>\n\n<p>Note that <code>_sock-&gt;vect= new double[n]</code> works fine.</p>\n\n<p>Note also that  <code>_sock = new _sock_t;</code> works instead fine.</p>\n"}, {"tags": ["c", "search", "recursion", "binary"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1474440771, "post_id": 39609298, "comment_id": 66526498, "body": "You need something like <code>values + n - n&#47;2</code> (which is not the same as <code>values + n&#47;2</code>)."}, {"owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474441165, "post_id": 39609298, "comment_id": 66526721, "body": "I&#39;m note sure that I follow, since values is the name of the array.  Adding the quantity n/2 doesn&#39;t seem like it would make sense. I&#39;ll certainly play around with it though. Many thanks for the reply!"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 3, "creation_date": 1474441367, "post_id": 39609298, "comment_id": 66526821, "body": "The line <code>if (n&#47;2 &lt;= 0)</code> is wrong. 0 is a valid array index. That is why your code cannot find any value at the beginning of an array slice."}, {"owner": {"reputation": 62, "user_id": 3230827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48b8eb2cf835c4f6762f67a7c93b861?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen.sn", "link": "https://stackoverflow.com/users/3230827/naveen-sn"}, "edited": false, "score": 2, "creation_date": 1474441608, "post_id": 39609298, "comment_id": 66526992, "body": "Your logic is completely wrong, passing (n/2) won&#39;t work. If the searching element is in right half part of array, your code goes looking into left half part of array. There is no difference between last if and else condition lines."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1474441724, "post_id": 39609298, "comment_id": 66527060, "body": "@RyanD. <code>values</code> is an array in <code>main</code>. It&#39;s a pointer in <code>search</code>, and so you can make adjustments to the pointer. Your code is always searching the first half of the array. To make it search the last half, you need to adjust the pointer to point at the last half."}, {"owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474441984, "post_id": 39609298, "comment_id": 66527207, "body": "@user3386109 Thanks for the clarification. The underlying problem was slightly more complex than I thought!"}], "answers": [{"comments": [{"owner": {"reputation": 51244, "user_id": 952747, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/86ebf3cf751f63acb38e763f7104a318?s=128&d=identicon&r=PG&f=1", "display_name": "masoud", "link": "https://stackoverflow.com/users/952747/masoud"}, "edited": false, "score": 0, "creation_date": 1474442079, "post_id": 39609718, "comment_id": 66527266, "body": "This has problem too."}], "tags": [], "owner": {"reputation": 310, "user_id": 6769270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a411cf1a45892aac989c5f1c7ab40?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Sugioarto", "link": "https://stackoverflow.com/users/6769270/martin-sugioarto"}, "is_accepted": true, "score": 3, "last_activity_date": 1474441904, "creation_date": 1474441904, "answer_id": 39609718, "question_id": 39609298, "link": "https://stackoverflow.com/questions/39609298/binary-search-seg-fault/39609718#39609718", "title": "Binary Search Seg Fault", "body": "<p>Yes, the problem is that when you call search with the upper half of the array, you should pass it with the offset like</p>\n\n<pre><code>return search(value, values + (n + 1) / 2, n / 2);\n</code></pre>\n\n<p>Note that I also skipped the middle element that you have already compared for the cases when <code>n</code> is odd. You can of course optimize the recursive calls, always taking care that also the length is calculated correctly.</p>\n"}], "owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 39609718, "answer_count": 1, "score": 1, "last_activity_date": 1474475003, "creation_date": 1474440542, "last_edit_date": 1474475003, "question_id": 39609298, "link": "https://stackoverflow.com/questions/39609298/binary-search-seg-fault", "title": "Binary Search Seg Fault", "body": "<p>I'm trying to implement a binary search in a slightly non-traditional way by using only 3 arguments int value (what I'm looking for), int values[] (the array), int n (the size of the array). The code below finds the number 2 and recognizes that 13 is not there, but cannot find numbers like 6 or 7.  I think the problem is in the final recursive call. It could be a pointer issue. I'm certain the rest of the code works fine. Any thoughts on where I might be going wrong would be appreciated. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool search(int value, int values[], int n);\n\nint main(void)\n{   \n    int value = 6;\n    int values[] = {1, 2, 3, 4, 5, 6, 7};\n    int n = 7;\n\n    bool x = search(value, values, n);\n\n    if (x == true)\n        printf(\"found\\n\");\n    else\n        printf(\"not found\\n\");\n}\n\nbool search(int value, int values[], int n)\n{\n    int midpoint = n/2;\n\n    if (n/2 &lt;= 0)\n    {\n        return false;\n    }\n    if (value == values[midpoint])\n    {\n        return true;\n    }\n    if (value &lt; values[midpoint])\n    {\n        return search(value, values, n/2);\n    }\n    else if (value &gt; values[midpoint])\n    {\n        return search(value, values, n/2);\n    }\n\n return false;\n} \n</code></pre>\n"}, {"tags": ["c", "pthreads", "valgrind"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1474439531, "post_id": 39608893, "comment_id": 66525848, "body": "FYI: For your code, Helgrind reports no such races on Linux."}, {"owner": {"reputation": 427, "user_id": 2908112, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d5eb4e000e5524094f4f8ac2f97074e5?s=128&d=identicon&r=PG&f=1", "display_name": "user2908112", "link": "https://stackoverflow.com/users/2908112/user2908112"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1474439649, "post_id": 39608893, "comment_id": 66525908, "body": "Ok, then it has to be something with the installation.."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1474441551, "post_id": 39608893, "comment_id": 66526953, "body": "Is this applicable to your platform?  <a href=\"http://stackoverflow.com/questions/3941271/why-are-malloc-and-printf-said-as-non-reentrant\" title=\"why are malloc and printf said as non reentrant\">stackoverflow.com/questions/3941271/&hellip;</a>"}, {"owner": {"reputation": 427, "user_id": 2908112, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d5eb4e000e5524094f4f8ac2f97074e5?s=128&d=identicon&r=PG&f=1", "display_name": "user2908112", "link": "https://stackoverflow.com/users/2908112/user2908112"}, "edited": false, "score": 0, "creation_date": 1474451388, "post_id": 39608893, "comment_id": 66533212, "body": "version 3.11.0 on Yosmite 10.10.5. Tried to install manually also, but same thing. On <a href=\"http://valgrind.org/downloads/current.html\" rel=\"nofollow noreferrer\">valgrind.org/downloads/current.html</a> it says (Mac OS X 10.10, with limited support for 10.11)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1474462903, "post_id": 39608893, "comment_id": 66540989, "body": "This looks to me like Helgrind doesn&#39;t understand the code inside the pthreads implementation.  Often, the implementation does things that would be wrong if you did them yourself, but the people who wrote the implementation know they can get away with it.  So this is not a symptom of a <i>corrupt</i> Valgrind, but of an incomplete port to OSX."}, {"owner": {"reputation": 427, "user_id": 2908112, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d5eb4e000e5524094f4f8ac2f97074e5?s=128&d=identicon&r=PG&f=1", "display_name": "user2908112", "link": "https://stackoverflow.com/users/2908112/user2908112"}, "edited": false, "score": 0, "creation_date": 1474467613, "post_id": 39608893, "comment_id": 66544493, "body": "Can buy that. But how can they live with themselves, not completing their work?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474511038, "post_id": 39608893, "comment_id": 66563735, "body": "Any call to <code>valgrind</code> should be parameterized to ignore problems found in the system functions as they have no effect on your program."}, {"owner": {"reputation": 427, "user_id": 2908112, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d5eb4e000e5524094f4f8ac2f97074e5?s=128&d=identicon&r=PG&f=1", "display_name": "user2908112", "link": "https://stackoverflow.com/users/2908112/user2908112"}, "edited": false, "score": 0, "creation_date": 1474561602, "post_id": 39608893, "comment_id": 66592024, "body": "How do I parameterize a call to valgrind?"}], "owner": {"reputation": 427, "user_id": 2908112, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d5eb4e000e5524094f4f8ac2f97074e5?s=128&d=identicon&r=PG&f=1", "display_name": "user2908112", "link": "https://stackoverflow.com/users/2908112/user2908112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474439041, "creation_date": 1474439041, "question_id": 39608893, "link": "https://stackoverflow.com/questions/39608893/corrupt-valgrind", "title": "Corrupt Valgrind?", "body": "<p>I have the following simple program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;errno.h&gt;\n\n#define handle_error_en(en, msg) \\\n    {do { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0);}\n#define status_check(stat) ((stat != 0) ? (handle_error_en(stat, \"status error\")) : ((void)0))\n\nstatic void* thread_start(void *arg)\n{\n    printf(\"%s\\n\", \"thread working..\");\n    sleep(1);\n    return NULL;\n}\n\nint main(int argc, char const *argv[])\n{\n    int status;\n    pthread_t thread;\n\n    status = pthread_create(&amp;thread,\n                        NULL,\n                        thread_start,\n                        NULL);\n    status_check(status);\n    status = pthread_join(thread, NULL);\n    status_check(status);\n    printf(\"%s\\n\", \"exit program..\");\n    return 0;\n}\n</code></pre>\n\n<p>When I run Valgind with </p>\n\n<pre><code>Valgrind --tool=helgrind ./threads_simple\n</code></pre>\n\n<p>I get 54 errors, all being data race errors. Just picking one of them:</p>\n\n<pre><code>Possible data race during write of size 4 at 0x1003FD2D8 by thread #1\n==17334== Locks held: none\n==17334==    at 0x1003E2FDF: spin_unlock (in /usr/lib/system/libsystem_platform.dylib)\n==17334==    by 0x1003F7EAF: pthread_join (in /usr/lib/system/libsystem_pthread.dylib)\n==17334==    by 0x100000E37: main (threads_simple.c:29)\n==17334== \n==17334== This conflicts with a previous write of size 4 by thread #2\n==17334== Locks held: none\n==17334==    at 0x1003E2FDF: spin_unlock (in /usr/lib/system/libsystem_platform.dylib)\n==17334==    by 0x1003F6FD6: _pthread_start (in /usr/lib/system/libsystem_pthread.dylib) \n==17334==    by 0x1003F43EC: thread_start (in /usr/lib/system/libsystem_pthread.dylib)\n==17334==  Address 0x1003fd2d8 is in the Data segment of /usr/lib/system/libsystem_pthread.dylib\n</code></pre>\n\n<p>I have written many more small thread-programms, all give errors like this. Is my Valgrind installation corrupt? I installed it on mac via brew.</p>\n"}, {"tags": ["c", "linux-kernel", "android-ndk", "linux-device-driver"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "edited": false, "score": 0, "creation_date": 1474440720, "post_id": 39609218, "comment_id": 66526468, "body": "So if in case I see a function undefined in nm of user space library, that means it is really undefined and its a mistake. Also when I build with static library, I don&#39;t get any undefined reference errors. Is it possible, that the app may not be using the functions that are undefined in the library, so these functions are stripped from executable?"}], "tags": [], "owner": {"reputation": 248, "user_id": 1730610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b56d04fb86c7247b7ede9f4c6d6b41?s=128&d=identicon&r=PG", "display_name": "Ming", "link": "https://stackoverflow.com/users/1730610/ming"}, "is_accepted": false, "score": 0, "last_activity_date": 1474440291, "creation_date": 1474440291, "answer_id": 39609218, "question_id": 39608595, "link": "https://stackoverflow.com/questions/39608595/can-a-function-called-in-ndk-c-app-defined-in-a-kernel-driver/39609218#39609218", "title": "Can a function called in NDK c app, defined in a kernel driver?", "body": "<p>Kernel and user space are two completely separate address spaces. So the short answer is NO :)</p>\n"}], "owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474440291, "creation_date": 1474437717, "last_edit_date": 1474438450, "question_id": 39608595, "link": "https://stackoverflow.com/questions/39608595/can-a-function-called-in-ndk-c-app-defined-in-a-kernel-driver", "title": "Can a function called in NDK c app, defined in a kernel driver?", "body": "<p>My problem is that I am trying to build a shared library using a static library.</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libRip\nLOCAL_SRC_FILES := src/Rip_api.cpp src/Rip_crypto.cpp\n\nLOCAL_CFLAGS := -DCLR_INTERAPTIV_I7 -DCLR_INTERAPTIV -v\n\n#only include corelockr and rip headers\nLOCAL_C_INCLUDES := $(LOCAL_PATH)/inc/ $(LOCAL_PATH)/include/  $(LOCAL_PATH)/../../hardware/libhardware/include/hardware/\n\nLOCAL_LDLIBS := -llog -L$(LOCAL_PATH)/library -lthisis_crypto -lthisis_interaptiv\nLOCAL_SHARED_LIBRARIES = libsmem.sastra\n#test seqr library\n#LOCAL_LDFLAGS := -v -L$(LOCAL_PATH)/library -lthisis_crypto  -lthisis_interaptiv\n\n#this option will build static library\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>Upon doing this I get some undefined reference errors </p>\n\n<pre><code>mmm -B path/to/test/app/android.mk\n</code></pre>\n\n<p>like this</p>\n\n<pre><code>I7_Embedded_SDK/corelockr/././src/request.c:494: undefined reference to `function'\n</code></pre>\n\n<p>upon doing nm I see this in this request.o file </p>\n\n<pre><code>request.o:\n         U function\n</code></pre>\n\n<p>I don't have the source of the main library thisis_crypto, and \nthisis_interaptive, but the wrapper library libRip.so is calling the functions in it. request.o is in library, thisis_interaptive.</p>\n\n<p>That means this function definition is not in the  library. Further I checked the kernel driver ipc.ko, that also is a part of all this work\nnm kernel_driver.ko</p>\n\n<pre><code>T function\n</code></pre>\n\n<p>that means it is defined here.</p>\n\n<p>1) Is it possible that the app I am trying to build, have some functions, that are using kernel driver. </p>\n\n<p>2) If its possible, how can I build the shared library?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "microblaze"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474561162, "post_id": 39608533, "comment_id": 66591755, "body": "you might want to read the manual: <code>http:&#47;&#47;www.xilinx.com&#47;support&#47;documentation&#47;sw_manuals&#47;xilin&zwnj;&#8203;x11&#47;mb_ref_guide.pdf</code> which discusses the possible interrupt sources, I suspect you should look at the <code>software break</code> interrupt and how it is initiated and the proper code for handling it."}, {"owner": {"reputation": 583, "user_id": 1902666, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/324ff7fb858ca9df3ebd043499c9d2bf?s=128&d=identicon&r=PG", "display_name": "Godspped", "link": "https://stackoverflow.com/users/1902666/godspped"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474675866, "post_id": 39608533, "comment_id": 66643849, "body": "I am using the INTC module and the fast interrupt method mentioned in there.  I have read this document, and thought of the software break, but I am confused as to why I cant get the software interrupt working as it is hinted everywhere in the INTC document that it should work."}], "owner": {"reputation": 583, "user_id": 1902666, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/324ff7fb858ca9df3ebd043499c9d2bf?s=128&d=identicon&r=PG", "display_name": "Godspped", "link": "https://stackoverflow.com/users/1902666/godspped"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474437383, "creation_date": 1474437383, "question_id": 39608533, "link": "https://stackoverflow.com/questions/39608533/software-interrupt-with-microblaze", "title": "Software interrupt with microblaze", "body": "<p>I am trying to get a software interrupt running in a microblaze but am hitting a complete road block.  So the xparameter.h file that gets generated by the Vivado design does not have any generated macros for the sw interrupts I enabled.</p>\n\n<p>So I started looking at hitting the interrupt module registers.  From the datasheet I can see that base_addr+0x0 is the ISR and base_addr+0x8 is the IER.  And then there is the IVAR.</p>\n\n<p>I have done the following in code.</p>\n\n<pre><code>void\nsoftware_test( void * args )\n{\n   uint32_t * isr = (uint32_t * ) XPAR_MICROBLAZE_0_AXI_INTC_BASEADDR;\n   isr[0xC/4] = 0x20;\n   xil_printf(\"software test\\r\\n\");\n}\n\nint init()\n{\n   uint32_t * isr = (uint32_t * ) XPAR_MICROBLAZE_0_AXI_INTC_BASEADDR;\n   isr[0x114/0x4] = (unsigned)&amp;software_test;\n\n   isr[0x8/0x4] |= 0xFFFFFFF0; /* trying to enable everything */\n}\n</code></pre>\n\n<p>And then to start the interrupt I am trying to hit ISR register</p>\n\n<pre><code>uint32_t * isr = (uint32_t * ) XPAR_MICROBLAZE_0_AXI_INTC_BASEADDR;\nisr[0x0/4] = 0x20;\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "pointers", "struct", "free"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1474435709, "post_id": 39608079, "comment_id": 66524269, "body": "Note that in <code>struct y</code>, you refer to a type <code>x</code> but, in C, that is not the type specified by <code>struct x</code>.  Only C++ defines the type <code>x</code> after you define <code>struct x</code>; C leaves the type <code>x</code> undefined until you use <code>typedef struct x x;</code>.  That means your code should not compile with a C compiler \u2014 but maybe you&#39;re using a C++ compiler to compile the code after all, despite the C tag.  (Maybe the compiler is the MS Visual Studio compiler, at that.)"}, {"owner": {"reputation": 123, "user_id": 5530737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07894e756d5afbbda04c6a4973b1f90e?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf Jama", "link": "https://stackoverflow.com/users/5530737/yusuf-jama"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1474435770, "post_id": 39608079, "comment_id": 66524293, "body": "you are correct....it&#39;s a c++ compiler in VS"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1474435792, "post_id": 39608079, "comment_id": 66524298, "body": "@JonathanLeffler C++ tag  removed by  Yu Hao."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1474435798, "post_id": 39608079, "comment_id": 66524301, "body": "The answers are &#39;yes&#39; and &#39;no&#39;; you need to free the inner allocated memory before freeing the outer (because you can&#39;t refer to the inner pointer via the outer after you&#39;ve freed the outer)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1474436013, "post_id": 39608079, "comment_id": 66524376, "body": "It gets tricky deciding what to do.  If it is C++ code, you shouldn&#39;t be using <code>malloc()</code> and <code>free()</code> \u2014 you use <code>new</code> and <code>delete</code> if you aren&#39;t using types that take care of memory allocation automatically.  If it is not C++ code, it doesn&#39;t compile.  If it is C++ code, the casts on the results from <code>malloc()</code> are necessary (assuming you use <code>malloc()</code> at all); if it is C, you don&#39;t need the casts, though they don&#39;t do much harm if you&#39;re careful.  Waaah!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474440399, "post_id": 39608079, "comment_id": 66526307, "body": "<code>x* foo;</code>...this compiles?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1474440415, "post_id": 39608079, "comment_id": 66526313, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5530737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07894e756d5afbbda04c6a4973b1f90e?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf Jama", "link": "https://stackoverflow.com/users/5530737/yusuf-jama"}, "edited": false, "score": 0, "creation_date": 1474435302, "post_id": 39608107, "comment_id": 66524137, "body": "i was maybe thinking that free was smart enough to see if any of its members had more allocated memory...thank you"}], "tags": [], "owner": {"reputation": 3977, "user_id": 3286661, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2111859aa05157fab64e52e795cc1034?s=128&d=identicon&r=PG&f=1", "display_name": "nishantsingh", "link": "https://stackoverflow.com/users/3286661/nishantsingh"}, "is_accepted": false, "score": 0, "last_activity_date": 1474435303, "last_edit_date": 1474435303, "creation_date": 1474435193, "answer_id": 39608107, "question_id": 39608079, "link": "https://stackoverflow.com/questions/39608079/free-a-dynamically-allocated-array-inside-another-dynamically-allocated-array/39608107#39608107", "title": "free a dynamically allocated array inside another dynamically allocated array", "body": "<p>The first malloc will just allocate space for holding the members of <code>y</code>. Deleting it only deletes that allocated space. It has nothing to do with what you allocate afterwards. So yes, your assumption is correct.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1474437727, "post_id": 39608518, "comment_id": 66525065, "body": "Additionally, If there is a possibility that a given <code>p</code> can remain unallocated in your collection of <code>real</code> and <code>x</code>&#39;s, you may want to protect your <code>free</code> with a check to insure <code>p</code> is not <code>NULL</code> (e.g. <code>if (p) free (p);</code>). (Jay, I know you know, this is for the questioner)"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1474440613, "post_id": 39608518, "comment_id": 66526416, "body": "This answer does seem to imply that anything with regards to a needed <code>free</code> would be different if using C++ - It isn&#39;t."}, {"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1474476998, "post_id": 39608518, "comment_id": 66550440, "body": "@DavidC.Rankin &amp; tofro, Hope I have addressed your comments in my recent edit. Thanks for your comments. : )"}], "tags": [], "owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1474476566, "last_edit_date": 1474476566, "creation_date": 1474437331, "answer_id": 39608518, "question_id": 39608079, "link": "https://stackoverflow.com/questions/39608079/free-a-dynamically-allocated-array-inside-another-dynamically-allocated-array/39608518#39608518", "title": "free a dynamically allocated array inside another dynamically allocated array", "body": "<p>You can follow this simple rule, every malloc call should have a corresponding free call, else consider the memory is not freed. The argument to free must be the value returned by corresponding malloc. Additionally, it is better to do a NULL check before passing the pointer to free.</p>\n\n<p>In your example, <code>struct real</code> has <code>struct x</code> as it's member and <code>struct x</code> in turn has <code>int *p</code> as it's member. In your real code, you will also have to allocate memory for <code>p</code> and also free the memory when your usage is done.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1474441287, "creation_date": 1474441287, "answer_id": 39609527, "question_id": 39608079, "link": "https://stackoverflow.com/questions/39608079/free-a-dynamically-allocated-array-inside-another-dynamically-allocated-array/39609527#39609527", "title": "free a dynamically allocated array inside another dynamically allocated array", "body": "<p>Just adding my two cents to elaborate on the <em>why</em> part.</p>\n\n<p>Let's state two concepts first.</p>\n\n<ol>\n<li><p>You need to <code>free()</code><em>each</em> memory allocated by memory allocator function to avoid memory leak.</p></li>\n<li><p>You need to pass the <em>exact</em> pointer returned by <code>malloc()</code> or family to <code>free()</code>. They do not have any <em>hierarchical</em>  information <em>stored</em> into them (Like, <em>\"member of the structure\"</em> kind, each allocation is individual).</p></li>\n</ol>\n\n<p>So, to <em>reach</em> the <em>inner</em> pointer member <code>foo</code>, you must access (dereference) the outer pointer <code>tmp</code>.</p>\n\n<p>Now, if you <code>free()</code> the outer pointer <code>tmp</code> first, afterwards, accessing that free-d memory is invalid invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>. So, you have no way to reach the <em>inner</em> pointer to call <code>free()</code> on it. It remains allocated and contributes to memory leak.</p>\n\n<p>That is why, you have to start freeing the memory <em>from inside out</em>.</p>\n"}], "owner": {"reputation": 123, "user_id": 5530737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07894e756d5afbbda04c6a4973b1f90e?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf Jama", "link": "https://stackoverflow.com/users/5530737/yusuf-jama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 39609527, "answer_count": 3, "score": 1, "last_activity_date": 1474698411, "creation_date": 1474435048, "last_edit_date": 1474698411, "question_id": 39608079, "link": "https://stackoverflow.com/questions/39608079/free-a-dynamically-allocated-array-inside-another-dynamically-allocated-array", "title": "free a dynamically allocated array inside another dynamically allocated array", "body": "<p>Say I had the following simple example</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\nstruct x {\n    int* p;\n};\n\ntypedef struct y {\n    x* foo;\n}real;\n\nvoid doSomething();\n\nint main() {\n    doSomething();\n    getchar();\n    return 0;\n}\n\nvoid doSomething() {\n   real* tmp = (real*)malloc(sizeof(real));\n   tmp-&gt;foo = (x*)malloc(sizeof(x));\n   free(tmp-&gt;foo);\n   free(tmp);\n}\n</code></pre>\n\n<p>Is it necessary to free the pointer I allocated inside before I free the \"outer\" allocated memory? </p>\n\n<p>would the second line take care of the first allocated memory...my assumption is no(it will still remain on the heap I assume and I would need to keep it this way).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6846, "user_id": 6554634, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/7IdZS.jpg?s=128&g=1", "display_name": "Mr_Perfect", "link": "https://stackoverflow.com/users/6554634/mr-perfect"}, "edited": false, "score": 1, "creation_date": 1474433310, "post_id": 39607745, "comment_id": 66523502, "body": "Could you please add the code?"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1474433553, "post_id": 39607745, "comment_id": 66523562, "body": "<code>printf(&quot;You get %d slice(s) each\\n&quot;, 8 &#47; number_of_people);</code>"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1474433627, "post_id": 39607745, "comment_id": 66523585, "body": "Put the code in the question, why would you post a link to a screenshot of your editor?"}, {"owner": {"reputation": 9, "user_id": 6684542, "user_type": "registered", "profile_image": "https://graph.facebook.com/1130836880305866/picture?type=large", "display_name": "Grayson Jackson", "link": "https://stackoverflow.com/users/6684542/grayson-jackson"}, "edited": false, "score": 0, "creation_date": 1474434156, "post_id": 39607745, "comment_id": 66523741, "body": "because apparently my formatting is incorrect and the editor wants me to add code to places"}], "answers": [{"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1474434513, "post_id": 39607926, "comment_id": 66523861, "body": "Note that if you had put the code in a code block on this page, I&#39;d have posted a <code>switch&#47;case</code> example, but I didn&#39;t [and few others would] want to type it all in by hand."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 2, "last_activity_date": 1474434973, "last_edit_date": 1474434973, "creation_date": 1474434160, "answer_id": 39607926, "question_id": 39607745, "link": "https://stackoverflow.com/questions/39607745/can-this-be-done-a-better-way/39607926#39607926", "title": "Can this be done a better way?", "body": "<p>How about a single line:</p>\n\n<pre><code>printf(\"You get %d slice(s) each\\n\",8 / number_of_people);\n</code></pre>\n\n<p>You don't get the \"one\" instead of \"1\", but I think the simplicity overrides that.</p>\n\n<p>In lieu of that, the entire <code>if/else</code> \"ladder\" can be replaced with <code>switch/case</code></p>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>fixed the issue I had with the editor, code is now in the post.</p>\n</blockquote>\n\n<p>Okay, here are both ways. I think the single line is still the best, but I've replaced the ladder with a <code>switch</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint calculate_pizza_share(int number_of_people);\n\nint\nmain()\n{\n\n    int num_of_people;\n\n    printf(\"how many people are shairng this pizza? \");\n    scanf(\"%d\", &amp;num_of_people);\n\n    calculate_pizza_share(num_of_people);\n\n    return 0;\n}\n\nint\ncalculate_pizza_share(int number_of_people)\n{\n\n#ifndef SWITCH\n    printf(\"You get %d slice(s) each\\n\", 8 / number_of_people);\n#else\n    switch (number_of_people) {\n    case 5:\n    case 6:\n    case 7:\n    case 8:\n        printf(\"You get one slice each\\n\");\n        break;\n    default:\n        printf(\"You get %d slice(s) each\\n\", 8 / number_of_people);\n        break;\n    }\n#endif\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 0, "last_activity_date": 1474439022, "creation_date": 1474439022, "answer_id": 39608884, "question_id": 39607745, "link": "https://stackoverflow.com/questions/39607745/can-this-be-done-a-better-way/39608884#39608884", "title": "Can this be done a better way?", "body": "<p>Sometimes the chain of <code>if/else if</code> is the right way to go, especially when generating English phrases involving numeric quantities. But look for ways to reduce the number of conditions. In this example, you really only have three (valid) conditions</p>\n\n<ul>\n<li>1 person: gets the whole pizza</li>\n<li>2,3, or 4 persons: integer math drops the fractional part of a division, so <code>8/number_of_people</code> will give the right answer for all of these</li>\n<li>5,6,7,8: integer division gives the correct answer, but the message is different, so treat these as a separate condition</li>\n</ul>\n\n<p>In addition, you should always assume that the user will type nonsense (when given the opportunity). So you need to check the return value from <code>scanf</code>, and be prepared to handle numbers that are less than 1 and greater than 8.</p>\n\n<p>With that in mind, here's what the code looks like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid calculate_pizza_share(int number_of_people)\n{\n    if (number_of_people &lt; 1)\n        printf(\"You need some people to eat that pizza\\n\");\n    else if (number_of_people == 1)\n        printf(\"You get the whole pizza\\n\");\n    else if (number_of_people &lt;= 4)\n        printf(\"You get %d slices each\\n\", 8 / number_of_people);\n    else if (number_of_people &lt;= 8)\n        printf(\"You get one slice each\\n\" );\n    else\n        printf(\"You need to order more pizza\\n\");\n}\n\nint main( void )\n{\n    int num_of_people;\n\n    printf(\"how many people are sharing this pizza? \");\n\n    if (scanf(\"%d\", &amp;num_of_people) != 1)\n        printf(\"Was hoping for a number between 1 and 8\\n\" );\n    else\n        calculate_pizza_share(num_of_people);\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6684542, "user_type": "registered", "profile_image": "https://graph.facebook.com/1130836880305866/picture?type=large", "display_name": "Grayson Jackson", "link": "https://stackoverflow.com/users/6684542/grayson-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1474440489, "answer_count": 2, "score": -5, "last_activity_date": 1474439022, "creation_date": 1474433210, "last_edit_date": 1474435078, "question_id": 39607745, "link": "https://stackoverflow.com/questions/39607745/can-this-be-done-a-better-way", "closed_reason": "Not suitable for this site", "title": "Can this be done a better way?", "body": "<p><a href=\"http://i.stack.imgur.com/KSMGp.png\" rel=\"nofollow\">Just playing around doing some exercises in visual studio, and I managed to make this work but I feel it can be done in a better way, without having to type something so many times. I was thinking maybe a for loop could do the job but cant get my head around it. Any ideas? </a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint calculate_pizza_share(int number_of_people);\n\nint main() {\n  int num_of_people;\n\n  printf(\"how many people are shairng this pizza? \");\n  scanf(\"%d\", &amp;num_of_people);\n\n  calculate_pizza_share(num_of_people);\n\n  return 0;\n}\n\nint calculate_pizza_share(int number_of_people) {\n  if (number_of_people == 1) {\n    printf(\"You get %d slice(s) each\\n\", 8 / number_of_people);\n  } else if (number_of_people == 2) {\n    printf(\"you get 4 slice(s) each\\n\");\n  } else if (number_of_people == 3) {\n    printf(\"you get 2 slice(s) each\\n\");\n  } else if (number_of_people == 4) {\n    printf(\"you get 2 slice(s) each\\n\");\n  } else if (number_of_people == 5) {\n    printf(\"you get one slice(s) each\\n\");\n  } else if (number_of_people == 6) {\n    printf(\"you get one slice(s) each\\n\");\n  } else if (number_of_people == 7) {\n    printf(\"you get one slice(s) each\\n\");\n  } else if (number_of_people == 8) {\n    printf(\"you get one slice(s) each\\n\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "void-pointers"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1474433543, "post_id": 39607734, "comment_id": 66523560, "body": "Forward declarations. Use them."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1474433780, "post_id": 39607734, "comment_id": 66523619, "body": "@n.m. Fair enough. Beyond that, are there any significant concerns with using pointer-to-parent-struct logic? Thank you."}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1474434034, "post_id": 39607734, "comment_id": 66523690, "body": "if you&#39;re trying to implement inheritance, make sure to align the parent pointer at 0th part of the struct so the offset would be 0"}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "edited": false, "score": 1, "creation_date": 1474434094, "post_id": 39607734, "comment_id": 66523708, "body": "In C, there&#39;s no such thing as <i>parent</i>.  Pointers point; you decide, based on what they point to, to call that thing a &quot;parent&quot;.  So your question becomes <i>concerns with using pointer-to-struct logic</i>, and I think you know the answer.  :-)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1474435661, "post_id": 39607734, "comment_id": 66524254, "body": "Consider smart pointers, std::{unique,shared,weak}_ptr."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1474440778, "post_id": 39607734, "comment_id": 66526503, "body": "@n.m. Note this question is tagged with &quot;C&quot;..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1474442391, "post_id": 39607734, "comment_id": 66527450, "body": "@tofro oops, forgot my readig glasses."}], "answers": [{"tags": [], "owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "is_accepted": true, "score": 2, "last_activity_date": 1474434092, "last_edit_date": 1474434092, "creation_date": 1474433918, "answer_id": 39607872, "question_id": 39607734, "link": "https://stackoverflow.com/questions/39607734/struct-with-pointer-to-parent-struct-best-approach/39607872#39607872", "title": "struct with pointer-to-parent-struct: best approach", "body": "<blockquote>\n  <p>I used void * pointers due to how complicated some structs are, and\n  they won't compile if I use actual pointer-to-struct-type in place of\n  void *.</p>\n</blockquote>\n\n<p>And what's wrong with forward declarations? </p>\n\n<pre><code>struct typeA; // forward declaration\n\nstruct typeB {\n    int B;\n    struct typeA *parent;\n};\n\nstruct typeC {\n    int C;\n    struct typeA *parent;\n};\n\nstruct typeA {\n    int a;\n    struct typeB *pB;\n    struct typeC *pC;\n};\n</code></pre>\n\n<p>As of your question: If you don't want/need to store paren as part of structure then you will need either </p>\n\n<p>a) to pass parent address as a parameter, indeed, or </p>\n\n<p>b) to define static variable like <code>struct typeA *current_parent;</code> and put there address of parent structure before calling any method operating with children. </p>\n\n<p>Last solution is not thread safe though and is error prone. </p>\n"}], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 0, "accepted_answer_id": 39607872, "answer_count": 1, "score": 1, "last_activity_date": 1474434092, "creation_date": 1474433091, "question_id": 39607734, "link": "https://stackoverflow.com/questions/39607734/struct-with-pointer-to-parent-struct-best-approach", "title": "struct with pointer-to-parent-struct: best approach", "body": "<p>I have a large number of separate types of data (ie: processes, files, threads, functions, etc) that are defined in short, simple <code>.c</code>/<code>.h</code> files. Once I finished the implementation of the individual pieces and concluded unit/code-coverage testing, I moved on to connecting the pieces together.</p>\n\n<p>The current implementation utilizes pointer-to-parent-<code>struct</code> via <code>(void *)</code> pointers in the code, ie:</p>\n\n<pre><code>struct typeB {\n    int B;\n    void *parent;\n};\n\nstruct typeC {\n    int C;\n    void *parent;\n};\n\nstruct typeA {\n    int a;\n    struct typeB *pB;\n    struct typeC *pC;\n};\n</code></pre>\n\n<p><strong>I used <code>void *</code> pointers due to how complicated some <code>struct</code>s are, and they won't compile if I use actual <code>pointer-to-struct-type</code> in place of <code>void *</code>.</strong></p>\n\n<p>There are a few functions where <code>typeB</code> and <code>typeC</code> need to talk to each other, but they are rare. Also, both of these <code>struct</code>s never need to know about <code>int a</code> in the <code>parent</code>. </p>\n\n<p>I could remove the <code>parent struct</code> pointers, and refactor my function prototypes/definitions to simple all accept <code>(struct typeA *)</code> as the argument, access the sub-structures, etc, but it seems overkill, as several functions just need to have access to <code>typeB</code>/<code>typeC</code> structures and their elements.</p>\n\n<p>Is there a de-facto (non-cargo-cult-programming) standard for handling such an organization of structs (similar to the \"don't cast <code>malloc()</code>\" rule I see repeated so often on this site)? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "memory", "permutation"], "comments": [{"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1474432749, "post_id": 39607614, "comment_id": 66523329, "body": "don&#39;t forget to free the allocated data at the end using <code>free()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474557470, "post_id": 39607614, "comment_id": 66589122, "body": "when compiling, always enable all the warnings, then fix those warnings that are output by the compiler.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic</code>  I also use: <code>-Wconversion </code>std=gnu99` )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474557872, "post_id": 39607614, "comment_id": 66589397, "body": "for ease of readability and understanding: 1) separate code blocks (for, if, else, while, do...while, switch, case, default) via a blank line 2) consistently indent the code.  never use tabs for indenting as every wordprocessor/editor has the tab stops/tab width set for personal preference.  Suggest using 4 spaces for each indent level as that is wide enough to be visible even with variable width fonts and still allows for many indent levels across the page"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474558093, "post_id": 39607614, "comment_id": 66589575, "body": "error messages &#39;should&#39; be sent to <code>stderr</code>, not <code>stdout</code> so when writing an error message, use: <code>fprintf( stderr, ........);</code> rather than <code>printf( ....... );</code>   When finding a problem with the command line arguments, output a <code>usage</code> statement, similar to: <code>fprintf( stderr, &quot;USAGE: %s &lt;argument&gt;&quot;, argv[0] );</code>  The current output does not tell the user anything about what the command line should be.   Never access beyond <code>argv[0]</code> without first checking <code>argc</code> to assure that such argument actually exists"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474558315, "post_id": 39607614, "comment_id": 66589733, "body": "when calling most system functions, for instance <code>malloc()</code>, always check the returned value to assure the function was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474558416, "post_id": 39607614, "comment_id": 66589793, "body": "the function: <code>strlen()</code> returns type: <code>size_t</code> not <code>int</code>, so the variable <code>length</code> should be declared as <code>size_t</code> not <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474558647, "post_id": 39607614, "comment_id": 66589973, "body": "regarding the code block beginning with: <code>for(int j = startIndex; j&lt;=endIndex; j++){</code>,  In C, indexes start at 0 and continue to <code>strlen(string) -</code>.   So the code will access beyond the end of the input string buffer, resulting in undefined behavior that can/will lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1474558826, "post_id": 39607614, "comment_id": 66590134, "body": "the function: <code>getPermutations()</code> does not return anything and the calls to that function do not use any returned value, so the signature for the function should be: ` void getPermutations(char *string)`"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "edited": false, "score": 0, "creation_date": 1474433112, "post_id": 39607722, "comment_id": 66523430, "body": "what else would I send to it?"}, {"owner": {"reputation": 33, "user_id": 6855194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7525efbd15b5751d34e99f2155237df0?s=128&d=identicon&r=PG&f=1", "display_name": "michalska7", "link": "https://stackoverflow.com/users/6855194/michalska7"}, "reply_to_user": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "edited": false, "score": 0, "creation_date": 1474433651, "post_id": 39607722, "comment_id": 66523589, "body": "@TylerJosephDominick You might give it an initial value for <code>startIndex</code>. Then everytime you call it you do it like so: <code>getPermutations(startIndex + 1, string);</code> I have no idea if that does what you want, but at least it wouldn&#39;t run forever. Have you used recursion before?"}, {"owner": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "edited": false, "score": 0, "creation_date": 1474433917, "post_id": 39607722, "comment_id": 66523652, "body": "I&#39;m in my 3rd semester as a computer science student, I know about recursion and I&#39;m pretty familiar with java programming but the class I&#39;m taking now is all in c programming and so I&#39;m pretty much lost with the whole memory allocation thing. Not to mention every time I ask my professor to look at my code he tells me to google and research the answer myself. Basically my assignment is to create a program in c that returns a list of permutations from a string argument."}], "tags": [], "owner": {"reputation": 33, "user_id": 6855194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7525efbd15b5751d34e99f2155237df0?s=128&d=identicon&r=PG&f=1", "display_name": "michalska7", "link": "https://stackoverflow.com/users/6855194/michalska7"}, "is_accepted": false, "score": 2, "last_activity_date": 1474432979, "creation_date": 1474432979, "answer_id": 39607722, "question_id": 39607614, "link": "https://stackoverflow.com/questions/39607614/segmentation-fault-core-dumped-allocating-memory/39607722#39607722", "title": "Segmentation fault (core dumped) allocating memory?", "body": "<p>Your issue is that <code>getPermutations</code> calls itself endlessly. You need to pass something extra to it so it can know when to stop. As is, it just calls itself over and over until you have a stack overflow.</p>\n\n<p>Also, you have <code>getPermutations</code> setup to return a <code>char**</code>, but then you never return anything. So that's odd too.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "edited": false, "score": 0, "creation_date": 1474434684, "post_id": 39607980, "comment_id": 66523935, "body": "@R Sahu I would make those changes but my assignment is as follows: &quot;Use C code to write a function (a part of an API) with the signature char **getPermutations(char *), which, when given a string, returns all the permutations of the input string.&quot;   I was simply attempting to print them one at a time to get started and hopefully see I was on the right track"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "edited": false, "score": 1, "creation_date": 1474435068, "post_id": 39607980, "comment_id": 66524056, "body": "@TylerJosephDominick, that will require some learning on your part. You have to figure out what is needed to allocate an array of pointers and how allocate memory for strings that those pointers point to. It&#39;s not hard but it can be error prone. Good luck."}, {"owner": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "edited": false, "score": 0, "creation_date": 1474435198, "post_id": 39607980, "comment_id": 66524104, "body": "@R Sahu Thank you, do you have any recommendations of good resources to find the information I&#39;m looking for? I feel completely lost."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "edited": false, "score": 0, "creation_date": 1474435546, "post_id": 39607980, "comment_id": 66524210, "body": "@TylerJosephDominick, <a href=\"http://stackoverflow.com/a/27883252/434551\">stackoverflow.com/a/27883252/434551</a> and <a href=\"http://stackoverflow.com/a/9857578/434551\">stackoverflow.com/a/9857578/434551</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1474434499, "creation_date": 1474434499, "answer_id": 39607980, "question_id": 39607614, "link": "https://stackoverflow.com/questions/39607614/segmentation-fault-core-dumped-allocating-memory/39607980#39607980", "title": "Segmentation fault (core dumped) allocating memory?", "body": "<p>My suggestions:</p>\n\n<ol>\n<li><p>Change the return type of the function to <code>void</code> since it does not return anything.</p></li>\n<li><p>Change the name of the function to <code>printPermutations</code> since it just prints the permutations.</p></li>\n<li><p>Provide a way to end the recursion. Pass <code>startIndex</code> as an argument.</p></li>\n<li><p>Pass the length of the string so you don't compute it every time the function is called recursively.</p></li>\n<li><p>Change the comparison operator to <code>&gt;=</code> to account for zero length strings.</p></li>\n</ol>\n\n<hr>\n\n<pre><code>void printPermutations(char *string, int startIndex, int length){\n   int endIndex = length - 1;\n\n   if(startIndex &gt;= endIndex){\n      printf(\"%s\\n\", string);\n   }else{\n      for(int j = startIndex; j&lt;=endIndex; j++){\n         swap((string + startIndex),(string + j));\n         printPermutations(string, startIndex+1, length);\n         swap((string+startIndex),(string+j));\n      }  \n   }    \n}\n</code></pre>\n\n<p>and call it with:</p>\n\n<pre><code>printPermutations(str, 0, strlen(str));\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6233278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117812081603088/picture?type=large", "display_name": "Tyler Joseph Dominick", "link": "https://stackoverflow.com/users/6233278/tyler-joseph-dominick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1474434499, "creation_date": 1474432424, "question_id": 39607614, "link": "https://stackoverflow.com/questions/39607614/segmentation-fault-core-dumped-allocating-memory", "title": "Segmentation fault (core dumped) allocating memory?", "body": "<p>Im getting the error \"Segmentation fault (core dumped)\" when I run this program. I am new to c programming so its probably something stupid but i cant figure it out. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nvoid swap(char *x, char *y){\n    char temp = *x;\n    *x=*y;\n    *y=temp;\n}\n\nchar** getPermutations(char *string){\n    int length = strlen(string);\n    int startIndex = 0;\n    int endIndex = length - 1;\n\n    if(startIndex == endIndex){\n            printf(\"%s\\n\", string);\n    }else{\n            for(int j = startIndex; j&lt;=endIndex; j++){\n                    swap((string + startIndex),(string + j));\n                    getPermutations(string);\n                    swap((string+startIndex),(string+j));\n            }  \n    }    \n}\n\nint main(int argc, char *argv[]){\n     if(argc&gt;2){\n            printf(\"\\nToo Many arguments\\n\");\n            exit(0);\n    }else{\n            printf(\"%s\",argv[1]);\n            char * str = malloc(strlen(argv[1]) + 1);\n            strcpy(str,argv[1]);\n            getPermutations(str);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 5384908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b3UPm.jpg?s=128&g=1", "display_name": "Eirik Fuller", "link": "https://stackoverflow.com/users/5384908/eirik-fuller"}, "is_accepted": false, "score": 1, "last_activity_date": 1474465771, "creation_date": 1474465771, "answer_id": 39618491, "question_id": 39607565, "link": "https://stackoverflow.com/questions/39607565/how-to-define-offsetof-macro-in-gdb/39618491#39618491", "title": "How to define offsetof() macro in GDB", "body": "<p>If you use python to define <code>offsetof</code>, you might begin with something like this:</p>\n\n<pre><code>import gdb\n\nclass offsetof(gdb.Command):\n\n    def invoke(self, args, from_tty):\n        value, name = args.split()\n        struct = gdb.parse_and_eval(value)\n        fields = { field.name: field for field in struct.type.fields() }   \n        gdb.write(\"{} offset: {} bits\\n\".format(name, fields[name].bitpos))\n\noffsetof(\"offsetof\", gdb.COMMAND_USER)\n</code></pre>\n\n<p>If you save that to a file, and insure that the directory where you save it is in <code>sys.path</code>, you can import it. For example, if you save it to your home directory, you might do something along these lines:</p>\n\n<pre><code>(gdb) pi\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; sys.path.insert(0, os.getenv('HOME'))\n&gt;&gt;&gt; import offsetof\n&gt;&gt;&gt;\n(gdb)\n</code></pre>\n\n<p>If your gdb has no <code>pi</code> command you can prepend <code>python</code> to each command following a <code>&gt;&gt;&gt;</code> prompt.</p>\n\n<p>If gdb imports <code>offsetof</code> with no complaint, you should then be able to invoke <code>offsetof</code> as a gdb command. As written it expects two arguments (space separated), a value, and a name. If the value is a struct with a field having the provided name, it will report the offset in bits (not bytes, because the underlying python code can handle bitfields).</p>\n\n<p>The code here can be improved. It has no real error handling beyond what it inherits from the code it calls, and as written it doesn't handle pointers.</p>\n\n<p><a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Types-In-Python.html\" rel=\"nofollow\">This page</a> describes some of the underlying code used in that example; the <code>target</code> method it mentions might provide the beginnings of handling pointers (or you can just dereference pointers in the values you pass in, i.e. you might specify <code>*this</code> rather than <code>this</code> as the first parameter). The section on <code>Type.fields()</code> mentions other attributes besides <code>bitpos</code> which might also be of interest if you want to report other details about struct layout.</p>\n"}, {"comments": [{"owner": {"reputation": 226, "user_id": 587396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25b729764c1d24d94246e3243865b2a2?s=128&d=identicon&r=PG", "display_name": "Vladim&#237;r \u010cun&#225;t", "link": "https://stackoverflow.com/users/587396/vladim%c3%adr-%c4%8cun%c3%a1t"}, "edited": false, "score": 0, "creation_date": 1612863403, "post_id": 39663128, "comment_id": 116892738, "body": "What you wrote returns a pointer but the original macro returns an integer.  That can break the expressions people use, but fortunately it&#39;s easy to fix that, e.g. <code>macro define offsetof(t, f) (size_t)&amp;((t *) 0)-&gt;f</code>"}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": true, "score": 15, "last_activity_date": 1562002034, "last_edit_date": 1562002034, "creation_date": 1474640463, "answer_id": 39663128, "question_id": 39607565, "link": "https://stackoverflow.com/questions/39607565/how-to-define-offsetof-macro-in-gdb/39663128#39663128", "title": "How to define offsetof() macro in GDB", "body": "<p>Rather than define <code>offsetof</code> as a command, I think it's better to define it as a function.  That way you can use it in expressions; and if you just want to see the offset you can always just use <code>print</code>.</p>\n\n<p>There are two ways to define <code>offsetof</code> as a function.</p>\n\n<p>If you are debugging C or C++, you can simply define it as a macro:</p>\n\n<pre><code>(gdb) macro define offsetof(t, f) &amp;((t *) 0)-&gt;f\n</code></pre>\n\n<p>So given:</p>\n\n<pre><code>struct x {\n  int a;\n  long b;\n};\n</code></pre>\n\n<p>On my machine I get:</p>\n\n<pre><code>(gdb) p offsetof(struct x, a)\n$1 = (int *) 0x0\n(gdb) p offsetof(struct x, b)\n$2 = (long *) 0x8\n</code></pre>\n\n<p>The reason for the \"C or C++\" restriction above is that other languages don't run their expressions through gdb's built-in preprocessor.</p>\n\n<p>If you want it to work in other languages, then the answer is to write a new convenience function in Python.  This is a bit more involved, but see the gdb documentation for <code>gdb.Function</code>.</p>\n"}], "owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3775, "favorite_count": 2, "accepted_answer_id": 39663128, "answer_count": 2, "score": 10, "last_activity_date": 1562002034, "creation_date": 1474432094, "last_edit_date": 1556495508, "question_id": 39607565, "link": "https://stackoverflow.com/questions/39607565/how-to-define-offsetof-macro-in-gdb", "title": "How to define offsetof() macro in GDB", "body": "<p>I want to define some auxiliary marcos in GDB for convenience, one of them is the <code>offsetof()</code> macro. </p>\n\n<p>I tried</p>\n\n<pre><code>define offsetof\n    if $argc == 2\n        (int)(&amp;((($arg0 *)0)-&gt;$arg1))\n    end\nend\n</code></pre>\n\n<p>It doesn't work because:</p>\n\n<ol>\n<li>A type such as <code>struct node</code> will be splitted into <code>Struct</code> and <code>node</code>, so <code>$arg0 = Struct</code>, <code>$arg1 = node</code>.</li>\n<li>I am not sure if gdb's command can return a value.</li>\n</ol>\n\n<p>Can anyone give me a hand?</p>\n"}, {"tags": ["c", "binary", "twos-complement", "negation"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474430823, "post_id": 39607339, "comment_id": 66522867, "body": "Start <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474431314, "post_id": 39607441, "comment_id": 66522983, "body": "I don&#39;t think the OP is saying that <code>~0</code> is the two&#39;s complement of <code>0</code>. OP is asking what the decimal value of <code>~0</code> is in a two&#39;s complement system."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474432567, "post_id": 39607441, "comment_id": 66523279, "body": "I have answered that question too. If you frame the two&#39;s complement as <code>-0</code> then it becomes clearer that it is actually 0."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474432790, "post_id": 39607441, "comment_id": 66523336, "body": "So are you saying that <code>~0</code> is the same as <code>0</code>? The question is not what the value of <code>-0</code> (minus zero) is but what the value of <code>~0</code> (bit wise not of zero) is."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": -1, "last_activity_date": 1474431191, "creation_date": 1474431191, "answer_id": 39607441, "question_id": 39607339, "link": "https://stackoverflow.com/questions/39607339/twos-complement-0-signed/39607441#39607441", "title": "Twos Complement ~0 signed", "body": "<p><code>~0</code> is not the two's complement of zero. It is the bit inversion of 0, which is the same as the one's complement. </p>\n\n<p>If you want the two's complement in C, you will need <code>-0</code> (note the minus sign)\nAnd, <code>-0</code> would just be 0.</p>\n\n<pre><code>Proof (in eight bit)\nzero             - 0b00000000\none'e complement - 0b11111111\nAdd one          - 0b00000001  (ignoring overflow)\n                   -----------\nTwo's complement - 0b00000000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 3, "last_activity_date": 1474474510, "last_edit_date": 1474474510, "creation_date": 1474432565, "answer_id": 39607636, "question_id": 39607339, "link": "https://stackoverflow.com/questions/39607339/twos-complement-0-signed/39607636#39607636", "title": "Twos Complement ~0 signed", "body": "<p><code>0</code> is a signed <code>int</code> (if you wanted it to be unsigned, you'd write <code>0U</code>) and therefore <code>~0</code> is also a signed <code>int</code>.</p>\n\n<p>If your machine uses a 2's-complement representation, then that will have the value -1. The vast majority of machines -- possibly all the machines you will ever see in your career -- are 2's-complement, but technically speaking, <code>~0</code> may invoke undefined behaviour if you use it on a machine which uses 1's-complement representation of signed integers and which also prohibits negative zeros.</p>\n\n<p>Even if it may not matter, it's a good idea to get into the habit of only using unsigned integer types with bitwise operators. </p>\n\n<p>Remember that the bitwise operators perform \"the integer promotions\" on their operands, which means that signed and unsigned <code>short</code> and <code>char</code> are automatically promoted to <code>int</code> -- <em>not</em> <code>unsigned int</code> (unless it happens that <code>short</code> is the same width as <code>int</code>) -- so an explicit cast to <code>unsigned</code> may be necessary.</p>\n"}], "owner": {"reputation": 21, "user_id": 6856425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678cb47b1749b9217625c45ad5ec0493?s=128&d=identicon&r=PG&f=1", "display_name": "Z. H.", "link": "https://stackoverflow.com/users/6856425/z-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1474474510, "creation_date": 1474430529, "question_id": 39607339, "link": "https://stackoverflow.com/questions/39607339/twos-complement-0-signed", "title": "Twos Complement ~0 signed", "body": "<p>I'm new here but I was just wondering what ~0 would be if in the two's complement system, signed integer. </p>\n\n<p>Is it -1 because the flipping of 0 is 1, but if it's signed the answer would be -1? Or is the answer just 1 and just because I'm working with signed numbers doesn't mean that it would be -1?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1474453815, "post_id": 39607340, "comment_id": 66534827, "body": "Note that <code>%d</code> is incorrect type specifier for <code>size_t</code> that <code>sizeof</code> returns. Use <code>%zu</code> instead, or cast the argument to type that matches the type specifier."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1474468299, "post_id": 39607340, "comment_id": 66544983, "body": "<code>sizeof(uint32_t) * CHAR_BIT</code> is more portable and self-documenting.  OTOH <code>CHAR_BIT == 8</code> is very common."}], "tags": [], "owner": {"reputation": 36, "user_id": 6856420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3296eea0ac3ab54059858fb6d5cf?s=128&d=identicon&r=PG&f=1", "display_name": "gregoire", "link": "https://stackoverflow.com/users/6856420/gregoire"}, "is_accepted": true, "score": 2, "last_activity_date": 1474430533, "creation_date": 1474430533, "answer_id": 39607340, "question_id": 39607299, "link": "https://stackoverflow.com/questions/39607299/removing-left-shift-count-width-of-type-warning/39607340#39607340", "title": "removing left shift count &gt;= width of type warning", "body": "<p>Sizeof returns the size in bytes. You should try this:</p>\n\n<pre><code>printf(\"%d\\n\", sizeof(uint32_t));\n</code></pre>\n\n<p>You'll probably find that it's 4, not 32. If you want the size in bits, you can multiply by 8: <code>sizeof(uint32_t) * 8</code></p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474468372, "post_id": 39607342, "comment_id": 66545036, "body": "<code>sizeof(uint32_t)</code> is type <code>size_t</code> so <code>sizeof(uint32_t)-8</code> results in a very large unsigned number.  That is why &quot;left shift count <b>&gt;=</b> width of type&quot;"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474518682, "post_id": 39607342, "comment_id": 66565588, "body": "The right side of a bitwise operator is an additive-expression (6.5.7 of c11). It can be negative, but if it is negative the result is undefined. So, integer promotions will occur on sizeof(uint32_t) and it will become signed int and the result will be signed int. The result of the shift expression will be undefined."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1474536075, "post_id": 39607342, "comment_id": 66574338, "body": "If <code>sizeof(size_t) &lt; sizeof(int)</code>, then the result of subtraction will be negative signed integer. If <code>sizeof(size_t) &gt;= sizeof(int)</code>, then result is large unsigned integer. Either way, result is outside of allowed range of right bitshift operand (0 .. 31), and behaviour is undefined."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1474545491, "post_id": 39607342, "comment_id": 66580561, "body": "@user694733   The result of <code>sizeof(size_t) - sizeof(int)</code> is type <code>size_t</code>.  <code>size_t</code> is some unsigned type, not a signed integer.  The result cannot be negative."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474550383, "post_id": 39607342, "comment_id": 66584023, "body": "@chux That is not what I said. There is no substraction <code>sizeof(size_t) - sizeof(int)</code>. Only subtraction <code>sizeof(uint32_t)-8</code> which has types <code>size_t - int</code>. If we are on a machine where <code>sizeof(size_t) &lt; sizeof(int)</code> then result of <code>sizeof(uint32_t)</code> is promoted to <code>int</code> before subtraction, and substraction result can then be negative. Now considering the error message the OP got, this is <i>not</i> such machine, but such system can still exist."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1474551772, "post_id": 39607342, "comment_id": 66584975, "body": "@user694733 Agree with your analysis.  Now to find an example where <code>sizeof(size_t) &lt; sizeof(int)</code>, a 32-bit processor with 64k memory?"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1474600648, "post_id": 39607342, "comment_id": 66607120, "body": "in the example given in OP&#39;s question we are performing sizeof(uint32_t) -8. From the information in the question, we can guess that sizeof(uint32_t) is 4 and when we do 4-8 we get -4. (a signed number) as sizeof(uint32_t) will become signed int due to integer promotions."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 1, "last_activity_date": 1474430542, "creation_date": 1474430542, "answer_id": 39607342, "question_id": 39607299, "link": "https://stackoverflow.com/questions/39607299/removing-left-shift-count-width-of-type-warning/39607342#39607342", "title": "removing left shift count &gt;= width of type warning", "body": "<p><code>sizeof(uint32_t)</code> is 4 in your system, so the first code gets the right operand as (4-8) which is a negative number, hence the warning.</p>\n\n<p>In the second code it is a positive number, so no warning.</p>\n"}], "owner": {"reputation": 4733, "user_id": 922445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a469120d35647d9aa50646cb4d778c71?s=128&d=identicon&r=PG&f=1", "display_name": "Nulik", "link": "https://stackoverflow.com/users/922445/nulik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 39607340, "answer_count": 2, "score": 1, "last_activity_date": 1474430542, "creation_date": 1474430268, "question_id": 39607299, "link": "https://stackoverflow.com/questions/39607299/removing-left-shift-count-width-of-type-warning", "title": "removing left shift count &gt;= width of type warning", "body": "<p>Why does this code generates a warning :</p>\n\n<pre><code>niko: snippets $ cat leftshift.c \n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void) {\n\n    uint32_t var1;\n    uint32_t var2;\n\n    var1=55;\n    var2=var1 &lt;&lt; (sizeof(uint32_t)-8);\n\n    printf(\"%d\\n\",var2);\n}\nniko: snippets $ gcc -g -Wl,--warn-common -ffunction-sections -fshort-enums -fdata-sections -Wall -Wextra -Wunreachable-code -Wmissing-prototypes -Wmissing-declarations -Wunused -Winline -Wstrict-prototypes -Wimplicit-function-declaration -Wformat  -D_GNU_SOURCE -fshort-enums -std=c99  -c leftshift.c \nleftshift.c: In function \u2018main\u2019:\nleftshift.c:10:12: warning: left shift count &gt;= width of type [-Wshift-count-overflow]\n  var2=var1 &lt;&lt; (sizeof(uint32_t)-8);\n            ^\nniko: snippets $ \n</code></pre>\n\n<p>While this same code does not:</p>\n\n<pre><code>niko: snippets $ cat leftshift.c \n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void) {\n\n    uint32_t var1;\n    uint32_t var2;\n\n    var1=55;\n    var2=var1 &lt;&lt; (32-8);\n\n    printf(\"%d\\n\",var2);\n}\nniko: snippets $ gcc -g -Wl,--warn-common -ffunction-sections -fshort-enums -fdata-sections -Wall -Wextra -Wunreachable-code -Wmissing-prototypes -Wmissing-declarations -Wunused -Winline -Wstrict-prototypes -Wimplicit-function-declaration -Wformat  -D_GNU_SOURCE -fshort-enums -std=c99  -c leftshift.c \nniko: snippets $ \n</code></pre>\n\n<p>Is there something wrong with GCC ? Because size of uint32_t is 32 bits or isn't it?</p>\n"}, {"tags": ["android", "c", "android-ndk", "polarssl"], "comments": [{"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1474430387, "post_id": 39607186, "comment_id": 66522770, "body": "What is the crash?"}, {"owner": {"reputation": 169, "user_id": 6331723, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74e7682a8c3d896702dfb64575cdd992?s=128&d=identicon&r=PG&f=1", "display_name": "Zijian", "link": "https://stackoverflow.com/users/6331723/zijian"}, "reply_to_user": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1474433572, "post_id": 39607186, "comment_id": 66523570, "body": "ndk crash  signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x7b65"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1474443577, "post_id": 39607186, "comment_id": 66528188, "body": "Put complete crash log here. (Look for <code>DEBUG</code> logcat tag)."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6331723, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74e7682a8c3d896702dfb64575cdd992?s=128&d=identicon&r=PG&f=1", "display_name": "Zijian", "link": "https://stackoverflow.com/users/6331723/zijian"}, "edited": false, "score": 0, "creation_date": 1474439114, "post_id": 39608794, "comment_id": 66525650, "body": "Yes, and I can also add support with arm64-v8, and it solves the problem too."}], "tags": [], "owner": {"reputation": 1039, "user_id": 844520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ddd01643da7f1358795bd976e3c3e5?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/844520/paul"}, "is_accepted": true, "score": 1, "last_activity_date": 1474438668, "creation_date": 1474438668, "answer_id": 39608794, "question_id": 39607186, "link": "https://stackoverflow.com/questions/39607186/polarssl-bignum-c-will-cause-crash-in-android-5-0-and-above-while-using-jni/39608794#39608794", "title": "PolarSSl bignum.c will cause crash in Android 5.0 and above while using JNI", "body": "<p>Simple solution:\nRemove / disable <code>POLARSSL_HAVE_ASM</code> from your configuration, as it makes <code>mpi_mul_hlp()</code> behave with only C code an no assembly optimizations.</p>\n"}], "owner": {"reputation": 169, "user_id": 6331723, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74e7682a8c3d896702dfb64575cdd992?s=128&d=identicon&r=PG&f=1", "display_name": "Zijian", "link": "https://stackoverflow.com/users/6331723/zijian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 39608794, "answer_count": 1, "score": 0, "last_activity_date": 1474438668, "creation_date": 1474429481, "question_id": 39607186, "link": "https://stackoverflow.com/questions/39607186/polarssl-bignum-c-will-cause-crash-in-android-5-0-and-above-while-using-jni", "title": "PolarSSl bignum.c will cause crash in Android 5.0 and above while using JNI", "body": "<p>I use PolorSSL in my ndk project. However, when I run mpi_self_test(), it causes crash in Android 5.0 and above.</p>\n\n<pre><code>int mpi_self_test( int verbose )\n{\nint ret, i;\nmpi A, E, N, X, Y, U, V;\n\nmpi_init( &amp;A ); mpi_init( &amp;E ); mpi_init( &amp;N ); mpi_init( &amp;X );\nmpi_init( &amp;Y ); mpi_init( &amp;U ); mpi_init( &amp;V );\n\nMPI_CHK( mpi_read_string( &amp;A, 16,\n    \"EFE021C2645FD1DC586E69184AF4A31E\" \\\n    \"D5F53E93B5F123FA41680867BA110131\" \\\n    \"944FE7952E2517337780CB0DB80E61AA\" \\\n    \"E7C8DDC6C5C6AADEB34EB38A2F40D5E6\" ) );\n\nMPI_CHK( mpi_read_string( &amp;E, 16,\n    \"B2E7EFD37075B9F03FF989C7C5051C20\" \\\n    \"34D2A323810251127E7BF8625A4F49A5\" \\\n    \"F3E27F4DA8BD59C47D6DAABA4C8127BD\" \\\n    \"5B5C25763222FEFCCFC38B832366C29E\" ) );\n\nMPI_CHK( mpi_read_string( &amp;N, 16,\n    \"0066A198186C18C10B2F5ED9B522752A\" \\\n    \"9830B69916E535C8F047518A889A43A5\" \\\n    \"94B6BED27A168D31D4A52F88925AA8F5\" ) );\n\nMPI_CHK( mpi_mul_mpi( &amp;X, &amp;A, &amp;N ) );\n\nMPI_CHK( mpi_read_string( &amp;U, 16,\n    \"602AB7ECA597A3D6B56FF9829A5E8B85\" \\\n    \"9E857EA95A03512E2BAE7391688D264A\" \\\n    \"A5663B0341DB9CCFD2C4C5F421FEC814\" \\\n    \"8001B72E848A38CAE1C65F78E56ABDEF\" \\\n    \"E12D3C039B8A02D6BE593F0BBBDA56F1\" \\\n    \"ECF677152EF804370C1A305CAF3B5BF1\" \\\n    \"30879B56C61DE584A0F53A2447A51E\" ) );\n\nif( verbose != 0 )\n    polarssl_printf( \"  MPI test #1 (mul_mpi): \" );\n\nif( mpi_cmp_mpi( &amp;X, &amp;U ) != 0 )\n{\n    if( verbose != 0 )\n        polarssl_printf( \"failed\\n\" );\n\n    ret = 1;\n    goto cleanup;\n}\n\nif( verbose != 0 )\n    polarssl_printf( \"passed\\n\" );\n\nMPI_CHK( mpi_div_mpi( &amp;X, &amp;Y, &amp;A, &amp;N ) );\n\nMPI_CHK( mpi_read_string( &amp;U, 16,\n    \"256567336059E52CAE22925474705F39A94\" ) );\n\nMPI_CHK( mpi_read_string( &amp;V, 16,\n    \"6613F26162223DF488E9CD48CC132C7A\" \\\n    \"0AC93C701B001B092E4E5B9F73BCD27B\" \\\n    \"9EE50D0657C77F374E903CDFA4C642\" ) );\n\nif( verbose != 0 )\n    polarssl_printf( \"  MPI test #2 (div_mpi): \" );\n\nif( mpi_cmp_mpi( &amp;X, &amp;U ) != 0 ||\n    mpi_cmp_mpi( &amp;Y, &amp;V ) != 0 )\n{\n    if( verbose != 0 )\n        polarssl_printf( \"failed\\n\" );\n\n    ret = 1;\n    goto cleanup;\n}\n\nif( verbose != 0 )\n    polarssl_printf( \"passed\\n\" );\n\nMPI_CHK( mpi_exp_mod( &amp;X, &amp;A, &amp;E, &amp;N, NULL ) );\n\nMPI_CHK( mpi_read_string( &amp;U, 16,\n    \"36E139AEA55215609D2816998ED020BB\" \\\n    \"BD96C37890F65171D948E9BC7CBAA4D9\" \\\n    \"325D24D6A3C12710F10A09FA08AB87\" ) );\n\nif( verbose != 0 )\n    polarssl_printf( \"  MPI test #3 (exp_mod): \" );\n\nif( mpi_cmp_mpi( &amp;X, &amp;U ) != 0 )\n{\n    if( verbose != 0 )\n        polarssl_printf( \"failed\\n\" );\n\n    ret = 1;\n    goto cleanup;\n}\n\nif( verbose != 0 )\n    polarssl_printf( \"passed\\n\" );\n\nMPI_CHK( mpi_inv_mod( &amp;X, &amp;A, &amp;N ) );\n\nMPI_CHK( mpi_read_string( &amp;U, 16,\n    \"003A0AAEDD7E784FC07D8F9EC6E3BFD5\" \\\n    \"C3DBA76456363A10869622EAC2DD84EC\" \\\n    \"C5B8A74DAC4D09E03B5E0BE779F2DF61\" ) );\n\nif( verbose != 0 )\n    polarssl_printf( \"  MPI test #4 (inv_mod): \" );\n\nif( mpi_cmp_mpi( &amp;X, &amp;U ) != 0 )\n{\n    if( verbose != 0 )\n        polarssl_printf( \"failed\\n\" );\n\n    ret = 1;\n    goto cleanup;\n}\n\nif( verbose != 0 )\n    polarssl_printf( \"passed\\n\" );\n\nif( verbose != 0 )\n    polarssl_printf( \"  MPI test #5 (simple gcd): \" );\n\nfor( i = 0; i &lt; GCD_PAIR_COUNT; i++ )\n{\n    MPI_CHK( mpi_lset( &amp;X, gcd_pairs[i][0] ) );\n    MPI_CHK( mpi_lset( &amp;Y, gcd_pairs[i][1] ) );\n\n    MPI_CHK( mpi_gcd( &amp;A, &amp;X, &amp;Y ) );\n\n    if( mpi_cmp_int( &amp;A, gcd_pairs[i][2] ) != 0 )\n    {\n        if( verbose != 0 )\n            polarssl_printf( \"failed at %d\\n\", i );\n\n        ret = 1;\n        goto cleanup;\n    }\n}\n\nif( verbose != 0 )\n    polarssl_printf( \"passed\\n\" );\n\ncleanup:\n\nif( ret != 0 &amp;&amp; verbose != 0 )\n    polarssl_printf( \"Unexpected error, return code = %08X\\n\", ret );\n\nmpi_free( &amp;A ); mpi_free( &amp;E ); mpi_free( &amp;N ); mpi_free( &amp;X );\nmpi_free( &amp;Y ); mpi_free( &amp;U ); mpi_free( &amp;V );\n\nif( verbose != 0 )\n    polarssl_printf( \"\\n\" );\n\nreturn( ret );\n}\n</code></pre>\n\n<p>And I find the problem is in the mpi_function, like mpi_mul_hlp()</p>\n\n<pre><code>void mpi_mul_hlp( size_t i, t_uint *s, t_uint *d, t_uint b )\n{\nt_uint c = 0, t = 0;\n\n#if defined(MULADDC_HUIT)\nfor( ; i &gt;= 8; i -= 8 )\n{\n    MULADDC_INIT\n    MULADDC_HUIT\n    MULADDC_STOP\n}\n\nfor( ; i &gt; 0; i-- )\n{\n    MULADDC_INIT\n    MULADDC_CORE\n    MULADDC_STOP\n}\n#else /* MULADDC_HUIT */\nfor( ; i &gt;= 16; i -= 16 )\n{\n    MULADDC_INIT\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_STOP\n}\n\nfor( ; i &gt;= 8; i -= 8 )\n{\n    MULADDC_INIT\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_CORE   MULADDC_CORE\n    MULADDC_STOP\n}\n\nfor( ; i &gt; 0; i-- )\n{\n    MULADDC_INIT\n    MULADDC_CORE\n    MULADDC_STOP\n}\n#endif /* MULADDC_HUIT */\n\nt++;\n\ndo {\n    *d += c; c = ( *d &lt; c ); d++;\n}\nwhile( c != 0 );\n}\n</code></pre>\n\n<p>I find it is asm code difined in bn_mul.h.</p>\n\n<pre><code> /*\n     *      Multiply source vector [s] with b, add result\n     *       to destination vector [d] and set carry c.\n     *\n     *      Currently supports:\n     *\n     *         . IA-32 (386+)         . AMD64 / EM64T\n     *         . IA-32 (SSE2)         . Motorola 68000\n     *         . PowerPC, 32-bit      . MicroBlaze\n     *         . PowerPC, 64-bit      . TriCore\n     *         . SPARC v8             . ARM v3+\n     *         . Alpha                . MIPS32\n     *         . C, longlong          . C, generic\n     */\n    #ifndef POLARSSL_BN_MUL_H\n    #define POLARSSL_BN_MUL_H\n\n    #include \"BigNum.h\"\n\n    #if defined(POLARSSL_HAVE_ASM)\n\n    #if defined(__GNUC__)\n    #if defined(__i386__)\n\n    #define MULADDC_INIT                \\\n    asm( \"                          \\\n        movl   %%ebx, %0;           \\\n        movl   %5, %%esi;           \\\n        movl   %6, %%edi;           \\\n        movl   %7, %%ecx;           \\\n        movl   %8, %%ebx;           \\\n        \"\n\n    #define MULADDC_CORE                \\\n        \"                           \\\n        lodsl;                      \\\n        mull   %%ebx;               \\\n        addl   %%ecx,   %%eax;      \\\n        adcl   $0,      %%edx;      \\\n        addl   (%%edi), %%eax;      \\\n        adcl   $0,      %%edx;      \\\n        movl   %%edx,   %%ecx;      \\\n        stosl;                      \\\n        \"\n\n    #if defined(POLARSSL_HAVE_SSE2)\n\n    #define MULADDC_HUIT                    \\\n        \"                               \\\n        movd     %%ecx,     %%mm1;      \\\n        movd     %%ebx,     %%mm0;      \\\n        movd     (%%edi),   %%mm3;      \\\n        paddq    %%mm3,     %%mm1;      \\\n        movd     (%%esi),   %%mm2;      \\\n        pmuludq  %%mm0,     %%mm2;      \\\n        movd     4(%%esi),  %%mm4;      \\\n        pmuludq  %%mm0,     %%mm4;      \\\n        movd     8(%%esi),  %%mm6;      \\\n        pmuludq  %%mm0,     %%mm6;      \\\n        movd     12(%%esi), %%mm7;      \\\n        pmuludq  %%mm0,     %%mm7;      \\\n        paddq    %%mm2,     %%mm1;      \\\n        movd     4(%%edi),  %%mm3;      \\\n        paddq    %%mm4,     %%mm3;      \\\n        movd     8(%%edi),  %%mm5;      \\\n        paddq    %%mm6,     %%mm5;      \\\n        movd     12(%%edi), %%mm4;      \\\n        paddq    %%mm4,     %%mm7;      \\\n        movd     %%mm1,     (%%edi);    \\\n        movd     16(%%esi), %%mm2;      \\\n        pmuludq  %%mm0,     %%mm2;      \\\n        psrlq    $32,       %%mm1;      \\\n        movd     20(%%esi), %%mm4;      \\\n        pmuludq  %%mm0,     %%mm4;      \\\n        paddq    %%mm3,     %%mm1;      \\\n        movd     24(%%esi), %%mm6;      \\\n        pmuludq  %%mm0,     %%mm6;      \\\n        movd     %%mm1,     4(%%edi);   \\\n        psrlq    $32,       %%mm1;      \\\n        movd     28(%%esi), %%mm3;      \\\n        pmuludq  %%mm0,     %%mm3;      \\\n        paddq    %%mm5,     %%mm1;      \\\n        movd     16(%%edi), %%mm5;      \\\n        paddq    %%mm5,     %%mm2;      \\\n        movd     %%mm1,     8(%%edi);   \\\n        psrlq    $32,       %%mm1;      \\\n        paddq    %%mm7,     %%mm1;      \\\n        movd     20(%%edi), %%mm5;      \\\n        paddq    %%mm5,     %%mm4;      \\\n        movd     %%mm1,     12(%%edi);  \\\n        psrlq    $32,       %%mm1;      \\\n        paddq    %%mm2,     %%mm1;      \\\n        movd     24(%%edi), %%mm5;      \\\n        paddq    %%mm5,     %%mm6;      \\\n        movd     %%mm1,     16(%%edi);  \\\n        psrlq    $32,       %%mm1;      \\\n        paddq    %%mm4,     %%mm1;      \\\n        movd     28(%%edi), %%mm5;      \\\n        paddq    %%mm5,     %%mm3;      \\\n        movd     %%mm1,     20(%%edi);  \\\n        psrlq    $32,       %%mm1;      \\\n        paddq    %%mm6,     %%mm1;      \\\n        movd     %%mm1,     24(%%edi);  \\\n        psrlq    $32,       %%mm1;      \\\n        paddq    %%mm3,     %%mm1;      \\\n        movd     %%mm1,     28(%%edi);  \\\n        addl     $32,       %%edi;      \\\n        addl     $32,       %%esi;      \\\n        psrlq    $32,       %%mm1;      \\\n        movd     %%mm1,     %%ecx;      \\\n        \"\n\n    #define MULADDC_STOP            \\\n        \"                       \\\n        emms;                   \\\n        movl   %4, %%ebx;       \\\n        movl   %%ecx, %1;       \\\n        movl   %%edi, %2;       \\\n        movl   %%esi, %3;       \\\n        \"                       \\\n        : \"=m\" (t), \"=m\" (c), \"=m\" (d), \"=m\" (s)        \\\n        : \"m\" (t), \"m\" (s), \"m\" (d), \"m\" (c), \"m\" (b)   \\\n        : \"eax\", \"ecx\", \"edx\", \"esi\", \"edi\"             \\\n    );\n\n    #else\n\n    #define MULADDC_STOP            \\\n        \"                       \\\n        movl   %4, %%ebx;       \\\n        movl   %%ecx, %1;       \\\n        movl   %%edi, %2;       \\\n        movl   %%esi, %3;       \\\n        \"                       \\\n        : \"=m\" (t), \"=m\" (c), \"=m\" (d), \"=m\" (s)        \\\n        : \"m\" (t), \"m\" (s), \"m\" (d), \"m\" (c), \"m\" (b)   \\\n        : \"eax\", \"ecx\", \"edx\", \"esi\", \"edi\"             \\\n    );\n    #endif /* SSE2 */\n    #endif /* i386 */\n\n    #if defined(__amd64__) || defined (__x86_64__)\n</code></pre>\n\n<p>....However,I do not know why it works well in Android 4,4</p>\n\n<pre><code>#ifndef POLARSSL_CONFIG_H\n#define POLARSSL_CONFIG_H\n#if defined(_MSC_VER) &amp;&amp; !defined(_CRT_SECURE_NO_DEPRECATE)\n#define _CRT_SECURE_NO_DEPRECATE 1\n#endif\n#define POLARSSL_HAVE_LONGLONG\n#define POLARSSL_HAVE_ASM\n#define POLARSSL_HAVE_READDIR_R\n#define POLARSSL_HAVE_TIME\n#define POLARSSL_CIPHER_MODE_CBC\n#define POLARSSL_CIPHER_MODE_CFB\n#define POLARSSL_CIPHER_MODE_CTR\n#define POLARSSL_CIPHER_NULL_CIPHER\n#define POLARSSL_CIPHER_PADDING_PKCS7\n#define POLARSSL_CIPHER_PADDING_ONE_AND_ZEROS\n#define POLARSSL_CIPHER_PADDING_ZEROS_AND_LEN\n#define POLARSSL_CIPHER_PADDING_ZEROS\n#define POLARSSL_ENABLE_WEAK_CIPHERSUITES\n#define POLARSSL_ECP_NIST_OPTIM\n#define POLARSSL_ERROR_STRERROR_BC\n#define POLARSSL_ERROR_STRERROR_DUMMY\n#define POLARSSL_FS_IO\n#define POLARSSL_PKCS1_V15\n #define POLARSSL_SELF_TEST\n#define POLARSSL_SSL_ALERT_MESSAGES\n#define POLARSSL_SSL_SRV_SUPPORT_SSLV2_CLIENT_HELLO\n#define POLARSSL_SSL_MAX_FRAGMENT_LENGTH\n#define POLARSSL_SSL_SESSION_TICKETS\n#define POLARSSL_SSL_SERVER_NAME_INDICATION\n#define POLARSSL_SSL_TRUNCATED_HMAC\n#define POLARSSL_BASE64_C\n// #define POLARSSL_AES_C\n// #define POLARSSL_ASN1_PARSE_C\n#define POLARSSL_BIGNUM_C\n// #define POLARSSL_CTR_DRBG_C\n#define POLARSSL_MD_C\n#define POLARSSL_OID_C\n// #define POLARSSL_PK_C\n#define POLARSSL_RSA_C\n\n#if defined(POLARSSL_CONFIG_OPTIONS)\n#define POLARSSL_MPI_WINDOW_SIZE            6 /**&lt; Maximum windows size used. */\n#define POLARSSL_MPI_MAX_SIZE             512 /**&lt; Maximum number of bytes for usable MPIs. */\n#define CTR_DRBG_ENTROPY_LEN               48 /**&lt; Amount of entropy used per seed by default (48 with SHA-512, 32 with SHA-256) */\n#define CTR_DRBG_RESEED_INTERVAL        10000 /**&lt; Interval before reseed is performed by default */\n#define CTR_DRBG_MAX_INPUT                256 /**&lt; Maximum number of additional input bytes */\n#define CTR_DRBG_MAX_REQUEST             1024 /**&lt; Maximum number of requested bytes per call */\n#define CTR_DRBG_MAX_SEED_INPUT           384 /**&lt; Maximum size of (re)seed buffer */\n#define ENTROPY_MAX_SOURCES                20 /**&lt; Maximum number of sources supported */\n#define ENTROPY_MAX_GATHER                128 /**&lt; Maximum amount requested from entropy sources */\n#define MEMORY_ALIGN_MULTIPLE               4 /**&lt; Align on multiples of this value */\n#define POLARSSL_MEMORY_STDMALLOC      malloc /**&lt; Default allocator to use, can be undefined */\n#define POLARSSL_MEMORY_STDFREE          free /**&lt; Default free to use, can be undefined */\n#define SSL_CACHE_DEFAULT_TIMEOUT       86400 /**&lt; 1 day  */\n#define SSL_CACHE_DEFAULT_MAX_ENTRIES      50 /**&lt; Maximum entries in cache */\n#define SSL_MAX_CONTENT_LEN             16384 /**&lt; Size of the input / output buffer */\n#define SSL_DEFAULT_TICKET_LIFETIME     86400 /**&lt; Lifetime of session tickets (if enabled) */\n#endif /* POLARSSL_CONFIG_OPTIONS */\n\n/*\n * Sanity checks on defines and dependencies\n */\n#if defined(POLARSSL_CERTS_C) &amp;&amp; !defined(POLARSSL_PEM_PARSE_C)\n#error \"POLARSSL_CERTS_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_CTR_DRBG_C) &amp;&amp; !defined(POLARSSL_AES_C)\n#error \"POLARSSL_CTR_DRBG_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_DHM_C) &amp;&amp; !defined(POLARSSL_BIGNUM_C)\n#error \"POLARSSL_DHM_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_ECDH_C) &amp;&amp; !defined(POLARSSL_ECP_C)\n#error \"POLARSSL_ECDH_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_ECDSA_C) &amp;&amp;            \\\n    ( !defined(POLARSSL_ECP_C) ||           \\\n      !defined(POLARSSL_ASN1_PARSE_C) ||    \\\n      !defined(POLARSSL_ASN1_WRITE_C) )\n#error \"POLARSSL_ECDSA_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_ECP_C) &amp;&amp; ( !defined(POLARSSL_BIGNUM_C) || (   \\\n    !defined(POLARSSL_ECP_DP_SECP192R1_ENABLED) &amp;&amp;                  \\\n    !defined(POLARSSL_ECP_DP_SECP224R1_ENABLED) &amp;&amp;                  \\\n    !defined(POLARSSL_ECP_DP_SECP256R1_ENABLED) &amp;&amp;                  \\\n    !defined(POLARSSL_ECP_DP_SECP384R1_ENABLED) &amp;&amp;                  \\\n    !defined(POLARSSL_ECP_DP_SECP521R1_ENABLED) &amp;&amp;                  \\\n    !defined(POLARSSL_ECP_DP_BP256R1_ENABLED)   &amp;&amp;                  \\\n    !defined(POLARSSL_ECP_DP_BP384R1_ENABLED)   &amp;&amp;                  \\\n    !defined(POLARSSL_ECP_DP_BP512R1_ENABLED) ) )\n#error \"POLARSSL_ECP_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_ENTROPY_C) &amp;&amp; (!defined(POLARSSL_SHA512_C) &amp;&amp;      \\\n                                    !defined(POLARSSL_SHA256_C))\n#error \"POLARSSL_ENTROPY_C defined, but not all prerequisites\"\n#endif\n#if defined(POLARSSL_ENTROPY_C) &amp;&amp; defined(POLARSSL_SHA512_C) &amp;&amp;         \\\n    defined(POLARSSL_CONFIG_OPTIONS) &amp;&amp; (CTR_DRBG_ENTROPY_LEN &gt; 64)\n#error \"CTR_DRBG_ENTROPY_LEN value too high\"\n#endif\n#if defined(POLARSSL_ENTROPY_C) &amp;&amp; !defined(POLARSSL_SHA512_C) &amp;&amp;        \\\n    defined(POLARSSL_CONFIG_OPTIONS) &amp;&amp; (CTR_DRBG_ENTROPY_LEN &gt; 32)\n#error \"CTR_DRBG_ENTROPY_LEN value too high\"\n#endif\n\n#if defined(POLARSSL_GCM_C) &amp;&amp; (                                        \\\n        !defined(POLARSSL_AES_C) &amp;&amp; !defined(POLARSSL_CAMELLIA_C) )\n#error \"POLARSSL_GCM_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_HAVEGE_C) &amp;&amp; !defined(POLARSSL_TIMING_C)\n#error \"POLARSSL_HAVEGE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_KEY_EXCHANGE_DHE_PSK_ENABLED) &amp;&amp; !defined(POLARSSL_DHM_C)\n#error \"POLARSSL_KEY_EXCHANGE_DHE_PSK_ENABLED defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_KEY_EXCHANGE_ECDHE_PSK_ENABLED) &amp;&amp;                     \\\n    !defined(POLARSSL_ECDH_C)\n#error \"POLARSSL_KEY_EXCHANGE_ECDHE_PSK_ENABLED defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_KEY_EXCHANGE_DHE_RSA_ENABLED) &amp;&amp;                   \\\n    ( !defined(POLARSSL_DHM_C) || !defined(POLARSSL_RSA_C) ||           \\\n      !defined(POLARSSL_X509_CRT_PARSE_C) || !defined(POLARSSL_PKCS1_V15) )\n#error \"POLARSSL_KEY_EXCHANGE_DHE_RSA_ENABLED defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_KEY_EXCHANGE_ECDHE_RSA_ENABLED) &amp;&amp;                 \\\n    ( !defined(POLARSSL_ECDH_C) || !defined(POLARSSL_RSA_C) ||          \\\n      !defined(POLARSSL_X509_CRT_PARSE_C) || !defined(POLARSSL_PKCS1_V15) )\n#error \"POLARSSL_KEY_EXCHANGE_ECDHE_RSA_ENABLED defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED) &amp;&amp;                 \\\n    ( !defined(POLARSSL_ECDH_C) || !defined(POLARSSL_ECDSA_C) ||          \\\n      !defined(POLARSSL_X509_CRT_PARSE_C) )\n#error \"POLARSSL_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_KEY_EXCHANGE_RSA_PSK_ENABLED) &amp;&amp;                   \\\n    ( !defined(POLARSSL_RSA_C) || !defined(POLARSSL_X509_CRT_PARSE_C) ||\\\n      !defined(POLARSSL_PKCS1_V15) )\n#error \"POLARSSL_KEY_EXCHANGE_RSA_PSK_ENABLED defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_KEY_EXCHANGE_RSA_ENABLED) &amp;&amp;                       \\\n    ( !defined(POLARSSL_RSA_C) || !defined(POLARSSL_X509_CRT_PARSE_C) ||\\\n      !defined(POLARSSL_PKCS1_V15) )\n#error \"POLARSSL_KEY_EXCHANGE_RSA_ENABLED defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_MEMORY_BUFFER_ALLOC_C) &amp;&amp; !defined(POLARSSL_MEMORY_C)\n#error \"POLARSSL_MEMORY_BUFFER_ALLOC_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_PBKDF2_C) &amp;&amp; !defined(POLARSSL_MD_C)\n#error \"POLARSSL_PBKDF2_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_PEM_PARSE_C) &amp;&amp; !defined(POLARSSL_BASE64_C)\n#error \"POLARSSL_PEM_PARSE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_PEM_WRITE_C) &amp;&amp; !defined(POLARSSL_BASE64_C)\n#error \"POLARSSL_PEM_WRITE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_PK_PARSE_C) &amp;&amp; !defined(POLARSSL_PK_C)\n#error \"POLARSSL_PK_PARSE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_PK_WRITE_C) &amp;&amp; !defined(POLARSSL_PK_C)\n#error \"POLARSSL_PK_WRITE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_PKCS11_C) &amp;&amp; !defined(POLARSSL_PK_C)\n#error \"POLARSSL_PKCS11_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_RSA_C) &amp;&amp; ( !defined(POLARSSL_BIGNUM_C) ||         \\\n    !defined(POLARSSL_OID_C) )\n#error \"POLARSSL_RSA_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_PROTO_SSL3) &amp;&amp; ( !defined(POLARSSL_MD5_C) ||     \\\n    !defined(POLARSSL_SHA1_C) )\n#error \"POLARSSL_SSL_PROTO_SSL3 defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_PROTO_TLS1) &amp;&amp; ( !defined(POLARSSL_MD5_C) ||     \\\n    !defined(POLARSSL_SHA1_C) )\n#error \"POLARSSL_SSL_PROTO_TLS1 defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_PROTO_TLS1_1) &amp;&amp; ( !defined(POLARSSL_MD5_C) ||     \\\n    !defined(POLARSSL_SHA1_C) )\n#error \"POLARSSL_SSL_PROTO_TLS1_1 defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_PROTO_TLS1_2) &amp;&amp; ( !defined(POLARSSL_SHA1_C) &amp;&amp;     \\\n    !defined(POLARSSL_SHA256_C) &amp;&amp; !defined(POLARSSL_SHA512_C) )\n#error \"POLARSSL_SSL_PROTO_TLS1_2 defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_CLI_C) &amp;&amp; !defined(POLARSSL_SSL_TLS_C)\n#error \"POLARSSL_SSL_CLI_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_TLS_C) &amp;&amp; ( !defined(POLARSSL_CIPHER_C) ||     \\\n    !defined(POLARSSL_MD_C) )\n#error \"POLARSSL_SSL_TLS_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_SRV_C) &amp;&amp; !defined(POLARSSL_SSL_TLS_C)\n#error \"POLARSSL_SSL_SRV_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_SSL_TLS_C) &amp;&amp; (!defined(POLARSSL_SSL_PROTO_SSL3) &amp;&amp; \\\n    !defined(POLARSSL_SSL_PROTO_TLS1) &amp;&amp; !defined(POLARSSL_SSL_PROTO_TLS1_1) &amp;&amp; \\\n    !defined(POLARSSL_SSL_PROTO_TLS1_2))\n#error \"POLARSSL_SSL_TLS_C defined, but no protocols are active\"\n#endif\n\n#if defined(POLARSSL_SSL_TLS_C) &amp;&amp; (defined(POLARSSL_SSL_PROTO_SSL3) &amp;&amp; \\\n    defined(POLARSSL_SSL_PROTO_TLS1_1) &amp;&amp; !defined(POLARSSL_SSL_PROTO_TLS1))\n#error \"Illegal protocol selection\"\n#endif\n\n#if defined(POLARSSL_SSL_TLS_C) &amp;&amp; (defined(POLARSSL_SSL_PROTO_TLS1) &amp;&amp; \\\n    defined(POLARSSL_SSL_PROTO_TLS1_2) &amp;&amp; !defined(POLARSSL_SSL_PROTO_TLS1_1))\n#error \"Illegal protocol selection\"\n#endif\n\n#if defined(POLARSSL_SSL_TLS_C) &amp;&amp; (defined(POLARSSL_SSL_PROTO_SSL3) &amp;&amp; \\\n    defined(POLARSSL_SSL_PROTO_TLS1_2) &amp;&amp; (!defined(POLARSSL_SSL_PROTO_TLS1) || \\\n    !defined(POLARSSL_SSL_PROTO_TLS1_1)))\n#error \"Illegal protocol selection\"\n#endif\n\n#if defined(POLARSSL_SSL_SESSION_TICKETS) &amp;&amp; defined(POLARSSL_SSL_TLS_C) &amp;&amp; \\\n    ( !defined(POLARSSL_AES_C) || !defined(POLARSSL_SHA256_C) ||            \\\n      !defined(POLARSSL_CIPHER_MODE_CBC) )\n#error \"POLARSSL_SSL_SESSION_TICKETS_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_THREADING_DUMMY)\n#if !defined(POLARSSL_THREADING_C) || defined(POLARSSL_THREADING_IMPL)\n#error \"POLARSSL_THREADING_DUMMY defined, but not all prerequisites\"\n#endif\n#define POLARSSL_THREADING_IMPL\n#endif\n\n#if defined(POLARSSL_THREADING_PTHREAD)\n#if !defined(POLARSSL_THREADING_C) || defined(POLARSSL_THREADING_IMPL)\n#error \"POLARSSL_THREADING_PTHREAD defined, but not all prerequisites\"\n#endif\n#define POLARSSL_THREADING_IMPL\n#endif\n\n#if defined(POLARSSL_THREADING_ALT)\n#if !defined(POLARSSL_THREADING_C) || defined(POLARSSL_THREADING_IMPL)\n#error \"POLARSSL_THREADING_ALT defined, but not all prerequisites\"\n#endif\n#define POLARSSL_THREADING_IMPL\n#endif\n\n#if defined(POLARSSL_THREADING_C) &amp;&amp; !defined(POLARSSL_THREADING_IMPL)\n#error \"POLARSSL_THREADING_C defined, single threading implementation required\"\n#endif\n#undef POLARSSL_THREADING_IMPL\n\n#if defined(POLARSSL_X509_USE_C) &amp;&amp; ( !defined(POLARSSL_BIGNUM_C) ||  \\\n    !defined(POLARSSL_OID_C) || !defined(POLARSSL_ASN1_PARSE_C) ||      \\\n    !defined(POLARSSL_PK_PARSE_C) )\n#error \"POLARSSL_X509_USE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_X509_CREATE_C) &amp;&amp; ( !defined(POLARSSL_BIGNUM_C) ||  \\\n    !defined(POLARSSL_OID_C) || !defined(POLARSSL_ASN1_WRITE_C) ||       \\\n    !defined(POLARSSL_PK_WRITE_C) )\n#error \"POLARSSL_X509_CREATE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_X509_CRT_PARSE_C) &amp;&amp; ( !defined(POLARSSL_X509_USE_C) )\n#error \"POLARSSL_X509_CRT_PARSE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_X509_CRL_PARSE_C) &amp;&amp; ( !defined(POLARSSL_X509_USE_C) )\n#error \"POLARSSL_X509_CRL_PARSE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_X509_CSR_PARSE_C) &amp;&amp; ( !defined(POLARSSL_X509_USE_C) )\n#error \"POLARSSL_X509_CSR_PARSE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_X509_CRT_WRITE_C) &amp;&amp; ( !defined(POLARSSL_X509_CREATE_C) )\n#error \"POLARSSL_X509_CRT_WRITE_C defined, but not all prerequisites\"\n#endif\n\n#if defined(POLARSSL_X509_CSR_WRITE_C) &amp;&amp; ( !defined(POLARSSL_X509_CREATE_C) )\n#error \"POLARSSL_X509_CSR_WRITE_C defined, but not all prerequisites\"\n#endif\n\n#endif /* config.h */\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1474425268, "post_id": 39606598, "comment_id": 66521524, "body": "Cosmic rays, anybody?  Parity error \u2014 uncorrected?  The 2-bit in the character got tweaked between <code>e</code> and <code>g</code>."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 2, "creation_date": 1474425271, "post_id": 39606598, "comment_id": 66521525, "body": "<code>g</code> is a greedy exponent.  It is greedy because it ate all the numbers, leaving only zero :-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1474425308, "post_id": 39606598, "comment_id": 66521536, "body": "Suggest backing up the harddrive and ordering a replacement"}], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 607567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2cdaf11bb9df57dba9722b7ca291ab17?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/607567/marco"}, "is_accepted": false, "score": 1, "last_activity_date": 1474472523, "creation_date": 1474472523, "answer_id": 39621039, "question_id": 39606598, "link": "https://stackoverflow.com/questions/39606598/weird-symbol-in-printf-when-using-exponent-notation/39621039#39621039", "title": "Weird symbol in printf when using exponent notation", "body": "<p>That's a bug, the code doesn't show any possible case to display scientific notation with a \"g\", maybe the bug is being introduced by your data so I suggest examine that specific file, check for all the NP chars, etc. Then report a bug in the library.</p>\n\n<p><a href=\"https://sourceware.org/bugzilla\" rel=\"nofollow\">https://sourceware.org/bugzilla</a></p>\n"}], "owner": {"reputation": 6177, "user_id": 928594, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/becf01e1fb704fdc6bfc086a131ac02a?s=128&d=identicon&r=PG", "display_name": "mmirzadeh", "link": "https://stackoverflow.com/users/928594/mmirzadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474472523, "creation_date": 1474425081, "question_id": 39606598, "link": "https://stackoverflow.com/questions/39606598/weird-symbol-in-printf-when-using-exponent-notation", "title": "Weird symbol in printf when using exponent notation", "body": "<p>I have come across a very bizarre situation. So bizarre in fact I'm not even sure how to ask my question!</p>\n\n<p>I am working with a code that generates output file in simple format. The details of this format is not very important. What matters is somewhere in the file, there are several (tens of thousands of) lines, each with three pair of numbers separated by space and newline character, <code>\\n</code>, at the end.</p>\n\n<p>Each number is written using exponent notation, simply as:</p>\n\n<pre><code>fprintf(outFile,\"%e %e %e\\n\",x,y,0.0);\n</code></pre>\n\n<p>where <code>x</code> and <code>y</code> are doubles.</p>\n\n<p>Here's the strange part. In one of the files, with more than 100K+ lines or so, there is a line printed as this</p>\n\n<pre><code>7.812500e-02 -1.875000g+00 0.000000e+00\n</code></pre>\n\n<p>What on earth is <strong>g+00</strong> in <code>-1.875000g+00</code>?!</p>\n\n<p>I have been using this code for more than 5 years, it has generated more than few tens of thousands of files, and this is a first time I have ever seen such a thing. I did a bit of online search but could not find anything? </p>\n\n<p>Someone please save my sanity!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474422219, "post_id": 39606237, "comment_id": 66520841, "body": "That&#39;s what the <code>FILE *</code> parameter is for."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474422249, "post_id": 39606237, "comment_id": 66520850, "body": "@kaylum can you please elaborate? I&#39;d like to get a good conceptual understanding of this. I should mention that I am well aware of using FILE * but I was not aware that it undertook this function. Please elaborate."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474422337, "post_id": 39606237, "comment_id": 66520868, "body": "They store the position that was last read. This is the same thing you are adjusting with <code>fseek</code>."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474422505, "post_id": 39606237, "comment_id": 66520906, "body": "@M.M I thought FILE * only stored the file location in directories? So it also stores exactly where INSIDE the file functions like fscanf() and fgets() have read/written up to?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474422557, "post_id": 39606237, "comment_id": 66520918, "body": "That parameter stores internal state, including the <code>fd</code> (file descriptor). The <code>fd</code> is managed by the kernel and the kernel keeps track of the position in the file (and other things) for each fd."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474422591, "post_id": 39606237, "comment_id": 66520926, "body": "It stores whatever is necessary to make those functions work as specified, this may vary between implementations"}, {"owner": {"reputation": 56, "user_id": 6824393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9932eb74494716d7aafe8bb2651032df?s=128&d=identicon&r=PG&f=1", "display_name": "azavalla", "link": "https://stackoverflow.com/users/6824393/azavalla"}, "edited": false, "score": 0, "creation_date": 1474422757, "post_id": 39606237, "comment_id": 66520958, "body": "Take a look here: <a href=\"http://www.cplusplus.com/reference/cstdio/FILE/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/FILE</a>"}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 56, "user_id": 6824393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9932eb74494716d7aafe8bb2651032df?s=128&d=identicon&r=PG&f=1", "display_name": "azavalla", "link": "https://stackoverflow.com/users/6824393/azavalla"}, "edited": false, "score": 0, "creation_date": 1474423093, "post_id": 39606237, "comment_id": 66521039, "body": "@azavalla That doesn&#39;t explain how it remembers where in the file it was last terminated."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1474423309, "post_id": 39606237, "comment_id": 66521096, "body": "@kaylum so the FILE * object stores the file descriptor. The fd stores information about the file location, including the location in the file that was read up to? And this fd is managed by the kernel.   Is this all correct?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1474423374, "post_id": 39606237, "comment_id": 66521107, "body": "<b>Just look at your user name.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 0, "creation_date": 1474422663, "post_id": 39606266, "comment_id": 66520939, "body": "Thanks, Joshua. Can you please elaborate on exactly what is going on? I&#39;d like a good conceptual idea of what is going on here."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": true, "score": 6, "last_activity_date": 1474423176, "last_edit_date": 1474423176, "creation_date": 1474422343, "answer_id": 39606266, "question_id": 39606237, "link": "https://stackoverflow.com/questions/39606237/how-do-functions-like-fscanf-and-fgets-remember-where-in-the-file-to-start-r/39606266#39606266", "title": "How do functions like fscanf() and fgets() remember where in the file to start reading from?", "body": "<p>The <code>FILE *</code> parameter points to a buffer and a file handle (see the <code>fileno()</code> function).</p>\n\n<p>The actual where is remembered in the kernel in the file structure.</p>\n\n<p>There is a legend that the <code>FILE *</code> pointer points into the file. This is not literally true, but it might as well be true for the interpretation of the beginning programmer.</p>\n\n<p>In fact what happens is as follows: Every process has an array in kernel of type <code>struct file</code> (this type is not defined in userspace so don't go looking for it) that contains all of its open files. A handle is returned by the <code>open()</code> syscall that is merely an index into the array. The function <code>fileno()</code> retrieves the handle from the FILE * pointer returned by <code>fopen()</code> and can be manipulated directly. This is usually a bad idea except for accessing <code>ioctl()</code> or <code>fctl()</code> as you will end up fighting with the internal buffer in the <code>FILE</code> object.</p>\n\n<p>One of the members of <code>struct file</code> is <code>loff_t f_pos</code> which is the exact location in bytes the kernel <code>read()</code> or <code>write()</code> stopped at. This is buffered in <code>FILE</code> which knows how many bytes it read ahead or pended for a later write for you.</p>\n"}], "owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 39606266, "answer_count": 1, "score": 4, "last_activity_date": 1474424235, "creation_date": 1474422073, "last_edit_date": 1474424235, "question_id": 39606237, "link": "https://stackoverflow.com/questions/39606237/how-do-functions-like-fscanf-and-fgets-remember-where-in-the-file-to-start-r", "title": "How do functions like fscanf() and fgets() remember where in the file to start reading from?", "body": "<p>For instance, when reading a file using <code>fscanf()</code>, it seems to remember where it last left terminated, rather than starting from the beginning of the file again. Can someone please elaborate on how exactly this works? I've finding it difficult to use these functions, since I do not understand this component.</p>\n"}, {"tags": ["c", "string", "pointers", "slice"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1474416243, "post_id": 39605525, "comment_id": 66519389, "body": "What do strings end with? Your <code>s</code> is missing something."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1474416270, "post_id": 39605525, "comment_id": 66519395, "body": "<code>sizeof(char)</code> is redundant as it is always one"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1474416577, "post_id": 39605525, "comment_id": 66519466, "body": "consider using more meaningful variable names than <code>i</code> and <code>j</code>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1474417084, "post_id": 39605525, "comment_id": 66519586, "body": "It&#39;s a good thing <code>sizeof(char)</code> is <code>1</code> too, because otherwise, <code>sizeof(char)*i-j</code> would be wrong; the multiply binds more tightly, so you&#39;d calculate <code>sizeof(char)*i</code>, then subtract <code>j</code>, when you almost certainly want it the other way around. Yay for one error cancelling out others?"}], "answers": [{"tags": [], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": false, "score": 1, "last_activity_date": 1474416490, "creation_date": 1474416490, "answer_id": 39605564, "question_id": 39605525, "link": "https://stackoverflow.com/questions/39605525/slicing-and-copying-a-string-in-c/39605564#39605564", "title": "Slicing and copying a string in C", "body": "<p>A valid string in C requires a null-terminator.</p>\n\n<p>You have to <code>malloc()</code> one additional byte to store it, and close your string with a <code>\\0</code> after the last character.</p>\n"}, {"tags": [], "owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "is_accepted": false, "score": 0, "last_activity_date": 1474421303, "creation_date": 1474421303, "answer_id": 39606150, "question_id": 39605525, "link": "https://stackoverflow.com/questions/39605525/slicing-and-copying-a-string-in-c/39606150#39606150", "title": "Slicing and copying a string in C", "body": "<ol>\n<li><p>If you need to allocate a string buffer to hold <code>n</code> characters, you need <code>n+1</code> chars, the additional one for the terminating null character, <code>'\\0'</code>. Also remember you have to set the terminator by yourself.</p></li>\n<li><p><code>sizeof(char)</code> is always 1 defined by the standard.</p></li>\n</ol>\n\n<p>Try this:</p>\n\n<pre><code>char* makeWord(char *c, int start, int end) {\n\n    char *s = malloc(end - start + 1);\n    if (!s) return NULL;\n    int k;\n    for (k = 0; k &lt; end-start; k++){\n        s[k] = c[start+k];\n    }\n    s[k] = '\\0';\n\n    printf(\"%s \", s);\n\n    return s;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4777280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-3Ln-mKzY6YY/AAAAAAAAAAI/AAAAAAAAVr0/rzc7K7pho_A/photo.jpg?sz=128", "display_name": "Eduardo Hashimoto", "link": "https://stackoverflow.com/users/4777280/eduardo-hashimoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1474421303, "creation_date": 1474416106, "question_id": 39605525, "link": "https://stackoverflow.com/questions/39605525/slicing-and-copying-a-string-in-c", "title": "Slicing and copying a string in C", "body": "<p>I'm trying to slice a string and copy this new sliced part.</p>\n\n<pre><code>    char* makeWord(char *c, int j, int i){\n\n    char *s;\n    s = malloc(sizeof(char)*i-j)\n    int k;\n    for (k = 0; k &lt; i - j; k++){\n        s[k] = c[j+k];\n    }\n\n    printf(\"%s \", s);\n\n    return s;\n}\n</code></pre>\n\n<p>I'm trying to return a pointer which copies the relevant part of the original string.</p>\n\n<p>It is printing strange symbols in the end. </p>\n\n<p>Example:</p>\n\n<pre><code>c[] = \"hello darkness my old friend\" \nmakeWord(c, 0, 5); makeWord(c, 6,14); makeWord(c, 15, 17); makeWord(c, 18, 21);\n</code></pre>\n\n<blockquote>\n  <p>Generates:\n  hello  darknessmt_'3  myP  old  friendP</p>\n</blockquote>\n\n<p>Thank you, sorry for the newbie question.</p>\n"}, {"tags": ["c", "syntax"], "comments": [{"owner": {"reputation": 106, "user_id": 2680390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeff27d0715eb6eb81557823eb4ff8d5?s=128&d=identicon&r=PG", "display_name": "Denis Golovkin", "link": "https://stackoverflow.com/users/2680390/denis-golovkin"}, "edited": false, "score": 0, "creation_date": 1474416932, "post_id": 39605391, "comment_id": 66519552, "body": "Thanks, dbush. I also saw the identical code, but without <code>Books</code> literal. What is the difference?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474417287, "post_id": 39605391, "comment_id": 66519628, "body": "What don&#39;t you understand from any C book&#39;s explanation? What is your <b>specific</b> problem? There are many tutorials and C books to be found."}, {"owner": {"reputation": 106, "user_id": 2680390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeff27d0715eb6eb81557823eb4ff8d5?s=128&d=identicon&r=PG", "display_name": "Denis Golovkin", "link": "https://stackoverflow.com/users/2680390/denis-golovkin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474418385, "post_id": 39605391, "comment_id": 66519876, "body": "Olaf, i tryed to find information, but in tutorials all the explanation is around <code>Book</code> alias, but noting is said about <code>Books</code>, regarding to this example."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474418650, "post_id": 39605391, "comment_id": 66519952, "body": "You thing the letter <code>s</code> in the name makes a difference?? That is ridiculous! Next time you ask the same question about <code>Car</code> vs. <code>Cars</code>? No, offence, but you really should get a C book and start reading from the very first page."}, {"owner": {"reputation": 106, "user_id": 2680390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeff27d0715eb6eb81557823eb4ff8d5?s=128&d=identicon&r=PG", "display_name": "Denis Golovkin", "link": "https://stackoverflow.com/users/2680390/denis-golovkin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474419494, "post_id": 39605391, "comment_id": 66520203, "body": "Olaf, may be i dissapoint you, using <code>Book</code> and <code>Books</code> literals, but if you look at example provided, you will see, that they used in different locations in source code. The question was about &quot;top&quot; location."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474419643, "post_id": 39605391, "comment_id": 66520236, "body": "And that you did not find in a good C book? (whatever your mean with &quot;top location&quot;) And C and C++ are <b>different</b> languages! Sorry to say, but you did not do any effort to answer this yourself before asking. Btw. that linked site starts with nonsense already - at least in C. The rest is not better. It mystifies something which is very clear."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1474415581, "post_id": 39605430, "comment_id": 66519220, "body": "You can still use the alias in that situation (by using slightly different syntax)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1474418393, "last_edit_date": 1474418393, "creation_date": 1474415374, "answer_id": 39605430, "question_id": 39605391, "link": "https://stackoverflow.com/questions/39605391/syntax-typedef-and-struct-tag-explanation/39605430#39605430", "title": "Syntax: typedef and struct tag explanation", "body": "<p>The <code>typedef</code> says that <code>Book</code> is an alias for <code>struct Books</code>.  Anywhere you use one, you can use the other.</p>\n\n<p>The only exception is if <code>struct Books</code> contains a pointer to another <code>struct Books</code>.  In that case, you can't use the alias.</p>\n\n<p>EDIT:</p>\n\n<p>You can do the above if you use a forward declaration:</p>\n\n<pre><code>typedef struct Books Book;\n\nstruct Books {\n   Book *moreBooks;\n}\n</code></pre>\n\n<p>As for <code>Books</code>, that by itself is not a valid type.  You need to prefix it with the <code>struct</code> keyword.  This differs from C++ where the <code>struct</code> (or <code>class</code>) keyword is optional when referencing it.</p>\n\n<p>EDIT 2:</p>\n\n<p>In the second code sample you give, <code>Book</code> is an alias for an anonymous struct.  In that case, the alias must be used to reference it.</p>\n"}], "owner": {"reputation": 106, "user_id": 2680390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeff27d0715eb6eb81557823eb4ff8d5?s=128&d=identicon&r=PG", "display_name": "Denis Golovkin", "link": "https://stackoverflow.com/users/2680390/denis-golovkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "closed_date": 1474464702, "accepted_answer_id": 39605430, "answer_count": 1, "score": -3, "last_activity_date": 1474427593, "creation_date": 1474415112, "last_edit_date": 1474427593, "question_id": 39605391, "link": "https://stackoverflow.com/questions/39605391/syntax-typedef-and-struct-tag-explanation", "closed_reason": "Needs details or clarity", "title": "Syntax: typedef and struct tag explanation", "body": "<p>In following example:</p>\n\n<pre><code>typedef struct Books {\n    char title[50];\n    char author[50];\n    int book_id;\n} Book;\n</code></pre>\n\n<p>The <code>Book</code> can be used then, to declare variable, like:</p>\n\n<pre><code>Book myBook;\n</code></pre>\n\n<p>But what the meaning of <code>Books</code>? How it can be used, or why we need it?\nI interested mostly in plain C, but if you can explain about C++ as well it will be great.</p>\n\n<p>--edited--</p>\n\n<p>To be more specific, what the difference between code above and following code:</p>\n\n<pre><code>typedef struct {\n    char title[50];\n    char author[50];\n    int book_id;\n} Book;\n</code></pre>\n\n<p>Why we ever need an extra literal in first example?</p>\n\n<p>Found good explanation here:\n<a href=\"http://www.embedded.com/electronics-blogs/programming-pointers/4024450/Tag-vs-Type-Names\" rel=\"nofollow\">Tag vs. Type Names in C and C++</a></p>\n"}, {"tags": ["c", "file", "binaryfiles"], "comments": [{"owner": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "edited": false, "score": 0, "creation_date": 1474415141, "post_id": 39605353, "comment_id": 66519091, "body": "You are passing the address of &#39;string&#39; to fwrite. You should pass its value."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474415680, "post_id": 39605353, "comment_id": 66519245, "body": "It might be easier to display the output in hex (I use <code>od -Ax -t x1</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1474415680, "post_id": 39605353, "comment_id": 66519246, "body": "You are writing the <i>pointer</i> <code>string</code> (not the thing it points to, which is the string), and a bunch of garbage that happens to be after it."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1474415928, "post_id": 39605353, "comment_id": 66519308, "body": "You are supposed to open your file with mode <code>wb</code> instead of <code>w</code> if you wish to have complete control of what is read and written. Using <code>fopen()</code> with <code>w</code> only is not suitable for binary mode."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6855575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0d1be7ef0d5e64e3f630641e7058e?s=128&d=identicon&r=PG&f=1", "display_name": "eefefefe", "link": "https://stackoverflow.com/users/6855575/eefefefe"}, "edited": false, "score": 1, "creation_date": 1474415409, "post_id": 39605398, "comment_id": 66519165, "body": "Oh okay, and if i were to have a struct that has a char *, I would write it the same way? Also what does the first column of numbers represent?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 13, "user_id": 6855575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0d1be7ef0d5e64e3f630641e7058e?s=128&d=identicon&r=PG&f=1", "display_name": "eefefefe", "link": "https://stackoverflow.com/users/6855575/eefefefe"}, "edited": false, "score": 0, "creation_date": 1474415529, "post_id": 39605398, "comment_id": 66519204, "body": "If you have a <code>struct</code>  you would need to serialise it in some way (google serialisation). Why not read the manual page for <code>fwrite</code> to find out about the numbers"}, {"owner": {"reputation": 13, "user_id": 6855575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0d1be7ef0d5e64e3f630641e7058e?s=128&d=identicon&r=PG&f=1", "display_name": "eefefefe", "link": "https://stackoverflow.com/users/6855575/eefefefe"}, "edited": false, "score": 0, "creation_date": 1474415831, "post_id": 39605398, "comment_id": 66519284, "body": "Care to link a page about serialization for structs in regards to C? Googling it myself seems to yield minimal results."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 13, "user_id": 6855575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0d1be7ef0d5e64e3f630641e7058e?s=128&d=identicon&r=PG&f=1", "display_name": "eefefefe", "link": "https://stackoverflow.com/users/6855575/eefefefe"}, "edited": false, "score": 0, "creation_date": 1474416070, "post_id": 39605398, "comment_id": 66519341, "body": "<a href=\"https://encrypted.google.com/search?q=serialization+struct+C+example\" rel=\"nofollow noreferrer\">encrypted.google.com/search?q=serialization+struct+C+example</a> seems to have a few good starting points"}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": true, "score": 3, "last_activity_date": 1474415599, "last_edit_date": 1474415599, "creation_date": 1474415135, "answer_id": 39605398, "question_id": 39605353, "link": "https://stackoverflow.com/questions/39605353/writing-to-a-binary-file-in-c-interpreting-output/39605398#39605398", "title": "Writing to a Binary file in C, interpreting output", "body": "<p>The line </p>\n\n<pre><code> fwrite(&amp;string,sizeof(string),strlen(string)+1,file);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code> fwrite(string, strlen(string)+1, 1, file);\n</code></pre>\n\n<p>Because</p>\n\n<ol>\n<li>You already have a pointer to the item - do not need the pointer to that pointer - hence <code>string</code> and not <code>&amp;string</code></li>\n<li>The size of the item is <code>strlen(string) +</code></li>\n<li>You have one item</li>\n</ol>\n\n<p>This is why you are getting output that does not make sense as it is random stuff in memory.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>ALso</p>\n\n<pre><code>if(file == NULL)\n    printf(\"Problem with file\\n\");\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if(file == NULL) {\n    printf(\"Problem with file\\n\");\n    return;\n }\n</code></pre>\n\n<p>as there is little that can be done with a null <code>file</code> in the rest of the function</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4133084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02254b5016142b926c8e8566c5e9964?s=128&d=identicon&r=PG&f=1", "display_name": "Openeye", "link": "https://stackoverflow.com/users/4133084/openeye"}, "is_accepted": false, "score": 1, "last_activity_date": 1474415442, "creation_date": 1474415442, "answer_id": 39605436, "question_id": 39605353, "link": "https://stackoverflow.com/questions/39605353/writing-to-a-binary-file-in-c-interpreting-output/39605436#39605436", "title": "Writing to a Binary file in C, interpreting output", "body": "<p>To write to file in binary you should use the \"wb\" option, for write byte.</p>\n\n<pre><code>FILE * file = fopen(\"file.bin\",\"wb\");\n</code></pre>\n\n<p>As for knowing if the file is written correctly, the bulletproof way, (allthough probably it exits a better one) is simply to read the file back in with \"rb\" and print it in normal format.</p>\n"}], "owner": {"reputation": 13, "user_id": 6855575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0d1be7ef0d5e64e3f630641e7058e?s=128&d=identicon&r=PG&f=1", "display_name": "eefefefe", "link": "https://stackoverflow.com/users/6855575/eefefefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 39605398, "answer_count": 2, "score": 1, "last_activity_date": 1474415599, "creation_date": 1474414842, "question_id": 39605353, "link": "https://stackoverflow.com/questions/39605353/writing-to-a-binary-file-in-c-interpreting-output", "title": "Writing to a Binary file in C, interpreting output", "body": "<p>I'm trying to test writing to a binary file in c, and just want to make sense of my output.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid writeToFile();\n\nint main(void) {\n\n    writeToFile();\n\n    return(0);\n}\n\nvoid writeToFile() {\n    FILE * file = fopen(\"file.bin\",\"w\");\n    char * string;\n\n    if(file == NULL)\n        printf(\"Problem with file\\n\");\n\n    string = malloc(sizeof(char)*6);\n\n    strcpy(string,\"Hello\");\n\n    fwrite(&amp;string,sizeof(string),strlen(string)+1,file);\n\n    fclose(file);\n\n}\n</code></pre>\n\n<p>I'm interpreting my results using the commands:</p>\n\n<pre><code>od -c file.bin\n</code></pre>\n\n<p>Which displays octal output.\nAnd gives me this:</p>\n\n<pre><code>0000000   @ 022   # 001  \\0  \\0  \\0  \\0 020 020   # 001  \\0  \\0  \\0  \\0                                                                                         \n0000020 300 016 374   ? 377 177  \\0  \\0 264 006   @  \\0  \\0  \\0  \\0  \\0                                                                                         \n0000040   @  \\a   @  \\0  \\0  \\0  \\0  \\0 200 365   c 274 020 177  \\0  \\0                                                                                         \n0000060\n</code></pre>\n\n<p>I'm not sure how to interpret this output, I know it's in octal, but how do I know my string \"Hello\" was written correctly?</p>\n\n<p>I was thinking I could convert the output to ascii using an ascii table, but I'm not sure if that's doable here? Is there a simple way I can check if string \"Hello\" was written correctly?</p>\n\n<p>Maybe I could read the output back in, and somehow check if the string \"Hello\" exists within it?</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["c", "mpi", "wait"], "answers": [{"comments": [{"owner": {"reputation": 857, "user_id": 1255576, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9287d0aa0e1fcc401cc6e53385d2ae8d?s=128&d=identicon&r=PG", "display_name": "D P.", "link": "https://stackoverflow.com/users/1255576/d-p"}, "edited": false, "score": 0, "creation_date": 1476139757, "post_id": 39609017, "comment_id": 67215518, "body": "Thank you for the clear message and showing with an example. I have a similar question in the following link if you can answer: <a href=\"http://stackoverflow.com/questions/39967886/how-to-send-receive-in-mpi-using-all-processors\" title=\"how to send receive in mpi using all processors\">stackoverflow.com/questions/39967886/&hellip;</a>"}], "tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 8, "last_activity_date": 1474439574, "creation_date": 1474439574, "answer_id": 39609017, "question_id": 39605351, "link": "https://stackoverflow.com/questions/39605351/in-mpi-how-to-make-the-following-program-wait-till-all-calculations-are-complet/39609017#39609017", "title": "In MPI, how to make the following program Wait till all calculations are completed", "body": "<p>Well, you were nearly there. All is missing is a call to <code>MPI_Barrier()</code> for all processes. This can be done this way:</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char** argv) \n{\n    MPI_Init(&amp;argc, &amp;argv);\n    int world_rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n    int world_size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n    int i;\n    double centroid[3];/*ignore this array*/\n\n    if (world_rank == 0) \n    {\n        int destination;\n        for (i=0; i&lt;3; i++)\n        {\n            /*Ignore centroid buffer been sent for now*/\n\n            destination = i+1;/*destination rank or process*/\n            MPI_Send(&amp;centroid, 3, MPI_DOUBLE, destination, 0, MPI_COMM_WORLD);\n        }\n        MPI_Barrier(MPI_COMM_WORLD);\n        printf(\"\\nEND: This need to print after all MPI_Send/MPI_Recv has been completed\\n\\n\");\n    } \n    else\n    {   \n        MPI_Recv(&amp;centroid, 3, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);        \n        sleep(1); /*This represent many calculations that will happen here later, instead of sleep*/\n        printf(\"Printing at Rank/Process number: %d\\n\", world_rank);\n        MPI_Barrier(MPI_COMM_WORLD);\n    }\n\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>With this barrier added, the code gives on my laptop:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>~/tmp$ mpirun -n 4 ./a.out \nPrinting at Rank/Process number: 1\nPrinting at Rank/Process number: 2\nPrinting at Rank/Process number: 3\n\nEND: This need to print after all MPI_Send/MPI_Recv has been completed\n</code></pre>\n\n<p>NB: in this case, the printing of ranks 1 to 3 was in order, but this is just by chance as this can happen in any order. Actually, the above code will guaranty the ordering of the calls to <code>printf()</code> between the process #0 and the other processes, but it won't guaranty the ordering of the printing to the screen, as buffering and such can happen and mess things up.<br>\nIn fairness, it should work on most environments (most of the time). But strictly speaking, this isn't guaranteed.</p>\n"}], "owner": {"reputation": 857, "user_id": 1255576, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9287d0aa0e1fcc401cc6e53385d2ae8d?s=128&d=identicon&r=PG", "display_name": "D P.", "link": "https://stackoverflow.com/users/1255576/d-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9298, "favorite_count": 4, "accepted_answer_id": 39609017, "answer_count": 1, "score": 8, "last_activity_date": 1474439574, "creation_date": 1474414840, "last_edit_date": 1474416743, "question_id": 39605351, "link": "https://stackoverflow.com/questions/39605351/in-mpi-how-to-make-the-following-program-wait-till-all-calculations-are-complet", "title": "In MPI, how to make the following program Wait till all calculations are completed", "body": "<p>I am new to MPI and this program has been written using C language. In the following program, I am asking other processors to print messages. But I want to print the \"END\" message at process/rank 0 after all these other processes have been completed. To run this program I am using 4 processors and following commands <code>mpicc file.c -o objfile</code> and <code>mpirun -np 4 objfile</code> \n<br>Please show me with an example if possible.</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char** argv) \n{\n    MPI_Init(&amp;argc, &amp;argv);\n    int world_rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n    int world_size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n    int i;\n    double centroid[3];/*ignore this array*/\n\n    if (world_rank == 0) \n    {\n        int destination;\n        for (i=0; i&lt;3; i++)\n        {\n            /*Ignore centroid buffer been sent for now*/\n\n            destination = i+1;/*destination rank or process*/\n            MPI_Send(&amp;centroid, 3, MPI_DOUBLE, destination, 0, MPI_COMM_WORLD);\n        }\n\n        printf(\"\\nEND: This need to print after all MPI_Send/MPI_Recv has been completed\\n\\n\");\n    } \n    else\n    {   \n        MPI_Recv(&amp;centroid, 3, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);        \n        sleep(1); /*This represent many calculations that will happen here later, instead of sleep*/\n        printf(\"Printing at Rank/Process number: %d\\n\", world_rank);\n    }\n\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Result:</p>\n\n<p><code>END: This need to print after all MPI_Send/MPI_Recv has been completed</code>\n<code>\nPrinting at Rank/Process number: 2\nPrinting at Rank/Process number: 3\nPrinting at Rank/Process number: 1</code></p>\n\n<p>Please modify this code or show me with an example of how to wait till all these other processors are done\n<br><br></p>\n"}, {"tags": ["c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1474415236, "post_id": 39605321, "comment_id": 66519117, "body": "htonl(port) should be htons(port)"}], "answers": [{"comments": [{"owner": {"reputation": 8206, "user_id": 107510, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c7826f5b297baebddbd568f4b69a2d98?s=128&d=identicon&r=PG", "display_name": "WhyNotHugo", "link": "https://stackoverflow.com/users/107510/whynothugo"}, "edited": false, "score": 0, "creation_date": 1474512375, "post_id": 39606986, "comment_id": 66564077, "body": "Thanks a bunch! The <code>htons</code> vs <code>htonl</code> made the difference. Thanks for the extra suggestions too!"}, {"owner": {"reputation": 8206, "user_id": 107510, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c7826f5b297baebddbd568f4b69a2d98?s=128&d=identicon&r=PG", "display_name": "WhyNotHugo", "link": "https://stackoverflow.com/users/107510/whynothugo"}, "edited": false, "score": 0, "creation_date": 1474512425, "post_id": 39606986, "comment_id": 66564092, "body": "Why are you including <code>netinet&#47;in.h</code>? I&#39;m not getting a <code>Could not accept connections on socket: Invalid argument</code>; did I miss something? There&#39;s nothing <i>obvious</i> broken I can see."}], "tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": true, "score": 1, "last_activity_date": 1474428033, "creation_date": 1474428033, "answer_id": 39606986, "question_id": 39605321, "link": "https://stackoverflow.com/questions/39605321/nothing-happens-when-listening-on-a-tcp-port/39606986#39606986", "title": "Nothing happens when listening on a TCP port", "body": "<p>I got your program to work</p>\n\n<pre><code>$ ./hugo 8888 &amp;\n[1] 25330\n$ Listening on :8888\ntelnet -6 localhost 8888\nTrying ::1...\nConnected to localhost.\nEscape character is '^]'.\nConnection accepted\nhello \n&gt; Got data: hello\n^]\ntelnet&gt; quit\nConnection closed.\nBye!\n[1]+  Exit 10                 ./hugo 8888\n</code></pre>\n\n<p>making the following changes:</p>\n\n<pre><code>#include &lt;netinet/in.h&gt;\n...\nserv_addr.sin6_port = htons(port);\n...\nif ((sock_cli = accept(sockfd,  \n                       (struct sockaddr *) &amp;addr_cli, \n                       (socklen_t*) &amp;l)) == -1) {\n</code></pre>\n\n<p>As the comment suggested, <strong>htons</strong>(3) causes the correct port to be listened to.  And <strong>accept</strong>(2) returns a socket, so you have test explicitly for <code>-1</code>.  </p>\n\n<p>If I could suggest two small things, </p>\n\n<ul>\n<li>return EXIT_SUCCESS from <code>main</code>.  :-)  </li>\n<li>use <strong>err</strong>(3) instead of <strong>perror</strong>(3).  Less typing, and you really don't want to return <code>errno</code> anyway.  </li>\n</ul>\n"}], "owner": {"reputation": 8206, "user_id": 107510, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c7826f5b297baebddbd568f4b69a2d98?s=128&d=identicon&r=PG", "display_name": "WhyNotHugo", "link": "https://stackoverflow.com/users/107510/whynothugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 39606986, "answer_count": 1, "score": 0, "last_activity_date": 1474473185, "creation_date": 1474414570, "last_edit_date": 1474473185, "question_id": 39605321, "link": "https://stackoverflow.com/questions/39605321/nothing-happens-when-listening-on-a-tcp-port", "title": "Nothing happens when listening on a TCP port", "body": "<p>I'm trying to write a small, example app to listen to a TCP port, but it's not working for some reason.</p>\n\n<p>It see seems to reach <code>accept(3p)</code>, but <code>lsof -i :1080</code> reports that nothing is listening on that port. There are not errors, or anything else remotely obvious.</p>\n\n<p>Any hints?</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n\nconst int THREADS = 4;\nconst int BUFFER_SIZE = 256;\n\nvoid usage(char *app_name) {\n    printf(\"Usage: %s PORT\\n\", app_name);\n}\n\nint main(int argc, char **argv) {\n    struct sockaddr_in6 serv_addr, addr_cli;\n    char buffer[BUFFER_SIZE];\n    int sockfd, sock_cli, n, port;\n\n    if (argc &lt; 2) {\n        usage(argv[0]);\n        return -1;\n    }\n\n    port = atoi(argv[1]);\n\n    if ((sockfd = socket(AF_INET6, SOCK_STREAM, 0)) &lt; 0) {\n        perror(\"Could not open socket\");\n        return errno;\n    }\n\n    serv_addr.sin6_family = AF_INET6;\n    serv_addr.sin6_port = htonl(port);\n    // other addresses: INADDR_LOOPBACK, INADDR_ANY\n    serv_addr.sin6_addr = in6addr_any;\n    serv_addr.sin6_scope_id = 0;\n\n    if (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) != 0) {\n        perror(\"Could not bind to socket\");\n        return errno;\n    }\n\n    if (listen(sockfd, THREADS + 1) &lt; 0) {\n        perror(\"Could not listen to socket\");\n        return errno;\n    }\n\n    printf(\"Listening on :%d\\n\", port);\n\n    unsigned long l;\n    if ((sock_cli = accept(sockfd, (struct sockaddr *) &amp;addr_cli, (socklen_t*) &amp;l)) != 0) {\n        perror(\"Could not accept connections on socket\");\n        return errno;\n    }\n\n    printf(\"Connection accepted\\n\");\n\n    while ((n = recv(sock_cli, buffer, BUFFER_SIZE, 0)) &gt; 0) {\n        printf(\"&gt; Got data: %s\\n\", buffer);\n    }\n\n    if (n &lt; 0) {\n        printf(\"Could not receive data\\n\");\n        return errno;\n    }\n\n    printf(\"Bye!\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "zeromq"], "answers": [{"comments": [{"owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "edited": false, "score": 0, "creation_date": 1532359633, "post_id": 39620415, "comment_id": 89933475, "body": "Agreed, I always send first from a client. Start by sending a version number from a client to the server and the server replying with its version number, then both the client and server know how to communicate."}], "tags": [], "owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1474470823, "creation_date": 1474470823, "answer_id": 39620415, "question_id": 39605267, "link": "https://stackoverflow.com/questions/39605267/c-zeromq-zstr-recv-hangs/39620415#39620415", "title": "C ZeroMQ zstr_recv hangs", "body": "<p>I think you have your client and server mixed up, although in ZeroMQ client and server is not as strict as with normal sockets. Normally you would create a server with a REP socket that binds/receives/sends and a client with a REQ socket that connects/sends/receives. You should try this first and then experiment with ROUTER for the server (instead of REP) and DEALER for the client (instead of REQ).</p>\n"}], "owner": {"reputation": 73, "user_id": 2850099, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/56dccb745c60548b7d2588127aa2943f?s=128&d=identicon&r=PG&f=1", "display_name": "user2850099", "link": "https://stackoverflow.com/users/2850099/user2850099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474470823, "creation_date": 1474414223, "question_id": 39605267, "link": "https://stackoverflow.com/questions/39605267/c-zeromq-zstr-recv-hangs", "title": "C ZeroMQ zstr_recv hangs", "body": "<p>I have two simple programs: a client and a server. I'm trying to use zstr_sendfm and zstr_recv to send and receive a simple string. Roughly speaking, I'm using the code from the <a href=\"http://zguide.zeromq.org/c:fileio3\" rel=\"nofollow\">file transfer test</a> in the zeromq tutorial. Here's the server function:</p>\n\n<pre><code>#define PIPELINE = 10;\n\nint server()\n{\n    char *name = \"someName\";\n    zctx_t *ctx = zctx_new();\n    void *router = zsocket_new(ctx, ZMQ_ROUTER);\n    zsocket_set_hwm(router, PIPELINE*2);\n    if (0 == zsocket_connect(router, tcp://127.0.0.1:6000))\n    {\n        printf(\"failed to connect to router.\\n\");\n    }\n    printf( \"sending name %s\\n, name);\n    zstr_sendfm( router, name );\n    return 0;\n}\n</code></pre>\n\n<p>Here's the client function:</p>\n\n<pre><code>int client()\n{\n    zctx_t *ctx = zctx_new ();\n    void *dealer = zsocket_new (ctx, ZMQ_DEALER);\n    zsocket_bind(dealer, \"tcp://*:6000\")\n    char *receivedName = zstr_recv( dealer );\n    printf(\"received the following name: %s\\n\", receivedName);\n    return 0\n}\n</code></pre>\n\n<p>Both of these are run in two separate programs (which do nothing other than run their respective functions) on the same computer.</p>\n\n<p>Here's how things always play out:</p>\n\n<ol>\n<li>Start client function, which holds at \"zstr_recv\" as it's supposed to</li>\n<li>Start server function, which connects successfully, claims to have sent the data, and exits</li>\n<li>Client function continues to sit and wait, but claims to have not received anything from the server.</li>\n</ol>\n\n<p>What am I missing here? I've added a bunch of error checking and even tried this out in gdb with no luck.</p>\n\n<p>Help and advice appreciated.</p>\n"}, {"tags": ["c", "struct", "declaration", "definition"], "comments": [{"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 1, "creation_date": 1474412680, "post_id": 39605013, "comment_id": 66518427, "body": "You&#39;re declaring a struct inside the struct of the struct you&#39;re trying to define... say that 10x fast ;)"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 2, "creation_date": 1474412765, "post_id": 39605013, "comment_id": 66518448, "body": "Even if it did work, wouldn&#39;t it be infinite size. Since every TRIE_NODE contains 26 TRIE_NODES, which each contain 26 TRIE_NODEs and so on ..."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474412799, "post_id": 39605013, "comment_id": 66518457, "body": "because  Recursive definition is compiler can not determine the size."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1474412976, "post_id": 39605013, "comment_id": 66518503, "body": "&quot;Isn&#39;t this declaration equivalent to <code>TRIE_NODE node[1][26]</code>?&quot; - No, it isn&#39;t. Why?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1474413125, "post_id": 39605013, "comment_id": 66518547, "body": "&quot;when i try to declare the following function&quot; - Which function? There is no function! And an array is not a pointer is not an array!"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1474413173, "post_id": 39605013, "comment_id": 66518563, "body": "<code>struct Box { struct Box x };</code> ..."}, {"owner": {"reputation": 3053, "user_id": 1322693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bcf6557df415fcd3b6824338a38eb6b?s=128&d=identicon&r=PG", "display_name": "konkked", "link": "https://stackoverflow.com/users/1322693/konkked"}, "edited": false, "score": 1, "creation_date": 1474413324, "post_id": 39605013, "comment_id": 66518615, "body": "Why the down vote? Feel like this was a good question and it has a good answer"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1474414186, "post_id": 39605013, "comment_id": 66518840, "body": "What makes you think arrays would somehow be possible when single objects of the struct type itself are not? <b>Arrays are not pointers!</b>"}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 4279565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VDxNo.png?s=128&g=1", "display_name": "Selhar", "link": "https://stackoverflow.com/users/4279565/selhar"}, "edited": false, "score": 0, "creation_date": 1474413051, "post_id": 39605058, "comment_id": 66518525, "body": "Thanks a lot, i see the problem with the first declaration now. However, aren&#39;t pointers and arrays almost interchangeable? <code>struct TRIE_NODE* node[26]</code> shouldn&#39;t be equivalent to <code>struct TRIE_NODE[1][26]</code>? I just tried it and i get the same error as the first declaration. I say that because i was reading &quot;C primer plus&quot; and he oftenly mentions that both are interchangeable to the compiler, it all becomes the same pointer declaration at compilation time."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 116, "user_id": 4279565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VDxNo.png?s=128&g=1", "display_name": "Selhar", "link": "https://stackoverflow.com/users/4279565/selhar"}, "edited": false, "score": 0, "creation_date": 1474413112, "post_id": 39605058, "comment_id": 66518541, "body": "@Selhar nopes, they are not same neither interchangable, in general. Google &quot;Arrays are not pointers&quot;, read the C faq."}, {"owner": {"reputation": 116, "user_id": 4279565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VDxNo.png?s=128&g=1", "display_name": "Selhar", "link": "https://stackoverflow.com/users/4279565/selhar"}, "edited": false, "score": 0, "creation_date": 1474413165, "post_id": 39605058, "comment_id": 66518560, "body": "Well, thanks a lot, that&#39;s a bit depressing, i just spent a huge amount of time reading &quot;C primer plus&quot; and if he&#39;s wrong about that, i wonder what else i learned wrong."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 116, "user_id": 4279565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VDxNo.png?s=128&g=1", "display_name": "Selhar", "link": "https://stackoverflow.com/users/4279565/selhar"}, "edited": false, "score": 1, "creation_date": 1474413217, "post_id": 39605058, "comment_id": 66518579, "body": "@Selhar: <b>Never ever</b> think of arrays being pointers being arrays! But your conclusion about the &quot;C primer plus&quot; is good. Sadly to say, but there is a lot of nonsense being written about C. It becomes worse, as it actually is not <b>that</b> complicated. But one has to understand Cs fundamental concepts."}, {"owner": {"reputation": 116, "user_id": 4279565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VDxNo.png?s=128&g=1", "display_name": "Selhar", "link": "https://stackoverflow.com/users/4279565/selhar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474413615, "post_id": 39605058, "comment_id": 66518684, "body": "@Olaf What authors would you recommend for CS books in general? I plan on learning C++ after C, my idea was to read &quot;C++ Primer plus&quot;, since i liked &quot;C primer plus&quot; so much."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 116, "user_id": 4279565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VDxNo.png?s=128&g=1", "display_name": "Selhar", "link": "https://stackoverflow.com/users/4279565/selhar"}, "edited": false, "score": 0, "creation_date": 1474414040, "post_id": 39605058, "comment_id": 66518799, "body": "@Selhar: Whoever wrote the C standard document, search for C11 n1570 or look at the info-page. Not good to learn, but the only authoritative resource. Seriously: I don&#39;t know any good C book (and asking is off-topic here). Yet there is a recommendation site for C and C++ books on stack-overflow (also keep in mind they are <b>different</b> languages even for identical syntax!)."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1474412750, "creation_date": 1474412750, "answer_id": 39605058, "question_id": 39605013, "link": "https://stackoverflow.com/questions/39605013/why-a-structure-is-allowed-to-have-pointer-to-its-own-type-as-member-but-not/39605058#39605058", "title": "Why a structure is allowed to have &quot;pointer to its own type&quot; as member but not &quot;(an array of the) structure type&quot; itself?", "body": "<blockquote>\n  <p><em>when i try to declare the following function</em></p>\n</blockquote>\n\n<p><strong><em>Wait!!</em></strong> that's not a function, that's <code>typedef</code>-ing a structure, a user-defined type.</p>\n\n<hr>\n\n<p>That said, in the first case,</p>\n\n<pre><code>typedef struct TRIE_NODE\n{\n    char* word;\n    struct TRIE_NODE node[26];  //array of type struct TRIE_NODE\n}TRIE_NODE;\n</code></pre>\n\n<p>if this has to be possible, compiler needs to know the size of the <code>struct TRIE_NODE</code> <strong><em>before</em></strong> it has been defined, which is impossible. So it is invalid.</p>\n\n<p>On th other hand,</p>\n\n<pre><code>typedef struct TRIE_NODE\n{\n    char* word;\n    struct TRIE_NODE* node[26];  //array of pointers (of type struct TRIE_NODE)\n}TRIE_NODE; \n</code></pre>\n\n<p>is fine, as you're allocating (array of) pointers to the structure, the actual size of the structure is not required to be known by compiler at that point. So, the compiler happily allocates the pointers and the definition (construct) is perfectly valid.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474430373, "post_id": 39607271, "comment_id": 66522765, "body": "Pointers might have different sizes. (But all pointers to struct type have the same size, for this reason)."}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474431136, "post_id": 39607271, "comment_id": 66522930, "body": "I stand corrected, thank you.  That must be what <i>Pointers to other types need not have the same representation or alignment requirements.</i> means."}], "tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 1, "last_activity_date": 1474431297, "last_edit_date": 1474431297, "creation_date": 1474430091, "answer_id": 39607271, "question_id": 39605013, "link": "https://stackoverflow.com/questions/39605013/why-a-structure-is-allowed-to-have-pointer-to-its-own-type-as-member-but-not/39607271#39607271", "title": "Why a structure is allowed to have &quot;pointer to its own type&quot; as member but not &quot;(an array of the) structure type&quot; itself?", "body": "<p>To answer your own question, ask: how many bytes will </p>\n\n<pre><code>struct TRIE_NODE node[26];\n</code></pre>\n\n<p>occupy?  In fact, what would you expect <code>sizeof(struct TRIE_NODE)</code> to be?  </p>\n\n<p>The reason </p>\n\n<pre><code>struct TRIE_NODE *node[26];\n</code></pre>\n\n<p>works is that we know the value of <code>sizeof(struct TRIE_NODE*)</code>.  Because <em>all struct pointers have the same size</em>, we can allocate an array of <em>N</em> struct pointers, no matter their type, even if incompletely defined.  </p>\n\n<blockquote>\n  <p>aren't pointers and arrays almost interchangeable?</p>\n</blockquote>\n\n<p>The <em>syntax</em> for pointers and arrays is similar.  You can subscript a pointer, and you can add to an array's address.  But they <em>define</em> different things.  Basically: an array holds data, and a pointer holds an address.  </p>\n\n<p>In certain parts of the C standard library, you'll find structures defined like this:</p>\n\n<pre><code>struct S {\n    int len;\n    char data[1];\n};\n</code></pre>\n\n<p>You might be tempted to ask why not use a pointer? </p>\n\n<pre><code>struct Z {\n    int len;\n    char *data;\n};\n</code></pre>\n\n<p>Answer: <code>struct S</code> is actually bigger than the 5 or so bytes it seems to occupy, and the data portion begins immediately after <code>len</code>.  In the putative <code>struct Z</code> example, <code>data</code> doesn't <em>begin</em> the data; the data would be somewhere else, wherever <code>data</code> <em>points</em>.</p>\n\n<p>Assuming the structures are appropriate initialized, in both cases <code>data[0]</code> will address the first byte of the array.  They're syntactically similar.  But the memory layout is different.  In the <code>S</code> case, that byte will be pretty close to <code>(char*)&amp;len + sizeof(len)</code>.  In the <code>Z</code> case it will be wherever <code>data</code> points.  </p>\n"}, {"tags": [], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "is_accepted": false, "score": 1, "last_activity_date": 1474432182, "creation_date": 1474432182, "answer_id": 39607577, "question_id": 39605013, "link": "https://stackoverflow.com/questions/39605013/why-a-structure-is-allowed-to-have-pointer-to-its-own-type-as-member-but-not/39607577#39607577", "title": "Why a structure is allowed to have &quot;pointer to its own type&quot; as member but not &quot;(an array of the) structure type&quot; itself?", "body": "<p>Nobody mention this, but if struct was allowed to have member or array of itself (not a pointer, but regular member or array), then the struct would be recursive and with infinite size, because the member will have one more member inside of same type and so on until infinity.</p>\n"}], "owner": {"reputation": 116, "user_id": 4279565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VDxNo.png?s=128&g=1", "display_name": "Selhar", "link": "https://stackoverflow.com/users/4279565/selhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 39605058, "answer_count": 3, "score": 1, "last_activity_date": 1517261722, "creation_date": 1474412523, "last_edit_date": 1517261722, "question_id": 39605013, "link": "https://stackoverflow.com/questions/39605013/why-a-structure-is-allowed-to-have-pointer-to-its-own-type-as-member-but-not", "title": "Why a structure is allowed to have &quot;pointer to its own type&quot; as member but not &quot;(an array of the) structure type&quot; itself?", "body": "<p>when i try to declare the following function</p>\n\n<pre><code>typedef struct TRIE_NODE\n{\n    char* word;\n    struct TRIE_NODE node[26];\n}TRIE_NODE;\n</code></pre>\n\n<p>I get the following error: </p>\n\n<blockquote>\n  <p>definition of 'struct TRIE_NODE' is not complete until the closing '}'</p>\n</blockquote>\n\n<p>However, if i declare this function with a pointer to the 26 nodes, it compiles just fine.</p>\n\n<pre><code>typedef struct TRIE_NODE\n{\n    char* word;\n    struct TRIE_NODE* node[26];\n}TRIE_NODE;\n</code></pre>\n\n<p>I imagine that, since this is not an instance, it's impossible for me to get a pointer to the first of those 26 arrays, but if that is the problem, how is     <code>TRIE_NODE* node[26]</code> not also a problem? Isn't this declaration equivalent to <code>TRIE_NODE node[1][26]</code>?</p>\n"}, {"tags": ["c", "arrays", "shell", "strtok", "stringtokenizer"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1474410430, "post_id": 39604667, "comment_id": 66517775, "body": "How are you allocating <code>param</code>? Oh, and don&#39;t write <code>return(param)</code>, <code>return</code> is not a funtion. You also have a memory leak, you need to <code>free()</code> <code>line</code>."}, {"owner": {"reputation": 1, "user_id": 4668251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2299fd6a19b2a3c2507ee831beed009a?s=128&d=identicon&r=PG", "display_name": "Chris Masterson", "link": "https://stackoverflow.com/users/4668251/chris-masterson"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1474410796, "post_id": 39604667, "comment_id": 66517874, "body": "just added the following to allocate &#39;param&#39;, using <i>param = malloc(buffer * sizeof(char *));</i>  where <i>buffer = 64;</i> .  also fixed the return issue and the memory leak"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1474410907, "post_id": 39604667, "comment_id": 66517913, "body": "The <code>return</code> thing was ok, it&#39;s not an issue. But it just looks ugly."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1474411013, "post_id": 39604667, "comment_id": 66517947, "body": "You can&#39;t <i>&quot;fix&quot;</i> the memory leak because all of your pointers point to that memory. And there&#39;s not enough information in the question to know where the problems are. See <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": -1, "last_activity_date": 1474421946, "last_edit_date": 1474421946, "creation_date": 1474421494, "answer_id": 39606177, "question_id": 39604667, "link": "https://stackoverflow.com/questions/39604667/trying-to-use-strtok-for-a-shell-function-in-c/39606177#39606177", "title": "Trying to use strtok() for a shell function in C", "body": "<p>something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define token_delimiter \" \\n\\r\"\n\nchar **shell_read(void){//Parameters are not necessary. because they are made in this function.\n    char *line = NULL;\n    size_t size = 0;\n    ssize_t len;\n    if(-1 == (len = getline(&amp;line, &amp;size, stdin))){\n        free(line);\n        return NULL;\n    }\n\n    char **param = malloc(sizeof(*param) * ((len + 1)/2 + 1));//last +1 for NULL\n    int i = 0;\n    char *line_token = strtok(line, token_delimiter);\n\n    while(line_token != NULL){\n        param[i++] = strdup(line_token);//need allocate and copy\n        line_token = strtok(NULL, token_delimiter);\n    }\n    param[i] = NULL;\n    free(line);\n\n    return param;\n}\n\nint main(void){\n    putchar('&gt;');fflush(stdout);\n\n    char **tokens = shell_read();\n    if(tokens){\n        for(char **token = tokens; *token; ++token){\n            puts(*token);\n            free(*token);\n        }\n        free(tokens);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4668251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2299fd6a19b2a3c2507ee831beed009a?s=128&d=identicon&r=PG", "display_name": "Chris Masterson", "link": "https://stackoverflow.com/users/4668251/chris-masterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1474421946, "creation_date": 1474410357, "last_edit_date": 1474410922, "question_id": 39604667, "link": "https://stackoverflow.com/questions/39604667/trying-to-use-strtok-for-a-shell-function-in-c", "title": "Trying to use strtok() for a shell function in C", "body": "<p>I am trying to tokenize the user inputed commands for a shell program. The program runs but I don't think that it is filling the param array I have declared.  I'm sorry if it seems that I don't have a ton of information as I am learning this as a do it, but I am not sure why it isn't filling param.  Any help would be grateful and if you need any additional information please feel free to ask.</p>\n\n<pre><code>#include \"HeaderFile.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define token_delimiter \" \\n\\r\"\n\nchar **shell_read(char *line, char **param){\n\n   line = NULL;\n   ssize_t size = 0;\n   getline(&amp;line, &amp;size, stdin);\n   //printf(\"%s\", line);\n   int i = 0;\n   char *line_token;\n   line_token = strtok(line, token_delimiter);\n   printf(\"%s\", line_token);\n   for(i=1; line_token!=NULL; i++){\n       param[i] = line_token;\n       line_token = strtok(NULL, token_delimiter);\n\n   }\n   param[0] = NULL;\n   return(param);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1474409056, "post_id": 39604264, "comment_id": 66517387, "body": "Consider writing the inner loop as <code>for( lowy = lowx + 1; lowy &lt;= higher; lowy++ )</code> to avoid repetitions."}, {"owner": {"reputation": 69, "user_id": 6855550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f861cb3e8c927afef703f5b271bd4254?s=128&d=identicon&r=PG&f=1", "display_name": "Submersed24", "link": "https://stackoverflow.com/users/6855550/submersed24"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1474411836, "post_id": 39604264, "comment_id": 66518184, "body": "Good point, it makes it more efficient. Thanks!"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1474457997, "post_id": 39604264, "comment_id": 66537668, "body": "On further thinking, you may have misinterpret the definition of amicable numbers, which are <a href=\"https://en.wikipedia.org/wiki/Amicable_numbers\" rel=\"nofollow noreferrer\">two different numbers so related that the sum of the proper divisors of each is equal to the other number</a>. You can find a list of the first pairs at <a href=\"http://oeis.org/A063990\" rel=\"nofollow noreferrer\">OEIS - A063990</a>. Look at this <a href=\"http://stackoverflow.com/a/28268160/4944425\">Q&amp;A</a> for a more interesting optimization."}, {"owner": {"reputation": 69, "user_id": 6855550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f861cb3e8c927afef703f5b271bd4254?s=128&d=identicon&r=PG&f=1", "display_name": "Submersed24", "link": "https://stackoverflow.com/users/6855550/submersed24"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1474545771, "post_id": 39604264, "comment_id": 66580756, "body": "Yah, that was a logical error. I changed if( sumDivisors( lowx ) == sumDivisors( lowy ) ) to if( sumDivisors( lowx  ) == lowy &amp;&amp; if( sumDivisors( lowy ) == lowx), and that worked"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6855550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f861cb3e8c927afef703f5b271bd4254?s=128&d=identicon&r=PG&f=1", "display_name": "Submersed24", "link": "https://stackoverflow.com/users/6855550/submersed24"}, "edited": false, "score": 1, "creation_date": 1474411497, "post_id": 39604320, "comment_id": 66518083, "body": "Oh gosh... thank you... you saved me. I am used to null being zero"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 69, "user_id": 6855550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f861cb3e8c927afef703f5b271bd4254?s=128&d=identicon&r=PG&f=1", "display_name": "Submersed24", "link": "https://stackoverflow.com/users/6855550/submersed24"}, "edited": false, "score": 0, "creation_date": 1474412478, "post_id": 39604320, "comment_id": 66518385, "body": "@Submersed24 What does it have to do with null being zero?"}, {"owner": {"reputation": 69, "user_id": 6855550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f861cb3e8c927afef703f5b271bd4254?s=128&d=identicon&r=PG&f=1", "display_name": "Submersed24", "link": "https://stackoverflow.com/users/6855550/submersed24"}, "edited": false, "score": 0, "creation_date": 1474420323, "post_id": 39604320, "comment_id": 66520432, "body": "I used to think variables are defaulted at 0, so you don&#39;t need to set them to zero"}, {"owner": {"reputation": 1554, "user_id": 4935567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a57653ee2ddf94addd6fb6d2d059a131?s=128&d=identicon&r=PG&f=1", "display_name": "Masked Man", "link": "https://stackoverflow.com/users/4935567/masked-man"}, "reply_to_user": {"reputation": 69, "user_id": 6855550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f861cb3e8c927afef703f5b271bd4254?s=128&d=identicon&r=PG&f=1", "display_name": "Submersed24", "link": "https://stackoverflow.com/users/6855550/submersed24"}, "edited": false, "score": 0, "creation_date": 1474443155, "post_id": 39604320, "comment_id": 66527928, "body": "@Submersed24, I&#39;m glad that it helped! <code>:)</code>"}], "tags": [], "owner": {"reputation": 1554, "user_id": 4935567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a57653ee2ddf94addd6fb6d2d059a131?s=128&d=identicon&r=PG&f=1", "display_name": "Masked Man", "link": "https://stackoverflow.com/users/4935567/masked-man"}, "is_accepted": true, "score": 6, "last_activity_date": 1474408457, "creation_date": 1474408457, "answer_id": 39604320, "question_id": 39604264, "link": "https://stackoverflow.com/questions/39604264/c-program-error-outputting-0/39604320#39604320", "title": "C program error - outputting 0", "body": "<p>You are not assigning any value to total in your code:</p>\n\n<pre><code>int sumDivisors( int num )\n{\n  int counter, total;\n  for( counter = 1; counter &lt; num; counter++ )\n    {\n      if( num % counter == 0 )\n        {\n            total += counter;\n        }\n    }\n  return ( total );\n}\n</code></pre>\n\n<p>so it contains garbage not predictable value!</p>\n\n<p>it should be like: <code>int counter, total = 0;</code></p>\n"}], "owner": {"reputation": 69, "user_id": 6855550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f861cb3e8c927afef703f5b271bd4254?s=128&d=identicon&r=PG&f=1", "display_name": "Submersed24", "link": "https://stackoverflow.com/users/6855550/submersed24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 39604320, "answer_count": 1, "score": 0, "last_activity_date": 1474452248, "creation_date": 1474408213, "last_edit_date": 1474452248, "question_id": 39604264, "link": "https://stackoverflow.com/questions/39604264/c-program-error-outputting-0", "title": "C program error - outputting 0", "body": "<p>I have been trying to get this to work for days now and I still cannot figure out the error. When I output the code, it prints, but it will not find the amicable pairs (divisor of first == second, and vice versa).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define _USE_MATH_DEFINES\n#include &lt;math.h&gt;\n\nint sumDivisors( int num );\n\nint sumDivisors( int num )\n{\n  int counter, total;\n  for( counter = 1; counter &lt; num; counter++ )\n    {\n      if( num % counter == 0 )\n        {\n          total += counter;\n        }\n    }\n  return ( total );\n}\n\nint main( void )\n{\n  int higher, lower, lowx, lowy, x, y, numOfPairs = 0;\n\n  printf( \"This program finds all amicable numbers within a range. \\n\" );\n  printf( \"Please enter a lower limit: \\n\" );\n  scanf( \"%d\", &amp;lower );\n  printf( \"Please enter a higher limit: \\n\" );\n  scanf( \"%d\", &amp;higher );\n\n\n  for( lowx = lower; lowx &lt;= higher; lowx++ )\n    {\n      for( lowy = lower; lowy &lt;= higher; lowy++ )\n        {\n          if( sumDivisors( lowx ) == sumDivisors( lowy ) )\n            {\n              numOfPairs++;\n              printf( \"Pair #%d: (%d, %d)\\n\", numOfPairs, lowx, lowy );\n            }\n        }\n    }\n\n  printf( \"There are %d amicable pairs from %d to %d\\n\", numOfPairs, lower, higher );\n  system(\"pause\");\n  return ( 0 );\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop", "bit-shift"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1474407558, "post_id": 39604107, "comment_id": 66516809, "body": "why not a <code>i=8; do { ...; i &gt;&gt;= 1; } while(i &gt; 0)</code>?"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 3, "creation_date": 1474407623, "post_id": 39604107, "comment_id": 66516831, "body": "Both of you two read the problem statement. He wants the trailing zero loop to run."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 1, "creation_date": 1474407760, "post_id": 39604107, "comment_id": 66516874, "body": "@Joshua: Enlighten me. Why is this UB?"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474407827, "post_id": 39604107, "comment_id": 66516902, "body": "@Olaf: Turns out I misread something."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1474407970, "post_id": 39604107, "comment_id": 66516961, "body": "Ah we&#39;re back to <a href=\"http://codegolf.stackexchange.com\">code golfing</a>. Here is my take, then: <code>int i = 8 &lt;&lt; 1; while (i) printf(&quot;%d&quot;, i&gt;&gt;1), i&gt;&gt;=1;</code> works for me."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1474408426, "post_id": 39604107, "comment_id": 66517166, "body": "@RadLexus, I&#39;m not generally inclined to attribute elegance to heavily golfed code.  Golfed code is certainly <i>short</i>, but that&#39;s not all there is to elegance."}, {"owner": {"reputation": 422, "user_id": 1480787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/260b17a2dc0e0a9bb91f3253dfc192b8?s=128&d=identicon&r=PG", "display_name": "Noah", "link": "https://stackoverflow.com/users/1480787/noah"}, "edited": false, "score": 0, "creation_date": 1474408620, "post_id": 39604107, "comment_id": 66517247, "body": "yes, not really looking for code golfing. readability is more important imo."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474408684, "post_id": 39604107, "comment_id": 66517260, "body": "@JohnBollinger: I meant that to emphasize code golfing is off-topic for SO. However, I stand by the underlying <i>solution</i> :), which is moving the stop criterium by a single step. (I see it has been submitted as an answer.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1474410271, "post_id": 39604107, "comment_id": 66517729, "body": "Perhaps <code>for (int i = 8, j = -1; j; i &gt;&gt;= 1) {         printf(&quot;%d&quot;, i);         j = i;     }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474407954, "post_id": 39604152, "comment_id": 66516953, "body": "@user3386109: Also I eliminated the pointless loop test (which is the main change)."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1474408358, "post_id": 39604152, "comment_id": 66517139, "body": "@user3386109: And my answer is you can&#39;t do that if that 8 is really a variable."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1474407527, "creation_date": 1474407527, "answer_id": 39604152, "question_id": 39604107, "link": "https://stackoverflow.com/questions/39604107/for-loop-with-shift-right-until-zero-and-include-zero/39604152#39604152", "title": "For loop with shift right until zero, and include zero", "body": "<p>The best I can do is:</p>\n\n<pre><code>for(int i = 8;;) {\n    printf(\"%d\", i);\n    if (!i) break;\n    i &gt;&gt;= 1;\n}\n</code></pre>\n\n<p>Some (N + .5) loops can be packed into the condition clause; however this isn't one of them.</p>\n"}, {"comments": [{"owner": {"reputation": 422, "user_id": 1480787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/260b17a2dc0e0a9bb91f3253dfc192b8?s=128&d=identicon&r=PG", "display_name": "Noah", "link": "https://stackoverflow.com/users/1480787/noah"}, "edited": false, "score": 0, "creation_date": 1474408180, "post_id": 39604185, "comment_id": 66517067, "body": "I am hoping there is some trick to keep the logic confined to the for loop, but if the extra if statement is necessary then I can keep it."}, {"owner": {"reputation": 422, "user_id": 1480787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/260b17a2dc0e0a9bb91f3253dfc192b8?s=128&d=identicon&r=PG", "display_name": "Noah", "link": "https://stackoverflow.com/users/1480787/noah"}, "edited": false, "score": 1, "creation_date": 1474408234, "post_id": 39604185, "comment_id": 66517090, "body": "Your alternative is starting to look a little better though."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1474408296, "post_id": 39604185, "comment_id": 66517109, "body": "I almost wrote that second loop but bailed out after considering the starting case of 2^31."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1474408616, "post_id": 39604185, "comment_id": 66517246, "body": "@Joshua, if your existing code handles 2^31 then so does my second loop.  More likely, however, your <code>int</code>s are 32-bit, so 2^31 is outside their range.  My change to type <code>unsigned int</code> was intentional, for exactly this purpose.  If you need more range than <code>unsigned int</code> provides then you probably have wider types available.  In the end, of course, yes, you expend one bit on having a starting value larger than anything you intend to print."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1474408884, "post_id": 39604185, "comment_id": 66517330, "body": "@JohnBollinger: There exists a platform in which unsigned int is no wider than int. Other than that what you say is correct."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1474409386, "post_id": 39604185, "comment_id": 66517492, "body": "@Joshua, there are many platforms on which <code>unsigned int</code> is no wider than <code>int</code>, but few, if any, where the former does not have more <i>precision</i>.  You&#39;re right, though, that the unsigned type may have a padding bit instead of a value bit where the signed type has its sign bit.  Inasmuch as the ranges of integer types are implementation-defined anyway, however, the type that you must choose depends on the implementation in any case."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1474408082, "last_edit_date": 1474408082, "creation_date": 1474407716, "answer_id": 39604185, "question_id": 39604107, "link": "https://stackoverflow.com/questions/39604107/for-loop-with-shift-right-until-zero-and-include-zero/39604185#39604185", "title": "For loop with shift right until zero, and include zero", "body": "<blockquote>\n  <p>Is there a more elegant way to do the below for loop. The if statement to check for zero and then break looks ugly, but if I don't include it the code will infinite loop.</p>\n</blockquote>\n\n<p>If you <em>do</em> include it, then it's pointless to provide a loop termination condition in the <code>for</code> statement.  Elegance may be somewhat in the eye of the beholder, but since your loop termination condition will always be satisfied, I might instead write the loop like this:</p>\n\n<pre><code>for (int i = 8; ; i &gt;&gt;= 1) {\n    printf(\"%d\", i);\n    if (i == 0) {\n        break;\n    }\n}\n</code></pre>\n\n<p>Alternatively, you could restructure it so that the right shift is performed after the termination test, but before the rest of the loop body:</p>\n\n<pre><code>for (unsigned int i = 8 &lt;&lt; 1; i; ) {\n    i &gt;&gt;= 1;\n    printf(\"%u\", i);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": false, "score": 0, "last_activity_date": 1474408127, "creation_date": 1474408127, "answer_id": 39604245, "question_id": 39604107, "link": "https://stackoverflow.com/questions/39604107/for-loop-with-shift-right-until-zero-and-include-zero/39604245#39604245", "title": "For loop with shift right until zero, and include zero", "body": "<p>Since you know you always want to print \"0\" in the end, you could:</p>\n\n<pre><code>for (int i = 8; i &gt; 0; i &gt;&gt;= 1) {\n  printf(\"%d\", i);\n}\nprintf(\"0\");\n</code></pre>\n\n<p>Alternatively, you could first **left shift\"\" the starting value, then do:</p>\n\n<pre><code>for (int i = 8 &lt;&lt; 1; i &gt; 0;) {\n  i &gt;&gt;= 1;\n  printf(\"%d\", i);\n}\n</code></pre>\n\n<p>The downside of this method is that you lose bit width. If the starting value is to big, you'll get an overflow in the left shift.</p>\n"}, {"comments": [{"owner": {"reputation": 422, "user_id": 1480787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/260b17a2dc0e0a9bb91f3253dfc192b8?s=128&d=identicon&r=PG", "display_name": "Noah", "link": "https://stackoverflow.com/users/1480787/noah"}, "edited": false, "score": 0, "creation_date": 1474408428, "post_id": 39604250, "comment_id": 66517168, "body": "The &quot;printf&quot; in my real life code is actual several lines of code using the loop variable, so please take that into consideration."}, {"owner": {"reputation": 1554, "user_id": 4935567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a57653ee2ddf94addd6fb6d2d059a131?s=128&d=identicon&r=PG&f=1", "display_name": "Masked Man", "link": "https://stackoverflow.com/users/4935567/masked-man"}, "reply_to_user": {"reputation": 422, "user_id": 1480787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/260b17a2dc0e0a9bb91f3253dfc192b8?s=128&d=identicon&r=PG", "display_name": "Noah", "link": "https://stackoverflow.com/users/1480787/noah"}, "edited": false, "score": 0, "creation_date": 1474408547, "post_id": 39604250, "comment_id": 66517211, "body": "@Noah, so insert some white-spaces(line breaks or so) in between! <code>:)</code>"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1474410807, "post_id": 39604250, "comment_id": 66517877, "body": "Any c++ statement (or program) can be made into 1 line just by removing all the &#39;\\n&#39; characters, that doesnt make it better, it usually makes it worse."}, {"owner": {"reputation": 1554, "user_id": 4935567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a57653ee2ddf94addd6fb6d2d059a131?s=128&d=identicon&r=PG&f=1", "display_name": "Masked Man", "link": "https://stackoverflow.com/users/4935567/masked-man"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1474443096, "post_id": 39604250, "comment_id": 66527891, "body": "@Ben, I know my code is not very clean and I mentioned that in my answer and also the questioner was looking for a compact way to do that. although by adding a simple explanation comment to my code it would be like an inline function! <code>:)</code>"}], "tags": [], "owner": {"reputation": 1554, "user_id": 4935567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a57653ee2ddf94addd6fb6d2d059a131?s=128&d=identicon&r=PG&f=1", "display_name": "Masked Man", "link": "https://stackoverflow.com/users/4935567/masked-man"}, "is_accepted": false, "score": -1, "last_activity_date": 1474408153, "creation_date": 1474408153, "answer_id": 39604250, "question_id": 39604107, "link": "https://stackoverflow.com/questions/39604107/for-loop-with-shift-right-until-zero-and-include-zero/39604250#39604250", "title": "For loop with shift right until zero, and include zero", "body": "<p>Here is my not so simple but one line code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int i = 32;\n    while(printf(\"%d\\n\", i), i &gt;&gt;= 1, !i ? printf(\"0\\n\"), 0 : 1);\n}\n</code></pre>\n\n<p>I hope it helps! <code>:)</code></p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1474408972, "creation_date": 1474408972, "answer_id": 39604421, "question_id": 39604107, "link": "https://stackoverflow.com/questions/39604107/for-loop-with-shift-right-until-zero-and-include-zero/39604421#39604421", "title": "For loop with shift right until zero, and include zero", "body": "<p>If you start with the bit number instead of the bit mask, you can write the loop like this</p>\n\n<pre><code>for ( int bit=3, mask=1&lt;&lt;bit; bit &gt;= -1; bit--, mask &gt;&gt;= 1 ) {\n    printf( \"%d\\n\", mask );\n}\n</code></pre>\n"}], "owner": {"reputation": 422, "user_id": 1480787, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/260b17a2dc0e0a9bb91f3253dfc192b8?s=128&d=identicon&r=PG", "display_name": "Noah", "link": "https://stackoverflow.com/users/1480787/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1474410574, "creation_date": 1474407278, "last_edit_date": 1474410574, "question_id": 39604107, "link": "https://stackoverflow.com/questions/39604107/for-loop-with-shift-right-until-zero-and-include-zero", "title": "For loop with shift right until zero, and include zero", "body": "<p>Is there a more elegant way to do the below for loop. The if statement to check for zero and then break looks ugly, but if I don't include it the code will infinite loop.</p>\n\n<pre><code>for (int i = 8; i &gt;= 0; i &gt;&gt;= 1) {\n    printf(\"%d\", i);\n    if (i == 0) {\n        break;\n    }\n}\n</code></pre>\n\n<p>The ideal output should be:</p>\n\n<pre><code>8\n4\n2\n1\n0\n</code></pre>\n\n<p>Even though I said for loop, any loop structure can be used, e.g. while or do-while</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1474407652, "post_id": 39604103, "comment_id": 66516837, "body": "change your new_employee function to return person i.e. <code>employee * new_employee(...) { ... return person; }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 6855185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b5dcfaf184f1ec86bb9bbca9e82755?s=128&d=identicon&r=PG&f=1", "display_name": "engel22", "link": "https://stackoverflow.com/users/6855185/engel22"}, "is_accepted": true, "score": 3, "last_activity_date": 1474407466, "creation_date": 1474407466, "answer_id": 39604142, "question_id": 39604103, "link": "https://stackoverflow.com/questions/39604103/c-passing-by-reference-pointer-crashes/39604142#39604142", "title": "C passing by reference (pointer) crashes", "body": "<p>Your problem is that <code>new_employee()</code> can't change the <code>bob</code> pointer in main. You could make it work by using a double pointer. You can think of the pointer meaning that you're passing the struct by reference, but the pointer value itself is still passed by value. If you pass a pointer to the pointer, then you could change the pointer <code>bob</code> back in main.</p>\n\n<p>However, I think the better solution is to have <code>new_employee()</code> return the pointer. Then in main you just assign the result to bob. Like this:</p>\n\n<pre><code>employee *new_employee (char *name, double salary) {\n    employee *person = malloc(sizeof(employee));\n    person-&gt;name = malloc(strlen(name) + 1);\n    strcpy(person-&gt;name, name);\n    person-&gt;salary = salary;\n    printf(\"Employee: name=%s salary=%f\\n\", person-&gt;name, person-&gt;salary);\n    return person;\n}\n\n\nint main(int argc, char *argv[])\n{\n    employee *bob = 0;\n    bob = new_employee(\"Bob Doe\", 1000);\n    printf(\"Employee: name=%s salary=%f\\n\", bob-&gt;name, bob-&gt;salary);\n    return 0;\n}\n</code></pre>\n\n<p>Also keep in mind that you should be doing error checking (for example, what if <code>malloc()</code> fails?) and you also should use <code>free()</code> on <code>bob-&gt;name</code> and <code>bob</code> before the program ends. If you allocate a lot of new employees and don't <code>free()</code> them when you're done, you could use up a lot of memory for no reason (memory leak).</p>\n\n<p>You could make a free function such as:</p>\n\n<pre><code>void free_employee(employee *person) {\n  free(person-&gt;name);\n  free(person);\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6855194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7525efbd15b5751d34e99f2155237df0?s=128&d=identicon&r=PG&f=1", "display_name": "michalska7", "link": "https://stackoverflow.com/users/6855194/michalska7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1474407491, "accepted_answer_id": 39604142, "answer_count": 1, "score": 1, "last_activity_date": 1474407466, "creation_date": 1474407260, "question_id": 39604103, "link": "https://stackoverflow.com/questions/39604103/c-passing-by-reference-pointer-crashes", "closed_reason": "Duplicate", "title": "C passing by reference (pointer) crashes", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct employee {\n    char *name;\n    double salary;\n} employee;\n\nvoid new_employee (employee *person, char *name, double salary) {\n    person = malloc(sizeof(employee));\n    person-&gt;name = malloc(strlen(name) + 1);\n    strcpy(person-&gt;name, name);\n    person-&gt;salary = salary;\n    printf(\"Employee: name=%s salary=%f\\n\", person-&gt;name, person-&gt;salary);\n}\n\n\nint main(int argc, char *argv[])\n{\n    employee *bob = 0;\n    new_employee(bob, \"Bob Doe\", 1000);\n    printf(\"Employee: name=%s salary=%f\\n\", bob-&gt;name, bob-&gt;salary);\n    return 0;\n}\n</code></pre>\n\n<p>I'm not sure what is wrong, but I can use the struct in new_employee, but it breaks when I try to use it from main. Basically the first printf works the the second one crashes. I think that main is not getting bob updated, but I am using a pointer, so it should be pass by reference.</p>\n"}, {"tags": ["c", "command-line-arguments"], "comments": [{"owner": {"reputation": 11711, "user_id": 1361787, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XR9JP.png?s=128&g=1", "display_name": "ChiefTwoPencils", "link": "https://stackoverflow.com/users/1361787/chieftwopencils"}, "edited": false, "score": 0, "creation_date": 1474406455, "post_id": 39603851, "comment_id": 66516373, "body": "Do you mean command line arguments or user input?"}, {"owner": {"reputation": 93, "user_id": 6624110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca61c960c58c38eb9d3db18c3e481589?s=128&d=identicon&r=PG&f=1", "display_name": "ufo", "link": "https://stackoverflow.com/users/6624110/ufo"}, "reply_to_user": {"reputation": 11711, "user_id": 1361787, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XR9JP.png?s=128&g=1", "display_name": "ChiefTwoPencils", "link": "https://stackoverflow.com/users/1361787/chieftwopencils"}, "edited": false, "score": 0, "creation_date": 1474406591, "post_id": 39603851, "comment_id": 66516418, "body": "@ChiefTwoPencils, Command line arguments."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1474406775, "post_id": 39603851, "comment_id": 66516494, "body": "You can&#39;t do it \u2014 well, not without extortionate pain and a special library.  Pass the array from the command line to a modified sort function that takes an array.  The original code can then use this other function to do the sorting of the array it creates from a variable argument list.  The basic problem is that you can&#39;t build up a variable number of arguments in a function call argument list at run-time.  (But it isn&#39;t really clear what your sort function is up to.  It sorts some data, but does nothing with the sorted data.)"}, {"owner": {"reputation": 11711, "user_id": 1361787, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XR9JP.png?s=128&g=1", "display_name": "ChiefTwoPencils", "link": "https://stackoverflow.com/users/1361787/chieftwopencils"}, "edited": false, "score": 0, "creation_date": 1474406824, "post_id": 39603851, "comment_id": 66516520, "body": "Just pass the argument array in knowing you don&#39;t want the first one; easy."}, {"owner": {"reputation": 93, "user_id": 6624110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca61c960c58c38eb9d3db18c3e481589?s=128&d=identicon&r=PG&f=1", "display_name": "ufo", "link": "https://stackoverflow.com/users/6624110/ufo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1474407497, "post_id": 39603851, "comment_id": 66516789, "body": "@Jonathan Leffler, Do you mean that it is not possible to call &#39;args&#39; multiple times? Is this the reason why segmentation fault &#39;redeclaration of args with no linkage&#39; appears?"}, {"owner": {"reputation": 93, "user_id": 6624110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca61c960c58c38eb9d3db18c3e481589?s=128&d=identicon&r=PG&f=1", "display_name": "ufo", "link": "https://stackoverflow.com/users/6624110/ufo"}, "reply_to_user": {"reputation": 11711, "user_id": 1361787, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XR9JP.png?s=128&g=1", "display_name": "ChiefTwoPencils", "link": "https://stackoverflow.com/users/1361787/chieftwopencils"}, "edited": false, "score": 0, "creation_date": 1474407725, "post_id": 39603851, "comment_id": 66516865, "body": "@ChiefTwoPencils, Could you show a code sample?"}, {"owner": {"reputation": 11711, "user_id": 1361787, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XR9JP.png?s=128&g=1", "display_name": "ChiefTwoPencils", "link": "https://stackoverflow.com/users/1361787/chieftwopencils"}, "edited": false, "score": 0, "creation_date": 1474408118, "post_id": 39603851, "comment_id": 66517037, "body": "The current answer is as good as any I can give."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1474408314, "post_id": 39603851, "comment_id": 66517118, "body": "I&#39;m suggesting that it is rather difficult to simulate the effect of <code>sort(3,argv[1],argv[2],argv[3]);</code> and <code>sort(4,argv[1],argv[2],argv[3],argv[4]);</code> without writing the alternatives out like that.  OTOH, it is trivial to call <code>sort_alternative(argc-1, argv+1);</code> \u2014 as shown in the answer I see at the moment."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1474411485, "post_id": 39603851, "comment_id": 66518074, "body": "You write <code>va_list args;</code> twice in your function"}], "answers": [{"comments": [{"owner": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "edited": false, "score": 0, "creation_date": 1474407995, "post_id": 39604067, "comment_id": 66516980, "body": "Would be better with a bit of explanation"}, {"owner": {"reputation": 93, "user_id": 6624110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca61c960c58c38eb9d3db18c3e481589?s=128&d=identicon&r=PG&f=1", "display_name": "ufo", "link": "https://stackoverflow.com/users/6624110/ufo"}, "edited": false, "score": 0, "creation_date": 1474408176, "post_id": 39604067, "comment_id": 66517063, "body": "@BLUEPIXY, You didn&#39;t use variable number of arguments."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 93, "user_id": 6624110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca61c960c58c38eb9d3db18c3e481589?s=128&d=identicon&r=PG&f=1", "display_name": "ufo", "link": "https://stackoverflow.com/users/6624110/ufo"}, "edited": false, "score": 0, "creation_date": 1474408400, "post_id": 39604067, "comment_id": 66517161, "body": "@ufo  It is not required if you use the <code>argc</code> and <code>argv</code> as command line arguments. (Also Even if there is a function with a variable argument, it is impossible to pass a variable parameters at runtime.)"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 2, "last_activity_date": 1474407589, "last_edit_date": 1474407589, "creation_date": 1474407132, "answer_id": 39604067, "question_id": 39603851, "link": "https://stackoverflow.com/questions/39603851/c-function-with-variable-number-of-arguments-and-command-line-arguments/39604067#39604067", "title": "C - Function with variable number of arguments and command line arguments", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint cmp(const void *a, const void *b){\n    return strcasecmp(*(char**)a, *(char**)b);\n}\n\nvoid sort(int n, char *str[n]){\n    qsort(str, n, sizeof(char*), cmp);\n}\n\nint main(int argc, char *argv[]){\n    sort(argc-1, argv+1);\n    for(int i = 1; i &lt; argc; ++i)\n        puts(argv[i]);\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Execution example:</p>\n\n<pre><code>&gt;a.out a B c Z x y\na\nB\nc\nx\ny\nZ\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6624110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca61c960c58c38eb9d3db18c3e481589?s=128&d=identicon&r=PG&f=1", "display_name": "ufo", "link": "https://stackoverflow.com/users/6624110/ufo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1473, "favorite_count": 0, "accepted_answer_id": 39604067, "answer_count": 1, "score": 2, "last_activity_date": 1474407887, "creation_date": 1474406213, "last_edit_date": 1474407887, "question_id": 39603851, "link": "https://stackoverflow.com/questions/39603851/c-function-with-variable-number-of-arguments-and-command-line-arguments", "title": "C - Function with variable number of arguments and command line arguments", "body": "<p>I need to sort <code>n</code> number of strings lexicographically that are arguments of a function with variable number of arguments. In <code>main</code> function, strings are read as command line arguments.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;string.h&gt;\n\nvoid sort(int n,...)\n{\n    //store optional arguments (strings) to array arr\n    va_list args;\n    va_start(args,n);\n    char **arr=malloc(n * sizeof(char*));\n    int i;\n    for(i=0;i&lt;n;i++)\n        arr[i]=malloc((strlen(va_arg(args,char*)) + 1) * sizeof(char));\n    va_end(args);\n\n    //store length of each string to lenArr\n    //find max length and store it to temp (for sorting)\n    va_list args;\n    va_start(args,n);\n    int *lenArr=calloc(n , sizeof(int));\n    for(i=0;i&lt;n;i++)\n    {\n        lenArr[i]=strlen(va_arg(args,char*)) + 1;\n    }\n\n    int max=0;\n    for(i=0;i&lt;n;i++)\n    {\n        if(lenArr[i] &gt; lenArr[max])\n            max=i;\n    }\n    int maxLen;\n    maxLen=lenArr[max];\n    char *temp=calloc(maxLen * sizeof(char));\n    va_end(args);\n\n    //sort array arr lexicographically \n    int j,min;\n    for(i=0;i&lt;n-1;i++)\n    {\n        for(min=i,j=i+1;j&lt;n;j++)\n           if(strcmp(arr[j],arr[min]) &lt; 0)\n                min=j;\n           if(min!=i)\n           {\n              strcpy(temp,arr[i]);\n              strcpy(arr[i],arr[j]);\n              strcpy(arr[j],temp); \n           }\n    }\n}\n\nint main(int argc,char **argv)\n{\n    int n=3;\n    sort(n,argv[1],argv[2],argv[3]);//this works when n is pre-defined\n\n\n    return 0;\n} \n</code></pre>\n\n<p>How to read <code>n</code> strings as command line arguments in <code>main</code> function and print them sorted?</p>\n\n<p>Also, I am am getting an error in function <code>sort()</code> - <code>redeclaration of args with no linkage</code>.</p>\n"}, {"tags": ["c", "arrays", "string", "char", "strcmp"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474406013, "post_id": 39603759, "comment_id": 66516180, "body": "Why do you use a <b>string</b> compare function to compare single <b>characters</b>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474406027, "post_id": 39603759, "comment_id": 66516185, "body": "you may have undefined behaviour: nothing guarantees that the pointer on a char has a zero somewhere near since it&#39;s not a string."}, {"owner": {"reputation": 3447, "user_id": 5244653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9412ec207649931753eb77f7afca2599?s=128&d=identicon&r=PG&f=1", "display_name": "Brick", "link": "https://stackoverflow.com/users/5244653/brick"}, "edited": false, "score": 0, "creation_date": 1474406169, "post_id": 39603759, "comment_id": 66516262, "body": "The comments here about a null-terminate string being required are, of course, correct. The behavior still seems strange since, in this case, we know what comes after <code>&amp;character</code> since we know the rest of the characters in the string.  It&#39;s not clear to me why it misbehaves in this specific way."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1474405951, "creation_date": 1474405951, "answer_id": 39603795, "question_id": 39603759, "link": "https://stackoverflow.com/questions/39603759/strcmp-only-works-at-the-start-of-a-loop/39603795#39603795", "title": "strcmp only works at the start of a loop", "body": "<p>The <code>strcmp</code> function expects the address of a null terminated string.  Instead you're passing it the address of a <code>char</code>.  <code>strcmp</code> then attempts to read memory locations past <code>character</code>, resulting in <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>The real issue however is that you don't want to compare strings.  You want to compare characters.</p>\n\n<pre><code>if (character == '!') {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1474406002, "creation_date": 1474406002, "answer_id": 39603810, "question_id": 39603759, "link": "https://stackoverflow.com/questions/39603759/strcmp-only-works-at-the-start-of-a-loop/39603810#39603810", "title": "strcmp only works at the start of a loop", "body": "<p><code>strcmp()</code> compares null terminated strings.  In the code:</p>\n\n<pre><code>char character = line[i];\nif (strcmp(\"!\", &amp;character) == 0) \n</code></pre>\n\n<p>the <code>character</code> is not a null-terminated string.  It is accidental that it works at all.</p>\n\n<p>You need something more like this to compare strings:</p>\n\n<pre><code>char character[2] = { line[i], '\\0' };\nif (strcmp(\"!\", character) == 0) \n</code></pre>\n\n<p>Or like this to compare characters:</p>\n\n<pre><code>char character = line[i];\nif (character == '!') \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1474406021, "last_edit_date": 1592644375, "creation_date": 1474406021, "answer_id": 39603817, "question_id": 39603759, "link": "https://stackoverflow.com/questions/39603759/strcmp-only-works-at-the-start-of-a-loop/39603817#39603817", "title": "strcmp only works at the start of a loop", "body": "<p>The problem here is, you're supplying wrong argument to <code>strcmp()</code>, the <code>&amp;character</code> is not a pointer to a <em>string</em>.</p>\n<p>Quoting <code>C11</code>, chapter int strcmp(const char *s1, const char *s2);</p>\n<blockquote>\n<p><code>int strcmp(const char *s1, const char *s2);</code></p>\n<p>The <code>strcmp</code> function compares the string pointed to by <code>s1</code> to the string pointed to by\n<code>s2</code>.</p>\n</blockquote>\n<p>So, it expects both the arguments to be of <em>string</em> type, which in your case is not.</p>\n<p>You can simply use the comparison operator <code>==</code> to compare <code>char</code>s, like</p>\n<pre><code> if (line[i] == '!')  //notice the '' s, they are not &quot;&quot;s\n</code></pre>\n<p>and so on.</p>\n"}], "owner": {"reputation": 185, "user_id": 5735090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3be09aca680fc3c1ad1fa2002835a93b?s=128&d=identicon&r=PG&f=1", "display_name": "Tryingitall987", "link": "https://stackoverflow.com/users/5735090/tryingitall987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 39603795, "answer_count": 3, "score": 0, "last_activity_date": 1474407137, "creation_date": 1474405755, "last_edit_date": 1474407137, "question_id": 39603759, "link": "https://stackoverflow.com/questions/39603759/strcmp-only-works-at-the-start-of-a-loop", "title": "strcmp only works at the start of a loop", "body": "<p>I've been trying to create a simple program that loops through an array's members and scan the characters looking for a set specific character. I have ran into an issue where <code>strcmp()</code> only works at the start of the loop. I'm struggling to understand why this happens and any help would be appreciated.</p>\n\n<pre><code>char *file[3] = {\"!x\", \"!!x\", \"x!\"};\n\nfor (int i = 0; i &lt; sizeof(file) / sizeof(file[0]); i++) {\n  char *line = file[i];\n  printf(\"\\n\");\n  for (int i = 0; i &lt; strlen(line); i = i + 1) {\n    char character = line[i];\n    if (strcmp(\"!\", &amp;character) == 0) {\n      printf(\"[YES] %c\\n\", character);\n    } else {\n      printf(\"[NO] %c\\n\", character);\n    }\n  }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<blockquote>\n<pre><code>[YES] !\n[NO] x\n\n[YES] !\n[NO] !\n[NO] x\n\n[NO] x\n[NO] !\n</code></pre>\n</blockquote>\n"}, {"tags": ["c", "linux", "shell", "fork", "exec"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1474405479, "post_id": 39603612, "comment_id": 66515963, "body": "Side note: In standard shells <code>;</code> generally means run one only after the other ends and <code>&amp;</code> means run in the background which results in the next one being run without waiting for the previous to finish."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1474405569, "post_id": 39603612, "comment_id": 66516008, "body": "You will have to fork once for each process that you want to run.  The corresponding child will know which command it is to execute (you have to make sure of that).  The <code>execvp()</code> system call will only run one command, not many (but the one command might be a shell that then goes on to run many commands)."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 5870497, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/UVDZd.jpg?s=128&g=1", "display_name": "s.gang", "link": "https://stackoverflow.com/users/5870497/s-gang"}, "edited": false, "score": 0, "creation_date": 1474467483, "post_id": 39603732, "comment_id": 66544361, "body": "Thank you, I guess the toughest part for me is passing the commands as the second arg of &quot;execvp&quot; up to the next semicolon. I cannot seem to figure that part out."}, {"owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "reply_to_user": {"reputation": 141, "user_id": 5870497, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/UVDZd.jpg?s=128&g=1", "display_name": "s.gang", "link": "https://stackoverflow.com/users/5870497/s-gang"}, "edited": false, "score": 1, "creation_date": 1474467647, "post_id": 39603732, "comment_id": 66544518, "body": "If you have it working for a single command you can just break the input into an array of char arrays and pass those the same way you did for a single command."}], "tags": [], "owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "is_accepted": true, "score": 6, "last_activity_date": 1474468485, "last_edit_date": 1474468485, "creation_date": 1474405650, "answer_id": 39603732, "question_id": 39603612, "link": "https://stackoverflow.com/questions/39603612/fork-and-exec-multiple-processes-simultaneously/39603732#39603732", "title": "Fork and exec multiple processes simultaneously", "body": "<p>The general idea would be to have a for loop over the different commands and fork each of them.</p>\n\n<p>E.g.</p>\n\n<pre><code>for(int i = 0; i &lt; commandCount; i++) {\n    int pid = fork();\n    if(pid == 0) { //this is the child (don't forget to check for errors and what-not)\n        execCommand(all, of, the, info, needed);\n    }\n}\n</code></pre>\n\n<p>You can easily get the different commands using <code>strtok()</code>.<br>\nHere's an example:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\nint main() {\n    char input[] = \"abc;def;ghi\";\n    char *token = strtok(input, \";\");\n    while(token != NULL) {\n        printf(\"%s\\n\", token);\n        token = strtok(NULL, \";\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>abc\ndef\nghi\n</code></pre>\n\n<hr>\n\n<p>The final function will look something like this:</p>\n\n<pre><code>char *token = strtok(input, \";\");\nwhile(token != NULL) {\n    int pid = fork();\n    if(pid == 0) {\n        //token is one command\n        //parse the different parts here\n        execCommand(args, to, exec);\n    }\n    token = strtok(NULL, \";\");\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 5870497, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/UVDZd.jpg?s=128&g=1", "display_name": "s.gang", "link": "https://stackoverflow.com/users/5870497/s-gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6772, "favorite_count": 1, "accepted_answer_id": 39603732, "answer_count": 1, "score": 1, "last_activity_date": 1474468485, "creation_date": 1474405182, "question_id": 39603612, "link": "https://stackoverflow.com/questions/39603612/fork-and-exec-multiple-processes-simultaneously", "title": "Fork and exec multiple processes simultaneously", "body": "<p>I am working on a home made shell (very simple shell). I have decided to take the route of using execvp as my path is not a changeable element for my shell. I am running into an issue with coming up with the logic on how to fork and exec multiple processes at once. </p>\n\n<p>My program should work with a command as such:</p>\n\n<pre><code>ls ; echo hello ; cat shell.c\n</code></pre>\n\n<p>Where each \";\" indicates that we would like to run these processes at once simultaneously. So on our terminal output we should get a mix of these commands working at once.</p>\n\n<p>To elaborate I'd like to explain how my program works:</p>\n\n<pre><code>A. Intake full command line into char array with a grab line function\nB. Split the char array received from the last function by delimiters and place into an array of char arrays (pointer to pointer).\nC. If one of the elements in our array of char arrays is \";\" we can assume that multi commands are necessary. This is where I have trouble.\n</code></pre>\n\n<p>I have gotten as far as to know exactly how many processes I need to fork and such, but I cannot seem to wrap my head around how to pass all of these functions plus their arguments to the execvp function at once. Should I use a temp array? I know this shouldn't be this complicated but for some reason I cannot figure it out. I'm submitting my launch function below, which intakes an array of char arrays and executes accordingly based on my \"multiCommand\" variable which is set when multi commands are needed (by my split line function)</p>\n\n<pre><code>int launch(char **args){\n\n    pid_t pid;\n    int status;\n    int i = 0;\n\n    if(strcmp(args[0], \"quit\") == 0){\n        exit(EXIT_SUCCESS);\n    }\n\n    if(strcmp(args[0], \";\") != 0){\n        printf(\"Essential Command Found : %s\\n\", args[0]);\n        numFork++;\n    }\n\n\n    if(multiCommand == 1){\n        //Handle Multicommands here\n        printf(\"Multi Commands Handling Here\\n\");\n\n        for(; i &lt; elements - 1; i++){\n            if(strcmp(args[i], \";\") == 0){\n                if((i + 1) &lt; elements){\n                    printf(\"Essential Command Found : %s\\n\", args[i + 1]);\n                    numFork++;\n                }\n            }\n        }\n\n        //This is where I need to figure out what to do\n\n        printf(\"Fork: %d times\\n\", numFork);\n\n\n    }else if (multiCommand == 0){\n        pid = fork();\n        if(pid == 0){\n            execvp(args[0], args);\n\n        }else{\n            wait(&amp;status);\n        }\n    }\n\n    multiCommand = 0;   \n    elements = 0;\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 1140, "user_id": 1037018, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fefbe252f40e21b3e7fcedaea9f6fb5d?s=128&d=identicon&r=PG", "display_name": "Hypino", "link": "https://stackoverflow.com/users/1037018/hypino"}, "edited": false, "score": 2, "creation_date": 1474404691, "post_id": 39603461, "comment_id": 66515609, "body": "You need to malloc the Stack as <code>sizeof(struct stack)</code>. The &quot;array&quot; of 50 books (which are pointers because of the typedef) comes as part of the <code>stack</code> struct."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1474404903, "post_id": 39603461, "comment_id": 66515707, "body": "Don&#39;t ever typedef pointers. It only causes confusion. In particular, what looks like an array of 50 books is actually just an array of 50 pointers. So you need to allocate memory for those pointers before you can use them."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474404985, "post_id": 39603461, "comment_id": 66515742, "body": "You asked a similar question today already! You should follow the advices you got with the first question and fixed the flaws/faults first before going on! And there is no &quot;array of <code>struct</code> in a <code>struct</code>&quot; in your code!"}, {"owner": {"reputation": 601, "user_id": 6005857, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/10940e23bda8cf7bbc35957025ef3348?s=128&d=identicon&r=PG&f=1", "display_name": "user6005857", "link": "https://stackoverflow.com/users/6005857/user6005857"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474405629, "post_id": 39603461, "comment_id": 66516032, "body": "@Olaf what is the alternative to typedef? For example, if I don&#39;t use type def, what will be the return type for create_stack function?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474405925, "post_id": 39603461, "comment_id": 66516150, "body": "If you don&#39;t know that, you should first learn what <code>typedef</code> does. Don&#39;t blindly follow some pattern you don&#39;t understand. There is absolutely no need for <code>typedef</code>. And as Others and I already wrote, it is a strict no-go!"}], "answers": [{"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 2, "last_activity_date": 1474405379, "last_edit_date": 1474405379, "creation_date": 1474404996, "answer_id": 39603578, "question_id": 39603461, "link": "https://stackoverflow.com/questions/39603461/how-to-initialize-an-array-of-struct-in-a-struct/39603578#39603578", "title": "How to initialize an array of struct in a struct?", "body": "<p>You haven't allocated memory for <code>struct book</code> objects. The struct:</p>\n\n<pre><code>struct stack {\n    int num_books;\n    Book array[50];\n};\n</code></pre>\n\n<p>defines <code>array</code> member as 50 elements array of <em>pointers</em> to <code>book</code> struct (that is, <code>Book</code> is synonym to <code>struct book *</code>). These are still \"wild\" pointers, and you need to assign them with allocated struct objects. In other words, by calling:</p>\n\n<pre><code>Stack s = malloc(sizeof(struct stack) * 50);\n</code></pre>\n\n<p>you have made a room for fifty objects of type <code>struct stack</code>, but inside each of these structs, there is room for <code>struct book</code> pointers, not objects itself.</p>\n\n<p>Like mentioned in comments, typedefing a pointer type is an easy way to obfuscate the code.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 6855320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e81c72e5e1404824181e29bfabfa9c?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap Singh", "link": "https://stackoverflow.com/users/6855320/devesh-pratap-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1474409778, "last_edit_date": 1474409778, "creation_date": 1474409236, "answer_id": 39604479, "question_id": 39603461, "link": "https://stackoverflow.com/questions/39603461/how-to-initialize-an-array-of-struct-in-a-struct/39604479#39604479", "title": "How to initialize an array of struct in a struct?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define SIZE 2\n\ntypedef struct book {\nchar * title ;\nint pages;\n} Book; \n\ntypedef struct stack {\nint num_book;\nBook book_arr[SIZE];\n} Stack;\n\n//------------------------------------------------\n\nint main (void ){\n\nStack s1;\n  printf(\"Enter Number of Books : \" );\n  scanf(\"%d\",&amp;s1.num_book);\n  getchar();\n\n     //BOOK\n       for( size_t j = 0 ; j &lt; s1.num_book ; j++ ){\n         char temp[100];\n         printf(\"Enter the Book Title for %zd Book : \", (j+1) );\n         fgets(temp,100,stdin);\n         strtok(temp,\"\\n\");     // for removing new line character\n     s1.book_arr[j].title = malloc ( sizeof(temp) +1 );\n     strcpy(s1.book_arr[j].title,temp);\n                    //  puts(s1.book_arr[j].title );\n         printf(\"Enter Pages for %zd Book : \",(j+1) );\n     scanf(\"%d\",&amp;s1.book_arr[j].pages); getchar();\n      }\n            //PRINT\nsize_t count = 0 ;\n       for( size_t i = 0 ; i &lt; s1.num_book ; i++ ){\n     while(count &lt; SIZE ) {\n       printf(\"Book Title : %s\\nBook pages : %d\\n\",s1.book_arr[count].title, s1.book_arr[count].pages );\n       free(s1.book_arr[count].title );\n       count++;\n      } \n}       \nreturn 0;\n}\n</code></pre>\n\n<p>Is that what you were trying to achieve ?</p>\n"}], "owner": {"reputation": 601, "user_id": 6005857, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/10940e23bda8cf7bbc35957025ef3348?s=128&d=identicon&r=PG&f=1", "display_name": "user6005857", "link": "https://stackoverflow.com/users/6005857/user6005857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 39603578, "answer_count": 2, "score": -2, "last_activity_date": 1474409778, "creation_date": 1474404474, "question_id": 39603461, "link": "https://stackoverflow.com/questions/39603461/how-to-initialize-an-array-of-struct-in-a-struct", "title": "How to initialize an array of struct in a struct?", "body": "<p>I have a struct with an array of another struct inside it and I am having trouble initialising the struct.</p>\n\n<pre><code>typedef struct stack * Stack;\ntypedef struct book * Book;\n\nstruct book {\n    char *title;\n    int pages;\n};\n\nstruct stack {\n    int num_books;\n    Book array[50]\n};\n</code></pre>\n\n<p>What I am trying to do is to create an empty stack with zero books but I keep getting segmentation faults on everything I tried.</p>\n\n<p>Here is my initialization function:</p>\n\n<pre><code>Stack create_stack(void) {\n    Stack s = malloc(sizeof(struct stack) * 50);\n    s-&gt;num_books = 0;\n    // s-&gt;array[0]-&gt;title = Null;\n    // s-&gt;array[0]-&gt;pages = 0;\n    // the above 2 lines give a seg fault: 11\n    // I also tried:\n    // s-&gt;array = s-&gt;array = malloc(sizeof(struct book) * 50);\n    // Which gives the error that array type 'Book [50]' is not assignable\n    return s;\n}\n</code></pre>\n\n<p>How can I create an empty stack with zero books?</p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 2, "creation_date": 1474404380, "post_id": 39603413, "comment_id": 66515442, "body": "Because in cryptography, you want unreadable, obfuscated, <b>cryptic</b> code."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1474404383, "post_id": 39603413, "comment_id": 66515445, "body": "it&#39;d effectively zero-out any &quot;high&quot; bits that are bigger than a ushort"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474404399, "post_id": 39603413, "comment_id": 66515454, "body": "Because we want USHORT mask a too big value of `carry ? But that&#39;s dirty. A mask would be a lot better."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 2, "creation_date": 1474404617, "post_id": 39603413, "comment_id": 66515564, "body": "@Amit: Only in bad implementations with obscure algorithms. Good cryptography does not require that (and the bad will be broken anyway)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474404656, "post_id": 39603413, "comment_id": 66515591, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Those types are not standard."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1474404804, "post_id": 39603413, "comment_id": 66515660, "body": "@Olaf - I was being sarcastic."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 1, "creation_date": 1474404890, "post_id": 39603413, "comment_id": 66515699, "body": "@Amit: Remember beginners might take such statements serious (or people not getting the joke;-)"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1474406130, "creation_date": 1474406130, "answer_id": 39603841, "question_id": 39603413, "link": "https://stackoverflow.com/questions/39603413/why-casting-twice-in-this-line/39603841#39603841", "title": "Why casting twice in this line?", "body": "<p>The code appears to be part of a routine to compute the sum of two big integers (with digits represented as type <code>USHORT</code> == <code>unsigned short</code>, having <code>BITPERDGT</code> value bits each).  The cast to <code>USHORT</code> has the effect of discarding the high-order bits of its operand, but in fact if the converted result ever has a different value than the operand then the routine is broken (supposing that I have identified it correctly).</p>\n\n<p>The subsequent cast to <code>ULONG</code> (== <code>unsigned long</code>) is not needed at all in this context, as the conversion it specifies would be performed anyway in order to compute the sum of that operand with the <code>ULONG</code> left-hand operand of the <code>+</code>.  In any case, it has no effect on the value, given that <code>unsigned long</code> must be able to represent all the values that <code>unsigned short</code> can represent.  Such a cast would only be <em>needed</em> in special contexts, such as to make a <code>printf()</code> argument have the correct type for its corresponding field specifier, or to widen the value to accommodate twiddling of its upper bits.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1474406328, "creation_date": 1474406328, "answer_id": 39603876, "question_id": 39603413, "link": "https://stackoverflow.com/questions/39603413/why-casting-twice-in-this-line/39603876#39603876", "title": "Why casting twice in this line?", "body": "<p>Trying to take OP's code piece by piece.</p>\n\n<pre><code>*sptr_l++ = (USHORT)(carry = (ULONG)*aptr_l++\n                 + (ULONG)*bptr_l++ + (ULONG)(USHORT)(carry &gt;&gt; BITPERDGT));\n</code></pre>\n\n<p>This is somewhat simplified to </p>\n\n<pre><code>carry = (ULONG)*aptr_l++ + (ULONG)*bptr_l++ + (ULONG)(USHORT)(carry &gt;&gt; BITPERDGT);\n*sptr_l++ = (USHORT)carry;\n</code></pre>\n\n<p>Given the range of <code>ULONG</code> >= range of <code>USHORT</code> and likely is <em>greater than</em> ...</p>\n\n<p><code>(USHORT)(carry &gt;&gt; BITPERDGT)</code> simple shifts the value of <code>carry</code> the least <code>BITPERDGT</code> significant bits out.  The remaining are cast with <code>(USHORT)</code> result in the most significant bits being zeroed.</p>\n\n<p>Then code casts <em>unnecessarily</em> to <code>ULONG</code> with <code>(ULONG)(USHORT)(carry &gt;&gt; BITPERDGT));</code>.  It is not needed as the subsequent addition with a <code>ULONG</code> will cause <code>(USHORT)(carry &gt;&gt; BITPERDGT</code> to be promoted to <code>ULONG</code> even without the cast.</p>\n\n<blockquote>\n  <p>Why casting twice in this line?</p>\n</blockquote>\n\n<p>Although not <em>needed</em>, the <code>(ULONG)</code> cast may exist to emphasize to programmers that the result of <code>(USHORT)(carry &gt;&gt; BITPERDGT))</code> is promoted before the addition.</p>\n"}], "owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 39603876, "answer_count": 2, "score": 1, "last_activity_date": 1474406328, "creation_date": 1474404243, "last_edit_date": 1474404814, "question_id": 39603413, "link": "https://stackoverflow.com/questions/39603413/why-casting-twice-in-this-line", "title": "Why casting twice in this line?", "body": "<p>I've already read some Q&amp;A concerning questions similar to mine, but I am still not sure if my case is the same as those questions.</p>\n\n<p>I am wondering why we need two casts here: <code>(ULONG)(USHORT)(carry &gt;&gt; BITPERDGT)</code></p>\n\n<pre><code>*sptr_l++ = (USHORT)(carry = (ULONG)*aptr_l++\n                 + (ULONG)*bptr_l++ + (ULONG)(USHORT)(carry &gt;&gt; BITPERDGT));\n</code></pre>\n\n<p>ULONG : <code>typedef unsigned long ULONG;</code></p>\n\n<p>USHORT: <code>typedef unsigned short USHORT;</code></p>\n\n<p>C library used: FLINT</p>\n\n<p>Book: Cryptogtaphy in C and C++</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4852, "user_id": 5296568, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/25003db0bef370470e0f669a542960f8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Gerhardt", "link": "https://stackoverflow.com/users/5296568/maximilian-gerhardt"}, "edited": false, "score": 1, "creation_date": 1474404114, "post_id": 39603241, "comment_id": 66515310, "body": "<code>0x0F</code> is binary <code>0000 1111</code> which masks off the left 4 bit of a number. Remember, one &quot;hex digit&quot; (0-9 A-F) always encodes 4 bits. The operator <code>val &gt;&gt; i</code> right-shifts the value by <code>i</code> bits, and <code>i</code> is decremented by <code>4</code> in each iteration, to go to the next 4-bit hex-digit. And it starts at 28 because a <code>UINT32</code> is 32 bits long, so for the first 4 bits to be display, you have to bitshift the number <code>32 - 4 = 28</code> bits to left, sothat the first iteration will output Bits 0 to 4 as hex digit into the string."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "edited": false, "score": 0, "creation_date": 1474404929, "post_id": 39603483, "comment_id": 66515718, "body": "for correction, the left most four bits is 28-31 not 30"}, {"owner": {"reputation": 2258, "user_id": 6168519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e37eef36247051d9b713ebd68468b12?s=128&d=identicon&r=PG&f=1", "display_name": "Sparrow", "link": "https://stackoverflow.com/users/6168519/sparrow"}, "edited": false, "score": 1, "creation_date": 1474404933, "post_id": 39603483, "comment_id": 66515720, "body": "@deamentiaemundi - This is how a good developer writes that kind of code!"}, {"owner": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "reply_to_user": {"reputation": 2258, "user_id": 6168519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e37eef36247051d9b713ebd68468b12?s=128&d=identicon&r=PG&f=1", "display_name": "Sparrow", "link": "https://stackoverflow.com/users/6168519/sparrow"}, "edited": false, "score": 0, "creation_date": 1474405017, "post_id": 39603483, "comment_id": 66515760, "body": "@FeryalBadili are you making fun of this, or its really good code ? because I suspect"}, {"owner": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "reply_to_user": {"reputation": 2258, "user_id": 6168519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e37eef36247051d9b713ebd68468b12?s=128&d=identicon&r=PG&f=1", "display_name": "Sparrow", "link": "https://stackoverflow.com/users/6168519/sparrow"}, "edited": false, "score": 0, "creation_date": 1474405089, "post_id": 39603483, "comment_id": 66515786, "body": "@FeryalBadili I would argue this is good code, as it isn&#39;t checking the buffer&#39;s size, and perhaps should be using some built-in functions, but I guess you are dazzled by the commenting style :)"}, {"owner": {"reputation": 2258, "user_id": 6168519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e37eef36247051d9b713ebd68468b12?s=128&d=identicon&r=PG&f=1", "display_name": "Sparrow", "link": "https://stackoverflow.com/users/6168519/sparrow"}, "edited": false, "score": 0, "creation_date": 1474405157, "post_id": 39603483, "comment_id": 66515814, "body": "I am impressed by the answer that deamentiaemundi provided and my complement was for his/her answer."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "edited": false, "score": 0, "creation_date": 1474405320, "post_id": 39603483, "comment_id": 66515890, "body": "@TomerW - I don&#39;t think Feryal said it was good code, (s)he said this is how a good developer writes code ;)"}, {"owner": {"reputation": 2258, "user_id": 6168519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e37eef36247051d9b713ebd68468b12?s=128&d=identicon&r=PG&f=1", "display_name": "Sparrow", "link": "https://stackoverflow.com/users/6168519/sparrow"}, "reply_to_user": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "edited": false, "score": 0, "creation_date": 1474405335, "post_id": 39603483, "comment_id": 66515896, "body": "@Tomer W - Yes, you are right. Although the bug that you found is valid, the level of details in the comments are very impressive. I just had to say it :)"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "edited": false, "score": 0, "creation_date": 1474408688, "post_id": 39603483, "comment_id": 66517261, "body": "@andreahmed Oopsy! Embarassing typo corrected, thanks!"}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 2, "last_activity_date": 1474408582, "last_edit_date": 1474408582, "creation_date": 1474404574, "answer_id": 39603483, "question_id": 39603241, "link": "https://stackoverflow.com/questions/39603241/explaining-a-function-that-converts-uint32-to-hex/39603483#39603483", "title": "Explaining a function that converts uint32 to hex", "body": "<p>I took the liberty to comment the code a bit</p>\n\n<pre><code>/*\n  Convert an unsigned 32-bit (assuming UINT32 to mean uint32_t or similar) large\n  integer to a hexadecimal representation\n*/\nbool uint32tox(const UINT32 input, UINT8 *str)\n{\n    UINT32 val = input;\n    INT16  i;\n    UINT16  j = 0;\n\n    if (str == NULL) return(false);\n\n    for (i = 28; i &gt;= 0; i -= 4) {\n        // Shift input by i bits to the right and snip of the rightmost 4 bits\n        /*\n\n            0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31\n\n            with i = 28 sval contains the leftmost four bits 28 - 31\n            with i = 24 sval contains bits 24-27\n            with i = 20 sval contains bits 20-23\n            with i = 16 sval contains bits 16-19\n            with i = 12 sval contains bits 12-15\n            with i =  8 sval contains bits  8-11\n            with i =  4 sval contains bits  4- 7\n            with i =  4 sval contains bits  0- 3\n        */\n        UINT8 sval = (val &gt;&gt; i) &amp; 0x0F;\n        // If sval is smaller than ten we can use a base ten digit\n        // that gets constructed by adding the numerical value of ASCII '0'\n        // to sval (the digits 0-9 are guaranteed to be in order without gaps).\n        // If sval is bigger we need a hexdigit, one of A, B, C, D, E, F.\n        // These are normally consecutive at least in ASCII, so you can handle it\n        // like the other branch and just add the numerical value of 'A' instead\n        str[j++] = (sval &lt; 10u) ? sval + '0' : sval - 10 + 'A';\n    }\n    // terminate the UINT8 array such that it can be used as a C-string\n    str[j] = '\\0';\n    return(true);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "edited": false, "score": 0, "creation_date": 1474405403, "post_id": 39603561, "comment_id": 66515922, "body": "why would I need the size of str ?"}, {"owner": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "edited": false, "score": 0, "creation_date": 1474406145, "post_id": 39603561, "comment_id": 66516248, "body": "what I I want to convert a signed char to hex. is just the loop will start from i=4 ? is that what needs to be changed ?"}, {"owner": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "reply_to_user": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "edited": false, "score": 0, "creation_date": 1474407105, "post_id": 39603561, "comment_id": 66516628, "body": "@andreahmed if you dont know the size of *str, you dont know how much can fit in, and prevent overflows... e.g.  <code>char s[4];char password[4]; u32tohex(0x12349999, s);</code> this will cause password to be &quot;9999&quot;. or possibly begin a ROP attack, and so, checking buffers is a must!"}, {"owner": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "edited": false, "score": 0, "creation_date": 1474407530, "post_id": 39603561, "comment_id": 66516801, "body": "how would I fix it please. I need the to see where is the problem exactly."}, {"owner": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "reply_to_user": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "edited": false, "score": 0, "creation_date": 1474407689, "post_id": 39603561, "comment_id": 66516846, "body": "c/cpp does not check your array size, <code>int a[4]; a[6] =51;</code> is compiled cleanly, but a[6] writes over memory you didn&#39;t really set for it, did you?"}], "tags": [], "owner": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1474405285, "last_edit_date": 1474405285, "creation_date": 1474404936, "answer_id": 39603561, "question_id": 39603241, "link": "https://stackoverflow.com/questions/39603241/explaining-a-function-that-converts-uint32-to-hex/39603561#39603561", "title": "Explaining a function that converts uint32 to hex", "body": "<p>first and foremost, this function is broken, as it has no size for the *str buffer, can cause malicious attacks, or plain buggy overflows.</p>\n\n<p>secondly, you can use <code>sprintf(strOut, \"%x\",input);</code> instead of this function.</p>\n\n<h2>Third, i'll explain this function:</h2>\n\n<p>there is a trick, where each Hex digit, is 4 binary bits bits:</p>\n\n<pre><code>0100 1111 0010 1101 0011 1110 1111 0000 &gt;&gt; 83,022,831\n4 =4 15=F 2 =2 13=D 3 =3 14=E 15=F 0 =0 &gt;&gt; 0x4F2D3EF\n</code></pre>\n\n<ol>\n<li>loops starts at <code>i=28</code></li>\n<li>shift val 28 places right >> leaves 4 Left Bit [28-31] as Right most bits.</li>\n<li>mask with 0x00000F >> leaves only the 4 right most bits.</li>\n<li>if the number is smaller than 10 (where we start counting with Letters), add the ASCII of '0' (e.g 3 will '0' is 48 + 3 = 51 = '3')</li>\n<li>if the number is bigger then 10, then subtract 10, and add the ASCII of 'A' (e.g 14 will be 14-10=4 > 'A' is 65 + 4 = 69 = 'E')</li>\n<li>subtract 4 from i, therefore shifting 24 bits and doing the same on bits [24-27]\nuntil <code>i=0</code> is processed.</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 6200418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41f3337b9fd5ed6701b3e1bbb4f209e?s=128&d=identicon&r=PG&f=1", "display_name": "andreahmed", "link": "https://stackoverflow.com/users/6200418/andreahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 39603483, "answer_count": 2, "score": -2, "last_activity_date": 1474408582, "creation_date": 1474403552, "question_id": 39603241, "link": "https://stackoverflow.com/questions/39603241/explaining-a-function-that-converts-uint32-to-hex", "title": "Explaining a function that converts uint32 to hex", "body": "<p>I would like someone to explain to me this weird function that is found in the code base in my work. </p>\n\n<pre><code>bool uint32tox(const UINT32 input, UINT8 *str)\n{\n    UINT32 val = input;\n    INT16  i;\n    UINT16  j = 0;\n\n    if (str == NULL) return(false);\n\n    for (i = 28; i &gt;= 0; i -= 4) {\n        UINT8 sval = (val &gt;&gt; i) &amp; 0x0F;\n        str[j++] = (sval &lt; 10u) ? sval + '0' : sval - 10 + 'A';\n    }\n    str[j] = '\\0';\n    return(true);\n}\n</code></pre>\n\n<p>why anding with 0x0F, why i starts with 28.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1474403070, "post_id": 39603135, "comment_id": 66514811, "body": "I&#39;m voting to close this question as off-topic because it is clearly a write my code request, not a question. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first. :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474403076, "post_id": 39603135, "comment_id": 66514814, "body": "Please show your research/debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1474403126, "post_id": 39603135, "comment_id": 66514837, "body": "You mean find the prime factors of that number?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474413761, "post_id": 39603135, "comment_id": 66518728, "body": "<a href=\"http://ideone.com/g4O8Ry\" rel=\"nofollow noreferrer\">ideone.com/g4O8Ry</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474436284, "post_id": 39603135, "comment_id": 66524475, "body": "You can not access the contents of the variable the phase of  preprocessor (in compile time)."}, {"owner": {"reputation": 304, "user_id": 3905571, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vbb9D.png?s=128&g=1", "display_name": "SGbo", "link": "https://stackoverflow.com/users/3905571/sgbo"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1474445145, "post_id": 39603135, "comment_id": 66529119, "body": "@BLUEPIXY I know that the preprocess can&#39;t acces the conents of a var but what the preprocessor can do is to calculate the number i want to divide through and the number i want to use with modulo. For example: 2 should be replaced by 10 and 3 should be replaced by 1000."}], "answers": [{"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1474451479, "creation_date": 1474451479, "answer_id": 39613146, "question_id": 39603135, "link": "https://stackoverflow.com/questions/39603135/extract-number-of-number/39613146#39613146", "title": "Extract number of number", "body": "<p><em>For example: 2 should be replaced by 10 and 3 should be replaced by 1000.</em></p>\n\n<p>It is written as follows using the boost.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;boost/preprocessor/control/while.hpp&gt;\n#include &lt;boost/preprocessor/arithmetic/add.hpp&gt;\n#include &lt;boost/preprocessor/tuple/elem.hpp&gt;\n#include &lt;boost/preprocessor/cat.hpp&gt;\n\n#define PRED(d, state) BOOST_PP_TUPLE_ELEM(2, 0, state)\n\n#define OP(d, state) (BOOST_PP_DEC(BOOST_PP_TUPLE_ELEM(2, 0, state)), BOOST_PP_CAT(BOOST_PP_TUPLE_ELEM(2, 1, state), 0))\n\n#define pow0(n) BOOST_PP_TUPLE_ELEM(2, 1, BOOST_PP_WHILE(PRED, OP, (BOOST_PP_ADD(n,1), 1)))\n\nint main(void) {\n    int n = pow0(2);//1000: \"1\" + \"0\"\u2715(n+1) \n    printf(\"%d\\n\", n);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 3905571, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vbb9D.png?s=128&g=1", "display_name": "SGbo", "link": "https://stackoverflow.com/users/3905571/sgbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1474451479, "creation_date": 1474403002, "last_edit_date": 1474435720, "question_id": 39603135, "link": "https://stackoverflow.com/questions/39603135/extract-number-of-number", "title": "Extract number of number", "body": "<p>How to extract a number that is contained in another number using a macro not a function.</p>\n\n<p>Example Pseudocode:</p>\n\n<pre><code>#define extract_number(int number, // original number\n                   int pos, // start position from behind (1 == first digit)\n                   int len) // count of digits\n{\n    ...\n}\n\nmain() {\n    int number = 0;\n    int result = 0;\n\n    number = 123456789;\n    result = extract_number(number, 2, 3); // result: 678\n\n    number = 987123456;\n    result = extract_number(number, 4, 4); // result: 7123\n}\n</code></pre>\n\n<p>EDIT 21.09.2016:\nWhat I do atm is the following:</p>\n\n<pre><code>int number = 123456789;\nint result = number / 10 % 1000;\n</code></pre>\n\n<p>The version using a function posted by @Frzn Flms is the way I would have done it in a function. Is there a way using a macro to do it at compile time?</p>\n"}, {"tags": ["c", "c++11"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 12, "creation_date": 1474402970, "post_id": 39603113, "comment_id": 66514762, "body": "Who told you this? Because say this to them ... &quot;No.&quot;"}, {"owner": {"reputation": 669, "user_id": 5076511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WubM0.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/5076511/fabulous"}, "edited": false, "score": 1, "creation_date": 1474403147, "post_id": 39603113, "comment_id": 66514843, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3898688/range-of-signed-char\">stackoverflow.com/questions/3898688/range-of-signed-char</a>"}, {"owner": {"reputation": 46, "user_id": 6855320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e81c72e5e1404824181e29bfabfa9c?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap Singh", "link": "https://stackoverflow.com/users/6855320/devesh-pratap-singh"}, "reply_to_user": {"reputation": 669, "user_id": 5076511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WubM0.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/5076511/fabulous"}, "edited": false, "score": 0, "creation_date": 1474403361, "post_id": 39603113, "comment_id": 66514954, "body": "I already checked and then I asked this question. @simrandhamija"}, {"owner": {"reputation": 46, "user_id": 6855320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e81c72e5e1404824181e29bfabfa9c?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap Singh", "link": "https://stackoverflow.com/users/6855320/devesh-pratap-singh"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1474403446, "post_id": 39603113, "comment_id": 66514985, "body": "Yeah , they are , I have been reading C++ with Bjarne Stroustrup and its clearly mentioned over there ($6.2.3) @Ben"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1474403517, "post_id": 39603113, "comment_id": 66515031, "body": "Related: <a href=\"http://stackoverflow.com/questions/8010040/why-is-schar-min-defined-as-127-in-c99\" title=\"why is schar min defined as 127 in c99\">stackoverflow.com/questions/8010040/&hellip;</a>"}, {"owner": {"reputation": 46, "user_id": 6855320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e81c72e5e1404824181e29bfabfa9c?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap Singh", "link": "https://stackoverflow.com/users/6855320/devesh-pratap-singh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474404086, "post_id": 39603113, "comment_id": 66515290, "body": "THANKS @JohnBollinger"}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 2, "creation_date": 1474404506, "post_id": 39603113, "comment_id": 66515507, "body": "@DeveshPratapSingh: That is not the C++ standard, so whatever it says is not binding to what C++ the language is. Voted to close as unclear since you asked with incorrect assumptions, without citing any sources, and then asked why those assumptions were what they were."}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 6855320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e81c72e5e1404824181e29bfabfa9c?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap Singh", "link": "https://stackoverflow.com/users/6855320/devesh-pratap-singh"}, "edited": false, "score": 0, "creation_date": 1474403669, "post_id": 39603232, "comment_id": 66515106, "body": "here comes the text - &quot;The 256 values represented by an 8-bit byte can be interpreted as the values 0 to 255 or as the val- ues \u2212127 to 127 . No, not \u2212128 to 127 as one might expect &quot;. This is what its written here, you can check yourself. I already mentioned the section and subsections above."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1474403750, "post_id": 39603232, "comment_id": 66515136, "body": "-127 to 127 is the required <i>minimum</i> range. It is allowed to have a wider range."}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1474404781, "post_id": 39603232, "comment_id": 66515655, "body": "Sorry, -1. You can&#39;t generally answer C++ language questions by link to documentation for a specific compiler. My compiler&#39;s signed <code>char</code> has a range of -127 to 127, which is perfectly legal C++."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1474406126, "post_id": 39603232, "comment_id": 66516239, "body": "@GManNickG: Yes, it&#39;s perfectly legal -- but it&#39;s surprising. What compiler uses that range? Assuming a 2&#39;s-complement representation, what happens if you do <code>signed char sc = -127; --sc; std::cout &lt;&lt; &quot;sc = &quot; &lt;&lt; (int)sc &lt;&lt; &quot;\\n&quot;;</code>? (I&#39;m aware the behavior is undefined.)"}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1474406232, "post_id": 39603232, "comment_id": 66516283, "body": "@KeithThompson: ...I admit, it was my brain compiler. :)"}], "tags": [], "owner": {"reputation": 39, "user_id": 6061339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlNqM.jpg?s=128&g=1", "display_name": "BenG", "link": "https://stackoverflow.com/users/6061339/beng"}, "is_accepted": false, "score": -2, "last_activity_date": 1474403507, "creation_date": 1474403507, "answer_id": 39603232, "question_id": 39603113, "link": "https://stackoverflow.com/questions/39603113/why-is-the-range-of-signed-char-is-different-in-c-and-c/39603232#39603232", "title": "Why is the range of signed char is different in C and C++?", "body": "<p>I'm not an expert, but I can't find a reference to the c++ range being -127 to 127. Everything I see says it is also -128 to 127. Reference: <a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz(v=vs.80).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/s3f49ktz(v=vs.80).aspx</a></p>\n"}, {"comments": [{"owner": {"reputation": 46, "user_id": 6855320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e81c72e5e1404824181e29bfabfa9c?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap Singh", "link": "https://stackoverflow.com/users/6855320/devesh-pratap-singh"}, "edited": false, "score": 0, "creation_date": 1474404362, "post_id": 39603333, "comment_id": 66515436, "body": "Thanks for your time dude! and the answer to your last line is &lt;uchar.h&gt; ."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 5, "last_activity_date": 1474403932, "creation_date": 1474403932, "answer_id": 39603333, "question_id": 39603113, "link": "https://stackoverflow.com/questions/39603113/why-is-the-range-of-signed-char-is-different-in-c-and-c/39603333#39603333", "title": "Why is the range of signed char is different in C and C++?", "body": "<p>The text referenced in the comments, refers to the fact that the <code>c++</code> standard does not guide how to implement signed char, ie. it can be implemented as 1's complement giving you the value -127 -> 127 (with +0 and -0). </p>\n\n<blockquote>\n  <p>The 256 values represented by an 8-bit byte can be interpreted as the values 0 to 255 or as the values \u2212127 to 127 . No, not \u2212128 to 127 as one might expect: the c++ standard leaves open the possibility of ones-compliment hardware and eliminates one value, thus the use of -128 is non-portable.</p>\n</blockquote>\n\n<p>It doesn't say a char is -127 -> 127, it says it <strong>might</strong> be. Yes, if you want portability with every standard conforming system, you need to consider the possibility of a 1's complement implementation of <code>char</code>. In reality, no-one ever has this ...</p>\n\n<p>You should be more worried about things like how some hardware implements a 16 bit char ... </p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 11, "last_activity_date": 1474405451, "last_edit_date": 1592644375, "creation_date": 1474404191, "answer_id": 39603397, "question_id": 39603113, "link": "https://stackoverflow.com/questions/39603113/why-is-the-range-of-signed-char-is-different-in-c-and-c/39603397#39603397", "title": "Why is the range of signed char is different in C and C++?", "body": "<p>You are mistaken. The <strong>guaranteed</strong> minimum value for signed char is in fact -127 in both languages. Quote from C11 standard (draft <a href=\"http://port70.net/%7Ensz/c/c11/n1570.html#5.2.4.2.1p1\" rel=\"nofollow noreferrer\">N1570</a>):</p>\n<blockquote>\n<ul>\n<li><p>minimum value for an object of type signed char</p>\n<pre><code>  SCHAR_MIN                                -127\n</code></pre>\n</li>\n</ul>\n</blockquote>\n<p>Do note that the actual absolute minimum value is implementation defined and may be greater:</p>\n<blockquote>\n<p>... Their implementation-defined values shall be equal or greater in magnitude (absolute value) to those shown, with the same sign.</p>\n</blockquote>\n<p>And on processors that have 8 bit byte and two's complement representation (which is rather common), the minimum value will almost certainly be -128 in both C and C++. The reason why only -127 is guaranteed, is because it allows a non two's complement representation to be supported.</p>\n"}], "owner": {"reputation": 46, "user_id": 6855320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e81c72e5e1404824181e29bfabfa9c?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap Singh", "link": "https://stackoverflow.com/users/6855320/devesh-pratap-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "closed_date": 1474404472, "accepted_answer_id": 39603397, "answer_count": 3, "score": -1, "last_activity_date": 1474405451, "creation_date": 1474402872, "question_id": 39603113, "link": "https://stackoverflow.com/questions/39603113/why-is-the-range-of-signed-char-is-different-in-c-and-c", "closed_reason": "Not suitable for this site", "title": "Why is the range of signed char is different in C and C++?", "body": "<p>Why the range of <code>signed char</code> is different in C and C++ ?\n  In C the range is <code>-128 t0 127</code> and in C++ it is `-127 to 127' but on the other hand the unsigned ranges are same. why ?</p>\n"}, {"tags": ["c", "function", "time", "timer"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1474402450, "post_id": 39602976, "comment_id": 66514493, "body": "<code>gettimeofday</code> produces microsecond resolution. It&#39;s what I <i>used</i> to use. Nowadays, I use <code>clock_gettime(CLOCK_REALTIME,...)</code>. It gives nanosecond resolution. Under linux [at least], it&#39;s low overhead because it&#39;s a <code>vdso</code> [fast] syscall. Or, with extra effort, on <code>x86</code>, you could use <code>rdtsc</code> but you have to determine the CPU frequency [to convert ticks to seconds] and that can be problematic."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474402618, "post_id": 39602976, "comment_id": 66514573, "body": "For windows I used <code>QueryPerformanceCounter</code>."}, {"owner": {"reputation": 83, "user_id": 6533749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f31c9fecd0446f3ebcc854dcf6c0943?s=128&d=identicon&r=PG&f=1", "display_name": "Paulo Gasol", "link": "https://stackoverflow.com/users/6533749/paulo-gasol"}, "edited": false, "score": 0, "creation_date": 1474402660, "post_id": 39602976, "comment_id": 66514596, "body": "so I need to multiply by  1000000 right?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1474402825, "post_id": 39602976, "comment_id": 66514683, "body": "<a href=\"http://stackoverflow.com/questions/26136319/timing-of-multiple-function-calls\" title=\"timing of multiple function calls\">stackoverflow.com/questions/26136319/&hellip;</a>."}, {"owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 0, "creation_date": 1474419056, "post_id": 39602976, "comment_id": 66520077, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2150291/how-do-i-measure-a-time-interval-in-c\">How do I measure a time interval in C?</a>"}], "owner": {"reputation": 83, "user_id": 6533749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f31c9fecd0446f3ebcc854dcf6c0943?s=128&d=identicon&r=PG&f=1", "display_name": "Paulo Gasol", "link": "https://stackoverflow.com/users/6533749/paulo-gasol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474402271, "creation_date": 1474402271, "question_id": 39602976, "link": "https://stackoverflow.com/questions/39602976/whats-the-best-c-functions-to-compute-the-execution-time-of-a-program", "title": "What&#39;s the best c functions to compute the execution time of a program", "body": "<p>I want to get the execution time of a program that I build and specifically the the time needed to load the data, the execution, for some operations etc.  and of course the total any example code or direction where to see. I found something related for research purpose that the programer use MACROS before the and after like <code>#define COUNT__TIME_BEGIN</code> <code>#define COUNT__TIME_END</code> and in the MACROS declaration use <code>gettimeofday();</code> function is this right?</p>\n"}, {"tags": ["c", "variables", "local", "initializing"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474402228, "post_id": 39602931, "comment_id": 66514386, "body": "<code>Calling a local variable</code>...hmmm."}, {"owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "edited": false, "score": 0, "creation_date": 1474402396, "post_id": 39602931, "comment_id": 66514469, "body": "If you pass them in, just use them."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6837955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/22c57636a7bbe7f095ed284e1ee3c348?s=128&d=identicon&r=PG&f=1", "display_name": "Allie H", "link": "https://stackoverflow.com/users/6837955/allie-h"}, "edited": false, "score": 1, "creation_date": 1474403718, "post_id": 39603032, "comment_id": 66515121, "body": "Yes, thank you. I was considering doing that, but it just seemed redundant since the row_old and row_new would be the same variable every time I called it, and I actually end up calling it a few times, but that works. Thank you!"}], "tags": [], "owner": {"reputation": 111, "user_id": 3479431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317babfd6d70c3a6e19018b3750679e6?s=128&d=identicon&r=PG&f=1", "display_name": "heron", "link": "https://stackoverflow.com/users/3479431/heron"}, "is_accepted": false, "score": 3, "last_activity_date": 1474402495, "creation_date": 1474402495, "answer_id": 39603032, "question_id": 39602931, "link": "https://stackoverflow.com/questions/39602931/c-passing-a-local-variable-in-a-function-without-initializing/39603032#39603032", "title": "C - Passing a local variable in a function without initializing", "body": "<p>The easiest way I can see to do this would be to pass in the values of the old row and column.</p>\n\n<pre><code>void swap(int row_new, int col_new, int row_old, int col_old) {\n    int hold = board[row_old][col_old];\n    board[row_old][column_old] = 0;\n    board[row_new][column_new] = hold;\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6837955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/22c57636a7bbe7f095ed284e1ee3c348?s=128&d=identicon&r=PG&f=1", "display_name": "Allie H", "link": "https://stackoverflow.com/users/6837955/allie-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474402495, "creation_date": 1474402099, "last_edit_date": 1474402279, "question_id": 39602931, "link": "https://stackoverflow.com/questions/39602931/c-passing-a-local-variable-in-a-function-without-initializing", "title": "C - Passing a local variable in a function without initializing", "body": "<p>so I'm really new at this, and I was wondering how I would go about passing a local variable in a function (in terms of the initialization). For example, I have one function (move) that declares and initializes two variables (t_row and t_column) to be used in a for loop, and within that loop, I have another functions (swap), that is called if certain conditions are met. How do I go about using those variables in the swap function. I know I need to declare them, but their initialization in the swap function depends on what iteration of the for loop swap was called. Thanks in advance for any help!</p>\n\n<pre><code>bool move(int tile)\n{\n    for (int t_row = 0; t_row &lt; d; t_row++)\n    {\n        for (int t_column = 0; t_column &lt; d; t_column++)\n        {\n            if (tile == board[t_row][t_column])\n            {\n                if (0 &lt; t_row &amp;&amp; board[t_row - 1][t_column] == 0)\n                {\n                    swap(t_row - 1, t_column);\n                    return true;\n                }\n            }\n        }\n    }\n        return false;\n}\n\nvoid swap(int row_new, int column_new)\n{\n    int t_row;\n    int t_column;        \n    int hold = board[t_row][t_column];\n    board[t_row][t_column] = 0;\n    board[row_new][column_new] = hold;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "file", "struct"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474402048, "post_id": 39602901, "comment_id": 66514304, "body": "Why <code>x</code> is <code>double</code> array? why not <code>int</code>?"}, {"owner": {"reputation": 403, "user_id": 5692730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f71ce4263a413f6a57dea5bf6f11996?s=128&d=identicon&r=PG&f=1", "display_name": "Luciano", "link": "https://stackoverflow.com/users/5692730/luciano"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1474402086, "post_id": 39602901, "comment_id": 66514322, "body": "@SouravGhosh X can take on noninteger values in the full program."}, {"owner": {"reputation": 403, "user_id": 5692730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f71ce4263a413f6a57dea5bf6f11996?s=128&d=identicon&r=PG&f=1", "display_name": "Luciano", "link": "https://stackoverflow.com/users/5692730/luciano"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1474402180, "post_id": 39602901, "comment_id": 66514363, "body": "@user3121023 very careless of me, thank you!"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1474402457, "post_id": 39602901, "comment_id": 66514501, "body": "Some additional notes: Close the file after reading, check for errors (fscanf, too!), use all lowercase names for standard headers. Next get rid of that global state: pass a pointer to (the first element of) an array of <code>struct particle</code> as well as the size of that array to your function."}, {"owner": {"reputation": 403, "user_id": 5692730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f71ce4263a413f6a57dea5bf6f11996?s=128&d=identicon&r=PG&f=1", "display_name": "Luciano", "link": "https://stackoverflow.com/users/5692730/luciano"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1474402613, "post_id": 39602901, "comment_id": 66514570, "body": "@DanielJour thank you for the tips! could you explain that second sentence further please?"}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 5692730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f71ce4263a413f6a57dea5bf6f11996?s=128&d=identicon&r=PG&f=1", "display_name": "Luciano", "link": "https://stackoverflow.com/users/5692730/luciano"}, "edited": false, "score": 0, "creation_date": 1474402164, "post_id": 39602937, "comment_id": 66514361, "body": "Wow, I can&#39;t believe I missed that. Thank you so much, that was very careless of me. Have a good day!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1474402798, "last_edit_date": 1474402798, "creation_date": 1474402116, "answer_id": 39602937, "question_id": 39602901, "link": "https://stackoverflow.com/questions/39602901/reading-multiple-numbers-from-a-file-into-a-struct-in-c/39602937#39602937", "title": "Reading multiple numbers from a file into a struct in C", "body": "<p>The problem here is, you never called <code>starting_positions()</code> in your <code>main()</code>. So, the file is never opened, never read and the elements in the <code>particles</code> array are never assigned any value.</p>\n\n<p>So, the <code>particles</code> array elements, (<code>particles</code> being a <em>global</em>) are implicitly initialized to <code>0</code> and that's the value it prints.</p>\n"}], "owner": {"reputation": 403, "user_id": 5692730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f71ce4263a413f6a57dea5bf6f11996?s=128&d=identicon&r=PG&f=1", "display_name": "Luciano", "link": "https://stackoverflow.com/users/5692730/luciano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474402828, "creation_date": 1474401977, "last_edit_date": 1474402828, "question_id": 39602901, "link": "https://stackoverflow.com/questions/39602901/reading-multiple-numbers-from-a-file-into-a-struct-in-c", "title": "Reading multiple numbers from a file into a struct in C", "body": "<p>I have a small bit of code that should read values from a file with the following format:</p>\n\n<pre><code>0 0 0\n0 0 2\n0 2 0\n0 2 2\n2 0 0\n2 0 2\n2 2 0\n2 2 2\n</code></pre>\n\n<p>into parts of a struct.\nI wrote a small program to confirm this was working, but when I print the result I get 0s for every term. I'm not sure what I'm doing wrong, so any help would be much appreciated. The test code is:</p>\n\n<pre><code>#include &lt;stdio.H&gt;\n#include &lt;stdlib.H&gt;\n\n            struct particle\n            {\n                double x[3];\n            };\n\n#define N 8 //number of particles\n\n            struct particle particles[N];\n\n            void starting_positions()\n            {\n                int p;\n                FILE * startingpositions;//any .txt file\n                startingpositions = fopen(\"startingpositions.txt\", \"r\");\n                for(p=0;p&lt;N;p++)\n                {\n                    fscanf(startingpositions,\"%lf %lf %lf\\n\", &amp;particles[p].x[0],&amp;particles[p].x[1],&amp;particles[p].x[2]);\n                }\n                return;\n            }\n\n            int main()\n            {\n                int p;\n                for(p=0;p&lt;N;p++)\n                {\n                    printf(\"%lf %lf %lf\\n\", particles[p].x[0],particles[p].x[1],particles[p].x[2]);\n                }\n                return 0;\n            }\n</code></pre>\n"}]