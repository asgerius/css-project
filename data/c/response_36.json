[{"tags": ["c", "linux", "unix"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1442445743, "post_id": 32620251, "comment_id": 53090939, "body": "I think you&#39;ve got the same scenario as in <a href=\"http://stackoverflow.com/questions/32460033\">Two children of same parent are not communicating using pipe if parent does not call <code>wait()</code>?</a>.  The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcsetpgrp.html\" rel=\"nofollow noreferrer\"><code>tcsetpgrp()</code></a> call used by modern job-control shells is part of the problem.  I&#39;m not clear whether there&#39;s a way around it \u2014 AFAICT, when the controlling process denies the child process access to the terminal, that denial is irrevocable and incontrovertible.  I started experimenting, but getting the right setup is hard."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 1, "creation_date": 1442446337, "post_id": 32620251, "comment_id": 53091106, "body": "You are calling <code>fgets()</code> with an uninitialized pointer. That will cause problems, but maybe not what you describe."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1442446947, "post_id": 32620251, "comment_id": 53091241, "body": "@JonathanLeffler: It might be possible if the child disowns the controlling terminal and tries to use it as a non-controlling terminal, but then it will be fighting with the shell for input. The setup OP is asking for does not logically make sense."}], "answers": [{"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1442446910, "creation_date": 1442446910, "answer_id": 32620484, "question_id": 32620251, "link": "https://stackoverflow.com/questions/32620251/how-to-retain-child-processs-access-to-the-terminal-after-the-parent-closes/32620484#32620484", "title": "How to retain child process&#39;s access to the terminal after the parent closes", "body": "<p>As the other answer by @Jonathan-Leffler points out, that is caused by the shell taking ownership of <code>stdin</code> when the parent process finishes. The problem is that, while <code>stdout</code> can be shared by as many process as you want (output is just mixed), <code>stdin</code> cannot be easily shared.</p>\n\n<p>A possible workaround, without modifying your program (let it be <code>./test</code>) may be:</p>\n\n<pre><code>$ cat | ./test\n</code></pre>\n\n<p>Now, the shell will wait for <code>cat</code> to finish, but <code>cat</code> will not finish until you type EOF (<code>^D</code>) or writing to <code>stdout</code> fails. But even if your parent process finishes, the duplicated fd in the child process will continue to consume the <em>catted</em> data.</p>\n"}], "owner": {"reputation": 11, "user_id": 5344332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f38dc0c74fefb20daa40aa53075ac0?s=128&d=identicon&r=PG&f=1", "display_name": "tomullus", "link": "https://stackoverflow.com/users/5344332/tomullus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442446910, "creation_date": 1442445283, "question_id": 32620251, "link": "https://stackoverflow.com/questions/32620251/how-to-retain-child-processs-access-to-the-terminal-after-the-parent-closes", "title": "How to retain child process&#39;s access to the terminal after the parent closes", "body": "<p>I'm trying to write a program that creates a child process and then closes itself. I then need the child to remain connected to the terminal. </p>\n\n<p>The child process is working as intended (waits for terminal input, then prints it out) until the parent closes  . When the parent process is terminated the child no longer waits for input and the \"fgets error\" message is printed out in the terminal indefinitely. </p>\n\n<p>This is strange, as it seems that after the parent terminated the stdin closed but stdout of the child remained connected to the terminal.</p>\n\n<pre><code>int main(){\nint pid1;\npid1=fork();\nif (pid1==-1){\n   perror(\"fork\");\n   exit(EXIT_FAILURE);\n}\nif (pid1==0){\n   while(1){\n   char *data;\n   char *result;\n\n   result=fgets(data,100,stdin);\n   if (result!=NULL){\n      printf(\"%s\\n\",data);\n   }\n   else{\n       printf(\"fgets error\\n\");\n       sleep(1);\n       }\n   }\n}\nelse\n{\n//The sleep below is for debugging purposes\nsleep(5);\nexit(EXIT_SUCCESS);\n}   \n}\n</code></pre>\n\n<p>Is there a way to keep the stdin/stdout of the child process directed from/to the terminal after it's parent has terminated?\nAny help/explanation would be greatly appreciated.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1442445277, "post_id": 32620218, "comment_id": 53090828, "body": "What is the definition of <code>pixel</code>?"}, {"owner": {"reputation": 69, "user_id": 4493706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9fd322785987fe6214c71dcf5751ab?s=128&d=identicon&r=PG&f=1", "display_name": "Arkantos", "link": "https://stackoverflow.com/users/4493706/arkantos"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1442445632, "post_id": 32620218, "comment_id": 53090910, "body": "<code>struct pixel  {  int x;      int y;  };</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1442446537, "post_id": 32620218, "comment_id": 53091168, "body": "Case 1 and 2 can both use <code>object.param = buf;</code>  The type <code>void *</code> is a generic pointer type and any other object pointer can be converted to it without using a cast."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442446651, "post_id": 32620218, "comment_id": 53091192, "body": "Both cases are probably a bad idea , <code>struct foo</code> should also contain enough information to retrieve the initial type before the conversion to <code>void *</code>"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1442454647, "post_id": 32620218, "comment_id": 53093026, "body": "foo object;   -&gt; struct foo object;"}], "answers": [{"comments": [{"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442452047, "post_id": 32620442, "comment_id": 53092383, "body": "Actually, the casts are unnecessary because any other <a href=\"http://stackoverflow.com/a/10579981/696485\">object</a> pointer can be converted to a void pointer without an explicit cast. C is not C++."}], "tags": [], "owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "is_accepted": false, "score": 0, "last_activity_date": 1442477660, "last_edit_date": 1442477660, "creation_date": 1442446647, "answer_id": 32620442, "question_id": 32620218, "link": "https://stackoverflow.com/questions/32620218/void-pointing-to-2d-array/32620442#32620442", "title": "void* pointing to 2D array", "body": "<p>The second case works because you can cast any pointer to <code>void*</code>. </p>\n\n<p>For the same reason, the first case will work if you do <code>object.param = (void *)buf</code>, or <code>object.param = buf</code>, as @Iskar comments.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1442446704, "creation_date": 1442446704, "answer_id": 32620448, "question_id": 32620218, "link": "https://stackoverflow.com/questions/32620218/void-pointing-to-2d-array/32620448#32620448", "title": "void* pointing to 2D array", "body": "<p>This should work fine:</p>\n\n<pre><code>int main(){\n    struct foo object;\n\n    struct pixel **buf = malloc(10*sizeof(struct pixel*));\n    for(int i=0; i&lt;10;i++)\n    buf[i] = malloc(10*sizeof(struct pixel));\n\n    object.param = buf;\n}\n</code></pre>\n\n<p>The casts weren't necessary, and because this is C you need to use <code>struct pixel</code> instead of <code>pixel</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1442457435, "creation_date": 1442457435, "answer_id": 32621765, "question_id": 32620218, "link": "https://stackoverflow.com/questions/32620218/void-pointing-to-2d-array/32621765#32621765", "title": "void* pointing to 2D array", "body": "<p>Remember, a 2D array in C of type <code>foo[M][N]</code> is really a 1D array of M\u00d7N elements and has type <code>foo*</code>.  If you declare <code>foo[10][3] a; foo *p = a;</code> then <code>foo[i][j]</code> and <code>p[i*10+j]</code> mean exactly the same thing.</p>\n"}], "owner": {"reputation": 69, "user_id": 4493706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9fd322785987fe6214c71dcf5751ab?s=128&d=identicon&r=PG&f=1", "display_name": "Arkantos", "link": "https://stackoverflow.com/users/4493706/arkantos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442477660, "creation_date": 1442445087, "last_edit_date": 1442445902, "question_id": 32620218, "link": "https://stackoverflow.com/questions/32620218/void-pointing-to-2d-array", "title": "void* pointing to 2D array", "body": "<p>I have a struct: </p>\n\n<pre><code>struct foo\n{\n  void *param;\n};\n\nvoid main(){\n  foo object;\n}\n</code></pre>\n\n<p>I need to make object.param point to a dynamically allocated 2D array. </p>\n\n<p>I know this will obviously <em>not</em> work:</p>\n\n<pre><code>//CASE 1\npixel **buf = (pixel**)malloc(16*sizeof(pixel*));\nfor(int i=0; i&lt;16;i++)\n   buf[i] = (pixel*)malloc(16*sizeof(pixel));\n\nobject.param = (void **)buf\n</code></pre>\n\n<p>This works:</p>\n\n<pre><code>//CASE 2\npixel buf[16][16];\nobject.param = (void *)buf;\n</code></pre>\n\n<p>My question is:</p>\n\n<ol>\n<li>In case 2 why is <code>buf</code> interpreted as a pointer of type <code>pixel</code> (when in fact <code>buf</code> stores <code>pixel*</code>) which allows it to be cast to a <code>void*</code>? </li>\n<li>How do I make case 1 work?</li>\n</ol>\n"}, {"tags": ["c", "linux", "opengl", "framebuffer"], "comments": [{"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1472758287, "post_id": 32620019, "comment_id": 65893489, "body": "<a href=\"http://stackoverflow.com/questions/14805294/using-linux-framebuffer-for-graphics-but-disabling-console-text\" title=\"using linux framebuffer for graphics but disabling console text\">stackoverflow.com/questions/14805294/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "edited": false, "score": 0, "creation_date": 1442514879, "post_id": 32636098, "comment_id": 53123760, "body": "I edited my original question to add context. This is being developed for an embedded system on a Freescale i.MX6 SoC (CompuLab Utilite Pro) with the Vivante GPU running ArchLinux ARM in the back. As far as I can tell KMS support is not available for the current kernel in the tree (3.0.35). The only reason X is mentioned here is because I&#39;m developing on the system itself and I&#39;m using a window tiler and vim :). X will not be a factor in production."}, {"owner": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "edited": false, "score": 0, "creation_date": 1442523784, "post_id": 32636098, "comment_id": 53128414, "body": "I think my question amounts to &quot;How does X accomplish it?&quot;"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "edited": false, "score": 0, "creation_date": 1442524280, "post_id": 32636098, "comment_id": 53128650, "body": "@ReX357: X.org is allocating a VT (or reusing an existing one if specified so on the command line), switches to it and uses the KDSETMODE ioctl to switch to graphics mode. I don&#39;t know that particular SoC and GPU at all (shame on me), so I&#39;m curious about its driver model. Anyway, switching to graphics mode will give you an arena to play in without being disturbed."}, {"owner": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "edited": false, "score": 0, "creation_date": 1442524328, "post_id": 32636098, "comment_id": 53128678, "body": "Perfect. Thank you very much."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "edited": false, "score": 0, "creation_date": 1442526067, "post_id": 32636098, "comment_id": 53129477, "body": "@ReX357: Just be aware, that you&#39;ve to actively watch the VT state, so that if the console is switched to a different VT your program pauses graphics operations. That&#39;s what X.org does, as well."}, {"owner": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "edited": false, "score": 0, "creation_date": 1442526170, "post_id": 32636098, "comment_id": 53129524, "body": "Is this a concern in an embedded application where the system will boot to the application and will have no keyboard input? (Touch device)"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "edited": false, "score": 0, "creation_date": 1442532840, "post_id": 32636098, "comment_id": 53131674, "body": "@ReX357: Well, it depends. The active VT can be switched using an ioctl or the <code>chvt</code> tool (which calls that ioctl). Doing so (say, using SSH) could come in handy for debugging purposes. As for using the VT graphics mode, I suggest you also look at the source code of the Plymouth graphical boot message deamon."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 4, "last_activity_date": 1442509540, "creation_date": 1442509540, "answer_id": 32636098, "question_id": 32620019, "link": "https://stackoverflow.com/questions/32620019/c-linux-how-to-takeover-the-framebuffer/32636098#32636098", "title": "C + Linux: How to takeover the framebuffer", "body": "<blockquote>\n  <p>I have an OpenGL application that renders directly to the framebuffer.</p>\n</blockquote>\n\n<p>Just for clarification: You're doing this using KMS + DRI/DRM + GBM right?</p>\n\n<blockquote>\n  <p>If I start the application from the shell, at times I will see a glimpse of the cursor flashing behind my application.</p>\n</blockquote>\n\n<p>You're mixing up a few terms here. A <em>shell</em> is the program that provides you with a command like, job control, stdio redirection, scripting support and so on. What you probably are referring to is the Linux kernel virtual terminal console (Linux VT).</p>\n\n<p>When starting a program that directly uses a framebuffer device, you have to put the virtual terminal your process uses into <a href=\"http://man7.org/linux/man-pages/man4/console_ioctl.4.html\" rel=\"nofollow\">graphics mode</a> (KDSETMODE).</p>\n\n<blockquote>\n  <p>Likewise, if I start it from inside a terminal emulator in X, I get glimpses of the mouse moving behind if I move the mouse around.</p>\n</blockquote>\n\n<p>When in a started from a X11 environment the X11 server is the exclusive owner of the VT and graphics mode. All graphics operations must go through the X11 server. As far as systems design is concerned, any program trying to touch a fbdev it doesn't own should be shot in the face (immediately be sent a SIGSEGV). Don't do it. Period, no discussion. The X11 server owns the VT and while the VT is active the fbdev.</p>\n\n<p>What you can do instead is allocate a own VT for your program, and let it use that. However you will then get graphical output only if the X11 server is not running and the console switched to the VT of your program.</p>\n"}], "owner": {"reputation": 1151, "user_id": 868707, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d6908f049c52e111e2143f768b152d19?s=128&d=identicon&r=PG", "display_name": "ReX357", "link": "https://stackoverflow.com/users/868707/rex357"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2349, "favorite_count": 1, "accepted_answer_id": 32636098, "answer_count": 1, "score": 3, "last_activity_date": 1442514572, "creation_date": 1442443765, "last_edit_date": 1442514572, "question_id": 32620019, "link": "https://stackoverflow.com/questions/32620019/c-linux-how-to-takeover-the-framebuffer", "title": "C + Linux: How to takeover the framebuffer", "body": "<p>I have an OpenGL application that renders directly to the framebuffer. </p>\n\n<p>If I start the application from the terminal, at times I will see a glimpse of the cursor flashing behind my application. Likewise, if I start it from inside a terminal emulator in X, I get glimpses of the mouse moving behind if I move the mouse around.</p>\n\n<p>My application currently renders at 45fps so low frame rate shouldn't be the issue.</p>\n\n<p>I notice when X starts it seems to clear the shell before starting to render but then when you close X server later on, the diagnostic stuff that was being sent to stdout comes back so I doubt it's issuing a clear command.</p>\n\n<p>How is what I want to do accomplished? Can you simply render to fb1 and tell the video output to display from fb1 and not fight over fb0? Then when your application dies you can return the display to fb0? </p>\n\n<p>EDIT:</p>\n\n<p>For clarification, the app is being developed for an embedded system on an ARM SoC (Freescale i.MX6) with the Vivante GPU and running on ArchLinux ARM.</p>\n"}, {"tags": ["c", "arrays", "ascii"], "answers": [{"comments": [{"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1442444126, "post_id": 32620036, "comment_id": 53090511, "body": "Ah crap I keep forgetting this, thank you. I&#39;ll give you the points when it lets me because you were first. Thanks to the other answerers too I appreciate your input."}], "tags": [], "owner": {"reputation": 8652, "user_id": 418374, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5481f63530b72b21031d1ebcbcc9592f?s=128&d=identicon&r=PG", "display_name": "Cong Ma", "link": "https://stackoverflow.com/users/418374/cong-ma"}, "is_accepted": false, "score": 3, "last_activity_date": 1442443856, "creation_date": 1442443856, "answer_id": 32620036, "question_id": 32620013, "link": "https://stackoverflow.com/questions/32620013/is-this-end-of-transmission-character-or-something-else/32620036#32620036", "title": "Is this End of Transmission character or something else?", "body": "<p>Accessing beyond array boundary is <em>undefined behaviour</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "is_accepted": false, "score": 5, "last_activity_date": 1442448571, "last_edit_date": 1495542126, "creation_date": 1442443890, "answer_id": 32620039, "question_id": 32620013, "link": "https://stackoverflow.com/questions/32620013/is-this-end-of-transmission-character-or-something-else/32620039#32620039", "title": "Is this End of Transmission character or something else?", "body": "<p>You're accessing <strong>out of bounds memory</strong>. You <em>can't really know</em> what's in it. There may be anything from the <code>4</code> you found, to just a <code>0</code>, a <em>Thunder Cat</em> or <a href=\"http://catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">a demon may come out of your nose</a>. </p>\n\n<p>By the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/\" rel=\"nofollow noreferrer\">C Standard</a> definition, accessing out of bounds memory is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behavior</a>.</p>\n\n<hr>\n\n<h2>Might Interest you</h2>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/15646973/how-dangerous-is-it-to-access-an-array-out-of-bounds\">How dangerous is it to access an array out of bounds?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior?rq=1\">Undefined, unspecified and implementation-defined behavior</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1597405/what-happens-to-a-declared-uninitialized-variable-in-c-does-it-have-a-value/1597426#1597426\">What happens to a declared, uninitialized variable in C? Does it have a value?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1096, "user_id": 541437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9813c60c9048854d3588fa0a65268da0?s=128&d=identicon&r=PG", "display_name": "Erik Johnson", "link": "https://stackoverflow.com/users/541437/erik-johnson"}, "is_accepted": false, "score": 2, "last_activity_date": 1442443898, "creation_date": 1442443898, "answer_id": 32620041, "question_id": 32620013, "link": "https://stackoverflow.com/questions/32620013/is-this-end-of-transmission-character-or-something-else/32620041#32620041", "title": "Is this End of Transmission character or something else?", "body": "<p>Once you get past the first \\0, C does not define the contents of the buffer.  Basically, you got whatever was left in memory from last time that area of memory was used, and it has no meaning within your context.</p>\n"}, {"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1442448592, "post_id": 32620061, "comment_id": 53091612, "body": "The <code>&#39;\\0&#39;</code> is in the array as well."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1442506487, "post_id": 32620061, "comment_id": 53118994, "body": "@zenith thank you I thought I had already made that clear, but I have added one word."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1442506502, "last_edit_date": 1442506502, "creation_date": 1442444049, "answer_id": 32620061, "question_id": 32620013, "link": "https://stackoverflow.com/questions/32620013/is-this-end-of-transmission-character-or-something-else/32620061#32620061", "title": "Is this End of Transmission character or something else?", "body": "<p>This line allocates 4 bytes of memory. The 3 that are in the array below plus the unseen string terminator <code>'\\0'</code></p>\n\n<pre><code>char mystring[] = \"HAL\";\n</code></pre>\n\n<p>Array indexing is from <code>0</code>, so <code>mystring[2]</code> is <code>'L'</code> and <code>mystring[3]</code> is <code>'\\0'</code>.</p>\n\n<p>Indexing any further is undefined behaviour, so no-one can explain the value <code>4</code> which you are getting.</p>\n"}], "owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1442506502, "creation_date": 1442443731, "question_id": 32620013, "link": "https://stackoverflow.com/questions/32620013/is-this-end-of-transmission-character-or-something-else", "title": "Is this End of Transmission character or something else?", "body": "<p>So I'm doing a string basics tutorial in standard C.</p>\n\n<p>I have:</p>\n\n<pre><code>char mystring[] = \"HAL\";\nfor (int i = 0; i &lt; 3; i++) \n    mystring[i] += 1;\nfor (int k = 0; k &lt; 10; k++)\n    printf(\"\\n %d\", mystring[k]);\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>73\n66\n77\n0\n4\n0\n0\n0\n0\n0\n</code></pre>\n\n<p>Now mystring[3] = 0 makes sense to me because I read that string literals terminate in a null character so the number of bytes is n+1 chars. I have no idea why mystring[4] = 4 though. I looked 4 up in an ascii table and it says it's \"end of transmission\". I did a few quick google searches on end of transmission character for C strings and didn't find anything. So would somebody tell me what's going on here please? Is this a standard thing? When exactly can I expect it to happen?</p>\n"}, {"tags": ["c", "opengl", "rubiks-cube"], "comments": [{"owner": {"reputation": 373, "user_id": 5160486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fa20f8adb3e37c4b8e2e06693b00e7?s=128&d=identicon&r=PG&f=1", "display_name": "Henk De Boer", "link": "https://stackoverflow.com/users/5160486/henk-de-boer"}, "edited": false, "score": 2, "creation_date": 1442442879, "post_id": 32619724, "comment_id": 53090147, "body": "You call glLoadIdentity in drawCube, this basically resets your matrix stack so it makes every call to drawCube draw the exact same cube: all previous matrix operations between the drawcalls are discarded by the glLoadIdentity call. Remove it and see what happens, it may either solve your problem or present a new one."}, {"owner": {"reputation": 302, "user_id": 4158021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4d51ef3c8e59e7ab1dcf233bfb7c2271?s=128&d=identicon&r=PG&f=1", "display_name": "bla9x", "link": "https://stackoverflow.com/users/4158021/bla9x"}, "reply_to_user": {"reputation": 373, "user_id": 5160486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fa20f8adb3e37c4b8e2e06693b00e7?s=128&d=identicon&r=PG&f=1", "display_name": "Henk De Boer", "link": "https://stackoverflow.com/users/5160486/henk-de-boer"}, "edited": false, "score": 0, "creation_date": 1442446681, "post_id": 32619724, "comment_id": 53091198, "body": "Thanks a lot Henk. That of course brings up a new problem. Say I rotate a slice 90 degrees just using if x == -1 in display(). It looks okay if looked at face on but goes wrong if you go off axis like so <a href=\"http://imgur.com/JV9M42Q\" rel=\"nofollow noreferrer\">imgur.com/JV9M42Q</a>"}, {"owner": {"reputation": 373, "user_id": 5160486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fa20f8adb3e37c4b8e2e06693b00e7?s=128&d=identicon&r=PG&f=1", "display_name": "Henk De Boer", "link": "https://stackoverflow.com/users/5160486/henk-de-boer"}, "edited": false, "score": 0, "creation_date": 1442475218, "post_id": 32619724, "comment_id": 53099537, "body": "Well I&#39;m afraid I&#39;m not a wizard with the old OpenGL functions so I&#39;m not sure. I think in the picture the cube itself is fixed, but the camera is rotated around the cube? And the picture results from calling <code>glRotatef(45, 0.0, 1.0, 0.5);</code> which will rotate around vector(0,1,0.5). Because that sounds wrong to me, shouldn&#39;t you just be rotating around an axis perpendicular to the set of cubes you rotate, at the center of those cubes? Could you explain your sequence of rotations more, especially the rotate_x/y variables."}], "answers": [{"tags": [], "owner": {"reputation": 5109, "user_id": 213489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39d7766c4d7d117128fa47487cf30a72?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan S.", "link": "https://stackoverflow.com/users/213489/nathan-s"}, "is_accepted": false, "score": -1, "last_activity_date": 1442470234, "creation_date": 1442470234, "answer_id": 32623600, "question_id": 32619724, "link": "https://stackoverflow.com/questions/32619724/c-opengl-unable-to-modify-cubes-independently/32623600#32623600", "title": "C/OpenGL - Unable to modify cubes independently?", "body": "<p>It might be useful to look at some working Rubik's cube code in OpenGL.</p>\n\n<p>Here is some code that takes the corners and draws them:</p>\n\n<p><a href=\"https://github.com/nathansttt/hog2/blob/master/environments/RubiksCubeCorners.cpp#L594\" rel=\"nofollow\">https://github.com/nathansttt/hog2/blob/master/environments/RubiksCubeCorners.cpp#L594</a></p>\n\n<p>Note that it's drawing a black background and then the colors on top of that.</p>\n\n<p>There is another class for drawing the edges that does it similarly.</p>\n\n<p>Above that is a class that draws the whole cube by drawing the edges and corners separately.</p>\n\n<p>On top of this is code that does the rotations when pieces move. Here is the main calling class for some code that interpolates between two Rubik cube states:</p>\n\n<p><a href=\"https://github.com/nathansttt/hog2/blob/master/environments/RubiksCube.cpp#L648\" rel=\"nofollow\">https://github.com/nathansttt/hog2/blob/master/environments/RubiksCube.cpp#L648</a></p>\n\n<p>Not that overall this is not high performance code, and isn't the modern way to use OpenGL. But, it works, which is what is most important for this code.</p>\n"}], "owner": {"reputation": 302, "user_id": 4158021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4d51ef3c8e59e7ab1dcf233bfb7c2271?s=128&d=identicon&r=PG&f=1", "display_name": "bla9x", "link": "https://stackoverflow.com/users/4158021/bla9x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442470234, "creation_date": 1442441999, "question_id": 32619724, "link": "https://stackoverflow.com/questions/32619724/c-opengl-unable-to-modify-cubes-independently", "title": "C/OpenGL - Unable to modify cubes independently?", "body": "<p>This is my first time working properly with OpenGL, although I have worked a little bit with C before</p>\n\n<p>I have written my own drawCube function which takes in an coordinates array for the origin of the cube.</p>\n\n<p>I was hoping the code would draw the cubes all wonky in regards to one another but they're not. Nor does it draw the other two separate cubes. I've spent a few hours going over this but have no idea why. Is it because drawCube isn't returning something usable for display(), if so what does it need to return?</p>\n\n<p>As you might be able to tell this will end up being a Rubik's Cube. I've got half an idea of what to do with the data structure once I've done this, but until then I feel stuck</p>\n\n<pre><code>void display() {\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear screen\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n    int x, y, z = 0;\n    for (z = -1; z &lt; 2; z++) {\n        for (y = -1; y &lt; 2; y++) {\n            for (x = -1; x &lt; 2; x++) {\n                float origin[3] = {x, y, z};\n                glPushMatrix();\n                    glTranslatef(x, y, z);\n                    glRotatef(45, 0.0, 1.0, 0.5);\n                    drawCube(origin);\n                glPopMatrix();\n            }\n        }\n    }\n\n    glPushMatrix();\n        glTranslatef(1,1,0);\n        glRotatef(45, 0.1, 0.2, 0.5);\n        glColor3ub(255,0,255);\n        float origin0[3] = {-10, 10, 0};\n        drawCube(origin0);\n    glPopMatrix();\n\n    glPushMatrix();\n        glTranslatef(1,-1,0);\n        glRotatef(45, 0.1, 0.2, 0.5);\n        glColor3ub(255,0,0);\n        float origin1[3] = {10, -10, 0};\n        drawCube(origin1);\n    glPopMatrix();\n\n    // Double buffering effect\n    //glFlush();\n    glutSwapBuffers();\n}\n</code></pre>\n\n<p>And the drawCube function:</p>\n\n<pre><code>void drawCube(float origin[]) {\n    // Rotates the cube\n    glLoadIdentity();\n\n    // Rotate when user changes rotate_x and rotate_y\n    glRotatef(rotate_x, 1.0, 0.0, 0.0);\n    glRotatef(rotate_y, 0.0, 1.0, 0.0);\n\n    //printf(\"X: %f Y: %f\", rotate_x, rotate_y);\n\n    // Use glTranslate(x,y,z) to move it\n    //glTranslatef(0.1, 0.0, 0.0);\n\n    glScalef(0.2,0.2,0.2);\n\n    // Define the vertices counterclockwise. Not important now but will be once\n    // start to work with lighting, textures etc\n\n    // Red side - FRONT\n    glBegin(GL_POLYGON); // Start drawing front of cube\n        glColor3f( 1.0, 0.0, 0.0);\n        glVertex3f(origin[0]-0.5, origin[1]-0.5, origin[2]-0.5); // Vertex 1\n        glVertex3f(origin[0]-0.5, origin[1]+0.5, origin[2]-0.5); // Vertex 2\n        glVertex3f(origin[0]+0.5, origin[1]+0.5, origin[2]-0.5); // Vertex 3\n        glVertex3f(origin[0]+0.5, origin[1]-0.5, origin[2]-0.5); // Vertex 4\n    glEnd();\n\n    // Orange side - BACK\n    glBegin(GL_POLYGON);\n        glColor3f(   1.0,  0.5, 0.0 );\n        glVertex3f( origin[0]+0.5, origin[1]-0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]+0.5, origin[1]+0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]-0.5, origin[1]+0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]-0.5, origin[1]-0.5, origin[2]+0.5 );\n    glEnd();\n\n    // White side - RIGHT\n    glBegin(GL_POLYGON);\n        glColor3f(  1.0,  1.0,  1.0 );\n        glVertex3f( origin[0]+0.5, origin[1]-0.5, origin[2]-0.5 );\n        glVertex3f( origin[0]+0.5, origin[1]+0.5, origin[2]-0.5 );\n        glVertex3f( origin[0]+0.5, origin[1]+0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]+0.5, origin[1]-0.5, origin[2]+0.5 );\n    glEnd();\n\n    // Yellow side - LEFT\n    glBegin(GL_POLYGON);\n        glColor3f(   1.0,  1.0,  0.0 );\n        glVertex3f( origin[0]-0.5, origin[1]-0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]-0.5, origin[1]+0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]-0.5, origin[1]+0.5, origin[2]-0.5 );\n        glVertex3f( origin[0]-0.5, origin[1]-0.5, origin[2]-0.5 );\n    glEnd();\n\n    // Green side - TOP\n    glBegin(GL_POLYGON);\n        glColor3f(   0.0,  1.0,  0.0 );\n        glVertex3f( origin[0]+0.5,  origin[1]+0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]+0.5,  origin[1]+0.5, origin[2]-0.5 );\n        glVertex3f( origin[0]-0.5,  origin[1]+0.5, origin[2]-0.5 );\n        glVertex3f( origin[0]-0.5,  origin[1]+0.5, origin[2]+0.5 );\n    glEnd();\n\n    // Blue side - BOTTOM\n    glBegin(GL_POLYGON);\n        glColor3f(   0.0,  0.0,  1.0 );\n        glVertex3f( origin[0]+0.5, origin[1]-0.5, origin[2]-0.5 );\n        glVertex3f( origin[0]+0.5, origin[1]-0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]-0.5, origin[1]-0.5, origin[2]+0.5 );\n        glVertex3f( origin[0]-0.5, origin[1]-0.5, origin[2]-0.5 );\n    glEnd();\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "networking", "userspace"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442441881, "post_id": 32619649, "comment_id": 53089864, "body": "Can you get to the header by using a <code>socket()</code> with <code>SOCK_RAW</code>?"}, {"owner": {"reputation": 31, "user_id": 3681106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6f6732fd64c2b546db52d3407580ff?s=128&d=identicon&r=PG&f=1", "display_name": "fanfoot", "link": "https://stackoverflow.com/users/3681106/fanfoot"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442532922, "post_id": 32619649, "comment_id": 53131699, "body": "Not that I&#39;m aware of."}, {"owner": {"reputation": 31, "user_id": 3681106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6f6732fd64c2b546db52d3407580ff?s=128&d=identicon&r=PG&f=1", "display_name": "fanfoot", "link": "https://stackoverflow.com/users/3681106/fanfoot"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1443033164, "post_id": 32619649, "comment_id": 53334639, "body": "In the end I abandoned this and used a different approach.  Since the packet has already updated the MAC address table, looking up the MAC address in the table gives me the port it <i>must</i> have come in on."}], "owner": {"reputation": 31, "user_id": 3681106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6f6732fd64c2b546db52d3407580ff?s=128&d=identicon&r=PG&f=1", "display_name": "fanfoot", "link": "https://stackoverflow.com/users/3681106/fanfoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1442441549, "creation_date": 1442441549, "question_id": 32619649, "link": "https://stackoverflow.com/questions/32619649/access-to-sk-buff-from-user-space", "title": "Access to sk_buff from user space", "body": "<p>I'm working with a switch.  Packets come into the kernel via a special gigabit port where each packet is preceded by a header that tells you what switch port the packet originally came in on.</p>\n\n<p>I'm working on a protocol that requires me to know the port in order to respond to a packet--you can imagine power allocation, OAM, 802.1X, etc all have this issue.</p>\n\n<p>I store the switch port number in the sk_buff in a new field.  No problem.  </p>\n\n<p>But in user space I'm receiving the packets using recvfrom and don't have access to the sk_buff.  I have access to the sll_ifindex so I can tell what interface, even VLAN, the packet came in on (say eth0.2), but since all packets come in the special gigabit port this isn't what I need.  I need the original port.</p>\n\n<p>Is there some way to trace back from the sockaddr to the sk_buff?  Since the packet is being copied along the way, I lose access to the bytes in front of it.  And at least right now I don't have access to the skbuff either.  I could come up with something flaky like maintaining a separate queue of this info and communicating that thru a separate channel or something but that seems problematic. </p>\n\n<p>Ideas?</p>\n"}, {"tags": ["c", "linux", "process", "raspberry-pi", "raspbian"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442442033, "post_id": 32619572, "comment_id": 53089915, "body": "Start by adding <code>return 0;</code> to the end of main() (this is not needed by c99 (IIRC) , but still good practice, IMHO)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442442706, "post_id": 32619572, "comment_id": 53090097, "body": "Perhaps a memory leak? &quot;Enough free memory&quot; might gradually evaporate."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1442442819, "post_id": 32619572, "comment_id": 53090129, "body": "Why do you <code>fopen()</code> a file, <code>printf()</code>, and then <code>fclose()</code> the file again? You <i>do</i> realize <code>printf()</code> prints to <code>stdout</code>, don&#39;t you?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442442937, "post_id": 32619572, "comment_id": 53090162, "body": "@EOF: good catch: stale pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442442975, "post_id": 32619572, "comment_id": 53090173, "body": "OP seems to be using <code>stdout</code> to write to a text file. Why not open <code>FILE *saved</code> and use <code>fprintf</code>?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442443302, "post_id": 32619572, "comment_id": 53090276, "body": "@wildplasser: I dunno, I just don&#39;t understand what the contortions are needed for, since <code>fprintf()</code> is the sane way to write to some file other than <code>stdout</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442443475, "post_id": 32619572, "comment_id": 53090327, "body": "@EOF fclose() is kind of a destructor: it close()s the underlying file <i>and</i> free()s the FILE structure. So the pointer will get stale after the fclose() call."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442443666, "post_id": 32619572, "comment_id": 53090386, "body": "@wildplasser: Ok, but as long as <code>stdout</code> itself is never used, that shouldn&#39;t be a problem in practice (though it may be undefined behavior technically). But, come to think of it, since <code>stdout</code> is global, this may cause race-conditions between the two callbacks?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442443908, "post_id": 32619572, "comment_id": 53090459, "body": "<code>stdout = fopen(&quot;log_readers.txt&quot;, &quot;a&quot;);</code> reassigns the pointer; the old value will be forgotten. (stdout is not required to be an actual pointer, but should behave like one; mostly something like <code>&amp;_IOBUF[1]</code> ) And in that case the assignment would be a structure assignment (<code>*dst = *src;</code>) , but the bufferpointers referenced by the structure (dynamically allocated) would be orphaned."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442444165, "post_id": 32619572, "comment_id": 53090523, "body": "@wildplasser: Man, I&#39;m too tired to try to grok this today. I&#39;ll just go to bed and hope to dream of sane I/O, like <code>read()</code> or <code>write()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "is_accepted": true, "score": 0, "last_activity_date": 1442908724, "creation_date": 1442908724, "answer_id": 32711450, "question_id": 32619572, "link": "https://stackoverflow.com/questions/32619572/why-background-process-could-be-interrupted-after-some-time-of-successful-execut/32711450#32711450", "title": "Why background process could be interrupted after some time of successful execution? (exit code 248)", "body": "<p>Haven't noticed obvious thing. Need to remove <code>sleep(300)</code> and make infinite loop like this <code>while (1) { sleep(1); }</code></p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 32711450, "answer_count": 1, "score": 0, "last_activity_date": 1442908724, "creation_date": 1442441155, "question_id": 32619572, "link": "https://stackoverflow.com/questions/32619572/why-background-process-could-be-interrupted-after-some-time-of-successful-execut", "title": "Why background process could be interrupted after some time of successful execution? (exit code 248)", "body": "<p>I wrote a C program for Raspberry Pi which reads Wiegand card ID from two readers and put in a text file. Program is based on <a href=\"http://abyz.co.uk/rpi/pigpio/\" rel=\"nofollow\">pigpio library</a> and in fact is just modified example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pigpio.h&gt;\n#include \"wiegand.h\"\n\n\nvoid callback1(int bits, uint32_t value)\n{\n\n    FILE *saved = stdout;\n    stdout = fopen(\"log_readers.txt\", \"a\");\n    printf(\"Reader_1: bits=%d value=%u\\n\", bits, value);\n    fclose(stdout);\n    stdout = saved;\n}\n\nvoid callback2(int bits, uint32_t value)\n{\n   FILE *saved = stdout;\n   stdout = fopen(\"log_readers.txt\", \"a\");   \n   printf(\"Reader_2: bits=%d value=%u\\n\", bits, value);\n   fclose(stdout);\n   stdout = saved;\n}\n\nint main(int argc, char *argv[])\n{\n   Pi_Wieg_t * w1;\n   Pi_Wieg_t * w2;\n   if (gpioInitialise() &lt; 0) return 1;\n   w1 = Pi_Wieg(14, 15, callback1, 5);\n   w2 = Pi_Wieg(23, 24, callback2, 5);\n   sleep(300);\n   Pi_Wieg_cancel(w1);\n   Pi_Wieg_cancel(w2);\n   gpioTerminate();\n}\n</code></pre>\n\n<p>When I compile and run the program everything works fine \n(checked log_readers.txt file with <code>tail -f</code>) </p>\n\n<p>When I run the binary in background mode </p>\n\n<pre><code>sudo ./all_readers.bin &amp;\n</code></pre>\n\n<p>it's also executed correctly, but after some time is stop working.</p>\n\n<p>Immediately after running ps see the process:</p>\n\n<pre><code>pi@raspberrypi ~/sandbox $ ps ax | grep all_readers\n 3768 pts/0    S      0:00 sudo ./all_readers.bin\n 3769 pts/0    SLl    0:00 ./all_readers.bin\n</code></pre>\n\n<p>But if I run same command after 5 minutes no output in ps:</p>\n\n<pre><code>pi@raspberrypi ~/sandbox $ ps ax | grep all_readers\n 3782 pts/0    S+     0:00 grep --color=auto all_readers\n[2]-  Exit 248                sudo ./all_readers.bin\n</code></pre>\n\n<p>Looks like proccess became terminated. According to my observations it's not depending on program-related events like reading card. Also it's enough free memory in RAM and on disk. I tried to catch the problem via pidstat utility, but didn't seen any error string.</p>\n\n<p>What does exit code 248 mean? And what could be the reason of terminating background process and how to diagnose that?</p>\n\n<p>Any suggestion is much appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1442441156, "post_id": 32619555, "comment_id": 53089615, "body": "<code>print</code> should be <code>printf</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1442441187, "post_id": 32619555, "comment_id": 53089626, "body": "And <code>scan</code> should be <code>scanf</code>. Aren&#39;t you getting errors when you compile the program?"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1442441242, "post_id": 32619555, "comment_id": 53089646, "body": "You don&#39;t want <code>print</code> do you?  It should be <code>printf</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1442441276, "post_id": 32619555, "comment_id": 53089655, "body": "@JerryJeremiah is there an echo in here?"}, {"owner": {"reputation": 17, "user_id": 5344233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5e0fa54964ee6d114555f7478b179cb?s=128&d=identicon&r=PG&f=1", "display_name": "anoobymous", "link": "https://stackoverflow.com/users/5344233/anoobymous"}, "edited": false, "score": 0, "creation_date": 1442441278, "post_id": 32619555, "comment_id": 53089658, "body": "no it does not. I am running it on SimpleIDE. I do not get error for scan nor print."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1442441354, "post_id": 32619555, "comment_id": 53089686, "body": "&quot;The counter does not print&quot; means you don&#39;t see the line <code>the count is</code>? Then print a newline after the number. (Also, look up basic <code>printf</code> formatting.)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1442441838, "post_id": 32619555, "comment_id": 53089853, "body": "Splitting your function in sub functions would help: <code>int count = 0; for (int i = 0; i &lt;= n; +n) { if (is_prime(i)) {++count; printf(&quot;%d &quot;,m); } } printf(&quot;the count is: %d&quot;, count);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5344233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5e0fa54964ee6d114555f7478b179cb?s=128&d=identicon&r=PG&f=1", "display_name": "anoobymous", "link": "https://stackoverflow.com/users/5344233/anoobymous"}, "edited": false, "score": 0, "creation_date": 1442443285, "post_id": 32619652, "comment_id": 53090271, "body": "Thank you!!! it worked! Im sorry guys for the noob question. I am very new to programming. For some reason on SimpleIDE, i have to use print instead of printf....else it wont print properly. My class is learning  from this site. <a href=\"http://learn.parallax.com/propeller-c-functions/function-parameter\" rel=\"nofollow noreferrer\">learn.parallax.com/propeller-c-functions/function-parameter</a>. In that example it uses print and not printf."}], "tags": [], "owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "is_accepted": false, "score": 0, "last_activity_date": 1442441861, "last_edit_date": 1442441861, "creation_date": 1442441556, "answer_id": 32619652, "question_id": 32619555, "link": "https://stackoverflow.com/questions/32619555/how-to-print-the-number-of-times-code-looped/32619652#32619652", "title": "how to print the number of times code looped?", "body": "<p>Add a variable <code>count</code> since <code>c</code> is not your count. It is a local test variable whether a prime has been found. add <code>int count = 0;</code> in front of the for loop and print it instead of <code>c</code> at the end. In the if statement where you print the single primes, add <code>count++;</code>. </p>\n\n<pre><code>int n = 100; // for copy paste purposes\n\nint m,i,c,x;\nint count = 0;\n\nfor(m = 1;m&lt;=n;m++){\n    //c = 0;\n    for(i=2;i&lt;=m/2;i++){\n        if(m%i==0){\n            c++;\n            break;\n        }\n    }\n\n    if(c==0 &amp;&amp; m!= 1){\n        printf(\"%d \",m);\n        count++;\n    }\n}\nprintf(\"\\nthe count is: %d\\n\", count);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 0, "last_activity_date": 1442455824, "creation_date": 1442455824, "answer_id": 32621540, "question_id": 32619555, "link": "https://stackoverflow.com/questions/32619555/how-to-print-the-number-of-times-code-looped/32621540#32621540", "title": "how to print the number of times code looped?", "body": "<p>There are quite a few things your program should take care of most importantly it should compile first which I highly doubt it does at this point.Anyway below is a working example for it, with modifications</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid prime(int ); // prototype\n\n//void main(void){\nint main(void){\n    int pri;\n    //scan(\"%d\",&amp;pri);\n    scanf(\"%d\",&amp;pri);\n    prime(pri);    \n    return 0;\n}\n\nvoid prime(int n)\n{\n    int m,i,c,count = 0; // your counter\n\n    for(m = 1 ; m &lt;= n ; m++ ) {\n        c = 0;\n\n        for( i = 2 ; i &lt;= m/2 ; i++ ) {\n\n            if( m%i == 0 ) {\n                c++;\n                break;\n            }\n        }\n\n        if( c == 0 &amp;&amp; m != 1 ){\n               printf(\"%d \",m);\n               count = count + 1;   // keep counting\n        }\n    }  \n    //print(\"the count is: \");              \n    printf(\"\\nthe count is: \");              \n    //print(\"%d\",c);        \n    printf(\"%d\",count);        \n    //  return 0;\n\n\n}\n</code></pre>\n\n<p>Note - better formatting the key.</p>\n"}], "owner": {"reputation": 17, "user_id": 5344233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5e0fa54964ee6d114555f7478b179cb?s=128&d=identicon&r=PG&f=1", "display_name": "anoobymous", "link": "https://stackoverflow.com/users/5344233/anoobymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1442455824, "creation_date": 1442441011, "last_edit_date": 1442441201, "question_id": 32619555, "link": "https://stackoverflow.com/questions/32619555/how-to-print-the-number-of-times-code-looped", "title": "how to print the number of times code looped?", "body": "<p>i have wrote a simple code that prints all the prime numbers from the number that has entered. I would like to print how many prime numbers are printed. I think its print(\"%d\",c++); but i dont know where to put it. I have tried putting it right before return 0; at the end of prime method but it does not work. The prime numbers print just fine but the counter does not print. </p>\n\n<pre><code>    void main(void){\n        int pri;\n        scan(\"%d\",&amp;pri);\n        prime(pri);    \n    }\n\n    void prime(int n){\n        int m,i,c,x;\n\n        for(m = 1;m&lt;=n;m++){\n            c = 0;\n            for(i=2;i&lt;=m/2;i++){\n                if(m%i==0){\n                    c++;\n                    break;\n                }\n            }\n\n            if(c==0 &amp;&amp; m!= 1){\n                printf(\"%d \",m);\n            }          \n        }  \n        print(\"the count is: \");              \n        print(\"%d\",c);        \n        return 0;\n\n\n    }  \n</code></pre>\n\n<p>If I input 100 I want the output to be:</p>\n\n<pre><code> 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 \n 61 67 71 73 79 83 89 97\n The count is 25. \n</code></pre>\n"}, {"tags": ["c", "macos", "malloc", "free"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1442440947, "post_id": 32619497, "comment_id": 53089539, "body": "What is the value of <code>arr</code> when you pass it to <code>free</code>?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1442441094, "post_id": 32619497, "comment_id": 53089591, "body": "You can avoid the problem by using array syntax, e.g. <code>printf(&quot;%d\\n&quot;,arr[i]);</code> That way, you don&#39;t need the <code>arr++</code> in the <code>for</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5344248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/34edf86a38d9e680bc75b0f95236aa09?s=128&d=identicon&r=PG&f=1", "display_name": "1729", "link": "https://stackoverflow.com/users/5344248/1729"}, "edited": false, "score": 0, "creation_date": 1442441204, "post_id": 32619548, "comment_id": 53089631, "body": "Oh! I had the printing in a different function which also used arr to reference the pointer to an array. Then, I moved it into main which caused the problem. Thanks so much!"}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 5, "last_activity_date": 1442440965, "creation_date": 1442440965, "answer_id": 32619548, "question_id": 32619497, "link": "https://stackoverflow.com/questions/32619497/unable-to-free-c-pointer/32619548#32619548", "title": "Unable to free C pointer", "body": "<p>Your program increments <code>arr</code> ten times. The pointer that you're passing to <code>free</code> isn't the same one that you received from <code>calloc</code>. You need to pass the original address, pre-incrementing.</p>\n"}], "owner": {"reputation": 165, "user_id": 5344248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/34edf86a38d9e680bc75b0f95236aa09?s=128&d=identicon&r=PG&f=1", "display_name": "1729", "link": "https://stackoverflow.com/users/5344248/1729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 32619548, "answer_count": 1, "score": 0, "last_activity_date": 1442441032, "creation_date": 1442440775, "last_edit_date": 1442441032, "question_id": 32619497, "link": "https://stackoverflow.com/questions/32619497/unable-to-free-c-pointer", "title": "Unable to free C pointer", "body": "<p>I have been learning C for the last few weeks in Linux Mint.\nBut, I switched to OSX and was testing this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main()\n{\n  int *arr = calloc(10, sizeof(int));\n  if(arr == NULL)\n    printf(\"arr is null\");\n\n  for(int i = 0; i &lt; 10; i++, arr++){\n    printf(\"%d \\n\", *arr);\n  }\n\n\n  free(arr);\n\n  return 0;\n\n}\n</code></pre>\n\n<p>This should work and print 10 zeros, which it does but it does not free arr.</p>\n\n<p>This is the output:</p>\n\n<pre><code>0 \n0 \n0 \n0 \n0 \n0 \n0 \n0 \n0 \n0 \na.out(532,0x7fff72606300) malloc: *** error for object 0x7ff060c04b48: pointer being freed was not allocated\n*** set a breakpoint in malloc_error_break to debug\nAbort trap: 6\n</code></pre>\n\n<p>I don't understand how I could access memory that was not allocated. Shouldn't the output be \"arr is null\" if arr is not allocated?</p>\n"}, {"tags": ["c", "arrays", "dynamic-arrays"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1442440737, "post_id": 32619428, "comment_id": 53089455, "body": "That&#39;s not how any of this works. Look up <code>realloc()</code> if you want to allocate a resizeable array."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1442440790, "post_id": 32619428, "comment_id": 53089473, "body": "What part of your code do you think is defining the initial size of these arrays, and what is that size?  What part do you think is changing that size?"}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442440803, "post_id": 32619428, "comment_id": 53089480, "body": "Also, size[key] and time[key] are declared when key is zero, meaning there are no items available in the array, it&#39;s zero size. I&#39;d expect your program to crash"}, {"owner": {"reputation": 25, "user_id": 5159314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc320ab01a73981f98b4481c4344786?s=128&d=identicon&r=PG&f=1", "display_name": "Lakmal Geekiyanage", "link": "https://stackoverflow.com/users/5159314/lakmal-geekiyanage"}, "edited": false, "score": 0, "creation_date": 1442441964, "post_id": 32619428, "comment_id": 53089892, "body": "How do I use realloc() function?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442443601, "post_id": 32619428, "comment_id": 53090371, "body": "You use <code>realloc</code> to change the size of memory allocated with <code>malloc</code> or <code>calloc</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 304, "user_id": 5236767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83cf443f7264b8ff635bfe69cf8027bd?s=128&d=identicon&r=PG&f=1", "display_name": "pistachiobk", "link": "https://stackoverflow.com/users/5236767/pistachiobk"}, "edited": false, "score": 0, "creation_date": 1442446139, "post_id": 32619428, "comment_id": 53091049, "body": "@pistachiobk array dimensions do not need to be constants. However using <code>0</code> causes undefined behaviour."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442454654, "post_id": 32619428, "comment_id": 53093029, "body": "@M.M  As I read C11 spec <code>malloc(0)</code> is Unspecified behavior, not undefined behavior.  &quot;Whether the <code>calloc</code>, <code>malloc</code>, and <code>realloc</code> functions return a null pointer or a pointer to an allocated object when the size requested is zero&quot; &#167;J.3.12"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442454704, "post_id": 32619428, "comment_id": 53093040, "body": "@chuk I refer to <code>int key = 0, size[key];</code> as in the question"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1442454288, "last_edit_date": 1442454288, "creation_date": 1442442556, "answer_id": 32619826, "question_id": 32619428, "link": "https://stackoverflow.com/questions/32619428/increasing-array-size-dynamically-in-c/32619826#32619826", "title": "Increasing array size dynamically in C", "body": "<p>Something to get you started.</p>\n\n<p>Use <code>realloc()</code> to re-size the memory pointer to by a pointer.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;        \n#include &lt;stdio.h&gt;        \n\nint main(void) {\n  // Start with NULL and a size of 0\n  int *my_time = NULL;\n  size_t sz = 0;\n\n  while (!some_exit_condition) {\n    long long ll; \n    printf(\"Insert value for size : \");\n    if (scanf(\"%lld\", &amp;ll) != 1) {\n      puts(\"Numeric input missing\");\n      break;\n    }\n    if (ll &lt; 0 || ll &gt; SIZE_MAX) {\n      puts(\"Size out of range\");\n      break;\n    }\n\n    sz = (size_t) ll;\n    void *new_ptr = realloc(my_time, sz * sizeof *my_time);\n    if (new_ptr == NULL &amp;&amp; sz != 0) {\n      puts(\"Out of memory\");\n      break;\n    }\n    my_time = new_ptr;\n\n    // do something with `my_time` and `sz`\n\n  }\n  // Clean-up\n  free(my_time);\n  my_time = NULL;\n  sz = 0;\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5159314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc320ab01a73981f98b4481c4344786?s=128&d=identicon&r=PG&f=1", "display_name": "Lakmal Geekiyanage", "link": "https://stackoverflow.com/users/5159314/lakmal-geekiyanage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10428, "favorite_count": 0, "accepted_answer_id": 32619826, "answer_count": 1, "score": 1, "last_activity_date": 1533835366, "creation_date": 1442440504, "last_edit_date": 1533835366, "question_id": 32619428, "link": "https://stackoverflow.com/questions/32619428/increasing-array-size-dynamically-in-c", "title": "Increasing array size dynamically in C", "body": "<p>I need to increase length of 2 arrays according to user input. I'm using the code below. But output is not matching with user input. </p>\n\n<pre><code>    #include&lt;stdio.h&gt;        \n    int main()\n    {\n        int i=0, key=0, size[key], time[key];\n\n        while (key!=-1)\n        {\n             printf(\"Insert value for size : \");\n             scanf(\"%d\",&amp;size[i]);\n             printf(\"Insert value for time : \");\n             scanf(\"%d\",&amp;time[i]);\n             i++;\n\n             printf(\"Run again Press-1 or Exit  : \");\n             scanf(\"%d\",&amp;key);\n        }\n\n        int x=0;\n        for (x ; x&lt;i ; x++)\n        {\n             printf(\"%d %d\\n\",size[x],time[x]);\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>When user inputs the values:</p>\n\n<pre><code>    35 4\n    20 3\n    40 1\n    60 7\n    20 8\n</code></pre>\n\n<p>Then this is the output:</p>\n\n<pre><code>    8  4\n    20 3\n    40 1\n    60 7\n    20 8\n</code></pre>\n\n<p>If length of array exceeded 4, the last element of the <code>time</code> array will be printed as the first element of the <code>size</code> array. </p>\n\n<p>Why does my program give this output?  </p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1442440186, "post_id": 32619319, "comment_id": 53089203, "body": "How does the code using the macro look like?"}, {"owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1442440284, "post_id": 32619319, "comment_id": 53089262, "body": "@CristiFati - Please see comments above."}, {"owner": {"reputation": 356, "user_id": 619609, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/878ae9861da8d9fa3e1f26fb63e25863?s=128&d=identicon&r=PG&f=1", "display_name": "Anorflame", "link": "https://stackoverflow.com/users/619609/anorflame"}, "edited": false, "score": 1, "creation_date": 1442440667, "post_id": 32619319, "comment_id": 53089420, "body": "I would assume the problem is that your operator is cannot be evaluated to a value. You defined a macro, so it means the preprocessor simply pushes all that &#39;do while&#39; loop as a parameter to printf, and its not legal"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1442440712, "post_id": 32619319, "comment_id": 53089445, "body": "Macros are being executed by the preprocessor which treats them as text (before the compiler comes into play), so your <code>printf</code> line(s) would look something like <code>printf(&quot;size of a %zd \\n&quot;, do{typeof......</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1442443270, "post_id": 32619319, "comment_id": 53090265, "body": "What&#39;s wrong with the regular <code>sizeof</code> operator, anyway?"}], "answers": [{"tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": false, "score": 2, "last_activity_date": 1442441517, "last_edit_date": 1442441517, "creation_date": 1442440641, "answer_id": 32619453, "question_id": 32619319, "link": "https://stackoverflow.com/questions/32619319/expected-expression-before-do-macro-using-do-while-loop/32619453#32619453", "title": "expected expression before do. macro using do while loop", "body": "<p>This is because of the way you macro is preprocessed. The preprocessor output (which you may get using <code>gcc -E file.c</code>) will look like this (stripped for <code>a</code> variable only):</p>\n\n<pre><code>int main() {\n    int a;\n    printf(\"size of a %zd \\n\", do { typeof(a) _a; (char*)(&amp;_a + 1) - (char*)(&amp;_a); } while (0));\n    return 0;\n}\n</code></pre>\n\n<p>which is not a correct C syntax. You could use <code>do..while</code> macro like that though (without an assignment or nesting it inside another function):</p>\n\n<pre><code>MY_MACRO(x);\n</code></pre>\n\n<p>Refer to <a href=\"http://pilt.github.io/2009/10/16/the-use-of-do-while-0-in-c-macros/\" rel=\"nofollow\">this article</a> for some more information.</p>\n"}, {"tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": false, "score": 1, "last_activity_date": 1442440657, "creation_date": 1442440657, "answer_id": 32619460, "question_id": 32619319, "link": "https://stackoverflow.com/questions/32619319/expected-expression-before-do-macro-using-do-while-loop/32619460#32619460", "title": "expected expression before do. macro using do while loop", "body": "<p>A do/while loop can't return a value. You could instead use a GCC-style <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html\" rel=\"nofollow\">statement expression</a> to do what you're trying:</p>\n\n<pre><code>#define my_sizeof(x) ({              \\\n    typeof(x) _a;                    \\\n    (char*)(&amp;_a + 1) - (char*)(&amp;_a); \\\n})\n</code></pre>\n\n<p>Clang &amp; GCC support statement expressions for sure, I don't know about any other compilers off the top of my head.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 4, "last_activity_date": 1442440661, "creation_date": 1442440661, "answer_id": 32619462, "question_id": 32619319, "link": "https://stackoverflow.com/questions/32619319/expected-expression-before-do-macro-using-do-while-loop/32619462#32619462", "title": "expected expression before do. macro using do while loop", "body": "<p>Your macro expands to a <code>do</code> loop.  A <code>do</code> loop is not an expression, and does not produce a value.  The compiler is telling you that you cannot use a <code>do</code> loop where you are trying to use one, and it is right.</p>\n\n<p>There is no clean alternative in C, since you cannot declare a variable inside an expression.</p>\n"}], "owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7403, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1442441517, "creation_date": 1442440007, "last_edit_date": 1442440257, "question_id": 32619319, "link": "https://stackoverflow.com/questions/32619319/expected-expression-before-do-macro-using-do-while-loop", "title": "expected expression before do. macro using do while loop", "body": "<p>I have implemented my custom sizeof operator as below</p>\n\n<pre><code>#define my_sizeof(x) do{\\\n    typeof(x) _a;\\\n    (char*)(&amp;_a + 1) - (char*)(&amp;_a);\\\n}while(0)\n</code></pre>\n\n<p>If I compile it I get the error</p>\n\n<pre><code>test.c:26:22: error: expected expression before \u2018do\u2019\n</code></pre>\n\n<p>Can't figure out what I am doing wrong.</p>\n\n<p>My main function is given below.</p>\n\n<pre><code>int main()\n{\n   int a;\n\n   unsigned long long b;\n   double c;\n\n   printf(\"size of a %zd \\n\",my_sizeof(a));\n   printf(\"size of b %zd \\n\",my_sizeof(b));\n   printf(\"size of c %zd \\n\",my_sizeof(c));\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "command-line", "io", "console-application"], "answers": [{"tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": false, "score": 0, "last_activity_date": 1442439755, "creation_date": 1442439755, "answer_id": 32619252, "question_id": 32619114, "link": "https://stackoverflow.com/questions/32619114/input-into-c-console-app-returns-baffling-combination-of-conditional-output-resp/32619252#32619252", "title": "Input into C console app returns baffling combination of conditional output responses", "body": "<p>You should use <code>scanf(\" %c\", &amp;newCalculation);</code> (notice the space before <code>%c</code>), though I would use <code>getchar()</code> for getting single character. </p>\n\n<p>Also, you flow doesn't actually makes sense in here:</p>\n\n<pre><code> do {\n     printf(\"Yes! %c\", newCalculation);\n } while( tolower( newCalculation ) == 'y' );\n</code></pre>\n\n<p>E. g. when I type <code>y</code> in a corrected program, it obviously loops infinitely.</p>\n"}, {"tags": [], "owner": {"reputation": 987, "user_id": 1677605, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f15fed496afc6c9f10025913c2b8884f?s=128&d=identicon&r=PG", "display_name": "xuma202", "link": "https://stackoverflow.com/users/1677605/xuma202"}, "is_accepted": false, "score": 0, "last_activity_date": 1442440239, "creation_date": 1442440239, "answer_id": 32619375, "question_id": 32619114, "link": "https://stackoverflow.com/questions/32619114/input-into-c-console-app-returns-baffling-combination-of-conditional-output-resp/32619375#32619375", "title": "Input into C console app returns baffling combination of conditional output responses", "body": "<p>You program outputs <code>Yes! y</code> infinitely if the input is 'y'</p>\n\n<p>and outputs \u00b4<code>Yes! nNope.</code> if the input is 'n'.</p>\n\n<p>The output is <code>Yes! xThis is not a valid response.\n Please enter \"Y\" if you want to do another calculation, or enter \"N\" to exit. This is not a valid response.\n Please enter \"Y\" if you want to do another calculation, or enter \"N\" to exit.\n</code> </p>\n\n<p>if your input is not y || n.</p>\n\n<p>Your program is totaly wrong and will never do what you expect it to.</p>\n\n<p>Here is version that does what you want</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n    char newCalculation;\n\n    printf(\"Enter a Y/N value for newCalculation\");\n    scanf(\" %c\", &amp;newCalculation);\n\n    do {\n      if (tolower(newCalculation) == 'y') {\n      printf(\"Yes! %c\", newCalculation);\n      break;\n      } else  if( tolower( newCalculation ) == 'n' ) {\n       printf(\"Nope.\");\n       break;\n        } else  {\n      printf(\"This is not a valid response.\\n Please enter \\\"Y\\\" if you want to do another calculation, or enter \\\"N\\\" to exit.\");\n      scanf(\" %c\", &amp;newCalculation);\n    }\n    } while (1);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442440239, "creation_date": 1442439101, "question_id": 32619114, "link": "https://stackoverflow.com/questions/32619114/input-into-c-console-app-returns-baffling-combination-of-conditional-output-resp", "title": "Input into C console app returns baffling combination of conditional output responses", "body": "<p>Wrote this test code to try to sniff out a bug in a larger project.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char newCalculation;\n\n    printf(\"Enter a Y/N value for newCalculation\");\n    scanf(\"%c\", &amp;newCalculation);\n\n    do\n    {\n         printf(\"Yes! %c\", newCalculation);\n    }while( tolower( newCalculation ) == 'y' );\n\n    if( tolower( newCalculation ) == 'n' )\n    {\n        printf(\"Nope.\");\n    }\n\n    while( tolower( newCalculation ) != 'n' &amp;&amp; tolower( newCalculation ) != 'y' )\n    {\n        printf(\"This is not a valid response.\\n Please enter \\\"Y\\\" if you want to do another calculation, or enter \\\"N\\\" to exit.\");\n        scanf(\"%c\", &amp;newCalculation);\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Inputting 'y' at the command line is supposed to return </p>\n\n<pre><code>Yes! y\n</code></pre>\n\n<p>Inputting 'n' at the command line is supposed to return </p>\n\n<pre><code>No. n\n</code></pre>\n\n<p>Any other input is supposed to issue an \"invalid\" response and a new input prompt.</p>\n\n<p>However, when I enter 'y', I get:  </p>\n\n<pre><code>Yes!  This is not a valid response.  Please enter \"y\" if you want to do another calculation, or enter \"N\" to exit.\n</code></pre>\n\n<p>What is causing this?  It's driving me nuts.  </p>\n"}, {"tags": ["c", "multithreading", "segmentation-fault", "pthreads", "pthread-join"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442439502, "post_id": 32619104, "comment_id": 53088913, "body": "You&#39;ll need to provide <i>all</i> relevant code. What is <code>tsl()</code> doing? Also, why do you assume <code>pthread_t</code> is just an alias for <code>int</code>?"}, {"owner": {"reputation": 56, "user_id": 2800125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f2fcee6e3461f552ab60a54cc21fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Mao", "link": "https://stackoverflow.com/users/2800125/mao"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442439859, "post_id": 32619104, "comment_id": 53089060, "body": "I don&#39;t assume it, I just print it that way. The second pthread_join gives me a ESRCH, so I simply output my variables."}, {"owner": {"reputation": 56, "user_id": 2800125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f2fcee6e3461f552ab60a54cc21fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Mao", "link": "https://stackoverflow.com/users/2800125/mao"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442439951, "post_id": 32619104, "comment_id": 53089102, "body": "tsl is source i didn&#39;t write myself, I only have an object file for this. It is a function doing &quot;Test and Set Lock&quot;."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1442440257, "post_id": 32619104, "comment_id": 53089246, "body": "Well, after replacing your mutex with a <code>pthread_mutex_t</code> and the corresponding initializers &amp; functions, and fixing <code>void *run(void *)</code> to have the right prototype, the program works fine for me. <b>Cannot reproduce</b>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1442440611, "post_id": 32619104, "comment_id": 53089407, "body": "Having reviewed the code, the only place the problem can be is on the line that calls <code>tsl(m)</code>. So either you aren&#39;t using the function correctly, or the function itself is broken."}, {"owner": {"reputation": 56, "user_id": 2800125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f2fcee6e3461f552ab60a54cc21fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Mao", "link": "https://stackoverflow.com/users/2800125/mao"}, "edited": false, "score": 0, "creation_date": 1442442201, "post_id": 32619104, "comment_id": 53089958, "body": "Okay, thanks a lot! I was totally stuck and desperate."}], "owner": {"reputation": 56, "user_id": 2800125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f2fcee6e3461f552ab60a54cc21fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Mao", "link": "https://stackoverflow.com/users/2800125/mao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442439059, "creation_date": 1442439059, "question_id": 32619104, "link": "https://stackoverflow.com/questions/32619104/segmentation-fault-pthread-join-because-pthread-t-id-changed-to-0", "title": "Segmentation Fault pthread_join because pthread_t id changed to 0", "body": "<p>I am writing a C program with pthread. After I start my threads and execute them, <strong>something changes the value of one of my two pthreads to 0</strong> in the background for a not explainable reason for me.\nOn my machine, this problem already occurs between   </p>\n\n<pre><code>printf( \"Created thread %d !\\n\", id2 );\n</code></pre>\n\n<p>and</p>\n\n<pre><code>printf( \"id2==%d !\\n\", id2 );\n</code></pre>\n\n<p>Here is the C code:</p>\n\n<pre><code>#include \"mutex.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;unistd.h&gt;\npthread_t id1;\npthread_t id2;\nunsigned char mutex = 0;\n\n\nvoid* run(  )\n{\n  pthread_t s=pthread_self();\n  printf( \"Thread(%d) starting.\\n\", s );\n\n  mutex_lock( &amp;mutex );\n  printf( \"Working in the critical area for 2s.\\n\" );\n  sleep( 2 );\n  mutex_unlock( &amp;mutex );\n\n  s=pthread_self();\n  printf( \"Thread(%d) exiting.\\n\", s );\n\n  pthread_exit( NULL );\n}\n\n\nint main()\n{\n  if( pthread_create( &amp;id1, NULL, run, NULL ) )\n  {\n    perror( \"pthread_create failed!\" );\n    exit( EXIT_FAILURE );\n  }\n  printf( \"Created thread %d !\\n\", id1 );\n  if( pthread_create( &amp;id2, NULL, run, NULL ) )\n  {\n    perror( \"pthread_create failed!\" );\n    exit( EXIT_FAILURE );\n  }\n  printf( \"Created thread %d !\\n\", id2 );\n\n  int r=0;\n  printf( \"Ready for joining thread %d !\\n\", id1 );\n  printf( \"id2==%d !\\n\", id2 );\n  if( ( r=pthread_join( id1, NULL ) ) )\n  {\n    fprintf( stderr, \"%d==pthread_join( id1, ... ) failed!\\n\", r );\n    exit( EXIT_FAILURE );\n  }\n  printf( \"Ready for joining thread %d !\\n\", id2 );\n  if( ( r=pthread_join( id2, NULL ) ) )\n  {\n    fprintf( stderr, \"%d==pthread_join( id2, ... ) failed!\\n\", r );\n    exit( EXIT_FAILURE );\n  }\n  exit( EXIT_SUCCESS );\n}\n</code></pre>\n\n<p>My functions lock and unlock look like this:</p>\n\n<pre><code>void mutex_lock( unsigned char* m )\n{\n  printf( \"mutex_lock()\\n\" );\n  while( tsl( m )==1 );\n  printf( \"mutex locked\\n\" );\n}\n\n\nvoid mutex_unlock( unsigned char* m )\n{\n  printf( \"mutex_unlock()\\n\" );\n  *m=0;\n  printf( \"mutex unlocked\\n\" );\n}\n</code></pre>\n\n<p>Why does my pthread ID suddenly change?</p>\n"}, {"tags": ["c", "arrays", "pointers", "qsort"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1442438610, "creation_date": 1442438610, "answer_id": 32618982, "question_id": 32618857, "link": "https://stackoverflow.com/questions/32618857/c-using-qsort-to-sort-an-array-of-pointers-to-an-adt-struct/32618982#32618982", "title": "C: Using qsort to sort an array of pointers to an ADT (struct)", "body": "<pre><code>SSET *pa = (SSET *) a;\n</code></pre>\n\n<p>looks wrong. <code>qsort</code> passes pointers to the elements to the comparison function. Your array elements are pointers, so your comparison function receives pointers to pointers:</p>\n\n<pre><code>SSET *pa = *(SSET **)a;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 1, "last_activity_date": 1442438649, "creation_date": 1442438649, "answer_id": 32618991, "question_id": 32618857, "link": "https://stackoverflow.com/questions/32618857/c-using-qsort-to-sort-an-array-of-pointers-to-an-adt-struct/32618991#32618991", "title": "C: Using qsort to sort an array of pointers to an ADT (struct)", "body": "<p><code>qsort()</code> passes a pointer to the array elements into the comparison function. So, if you have an array of <code>int</code>, the comparison function will receive <code>int *</code>.</p>\n\n<p>You are attempting to sort an array of pointers to <code>SSET</code>, that is, an array of <code>SSET *</code>. Thus, the comparison function will receive pointers to pointers to <code>SSET</code> (so, <code>SSET **</code>).</p>\n\n<p>So you need to change this:</p>\n\n<pre><code>SSET *pa = (SSET *) a;\nSSET *pb = (SSET *) b;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>SSET *pa = *(SSET **) a;\nSSET *pb = *(SSET **) b;\n</code></pre>\n\n<p>Also, it is usually a good idea not to hardcode a typename as the operand of <code>sizeof</code>. If the type changes, it is another place you'll have to update in the future, and you might make mistakes because you have to remember to use the correct type.</p>\n\n<p>Consider changing this line:</p>\n\n<pre><code>qsort(sets, n, sizeof(SSET *), sset_cmp);\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>qsort(sets, n, sizeof(sets[0]), sset_cmp);\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4794127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44be47b833bf2af196fafd93d3986e35?s=128&d=identicon&r=PG&f=1", "display_name": "user4794127", "link": "https://stackoverflow.com/users/4794127/user4794127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 32618991, "answer_count": 2, "score": 1, "last_activity_date": 1442478430, "creation_date": 1442438106, "last_edit_date": 1442478430, "question_id": 32618857, "link": "https://stackoverflow.com/questions/32618857/c-using-qsort-to-sort-an-array-of-pointers-to-an-adt-struct", "title": "C: Using qsort to sort an array of pointers to an ADT (struct)", "body": "<p>I've been trying to use <code>qsort()</code> to sort an array of pointers of an ADT (named <code>SSET</code>), but I'm getting a weird result. Here's my function:</p>\n\n<pre><code>extern void sset_sort_sets(SSET *sets[], int n) {\n    qsort(sets, n, sizeof(SSET *), sset_cmp);\n}\n</code></pre>\n\n<p>In <code>sset_cmp()</code>, I put a statement to print out the <code>SSET</code>s it is comparing.</p>\n\n<pre><code>int sset_cmp(const void *a, const void *b){\n    SSET *pa = (SSET *) a;\n    SSET *pb = (SSET *) b;\n\n    printf(\"sset_cmp called:\\n\");\n    printf(\"  a = \"); sset_display(pa);\n    printf(\"  b = \"); sset_display(pb);\n    printf(\"\\n\");\n\n    // More stuff...\n</code></pre>\n\n<p>I created an array of two <code>SSET</code>s (in <code>main()</code>)</p>\n\n<pre><code>SSET *s[2];\nint a[] = {-4, 0, 3, 3, 22};\nint c[] = { 1, 2, 3, 4, 5};\ns[0] = sset_from_array(c, n); // { 1 2 3 4 5 }\ns[1] = sset_from_array(a, n); // { -4 0 3 22 }\n\nint i;\nprintf(\"Before sort:\\n\");\nfor (i = 0; i &lt; 2; i++)\n    sset_display(s[i]);\nprintf(\"\\n\");\n\nsset_sort_sets(s, 2);\n\nprintf(\"After sort\\n\");\nfor (i = 0; i &lt; 2; i++)\n    sset_display(s[i]);\n</code></pre>\n\n<p>But here is what I get in the output:</p>\n\n<pre><code>Before sort:\n  { 1 2 3 4 5 }\n  { -4 0 3 22 }\n\nsset_cmp called:\n  a =   { -1589621936 -4 0 3 22 }\n  b =   { -1589621568 }\n\nAfter sort\n  { 1 2 3 4 5 }\n  { -4 0 3 22 }\n</code></pre>\n\n<p>I think I'm messing something up with the pointers in calling <code>qsort()</code>, but I'm not sure how.</p>\n\n<p>I think I included all of the related code. Tell me if there's any other segments you need to find my mistake.</p>\n"}, {"tags": ["c", "logging", "global"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1442438033, "post_id": 32618822, "comment_id": 53088202, "body": "There are either too many possible answers, or good answers would be too long for this format. Please add details to narrow the answer set or to isolate an issue that can be answered in a few paragraphs."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1442439293, "post_id": 32618822, "comment_id": 53088821, "body": "Write to it in append mode, and each application will simply add to what the other ones wrote. If you want to be even more careful, use file locks."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1442439320, "post_id": 32618822, "comment_id": 53088828, "body": "You could instead use <code>syslog</code> if you&#39;re running on Unix."}, {"owner": {"reputation": 23, "user_id": 5344137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59dd40f5e0635a5c4eee813fce2c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "coder77", "link": "https://stackoverflow.com/users/5344137/coder77"}, "edited": false, "score": 0, "creation_date": 1442440126, "post_id": 32618822, "comment_id": 53089177, "body": "I understand appending, but how do I reference the file from multiple files which want to write to the log?"}, {"owner": {"reputation": 23, "user_id": 5344137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59dd40f5e0635a5c4eee813fce2c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "coder77", "link": "https://stackoverflow.com/users/5344137/coder77"}, "edited": false, "score": 0, "creation_date": 1442440153, "post_id": 32618822, "comment_id": 53089189, "body": "..not running on Unix."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1442440242, "post_id": 32618822, "comment_id": 53089232, "body": "Mentioning what plaform you <i>do</i> run on may be more helpful than a list of &quot;not that&quot;s. Opening the file, writing, then closing seems most safe. Use file locks if your platform allows it."}, {"owner": {"reputation": 23, "user_id": 5344137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59dd40f5e0635a5c4eee813fce2c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "coder77", "link": "https://stackoverflow.com/users/5344137/coder77"}, "edited": false, "score": 0, "creation_date": 1442440251, "post_id": 32618822, "comment_id": 53089238, "body": "..is it as simple as opening up the same log file in each of the submitting files?"}, {"owner": {"reputation": 23, "user_id": 5344137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59dd40f5e0635a5c4eee813fce2c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "coder77", "link": "https://stackoverflow.com/users/5344137/coder77"}, "edited": false, "score": 0, "creation_date": 1442440300, "post_id": 32618822, "comment_id": 53089265, "body": "Sorry. Newbie here. Microsoft Visual Studio Express 2013 for Windows Desktop."}, {"owner": {"reputation": 23, "user_id": 5344137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59dd40f5e0635a5c4eee813fce2c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "coder77", "link": "https://stackoverflow.com/users/5344137/coder77"}, "edited": false, "score": 0, "creation_date": 1442440943, "post_id": 32618822, "comment_id": 53089535, "body": "Opening and writing to log is working in first file. Duplicated the code in the second file and got error. Got Expression (sring-Null)"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1442443503, "post_id": 32618822, "comment_id": 53090337, "body": "Please don&#39;t attempt to post code in a comment. Comments are <i>transient</i> on Stack Overflow, and only meant for asking clarification. You can <b><a href=\"https://stackoverflow.com/posts/32618822/edit\">edit</a></b> your own post and add code to it. Make sure to make it <i>part of your question</i>, i.e., no need to add &quot;Edit&quot; in the text. See also <a href=\"http://stackoverflow.com/help/formatting\">How do I format my question?</a> in the <a href=\"https://stackoverflow.com/help\">help center</a>. BTW, welcome to Stack Overflow! Please read the short <a href=\"http://stackoverflow.com/tour\">Introductory Tour</a> some time!"}, {"owner": {"reputation": 23, "user_id": 5344137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59dd40f5e0635a5c4eee813fce2c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "coder77", "link": "https://stackoverflow.com/users/5344137/coder77"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1442444217, "post_id": 32618822, "comment_id": 53090534, "body": "@Jongware Will do. Thanks."}, {"owner": {"reputation": 662, "user_id": 4430622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gs3LViEzxaA/AAAAAAAAAAI/AAAAAAAAAGU/zt8NSZNqsQg/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4430622/dan"}, "edited": false, "score": 1, "creation_date": 1442445792, "post_id": 32618822, "comment_id": 53090948, "body": "As far as keeping it simple, I think your method of opening, appending, and closing, is not bad. I don&#39;t really recommend having multiple programs use the same log file, because of the potential for them to both try to modify it at the same time. In the best case scenario, you have to wait and try again when you can&#39;t edit the file, because another program is using it."}], "answers": [{"tags": [], "owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1443092165, "last_edit_date": 1443092165, "creation_date": 1442446001, "answer_id": 32620357, "question_id": 32618822, "link": "https://stackoverflow.com/questions/32618822/shareable-log-file-in-c-how/32620357#32620357", "title": "Shareable log file in C - how?", "body": "<p>\"Do I put a declaration and/or related statement in a header file which each file that will write to the log includes?\"</p>\n\n<p>That is a pretty simple solution. Instantiate your <code>FILE* myLogFile</code> variable in any of the source files and initialize it to NULL. </p>\n\n<p>When to open the file? You can either open it in main, or probably better, write a getter function getLogFile() that checks if myLogFile is NULL, opens it. To make all accesses to the log file go through this function, dont declare the FILE variable in a header file but only the getter function . You then store the FILE variable as a static variable inside the getter function, not as a global variable:</p>\n\n<pre><code>FILE* getLogFile()\n{ static FILE* myLogFile = NULL;\n  if(myLogFile == NULL)\n  { myLogFile = fopen(...);\n    if(myLogFile == NULL) { ... } // failure to open\n  }\n   return myLogFile;\n}\n</code></pre>\n\n<p>I would opt for this method unless there is some additional constraints. For example, since you say the question is not only about log files but ANY shared functionality, you might have to think about thread safety if you have a multi-threaded application.</p>\n"}], "owner": {"reputation": 23, "user_id": 5344137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59dd40f5e0635a5c4eee813fce2c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "coder77", "link": "https://stackoverflow.com/users/5344137/coder77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1443092165, "creation_date": 1442437976, "last_edit_date": 1442445268, "question_id": 32618822, "link": "https://stackoverflow.com/questions/32618822/shareable-log-file-in-c-how", "title": "Shareable log file in C - how?", "body": "<p>I've got a project comprised of multiple C files (display.cpp, main.cpp, ...). I'd like to have a single log file which I can write to from these various programs which comprise the project. How do I implement and reference a globally-accessible file? I'm new to C but I know how to define and use (open, read, write, close) a file within the context of a single file. But how do I implement a shareable file? </p>\n\n<p>For example, what kind of a declaration is required here to make the file globally accessible (i.e., to set it up for global accessibility). And how is this declaration propagated to other files which will access this log file. Do I put a declaration and/or related statement in a header file which each file that will write to the log includes? I would think hat there would be a fairly straightforward, basic answer. I realize that things can be done in many alternate ways. I'm just trying to implement basic functionality. That it is a log file which I want to implement should be irrelevant. I just want a shared writable file. </p>\n\n<p>Do I simply open the log file, write to it, and then immediately close the file, and repeat the open/write(append)/close process each time I want to write to the log file, as in the code below. Seems like a lot of overhead. I guess I can put all this code in a function I call will the data to be written to the log file. Am I correct about the overhead? Does this sound like the approach to use?</p>\n\n<pre><code>FILE *myfile2;\nerrno_t errorCode = fopen_s(&amp;myfile2, \"C://Users/richard/Desktop/cTestbed2015/test22.txt\", \"a\");\nif (myfile2== NULL)\n{\n    printf(\"myfile2 does not exist \\n\");\n}\nfprintf(myfile2, \"Posting from readfile.cpp\\n\");\nfclose(myfile2);\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "sockets"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1442436946, "post_id": 32618411, "comment_id": 53087653, "body": "It may be useful to write a C function to receive and cast that pointer  (as you have), and compile it into its own .o file.  Then use your C++ to cast the pointer, and also call your C function.  Link everything.  Set a breakpoint in the C, so that when it hits, both your C++ and C code are interpreting the same data at the same time.  It could provide a clue as to what&#39;s going wrong."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442437126, "post_id": 32618411, "comment_id": 53087742, "body": "Are you sure that the client and server machines will be running the same version of the same o/s and will have the same hardware type?  If not, you probably need to use a portable mechanism for encoding the data (but if it is a school project, you may be able to get away with the assumption).  The troubles include &#39;what if one machine is big-endian and the other little-endian?&#39;, and &#39;what if the machines have different sizes for some of the types?&#39;, and &#39;what if the new version of the o/s has different fields compared to the old version?&#39;.  There are other possible problems too."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442437202, "post_id": 32618411, "comment_id": 53087786, "body": "@JonathanLeffler: Yes, Client and server are both using same version, same OS and running on same box."}, {"owner": {"reputation": 134, "user_id": 3470630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ffcadf9aa396bb5596dc63e2e5a466?s=128&d=identicon&r=PG", "display_name": "TezlaCoil", "link": "https://stackoverflow.com/users/3470630/tezlacoil"}, "edited": false, "score": 1, "creation_date": 1442437331, "post_id": 32618411, "comment_id": 53087841, "body": "2 things to consider: Are your C and C++ compilers packing the structures the same? Try a <code>sizeof(ETHERNET_DIAGNOSTIC_INFO)</code> on both sides of the link, and make sure they match. Are your C and C++ compilers treating the types as the same size? <code>unsigned long</code> on your server might have a different size than your client. Creates great fun when serializing/deserializing values coming from a non-x86 architecture."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442437356, "post_id": 32618411, "comment_id": 53087858, "body": "&quot;I removed the C++ guard&quot;. Why?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442437469, "post_id": 32618411, "comment_id": 53087917, "body": "@kadina: that simplifies things magnificently; it allows you to ignore the possible problems I postulated."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442437513, "post_id": 32618411, "comment_id": 53087947, "body": "&quot;Yes, Client and server are both using same version&quot;. Of what? One is using a C compiler and the other is using a C++ compiler."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442437612, "post_id": 32618411, "comment_id": 53087992, "body": "@n.m. - I added C++ guard. But result remains the same."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442437912, "post_id": 32618411, "comment_id": 53088144, "body": "Even if running ont the same platform, using proper serialization and a well-defined format will avoid many future problems. Just think if you recompile one or decide to use the software on different machines or use a proper class in C++ for the object data. For most applications, the overhead is negligible, including many (modern) embedded platforms. Note that you should use at least <code>stdint.h</code> types throughout the fields."}, {"owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "edited": false, "score": 0, "creation_date": 1442438090, "post_id": 32618411, "comment_id": 53088234, "body": "Even if they are running on the same box, they may not be compatible because of different compiler options."}], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1442437392, "post_id": 32618621, "comment_id": 53087878, "body": "I did read the question quickly, but I believe he said he tried this and it is not working.  He also seeks to know why it is not working."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "edited": false, "score": 0, "creation_date": 1442437762, "post_id": 32618621, "comment_id": 53088069, "body": "Yes. I tried and it is not working and also reinterpret_cast should be as below. ETHERNET_DIAGNOSTIC_INFO* NewPtr = reinterpret_cast&lt;ETHERNET_DIAGNOSTIC_INFO *&gt;(buffer)"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442437933, "post_id": 32618621, "comment_id": 53088153, "body": "Sorry, you&#39;ve overlooked just too many things that <a href=\"http://stackoverflow.com/a/32618763/119527\">fukanchik mentioned</a> which are extremely important to consider."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "reply_to_user": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "edited": false, "score": 0, "creation_date": 1442437937, "post_id": 32618621, "comment_id": 53088158, "body": "@kadina Yes, I made a mistake there. Try out the two other things I mentioned. Check the byte order and try packing it with byte fields."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 1, "creation_date": 1442438050, "post_id": 32618621, "comment_id": 53088218, "body": "In general, it&#39;s tempting fate to expect the binary representation of structures to be exportable from one build and imported into another build.  Between padding and vtables, byte ordering, and other factors, you can make it happen, but the solution will almost always be brittle and non-portable."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442438107, "post_id": 32618621, "comment_id": 53088243, "body": "@JonathonReinhart Like what? I mentioned the byte order, I mentioned the packing. The only thing I did not mention was that you might not have received all the data as <code>recv()</code> has no guarantee that it will read it all."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "reply_to_user": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1442438308, "post_id": 32618621, "comment_id": 53088365, "body": "@RussSchultz I would disagree. If you send the data <code>49, 12, 17, 97, 634, 1</code> from one device then it will arrive the same way on the receiving end. Making sure that it does end up in that order and with the same number of bytes per value is naturally then assumed performed. I never intended to imply that it would be always easy."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1442440998, "post_id": 32618621, "comment_id": 53089557, "body": "Yes, bytes can be reliably sent across the wire or written to a file.   The transformation to/from the binary representation and the virtual representation, however, cannot be relied upon unless you do the transformation yourself.  In other words, reading/writing a struct (no matter if you&#39;ve asked the compiler to &quot;pack&quot; it) will always be fraught with sudden breakage if you rely upon the tools to do something specific if isn&#39;t in any specification."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "edited": false, "score": 0, "creation_date": 1442447438, "post_id": 32618621, "comment_id": 53091350, "body": "That is indeed true. However, that is not what he asked for."}], "tags": [], "owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "is_accepted": false, "score": -1, "last_activity_date": 1442437825, "last_edit_date": 1442437825, "creation_date": 1442437231, "answer_id": 32618621, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618621#32618621", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>Yes, you can as the buffer is just the byte representation of the struct sent by the other side. After you have handled the byte order, you can just cast the buffer pointer to a pointer of the type of your struct.</p>\n\n<p>In C++ you can write for example <code>ETHERNET_DIAGNOSTIC_INFO* NewPtr = reinterpret_cast&lt;ETHERNET_DIAGNOSTIC_INFO*&gt;(buffer);</code>\nThis will do what you want unless you run an older C++ compiler not capable of understanding C++11 syntax. However, depending on your compiler the error might arrive from padding the data. </p>\n\n<p>If you define bit fields and pack the struct on both sides you will be fine though. Ask if you need help, but google is your friend.</p>\n\n<blockquote>\n  <blockquote>\n    <p>I doubt that we can not typecast buffer into C++ structure on client when server is sending data as c structure. Is it correct?</p>\n  </blockquote>\n</blockquote>\n\n<p>EDIT:\nYou can cast any binary data generated by any programming language into a readable piece of code in your program. After all, it is all about bits and bytes. So you can cast any data from any program to any data in any other program. Could you quickly print the sizeof(ETHERNET_DIAGNOSTIC_INFO) on both sides and see if they match?</p>\n"}, {"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442437875, "post_id": 32618763, "comment_id": 53088128, "body": "I inevitably end up writing a <code>recv_exact()</code> function that does this loop generically."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442438034, "post_id": 32618763, "comment_id": 53088204, "body": "Especially consider the advice here that recommends using ASN or <a href=\"https://github.com/google/protobuf\" rel=\"nofollow noreferrer\">protobuf</a>. You don&#39;t really want to marshal <code>struct</code>s directly."}], "tags": [], "owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "is_accepted": true, "score": 8, "last_activity_date": 1442437947, "last_edit_date": 1442437947, "creation_date": 1442437777, "answer_id": 32618763, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618763#32618763", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>There are multiple problems with this approach:</p>\n\n<ol>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Endianness\">Endianness</a> might be different between server and client machine</p>\n\n<p>You then need to deserealize numbers and <code>time_t</code>'s.</p></li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\">Structure packing</a> might be different between code compiled on server (c++) and on client (C)</p>\n\n<p>You then need to use a protocol to send data, like binary ASN, protobuf or many others.</p></li>\n<li><p><code>if(recv(sockfd, rxbuf, sizeof(ETHERNET_DIAGNOSTIC_INFO), 0) &gt; 0)</code>\nthere is no guarantee <code>recv</code> will read exactly <code>sizeof(ETHERNET_DIAGNOSTIC_INFO)</code> bytes.</p>\n\n<p>You need to wrap this into <code>while</code> loop (<strong>code is sample and might be non-compilable</strong>):</p></li>\n</ol>\n\n<p>.</p>\n\n<pre><code>int left = sizeof(ETHERNET_DIAGNOSTIC_INFO);\nchar *ptr = rxbuf;\nint rd;\n\nwhile(left&gt;0)\n{\n    rd=recv(sockfd, ptr, left, 0);\n    if(rd==0)\n    {\n        if(left&gt;0) return SOCKET_CLOSED_PREMATURELY;\n        else return SOCKET_DONE;\n    } else if(rd==-1 &amp;&amp; errno==EAGAIN) {\n        //do again\n        continue; \n    } else if(rd==-1 &amp;&amp; errno!=EAGAIN) {\n       return SOCKET_ERROR;\n    }\n    left = left - rd;\n    ptr=ptr+rd;\n}\n</code></pre>\n\n<p>The proper way to send binary data is to use protobuf or apache thrift, or ASN or invent something yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "is_accepted": false, "score": 2, "last_activity_date": 1442437991, "creation_date": 1442437991, "answer_id": 32618829, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618829#32618829", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>You can probably do it but are likely to run into serious significant issues in trying:</p>\n\n<ul>\n<li>Different compilers and compiler settings will pack and align structures differently in order to optimise for the particular processor architecture.  There is absolutely no guarantee that the members of a structure will lay out exactly next to each other unless you play with pragmas. </li>\n<li>Different processors will use different byte orders for things like integers and floating point values.  If you are going to exchange data between a client and server (or vice versa) it behooves you to explicitly define the byte order and then make both sides conform to that definition regardless of the native order.  </li>\n<li>Values like unsigned long will have different sizes based upon the processor architecture targeted by the compiler.  In order to reliably exchange data, you will need to explicitly define the size of the values that will be transferred.</li>\n</ul>\n\n<p>For these reasons, I prefer to write functions (or methods) that will explicitly pack and unpack messages as they are exchanged.  By doing so, you will be subjected to much fewer seemingly mysterious errors. </p>\n"}, {"tags": [], "owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "is_accepted": false, "score": 1, "last_activity_date": 1442438515, "last_edit_date": 1442438515, "creation_date": 1442438157, "answer_id": 32618866, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618866#32618866", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>A number of possible explanations spring to mind:</p>\n\n<ul>\n<li>Different packing of <code>ETHERNET_DIAGNOSTIC_INFO</code> between a C <code>struct</code> and a C++ <code>struct</code>.</li>\n<li>(less likely) Different alignments of <code>rxbuf</code> (you don't show where this pointer comes from). There are no guarantees in C or C++ that reading a <code>int</code> or <code>long</code> that does not lie on natural boundary (e.g. 4-byte aligned) yields correct results.</li>\n<li>That your C and C++ compilers are compiling against different ABIs (e.g. 32-bit and 64-bit respectively).  Note that <code>sizeof(time_t) == 4</code> on a 32-bit platform and <code>8</code> on many 64-bit platforms.</li>\n</ul>\n\n<p>All of these issues point in the same direction: Mapping a <code>struct</code> onto a wire data layout like this is really non-portable and problematic. </p>\n\n<p>If you really insist on doing it you'll need to do the following:</p>\n\n<ul>\n<li>Use <code>#pragma pack</code> directives (or better: if using a C++11 compiler <code>__attribute__ ((__packed__)))</code>. Even then, you can get surprises.</li>\n<li>Decide which byte-ordering you intend using and byte-swap all multi-byte values with <code>htons()</code> and friends. The convention is for multi-byte quantities to be big-endian over TCP/IP.</li>\n<li>Ensure the buffer you call <code>recv()</code> with is aligned - probably to a 4-byte boundary.</li>\n</ul>\n\n<p>A more robust approach is to read the input buffer as a stream of bytes, reconstructing any multi-byte fields as required. </p>\n"}], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 32618763, "answer_count": 4, "score": 6, "last_activity_date": 1442438515, "creation_date": 1442436563, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>I have server, client processes written in C named as NetworkServer.c and NetworkClient.c and these 2 are communicating using linux sockets. When client sends a request as below to get ethernet statistics,</p>\n\n<pre><code>// rxbuf - character array of 128K\n// ETHERNET_DIAGNOSTIC_INFO - structure typedefed\nrecv(sockfd, rxbuf, sizeof(ETHERNET_DIAGNOSTIC_INFO), 0)\n</code></pre>\n\n<p>server fills the data in to rxbuf (as ETHERNET_DIAGNOSTIC_INFO because server also uses the same copy of header file where this structure is defined) and sends the data. Once client receives, it will typecast as below to get the data.</p>\n\n<pre><code>ETHERNET_DIAGNOSTIC_INFO *info = (ETHERNET_DIAGNOSTIC_INFO *) rxbuf;\n</code></pre>\n\n<p>the structure is defined in NetworkDiag.h as below.</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\ntypedef struct ETHERNET_DIAGNOSTIC_INFO\n{\n    uint32_t             cmdId; \n    unsigned long        RxCount[MAX_SAMPLES];\n    unsigned long        TxCount[MAX_SAMPLES];\n    time_t               TimeStamp[MAX_SAMPLES] ;\n    char                 LanIpAddress[20];\n    char                 LanMacAddress[20];\n    char                 WanIpAddress[20];\n    char                 LanDefaultGateway[20];\n    char                 LanSubnetMask[20];\n    char                 LanLease[5000];\n}ETHERNET_DIAGNOSTIC_INFO;\n</code></pre>\n\n<p>This is working fine.</p>\n\n<p>Now there is a requirement that I need to create a c++ file which should work as client (I removed client C file and server should remain as c file). I defined header file for the structure definition as below.</p>\n\n<pre><code>struct ETHERNET_DIAGNOSTIC_INFO\n{\n    uint32_t             cmdId; \n    unsigned long        RxCount[MAX_SAMPLES];\n    unsigned long        TxCount[MAX_SAMPLES];\n    time_t               TimeStamp[MAX_SAMPLES] ;\n    char                 LanIpAddress[20];\n    char                 LanMacAddress[20];\n    char                 WanIpAddress[20];\n    char                 LanDefaultGateway[20];\n    char                 LanSubnetMask[20];\n    char                 LanLease[5000];\n};\n</code></pre>\n\n<p>basically I removed the C++ guard and typedef and using the below code in client.cpp file to get the result from server.</p>\n\n<pre><code>if(recv(sockfd, rxbuf, sizeof(ETHERNET_DIAGNOSTIC_INFO), 0) &gt; 0)\n{\n    ETHERNET_DIAGNOSTIC_INFO *info = reinterpret_cast&lt;ETHERNET_DIAGNOSTIC_INFO *&gt; (rxbuf);\n}\n</code></pre>\n\n<p>I am not getting the correct results. The values in the structure are misplaced (some values are correct but lot of values are misplaced). I tried 'C' type casting also but no use.</p>\n\n<p>I doubt that we can not typecast buffer into C++ structure on client when server is sending data as c structure. Is it correct? Can any one please let me know how to solve this issue?</p>\n"}, {"tags": ["c", "io"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1442435367, "post_id": 32617998, "comment_id": 53086856, "body": "Have you tried running it under a debugger to see what&#39;s happening at that line?"}, {"owner": {"reputation": 1, "user_id": 3657512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b70a6966be56a711320b114b0736b1?s=128&d=identicon&r=PG&f=1", "display_name": "user3657512", "link": "https://stackoverflow.com/users/3657512/user3657512"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1442435884, "post_id": 32617998, "comment_id": 53087129, "body": "Yes, I compiled using the -ggdb tag in gcc, but it only said that some things had multiple definitions, main being the odd one because It only has one definition in my program."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1442435987, "post_id": 32617998, "comment_id": 53087178, "body": "The compiler isn&#39;t the debugger."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1442436125, "post_id": 32617998, "comment_id": 53087245, "body": "You should pay heed to compiler and/or linker errors/warnings. Pleas post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. As given, it is not clear what is your actual problem."}, {"owner": {"reputation": 1, "user_id": 3657512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b70a6966be56a711320b114b0736b1?s=128&d=identicon&r=PG&f=1", "display_name": "user3657512", "link": "https://stackoverflow.com/users/3657512/user3657512"}, "edited": false, "score": 0, "creation_date": 1442436367, "post_id": 32617998, "comment_id": 53087364, "body": "Ok, I ran it through gdb with a break point at outb, and it output  -1  Program received signal SIGSEGV Segmentation Fault 0x0000000000400699 in main()"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1442439058, "post_id": 32617998, "comment_id": 53088711, "body": "Are you sure <code>ioperm()</code> succeeded?"}], "owner": {"reputation": 1, "user_id": 3657512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b70a6966be56a711320b114b0736b1?s=128&d=identicon&r=PG&f=1", "display_name": "user3657512", "link": "https://stackoverflow.com/users/3657512/user3657512"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442434996, "creation_date": 1442434996, "question_id": 32617998, "link": "https://stackoverflow.com/questions/32617998/c-program-ends-after-outb-no-errors-thrown", "title": "C program ends after outb, no errors thrown", "body": "<p>I am writing a simple program to read the Realtime Clock in C. I have set my permissions to allow the program to access the proper register with ioperm(), and run with \"sudo\" to allow permissions to be changed. When I call outb() it may or may not execute properly, but none of the subsequent code executes.</p>\n\n<pre><code>int error = ioperm(0x70, 4, 1);\nprintf(\"%d\\n\", error);\n\noutb(0x70, 0x04);            //stops here\nchar past[30] = \"beyond outb\";\nprintf(\"%s\\n\", past);\n\nunsigned int hour = inb(0x71);\n</code></pre>\n\n<p>**note: I'm aware that this will not produce the desired output regardless. I just need to get to inb() and I know what I need to do from there.</p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1442434868, "post_id": 32617911, "comment_id": 53086610, "body": "because <code>fgets()</code> reads and stores a newline."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1442434869, "post_id": 32617911, "comment_id": 53086611, "body": "Just pick a random number <code>n</code> between <code>0</code> and <code>strlen(phrase1)-1</code>, and show <code>phrase1[n]</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1442434939, "post_id": 32617911, "comment_id": 53086651, "body": "Replace the newline in <code>phrase1</code> with space before you concatenate the two strings."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1442434998, "post_id": 32617911, "comment_id": 53086681, "body": "Generate a random number between <code>0</code> and <code>strlen(phrase)-1</code>. Then use that as an index to <code>phrase1</code>. For the second question, <code>fgets</code> reads the entire line including the newline character."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442435775, "post_id": 32617911, "comment_id": 53087070, "body": "To rid the <code>&#39;\\n&#39;</code>, See <a href=\"http://stackoverflow.com/a/28462221/2410359\">stackoverflow.com/a/28462221/2410359</a>"}], "answers": [{"comments": [{"owner": {"reputation": 812, "user_id": 5330834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Up5x.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/5330834/jake"}, "edited": false, "score": 0, "creation_date": 1442435271, "post_id": 32618028, "comment_id": 53086812, "body": "Ive just realised this is occuring at the end of the concatenated string. Making answers on mobile devices is frustrating because you cannot see what you are replying to. My apologies."}], "tags": [], "owner": {"reputation": 812, "user_id": 5330834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Up5x.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/5330834/jake"}, "is_accepted": false, "score": 0, "last_activity_date": 1442435104, "creation_date": 1442435104, "answer_id": 32618028, "question_id": 32617911, "link": "https://stackoverflow.com/questions/32617911/how-to-pick-a-random-letter-out-of-a-bunch-of-words-a-user-entered/32618028#32618028", "title": "How to pick a random letter out of a bunch of words a user entered", "body": "<p>First question:\n- Find a way of generating a random integer between 0 and a certain integer A.\n- Make A the number of characters in your combined string. Say the resulting random integer is B.\n- print out YourString[B].</p>\n\n<p>I feel like you can probably piece it together from that. At this stage in your learning process, getting code answers might not be beneficial.</p>\n\n<p>Second question: I see you are replacing the end of the first string with a space, trying to catch <code>\\n</code>. Depending on your environment, there may be an <code>\\r</code> preceding it as well.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1442435665, "post_id": 32618041, "comment_id": 53087020, "body": "Note: <code>phrase1[strlen(phrase1)-1]</code> has undefined behavior in the rare situation when the first character is an embedded <code>&#39;\\0&#39;</code>.  It also incorrectly truncates long strings missing a <code>&#39;\\n&#39;</code>.  <code>phrase1[strcspn(phrase1, &quot;\\n&quot;)] = 0;</code> works without those problems."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442437135, "post_id": 32618041, "comment_id": 53087748, "body": "@chux Nice find.  Fixed."}, {"owner": {"reputation": 53, "user_id": 4821084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/05a13feab965bd314fd93880e8d8ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Collwyr", "link": "https://stackoverflow.com/users/4821084/collwyr"}, "edited": false, "score": 0, "creation_date": 1442439096, "post_id": 32618041, "comment_id": 53088733, "body": "@dbush thanks very much for the informative reply, it helped me a lot. I wasn&#39;t aware you could get a random number between 0 and what was in phrase 1, (i haven&#39;t had much experience in random/randomly generating) so it was nice to learn something new. thank you for the fix with the newline too, I wasn&#39;t aware of the function strcspn so it was nice to also learn about this function and how you can use it, So thank you."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1442436961, "last_edit_date": 1442436961, "creation_date": 1442435141, "answer_id": 32618041, "question_id": 32617911, "link": "https://stackoverflow.com/questions/32617911/how-to-pick-a-random-letter-out-of-a-bunch-of-words-a-user-entered/32618041#32618041", "title": "How to pick a random letter out of a bunch of words a user entered", "body": "<p>First seed the RNG:</p>\n\n<pre><code>srandom(getpid() ^ time(NULL));\n</code></pre>\n\n<p>Then get a random number between 0 and <code>strlen(phrase)-1</code>:</p>\n\n<pre><code>int rnum = random() % strlen(phrase);\n</code></pre>\n\n<p>Then print the character in question:</p>\n\n<pre><code>printf(\"random char: %c\\n\",phrase1[rnum]);\n</code></pre>\n\n<p>The reason you're seeing a newline in the concatenated string is that <code>fgets</code> adds the newline generated when you press Enter to the string.  You can remove that by trimming the string by one character:</p>\n\n<pre><code>fgets(phrase1, 100, stdin);\nphrase1[strcspn(phrase1, \"\\n\")] = '\\0';\n...\nfgets(phrase2, 100, stdin);\nphrase2[strcspn(phrase1, \"\\n\")] = '\\0';\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4821084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/05a13feab965bd314fd93880e8d8ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Collwyr", "link": "https://stackoverflow.com/users/4821084/collwyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 32618041, "answer_count": 2, "score": 0, "last_activity_date": 1442436961, "creation_date": 1442434679, "last_edit_date": 1442436493, "question_id": 32617911, "link": "https://stackoverflow.com/questions/32617911/how-to-pick-a-random-letter-out-of-a-bunch-of-words-a-user-entered", "title": "How to pick a random letter out of a bunch of words a user entered", "body": "<p>I'm trying to create a little program that asks the user to enter two phrases. After entering two phrases, I display the phrases back to the user. Then I put both phrases into one variable, which I then display back a third time using one variable.</p>\n\n<p>Next, I am trying to attempt to pick a letter at random from the two phrases  and display the letter back to the user. </p>\n\n<p>I've been doing some research online to see how people pick letters at random, but I haven't really seen anything other than picking words at random, but didn't really see how this could be applied to my own program. </p>\n\n<p>thanks in advance.</p>\n\n<p>P.S I'm noticing that when displaying the two phrases together,  the second one is on a newline. Can anyone explain why that happens and how to get rid of it too? thanks </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\n\nint main()\n{\n    srand(time(NULL));\n    char phrase1[100], phrase2[100];\n    printf(\"Please enter your first phrase\\t\");\n    fgets(phrase1, 100, stdin);\n    printf(\"Please enter your second phrase\\t\");\n    fgets(phrase2, 100, stdin);\n    printf(\"The first phrase you entered was: %s\", phrase1);\n    printf(\"The second phrase you entered was: %s\", phrase2);\n    strcat(phrase1, phrase2);\n    phrase1[strlen(phrase1)-1] = ' ';\n    printf(\"Both phrases put together in one sentence is: %s\", phrase1);\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1442434315, "post_id": 32617789, "comment_id": 53086296, "body": "Surprise: Last print in <code>main()</code> will produce <code>2</code>. Ask how?"}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 4, "creation_date": 1442434650, "post_id": 32617789, "comment_id": 53086472, "body": "Maybe you could specify what you get (the &#39;dry run&#39;) and what you expect and then ask a specific question? It appears to contain an infinite loop and infinite recursion.."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1442434693, "post_id": 32617789, "comment_id": 53086500, "body": "@SouravGhosh, what last print? It will never come to that :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1442434786, "post_id": 32617789, "comment_id": 53086559, "body": "@JensGustedt Hah, you&#39;re very true sir. :) Please append <i>if</i> to my earlier comment, then. :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1442436330, "post_id": 32617789, "comment_id": 53087346, "body": "@SouravGhosh: &quot;Surprise: Last print in main() will produce 2. Ask how? <b>if</b>&quot;? ;-)"}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 2, "creation_date": 1442436438, "post_id": 32617789, "comment_id": 53087397, "body": "@Kenney - I don&#39;t see any infinite recursion here, just infinite looping."}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1442439485, "post_id": 32617789, "comment_id": 53088903, "body": "@owacoder Right, recursion is bound by <code>j</code>; after that, it looks like it might print &quot;1&quot;, for a while."}, {"owner": {"reputation": 1, "user_id": 5343936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36edde684b2806fe3d1aea6cf0a62232?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PANDEY", "link": "https://stackoverflow.com/users/5343936/naveen-pandey"}, "edited": false, "score": 0, "creation_date": 1442522895, "post_id": 32617789, "comment_id": 53127955, "body": "I want to know how come I am getting an infinite loop? In dry run on paper I get 21 as output.   Can anyone explain me the control flow and cause of recursion"}], "answers": [{"tags": [], "owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1442436637, "last_edit_date": 1442436637, "creation_date": 1442436322, "answer_id": 32618353, "question_id": 32617789, "link": "https://stackoverflow.com/questions/32617789/can-anyone-explain-the-dry-run-output-behind-this-function-below-for-j-2/32618353#32618353", "title": "Can anyone explain the dry run, output behind this function below for j=2?", "body": "<p>The function <code>p()</code> will never return on positive input. In the loop, <code>i</code> is not modified, therefore the condition <code>i &gt; 0</code> always holds true for a positive input. With a negative or zero input, a single line will be printed: \"Return value: x\" where x is your input value.</p>\n\n<p>Without knowing what output you are expecting, we really can't help you improve your code.</p>\n"}, {"tags": [], "owner": {"reputation": 532, "user_id": 9243056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIzhl.png?s=128&g=1", "display_name": "sandip bharadva", "link": "https://stackoverflow.com/users/9243056/sandip-bharadva"}, "is_accepted": false, "score": 0, "last_activity_date": 1530527512, "creation_date": 1530527512, "answer_id": 51134125, "question_id": 32617789, "link": "https://stackoverflow.com/questions/32617789/can-anyone-explain-the-dry-run-output-behind-this-function-below-for-j-2/51134125#51134125", "title": "Can anyone explain the dry run, output behind this function below for j=2?", "body": "<p>may be this will give an error because the function p() return int value so you need to store return value in any int variable.</p>\n"}], "owner": {"reputation": 1, "user_id": 5343936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36edde684b2806fe3d1aea6cf0a62232?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PANDEY", "link": "https://stackoverflow.com/users/5343936/naveen-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1530527512, "creation_date": 1442434210, "last_edit_date": 1442435207, "question_id": 32617789, "link": "https://stackoverflow.com/questions/32617789/can-anyone-explain-the-dry-run-output-behind-this-function-below-for-j-2", "title": "Can anyone explain the dry run, output behind this function below for j=2?", "body": "<pre><code>#include&lt;stdio.h&gt;\nint p(int);\nvoid main()\n{\n    int j;\n    scanf(\"%d\",&amp;j);\n    p(j);\n    printf(\"Return value: %d\",j);\n}\nint p(int j)\n{\n    int i;\n    for( i=j; i&gt;0; p(i-1) )\n    {\n        printf(\"%d\",i); \n    }\n    return(j);\n}\n</code></pre>\n\n<p>Please explain the dry run and output as well. I have trouble finding the logic behind this function. </p>\n"}, {"tags": ["c", "winapi", "stdout", "dll-injection"], "comments": [{"owner": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 1, "creation_date": 1442434478, "post_id": 32617695, "comment_id": 53086381, "body": "The CRT in one module doesn&#39;t know anything about the CRT in another module, so redirecting CRT file handles in a DLL won&#39;t have the effect you are looking for. <code>SetStdHandle</code> might get you what you want."}, {"owner": {"reputation": 5542, "user_id": 3733070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77040a282f8bbe1a953f305d970f73df?s=128&d=identicon&r=PG&f=1", "display_name": "404", "link": "https://stackoverflow.com/users/3733070/404"}, "reply_to_user": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 0, "creation_date": 1442434626, "post_id": 32617695, "comment_id": 53086458, "body": "I should have mentioned, I tried <code>SetStdHandle</code> and it had zero effect (even though the function didn&#39;t fail) - both the program and the dll kept writing to the console."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1442443833, "post_id": 32617695, "comment_id": 53090431, "body": "It definitely can&#39;t work unless the exact same CRT is dynamically linked into both modules; Process Explorer can show you whether you have a single CRT or two CRTs loaded.  But I don&#39;t know how <code>freopen</code> and <code>printf</code> interact with threads, either.  What happens if you put the <code>freopen</code> call into the main application, but have it run in a different thread once the rest of the program is already up and running?"}, {"owner": {"reputation": 5542, "user_id": 3733070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77040a282f8bbe1a953f305d970f73df?s=128&d=identicon&r=PG&f=1", "display_name": "404", "link": "https://stackoverflow.com/users/3733070/404"}, "edited": false, "score": 0, "creation_date": 1442511862, "post_id": 32617695, "comment_id": 53121954, "body": "Right, I see what you&#39;re saying. I got it to work with my program after I changed both the exe and dll runtime linking from static to dynamic. Unfortunately it has to work with programs I haven&#39;t written, with any version of the runtime. I&#39;ll look into it further and post an answer if I find a solution."}], "answers": [{"tags": [], "owner": {"reputation": 5542, "user_id": 3733070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77040a282f8bbe1a953f305d970f73df?s=128&d=identicon&r=PG&f=1", "display_name": "404", "link": "https://stackoverflow.com/users/3733070/404"}, "is_accepted": true, "score": 0, "last_activity_date": 1444818973, "last_edit_date": 1444818973, "creation_date": 1442568784, "answer_id": 32648650, "question_id": 32617695, "link": "https://stackoverflow.com/questions/32617695/stdout-of-process-not-redirected-properly-via-dll-injection/32648650#32648650", "title": "Stdout of process not redirected properly via dll injection", "body": "<p>I was able to do this by making the injected dll call <code>FreeConsole</code> and then <code>AttachConsole</code>, passing in the PID of the process with the console where I wanted the output to be redirected to. </p>\n\n<p>(I know the question mentioned redirecting it to a file, but that was really just for testing purposes as an ostensibly easier thing to do; ultimately, I wanted it to be redirected to a console. At the end of the day, I can make my own console redirect its stdout (which it receives from the \"remote\" process) to a file if I want, which should still satisfy the actual question.)</p>\n"}], "owner": {"reputation": 5542, "user_id": 3733070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77040a282f8bbe1a953f305d970f73df?s=128&d=identicon&r=PG&f=1", "display_name": "404", "link": "https://stackoverflow.com/users/3733070/404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 1, "accepted_answer_id": 32648650, "answer_count": 1, "score": 1, "last_activity_date": 1446051008, "creation_date": 1442433836, "last_edit_date": 1446051008, "question_id": 32617695, "link": "https://stackoverflow.com/questions/32617695/stdout-of-process-not-redirected-properly-via-dll-injection", "title": "Stdout of process not redirected properly via dll injection", "body": "<p>I'm injecting a C dll (as a thread) into a running console process, and trying to redirect its stdout to a file. My dll also writes to the console via <code>wprintf</code>.</p>\n\n<p>As a simple redirection test I made the dll call <code>TestRedirect</code> at the start:</p>\n\n<pre><code>FILE *file = NULL;\nBOOL WINAPI Test1(void *param);\n\nvoid TestRedirect()\n{\n    file = freopen(\"C:\\\\temp\\\\test1.txt\", \"w\", stdout);\n    _beginthreadex(NULL, 0, Test1, (void*)file, NULL, 0, NULL);\n}\n\nBOOL WINAPI Test1(void *param)\n{\n    FILE *file = (FILE*)param;\n    while (1)\n    {\n        wprintf(L\"Test1\\n\");\n        fflush(file);\n        Sleep(200);\n    }\n}\n</code></pre>\n\n<p>Every time my dll writes to stdout via <code>wprintf</code>, regardless of the thread, the text appears in the file. However, my test console program (also a C program) doesn't write to the file. All the console program does is call <code>wprintf</code> every second to print something. When my dll is injected in the process, the exe's text stops appearing in the console window but doesn't get written to the file. Same if I try it on other programs, e.g. ping.exe.</p>\n\n<p>However if I put the same code directly into my test console program and make that program call <code>TestRedirect</code>, then the program's output is written to the file (without injecting the dll).</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["java", "c++", "c", "batch-file"], "comments": [{"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442433274, "post_id": 32617470, "comment_id": 53085705, "body": "This is an OS dependent behavior. Is this Windows, Linux, OS X ?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1442433320, "post_id": 32617470, "comment_id": 53085729, "body": "On Linux use inotify."}, {"owner": {"reputation": 36, "user_id": 4597828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7767eecfbd2a1bed44ecd352a8a534a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Lockyear", "link": "https://stackoverflow.com/users/4597828/ben-lockyear"}, "edited": false, "score": 0, "creation_date": 1442433637, "post_id": 32617470, "comment_id": 53085887, "body": "Thats the thing, i&#39;m helping this school decide there op there gonna use and they will need a lot of file actions like this, and i was also thinking iNotify on linux, although they preferably would like to use windows."}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442434027, "post_id": 32617470, "comment_id": 53086135, "body": "To me, it seems key to make the solution efficient if your specification that a lot of file actions like this will occur is significant, it appears to require interactive (immediate) feedback to the user and should be light on system resources. To me that suggests a service in Windows or a daemon in Linux, for which I&#39;d choose C++. For Windows that involves reading the journal of the filesystem or ReadDirectoryChangesW (though, be warned, the latter does miss notifications occasionally - reading the journal never misses). However, you MUST pin down the OS - there are no good portable answers"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442645459, "post_id": 32617470, "comment_id": 53176347, "body": "on Linux, run a &#39;cron&#39; entry that triggers a bash script on a regular basis, where the script checks if the file exists at the destination. and if it does, kill the cron entry and trigger the desired executable]"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1442433291, "creation_date": 1442433291, "answer_id": 32617533, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file/32617533#32617533", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>For a portable solution, your program would need to read the contents of the directory in question every X number of seconds and see if a new file appears in the listing that didn't appear the last time you checked.  If you find one, run the desired action.</p>\n\n<p>Some OS's have special hooks to detect when the contents of a directory changes.  You'd need to look up the OS documentation to see how that works, and such a solution would probably require C or C++.</p>\n"}, {"tags": [], "owner": {"reputation": 1872, "user_id": 5321349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1fef66e782bb5aa72a77908887f574?s=128&d=identicon&r=PG&f=1", "display_name": "Cinnam", "link": "https://stackoverflow.com/users/5321349/cinnam"}, "is_accepted": false, "score": 0, "last_activity_date": 1442434006, "last_edit_date": 1442434006, "creation_date": 1442433603, "answer_id": 32617622, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file/32617622#32617622", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>Java solution would involve watching a directory for changes using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/WatchService.html\" rel=\"nofollow\"><code>WatchService</code></a>.</p>\n\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/notification.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/essential/io/notification.html</a> for details.</p>\n\n<blockquote>\n  <p>The java.nio.file package provides a file change notification API, called the Watch Service API. This API enables you to register a directory (or directories) with the watch service. When registering, you tell the service which types of events you are interested in: file creation, file deletion, or file modification. When the service detects an event of interest, it is forwarded to the registered process.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2379, "user_id": 4070433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e6d54f1e802f6641a82ec60bb6053610?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4070433/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1442454250, "last_edit_date": 1442454250, "creation_date": 1442453878, "answer_id": 32621303, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file/32621303#32621303", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>\nWith batch, you can do with <code>IF EXIST</code> statement of a specific file destination with in a infinite loop with <code>timeout</code> spacing.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>@echo off\n\nset \"indice=filename.txt\"\n\n:loop\nIF EXIST %indice% goto MyCommand\n\nREM /T n in seconds\n@timeout /T 60 /nobreak &gt;NUL\ngoto loop\n\n:MyCommand\n\nfake-command\n\nset /p M=job done! go to loop?(y/n):\nif /I [%M:~0,1%]==[y] (goto loop) else (exit /b 0)\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 4597828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7767eecfbd2a1bed44ecd352a8a534a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Lockyear", "link": "https://stackoverflow.com/users/4597828/ben-lockyear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442454250, "creation_date": 1442433065, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>Is it possible to cause a batch file to open and run code when a file is moved to a specific destination. Any language that this can be done in is fine, I am fairly fluent in most languages.</p>\n\n<p>Eg. If i moved a file to Downloads, a notification would popup saying 'please don't move files here' and moves the file to another file.</p>\n"}, {"tags": ["c", "segmentation-fault", "printf"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442433164, "post_id": 32617403, "comment_id": 53085650, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.3\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#7.21.6.3</a>"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1442434914, "post_id": 32617403, "comment_id": 53086639, "body": "If you would have raised the warning levels of your compiler to a maximum, he would have told you."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1442433704, "post_id": 32617432, "comment_id": 53085935, "body": "And why is it compiling? I think it would be good to explain."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1442434032, "last_edit_date": 1442434032, "creation_date": 1442432911, "answer_id": 32617432, "question_id": 32617403, "link": "https://stackoverflow.com/questions/32617403/why-is-the-following-code-giving-runtime-error-sigsegv/32617432#32617432", "title": "Why is the following code giving runtime error SIGSEGV", "body": "<p>In your code</p>\n\n<pre><code>printf(number);\n</code></pre>\n\n<p>is invalid. You're missing the required format specifier with <code>printf()</code>. You want to write</p>\n\n<pre><code>printf(\"%d\", number);\n</code></pre>\n\n<p>Also, <code>printf()</code> being a <a href=\"https://en.wikipedia.org/wiki/Variadic_function\" rel=\"nofollow\">variadic function</a>, it can accept one or more arguments and as long as that criteria is met, compilation will not fail. However, this instance, will cause <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a> because of mismatched argument type.</p>\n"}], "owner": {"reputation": 939, "user_id": 674536, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/84df832fb1ac9c040cd20fea7ff2b6bd?s=128&d=identicon&r=PG&f=1", "display_name": "Farhan Ahmed Wasim", "link": "https://stackoverflow.com/users/674536/farhan-ahmed-wasim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1442434032, "creation_date": 1442432831, "last_edit_date": 1442433061, "question_id": 32617403, "link": "https://stackoverflow.com/questions/32617403/why-is-the-following-code-giving-runtime-error-sigsegv", "title": "Why is the following code giving runtime error SIGSEGV", "body": "<p>I am writing the solution to a programming problem. The problem is as follows:</p>\n\n<blockquote>\n  <p>Your program is to use the brute-force approach in order to find the\n  Answer to Life, the Universe, and Everything. More precisely...\n  rewrite small numbers from input to output. Stop processing input\n  after reading in the number 42. All numbers at input are integers of\n  one or two digits.</p>\n</blockquote>\n\n<p>I have pasted my code below. I am getting segmentation fault when I submit this solution. Can someone point out what's wrong with this code? Any help will be much appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int number = 0;\n    while (1)\n    {\n        int c = getchar();\n        if (c != EOF)\n        {\n            number = number * 10 + c;\n        }\n        else\n        {\n            //const char value = number;\n            if (number != 42)\n            {\n                printf(number);\n                printf(\"\\n\");\n                number = 0;\n            }\n            else\n            {\n                return 0;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory", "memory-management"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 9, "creation_date": 1442430892, "post_id": 32616822, "comment_id": 53084420, "body": "C does not guarantee any memory protection. That is why this is called <i>undefined behaviour</i>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442431204, "post_id": 32616822, "comment_id": 53084584, "body": "Bottom line is segfault, that protects <i>other</i> processes. <i>&quot;in the unlikely event the two a and b were written next to each other in memory?&quot;</i> You&#39;ll be overwriting <b>something</b>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1442431927, "post_id": 32616822, "comment_id": 53084956, "body": "@WeatherVane: This is not required by the standard. Most CPUs do not even have such protection."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442433199, "post_id": 32616822, "comment_id": 53085669, "body": "@WeatherVane That&#39;s a generally feature of the OS, not C, and is absolutely not required by the language specification."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442433279, "post_id": 32616822, "comment_id": 53085710, "body": "@Bren Did you try compiling and running this code? How about under <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\"><code>valgrind()</code></a>?"}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1442433413, "post_id": 32616822, "comment_id": 53085776, "body": "@TheParamagneticCroissant IMO a program not compiling or running is a comparatively fortunate failure mode (of poor memory management) compared to mysterious occasional crashes, silent data corruption, security holes, etc."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442433444, "post_id": 32616822, "comment_id": 53085785, "body": "@Olaf that&#39;s what I was trying to say, that some OS do have memory protection for other processes."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442433700, "post_id": 32616822, "comment_id": 53085931, "body": "@IskarJarak what I meant is that OP will be over writing something, unless the OS is protecting another process."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442433788, "post_id": 32616822, "comment_id": 53085978, "body": "@WeatherVane Oh, right, sorry. From my reading of your comment it wasn&#39;t 100% clear that you knew segmentation faults are protection that is unrelated to C itself."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442434206, "post_id": 32616822, "comment_id": 53086222, "body": "@WeatherVane: Ok, just wondered, as I presumed from other postings you do know better."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 1, "creation_date": 1442434944, "post_id": 32616822, "comment_id": 53086655, "body": "@IskarJarak yes, it is. I didn&#39;t assert the converse, did I."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1442435855, "post_id": 32616822, "comment_id": 53087117, "body": "@TheParamagneticCroissant I just thought it was worth explicitly mentioning for the benefit of others."}, {"owner": {"reputation": 2880, "user_id": 2848483, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6593ff6dc03719571b02b89e5d23d661?s=128&d=identicon&r=PG", "display_name": "Bren", "link": "https://stackoverflow.com/users/2848483/bren"}, "reply_to_user": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442436647, "post_id": 32616822, "comment_id": 53087516, "body": "@IskarJarak I didn&#39;t know valgrind existed and I was&#39;t sure if running the code would really tell me much as I don&#39;t know how C manages memory (is it different on different implementations, is it consistent, etc. ). I&#39;m just learning C for the first time going though K&amp;R only done web programming before this."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442440328, "post_id": 32616822, "comment_id": 53089282, "body": "@Bren You should definitely learn to use valgrind, it&#39;s a pretty handy tool for working with C. As for <i>&quot;implementations&quot;</i> (in C, this just means compiler version + stdlib implementation), compiling and running would at least have told you how one implementation behaved, and then you could have asked/searched if that was standard compliant (C has a formal standard, unlike e.g. Ruby) . For future reference, C generally offers little or no protection of any kind, and <i>&quot;try it and see what it does&quot;</i> is an approach that will typically lead to better questions."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442440583, "post_id": 32616822, "comment_id": 53089391, "body": "@Bren Also, I don&#39;t know what compiler you&#39;re using, but I thoroughly recommend finding the appropriate warning and debug flags (for gcc or clang, <code>-W -Wall -std=c99 -pedantic -g</code> would be a good start although since you&#39;re working through K&amp;R you might want to use <code>-std=c89</code> instead."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442440689, "post_id": 32616822, "comment_id": 53089436, "body": "When you try things, though, best to use valgrind - code that compiles and appears to run may not really be valid."}], "answers": [{"comments": [{"owner": {"reputation": 2880, "user_id": 2848483, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6593ff6dc03719571b02b89e5d23d661?s=128&d=identicon&r=PG", "display_name": "Bren", "link": "https://stackoverflow.com/users/2848483/bren"}, "edited": false, "score": 0, "creation_date": 1442431047, "post_id": 32616872, "comment_id": 53084495, "body": "That was a typo fixed the question."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 2880, "user_id": 2848483, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6593ff6dc03719571b02b89e5d23d661?s=128&d=identicon&r=PG", "display_name": "Bren", "link": "https://stackoverflow.com/users/2848483/bren"}, "edited": false, "score": 0, "creation_date": 1442431115, "post_id": 32616872, "comment_id": 53084533, "body": "@Bren you meant <code>*++p</code> and not <code>*(p++)</code>."}, {"owner": {"reputation": 2880, "user_id": 2848483, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6593ff6dc03719571b02b89e5d23d661?s=128&d=identicon&r=PG", "display_name": "Bren", "link": "https://stackoverflow.com/users/2848483/bren"}, "edited": false, "score": 0, "creation_date": 1442431184, "post_id": 32616872, "comment_id": 53084571, "body": "Thanks, didn&#39;t realize that would make a difference, back to K&amp;R for me."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1442431223, "post_id": 32616872, "comment_id": 53084599, "body": "Was the same in K&amp;R, me thinks."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 1, "creation_date": 1442431340, "post_id": 32616872, "comment_id": 53084654, "body": "On the other hand, I doubt this is really undefined behavior. Pointer arithmetic is defined behavior. The computation of the resulting address of the increment is defined and to that address the int value 2 is written. What is not defined is what will happen due to that. For sure, it would be a compiler bug if it refused to translate pointer arithmetic operations."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 2, "creation_date": 1442432649, "post_id": 32616872, "comment_id": 53085355, "body": "@BitTickler first writing to an invalid object is undefined behavior, second in the range of possible undefined behaviors the Standard explicitly mentions terminating the translation. If there is something you didn&#39;t understand, feel free to ask a new question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1442432713, "post_id": 32616872, "comment_id": 53085388, "body": "@BitTickler It could be undefined behavior just as <code>p[2] = 2</code> could but it&#39;s not by itself. I don&#39;t think it&#39;s invalid syntax either, it&#39;s just really bad style.."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1442432953, "post_id": 32616872, "comment_id": 53085541, "body": "Downvoter, care to explain  the downvote? Do you also think undefined behavior does not give latitude to the compiler to stop the translation?..."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1442433972, "post_id": 32616872, "comment_id": 53086095, "body": "@iharob It is clearly invalid in the context of the question (<code>int a=1; int* p = &amp;a;</code>), and usually I would expect an answer to share the context of the question, although @oauh could have been clearer about that."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442434296, "post_id": 32616872, "comment_id": 53086288, "body": "@IskarJarak It&#39;s natural from a programmer to expect that, hence I am deleting my comments."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 1, "creation_date": 1442437997, "post_id": 32616872, "comment_id": 53088190, "body": "The compiler has no right and no means to stop compiling if it sees pointer arithmetics. As it has no facilities to bounds check either (all those MSVC bound checks are extras not standard functionality of a C- compiler), it would either a) check whenever it sees pointer arithmetics (which would be nonsense) or b) it won&#39;t stop when it sees it. As it does not have any notion of analysing if the pointer arithmetic expression is in bounds or just random numbers, it has no criteria to abort compilation. If YOU fail to understand what a C-compiler does, feel free to ask lol"}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1447405181, "post_id": 32616872, "comment_id": 55150107, "body": "&quot;I doubt this is really undefined behavior.&quot; -- All the worse for you. Try familiarizing yourself with the C language. &quot;Pointer arithmetic is defined behavior.&quot; -- This is both wrong and irrelevant. &quot;The compiler has no right and no means to stop compiling if it sees pointer arithmetics.&quot; -- Wrong again. &quot;If YOU fail to understand what a C-compiler does, feel free to ask lol &quot; -- you&#39;re the last person anyone should ask."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1442431302, "last_edit_date": 1442431302, "creation_date": 1442430915, "answer_id": 32616872, "question_id": 32616822, "link": "https://stackoverflow.com/questions/32616822/how-does-c-protect-pointer-memory/32616872#32616872", "title": "How does C protect pointer memory?", "body": "<pre><code>*++p = 2;\n</code></pre>\n\n<p>C says it is invalid and the statement invokes undefined behavior. A compiler is allowed to stop translation with an error if it detects it but there is no requirement from C to do detect this kind of errors (which are actually really hard to detect).</p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 9, "last_activity_date": 1442430931, "creation_date": 1442430931, "answer_id": 32616877, "question_id": 32616822, "link": "https://stackoverflow.com/questions/32616822/how-does-c-protect-pointer-memory/32616877#32616877", "title": "How does C protect pointer memory?", "body": "<blockquote>\n  <p>How does C protect pointer memory?</p>\n</blockquote>\n\n<p>It doesn't.</p>\n\n<blockquote>\n  <p>Is there anything that prevents b from being over written from -1 to 2\n  if in the unlikely event the two a and b were written next to each\n  other in memory?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>And the two variables being \"next to each other in memory\" isn't unlikely at all.</p>\n\n<p>C give you the power to cause a lot of problems it you're not careful.</p>\n"}, {"comments": [{"owner": {"reputation": 2880, "user_id": 2848483, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6593ff6dc03719571b02b89e5d23d661?s=128&d=identicon&r=PG", "display_name": "Bren", "link": "https://stackoverflow.com/users/2848483/bren"}, "edited": false, "score": 0, "creation_date": 1442431019, "post_id": 32616879, "comment_id": 53084484, "body": "yeah incrementing p is what I meant."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 5, "last_activity_date": 1442431277, "last_edit_date": 1442431277, "creation_date": 1442430941, "answer_id": 32616879, "question_id": 32616822, "link": "https://stackoverflow.com/questions/32616822/how-does-c-protect-pointer-memory/32616879#32616879", "title": "How does C protect pointer memory?", "body": "<p>Assuming you meant the last line to be <code>*++p = 2</code>, no, there's nothing that protects pointer memory.  Modifying a pointer to point outside the object it (originally) points to and then dereferencing it results in undefined behavior, and anything might happen.</p>\n\n<p>In the code as written, <code>*(a++)</code> applies the dereference operator to a non-pointer type, which is a constraint violation, so is required to produce a compile time diagnostic and not compile...</p>\n"}, {"comments": [{"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1447405477, "post_id": 32617747, "comment_id": 55150265, "body": "&quot;Pointer arithmetic is well defined&quot; -- Not If the arithmetic results in a pointer that is outside the bounds (+1) of the object pointed to by the original pointer ... the resulting value is undefined."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4434329"}, "is_accepted": false, "score": 1, "last_activity_date": 1442444942, "last_edit_date": 1442444942, "creation_date": 1442434065, "answer_id": 32617747, "question_id": 32616822, "link": "https://stackoverflow.com/questions/32616822/how-does-c-protect-pointer-memory/32617747#32617747", "title": "How does C protect pointer memory?", "body": "<p>No, nothing would stop you in doing that. Pointer arithmetic is well defined, this means that you can move your pointer in any direction to point to another location. But with this setting, you can't be certain that which memory are you actually modifying. Because during compilation, optimizers could move your variable to a different location. </p>\n\n<p>As in your case, assuming everything is streamlined and straight. Your order of declaring variables are a, p, and b. Let's say (a and b) gets x and p gets y bytes of memory depending upon your machine architecture and OS.</p>\n\n<p>Your memory should look like:</p>\n\n<pre><code>  ________ __________________\n | (a) x  | (p) y   | (b) x  |\n |________|_________|________|\n</code></pre>\n\n<p>which means that, ++p would evaluate to p + sizeof(p). If 'p' is pointing to start of 'a' then this means that incrementing it by (y) bytes would leave 'p' in 'y' memory region (assuming y >= x) or in 'x' otherwise. So you are actually modifying the p's memory itself not b's.</p>\n\n<p>P.S: Power provided by C should be best left to experienced C programmers.</p>\n"}, {"tags": [], "owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "is_accepted": false, "score": 0, "last_activity_date": 1442482890, "creation_date": 1442482890, "answer_id": 32627157, "question_id": 32616822, "link": "https://stackoverflow.com/questions/32616822/how-does-c-protect-pointer-memory/32627157#32627157", "title": "How does C protect pointer memory?", "body": "<p>If you place <code>a</code>, <code>b</code> variables into separate pages (say, using <code>mmap</code>), then <code>mprotect</code> call can be used to set <code>PROT_READ</code> protection on the page that contains the variable <code>b</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "is_accepted": false, "score": 0, "last_activity_date": 1508879240, "creation_date": 1508879240, "answer_id": 46920018, "question_id": 32616822, "link": "https://stackoverflow.com/questions/32616822/how-does-c-protect-pointer-memory/46920018#46920018", "title": "How does C protect pointer memory?", "body": "<p>In your example, <code>b</code> may likely be overwritten.</p>\n\n<p>For me, using <code>GDB</code> I get that both variables are placed after each other in memory:</p>\n\n<pre><code>(gdb) x &amp;a\n0xffffcb80: 0x00000001\n(gdb) x &amp;b\n0xffffcb84: 0x00000002\n</code></pre>\n\n<p>However, this is not guaranteed.</p>\n\n<p>Since incrementing an <code>int *</code> increases its address by <code>sizeof(int)</code> we reach the next <code>int</code> which for me contains <code>b</code> already.</p>\n\n<p>The code...</p>\n\n<pre><code>int a = 1;\nint *p = &amp;a;\nint b = -1;\n*++p = 2;\nprintf(\"b: %i\\n\", b);\n</code></pre>\n\n<p>therefore prints:</p>\n\n<pre><code>b: 2\n</code></pre>\n\n<p><code>C</code> has no memory protection for its own process memory. You can write code like this but you may run into trouble: As soon as you increment your <code>int *</code> you cause <code>undefined behavior</code> because you leave the variable's actual size. You should never make assumptions about variable locations like this because it might not hold true so anything could happen and you won't like the instability it brings.</p>\n"}], "owner": {"reputation": 2880, "user_id": 2848483, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6593ff6dc03719571b02b89e5d23d661?s=128&d=identicon&r=PG", "display_name": "Bren", "link": "https://stackoverflow.com/users/2848483/bren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 32616879, "answer_count": 6, "score": -2, "last_activity_date": 1508879240, "creation_date": 1442430729, "last_edit_date": 1443730683, "question_id": 32616822, "link": "https://stackoverflow.com/questions/32616822/how-does-c-protect-pointer-memory", "title": "How does C protect pointer memory?", "body": "<p>Given:</p>\n\n<pre><code>int a = 1;\nint *p = &amp;a;\nint b = -1;\n*++p = 2;\n</code></pre>\n\n<p>Is there anything that prevents b from being over written from -1 to 2 if in the apparently not unlikely event the two a and b were written next to each other in memory?</p>\n"}, {"tags": ["c", "makefile", "linux-kernel", "gnu-make"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1442430072, "post_id": 32616479, "comment_id": 53083931, "body": "note your <code>$(KERNEL)</code> is not an actual file created. This shouldn&#39;t cause the problem, but it&#39;s still not good ... either put <code>$(KERNEL)</code> in the <code>.PHONY:</code> prerequisite list, so <code>make</code> knows it is not a file ... or just set it to the actual file created for the kernel."}, {"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1442430398, "post_id": 32616479, "comment_id": 53084113, "body": "this error appeared  make: *** No rule to make target <code>boot.c&#39;, needed by </code>boot.o&#39;.  Stop."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 2, "creation_date": 1442434295, "post_id": 32616479, "comment_id": 53086287, "body": "also <code>objects</code> != <code>OBJECTS</code>, which is what is causing the <code>%.s</code> rule for assembling things to never apply..."}], "answers": [{"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1442434236, "post_id": 32616830, "comment_id": 53086243, "body": "Two colons makes a static pattern rule (as opposed to a general pattern rule), which should work.  The problem he has is tha <code>$(objects)</code> != <code>$(OBJECTS)</code> in the rule for assembling <code>.s</code> files, so it never applies..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1442434305, "post_id": 32616830, "comment_id": 53086292, "body": "Ah ok ... never used that one. Still, as far as I can see, neither of those contains anything? Can&#39;t check the <code>include</code> of course."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1442434457, "post_id": 32616830, "comment_id": 53086365, "body": "<code>$(OBJECTS)</code> is set in the included makefile.  <code>$(objects)</code> is never set to anything, so is an empty string"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1442471308, "last_edit_date": 1442471308, "creation_date": 1442430768, "answer_id": 32616830, "question_id": 32616479, "link": "https://stackoverflow.com/questions/32616479/using-all-in-makefile/32616830#32616830", "title": "Using &#39;all&#39; in makefile", "body": "<p>The root cause it doesn't do <em>anything</em> is probably just the typo in your variable name, like Marc B pointed out: <code>kERNEL</code> instead of <code>KERNEL</code>.</p>\n\n<p>With this Makefile, you could still experience unexpected behaviour: Just a <code>touch opal2</code> in the directory would stop it from working unless you <code>rm opal2</code> again. Target names that are <em>not</em> actual file names must therefore be put as a prerequisite of the special target <code>.PHONY</code>, so <code>make</code> knows they have to be recreated <em>each and every time</em>, because there is no actual file for <code>make</code> to check the timestamp and determine whether it is outdated.</p>\n\n<p>Of course, you want to avoid that for most targets, so <code>make</code> doesn't do unnecessary work. So, just use the file created by a target as the actual target instead of a \"phony\" name.</p>\n\n<p>Next issue: This line</p>\n\n<pre><code>$(OBJECTS):%.o :%.c\n</code></pre>\n\n<p>is wrong. There's only one colon expected there, to separate the target name from its prerequisites. It looks like you want a simple <em>pattern rule</em> here like</p>\n\n<pre><code>%.o: %.c\n</code></pre>\n\n<p>meaning any target ending with <code>.o</code> will have a prerequisite of the same name, just ending in <code>.c</code>. I don't see <code>$(OBJECTS)</code> actually defined anywhere, so it's just an empty variable anyways.</p>\n\n<p><strong>edit</strong>: As of Chris Dodd's comment, the above <em>is</em> valid syntax, but only meaningful iff the variable is not empty. So another source of the problem might lie in the fact you get <code>$(OBJECTS)</code> set to something in your included Makefile, but not <code>$(objects)</code>.</p>\n\n<p>I'd really suggest you to browse through the <a href=\"https://www.gnu.org/software/make/manual/\" rel=\"nofollow\">GNU make manual</a> ... it might seem though at first, but it's really helpful. One key issue with writing Makefiles when you're coming from coding in e.g. <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> is that a Makefile is declarative -- you give <code>make</code> a couple of rules and it will figure out itself what do do, in what order. It takes a bit of time to get a grasp on the concepts.</p>\n"}], "owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1442471734, "creation_date": 1442429499, "last_edit_date": 1442431820, "question_id": 32616479, "link": "https://stackoverflow.com/questions/32616479/using-all-in-makefile", "title": "Using &#39;all&#39; in makefile", "body": "<p>I am new to Makefile and I wrote this one to compile a kernel created by me \nthis is the file hierarchy for my source tree created by <code>ls -R</code>. I tried solutions in similar questions.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>.:\nkernel  Makefile\n\n./kernel:\narch  drivers  include\n\n./kernel/arch:\ni686-elf\n\n./kernel/arch/i686-elf:\nboot.s  linker.ld  main.c  Makefile\n\n./kernel/drivers:\nvga\n\n./kernel/drivers/vga:\nvga.c  vga.o\n\n./kernel/include:\nvga\n\n./kernel/include/vga:\nvga.h\n</code></pre>\n\n<p>this is the content of <code>./Makefile</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>VPATH = kernel kernel/* kernel/*/*\nTARGET = i686-elf\nCC = gcc\nINCDIR = -I kernel/include/ -I kernel/include/*\nkERNEL = opal2\nCFLAGS = -ffreestanding -O2 -Wall -Wextra -fno-exceptions\nLDFLAGS = -T linker.ld -ffreestanding -O2 -nostdlib -lgcc\nAS = as\ninclude kernel/arch/$(TARGET)/Makefile\n.PHONY: help all\nhelp:\n        @echo \"This is help\"\nall: $(KERNEL)\n\n$(KERNEL):$(OBJECTS)\n        $(TARGET)-$(CC) $(LDFLAGS) $(OBJECTS) -o $(KERNEL).bin\n$(OBJECTS):%.o :%.c\n        $(TARGET)-$(CC) $(CFLAGS) -c $&lt; -o $@\n$(objects): %.o: %.s\n        $(TARGET)-$(AS) $&lt; -o $@\n</code></pre>\n\n<p>please note that I created a cross compiler and cross binutils called that are prefixed with i686-elf- and they are included in environmental variables and I am sure that they are working\nand this is the contents of the <code>./kernel/arch/i686*elf/Makefile</code></p>\n\n<pre><code>OBJECTS := $(OBJECTS) boot.o main.o\n</code></pre>\n\n<p>I am sure that I used <em>TABS</em> instead of spaces and as you see there is nothing built at all \nEDIT:\nafter fixings the little typo <code>kERNEL</code> to be <code>KERNEL</code>\nI got the following error</p>\n\n<pre><code>make: *** No rule to make target `boot.c', needed by `boot.o'.  Stop.\n</code></pre>\n\n<p>shouldn't kernel/<em>/</em> allow VPATH to inclucde kernel/arch/i686-elf and makefile notice that boot.s exist and build it </p>\n"}, {"tags": ["c", "matrix", "random", "segmentation-fault"], "comments": [{"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 5, "creation_date": 1442429225, "post_id": 32616396, "comment_id": 53083455, "body": "<code>for(j=0; j&lt;3; i++)</code> should be <code>for(j=0; j&lt;3; j++)</code> (i.e. <code>j++</code> instead of <code>i++</code>)"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 2, "creation_date": 1442429329, "post_id": 32616396, "comment_id": 53083515, "body": "Stepping through this with a debugger would show the problem."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5343720, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c8cb0e79384730275d9b6f4e70900616?s=128&d=identicon&r=PG&f=1", "display_name": "StarCharm", "link": "https://stackoverflow.com/users/5343720/starcharm"}, "edited": false, "score": 0, "creation_date": 1442431721, "post_id": 32616423, "comment_id": 53084849, "body": "Of course it had to be a silly mistake.. thanks a bunch!"}], "tags": [], "owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1442429304, "creation_date": 1442429304, "answer_id": 32616423, "question_id": 32616396, "link": "https://stackoverflow.com/questions/32616396/segmentation-fault-core-dumped-when-filling-matrix-with-random-numbers/32616423#32616423", "title": "Segmentation fault (core dumped) when filling matrix with random numbers", "body": "<pre><code>for(i=0; i&lt;3; i++)\n{\n   for(j=0; j&lt;3; i++)\n                 ^---- wrong var\n</code></pre>\n\n<p>so you're eventually reaching i=3 and going off the end of your array.</p>\n"}], "owner": {"reputation": 51, "user_id": 5343720, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c8cb0e79384730275d9b6f4e70900616?s=128&d=identicon&r=PG&f=1", "display_name": "StarCharm", "link": "https://stackoverflow.com/users/5343720/starcharm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "closed_date": 1442432188, "accepted_answer_id": 32616423, "answer_count": 1, "score": -3, "last_activity_date": 1442429304, "creation_date": 1442429163, "question_id": 32616396, "link": "https://stackoverflow.com/questions/32616396/segmentation-fault-core-dumped-when-filling-matrix-with-random-numbers", "closed_reason": "Not suitable for this site", "title": "Segmentation fault (core dumped) when filling matrix with random numbers", "body": "<p>What I'm trying to do is to simply fill 2 matrix with random numbers. However with the code I have I get a segmentation fault (core dumped) error and I have no idea why. I'd really appreciate the help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint matA[3][3];\nint matB[3][3];\n\nint main() {\n\n   srand(time(NULL));\n   int i, j;\n\n   for(i=0; i&lt;3; i++)\n   {\n      for(j=0; j&lt;3; i++)\n      {\n        matA[i][j] = (rand() % 9) + 1; \n        matB[i][j] = (rand() % 9) + 1;\n      }     \n   }\n\n}\n</code></pre>\n"}, {"tags": ["c", "string", "algorithm", "assembly"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1442429012, "post_id": 32616137, "comment_id": 53083340, "body": "if you use a binary search tree for storing individual characters, where the sorting/order of the nodes is based on the index of characters, then you can go down to <code>O(log k)</code> asymptotically. But the constant factors will be much, <b>much</b> worse (due to pointer traversals and the general cache unfriendliness of trees)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1442429276, "post_id": 32616137, "comment_id": 53083487, "body": "<i>&quot;If you also want to mention why this is a good interview question. I&#39;d love to know that as well.&quot;</i> --&gt; Because the best interview questions do not have a definitive answer, but, as you have, draw you out to explore alternatives."}, {"owner": {"reputation": 16071, "user_id": 751484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c752a87779402b14b7cc55a24ca7a18c?s=128&d=identicon&r=PG", "display_name": "Jonathan M", "link": "https://stackoverflow.com/users/751484/jonathan-m"}, "edited": false, "score": 1, "creation_date": 1442429464, "post_id": 32616137, "comment_id": 53083595, "body": "What is to be returned? Is the question asking for the return of the kth character, or the string with the kth character removed?"}, {"owner": {"reputation": 712, "user_id": 1030244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818326c81c8b56b7568a14ef750173d5?s=128&d=identicon&r=PG", "display_name": "West", "link": "https://stackoverflow.com/users/1030244/west"}, "edited": false, "score": 0, "creation_date": 1442429598, "post_id": 32616137, "comment_id": 53083668, "body": "The string with the kth character removed. Bonus points for doing it inplace. Also Para feel free to post that as an answer, answers that only do 1 or 1 and 2 are fine as well as ones that do 1,2 and 3"}, {"owner": {"reputation": 6058, "user_id": 1952500, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd15d38fd1e508e6c2bcad9e153e789d?s=128&d=identicon&r=PG", "display_name": "user1952500", "link": "https://stackoverflow.com/users/1952500/user1952500"}, "edited": false, "score": 1, "creation_date": 1442429917, "post_id": 32616137, "comment_id": 53083848, "body": "Is the string to be represented as an array of characters ? I think the interviewer may have wanted to be asked that sort of question to start out a discussion on other ways of representing strings / sets of strings."}, {"owner": {"reputation": 16071, "user_id": 751484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c752a87779402b14b7cc55a24ca7a18c?s=128&d=identicon&r=PG", "display_name": "Jonathan M", "link": "https://stackoverflow.com/users/751484/jonathan-m"}, "edited": false, "score": 0, "creation_date": 1442430005, "post_id": 32616137, "comment_id": 53083889, "body": "Am I thinking about it wrong? Seems if you start at <code>i=k</code> and say <code>s[i]=s[i+1]</code> until you get to <code>i==N</code>, the order would be O(N-k), right? With a max of N-1."}, {"owner": {"reputation": 712, "user_id": 1030244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818326c81c8b56b7568a14ef750173d5?s=128&d=identicon&r=PG", "display_name": "West", "link": "https://stackoverflow.com/users/1030244/west"}, "edited": false, "score": 0, "creation_date": 1442430008, "post_id": 32616137, "comment_id": 53083892, "body": "Yea its a standard C array."}, {"owner": {"reputation": 712, "user_id": 1030244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818326c81c8b56b7568a14ef750173d5?s=128&d=identicon&r=PG", "display_name": "West", "link": "https://stackoverflow.com/users/1030244/west"}, "edited": false, "score": 0, "creation_date": 1442430132, "post_id": 32616137, "comment_id": 53083960, "body": "No you have to remove every kth character in the case of 3 its 3,6,9 etc. but now it makes sense. what you do is s[i]=s[i+i/3] and its still order N but in place."}, {"owner": {"reputation": 4944, "user_id": 458825, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/497dd7f983491c3fe164b88a74cad331?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/458825/timo"}, "edited": false, "score": 0, "creation_date": 1442430162, "post_id": 32616137, "comment_id": 53083979, "body": "@West then you better change the title"}, {"owner": {"reputation": 16071, "user_id": 751484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c752a87779402b14b7cc55a24ca7a18c?s=128&d=identicon&r=PG", "display_name": "Jonathan M", "link": "https://stackoverflow.com/users/751484/jonathan-m"}, "edited": false, "score": 0, "creation_date": 1442430180, "post_id": 32616137, "comment_id": 53083987, "body": "Oooooh, you didn&#39;t say <i>every</i> kth character, but just the kth character. You should probably edit and clarify."}, {"owner": {"reputation": 16071, "user_id": 751484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c752a87779402b14b7cc55a24ca7a18c?s=128&d=identicon&r=PG", "display_name": "Jonathan M", "link": "https://stackoverflow.com/users/751484/jonathan-m"}, "edited": false, "score": 0, "creation_date": 1442430383, "post_id": 32616137, "comment_id": 53084105, "body": "@West, yes, what you mentioned will work, but it has RAW dependencies and is not multithreadable. Is multithreadable a requirement?"}, {"owner": {"reputation": 712, "user_id": 1030244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818326c81c8b56b7568a14ef750173d5?s=128&d=identicon&r=PG", "display_name": "West", "link": "https://stackoverflow.com/users/1030244/west"}, "edited": false, "score": 0, "creation_date": 1442430409, "post_id": 32616137, "comment_id": 53084122, "body": "No, just a curiosity of mine."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1442430439, "post_id": 32616137, "comment_id": 53084143, "body": "@West well, the &quot;every k-th character&quot; problem isn&#39;t quite the same. Even if you use a BST, it will take <code>O(N&#47;k * log(k))</code> time, which is again just <code>O(n)</code> if <code>k</code> is constant."}, {"owner": {"reputation": 712, "user_id": 1030244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818326c81c8b56b7568a14ef750173d5?s=128&d=identicon&r=PG", "display_name": "West", "link": "https://stackoverflow.com/users/1030244/west"}, "edited": false, "score": 0, "creation_date": 1442430679, "post_id": 32616137, "comment_id": 53084292, "body": "Thanks guys, this makes me feel dumb but knowing where I went wrong is good."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1442433108, "post_id": 32616137, "comment_id": 53085625, "body": "A relatively simple way to look at the asymptotic complexity question is that no matter the details of how you go about the removal, all but <code>k - 1</code> characters have to be moved to new positions.  That&#39;s <code>o(N - (k - 1))</code> = <code>o(N)</code> (small <code>o</code>), so the upper bound cannot be any better than that.  Since you can indeed do the job in <code>O(N)</code> operations, that&#39;s your best possible upper bound."}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 1, "last_activity_date": 1442500952, "creation_date": 1442500952, "answer_id": 32633221, "question_id": 32616137, "link": "https://stackoverflow.com/questions/32616137/what-is-the-best-algorithm-for-removing-every-kth-character-in-a-string-of-lengt/32633221#32633221", "title": "What is the best algorithm for removing every kth character in a string of length N?", "body": "<p>The obvious method is easy to do in-place</p>\n\n<pre><code>void remove_every_kth(char *s, size_t len, int k)\n{\n    // UNTESTED CODE, there might be an off-by-one or a wrong loop boundary\n    if (k &lt; len)\n        return;\n\n    const char *endp = s + len;\n    size_t offset = 1;\n    // we skip the s[i] = s[i] memmove at offset=0.\n    for (s+=k-1 ; s + offset &lt; endp-(k-1) ; s+=k-1) {\n        // every iteration copies k-1 characters, and advances s by k-1\n        memmove(s, s+offset, k-1);\n        offset++;\n    }\n    size_t lastchunk = endp - (s+offset);  // some number (less than k) of bytes left in the input\n    memmove(s, s+offset, lastchunk);\n    s[lastchunk] = '\\0';\n}\n// equivalently, we could have kept a pointer to the read position,\n// like const char* read = s+offset;\n// and incremented it by k, while incrementing s by k-1\n\n\n    // for (int i=0 ; i &lt; k ; i++)  // implicit length string\n    //    if (!s[i]) return;    // check for length &lt; k\n</code></pre>\n\n<p>Since <code>k</code> is constant, you can calculate where to find the input character for any output position.  <code>out[i] = in[i + i/k]</code>.  There's nothing data-dependent, so this is certainly multithreadable if you don't need to do it in-place, and you have the length of the string in advance.  Just farm out the necessary <code>memcpy</code> calls to multiple threads.  (I wrote the simple version with <code>memmove</code> instead of a char-pointer loop to make this more obvious, as well as for much better performance with medium to large <code>k</code>.  It probably sucks for small <code>k</code>.)</p>\n\n<p>For multithreaded in-place, there's something to gain if <code>k</code> is large, so that even towards the end of a long string, the source and destination of most of the copying is within the same chunk.  Each work unit does:</p>\n\n<ul>\n<li>don't touch the first <code>offset = chunk_number * chunk_size / k</code> bytes, the previous work unit needs to read them.</li>\n<li>save the second <code>offset</code> bytes to a temp array.</li>\n<li><code>memmove(chunk + offset, chunk + offset*2, chunk_size - offset)</code> (i.e. do the memmove for all the bytes that aren't needed by the previous work unit).</li>\n<li>spin-wait for the <em>previous</em> chunk to be marked as done by the thread handling it.  (Prob. with a separate data structure, because just watching the data at the last overlapping position won't work.  It might be overwritten with the same value.)</li>\n<li>copy from the temp buffer to the beginning of the chunk, where the data belongs</li>\n<li>mark the work chunk as completed.</li>\n</ul>\n\n<p>For small <code>k</code>, in-place multithread is futile, because most of the bytes in a chunk need to be overwritten with bytes from later chunks.  (very large chunks help some.)</p>\n"}], "owner": {"reputation": 712, "user_id": 1030244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818326c81c8b56b7568a14ef750173d5?s=128&d=identicon&r=PG", "display_name": "West", "link": "https://stackoverflow.com/users/1030244/west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 32633221, "answer_count": 1, "score": 5, "last_activity_date": 1505017738, "creation_date": 1442428443, "last_edit_date": 1505017738, "question_id": 32616137, "link": "https://stackoverflow.com/questions/32616137/what-is-the-best-algorithm-for-removing-every-kth-character-in-a-string-of-lengt", "title": "What is the best algorithm for removing every kth character in a string of length N?", "body": "<p>I know there is a naive algorithm that is order N and I'm about convinced that's the only one to use. Is there any other that is:</p>\n\n<ol>\n<li>Asymptotically better</li>\n<li>Pipelineable i.e. RAW,WAR friendly</li>\n<li>Multithreadable.</li>\n</ol>\n\n<p>I'm sure there is one for (1) but I'm not so sure about (2) and (3). If you also want to mention why this is a good interview question. I'd love to know that as well.</p>\n"}, {"tags": ["c", "udp", "file-transfer"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1442429240, "post_id": 32615946, "comment_id": 53083466, "body": "Just out of curiosity, not to criticize ... why? I mean, what should this solve, that just using TCP wouldn&#39;t?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1470582065, "post_id": 32615946, "comment_id": 64998103, "body": "<a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1470582144, "post_id": 32615946, "comment_id": 64998130, "body": "Sendto sets <code>errno</code>, so you should replace <code>fprintf(stderr,&quot;sendto error.\\n&quot;);</code> with <code>perror(&quot;sendto&quot;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1442428947, "creation_date": 1442428947, "answer_id": 32616316, "question_id": 32615946, "link": "https://stackoverflow.com/questions/32615946/using-udp-transfer-image/32616316#32616316", "title": "Using UDP transfer image", "body": "<p>UDP is a datagram protocol, meaning that each call to <code>sendto</code> sends one message.  If that message is larger than an IP packet can hold, it will be fragmented across multiple IP datagrams.  If any one of those fragments fails to arrive, the whole thing is dropped at the OS level.</p>\n\n<p>The data needs to be sent in chunks of no more than about 1450 bytes.  Then the receiving side will need to read each packet and, because UDP does not guarantee that data will arrive in order, you will need to reassemble them in the proper order.  </p>\n\n<p>That means each packet has to have a user-defined header which contains the sequence number so that the receiver knows what order to put them in.</p>\n\n<p>You also need to worry about retransmissions, since UDP doesn't guarantee that a packet that is send is actually received.</p>\n\n<p>There's a program I wrote called <a href=\"http://uftp-multicast.sourceforge.net\" rel=\"nofollow\">UFTP</a> which does all of this.  Take a look at the documentation and code to get an idea of what you need to do to implement reliable data transfer over UDP.</p>\n"}], "owner": {"reputation": 86, "user_id": 3255951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dPs6c.jpg?s=128&g=1", "display_name": "Guizinhobeback", "link": "https://stackoverflow.com/users/3255951/guizinhobeback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1843, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442428947, "creation_date": 1442427760, "question_id": 32615946, "link": "https://stackoverflow.com/questions/32615946/using-udp-transfer-image", "title": "Using UDP transfer image", "body": "<p>I have been working on how to transfer an image using UDP in C, I have created a code that sometimes works, sometimes it doesn't. In what I think the issue is that sometimes the server receives more packages than writes. I know that I am trying to create the TCP, but that is what I am kind looking for, but not sure how to do it.</p>\n\n<p>I think to fix it the client should send the buff of the img and only sends the second part when the server reply back to the client.</p>\n\n<p>Here is the code:</p>\n\n<p>Client:</p>\n\n<pre><code>while (!feof(p))\n    {\n            fread(*&amp;c, 1, BLEN, p);\n            sprintf(buf, \"%s\", *&amp;c);\n            temp=sendto(s,buf,BLEN, 0, (struct sockaddr *) &amp;si_other, slen);\n            //sleep(3);\n            //printf(\"%d \",temp);\n            if(temp &lt; 0)\n            {\n                    fprintf(stderr,\"sendto error.\\n\");\n                    printf(\"erro\");\n                    exit(1);\n            }\n            i++;\n    }\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>while(1){\n    if(recvfrom(s, buf, BLEN, 0, (struct sockaddr *) &amp;si_other, (unsigned int *) &amp;slen)==-1){\n        perror(\"recvfrom error.\\n\");\n        exit(1);\n    }\n    //printf(\"%s \", &amp;si_other);\n    flagr[0] = buf[0];\n    flagr[1] = buf[1];\n    flagr[2] = buf[2];\n    if (strcmp(flagr, flag) == 0 ){\n            break;\n    }\n    fwrite(buf, 1, BLEN, pp);\n    i++;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "reverse", "sentence", "strncpy"], "comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1442425498, "post_id": 32615231, "comment_id": 53081318, "body": "What in the world is <code>ss</code>?"}, {"owner": {"reputation": 1074, "user_id": 5312548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/89a837174bf7e62b26df5afb3e2bc497?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Tripathi", "link": "https://stackoverflow.com/users/5312548/nitin-tripathi"}, "edited": false, "score": 0, "creation_date": 1442425715, "post_id": 32615231, "comment_id": 53081455, "body": "sample data is needed here"}, {"owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "edited": false, "score": 0, "creation_date": 1442425726, "post_id": 32615231, "comment_id": 53081460, "body": "Posted. ss and s are the length of the strings used in strncat and strncpy."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1442426639, "creation_date": 1442426639, "answer_id": 32615620, "question_id": 32615231, "link": "https://stackoverflow.com/questions/32615231/reversing-words-within-a-string/32615620#32615620", "title": "Reversing words within a string", "body": "<p>You need to initialize \"<em>at least</em>\" the first byte of <code>strcat()</code> parameters, because it expects it's parameters to be <code>nul</code> terminated, so</p>\n\n<pre><code>string2[0] = '\\0';\n</code></pre>\n\n<p>would help, but you don't need <code>strcat()</code> for the first time, you can use <code>strcpy()</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1442428105, "creation_date": 1442428105, "answer_id": 32616043, "question_id": 32615231, "link": "https://stackoverflow.com/questions/32615231/reversing-words-within-a-string/32616043#32616043", "title": "Reversing words within a string", "body": "<p>You're not copying enough characters in your <code>strncpy</code> calls.</p>\n\n<p>From the man pages:</p>\n\n<blockquote>\n  <p>The strncpy() function is similar, except that not more than n bytes\n  of src  are copied. Thus, if there is no null byte among the first n\n  bytes of src, the result will not be null-terminated.</p>\n</blockquote>\n\n<p>Since you're specifying the exact length of the string, no NULL terminating byte is appended.</p>\n\n<p>You need to add 1 to each of these:</p>\n\n<pre><code>  strncpy(string2, word, s+1);\n  strncat(string2, temp, ss);   // strncat always NULL terminates\n  strncpy(temp, string2, ss+1);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Enter a String: aaa bbb ccc ddd eee\n\nstring2: aaa\ntemp: aaa\nstring2: bbbaaa\ntemp: bbbaaa\nstring2: cccbbbaaa\ntemp: cccbbbaaa\nstring2: dddcccbbbaaa\ntemp: dddcccbbbaaa\nstring2: eee\ndddcccbbbaaa\ntemp: eee\ndddcccbbbaaa\n</code></pre>\n\n<p>The split line on the last iteration is because <code>fgets</code> leaves the newline at the end of the buffer.  You can skip over it by including <code>\\n</code> in the delimiter list to <code>strtok</code>:</p>\n\n<pre><code>word = strtok(string1, \" \\n\");\n...\nword = strtok(NULL, \" \\n\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442435901, "last_edit_date": 1442435901, "creation_date": 1442433106, "answer_id": 32617479, "question_id": 32615231, "link": "https://stackoverflow.com/questions/32615231/reversing-words-within-a-string/32617479#32617479", "title": "Reversing words within a string", "body": "<p>It is rather difficult to determine whether you are actually attempting to:</p>\n\n<blockquote>\n  <p>reverse the words within a string</p>\n</blockquote>\n\n<p>or <em>reverse the string</em>.</p>\n\n<p>If you are simply trying to reverse the whole string, then it wouldn't make much sense to separate the string into <em>tokens</em> when all you would need to do is write the original in reverse order.</p>\n\n<p>Taking your request at face value, it may be easier to simply walk down the string with a start-pointer <code>'p'</code> and end-pointer <code>'ep'</code> and reverse what is between the two pointers when you find a <code>space</code> with <code>'ep'</code>. In other words step down the new copy of the original string and with <code>'p'</code> pointing to the beginning of each word and when <code>'ep'</code> points to the space at the end of that word (or end of string), simply reverse the characters <em>in-place</em>. That would eliminate all the copying and concatenation. </p>\n\n<p>One approach to reversing the characters in-place would be something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid strprev (char *begin, char *end);\n\nint main (int argc, char **argv) {\n\n    if (argc &lt; 2) return 1;\n    size_t len = strlen (argv[1]);\n\n    char *p, *ep;\n    char rev[len + 1]; /* a VLA is fine here   */\n\n    strncpy (rev, argv[1], len + 1);     /* copy string to rev       */\n    p = ep = rev;\n\n    for (;;) {  /* for every char in rev */\n\n        if (*ep &amp;&amp; *ep != '\\n') {        /* if not at end of rev, and */\n            if (*ep == ' ' &amp;&amp; ep &gt; p) {  /* if ' ' and chars between  */\n                strprev (p, ep - 1);     /* reverse between p and ep  */\n                p = ep + 1;              /* advance p to next word    */\n            }\n        }\n        else {  /* handle last word in rev */\n            if (ep &gt; p)\n                strprev (p, ep - 1);\n            break;\n        }\n        ep++;\n    }\n\n    printf (\"\\n string  : %s\\n reverse : %s\\n\\n\", argv[1], rev);\n\n    return 0;\n}\n\n/** strprev - reverse string given by begin and end pointers.\n*  Takes valid string and swaps src &amp; dest each iteration.\n*  The original string is not preserved.\n*  If str is not valid, no action taken.\n*/\nvoid strprev (char *begin, char *end)\n{\n    char tmp;\n\n    if (!begin || !end) {\n        printf (\"%s() error: invalid begin or end\\n\", __func__);\n        return;\n    }\n\n    while (end &gt; begin)\n    {\n        tmp = *end;\n        *end-- = *begin;\n        *begin++ = tmp;\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/strrevex_a \"ABC DEF GHI JKL MNO\"\n\n string  : ABC DEF GHI JKL MNO\n reverse : CBA FED IHG LKJ ONM\n</code></pre>\n\n<p><strong>Note:</strong> if you need to handle (skip) multiple spaces between the word, then they would need to be skipped before you assign <code>p = ep + 1;</code> in the code above.</p>\n\n<p>If you are actually trying to reverse the entire string, that is quite a bit easier. Let me know which one is the correct goal and I'll help further if needed.</p>\n"}], "owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442435901, "creation_date": 1442425226, "last_edit_date": 1442427124, "question_id": 32615231, "link": "https://stackoverflow.com/questions/32615231/reversing-words-within-a-string", "title": "Reversing words within a string", "body": "<p>I am to reverse the words within a string. I feel like I'm headed in the right direction. But I keep getting wonky output and cant help but think it has to do with my <code>strncat()</code> function. Do any of you see any issues with out I've decided to handle it. I'm open to suggestion on other ways to do it.</p>\n\n<pre><code>int main()\n{\n  int ch, ss=0, s=0;\n  char x[3];\n  char *word, string1[100], string2[100], temp[100];\n  x[0]='y';\n\n  while(x[0]=='y'||x[0]=='Y')\n  {\n    printf(\"Enter a String: \");\n    fgets(string1, 100, stdin);\n    if (string1[98] != '\\n' &amp;&amp; string1[99] == '\\0') { while ( (ch = fgetc(stdin)) != EOF &amp;&amp; ch != '\\n'); }\n\n    word = strtok(string1, \" \");\n\n    while(word != NULL)\n    {\n      s = strlen(word);\n      ss=ss+s;\n\n      strncpy(string2, word, s);\n      strncat(string2, temp, ss);\n      strncpy(temp, string2, ss);\n\n      printf(\"string2: %s\\n\",string2);\n      printf(\"temp: %s\\n\",temp);      \n      word = strtok(NULL, \" \");\n    }\n\n    printf(\"Run Again?(y/n):\");\n    fgets(x, 2, stdin);\n    while ( (ch = fgetc(stdin)) != EOF &amp;&amp; ch != '\\n');\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>This is my output: </p>\n\n<pre><code>Enter a String: AAA BBB CCC DDD EEE\n\nstring2: AAA\ntemp: AAA\n\nstring2: BBBAAA\ntemp: BBBAAA\n\nstring2: CCCAAABBBAAA\ntemp: CCCAAABBB\n\nstring2: DDDAAABBBAAACCCAAABBB\ntemp: DDDAAABBBAAA\n\nstring2: EEE\nAABBBAAACCCAAABBBDDDAAABBBAAA\ntemp: EEE\nAABBBAAACCCA\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "julia"], "comments": [{"owner": {"reputation": 854, "user_id": 4884759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a1d0c6fd4999f4b8c851a6df1561cc8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferenc", "link": "https://stackoverflow.com/users/4884759/ferenc"}, "edited": false, "score": 0, "creation_date": 1442439525, "post_id": 32614963, "comment_id": 53088923, "body": "I just found a bug in BSONError.js that causes the problem and am writing up an answer. I think it is not related to a version."}], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 4884759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a1d0c6fd4999f4b8c851a6df1561cc8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferenc", "link": "https://stackoverflow.com/users/4884759/ferenc"}, "edited": false, "score": 0, "creation_date": 1442439883, "post_id": 32619186, "comment_id": 53089067, "body": "Would you mind elaborating on your last sentence? I am not (yet) an expert  on <code>ccall</code> and conversions."}], "tags": [], "owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "is_accepted": false, "score": 2, "last_activity_date": 1442440075, "last_edit_date": 1442440075, "creation_date": 1442439391, "answer_id": 32619186, "question_id": 32614963, "link": "https://stackoverflow.com/questions/32614963/ccall-with-array-type-in-signature-calling-a-struct-in-c-from-julia/32619186#32619186", "title": "ccall with Array type in signature calling a struct in C from Julia", "body": "<p>The problem is unrelated to the <code>ccall</code>. It is caused by <a href=\"https://github.com/pzion/LibBSON.jl/blob/c854c7df053533070c7d1e8f2f6e708410ab438c/src/BSONError.jl#L21\" rel=\"nofollow\">this line</a>, as indicated in the stack trace.</p>\n\n<p>In 0.4, there is no longer a <code>convert{T}(::Type{Ptr{T}},Array{T})</code> function. </p>\n\n<p><code>ccall</code> calls converts its argument using the (non-exported) <code>unsafe_convert</code> method (which is why the above code doesn't cause an error). If you want a <code>Ptr</code> object in user code, the easiest way is to use the <code>pointer</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 1299, "user_id": 2556061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3ce82c50576d090da69fc77bc2ee79f?s=128&d=identicon&r=PG", "display_name": "mschauer", "link": "https://stackoverflow.com/users/2556061/mschauer"}, "edited": false, "score": 0, "creation_date": 1442485435, "post_id": 32619247, "comment_id": 53105452, "body": "If you found a bug, would you be so friendly and report it as issue at <a href=\"https://github.com/pzion/LibBSON.jl/issues\" rel=\"nofollow noreferrer\">github.com/pzion/LibBSON.jl/issues</a> ?"}], "tags": [], "owner": {"reputation": 854, "user_id": 4884759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a1d0c6fd4999f4b8c851a6df1561cc8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferenc", "link": "https://stackoverflow.com/users/4884759/ferenc"}, "is_accepted": false, "score": 1, "last_activity_date": 1442439744, "creation_date": 1442439744, "answer_id": 32619247, "question_id": 32614963, "link": "https://stackoverflow.com/questions/32614963/ccall-with-array-type-in-signature-calling-a-struct-in-c-from-julia/32619247#32619247", "title": "ccall with Array type in signature calling a struct in C from Julia", "body": "<p>It turns out the BSONError.jl has had a bug, the </p>\n\n<pre><code>return bytestring(convert(Ptr{Uint8}, bsonError._wrap_[9:end]))\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>return bytestring(bsonError._wrap_[9:end])\n</code></pre>\n\n<p>in the BSONError.jl's <code>convert</code> function. That is, the error could not be printed out because the error printing is buggy.</p>\n\n<p>Fixing that, from the error message received form C it turns out that the correct bson format is </p>\n\n<p>BSONObject(\"{\\\"a\\\":1}\")</p>\n\n<p>to create a bson object.</p>\n"}], "owner": {"reputation": 854, "user_id": 4884759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a1d0c6fd4999f4b8c851a6df1561cc8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferenc", "link": "https://stackoverflow.com/users/4884759/ferenc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1442440075, "creation_date": 1442424243, "last_edit_date": 1442428801, "question_id": 32614963, "link": "https://stackoverflow.com/questions/32614963/ccall-with-array-type-in-signature-calling-a-struct-in-c-from-julia", "title": "ccall with Array type in signature calling a struct in C from Julia", "body": "<p>I am having trouble with calling a C function from Julia. This may be generally useful question, but I'll describe it here in the concrete setting I am struggling with. I am trying to create a <code>bson</code> object:</p>\n\n<pre><code>BSONObject(\"{a:1}\")\n</code></pre>\n\n<p>so this object's constructor is called:</p>\n\n<pre><code>BSONObject(jsonString::String) = begin\n    jsonCStr = bytestring(jsonString)\n    bsonError = BSONError()\n    _wrap_ = ccall(\n        (:bson_new_from_json, libbson),\n        Ptr{Void}, (Ptr{Uint8}, Csize_t, Ptr{Uint8}),\n        jsonCStr,\n        length(jsonCStr),\n        bsonError._wrap_\n        )\n    _wrap_ != C_NULL || error(bsonError)\n    bsonObject = new(_wrap_, None)\n    finalizer(bsonObject, destroy)\n    return bsonObject\nend\n</code></pre>\n\n<p>in the <a href=\"https://github.com/pzion/LibBSON.jl/blob/master/src/BSONObject.jl\" rel=\"nofollow\">https://github.com/pzion/LibBSON.jl/blob/master/src/BSONObject.jl</a> LibBSON package needed to handle MongoDB queries, but the setting is not particularly important. What is important is the <code>ccall</code>, which passes a string, <code>jsonCStr</code>, this string's length, and <code>bsonError._wrap_</code>. This last object comes from <a href=\"https://github.com/pzion/LibBSON.jl/blob/master/src/BSONError.jl\" rel=\"nofollow\">https://github.com/pzion/LibBSON.jl/blob/master/src/BSONError.jl</a> and is an array:</p>\n\n<pre><code>type BSONError\n    _wrap_::Vector{Uint8}\n\n    function BSONError()\n        return new(Array(Uint8, 512))\n    end\nend\n</code></pre>\n\n<p>created in the above constructor of <code>BSONError</code> object, an array of 512 <code>Uint8</code>'s. This Julia <code>bsonError._wrap_</code> refers to the following <code>struct</code> in C:</p>\n\n<pre><code>typedef struct\n{\n   uint32_t domain;\n   uint32_t code;\n   char     message[504];\n} bson_error_t;\n</code></pre>\n\n<p>see on <a href=\"http://api.mongodb.org/libbson/current/bson_error_t.html\" rel=\"nofollow\">http://api.mongodb.org/libbson/current/bson_error_t.html</a>, and this struct is of length 4 + 4 + 504 = 512, so it looks OK.</p>\n\n<p>Now going back to the <code>ccall</code>, its type signature is Ok: <code>Ptr{Uint8}</code> points to the string, <code>Csize_t</code> is the type of its size, and Ptr{Uint8} points to the <code>struct</code>. This latter, however, returns with an error message:</p>\n\n<pre><code>LoadError: MethodError: `convert` has no method matching convert(::Type{Ptr{UInt8}}, ::Array{UInt8,1})\nThis may have arisen from a call to the constructor Ptr{UInt8}(...),\nsince type constructors fall back to convert methods.\nClosest candidates are:\n  call{T}(::Type{T}, ::Any)\n  convert{T&lt;:Union{Int8,UInt8}}(::Type{Ptr{T&lt;:Union{Int8,UInt8}}}, !Matched::Cstring)\n  convert{T}(::Type{Ptr{T}}, !Matched::UInt64)\n  ...\nwhile loading In[2], in expression starting on line 1\n\n in convert at /Users/szalmaf/.julia/v0.4/LibBSON/src/BSONError.jl:21\n in call at /Users/szalmaf/.julia/v0.4/LibBSON/src/BSONObject.jl:33\n</code></pre>\n\n<p>apparently, trying to convert the <code>Array</code> to a type <code>Ptr{UInt8}</code>.</p>\n\n<p>The Julia manual <a href=\"http://julia.readthedocs.org/en/latest/manual/calling-c-and-fortran-code/#mapping-c-types-to-julia\" rel=\"nofollow\">http://julia.readthedocs.org/en/latest/manual/calling-c-and-fortran-code/#mapping-c-types-to-julia</a> says in the 'Mapping C Types to Julia' section's 'Bits Types' subsection that a Julia <code>Array{T,N}</code> should be passed as <code>Ptr{T}</code>, where <code>T</code> is <code>UInt8</code> in this case. So the Julia <code>ccall</code> looks ok, but there is still that error message. It is a pretty burning problem since it prevents more complex queries in the database. Any suggestions as to how to remedy this <code>ccall</code> problem?</p>\n\n<p>P.S. Note if you install the Mongo package it comes with the LibBSON package and the libbson C library. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1442422999, "post_id": 32614150, "comment_id": 53079945, "body": "The line <code>extern system, puts;</code> worries me.  It declares that there are two externally defined integers (because there is no explicit type specified).  These declarations shadow the declarations in <code>&lt;stdlib.h&gt;</code> and <code>&lt;stdio.h&gt;</code>.  However, at link time, the functions will probably be used to satisfy the references.  Note that the <code>extern</code> line is invalid in C99 and beyond \u2013 and was dubious at best in pre-standard or C89/C90 standard C."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 9, "creation_date": 1442423223, "post_id": 32614150, "comment_id": 53080072, "body": "Your declaration <code>int main(int argv, char **argc)</code> is not technically invalid, but is 100% unorthodox.  The integer argument is usually called <code>argc</code> (argument count), and the <code>char</code> double-pointer is usually called <code>argv</code> (argument vector).  If you&#39;re going to use non-standard names, please do not, for everybody else&#39;s sanity, use the names reversed!"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 2, "creation_date": 1442423872, "post_id": 32614150, "comment_id": 53080455, "body": "Use <code>int (*fn)(char const *)=&amp;system;</code>, it&#39;s better to avoid casts."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1442424015, "post_id": 32614150, "comment_id": 53080517, "body": "@4566976: The cast is necessary as <code>system()</code> is <code>int(*)(const char*)</code>. The <code>&amp;</code> unnecessary, however."}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1442424294, "post_id": 32614150, "comment_id": 53080672, "body": "@alk The cast is not necessary if you have the correct function pointer. It&#39;s bad to cast a function to another. I know that <code>&amp;</code> is unnecessary."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1442424422, "post_id": 32614150, "comment_id": 53080732, "body": "Removed <code>ansi</code> tag. Tag explicitly says not to use it."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "reply_to_user": {"reputation": 1113, "user_id": 1530143, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9abc605a3b27fcb6dbb57cc650eeacb?s=128&d=identicon&r=PG", "display_name": "NightSkyCode", "link": "https://stackoverflow.com/users/1530143/nightskycode"}, "edited": false, "score": 2, "creation_date": 1442426737, "post_id": 32614150, "comment_id": 53082127, "body": "@NightSkyCode Absolutely not. The questions have almost same title but the contents is completely different. Moreover closing as duplicate to a bad question (score -1) isn&#39;t a good thing. Closure as duplicate should point to where the good question &amp; information is (that&#39;s why you shouldn&#39;t take the date into account when doing so; an older question can be worse than a newer one asking the same thing)."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 0, "creation_date": 1442427896, "post_id": 32614150, "comment_id": 53082740, "body": "Refer to <a href=\"http://stackoverflow.com/a/840504/1928852\">this answer</a> for a good explanation on function pointers."}], "answers": [{"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 3, "last_activity_date": 1442421830, "creation_date": 1442421830, "answer_id": 32614251, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32614251#32614251", "title": "Clarification on function pointers in C", "body": "<p>It is pure and simple pointer to function, which is assigned address to the <code>system</code> call</p>\n"}, {"comments": [{"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 1, "creation_date": 1442427703, "post_id": 32614256, "comment_id": 53082639, "body": "Since <code>system()</code> returns <code>int</code> instead of <code>void</code>, is this UB?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1442428349, "post_id": 32614256, "comment_id": 53082983, "body": "@Kevin - Why do you think it is undefined behavior?"}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 1, "creation_date": 1442428486, "post_id": 32614256, "comment_id": 53083056, "body": "Because you cast the function into the wrong type.  It is <i>not</i> a <code>(void(*)(char*))</code>.  <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2004/01/19/60162.aspx\" rel=\"nofollow noreferrer\">The converse cast is illegal</a>, at least."}, {"owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "edited": false, "score": 1, "creation_date": 1442428494, "post_id": 32614256, "comment_id": 53083062, "body": "<i>address</i> of <code>system</code>, not value."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1442428638, "post_id": 32614256, "comment_id": 53083146, "body": "Oops - missed the <code>&amp;</code> - That is not required. But then again the code is crap"}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1442428907, "post_id": 32614256, "comment_id": 53083291, "body": "In this case, the <code>&amp;</code> is required, because <code>system</code> is declared as just <code>extern system</code>, which means <code>extern int system</code>.  So it will try to dereference <code>system</code> and grab an integer if you miss the <code>&amp;</code>."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 8, "last_activity_date": 1442430321, "last_edit_date": 1442430321, "creation_date": 1442421846, "answer_id": 32614256, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32614256#32614256", "title": "Clarification on function pointers in C", "body": "<p>It declares the variable <code>fn</code> as a function pointer (to a function that has one argument of type <code>char *</code> and does not return anything (<code>void</code>).</p>\n\n<p>This variable is initialised with the address of <code>system</code> - see <a href=\"http://linux.die.net/man/3/system\" rel=\"nofollow noreferrer\">http://linux.die.net/man/3/system</a>. As noted from this page this will require the cast as given</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442423846, "post_id": 32614345, "comment_id": 53080434, "body": "<code>void *fn(char *)</code> does not define a function pointer. The function pointer definition is <code>void (*fn)(char *)</code>."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442425223, "post_id": 32614345, "comment_id": 53081158, "body": "@alk  Actually it is what he asked in that line , he missed <code>()</code> which are present in question&#39;s code . I will make it more clear."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 4, "last_activity_date": 1442426891, "last_edit_date": 1442426891, "creation_date": 1442422119, "answer_id": 32614345, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32614345#32614345", "title": "Clarification on function pointers in C", "body": "<blockquote>\n  <p>Then, maybe this is only a play with parentheses,where void *fn(char *) is a declaration of a function and this function is referencing system, i think</p>\n</blockquote>\n\n<p><code>void (*fn)(char *)</code>  is not a function , it is a function pointer. <a href=\"http://www.geeksforgeeks.org/function-pointer-in-c/\" rel=\"nofollow\">You can refer here to learn about function pointers.</a>. And <code>()</code> do matter here you can't ignore them .</p>\n\n<blockquote>\n  <p>But why the parameter (char*) have no name? this is permitted?</p>\n</blockquote>\n\n<p>Yes ,it is allowed to do so . Its name is not that important but its <strong>type</strong> is.</p>\n"}, {"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1442422236, "post_id": 32614369, "comment_id": 53079497, "body": "Sir <code>argc</code> is decalred as <code>char ** argc </code>. That may have been confusing."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1442422286, "post_id": 32614369, "comment_id": 53079532, "body": "How did someone end up with <code>argc</code> and <code>argv</code> being that way around?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1442422318, "post_id": 32614369, "comment_id": 53079552, "body": "@ameyCU well spotted, he has reversed the usual argument naming convention for <code>main</code>."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1442422353, "post_id": 32614369, "comment_id": 53079573, "body": "@Tommy It&#39;s a rookie mistake (a very rookie mistake)"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1442422448, "last_edit_date": 1442422448, "creation_date": 1442422179, "answer_id": 32614369, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32614369#32614369", "title": "Clarification on function pointers in C", "body": "<p>First you go to the trouble of declaring a function pointer to <code>system</code>.</p>\n\n<p>Then you throw it all away by redefining it to point to <code>puts</code>.</p>\n\n<p>Then it appears that you try to index an <code>int</code>, but you have reversed the usual naming convention for <code>main</code>, which is</p>\n\n<pre><code>int main (int argc, char **argv)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": false, "score": 1, "last_activity_date": 1520375019, "last_edit_date": 1520375019, "creation_date": 1442425259, "answer_id": 32615240, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32615240#32615240", "title": "Clarification on function pointers in C", "body": "<p>It is a pointer to Function. Let me show you if you try to make an application in C that will use text menus where instead of <strong>switch</strong> I will use pointer to Function:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n\nvoid clearScreen( const int x );\nint exitMenu( void );\nint mainMenu( void );\nint updateSystem( void );\nint installVlcFromPpa( void );\nint installVlcFromSource( void );\nint uninstallVLC( void );\nint chooseOption( const int min, const int max );\nvoid showMenu( const char *question, const char **options, int (**actions)( void ), const int length );\nint installVLC( void );\nint meniuVLC( void );\nvoid startMenu( void );\n\nint main( void ){\n    startMenu();\n    return 0;\n}\n\nvoid clearScreen( const int x ){\n    int i = 0;\n    for( ; i &lt; x ; i++ ){\n        printf( \"\\n\" );\n    }\n}\n\nint exitMenu( void ) {\n    clearScreen( 100 );\n    printf( \"Exiting... Goodbye\\n\" );\n    sleep( 1 );\n    return 0;\n}\n\nint mainMenu( void ){\n    clearScreen( 100 );\n    printf( \"\\t\\t\\tMain Manu\\n\" );\n    return 0;\n}\n\nint updateSystem( void ) {\n    clearScreen( 100 );\n    printf( \"System update...\\n\" );\n    sleep( 1 );\n    return 1;\n}\n\nint installVlcFromPpa( void ) {\n    clearScreen( 100 );\n    printf(\"Install VLC from PPA \\n\");\n    sleep( 1 );\n    return 0;\n}\n\nint installVlcFromSource( void ) {\n    clearScreen( 100 );\n    printf( \"Install VLC from Source \\n\" );\n    sleep( 1 );\n    return 0;\n}\n\nint uninstallVLC( void ) {\n    clearScreen( 100 );\n    printf( \"Uninstall VLC... \\n\" );\n    sleep( 1 );\n    return 1;\n}\n\nint chooseOption( const int min, const int max ){\n    int option,check;\n    char c;\n\n    do{\n        printf( \"Choose an Option:\\t\" );\n\n        if( scanf( \"%d%c\", &amp;option, &amp;c ) == 0 || c != '\\n' ){\n            while( ( check = getchar() ) != 0 &amp;&amp; check != '\\n' );\n            printf( \"\\tThe option has to be between %d and %d\\n\\n\", min, max );\n        }else if( option &lt; min || option &gt; max ){\n            printf( \"\\tThe option has to be between %d and %d\\n\\n\", min, max );\n        }else{\n            break;\n        }\n    }while( 1 );\n\n    return option;\n}\n\nvoid showMenu( const char *question, const char **options, int ( **actions )( void ), const int length) {\n    int choose = 0;\n    int repeat = 1;\n    int i;\n    int ( *act )( void );\n\n    do {\n        printf( \"\\n\\t %s \\n\", question );\n\n        for( i = 0 ; i &lt; length ; i++ ) {\n            printf( \"%d. %s\\n\", (i+1), options[i] );\n        }\n\n        choose = chooseOption( 1,length );\n        printf( \" \\n\" );\n\n        act = actions[ choose - 1 ];\n        repeat = act();\n\n        if( choose == 3 ){\n            repeat = 0;\n        }\n    }while( repeat == 1 );\n}\n\nint installVLC( void ) {\n    clearScreen( 100 );\n    const char *question = \"Installing VLC from:\";\n    const char *options[10] = { \"PPA\", \"Source\", \"Back to VLC menu\" };\n    int ( *actions[] )( void ) = { installVlcFromPpa, installVlcFromSource, mainMenu };\n\n    size_t len = sizeof(actions) / sizeof (actions[0]);\n    showMenu( question, options, actions, (int)len );\n    return 1;\n}\n\nint meniuVLC( void ) {\n    clearScreen( 100 );\n    const char *question = \"VLC Options\";\n    const char *options[10] = { \"Install VLC.\", \"Uninstall VLC.\", \"Back to Menu.\" };\n    int ( *actions[] )( void ) = { installVLC, uninstallVLC, mainMenu };\n\n    size_t len = sizeof(actions) / sizeof (actions[0]);\n    showMenu( question, options, actions, (int)len );\n\n    return 1;\n}\n\nvoid startMenu( void ){\n    clearScreen( 100 );\n    const char *question = \"Choose a Menu:\";\n    const char *options[10] = { \"Update system.\", \"Install VLC\", \"Quit\" };\n    int ( *actions[] )( void ) = { updateSystem, meniuVLC, exitMenu };\n\n    size_t len = sizeof(actions) / sizeof (actions[0]);\n\n    showMenu( question, options, actions, (int)len );\n}\n</code></pre>\n\n<p>Compile it and try it.</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 5333475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71434f3262972233cf1dd48b32e66e73?s=128&d=identicon&r=PG&f=1", "display_name": "Nader", "link": "https://stackoverflow.com/users/5333475/nader"}, "is_accepted": false, "score": 1, "last_activity_date": 1442425989, "creation_date": 1442425989, "answer_id": 32615443, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32615443#32615443", "title": "Clarification on function pointers in C", "body": "<p>The line is declaring a variable of a function pointer that takes a parameter and returns nothing  (void), this is needed along with the typecast to the same function prototype as extern functions are similar in their type to a void* pointer, they are not early bound during compilation.</p>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 2, "last_activity_date": 1442427679, "last_edit_date": 1442427679, "creation_date": 1442426965, "answer_id": 32615704, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32615704#32615704", "title": "Clarification on function pointers in C", "body": "<pre><code>void (*fn)(char*)=(void(*)(char*))&amp;system;\n</code></pre>\n\n<p>That line takes the address of the mis-declared symbol <code>system</code> (should be <code>int(const char*)</code>, not implicit <code>int</code>), casts it to the type of <code>fn</code> and initializes that new local variable.<br>\nThe type is <code>void(*)(char*)</code> or pointer to function receiving a single <code>char*</code> and returning nothing.</p>\n\n<hr>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/27eee73310dea70f\" rel=\"nofollow\">Well, that code is all kinds of bad</a>:</p>\n\n<ol>\n<li><p>The traditional naming of the first two arguments to <code>main</code> is reversed:</p>\n\n<pre><code>int main(int argv,char **argc)\n</code></pre></li>\n<li><p>Declaring the standard-library-functions <code>system</code> and <code>puts</code> using \"implicit int\" as <code>int</code>s. That's not even the wrong function-type, but a data-type!</p>\n\n<pre><code>extern system,puts;\n</code></pre></li>\n<li><p>Casting the symbols address to a function-pointer is nearly sane. Now if only it was the right type... Anyway, on a box with data-pointers and code-pointers being the same size, it <em>probably</em> doesn't loose any information.</p>\n\n<pre><code>void (*fn)(char*)=(void(*)(char*))&amp;system; // &lt;==\nfn=(void(*)(char*))&amp;puts;\n</code></pre></li>\n<li><p>Checking whether <code>argv</code> [!] is at least 2 should really <em>not</em> be omitted here:</p>\n\n<pre><code>strcpy(buf,argc[1]);\n</code></pre></li>\n<li><p>Calling a function through a function-pointer of wrong type is UB. Don't do that. Also, checking whether <code>argv</code>[!] is at least 3 before this point is <em>not</em> optional.\nfn(argc[2]);</p></li>\n<li><p>Relying on implicit declaration for <code>strcpy</code> and <code>exit</code> is also really bad. Neither has a prototype consistent with that! (they don't return <code>int</code>)</p></li>\n</ol>\n"}], "owner": {"reputation": 241, "user_id": 5111409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c92f6fdbd7c38931f8c72ece33fd047?s=128&d=identicon&r=PG&f=1", "display_name": "gui_cc2015", "link": "https://stackoverflow.com/users/5111409/gui-cc2015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1010, "favorite_count": 3, "closed_date": 1442456381, "accepted_answer_id": 32615704, "answer_count": 7, "score": 12, "last_activity_date": 1520375019, "creation_date": 1442421456, "last_edit_date": 1495540702, "question_id": 32614150, "link": "https://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c", "closed_reason": "Duplicate", "title": "Clarification on function pointers in C", "body": "<p>The following code comes from example <a href=\"http://community.corest.com/~gera/InsecureProgramming/abo3.html\" rel=\"nofollow noreferrer\">abo3.c</a> from <a href=\"http://community.corest.com/~gera/InsecureProgramming\" rel=\"nofollow noreferrer\">Insecure Programming</a> \u2014 see also <a href=\"https://stackoverflow.com/questions/5051974\">Why cast <code>extern puts</code> to a function pointer <code>(void(*)(char*))&amp;puts</code>?</a>:</p>\n\n<pre><code>int main(int argv,char **argc) {\n    extern system,puts; \n    void (*fn)(char*)=(void(*)(char*))&amp;system; // &lt;==\n    char buf[256];\n    fn=(void(*)(char*))&amp;puts;\n    strcpy(buf,argc[1]);\n    fn(argc[2]);\n    exit(1);\n}\n</code></pre>\n\n<p>Specifically this line:</p>\n\n<pre><code>void (*fn)(char*)=(void(*)(char*))&amp;system;\n</code></pre>\n\n<p>I think that <code>void (*fn)(char*)</code> sounds like a lambda, but I know that it's not.\nThen, maybe this is only a play with parentheses, where <code>void *fn(char*)</code> is a declaration of a function and this function is referencing <code>system</code>? But why does the <code>(char*</code>) parameter have no name? Is this permitted?</p>\n"}, {"tags": ["c", "stack", "64-bit", "memory-alignment"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442421013, "post_id": 32614007, "comment_id": 53078761, "body": "The should be an ABI or PCS specifying this."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1442421497, "post_id": 32614007, "comment_id": 53079079, "body": "Already covered well in many places, <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2004/01/14/58579.aspx\" rel=\"nofollow noreferrer\">like this one</a>."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1442422022, "post_id": 32614007, "comment_id": 53079380, "body": "@HansPassant - Thanks. I&#39;ve read that page and others, but I can&#39;t find anything that explicitly states whether 1/2/4-byte values are always 8-byte aligned on the stack. What am I missing or misunderstanding?"}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1442422123, "post_id": 32614007, "comment_id": 53079430, "body": "@HansPassant - Chen&#39;s description seems to take it for granted that they are, but I&#39;m trying to find confirmation that this is the case and/or an explanation of why it&#39;s taken for granted, since I seem to be missing that."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1442422369, "post_id": 32614007, "comment_id": 53079580, "body": "&quot;Parameters that are smaller than 64 bits are not zero-extended; the upper bits are garbage&quot;.  That means they are 64 bits."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1442422479, "post_id": 32614007, "comment_id": 53079651, "body": "@HansPassant - That&#39;s what I was missing. Thank you."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442425549, "post_id": 32614007, "comment_id": 53081356, "body": "Is <code>x64</code> a standard term or an unintentional contraction of <code>x86_64</code>?"}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442427568, "post_id": 32614007, "comment_id": 53082572, "body": "@JonathanLeffler - Yes, x86-64. (&quot;x64&quot; seems standard enough - MSDN uses it, Wikipedia lists it as an alternative to x86-64.)"}], "owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 709, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442420941, "creation_date": 1442420941, "question_id": 32614007, "link": "https://stackoverflow.com/questions/32614007/size-and-alignment-of-x64-stack-arguments", "title": "Size and alignment of x64 stack arguments", "body": "<p>As I understand the x64 calling convention in Windows (based on <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow\">this</a> and <a href=\"https://en.wikipedia.org/wiki/X86_calling_conventions#Microsoft_x64_calling_convention\" rel=\"nofollow\">this</a>):</p>\n\n<ul>\n<li>The first 4 arguments are passed in registers, although 32 bytes of shadow size is reserved in the stack.</li>\n<li>The overall stack must be 16-byte aligned (although individual arguments don't have to be).</li>\n<li>Arguments that are 1, 2, 4, or 8 bytes can go on the stack.  All other arguments must be passed by reference.</li>\n</ul>\n\n<p>How are individual arguments aligned? Since I couldn't find anything that specifically addressed this, and based on how I thought alignment worked in x86, I assumed that 32-bit ints could be aligned at 4-byte boundaries.  So, for example, if function arguments 5 and 6 were both 32-bit ints, I would have expected them to be at stack offsets 32 and 36.  However, from looking at my compiler's assembly output, they're at offsets 32 and 40 (i.e., they're 8-byte aligned, even though they take up 4 bytes).</p>\n\n<p>In other words, why does the following function call work in x64, even though it's passing 64-bit <code>uint64_t</code>s when 32-bit ints are expected?</p>\n\n<pre><code>int i = 1;\nuint64_t p = 6;\ndouble v = 2.5;\nprintf(\"%i %.*f\\n%i %.*f\\n\", i, p, v, i, p, v);\n</code></pre>\n"}, {"tags": ["c", "compiler-errors", "header", "driver"], "comments": [{"owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 0, "creation_date": 1442421122, "post_id": 32613981, "comment_id": 53078826, "body": "is that the first error you get? Header seems to be missing a line just after &quot;} Element;&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1442421141, "post_id": 32613981, "comment_id": 53078839, "body": "It&#39;s probably better not to <code>typedef</code> a pointer unless you use some kind of Camel or Hungarian notation to make it clear when reading the body of the code. For example <code>pOut</code>."}, {"owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 2, "creation_date": 1442421305, "post_id": 32613981, "comment_id": 53078944, "body": "&quot;separate C file&quot;. does that mean it is being compiled, too. Is the header actually being included by the file the error shows up in, because it should be."}, {"owner": {"reputation": 5, "user_id": 3432461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7cfdb337039146907caae878ed484e9?s=128&d=identicon&r=PG&f=1", "display_name": "jdanzi", "link": "https://stackoverflow.com/users/3432461/jdanzi"}, "edited": false, "score": 0, "creation_date": 1442421727, "post_id": 32613981, "comment_id": 53079214, "body": "@Garry Godfrey Woops I edited the post to have the line after Element; but Yes this is the first and only error I get so far since I can&#39;t compile further. This &quot;separate C File&quot; is being compiled too. It is when I try to compile it (gcc -g -c -o cs2123p1.o cs2123p1.c) that I get the error! .@Weather Vane the header and driver where provided by my professor, I was advised not to mess with them."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1442423870, "post_id": 32613981, "comment_id": 53080451, "body": "Does <code>pretoPost.c</code> have <code>#include &quot;mystery.h&quot;</code> in it (where <code>&quot;mystery.h&quot;</code> is your unnamed header file)?  If not, that&#39;s the trouble. Also note that you&#39;ve not defined a prototype for <code>newStack()</code> or <code>newOut()</code> in particular.  You&#39;ve declared that the functions exist, but you&#39;ve not specified the parameter list, so any number and any types of values are allowed. You need <code>Out newOut(void);</code> and <code>Stack newStack(void);</code> to declare a prototype for the functions. This is C, not C++ \u2014 in C++, the rules would be different. (This may just be sloppy coding by your professor if he supplied the header.)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442424033, "post_id": 32613981, "comment_id": 53080526, "body": "Note that the error message is about <code>pretoPost.c</code> not understanding <code>Out</code>, not about the header not understanding <code>Out</code>."}, {"owner": {"reputation": 5, "user_id": 3432461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7cfdb337039146907caae878ed484e9?s=128&d=identicon&r=PG&f=1", "display_name": "jdanzi", "link": "https://stackoverflow.com/users/3432461/jdanzi"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442430858, "post_id": 32613981, "comment_id": 53084394, "body": "Thank you so much @Jonathan Leffler! I had no idea I had to have the include file in pretoPost.c, but now that you mention it I can understand why it wasnt working! Ill keep in mind the stuff you said about &#39;newstack()&#39; and &#39;newOut()&#39; btw! Thank you for saving what hair I have left in my head!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 0, "creation_date": 1442431832, "post_id": 32613981, "comment_id": 53084904, "body": "@GarrGodfrey: You should turn your comment into an answer."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 3432461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7cfdb337039146907caae878ed484e9?s=128&d=identicon&r=PG&f=1", "display_name": "jdanzi", "link": "https://stackoverflow.com/users/3432461/jdanzi"}, "edited": false, "score": 0, "creation_date": 1442432760, "post_id": 32617053, "comment_id": 53085415, "body": "Thanks for the more detailed explanation! I unfortunately can&#39;t vote for peoples responses due to not having over 15 rep, So thanks to Johnathan Garr and Weather for the responses!"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1442431643, "last_edit_date": 1495535223, "creation_date": 1442431643, "answer_id": 32617053, "question_id": 32613981, "link": "https://stackoverflow.com/questions/32613981/unknown-type-name-in-function-parameters/32617053#32617053", "title": "Unknown type name in function parameters", "body": "<p><sup><em>Transferring comments to an answer.</em></sup></p>\n\n<p><sup><em>If Garr Godfrey provides an answer, please accept it \u2014 he provided the first pointer to the trouble.</em></sup></p>\n\n<h3>First pointer to the issue</h3>\n\n<p><a href=\"https://stackoverflow.com/users/3991211/garr-godfrey\">Garr Godfrey</a> [commented]):</p>\n\n<blockquote>\n  <p>\"Separate C file\" \u2014 does that mean it is being compiled, too? Is the header actually being included by the file the error shows up in, because it should be. </p>\n</blockquote>\n\n<h3>Extended commentary pointing to the issue</h3>\n\n<p><a href=\"https://stackoverflow.com/users/15168/jonathan-leffler\">Jonathan Leffler</a> <a href=\"https://stackoverflow.com/questions/32613981/unknown-type-name-in-function-parameters?noredirect=1#comment53080451_32613981\">noted</a>:</p>\n\n<blockquote>\n  <p>Does <code>pretoPost.c</code> have <code>#include \"mystery.h\"</code> in it (where \"<code>mystery.h</code>\" is your unnamed header file)? If not, that's the trouble.</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/32613981/unknown-type-name-in-function-parameters?noredirect=1#comment53080526_32613981\">and</a>:</p>\n\n<blockquote>\n  <p>Note that the error message is about <code>pretoPost.c</code> not understanding <code>Out</code>, not about the header not understanding <code>Out</code>.</p>\n</blockquote>\n\n<p>And this seems to have been the problem!</p>\n\n<blockquote>\n  <p>Also note that you've not defined a prototype for <code>newStack()</code> or <code>newOut()</code> in particular. You've declared that the functions exist, but you've not specified the parameter list, so any number and any types of values are allowed. You need <code>Out newOut(void);</code> and <code>Stack newStack(void);</code> to declare prototypes for the functions. This is C, not C++ \u2014 in C++, the rules would be different. (This may just be sloppy coding by your professor if he supplied the header.)</p>\n</blockquote>\n\n<p>This is a common misunderstanding.  A function declaration such as:</p>\n\n<pre><code>void *somefunction();\n</code></pre>\n\n<p>simply says that <code>somefunction</code> exists and returns a <code>void *</code> value.  It has no direct specification of the type or number of the arguments, but the function can't be variadic (like <code>printf()</code>, taking a variable number of arguments) because you must <em>always</em> have a prototype in scope before you use a variadic function.  To say 'no arguments', C requires:</p>\n\n<pre><code>void *somefunction(void);\n</code></pre>\n\n<p>Now you have a prototype.  If you compile with GCC, consider:</p>\n\n<pre><code>gcc -std=c11 -Wall -Wextra -Werror -Wmissing-prototypes -Wstrict-prototypes \u2026\n</code></pre>\n\n<p>It takes a little while to get used to the discipline this imposes, but it ensures you skip testing a lot of bugs.</p>\n"}], "owner": {"reputation": 5, "user_id": 3432461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7cfdb337039146907caae878ed484e9?s=128&d=identicon&r=PG&f=1", "display_name": "jdanzi", "link": "https://stackoverflow.com/users/3432461/jdanzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3029, "favorite_count": 0, "accepted_answer_id": 32617053, "answer_count": 1, "score": 0, "last_activity_date": 1442431643, "creation_date": 1442420828, "last_edit_date": 1442431004, "question_id": 32613981, "link": "https://stackoverflow.com/questions/32613981/unknown-type-name-in-function-parameters", "title": "Unknown type name in function parameters", "body": "<p>I have this header file.</p>\n\n<pre><code>// Bunch of constants defined first\n\ntypedef char Token[MAX_TOKEN + 1];\n\ntypedef struct\n{\n    Token szToken;      \n    int iCategory;      \n    int iSubcategory;   \n    int iPrecedence;    \n} Element;\n\ntypedef struct\n{\n    int iCount;  \n    Element stackElementM[MAX_STACK_ELEM];\n} StackImp;\n\ntypedef StackImp *Stack;\n\ntypedef struct\n{\n    int iOutCount;\n    Element outM[MAX_OUT_ITEM];\n} OutImp;\n\ntypedef OutImp *Out;\n\n// Stack functions\n\nvoid push(Stack stack, Element value);\nElement pop(Stack stack);\nint isEmpty(Stack stack);\nStack newStack();\nvoid freeStack(Stack stack);\nElement topElement(Stack stack);\n\nvoid categorize(Element *pElement);\nOut newOut();\nvoid addOut(Out out, Element element);\nvoid printOut(Out out);\n\nint convertToPostfix(char *pszInfix, Out out); // This is confusing me...\n\nvoid ErrExit(int iexitRC, char szFmt[], ...);\nchar * getToken(char *pszInputTxt, char szToken[], int iTokenSize);\n</code></pre>\n\n<p>This header is used by a driver which calls <code>int convertToPostfix(char *pszInfix, Out out)</code> the problem is I keeping getting <code>unknown type name 'Out'</code>as an error in my compiler. The convertToPostfix function is suppose to take a token indicate if there is any errors, and populate the out array via an addOut function(is in the driver), but I can't do anything because this error is prevent me from compiling! <code>convertToPostfix()</code> function is NOT part of the driver, it is in a separate C file if this at all matters.</p>\n\n<p>Any help would be great!</p>\n\n<p>EDIT: I first produce an .o file for the driver, then I do the same for the .c file that is convertToPostfix(), it is at this point </p>\n\n<p>COMPILER</p>\n\n<pre><code>gcc -g -c -o myDriver.o myDriver.c //Complies fine.\ngcc -g -c -o pretoPost.o pretoPost.c\npretoPost.c:7:38: error: unknown type name \u2018Out\u2019\n int convertToPostfix(char *pszInfix, Out out)\n</code></pre>\n\n<p>That I get the error.</p>\n\n<p>EDIT 2: Big thanks to the people to helped! The error was that I didn't include the <code>#include \"header.h\"</code> into my pretoPost.c file!</p>\n"}, {"tags": ["c", "file-io", "input", "io", "scanf"], "comments": [{"owner": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442421054, "post_id": 32613936, "comment_id": 53078787, "body": "From the num.txt. I want to set 1 10 to be my min/max. Then i&#39;m going to check if #&#39;s 2,4,5 are in between the MAX/MIN range set from the file."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1442421192, "post_id": 32613936, "comment_id": 53078877, "body": "I  got therefore posted an answer ."}, {"owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "edited": false, "score": 0, "creation_date": 1442421570, "post_id": 32613936, "comment_id": 53079112, "body": "I posted mine answer too, I think you want both to know how to loop and use input redirection <code>program &lt; num.txt</code> when calling it from console right?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442421178, "post_id": 32614009, "comment_id": 53078865, "body": "I&#39;m using program.o &lt; num.txt to open the file. Also I understand I can use fscanf(fp,&quot;%d %d&quot;,&amp;min,&amp;max); but I need to continue reading the file"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442421711, "post_id": 32614009, "comment_id": 53079203, "body": "@user5343207  Ok I get it now .Sorry for that .I updates my answer ."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 3, "last_activity_date": 1442421985, "last_edit_date": 1442421985, "creation_date": 1442420952, "answer_id": 32614009, "question_id": 32613936, "link": "https://stackoverflow.com/questions/32613936/how-to-read-min-max-variables-from-a-text-file/32614009#32614009", "title": "How to read min/max variables from a text file?", "body": "<p>To read from a file you can do this -</p>\n\n<pre><code> FILE *fp;\n fp=fopen(\"num.txt\",\"r\");              // check its return .\n fscanf(fp,\"%d %d\",&amp;min,&amp;max);\n</code></pre>\n\n<p>To keep reading further values you can use <code>fscanf</code> in a loop-</p>\n\n<pre><code>while(fscanf(fp,\"%d\",&amp;variable)==1){  // on success fscanf return 1 here, till fscanf is successful loop will iterate\n   // do you operations \n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442421771, "post_id": 32614084, "comment_id": 53079238, "body": "Thanks. When you do the while loop is it not looking at the first line of the file anymore. Thanks for the help"}, {"owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "reply_to_user": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442421799, "post_id": 32614084, "comment_id": 53079255, "body": "no problem !:) don&#39;t forget to accept the answer :) and wellcome to Stackoverflow :)"}, {"owner": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442421908, "post_id": 32614084, "comment_id": 53079324, "body": "I will, but so is the the while loop not looking at the first line of the file anymore or does it see 1 10"}, {"owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "reply_to_user": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442422978, "post_id": 32614084, "comment_id": 53079928, "body": "The 1 10 is stored in variables min,max then the file &quot;cursor&quot; is already moved ahead and you will just see following values (every time you read a value the file &quot;cursor&quot; will advance)."}, {"owner": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "edited": false, "score": 0, "creation_date": 1442424136, "post_id": 32614084, "comment_id": 53080593, "body": "Thank you for the clarification!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1442427172, "post_id": 32614084, "comment_id": 53082364, "body": "Be very careful with your validation checks. As it sits, you could easily have just a single value on the first line, or a single value and a letter and it would still execute without complaining."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1442439784, "post_id": 32614084, "comment_id": 53089026, "body": "<code>while( fscanf( stdin, &quot;%d&quot;, &amp;val) != EOF )</code> begins an infinite loop should the input be non-numeric.  Better to use something like <code>while( fscanf( stdin, &quot;%d&quot;, &amp;val) == 1)</code>"}], "tags": [], "owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "is_accepted": true, "score": 2, "last_activity_date": 1442499667, "last_edit_date": 1442499667, "creation_date": 1442421212, "answer_id": 32614084, "question_id": 32613936, "link": "https://stackoverflow.com/questions/32613936/how-to-read-min-max-variables-from-a-text-file/32614084#32614084", "title": "How to read min/max variables from a text file?", "body": "<p>Hardcoding the file name in program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char**argv)\n{\n    int min, max;\n\n    FILE *fp;\n    fp = fopen( \"num.txt\", \"r\");\n\n    if( fscanf( fp,\"%d %d\", &amp;min, &amp;max) != 2) // Read Min/MAX from file\n        return -1; // wrong input file\n\n    int val;\n    while( fscanf( fp, \"%d\", &amp;val) == 1 ) //check if new values in range\n        if(val&lt;min || val&gt;max)\n            printf( \"Invalid INPUT: Value %d is not in (%d, %d) range\", val, min, max);\n\n    fclose( fp);\n    return 0;\n} \n</code></pre>\n\n<p>using input redirection of console shell</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char**argv)\n{\n    int min, max;\n\n    if( fscanf( stdin,\"%d %d\", &amp;min, &amp;max) != 2) // Read Min/MAX from file\n        return -1; // wrong input file\n\n    int val;\n    while( fscanf( stdin, \"%d\", &amp;val) == 1 ) //check if new values in range\n        if(val&lt;min || val&gt;max)\n            printf( \"Invalid INPUT: Value %d is not in (%d, %d) range\", val, min, max);\n\n    return 0;\n} \n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5343207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131b198add677a33aec9f74badae4cec?s=128&d=identicon&r=PG&f=1", "display_name": "Information", "link": "https://stackoverflow.com/users/5343207/information"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 32614084, "answer_count": 2, "score": 0, "last_activity_date": 1442499667, "creation_date": 1442420691, "last_edit_date": 1442422219, "question_id": 32613936, "link": "https://stackoverflow.com/questions/32613936/how-to-read-min-max-variables-from-a-text-file", "title": "How to read min/max variables from a text file?", "body": "<p>I want to be able to set a min/max range and use it to check valid/invalid inputs while reading values from a file.</p>\n\n<p>My min and max values in the first line are <em>1</em> and <em>10</em>, respectively. This is my text file to be tested (<em>num.txt</em>):</p>\n\n<pre><code>1 10\n2 \n4\n5\n</code></pre>\n\n<p>In this program, I want to use <code>fscanf(stdin , ...)</code>:</p>\n\n<pre><code>fscanf( stdin, \"%d%c\", &amp;num, &amp;c );    \n</code></pre>\n\n<p>How can I read the first line and check it for the min and max values and then continue reading the following lines?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 6, "creation_date": 1442419312, "post_id": 32613418, "comment_id": 53077632, "body": "Language lawyer: unsigned types don&#39;t overflow."}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 6, "creation_date": 1442420254, "post_id": 32613618, "comment_id": 53078246, "body": "unless <code>(singned) int</code> cannot represent all values of <code>unsigned char</code>, the expression will return an <code>int</code>, not an <code>unsigned int</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442420931, "post_id": 32613618, "comment_id": 53078690, "body": "@EOF, do you mean &quot;unless <code>unsigned int</code> can represent all values of <code>unsigned char</code>&quot;? If not, I don&#39;t follow what you are saying."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1442421089, "post_id": 32613618, "comment_id": 53078811, "body": "@RSahu: If an <code>int</code> is wide enough that any <code>unsigned char</code> can be represented as a (positive) <code>int</code> -- normally the case -- then the usual arithmetic conversions will convert to <code>int</code> rather than <code>unsigned int</code>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1442421096, "post_id": 32613618, "comment_id": 53078817, "body": "No. C11 draft standard, <code>6.3.1 Arithmetic operands 6.3.1.1 Boolean, characters, and integers, Section 2 [...]If an int can represent all values of the original type (as restricted by the width, for a bit-field), the value is converted to an int; otherwise, it is converted to an unsigned int.</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442421388, "post_id": 32613618, "comment_id": 53079003, "body": "@EOF. Thanks for the reference. It makes sense now. I corrected my answer."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1442421473, "post_id": 32613618, "comment_id": 53079064, "body": "The <code>%x</code> in the <code>printf()</code> doesn&#39;t affect the type of the expression used to calculate the argument. Indeed, if the result of the expression is a negative number, the behavior is undefined."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442422132, "post_id": 32613618, "comment_id": 53079435, "body": "@EOF, I see the following in the standard, &quot;Otherwise, if the new type is unsigned, the value is converted by repeatedly adding or subtracting one more than the maximum value that can be represented in the new type until the value is in the range of the new type.&quot; Given that, why should the <code>printf</code> call result in undefined behavior when a negative number is used for the <code>%x</code> format specifier?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1442422924, "post_id": 32613618, "comment_id": 53079906, "body": "Read C11 draft standard, <code>6.5.2.2 Function calls</code>. Long story short, if the function either has no prototype, or is a variadic function (like <code>printf()</code>), the arguments need to match more precisely."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442423575, "post_id": 32613618, "comment_id": 53080290, "body": "@EOF, Makes sense now. Thanks for your patience and helping me learn something new today."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1442423537, "last_edit_date": 1442423537, "creation_date": 1442419588, "answer_id": 32613618, "question_id": 32613418, "link": "https://stackoverflow.com/questions/32613418/unsigned-char-overflow-with-subtraction/32613618#32613618", "title": "Unsigned char overflow with subtraction", "body": "<p><code>a-b</code> in the <code>printf</code> line is evaluated after <code>a</code> and <code>b</code> are promoted to <code>int</code>. Also, the value is being treated as an <code>unsigned int</code> due to the use of <code>%x</code> in the format specifier by your run time environment.</p>\n\n<p>It's equivalent to:</p>\n\n<pre><code>int a1 = a;\nint b1 = b;\nint x = a1 - b1;\nprintf(\"0x%02x 0x%02x 0x%02x\\n\", x, c, minWrap(a,b));\n</code></pre>\n\n<p>Section <strong>6.3.1.8 Usual arithmetic conversions</strong> of the C99 standard has more details.</p>\n\n<p>In theory use of an <code>int</code> when an <code>unsigned int</code> is expected in <code>printf</code> is cause for undefined behavior. A lenient run time environment, like you have, treats the <code>int</code> as an <code>unsigned int</code> and proceeds to print the value.</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442421717, "post_id": 32614141, "comment_id": 53079208, "body": "The <code>printf()</code> is only undefined behavior if the result of the subtraction is negative, since positive signed integers are guaranteed to have the same value as the corresponding unsigned type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442422160, "post_id": 32614141, "comment_id": 53079449, "body": "@EOF  Disagree.  &quot;If a conversion specification is invalid, the behavior is undefined&quot; and &quot;o,u,x,X The <code>unsigned int</code> argument is converted&quot; &#167;7.21.6.1 9 does not include a range exception.  Agree about <code>int</code> positive range fitting in <code>unsigned</code>, but the size of the 2 may differ."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1442422364, "post_id": 32614141, "comment_id": 53079577, "body": "C11 draft standard, <code>6.5.2.2 Function calls, Section 6</code> makes an explicit exemption:  <code>[...]the behavior is undefined, except for the following cases: \u2014 one promoted type is a signed integer type, the other promoted type is the corresponding unsigned integer type, and the value is representable in both types;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442422706, "post_id": 32614141, "comment_id": 53079775, "body": "@EOF Agreed - answer amended.  LSNED"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1442422668, "last_edit_date": 1495540685, "creation_date": 1442421431, "answer_id": 32614141, "question_id": 32613418, "link": "https://stackoverflow.com/questions/32613418/unsigned-char-overflow-with-subtraction/32614141#32614141", "title": "Unsigned char overflow with subtraction", "body": "<blockquote>\n  <p>is it always safe to add/subtract unsigned chars and expect them to wrap around at 0xff?</p>\n</blockquote>\n\n<p>No.  In C, objects of type <code>char</code> go through the <em>usual integer promotions</em>.  So if the range of <code>char</code> fits in <code>int</code> (usual), it is converts to <code>int</code>, else <code>unsigned</code>.  </p>\n\n<p><code>a - b</code> -->  <code>0x01 - 0xFF</code> --> <code>1 - 255</code> --> <code>-254</code>.</p>\n\n<p>The below is undefined behavior as <code>%x</code> does not match an <code>int</code> and the value of -254 is not in the <code>unsigned</code> range (See <a href=\"https://stackoverflow.com/questions/32613418/unsigned-char-overflow-with-subtraction/32614141#comment53079577_32614141\">@EOF</a> comment).  A typical  behavior is a conversion to <code>unsigned</code></p>\n\n<pre><code>printf(\"0x%02x\\n\", a-b);\n// 0xffffff02\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>it safe to compute with <code>uintN_t</code> and expect the result to be modulo 2^N?</p>\n</blockquote>\n\n<p>Yes.  But be sure to make the result of type <code>uintN_t</code> and avoid unexpected <em>usual integer promotions</em>.</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n\nuint8_t a = 0x01, b = 0xff;\nuint8_t diff = a - b;\n\nprintf(\"0x%02x\\n\", (unsigned) diff);\nprintf(\"0x%02\" PRTx8 \"\\n\", diff);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1442422489, "post_id": 32614372, "comment_id": 53079653, "body": "You cut of the important part right before your quote. <code>Otherwise, the integer promotions are performed on both operands. Then the following rules are applied to the promoted operands:[the part you quoted here]</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1442423743, "post_id": 32614372, "comment_id": 53080381, "body": "@EOF  Thanks.  I updated the quote and made some corrections."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1442435288, "post_id": 32614372, "comment_id": 53086820, "body": "You skipped over section 6.3.1.1 (describing the integer promotions), which is the most important for this question -- the conversions in 6.3.1.8 are irrelevant as they don&#39;t apply (the second paragraph in your quote is always true)"}, {"owner": {"reputation": 293, "user_id": 478658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/357dd2bc31ed5785c639b641415c3db5?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/478658/sebastian"}, "edited": false, "score": 0, "creation_date": 1442442514, "post_id": 32614372, "comment_id": 53090041, "body": "I did not know about the <code>%hhx</code>. Thanks"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1442423713, "last_edit_date": 1442423713, "creation_date": 1442422192, "answer_id": 32614372, "question_id": 32613418, "link": "https://stackoverflow.com/questions/32613418/unsigned-char-overflow-with-subtraction/32614372#32614372", "title": "Unsigned char overflow with subtraction", "body": "<p>From 6.3.1.8/1 of the standard concerning integer conversions:</p>\n\n<blockquote>\n  <p>The integer promotions are performed on both operands. Then the following rules are applied to the promoted operands</p>\n  \n  <p>If both operands have the same type, then no further conversion is\n  needed.</p>\n  \n  <p>Otherwise, if both operands have signed integer types or both have\n  unsigned integer types, the operand with the type of lesser integer\n  conversion rank is converted to the type of the operand with greater\n  rank.</p>\n  \n  <p>Otherwise, if the operand that has unsigned integer type has rank\n  greater or equal to the rank of the type of the other operand, then\n  the operand with signed integer type is converted to the type of the\n  operand with unsigned integer type.</p>\n  \n  <p>Otherwise, if the type of the operand with signed integer type can\n  represent all of the values of the type of the operand with unsigned\n  integer type, then the operand with unsigned integer type is converted\n  to the type of the operand with signed integer type.</p>\n  \n  <p>Otherwise, both operands are converted to the unsigned integer type\n  corresponding to the type of the operand with signed integer type.</p>\n</blockquote>\n\n<p>In this case, the wrap-around is well defined.  In the expression <code>a-b</code>, because both operands are of type <code>unsigned char</code>, they are first promoted to <code>int</code> and the operation is performed.  If this value was assigned to an <code>unsigned char</code>, it would be properly truncated.  However, you're passing this value to <code>printf</code> with a <code>%x</code> format specifier which expects an <code>unsigned int</code>.  To display it correctly, use <code>%hhx</code> which expects an <code>unsigned char</code>.</p>\n"}], "owner": {"reputation": 293, "user_id": 478658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/357dd2bc31ed5785c639b641415c3db5?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/478658/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "accepted_answer_id": 32614141, "answer_count": 3, "score": 4, "last_activity_date": 1442423713, "creation_date": 1442419000, "question_id": 32613418, "link": "https://stackoverflow.com/questions/32613418/unsigned-char-overflow-with-subtraction", "title": "Unsigned char overflow with subtraction", "body": "<p>I am trying to work out how unsigned overflow works with subtraction, so I wrote the following test to try it out:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nunsigned char minWrap(unsigned char a, unsigned char b) {\n    return a &gt; b ? a - b : a + (0xff - b) + 1;\n}\n\nint main(int argc, char *argv[]) {\n    unsigned char a = 0x01, b = 0xff;\n    unsigned char c = a - b;\n\n    printf(\"0x%02x 0x%02x 0x%02x\\n\", a-b, c, minWrap(a,b));\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Which gave as output:</p>\n\n<pre><code>0xffffff02 0x02 0x02\n</code></pre>\n\n<p>I would have expected the output to be the same three times. My question is: is it always safe to add/subtract unsigned chars and expect them to wrap around at <code>0xff</code>?</p>\n\n<p>Or more general, is it safe to compute with <code>uintN_t</code> and expect the result to be modulo 2^N?</p>\n"}, {"tags": ["c++", "c", "function"], "comments": [{"owner": {"reputation": 1436, "user_id": 1598979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597e916b9b9aa4cde34763a1cab001d?s=128&d=identicon&r=PG", "display_name": "Kmeixner", "link": "https://stackoverflow.com/users/1598979/kmeixner"}, "edited": false, "score": 0, "creation_date": 1442418503, "post_id": 32613167, "comment_id": 53077054, "body": "Could you paste the exact error you are getting?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1442418542, "post_id": 32613167, "comment_id": 53077089, "body": "Please show the full code."}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "reply_to_user": {"reputation": 1436, "user_id": 1598979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597e916b9b9aa4cde34763a1cab001d?s=128&d=identicon&r=PG", "display_name": "Kmeixner", "link": "https://stackoverflow.com/users/1598979/kmeixner"}, "edited": false, "score": 1, "creation_date": 1442419076, "post_id": 32613167, "comment_id": 53077477, "body": "@Kmeixner 125\t8\tC:\\Users\\Unit ICT PPDHL\\Desktop\\New folder\\chawan.c\t[Error] conflicting types for &#39;calculatePrice&#39;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419181, "post_id": 32613167, "comment_id": 53077528, "body": "Declare function <code>double calculatePrice(char cust)</code> before using it to get rid of &quot;conflicting types for &#39;calculatePrice&#39;&quot;"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1442419355, "post_id": 32613167, "comment_id": 53077666, "body": "<code>scanf(&quot;%s&quot;, &amp;m[counter]-&gt;Mname);</code> is very unlikely to be correct, and <code>(strcmp(code, &quot;C2&quot;)) || (strcmp(code, &quot;C3&quot;)) || (strcmp(code, &quot;C5&quot;))</code> is 0 only if <code>code</code> is equal to all three strings at once."}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419402, "post_id": 32613167, "comment_id": 53077697, "body": "@chux did u mean to declare that function out of the main?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442419610, "post_id": 32613167, "comment_id": 53077829, "body": "You have not posted the full code, is there a function prototype? If not it&#39;s a &quot;forward reference&quot; and the compiler will make assumptions which in this case (there is a <code>double</code>) will be incorrect."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419611, "post_id": 32613167, "comment_id": 53077833, "body": "Yes, declare (or define) the function <i>before</i> <code>main()</code>."}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419887, "post_id": 32613167, "comment_id": 53078006, "body": "@chux owwwhhhh yess! it&#39;s working. thank you so much!! xDD"}], "answers": [{"comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1442419070, "post_id": 32613293, "comment_id": 53077475, "body": "The error you mention would cause undefined behavior, but why would it cause the (presumably) compiler error the OP complains about? If this is C (and not C++, based on <code>struct data</code>), the code should still compile even with this error."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1442419297, "post_id": 32613293, "comment_id": 53077623, "body": "@R_Kapp the latest compilers compare format type with argument?"}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "edited": false, "score": 0, "creation_date": 1442419312, "post_id": 32613293, "comment_id": 53077635, "body": "@WeatherVane it still has an error eventhough i changed the &quot;%s&quot; to &quot; %c&quot;. :(("}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1442419375, "post_id": 32613293, "comment_id": 53077676, "body": "C isn&#39;t strongly typed, though... even if the comparison is made, my understanding is that you&#39;d get a compiler warning, and not an error."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419387, "post_id": 32613293, "comment_id": 53077685, "body": "Perhaps you have several errors. See @chux comment above."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1442419014, "last_edit_date": 1442419014, "creation_date": 1442418585, "answer_id": 32613293, "question_id": 32613167, "link": "https://stackoverflow.com/questions/32613167/error-conflicting-types-for-function-calculateprice/32613293#32613293", "title": "Error conflicting types for function calculatePrice", "body": "<p>In that function <code>calculatePrice</code></p>\n\n<pre><code>printf(\"Enter size of cup : \");\nscanf(\"%s\", size);\n\nprintf(\"Enter topping : \");\nscanf(\"%s\", top);\n</code></pre>\n\n<p>are asking for string input, but the target type is <code>char</code>.</p>\n\n<p>Should be</p>\n\n<pre><code>printf(\"Enter size of cup : \");\nscanf(\" %c\", &amp;size);\n\nprintf(\"Enter topping : \");\nscanf(\" %c\", &amp;top);\n</code></pre>\n\n<p>Notice the space before <code>%c</code> which will clean off whitespace left after the previous input.</p>\n\n<p>Also please be aware that <code>char code[4]</code> can only accept 3 characters. It's a dangerous way to do things as you don't restrict the input length.</p>\n"}], "owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442419014, "creation_date": 1442418227, "question_id": 32613167, "link": "https://stackoverflow.com/questions/32613167/error-conflicting-types-for-function-calculateprice", "title": "Error conflicting types for function calculatePrice", "body": "<p>I wrote this coding, then it said that there is an error about [Error] conflicting types for 'calculatePrice'.  I dont know why it appeared to be an error. Can anyone please help me to correct this error? :((</p>\n\n<pre><code>void Add(struct data* m[])//, struct data* s)\n{\n    char cust, choice1, choice2;\n    int i, counter = 0;\n    double totPrice = 0.00;\n\n\n    do\n    {           \n        printf(\"Member(M) / Student(S) / Regular Customer(R)?\");\n        scanf(\"%c\", &amp;cust);\n\n        printf(\"Enter name: \");\n        scanf(\"%s\", &amp;m[counter]-&gt;Mname);\n\n        printf(\"Enter phone number : \");\n        scanf(\"%s\", &amp;m[counter]-&gt;MphoneNum);\n\n        printf(\"Enter id : \");\n        scanf(\"%s\", &amp;m[counter]-&gt;Mid);\n\n        printf(\"Enter address\");\n        scanf(\"%s\", &amp;m[counter]-&gt;Maddress);\n\n        printf(\"Enter e-mail : \");\n        scanf(\"%s\", &amp;m[counter]-&gt;mail);\n\n        do\n        {\n        /*  totPrice +=*/ calculatePrice(cust);\n\n            printf(\"Wanna add another order?\");\n            scanf(\"%s\", choice1);\n        }           \n        while(choice1 == 'Y');\n\n\n        counter++;\n        m[counter]-&gt;payment = totPrice;\n\n        printf(\"Wanna add another customer?\");\n        scanf(\"%s\", choice2);\n    }\n\n    while(choice2 == 'Y');  \n}\n\ndouble calculatePrice(char cust)\n{\n    char code[4], size, top;\n    double discount, drPrice, topPrice, price;\n\n    if(cust == 'M')\n    //searchMember(&amp;m, &amp;s); \n        discount = 0.8;         \n\n    else if(cust == 'S')\n        discount = 0.85;\n\n    else if(cust == 'R')\n        discount = 0.0;\n\n\n    printf(\"Enter the order's code :\");\n    scanf(\"%s\", code);\n\n    printf(\"Enter size of cup : \");\n    scanf(\"%s\", size);\n\n    printf(\"Enter topping : \");\n    scanf(\"%s\", top);\n\n    if((strcmp(code, \"T1\")) || (strcmp(code, \"T2\")) || (strcmp(code, \"T3\")) ||(strcmp(code, \"T4\")) || (strcmp(code, \"T5\")) == 0)\n    {\n        if(size == 'R')\n            drPrice = 4.90;\n        else\n            drPrice = 5.90;\n    }\n\n    else if((strcmp(code, \"CH1\")) || (strcmp(code, \"CH2\")) || (strcmp(code, \"CH3\")) || (strcmp(code, \"CH4\")) || (strcmp(code, \"CH5\")) == 0)\n    {\n        if(size == 'R')\n            drPrice = 6.90;\n        else\n            drPrice = 7.90;\n    }\n\n    else if((strcmp(code, \"C2\")) || (strcmp(code, \"C3\")) || (strcmp(code, \"C5\")) == 0)\n        drPrice = 5.90;     \n\n    else if((strcmp(code, \"S1\")) || (strcmp(code, \"S2\")) || (strcmp(code, \"S5\")) || (strcmp(code, \"S7\")) || (strcmp(code, \"S9\")) == 0)\n        drPrice = 6.90;\n\n    else if((strcmp(code, \"S3\")) || (strcmp(code, \"S4\")) || (strcmp(code, \"S6\")) || (strcmp(code, \"S8\")) || (strcmp(code, \"S10\")) || (strcmp(code, \"S11\")) == 0)\n        drPrice = 5.90; //check harga balik\n\n    else if((strcmp(code, \"C1\")) == 0)\n        drPrice = 3.90;\n\n    else if((strcmp(code, \"C4\")) == 0)\n        drPrice = 4.90;\n\n    if(top == 'B' || top == 'G' || top == 'J' || top == 'P' || top == 'A')\n        topPrice = 0.60;\n\n    else if(top == 'X')\n        topPrice = 0.00;\n\n    price = discount * (topPrice + drPrice);\n\n    return price; //return value\n}\n</code></pre>\n"}, {"tags": ["c", "executable", "aix", "objdump", "nm"], "comments": [{"owner": {"reputation": 328, "user_id": 4844822, "user_type": "registered", "profile_image": "https://graph.facebook.com/459123704243311/picture?type=large", "display_name": "Zsigmond L\u0151rinczy", "link": "https://stackoverflow.com/users/4844822/zsigmond-l%c5%91rinczy"}, "edited": false, "score": 0, "creation_date": 1442430069, "post_id": 32613162, "comment_id": 53083929, "body": "What do you mean by &#39;version of a .c&#39; file?"}, {"owner": {"reputation": 15, "user_id": 5343043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292128732f639c4910128821d105f9f4?s=128&d=identicon&r=PG&f=1", "display_name": "E\u017eekiel", "link": "https://stackoverflow.com/users/5343043/e%c5%beekiel"}, "reply_to_user": {"reputation": 328, "user_id": 4844822, "user_type": "registered", "profile_image": "https://graph.facebook.com/459123704243311/picture?type=large", "display_name": "Zsigmond L\u0151rinczy", "link": "https://stackoverflow.com/users/4844822/zsigmond-l%c5%91rinczy"}, "edited": false, "score": 0, "creation_date": 1442474980, "post_id": 32613162, "comment_id": 53099421, "body": "With SVN when I have compiled my version of the executable, I want to recover the versions of .c files linked in the executable."}, {"owner": {"reputation": 328, "user_id": 4844822, "user_type": "registered", "profile_image": "https://graph.facebook.com/459123704243311/picture?type=large", "display_name": "Zsigmond L\u0151rinczy", "link": "https://stackoverflow.com/users/4844822/zsigmond-l%c5%91rinczy"}, "edited": false, "score": 0, "creation_date": 1442507390, "post_id": 32613162, "comment_id": 53119516, "body": "Neither the compiler nor the linker knows or cares about SVN versions (the same goes for RCS/CVS)"}, {"owner": {"reputation": 15, "user_id": 5343043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292128732f639c4910128821d105f9f4?s=128&d=identicon&r=PG&f=1", "display_name": "E\u017eekiel", "link": "https://stackoverflow.com/users/5343043/e%c5%beekiel"}, "reply_to_user": {"reputation": 328, "user_id": 4844822, "user_type": "registered", "profile_image": "https://graph.facebook.com/459123704243311/picture?type=large", "display_name": "Zsigmond L\u0151rinczy", "link": "https://stackoverflow.com/users/4844822/zsigmond-l%c5%91rinczy"}, "edited": false, "score": 0, "creation_date": 1442567414, "post_id": 32613162, "comment_id": 53143518, "body": "I know, but I wanted to say that the number of the file&#39;s version (it&#39;s linked to SVN then) will be written inside of the .c file. You may be see what I mean now ^^"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442648081, "post_id": 32613162, "comment_id": 53177027, "body": "define a char array with the contents of the $version variable"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1504947321, "post_id": 32613162, "comment_id": 79220092, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16546846/what-is-the-equivalent-command-for-objdump-in-ibm-aix\">What is the equivalent command for objdump in IBM AIX</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442648226, "post_id": 32613257, "comment_id": 53177075, "body": "The configuration control system, like SVN, will still have the original source available as a specific version.  if that version is available within the object/executable file, then it is easy to go to SVN and request that specific version."}], "tags": [], "owner": {"reputation": 1571, "user_id": 1860750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313da918b5362c6b85e1c78bd40a98db?s=128&d=identicon&r=PG", "display_name": "Ram Rajamony", "link": "https://stackoverflow.com/users/1860750/ram-rajamony"}, "is_accepted": false, "score": 0, "last_activity_date": 1442419156, "last_edit_date": 1495540308, "creation_date": 1442418500, "answer_id": 32613257, "question_id": 32613162, "link": "https://stackoverflow.com/questions/32613162/how-to-see-executable-content-under-aix/32613257#32613257", "title": "How to see executable content under AIX", "body": "<p>You cannot get source back from a compiled executable. There is a variety of information you can get from it though. For instance, you can get the size of the <code>data</code>, <code>bss</code>, and <code>text</code> sections (through the <code>size</code>) command. You can also install the Linux utils for AIX which will give you more tools that can shed light on your executable (see <a href=\"https://stackoverflow.com/questions/16546846/what-is-the-equivalent-command-for-objdump-in-ibm-aix\">What is the equivalent command for objdump in IBM AIX</a>). Recent AIX binaries are in a format called XCOFF64 or XCOFF32 (both have good articles on wikipedia).</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 0, "last_activity_date": 1442423081, "creation_date": 1442423081, "answer_id": 32614630, "question_id": 32613162, "link": "https://stackoverflow.com/questions/32613162/how-to-see-executable-content-under-aix/32614630#32614630", "title": "How to see executable content under AIX", "body": "<p>It sounds like you're describing the <strong>what</strong>(1) and <strong>ident</strong>(1) commands, used to find file versions embedded as strings in an executable.</p>\n\n<p>Those strings, containing <code>@(#)</code> or <code>$Id</code>, were inserted into source code files by the version control systems, SCCS and RCS, of olden times.</p>\n"}, {"comments": [{"owner": {"reputation": 328, "user_id": 4844822, "user_type": "registered", "profile_image": "https://graph.facebook.com/459123704243311/picture?type=large", "display_name": "Zsigmond L\u0151rinczy", "link": "https://stackoverflow.com/users/4844822/zsigmond-l%c5%91rinczy"}, "edited": false, "score": 0, "creation_date": 1442686269, "post_id": 32648295, "comment_id": 53188848, "body": "(Hopefully you won&#39;t forget updating this &quot;comment&quot; in your files. I know I would.)"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1442692133, "post_id": 32648295, "comment_id": 53190699, "body": "You can parse the executable with <code>strings my_exe_file</code>"}, {"owner": {"reputation": 15, "user_id": 5343043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292128732f639c4910128821d105f9f4?s=128&d=identicon&r=PG&f=1", "display_name": "E\u017eekiel", "link": "https://stackoverflow.com/users/5343043/e%c5%beekiel"}, "edited": false, "score": 0, "creation_date": 1442820082, "post_id": 32648295, "comment_id": 53222655, "body": "Walter A, I tried but the last line who contains the commentary isn&#39;t recognized as a &quot;string&quot; and it does not works, I already tried ^^ then I put symbols at the begining and the end, I cat -v , tr the symbol as &#39;\\n&#39;, grep the lines with the pattern &quot;VERSION_OF&quot; (it&#39;s always written in the comment). That&#39;s how I proceed."}], "tags": [], "owner": {"reputation": 15, "user_id": 5343043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292128732f639c4910128821d105f9f4?s=128&d=identicon&r=PG&f=1", "display_name": "E\u017eekiel", "link": "https://stackoverflow.com/users/5343043/e%c5%beekiel"}, "is_accepted": true, "score": 0, "last_activity_date": 1442567813, "creation_date": 1442567813, "answer_id": 32648295, "question_id": 32613162, "link": "https://stackoverflow.com/questions/32613162/how-to-see-executable-content-under-aix/32648295#32648295", "title": "How to see executable content under AIX", "body": "<p>I've found a way to do what I wanted to. Using the '#pragma comment(user, \"comment\")' line (I didn't knew this one) it writes at compilation and link this \"comment\" in the end of the binary file, so I include this line on each .c file. With a the parsing of the executable, I'm able to recover the versions of each files with only the binary.</p>\n\n<p>Thanks for your help again and your time :) .</p>\n"}], "owner": {"reputation": 15, "user_id": 5343043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292128732f639c4910128821d105f9f4?s=128&d=identicon&r=PG&f=1", "display_name": "E\u017eekiel", "link": "https://stackoverflow.com/users/5343043/e%c5%beekiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 899, "favorite_count": 0, "accepted_answer_id": 32648295, "answer_count": 3, "score": 0, "last_activity_date": 1442567813, "creation_date": 1442418213, "question_id": 32613162, "link": "https://stackoverflow.com/questions/32613162/how-to-see-executable-content-under-aix", "title": "How to see executable content under AIX", "body": "<p>I have a question about executables and C.</p>\n\n<p>If you had to know the content (the version of each .c file written in a commentary) of an executable BUT you just have the executable, you don't have the sources. How do you proceed ? </p>\n\n<p>I've seen the \"nm\" command, cuting what I want with \"cut\" I can have in output the .c files but I can't read the versions inside because I don't have the source files.\nI've also seen the \"objdump\" command but I can't try it under AIX (of course ...) is there an equivalent? Is this possible with objdump to know what I want to?</p>\n\n<p>Thx for your help and attention :)</p>\n"}, {"tags": ["c", "function", "variables", "gcc"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 4, "creation_date": 1442418273, "post_id": 32612998, "comment_id": 53076896, "body": "your <code>substr</code> returns freed memory -&gt; that&#39;s undefined behaviour"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442418607, "post_id": 32612998, "comment_id": 53077148, "body": "Note: <code>void strtoarr(...</code> <code>unsigned char output[128]</code> is equivalent to <code>unsigned char * output</code>, <code>output</code> is a pointer not an array. Same for <code>input</code> in <code>substr(...</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "edited": false, "score": 0, "creation_date": 1442419880, "post_id": 32613474, "comment_id": 53078002, "body": "So in the caller function I did a free(strFirst) and free(strLast) before the return 0 part and removed the free(result); from the substr function. That worked! Thank you!"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 1, "creation_date": 1442420067, "post_id": 32613474, "comment_id": 53078144, "body": "Rule of thumb: for every alloc there should be a free. Where you handle that, that&#39;s up to you."}], "tags": [], "owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "is_accepted": true, "score": 2, "last_activity_date": 1442464579, "last_edit_date": 1442464579, "creation_date": 1442419142, "answer_id": 32613474, "question_id": 32612998, "link": "https://stackoverflow.com/questions/32612998/gcc-why-does-two-different-variables-have-the-same-value-after-call/32613474#32613474", "title": "gcc: Why does two different variables have the same value after call?", "body": "<p>Returning a pointer to freed memory (then reading from said memory) is undefined behaviour.</p>\n\n<p>Change your <code>substr</code> to not free the memory:</p>\n\n<pre><code>char* substr(unsigned char input[128], int start_pos, int num_chars) {\n    char* result = calloc(num_chars + 1, sizeof(char));\n\n    strncpy(result, (char*)input + start_pos, num_chars);\n\n    return result;\n}\n</code></pre>\n\n<p>Remember to <code>free</code> this memory on the caller level.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1442419177, "creation_date": 1442419177, "answer_id": 32613489, "question_id": 32612998, "link": "https://stackoverflow.com/questions/32612998/gcc-why-does-two-different-variables-have-the-same-value-after-call/32613489#32613489", "title": "gcc: Why does two different variables have the same value after call?", "body": "<p>In your <code>substr</code> function, you alloc some memory and copy data in it which is fine. But then you <strong>free</strong> it and return a pointer to freed memory. From that on, using that pointer is undefined behaviour!</p>\n\n<p>What happens under the hood <em>for your implementation and in that context</em> is that the same pointer value is returned by both calls to malloc, what explains that both pointers show same last value. But you could also could have got an error or any other display.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 32613474, "answer_count": 2, "score": 0, "last_activity_date": 1442464579, "creation_date": 1442417733, "last_edit_date": 1442418113, "question_id": 32612998, "link": "https://stackoverflow.com/questions/32612998/gcc-why-does-two-different-variables-have-the-same-value-after-call", "title": "gcc: Why does two different variables have the same value after call?", "body": "<p>I'm wondering how I can fix this. I admit I'm not that great at C to begin with. I've commented the code below to show what is happening. If I make the function call, then print out the values immediately after each function call, then the results are correct. But, if I print out the values after doing <em>all</em> the function calls, it only prints out the <em>last</em> value for <em>both</em> variables! </p>\n\n<p>Why is it doing this and how to I fix it?</p>\n\n<p>NOTE: I'm doing this in Linux using gcc version 4.9.2 (Debian 4.9.2-10)</p>\n\n<pre><code>/* Get first/last of string */\n\n#include  &lt;stdlib.h&gt;\n#include  &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid strtoarr(unsigned char *input, int len, unsigned char output[128]);\nchar* substr(unsigned char input[128], int start_pos, int num_chars);\n\nint main(void)\n{\n\n    unsigned char myArr[128];\n    unsigned char *myStr = (unsigned char*)\"79356e39486a556e576d6c3279443267516834376137333131387246474b3137\";\n    char *strFirst;\n    char *strLast;\n\n    /* For the project I'm working on, I'm going to need this as an array of characters anyway. */\n    strtoarr(myStr, 64, myArr);\n    printf(\"Original String: %s\\n\", myArr);\n\n    printf(\"\\n\");\n\n    /* If I print the string after each call, it works.\n       Prints out:\n       Try 1 First 32: 79356e39486a556e576d6c3279443267\n       Try 1 Last 32: 516834376137333131387246474b3137\n     */\n    strFirst = substr(myArr, 0, 32);\n    printf(\"Try 1 First 32: %s\\n\", strFirst);\n    strLast = substr(myArr, 32, 32);\n    printf(\"Try 1 Last 32: %s\\n\", strLast);\n\n    printf(\"\\n\");\n\n    /* FIXME: Why does it print the exact same thing if I print out after both calls?\n       Prints out:\n       Try 2 First 32: 516834376137333131387246474b3137\n       Try 2 Last 32: 516834376137333131387246474b3137\n     */\n    strFirst = substr(myArr, 0, 32);\n    strLast = substr(myArr, 32, 32);\n    printf(\"Try 2 First 32: %s\\n\", strFirst);\n    printf(\"Try 2 Last 32: %s\\n\", strLast);\n\n    return 0;\n}\n\nchar* substr(unsigned char input[128], int start_pos, int num_chars) {\n    char *result = calloc(num_chars * 2 + 1, sizeof(char*));\n    int i;\n\n    for(i = start_pos; i &lt; (num_chars + start_pos); i++) {\n        result[i - start_pos] = input[i];\n    }\n    result[(i - start_pos) + 1] = '\\0';\n    free(result);\n\n    return result;\n}\n\n\n/* Convert string to array of characters */\nvoid strtoarr(unsigned char *input, int len, unsigned char output[128]) {\n    int i;\n\n    for(i = 0; i &lt; len + 1; i++) {\n        output[i] = input[i];\n    }\n    output[i + 1] = '\\0';\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management", "intel", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 7, "creation_date": 1442418520, "post_id": 32612881, "comment_id": 53077068, "body": "@alk There&#39;s no reason to be rude. If the answer is obvious to you then please explain."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1442418764, "post_id": 32612881, "comment_id": 53077260, "body": "It might sound rude, it isn&#39;t meant this way. It is a question, probably a bit sarcastic."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1442418881, "post_id": 32612881, "comment_id": 53077344, "body": "Perhaps I should have better asked why you think the document does not answer your question.... ;-)"}, {"owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1442419254, "post_id": 32612881, "comment_id": 53077583, "body": "@alk Hmmm... I&#39;m just not seeing an answer in the linked doc... if it&#39;s there either my eyes or brain have fallen out of my head today (or both). Wait, did you read this whole question? Especially the last paragraph?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442419784, "post_id": 32612881, "comment_id": 53077941, "body": "I&#39;d go for &quot;<i>performance</i>&quot;."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1442420897, "post_id": 32612881, "comment_id": 53078671, "body": "But you are right, the document does not answer your question. Please excuse my imputation. However the interesting part is the one about the functions accessing the &quot;scalable&quot;  memory pools, which use the same signature as the <code>_mm_*()</code> functions."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1552033152, "post_id": 32613183, "comment_id": 96866754, "body": "If anything probably the opposite: <code>_mm_malloc</code> <i>could</i> work by over-allocating and leaving metadata before the memory it returns, making it incompatible with <code>free</code> when the standard allocator isn&#39;t overalignment-capable. <code>posix_memalign</code> is compatible with <code>free</code> so it can&#39;t do that. <a href=\"http://man7.org/linux/man-pages/man3/posix_memalign.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/posix_memalign.3.html</a> shows that on GNU/Linux, all the aligned-alloc functions are compatible with <code>free</code>.  The obsolete <code>memalign</code> <i>doesn&#39;t</i> provide any guaranteed-safe way to free the resulting memory, and did on some systems over-alloc and align without saving the pointer."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1552033463, "post_id": 32613183, "comment_id": 96866883, "body": "In glibc, <code>_mm_malloc</code> is literally defined as a wrapper around <code>posix_memalign</code> (or <code>malloc</code> for <code>alignment==1</code>).  But yes your general argument is true that not being free-compatible is a result of having to do something special on old systems.  Or even on modern Windows aligned allocation functions still aren&#39;t compatible with free or delete, and do actually crash."}], "tags": [], "owner": {"reputation": 362, "user_id": 3284729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ca8976e38c941cb7aeb76eed52ec80f?s=128&d=identicon&r=PG", "display_name": "Thief", "link": "https://stackoverflow.com/users/3284729/thief"}, "is_accepted": false, "score": 4, "last_activity_date": 1442418267, "creation_date": 1442418267, "answer_id": 32613183, "question_id": 32612881, "link": "https://stackoverflow.com/questions/32612881/why-use-mm-malloc-as-opposed-to-aligned-malloc-alligned-alloc-or-posix-mem/32613183#32613183", "title": "Why use _mm_malloc? (as opposed to _aligned_malloc, alligned_alloc, or posix_memalign)", "body": "<p>_mm_malloc seems to have been created before there was a standard aligned_alloc function, and the need to use _mm_free is a quirk of the implementation.</p>\n\n<p>My guess is that unlike when using posix_memalign, it doesn't need to over-allocate in order to guarantee alignment, instead it uses a separate alignment-aware allocator. This will save memory when allocating types with alignment different to the default alignment (typically 8 or 16 bytes).</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 6, "last_activity_date": 1442419088, "creation_date": 1442419088, "answer_id": 32613448, "question_id": 32612881, "link": "https://stackoverflow.com/questions/32612881/why-use-mm-malloc-as-opposed-to-aligned-malloc-alligned-alloc-or-posix-mem/32613448#32613448", "title": "Why use _mm_malloc? (as opposed to _aligned_malloc, alligned_alloc, or posix_memalign)", "body": "<p>It's possible to take an existing C compiler which does not presently happen to use the identifiers <code>_mm_alloc</code> and <code>_mm_free</code> and define functions with those names which will behave as required.  This could be done either by having <code>_mm_alloc</code> function as a wrapper on <code>malloc()</code> which asks for a slightly-oversized allocation and constructs a pointer to the first suitably-aligned address within it that's at least one byte from the beginning, and storing the number of bytes skipped immediately before that address, or by having <code>_mm_malloc</code> request large chunks of memory from <code>malloc()</code> and then dispense them piecemeal.  In any case, the pointers returned by <code>_mm_malloc()</code> would not be pointers that <code>free()</code> would generally know how to do anything with; calling <code>_mm_free</code> would use the byte immediately preceding the allocation as an aid to finding the real start of the allocation received from <code>malloc</code>, and then pass that do <code>free</code>.</p>\n\n<p>If an aligned-allocate function is allowed to use the internals of the <code>malloc</code> and <code>free</code> functions, however, that may eliminate the need for the extra layer of wrapping.  It's possible to write <code>_mm_alloc()</code>/<code>_mm_free()</code> functions which wraps <code>malloc</code>/<code>free</code> without knowing anything about their internals, but it requires that <code>_mm_alloc()</code> keep book-keeping information which is separate from that used by <code>malloc</code>/<code>free</code>.</p>\n\n<p>If the author of an aligned-allocate function knows how <code>malloc</code> and <code>free</code> are implemented, it will often be possible to coordinate the design of all the allocation/free functions so that <code>free</code> can distinguish all kinds of allocations and handle them appropriately.  No single aligned-allocate implementation would be usable on all <code>malloc</code>/<code>free</code> implementations, however.</p>\n\n<p>I would suggest that the most portable way to write code would probably be to select a couple of symbols that are not used anywhere else for your own allocate and free functions, so that you could then say, e.g.</p>\n\n<pre><code>#define a_alloc(align,sz) _mm_alloc((align),(sz))\n#define a_free(ptr)  _mm_free((ptr))\n</code></pre>\n\n<p>on compilers that support that, or</p>\n\n<pre><code>static inline void *aa_alloc(int align, int size)\n{\n  void *ret=0;\n  posix_memalign(&amp;ret, align, size); // Guessing here\n  return ret;\n}\n#define a_alloc(align,sz) aa_alloc((align),(sz))\n#define a_free(ptr)  free((ptr))\n</code></pre>\n\n<p>on Posix systems, etc.  For every system it should be possible to define macros or functions that will yield the necessary behavior [I think it's probably better to use macros consistently than to sometimes use macros and sometimes functions, so as to allow <code>#if defined macroname</code> to test whether things are defined yet].</p>\n"}, {"comments": [{"owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "edited": false, "score": 2, "creation_date": 1442761490, "post_id": 32675324, "comment_id": 53206098, "body": "Oh, huh, that is in fact very simple and makes perfect sense! It&#39;s easy to get myopic about your own operating system and not realize these things."}], "tags": [], "owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "is_accepted": true, "score": 30, "last_activity_date": 1527616827, "last_edit_date": 1527616827, "creation_date": 1442718018, "answer_id": 32675324, "question_id": 32612881, "link": "https://stackoverflow.com/questions/32612881/why-use-mm-malloc-as-opposed-to-aligned-malloc-alligned-alloc-or-posix-mem/32675324#32675324", "title": "Why use _mm_malloc? (as opposed to _aligned_malloc, alligned_alloc, or posix_memalign)", "body": "<p>Intel compilers support POSIX (Linux) and non-POSIX (Windows) operating systems, hence cannot rely upon either the POSIX or the Windows function. Thus, a compiler-specific but OS-agnostic solution was chosen. </p>\n\n<p>C11 is a great solution but Microsoft doesn't even support C99 yet, so who knows if they will ever support C11. </p>\n\n<p><strong>Update:</strong> Unlike the C11/POSIX/Windows allocation functions, the ICC intrinsics include a deallocation function.  This allows this API to use a separate heap manager from the default one.  I don't know if/when it actually does that, but it can be useful to support this model.</p>\n\n<p><em>Disclaimer: I work for Intel but have no special knowledge of these decisions, which happened long before I joined the company.</em> </p>\n"}], "owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23644, "favorite_count": 8, "accepted_answer_id": 32675324, "answer_count": 3, "score": 37, "last_activity_date": 1527616827, "creation_date": 1442417416, "last_edit_date": 1442418215, "question_id": 32612881, "link": "https://stackoverflow.com/questions/32612881/why-use-mm-malloc-as-opposed-to-aligned-malloc-alligned-alloc-or-posix-mem", "title": "Why use _mm_malloc? (as opposed to _aligned_malloc, alligned_alloc, or posix_memalign)", "body": "<p>There are a few options for acquiring an aligned block of memory but they're very similar and the issue mostly boils down to what language standard and platforms you're targeting.</p>\n\n<p>C11</p>\n\n<pre><code>void * aligned_alloc (size_t alignment, size_t size)\n</code></pre>\n\n<p>POSIX</p>\n\n<pre><code>int posix_memalign (void **memptr, size_t alignment, size_t size)\n</code></pre>\n\n<p>Windows</p>\n\n<pre><code>void * _aligned_malloc(size_t size, size_t alignment);\n</code></pre>\n\n<p>And of course it's also always an option to align by hand.</p>\n\n<p>Intel offers another option.</p>\n\n<p>Intel</p>\n\n<pre><code>void* _mm_malloc (int size, int align)\nvoid _mm_free (void *p)\n</code></pre>\n\n<p>Based on source code released by Intel, this seems to be the method of allocating aligned memory their engineers prefer but I can't find any documentation comparing it to other methods. The closest I found simply acknowledges that other aligned memory allocation routines exist.</p>\n\n<p><a href=\"https://software.intel.com/en-us/articles/memory-management-for-optimal-performance-on-intel-xeon-phi-coprocessor-alignment-and\" rel=\"noreferrer\">https://software.intel.com/en-us/articles/memory-management-for-optimal-performance-on-intel-xeon-phi-coprocessor-alignment-and</a></p>\n\n<blockquote>\n  <p>To dynamically allocate a piece of aligned memory, use posix_memalign,\n  which is supported by GCC as well as the Intel Compiler. The benefit\n  of using it is that you don\u2019t have to change the memory disposal API.\n  You can use free() as you always do. But pay attention to the\n  parameter profile:</p>\n  \n  <p>\u2003\u2003int posix_memalign (void **memptr, size_t align, size_t size);</p>\n  \n  <p>The Intel Compiler also provides another set of memory allocation\n  APIs. C/C++ programmers can use _mm_malloc and _mm_free to allocate\n  and free aligned blocks of memory. For example, the following\n  statement requests a 64-byte aligned memory block for 8 floating point\n  elements.</p>\n  \n  <p>\u2003\u2003farray = (float *)__mm_malloc(8*sizeof(float), 64);</p>\n  \n  <p>Memory that is allocated using _mm_malloc must be freed using\n  _mm_free. Calling free on memory allocated with _mm_malloc or calling _mm_free on memory allocated with malloc will result in unpredictable behavior.</p>\n</blockquote>\n\n<p>The clear differences from a user perspective is that <code>_mm_malloc</code> requires direct CPU and compiler support and memory allocated with <code>_mm_malloc</code> must be freed with <code>_mm_free</code>. Given these drawbacks, what is the reason for ever using <code>_mm_malloc?</code> Can it have a slight performance advantage? Historical accident?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 5, "creation_date": 1442416052, "post_id": 32612380, "comment_id": 53075455, "body": "What &quot;doesn&#39;t work&quot;?  You need to provide a lot more information."}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1442416205, "post_id": 32612380, "comment_id": 53075556, "body": "What is <code>func</code>? You only show a declaration."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1442416715, "post_id": 32612380, "comment_id": 53075895, "body": "<code>arr</code> is an array, not a pointer."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1442427374, "post_id": 32612380, "comment_id": 53082464, "body": "The rule is that an &quot;N-element array of <code>T</code>&quot; decays to a &quot;pointer to <code>T</code>&quot;; <code>arr</code> has type &quot;5-element array of 3-element array of <code>char</code>&quot;, so in this case <code>T</code> is &quot;3-element array of <code>char</code>&quot;.  Thus, <code>arr</code> decays from <code>char [5][3]</code> to <code>char (*)[3]</code>.  So your <code>func</code> prototype needs to be <code>void func( char (*arr)[3] )</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": false, "score": 3, "last_activity_date": 1442416789, "last_edit_date": 1442416789, "creation_date": 1442416332, "answer_id": 32612516, "question_id": 32612380, "link": "https://stackoverflow.com/questions/32612380/usage-of-pointer-in-c-programming/32612516#32612516", "title": "Usage of pointer in C programming", "body": "<p>The major issue is that arrays are <strong>not</strong> the same as pointers. Syntactically, you can use them in a very similar manner within a function, but they are not the same. As such, what you are passing in <code>func(arr)</code> is a variable of type <code>char (*)[3]</code>, or a pointer to an array of 3 <code>char</code>s, and not a pointer to a pointer, which is what <code>func</code> expects.</p>\n"}], "owner": {"reputation": 37, "user_id": 4899382, "user_type": "registered", "profile_image": "https://graph.facebook.com/1633412430215956/picture?type=large", "display_name": "Yuuki Priscilla", "link": "https://stackoverflow.com/users/4899382/yuuki-priscilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1442417487, "answer_count": 1, "score": 0, "last_activity_date": 1442419977, "creation_date": 1442416014, "last_edit_date": 1442419977, "question_id": 32612380, "link": "https://stackoverflow.com/questions/32612380/usage-of-pointer-in-c-programming", "closed_reason": "Not suitable for this site", "title": "Usage of pointer in C programming", "body": "<p>I am encountering a difficulty in trying to understand the usage of pointers in C programming. I do not understand why this doesn't compile:</p>\n\n<pre><code>void func(char**p);\nvoid other_fun(void)\n{\n    char arr[5][3];\n    func(arr);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442417161, "post_id": 32612369, "comment_id": 53076209, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5845686/malloc-ating-multidimensional-array-in-function\">malloc-ating multidimensional array in function</a>"}], "answers": [{"comments": [{"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442417645, "post_id": 32612540, "comment_id": 53076496, "body": "Thanks. <b>array = malloc(2*sizeof(char*));</b> this is what I did in create now. Is it correct."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1442418880, "post_id": 32612540, "comment_id": 53077343, "body": "@LeFlou  You forgot  space  for <code>Null character</code> in <code>malloc</code> . It can cause <b>UB</b>."}], "tags": [], "owner": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "is_accepted": false, "score": 0, "last_activity_date": 1442416385, "creation_date": 1442416385, "answer_id": 32612540, "question_id": 32612369, "link": "https://stackoverflow.com/questions/32612369/need-help-in-understanding-passing-char-to-function/32612540#32612540", "title": "need help in understanding passing char* [] to function", "body": "<p>You allocate two arrays (<code>char*</code>) to store the strings \"hello\" and \"dear\" but does not allocate the array (<code>char**</code>) containing those two string array.</p>\n"}, {"comments": [{"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442417519, "post_id": 32612574, "comment_id": 53076417, "body": "Thanks. I do not know the size in main so cannot give it there. I get what you are saying about passing pointer but is not pointer what I am passing? I understand that I am passing address to first location."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442417646, "post_id": 32612574, "comment_id": 53076498, "body": "@Jardanian Why don&#39;t you know the size? Viewing your code it seems you do know it as the <code>for</code> loop will definitely loop twice."}, {"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442417974, "post_id": 32612574, "comment_id": 53076692, "body": "This is just a sample code which I prepared to show what I need. Actual code is bigger."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1442418022, "post_id": 32612574, "comment_id": 53076726, "body": "You forgot to allocate space for the NUL-terminator."}, {"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442418053, "post_id": 32612574, "comment_id": 53076749, "body": "From the calling function I&#39;ll pass the list and an pointer to integer which will be updated with the size."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442418482, "post_id": 32612574, "comment_id": 53077038, "body": "@Jardanian Then I recommend posting the real code. How exactly do you read the strings? This is important as it&#39;s tightly related to how to determine the number of strings."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1442418247, "last_edit_date": 1495540685, "creation_date": 1442416467, "answer_id": 32612574, "question_id": 32612369, "link": "https://stackoverflow.com/questions/32612369/need-help-in-understanding-passing-char-to-function/32612574#32612574", "title": "need help in understanding passing char* [] to function", "body": "<ol>\n<li><p>You need to allocate some space for <code>list</code> or undefined behavior occurs:</p>\n\n<pre><code>char* list[2];\n</code></pre></li>\n<li><p>You increment <code>i</code> twice; therefore, remove the <code>i++</code> from the bottom of the <code>for</code> loop.</p></li>\n</ol>\n\n<hr>\n\n<p>Minor notes:</p>\n\n<ul>\n<li>refer to string literals as <code>const char*</code></li>\n<li>use <code>array[i]</code> instead of <code>*(array + i)</code></li>\n<li><a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don't cast the result of <code>malloc</code></a></li>\n<li><p><code>malloc</code> allocates too much space as you allocate <code>len</code> <code>char*</code>s, even though you need just <code>char</code>s. Also, as @CoolGuy noted, you need one extra byte for the null byte. Replace the allocation with</p>\n\n<pre><code>array[i] = malloc(len * sizeof(char) + sizeof(char));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>array[i] = malloc(len + 1);\n</code></pre></li>\n<li><p>call <code>free</code> after <code>malloc</code></p></li>\n<li><p>you assign <code>0</code> twice to <code>i</code>;  remove the initialization</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442417370, "post_id": 32612626, "comment_id": 53076338, "body": "Thanks. I do not know the size in main so I have to allocate in create(). I did that and now create is fine but when I try to print values in main it gives seg fault."}, {"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442418376, "post_id": 32612626, "comment_id": 53076966, "body": "Thanks. This works. But what&#39; wrong with the edited code I posted and what is the use of <b>(*array)[i] = NULL;</b>"}, {"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442419064, "post_id": 32612626, "comment_id": 53077471, "body": "OK. Got it. It&#39;s the null terminator for the array. Correct?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442419334, "post_id": 32612626, "comment_id": 53077650, "body": "@Jardanian: As I said, I wanted the array to be terminated with a NULL pointer, as is the argv array. But this is absolutely optional since the length is already passed in return value."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442419516, "post_id": 32612626, "comment_id": 53077774, "body": "@Jardanian: In your code, you just pass <code>list</code> to the function. So when you assign the malloced memory to it, you just change <b>a local copy</b> and not the caller variable. That&#39;s the reason why I pass the address of <code>list</code>."}, {"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442419608, "post_id": 32612626, "comment_id": 53077828, "body": "Thanks a lot for you help. May I request you to please explain just two things. 1.) How will we write (*array)[i] as just pointer notation, is it **(array+i)? 2.) What did I pass as char **, I thought this passes the address to first location."}, {"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442419921, "post_id": 32612626, "comment_id": 53078022, "body": "Ok. If I had created like <b>char *a[2]</b> and passed <b>create(a)</b> then would it be the address or still I require to do <b>create(&amp;a)</b>. Sorry, but I am trying to understand the pointers but getting lost always."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442423351, "post_id": 32612626, "comment_id": 53080150, "body": "@Jardanian: C always pass by value. So you can <i>use</i> what was passed but not <i>change</i> it. If you define <code>char *a[2]</code> and then pass <code>create(a)</code>, you can <b>use</b> <code>a</code> in <code>a[i] = ...</code>, but you must never have <code>a = ...</code> in a function <code>create(... a)</code>."}, {"owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "edited": false, "score": 0, "creation_date": 1442425823, "post_id": 32612626, "comment_id": 53081528, "body": "Thanks. Some say pass by ref and some say pass by val. I&#39;ll read more but how this happens <a href=\"https://ideone.com/NVS5nu\" rel=\"nofollow noreferrer\">change value of char array in called function</a>"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1442417601, "last_edit_date": 1442417601, "creation_date": 1442416624, "answer_id": 32612626, "question_id": 32612369, "link": "https://stackoverflow.com/questions/32612369/need-help-in-understanding-passing-char-to-function/32612626#32612626", "title": "need help in understanding passing char* [] to function", "body": "<p>You correctly alloc memory for the individual strings, but fail to alloc some for the array itself.</p>\n\n<p>You should use:</p>\n\n<pre><code>int main() {\n    char* list[8] = {0}; /* initialize pointers to NULL */\n    create(list);\n\n    /* free allocated memory - free(NULL) is legal and is a noop */\n    for (i=0; i&lt;sizeof(list)/sizeof(list[0]); i++) free(list[i]);\n    return 0;  /* never return random value from main */\n}\n</code></pre>\n\n<p>And you should remove the <code>i++</code> at the end of the loop in function create because it leads to a double increment.</p>\n\n<p>Alternatively you could alloc the array itself in the function <code>create</code>:</p>\n\n<pre><code>int create(char ***array) {\n\n    char* str[] = { \"hello\", \"dear\" };\n    int len;\n    int i = 0;\n    *array = malloc(1 + sizeof(str)/sizeof(str[0]));\n    for (i = 0; i &lt; 2; i++) {\n        len = strlen(str[i]) + 1;\n        printf(\"%d\\n\", len);\n        (*array)[i] = malloc(len * sizeof(char*));\n        strcpy((*array)[i], str[i]);\n    }\n    (*array)[i] = NULL;\n    return i;\n}\n\nint main() {\n    char** list;\n    create(&amp;list);\n}\n</code></pre>\n\n<p>In above code, the length of the array is the return value from <code>create</code>, and the last element of list is a NULL (in the same logic as argc/argv).</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1442419118, "last_edit_date": 1442419118, "creation_date": 1442418812, "answer_id": 32613361, "question_id": 32612369, "link": "https://stackoverflow.com/questions/32612369/need-help-in-understanding-passing-char-to-function/32613361#32613361", "title": "need help in understanding passing char* [] to function", "body": "<p>I would suggest you to change declaration of function <code>create</code> to this -</p>\n\n<pre><code>int create(char ***array);\n</code></pre>\n\n<p>And call it like this -</p>\n\n<pre><code>create(&amp;list);\n</code></pre>\n\n<p>In function <code>create</code> allocate memory like this -</p>\n\n<pre><code>    *array = malloc(2 * sizeof(char*));\n    for (i = 0; i &lt; 2; i++) \n        {\n            len = strlen(str[i]);\n            printf(\"%d\\n\", len);\n            (*array)[i] =malloc(len * sizeof(char*)+1);\n            strcpy((*array)[i], str[i]);\n        }\n</code></pre>\n\n<p>And do the printing as you do in <code>main</code>. </p>\n\n<p>Note - <code>free</code> memory that you allocate.</p>\n\n<p>And you should declare <code>len</code> as type <code>size_t</code>  <strong>-></strong> <code>size_t len;</code> \nand print it with <code>%zu</code> specifier in <code>printf</code> .</p>\n\n<p>See working code here -<a href=\"https://ideone.com/GX2k9T\" rel=\"nofollow\">https://ideone.com/GX2k9T</a></p>\n"}], "owner": {"reputation": 631, "user_id": 4941830, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f1465c6706c5fd57d0c77cdf787ba768?s=128&d=identicon&r=PG&f=1", "display_name": "Jardanian", "link": "https://stackoverflow.com/users/4941830/jardanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 32612626, "answer_count": 4, "score": 0, "last_activity_date": 1442419118, "creation_date": 1442415985, "last_edit_date": 1442418913, "question_id": 32612369, "link": "https://stackoverflow.com/questions/32612369/need-help-in-understanding-passing-char-to-function", "title": "need help in understanding passing char* [] to function", "body": "<p>I am trying to pass a array of pointers to string to a function where I need to set the values. In the passing function I do not know the number of strings I will get, the called function is calling some other function which returns list of strings.</p>\n\n<p>Sample code below:</p>\n\n<pre><code>int main() {\n    char** list;\n    create(list);\n}\n\nint create(char **array) {\n\n    char* str[] = { \"hello\", \"dear\" };\n    int len;\n    int i = 0;\n    for (i = 0; i &lt; 2; i++) {\n        len = strlen(str[i]);\n        printf(\"%d\\n\", len);\n        *(array + i) = (char*) malloc(len * sizeof(char*));\n        strcpy(*(array + i), str[i]);\n        i++;\n\n    }\n    return 1;\n}\n</code></pre>\n\n<p>This gives me segmentation fault.</p>\n\n<p>What wrong am I doing here. Please help.</p>\n\n<p>Thanks</p>\n\n<p><strong>EDIT</strong>\nUpdated code from below comments:</p>\n\n<pre><code>int main() {\n    char** list;\n    create(list);\n    int i = 0;\n    for (i = 0; i &lt; 2; i++) {\n\n        printf(\"%s\\n\", list[i]); // segmentation fault\n    }\n}\n\nint create(char **array) {\n\n    char* str[] = { \"hello\", \"dear\" };\n    int len;\n    int i = 0;\n    array = malloc(2 * sizeof(char*));\n    for (i = 0; i &lt; 2; i++) {\n        len = strlen(str[i]);\n        printf(\"%d\\n\", len);\n        *(array + i) = (char*) malloc(len * sizeof(char));\n        strcpy(*(array + i), str[i]);\n        printf(\"%s\\n\", array[i]); // this prints\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Now getting segmentation fault in main while printing the list.</p>\n\n<p><strong>Actual code where I am reading the strings</strong></p>\n\n<pre><code>int i;\nfor ( i=0; i&lt;reply-&gt;elements; i++ )\n{\nprintf( \"Result: %d---%s\\n\", i,reply-&gt;element[i]-&gt;str );\n*array[i] = (char*)malloc(strlen(reply-&gt;element[i]-&gt;str));\nprintf(\"***\");\nstrcpy(array[i],reply-&gt;element[i]-&gt;str);\nprintf( \"Array[%d]: %s\\n\", i,array[i] );\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 2, "creation_date": 1442415980, "post_id": 32612312, "comment_id": 53075398, "body": "Mutexes don&#39;t block all threads; they only block the threads trying to acquire the mutex."}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1442416040, "post_id": 32612312, "comment_id": 53075445, "body": "That is what I meant..."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442416078, "post_id": 32612312, "comment_id": 53075471, "body": "Rethink your application&#39;s design?"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1442416135, "post_id": 32612312, "comment_id": 53075509, "body": "The entire point of mutexes is so that only one thread accesses a resource at a time. If there&#39;s a ton of shared state that each thread needs to access exclusively, then threading isn&#39;t appropriate."}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1442416136, "post_id": 32612312, "comment_id": 53075512, "body": "Well you can get a mutex_lock to immediately return a failure. That stops blocking outside of your control, but you don&#39;t have the resource you wanted regardless..."}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1442416146, "post_id": 32612312, "comment_id": 53075519, "body": "I don&#39;t have any application to design...it the question and comments in that blog which I am talking about"}, {"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 2, "creation_date": 1442416191, "post_id": 32612312, "comment_id": 53075546, "body": "The easiest way to avoid blocking is to avoid sharing data between threads. This may entail some otherwise unnecessary data copying so that each thread has a private copy. But in general, this topic is far too big for a single StackO post. Books were written on this."}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1442416379, "post_id": 32612312, "comment_id": 53075681, "body": "That&#39;s right..I always use mutex lock and sometime I also pass a local copy of that data..and I thought it is a right way but today this blog makes me rethink about it"}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1442416436, "post_id": 32612312, "comment_id": 53075720, "body": "@joe can you please elaborate"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442416563, "post_id": 32612312, "comment_id": 53075801, "body": "To avoid concurrent access definitely is good idea to avoid block any threads, however to give an easy example on how to use a mutex you need to setup concurrent access. So the guy argueing against the example you linked somehow misunderstood the author&#39;s intention."}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442416928, "post_id": 32612312, "comment_id": 53076048, "body": "@alk I was designing a TCP/IP sever where multiple clients will communicate with server to send data to each other..now in this case for each client if I create a separate thread which will receive data from its client and send to other client but if not data is sent by that client, the server thread serving that client which has a <code>read</code> system call will block till it receives the data again..here how can I use threads without blocking."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442417179, "post_id": 32612312, "comment_id": 53076224, "body": "@MayukhSarkar: I&#39;d say this is a different question though."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1442417431, "post_id": 32612312, "comment_id": 53076373, "body": "@MayukhSarkar, often the very prudent way of doing a server like yours is to multiplex on socket rather than multithread altogether."}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1442418232, "post_id": 32612312, "comment_id": 53076870, "body": "Can you please explain the concept of socket mulplexing..I don&#39;t know that concept"}, {"owner": {"reputation": 1365, "user_id": 530055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84f1716d0d973dc8d323e6af17bc318a?s=128&d=identicon&r=PG", "display_name": "Isaiah van der Elst", "link": "https://stackoverflow.com/users/530055/isaiah-van-der-elst"}, "edited": false, "score": 0, "creation_date": 1442419091, "post_id": 32612312, "comment_id": 53077487, "body": "@MayukhSarkar It&#39;s basically a pattern for distributing tasks based on some input. If you think of your browser, the event-loop distributes the user&#39;s events to listeners. You could use a similar pattern for controlling input. After some unit of input is structured, it can be distributed to a thread for processing. Good implementations will allow you to grow or shrink the number of executor threads and grow or shrink the number of distributors."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1442601868, "post_id": 32612312, "comment_id": 53164308, "body": "Your question is kind of a &quot;how do you treat cancer&quot; question. The right/best way to handle thread synchronization is very specific to each circumstance you find yourself in. There&#39;s no &quot;one best way&quot;. The vast majority of the time, either mutexes or atomic operations are the best way."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1442417273, "post_id": 32612725, "comment_id": 53076280, "body": "You do not need a mutex AT ALL here. Meaning, you can achieve the same functionality without mutexes, and might ot might not be beneficial. But at least you should&#39;ve mentioned it."}, {"owner": {"reputation": 761, "user_id": 2345647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c511ef77481eb163a14285a3b1e1016?s=128&d=identicon&r=PG", "display_name": "Jim Wood", "link": "https://stackoverflow.com/users/2345647/jim-wood"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1442417602, "post_id": 32612725, "comment_id": 53076464, "body": "@SergeyA I am trying to explain where the article in question went wrong, as per the intent of the question as I understood it, not rewrite the article. Please submit your own answer if you have something constructive to add."}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1442437203, "post_id": 32612725, "comment_id": 53087787, "body": "@JimWood, your correction in the code is wrong, &quot;counter&quot; is a shared variable between threads and both printf use that variable, it must be locked. For it to be correct the current job counter should be stored in a local variable before unlocking the counter so the work (the for loop) could be parallelized correctly and print the right counter      ...     pthread_mutex_lock(&amp;lock);     counter += 1;     int aux = counter;     pthread_mutex_unlock(&amp;lock);     printf(&quot;\\n Job %d started\\n&quot;, aux);     for(i=0; i&lt;(0xFFFFFFFF);i++);     printf(&quot;\\n Job %d finished\\n&quot;, aux);      return NULL;     }"}, {"owner": {"reputation": 761, "user_id": 2345647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c511ef77481eb163a14285a3b1e1016?s=128&d=identicon&r=PG", "display_name": "Jim Wood", "link": "https://stackoverflow.com/users/2345647/jim-wood"}, "reply_to_user": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1442601761, "post_id": 32612725, "comment_id": 53164251, "body": "@Emi1305 Thanks. Edited to reflect your suggested changes."}], "tags": [], "owner": {"reputation": 761, "user_id": 2345647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c511ef77481eb163a14285a3b1e1016?s=128&d=identicon&r=PG", "display_name": "Jim Wood", "link": "https://stackoverflow.com/users/2345647/jim-wood"}, "is_accepted": true, "score": 2, "last_activity_date": 1442601553, "last_edit_date": 1442601553, "creation_date": 1442416949, "answer_id": 32612725, "question_id": 32612312, "link": "https://stackoverflow.com/questions/32612312/how-to-synchronize-threads-without-blocking/32612725#32612725", "title": "How to synchronize threads without blocking?", "body": "<p>You <strong>cannot</strong> synchronize threads <em>without blocking</em> by the very definition of synchronization. However, good synchronization technique will limit the scope of where things are blocked to the absolute minimum. To illustrate, and point out exactly why the article is wrong consider the following:</p>\n\n<p>From the article:</p>\n\n<pre><code>pthread_t tid[2];\nint counter;\npthread_mutex_t lock;\n\nvoid* doSomeThing(void *arg)\n{\n    pthread_mutex_lock(&amp;lock);\n\n    unsigned long i = 0;\n    counter += 1;\n    printf(\"\\n Job %d started\\n\", counter);\n\n    for(i=0; i&lt;(0xFFFFFFFF);i++);\n\n    printf(\"\\n Job %d finished\\n\", counter);\n\n    pthread_mutex_unlock(&amp;lock);\n\n    return NULL;\n}\n</code></pre>\n\n<p>What it should be:</p>\n\n<pre><code>pthread_t tid[2];\nint counter;\npthread_mutex_t lock;\n\nvoid* doSomeThing(void *arg)\n{\n    unsigned long i = 0;\n\n    pthread_mutex_lock(&amp;lock);\n    counter += 1;\n    int myJobNumber = counter;\n    pthread_mutex_unlock(&amp;lock);\n\n    printf(\"\\n Job %d started\\n\", myJobNumber);\n\n    for(i=0; i&lt;(0xFFFFFFFF);i++);\n\n    printf(\"\\n Job %d finished\\n\", myJobNumber);\n\n    return NULL;\n}\n</code></pre>\n\n<p>Notice that in the article, the work being done (the pointless for loop) is done while holding the lock. This is complete nonsense, since the work is supposed to be done concurrently. The reason the lock is needed is only to protect the <code>counter</code> variable. Thus the threads only need to hold the lock when changing that variable as in the second example.</p>\n\n<p>Mutex locks protect the <em>critical section</em> of code, which are those areas of code which only 1 thread at a time should touch - and all the other threads <strong>must</strong> block if trying to access the critical section at the same time. However, if thread 1 is in the critical section, and thread 2 is not, then it's perfectly fine for both to run concurrently.</p>\n"}, {"comments": [{"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1442417133, "post_id": 32612746, "comment_id": 53076195, "body": "I was designing a TCP/IP sever where multiple clients will communicate with server to send data to each other..now in this case for each client if I create a separate thread which will receive data from its client and send to other client but if not data is sent by that client, the server thread serving that client which has a <code>read</code> system call will block till it receives the data again..here how can I use trylock..or any other mechanism which will be efficient and concurrent too"}, {"owner": {"reputation": 6661, "user_id": 114488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2915caaca653f93045ddc1ed5ad36294?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/114488/eugene"}, "edited": false, "score": 1, "creation_date": 1442417519, "post_id": 32612746, "comment_id": 53076416, "body": "Be careful when using trylock -- if resource is contested enough, some threads will never get a chance to run. Basically loudest thread (the one who tries more often) would dominate. If you have readers and writers for example, you could get an effective deadlock or overflow of your buffers without anybody ever waiting on a mutex. :)"}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1442417728, "post_id": 32612746, "comment_id": 53076540, "body": "Fundamentally you&#39;re asking the SO community to redesign your application to be lockless. Which is rather too wide a subject to answer!"}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1442418355, "post_id": 32612746, "comment_id": 53076950, "body": "@joe I never had a problem with locks but when I saw that it is not a good practise to always lock all the resources...I am exploring some other options too"}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "reply_to_user": {"reputation": 6661, "user_id": 114488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2915caaca653f93045ddc1ed5ad36294?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/114488/eugene"}, "edited": false, "score": 0, "creation_date": 1442418979, "post_id": 32612746, "comment_id": 53077426, "body": "@Eugene has understood your question correctly then, you want to know about lock-free algorithms and data structures. Too wide a subject for an SO question."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1442608760, "post_id": 32612746, "comment_id": 53167747, "body": "@MayukhSarkar Your threads will spend very little time handling shared resources, so just locking around the small parts that do is probably the best solution."}], "tags": [], "owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1442417019, "creation_date": 1442417019, "answer_id": 32612746, "question_id": 32612312, "link": "https://stackoverflow.com/questions/32612312/how-to-synchronize-threads-without-blocking/32612746#32612746", "title": "How to synchronize threads without blocking?", "body": "<p>You can use pthread_mutex_trylock() to attempt a lock. If that fails then you know you <em>would</em> have blocked. You can't do what you want to do, but your thread is not blocked, so it can attempt to do something else. I think most of the comments on that blog are about avoiding contention between threads though, i.e. that maximising multi-threaded performance is about avoiding threads working on the same resource at the same time. If you avoid that by design then by design you don't need locks as you never have contention.</p>\n"}, {"comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1442601935, "post_id": 32612752, "comment_id": 53164353, "body": "Note that these generally perform worse than the corresponding locking data structures, so they&#39;re rarely used. However, if you happen to be in one of the rare cases where they perform better, sometimes much better, they can be very valuable."}], "tags": [], "owner": {"reputation": 6661, "user_id": 114488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2915caaca653f93045ddc1ed5ad36294?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/114488/eugene"}, "is_accepted": false, "score": 1, "last_activity_date": 1442417026, "creation_date": 1442417026, "answer_id": 32612752, "question_id": 32612312, "link": "https://stackoverflow.com/questions/32612312/how-to-synchronize-threads-without-blocking/32612752#32612752", "title": "How to synchronize threads without blocking?", "body": "<p>The term you are looking for is <a href=\"https://www.google.ca/search?client=opera&amp;q=lockless%20containers&amp;sourceid=opera&amp;ie=UTF-8&amp;oe=UTF-8#q=lock%20free%20data%20structures\" rel=\"nofollow\">lock free data structures</a>. </p>\n\n<p>General idea is that the state shared between threads is contorted into one of those.</p>\n\n<p>Implementations of those vary and often are compiler or platform specific. For example MSVC has a set of <a href=\"https://msdn.microsoft.com/en-us/library/51s265a6.aspx\" rel=\"nofollow\">_Interlocked*</a> functions to perform simple atomic operations. </p>\n"}, {"comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1442608678, "post_id": 32613055, "comment_id": 53167713, "body": "How do you imagine the event generator and the listener communicate? For example, if the listener checks for a message at precisely the same instant the event generator is queuing an event, why would you think one wouldn&#39;t block?"}, {"owner": {"reputation": 1365, "user_id": 530055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84f1716d0d973dc8d323e6af17bc318a?s=128&d=identicon&r=PG", "display_name": "Isaiah van der Elst", "link": "https://stackoverflow.com/users/530055/isaiah-van-der-elst"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1442609548, "post_id": 32613055, "comment_id": 53168115, "body": "I suppose you&#39;re right, threads could briefly block while queuing tasks."}], "tags": [], "owner": {"reputation": 1365, "user_id": 530055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84f1716d0d973dc8d323e6af17bc318a?s=128&d=identicon&r=PG", "display_name": "Isaiah van der Elst", "link": "https://stackoverflow.com/users/530055/isaiah-van-der-elst"}, "is_accepted": false, "score": 0, "last_activity_date": 1442418560, "last_edit_date": 1442418560, "creation_date": 1442417923, "answer_id": 32613055, "question_id": 32612312, "link": "https://stackoverflow.com/questions/32612312/how-to-synchronize-threads-without-blocking/32613055#32613055", "title": "How to synchronize threads without blocking?", "body": "<p>There are a number of tricks that can be used to avoid concurrent bottle necks.</p>\n\n<ol>\n<li>Immutable Data Structures. The idea here is that concurrent reads are okay, but writes are not. To implement something like this you basically need to think of business units as factories to these immutable data structures which are used by other business units.</li>\n<li>Asynchronous-Callbacks. This is the essence of event-driven development. If you have concurrent tasks, use the observer pattern to execute some logic when a resource becomes available. Basically we execute some code up until a shared resource is needed then add a listener for when the resource becomes available. This typically results in less readable code and heaver strain on the stack, but you never block a thread waiting on a resource. If you have the tasks ready to keep the CPUs running hot, this pattern will do it for you.</li>\n</ol>\n\n<p>Even with these tools, you'll never completely remove the need for some synchronization (counters come to mind).</p>\n"}, {"tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1442602040, "creation_date": 1442602040, "answer_id": 32659034, "question_id": 32612312, "link": "https://stackoverflow.com/questions/32612312/how-to-synchronize-threads-without-blocking/32659034#32659034", "title": "How to synchronize threads without blocking?", "body": "<blockquote>\n  <p>blocking all the threads while one thread is accessing the resources is a very bad idea and it goes against the concept of threading which is true somehow</p>\n</blockquote>\n\n<p>This is a fallacy. Locks block only contending threads, allowing all non-contending threads to run concurrently. Running the work that's the most efficient to run at any particular time rather than forcing any particular ordering is not against the concept of threading at all.</p>\n\n<p>Now if so many of your threads contend so badly that blocking contending threads is harming performance, there are two possibilities:</p>\n\n<ol>\n<li><p>Most likely you have a very poor design and you should fix it. Don't blame the locks for a high-contention design.</p></li>\n<li><p>You are in the rare case where other synchronization mechanisms are more appropriate (such as lock-free collections). But this requires significant expertise and analysis of the specific use case to find the best solution.</p></li>\n</ol>\n\n<p>Generally, if your use case is a perfect fit for atomics, use them. Otherwise, mutexes (possibly in combination with condition variables) should be your first thought. That will cover 99% of the cases a typical multi-threaded C programmer will face.</p>\n"}], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "accepted_answer_id": 32612725, "answer_count": 5, "score": 4, "last_activity_date": 1442602040, "creation_date": 1442415826, "last_edit_date": 1442416515, "question_id": 32612312, "link": "https://stackoverflow.com/questions/32612312/how-to-synchronize-threads-without-blocking", "title": "How to synchronize threads without blocking?", "body": "<p>Now as far as I know mutex used for syncing all the thread which are sharing same data by following a principle that when one thread is using that data all other thread should be blocked while using that common resource until it is unlocked...now recently in a blogpost I have seen a code explaining this concept and some people wrote that blocking all the threads while one thread is accessing the resources is a very bad idea and it goes against the concept of threading which is true somehow.. <strong>Then my question is how to synchronize threads without blocking?</strong></p>\n\n<p>Here is the link of that blogpost</p>\n\n<p><a href=\"http://www.thegeekstuff.com/2012/05/c-mutex-examples/\" rel=\"noreferrer\">http://www.thegeekstuff.com/2012/05/c-mutex-examples/</a></p>\n"}, {"tags": ["c", "codeblocks", "segmentation-fault"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1442416085, "post_id": 32612272, "comment_id": 53075476, "body": "These warnings certainly showing up when compiling should give you a good view of what your code is like. By debugging, you should figure out which line (or at least which function) in particular segfaults."}, {"owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1442419966, "post_id": 32612272, "comment_id": 53078061, "body": "@cad it doesnt show anything about what function may have a problem.."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1442420049, "post_id": 32612272, "comment_id": 53078127, "body": "Dunno what debugging means to you but I mean stepping through the code by gdb, looking at register values, etc."}, {"owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1442421147, "post_id": 32612272, "comment_id": 53078847, "body": "@cad Yes. But how u suppose to use the debugger in codeblocks when it barely works. He didn&#39;t even teach how to use it yet. When I showed him what are u doing he said u should not know that. I had the experience to use VS and i like it! But my lecturer said to me use the same software. :/"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1442421748, "post_id": 32612272, "comment_id": 53079226, "body": "Alright, didn&#39;t you are in the &quot;learning phase.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "edited": false, "score": 0, "creation_date": 1442420248, "post_id": 32612582, "comment_id": 53078242, "body": "Thanks for the help. You were kinda right I would prefer c++ or c# more than c. And your bloody wrong about my attitude. This question was to accept to 2 int and do 5 answers from it probably all in main function. But I want to get better in programming and make my own higher requirements to questions.  P.S. Got the best programming 1 CA and Exam result in the first year :D"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "edited": false, "score": 0, "creation_date": 1442420614, "post_id": 32612582, "comment_id": 53078496, "body": "Good for you Kaspar, but blaming the tools you have to work with that other people like... I&#39;m the other way, I explored C++ but it always seemed to want the inheritance the other way up from what I was doing."}, {"owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "edited": false, "score": 0, "creation_date": 1442423327, "post_id": 32612582, "comment_id": 53080138, "body": "Soo how about the pointer you talked about? Still struggling in using them. Would appreciate your help. :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "edited": false, "score": 0, "creation_date": 1442425902, "post_id": 32612582, "comment_id": 53081575, "body": "@KasparSiricenko I have expanded my answer."}, {"owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "edited": false, "score": 0, "creation_date": 1442429562, "post_id": 32612582, "comment_id": 53083653, "body": "Hmmm. So you put an address as an argument. And then use the address as a pointer to scan the pointer and it will change the value in the address rather than the value itself. I get it right?  I&#39;m still confused. Btw I heard that buffer is much preferable than the pointer,  but he did not explain why. Well, at least now I have a very useful tip for this kind of situations. Cheers to you! :D"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "edited": false, "score": 0, "creation_date": 1442429894, "post_id": 32612582, "comment_id": 53083833, "body": "@KasparSiricenko &quot;hands on&quot; is the way to do it. Whether its coding, or a ball game, you go in there and try things out!"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1442425855, "last_edit_date": 1442425855, "creation_date": 1442416491, "answer_id": 32612582, "question_id": 32612272, "link": "https://stackoverflow.com/questions/32612272/segmentation-fault-in-c-arrays-pointers-functions/32612582#32612582", "title": "Segmentation fault in C? Arrays, pointers, functions", "body": "<p>I can see this fault in <code>getName()</code> which will access memory beyond the array bounds</p>\n\n<pre><code>if (value&gt;10 || value&lt;1)\n    return arrayName[value];\n</code></pre>\n\n<p>I believe you are using the wrong test, try </p>\n\n<pre><code>if (value &lt;= 10 &amp;&amp; value &gt; 0)\n    return arrayName[value-1];\n</code></pre>\n\n<p>assuming <code>value</code> is in the range <code>1</code>..<code>10</code> as the textual array implies.</p>\n\n<p>2) a fault in <code>GetValue</code> where you input into <code>numOfInteger</code> but <code>return value</code>, which is uninitialised.</p>\n\n<p>3) in <code>prepare</code> the statement</p>\n\n<pre><code>scanf(\"%d\",&amp;numOfIntegers);\n</code></pre>\n\n<p>will not pass the input value back to the caller. You should have either passed a pointer to the variable, or returned the value input.</p>\n\n<p>But there might be a lot else wrong. Build your program step by step, checking and trying to break it as you go (with absurd input). Pay attention to compiler warnings - the second fault I listed will generate one.</p>\n\n<p><strong>EDIT</strong> okay... let's examine function <code>prepare</code> which after removing noise is</p>\n\n<pre><code>void prepare(int numOfIntegers)\n{\n    scanf(\"%d\",&amp;numOfIntegers);\n    return;\n}\n</code></pre>\n\n<p>This inputs a value to the function parameter that was passed. This is legal, since you can use a function argument in the same way you can a local variable (perhaps subject to <code>const</code> qualification).</p>\n\n<p>Although it's not a coding error, it does not achieve anything. 1) you usually pass an argument like this to be used by the function in some way, perhaps in its limits and/or in its prompt. 2) Altering the argument like this will not find its way back to the caller.</p>\n\n<p>Here are two ways to deal with this.</p>\n\n<p>A) the function returns the input value</p>\n\n<pre><code>int prepare(void)\n{\n    int value;\n    scanf(\"%d\", &amp;value);    // the address of value\n    return value;\n}\n\n...\n\nint input = prepare();\nprintf(\"%d\\n\", input);\n</code></pre>\n\n<p>B) the function takes a pointer argument</p>\n\n<pre><code>void prepare(int *value)\n{\n    scanf(\"%d\", value);     // value is already a pointer\n}\n\n...\n\nint input;\nprepare(&amp;input);\nprintf(\"%d\\n\", input);\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 32612582, "answer_count": 1, "score": -3, "last_activity_date": 1442491145, "creation_date": 1442415707, "last_edit_date": 1442491145, "question_id": 32612272, "link": "https://stackoverflow.com/questions/32612272/segmentation-fault-in-c-arrays-pointers-functions", "title": "Segmentation fault in C? Arrays, pointers, functions", "body": "<p>Hi due to my lack of knowledge in C (second year in college). Compiler ate my code and built the app. But after accepting first value - numOfIntegers it stops working and debugging tells that the segmentation has been failed. SIGSEGV.\nHow to fix that?</p>\n\n<p>There is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\n/* -----------------------------------------\n    Program: Question 1\n    Author: Maggot #9\n    Email: maggot99999@gmail.com\n    ID: B00076450\n    Date: 16 September 2015\n    Purpose: Who knows?\n   ------------------------------------------ */\n\nvoid wait(int);\nvoid controlMenu(int, int[]);\nint sumOfIntegers(int, int[]);\nint avgOfIntegers(int, int[]);\nint prodOfIntegers(int, int[]);\nint minInteger(int, int[]);\nint maxInteger(int, int[]);\n\n\nconst char * getName (int value)\n{\n\n  static char * arrayName[] = {\"first\",\"second\",\"third\", \"fourth\",\n    \"fifth\",\"sixth\", \"seventh\", \"eighth\", \"ninth\", \"tenth\"};\n\n  static char badValue[] = \"unknown\";\n\n  if (value&lt;10 &amp;&amp; value&gt;=0)\n    return arrayName[value];\n  else\n    return badValue;\n}\n\nint getValue(int numOfInteger)\n{\n  int value;\n  wait(100);\n  printf(\"Please enter %s the value:\", getName(numOfInteger));\n  scanf(\"%d\",&amp;value);\n\n  return value;\n}\n\n\nvoid prepare(int * numOfIntegers)\n{\n  wait(300);\n  printf(\"Hey again that C stupid lang\\n\\n\");\n  wait(200);\n  printf(\"Please enter how many values you want to put: \");\n  scanf(\"%d\",numOfIntegers);\n  return;\n}\n\n\nvoid initialize(int numOfIntegers,int* arrayNum[])\n{\n  int i;\n  for(i=0; i&lt;(numOfIntegers); i++)\n    arrayNum[i] = getValue(i);\n\n  wait(500);\n  printf(\"\\nPlease enter press any button to continue\");\n  wait(100);\n  getch();\n  wait(600);\n  system(\"cls\");\n  wait(200);\n  return;\n}\n\n\nint main()\n{\n  int numOfIntegers;\n  prepare(&amp;numOfIntegers);\n  int arrayNum[numOfIntegers];\n  initialize(numOfIntegers, &amp;arrayNum[numOfIntegers]);\n  controlMenu(numOfIntegers, &amp;arrayNum[numOfIntegers]);\n  return 0;\n}\n\n\nvoid controlMenu(int numOfIntegers, int arrayNum[])\n{\n  int i;\n  char chooseNum;\n  printf(\"Please choose any of the following:\\n\\n1. The integers accepted\\n2. The sum of the integers\\n3. The average of the integers\\n4. The product of the integers\\n5. The smallest integer\\n6. The largest integer\\n0. Exit menu\\n\");\n  while(1)\n  {\n    chooseNum = getch();\n    switch(chooseNum)\n    {\n      case '0':\n        return;\n      case '1':\n        printf(\"\\n&gt;&gt;&gt; The integers are:\");\n        for(i=0; i&lt;(numOfIntegers); i++)\n          {\n            printf(\"\\n&gt;&gt;&gt; The %s is %d\", getName((i+1)), arrayNum[i]);\n          }\n        break;\n\n      case '2':\n        printf(\"\\n&gt;&gt;&gt; The sum of integers is: %d\", sumOfIntegers(numOfIntegers, &amp;arrayNum[numOfIntegers]));\n        break;\n\n      case '3':\n        printf(\"\\n&gt;&gt;&gt; The average of integers is: %d\", avgOfIntegers(numOfIntegers, &amp;arrayNum[numOfIntegers]));\n        break;\n\n      case '4':\n        printf(\"\\n&gt;&gt;&gt; The product of integers is: %d\", prodOfIntegers(numOfIntegers, &amp;arrayNum[numOfIntegers]));\n        break;\n\n      case '5':\n        printf(\"\\n&gt;&gt;&gt; The smallest integer is: %d\", minInteger(numOfIntegers, &amp;arrayNum[numOfIntegers]));\n        break;\n\n      case '6':\n        printf(\"\\n&gt;&gt;&gt; The largest integer is: %d\", maxInteger(numOfIntegers, &amp;arrayNum[numOfIntegers]));\n        break;\n\n      default:\n        break;\n    }\n    printf(\"\\n\\n\");\n  }\n}\n\n\nint sumOfIntegers(int numOfIntegers,int arrayNum[])\n{\n  int sum=0;\n\n  for(int i=0; i&lt;(numOfIntegers); i++)\n    sum += arrayNum[i];\n\n  return sum;\n}\n\n\nint avgOfIntegers(int numOfIntegers, int arrayNum[])\n{\n  int average=0;\n\n  average = sumOfIntegers(numOfIntegers, arrayNum[numOfIntegers])/numOfIntegers;\n\n  return average;\n}\n\n\nint prodOfIntegers(int numOfIntegers, int arrayNum[])\n{\n  int i,product=0;\n\n  for(i=0; i&lt;(numOfIntegers); i++)\n    product *= arrayNum[i];\n\n  return product;\n}\n\n\nint minInteger(int numOfIntegers, int arrayNum[])\n{\n  int i,smallest=0;\n  smallest = arrayNum[0];\n\n  for(i=1; i&lt;(numOfIntegers); i++)\n    {\n      if(smallest&gt;arrayNum[i])\n        smallest=arrayNum[i];\n      else\n        continue;\n    }\n\n  return smallest;\n}\n\n\nint maxInteger(int numOfIntegers, int arrayNum[])\n{\n  int i,largest=0;\n  largest = arrayNum[0];\n\n  for(i=1; i&lt;(numOfIntegers); i++)\n    {\n      if(largest&lt;arrayNum[i])\n        largest=arrayNum[i];\n      else\n        continue;\n    }\n\n  return largest;\n}\n\n\nvoid wait(int ms)\n{\n  Sleep(ms);\n  return;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 1, "creation_date": 1442415607, "post_id": 32612133, "comment_id": 53075084, "body": "<a href=\"http://cs.indstate.edu/CS202/CPT.pdf\" rel=\"nofollow noreferrer\">cs.indstate.edu/CS202/CPT.pdf</a>   <code>-&gt;</code> has higher precedence than <code>++</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1442415632, "post_id": 32612133, "comment_id": 53075109, "body": "&quot;The ++ has precedence over the -&gt; operator&quot;. Where did you get this piece of informaton?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 4, "creation_date": 1442415906, "post_id": 32612133, "comment_id": 53075327, "body": "IMO that&#39;s <b>bad</b> code.  Not every programmer is going to have the precedence of operators memorized, and even the ones that think they do don&#39;t have perfect recall.  That code should be something like <code>(++myStruct)-&gt;counter</code> or <code>++(myStruct-&gt;counter)</code> to make the intent clear."}, {"owner": {"reputation": 295, "user_id": 978563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/487106d76b8a00a62e837e064b834c30?s=128&d=identicon&r=PG", "display_name": "zacharoni16", "link": "https://stackoverflow.com/users/978563/zacharoni16"}, "edited": false, "score": 0, "creation_date": 1442416031, "post_id": 32612133, "comment_id": 53075438, "body": "Apparently I confused the prefix and postfix precedence. I agree this code is dangerous."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4229245"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1442417019, "post_id": 32612133, "comment_id": 53076120, "body": "@AndrewHenle, I could not agree more.  From time to time (though thankfully rarely) you get these terse-first pundits show up insisting that you should not use more parentheses than needed.  This is and always has been a horrendously bad idea.  Use whatever means at your disposal to help the exhausted engineer hopped up on caffeine at 3am to read your code."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1442417381, "post_id": 32612133, "comment_id": 53076347, "body": "@AndrewHenle this is no more dangerous than <code>++foo.bar</code>. That is, not at all."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442417731, "post_id": 32612133, "comment_id": 53076545, "body": "@n.m. In my experience, the worst coders are those that think they&#39;re too good to make mistakes, and use that misplaced self-assurance to write code that&#39;s more complex than it needs to be, for example writing code that depends on another coder&#39;s complete understanding of operator precedence to correctly interpret the too-complex code.  Writing clear, maintainable production code is <b>not</b> a coding contest for boosting your ego."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1442418487, "post_id": 32612133, "comment_id": 53077043, "body": "@AndrewHenle If you are not sure about relative precedence of <code>.</code> and <code>-&gt;</code>, you have no business touching C code of any complexity. It&#39;s basic knowledge. Nothing complex about it at all."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442419405, "post_id": 32612133, "comment_id": 53077700, "body": "@n.m. Glad to see you&#39;re assuming no one else ever needs to look at or modify your code.  Another thing I&#39;ve learned is the best programmers are those that know how <b>bad</b> they are at it so they <b>never</b> rely on fallible things like human recall when writing code."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442419537, "post_id": 32612133, "comment_id": 53077790, "body": "@tgm1024 - We seem to have found one of your &quot;terse-first pundits&quot;.  :-D"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442424537, "post_id": 32612133, "comment_id": 53080789, "body": "@AndrewHenle: Would you insist that idiomatic expressions like <code>*p++</code> always be written as <code>*(p++)</code>?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1442428594, "post_id": 32612133, "comment_id": 53083127, "body": "@JohnBode I&#39;d first ask why you felt like you had to characterize that expression as &quot;idiomatic&quot;, as if to lend it more legitimacy."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442429360, "post_id": 32612133, "comment_id": 53083536, "body": "@AndrewHenle I consider understanding of how <code>-&gt;</code> works a basic prerequisite of being a competent C programmer. If you think I shouldn&#39;t, well, I won&#39;t hire you."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442429599, "post_id": 32612133, "comment_id": 53083669, "body": "@n.m. And you still haven&#39;t said what you gain by leaving out the parenthesis.  Also, nice job moving the goalposts from your defending what I think is an overly complex statement with multiple operators in four characters of code to trying to claim I don&#39;t understand what a <code>-&gt;</code> operator does.  I hope your code is more focused."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442429959, "post_id": 32612133, "comment_id": 53083861, "body": "@AndrewHenle: Because it shows up all over the place; it&#39;s enshrined in many <a href=\"http://clc-wiki.net/wiki/C_standard_library:string.h:strcpy\" rel=\"nofollow noreferrer\"><code>strcpy</code></a> implementations as <code>while ( (*dst++ = *src++) );</code>, it&#39;s featured in the Wikipedia entry on <a href=\"https://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\">Duff&#39;s Device</a>; it&#39;s as commonly used an expression as just about anything else.  You almost <i>never</i> see it written as <code>*(p++)</code>.  Hence, <i>idiomatic</i>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1442430211, "post_id": 32612133, "comment_id": 53084004, "body": "@zacharoni16: as a standalone expression, this code isn&#39;t dangerous <i>at all</i>.  It does the right thing (updates the value of the <code>counter</code> member).  As part of a larger expression it <i>might</i> be dangerous, but that&#39;s because of the side effect, not precedence."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1442430585, "post_id": 32612133, "comment_id": 53084229, "body": "@JohnBode Well said, but that only describes what makes your example idiomatic, not why you labelled it as such.  FWIW, though, that code is cognitively much simpler than the preincrement of a field accessed through a pointer.  The very fact that asking what that code does created this very discussion is evidence itself that <code>++ptr-&gt;field</code> is bad code."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442431143, "post_id": 32612133, "comment_id": 53084543, "body": "@AndrewHenle: I <i>labeled</i> it as idiomatic because it <i>is</i> idiomatic.  So are expressions like <code>++ptr-&gt;field</code> and <code>ptr-&gt;field++</code>.  Both do what most people <i>expect</i> them to do, which is to update <code>ptr-&gt;field</code>.  The only time you should explicitly group is when you&#39;re doing something most people <i>don&#39;t</i> expect, like <code>(ptr++)-&gt;field</code> or <code>(++ptr)-&gt;field</code> (analogous to the difference between <code>a + b * c</code> and <code>(a + b) * c</code>).  Adding parens where they aren&#39;t needed just adds visual clutter and makes the expression harder to read."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442431210, "post_id": 32612133, "comment_id": 53084591, "body": "@AndrewHenle Isn&#39;t it clear? I gain less noise per line of code. Less noise means less attention to noise and more attention to things that do matter. I don&#39;t quite understand what exactly I have moved and where. Are we still discussing <code>++myStruct-&gt;counter</code>? Do <i>you</i> find it hard to understand because <i>you</i> don&#39;t quite remember the precedence of <code>-&gt;</code>? I would consider it just about equivalent of not knowing the relative precedence of binary <code>+</code> and <code>*</code>, not because a competent programmer blindly memorizes them, but because they understand <i>why</i> there is no other option."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442431349, "post_id": 32612133, "comment_id": 53084661, "body": "@n.m. Are you really claiming parenthesis are <b>noise</b>?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1442431787, "post_id": 32612133, "comment_id": 53084881, "body": "@JohnBode  The code <i>is</i> a lot of things. Out of everything it may be, you <b>selected</b> &quot;idiomatic&quot; to characterize your example. Your defense of not using parenthesis is that parenthesis makes code &quot;harder to read&quot;?  When they merely express the coder&#39;s actual intent?  And are all over C code anyway?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442432968, "post_id": 32612133, "comment_id": 53085544, "body": "@AndrewHenle You are shifting the question. Redundant parentheses may or may not be be noise (sometimes they are), but this is not the question. The question is whether a competent C programmer finds the precedence of <code>-&gt;</code> hard to understand. Anyway I don&#39;t think this discussion is productive."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442444828, "post_id": 32612133, "comment_id": 53090712, "body": "@n.m. Questioning the &quot;logic&quot; behind <b>your</b> argument that &quot;[you] gain less noise per line of code&quot; is not &quot;shifting the question&quot;.  You claimed that the parenthesis in <code>++(ptr-&gt;field)</code> are <b>noise</b>.  You posted that, and now you can&#39;t defend it.  Not only that, you had the temerity to question my competence, but now you claim those parenthesis are noise?!?!  Wow.  I claim those parenthesis make the intent absolutely clear, and furthermore that the very existence of this question is proof that making the intent of the code clear is necessary for the vast majority of programmers."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442464135, "post_id": 32612133, "comment_id": 53095239, "body": "@AndrewHenle I will repeat my claims for convenience of attacking them. (1) Yes, this particular pair of parentheses is noise (2) Yes, anyone who needs parentheses here doesn&#39;t quite understand C. Likewise for the constructs whose idiomatic qualities you questioned in other comments I don&#39;t believe that the existence of this question shows anything, except people at various stages of learning programming languages being able to ask questions here. I think I really truly don&#39;t have anything to add to this discussion."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442524046, "post_id": 32612133, "comment_id": 53128531, "body": "@n.m. Me:  Parentheses make intent clear where simply relying on operator precedence does not, parentheses also make sure a later programmer of unknown experience and competence will understand the code.  The use of parenthesis makes sure the code is clear, the intent is clear, and interpretation does not rely on fallible human memory.  You:  They&#39;re unnecessary noise.  Again: dangerous programmers are those that think they can&#39;t make a mistake."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1442415633, "post_id": 32612230, "comment_id": 53075111, "body": "We answered at the exact same second. Nice."}], "tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 3, "last_activity_date": 1442415579, "creation_date": 1442415579, "answer_id": 32612230, "question_id": 32612133, "link": "https://stackoverflow.com/questions/32612133/operator-on-a-pointer-to-struct-member/32612230#32612230", "title": "++ operator on a pointer to struct member", "body": "<p>The <em>postfix</em> increment and decrement have the same precedence as the <code>-&gt;</code> operator and left-to-right associativity, but the <em>prefix</em> increment and decrement are after. So the code does increment the variable <code>counter</code> and not the <code>myStruct</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 3, "last_activity_date": 1442415579, "creation_date": 1442415579, "answer_id": 32612231, "question_id": 32612133, "link": "https://stackoverflow.com/questions/32612133/operator-on-a-pointer-to-struct-member/32612231#32612231", "title": "++ operator on a pointer to struct member", "body": "<p>According to <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">cppreference</a>, the <em>prefix</em> <code>++</code>/<code>--</code> operator has lower precedence thatn the <code>-&gt;</code> operator. The <em>suffix</em> one has the same precedence, but left-to-right associativity.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 4, "last_activity_date": 1442415595, "creation_date": 1442415595, "answer_id": 32612238, "question_id": 32612133, "link": "https://stackoverflow.com/questions/32612133/operator-on-a-pointer-to-struct-member/32612238#32612238", "title": "++ operator on a pointer to struct member", "body": "<blockquote>\n  <p>The ++ has precedence over the -> operator and left to right evaluation.</p>\n</blockquote>\n\n<p>This is not correct - postfix operators like <code>-&gt;</code> have higher precedence than unary (prefix) operators <code>++</code> and <code>--</code>.  The expression is parsed as</p>\n\n<pre><code>++(myStruct-&gt;counter)\n</code></pre>\n\n<p>so the <code>counter</code> member of <code>myStruct</code> is being incremented.</p>\n"}], "owner": {"reputation": 295, "user_id": 978563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/487106d76b8a00a62e837e064b834c30?s=128&d=identicon&r=PG", "display_name": "zacharoni16", "link": "https://stackoverflow.com/users/978563/zacharoni16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 32612238, "answer_count": 3, "score": 3, "last_activity_date": 1442415595, "creation_date": 1442415348, "question_id": 32612133, "link": "https://stackoverflow.com/questions/32612133/operator-on-a-pointer-to-struct-member", "title": "++ operator on a pointer to struct member", "body": "<p>I came across a piece of code that reads:</p>\n\n<pre><code>++myStruct-&gt;counter\n</code></pre>\n\n<p>I'm confused on how the ++ operator and -> operator are evaluated here. The ++ has precedence over the -> operator and left to right evaluation. It appears the ++ operator would actually perform pointer arithmetic on 'myStruct', not increment the counter member.</p>\n"}, {"tags": ["java", "c", "linux", "java-native-interface"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442414369, "post_id": 32611306, "comment_id": 53074202, "body": "You never check the return from <code>open()</code>, <code>posix_memalign()</code>, or <code>write()</code>.  You also <code>memcpy()</code> a total of <code>len</code> bytes to a <code>BLOCKSIZE</code> buffer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442415500, "post_id": 32611306, "comment_id": 53075013, "body": "Nor do you <code>close()</code> the file you may or may not have successfully opened."}], "owner": {"reputation": 306, "user_id": 3315775, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b0ce633859d84b7ec3c6408ee8bde59?s=128&d=identicon&r=PG&f=1", "display_name": "ju ho", "link": "https://stackoverflow.com/users/3315775/ju-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442413564, "creation_date": 1442413243, "last_edit_date": 1442413564, "question_id": 32611306, "link": "https://stackoverflow.com/questions/32611306/java-writing-byte-array-over-jni-using-o-direct", "title": "Java writing byte array over JNI using O_direct", "body": "<p>I am trying to use <code>O_direct</code> in Java over JNI in Linux.\nhere is the java part:</p>\n\n<pre><code>public class jnitest {\n    static {\n        System.loadLibrary(\"jnitest\"); // Load native library at runtime\n                                       // hello.dll (Windows) or libhello.so (Unixes)\n    }\n    private native void test();\n    private native void write(String path, byte[] chunkpayload);\n    public static void main(String[] args) {\n        try{\n            jnitest t=new jnitest();\n            byte[] chunk=new byte[5];\n            chunk[0]=1;\n            chunk[1]=2;\n            chunk[2]=3;\n            chunk[3]=4;\n            chunk[4]=5;\n            String s=\"outtest\";\n            t.write(s,chunk);\n        }catch(Exception e){\n            System.out.println(\"fehler lol\");\n        }\n    }\n}\n</code></pre>\n\n<p>This is the C part:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;jni.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n#include \"jnitest.h\"\n#define BLOCKSIZE 512\n\nJNIEXPORT void JNICALL Java_jnitest_write(JNIEnv *env, jobject obj, jstring jpath, jbyteArray jchunkpayload){\n    const char *path=(*env)-&gt;GetStringUTFChars(env, jpath, 0);\n    printf(\"path=%s \\n\",path);\n    (*env)-&gt;ReleaseStringUTFChars(env, jpath, path);\n    int len = (*env)-&gt;GetArrayLength (env,jchunkpayload);\n    printf(\"lenght= %d \\n\",len);\n    unsigned char* payload =(*env)-&gt;GetByteArrayElements(env,jchunkpayload,0);\n    int i=0;\n    for(i=0;i&lt;len-1;i++){\n        printf(\"%02x \\n\",(int)payload[i]);  \n    }\n    void *buffer; \n    int fd = open(path, O_SYNC|O_APPEND|O_CREAT|O_DIRECT);\n    posix_memalign(&amp;buffer,BLOCKSIZE,BLOCKSIZE);\n    memcpy(buffer,payload,len);\n    write(fd,buffer,BLOCKSIZE);\n    printf(\"writen to file\\n\");\n    (*env)-&gt;ReleaseByteArrayElements(env,jchunkpayload,payload,JNI_ABORT);\n    free(buffer);\n    return;\n}\n\nJNIEXPORT void JNICALL Java_jnitest_test(JNIEnv *env, jobject obj){\n    printf(\"test\\n\");\n    return;\n}\n</code></pre>\n\n<p>The program does not fail but the data is never written. I know I can use JNA, but i want to use JNI.  Does somebody have a working example for writing a byte array in java over JNI using <code>O_direct</code>?</p>\n"}, {"tags": ["c", "pointers", "char"], "comments": [{"owner": {"reputation": 269, "user_id": 2833813, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3558205a7fa8676cbb3b573734a71b2?s=128&d=identicon&r=PG&f=1", "display_name": "user6161", "link": "https://stackoverflow.com/users/2833813/user6161"}, "edited": false, "score": 0, "creation_date": 1442413230, "post_id": 32611122, "comment_id": 53073293, "body": "Hi @CoolGuy Thanks for the reply. I tried that, i think &quot;Q&quot; is too a string only, i need to pass &#39;Q&#39;. My question will hurt a little i think..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1442413513, "post_id": 32611122, "comment_id": 53073490, "body": "Your function expects a pointer to the first character of a null-terminated string. <code>&#39;Q&#39;</code> is a character literal. It is not a pointer and it is not a null-terminated string."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1442414127, "post_id": 32611122, "comment_id": 53073999, "body": "@cad - on a microcontroller, there are no &quot;segfaults&quot;.  It may, however, depending on architecture read until it runs into a memory region that raises an interrupt/fault that (at best) might be handled by rebooting the MCU.  Even on a system running a full OS, segfaults are not guaranteed.  In fact, i might go as far as to say its <i>more</i> likely you would run into a zero that the end of a readable memory page/region."}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 3, "last_activity_date": 1442413120, "creation_date": 1442413120, "answer_id": 32611253, "question_id": 32611122, "link": "https://stackoverflow.com/questions/32611122/c-passing-argument-1-of-send-data-makes-pointer-from-integer-without-a-cast/32611253#32611253", "title": "C - passing argument 1 of &#39;send_data&#39; makes pointer from integer without a cast", "body": "<p>As <code>send_data</code> expects <code>s</code> to be a <strong>null-terminated</strong> string anyway, I would just recommend using a string:</p>\n\n<pre><code>send_data(\"Q\");\n</code></pre>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>you should pass a <code>const char*</code> around as long as you don't modify the string at <code>s</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 3, "last_activity_date": 1442413136, "creation_date": 1442413136, "answer_id": 32611260, "question_id": 32611122, "link": "https://stackoverflow.com/questions/32611122/c-passing-argument-1-of-send-data-makes-pointer-from-integer-without-a-cast/32611260#32611260", "title": "C - passing argument 1 of &#39;send_data&#39; makes pointer from integer without a cast", "body": "<pre><code> send_data('Q'); //warning, no data displaying\n</code></pre>\n\n<p>Don't pass character to it . It expects a <code>char *</code> .</p>\n\n<p>You can do this -</p>\n\n<pre><code> send_data(\"Q\"); \n</code></pre>\n\n<p>Also you should declare a prototype for function <code>void send_dt1( char in_c)</code> as you make a call to it before it's definition in function <code>void send_data( char *s)</code> . </p>\n\n<p>This will also generate warning.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1442413481, "creation_date": 1442413481, "answer_id": 32611400, "question_id": 32611122, "link": "https://stackoverflow.com/questions/32611122/c-passing-argument-1-of-send-data-makes-pointer-from-integer-without-a-cast/32611400#32611400", "title": "C - passing argument 1 of &#39;send_data&#39; makes pointer from integer without a cast", "body": "<p>You can't pass a <code>char</code> to a function that expects a <code>char *</code>.</p>\n\n<p>If you really need to be able to pass both, you'll need another function to accept a <code>char</code> and put it in a string so that <code>send_data</code> can be called:</p>\n\n<pre><code>void send_char_data(char c)\n{\n    char s[2];\n    s[0] = c;\n    s[1] = '\\0';\n    send_data(s);\n}\n\n....\n\nint main(void)\n{\n    send_data(\"sample_data\");\n    send_char_data('Q');\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 2833813, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3558205a7fa8676cbb3b573734a71b2?s=128&d=identicon&r=PG&f=1", "display_name": "user6161", "link": "https://stackoverflow.com/users/2833813/user6161"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442413481, "creation_date": 1442412826, "question_id": 32611122, "link": "https://stackoverflow.com/questions/32611122/c-passing-argument-1-of-send-data-makes-pointer-from-integer-without-a-cast", "title": "C - passing argument 1 of &#39;send_data&#39; makes pointer from integer without a cast", "body": "<p>Im writing uart code for a microcontroller. My code is working fine with passing string(\"...\"), but giving problem when i try to passing the char('.'). Yes, it is i've declared \"s\" a pointer for string, but there is a chance of passing char value. Is there any possibilities to pass both string and char values in <strong>send_data</strong>?</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nvoid send_data( char *s)\n{\n    while(*s!='\\0')\n    {\n        send_dt1(*s);\n        s++;\n    }\n}\n\nvoid send_dt1( char in_c)\n{\n   printf(\"%c\",in_c);\n}\n\nint main(void)\n{\n    send_data(\"sample_data\"); //fine\n    send_data('Q'); //warning, no data displaying\n  return 0; /* terminate the program */\n}\n</code></pre>\n\n<p>Thanks..</p>\n"}, {"tags": ["c", "operators"], "comments": [{"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 5, "creation_date": 1442412156, "post_id": 32610744, "comment_id": 53072432, "body": "You don&#39;t change <code>result</code> anywhere in your code. Add <code>result = (max... )) :0;</code>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 5, "creation_date": 1442412170, "post_id": 32610744, "comment_id": 53072440, "body": "none of these statements <code>(maxX &lt; 200)?(result | (1 )) :0;</code> changes the value of result, they only compute some new values, which are discarded because you don&#39;t do anything with them. most likely you meant to put <code>result = </code> before those expressions."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1442412747, "creation_date": 1442412747, "answer_id": 32611089, "question_id": 32610744, "link": "https://stackoverflow.com/questions/32610744/ternery-operator/32611089#32611089", "title": "Ternery Operator", "body": "<p>All those <code>?:</code> lines completely lack side effects. You don't write to a variable anywhere, so they get optimized away. Your compiler should warn you about expressions having no effect.</p>\n\n<p>Your code is 100% equivalent to this:</p>\n\n<pre><code>unsigned char result= 0x0;\nint maxX,maxY;\nmaxX = maxY = 0;\nprintf(\"enter input\\n\");\nscanf(\"%d\",&amp;maxX);\nscanf(\"%d\",&amp;maxY);\n\nprintf(\"Result is %d\\n\",result);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1442412840, "last_edit_date": 1442412840, "creation_date": 1442412786, "answer_id": 32611099, "question_id": 32610744, "link": "https://stackoverflow.com/questions/32610744/ternery-operator/32611099#32611099", "title": "Ternery Operator", "body": "<p>You're evaluating the ternary operators, but you're not assigning them to anything.  This:</p>\n\n<pre><code>(result | (1 ))\n</code></pre>\n\n<p>Takes <code>result</code> and ORs it with 1, but doesn't do anything with the result.</p>\n\n<p>If you compile with <code>-Wall -Wextra</code>, it will warn you of this:</p>\n\n<pre><code>/tmp/x1.c: In function \u2018main\u2019:\n/tmp/x1.c:12: warning: statement with no effect\n/tmp/x1.c:13: warning: statement with no effect\n/tmp/x1.c:14: warning: statement with no effect\n/tmp/x1.c:15: warning: statement with no effect\n</code></pre>\n\n<p>If you're expecting to take that result and assign it back to <code>result</code>, do this:</p>\n\n<pre><code>result |= (maxX &lt; 200)?(1) :0;\nresult |= (maxX &gt; 1500)?(1 &lt;&lt;1 ) :0;\nresult |= (maxY &lt; 200)?(1 &lt;&lt;2 ) :0;\nresult |= (maxY &gt; 1500)?(1 &lt;&lt; 3) :0;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 2401990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419018d312d125ee3576efc2db1e29ee?s=128&d=identicon&r=PG", "display_name": "user2401990", "link": "https://stackoverflow.com/users/2401990/user2401990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1442412840, "creation_date": 1442411936, "last_edit_date": 1442412217, "question_id": 32610744, "link": "https://stackoverflow.com/questions/32610744/ternery-operator", "title": "Ternery Operator", "body": "<pre><code>unsigned char result= 0x0;\nint maxX,maxY;\nmaxX = maxY = 0;\nprintf(\"enter input\\n\");\nscanf(\"%d\",&amp;maxX);\nscanf(\"%d\",&amp;maxY);\n(maxX &lt; 200)?(result | (1 )) :0;\n(maxX &gt; 1500)?(result | (1 &lt;&lt;1  )) :0;\n(maxY &lt; 200)?(result | (1 &lt;&lt;2  )) :0;\n(maxY &gt; 1500)?(result | (1 &lt;&lt; 3)) :0;\n\nprintf(\"Result is %d\\n\",result);\n</code></pre>\n\n<p>Why <code>result</code> is always zero irrespective of <code>maxX</code> and <code>maxY</code> input?</p>\n"}, {"tags": ["c", "linux", "declaration", "wchar-t"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1442412243, "post_id": 32610716, "comment_id": 53072503, "body": "&quot;32 bytes&quot; sounds a bit too big for a data type, IMO. ^^"}, {"owner": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1442412384, "post_id": 32610716, "comment_id": 53072631, "body": "I&#39;v found the information about mbstate_t - it is structure"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442412796, "post_id": 32610716, "comment_id": 53072953, "body": "<code>#include &lt;stddef.h&gt;</code>"}, {"owner": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "edited": false, "score": 0, "creation_date": 1442412997, "post_id": 32610716, "comment_id": 53073111, "body": "The file stddef.h on my PC was no full"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442418544, "post_id": 32610716, "comment_id": 53077093, "body": "install a conforming C compiler then. Section 6.4.4.4/11 of C standard specifies that <code>wchar_t</code> is defined by <code>&lt;stddef.h&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "is_accepted": false, "score": 0, "last_activity_date": 1442413671, "creation_date": 1442413671, "answer_id": 32611464, "question_id": 32610716, "link": "https://stackoverflow.com/questions/32610716/declaration-of-wchar-t-by-myself/32611464#32611464", "title": "Declaration of wchar_t by myself", "body": "<p>You don't need to go to the files containing the definition of wchar_t.<br>\nIn the standard header <code>stdint.h</code> it can be found the information about integer types in your particular implementation.  </p>\n\n<p>For example, the constants <code>WCHAR_MIN</code> and <code>WCHAR_MAX</code> bring information about the range of values of <code>wchar_t</code>.  </p>\n\n<p>On the ohter hand, if <code>WCHAR_MIN == 0</code>, then <code>wchar_t</code> is an <code>unsigned integer type</code>. Else, it's a <code>signed integer type</code> (in this case it would prefirable to check the condition <code>WCHAR_MIN &lt; 0</code>).  </p>\n\n<p>To know the amount of bytes used to represent a <code>wchar_t</code> object, you have, of course, the expression <code>sizeof(wchar_t)</code>.  </p>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1442418440, "post_id": 32611689, "comment_id": 53077006, "body": "I don&#39;t think you can make system calls in a boot program. BIOS calls are possible, but there aren&#39;t any header files for these."}, {"owner": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "edited": false, "score": 0, "creation_date": 1442419748, "post_id": 32611689, "comment_id": 53077917, "body": "Yes. System calls are not available. I&#39;m writing a boot code and use some standart library functions (I&#39;ll implement them)."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1442432032, "last_edit_date": 1442432032, "creation_date": 1442414246, "answer_id": 32611689, "question_id": 32610716, "link": "https://stackoverflow.com/questions/32610716/declaration-of-wchar-t-by-myself/32611689#32611689", "title": "Declaration of wchar_t by myself", "body": "<p>If you are not using the standard library, then you do not need <code>wchar_t</code>.  Or at least the standard library's idea of <code>wchar_t</code> doesn't matter to you.  How could it?  If you want wide character handling then you'll need to write whatever functions are needed for it, and you are free to define and use whatever types are most suitable / convenient for that purpose.</p>\n\n<p><s>You probably will need the <em>kernel</em> headers, though, if you intend make system calls.  I can't imagine how your boot program could avoid that, or why it would want to do.  Those types you would need for that purpose will be defined among the kernel headers.</s>\nYou will not need kernel headers, either: since the point of your program is to load and start the kernel, it cannot rely on system calls into the kernel to do its job.</p>\n\n<p>The bottom line is that since you have to provide everything not available directly from the hardware / firmware -- which does not present a C interface -- no C definitions outside your own code are relevant to you.  In particular, <code>wchar_t</code> is not a characteristic of any system; rather, it is a characteristic of a particular C library.  Different C libraries for the very same system, including yours, can freely define it differently.  If you choose to implement your own wide-character functions, there is no advantage whatever to choosing a <code>wchar_t</code> definition drawn from <em>some other</em> C library.</p>\n"}], "owner": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 32611689, "answer_count": 2, "score": -1, "last_activity_date": 1442432032, "creation_date": 1442411877, "last_edit_date": 1442412341, "question_id": 32610716, "link": "https://stackoverflow.com/questions/32610716/declaration-of-wchar-t-by-myself", "title": "Declaration of wchar_t by myself", "body": "<p>Please tell me, where can I find the wchar_t declaration.\nI use linux, and I think it is 32 bits.\nI need to declarate this type, because i can't use the standart library (it is used in my boot programm).\nThe files /usr/include/wchar.h and /usr/include/linux/stddef.h\ndon't contain the declaration of it.\nAlso what about mbstate_t?</p>\n"}, {"tags": ["c", "signals"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 2459643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f2a19c9ae6514a7489f9223c932cfdb7?s=128&d=identicon&r=PG", "display_name": "pankaj kushwaha", "link": "https://stackoverflow.com/users/2459643/pankaj-kushwaha"}, "edited": false, "score": 0, "creation_date": 1442412114, "post_id": 32610594, "comment_id": 53072396, "body": "thanks for your ans , but can you please give a example where we will like to call old handler , I mean , in which condition we will like to call old handler again?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 349, "user_id": 2459643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f2a19c9ae6514a7489f9223c932cfdb7?s=128&d=identicon&r=PG", "display_name": "pankaj kushwaha", "link": "https://stackoverflow.com/users/2459643/pankaj-kushwaha"}, "edited": false, "score": 0, "creation_date": 1442412388, "post_id": 32610594, "comment_id": 53072637, "body": "@pankajkushwaha <a href=\"http://stackoverflow.com/a/13290134/335858\">This answer</a> has a very detailed code example, also explaining how to deal with <code>SIG_DFL</code> and <code>SIG_IGN</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1442416425, "post_id": 32610594, "comment_id": 53075711, "body": "One example why you&#39;d need to chain signal handlers is JNI code that needs to clean up on abnormal termination of the JVM.  To do that, you&#39;d install your own SIGABRT handler, and save off original handler - which is the JVM&#39;s SIGABRT handler.  When your SIGABRT handler gets called because the JVM is terminating abnormally, you do your cleanup, then call the original SIGABRT handler."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1442411589, "creation_date": 1442411589, "answer_id": 32610594, "question_id": 32610488, "link": "https://stackoverflow.com/questions/32610488/what-is-real-use-of-return-type-of-signal-function/32610594#32610594", "title": "What is real use of return type of signal function", "body": "<p>There are two situations when the value of the old handler is useful:</p>\n\n<ul>\n<li>You want to implement a new handler that calls the old handler at some point during its run, or</li>\n<li>You want to replace an old handler with a new one, and put the old one back at some point.</li>\n</ul>\n\n<p>In both cases you store the old handler returned by the replacement function.</p>\n"}], "owner": {"reputation": 349, "user_id": 2459643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f2a19c9ae6514a7489f9223c932cfdb7?s=128&d=identicon&r=PG", "display_name": "pankaj kushwaha", "link": "https://stackoverflow.com/users/2459643/pankaj-kushwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 32610594, "answer_count": 1, "score": 3, "last_activity_date": 1442411589, "creation_date": 1442411261, "question_id": 32610488, "link": "https://stackoverflow.com/questions/32610488/what-is-real-use-of-return-type-of-signal-function", "title": "What is real use of return type of signal function", "body": "<p>Signal function return the value of old handler , but what is the situation where old handler value may useful,  because most of the places we don't check return value of signal function.</p>\n"}, {"tags": ["c++", "c", "legacy"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1442410689, "post_id": 32610151, "comment_id": 53071311, "body": "<a href=\"http://www.keil.com/support/man/docs/c166/c166_fmemcpy.htm\" rel=\"nofollow noreferrer\">keil.com/support/man/docs/c166/c166_fmemcpy.htm</a> ?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1442410753, "post_id": 32610151, "comment_id": 53071375, "body": "How about some more informations? Libraries, compiler, architecture, ..."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 2, "creation_date": 1442410785, "post_id": 32610151, "comment_id": 53071405, "body": "What don&#39;t you understand about it?  It is a memcpy specifying a pointer type that has been obsolete (at least in X86) since MANY versions of Windows ago.  In headers after that pointer type became obsolete, the specification of that pointer type is supressed and you just have an ordinary memcpy with ordinary pointers."}, {"owner": {"reputation": 144, "user_id": 4985633, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9ca0fa6cc3e2ed6bb807a97d982f9969?s=128&d=identicon&r=PG&f=1", "display_name": "XYZ", "link": "https://stackoverflow.com/users/4985633/xyz"}, "edited": false, "score": 0, "creation_date": 1442410960, "post_id": 32610151, "comment_id": 53071541, "body": "Thanks all  I will read about memcpy and obsolete with the explanation by JSF I hope I will manage it"}, {"owner": {"reputation": 144, "user_id": 4985633, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9ca0fa6cc3e2ed6bb807a97d982f9969?s=128&d=identicon&r=PG&f=1", "display_name": "XYZ", "link": "https://stackoverflow.com/users/4985633/xyz"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1442411063, "post_id": 32610151, "comment_id": 53071628, "body": "I am compiling for windows 64 bit visual studio 2010  @SimonKraemer"}, {"owner": {"reputation": 144, "user_id": 4985633, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9ca0fa6cc3e2ed6bb807a97d982f9969?s=128&d=identicon&r=PG&f=1", "display_name": "XYZ", "link": "https://stackoverflow.com/users/4985633/xyz"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1442411186, "post_id": 32610151, "comment_id": 53071712, "body": "@SimonKraemer I add the libraries"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1442411223, "post_id": 32610151, "comment_id": 53071733, "body": "This should be equivalent to <code>memcpy(Defdat, &amp;DLLdat, sizeof(DATSETTING));</code>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1442412234, "post_id": 32610151, "comment_id": 53072496, "body": "Far pointers were important with 16-bit Windows and Visual C++ 1.5"}, {"owner": {"reputation": 144, "user_id": 4985633, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9ca0fa6cc3e2ed6bb807a97d982f9969?s=128&d=identicon&r=PG&f=1", "display_name": "XYZ", "link": "https://stackoverflow.com/users/4985633/xyz"}, "edited": false, "score": 0, "creation_date": 1442412357, "post_id": 32610151, "comment_id": 53072604, "body": "is this the far for the assembly code to know it is a far jump not a near jump :O"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1442417488, "post_id": 32610151, "comment_id": 53076399, "body": "@XYZ - No, not really. 16-bit Windows had segmented memory, and far pointers worked between segments. A near pointer was relative to one specific segment."}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1442480432, "last_edit_date": 1442480432, "creation_date": 1442458445, "answer_id": 32621894, "question_id": 32610151, "link": "https://stackoverflow.com/questions/32610151/need-help-understandinga-legacy-c-code-fmemcpylpstr-far-defdat-lpstr-far/32621894#32621894", "title": "need help understandinga legacy c code _fmemcpy((LPSTR FAR *)Defdat,(LPSTR FAR *)&amp;DLLdat,sizeof(DATSETTING));", "body": "<p>Back in the days of 16-bit windows, pointers could either be 16-bit pointers inside a data segment, or they could store both the 16-bit segment selector and a 16-bit address within that segment.  The term for the latter kind of pointer was FAR, and any kind of pointer passed between different modules, such as the main program and the OS or a DLL, had to use them.  So did all but the smallest real-world programs, which if nothing else used different segments for the heap and the stack.  LPSTR is Hungarian notation for long pointer to string, so I think this programmer was being redundant.</p>\n\n<p>There used to be separate versions of some library functions for FAR pointers, and that was the version of <code>memcpy()</code> that copied data between different segments on 16-bit Windows.  To help port code over, it became a macro on 32-bit Windows that expands to <code>memcpy()</code>, and <code>LPSTR</code> expands to <code>char *</code>.  FAR is just ignored.</p>\n"}], "owner": {"reputation": 144, "user_id": 4985633, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9ca0fa6cc3e2ed6bb807a97d982f9969?s=128&d=identicon&r=PG&f=1", "display_name": "XYZ", "link": "https://stackoverflow.com/users/4985633/xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 32621894, "answer_count": 1, "score": -1, "last_activity_date": 1442480432, "creation_date": 1442410500, "last_edit_date": 1442411345, "question_id": 32610151, "link": "https://stackoverflow.com/questions/32610151/need-help-understandinga-legacy-c-code-fmemcpylpstr-far-defdat-lpstr-far", "title": "need help understandinga legacy c code _fmemcpy((LPSTR FAR *)Defdat,(LPSTR FAR *)&amp;DLLdat,sizeof(DATSETTING));", "body": "<p>I am trying to read this line it is in the c code of legacy dll visual studio project , But I can't understand it</p>\n\n<pre><code>_fmemcpy((LPSTR FAR *)Defdat,(LPSTR FAR *)&amp;DLLdat,sizeof(DATSETTING)); \n</code></pre>\n\n<p>I am compiling for windows 64 bit visual studio 2010<br>\nlibraries </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;time.h&gt;\n</code></pre>\n\n<p>Thanks </p>\n"}, {"tags": ["c", "arm", "performancecounter", "cortex-m3", "cortex-m"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1442413063, "post_id": 32610019, "comment_id": 53073160, "body": "Maybe too obvious, but you do always call reset_timer() before any other function is executed, correct? Could you post the calling code, as a minimal example?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1442413158, "post_id": 32610019, "comment_id": 53073235, "body": "I would suggest declaring registers as <code>#define DWT_CYCCNT (*(volatile uint32_t*)0xE0001004ul)</code> instead."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1442750054, "post_id": 32610019, "comment_id": 53202712, "body": "Are the events not debug events which would trigger a debug monitor exception?"}, {"owner": {"reputation": 349, "user_id": 223969, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mFhG4.jpg?s=128&g=1", "display_name": "FrankPak", "link": "https://stackoverflow.com/users/223969/frankpak"}, "edited": false, "score": 0, "creation_date": 1442829104, "post_id": 32610019, "comment_id": 53227656, "body": "I have no idea about what kind of event is generated. In the arm docs <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0337e/ch11s05s01.html\" rel=\"nofollow noreferrer\">link</a>  they talk about events but I did not find any way to collect them"}], "answers": [{"comments": [{"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1495026932, "post_id": 33851701, "comment_id": 75078220, "body": "Note that this measures with very coarse granularity, since the SysTick &quot;normally&quot; is set to overflow every e.g. 1ms. The code in the question measures exact cycle counts."}, {"owner": {"reputation": 9, "user_id": 5590826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3vNN.jpg?s=128&g=1", "display_name": "Toani", "link": "https://stackoverflow.com/users/5590826/toani"}, "reply_to_user": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1510797057, "post_id": 33851701, "comment_id": 81591668, "body": "Well noted. Correct. Roughly, if the processor speed is 100MHz, 1ms would allow measuring about 100,000 cycles. This method is precise for functions that take up to dozens of thousand cycles."}], "tags": [], "owner": {"reputation": 9, "user_id": 5590826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3vNN.jpg?s=128&g=1", "display_name": "Toani", "link": "https://stackoverflow.com/users/5590826/toani"}, "is_accepted": false, "score": 0, "last_activity_date": 1448167642, "creation_date": 1448167642, "answer_id": 33851701, "question_id": 32610019, "link": "https://stackoverflow.com/questions/32610019/arm-m4-instructions-per-cycle-ipc-counters/33851701#33851701", "title": "ARM M4 Instructions per Cycle (IPC) counters", "body": "<p>I have no idea how to use the registers the way you want to use them. But, here is how I deal with measuring cycles.</p>\n\n<p>Make sure you enable the counter at the <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0553a/Babieigh.html\" rel=\"nofollow\">SysTick Control and Status Register</a>. With the appropriate headers, you should have access to the SysTick registers as a structure. </p>\n\n<p>Measure the number of cycles taken by the counter function. This is later subtracted from any measurements.</p>\n\n<pre><code>  SysTick-&gt;VAL = 0; // set 0\n  // Measure delay on measurement  \n  __disable_irq();\n  a = (uint32_t) SysTick-&gt;VAL;\n  //... measuring zero instructions\n  b = (uint32_t) SysTick-&gt;VAL;\n  __enable_irq();\n  measure_delay = a - b;\n</code></pre>\n\n<p>Now measure a function.</p>\n\n<pre><code>SysTick-&gt;VAL = 0;\n__disable_irq();\na = (uint32_t) SysTick-&gt;VAL;\n\n//Assuming this function doesn't require interruptions\n\n// INSERT CODE TO BE PROFILED\nfunction_to_be_examined();\n\nb = (uint32_t) SysTick-&gt;VAL;\n__enable_irq();\ncycles_profiled_code = a - b - measure_delay;\n</code></pre>\n\n<p>I hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 888, "user_id": 1096140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5rFfC.jpg?s=128&g=1", "display_name": "hesham_EE", "link": "https://stackoverflow.com/users/1096140/hesham-ee"}, "is_accepted": false, "score": 3, "last_activity_date": 1450460467, "creation_date": 1450460467, "answer_id": 34361126, "question_id": 32610019, "link": "https://stackoverflow.com/questions/32610019/arm-m4-instructions-per-cycle-ipc-counters/34361126#34361126", "title": "ARM M4 Instructions per Cycle (IPC) counters", "body": "<p>The code sample you provided has a problem in clearing the enable bit. You should clear the bit sing 'AND' not 'OR':</p>\n\n<pre><code>*DWT_CONTROL = *DWT_CONTROL &amp; 0xFFFFFFFE ; // disable the counter by clearing the enable bit\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 748, "user_id": 277432, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ac6e60b932e0315c75ce0095791c2276?s=128&d=identicon&r=PG", "display_name": "Sil", "link": "https://stackoverflow.com/users/277432/sil"}, "edited": false, "score": 0, "creation_date": 1580659951, "post_id": 45899755, "comment_id": 106161663, "body": "Did you find out how to collect the counter overflow events from program execution without affecting them?"}], "tags": [], "owner": {"reputation": 29, "user_id": 7216187, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O9bPggo7-S8/AAAAAAAAAAI/AAAAAAAAABM/pZED6EdLgrs/photo.jpg?sz=128", "display_name": "ling jun kong", "link": "https://stackoverflow.com/users/7216187/ling-jun-kong"}, "is_accepted": false, "score": 2, "last_activity_date": 1503782304, "creation_date": 1503782304, "answer_id": 45899755, "question_id": 32610019, "link": "https://stackoverflow.com/questions/32610019/arm-m4-instructions-per-cycle-ipc-counters/45899755#45899755", "title": "ARM M4 Instructions per Cycle (IPC) counters", "body": "<p>I think if you want to measure accuracy cycles, using debugger is a good choice. the Keil-MDK could accumulate the state register and will not overflow. the result in debugger is the same as the result using DWT.</p>\n\n<p>if you want to measure the other values ie FOLDCNT, using trace in Keil-MDK -> Debug -> Setting -> Trace -> Trace Enable.</p>\n\n<p>With that, while debugging, in the Trace Windows choose trace event, the value of those 8 bits register could be collected and added together by Keil.</p>\n\n<p>It seems a little stupid but I don't know how to collect the event of overflow, I think this event could only be send to ITM, because either the DWT or the ITM is individual component out of the program. if we want to collect the event in customer program, the collect action will must effect the accuracy of the result.</p>\n\n<p>ITM? ETM? CoreSight? DWT?AHB?</p>\n"}], "owner": {"reputation": 349, "user_id": 223969, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mFhG4.jpg?s=128&g=1", "display_name": "FrankPak", "link": "https://stackoverflow.com/users/223969/frankpak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7760, "favorite_count": 9, "answer_count": 3, "score": 13, "last_activity_date": 1503782304, "creation_date": 1442410178, "last_edit_date": 1461832742, "question_id": 32610019, "link": "https://stackoverflow.com/questions/32610019/arm-m4-instructions-per-cycle-ipc-counters", "title": "ARM M4 Instructions per Cycle (IPC) counters", "body": "<p>I would like to count the number of Instructions per Cycle executed on an ARM cortex-M4 (or cortex-M3) processor.</p>\n\n<p>What it's needed is: <strong>number of instructions</strong> (executed at runtime) of the code I want to profile and <strong>number of cycles</strong> that the code takes to execute.</p>\n\n<p><strong>1 - Number of Cycles</strong></p>\n\n<p>Use the cycle counter is quite easy and straightforward. </p>\n\n<pre><code>volatile unsigned int *DWT_CYCCNT  ;\nvolatile unsigned int *DWT_CONTROL ;\nvolatile unsigned int *SCB_DEMCR   ;\n\nvoid reset_timer(){\n    DWT_CYCCNT   = (int *)0xE0001004; //address of the register\n    DWT_CONTROL  = (int *)0xE0001000; //address of the register\n    SCB_DEMCR    = (int *)0xE000EDFC; //address of the register\n    *SCB_DEMCR   = *SCB_DEMCR | 0x01000000;\n    *DWT_CYCCNT  = 0; // reset the counter\n    *DWT_CONTROL = 0; \n}\n\nvoid start_timer(){\n    *DWT_CONTROL = *DWT_CONTROL | 1 ; // enable the counter\n}\n\nvoid stop_timer(){\n    *DWT_CONTROL = *DWT_CONTROL | 0 ; // disable the counter    \n}\n\nunsigned int getCycles(){\n    return *DWT_CYCCNT;\n}\n\nmain(){\n    ....\n    reset_timer(); //reset timer\n    start_timer(); //start timer\n    //Code to profile\n    ...\n    myFunction();\n    ...\n    stop_timer(); //stop timer\n    numCycles = getCycles(); //read number of cycles \n    ...\n}\n</code></pre>\n\n<p><strong>2 - Number of Instructions</strong></p>\n\n<p>I found some documentation surfing the internet to count the number of instructions executed by the arm cortex-M3 and cortex-M4 (<a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka16403.html\" rel=\"noreferrer\">link</a>):</p>\n\n<pre><code>  # instructions = CYCCNT - CPICNT - EXCCNT - SLEEPCNT - LSUCNT + FOLDCNT\n</code></pre>\n\n<p>The registers that they mention are documented <a href=\"http://infocenter.arm.com/help/topic/com.arm.doc.ddi0337e/DDI0337E_cortex_m3_r1p1_trm.pdf\" rel=\"noreferrer\">here</a> (from page 11-13) and these are the memory addresses to access them:</p>\n\n<pre><code>DWT_CYCCNT   = 0xE0001004\nDWT_CONTROL  = 0xE0001000\nSCB_DEMCR    = 0xE000EDFC\nDWT_CPICNT   = 0xE0001008\nDWT_EXCCNT   = 0xE000100C\nDWT_SLEEPCNT = 0xE0001010\nDWT_LSUCNT   = 0xE0001014\nDWT_FOLDCNT  = 0xE0001018\n</code></pre>\n\n<p>The DWT_CONTROL register is used to enable counters, especially cycle counter as documented <a href=\"http://infocenter.arm.com/help/topic/com.arm.doc.ddi0337e/ch11s05s01.html#BABEHDCI\" rel=\"noreferrer\">here</a>.</p>\n\n<p>But when I tried to put all together to count the number of instructions executed per cycle I didn't succeed. </p>\n\n<p><a href=\"http://stm32.izua.ro/wiki/DWT_unit\" rel=\"noreferrer\">Here</a> there is a small guide on how to use them from gdb.</p>\n\n<p>What is not easy is that some registers are 8 bit registers (DWT_CPICNT, DWT_EXCCNT, DWT_SLEEPCNT, DWT_LSUCNT, DWT_FOLDCNT) and when they overflow they trigger an event. I didn't find a way to collect that event. There are no code snippet that explains how to do that or interrupt routines suitable for that.</p>\n\n<p>It seems moreover that using watchpoints from gdb on the addresses of those registers doesn't work. gdb is not able to stop when registers change value. E.g. on DWT_LSUCNT:</p>\n\n<pre><code>(gdb) watch *0xE0001014\n</code></pre>\n\n<p>Update: I found this <a href=\"https://github.com/PetteriAimonen/STM32_Trace_Example\" rel=\"noreferrer\">project</a> on GitHub explaining how to use DWT, ITM and ETM units. But I didn't check if it works! I will post updates.</p>\n\n<p>Any idea on how to use them?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1442410187, "post_id": 32609770, "comment_id": 53070908, "body": "How is <code>parameters</code> initialized ?"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 2, "creation_date": 1442410242, "post_id": 32609770, "comment_id": 53070964, "body": "if (pp &gt;= &amp;params[num_params]) isn&#39;t that a strange comparison"}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 1, "last_activity_date": 1442410467, "creation_date": 1442410467, "answer_id": 32610134, "question_id": 32609770, "link": "https://stackoverflow.com/questions/32609770/how-to-free-memory-after-strsep/32610134#32610134", "title": "How to free memory after strsep()?", "body": "<p>You have a couple of options:</p>\n\n<ol>\n<li>Leave it to the caller to free <code>params[0]</code> and clearly state this in the documentation for the function.</li>\n<li>Remove the <code>const</code> from <code>input_string</code> and do the work in place. If the caller want to keep an unchanged copy the caller has to make a copy before calling the function.</li>\n<li>The caller has to provide a buffer that is at least as large as temp_string to be used as working area (extra parameter to <code>parse_parameters</code>). You copy the string there.</li>\n</ol>\n"}], "owner": {"reputation": 310, "user_id": 752728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f949ff8ed1fa9ebe4c8cc355870c39a2?s=128&d=identicon&r=PG", "display_name": "ragezor", "link": "https://stackoverflow.com/users/752728/ragezor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1368, "favorite_count": 0, "accepted_answer_id": 32610134, "answer_count": 1, "score": 1, "last_activity_date": 1442410467, "creation_date": 1442409517, "last_edit_date": 1442410150, "question_id": 32609770, "link": "https://stackoverflow.com/questions/32609770/how-to-free-memory-after-strsep", "title": "How to free memory after strsep()?", "body": "<p>I wrote this function:</p>\n\n<pre><code>char** parse_parameters(const char* input_string, int num_params, char** params) {\n    char *temp_string = strdup(input_string);\n    char **pp;\n    for (pp = params; (*pp = strsep(&amp;temp_string, \";\")) != NULL;) {\n        if (**pp == '\\0')\n            break;\n        pp++;\n        if (pp &gt;= &amp;params[num_params])\n            break;\n    }\n    free(temp_string);\n    return params;\n}\n</code></pre>\n\n<p>Which I'm using like this:</p>\n\n<pre><code>char *parameters[3];\nparse_parameters(\"some;delimited;string\", 3, parameters);\n</code></pre>\n\n<p>From my understanding inside <code>parameters</code> array I am pointing to memory which was already freed. But if I don't free inside <code>parse_parameters</code> function I have a memory leak. How should I solve this? </p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 1, "creation_date": 1442408652, "post_id": 32609388, "comment_id": 53069754, "body": "undefined behaviour is undefined.. use a debugger ( gdb, etc. ) to identify the problem and post the details"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1442409361, "post_id": 32609388, "comment_id": 53070257, "body": "<code>typedef struct Node *nodePointer;</code> Never hide pointers behind typedefs, that&#39;s bad style as it makes the program harder to read and understand."}, {"owner": {"reputation": 3, "user_id": 5342202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a76d609b08a1f87d10440ce49f35268?s=128&d=identicon&r=PG&f=1", "display_name": "May", "link": "https://stackoverflow.com/users/5342202/may"}, "edited": false, "score": 0, "creation_date": 1442413440, "post_id": 32609388, "comment_id": 53073440, "body": "I get it , thanks for you guys instruction !"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442425157, "post_id": 32609388, "comment_id": 53081110, "body": "except for the silly typedef: <code>... =  malloc(sizeof(node)); </code> works by coincidence (unless the OP uses a C++ compiler, which he should not)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442446440, "post_id": 32609388, "comment_id": 53091136, "body": "Use <code>gcc</code> to compile C , and <code>g++</code> to compile C++. They are different languages."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1442408958, "creation_date": 1442408958, "answer_id": 32609549, "question_id": 32609388, "link": "https://stackoverflow.com/questions/32609388/show-segmentation-fault-on-cygwin/32609549#32609549", "title": "Show &quot; Segmentation fault &quot; on cygwin", "body": "<p>In your code you have this:</p>\n\n<pre><code>if (ptr==NULL){\n    // ptr is NULL here and right after you dereference ptr\n    // so it's normal that you get a segfault\n    ptr-&gt;link = NewNode;\n</code></pre>\n\n<p>There are probably more issues here.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 5342202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a76d609b08a1f87d10440ce49f35268?s=128&d=identicon&r=PG&f=1", "display_name": "May", "link": "https://stackoverflow.com/users/5342202/may"}, "is_accepted": false, "score": 0, "last_activity_date": 1442424753, "last_edit_date": 1442424753, "creation_date": 1442424268, "answer_id": 32614970, "question_id": 32609388, "link": "https://stackoverflow.com/questions/32609388/show-segmentation-fault-on-cygwin/32614970#32614970", "title": "Show &quot; Segmentation fault &quot; on cygwin", "body": "<p>After correct , work well.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n\ntypedef struct Node *nodePointer;\nstruct Node{\n    int data;\n    nodePointer link;\n}node;\n\nnodePointer GetNewNode(){\n    nodePointer NewNode;    \n    NewNode = (nodePointer) malloc(sizeof(node));  \n    if (NewNode == NULL)\n        printf(\"memery is not enough\");\n    return NewNode;\n}\n\nnodePointer insert(nodePointer L,int NewData){\n    nodePointer NewNode,trace;\n    if(L==NULL){                \n        L = (nodePointer) malloc(sizeof(node));\n        L-&gt;data = NewData;\n        L-&gt;link = NULL;\n    }\n    else{                       \n        malloc(sizeof(node)); there no necessaryry\n        trace = L;\n        while(trace-&gt;link!=NULL) trace = trace-&gt;link;\n        NewNode = GetNewNode();\n        trace-&gt;link = NewNode;\n        NewNode-&gt;data = NewData;\n        NewNode-&gt;link = NULL;\n    }\n    return L;\n}\n\n int main(){\n    int data;\n    nodePointer L=NULL,visit=NULL;\n    printf(\"input data to storage, input -1 to print data\\n\");\n    while(data!=-1){                \n        scanf(\"%d\",&amp;data);\n        if(data==1) break;\n        L = insert(L,data);\n    }                           \n    visit = L;\n    while(visit!=NULL){\n        printf(\"%d\",visit-&gt;data);\n        visit = visit-&gt;link;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5342202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a76d609b08a1f87d10440ce49f35268?s=128&d=identicon&r=PG&f=1", "display_name": "May", "link": "https://stackoverflow.com/users/5342202/may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1657, "favorite_count": 0, "accepted_answer_id": 32609549, "answer_count": 2, "score": 0, "last_activity_date": 1442436819, "creation_date": 1442408520, "last_edit_date": 1442436819, "question_id": 32609388, "link": "https://stackoverflow.com/questions/32609388/show-segmentation-fault-on-cygwin", "title": "Show &quot; Segmentation fault &quot; on cygwin", "body": "<p>I'm using cygwin, installed gcc-g++ to compile c written using notepad++.</p>\n\n<p>I want to create a linked list to store data, but it always reports \"Segmentation fault (core dumped)\"</p>\n\n<p>I figured out that if I put \"printf(\"OK\")\" after the \"scanf\" in the 4th row of the main function it doesn't work but shows Segmentation fault again.</p>\n\n<p>Is this a memory management problem? or Pointer abuse?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n\nstruct Node{\n    int data;\n    struct Node *link;\n}node;\n\ntypedef struct Node *nodePointer;\n\n\nnodePointer GetNewNode(){           // create a new node\n    nodePointer NewNode;    \n    NewNode = (nodePointer) malloc(sizeof(node)); \n    if (NewNode == NULL)\n        printf(\"memery is not enough\");\n    return NewNode;\n}\n\nnodePointer insert(nodePointer ptr,nodePointer L,int NewData){  \n    nodePointer NewNode,trace;\n    NewNode = GetNewNode();\n    if(ptr==NULL){                  //to insert first Node\n        ptr-&gt;link = NewNode;\n        NewNode-&gt;link = NULL;\n        NewNode-&gt;data = NewData;\n        L = ptr;\n    }\n    else{                           //after insert first Node,insert next Node\n        trace = L;\n        while(trace-&gt;link!=NULL) trace = trace-&gt;link;\n        trace-&gt;link = NewNode;\n        NewNode-&gt;data = NewData;\n    }\n    return L;\n}\n\n int main(){\n    int data;\n    nodePointer ptr=NULL,L=NULL,visit=NULL;\n    printf(\"input data to storage, input 0 to print data\\n\");\n    scanf(\"%d\",&amp;data);\n    while(data!=0){                 // input data to store, input 0 to print data\n        L = insert(ptr,L,data);\n        scanf(\"%d\",&amp;data);\n    }\n    visit = L;\n    while(visit-&gt;link!=NULL)\n        printf(\"%d\",visit-&gt;data);\n}\n</code></pre>\n"}, {"tags": ["c", "input"], "comments": [{"owner": {"reputation": 379, "user_id": 3759282, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/73cf56ba6f4a205ee8208e90a535c0c9?s=128&d=identicon&r=PG&f=1", "display_name": "RDX", "link": "https://stackoverflow.com/users/3759282/rdx"}, "edited": false, "score": 0, "creation_date": 1442410604, "post_id": 32609139, "comment_id": 53071247, "body": "Means,Do you want to ignore empty inputs (space or newline)?"}, {"owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "edited": false, "score": 1, "creation_date": 1442411878, "post_id": 32609139, "comment_id": 53072219, "body": "If you have no input this code output 0, is it your desire?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1442413004, "post_id": 32609139, "comment_id": 53073115, "body": "The <code>scanf</code> does not work as expected because <code>%d</code> skips leading whitespace characters."}, {"owner": {"reputation": 165, "user_id": 5340936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc5000bed637e268744094c46d6f39b?s=128&d=identicon&r=PG&f=1", "display_name": "JavvaTheHutt", "link": "https://stackoverflow.com/users/5340936/javvathehutt"}, "edited": false, "score": 1, "creation_date": 1442413291, "post_id": 32609139, "comment_id": 53073340, "body": "I switched to fgets() and it works.  I was compiling the code wrong so the program was still using scanf from my very first attempt."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442647594, "post_id": 32609139, "comment_id": 53176896, "body": "With scanf() and with fgets(), always check the returned value (not the parameter value) to assure the operation was successful"}], "answers": [{"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1442412924, "post_id": 32609552, "comment_id": 53073053, "body": "<code>ch</code> should be an <code>int</code> as <code>getchar</code> returns an <code>int</code>."}], "tags": [], "owner": {"reputation": 4544, "user_id": 4226457, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PTjuI.png?s=128&g=1", "display_name": "dimlucas", "link": "https://stackoverflow.com/users/4226457/dimlucas"}, "is_accepted": false, "score": 6, "last_activity_date": 1442408974, "creation_date": 1442408974, "answer_id": 32609552, "question_id": 32609139, "link": "https://stackoverflow.com/questions/32609139/accepting-empty-strings-in-c/32609552#32609552", "title": "Accepting empty strings in C", "body": "<p>You should read the input character by character and stop reading if the read character is not a number:</p>\n\n<pre><code>char ch;\nwhile(1)\n{\n    ch=getchar();\n    if(isdigit(ch))\n    {\n        putchar(ch);\n    }\n    else\n    {\n        break;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 6, "creation_date": 1442409448, "post_id": 32609592, "comment_id": 53070319, "body": "This is a bad idea. <a href=\"http://stackoverflow.com/q/1694036/1679849\">Don&#39;t ever use <code>gets()</code>.</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 0, "creation_date": 1442436215, "post_id": 32609592, "comment_id": 53087294, "body": "@Enzo Ferber Please clarify &quot;needs a space before the type format in order to ignore whitespaces&quot;.  Certainly <code>scanf(&quot; %d&quot;, ...)</code>  and <code>scanf(&quot;%d&quot;, ...)</code> equally scan <code>int</code>."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442443200, "post_id": 32609592, "comment_id": 53090253, "body": "@chux Yes, I thought I had removed that."}], "tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": false, "score": 9, "last_activity_date": 1442411034, "last_edit_date": 1442411034, "creation_date": 1442409099, "answer_id": 32609592, "question_id": 32609139, "link": "https://stackoverflow.com/questions/32609139/accepting-empty-strings-in-c/32609592#32609592", "title": "Accepting empty strings in C", "body": "<p>According to definition of <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"noreferrer\">scanf()</a></p>\n\n<blockquote>\n  <p>The function will read and ignore any whitespace characters encountered before the next non-whitespace character.</p>\n</blockquote>\n\n<p>So you can not get your desired result using <code>scanf()</code>. \nAs <strong>gets()  is not safe and it misbehaves badly</strong>. you can use <a href=\"http://www.cplusplus.com/reference/cstdio/fgets/\" rel=\"noreferrer\">fgets()</a> to get input and convert it to integer if you need using <code>atoi()</code>.</p>\n\n<p>Here sample code you can try:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\nmain()\n{\n    int num;\n    char ch[100];\n    fgets(ch, sizeof ch, stdin);\n    if (strlen(ch)&gt;1&amp;&amp; ch[strlen(ch)-1] == '\\n')\n    {\n        ch[strlen(ch)-1] = '\\0';\n        num = atoi(ch);\n        printf(\"%i\\n\", num);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 5340936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc5000bed637e268744094c46d6f39b?s=128&d=identicon&r=PG&f=1", "display_name": "JavvaTheHutt", "link": "https://stackoverflow.com/users/5340936/javvathehutt"}, "edited": false, "score": 0, "creation_date": 1442412285, "post_id": 32609600, "comment_id": 53072545, "body": "I had tried code like this earlier. I just didn&#39;t realize that new code was not being compiled :( Thank you for the help!  It works!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1442435974, "post_id": 32609600, "comment_id": 53087176, "body": "<code>string[strlen(string) - 1] = &#39;\\0&#39;;</code> incorrectly truncates when there is no <code>&#39;\\n&#39;</code>.  It is undefined behavior should the first character be an rare embedded <code>&#39;\\0&#39;</code>.  Better to use  <a href=\"http://stackoverflow.com/a/28462221/2410359\">stackoverflow.com/a/28462221/2410359</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1442647809, "post_id": 32609600, "comment_id": 53176941, "body": "regarding this line: <code>string[strlen(string) - 1] = &#39;\\0&#39;;</code> this will not work correctly in all cases for two reasons.  1) as mentioned by chux, if no newline then the line will be corrupted.  2) if running under windows/dos, (where a newline is actually two characters)  this will not removed the newline, just corrupt it.  Suggest using something like: <code>char * offset = strstr( string, &quot;\\n&quot; );  if (NULL != offset) *offset = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442655744, "post_id": 32609600, "comment_id": 53179035, "body": "@user3629249: Agreed. Thanks"}], "tags": [], "owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "is_accepted": true, "score": 22, "last_activity_date": 1442409430, "last_edit_date": 1495542578, "creation_date": 1442409123, "answer_id": 32609600, "question_id": 32609139, "link": "https://stackoverflow.com/questions/32609139/accepting-empty-strings-in-c/32609600#32609600", "title": "Accepting empty strings in C", "body": "<blockquote>\n  <p>I also tried fgets but if space/newline is pressed, it still waits for more input that is not a space/newline before closing.<br></p>\n</blockquote>\n\n<p>Firstly <code>fgets</code> will work in this case. If you had shown us what exactly you tried to do using <code>fgets()</code> then answer to this question would have much narrow or very specific.</p>\n\n<p>I tried to do the same using <code>fgets()</code> and below is the code snippet.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{  \n    char string[100];\n    printf(\"Enter a number: \");\n\n    fgets (string, 100, stdin);\n    /* Here remove  the trailing new line char; not required unless you are trying to print the string */\n    string[strlen(string) - 1] = '\\0';\n\n    printf(\"Num is %d\\n\", atoi(string));\n\n    return 0;\n}\n</code></pre>\n\n<p>If there is no input or just enter or space and enter, then number printed will be zero and fgets() will not wait until you enter a valid number.</p>\n\n<p>Also check this on why you <strong>shouldn't use gets</strong>. <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Do not use gets()</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "is_accepted": false, "score": 2, "last_activity_date": 1442409247, "creation_date": 1442409247, "answer_id": 32609650, "question_id": 32609139, "link": "https://stackoverflow.com/questions/32609139/accepting-empty-strings-in-c/32609650#32609650", "title": "Accepting empty strings in C", "body": "<p>alright, you do not understand what scanf() does, it goes and scans entire input string and looks for special characters like %d, %f, %s and until it does not get what is in string it will wait.</p>\n\n<pre><code>scanf(\"%d %d\", a, b);\n</code></pre>\n\n<p>will get done only when you enter 2 integer values, if you press space it does not count as integer value so it will ignore it.</p>\n"}], "owner": {"reputation": 165, "user_id": 5340936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc5000bed637e268744094c46d6f39b?s=128&d=identicon&r=PG&f=1", "display_name": "JavvaTheHutt", "link": "https://stackoverflow.com/users/5340936/javvathehutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8061, "favorite_count": 3, "accepted_answer_id": 32609600, "answer_count": 4, "score": 15, "last_activity_date": 1531456671, "creation_date": 1442407892, "last_edit_date": 1531456671, "question_id": 32609139, "link": "https://stackoverflow.com/questions/32609139/accepting-empty-strings-in-c", "title": "Accepting empty strings in C", "body": "<p>My program can either accept a number of any length or empty input. However, if the input is empty (space or newline), the program continues to wait for an input. I also tried <code>fgets</code> but if space/newline is pressed, it still waits for more input that is not a space/newline before closing.</p>\n\n<p>Simpified code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nmain()\n{\n    int num;\n    scanf(\"%i\",&amp;num);\n    printf(\"%i\",num);\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>363792 \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>363792\n</code></pre>\n\n<p>Desired: </p>\n\n<p>Input:</p>\n\n<p>Output:</p>\n\n<p>I'm new to <em>C</em> and am having a very hard time accomplishing this.</p>\n\n<p>What tried using fgets:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nmain()\n{\n    int n;\n    char s[20];\n\n    fgets(s,20,stdin);\n    n = atoi(s);\n\n    printf(\"%i\",n);\n}\n</code></pre>\n\n<p>Edit: Turns out I was not compiling the code right. So every time I tried to make changes, it just looked at the original code using scanf.</p>\n"}, {"tags": ["c", "input", "buffer", "stdin", "fgets"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1442408192, "post_id": 32608929, "comment_id": 53069388, "body": "@JohnnyMopp <code>fflush(stdin);</code> is UB."}, {"owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1442408254, "post_id": 32608929, "comment_id": 53069445, "body": "I figured as much. Any suggestions?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1442408356, "post_id": 32608929, "comment_id": 53069533, "body": "<a href=\"http://stackoverflow.com/questions/22901901/what-does-fflushstdin-do-in-c-programing\">I see that now...</a>."}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "edited": false, "score": 0, "creation_date": 1442408842, "post_id": 32609347, "comment_id": 53069894, "body": "Man that&#39;s a hassle but I&#39;ll give it a go. My teacher asks for every bit of detail. If he asks why there\u2019s a second input and I say I don&#39;t know. Marks off for sure. Rightfully so of course!"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "edited": false, "score": 0, "creation_date": 1442409933, "post_id": 32609347, "comment_id": 53070705, "body": "@AndrewRicci If the last character in the string read by fgets isn&#39;t a <code>\\n</code>, then the line was too large to fit the buffer. The second input would be to consume the input that is left."}, {"owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "edited": false, "score": 0, "creation_date": 1442410482, "post_id": 32609347, "comment_id": 53071145, "body": "I want to thank you for your comment, Much appreciated."}], "tags": [], "owner": {"reputation": 1829, "user_id": 3601420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuFHu.png?s=128&g=1", "display_name": "Functino", "link": "https://stackoverflow.com/users/3601420/functino"}, "is_accepted": false, "score": 0, "last_activity_date": 1442408429, "creation_date": 1442408429, "answer_id": 32609347, "question_id": 32608929, "link": "https://stackoverflow.com/questions/32608929/c-prompted-for-a-second-input-and-does-nothing/32609347#32609347", "title": "C - Prompted for a second input and does nothing", "body": "<p>The answer to your question is right here: <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\">man <code>fgets</code></a></p>\n\n<blockquote>\n  <p><code>fgets()</code> reads in at most one less than <code>size</code> characters from <code>stream</code> and stores them into the buffer pointed to by <code>s</code>. Reading stops <strong>after</strong> an EOF or a <strong>newline</strong>. If a newline is read, it is stored into the buffer. A terminating null byte (<code>'\\0'</code>) is stored after the last character in the buffer. </p>\n</blockquote>\n\n<p>To know if <code>fgets</code> used the whole buffer, write some non-NUL byte into the end of the buffer. If, after calling <code>fgets</code>, that byte has been overwritten with a NUL, it means the buffer is full. If the character directly before it is not a newline, then there's more input still to be read.</p>\n\n<pre><code>buffer[size - 1] = 'a'; // any character that's not '\\0'\nfgets(buffer, size, stdin);\nif (buffer[size - 1] == '\\0' &amp;&amp; buffer[size - 2] == '\\n') {\n    // handle extra input\n}\n</code></pre>\n\n<p>Alternatively, you could just read bytes one at a time using <a href=\"http://linux.die.net/man/3/getchar\" rel=\"nofollow\"><code>getchar</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1442408724, "creation_date": 1442408724, "answer_id": 32609452, "question_id": 32608929, "link": "https://stackoverflow.com/questions/32608929/c-prompted-for-a-second-input-and-does-nothing/32609452#32609452", "title": "C - Prompted for a second input and does nothing", "body": "<p>I think you need this:</p>\n\n<p>Note: <code>x</code> must be <code>int</code> if you want to compare it against <code>EOF</code> </p>\n\n<pre><code>int main()\n{\n  int x;\n  char *word, string1[100];\n\n  do\n  {\n    fgets(string1, 100, stdin);\n    printf(\"The string is: %s\", string1);\n\n    word = strtok(string1, \" \");\n    while(word != NULL)\n    {\n      printf(\"%s\\n\", word);\n      word = strtok(NULL, \" \");\n    }\n\n    printf(\"Run Again?(y/n):\");\n    x = fgetc(stdin);\n    fgetc(stdin); // absorb `\\n`\n  }\n  while( (x=='y'||x=='Y') &amp;&amp; x != EOF) ;\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "edited": false, "score": 0, "creation_date": 1442410278, "post_id": 32609454, "comment_id": 53070994, "body": "Very good comment. Thank you for helping me understand fgets better. I have fixed this issue by checking string[99] for a null terminator and string[98] for not a next line char."}], "tags": [], "owner": {"reputation": 424, "user_id": 1349825, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DuQkY.jpg?s=128&g=1", "display_name": "ctag", "link": "https://stackoverflow.com/users/1349825/ctag"}, "is_accepted": true, "score": 0, "last_activity_date": 1442408727, "creation_date": 1442408727, "answer_id": 32609454, "question_id": 32608929, "link": "https://stackoverflow.com/questions/32608929/c-prompted-for-a-second-input-and-does-nothing/32609454#32609454", "title": "C - Prompted for a second input and does nothing", "body": "<p>From the man page:</p>\n\n<pre><code>fgets()  reads in at most one less than size characters from stream and stores them into the buffer pointed to by s.  Reading stops\n   after an EOF or a newline.  If a newline is read, it is stored into the buffer.  A terminating null byte ('\\0') is stored after the\n   last character in the buffer.\n</code></pre>\n\n<p><code>fgets</code> will place all input, up to 99 <code>chars</code>, into string1. If you input 98 characters and hit enter (creating a 99th <code>\\n</code>), then all 100 will be used as the last one is a <code>\\0</code> terminator. </p>\n\n<p>Then you fall into that small <code>while</code> loop which does nothing but consume another line of input. If you input less than the max for your string, then input is halted while that loop waits for a <code>\\n</code>.</p>\n\n<p>If you input >98 characters, then the first 99 are saved to your input string, and the remainder along with that final <code>\\n</code> are immediately run through that while loop, causing it to exit quickly enough that it may seem to be skipped.</p>\n\n<p>I hope that helps. Unfortunately I can't comment and ask for clarification, so I'll say here that it's a little difficult to tell what exactly you want fixed or made clear.</p>\n"}], "owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 32609454, "answer_count": 3, "score": 0, "last_activity_date": 1442410438, "creation_date": 1442407316, "last_edit_date": 1442410438, "question_id": 32608929, "link": "https://stackoverflow.com/questions/32608929/c-prompted-for-a-second-input-and-does-nothing", "title": "C - Prompted for a second input and does nothing", "body": "<p>this is my code below. What it does is not the issue. The issue is that once it is run, I put in my input and if its too small it will ask for input again on the second line which appears to have no affect the flow of my program. If I fill the buffer (which I'm assuming 100 or more) then I am not asked for a second prompt.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  int ch;\n  char x[3];\n  char *word, string1[100];\n  x[0]='y';\n\n  while(x[0]=='y'||x[0]=='Y')\n  {\n    fgets(string1, 100, stdin);\n    while ( (ch = fgetc(stdin)) != EOF &amp;&amp; ch != '\\n');\n    printf(\"The string is: %s\", string1);\n\n    word = strtok(string1, \" \");\n    while(word != NULL)\n    {\n      printf(\"%s\\n\", word);\n      word = strtok(NULL, \" \");\n    }\n\n    printf(\"Run Again?(y/n):\");\n    fgets(x, 2, stdin);\n    while ( (ch = fgetc(stdin)) != EOF &amp;&amp; ch != '\\n');\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>EDIT:\n I have replaced, </p>\n\n<pre><code>    fgets(string1, 100, stdin);\n    while ( (ch = fgetc(stdin)) != EOF &amp;&amp; ch != '\\n');\n</code></pre>\n\n<p>With, </p>\n\n<pre><code> fgets(string1, 100, stdin);\n if (string1[98] != '\\n' &amp;&amp; string1[99] == '\\0') \n { \n   while ( (ch = fgetc(stdin)) != EOF &amp;&amp; ch != '\\n'); \n }\n</code></pre>\n"}, {"tags": ["c", "runtime", "runtime-error"], "comments": [{"owner": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 0, "creation_date": 1442405251, "post_id": 32608107, "comment_id": 53067147, "body": "if the question is about a runtime error, you should print the error.. if it is a segfault, you should say so."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1442410112, "post_id": 32608107, "comment_id": 53070839, "body": "Vote to close as simple typo. The standard &quot;forgot &amp; in scanf&quot; mistake."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 1, "creation_date": 1442410123, "post_id": 32608107, "comment_id": 53070854, "body": "scanf(&quot;%d&quot;,a[i]); -&gt; scanf(&quot;%d&quot;,&amp;a[i]);"}], "answers": [{"tags": [], "owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "is_accepted": false, "score": 2, "last_activity_date": 1442405943, "creation_date": 1442405943, "answer_id": 32608416, "question_id": 32608107, "link": "https://stackoverflow.com/questions/32608107/why-is-this-code-giving-runtime-error/32608416#32608416", "title": "Why is this code giving runtime error?", "body": "<p>You have <code>scanf(\"%d\",a[i]);</code>.  Scanf is looking for a pointer to an integer, and you're passing an integer (which is likely to be 0 since you haven't assigned anything; note also that zero is generally equal to NULL).  You want  <code>scanf(\"%d\",&amp;a[i]);</code>.  Also note that your compiler should be giving you a warning about this... if using gcc, you should get in the habit of always compiling code with <code>-Wall</code></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2802155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iT3sa.jpg?s=128&g=1", "display_name": "Akshay Iyer", "link": "https://stackoverflow.com/users/2802155/akshay-iyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1501489545, "last_edit_date": 1501489545, "creation_date": 1442503219, "answer_id": 32634128, "question_id": 32608107, "link": "https://stackoverflow.com/questions/32608107/why-is-this-code-giving-runtime-error/32634128#32634128", "title": "Why is this code giving runtime error?", "body": "<p>Thanks everyone. I found out the error and used dynamic memory\n allocation for the program. This was the program I used. If somebody\n could help me cut down the code to few lines then please help.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int i,*ptr,t;\n    printf(\"Enter the count:\");\n    scanf(\"%d\",&amp;t);\n    ptr=(int*)malloc(t*sizeof(int));\n    if(ptr==NULL)\n    {\n        printf(\"Memory not allocated\\n\");\n        exit(0);\n    }\n    if(t&gt;=1)\n    {\n        for(i=0;i&lt;t;++i)\n        {\n            printf(\"Enter Data:\");\n            scanf(\"%d\",ptr+i);\n        }\n        for(i=0;i&lt;t;i++)\n        {\n            if((*(ptr+i))%2==0)\n                printf(\"%d is Even\\n\",*(ptr+i));\n            else\n                printf(\"%d is Odd\\n\",*(ptr+i));\n        }\n    }   \n    return 0;   \n\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 2802155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iT3sa.jpg?s=128&g=1", "display_name": "Akshay Iyer", "link": "https://stackoverflow.com/users/2802155/akshay-iyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1501489545, "creation_date": 1442405082, "question_id": 32608107, "link": "https://stackoverflow.com/questions/32608107/why-is-this-code-giving-runtime-error", "title": "Why is this code giving runtime error?", "body": "<blockquote>\n  <p>There will be multiple integers in the input. You have to write a\n  computer program to read each integer and print Even if the integer is\n  divisible by 2, else print Odd. To help further, the number of\n  integers (T) to read will be the first input to the computer program.</p>\n  \n  <p>Input Format:  First line of input contains count of integers: T. T>=1\n  After that, each line contains the integer N.</p>\n  \n  <p>Sample Input:</p>\n  \n  <p>2 4 5</p>\n  \n  <p>Sample Output:</p>\n  \n  <p>Even Odd</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{   \n    int i,T,a[10];/*Assuming Number of integers would be less than 10*/\n    printf(\"Enter the Number of integers\\n\");\n    scanf(\"%d\",&amp;T);\n    for(i=0;i&lt;T;i++)\n    {\n        scanf(\"%d\",a[i]);\n        printf(\"\\n\");\n    }\n    for(i=0;i&lt;T;i++)\n    {\n        if(a[i]%2==0)\n            printf(\"Even\\n\");\n        else\n            printf(\"Odd\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1442405192, "post_id": 32608099, "comment_id": 53067111, "body": "&quot;<i>If you go from left to right</i>&quot; There&#39;s your problem. Digits start from the right and increase in value to the left. I could append a zero to the left and it could be the exact same number."}, {"owner": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1442405459, "post_id": 32608099, "comment_id": 53067283, "body": "oops it was a typo. i meant right to left. for example the right most bit (index-0) in 1010 is 0 (even), index-1 bit  (odd) is 1, index-2 bit (even) is 0. For example index-2 bit is even, it should be set to 1, but it&#39;s zero. that&#39;s what i meant."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1442405463, "post_id": 32608099, "comment_id": 53067290, "body": "It depends on your point of view, is the first bit (the LSB) number 0 or number 1? Traditionally it&#39;s 0, and it fits well with everything else in C being zero-based, however it goes against all traditional numbering."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1442407072, "post_id": 32608099, "comment_id": 53068518, "body": "bit 0 is the most right-hand-side bit, or LSb(note: small &quot;b&quot;)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1442409665, "post_id": 32608099, "comment_id": 53070493, "body": "Bits are enumerated from bit 0 and upwards. They are not enumerated from 1 and upwards. So your book is incorrect, for odd numbers you need a 0xA mask and for even numbers you need a 0x5 mask."}, {"owner": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442417957, "post_id": 32608099, "comment_id": 53076675, "body": "@Lundin thank you!! that&#39;s what i needed to hear. i realised a few hours ago that my mistake was starting from zero (as always) instead of 1. but glad to hear that the index should indeed be starting from zero. but the thing is, do a quick google search and you will see many articles also following the authors method for using bit mask 0xA for even numbers and 0x5 for odd. you should make an answer explaining this so i can accept!"}], "answers": [{"tags": [], "owner": {"reputation": 6251, "user_id": 3345302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Zh9Jr.png?s=128&g=1", "display_name": "Sagar Jain", "link": "https://stackoverflow.com/users/3345302/sagar-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1442405302, "creation_date": 1442405302, "answer_id": 32608183, "question_id": 32608099, "link": "https://stackoverflow.com/questions/32608099/bitmask-and-selecting-even-bits/32608183#32608183", "title": "Bitmask and selecting even bits", "body": "<p>You need to count the position of the bits from right (LSB) as first bit (Odd) and second bit (Even).</p>\n"}, {"comments": [{"owner": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "edited": false, "score": 0, "creation_date": 1442405811, "post_id": 32608242, "comment_id": 53067569, "body": "yes i was starting at LSB, just a typo in my OP (fixed). I&#39;m not sure what you mean by &quot;uneven&quot; and &quot;filtered&quot;. Index 2 from right is set to 0, when it should be 1."}, {"owner": {"reputation": 422, "user_id": 4840776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4846ee49c10e24257150ff8accda638?s=128&d=identicon&r=PG&f=1", "display_name": "koldewb", "link": "https://stackoverflow.com/users/4840776/koldewb"}, "reply_to_user": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "edited": false, "score": 0, "creation_date": 1442406040, "post_id": 32608242, "comment_id": 53067745, "body": "Fixed therms, not sure what you mean by saying the index is wrong, its fine how it is."}], "tags": [], "owner": {"reputation": 422, "user_id": 4840776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4846ee49c10e24257150ff8accda638?s=128&d=identicon&r=PG&f=1", "display_name": "koldewb", "link": "https://stackoverflow.com/users/4840776/koldewb"}, "is_accepted": true, "score": 1, "last_activity_date": 1442405967, "last_edit_date": 1442405967, "creation_date": 1442405466, "answer_id": 32608242, "question_id": 32608099, "link": "https://stackoverflow.com/questions/32608099/bitmask-and-selecting-even-bits/32608242#32608242", "title": "Bitmask and selecting even bits", "body": "<p>The left to right thing is where you make a mistake. </p>\n\n<p>See what happens when you actually do it:</p>\n\n<p>In binary 32-bits:</p>\n\n<pre><code>your number: 1111 1111 1111 1111 1111 1111 1111 1111\n\nMask:        1010 1010 1010 1010 1010 1010 1010 1010\n\nresult:      1010 1010 1010 1010 1010 1010 1010 1010\n</code></pre>\n\n<p>The first bit (from the right!!!) is odd, and will be not get set when using <code>0xAAAAAAAAAA</code> as bitmask using the <code>AND</code> operator. Only the even bits will get set. Always start at the least significant bit.</p>\n"}], "owner": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1976, "favorite_count": 1, "accepted_answer_id": 32608242, "answer_count": 2, "score": 2, "last_activity_date": 1442405967, "creation_date": 1442405035, "last_edit_date": 1442405633, "question_id": 32608099, "link": "https://stackoverflow.com/questions/32608099/bitmask-and-selecting-even-bits", "title": "Bitmask and selecting even bits", "body": "<p>I'm reading a book that states:</p>\n\n<blockquote>\n  <p>To select all the even bits in a 32 bit unsigned int, we can AND the\n  number with the bitmask 0xAAAAAAAAAA, which is a 32 bit number with\n  even bits set (0xA is a decimal 10, 1010 binary). For selecting odd\n  bits we can AND with bitmask 0x5555555555, which is a number with all\n  even bits set (0x5 is decimal 5, 0101 in binary)</p>\n</blockquote>\n\n<p>What I don't get is how 0x or 1010 sets all even bits to 1. If you go from right to left starting from zero clearly it is the odd bits that are set. What am I missing?</p>\n"}, {"tags": ["c", "function", "input", "timer", "stdin"], "comments": [{"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1442404589, "post_id": 32607814, "comment_id": 53066658, "body": "What you need is working with threads. See: <a href=\"http://www.cs.cf.ac.uk/Dave/C/node29.html\" rel=\"nofollow noreferrer\">cs.cf.ac.uk/Dave/C/node29.html</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442410293, "post_id": 32607814, "comment_id": 53071006, "body": "There are no timers in standard C. Therefore, all answers will be system-specific, so you need to specify which system and compiler you are using."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1442416068, "post_id": 32607814, "comment_id": 53075463, "body": "<a href=\"http://stackoverflow.com/questions/448944/c-non-blocking-keyboard-input\" title=\"c non blocking keyboard input\">stackoverflow.com/questions/448944/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 5341763, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-60AT2qz2ZpY/AAAAAAAAAAI/AAAAAAAAATA/JNqa3P_mEU4/photo.jpg?sz=128", "display_name": "Abdurahman Shiine", "link": "https://stackoverflow.com/users/5341763/abdurahman-shiine"}, "edited": false, "score": 0, "creation_date": 1442426403, "post_id": 32607814, "comment_id": 53081889, "body": "I&#39;m using Visual Studio 2013"}], "answers": [{"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 0, "last_activity_date": 1442417312, "last_edit_date": 1442417312, "creation_date": 1442415790, "answer_id": 32612297, "question_id": 32607814, "link": "https://stackoverflow.com/questions/32607814/getting-an-input-from-the-user-without-having-to-wait-c-language/32612297#32612297", "title": "Getting an input from the user without having to wait - C language..!", "body": "<p>You can use ncurses to accomplish this. On Windows, something similar could be done with <code>kbhit()</code> and <code>getch()</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;time.h&gt;\n#include &lt;ncurses.h&gt;\n\nint main()\n{\n    char ch = 0;\n    int row = 0;\n    int line = 0;\n    int col = 0;\n    int counting = 1;\n    char text[80] = {\"\"};\n    long int elapsed = 0;\n    struct timeval start;\n    struct timeval stop;\n\n    initscr ( );\n    noecho ( );\n    timeout(100);\n    getmaxyx ( stdscr, row, col);\n    line = row / 2;\n    snprintf ( text, sizeof ( text), \"press 1 to exit or 2 to reset\");\n    mvprintw ( line - 1, ( col - strlen ( text)) / 2,\"%s\", text);\n    gettimeofday ( &amp;start, NULL);\n    while ( 1) {\n        if ( counting) {\n            gettimeofday ( &amp;stop, NULL);\n\n            elapsed = (stop.tv_sec - start.tv_sec);\n\n            snprintf ( text, sizeof ( text), \"         %ld         \", elapsed);\n            mvprintw ( line, ( col - strlen ( text)) / 2,\"%s\", text);\n            if ( elapsed &gt; 54) {\n                gettimeofday ( &amp;start, NULL);\n            }\n        }\n        else {\n            snprintf ( text, sizeof ( text), \"paused press 1 or 2\");\n            mvprintw ( line, ( col - strlen ( text)) / 2,\"%s\", text);\n        }\n        //refresh ( );\n        if ( ( ch = getch ( )) == '1' || ch == '2') {\n            if ( ch == '2') {\n                counting = !counting;\n                if ( counting) {\n                    gettimeofday ( &amp;start, NULL);\n                }\n            }\n            if ( ch == '1') {\n                break;\n            }\n        }\n    }\n    endwin ( );\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5341763, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-60AT2qz2ZpY/AAAAAAAAAAI/AAAAAAAAATA/JNqa3P_mEU4/photo.jpg?sz=128", "display_name": "Abdurahman Shiine", "link": "https://stackoverflow.com/users/5341763/abdurahman-shiine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 32612297, "answer_count": 1, "score": -1, "last_activity_date": 1442417312, "creation_date": 1442404241, "question_id": 32607814, "link": "https://stackoverflow.com/questions/32607814/getting-an-input-from-the-user-without-having-to-wait-c-language", "title": "Getting an input from the user without having to wait - C language..!", "body": "<p>I'm currently programming a simple timer, which runs from 00s to 55s and then start from 00 again and keeps counting until the user stops it. For that purpose I made two options for the user: 1. start &amp; 2. reset. Choosing number one runs the program, and choosing number two, as I its supposed, will turn the timer in to 00s and keep it there.</p>\n\n<p>Now the problem I'm facing is that I want to get an input from the user without stopping the timer (i.e. enabling the user to enter 2 at anytime while the program is running so he can stop the ongoing counting). I tried to use functions like getch() and scanf(), but they're stopping the timer, which is entirely ruining the program.</p>\n\n<p>Any help appreciated guys..!!</p>\n"}, {"tags": ["c", "arrays", "swift", "unsafe-pointers"], "answers": [{"comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1462661108, "post_id": 32608421, "comment_id": 61732628, "body": "Does this cause a memory leak? I can&#39;t find any indication that <code>UnsafeBufferPointer</code> will free its memory"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 1, "creation_date": 1462699837, "post_id": 32608421, "comment_id": 61739379, "body": "@AMomchilov: <code>UnsafeBufferPointer</code> is just a pointer, it does not allocate memory, so there is nothing to free. The <code>Array</code> is then managed by Swift."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1462725603, "post_id": 32608421, "comment_id": 61746634, "body": "Yes, but the pointer passed into <code>convert</code> has to be freed, right? That should be made explicit, IMO"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1462726174, "post_id": 32608421, "comment_id": 61746845, "body": "@AMomchilov: You are right, if the memory has been allocated then it must be freed eventually. But we don&#39;t know where that pointer comes from, it could point to static memory. As I see it, that is independent of the <code>convert</code> function."}, {"owner": {"reputation": 2872, "user_id": 3769927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5xhd.jpg?s=128&g=1", "display_name": "kabiroberai", "link": "https://stackoverflow.com/users/3769927/kabiroberai"}, "edited": false, "score": 0, "creation_date": 1474615903, "post_id": 32608421, "comment_id": 66612716, "body": "In Swift 3, the <code>let buffer</code> line should be <code>let buffer = data.withMemoryRebound(to: T.self, capacity: 1) {UnsafeBufferPointer(start: $0, count: length&#47;MemoryLayout&lt;T&gt;.stride)}</code>"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "reply_to_user": {"reputation": 2872, "user_id": 3769927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5xhd.jpg?s=128&g=1", "display_name": "kabiroberai", "link": "https://stackoverflow.com/users/3769927/kabiroberai"}, "edited": false, "score": 0, "creation_date": 1474616901, "post_id": 32608421, "comment_id": 66613291, "body": "@kabiroberai: Thanks, updated! (The capacity should be the number of target items as well.)"}, {"owner": {"reputation": 2872, "user_id": 3769927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5xhd.jpg?s=128&g=1", "display_name": "kabiroberai", "link": "https://stackoverflow.com/users/3769927/kabiroberai"}, "edited": false, "score": 0, "creation_date": 1474617026, "post_id": 32608421, "comment_id": 66613369, "body": "@MartinR welcome \ud83d\ude00 may I ask though, why does <code>capacity</code> need to be the number of items? It seems to work even when capacity is set to 1 (since <code>$0</code> only refers to the <i>start</i> and not the entire data)."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "reply_to_user": {"reputation": 2872, "user_id": 3769927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5xhd.jpg?s=128&g=1", "display_name": "kabiroberai", "link": "https://stackoverflow.com/users/3769927/kabiroberai"}, "edited": false, "score": 0, "creation_date": 1474617412, "post_id": 32608421, "comment_id": 66613585, "body": "@kabiroberai: Well, that is how I understand the description <i>&quot;Rebinds memory at self to type T with capacity to hold count adjacent T values while executing the body closure. &quot;</i>. I must admit that I don&#39;t know what the consequences of a different value would be."}], "tags": [], "owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "is_accepted": true, "score": 47, "last_activity_date": 1474616857, "last_edit_date": 1474616857, "creation_date": 1442405947, "answer_id": 32608421, "question_id": 32606989, "link": "https://stackoverflow.com/questions/32606989/converting-an-unsafepointer-with-length-to-a-swift-array-type/32608421#32608421", "title": "Converting an UnsafePointer with length to a Swift Array type", "body": "<p>You can simply initialize a Swift <code>Array</code> from an <code>UnsafeBufferPointer</code>:</p>\n\n<pre><code>func convert(length: Int, data: UnsafePointer&lt;Int8&gt;) -&gt; [Int8] {\n\n    let buffer = UnsafeBufferPointer(start: data, count: length);\n    return Array(buffer)\n}\n</code></pre>\n\n<p>This creates an array of the needed size and copies the data.</p>\n\n<p>Or as a generic function:</p>\n\n<pre><code>func convert&lt;T&gt;(count: Int, data: UnsafePointer&lt;T&gt;) -&gt; [T] {\n\n    let buffer = UnsafeBufferPointer(start: data, count: count);\n    return Array(buffer) \n}\n</code></pre>\n\n<p>where <code>length</code> is the number of <em>items</em> that the pointer points to.</p>\n\n<p>If you have a <code>UInt8</code> pointer but want to create an <code>[T]</code> array from \nthe pointed-to data, then this is a possible solution:</p>\n\n<pre><code>// Swift 2:\nfunc convert&lt;T&gt;(length: Int, data: UnsafePointer&lt;UInt8&gt;, _: T.Type) -&gt; [T] {\n\n    let buffer = UnsafeBufferPointer&lt;T&gt;(start: UnsafePointer(data), count: length/strideof(T));\n    return Array(buffer) \n}\n\n// Swift 3:\nfunc convert&lt;T&gt;(length: Int, data: UnsafePointer&lt;UInt8&gt;, _: T.Type) -&gt; [T] {\n    let numItems = length/MemoryLayout&lt;T&gt;.stride\n    let buffer = data.withMemoryRebound(to: T.self, capacity: numItems) {\n        UnsafeBufferPointer(start: $0, count: numItems)\n    }\n    return Array(buffer) \n}\n</code></pre>\n\n<p>where <code>length</code> now is the number of <em>bytes</em>. Example:</p>\n\n<pre><code>let arr  = convert(12, data: ptr, Float.self)\n</code></pre>\n\n<p>would create an array of 3 <code>Float</code>s from the 12 bytes pointed to by <code>ptr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 12270, "user_id": 116169, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/07d688a0c3f08059d5172b188222d1d8?s=128&d=identicon&r=PG", "display_name": "dugla", "link": "https://stackoverflow.com/users/116169/dugla"}, "edited": false, "score": 0, "creation_date": 1482239940, "post_id": 39271172, "comment_id": 69686048, "body": "This is insanely helpful. My C &lt;-&gt; Swift interop anxiety is just melting away."}, {"owner": {"reputation": 645, "user_id": 4697029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVSSj.jpg?s=128&g=1", "display_name": "tBug", "link": "https://stackoverflow.com/users/4697029/tbug"}, "reply_to_user": {"reputation": 12270, "user_id": 116169, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/07d688a0c3f08059d5172b188222d1d8?s=128&d=identicon&r=PG", "display_name": "dugla", "link": "https://stackoverflow.com/users/116169/dugla"}, "edited": false, "score": 0, "creation_date": 1511526149, "post_id": 39271172, "comment_id": 81900912, "body": "Nice to hear that ^^"}], "tags": [], "owner": {"reputation": 645, "user_id": 4697029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVSSj.jpg?s=128&g=1", "display_name": "tBug", "link": "https://stackoverflow.com/users/4697029/tbug"}, "is_accepted": false, "score": 2, "last_activity_date": 1472732923, "last_edit_date": 1472732923, "creation_date": 1472731600, "answer_id": 39271172, "question_id": 32606989, "link": "https://stackoverflow.com/questions/32606989/converting-an-unsafepointer-with-length-to-a-swift-array-type/39271172#39271172", "title": "Converting an UnsafePointer with length to a Swift Array type", "body": "<pre><code>extension NSData {\n\n    public func convertToBytes() -&gt; [UInt8] {\n        let count = self.length / sizeof(UInt8)\n        var bytesArray = [UInt8](count: count, repeatedValue: 0)\n        self.getBytes(&amp;bytesArray, length:count * sizeof(UInt8))\n        return bytesArray\n    }\n}\n</code></pre>\n\n<p>You can convert row data to byts (Uint8) </p>\n\n<p>Copy Extension and use it.. </p>\n"}, {"tags": [], "owner": {"reputation": 1959, "user_id": 441197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2wrtJ.jpg?s=128&g=1", "display_name": "Moose", "link": "https://stackoverflow.com/users/441197/moose"}, "is_accepted": false, "score": 0, "last_activity_date": 1609245824, "last_edit_date": 1609245824, "creation_date": 1609245248, "answer_id": 65492211, "question_id": 32606989, "link": "https://stackoverflow.com/questions/32606989/converting-an-unsafepointer-with-length-to-a-swift-array-type/65492211#65492211", "title": "Converting an UnsafePointer with length to a Swift Array type", "body": "<p>You can also use the Array init function:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>init(unsafeUninitializedCapacity: Int, initializingWith initializer: (inout UnsafeMutableBufferPointer&lt;Element&gt;, inout Int) throws -&gt; Void) rethrows\n</code></pre>\n<p>First convert the unsafeRawPointer to unsafePointer if needed\nThen convert the pointer to a buffer pointer, and finally the buffer pointer to an array.</p>\n<p>Example, assuming you have an unsafeRawPointer (<code>dataPtr</code>) and its size (<code>dataSize</code>)</p>\n<pre class=\"lang-swift prettyprint-override\"><code>let numberOfItems = dataSize / MemoryLayout&lt;MyClass&gt;.stride\n\nlet myArray = dataPtr.withMemoryRebound(to: MyClass.self,\n                                        capacity: numberOfItems) { typedPtr in\n    // Convert pointer to buffer pointer to access buffer via indices\n    let bufferPointer = UnsafeBufferPointer(start: typedPtr, count: numberOfItems)\n    // Construct array\n    return [MyClass](unsafeUninitializedCapacity: numberOfItems) { arrayBuffer, count in\n        count = numberOfItems\n        for i in 0..&lt;count {\n            arrayBuffer[i] = bufferPointer[i]\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 7768, "user_id": 1618592, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad57bfdca1515bea454f32c8b7f9d46a?s=128&d=identicon&r=PG", "display_name": "Ephemera", "link": "https://stackoverflow.com/users/1618592/ephemera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15825, "favorite_count": 3, "accepted_answer_id": 32608421, "answer_count": 3, "score": 31, "last_activity_date": 1609245824, "creation_date": 1442401932, "last_edit_date": 1517913747, "question_id": 32606989, "link": "https://stackoverflow.com/questions/32606989/converting-an-unsafepointer-with-length-to-a-swift-array-type", "title": "Converting an UnsafePointer with length to a Swift Array type", "body": "<p>I'm looking for the simplest ways to achieve reasonable C interoperability in Swift, and my current block is converting an <code>UnsafePointer&lt;Int8&gt;</code> (which was a <code>const char *</code>), into an <code>[Int8]</code> array.</p>\n\n<p>Currently, I have a na\u00efve algorithm that can take an <code>UnsafePointer</code> and a number of bytes and converts it to an array, element by element:</p>\n\n<pre><code>func convert(length: Int, data: UnsafePointer&lt;Int8&gt;) {\n\n    let buffer = UnsafeBufferPointer(start: data, count: length);\n    var arr: [Int8] = [Int8]()\n    for (var i = 0; i &lt; length; i++) {\n        arr.append(buffer[i])\n    }\n}\n</code></pre>\n\n<p>The loop itself can be sped up by using <code>arr.reserveCapacity(length)</code>, however that does not remove the issue of the loop itself.</p>\n\n<p>I'm aware of <a href=\"https://stackoverflow.com/q/25042695/1618592\">this SO question</a> which covers how to convert <code>UnsafePointer&lt;Int8&gt;</code>to <code>String</code>, however <code>String</code> is a different beast entirely to <code>[T]</code>. Is there a convenient Swift way of copying length bytes from an <code>UnsafePointer&lt;T&gt;</code> into a <code>[T]</code>? I'd prefer pure Swift methods, without passing through <code>NSData</code> or similar. If the above algorithm is really the only way to do it, I'm happy to stick with that.</p>\n"}, {"tags": ["c", "fseek"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5316723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de331f2b5144a5000efc5624eda674a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5316723/daniel"}, "edited": false, "score": 0, "creation_date": 1442401442, "post_id": 32606761, "comment_id": 53064588, "body": "ohhh so when you read you move the cursor across what you are reading. thanks for that!"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1442406399, "post_id": 32606761, "comment_id": 53068027, "body": "And if you&#39;re still wondering about the first question: <code>fseek( fptr, 0, SEEK_END)</code> will put the pointer <i>just beyond</i> the last character of the file, so you need <code>fseek( fptr, -1, SEEK_END)</code> to be in the right position to read the last character."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1442417043, "post_id": 32606761, "comment_id": 53076140, "body": "If you&#39;re doing a lot of <code>fseek()</code> calls along with <code>fgetc()</code> and/or small <code>fread()</code> calls, you&#39;re probably better off disabling buffering with <code>setbuf()</code> or <code>setvbuf()</code>; or using <code>open()</code>, <code>lseek()</code> and <code>read()</code> or just <code>pread()</code>.  <code>FILE *</code>-based IO by default is buffered, and the buffer size is usually something like 8KB.  But <code>fseek()</code> will invalidate the buffer, causing your next small <code>fread()</code> or <code>fgetc()</code> (a one-byte read) to be very likely to read an entire 8KB - again and again."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442477387, "post_id": 32606761, "comment_id": 53100726, "body": "@AndrewHenle Good point, but just to balance it: if the file is (or is usually) relatively small, such that (most of) it fits inside said buffer, sticking to the buffered functions may be better as the <code>fseek()</code>s should just reposition a pointer within the buffer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1442535709, "post_id": 32606761, "comment_id": 53132416, "body": "@TripeHound - True, but If the entire file can fit into a normal <code>FILE *</code> buffer, I&#39;d venture to say you&#39;re likely to be better off just reading it into a <code>char[]</code> and accessing the bytes directly.  But then again I&#39;m not a big fan of using the stdio set of <code>FILE *</code> based IO routines when performance really matters.  Given most OSes have a page cache, the stdio buffer can easily get redundant and actually slow things down.  In most cases, though, the best code is code that the developers working on it recognize and understand."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1442401269, "creation_date": 1442401269, "answer_id": 32606761, "question_id": 32606624, "link": "https://stackoverflow.com/questions/32606624/unsure-of-fseek-syntax-in-c/32606761#32606761", "title": "unsure of fseek syntax in c", "body": "<p>Lets say you are at position X in the file, then you read one character which moves the position to position X+1, then you want to go to the character before X which is position X-1. How much do you need to seek to go from position X+1 to position X-1? You need to seek -2 positions.</p>\n"}], "owner": {"reputation": 59, "user_id": 5316723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de331f2b5144a5000efc5624eda674a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5316723/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1442401269, "creation_date": 1442400882, "question_id": 32606624, "link": "https://stackoverflow.com/questions/32606624/unsure-of-fseek-syntax-in-c", "title": "unsure of fseek syntax in c", "body": "<p>I was just wondering with this code why you have to start reading at 1 place before the end in <code>fseek(fptr, -1, SEEK_END);</code> and why you have to go back 2 places instead of 1 in <code>fseek(fptr, -2, SEEK_CUR);</code>   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nFILE * fptr;\n\nint main()\n{\n    char letter;\n    int i;\n\n    fptr = fopen(\"/Users/Dan/Documents/Coding/alpbkw/alphabet.txt\", \"w+\");\n\n    if (fptr == 0)\n    {\n        printf(\"there was an error opening the file\");\n        exit(1);\n    }\n\n    for (letter = 'A'; letter &lt;= 'Z'; letter++) //knows how to count up the alphabet\n    {\n        fputc(letter,fptr); //note syntax. fputc puts characters in a file\n    }\n\n    puts(\"characters have been written in the file\");\n\n    fseek(fptr, -1, SEEK_END); //looks in fptr, starts from 1 byte before the end. the -1 is the offset. this statement shows where it starts, not how it cycles. i think end of file doesnt actually have a letter printed on it, its a placeholder or something\n    printf(\"here is the file backwards\\n\");\n\n    for (i=26;i&gt;0;i--) //starting from the last and counting backwards. goes through 26 times as expects 26 letters\n    {\n        letter = fgetc(fptr); //gets the letter it is currently on and reads it\n        fseek(fptr, -2, SEEK_CUR); //backs up 2 places, if back up twice you will only print z's.\n        printf(\"the next letter is %c.\\n\", letter);\n    }\n    fclose(fptr);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "file", "descriptor"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 11, "creation_date": 1442401276, "post_id": 32606608, "comment_id": 53064494, "body": "It&#39;s an opaque type, you&#39;re not supposed to find it in a public place. It&#39;s also extremely implementation-specific."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1442403033, "post_id": 32606608, "comment_id": 53065611, "body": "<a href=\"http://www.cplusplus.com/reference/cstdio/FILE/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/FILE</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1442404816, "post_id": 32606608, "comment_id": 53066833, "body": "Find some source code for <code>fopen</code>, <code>fread</code> and other <code>f...</code> functions  (there must be tons of it out there) and adapt it to your needs."}], "answers": [{"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": true, "score": 1, "last_activity_date": 1442402617, "creation_date": 1442402617, "answer_id": 32607215, "question_id": 32606608, "link": "https://stackoverflow.com/questions/32606608/file-type-in-c-language-linux/32607215#32607215", "title": "FILE type in C language (Linux)", "body": "<p>Not exactly a neat answer but will work </p>\n\n<p>Write some program like this say program.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n        FILE *fp;\n        return 0;\n}\n</code></pre>\n\n<p>compile with debugging symbols</p>\n\n<blockquote>\n  <p>gcc program.c -g -o program</p>\n</blockquote>\n\n<p>use gdb to see type</p>\n\n<pre><code># gdb ./program\n(gdb) b  main\n(gdb) run\n(gdb) ptype fp\ntype = struct _IO_FILE {\n    int _flags;\n    char *_IO_read_ptr;\n    char *_IO_read_end;\n    char *_IO_read_base;\n    char *_IO_write_base;\n    char *_IO_write_ptr;\n    char *_IO_write_end;\n    char *_IO_buf_base;\n    char *_IO_buf_end;\n    char *_IO_save_base;\n    char *_IO_backup_base;\n    char *_IO_save_end;\n    struct _IO_marker *_markers;\n    struct _IO_FILE *_chain;\n    int _fileno;\n    int _flags2;\n    __off_t _old_offset;\n    short unsigned int _cur_column;\n    signed char _vtable_offset;\n    char _shortbuf[1];\n    _IO_lock_t *_lock;\n    __off64_t _offset;\n    void *__pad1;\n    void *__pad2;\n    void *__pad3;\n    void *__pad4;\n    size_t __pad5;\n    int _mode;\n    char _unused2[20];\n} *\n</code></pre>\n\n<p>or check</p>\n\n<blockquote>\n  <p>/usr/include/stdio.h </p>\n</blockquote>\n\n<pre><code>typedef struct _IO_FILE FILE;\n</code></pre>\n\n<p>and </p>\n\n<blockquote>\n  <p>/usr/include/libio.h  </p>\n</blockquote>\n\n<pre><code>struct _IO_FILE {\n  int _flags;       /* High-order word is _IO_MAGIC; rest is flags. */\n#define _IO_file_flags _flags\n.\n.\n.\n}\n</code></pre>\n\n<p>In any case as @molbdnilo Pointed it is extremely implementation specific</p>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "edited": false, "score": 0, "creation_date": 1442404144, "post_id": 32607474, "comment_id": 53066359, "body": "Because programm will start before the OS."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "reply_to_user": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "edited": false, "score": 0, "creation_date": 1442405706, "post_id": 32607474, "comment_id": 53067471, "body": "So as kkk suggested you should look into /usr/include/libio.h if you are on linux."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1442414779, "post_id": 32607474, "comment_id": 53074528, "body": "Or just use <code>open&#47;read&#47;write</code> instead of badly reinventing the wheel."}, {"owner": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "edited": false, "score": 0, "creation_date": 1442419933, "post_id": 32607474, "comment_id": 53078032, "body": "You mean I woun&#39;t need to implement fopen, fwrite? Some simple functions? But it will be in a boot code..."}], "tags": [], "owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1442403284, "creation_date": 1442403284, "answer_id": 32607474, "question_id": 32606608, "link": "https://stackoverflow.com/questions/32606608/file-type-in-c-language-linux/32607474#32607474", "title": "FILE type in C language (Linux)", "body": "<p>Why do you want to implement it without standard library? Please use standard library if possible.</p>\n\n<p>I think this will give you an idea:</p>\n\n<pre><code>#ifndef _FILE_DEFINED\n#define _FILE_DEFINED\ntypedef struct _iobuf\n{\n    char*   _ptr;\n    int _cnt;\n    char*   _base;\n    int _flag;\n    int _file;\n    int _charbuf;\n    int _bufsiz;\n    char*   _tmpfname;\n} FILE;\n#endif  /* Not _FILE_DEFINED *\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5341901, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fe018f26e347b8cc941c45701d3b18c7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Gusev", "link": "https://stackoverflow.com/users/5341901/maxim-gusev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2244, "favorite_count": 0, "accepted_answer_id": 32607215, "answer_count": 2, "score": -1, "last_activity_date": 1442403748, "creation_date": 1442400854, "last_edit_date": 1442403748, "question_id": 32606608, "link": "https://stackoverflow.com/questions/32606608/file-type-in-c-language-linux", "title": "FILE type in C language (Linux)", "body": "<p>Where can I find the declaration of type <code>FILE</code> in sources files?</p>\n\n<p>I can't find it in <code>stdio.h</code>. I mean declaration.\nIs it <code>int</code> type? File description? Or it is a structure?</p>\n\n<p>I need to implement it in my code without standart library.</p>\n"}, {"tags": ["c", "file", "variadic-functions"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1442398480, "post_id": 32605559, "comment_id": 53062721, "body": "Don&#39;t you think that you should pass a variable number of file names, not of opened <code>FILE*</code> handles?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1442398501, "post_id": 32605559, "comment_id": 53062733, "body": "What is the signature of <code>fopen()</code>? your program causes undefined behavior."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1442398516, "post_id": 32605559, "comment_id": 53062743, "body": "Code a function which count the similar words on one given file..."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442398654, "post_id": 32605559, "comment_id": 53062838, "body": "fopen prototype is <code>FILE *fopen(const char *path, const char *mode);</code>. Your variable arguments must be paths and names of file as <code>string</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1442401098, "post_id": 32605559, "comment_id": 53064383, "body": "The way your function is designed, the files are already open. Your code should work if you remove the variable <code>f</code> and the <code>fopen</code> call. <code>currentFile</code> isn&#39;t a new file, it is just a pointer to an existing file object."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "edited": false, "score": 0, "creation_date": 1442400414, "post_id": 32605902, "comment_id": 53063971, "body": "@Coder123: Why all these restrictions? Is this a kind of homework assignment? What you ask for is really bad design. For example, passing <code>FILE *</code> pointers means that all files must be open when you call the function. Opening the files and closing them immediately after you have processed them is much cleaner."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1442410206, "post_id": 32605902, "comment_id": 53070926, "body": "@MOehm And safer, you cannot open an indefinite number of files, there is a limit."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1442410238, "last_edit_date": 1442410238, "creation_date": 1442398874, "answer_id": 32605902, "question_id": 32605559, "link": "https://stackoverflow.com/questions/32605559/variadic-function-reading-files-c/32605902#32605902", "title": "variadic function- reading files (c)", "body": "<p>If you are passing the file name or more precisely the path to the file, then this</p>\n\n<pre><code>FILE *currentFile;\ncurrentFile = va_arg(params, FILE *);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>char *currentFile;\ncurrentFile = va_arg(params, char *);\n</code></pre>\n\n<p>If you pass <code>FILE</code> pointers, you should not open them because if the rest of the program is correct then they shall be already opened inside the funcion, otherwise it doesn't make any sense to pass <code>FILE *</code>'s.</p>\n\n<p>So the function should probably be</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\nvoid countWords(char *word, char *filename, ...)\n{\n    va_list  params;\n    FILE *file;\n    int words;\n\n    words = 0;\n    va_start(params, file);\n    while (filename != NULL) \n    {\n        file = fopen(filename, \"r+\");\n        // comparing words in each file code\n        filename = va_arg(params, char *);\n    }\n    va_end(params);\n}\n</code></pre>\n\n<p>You would call it like this</p>\n\n<pre><code>countWords(\"example\", \"/path/to/file/1\", ..., \"/path/to/file/n\", NULL);\n</code></pre>\n\n<p>and you should be careful with string literals probably use the <code>const</code> qualifier in this situation, because even if the parameters are not string literals it wouldn't make sense to modify them inside <code>countWords()</code> so to prevent accidentally modifying them <code>const</code> could help, although you can always modify them anyway. Even if modifying a string literal invokes undefined behavior you cannot completely forbid your program from doing so.</p>\n"}, {"comments": [{"owner": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "edited": false, "score": 0, "creation_date": 1442417592, "post_id": 32606934, "comment_id": 53076458, "body": "im a student.. and i must use variadic function.. :) thank!"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1442401763, "creation_date": 1442401763, "answer_id": 32606934, "question_id": 32605559, "link": "https://stackoverflow.com/questions/32605559/variadic-function-reading-files-c/32606934#32606934", "title": "variadic function- reading files (c)", "body": "<blockquote>\n  <p>i need to create a variadic function</p>\n</blockquote>\n\n<p>Unless this is a homework assignment about variadic functions, you don't need a variadic function at all. Variadic functions are not type safe and type safety is a desirable property.</p>\n\n<p>Others have already pointed this out: You need a function that takes a filename and counts the occurrences of a word in a single file</p>\n\n<pre><code>size_t occurrences(const char *word, const char *filename) { ... }\n</code></pre>\n\n<p>You can then easily loop over an array of files, e.g.:</p>\n\n<pre><code>size_t count = 0;\n\nfor (int i = 1, i &lt; argc; i++) {\n    size += occurrence(\"pink\", argv[i]);\n}\n</code></pre>\n\n<p>If you like, you can wrap this in a separate function which takes an array of file names with a file count. This is easily done, because whether you take your files from a command line or from somewhere else, you already have them stored in some kind of array.</p>\n\n<p>Now consider the variadic variant, which makes sense only if you know the files you want to process at compile time, e.g.:</p>\n\n<pre><code>size_t n = var_occurrences(\"banana\",\n               \"alpha.txt\", \"beta.txt\", \"gamma.txt\", NULL);\n</code></pre>\n\n<p>The same can be achieved with the non-variadic approach:</p>\n\n<pre><code>const char *w = \"banana\";\nsize_t n = occurrences(w, \"alpha.txt\")\n         + occurrences(w, \"beta.txt\")\n         + occurrences(w, \"gamma.txt\");\n</code></pre>\n\n<p>This is a bit more typing, but everything else is much more straightforward. If you must use variadic functions, go ahead and look at iharob's answer. But variadic functions are not a good solution to your task.</p>\n"}], "owner": {"reputation": 631, "user_id": 3142625, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/O1tDP.jpg?s=128&g=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/3142625/coder123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 32605902, "answer_count": 2, "score": 0, "last_activity_date": 1442410238, "creation_date": 1442397991, "question_id": 32605559, "link": "https://stackoverflow.com/questions/32605559/variadic-function-reading-files-c", "title": "variadic function- reading files (c)", "body": "<p>i need to create a variadic function (stdarg library) which will loop through all the files i pass it and will count words similiar to a word i pass as a parameter,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\nvoid countWords(char* name, FILE* file, ...){\n    va_list  params;\n    FILE* currentFile;\n    FILE* f;\n    int words = 0;\n\n    va_start(params, file); \n    currentFile = file;\n\n    while (currentFile != NULL) \n    {\n\n    f = fopen(currentFile, \"r+\"); //which file should i open every time? this doesnt compile\n\n    // comparing words in each file code\n\n    currentFile = va_arg(params, FILE*);\n    }\n      va_end(params);\n}\n</code></pre>\n\n<p>i cant read the file (no metter what i try it doesnt compile), \nand how can i loop through each file comparing my word? i would really appreciate guidance</p>\n\n<p>thank you!</p>\n"}, {"tags": ["c", "function", "pointers", "recursion", "parameters"], "answers": [{"comments": [{"owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "edited": false, "score": 0, "creation_date": 1442398242, "post_id": 32605495, "comment_id": 53062577, "body": "The call to <code>ComputeSum</code> inside Readdata is completely useless and can simply be dropped. The line that says <code>total = ComputeSum(x,y,z)</code> is correct as-is."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1442398705, "last_edit_date": 1442398705, "creation_date": 1442397839, "answer_id": 32605495, "question_id": 32605419, "link": "https://stackoverflow.com/questions/32605419/how-to-use-a-user-input-function-with-another-function/32605495#32605495", "title": "How to use a user-input function with another function?", "body": "<p>This line in <code>ReadData()</code> is incorrect</p>\n\n<pre><code>scanf(\"%d %d %d\", &amp;x, &amp;y, &amp;z );\n</code></pre>\n\n<p>It should be </p>\n\n<pre><code>scanf(\"%d %d %d\", x, y, z );\n</code></pre>\n\n<p>because the three arguments are already pointers. The following line in the same function</p>\n\n<pre><code>ComputeSum(x,y,z);\n</code></pre>\n\n<p>is also incorrect, it should be</p>\n\n<pre><code>ComputeSum(*x, *y, *z);\n</code></pre>\n\n<p>But it is not even necessary since you don't use the result, and it is called in <code>main</code> anyway.</p>\n\n<p>Please enable compiler warnings and take notice of them, both these faults generate warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1442399311, "last_edit_date": 1442399311, "creation_date": 1442398074, "answer_id": 32605604, "question_id": 32605419, "link": "https://stackoverflow.com/questions/32605419/how-to-use-a-user-input-function-with-another-function/32605604#32605604", "title": "How to use a user-input function with another function?", "body": "<p>In function <code>void ReadData(int *x,int *y,int *z);</code></p>\n\n<pre><code>scanf(\"%d %d %d\", &amp;x, &amp;y, &amp;z );\n</code></pre>\n\n<p><code>x</code>,<code>y</code> and <code>z</code> are already pointers so you don't need to pass their address , just pass pointers-</p>\n\n<pre><code>scanf(\"%d %d %d\", x, y, z );\n</code></pre>\n\n<p>I don't understand why you call <code>ComputeSum()</code> in <code>ReadData()</code> as you call it already in <code>main()</code> .No need of that. </p>\n\n<pre><code>void ReadData(int *x,int *y,int *z)\n{\n   //your code\n   ComputeSum(x,y,z);    // Why ?? No need of it \n   return ;\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1442399239, "creation_date": 1442399239, "answer_id": 32606036, "question_id": 32605419, "link": "https://stackoverflow.com/questions/32605419/how-to-use-a-user-input-function-with-another-function/32606036#32606036", "title": "How to use a user-input function with another function?", "body": "<ul>\n<li><p>Here is your solution,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\nvoid ReadData(int *x,int *y,int *z);\nint ComputeSum(int x,int y,int z);\n\nint main()\n{\n  int x, y, z;\n  int total;\n\n  ReadData(&amp;x, &amp;y, &amp;z);\n  printf(\"\\n\");\n  printf(\"\\n\\n\");\n\n  system(\"PAUSE\");\n  return 0;\n\n  }\n  void ReadData(int *x,int *y,int *z)\n  {\n      printf(\"Enter three numbers : \");\n      scanf(\"%d %d %d\", x, y, z );\n      printf(\"\\n\");\n\n      int total = ComputeSum(*x,*y,*z);\n      printf(\"The total is: %d\", total);\n      return ;\n  }\n\n  int ComputeSum(int x,int y,int z)\n  {\n      int Sum = x+y+z;\n      return Sum;\n  }\n</code></pre></li>\n<li><p>Call ComputeSum function only from ReadData like this,</p>\n\n<pre><code>  int total = ComputeSum(*x,*y,*z);\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 67, "user_id": 5283614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f9b495dd406a106a3e2036f4bb579908?s=128&d=identicon&r=PG&f=1", "display_name": "JonSnow", "link": "https://stackoverflow.com/users/5283614/jonsnow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442399311, "creation_date": 1442397659, "question_id": 32605419, "link": "https://stackoverflow.com/questions/32605419/how-to-use-a-user-input-function-with-another-function", "title": "How to use a user-input function with another function?", "body": "<p>I have these two functions, ReadData which is suppose to take user input for three numbers, and the other function ComputeSum which is suppose to take the values entered by the user and add them together. I am trying to assign the result of the ComputeSum function to the <strong>total</strong> variable but it fails to print the correct total. Can someone explain what is causing this to occur?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\n\nvoid ReadData(int *x,int *y,int *z);\nint ComputeSum(int x,int y,int z);\n\n\nint main()\n{\n  int x, y, z;\n  int total;\n\n  ReadData(&amp;x, &amp;y, &amp;z);\n  printf(\"\\n\");\n\n  total = ComputeSum(x,y,z);\n\n  printf(\"The total is: %d\", total);\n\n\n\n  printf(\"\\n\\n\");\n\nsystem(\"PAUSE\");\nreturn 0;\n\n}\n\n\n\n\nvoid ReadData(int *x,int *y,int *z)\n{\nprintf(\"Enter three numbers : \");\nscanf(\"%d %d %d\", &amp;x, &amp;y, &amp;z );\nprintf(\"\\n\");\n\nComputeSum(x,y,z);\n\nreturn ;\n}\n\nint ComputeSum(int x,int y,int z)\n{\nint Sum = x+y+z;\n\nreturn Sum;\n}\n\n___________________________________________________________________\n\n     **Sample Output**\n\n Enter three numbers : 5 5 5\n\n\nThe total is: 8869621\n\nPress any key to continue . . .\n</code></pre>\n\n<hr>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1442396068, "post_id": 32604710, "comment_id": 53061174, "body": "The time it takes to search a linked list depends heavily on the length of the list. With one or two elements, it would be <i>extremely</i> fast."}, {"owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1442396811, "post_id": 32604710, "comment_id": 53061659, "body": "I have made a loop and it loops for 100 times, and the path is so long so that linked list gets slower, but it doesn&#39;t, still its faster than the hash table"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1442396973, "post_id": 32604710, "comment_id": 53061762, "body": "100 elements is not a lot. Also, are the results statistically significant?"}, {"owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1442397269, "post_id": 32604710, "comment_id": 53061947, "body": "@amit, linked list taskes 11 ms while hashtable takes 14 ms"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1442397482, "post_id": 32604710, "comment_id": 53062092, "body": "@AhmedSaleh (1) Repeat it with 1,000,000 elements. (2) is it <a href=\"https://en.wikipedia.org/wiki/Statistical_significance\" rel=\"nofollow noreferrer\">statistical significant</a>. (3) For 100 elements I bet array/vector will be faster than both."}, {"owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1442406238, "post_id": 32604710, "comment_id": 53067899, "body": "@amit You mean by elements, a search path or a linked elements of 1.000.000 ?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442424007, "post_id": 32604710, "comment_id": 53080513, "body": "<code>if (!htbl) {...}</code> it looks like you have your logic inverted... BTW: what <b>is</b> htable? where is it defined ?"}, {"owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1442433508, "post_id": 32604710, "comment_id": 53085823, "body": "@wildplasser I&#39;m inverting the logic if I&#39;m using the linkedlist, then I invert it back If I want to use hashtable"}], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 3841908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19338e6e4ad8a9f1772c2bd9122ca04c?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Dheus", "link": "https://stackoverflow.com/users/3841908/markus-dheus"}, "is_accepted": true, "score": 2, "last_activity_date": 1442420895, "creation_date": 1442420895, "answer_id": 32613998, "question_id": 32604710, "link": "https://stackoverflow.com/questions/32604710/hashtable-search-is-slower-than-linkedlist/32613998#32613998", "title": "hashtable search is slower than linkedlist", "body": "<p>It will mainly depend on how many elements there are to search through on each iteration of your for loop (i.e. how long the linked list formed by start_obj->next is) and how computationally expensive kh_get_str2int32, kh_end and kh_value are. Without knowing the average length of the linked list and the implementation of your hash table functions it's impossible to give a more definite answer.</p>\n"}], "owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 32613998, "answer_count": 1, "score": -2, "last_activity_date": 1442420895, "creation_date": 1442395822, "question_id": 32604710, "link": "https://stackoverflow.com/questions/32604710/hashtable-search-is-slower-than-linkedlist", "title": "hashtable search is slower than linkedlist", "body": "<p>I have a tree structure, where each node contains its name and a reference to it using hashtable. </p>\n\n<p>I'm trying to search for a node in the structure using linked list once, and once using the hashtable. \nThe linked list search is faster than the hashtable. What could be the situations that hashtable search is slower than linked list ?</p>\n\n<p>here is the code the does both search</p>\n\n<pre><code> /* if there is a hasthable defined in the dpal object search using it */\n if(!htbl){\n    for (i= 0, j = 0; dpal_path[i] != 0; i++)\n    {\n      if (dpal_path[i] == sep)\n      {\n        khash_str_t key;\n        khiter_t entry;\n        const char *token = &amp;dpal_path[j];\n        size_t length = i-j;\n        j=i+1;\n        htbl = &amp;start_obj-&gt;obj_string_htbl;\n        key.str = token;\n        key.len = length;\n        /* look for the dpal object in the hashtable */\n        entry = kh_get_str2int32(htbl, key);\n        if (entry != kh_end(htbl)) {\n          start_obj=(dpal_obj_t*)kh_value(htbl, entry); \n          result = start_obj;\n        }\n        else{\n          result=DPAL_OBJ_HANDLE_INVALID;\n          break;\n        }\n      }\n    }\n  }\n  /* otherwise search for it using linked list structure */\n  else{\n    for (i= 0, j = 0; dpal_path[i] != 0; i++)\n    {\n      if (dpal_path[i] == sep)\n      {\n        const char *token = &amp;dpal_path[j];\n        size_t length = i-j;\n        j=i+1;\n        if(start_obj != NULL){\n          start_obj = start_obj-&gt;child;\n        }\n        while ((start_obj != NULL)){\n          if(strncmp(token, start_obj-&gt;static_props.name, length) == 0){\n            result = start_obj;\n            break; \n          }\n          /* get next handle in flat hierarchy */\n          start_obj=start_obj-&gt;next;\n          if(start_obj == NULL){\n            result = DPAL_OBJ_HANDLE_INVALID;\n          }\n        }\n      }\n    }\n  }\n</code></pre>\n"}, {"tags": ["c", "arrays", "scanf"], "comments": [{"owner": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 1, "creation_date": 1442396121, "post_id": 32604679, "comment_id": 53061208, "body": "Maybe I&#39;m missing something but can&#39;t you just read the data into variables (instead of into the array directly), then do your check and then insert into the array as needed?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1442396149, "post_id": 32604679, "comment_id": 53061223, "body": "Could you please show a &quot;bad&quot; way of using <code>fscanf</code> that works for you? By the way, the only wrong thing about <code>strtok</code> is fixed by <code>strtok_r</code>."}, {"owner": {"reputation": 1305, "user_id": 671636, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jxL3M.jpg?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/671636/matthias"}, "edited": false, "score": 0, "creation_date": 1442396277, "post_id": 32604679, "comment_id": 53061303, "body": "I do not think that fscanf is any better than strok. And strok is mainly considered as bad because of it is not &quot;thread safe&quot;. But does this matter to you? On the other hand I remember that fscanf has some disadvantages. I would either use the suggested strtok_r or use something different over which you have more control."}, {"owner": {"reputation": 1305, "user_id": 671636, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jxL3M.jpg?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/671636/matthias"}, "edited": false, "score": 0, "creation_date": 1442396399, "post_id": 32604679, "comment_id": 53061375, "body": "Another appraoch would be to use a standardised file format like JSON for example then you could use an existing parser and care about the more important parts of your program."}, {"owner": {"reputation": 326109, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1442396456, "post_id": 32604679, "comment_id": 53061417, "body": "@dasblinkenlight really? <code>strtok_r</code> <i>still</i> modifies the source string"}, {"owner": {"reputation": 73, "user_id": 4014390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0f03cb5d5133b104fd7869dbd48d2f?s=128&d=identicon&r=PG&f=1", "display_name": "caha11", "link": "https://stackoverflow.com/users/4014390/caha11"}, "reply_to_user": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 0, "creation_date": 1442396541, "post_id": 32604679, "comment_id": 53061479, "body": "Yeah, I haven&#39;t thought of that, @jpw you are correct... didn&#39;t realize it would be so simple. I am dumb. Sorry."}, {"owner": {"reputation": 73, "user_id": 4014390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0f03cb5d5133b104fd7869dbd48d2f?s=128&d=identicon&r=PG&f=1", "display_name": "caha11", "link": "https://stackoverflow.com/users/4014390/caha11"}, "edited": false, "score": 0, "creation_date": 1442396758, "post_id": 32604679, "comment_id": 53061619, "body": "I don&#39;t think it would matter, as they don&#39;t mark efficiency, only the output. But I thought fscanf would be much better, since the prof said it has problems + requires less lines/more readable. Thanks for the help."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 326109, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1442396850, "post_id": 32604679, "comment_id": 53061682, "body": "@sehe Modifying the string is not wrong, unless it&#39;s unexpected or undocumented. This behavior is easy to explain and to work around, if necessary. Inability to use <code>strtok</code> in two nested loops, on the other hand, is just wrong."}], "answers": [{"tags": [], "owner": {"reputation": 326109, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1442396580, "last_edit_date": 1442396580, "creation_date": 1442396134, "answer_id": 32604844, "question_id": 32604679, "link": "https://stackoverflow.com/questions/32604679/how-do-i-fscanf-data-within-range-only-instead-of-saving-the-whole-data/32604844#32604844", "title": "How do I fscanf data within range only, instead of saving the whole data?", "body": "<p>Whatever you waste it will never exceed the line length. Since yours is clearly a text format, a line length of 1024 is pretty typically the limit\u00b9.</p>\n\n<p>So, in worst case you require (several?) kilobytes of memory to parse each line. You can reuse that buffer and ignore the uninteresting values.</p>\n\n<p>Of course, you can write your own parser and be more memory efficient.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>There's also this: <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"nofollow\"><code>scanf</code></a>:</p>\n\n<ul>\n<li>(optional) assignment-suppressing character <code>*</code>. If this option is present, the function does not assign the result of the conversion to any receiving argument.</li>\n</ul>\n\n<hr>\n\n<p>\u00b9 it may vary of course</p>\n"}], "owner": {"reputation": 73, "user_id": 4014390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0f03cb5d5133b104fd7869dbd48d2f?s=128&d=identicon&r=PG&f=1", "display_name": "caha11", "link": "https://stackoverflow.com/users/4014390/caha11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 32604844, "answer_count": 1, "score": 0, "last_activity_date": 1442396580, "creation_date": 1442395737, "question_id": 32604679, "link": "https://stackoverflow.com/questions/32604679/how-do-i-fscanf-data-within-range-only-instead-of-saving-the-whole-data", "title": "How do I fscanf data within range only, instead of saving the whole data?", "body": "<p>Basically I have rows and columns of data. I know I can use fgets to read line by line and then tokenise the line with strtok. After that I can check if the last 2 tokens/values are within range using atoi(), and if they are, I can then store them into an array. However, I heard strtok is a bad way to do things, and fscanf seems a much cleaner approach. The problems with fscanf is that if I use it I will have to store all the values in arrays first, and then check which values are within range. Since I have a lot of rows, I don't know how big the arrays should be and it would waste a lot of space. Is there a way to fscanf with if statements?</p>\n\n<p>I don't know if it's a stupid question, thanks.</p>\n"}, {"tags": ["c", "matlab", "shared-libraries"], "owner": {"reputation": 235, "user_id": 2797959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c0c545379ada7f1ea03c9c47c8bcc3b7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandeep Bhat", "link": "https://stackoverflow.com/users/2797959/sandeep-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442395668, "creation_date": 1442395668, "question_id": 32604651, "link": "https://stackoverflow.com/questions/32604651/access-the-sub-structure-of-a-shared-library-in-matlab", "title": "Access the sub structure of a shared library in matlab", "body": "<p>I have a shared library of which the header file contains two stuctures</p>\n\n<pre><code>typedef struct\n{\nint check;\n} test_ts;\n\ntypedef struct\n{\ntest_ts new_s;\n} new_ts;\n</code></pre>\n\n<p>So I load the library in Matlab and try to create a structure pointer to the shared library, like below</p>\n\n<pre><code>libMasterStruct = libstruct('test_ts');\n</code></pre>\n\n<p>This works perfectly, where as the below doesn't work.</p>\n\n<pre><code>libMasterStruct = libstruct('new_ts');\n</code></pre>\n\n<p>I know this is because of the nested structure within, is there any way i can make this work?</p>\n"}, {"tags": ["c", "gmp"], "answers": [{"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 4, "last_activity_date": 1442396423, "last_edit_date": 1495542146, "creation_date": 1442396310, "answer_id": 32604910, "question_id": 32604536, "link": "https://stackoverflow.com/questions/32604536/gmp-mpz-sizeinbase-returns-size-2-for-9-in-base-10/32604910#32604910", "title": "GMP mpz_sizeinbase returns size 2 for 9 in base 10", "body": "<p>Note The last statement.</p>\n\n<p><em>the right amount of allocation is normally two more than the value returned by mpz_sizeinbase, one extra for a minus sign and one for the null-terminator.</em></p>\n\n<blockquote>\n  <p>size_t mpz_sizeinbase (mpz_t op, int base)</p>\n  \n  <p>Return the size of op measured in number of digits in the given base.\n  base can vary from 2 to 62. The sign of op is ignored, just the\n  absolute value is used. The result will be either exact or 1 too big.\n  If base is a power of 2, the result is always exact. If op is zero the\n  return value is always 1.</p>\n  \n  <p>This function can be used to determine the space required when\n  converting op to a string. The right amount of allocation is normally\n  two more than the value returned by mpz_sizeinbase, one extra for a\n  minus sign and one for the null-terminator.</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/5058222/number-of-digits-of-gmp-integer\">Similar question here worth looking at it </a></p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442441187, "post_id": 32618758, "comment_id": 53089625, "body": "Corner question: Can &quot;-0&quot; occur in <code>mpz_t</code>?"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442482932, "post_id": 32618758, "comment_id": 53103918, "body": "@chux: Not in current implementation of GMP. Both <code>+0</code> and <code>-0</code> are stored in the same manner, namely <code>_mp_size</code> field, that is responsible for storing sign is set to zero. See <a href=\"https://gmplib.org/manual/Integer-Internals.html#Integer-Internals\" rel=\"nofollow noreferrer\">16.1 Integer Internals</a> for more details."}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 3, "last_activity_date": 1442532153, "last_edit_date": 1495541651, "creation_date": 1442437764, "answer_id": 32618758, "question_id": 32604536, "link": "https://stackoverflow.com/questions/32604536/gmp-mpz-sizeinbase-returns-size-2-for-9-in-base-10/32618758#32618758", "title": "GMP mpz_sizeinbase returns size 2 for 9 in base 10", "body": "<p>The <a href=\"https://stackoverflow.com/a/32604910/586873\">kkk's answer</a> already explained the result of <code>mpz_sizeinbase</code>. However, if you want to obtain exact length in decimal base, you can convert it into character array with <a href=\"https://gmplib.org/manual/Converting-Integers.html#Converting-Integers\" rel=\"nofollow noreferrer\"><code>mpz_get_str</code></a> and then use <code>strlen</code> from C Standard library (<code>&lt;string.h&gt;</code>):</p>\n\n<pre><code>printf(\" has exact length %zu in base %d\\n\",\n    strlen(mpz_get_str(NULL, base, n)), base);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>90 has exact length 2 in base 10\n</code></pre>\n\n<p>There is one caveat though, for a negative number you may need to substract one, as string representation includes <code>-</code> sign.</p>\n"}], "owner": {"reputation": 2349, "user_id": 2422466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1eced71273c901be7a38f055c38eaec1?s=128&d=identicon&r=PG", "display_name": "Alexis Benoist", "link": "https://stackoverflow.com/users/2422466/alexis-benoist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 32618758, "answer_count": 2, "score": 2, "last_activity_date": 1442532153, "creation_date": 1442395374, "question_id": 32604536, "link": "https://stackoverflow.com/questions/32604536/gmp-mpz-sizeinbase-returns-size-2-for-9-in-base-10", "title": "GMP mpz_sizeinbase returns size 2 for 9 in base 10", "body": "<p>I'm trying to use libgmp and I encountered something strange using mpz_sizeinbase. If I use a number which starts by base - 1 the size is one too big. </p>\n\n<pre><code>#include &lt;gmp.h&gt;\nmpz_t n;\nint main() {\n    unsigned int base = 10;\n    mpz_init_set_str (n, \"90\", base);\n    mpz_out_str(stdout, base, n);\n    printf(\" has length %zu in base %d\\n\", mpz_sizeinbase (n, base), base);\n}\n</code></pre>\n\n<p>when I run it: </p>\n\n<pre><code>$ gcc -g draft.c -o draft -lgmp &amp;&amp; ./draft\n90 has length 3 in base 10\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["c", "gcc", "queue", "fedora"], "answers": [{"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1442394811, "last_edit_date": 1442394811, "creation_date": 1442394467, "answer_id": 32604190, "question_id": 32603835, "link": "https://stackoverflow.com/questions/32603835/error-in-c-program-using-fedora/32604190#32604190", "title": "Error in C program using Fedora", "body": "<p><code>gcc</code> is generally what you use to compile <em>C</em> code. If you want to compile <em>C++</em> code, you'd tend to use <code>g++</code>.</p>\n\n<p>Now it's true that <code>gcc</code> can compile C++ if it's clear you <em>have</em> a C++ program but I think, from memory, that's indicated by the extension rather than the content.</p>\n\n<p>Since your extension is <code>.c</code> rather than something like <code>.cpp</code> or <code>.cc</code> or <code>.cxx</code>, it will definitely think it's C code and behave accordingly.</p>\n\n<p>Hence the C++ header <code>queue</code> will not be available to you.</p>\n\n<p>My suggestion is that you name your C++ source files \"correctly\", or force the language type explicitly:</p>\n\n<pre><code>gcc -x c++ -o1 tempdaa.c\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4624035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1552763541641629/picture?type=large", "display_name": "Anoj kingston", "link": "https://stackoverflow.com/users/4624035/anoj-kingston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442396178, "creation_date": 1442393505, "last_edit_date": 1442396178, "question_id": 32603835, "link": "https://stackoverflow.com/questions/32603835/error-in-c-program-using-fedora", "title": "Error in C program using Fedora", "body": "<p>I get the following error when dealing with C using Fedora:</p>\n\n<pre><code>[king@localhost ~]$ gcc -o1 tempdaa.c\ntempdaa.c:3:17: fatal error: queue: No such file or directory\n#include &lt;queue&gt;\n         ^\ncompilation terminated.\n</code></pre>\n\n<p>Any ideas on where the problem is?</p>\n"}, {"tags": ["c", "gcc", "gdb", "memory-alignment", "memory-corruption"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1442393221, "post_id": 32603554, "comment_id": 53059313, "body": "You are reading a 32-letter key into a 24-byte buffer. Ouch."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 1, "creation_date": 1442393265, "post_id": 32603554, "comment_id": 53059337, "body": "try increasing length of destination buffers"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1442393629, "post_id": 32603554, "comment_id": 53059606, "body": "Never use <code>sprintf</code> but always use <a href=\"http://man7.org/linux/man-pages/man3/snprintf.3.html\" rel=\"nofollow noreferrer\">snprintf</a> e.g. <code>snprintf(timestamp, sizeof(timestamp), &quot;%s&quot;, p);</code>; consider also <a href=\"http://man7.org/linux/man-pages/man3/asprintf.3.html\" rel=\"nofollow noreferrer\">asprintf</a>"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1442394661, "post_id": 32603554, "comment_id": 53060280, "body": "try not to run programs as root user"}], "answers": [{"tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 3, "last_activity_date": 1442394190, "last_edit_date": 1442394190, "creation_date": 1442393433, "answer_id": 32603803, "question_id": 32603554, "link": "https://stackoverflow.com/questions/32603554/variable-data-corruption-with-c-gcc-on-fedora-17-64-bit/32603803#32603803", "title": "Variable data corruption with C GCC on Fedora 17 64 bit", "body": "<p>If this <code>\"316DEA40C62D6BA40B3C0AA2FE06C457\"</code> is the value which you need to copy on your <code>case 3</code>, then the destination buffer <code>key</code> is not large enough. </p>\n\n<p>This triggers undefined behavior and this is why you see strange result in <code>codesite</code> afterwards even though you didn't directly modify that.</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 961126, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4e1eabad826e85af690ceb3a4e1276b7?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/961126/rohit"}, "is_accepted": false, "score": 0, "last_activity_date": 1442393693, "creation_date": 1442393693, "answer_id": 32603903, "question_id": 32603554, "link": "https://stackoverflow.com/questions/32603554/variable-data-corruption-with-c-gcc-on-fedora-17-64-bit/32603903#32603903", "title": "Variable data corruption with C GCC on Fedora 17 64 bit", "body": "<p>Size of buffer which I allocated was less. Buffer size is 24 while I am trying to copy 33 characters to it. Hence, the memory is corrupted.\nWith the new size the problem is solved.</p>\n\n<p>char codesite[16] = {'\\0',};\nchar key[35] = {'\\0',};</p>\n\n<p>Thanks for the help</p>\n"}], "owner": {"reputation": 361, "user_id": 961126, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4e1eabad826e85af690ceb3a4e1276b7?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/961126/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 32603803, "answer_count": 2, "score": 0, "last_activity_date": 1442395258, "creation_date": 1442392714, "last_edit_date": 1442395258, "question_id": 32603554, "link": "https://stackoverflow.com/questions/32603554/variable-data-corruption-with-c-gcc-on-fedora-17-64-bit", "title": "Variable data corruption with C GCC on Fedora 17 64 bit", "body": "<p>I am creating a temporary buffer and copying a string to the buffer using sprintf. I then call the function analyzeRecordForPGDBOperation passing the buffer as parameter. I Parse the string with strtok using | as delimiter. I see a strange problem the value of codesite is corrupted later on even though its printed correctly in switch case 2. The value of codesite is incorrect when i print in case 3 and case 4.</p>\n\n<p>I tried to see the reson for it in gdb using a watch on the codesite variable, I get the following output but I am not sure why I get this issue.</p>\n\n<blockquote>\n  <p>[root@pe1800xs64 trunk]# uname -r\n  3.9.10-100.fc17.x86_64</p>\n</blockquote>\n\n<p>\"Output from GDB:\"</p>\n\n<blockquote>\n  <p>Old value = \"71663138\", '\\000' \n  New value = \"\\000\\061\\066\\066\\063\\061\\063\\070\", '\\000' </p>\n  \n  <p>0x00000038f30939ee in __strcpy_sse2_unaligned () from /lib64/libc.so.6</p>\n</blockquote>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() \n{\n    char tmp[256];\n    sprintf(tmp, \"%s\", \"99|71663138|316DEA40C62D6BA40B3C0AA2FE06C457|1442319758\");\n    analyzeRecordForPGDBOperation(tmp);\n    return 0;\n}\n\nvoid analyzeRecordForPGDBOperation(char *data)\n{\n    char tempBuff[256] = {'\\0',};\n    char park[16] = {'\\0',};\n    char codesite[16] = {'\\0',};\n    char key[24] = {'\\0',};\n    char timestamp[16] = {'\\0',};\n    int caseVal = 0;\n    sprintf(tempBuff, \"%s\", data);\n    char *p = strtok(tempBuff,\"|\");\n\n    for (; p != NULL; p = strtok(NULL, \"|\"))\n    {\n        caseVal++;\n        switch(caseVal)\n        {\n            case 1:\n                sprintf(park, \"%s\", p);\n                break;\n            case 2:\n                sprintf(codesite, \"%s\", p);\n                //Value of codesite is printed correctly here\n                printf(\"\\nCodesite: %s\\n\", codesite);\n                break;\n            case 3:\n                sprintf(key, \"%s\", p);\n                //Value of codesite is corrupted\n                printf(\"\\nCodesite Case 3: %s\\n\", codesite);\n                break;\n            case 4:\n                sprintf(timestamp, \"%s\", p);\n                //Value of codesite is corrupted\n                printf(\"\\nCodesite case 4: %s\\n\", codesite);\n                break;\n            default:\n                break;\n       }\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p>[root@pe1800xs64 trunk]# ./a.out</p>\n  \n  <p>analyzeRecordForPGDBOperation</p>\n  \n  <p>Codesite: 71663138</p>\n  \n  <p>Codesite Case 3:</p>\n  \n  <p>Codesite case 4:</p>\n</blockquote>\n"}, {"tags": ["c", "pragma"], "comments": [{"owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "edited": false, "score": 1, "creation_date": 1442392698, "post_id": 32603402, "comment_id": 53058992, "body": "Which compiler are you using?"}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 6, "creation_date": 1442392725, "post_id": 32603402, "comment_id": 53059006, "body": "I&#39;m guessing that you&#39;re using MSVC. AFAICT there is no pragma <code>unpack()</code>"}, {"owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "reply_to_user": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 3, "creation_date": 1442392850, "post_id": 32603402, "comment_id": 53059083, "body": "@Hasturkun - The Renesas compilers do support <code>#pragma unpack</code> though, but don&#39;t appear to support <code>#pragma pack(push)</code> :S."}, {"owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "edited": false, "score": 0, "creation_date": 1442392870, "post_id": 32603402, "comment_id": 53059095, "body": "I am running this program on my MBP - 2015 :) in case it matters"}, {"owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "reply_to_user": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1442392945, "post_id": 32603402, "comment_id": 53059144, "body": "In which case, Clang uses the same definition for <code>#pragma pack</code> as MSVC, so see @Hasturkun&#39;s answer."}], "answers": [{"comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 2, "creation_date": 1442393462, "post_id": 32603773, "comment_id": 53059493, "body": "Ignores it?  First I&#39;ve heard.  Those whining compilers will complain about anything..."}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 2, "creation_date": 1442394129, "post_id": 32603773, "comment_id": 53059928, "body": "@trojanfoe yes, <code>MSVC</code> issues a warning by default, <code>GCC</code> requires <code>-Wunknown-pragmas</code>. I guess <code>Clang</code> also keeps silence by default. Anyway, they aren&#39;t treated as errors."}], "tags": [], "owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "is_accepted": true, "score": 2, "last_activity_date": 1442394544, "last_edit_date": 1442394544, "creation_date": 1442393357, "answer_id": 32603773, "question_id": 32603402, "link": "https://stackoverflow.com/questions/32603402/pragma-pack-with-push-and-pop-vs-unpack/32603773#32603773", "title": "#pragma pack() with push and pop vs unpack", "body": "<p>Your compiler knows nothing about <code>unpack()</code> pragma, and just ignores it, so the same packing rules are applied to both structures.</p>\n\n<p><code>MSVC</code> compiler will issue a warning about unknown <code>#pragma</code> directives on first warning level.</p>\n\n<p>Both <code>GCC</code> and <code>Clang</code> keep silence by default. You need to use <code>-Wunknown-pragmas</code> flag.</p>\n"}], "owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4839, "favorite_count": 2, "accepted_answer_id": 32603773, "answer_count": 1, "score": 8, "last_activity_date": 1442394544, "creation_date": 1442392206, "last_edit_date": 1442392951, "question_id": 32603402, "link": "https://stackoverflow.com/questions/32603402/pragma-pack-with-push-and-pop-vs-unpack", "title": "#pragma pack() with push and pop vs unpack", "body": "<p>I have this sample program below</p>\n\n<pre><code>#include &lt;stdio.h&gt;                              \n#include &lt;stdlib.h&gt;\n\n#pragma pack(push)\n#pragma pack(1)\ntypedef struct{\n  char a;\n  int b;\n  char c;\n}st_a;\n#pragma pack(pop)\n\ntypedef struct{\n  char a;\n  int b;\n  char c;\n}st_b;\n\n\nint main()\n{\n  printf(\"size of struct a %zd \\n\",sizeof(st_a));\n  printf(\"size of struct b %zd \\n\",sizeof(st_b));\n\n  return 0;\n}\n</code></pre>\n\n<p>Output of the above program is</p>\n\n<pre><code>size of struct a 6 \nsize of struct b 12 \n</code></pre>\n\n<p>Now if I change the struct declaration as below:</p>\n\n<pre><code>#pragma pack(1)\ntypedef struct{\n  char a;\n  int b;\n  char c;\n}st_a;\n#pragma unpack()\n</code></pre>\n\n<p>Output of the program is</p>\n\n<pre><code>size of struct a 6 \nsize of struct b 6 \n</code></pre>\n\n<p>Why is this difference in the behaviour? My understanding was that both structure declarations are doing the same thing.</p>\n\n<p>I am running this on my MBP.</p>\n\n<pre><code>$gcc --version \n\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)\nTarget: x86_64-apple-darwin14.4.0\nThread model: posix\n</code></pre>\n"}, {"tags": ["c", "loops", "for-loop"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 7, "creation_date": 1442391551, "post_id": 32603156, "comment_id": 53058321, "body": "Indent your code correctly, and you will see that you don&#39;t have nested/inner loop."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1442391960, "post_id": 32603156, "comment_id": 53058566, "body": "The term &quot;nested loop&quot; means that you put one loop inside the other so that the inner loop executes for each iteration of the outer loop."}], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 2, "last_activity_date": 1442391751, "creation_date": 1442391751, "answer_id": 32603260, "question_id": 32603156, "link": "https://stackoverflow.com/questions/32603156/nested-for-loop-for-symbols/32603260#32603260", "title": "nested for loop for symbols", "body": "<p><strong>1.</strong> You need nested loops for simplest -</p>\n\n<pre><code>  for(x=1; x&lt;=h; x++)              // condition changed to x&lt;=h\n   {             \n     for(y=1; y&lt;=l; y++)           //condition changed to y&lt;=l\n      {          \n           printf(\"z \");\n      }\n      printf(\"\\n\");\n   }\n</code></pre>\n\n<p><strong>2.</strong>  <code>void main()</code> <strong>-></strong> <code>int main(void)</code> </p>\n\n<p>What you have right now are not <code>nested for loop's</code> .They are both independent loops.Thus you don't get correct output.</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1442391862, "creation_date": 1442391862, "answer_id": 32603289, "question_id": 32603156, "link": "https://stackoverflow.com/questions/32603156/nested-for-loop-for-symbols/32603289#32603289", "title": "nested for loop for symbols", "body": "<p>quite a few things are missing ( not just some codes )</p>\n\n<pre><code>    for(y=0; y&lt;h; y++){ \n            for(x=0; x&lt;l; x++){\n                    printf(\"z \");\n            }\n            printf(\"\\n\");\n    }\n</code></pre>\n\n<p>and </p>\n\n<blockquote>\n  <p>warning: return type of \u2018main\u2019 is not \u2018int\u2019</p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 5341220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ad50fc60bcb0eb4b88ba96ed74de4378?s=128&d=identicon&r=PG&f=1", "display_name": "Bong Meister", "link": "https://stackoverflow.com/users/5341220/bong-meister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "closed_date": 1442400921, "accepted_answer_id": 32603260, "answer_count": 2, "score": -4, "last_activity_date": 1442393204, "creation_date": 1442391392, "last_edit_date": 1442393204, "question_id": 32603156, "link": "https://stackoverflow.com/questions/32603156/nested-for-loop-for-symbols", "closed_reason": "Not suitable for this site", "title": "nested for loop for symbols", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid main() {\n    int h, l, x, y;\n    printf(\"Enter the length of the box : \");\n    scanf(\"%d\", &amp;l);\n    printf(\"Enter the height of the box : \");\n    scanf(\"%d\", &amp;h);\n\n   for(x=1; x&lt;=l; x++) {\n       printf(\"z \");\n   }\n   for(y=2; y&lt;=h; y++) {\n       printf(\"\\nz \");\n   }\n}\n</code></pre>\n\n<p>I know some codes are missing, I deleted them because they won't work.\nPlease tell me what to add to get it to work as below.</p>\n\n<p>eg : input l = 5, h = 3</p>\n\n<p>current output :</p>\n\n<p>z z z z z</p>\n\n<p>z</p>\n\n<p>z</p>\n\n<p>expected output :</p>\n\n<p>z z z z z</p>\n\n<p>z z z z z</p>\n\n<p>z z z z z</p>\n"}, {"tags": ["c", "embedded", "pic", "mplab"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442391625, "post_id": 32602715, "comment_id": 53058366, "body": "Internal oscillator usually has a bad accuracy, very bad compared to an external cristal. In your case with 250K baud  a minimal jitter of the base freq can put your RX out of baud tolerance. If I remember well PICs have INTOSC reg to calibrate the internal oscillator."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442391947, "post_id": 32602715, "comment_id": 53058560, "body": "Take note that temperature will cause internal oscillator to shift its accuracy."}, {"owner": {"reputation": 35, "user_id": 4993816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e36ac03a383a94de94e6fbda51cd660a?s=128&d=identicon&r=PG&f=1", "display_name": "flop", "link": "https://stackoverflow.com/users/4993816/flop"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442392322, "post_id": 32602715, "comment_id": 53058783, "body": "I know for the temperature. I don&#39;t understand because I mesure 8Mhz with my oscilloscope on the PIC."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442392437, "post_id": 32602715, "comment_id": 53058838, "body": "I&#39;m not getting you.."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1442392907, "post_id": 32602715, "comment_id": 53059119, "body": "Your second code set the UART at 250kb/s, but your first code doesn&#39;t. Your FOSC is at 10MHz, not 40MHz, so you get 62.5kb/s. Also, what is your problem ? You don&#39;t say anything. Does the PIC start at all ? Do you get a signal on the UART ?"}, {"owner": {"reputation": 35, "user_id": 4993816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e36ac03a383a94de94e6fbda51cd660a?s=128&d=identicon&r=PG&f=1", "display_name": "flop", "link": "https://stackoverflow.com/users/4993816/flop"}, "edited": false, "score": 0, "creation_date": 1442393377, "post_id": 32602715, "comment_id": 53059412, "body": "I use PLL in the first, so I have 40MHz. I haven&#39;t PWM on my output, so I think the handling of my UARTdoesn&#39;t occur."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1442393646, "post_id": 32602715, "comment_id": 53059618, "body": "You have 10MHz. It&#39;s even written in your code that <code>clock frequency = 4 x FOSC1</code> and your PIC doesn&#39;t support more than FOSC=10MHz in HS+PLL mode."}, {"owner": {"reputation": 35, "user_id": 4993816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e36ac03a383a94de94e6fbda51cd660a?s=128&d=identicon&r=PG&f=1", "display_name": "flop", "link": "https://stackoverflow.com/users/4993816/flop"}, "edited": false, "score": 0, "creation_date": 1442394081, "post_id": 32602715, "comment_id": 53059892, "body": "My first code works, and it is set for 250kb/s, this is not the problem."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1442398107, "post_id": 32602715, "comment_id": 53062489, "body": "Well, the PIC documentation clearly says that your FOSC is 10Mhz and your UART is 62.5kb/s. This means that, according to the documentation, you second code output the serial 4 times faster. If you are sure that the documentation is wrong, then we need more information, like what signal the UART actually outputs."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442398309, "post_id": 32602715, "comment_id": 53062623, "body": "Have you problem on RX or TX. Sending and receiving break signal (start if packet) and spool data at 250K is different if you have a ?40MHz? or a 8MHz FOSC..."}, {"owner": {"reputation": 35, "user_id": 4993816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e36ac03a383a94de94e6fbda51cd660a?s=128&d=identicon&r=PG&f=1", "display_name": "flop", "link": "https://stackoverflow.com/users/4993816/flop"}, "edited": false, "score": 0, "creation_date": 1442399188, "post_id": 32602715, "comment_id": 53063227, "body": "I just need to receive on the UART, and not send. On my first code, <code>#pragma config OSC = HSPLL      &#47;&#47; Oscillator Selection bits (HS oscillator, PLL enabled (clock frequency = 4 x FOSC1))</code>  so my clock frequency is 4 x 10MHz = 40MHz. After, with the calcul, I find SPBRG = 9 to have 250000kb/s. It is sure and verified. On my second code, <code>#pragma config OSC = IRCIO      &#47;&#47; Oscillator Selection bits (Internal oscillator block, port function on RA6 and port function on RA7)</code>  so my clock frequency is 8MHz . After, with the calcul, I find SPBRG = 1 to have 250000kb/s."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442399418, "post_id": 32602715, "comment_id": 53063357, "body": "I have a lot of experience on DMX. Slave devices usually must have DMA to spool data from UART at 250K. I think your PIC does not have DMAs and then: are you sure that 8MHz are enough to spool your RX and continue doing other things, such as change the PWM duty cycle?"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1442399852, "post_id": 32602715, "comment_id": 53063620, "body": "Did you actually verify the 250kb/s with an oscilloscope ? The formula is given as <code>((FOSC&#47;Desired Baud Rate)&#47;16) \u2013 1</code>, and your FOSC is 10MHz. You are confusing with the clock (FCY), which is 40MHz. FOSC is for OSCillator Frenquency, not clock."}, {"owner": {"reputation": 35, "user_id": 4993816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e36ac03a383a94de94e6fbda51cd660a?s=128&d=identicon&r=PG&f=1", "display_name": "flop", "link": "https://stackoverflow.com/users/4993816/flop"}, "edited": false, "score": 0, "creation_date": 1442404465, "post_id": 32602715, "comment_id": 53066567, "body": "I&#39;m sorry but my calculs are rights and it works with a quartz of 10MHz. I did programm which works in reception of DMX, so I don&#39;t understand. Yes it&#39;s enough, I saw a programm in assembler which works."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442404755, "post_id": 32602715, "comment_id": 53066789, "body": "C and assembler are very different in performance. With assembler you can tune all your code. How are you testing your communication? QLC+, custom software, a real master console?"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1442407286, "post_id": 32602715, "comment_id": 53068667, "body": "About the baud rate, it would be faster if you just tried your 2nd code with <code>BRGH=7</code>. If it still doesn&#39;t work, then there really is a mistake in the datasheet. In any case, it would help to know how you test your comm (what is on the other end), like LPs said."}], "owner": {"reputation": 35, "user_id": 4993816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e36ac03a383a94de94e6fbda51cd660a?s=128&d=identicon&r=PG&f=1", "display_name": "flop", "link": "https://stackoverflow.com/users/4993816/flop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442390808, "creation_date": 1442389906, "last_edit_date": 1442390808, "question_id": 32602715, "link": "https://stackoverflow.com/questions/32602715/uart-and-internal-clock-on-pic18f4431", "title": "UART and internal clock on PIC18F4431", "body": "<p>I made a programm with a PIC18F4431 on MPLABX with XC8. It sends PWM according the value which it receives on the UART (it is DMX, 250000kbits/s). This programm works, it runs with an external clock (quartz of 10MHz).</p>\n\n<p>Configuration bits :</p>\n\n<pre><code>// CONFIG1H\n#pragma config OSC = HSPLL      // Oscillator Selection bits (HS oscillator, PLL enabled (clock frequency = 4 x FOSC1))\n#pragma config FCMEN = OFF      // Fail-Safe Clock Monitor Enable bit (Fail-Safe Clock Monitor disabled)\n#pragma config IESO = OFF       // Internal External Oscillator Switchover bit (Internal External Switchover mode disabled)\n</code></pre>\n\n<p>UART configuration :</p>\n\n<pre><code>void Config_UART1 (void)\n{\n    BAUDCTLbits.BRG16 = 0;  // G\u00e9n\u00e9rateur 8 bits\n    SPBRG = 9; // Vitesse de transmission 250kbits/seconde\n    TXSTAbits.BRGH = 1; //Haute vitesse\n    TXSTAbits.SYNC = 0; // Asynchronous mode\n    RCSTAbits.SPEN = 1; // Serial port enabled\n    RCSTAbits.RX9 = 1; //Selects 9-bit reception\n    RCSTAbits.CREN = 1; // Enables receiver\n}\n</code></pre>\n\n<p>To improve my programm, I want to work with the internal clock (8MHz). I change my configuration bits and my UART configuration ; my programm doesn't work : do you know why?</p>\n\n<p>Configuration bits : </p>\n\n<pre><code>    // CONFIG1H\n#pragma config OSC = IRC      // Oscillator Selection bits (Internal oscillator block, CLKO function on RA6 and port function on RA7)\n#pragma config FCMEN = OFF      // Fail-Safe Clock Monitor Enable bit (Fail-Safe Clock Monitor disabled)\n#pragma config IESO = OFF       // Internal External Oscillator Switchover bit (Internal External Switchover mode disabled)\n</code></pre>\n\n<p>Oscillator configuration :</p>\n\n<pre><code>void Config_Oscill (void)\n{\n    OSCCONbits.IDLEN = 0b0; // Run mode enabled; CPU core is clocked in power-managed modes\n    OSCCONbits.IRCF = 0x7; // 8 MHz (8 MHz source drives clock directly)\n    OSCCONbits.SCS = 0x02; // Internal oscillator block (RC modes)\n}\n</code></pre>\n\n<p>UART configuration :</p>\n\n<pre><code>void Config_UART1 (void)\n{\n    BAUDCTLbits.BRG16 = 0;  // G\u00e9n\u00e9rateur 8 bits\n    SPBRG = 1; // Vitesse de transmission 250kbits/seconde\n    TXSTAbits.BRGH = 1; //Haute vitesse\n    TXSTAbits.SYNC = 0; // Asynchronous mode\n    RCSTAbits.SPEN = 1; // Serial port enabled\n    RCSTAbits.RX9 = 1; //Selects 9-bit reception\n    RCSTAbits.CREN = 1; // Enables receiver\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "bgp"], "answers": [{"comments": [{"owner": {"reputation": 5654, "user_id": 2735434, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78c287cbf5caae399b4f1ad45d9178b6?s=128&d=identicon&r=PG&f=1", "display_name": "dexterous", "link": "https://stackoverflow.com/users/2735434/dexterous"}, "edited": false, "score": 0, "creation_date": 1442391403, "post_id": 32602898, "comment_id": 53058231, "body": "Is that the reason, why it says &quot;no such file or directory&quot;?"}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "reply_to_user": {"reputation": 5654, "user_id": 2735434, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78c287cbf5caae399b4f1ad45d9178b6?s=128&d=identicon&r=PG&f=1", "display_name": "dexterous", "link": "https://stackoverflow.com/users/2735434/dexterous"}, "edited": false, "score": 0, "creation_date": 1442392418, "post_id": 32602898, "comment_id": 53058834, "body": "Yes. You can see in the kernel code (<a href=\"http://lxr.free-electrons.com/source/net/ipv4/tcp_ipv4.c?v=4.2#L955\" rel=\"nofollow noreferrer\"><code>tcp_md5_do_del</code></a>) that it returns <code>-ENOENT</code> if it can&#39;t find an entry for that address"}], "tags": [], "owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "is_accepted": false, "score": 0, "last_activity_date": 1442390466, "creation_date": 1442390466, "answer_id": 32602898, "question_id": 32602655, "link": "https://stackoverflow.com/questions/32602655/how-to-remove-the-authorization-set-by-tcp-md5sig-in-setsockopt-c-linux/32602898#32602898", "title": "How to remove the authorization set by TCP_MD5SIG in setsockopt - C, Linux?", "body": "<p>AFAICT, You need to ensure that <code>tcp_md5sig.tcpm_addr</code> is the same as when you registered to have it removed.</p>\n"}], "owner": {"reputation": 5654, "user_id": 2735434, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78c287cbf5caae399b4f1ad45d9178b6?s=128&d=identicon&r=PG&f=1", "display_name": "dexterous", "link": "https://stackoverflow.com/users/2735434/dexterous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442390466, "creation_date": 1442389674, "question_id": 32602655, "link": "https://stackoverflow.com/questions/32602655/how-to-remove-the-authorization-set-by-tcp-md5sig-in-setsockopt-c-linux", "title": "How to remove the authorization set by TCP_MD5SIG in setsockopt - C, Linux?", "body": "<p>I have used TCP_MD5SIG to create password/key for the connection using the API - setsockopt() in C, Linux. This works fine for me. However, when I use it to remove the password/disable authorization with the same API except that the </p>\n\n<pre><code>struct_tcp_md5sig.tcm_Key = 0;\nstruc tcp_md5sig.tcm_keylen = 0;\n\nI see that when I invoke the same API -\n\nrc = setsockopt(sock_fd, IPPROTO_TCP, TCP_MD5SIG, &amp;md5sig, sizeof(md5sig));\n\nI see that the rc is -1. The strerror says that \"no such file or directory\".\n</code></pre>\n\n<p>I am confused on what I should do to disable the authorization. The same API works, when I pass the password. On the other hand, the same API doesn't work when I want to disable the authorization. I have enabled this protocol in the kernel. So, there is no issue with enabling of this feature in kernel. </p>\n"}, {"tags": ["c", "linux", "ubuntu", "gcc", "pthreads"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1442402378, "post_id": 32602458, "comment_id": 53065203, "body": "OT: You probably better use <code>-pthread</code> to compile and link than just telling the linker to link the PThread library by specifying <code>-lpthread</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 3, "creation_date": 1442390545, "post_id": 32602530, "comment_id": 53057762, "body": "Upvote for explaining why there were no errors in first case"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 7, "last_activity_date": 1442390847, "last_edit_date": 1442390847, "creation_date": 1442389266, "answer_id": 32602530, "question_id": 32602458, "link": "https://stackoverflow.com/questions/32602458/clock-gettime-works-well-on-pc-but-on-a-server-it-aborts-compilation/32602530#32602530", "title": "clock_gettime() works well on PC but on a server it aborts compilation", "body": "<p>It's just a link error - you need to link <code>librt</code> - change:</p>\n\n<pre><code>gcc main_v8.c -lpthread\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>gcc -Wall main_v8.c -lpthread -lrt\n</code></pre>\n\n<p>Note that this is covered in the <a href=\"http://linux.die.net/man/2/clock_gettime\" rel=\"nofollow\">Linux man page for <code>clock_gettime</code></a>:</p>\n\n<blockquote>\n  <p>NAME\n        <code>clock_getres</code>, <code>clock_gettime</code>, <code>clock_settime</code> - clock and time functions</p>\n  \n  <p>SYNOPSIS\n        <code>#include &lt;time.h&gt;</code></p>\n\n<pre><code>  int clock_getres(clockid_t clk_id, struct timespec *res);\n\n  int clock_gettime(clockid_t clk_id, struct timespec *tp);\n\n  int clock_settime(clockid_t clk_id, const struct timespec *tp);\n</code></pre>\n  \n  <p>Link with -lrt.</p>\n</blockquote>\n\n<p>Note that newer versions of <code>glibc</code> (>= 2.17) no longer have the requirement for linking with <code>librt</code>, which probably explains why you didn't need to add <code>-lrt</code> for the Ubuntu 14 build on your PC.</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 2, "last_activity_date": 1442389504, "creation_date": 1442389504, "answer_id": 32602613, "question_id": 32602458, "link": "https://stackoverflow.com/questions/32602458/clock-gettime-works-well-on-pc-but-on-a-server-it-aborts-compilation/32602613#32602613", "title": "clock_gettime() works well on PC but on a server it aborts compilation", "body": "<p>from manual page </p>\n\n<pre><code>man -a clock_gettime\n</code></pre>\n\n<blockquote>\n  <p>CLOCK_GETRES(2)            Linux Programmer\u2019s Manual<br>\n  CLOCK_GETRES(2)</p>\n  \n  <p>NAME\n         clock_getres, clock_gettime, clock_settime - clock and time functions</p>\n  \n  <p>SYNOPSIS\n         #include </p>\n\n<pre><code>   int clock_getres(clockid_t clk_id, struct timespec *res);\n\n   int clock_gettime(clockid_t clk_id, struct timespec *tp);\n\n   int clock_settime(clockid_t clk_id, const struct timespec *tp);\n\n   Link with -lrt.\n</code></pre>\n  \n  <p>Feature Test Macro Requirements for glibc (see\n  feature_test_macros(7)):</p>\n\n<pre><code>   clock_getres(), clock_gettime(), clock_settime(): _POSIX_C_SOURCE &gt;= 199309L\n</code></pre>\n</blockquote>\n\n<p><strong>Link with -lrt.</strong></p>\n"}], "owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 32602530, "answer_count": 2, "score": 3, "last_activity_date": 1442390847, "creation_date": 1442389083, "last_edit_date": 1442390069, "question_id": 32602458, "link": "https://stackoverflow.com/questions/32602458/clock-gettime-works-well-on-pc-but-on-a-server-it-aborts-compilation", "title": "clock_gettime() works well on PC but on a server it aborts compilation", "body": "<p>I used the following function to get the execution time of a multi-threaded  program:</p>\n\n<pre><code>clock_gettime(CLOCK_MONOTONIC,&amp;start);\n/*\n******PROGRAM CODE*************\n*/\n\nclock_gettime(CLOCK_MONOTONIC,&amp;end);\n</code></pre>\n\n<p>It worked fine on my PC laptop running ubuntu 14.04, but when I try to compile and run it on a server it failed compilation giving an error.</p>\n\n<p>On my PC laptop:</p>\n\n<pre><code>laksith@laksithPC:~/Desktop/test$ gcc main_v8.c -lpthread\nlaksith@laksithPC:~/Desktop/test$ ./a.out\n</code></pre>\n\n<p>On the server:</p>\n\n<pre><code>[laksith@gca test_run]$ gcc main_v8.c -lpthread\n/tmp/ccyMMmx.o:In function 'main':\nmain_v8.c:(.text+0x21):undefined reference to 'clock_gettime'\nmain_v8.c:(.text+0x182):undefined reference to 'clock_gettime'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>Could someone help me please?</p>\n"}, {"tags": ["c", "switch-statement", "gtk", "keyevent"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1442390149, "post_id": 32602443, "comment_id": 53057547, "body": "&quot;I want to close the operations getting run from Case(1-4) when running&quot;  What does this mean? Do you want to abort the code currently executed, or do you want to return after that code is done executing?"}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442392207, "post_id": 32602443, "comment_id": 53058724, "body": "I want to abort the code currently executed. Its not I want to return after the ecexution."}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "reply_to_user": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1442393685, "post_id": 32602443, "comment_id": 53059643, "body": "@kkk tags? What is to use then?"}], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 1, "creation_date": 1442397837, "post_id": 32603344, "comment_id": 53062318, "body": "Your answer is informative too! And you get the reward :)"}], "tags": [], "owner": {"reputation": 430, "user_id": 1010873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a13b3f54c622f4e7577eccf245f2578?s=128&d=identicon&r=PG", "display_name": "MarkJL", "link": "https://stackoverflow.com/users/1010873/markjl"}, "is_accepted": false, "score": 1, "last_activity_date": 1442392052, "last_edit_date": 1495542146, "creation_date": 1442392052, "answer_id": 32603344, "question_id": 32602443, "link": "https://stackoverflow.com/questions/32602443/can-i-use-a-case-inside-another-case-in-a-switch-case-in-c/32603344#32603344", "title": "Can I use a case inside another case in a Switch Case in C", "body": "<p>If you want to run your main-window and quadrant-window code sequentially you'll need to run whatever you have in  cases 1-4 in a separate thread:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/56810/how-do-i-start-threads-in-plain-c\">How do I start threads in plain C?</a></p>\n\n<p>The code in that thread will have to have a switch which processes the key strokes that you want to use for exiting it.</p>\n\n<p>You can nest switch statements.</p>\n\n<p>(If this doesn't help then you'll need to re-word your question.)</p>\n"}, {"comments": [{"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442393324, "post_id": 32603540, "comment_id": 53059378, "body": "Awesome :) But my confusion now is can I use Q as a event there? My key values are integer till now. I will edit and take a look I am showing my keyevents. How to take Q as a event so that it goes to <b>case Q_BUTTON_PRESSED:</b>"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 1, "creation_date": 1442393909, "post_id": 32603540, "comment_id": 53059801, "body": "@djgharphalia07 Instead of Q_BUTTON_PRESSED you can use your integer value or <code>#define Q_BUTTON_PRESSED 42</code>"}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442394111, "post_id": 32603540, "comment_id": 53059917, "body": "Sure :) I will try and let you know."}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442396480, "post_id": 32603540, "comment_id": 53061436, "body": "As far as I know, <i>If statements</i> inside <i>Cases</i> are not used so much as it takes time to execute. To overcome this Cases are used! Anyway it will be better if I could use another keys other than integers."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442397966, "post_id": 32603540, "comment_id": 53062392, "body": "@djgharphalia07 Cases take also time to execute ;) A switch variable (key) has to be a value that can be expressed as an integer."}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442398425, "post_id": 32603540, "comment_id": 53062680, "body": "Ok :( but it is not taking value as 999 or 99...for veification I printed the key value as you have seen. It is taking only 9. Why?"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442398529, "post_id": 32603540, "comment_id": 53062754, "body": "@djgharphalia07 I cant say why without looking at the code."}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442398695, "post_id": 32603540, "comment_id": 53062869, "body": "<b>#define Q_BUTTON_PRESSED 99</b> I have just done this. As you suggested."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442398809, "post_id": 32603540, "comment_id": 53062963, "body": "@djgharphalia07 Have you tested with <code>case 99:</code> instead of <code>case Q_BUTTON_PRESSED:</code> ?"}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442399606, "post_id": 32603540, "comment_id": 53063465, "body": "Yes, I did :( Same. I cant close the selected quadrant."}, {"owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442470303, "post_id": 32603540, "comment_id": 53097212, "body": "If I take Case 9: or Case 5: or anything singular it works... How to send double values."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "edited": false, "score": 0, "creation_date": 1442566522, "post_id": 32603540, "comment_id": 53142990, "body": "@djgharphalia07 Without looking at the code it would be just guessing. Maybe you should post another question."}], "tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": true, "score": 3, "last_activity_date": 1535523996, "last_edit_date": 1535523996, "creation_date": 1442392665, "answer_id": 32603540, "question_id": 32602443, "link": "https://stackoverflow.com/questions/32602443/can-i-use-a-case-inside-another-case-in-a-switch-case-in-c/32603540#32603540", "title": "Can I use a case inside another case in a Switch Case in C", "body": "<p>There can be another <code>switch</code> statement inside a cases (nested switch case statements). Example:</p>\n\n<pre><code>switch(keyevent) {\ncase 0:\n    printf(\"Close Window2\")\n    break;   \ncase 1:\n   printf(\"Open Quadrant1\");\n   switch(foo) {\n   case 1:\n       // ...\n   }\n   break;\n   // ...\n}\n</code></pre>\n\n<p>But, if I understand your use-case correctly, I don't think you need it.\nHow bout something like that:</p>\n\n<pre><code>switch(keyevent) {\ncase 0:\n    printf(\"Close Window2\")\n    break;   \ncase 1:\n    q1_is_open = true;\n    printf(\"Open Quadrant1\");\n    break;\ncase 2:\n    q2_is_open = true;\n    printf(\"Open Quadrant2\");\n    break;\ncase 3:\n    q3_is_open = true;\n    printf(\"Open Quadrant3\");\n    break;\ncase 4:\n    q4_is_open = true;\n    printf(\"Open Quadrant4\");\n    break;\ncase Q_BUTTON_PRESSED:\n    if (q1_is_open) {\n        printf(\"Close Quadrant1\");\n        q1_is_open = false;\n    }\n    if (q2_is_open) {\n        printf(\"Close Quadrant2\");\n        q2_is_open = false;\n    }\n    if (q3_is_open) {\n        printf(\"Close Quadrant3\");\n        q3_is_open = false;\n    }\n    if (q4_is_open) {\n        printf(\"Close Quadrant4\");\n        q4_is_open = false;\n    }\n    break;\n} \n</code></pre>\n"}], "owner": {"reputation": 217, "user_id": 5002222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlU3i.png?s=128&g=1", "display_name": "djgharphalia07", "link": "https://stackoverflow.com/users/5002222/djgharphalia07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7693, "favorite_count": 0, "accepted_answer_id": 32603540, "answer_count": 2, "score": 3, "last_activity_date": 1535523996, "creation_date": 1442389029, "last_edit_date": 1442404981, "question_id": 32602443, "link": "https://stackoverflow.com/questions/32602443/can-i-use-a-case-inside-another-case-in-a-switch-case-in-c", "title": "Can I use a case inside another case in a Switch Case in C", "body": "<p>Here, In the Switch Case I am using some key events. </p>\n\n<p>When I press <strong>0</strong> it directs to <strong>Case 0:</strong> and goes back to the MainWindow I have, by closing the second-one(Window2).\nAnd If I press <strong>1</strong> it directs to <strong>Case 1</strong> and so on respectively, where the operations will be  executed separatedly.</p>\n\n<p>My key events:</p>\n\n<pre><code>    g_printerr(\"%s\\n\", gdk_keyval_name (event-&gt;keyval));\n    keypressed=gdk_keyval_name (event-&gt;keyval);\n    printf(\"The KeyEvent is: %s\\n\", keypressed);     \n    char ch[10];\n    sprintf(ch, \"%s\\n\", keypressed);   \n    printf(\"The NewKeyEvent is: %s\\n\", ch);\n    int holdch=atoi(ch);\n</code></pre>\n\n<p>Switch Case:</p>\n\n<pre><code>switch(holdch)\n         {\n              case 0:\n                   printf(\"Close Window2\")\n              break;   \n              case 1:\n                   printf(\"Open Quadrant1\");\n              break;\n              case 2:\n                   printf(\"Open Quadrant2\");\n              break;\n              case 3:\n                   printf(\"Open Quadrant3\");\n              break;\n              case 4:\n                   printf(\"Open Quadrant4\");\n              break;\n           }        \n</code></pre>\n\n<p>Now, I want to close the operations getting run from <strong>Case(1-4)</strong> when running and come back to the Second window from where it left before.</p>\n\n<p>How to do this? Can another Cases be used inside <strong>Case(1-4)</strong>? This time I want to use key-buttons like <em>Esc</em> or <em>q</em> for that. Is it possible?</p>\n\n<p><strong>NOTE:</strong> </p>\n\n<p><em>Case 0</em>-> Close the window where I am now and after this there is no chance of executing other cases. As Second Window is the Window containing 4 Quadrants.</p>\n\n<p><em>Case(1-4)</em>-> All are executable but can be executed one at a time.</p>\n"}, {"tags": ["android", "c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442389141, "post_id": 32602358, "comment_id": 53056996, "body": "Did you include stdint.h?"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1442389256, "post_id": 32602358, "comment_id": 53057054, "body": "@Lundin: <code>PRIu64</code> is defined in <code>inttypes.h</code> (which btw includes <code>stdint.h</code>)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1442389382, "post_id": 32602358, "comment_id": 53057114, "body": "@Michael Aha, didn&#39;t know inttypes was required to include stdint."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442389647, "post_id": 32602358, "comment_id": 53057257, "body": "Then the next thing to check is adding this macro: <code>#if !defined(__STDC_VERSION__) || (__STDC_VERSION__ &lt; 199901) #error Your compiler was made by dinosaurs. #endif</code>"}, {"owner": {"reputation": 3179, "user_id": 1774679, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a33ac21cad99e52af9e64da8a0ce21eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jerikc XIONG", "link": "https://stackoverflow.com/users/1774679/jerikc-xiong"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442390487, "post_id": 32602358, "comment_id": 53057722, "body": "@Lundin still compile error after include stdint.h"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442396784, "post_id": 32602358, "comment_id": 53061642, "body": "Yes, according to the comments above, you don&#39;t need to do that, given that you include inttypes.h. So the question is what compiler you are using, does it support C99/C11 and if so, is it set to compile the code as C99/C11?"}], "owner": {"reputation": 3179, "user_id": 1774679, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a33ac21cad99e52af9e64da8a0ce21eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jerikc XIONG", "link": "https://stackoverflow.com/users/1774679/jerikc-xiong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 745, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442388751, "creation_date": 1442388751, "last_edit_date": 1495540309, "question_id": 32602358, "link": "https://stackoverflow.com/questions/32602358/how-to-print-uint64-t-in-android", "title": "How to print uint64_t in android?", "body": "<p>According to the <a href=\"https://stackoverflow.com/questions/8132399/how-to-printf-uint64-t\">question</a>, i tried to do it as following:</p>\n\n<pre><code>#include &lt;android/log.h&gt;\n\n#define __STDC_FORMAT_MACROS\n#include &lt;inttypes.h&gt;\n\n#define TAG \"mylog\"\n#define LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG, TAG, __VA_ARGS__)\n\nuint64_t value = 9999999999;\nLOGD(\"test print uint64_t: %\" PRIu64 \"\\n\", value);\n</code></pre>\n\n<p>However, i got the errors as following:</p>\n\n<pre><code>error: expected ')' before 'PRIu64'\nLOGD(\"test print uint64_t: %\" PRIu64 \"\\n\", value);\n</code></pre>\n\n<p>How to print the uint64_t in Android?</p>\n"}, {"tags": ["c", "arrays", "compiler-errors"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1442388264, "post_id": 32602122, "comment_id": 53056477, "body": "I think the <code>char var[];</code> syntax only works if you initialize it to a constant. Otherwise you have to specify a length for your character array, as in <code>char var[100];</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1442388268, "post_id": 32602122, "comment_id": 53056480, "body": "<code>scanf(&quot;%d&quot;,&amp;n);char name[n+1];</code>...<code>name[n]=0;</code>,,,, <code>j&lt;n</code> --&gt; <code>j &lt; m</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1442390356, "post_id": 32602214, "comment_id": 53057660, "body": "@TheParamagneticCroissant Got me"}], "tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 2, "last_activity_date": 1442390327, "last_edit_date": 1442390327, "creation_date": 1442388310, "answer_id": 32602214, "question_id": 32602122, "link": "https://stackoverflow.com/questions/32602122/compile-time-error-c-programming-arrays/32602214#32602214", "title": "Compile time error C programming Arrays", "body": "<p>There are few problems in declaration syntax.\nChange this line </p>\n\n<p>from</p>\n\n<pre><code>char name[], char add[];\n</code></pre>\n\n<p>to</p>\n\n<pre><code>char name[256],  add[256];\n</code></pre>\n\n<p>After this you get run-time errors ( welcome to C programming )</p>\n"}, {"tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": false, "score": 1, "last_activity_date": 1442389420, "last_edit_date": 1442389420, "creation_date": 1442388606, "answer_id": 32602312, "question_id": 32602122, "link": "https://stackoverflow.com/questions/32602122/compile-time-error-c-programming-arrays/32602312#32602312", "title": "Compile time error C programming Arrays", "body": "<p>In C you must declare array with  a  constant integer like,</p>\n\n<pre><code>char name[1000],  add[1000];\n\nOR\n\nchar name[1000];\nchar add[1000];\n\nOR\n\nint size=1000;\nchar name[size];\nchar add[size];\n</code></pre>\n\n<p>And your main function should return integer at the end, use</p>\n\n<pre><code>return 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 877, "user_id": 2550897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9862d0e5a1b9424e4b89074e987dc00?s=128&d=identicon&r=PG", "display_name": "Tro", "link": "https://stackoverflow.com/users/2550897/tro"}, "is_accepted": true, "score": 1, "last_activity_date": 1442391299, "creation_date": 1442391299, "answer_id": 32603128, "question_id": 32602122, "link": "https://stackoverflow.com/questions/32602122/compile-time-error-c-programming-arrays/32603128#32603128", "title": "Compile time error C programming Arrays", "body": "<p>As others have pointed out, the line <code>char name[], char add[];</code> is invalid. This is because there is no way of knowing how much memory to assign to the array. There are two solutions, depending on your problem.</p>\n\n<p>The best solution in this instance would be to move the declaration to below where you know the length of the user's name (assuming you're not using a strict format requiring declarations at the top):</p>\n\n<pre><code>printf(\"enter your name_length num: n is:-\\n\");\nscanf(\"%d\",&amp;n);\nchar name[n];\n</code></pre>\n\n<p>This creates a fixed length array (of length <code>n</code>), and given a user's name isn't likely to change length over the course of this program this is more than acceptable. </p>\n\n<p>The alternate solution is to use memory allocation, which allows you to increase or decrease the size of the array during runtime. </p>\n\n<pre><code>char *name = null;\n...\nprintf(\"enter your name_length num: n is:-\\n\");\nscanf(\"%d\",&amp;n);\nname = malloc( n * sizeof(char));\n</code></pre>\n\n<p>This assigns <code>n * sizeof(char)</code> bytes to the array, which can later be extended, reassigned or freed. This is the more flexible option.</p>\n"}], "owner": {"reputation": 2088, "user_id": 3534854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sDiKU.jpg?s=128&g=1", "display_name": "RicoRicochet", "link": "https://stackoverflow.com/users/3534854/ricoricochet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 32603128, "answer_count": 3, "score": -1, "last_activity_date": 1442391299, "creation_date": 1442388033, "question_id": 32602122, "link": "https://stackoverflow.com/questions/32602122/compile-time-error-c-programming-arrays", "title": "Compile time error C programming Arrays", "body": "<p>I wrote a small C program which takes some user input and prints it, </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    char name[], char add[];\n    short int height;\n    unsigned char buffer[1024];\n    int i,j,n,m;\n\n    printf(\"enter your name_length num: n is:-\\n\");\n    scanf(\"%d\",&amp;n);\n\n    printf(\"enter your name\\n\");\n\n    for(i=0;i&lt;n;i++)\n    {\n        scanf(\"%c\",&amp;name[i]);\n    }\n\n    printf(\"enter your address: m is :-\\n\");\n    scanf(\"%d\",&amp;m);\n\n    for(j=0;j&lt;n;j++)\n    {\n        scanf(\"%c\",&amp;add[j]);\n    }\n\n    printf(\"enter your height\\n\");\n    scanf(\"%d\",&amp;height);\n\n\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"your entered name is:\\t\",name[i]);\n    }\n\n    for(j=0;j&lt;n;j++)\n    {\n        printf(\"your entered address is:\\t\",add[i]);\n    }\n\n    printf(\"your entered height is:\\n\",height);\n\n return;\n}\n</code></pre>\n\n<p>but while running I am getting an error - </p>\n\n<p><a href=\"https://i.stack.imgur.com/Vx7xX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vx7xX.png\" alt=\"enter image description here\"></a></p>\n\n<p>So I am at my wits end on why the array size missing is coming, is there anything that I have missed ??? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 5, "creation_date": 1442388025, "post_id": 32602094, "comment_id": 53056340, "body": "Are you incrementing <code>count</code> anywhere?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1442390108, "post_id": 32602094, "comment_id": 53057526, "body": "Compile with all warnings &amp; debug info (e.g. <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Then <b>use the debugger</b> (<code>gdb</code>)"}, {"owner": {"reputation": 84157, "user_id": 238978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a633afaf19e6d4bb53ee50b62e3b5397?s=128&d=identicon&r=PG", "display_name": "Emil Vikstr&#246;m", "link": "https://stackoverflow.com/users/238978/emil-vikstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1442390387, "post_id": 32602094, "comment_id": 53057677, "body": "I love how you need to pick Exit up to three times even if the rest of your logic was correct..."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1442390658, "post_id": 32602094, "comment_id": 53057833, "body": "You forgot to test the result of <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\">scanf(3)</a> which can fail...."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442388242, "creation_date": 1442388242, "answer_id": 32602192, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32602192#32602192", "title": "Terminate program in C", "body": "<p>Replace <code>while (count&lt;3)</code> with a boolean, <code>bool loop=true;</code> followed by <code>while (loop)</code>. And then inside the switch when you wish to exit, don't call the exit function but simply set <code>loop=false;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5341055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f44e5ada1a75234180956fc057b5eb5?s=128&d=identicon&r=PG&f=1", "display_name": "Qili Xiang", "link": "https://stackoverflow.com/users/5341055/qili-xiang"}, "edited": false, "score": 0, "creation_date": 1442389497, "post_id": 32602371, "comment_id": 53057176, "body": "i want to exit if i type either 1,2,3,0 number other than that number it will repeat ask again."}, {"owner": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "reply_to_user": {"reputation": 1, "user_id": 5341055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f44e5ada1a75234180956fc057b5eb5?s=128&d=identicon&r=PG&f=1", "display_name": "Qili Xiang", "link": "https://stackoverflow.com/users/5341055/qili-xiang"}, "edited": false, "score": 0, "creation_date": 1442470472, "post_id": 32602371, "comment_id": 53097285, "body": "Your code exits only if you type something different from { 1; 2 ; 3 ; 0 } (I don&#39;t take into account problems with <code>scanf()</code>). In addition to other answers that show you another way of writing what you want, I insist on the fact that you should have another look at way the  <code>break</code>statement works.  <a href=\"http://stackoverflow.com/questions/2565659/\">stackoverflow.com/questions/2565659</a> is a good start."}], "tags": [], "owner": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "is_accepted": false, "score": 0, "last_activity_date": 1442388805, "creation_date": 1442388805, "answer_id": 32602371, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32602371#32602371", "title": "Terminate program in C", "body": "<p>Your <code>break</code> in the <code>switch()</code> exits the <code>switch()</code> but does not exit the <code>while()</code>.</p>\n\n<p>If you enter <code>0</code>, <code>default:</code> case won't be executed.\nIs it really what you wanted ?</p>\n"}, {"tags": [], "owner": {"reputation": 30659, "user_id": 228936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7yM0.jpg?s=128&g=1", "display_name": "Tor Valamo", "link": "https://stackoverflow.com/users/228936/tor-valamo"}, "is_accepted": false, "score": 0, "last_activity_date": 1442390432, "last_edit_date": 1442390432, "creation_date": 1442390077, "answer_id": 32602766, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32602766#32602766", "title": "Terminate program in C", "body": "<pre><code>int number=4 ;\n\nwhile (number &gt; 3)\n</code></pre>\n\n<p>and you can delete <code>count</code>, which I can't see is being used anywhere</p>\n\n<p>Actually, the following structure might be better, since you won't have to put an arbitrary number in the comparison:</p>\n\n<pre><code>int number;\ndo {\n  // the thing\n} while(number &gt; 3);\n</code></pre>\n\n<p>In this case, it determines whether to continue the loop AFTER the first execution rather than before it. So in a do-while it will ALWAYS execute the do ONCE before the condition can break it, even if the condition is false to begin with!</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442402599, "post_id": 32602796, "comment_id": 53065332, "body": "<code>exit</code> is not a good variable name since it collides with a standard function&#39;s name."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1442404087, "last_edit_date": 1442404087, "creation_date": 1442390175, "answer_id": 32602796, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32602796#32602796", "title": "Terminate program in C", "body": "<p>I guess you are misunderstanding the <code>default</code> case of <code>switch</code>: it is executed only if number is not <code>0,1,2,3</code>. \nIf you want to exit each time a exit(0) for each <code>case 0 1 2 3</code></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main (void)\n{\n    int number,count=0 ;\n\n    while (count&lt;3)\n    {\n        printf(\"Menu:\\n\");\n        printf(\"1.Proace\\n\");\n        printf(\"2.Yonex\\n\");\n        printf(\"3.Reebook\\n\");\n        printf(\"0.Exit\\n\");\n        printf(\"Enter your selection:\");\n        scanf(\"%d\",&amp;number);\n\n        switch (number)\n        {\n        case 0:\n            printf(\"exit.\\n\");\n            exit(0);\n            break;\n        case 1:\n            printf(\"You have selected proace.\\n\");\n            exit(0);\n            break;\n        case 2:\n            printf(\"You have selected yonex.\\n\");\n            exit(0);\n            break;\n        case 3:\n            printf(\"You have selected reebook.\\n\");\n            exit(0);\n            break;\n\n        default:\n            printf(\"Please try again.\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>BTW a better code should be</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main (void)\n{\n    int number;\n    bool canExit = false;\n\n    while (canExit == false)\n    {\n       canExit  = true;\n\n        printf(\"Menu:\\n\");\n        printf(\"1.Proace\\n\");\n        printf(\"2.Yonex\\n\");\n        printf(\"3.Reebook\\n\");\n        printf(\"0.Exit\\n\");\n        printf(\"Enter your selection:\");\n        scanf(\"%d\",&amp;number);\n\n        switch (number)\n        {\n        case 0:\n            printf(\"exit.\\n\");\n            break;\n        case 1:\n            printf(\"You have selected proace.\\n\");\n            break;\n        case 2:\n            printf(\"You have selected yonex.\\n\");\n            break;\n        case 3:\n            printf(\"You have selected reebook.\\n\");\n            break;\n\n        default:\n            printf(\"Please try again.\\n\");\n            canExit = false;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "is_accepted": false, "score": 0, "last_activity_date": 1442391349, "last_edit_date": 1442391349, "creation_date": 1442390695, "answer_id": 32602973, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32602973#32602973", "title": "Terminate program in C", "body": "<p>I would replace your switch with:</p>\n\n<pre><code>char* brand[] = { \"proace\", \"yonex\", \"reebook\" };\ndo{\n    if(number == 0)\n        printf(\"exit.\\n\");\n    else if(number &lt;= 3)\n        printf(\"You have selected %s.\\n\", brand[number]);\n    else\n        printf(\"Please try again\");\n}while(number &gt; 3);\n</code></pre>\n\n<p>Encapsulate it in do-while loop with condition number > 3 and it will loop until user select 0-3. In this case, <code>exit(0)</code> is unnecessary.</p>\n"}, {"comments": [{"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1443850346, "post_id": 32603438, "comment_id": 53665791, "body": "In <code>gcc</code>, <code>exit()</code> is a built-in function so you don&#39;t have to include any header file but then <code>gcc</code> will throw a warning about the type declaration of <code>exit()</code>. So to make the code compile under any possible C standard compliant compiler, you should include <code>stdlib.h</code> which has the declaration of <code>exit()</code>"}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1443850396, "post_id": 32603438, "comment_id": 53665804, "body": "BTW what&#39;s this <code>studio.g</code>? Did you mean <code>stdio</code>?"}, {"owner": {"reputation": 303, "user_id": 5339094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94poD.jpg?s=128&g=1", "display_name": "Jaya Krishna", "link": "https://stackoverflow.com/users/5339094/jaya-krishna"}, "reply_to_user": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1443851425, "post_id": 32603438, "comment_id": 53666012, "body": "@rootkea  its a typo, I mean its &lt;stdio.h&gt; auto correction problem. Yeah &lt;stdlib.h&gt; should be included to use exit()."}, {"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1443851633, "post_id": 32603438, "comment_id": 53666048, "body": "Why <code>process.h</code>? No need of that."}], "tags": [], "owner": {"reputation": 303, "user_id": 5339094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94poD.jpg?s=128&g=1", "display_name": "Jaya Krishna", "link": "https://stackoverflow.com/users/5339094/jaya-krishna"}, "is_accepted": false, "score": -3, "last_activity_date": 1442392297, "creation_date": 1442392297, "answer_id": 32603438, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32603438#32603438", "title": "Terminate program in C", "body": "<p>Hello you can exit your program by including the header file #include in your header file section.</p>\n\n<p>Then you can use the exit() command </p>\n\n<p>Eg :-</p>\n\n<pre><code>#inlcude&lt;process.h&gt;\n#include&lt;studio.h&gt;\ninto opt;\nprintf(\" enter o \");\nscant(\" %d\",&amp;opt);\nswitch(opt)\ncase 0: printf(\" exiting the program\");\n             getch();\n             exit();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2451260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5adc802b1194deb4cbfa193b631cc48?s=128&d=identicon&r=PG", "display_name": "Keshav Gupta", "link": "https://stackoverflow.com/users/2451260/keshav-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1442395196, "creation_date": 1442395196, "answer_id": 32604468, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32604468#32604468", "title": "Terminate program in C", "body": "<p>You are not updating the count variable that is why it is not exiting. For exiting the while loop the count should be greater than or equal to 3.</p>\n"}, {"tags": [], "owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "is_accepted": false, "score": 0, "last_activity_date": 1443850818, "creation_date": 1443850818, "answer_id": 32919315, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c/32919315#32919315", "title": "Terminate program in C", "body": "<p>As long as you will be giving the input <code>0, 1, 2 or 3</code> you will never reach <code>default</code> which has <code>exit()</code> and thus the program will continue to run as we have set <code>while</code> conditional as <code>(count &lt; 3)</code> i.e. <code>0 &lt; 3</code> which is always true. So no chance of exiting the program by <code>while</code> conditional. The only chance to terminate the program is from <code>default</code>.  </p>\n\n<p>So if you give input anything other than <code>0, 1, 2 or 3</code>, you will reach <code>default</code> which will call <code>exit()</code> and thus will cause the program to terminate. </p>\n"}], "owner": {"reputation": 1, "user_id": 5341055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f44e5ada1a75234180956fc057b5eb5?s=128&d=identicon&r=PG&f=1", "display_name": "Qili Xiang", "link": "https://stackoverflow.com/users/5341055/qili-xiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "answer_count": 8, "score": 0, "last_activity_date": 1443850818, "creation_date": 1442387949, "last_edit_date": 1442389896, "question_id": 32602094, "link": "https://stackoverflow.com/questions/32602094/terminate-program-in-c", "title": "Terminate program in C", "body": "<p>Could someone help me with my code?\nMy program isn't terminating. After choosing a brand, it should terminate but it loops forever.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main (void)\n{\n    int number,count=0 ;\n\n    while (count&lt;3)\n    {\n        printf(\"Menu:\\n\");\n        printf(\"1.Proace\\n\");\n        printf(\"2.Yonex\\n\");\n        printf(\"3.Reebook\\n\");\n        printf(\"0.Exit\\n\");\n        printf(\"Enter your selection:\");\n        scanf(\"%d\",&amp;number);\n\n        switch (number)\n        {\n        case 0:\n            printf(\"exit.\\n\");\n            break;\n        case 1:\n            printf(\"You have selected proace.\\n\");\n            break;\n        case 2:\n            printf(\"You have selected yonex.\\n\");\n            break;\n        case 3:\n            printf(\"You have selected reebook.\\n\");\n            break;\n\n        default:\n            printf(\"Please try again.\\n\");\n            exit(0);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "rpc"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1442387726, "post_id": 32601498, "comment_id": 53056150, "body": "Use -Y option to specify where gcc is installed."}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442388631, "post_id": 32601498, "comment_id": 53056715, "body": "I tried: rpcgen  -Y &quot;C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\bin&quot; add.x      But sadly it gives me &quot;fopen: No such file or directory"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1443434654, "post_id": 32601498, "comment_id": 53476254, "body": "Surely you have to speak with a Unix lisp?  Use forward slashes."}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1443436368, "post_id": 32601498, "comment_id": 53477268, "body": "C:\\Users\\baco\\Desktop\\rpcTest&gt;rpcgen -Y &quot;C:/Program Files (x86)/Dev-Cpp/MinGW64/ bin&quot; add.x Zugriff verweigert fopen : No such file or directory"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1443523707, "post_id": 32601498, "comment_id": 53518315, "body": "Where did you get your rpcgen from ? Can you verify that <code>cpp</code> and <code>gcc</code> is in your PATH ? (just opern a command windows and run <code>gcc</code> and `cpp)"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1443523816, "post_id": 32601498, "comment_id": 53518374, "body": "gcc or cpp are running correctly from the cmd"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1443523881, "post_id": 32601498, "comment_id": 53518401, "body": "<a href=\"http://gnuwin32.sourceforge.net/packages/sunrpc.htm\" rel=\"nofollow noreferrer\">gnuwin32.sourceforge.net/packages/sunrpc.htm</a> is the source for my rpcgen"}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1442392471, "post_id": 32601907, "comment_id": 53058857, "body": "gcc is in the path. I installed DevCpp an just added the &quot;C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\bin&quot; to the path. I don&#39;t know how to create such script cpp.bat.?"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1443436907, "post_id": 32601907, "comment_id": 53477598, "body": "The preprocessor is named cpp.exe"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1442387317, "creation_date": 1442387317, "answer_id": 32601907, "question_id": 32601498, "link": "https://stackoverflow.com/questions/32601498/rpcgen-in-windows-7-no-preprocessor-found/32601907#32601907", "title": "rpcgen in Windows 7 - no preprocessor found", "body": "<p>Check these:</p>\n\n<ol>\n<li>Is <code>gcc</code> in the PATH? How did you install <code>gcc</code>? Cygwin or something else?</li>\n<li>Is the C preprocessor named <code>cpp</code>? (On some systems it is <code>cccp</code>) </li>\n</ol>\n\n<p>If all else fails, create a script named <code>cpp.bat</code> that calls <code>gcc -E</code> with all arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1444039207, "post_id": 32899948, "comment_id": 53716652, "body": "Yes, this is working, but when I try to make the executables with make, it gives me an error."}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1444039213, "post_id": 32899948, "comment_id": 53716654, "body": "C:\\Users\\baco\\Desktop\\rpcTest&gt;make cc -g    -c -o add_clnt.o add_clnt.c In file included from add_clnt.c:7:0: add.h:9:21: fatal error: rpc/rpc.h: No such file or directory  #include &lt;rpc/rpc.h&gt;                      ^ compilation terminated. &lt;builtin&gt;: recipe for target &#39;add_clnt.o&#39; failed make: *** [add_clnt.o] Error 1"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1444040158, "post_id": 32899948, "comment_id": 53717215, "body": "I added C:\\cygwin\\usr\\include\\tirpc\\rpc to the path. Now there are other errors."}, {"owner": {"reputation": 1, "user_id": 5398088, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l0Bs3PCMJSo/AAAAAAAAAAI/AAAAAAAABUE/ptI89cn42Dk/photo.jpg?sz=128", "display_name": "Gopi Muthusamy", "link": "https://stackoverflow.com/users/5398088/gopi-muthusamy"}, "reply_to_user": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1444061364, "post_id": 32899948, "comment_id": 53730768, "body": "My build step has next step as replace rpc/rpc.h in the source.c with stdint.h and rpc/types.h etc. So, essentially, rpc/rpc.h needs to be removed and equivalent needs to be obtained from elsewhere. Since my cross-compiler package had rpc/types.h it worked for me (for my program)."}], "tags": [], "owner": {"reputation": 1, "user_id": 5398088, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l0Bs3PCMJSo/AAAAAAAAAAI/AAAAAAAABUE/ptI89cn42Dk/photo.jpg?sz=128", "display_name": "Gopi Muthusamy", "link": "https://stackoverflow.com/users/5398088/gopi-muthusamy"}, "is_accepted": false, "score": 0, "last_activity_date": 1443754985, "creation_date": 1443754985, "answer_id": 32899948, "question_id": 32601498, "link": "https://stackoverflow.com/questions/32601498/rpcgen-in-windows-7-no-preprocessor-found/32899948#32899948", "title": "rpcgen in Windows 7 - no preprocessor found", "body": "<p>Here is what I did and it worked on Windows 7 system: \n(1) Installed cygwin 32 bit with following packages \n   rpcgen\n   gcc-core\n   all the isl libraries (cpp.exe requires isl, isl10, cloog-isl, ...)\n(2) added cygwin\\bin to PATH (in dos)\n(3) ran rpcgen in windows DOS prompt, and with this it is able to generate the .h and .c files. </p>\n\n<p>From your description, it appears that your rpcgen is looking for cpp not cpp.exe and dont know of any way to change that, so, choosing the right rpcgen that looks for cpp.exe is the way to go. I did look at the rpcgen code and it appears that it looks for cpp or cpp.exe depending on the OS setting. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5612103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b803fdc9cbb569568fea312324f9ab57?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5612103/ian"}, "is_accepted": false, "score": 0, "last_activity_date": 1461697523, "creation_date": 1461697523, "answer_id": 36873647, "question_id": 32601498, "link": "https://stackoverflow.com/questions/32601498/rpcgen-in-windows-7-no-preprocessor-found/36873647#36873647", "title": "rpcgen in Windows 7 - no preprocessor found", "body": "<p>It doesn't like the spaces in the path to the preprocessor.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5521956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba40fc696bfab886fad3a3263d3db9af?s=128&d=identicon&r=PG&f=1", "display_name": "ts1690", "link": "https://stackoverflow.com/users/5521956/ts1690"}, "is_accepted": false, "score": 1, "last_activity_date": 1491657897, "last_edit_date": 1491657897, "creation_date": 1491564957, "answer_id": 43277130, "question_id": 32601498, "link": "https://stackoverflow.com/questions/32601498/rpcgen-in-windows-7-no-preprocessor-found/43277130#43277130", "title": "rpcgen in Windows 7 - no preprocessor found", "body": "<p>You can use the -Y flag to specify the path of where cpp is. On windows for instance this might be: rpcgen -Y c:\\pathtogcc myfile.x</p>\n\n<p>In answer to the fopen error above its a permissions problem ie. Access Denied. On windows for instance you need to run the cmd prompt as administrator.</p>\n"}], "owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2202, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1491657897, "creation_date": 1442386040, "last_edit_date": 1443527220, "question_id": 32601498, "link": "https://stackoverflow.com/questions/32601498/rpcgen-in-windows-7-no-preprocessor-found", "title": "rpcgen in Windows 7 - no preprocessor found", "body": "<p>I created an IDL like this:</p>\n\n<pre><code>struct intpair { \n    int a; \n    int b; \n}; \nprogram ADD_PROG { \n    version ADD_VERS { \n         int ADD(intpair) = 1; \n     } = 1; \n} = 0x23451111;\n</code></pre>\n\n<p>I installed rpcgen, but when I try to compile this with</p>\n\n<pre><code>rpcgen -C add.x\n</code></pre>\n\n<p>or</p>\n\n<pre><code>rpcgen add.x\n</code></pre>\n\n<p>the error-message below is shown </p>\n\n<blockquote>\n  <p>cannot find any C preprocessor (cpp)</p>\n</blockquote>\n\n<p>I have a gcc installed.</p>\n\n<hr>\n\n<p>Ok, the command is now working, but it returns an error-message. </p>\n\n<pre><code>C:\\Users\\baco\\Desktop\\rpcTest&gt;rpcgen -C -Y \"C:/Program Files (x86)/Dev-Cpp/MinGW64/bin\" add.x \n</code></pre>\n\n<p>produced the output:</p>\n\n<pre><code>Der Befehl \"C:/Program\" ist entweder falsch geschrieben oder konnte nicht gefunden werden.\n</code></pre>\n\n<p>So it produces an error message (the command was not found or misspelled) but also the following files are created:\nadd.h, add_clnt.c, add_svc.c, add_xdr.c </p>\n\n<p>When I add the -a flag to produce additional template-code, this error-message appears:</p>\n\n<pre><code>rpcgen: unable to open Makefile.add=C:\\\u00da\u263b&lt;ms\\: m\n</code></pre>\n\n<p>Maybe a problem with the path again ?</p>\n"}, {"tags": ["c", "linux", "pointers", "memory-management", "luajit"], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1442389106, "post_id": 32602361, "comment_id": 53056971, "body": "You should malloc a big enough block that it is forced to be in the high RAM, then use your own allocator in there."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1442389585, "post_id": 32602361, "comment_id": 53057217, "body": "Could you explain how will it work exactly? Are you going to allocates &gt;2GB chunks each time? I think <code>malloc</code> will start return NULL very soon... What do I miss here?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1442389813, "post_id": 32602361, "comment_id": 53057356, "body": "It wouldn&#39;t. For test I did allocate 64k 2 GB blocks. (Possibly even better <i>still</i> to use <code>mmap</code> for 2 GB, though it wouldn&#39;t be as portable.)"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1442390833, "post_id": 32602361, "comment_id": 53057930, "body": "@AlexLop. I assume that the user will allocate a big block and then use his/her own allocator to get smaller pieces from that big block."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1442391468, "post_id": 32602361, "comment_id": 53058272, "body": "@KlasLindb&#228;ck Oh, I see. Thanks. Now it makes more sense."}, {"owner": {"reputation": 918, "user_id": 668125, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zuE5Z.png?s=128&g=1", "display_name": "nonchip", "link": "https://stackoverflow.com/users/668125/nonchip"}, "edited": false, "score": 0, "creation_date": 1442426679, "post_id": 32602361, "comment_id": 53082082, "body": "@KlasLindb&#228;ck that&#39;s what I wanted to do anyway (actually using realloc to grow/shrink the high memory block as required, then just storing a struct into it. so I run your code with e.g. <code>(1GB,2GB)</code> and get a (at least) 1G block somewhere above 2G? (when calculating the correct pointers for those sizes of course)"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 918, "user_id": 668125, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zuE5Z.png?s=128&g=1", "display_name": "nonchip", "link": "https://stackoverflow.com/users/668125/nonchip"}, "edited": false, "score": 0, "creation_date": 1442473189, "post_id": 32602361, "comment_id": 53098487, "body": "@nonchip  If you do a <code>realloc</code> and you get a new address there is no guarantee that the new address will be above the 2 GB marker."}, {"owner": {"reputation": 918, "user_id": 668125, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zuE5Z.png?s=128&g=1", "display_name": "nonchip", "link": "https://stackoverflow.com/users/668125/nonchip"}, "edited": false, "score": 0, "creation_date": 1442478998, "post_id": 32602361, "comment_id": 53101605, "body": "@KlasLindb&#228;ck so I should just manually &quot;re-alloc&quot; big chunks using your code, instead of <code>realloc</code>ing?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1442479977, "post_id": 32602361, "comment_id": 53102201, "body": "Copying 2+ GB of memory is costly, so you don&#39;t want to do it unnecessarily. My gut feeling is that the probability of realloc moving the data to a low address is fairly low. So I would create a function <code>HighRealloc</code> that first tries a normal <code>realloc</code>, and only if the resulting pointer is too small calls <code>HighMalloc</code> and copies the data manually."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 4, "last_activity_date": 1442391018, "last_edit_date": 1442391018, "creation_date": 1442388760, "answer_id": 32602361, "question_id": 32601363, "link": "https://stackoverflow.com/questions/32601363/malloc-specific-address-or-page-specify-a-minimum-offset-on-linux/32602361#32602361", "title": "Malloc specific address or page (specify a &quot;minimum offset&quot;) on linux", "body": "<p>Allocate a 2 GB block. If it is located below the limit, allocate another 2 GB (this one must be above 2 GB since only one block that size can fit below 2 GB).</p>\n\n<pre><code>/* Allocates size bytes at an address higher than address */\nvoid *HighMalloc(size_t size, void *address) {\n    size_t mysize = (size_t)address;\n    void *y, *x;\n    if (mysize &lt; size) {\n        mysize = size;\n    }\n    y = x = malloc(mysize);\n    if (x &lt; address) {\n        /* The memory starts at a low address. \n         * mysize is so big that another block this size cannot fit \n         * at a low address. So let's allocate another block and \n         * then free the block that is using low memory. */\n        x = malloc(mysize);\n        free(y);\n    }\n    return x;\n}\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<p>If <code>size</code> is smaller than <code>address</code>, there may be sufficient space at a low address at the second malloc. That is why I increase the allocated size in those cases. So don't use this to allocate small memory chunks. Allocate a big chunk and then divide it into smaller pieces manually.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1442388978, "post_id": 32602395, "comment_id": 53056901, "body": "<b>Do not use <code>MAP_FIXED</code></b>. It will happily unmap whatever existed in the memory area before, you&#39;d just never know."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1442389062, "post_id": 32602395, "comment_id": 53056944, "body": "@AnttiHaapala Totally agree with you. I will add this to my answer."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1442390147, "post_id": 32602395, "comment_id": 53057545, "body": "You can always try to <code>mmap</code> more memory, then unmap the remainder if you need less; if kernel refuses to give mappings that big, then NULL would be returned."}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 3, "last_activity_date": 1442389294, "last_edit_date": 1442389294, "creation_date": 1442388895, "answer_id": 32602395, "question_id": 32601363, "link": "https://stackoverflow.com/questions/32601363/malloc-specific-address-or-page-specify-a-minimum-offset-on-linux/32602395#32602395", "title": "Malloc specific address or page (specify a &quot;minimum offset&quot;) on linux", "body": "<p>The only think that I know (so maybe it is not the best choice) is to use <code>mmap</code> for Linux. There were some situations when I had to allocate huge memory chunks aligned to specific values, so I used it (because here you can specify the address and the length of the memory chunk) but it requires to implement some memory manager unit since now you are going to manage the allocations (and releases).</p>\n\n<pre><code>void *mmap(void *addr, size_t length, int prot, int flags, int fd, off_t offset);\n</code></pre>\n\n<p>Look here for details: <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man2/mmap.2.html</a></p>\n\n<p>To make it not mapped to any file just set <code>flags</code> to <code>MAP_ANONYMOUS</code>:</p>\n\n<blockquote>\n  <p>MAP_ANONYMOUS</p>\n  \n  <p>The mapping is not backed by any file; its contents are\n     initialized to zero.  The fd and offset arguments are ignored;\n     however, some implementations require fd to be -1 if\n     MAP_ANONYMOUS (or MAP_ANON) is specified, and portable\n     applications should ensure this.  The use of MAP_ANONYMOUS in\n     conjunction with MAP_SHARED is supported on Linux only since\n     kernel 2.4.</p>\n</blockquote>\n\n<p>If  <code>addr</code> is NULL then the system will pick for you the available address but since you want to allocate it above the 2G you will need to manage a list of allocated pages in order to know which addresses are used above the 2G. Note also that if you specify that <code>addr=X</code>, and <code>mmap</code> will not be able to use this address it won't fail, it just will pick another address which can be used without any failure indication (except for the fact that the returned pointer will not be equal to <code>addr</code>). However you can use <code>MAP_FIXED</code> flag to enforce the address you supply and if <code>mmap</code> won't be able to use it, it will fail (return <code>MAP_FAILED</code>).</p>\n\n<blockquote>\n  <p>MAP_FIXED</p>\n  \n  <p>Don't interpret addr as a hint: place the mapping at exactly\n   that address.  addr must be a multiple of the page size.  If\n   the memory region specified by addr and len overlaps pages of\n   any existing mapping(s), then the overlapped part of the\n   existing mapping(s) will be discarded.  If the specified\n   address cannot be used, mmap() will fail.  Because requiring a\n   fixed address for a mapping is less portable, the use of this\n   option is discouraged.</p>\n</blockquote>\n\n<p><strong>EDIT</strong></p>\n\n<p>NOTE that using <code>MAP_FIXED</code> is not recommended since as the description says</p>\n\n<blockquote>\n  <p><strong>If the memory region specified by addr and len overlaps pages of any existing mapping(s), then the overlapped part of the existing mapping(s) will be discarded.</strong></p>\n</blockquote>\n\n<p>and you will not even know about it. Safer to check that <code>addr</code> is equal to the returned by <code>mmap</code> address.</p>\n"}], "owner": {"reputation": 918, "user_id": 668125, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zuE5Z.png?s=128&g=1", "display_name": "nonchip", "link": "https://stackoverflow.com/users/668125/nonchip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3966, "favorite_count": 1, "accepted_answer_id": 32602361, "answer_count": 2, "score": 1, "last_activity_date": 1442391018, "creation_date": 1442385562, "question_id": 32601363, "link": "https://stackoverflow.com/questions/32601363/malloc-specific-address-or-page-specify-a-minimum-offset-on-linux", "title": "Malloc specific address or page (specify a &quot;minimum offset&quot;) on linux", "body": "<p>In LuaJIT on linux, all VM magaged ram has to be below the 2GB process memory boundary because the internal pointers are always 32bit. therefore I want to manage bigger allocs myself (using FFI and <code>malloc</code>,etc), e.g. for big textures, audio, buffers, etc.</p>\n\n<p>I now want to make sure those are mapped <strong>above</strong> the 2GB boudary, because then they don't take any VM manageable memory away.</p>\n\n<p>is there any way to <code>malloc</code> or maybe <code>mmap</code>(without mapped file, or maybe in SHM) to allocate a pointer specifically above that address? doesn't even have to take up the 2gig, just map my pointer to a higher (=non-32bit) address</p>\n"}, {"tags": ["c", "string", "loops"], "comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 4, "creation_date": 1442382454, "post_id": 32600649, "comment_id": 53053733, "body": "Is it C or C# ? Also, you want to capitalize the letter <b>after</b> the punctuation mark, but your code tries to do it for the letter which itself is a punctuation mark! Use a debugger."}, {"owner": {"reputation": 75, "user_id": 5156791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1a89d53bad6749b784938d161f93afa?s=128&d=identicon&r=PG&f=1", "display_name": "Pollo", "link": "https://stackoverflow.com/users/5156791/pollo"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1442382581, "post_id": 32600649, "comment_id": 53053781, "body": "Programmin in C not C++"}, {"owner": {"reputation": 2262, "user_id": 1336590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a9YYQ.jpg?s=128&g=1", "display_name": "Corak", "link": "https://stackoverflow.com/users/1336590/corak"}, "edited": false, "score": 0, "creation_date": 1442382782, "post_id": 32600649, "comment_id": 53053839, "body": "@Johnson - C, C++ and C# are three different Languages."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442383604, "post_id": 32600649, "comment_id": 53054158, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  For some code sets, <code>word - 32</code> would actually convert a lower-case letter to the corresponding upper-case letter, but there is no mapping for punctuation characters that makes sense. And the subtraction is a bad idea for case-conversion; you should use the facilities from <code>&lt;ctype.h&gt;</code> such as <code>tolower()</code> instead. You probably need to keep a record of when you see a punctuation character, and then when you next see a letter, case-convert it to upper case (and set the flag back to &#39;not after punctuation&#39;). There&#39;s an <code>ispunct()</code> too."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442383807, "post_id": 32600900, "comment_id": 53054236, "body": "Note that you should generally not create your own symbols that start with an underscore.  ISO/IEC 9899:2011 &#167;7.1.3 Reserved identifiers says, in part: \u2014 <i>All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use.</i> \u2014 <i>All identifiers that begin with an underscore are always reserved for use as identifiers with file scope in both the ordinary and tag name spaces.</i>  It&#39;s a little more nuanced than &quot;don&#39;t use leading underscores&quot;, but not by much."}, {"owner": {"reputation": 11216, "user_id": 2692688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/woiEs.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2692688/tushar"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442383999, "post_id": 32600900, "comment_id": 53054324, "body": "@JonathanLeffler thank you for the insight, and I will take care of this scenario"}, {"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1442384417, "post_id": 32600900, "comment_id": 53054512, "body": "Since when does one capitalize after an <code>&amp;</code> symbol?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1442384447, "post_id": 32600900, "comment_id": 53054526, "body": "@RedX: since the question asked you to.  You also capitalize after a blank, too.  In fact, the question has a devious definition of punctuation.  And it generates lots of newlines."}, {"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442384477, "post_id": 32600900, "comment_id": 53054540, "body": "@JonathanLeffler Hmmmm, ok then."}, {"owner": {"reputation": 11216, "user_id": 2692688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/woiEs.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2692688/tushar"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442384564, "post_id": 32600900, "comment_id": 53054585, "body": "@JonathanLeffler thank you for that variable naming convention insight I was in a habit of using the same, will now keep in mind :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442385016, "post_id": 32600900, "comment_id": 53054802, "body": "&quot;flag&quot; is a horrible variable name though and integer-based booleans is 1980s programming. Use <code>bool last_punct;</code> or similar."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442386113, "post_id": 32600900, "comment_id": 53055329, "body": "@Lundin I will agree &quot;flag&quot; is a horrible name. However, <code>bool</code> is an integral type, so I&#39;m not sure what the issue is with the variable being an integer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442386529, "post_id": 32600900, "comment_id": 53055522, "body": "@ChronoKitsune That bool is an integer in C is mainly a language bug. It is good style to write C code as if the language had a real boolean type. If you do so, you can also gain additional type safety by running the code through static code analysers. (And bool is likely a small integer type so you&#39;ll save a little bit of memory)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442440147, "post_id": 32600900, "comment_id": 53089186, "body": "@Lundin Any Boolean variable should have its value tested using <code>if (booleanX)</code> or <code>if (!booleanX)</code>. <code>if (booleanX == 1)</code> and <code>if (booleanX == false)</code> are overly verbose and consequently wrong in my opinion since a Boolean value by definition cannot have any value other than true or false. If <code>int booleanX = 2;</code> is declared, then <code>booleanX</code> is true. <code>(booleanX &lt;&lt; 1) | booleanY</code> is the only scenario in which I might see a problem arise, but I&#39;d say there are issues in the usage of the Boolean value if that expression leads to problems, not with the type chosen to store the value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1442440385, "post_id": 32600900, "comment_id": 53089302, "body": "The advantage provided by <code>_Bool</code> in such a context is useful only in hiding these sorts of issues within the code. I&#39;m not saying <code>_Bool</code> itself isn&#39;t useful, but using it for behavioral purposes rather than for its semantic purpose is IMHO the wrong application of the type. However, that debate is for philosophers to sort out."}], "tags": [], "owner": {"reputation": 11216, "user_id": 2692688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/woiEs.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2692688/tushar"}, "is_accepted": true, "score": 2, "last_activity_date": 1442384618, "last_edit_date": 1442384618, "creation_date": 1442383532, "answer_id": 32600900, "question_id": 32600649, "link": "https://stackoverflow.com/questions/32600649/c-how-to-capitalize-character-after-punctuation-mark-without-arrays/32600900#32600900", "title": "C How to Capitalize character after punctuation mark without Arrays?", "body": "<p>You can use a flag to check whether the last entry was a punctuation, and then alter the next input based on the flag and reset it again</p>\n\n<pre><code>char word;int flag=0;\nwhile ((word = getchar()) != EOF &amp;&amp; word != '\\n'){\n    if(flag==1){\n        printf(\"\\n\");\n        word = word - 32; flag=0;\n    }\n    if (word == ' ' || word == '.' || word == '?' || word == '!' || word == '(' || word == ')' || word == '*' || word == '&amp;' || word == ';' || word == ':'){\n      flag=1;\n    }\n\n    if ((word &gt;= 'A' &amp;&amp; word &lt;= 'z')){\n        printf(\"%c\", word);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5156791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1a89d53bad6749b784938d161f93afa?s=128&d=identicon&r=PG&f=1", "display_name": "Pollo", "link": "https://stackoverflow.com/users/5156791/pollo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 32600900, "answer_count": 1, "score": -3, "last_activity_date": 1442384618, "creation_date": 1442382376, "last_edit_date": 1442382969, "question_id": 32600649, "link": "https://stackoverflow.com/questions/32600649/c-how-to-capitalize-character-after-punctuation-mark-without-arrays", "title": "C How to Capitalize character after punctuation mark without Arrays?", "body": "<p>I am very new to the C programming language and was curious how would you capitalize a letter in a program following a punctuation mark without using an array. I tried using the ASCII code values by subtracting 32 but it just doesn't seem to work in my code. Here is a portion of my code that outputs the letters. I thought word = word - 32 would work but it does nothing when running the program. I'd appreciate the help!</p>\n\n<pre><code>while ((word = getchar()) != EOF &amp;&amp; word != '\\n'){\n        if (word == ' ' || word == '.' || word == '?' || word == '!' || word == '(' || word == ')' || word == '*' || word == '&amp;' || word == ';' || word == ':'){\n            printf(\"\\n\");\n            word = word - 32;\n        }\n\n        if ((word &gt;= 'A' &amp;&amp; word &lt;= 'z')){\n            printf(\"%c\", word);\n        }\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "json", "parsing", "rapidjson"], "answers": [{"tags": [], "owner": {"reputation": 138, "user_id": 2294323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mmKqy.jpg?s=128&g=1", "display_name": "hmojtaba", "link": "https://stackoverflow.com/users/2294323/hmojtaba"}, "is_accepted": true, "score": 2, "last_activity_date": 1442838050, "creation_date": 1442838050, "answer_id": 32695098, "question_id": 32600421, "link": "https://stackoverflow.com/questions/32600421/on-rapidjson-encode-just-a-number-to-string-then-decode-it/32695098#32695098", "title": "on rapidjson, encode just a number to string then decode it", "body": "<p>I just found the answer after digging into google:</p>\n\n<p>to encode a number to json using <a href=\"http://rapidjson.org/\" rel=\"nofollow\">rapidjson</a>:</p>\n\n<pre><code>Value v(123.321);\nStringBuffer mybuffer;\nWriter&lt;StringBuffer&gt; mywriter(mybuffer);\nv.Accept(mywriter);\nconst char* myjson = mybuffer.GetString();\n</code></pre>\n\n<p>now <em>myjson</em> has \"123.321\" as its value.\nthen to decode <em>myjson</em> to a number:</p>\n\n<pre><code>Document d;\nd.Parse(myjson); // myjson is \"123.321\"\nassert(d.IsNumber());\nvalue = d.GetDouble(); // now the value is 123.321\n</code></pre>\n\n<p>as simple as it gets.</p>\n"}], "owner": {"reputation": 138, "user_id": 2294323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mmKqy.jpg?s=128&g=1", "display_name": "hmojtaba", "link": "https://stackoverflow.com/users/2294323/hmojtaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1543, "favorite_count": 0, "accepted_answer_id": 32695098, "answer_count": 1, "score": 1, "last_activity_date": 1442838050, "creation_date": 1442381336, "question_id": 32600421, "link": "https://stackoverflow.com/questions/32600421/on-rapidjson-encode-just-a-number-to-string-then-decode-it", "title": "on rapidjson, encode just a number to string then decode it", "body": "<p>using <strong>rapidjson</strong>, how can i encode a number to json format? i have 123.321, i want to convert it to \"123.321\", then save it in a file. later using json convert it back to 123.321.\ni don't want to use Document which saves as like \"{\"tag\":\"value\"}\", i want it to be saved as just a \"value\", then be converted back.</p>\n\n<p>i have the following code to convert number to \"number\":</p>\n\n<pre><code>Value v(123);\nStringBuffer mybuffer;\nWriter&lt;StringBuffer&gt; mywriter(mybuffer);\nv.Accept(mywriter);\nconst char* myjson = mybuffer.GetString();\n</code></pre>\n\n<p>how to convert it back? is the following a solution? i don't want to use handler!</p>\n\n<pre><code>Reader reader;           \nStringStream ss(myjson); \nreader.Parse(ss, handler);\n</code></pre>\n\n<p>thanks for the upcoming helps.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1442381436, "post_id": 32600404, "comment_id": 53053343, "body": "It&#39;s a very common space-optimization."}, {"owner": {"reputation": 81, "user_id": 5337008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80eab489ead973fbb333c10ecc9c09a8?s=128&d=identicon&r=PG&f=1", "display_name": "Desmond Campbell", "link": "https://stackoverflow.com/users/5337008/desmond-campbell"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1442559326, "post_id": 32600404, "comment_id": 53138938, "body": "Thanks to all those who replied. I&#39;m satisfied with your answers. Sorry for not noticing the question had already been previously asked."}], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "is_accepted": false, "score": 1, "last_activity_date": 1442381420, "creation_date": 1442381420, "answer_id": 32600438, "question_id": 32600404, "link": "https://stackoverflow.com/questions/32600404/is-the-following-regarding-const-char-a-compiler-specific-feature/32600438#32600438", "title": "Is the following (regarding const char *) a compiler specific feature?", "body": "<p>It's normal behavior. first and second pointer points to the same string. Those strings cannot be changed, so there is no reason for compiler to allocate 2 different places for the same memory, that's why a and b points to the same place :)</p>\n\n<p>I don't think it's described so in the standard, although all the compilers (modern ones behaves this way)</p>\n"}, {"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1442381493, "last_edit_date": 1592644375, "creation_date": 1442381493, "answer_id": 32600455, "question_id": 32600404, "link": "https://stackoverflow.com/questions/32600404/is-the-following-regarding-const-char-a-compiler-specific-feature/32600455#32600455", "title": "Is the following (regarding const char *) a compiler specific feature?", "body": "<p>It is compiler specific, the C standard says it's unspecified:</p>\n<blockquote>\n<h3>C11 \u00a76.4.5 String literals</h3>\n<p>It is unspecified whether these arrays are distinct provided their elements have the appropriate values. If the program attempts to modify such an array, the behavior is undefined.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1442381738, "creation_date": 1442381738, "answer_id": 32600517, "question_id": 32600404, "link": "https://stackoverflow.com/questions/32600404/is-the-following-regarding-const-char-a-compiler-specific-feature/32600517#32600517", "title": "Is the following (regarding const char *) a compiler specific feature?", "body": "<p>It is very much allowed to do that, it's even allowed to do it in cases like:</p>\n\n<pre><code>const char *good = \"initialised\";\nconst char *bad = \"uninitialised\";\n</code></pre>\n\n<p>where <code>good</code> may simply point to the first <code>i</code> in <code>bad</code>. It's basically allowing for space optimisation.</p>\n\n<p>The ISO C standard states, in <code>C11 6.4.5 String literals /7</code>, when discussing the arrays that are created for string literals:</p>\n\n<blockquote>\n  <p>It is unspecified whether these arrays are distinct provided their elements have the appropriate values. If the program attempts to modify such an array, the behavior is undefined.</p>\n</blockquote>\n\n<p>Note the two slightly similar terms there, <code>unspecified</code> and <code>undefined</code>. The first simply means that the standard imposes no requirements on the question in point, an implementation is free to go one way or the other.</p>\n\n<p>The latter is more serious, undefined behaviour is generally to be avoided if you like portable code.</p>\n"}], "owner": {"reputation": 81, "user_id": 5337008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80eab489ead973fbb333c10ecc9c09a8?s=128&d=identicon&r=PG&f=1", "display_name": "Desmond Campbell", "link": "https://stackoverflow.com/users/5337008/desmond-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1442382141, "accepted_answer_id": 32600517, "answer_count": 3, "score": 2, "last_activity_date": 1442381738, "creation_date": 1442381248, "question_id": 32600404, "link": "https://stackoverflow.com/questions/32600404/is-the-following-regarding-const-char-a-compiler-specific-feature", "closed_reason": "Duplicate", "title": "Is the following (regarding const char *) a compiler specific feature?", "body": "<p>I have some strange behaviour from my compiler.\nIf a particular string already has been defined, then if I define another variable with the same string value, it actually gets pointed to the original instance.\ne.g. </p>\n\n<pre><code>const char * a = \"dog\";\nconst char * b = \"dog\";\nprintf(\"a = %p\\n\",a);\nprintf(\"b = %p\\n\",b);\n</code></pre>\n\n<p>Example output is</p>\n\n<pre><code>a = 00404060\nb = 00404060\n</code></pre>\n\n<p>It is not wrong I guess but I wonder if is compiler specific or if there are any rules about this.\nThe question arose because someone working for me wrote a fucntion that was supposed to compare and count string matches. In fact they compared and counted pointer values yet were still getting the correct answer.</p>\n\n<p>I'm using gcc (or g++) 4.6.3</p>\n"}, {"tags": ["c", "linux", "signals"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442381026, "post_id": 32600269, "comment_id": 53053188, "body": "How do you declare <code>signal</code>?  It is often a function name from <code>&lt;signal.h&gt;</code>.  While it isn&#39;t obligatory to include <code>&lt;signal.h&gt;</code> when you&#39;re waiting, you have used <code>SIGCONT</code> which suggests you have included the signal header.  Does the code compile cleanly with no warnings, even when you use stringent warnings (<code>-Wall -Werror -Wextra -Wmissing-prototypes -Wshadow</code>)?"}, {"owner": {"reputation": 1120, "user_id": 3930007, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TUmyw.jpg?s=128&g=1", "display_name": "Raghuram Vadapalli", "link": "https://stackoverflow.com/users/3930007/raghuram-vadapalli"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442381567, "post_id": 32600269, "comment_id": 53053393, "body": "Yes the code compiles without any warnings"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442381665, "post_id": 32600269, "comment_id": 53053428, "body": "So how do you declare the variable <code>signal</code>?  I assume it must be <code>int signal;</code> \u2014 and you are not compiling with <code>-Wshadow</code>.  What that does is hides the function <code>signal</code> in the function (block) where you declare the variable.  That isn&#39;t formally wrong; it is a little unorthodox.  The value is really an exit status \u2014 it may encode a signal, or it may encode an actual exit status.  I&#39;d certainly not use <code>signal</code> for the task."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442381913, "post_id": 32600269, "comment_id": 53053532, "body": "Note that when printing diagnostic messages, it is crucial that the output ends with a newline (unless you&#39;ve set <code>stdout</code> to unbuffered with <code>setvbuf()</code>).  So, use <code>printf(&quot;Here\\n&quot;);</code> to determine where you are (or, better, something like <code>printf(&quot;Here: %d\\n&quot;, __LINE__);</code> if you have more than one such statement)."}, {"owner": {"reputation": 1120, "user_id": 3930007, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TUmyw.jpg?s=128&g=1", "display_name": "Raghuram Vadapalli", "link": "https://stackoverflow.com/users/3930007/raghuram-vadapalli"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442401572, "post_id": 32600269, "comment_id": 53064667, "body": "Thanks! I&#39;ll follow that"}], "answers": [{"comments": [{"owner": {"reputation": 1120, "user_id": 3930007, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TUmyw.jpg?s=128&g=1", "display_name": "Raghuram Vadapalli", "link": "https://stackoverflow.com/users/3930007/raghuram-vadapalli"}, "edited": false, "score": 0, "creation_date": 1442382525, "post_id": 32600429, "comment_id": 53053754, "body": "Oh! I&#39;m launching tempid and checking pid. I changed pid to tempid in waitpid(). That worked. Thanks"}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1442382001, "last_edit_date": 1442382001, "creation_date": 1442381368, "answer_id": 32600429, "question_id": 32600269, "link": "https://stackoverflow.com/questions/32600269/wifstopped-is-not-working-properly/32600429#32600429", "title": "WIFSTOPPED is not working properly", "body": "<p>One thing I notice is that you're sending the continuation signal to <code>tempid</code>, then monitoring <code>pid</code>.</p>\n\n<p>Check to make sure that these are set to the same PID, although it would probably be safer and more readable to just use:</p>\n\n<pre><code>kill(pid,SIGCONT);\n</code></pre>\n\n<p>before entering the monitoring loop.</p>\n\n<p>You might also want to consider renaming your <code>signal</code> variable to avoid possible clashes with the <code>signal()</code> function.</p>\n"}], "owner": {"reputation": 1120, "user_id": 3930007, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TUmyw.jpg?s=128&g=1", "display_name": "Raghuram Vadapalli", "link": "https://stackoverflow.com/users/3930007/raghuram-vadapalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "accepted_answer_id": 32600429, "answer_count": 1, "score": 1, "last_activity_date": 1442382001, "creation_date": 1442380470, "last_edit_date": 1442381358, "question_id": 32600269, "link": "https://stackoverflow.com/questions/32600269/wifstopped-is-not-working-properly", "title": "WIFSTOPPED is not working properly", "body": "<p>I am trying to implement the <code>fg</code> command in my mini shell.\nThe problem is as follows:</p>\n\n<ul>\n<li>A process(gedit) is started in foreground.</li>\n<li>I stop with <kbd>ctrl+z</kbd> and check exit my wait loop by checking the return value of <code>WIFSTOPPED(status)</code>:</li>\n</ul>\n\n<pre class=\"lang-c prettyprint-override\"><code>while(1){\n    pid_t pid_check = waitpid(pid,&amp;signal,WNOHANG|WUNTRACED);\n    if(pid_check == pid){\n        if(WIFSTOPPED(signal)){\n            tempid = pid_check;\n            break;\n        }\n        else if(WIFEXITED(signal))\n            break;\n        else if(WIFSIGNALED(signal))\n            break;\n    }\n    \u2026\n}\n</code></pre>\n\n<p>I want this to resume when fg command is given:</p>\n\n<pre><code>kill(tempid,SIGCONT);\nwhile(1){\n    pid_t pid_check = waitpid(pid,&amp;signal,WNOHANG|WUNTRACED);\n    if(pid_check == pid){\n        if(WIFSTOPPED(signal)){\n            tempid = pid_check;\n            printf(\"Here\");\n            break;\n        }\n        else if(WIFEXITED(signal))\n            break;\n        else if(WIFSIGNALED(signal))\n            break;\n    }\n}\n</code></pre>\n\n<p>But WIFSTOPPED keeps returning non zero so waitpid is breaking and process goes in background. I tried to search online but couldn't find anything useful.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10516, "user_id": 2872388, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8a10ec2ce33bfdb3a0c44e39adf3092b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/2872388/steve"}, "edited": false, "score": 0, "creation_date": 1442380349, "post_id": 32600232, "comment_id": 53052922, "body": "you mean num &gt; 0 &amp;&amp; num &lt; 4294967295?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1442380745, "post_id": 32600232, "comment_id": 53053082, "body": "Use <code>strtoul()</code> to convert the string, carefully, and then check that the result was a valid <code>unsigned long</code> (error check the return from <code>strtoul()</code> carefully), and then validate that the result is not larger than <code>UINT_MAX</code> from <code>&lt;limits.h&gt;</code>.  There isn&#39;t a standard <code>strtoui()</code> or <code>strtoi()</code> function (but it wouldn&#39;t be hard to create them using <code>strtoul()</code> or <code>strtol()</code>."}, {"owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442381221, "post_id": 32600232, "comment_id": 53053257, "body": "@JonathanLeffler: exactly :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442388804, "post_id": 32600232, "comment_id": 53056815, "body": "Do you want to reject a number with leading blanks?  Trailing blanks?  A leading plus sign?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442437153, "post_id": 32600232, "comment_id": 53087757, "body": "@Jonathan Leffler <code>strtoul()</code> accepts  a minus sign &quot;If the subject sequence begins with a minus sign, the value resulting from the conversion is negated (in the return type).&quot;  <code>unsigned long</code> does not overflow due to negation, just wraps around.  Do not recommend a simplistic usage of <code>strtoul()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442437254, "post_id": 32600232, "comment_id": 53087812, "body": "@chux: I did <i>not</i> suggest simplistic usage of <code>strtoul()</code> \u2014 I suggested <i>careful</i> usage of it, which requires handling issues of signs, leading and trailing white space, non-numeric characters after trailing white space if trailing white space is allowed, etc."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 2604679, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5f37f3ed41779922962e96c9599ed0f9?s=128&d=identicon&r=PG&f=1", "display_name": "joy-cs", "link": "https://stackoverflow.com/users/2604679/joy-cs"}, "edited": false, "score": 0, "creation_date": 1442387051, "post_id": 32601583, "comment_id": 53055807, "body": "For a command line input, what will be the data-type of the variable <code>variable_name</code>? Because, <code>argv</code> is defined as <code>char *argv[]</code>."}, {"owner": {"reputation": 303, "user_id": 5339094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94poD.jpg?s=128&g=1", "display_name": "Jaya Krishna", "link": "https://stackoverflow.com/users/5339094/jaya-krishna"}, "reply_to_user": {"reputation": 329, "user_id": 2604679, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5f37f3ed41779922962e96c9599ed0f9?s=128&d=identicon&r=PG&f=1", "display_name": "joy-cs", "link": "https://stackoverflow.com/users/2604679/joy-cs"}, "edited": false, "score": 0, "creation_date": 1442387444, "post_id": 32601583, "comment_id": 53056033, "body": "@joy-cs the data type should be &quot;unsigned int&quot; if we declare the variable name as char, and reading the intput as string there are two cases 1. It sloves our problem as we compare the first column of the input as + or - and print the result. 2. If we want to do any operations using the declared variable we need to change the string into int as we use integer.parseint() in java so declaring the variable as unsigned int is helpful in long run in my opinion."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1442387935, "post_id": 32601583, "comment_id": 53056286, "body": "In fact, you want <code>x &gt;= 0 &amp;&amp; x &lt;= 4294967295</code>, but that&#39;s inherently true for 32-bit unsigned ints, so you need anoter approach, possibly a wider int."}, {"owner": {"reputation": 329, "user_id": 2604679, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5f37f3ed41779922962e96c9599ed0f9?s=128&d=identicon&r=PG&f=1", "display_name": "joy-cs", "link": "https://stackoverflow.com/users/2604679/joy-cs"}, "edited": false, "score": 0, "creation_date": 1442419271, "post_id": 32601583, "comment_id": 53077597, "body": "But what to do, if the data get truncated to fit into the allocated memory? E.g. your input is an unsigned long and trying to assign it into a your unsigned int variable to compare it. Even there may be a chance of type casting error."}, {"owner": {"reputation": 303, "user_id": 5339094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94poD.jpg?s=128&g=1", "display_name": "Jaya Krishna", "link": "https://stackoverflow.com/users/5339094/jaya-krishna"}, "edited": false, "score": 0, "creation_date": 1442456959, "post_id": 32601583, "comment_id": 53093547, "body": "Here we are not assigning the value to any any other variable, we are just getting the value at the run time and comparing the taken value whether it is in between the limits are not."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1442470862, "post_id": 32601583, "comment_id": 53097450, "body": "You cannot compare <code>unsigned</code> against those extremum values, as <b>all</b> <code>unsigned</code>s are between both.  Probably, on a good compiler you&#39;ll get a warning, telling you that expression will always be <code>true</code>."}], "tags": [], "owner": {"reputation": 303, "user_id": 5339094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94poD.jpg?s=128&g=1", "display_name": "Jaya Krishna", "link": "https://stackoverflow.com/users/5339094/jaya-krishna"}, "is_accepted": false, "score": -2, "last_activity_date": 1442386522, "last_edit_date": 1442386522, "creation_date": 1442386342, "answer_id": 32601583, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c/32601583#32601583", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<p>I think we can implement this thing in a simple way,</p>\n\n<pre><code>If((variable_name&gt;0)&amp;&amp;(variable_name&lt;4294967295))\n   printf(\"entered number is a valid unsigned int one\");\nelse\n   printf(\"entered value is not valid\");\n</code></pre>\n\n<p>The above code solves your requirement but I am not sure the time complexity in it because of huge number of comparisons that may happen in it.</p>\n"}, {"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1442388183, "post_id": 32601890, "comment_id": 53056433, "body": "<code>strtoul</code> does already what your regex does, except that <code>strtoul</code> accepts a leading minus sign, for which you must check. And a regex just to check whather the string consists of digits is a bit too much, in my opinion."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1442388583, "post_id": 32601890, "comment_id": 53056681, "body": "Sledgehammer; meet walnut\u2026"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1442388714, "post_id": 32601890, "comment_id": 53056761, "body": "Walnut crushed to death :("}], "tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 0, "last_activity_date": 1442387287, "creation_date": 1442387287, "answer_id": 32601890, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c/32601890#32601890", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<p>you could try a combination of steps below</p>\n\n<blockquote>\n  <p>Regex Match</p>\n</blockquote>\n\n<pre><code>/* Compile regular expression */\n        reti = regcomp(&amp;regex, \"^[[:digit:]]\", 0);\n        if( reti ){ fprintf(stderr, \"Could not compile regex\\n\"); exit(1); }\n\n/* Execute regular expression */\n        reti = regexec(&amp;regex, argv[1], 0, NULL, 0);\n        if( !reti ){\n                puts(\"Match\");\n        }\n        else if( reti == REG_NOMATCH ){\n                puts(\"No match\");\n        }\n        else{\n                regerror(reti, &amp;regex, msgbuf, sizeof(msgbuf));\n                fprintf(stderr, \"Regex match failed: %s\\n\", msgbuf);\n                exit(1);\n        }\n</code></pre>\n\n<blockquote>\n  <p>Followed by conversion to integer</p>\n</blockquote>\n\n<pre><code>strtoul() \n</code></pre>\n\n<blockquote>\n  <p>Followed by restrictions max or min</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442388927, "post_id": 32602148, "comment_id": 53056876, "body": "What do you get if the user types <code>.&#47;yourprog &quot;&quot;</code> with an empty string for <code>argv[1]</code>?  Just a weird edge case..."}, {"owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442389304, "post_id": 32602148, "comment_id": 53057078, "body": "Thanks @JonathanLeffler, My previous code return success with empty string, Now I FIx this problem."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442389799, "post_id": 32602148, "comment_id": 53057339, "body": "Alternatively, you could have used <code>if (pEnd == argv[1])</code>, avoiding an unconditional call to <code>strlen()</code>.  But yes, you&#39;ve fixed the problem.  Hmmm, except perhaps <code>-0</code>; it isn&#39;t clear in the question whether that&#39;s like <code>-1</code> or not.  This sort of thing is always surprisingly complex \u2014 to specify and code.  But you&#39;re firmly on the right track.  You might think about using <code>UINT_MAX</code> from <code>&lt;limits.h&gt;</code> instead of the 9-digit constant."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442437426, "post_id": 32602148, "comment_id": 53087894, "body": "As <code>UINT_MAX</code> is not defined as <code>4294967295</code>, depending on OP&#39;s contradictory goals (unsigned int vs. 4294967295), <code>4294967295</code> could be used instead of <code>UINT_MAX</code>.  Yet if code uses <code>UINT_MAX</code>, <code>strtoll()</code> may not be wide enough."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1442471668, "post_id": 32602148, "comment_id": 53097786, "body": "So then, let&#39;s suppose we have the same problem with <code>unsigned long long </code> integers.  How do we solve the problem then?  using <code>unsigned long long long</code>s?"}, {"owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "edited": false, "score": 0, "creation_date": 1442475628, "post_id": 32602148, "comment_id": 53099759, "body": "Thanks@LuisColorado Answer edited and this approach should work this situation."}, {"owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442510309, "post_id": 32602148, "comment_id": 53121144, "body": "@chux Error corrected. this may work. Thanks for suggestion."}], "tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": false, "score": 2, "last_activity_date": 1442510241, "last_edit_date": 1495542665, "creation_date": 1442388119, "answer_id": 32602148, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c/32602148#32602148", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<p>It can be implemented as follow:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;limits.h&gt;\nint main(int argc, char** argv)\n{\n    long long num;\n    char * pEnd;\n    if(argc&gt;=2)\n    {\n        num = strtoll(argv[1], &amp;pEnd, 10);\n        if(pEnd==argv[1]||*pEnd!='\\0'||num&lt;0||num&gt;UINT_MAX)\n        {\n           // printf(\"Error\\n\");\n           //Generate error message\n        }\n        else\n        {\n            // printf(\"Success\\n\");\n        }\n    }\n}\n</code></pre>\n\n<p>Using <a href=\"http://www.cplusplus.com/reference/cstdlib/strtoll/\" rel=\"nofollow noreferrer\">strtoll()</a> to convert string to integer. <code>strtoll()</code> can be use  to check whether input is number or not. Then check number is in range [0, 4294967295].  </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As <a href=\"https://stackoverflow.com/users/3899431/luis-colorado\">Luis Colorado </a> comment </p>\n\n<blockquote>\n  <p>let's suppose we have the same problem with unsigned long long integers. How do we solve the problem then?</p>\n</blockquote>\n\n<p>To solve this problem this approach may work with string comparison.\nThis version generate error for <code>-0</code> and success for <code>0</code> and was not handled there as OP doesn't clarify this situation. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;limits.h&gt;\n#include&lt;ctype.h&gt;\nvoid trimWhiteSpace(char *ch)\n{\n    int j=0, i=0;\n    while(isspace((unsigned char)ch[i])) i++;\n    while(isdigit(ch[i])) ch[j++]=ch[i++];\n    ch[j]='\\0';\n}\nint main(int argc, char** argv)\n{\n    unsigned long long num;\n    char * pEnd;\n    const int max_len = snprintf(NULL, 0, \"%llu\", ULONG_LONG_MAX);\n    char max_num[max_len+1];\n    snprintf(max_num, max_len+1, \"%llu\", ULONG_LONG_MAX);\n    if(argc&gt;=2)\n    {\n        trimWhiteSpace(argv[1]);\n        int len = strlen(argv[1]);\n        num = strtoll(argv[1], &amp;pEnd, 10);\n        if(len==0||*pEnd!='\\0'||len&gt;max_len||(len==max_len&amp;&amp;strcmp(argv[1], max_num)==1)||argv[1][0]=='-')\n        {\n            printf(\"Error\\n\");\n            //Generate error message\n        }\n        else\n        {\n            //Success\n            printf(\"Success: %llu\\n\", strtoull(argv[1], NULL, 10));\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1442471395, "post_id": 32602350, "comment_id": 53097675, "body": "Sorry, I upvoted your solution and then changed mind... You cannod compare <code>result &gt; 42949967295</code> as every <code>unsigned</code> (32 bit) value is below that extreme.  Edit your answer to eliminate that test, and I&#39;ll upvote it again."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1442479007, "post_id": 32602350, "comment_id": 53101609, "body": "@LuisColorado on some platforms, an <code>unsigned long</code> goes higher than <code>42949967295</code>. For these platforms, I need to explicitly test for this boundary. On other platforms, I expect the compiler to optimize this test away. I should use the corresponding macro though."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442510815, "post_id": 32602350, "comment_id": 53121419, "body": "<code>strtoul()</code> does not fail with negative numbers. <code>strtoul(&quot;-1&quot;, NULL, 0)</code> returns <code>4294967295</code>, (<code>ULONG_MAX</code>).  It is lenient on that pesky <code>&#39;-&#39;</code> sign."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442511186, "post_id": 32602350, "comment_id": 53121594, "body": "@chux Gotcha! I need to check for that, too."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442511385, "post_id": 32602350, "comment_id": 53121703, "body": "@chux Wait, but isn&#39;t <code>errno</code> set in this case?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442513054, "post_id": 32602350, "comment_id": 53122665, "body": "<code>errno</code> is not set as the digits <code>&quot;1&quot;</code> fit in the range of <code>[0...ULONG_MAX]</code>.  Then &quot;If the subject sequence begins with a minus sign, the value resulting from the conversion is negated (in the return type).&quot;  Negation with unsigned math is well defined: value just wraps.  Detail:  gcc returns <code>errno==0</code> and IMO, the spec is convoluted in its wording"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442513650, "post_id": 32602350, "comment_id": 53123034, "body": "BTW: Maybe <code>endptr[0] == &#39;\\0&#39;</code> --&gt; <code>endptr[0] != &#39;\\0&#39;</code>?"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1442514414, "post_id": 32602350, "comment_id": 53123504, "body": "@FUZxxl, the problem can be transported to any platform and the problem will be exactly the same, but with other limit number.... Simply, you cannot compare an <code>unsigned</code> to be over the type&#39;s upper limit because of the definition of upper limit, it cannot have values above it."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 1, "creation_date": 1442518335, "post_id": 32602350, "comment_id": 53125579, "body": "@LuisColorado Please observe that the type of <code>result</code> is <code>unsigned long</code>, not <code>unsigned int</code>, thus I need to make sure that the resulting number is in range for an <code>unsigned int</code>. If the conversion overflows an <code>unsigned long</code>, <code>errno</code> will have been set to <code>ERANGE</code> by <code>strtoul</code>, but if I need to manually check if the number fits into an <code>unsigned int</code> as well."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442518352, "post_id": 32602350, "comment_id": 53125588, "body": "@chux Yeah, fixed, just like the issue with negative numbers."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1442518239, "last_edit_date": 1442518239, "creation_date": 1442388724, "answer_id": 32602350, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c/32602350#32602350", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<p>The standard library function <code>strtoul</code> can be used for this purpose like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n\nchar *numstr = argv[1], *endptr;\nunsigned long result; /* where we save our number to */\n\n/* skip leading whitespace */\nwhile (isblank(*numstr))\n    numstr++;\n\nerrno = 0;\nresult = strtoul(numstr, &amp;endptr, 10);\nif (numstr[0] == '\\0' || endptr[0] != '\\0') {\n    /* this branch taken if input is not a number */\nelse if (errno == ERANGE || result &gt; UINT_MAX || numstr[0] == '-') {\n    /* this branch taken if number is out of range */\n} else {\n    /* this branch taken on successful conversion */\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1442519366, "last_edit_date": 1442519366, "creation_date": 1442438344, "answer_id": 32618916, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c/32618916#32618916", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<blockquote>\n  <p>to verify that user input number is in fact a valid unsigned int in c</p>\n</blockquote>\n\n<p><code>strtoul()</code> is the right function to use.  It poses some problems as it accepts <code>'-'</code>.  Let us assume leading whitespace is OK and check the front end of the string manually.</p>\n\n<pre><code>// 0: invalid, 1: valid\nint unsigned_int_valid(const char *s) {\n\n  while (isspace((unsigned char) *s) s++;\n  // Fail on '-' as any negative number is out of range.\n  if (*s == '-') return 0;  // Could add code to allow \"-0\"\n  if (*s == '+') s++;\n  if (!isdigit((unsigned char) *s) return 0;\n  // Code knowns string begins with a digit\n\n  errno = 0;     // Clear this global value as code tests it later.\n  char *endptr;  // Pointer where parsing stopped.\n  unsigned long ul = strtoul(s, &amp;endptr, 0);\n\n  // Usually this test is needed to see if _any_ conversion happened,\n  // but code knowns the first character is a digit.\n  #if 0\n  if (s == endptr) return 0;\n  #endif\n\n  // Could march down the end of the string allowing trailing white-space\n  while (isspace((unsigned char) *endptr) endptr++;\n\n  // Extra text after the digits?\n  if (*endptr) return 0;\n\n  // Overflow?  strtoul sets `errno = ERANGE` when \"outside the range\" of unsigned long\n  if (errno) return 0;\n\n  #if ULONG_MAX &gt; UINT_MAX\n  // Does 'ul` value exceeds `unsigned` range?\n  if (ul &gt; UINT_MAX) return 0;\n  #endif\n\n  return 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442519095, "post_id": 32623541, "comment_id": 53125977, "body": "&quot;<code>unsigned</code> overflow is Undefined Behavior&quot; is not consistent with &quot;A computation involving unsigned operands can never overflow, because a result that cannot be represented ...  is reduced modulo ....&quot; C11 &#167;6.2.5 9."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1442473040, "last_edit_date": 1442473040, "creation_date": 1442469989, "answer_id": 32623541, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c/32623541#32623541", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<p>This is indeed some difficult problem to solve with <code>unsigned</code> types, as you cannot test for range (as in <code>unsigned</code> there are no values above or below the extremes ---every number is between the extremes)</p>\n\n<p>One approach could be to check for overflow as you parse, as overflows on input lead to numbers below the maximum possible value.  You can read numbers, char per char, and flag an error on overflow (when you detect that adding a digit doesn't produce a bigger number) like this:</p>\n\n<pre><code>const char *input_string = &lt;&lt;the input string goes here&gt;&gt;;\nconst char *s;\nunsigned res = 0;\nconst unsigned base = 10; /* numbering base */\n\n#if INCLUDE_SPACES_BEFORE_NUMBER\nwhile (isspace(*s)) s++;  /* skip spaces. Optional */\n#endif\nfor (s = input_string; *s; *s++) {\n    const unsigned old_res = res;\n\n    if (!isdigit(*s)) {\n        /* flag_error(non_digits_in_string); */\n        SIGNAL_SOME_INVALID_RESULT_TO_FLAG_NONDIGIT_AND_RETURN();\n        /*NOTREACHED*/\n    }\n    res *= base;\n    res += *s - '0'; /* digits are warranteed to be consecutive by std */\n    if (res &lt; old_res) {\n        /* AN OVERFLOW HAS OCCURED */\n        SIGNAL_SOME_INVALID_RESULT_TO_FLAG_OVERFLOW_AND_RETURN();\n        /*NOTREACHED*/\n    }\n}\nreturn res;\n</code></pre>\n\n<p>But this approach is non valid, as <code>unsigned</code> overflow is Undefined Behaviour, so we have to check it before letting it to happen.</p>\n\n<p>The next approach could be to consider a regexp to match the string for valid unsignned range.  As you point in your question, your unsigneds range from <code>0</code> to <code>4294967295</code>, and that can be matched with the following regular expression:</p>\n\n<pre><code>^(0|[1-9][0-9]{0,8}|[1-3][0-9]{9}|4[01][0-9]{8}|42[0-8][0-9]{7}|429[0-3][0-9]{6}|4294[0-8][0-9]{5}|42949[0-5][0-9]{4}|429496[0-6][0-9]{3}|4294967[0-1][0-9]{2}|42949672[0-8][0-9]|429496729[0-5])$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/cY0aR4/1\" rel=\"nofollow\">See DEMO</a></p>\n\n<p>if it does not match, the number is invalid or not in the range you request.  I have included the complete regexp to show you the pattern on it, so you can easily adapt it to other ranges.  This way, you only accept the whole space of valid digit sequences (I have not included leading zeros, as they would mark the number as octal if you want to follow C syntax, but if you want them, just insert <code>0*</code> between the initial anchor <code>^</code> and the next pattern <code>(...</code>, and the same for spaces/tabs, if you want to allow them precede the number.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1593021103, "last_edit_date": 1593021103, "creation_date": 1442500917, "answer_id": 32633209, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c/32633209#32633209", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<blockquote>\n<p>to check if their input is within the correct range (0 and 4294967295)<br />\nto verify that user input number is in fact a valid unsigned int in c</p>\n</blockquote>\n<p>[Edit]</p>\n<p>Since the original far below lacks pizzazz, how about 2 stage check using <code>strtol()</code> and <code>strtoul()</code> if needed?</p>\n<p>Code avoids direct first use of <code>strtoul()</code> which fails to detect negative values.</p>\n<pre><code>// Return\n// 0: OK.  Value saved in *u\n// 1: Numeric text found, yet out of `unsigned` range.  0 or UINT_MAX saved in *u\n// 2: Numeric text found, trailing junk detected.  Value saved in *u\n// 3: No numeric text found. 0 saved in *u\nint unsigned_check(const char *s, unsigned *u) {\n  unsigned long uval;\n  char *endptr;\n  errno = 0;\n  // Try first to convert to long\n  long val = strtol(s, &amp;endptr, 0);\n  if (val &lt; 0) {\n    errno = ERANGE;\n    *u = 0;\n    return 1; // Negative value\n  }\n  if (errno == ERANGE) {  // Too big for long\n    errno = 0;\n    // Try 2nd to convert to unsigned long\n    uval = strtoul(s, &amp;endptr, 0);\n  } else {\n    uval = (unsigned long) val;\n  }\n  if (errno == ERANGE || uval &gt; UINT_MAX) {\n    errno = ERANGE;\n    *u = UINT_MAX;\n    return 1;\n  }\n  *u = (unsigned) uval;\n  if (endptr == s) {\n    return 3; // No conversion\n  }\n  while (isspace((unsigned char ) *endptr)) {\n    endptr++;\n  }\n  if (*endptr) {\n    return 2;  // Junk at the end\n  }\n  return 0;\n}\n</code></pre>\n<hr />\n<p><strong>Original</strong></p>\n<p><code>strtoul()</code> is the right function to use.  It poses some problems as it accepts <code>'-'</code>.  Let us assume leading whitespace is OK and check the front end of the string manually.</p>\n<p>Given <code>strtoul()</code> nuances, code could simple roll its own check of a string for valid <code>unsigned</code>.</p>\n<p><code>(white-space)*(+-)[0-9](0-9)*(white-space)*</code><br />\nThis one passes <code>&quot;-0&quot;</code>.  Fails other negative numbers.<br />\nFails out-of-range.<br />\nAllows leading and trailing spaces.<br />\nAllows end-less leading zeros: &quot;000000000000000000000000000000001&quot;.</p>\n<pre><code>// 0: OK\n// 1: overflow\n// 2: invalid character sequence\nint check_unsigned(const char *s) {\n  // consume leading white space\n  while (isspace((unsigned char) *s)) {\n    s++;\n  }\n\n  // get sign\n  int sign = *s;\n  if (sign == '+' || sign == '-') s++;\n\n  // convert\n  unsigned sum = 0;\n  const char *first_digit = s;\n  while (isdigit((unsigned char) *s)) {\n    unsigned sum_before = sum;\n    sum = sum * 10 + *s - '0';\n    if (sum &lt; sum_before) {\n      return 1;  // overflow\n    }\n    s++;\n  }\n\n  // Test for &lt; 0\n  if (sign == '-' &amp;&amp; sum &gt; 0) {\n    return 1;\n  }\n\n  // Test for no digits\n  if (s == first_digit) {\n    return 2;  // no digits\n  }\n\n  // Test for trailing white space\n  while (isspace((unsigned char) *s)) {\n    s++;\n  }\n  if (*s != '\\0') {\n    return 2;\n  }\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3662531, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1557610880/picture?type=large", "display_name": "user3662531", "link": "https://stackoverflow.com/users/3662531/user3662531"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1899, "favorite_count": 0, "answer_count": 7, "score": 1, "last_activity_date": 1593021103, "creation_date": 1442380246, "last_edit_date": 1442380448, "question_id": 32600232, "link": "https://stackoverflow.com/questions/32600232/how-to-verify-that-user-input-number-is-in-fact-a-valid-unsigned-int-in-c", "title": "How to verify that user input number is in fact a valid unsigned int in c", "body": "<p>I am writing a program in c that takes in an argument from a user on the command line but that argument has to be a valid unsigned int. For example if the user put in the value -1, then I would have to print an error code. Or if the user entered anything higher than 4294967295, then I would also print an error code. </p>\n\n<p>I am unsure how to check if their input is within the correct range (0 and 4294967295).</p>\n"}, {"tags": ["c", "memory-management", "memory-leaks"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1481317"}, "edited": false, "score": 1, "creation_date": 1442380427, "post_id": 32600152, "comment_id": 53052957, "body": "Please consider giving feedback on downvote :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442381213, "post_id": 32600152, "comment_id": 53053253, "body": "Instead of using <code>asprintf</code>, measure <code>strlen(chunk)</code>, then use <code>realloc</code> and <code>strcat</code> or equivalent."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1481317"}, "edited": false, "score": 0, "creation_date": 1442382468, "post_id": 32600337, "comment_id": 53053735, "body": "Thanks for your answer. What if the number_of_chunks is of variable size?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1442382572, "post_id": 32600337, "comment_id": 53053778, "body": "@BibekSubedi: If you use C99 or later, you can use a VLA (variable length array) like <code>char str[n]</code>, where <code>n</code> is a variable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1481317"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1442382717, "post_id": 32600337, "comment_id": 53053818, "body": "@MOehm I am not using C99. Should i use double pointer and malloc it?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442382928, "post_id": 32600337, "comment_id": 53053889, "body": "<code>(final_string==NULL?&quot;&quot;:final_string)</code> is incorrect in this code, you pass <code>char **</code> to <code>%s</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1442383537, "post_id": 32600337, "comment_id": 53054129, "body": "But the solution with the string array leaves you with 12 separate strings, which is exactly what you had before. The idea is to concatenate these strings. You also need to initialise the strings to <code>NULL</code> somewhere. If you do that, the test <code>final_string[i] == NULL</code> is always true, so you could just <code>strdup</code> the chunk."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1442384379, "post_id": 32600337, "comment_id": 53054488, "body": "I believe the OP wants one single string, not an array of strings."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442384479, "post_id": 32600337, "comment_id": 53054544, "body": "@SantoshA I think it is incorrect to give the same pointer for <code>%s</code> as you did give its address for the first argument : the function might allocate memory, updating <code>final_string[i]</code>, before it reads out for processing the <code>%s</code>.  However your code doesn&#39;t make sense anyway as each new chunk of text is supposed to append to the previous chunk."}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1442386173, "post_id": 32600337, "comment_id": 53055353, "body": "@MOehm, M.M, Ludin. I have updated the answer, in which concatenation works fine with no memory leaks"}, {"owner": {"reputation": 3460, "user_id": 1987788, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5229a103393dc342027d269fb8cf7f1e?s=128&d=identicon&r=PG", "display_name": "natenho", "link": "https://stackoverflow.com/users/1987788/natenho"}, "edited": false, "score": 0, "creation_date": 1451323184, "post_id": 32600337, "comment_id": 56737206, "body": "@SantoshA when you free(tmp), the previous final_string address is not allocated anymore, isn&#39;t that a bug/thread unsafe code since your final_string content can eventually be overwritten by malloc, calloc, etc? It indeed solves the op question, but may not be used as a function or in multi-threaded applications."}], "tags": [], "owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "is_accepted": false, "score": 2, "last_activity_date": 1442386040, "last_edit_date": 1442386040, "creation_date": 1442380902, "answer_id": 32600337, "question_id": 32600152, "link": "https://stackoverflow.com/questions/32600152/memory-leakage-on-asprintf-using-inside-a-loop-in-c/32600337#32600337", "title": "memory leakage on asprintf using inside a loop in C", "body": "<p>To put your question in the simplest possible way, what you are essentially trying to do with the above code is <br>\n1. Allocate memory to a pointer continuously(in your case 12 times in the for loop) and <br>\n2. free it at the end only once, which is causing memory leak.<br></p>\n\n<p>Like in the below code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int i;\n    int number_of_chunks = 12;\n    char *final_string = NULL;\n\n    for(i = 0; i &lt; number_of_chunks; i++) \n    {\n        /*For example: similar to what asprintf does, allocate memory to the pointer*/\n        final_string = malloc(1);\n    }\n    free(final_string);\n    return 0;\n}\n</code></pre>\n\n<p>From the above example it is easily visible that you have allocated the memory <code>12</code> times but freed only once.</p>\n\n<p>code snippet:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{  \n    int i;\n    int number_of_chunks = 12;\n    char *final_string = NULL;\n    char *tmp = NULL;\n\n    for(i = 0; i &lt; number_of_chunks; i++)\n    {\n        char *chunk = some_hash_table.pop(i);\n        asprintf(&amp;final_string, \"%s%s\", (tmp==NULL?\"\":tmp), chunk);\n        if (tmp)\n            free(tmp);\n        tmp = final_string;\n    }\n\n    printf(\"%s\\n\", final_string);\n    free(final_string);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442384692, "post_id": 32600780, "comment_id": 53054648, "body": "What&#39;s the rationale behind the realloc size? Wouldn&#39;t you rather always like to allocate [previous size] + x segments * y bytes, where y is a number suitable for the alignment requirements (like for example x*8 bytes)? Rather than logarithmically double the size each time."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442384848, "post_id": 32600780, "comment_id": 53054726, "body": "The rationale is to reduce the number of allocations, at the cost of wasting some memory. The size isn&#39;t doubled <i>each time</i>, only when it&#39;s needed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442386146, "post_id": 32600780, "comment_id": 53055345, "body": "I realize that the purpose is to reduce the number of realloc calls. What I was trying to say is, why would you base the size of the memory allocations on the user data rather than the nature of the heap segments? I heard from some PC veteran at some point that when you write &quot;STL-like&quot; containers, you should pick a segment size x, suitable for the system, then grow that buffer size with some multiplier each time."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1442386342, "post_id": 32600780, "comment_id": 53055431, "body": "I have to admit that I haven&#39;t given that much thought for the example code. The initial chunk size and the multiplier are pulled from thin air."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1442382986, "creation_date": 1442382986, "answer_id": 32600780, "question_id": 32600152, "link": "https://stackoverflow.com/questions/32600152/memory-leakage-on-asprintf-using-inside-a-loop-in-c/32600780#32600780", "title": "memory leakage on asprintf using inside a loop in C", "body": "<p>Others have already pointed out that you lose the reference to all but the last allocation and that having the same string that is written to as <code>printf</code> argument is probably undefined behaviour, even more so as re-allocations might occur and invalidate the format argument.</p>\n\n<p>You don't use <code>asprintf</code>'s formatting capabilities, you use it only to concatenate strings, so you might want to take another approach. You could either collect the strings in an array, determine the needed length, allocate as appropriate and fill the allocated buffer with <code>memcpy</code>.</p>\n\n<p>Or you could write a self-allocating string buffer similar to C++'s <code>std::stringstream</code>, for example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct append_t {\n    char *str;          /* string */\n    size_t len;         /* length of string */\n    size_t size;        /* allocated size */\n};\n\nvoid append(struct append_t *app, const char *str)\n{\n    size_t len = strlen(str);\n\n    while (app-&gt;len + len + 1 &gt;= app-&gt;size) {\n        app-&gt;size = app-&gt;size ? app-&gt;size * 2 : 0x100;\n        app-&gt;str = realloc(app-&gt;str, app-&gt;size);\n        /* error handling on NULL re-allocation */\n    }\n\n    strcpy(app-&gt;str + app-&gt;len, str);\n    app-&gt;len += len;\n}\n\nint main(int argc, char **argv)\n{\n    struct append_t app = {NULL};\n\n    for (int i = 1; i &lt; argc; i++) {\n        append(&amp;app, argv[i]);\n    }\n\n    if (app.str) puts(app.str);\n\n    free(app.str);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1481317"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1442386040, "creation_date": 1442379720, "last_edit_date": 1442380482, "question_id": 32600152, "link": "https://stackoverflow.com/questions/32600152/memory-leakage-on-asprintf-using-inside-a-loop-in-c", "title": "memory leakage on asprintf using inside a loop in C", "body": "<p>I have a piece of code that looks like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int i;\n    int number_of_chunks = 12;\n    char *final_string = NULL;\n\n    for(i = 0; i &lt; number_of_chunks; i++) \n    {\n        char *chunk = some_hash_table.pop(i);\n        asprintf(&amp;final_string, \"%s%s\", (final_string==NULL?\"\":final_string), chunk);\n    }\n    free(final_string);\n    return 0;\n}\n</code></pre>\n\n<p>Here I am concatinating string chunks dynamically,  meaning I don't know the size of each chunk in advance. For this I am using asprintf. The code works fine, however rise some serious memory issue. My doubt is asprintf allocates memory in each iteration and the code loses pointer in each iteration. If there is any other way I can concate string inside loop please guide me</p>\n"}, {"tags": ["c", "character", "getchar"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 4, "creation_date": 1442379638, "post_id": 32600062, "comment_id": 53052707, "body": "Each <code>getchar</code> reads one character and each <code>putchar</code> displays one character. <code>c</code> <code>a</code> <code>c</code> <code>t</code> <code>i</code>. The entire word is never stored at once. You don\u2019t see each character echoed immediately because your input is buffered by line. <code>d</code> is what the last byte of the <code>&quot;cacti&quot;</code> pointer ended up being when interpreted as text."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1442380996, "post_id": 32600062, "comment_id": 53053169, "body": "On which operating system? C does not know about the keyboard! See <a href=\"http://stackoverflow.com/a/32547696/841108\">this</a> &amp; <a href=\"http://stackoverflow.com/a/32392409/841108\">that</a>"}, {"owner": {"reputation": 243, "user_id": 5300827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90xJw.png?s=128&g=1", "display_name": "Jawi Mmm", "link": "https://stackoverflow.com/users/5300827/jawi-mmm"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1442383924, "post_id": 32600062, "comment_id": 53054288, "body": "@minitech Oh. that makes a lot of sense actually. Kay thanks!  ..Ugh. I murdered this question :c"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442380509, "post_id": 32600140, "comment_id": 53052992, "body": "Note that you usually use the yellow-ish &#39;quote&#39; notation to quote someone else&#39;s work.  It appears that you&#39;re using it for your own wording.  While not absolutely wrong, it is a little unorthodox.  Roughly, if you don&#39;t have an external reference to cite (preferably with a URL), you probably shouldn&#39;t be using the <code>&gt;</code>-at-start-of-line quote mechanism."}, {"owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442380773, "post_id": 32600140, "comment_id": 53053091, "body": "Thanks @JonathanLeffler . Next time I&#39;d careful about it."}], "tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": true, "score": 5, "last_activity_date": 1442384711, "last_edit_date": 1442384711, "creation_date": 1442379666, "answer_id": 32600140, "question_id": 32600062, "link": "https://stackoverflow.com/questions/32600062/why-does-getchar-let-single-character-output-functions-display-strings/32600140#32600140", "title": "Why does getchar let single-character output functions display strings?", "body": "<p>Here c is only integer which take a character for your case(Although its limits are larger than that).</p>\n\n<p>For first code segment:</p>\n\n<ul>\n<li><code>getchar()</code> only return a character and you use while loop which take a character from stream and through <code>putchar()</code> it print to console until end of file. You seems to get a line of string and print it but it don't do that way.</li>\n</ul>\n\n<p>In second code segment:</p>\n\n<ul>\n<li>You put a const char* to integer which is not valid(My gcc 4.9.2 does not compile). So it show undefined character (Why print 'd' I don't know, may be compiler issue). </li>\n</ul>\n\n<p>You can do this by:</p>\n\n<pre><code>main()\n{\n    char c[] = \"cacti\";\n    puts(c);\n}\n</code></pre>\n\n<p><strong>EDIT</strong>\nAccording to  <a href=\"http://www.cplusplus.com/reference/cstdio/getchar/\" rel=\"nofollow\">getchar()</a> definition:</p>\n\n<blockquote>\n  <p>On success, the character read is returned (promoted to an int value).\n  The return type is int to accommodate for the special value EOF, which indicates failure.</p>\n</blockquote>\n\n<p>When you type a single line and press enter then first character read outside of while loop. Than check if it is EOF(End Of File- No more data on the file . You can give EOF by pressing Ctrl+Z in windows and Ctrl+D in linux). </p>\n\n<p>As if it is not encountered EOF, then it entered in while loop and print the singe character(by <code>putchar(c)</code>). After the next line <code>c=getchar()</code> take another character you entered in previous line and check while loop condition <code>while(c!=EOF)</code> being true it entered into loop and print a character. It continues until there found any character to print. </p>\n\n<p>So it makes confuse with <a href=\"http://www.cplusplus.com/reference/cstdio/puts/\" rel=\"nofollow\">puts()</a> which Writes a string in standard output.\nWhere <code>putchar()</code> Writes a character to the standard output.</p>\n\n<p>According to <a href=\"http://www.cplusplus.com/\" rel=\"nofollow\">http://www.cplusplus.com/</a></p>\n\n<blockquote>\n  <p>Writes the C string pointed by str to the standard output (stdout) and appends a newline character ('\\n').</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1442380366, "last_edit_date": 1442380366, "creation_date": 1442379918, "answer_id": 32600176, "question_id": 32600062, "link": "https://stackoverflow.com/questions/32600062/why-does-getchar-let-single-character-output-functions-display-strings/32600176#32600176", "title": "Why does getchar let single-character output functions display strings?", "body": "<p>You could use a line-oriented input function to read whole lines.  For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char line[4096];\n    while (fgets(line, sizeof(line), stdin) != 0)\n        fputs(line, stdout);\n    return 0;\n}\n</code></pre>\n\n<p>For most plausible files, this will read one line at a time into the array of characters, and then write that line out.  (If the line length is longer than 4095 characters, then lines will be processed in multiple segments.)  If the file contains null bytes, then the material from the null byte to the end of line will be ignored.  There are fixes for that \u2014 see standard C functions <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fread.html\" rel=\"nofollow\"><code>fread()</code></a> and <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fwrite.html\" rel=\"nofollow\"><code>fwrite()</code></a>, and POSIX function\n<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow\"><code>getline()</code></a>.</p>\n\n<hr>\n\n<p>Note that your second example:</p>\n\n<blockquote>\n<pre><code>int main(void)\n{\n    int c;\n\n    c = \"cacti\";\n    putchar(c);\n}\n</code></pre>\n</blockquote>\n\n<p>shouldn't compile without warnings about assigning a character pointer to an integer.  When you use <code>putchar()</code> on the result, it probably prints the least significant byte of the address where the string <code>\"cacti\"</code> is stored.  It is pure coincidence that the character printed is <code>d</code>.</p>\n\n<p>The <code>putchar()</code> function only ever prints a single byte (which means a single character in many code sets, but it might only be part of a character in UTF-8).</p>\n"}], "owner": {"reputation": 243, "user_id": 5300827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90xJw.png?s=128&g=1", "display_name": "Jawi Mmm", "link": "https://stackoverflow.com/users/5300827/jawi-mmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 32600140, "answer_count": 2, "score": 1, "last_activity_date": 1442384711, "creation_date": 1442379166, "last_edit_date": 1442383678, "question_id": 32600062, "link": "https://stackoverflow.com/questions/32600062/why-does-getchar-let-single-character-output-functions-display-strings", "title": "Why does getchar let single-character output functions display strings?", "body": "<p>Just started on K&amp;R and hit:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/* copy input to output; 1st version */\nmain()\n{\n    int c;\n    c = getchar();\n    while (c != EOF) {\n        putchar(c);\n        c = getchar();\n    }\n}\n</code></pre>\n\n<p>And it just displays what I input, even if it's a string of text.</p>\n\n<pre><code>cacti\ncacti\nstop repeating what i'm saying\nstop repeating what i'm saying\n</code></pre>\n\n<p>Just like that.</p>\n\n<p>What I don't get is why I can't just instantiate variable c with a string of text and print it the same way. (Ignoring the while loop for the sake the example) Like with:</p>\n\n<pre><code>main()\n{\n    int c;\n\n    c = \"cacti\";\n    putchar(c);\n}\n</code></pre>\n\n<p>Wherein the output is apparently just 'd'</p>\n"}, {"tags": ["c", "arrays", "pointers", "matrix", "2d"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1442379732, "post_id": 32599933, "comment_id": 53052734, "body": "<code>change *a[i][j] = 0 to a[i * 3 + j] = 0,</code> this is true. but need cast <code>initialize_matrices((int*)ap, (int*)bp, (int*)cp);</code>. also If you do not want to cast needs type match. <code>void initialize_matrices(int (*a)[3][3], int (*b)[3][3], int (*c)[3][3])</code> ... <code>(*a)[i][j] = 0</code>, in this case call  <code>initialize_matrices(ap, bp, cp);</code>"}, {"owner": {"reputation": 29, "user_id": 5340602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd977fa7e46b8e500ddd5164904e5ab2?s=128&d=identicon&r=PG&f=1", "display_name": "suckypizza", "link": "https://stackoverflow.com/users/5340602/suckypizza"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1442380078, "post_id": 32599933, "comment_id": 53052840, "body": "Thank you for answering but will you please explain to me what that change is true? It would also be nice if you want to just link me to stuff/tell me to google certain things. I promise i&#39;ve tried googling this stuff but maybe i&#39;m just really bad at googling things."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1442380299, "post_id": 32599933, "comment_id": 53052905, "body": "because <code>ac</code> pass to <code>a</code> as <code>int *</code> meant  <code>int *a = &amp;a(at main)[0][0]</code>. E.g (pointer a)[0] &lt;=&gt; a[0][0], (pointer a)[1] &lt;=&gt; a[0][1], (pointer a)[3] &lt;=&gt; a[1][0]"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1442381535, "post_id": 32599933, "comment_id": 53053382, "body": "One solution is to change <code>void initialize_matrices(int* a, int* b, int* c)</code> to <code>void initialize_matrices(int (*a)[3][3], int (*b)[3][3], int (*c)[3][3])</code>, and make sure you are using <code>(*a)[i][j]</code> inside the function because <code>[]</code> has higher precedence than <code>*</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442385478, "post_id": 32600125, "comment_id": 53055007, "body": "@M.M Oops. Completely slipped my mind. Less unaware and more just gigantic error on my part. Significantly edited my answer."}], "tags": [], "owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "is_accepted": true, "score": 1, "last_activity_date": 1442385735, "last_edit_date": 1442385735, "creation_date": 1442379585, "answer_id": 32600125, "question_id": 32599933, "link": "https://stackoverflow.com/questions/32599933/according-to-my-compiler-i-am-using-pointers-incorrectly-for-setting-values-to/32600125#32600125", "title": "According to my compiler, I am using pointers incorrectly for setting values to 2D arrays. However, I am not sure what exactly I am doing wrong", "body": "<p>In Q1, <code>a</code> is an <code>int[3][3]</code>, essentially a 3x3 matrix of integers. In the memory of your computer, this is 9 (3x3=9) integers in a single contiguous chunk of memory.</p>\n\n<p>In Q2 <code>ap</code> is a pointer to an <code>int[3][3]</code>.</p>\n\n<p>So when you want to set a value in the matrix through <code>a</code>, you do it like <code>a[i][j] = 0;</code>, but through <code>ap</code> you do it like <code>(*ap)[i][j] = 0;</code> Note that you need the parentheses around <code>*ap</code> here because otherwise the indexing (<code>[i][j]</code>) will happen first.</p>\n\n<p>However, in Q3, when you want to pass your <code>int[3][3]</code> to a function, and then change it, it gets a bit tricky. We need to pass a pointer to be able to modify the existing matrix.</p>\n\n<p>So we can either write (again, note the parentheses, they're important)</p>\n\n<pre><code>void initialize_matrices(int (*ap)[3][3], int (*bp)[3][3], int (*cp)[3][3]) {\n    ...\n    (*ap)[i][j] = 0;\n    ...\n}\n</code></pre>\n\n<p>We would call the function like <code>initialize_matrices(ap, bp, cp);</code> or <code>initialize_matrices(&amp;a, &amp;b, &amp;c);</code> </p>\n\n<p>Or we could write</p>\n\n<pre><code>void initialize_matrices(int *aq, int *bq, int *cq) {\n    ...\n    aq[j*3 + i] = 0;\n    ...\n}\n</code></pre>\n\n<p>In this case, we have to call the function like <code>initialize_matrices((int *)&amp;a, (int *)&amp;b, (int *)c)</code> - we are <em>casting</em> a pointer to an <code>int[3][3]</code> to a pointer to an integer (which may be the first one in a sequence, as it is in our case).</p>\n\n<p>This is possible because, as I mentioned earlier, an <code>int[3][3]</code> is a contiguous chunk of 9 integers in memory. When you do <code>(*ap)[i][j] = 0;</code>, the computer is actually automatically doing the maths to work out which one to set, but when you cast away the information about the two dimensional array it can't do that any more, so you have do it yourself, with <code>[column_index*ROW_LENGTH + row_index</code>].</p>\n\n<p>To illustrate the situation:</p>\n\n<pre><code>Offset : 2D Access : 1D Access\n00     : a[0][0]   : 0x3 + 0 &lt;--- my ap and aq would both point to here, but have different types\n01     : a[0][1]   : 0x3 + 1\n02     : a[0][2]   : 0x3 + 2\n============ &lt;- end of row 0, visual aid only, memory addresses are consecutive\n03     : a[1][0]   : 1x3 + 0\n04     : a[1][1]   : 1x3 + 1\n05     : a[1][2]   : 1x3 + 2\n============ &lt;- end of row 1\n06     : a[2][0]   : 2x3 + 0\n07     : a[2][1]   : 2x3 + 1\n08     : a[2][2]   : 2x3 + 2\n============ &lt;- end of row 2, end of matrix\n</code></pre>\n\n<p>If you are allowed to define the <code>initialize_matrices()</code> function however you want, I suggest the first version as you will likely find it easier to understand.</p>\n"}, {"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 0, "last_activity_date": 1442385452, "creation_date": 1442385452, "answer_id": 32601335, "question_id": 32599933, "link": "https://stackoverflow.com/questions/32599933/according-to-my-compiler-i-am-using-pointers-incorrectly-for-setting-values-to/32601335#32601335", "title": "According to my compiler, I am using pointers incorrectly for setting values to 2D arrays. However, I am not sure what exactly I am doing wrong", "body": "<p>Just get the types right, a pointer to an array is not the same as a pointer to <code>int</code>.</p>\n\n<p>Your functions just don't use 2D matrices because your interfaces are wrong. Use something like</p>\n\n<pre><code>void fill_matrix(int matrix[3][3]);\n</code></pre>\n\n<p>This is equivalent to </p>\n\n<pre><code>void fill_matrix(int matrix[][3]);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void fill_matrix(int (*matrix)[3]);\n</code></pre>\n\n<p>(But this \"rewriting\" only happens for function parameters.)</p>\n\n<p>Now go from here and correct the other types that you have in your program.</p>\n"}], "owner": {"reputation": 29, "user_id": 5340602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd977fa7e46b8e500ddd5164904e5ab2?s=128&d=identicon&r=PG&f=1", "display_name": "suckypizza", "link": "https://stackoverflow.com/users/5340602/suckypizza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 32600125, "answer_count": 2, "score": 0, "last_activity_date": 1442385735, "creation_date": 1442378468, "question_id": 32599933, "link": "https://stackoverflow.com/questions/32599933/according-to-my-compiler-i-am-using-pointers-incorrectly-for-setting-values-to", "title": "According to my compiler, I am using pointers incorrectly for setting values to 2D arrays. However, I am not sure what exactly I am doing wrong", "body": "<p>Here's a snippet of my code: </p>\n\n<pre><code>void initialize_matrices(int* a, int* b, int* c);\n\nvoid fill_matrix(int* matrix);\n\nvoid add_matrices(int* a, int* b, int* c);\n\nvoid print_sum_matrix(int* c);\n\n\nint main()\n{\n\nint a[3][3];\nint b[3][3];\nint c[3][3];\n\n//Q2: define pointers (5)\n//Define pointers ap, bp, and cp to the matrices that are defined above\n\nint (*ap)[3][3] = &amp;a; //giving the pointers a location to point to.\nint (*bp)[3][3] = &amp;b;\nint (*cp)[3][3] = &amp;c;\n\ninitialize_matrices(ap, bp, cp);\n\nprintf(\"Matrix a:\\n\");\nfill_matrix(ap);\n\nprintf(\"Matrix b:\\n\");\nfill_matrix(bp);\n\nadd_matrices(ap, bp, cp);\n\nprint_sum_matrix(cp);\n\nreturn 0;\n    }\n\n//Q3: initialize (10)\n//loop through the matrices and set each integer value to 0 using pointers\n   void initialize_matrices(int* a, int* b, int* c)\n {\n\nfor (int i = 0; i &lt; 3; i++) //rows\n{\n\n    for (int j = 0; j &lt; 3; j++) //columns\n    {\n        *a[i][j] = 0;   //accessing &amp; changing the address that the pointer is pointing to?\n        *b[i][j] = 0;\n        *c[i][j] = 0;\n    }\n\n}\n\n}\n</code></pre>\n\n<p>I asked a friend for advice, and they told me to change *a[i][j] = 0 to a[i * 3 + j] = 0. Is that true? If so, why do I have to do that? To my understanding, the value that a pointer is \"pointing to\" or at least the value of the address that the pointer is pointing to can be modified with the code that i've written above. </p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 1, "creation_date": 1442379094, "post_id": 32599883, "comment_id": 53052527, "body": "What is your query (as you have already separated digits from the string do the same to extract the operators)? Also check this <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\" title=\"why is the gets function so dangerous that it should not be used\">stackoverflow.com/questions/1694036/&hellip;</a> on why <code>gets() is dangerous</code>"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1442379325, "post_id": 32599883, "comment_id": 53052602, "body": "What is your question? Maybe you forgot to add &quot;This is FYI&quot; at the end :P"}, {"owner": {"reputation": 53, "user_id": 5335978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fdxG.jpg?s=128&g=1", "display_name": "Ingvaru", "link": "https://stackoverflow.com/users/5335978/ingvaru"}, "edited": false, "score": 0, "creation_date": 1442379535, "post_id": 32599883, "comment_id": 53052672, "body": "Say I have an input of &quot;65 + 9 - 4&quot; and I want to store the integers 65, 9, 4 to an integer array and the operators +, - in an array.   Thanks for the warning about gets()."}, {"owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "edited": false, "score": 1, "creation_date": 1442381520, "post_id": 32599883, "comment_id": 53053370, "body": "Which notation you want to use? Postfix notation or others?"}, {"owner": {"reputation": 53, "user_id": 5335978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fdxG.jpg?s=128&g=1", "display_name": "Ingvaru", "link": "https://stackoverflow.com/users/5335978/ingvaru"}, "edited": false, "score": 0, "creation_date": 1442381725, "post_id": 32599883, "comment_id": 53053459, "body": "prefix notation/polish notation"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5335978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fdxG.jpg?s=128&g=1", "display_name": "Ingvaru", "link": "https://stackoverflow.com/users/5335978/ingvaru"}, "edited": false, "score": 0, "creation_date": 1442405912, "post_id": 32600682, "comment_id": 53067644, "body": "I&#39;m having problems in printing it...I placed printf(&quot;%d\\n&quot;, arri[*p]); after the arri[integerCount++] = val;  and printf(&quot;%c\\n&quot;, arro[*p]); after the arro[operatorCount++] = *p;   the output is different from my input"}, {"owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "reply_to_user": {"reputation": 53, "user_id": 5335978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fdxG.jpg?s=128&g=1", "display_name": "Ingvaru", "link": "https://stackoverflow.com/users/5335978/ingvaru"}, "edited": false, "score": 0, "creation_date": 1442552686, "post_id": 32600682, "comment_id": 53136333, "body": "The printf should be like <code>printf(&quot;%d\\n&quot;, arri[integerCount - 1]);</code> and <code>printf(&quot;%c\\n&quot;, arro[operatorCount - 1]);</code> as <code>operatorCount</code> and <code>integerCount</code> are the index of the array, not <code>*p</code>. Also in the <code>printf()</code> the indexes are less than that of <code>operatorCount</code> and <code>integerCount</code> as they are already incremented in the previous statement."}], "tags": [], "owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "is_accepted": false, "score": 0, "last_activity_date": 1442382558, "creation_date": 1442382558, "answer_id": 32600682, "question_id": 32599883, "link": "https://stackoverflow.com/questions/32599883/how-to-separate-integers-and-operators-from-a-string-in-c/32600682#32600682", "title": "how to separate integers and operators from a string in c?", "body": "<p>You can pass the integer array and operator array to the <code>render()</code> function as parameters like <code>render( temp_0, arrNum, arrOperator, &amp;numCount, &amp;opCount)</code>, where <code>arrNum</code> is an array of long and <code>arrOperator</code> is an array of char and the <code>numCount</code> and <code>opCount</code> are two integers which will denote the number of integers and operators respectively. These last two integer will be populated in <code>render()</code>. Then the modified <code>render()</code> function might look like -</p>\n\n<pre><code>void reader(char *temp_0, long *arri, char *arro, int *numCount, int *opCount){\nchar *p = temp_0;\nint integerCount = 0;\nint operatorCount = 0;\n\nwhile(*p){\n    if (isdigit(*p)){\n        long val = strtol(p, &amp;p, 10);\n        arri[integerCount++] = val;\n    }else{\n       if((*p == '+') || (*p == '-') || \n          (*p == '/') || (*p == '*'))/* Add other operators here if you want*/\n       {\n          arro[operatorCount++] = *p;\n       }\n    p++;\n    }\n}\n\n    *numCount = integerCount;\n    *opCount  = operatorCount;\n\n}\n</code></pre>\n\n<p>Note that there is no error checking done in the code. You might want to add that.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5335978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fdxG.jpg?s=128&g=1", "display_name": "Ingvaru", "link": "https://stackoverflow.com/users/5335978/ingvaru"}, "edited": false, "score": 0, "creation_date": 1442405710, "post_id": 32600833, "comment_id": 53067475, "body": "Can I know what is char ch for?"}, {"owner": {"reputation": 123, "user_id": 3304373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rsSQT.jpg?s=128&g=1", "display_name": "chrischeng021", "link": "https://stackoverflow.com/users/3304373/chrischeng021"}, "reply_to_user": {"reputation": 53, "user_id": 5335978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fdxG.jpg?s=128&g=1", "display_name": "Ingvaru", "link": "https://stackoverflow.com/users/5335978/ingvaru"}, "edited": false, "score": 0, "creation_date": 1442449637, "post_id": 32600833, "comment_id": 53091834, "body": "In fact it just means the character which the pointer ptr is pointing to currently, I use this is because I want to finish the ptr++ operation in the while loop judgement part."}], "tags": [], "owner": {"reputation": 123, "user_id": 3304373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rsSQT.jpg?s=128&g=1", "display_name": "chrischeng021", "link": "https://stackoverflow.com/users/3304373/chrischeng021"}, "is_accepted": true, "score": 0, "last_activity_date": 1442388090, "last_edit_date": 1442388090, "creation_date": 1442383194, "answer_id": 32600833, "question_id": 32599883, "link": "https://stackoverflow.com/questions/32599883/how-to-separate-integers-and-operators-from-a-string-in-c/32600833#32600833", "title": "how to separate integers and operators from a string in c?", "body": "<p>I wrote a sample test. \nSorry for the tough code, since not have too much time.\nBut it works well on my VS.</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include \"string.h\"\n#include &lt;ctype.h&gt;\n\nint main(){\n    //Here I think By default this string is started with an integer.\n    char *str = \"65 + 9 - 4\";\n    char *ptr = str;\n    char ch;\n    char buff[32];\n    int  valArray[32];\n    int  val, len = 0, num = 0;\n    while ((ch = *ptr++) != '\\0'){\n        if (isdigit(ch) &amp;&amp; *ptr != '\\0'){\n            buff[len++] = ch;\n        }\n        else{\n            if (len != 0){\n                val = atoi(buff);\n                printf(\"%d\\n\", val);\n                valArray[num++] = val;\n                memset(buff, 0, 32);\n                len = 0;\n            }\n            else if (ch == ' ')\n                continue;\n            else\n                printf(\"%c\\n\",ch);\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5335978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fdxG.jpg?s=128&g=1", "display_name": "Ingvaru", "link": "https://stackoverflow.com/users/5335978/ingvaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 32600833, "answer_count": 2, "score": 1, "last_activity_date": 1442388090, "creation_date": 1442378149, "last_edit_date": 1495541033, "question_id": 32599883, "link": "https://stackoverflow.com/questions/32599883/how-to-separate-integers-and-operators-from-a-string-in-c", "title": "how to separate integers and operators from a string in c?", "body": "<p>I want to make a parser and first step I have in mind is to extract integers and operators from an input string and store them in their respective arrays. What I have so far is this...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n/*  Grammar for simple arithmetic expression\nE = E + T | E - T | T\nT = T * F | T / F | F\nF = (E)\n\nLegend:\nE -&gt; expression\nT -&gt; term\nF -&gt; factor\n*/\n\nvoid reader(char *temp_0){\nchar *p = temp_0;\nwhile(*p){\n    if (isdigit(*p)){\n        long val = strtol(p, &amp;p, 10);\n        printf(\"%ld\\n\",val);\n    }else{\n    p++;\n    }\n}\n\n}\n\nint main(){\nchar expr[20], temp_0[20];\n\nprintf(\"Type an arithmetic expression \\n\");\ngets(expr);\n\nstrcpy(temp_0, expr);\n\nreader( temp_0 );\n\nreturn 0;\n    }\n</code></pre>\n\n<p>Say I have an input of \"65 + 9 - 4\" and I want to store the integers 65, 9, 4 to an integer array and the operators +, - in an operators array and also ignores the whitespaces in the input. How should I do it? </p>\n\n<p>P.S.\nI am using the code in my reader function which I got from here :<a href=\"https://stackoverflow.com/questions/13399594/how-to-extract-numbers-from-string-in-c\">How to extract numbers from string in c?</a> </p>\n"}, {"tags": ["c", "sftp"], "comments": [{"owner": {"reputation": 15, "user_id": 5214456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8ebb059f3cb350e4cbe88ed7439f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Sunaina Yedugani", "link": "https://stackoverflow.com/users/5214456/sunaina-yedugani"}, "reply_to_user": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 0, "creation_date": 1442376785, "post_id": 32599558, "comment_id": 53051789, "body": "@Vagish : while ((dirp = readdir (directory)) != NULL)  \t\t{  \t\t\tif ( strstr(dirp-&gt;d_name , &quot;.txt&quot; )) \t\t\t{ \t\t\t\tprintf( &quot;found a .txtfile: %s\\n&quot;, dirp-&gt;d_name ); \t\t\t} \t\t} we have did the above code for getting the txt file from the directory. but now requirement got changed we need to access the directory through sftp. which is am not aware. please help"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5214456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8ebb059f3cb350e4cbe88ed7439f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Sunaina Yedugani", "link": "https://stackoverflow.com/users/5214456/sunaina-yedugani"}, "edited": false, "score": 0, "creation_date": 1442383016, "post_id": 32600461, "comment_id": 53053914, "body": "sure i will try this"}], "tags": [], "owner": {"reputation": 41, "user_id": 5340654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad6533799bdfde79e28a29f1b8af533a?s=128&d=identicon&r=PG&f=1", "display_name": "Bijaya", "link": "https://stackoverflow.com/users/5340654/bijaya"}, "is_accepted": true, "score": 1, "last_activity_date": 1442381523, "creation_date": 1442381523, "answer_id": 32600461, "question_id": 32599558, "link": "https://stackoverflow.com/questions/32599558/how-to-access-the-particular-directory-using-sftp-in-c-code/32600461#32600461", "title": "How to access the particular directory using SFTP in C code", "body": "<p>To access directory using SFTP, you can use ssh library function.</p>\n\n<p>Here is some sample code, </p>\n\n<pre><code> do {\n        char mem[512];\n        char longentry[512];\n        LIBSSH2_SFTP_ATTRIBUTES attrs;\n\n        /* loop until we fail */ \n        rc = libssh2_sftp_readdir_ex(sftp_handle, mem, sizeof(mem),\n\n                                     longentry, sizeof(longentry), &amp;attrs);\n        if(rc &gt; 0) {\n\n            if (longentry[0] != '\\0') {\n                printf(\"%s\\n\", longentry);\n            } else {\n                if(attrs.flags &amp; LIBSSH2_SFTP_ATTR_PERMISSIONS) {\n                  printf(\"--fix----- \");\n                }\n                else {\n                    printf(\"---------- \");\n                }\n\n                if(attrs.flags &amp; LIBSSH2_SFTP_ATTR_UIDGID) {\n                    printf(\"%4ld %4ld \", attrs.uid, attrs.gid);\n                }\n                else {\n                    printf(\"   -    - \");\n                }\n\n                if(attrs.flags &amp; LIBSSH2_SFTP_ATTR_SIZE) {\n                    printf(\"%8\" PRIu64 \" \", attrs.filesize);\n                }\n\n                printf(\"%s\\n\", mem);\n            }\n        }\n        else\n            break;\n\n    } while (1);\n</code></pre>\n\n<p>For other api information, you can go through SFTP API documentation and give a try.\n<a href=\"http://www.libssh2.org//libssh2_sftp_readdir_ex.html\" rel=\"nofollow\">http://www.libssh2.org//libssh2_sftp_readdir_ex.html</a></p>\n"}], "owner": {"reputation": 15, "user_id": 5214456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8ebb059f3cb350e4cbe88ed7439f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Sunaina Yedugani", "link": "https://stackoverflow.com/users/5214456/sunaina-yedugani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1442391706, "accepted_answer_id": 32600461, "answer_count": 1, "score": -3, "last_activity_date": 1442381523, "creation_date": 1442376056, "last_edit_date": 1442377539, "question_id": 32599558, "link": "https://stackoverflow.com/questions/32599558/how-to-access-the-particular-directory-using-sftp-in-c-code", "closed_reason": "Needs more focus", "title": "How to access the particular directory using SFTP in C code", "body": "<p>I have never used SFTP. please help me in accessing the directory using SFTP in c language.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>while ((dirp = readdir (directory)) != NULL) { \n  if ( strstr(dirp-&gt;d_name , \".txt\" )) { \n    printf( \"found a .txtfile: %s\\n\", dirp-&gt;d_name ); \n  } \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 430, "user_id": 992703, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cxDvv.png?s=128&g=1", "display_name": "kaitian521", "link": "https://stackoverflow.com/users/992703/kaitian521"}, "edited": false, "score": 2, "creation_date": 1442375681, "post_id": 32599466, "comment_id": 53051537, "body": "you should know argc and argv"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1442387382, "post_id": 32599466, "comment_id": 53056000, "body": "Please format your code"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1442393447, "post_id": 32599466, "comment_id": 53059475, "body": "max=num1, min=num2; // are you sure about this statement and the one below. Also return is missing in int main"}], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 4, "last_activity_date": 1442377183, "last_edit_date": 1442377183, "creation_date": 1442375703, "answer_id": 32599500, "question_id": 32599466, "link": "https://stackoverflow.com/questions/32599466/c-programming-take-n-command-line-arguments-and-find-the-min-of-all-arguments/32599500#32599500", "title": "C Programming take &quot;n&quot; command line arguments and find the min of all arguments", "body": "<pre><code>./a.out 3\n</code></pre>\n\n<p>In this <code>argv[0]</code> represents the program name and \n <strong><code>argv[1]</code></strong> will contain <code>3</code> .But <strong><code>argv[1]</code></strong> is a string so use <code>atoi</code> to convert it to <code>integer</code> and store it in <code>n</code>.</p>\n\n<p>That was your teacher's hint to you .</p>\n\n<p>Now as you got <code>n</code> now you can make use of it in your code to take <code>n</code> number of input.</p>\n"}, {"tags": [], "owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1442401621, "creation_date": 1442401621, "answer_id": 32606883, "question_id": 32599466, "link": "https://stackoverflow.com/questions/32599466/c-programming-take-n-command-line-arguments-and-find-the-min-of-all-arguments/32606883#32606883", "title": "C Programming take &quot;n&quot; command line arguments and find the min of all arguments", "body": "<p>Here is a code as per your requirement,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n\nint minimum;\nif(argc != 2 )\n{\n    printf(\"Please input the number of integers as ./a.out number\\n\");\n    return 1;\n}\nprintf(\"enter the %d number\", atoi(argv[1]));\nint arr[atoi(argv[1])];\nfor(int i = 0; i&lt; atoi(argv[1]); i++)\n{\n    scanf(\"%d\",&amp;arr[i]);\n}\n\n minimum = arr[0];\n\n    for ( int c = 1 ; c &lt; atoi(argv[1]) ; c++ )\n    {\n        if ( arr[c] &lt; minimum )\n        {\n           minimum = arr[c];\n\n        }\n    }\n printf(\"Minimum element is = %d\\n\",minimum);\n}\n</code></pre>\n\n<ul>\n<li>Hope this will help you.</li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 4577730, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6f302acff58f41d1cda28cdd63384b73?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4577730/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5235, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1442401621, "creation_date": 1442375516, "last_edit_date": 1442394888, "question_id": 32599466, "link": "https://stackoverflow.com/questions/32599466/c-programming-take-n-command-line-arguments-and-find-the-min-of-all-arguments", "title": "C Programming take &quot;n&quot; command line arguments and find the min of all arguments", "body": "<p>I have a project that I am working on for my class and my teacher did not explain any of this very well. I really need help with it because I really have no idea how to go about it.</p>\n\n<p>The assignment states that the program needs \"to read n integers from the keyboard, where n should be given as a command line argument. \"</p>\n\n<p>It should look like this </p>\n\n<pre><code>./a.out 3\n20 30 10\nThe smallest one is 10.\n</code></pre>\n\n<p>Where the 3 is n and 20, 30, and 10 are all entered by the user and then the program will find the minimum value of the entered ones.</p>\n\n<p>Also my program needs to \"check whether the number of the command line arguments and the value of n is correct or not. If not, you should provide an error information as the following example\"</p>\n\n<pre><code>./a.out 10 20\nPlease input the number of integers as ./a.out number\n\n./a.out 0    \nPlease input the number of integers as ./a.out number\n</code></pre>\n\n<p>He also gave us this \"Hint: you may use the <code>int atoi(char *)</code> function to convert a string value to an integer\nvalue.\"</p>\n\n<p>Below is what I have gotten so far, but I have no idea how to related the command line arguments to n or vice versa. I'm very confused and could really use some help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int num1, num2, min, max;\n\n    if (argc == 2) {\n        scanf(\"%d %d\", &amp;num1, &amp;num2);\n        if(num1&gt;num2)\n            max=num1, min=num2;\n        if(num2&gt;num1)\n            max=num2, min=num1;\n\n        printf(\"The smaller one is %d \\n\", min);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 6, "creation_date": 1442373291, "post_id": 32599154, "comment_id": 53050959, "body": "Yup, looks like Foo isn&#39;t defined in the code you posted...  can you add the code where you define it?"}, {"owner": {"reputation": 38224, "user_id": 53543, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e582f091bb5a26baf0bd32b437de7c1?s=128&d=identicon&r=PG", "display_name": "Crashworks", "link": "https://stackoverflow.com/users/53543/crashworks"}, "edited": false, "score": 0, "creation_date": 1442373296, "post_id": 32599154, "comment_id": 53050961, "body": "How did you define struct Foo?"}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 1, "creation_date": 1442373297, "post_id": 32599154, "comment_id": 53050962, "body": "Did you <code>#include</code> the header that <code>struct Foo</code> is defined?"}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "edited": false, "score": 0, "creation_date": 1442373373, "post_id": 32599154, "comment_id": 53050977, "body": "Read <a href=\"https://en.wikipedia.org/wiki/Struct_%28C_programming_language%29\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Struct_%28C_programming_language%29</a> if you aren&#39;t sure how to define a struct in C"}, {"owner": {"reputation": 6505, "user_id": 3059097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b82e3e2f10c9983fb609e74224d078?s=128&d=identicon&r=PG", "display_name": "casey", "link": "https://stackoverflow.com/users/3059097/casey"}, "edited": false, "score": 0, "creation_date": 1442373469, "post_id": 32599154, "comment_id": 53050997, "body": "Can you show how you attempted to declare the struct?  What was in the <code>.h</code> file?  What did you stick at the top of that C file that didn&#39;t work?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1442373491, "post_id": 32599154, "comment_id": 53051006, "body": "You didn&#39;t define the structure. If you say you did in a separate header file, you didn&#39;t <code>&lt;#include&gt;</code> that header file in the code you&#39;ve posted. You can&#39;t use the type <code>struct Foo</code> if the compiler doesn&#39;t know what <code>struct Foo</code> means."}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1442373728, "post_id": 32599154, "comment_id": 53051066, "body": "Looks like a PEBCAK error to me."}, {"owner": {"reputation": 1664, "user_id": 1936079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEqRB.jpg?s=128&g=1", "display_name": "Oleg Gopkolov", "link": "https://stackoverflow.com/users/1936079/oleg-gopkolov"}, "edited": false, "score": 0, "creation_date": 1442374181, "post_id": 32599154, "comment_id": 53051191, "body": "You must to define your strucure before the function where you use it. For instance,  <code>struct Foo {int a; int b;};</code>"}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 1, "creation_date": 1442374198, "post_id": 32599154, "comment_id": 53051200, "body": "@Romaldowoho That compiles &amp; runs for me (after putting the struct definition at the top of the file)"}, {"owner": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "reply_to_user": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1442374280, "post_id": 32599154, "comment_id": 53051220, "body": "@Buddy So I moved that to the separate .h file and now it compiles with some warnings. But when I try to run the exe it says Permission denied. Can it be a part of the bug?"}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1442374423, "post_id": 32599154, "comment_id": 53051252, "body": "That sounds like a new and different problem.  What OS &amp; compiler are you using?"}, {"owner": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "reply_to_user": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1442374592, "post_id": 32599154, "comment_id": 53051286, "body": "@Buddy Im running gcc on Mac Yosemite"}, {"owner": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "reply_to_user": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1442375081, "post_id": 32599154, "comment_id": 53051394, "body": "@Buddy i tried doing chmod +x  on it, but it just says cannot execute binary file"}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1442377859, "post_id": 32599154, "comment_id": 53052113, "body": "Hmm.. if you&#39;re on a Mac, then it shouldn&#39;t be making an exe file...  what&#39;s the output of <code>file &lt;executable&gt;</code> (replacing with your executable&#39;s name)"}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "edited": false, "score": 0, "creation_date": 1442374115, "post_id": 32599259, "comment_id": 53051175, "body": "I edited the post to show what I added in .c file. Does it make a difference if I define it at the top of .c or in the separate .h file?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "edited": false, "score": 0, "creation_date": 1442374227, "post_id": 32599259, "comment_id": 53051205, "body": "@Romaldowoho  Yes , it does. If it is <code>.h</code> file you want to use it in this <code>.c</code> file you need to include it in <code>.c</code> file . But if it is defined let say at top of <code>.c</code> file then you don&#39;t need to do anything . What you have will work."}, {"owner": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "edited": false, "score": 0, "creation_date": 1442374840, "post_id": 32599259, "comment_id": 53051338, "body": "That compiles now. Thank you, for some weird reason I HAD to move it to a separate .h file. However when I run exe it gives me Permission denied. Do you know why it can do that?"}, {"owner": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "edited": false, "score": 0, "creation_date": 1442375260, "post_id": 32599259, "comment_id": 53051435, "body": "OK I GOT IT GOSH. Im sorry this whole thing was all wrong because I wrote the code in .h file initially, then moved definitions to .h files as well, of course it was confused. And then when I compiled it it couldnt execute binary file because I compiled .h file. Sorry. And thank you"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "edited": false, "score": 0, "creation_date": 1442375356, "post_id": 32599259, "comment_id": 53051459, "body": "@Romaldowoho  It happens :)"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 3, "last_activity_date": 1442375326, "last_edit_date": 1442375326, "creation_date": 1442374064, "answer_id": 32599259, "question_id": 32599154, "link": "https://stackoverflow.com/questions/32599154/understanding-structs-in-c/32599259#32599259", "title": "Understanding structs in C", "body": "<blockquote>\n  <p>I looked it up and a lot of times the problem is in not defining structs in .h file. I defined it in a separate .h file, didnt help.</p>\n</blockquote>\n\n<p>If you defined struct in separate <code>.h</code> file that you should include that file in this code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"your_file.h\"\n....\n</code></pre>\n\n<p>From edit some other problem (<strong>UB</strong>)-</p>\n\n<pre><code>foo.array[3] =2;  //you can't access index 3, declaration in struct is  int array[3].\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4434329"}, "is_accepted": false, "score": 2, "last_activity_date": 1442374713, "creation_date": 1442374713, "answer_id": 32599344, "question_id": 32599154, "link": "https://stackoverflow.com/questions/32599154/understanding-structs-in-c/32599344#32599344", "title": "Understanding structs in C", "body": "<p>You are seeing  a compilation time error, since <strong>struct Foo foo</strong> cannot evaluate the type. You have to declare the structure before using it.</p>\n\n<p>You can include the header file or just write the following lines above <strong>func definition.</strong></p>\n\n<pre><code>struct FOO\n{\n    int x;\n    int array[n]; // n&gt;3\n};\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 3707823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cafb8d8c3499064e92cb55fa7ebd1547?s=128&d=identicon&r=PG&f=1", "display_name": "Romaldowoho", "link": "https://stackoverflow.com/users/3707823/romaldowoho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 32599259, "answer_count": 2, "score": 0, "last_activity_date": 1442375326, "creation_date": 1442373189, "last_edit_date": 1442374713, "question_id": 32599154, "link": "https://stackoverflow.com/questions/32599154/understanding-structs-in-c", "title": "Understanding structs in C", "body": "<p>I just started learning C.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nvoid func(struct Foo foo){\n    foo.x =1;\n    foo.array[3] =2;\n}\n\nint main(){\n    struct Foo lol;\n    lol.x = 55;\n    lol.array[3] = 67;\n\n    func(lol);\n    printf(\"lol.x is %d and lol.array[3] is %d\\n\", lol.x, lol.array[3]);\n\n    return 0;\n}\n</code></pre>\n\n<p>But when I compile it I get the following errors</p>\n\n<pre><code>structs.h:3:22: error: variable has incomplete type 'struct Foo'\nvoid func(struct Foo foo){\n\nstructs.h:10:13: error: variable has incomplete type 'struct Foo'\nstruct Foo lol;\n</code></pre>\n\n<p>I looked it up and a lot of times the problem is in not defining structs in .h file. I defined it in a separate .h file, didnt help. I defined structs on the top of .c file, same errors. </p>\n\n<p>I added this to the top of the file:</p>\n\n<pre><code>typedef struct Foo{\nint x;\nint array[3];\n}Foo;\n</code></pre>\n\n<p>Can someone explain why its happening?</p>\n"}, {"tags": ["c", "buffer-overflow"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 6, "creation_date": 1442372811, "post_id": 32599064, "comment_id": 53050847, "body": "I think it&#39;s pretty safe this way. But <code>char *lastchar</code> probably needs to be <code>char lastchar</code>, since you&#39;re indexing a single char in <code>buf</code>. I expect a compiler will warn you about that."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1442374092, "post_id": 32599064, "comment_id": 53051166, "body": "Unless buf is an empty string in which case <code>strlen(buf) - 1</code> is -1, that&#39;s fine."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1442373552, "post_id": 32599097, "comment_id": 53051021, "body": "In C, a <i>string</i> is always properly null terminated, else it is not a string.  A character array may exist that lacks null termination, but that is not a string."}], "tags": [], "owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "is_accepted": false, "score": 1, "last_activity_date": 1442372773, "creation_date": 1442372773, "answer_id": 32599097, "question_id": 32599064, "link": "https://stackoverflow.com/questions/32599064/is-strlen-unsafe-when-getting-the-last-char-in-a-string-in-c/32599097#32599097", "title": "Is strlen unsafe when getting the last char in a string in C", "body": "<p>Assuming your string is properly null terminated (as it is in your example) it's safe.</p>\n"}, {"tags": [], "owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "is_accepted": false, "score": 10, "last_activity_date": 1442373399, "last_edit_date": 1442373399, "creation_date": 1442372780, "answer_id": 32599099, "question_id": 32599064, "link": "https://stackoverflow.com/questions/32599064/is-strlen-unsafe-when-getting-the-last-char-in-a-string-in-c/32599099#32599099", "title": "Is strlen unsafe when getting the last char in a string in C", "body": "<p>Provided your strings are actually null-terminated (otherwise they're not actually strings!!!), yes, it is safe, <em>so long as there is at least one character (other than the terminating null) in the string</em>.</p>\n\n<p><code>strlen()</code> calculates the number of bytes in a null-terminated string, excluding the null terminator. Bear in mind that C uses 0-based indexing.</p>\n\n<p>So <code>\"Hello\"</code> is really <code>'H', 'e', 'l', 'l', 'o', '\\0'</code>, <code>strlen(\"Hello\")</code> returns <code>5</code>, and so you are accessing <code>buf[4]</code> (the <code>'o'</code>), which is fine. If you had the empty string, <code>\"\"</code>, there is no second last character and so here it is important to check the return value of <code>strlen()</code> before using it.</p>\n\n<p>One caveat:\nIf you meant to get the last character, you should have done</p>\n\n<pre><code>char lastchar = buf[strlen(buf) - 1];\n</code></pre>\n\n<p>and if you meant to get a pointer to the last character, you should have done</p>\n\n<pre><code>char * lastchar = &amp;buf[strlen(buf) - 1];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1442372950, "creation_date": 1442372950, "answer_id": 32599118, "question_id": 32599064, "link": "https://stackoverflow.com/questions/32599064/is-strlen-unsafe-when-getting-the-last-char-in-a-string-in-c/32599118#32599118", "title": "Is strlen unsafe when getting the last char in a string in C", "body": "<p>Yes. That is one perfectly valid use, except you have to do pointer arithmetic instead of indexing: <code>char * lastchar = buf + strlen(buf) - 1;</code> (remember that <code>buf</code> is a pointer). An alternative would be to use <code>strchr()</code>, which may be faster: <code>char * lastchar = strchr(buf, '\\0');</code>.</p>\n\n<p>Another use of <code>strlen()</code> can be when you want to copy a string and you need to know how much memory to allocate:</p>\n\n<pre><code>char *copy = malloc(strlen(buf) + 1);\nstrcpy(copy, buf);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1442417470, "last_edit_date": 1442417470, "creation_date": 1442373227, "answer_id": 32599158, "question_id": 32599064, "link": "https://stackoverflow.com/questions/32599064/is-strlen-unsafe-when-getting-the-last-char-in-a-string-in-c/32599158#32599158", "title": "Is strlen unsafe when getting the last char in a string in C", "body": "<p>The <em>last</em> <code>char</code> in a string is <em>always</em> a null character.</p>\n\n<pre><code>char lastchar = buf[strlen(buf)];\n</code></pre>\n\n<blockquote>\n  <p>A <code>string</code> is a contiguous sequence of characters terminated by and including the first null character.   C11 \u00a77.1.1</p>\n</blockquote>\n\n<hr>\n\n<p>To get the second to last character in a string is safe only when the string contains more than the null character.</p>\n\n<pre><code>size_t len = strlen(buf);\nif (len &gt; 0) {\n  char secondtolastchar = buf[len-1];\n}\n</code></pre>\n\n<hr>\n\n<p>Keep in mind <code>strlen(buf) - 1</code> is <em>never</em> negative even if <code>strlen()</code> returns zero.  What happens below?</p>\n\n<pre><code>char buf2[2] = \"X\";\nchar *buf = &amp;buf2[1];\nchar ch = buf[strlen(buf) - 1];\n</code></pre>\n\n<p><code>buf</code> takes on the address of the null character in <code>buf2[]</code> and <code>strlen(buf)</code> --> 0.  So it looks like the next line of code would do <code>buf[-1]</code> which hopefully would be <code>'X'</code>.  Instead, <code>strlen()</code> returns type <code>size_t</code> which is some unsigned integer type.  The subtraction of <code>size_t</code> and <code>int</code> certainly results in a <code>size_t</code>.  So <code>((size_t) 0) - 1</code> is the <em>largest</em> <code>size_t</code> value:<code>SIZE_MAX</code> and not -1.  Thus <code>buf[SIZE_MAX]</code> is outside the range of <code>buf2[]</code> and is undefined behavior.</p>\n\n<p>Therefore for safety, any subtraction like <code>- 1</code> needs to consider the effect of overflow.  The above code solves that with <code>if (len &gt; 0)</code></p>\n"}, {"comments": [{"owner": {"reputation": 1625, "user_id": 737347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vz9OJ.jpg?s=128&g=1", "display_name": "ivanmoskalev", "link": "https://stackoverflow.com/users/737347/ivanmoskalev"}, "edited": false, "score": 0, "creation_date": 1579604820, "post_id": 51409024, "comment_id": 105813594, "body": "The solution is worse than the problem."}], "tags": [], "owner": {"reputation": 394, "user_id": 1414117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b978fe69883077d451321cf0f8ce8017?s=128&d=identicon&r=PG", "display_name": "Chris Reid", "link": "https://stackoverflow.com/users/1414117/chris-reid"}, "is_accepted": false, "score": 0, "last_activity_date": 1531939595, "creation_date": 1531939595, "answer_id": 51409024, "question_id": 32599064, "link": "https://stackoverflow.com/questions/32599064/is-strlen-unsafe-when-getting-the-last-char-in-a-string-in-c/51409024#51409024", "title": "Is strlen unsafe when getting the last char in a string in C", "body": "<p>strlen is unsafe for null pointers.</p>\n\n<pre><code>char* str = (char*)NULL;\nsize_t len = strlen(str);  /* segmentation fault -- crash */\n</code></pre>\n\n<p>50 years later, this is still there, waiting to trap the unwary.</p>\n\n<p>Fortunately , there is an easy remedy.</p>\n\n<pre><code>#define strlen(S) ( (S==NULL) ? 0 : strlen(S) )\n</code></pre>\n\n<p>will stop the seg fault and return 0 as expected. </p>\n"}], "owner": {"reputation": 8224, "user_id": 985383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/anF0k.png?s=128&g=1", "display_name": "piggyback", "link": "https://stackoverflow.com/users/985383/piggyback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6356, "favorite_count": 1, "answer_count": 5, "score": 0, "last_activity_date": 1531939595, "creation_date": 1442372540, "question_id": 32599064, "link": "https://stackoverflow.com/questions/32599064/is-strlen-unsafe-when-getting-the-last-char-in-a-string-in-c", "title": "Is strlen unsafe when getting the last char in a string in C", "body": "<p>Is there a way for me to get the last char in a string with strlen?\nIf not, I can't understand in what context strlen can be used.</p>\n\n<pre><code>char buf[256] = \"Hello\";\nchar * lastchar = buf[strlen(buf) - 1];\n</code></pre>\n\n<p>Is it safe to use it?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 3, "creation_date": 1442371349, "post_id": 32598830, "comment_id": 53050491, "body": "I&#39;d skip trying to get scanf to do the work. As you&#39;re finding out, it&#39;s never going to be correct. Instead, try reading in the whole input then using strtok or a custom parser to work through the input."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1442371554, "post_id": 32598830, "comment_id": 53050539, "body": "If this is an assignment that <i>must</i> use <code>scanf()</code>, the key is to check the result of <code>scanf(&quot;%d&quot;,...)</code> and if successful, <code>scanf(&quot; &#47;%d&quot;,...)</code> checking its result too.   Better to use <code>fgets()</code> and process the string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442371572, "post_id": 32598830, "comment_id": 53050544, "body": "Do not use <code>feof()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1442371415, "creation_date": 1442371415, "answer_id": 32598895, "question_id": 32598830, "link": "https://stackoverflow.com/questions/32598830/how-to-set-partial-default-input-with-scanf-in-c/32598895#32598895", "title": "How to set partial default input with scanf in C?", "body": "<ol>\n<li><p>Read the entire line using <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow\"><code>fgets</code></a>.</p></li>\n<li><p>Use <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow\"><code>strtok</code></a> to parse the line.</p></li>\n</ol>\n\n<p>The links to <code>fgets</code> and <code>strtok</code> provide example code that you can use as your starting point.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1442377511, "creation_date": 1442377511, "answer_id": 32599766, "question_id": 32598830, "link": "https://stackoverflow.com/questions/32598830/how-to-set-partial-default-input-with-scanf-in-c/32599766#32599766", "title": "How to set partial default input with scanf in C?", "body": "<p>Note that <code>scanf</code> is not something that I would use in a production program. It's much too fragile. But for simple test programs it can be more convenient than writing your own parser.</p>\n\n<p>The advantage of using <code>scanf</code> is that it handles white space variations, and does numeric conversions, while taking care of minor parsing tasks like looking for the <code>'/'</code> character</p>\n\n<p>The disadvantage of using <code>scanf</code> is that if something is wrong with the input there's a good chance that <code>scanf</code> won't detect it, and an equally good chance that <code>scanf</code> will leave <code>stdin</code> in an unknown state (which requires additional code to clean up the mess).</p>\n\n<p>One way to work around <code>scanf's</code> abysmal error handling is to use <code>fgets</code> read a line of user input, and then use <code>sscanf</code> to parse the line. That way, if something goes wrong, at least <code>stdin</code> is left in a known state.</p>\n\n<hr>\n\n<p>The following code demonstrates how to use <code>fgets</code> and <code>sscanf</code> to get user input. First <code>fgets</code> reads a line of input from <code>stdin</code> and puts it into the array <code>line</code>. If <code>fgets</code> encounters an end-of-file before reading any characters, it will return NULL, and the program will exit.</p>\n\n<p>Next, <code>sscanf</code> is called to parse the line and extract the numerator and denominator. <code>sscanf</code> will return 1 if it finds only the numerator. It will return 2 if it finds both the numerator and denominator. Note that the space before the slash in the format <code>\"%d /%d\"</code> is important. It tells <code>sscanf</code> to skip whitespace while looking for the slash.</p>\n\n<p>The remainder of the program just echos the user input back to the output.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    int numer, denom, count;\n    char line[64];\n\n    for (;;)\n    {\n        printf( \"Enter decimal number: \" );\n        fflush( stdout );\n\n        if ( fgets( line, sizeof line, stdin ) == NULL ) {\n            printf( \"Bye\\n\" );\n            break;\n        }\n\n        count = sscanf( line, \"%d /%d\", &amp;numer, &amp;denom );\n\n        if ( count == 1 ) {\n            denom = 1;\n            printf( \"You entered %d\\n\", numer );\n        }\n        else if ( count == 2 ) {\n            printf( \"You entered %d/%d\\n\", numer, denom );\n        }\n        else {\n            printf( \"You entered garbage\\n\" );\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 3768676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLCza.jpg?s=128&g=1", "display_name": "MLiuzzolino", "link": "https://stackoverflow.com/users/3768676/mliuzzolino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1442377511, "creation_date": 1442371069, "question_id": 32598830, "link": "https://stackoverflow.com/questions/32598830/how-to-set-partial-default-input-with-scanf-in-c", "title": "How to set partial default input with scanf in C?", "body": "<p>I am new to programming and I am writing a program to convert decimal into binary for a numerical analysis course. I am a bit stuck on how to handle variable forms of input. For example, the input can be in one of the two following forms:</p>\n\n<p><code>Input: 15</code> or <code>Input: 15 / 2</code></p>\n\n<p>If it were only one of the two cases, I know how to handle the input in either: </p>\n\n<p><code>scanf(\"%d\", &amp;userInput);</code> and <code>scanf(\"%d / %d\", &amp;numerIn, &amp;denomIn);</code>  , respectively.</p>\n\n<p>I've tried a number of tactics with no luck. I came close with the following:</p>\n\n<pre><code>    (1)    int numerIn, denomIn = 1;        \n    (2)    printf(\"Enter decimal number: \");\n    (3)    scanf(\"%d\", &amp;numerIn);\n    (4)    if (!feof(stdin)) {\n    (5)       scanf(\" / %d\", &amp;denomIn);\n    (6)    }\n</code></pre>\n\n<p>Unfortunately, this didn't work smoothly. I've tried messing around with different combinations of spaces before and after the %d's and / in lines 3 and 5 to no avail. I've also thought that maybe there is some way to write the program such that if nothing is entered after the first integer that the program can know to automatically default to using the default 1 value in denomIn, but I can't figure this out yet either.</p>\n\n<p>Is there a way to go about this requirement that I am overlooking? I am terribly new to C programming, so it is very likely I'm making an embarrassingly novice mistake here. That being said, are there any good articles that explain precisely how the input buffer works? This is a bit confusing to me. </p>\n\n<p>Thanks in advance! Any insight would be much appreciated at this point.</p>\n"}, {"tags": ["c", "shell", "path", "filepath"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1442371134, "post_id": 32598793, "comment_id": 53050426, "body": "What is <code>tok_t</code>? If you do want to use <code>malloc</code>, you don&#39;t need to do it each time through the loop.."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442371183, "post_id": 32598793, "comment_id": 53050446, "body": "Please don&#39;t cast the result of malloc in C."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2809687, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/65Kfv.jpg?s=128&g=1", "display_name": "theRook", "link": "https://stackoverflow.com/users/2809687/therook"}, "edited": false, "score": 0, "creation_date": 1442372948, "post_id": 32598921, "comment_id": 53050878, "body": "Thank you for the suggestions, I was able to get the function working with this implementation minus the malloc(), instead declaring path as char path[PATH_MAX + 1]."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 43, "user_id": 2809687, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/65Kfv.jpg?s=128&g=1", "display_name": "theRook", "link": "https://stackoverflow.com/users/2809687/therook"}, "edited": false, "score": 1, "creation_date": 1442373157, "post_id": 32598921, "comment_id": 53050930, "body": "@theRook Please don&#39;t do that, as you are returning a pointer to an array on the stack when you do that. You need to malloc() if you want to safely keep the string around after the function returns. It may have worked <i>this time</i> or <i>for now</i> but it&#39;s unsafe. I accidentally suggested you could do such a thing initially but please re-read my answer."}], "tags": [], "owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "is_accepted": true, "score": 2, "last_activity_date": 1442378912, "last_edit_date": 1495541033, "creation_date": 1442371582, "answer_id": 32598921, "question_id": 32598793, "link": "https://stackoverflow.com/questions/32598793/resolving-filepath-to-executable-in-c/32598921#32598921", "title": "Resolving filepath to executable in C", "body": "<p>You do need to use <code>malloc()</code> since you are returning the resulting path from the function (a pointer to an automatic array created in this function will not be valid after the function returns). You do need to use <code>strcat()</code> or similar in order to produce a single contiguous <code>char *</code> to pass to <code>file_exists()</code>.</p>\n\n<p>There are a few issues with your code, however:</p>\n\n<ul>\n<li>Do not explicitly cast <code>void *</code> to other types in C - at best, it is unnecessary (<a href=\"https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc\">I'm talking about casting the return value of your allocation, in this case</a>).</li>\n<li>Check to see if <code>malloc()</code> fails.</li>\n<li>You don't need to call <code>malloc()</code> and <code>free()</code> inside your loop - just once (each) outside the loop is sufficient.</li>\n<li>If <code>tok_t</code> is a <code>char *</code> then <code>path_list</code> is a <code>char **</code>, so no need to dereference <code>path_list[i]</code> when you pass it to <code>strncpy()</code>/<code>strncat()</code> as that would merely be a <code>char</code>, when they expect strings. This is the likely cause of your statement <em>\"Currently getting segfaults and warnings about the type compatibility in use of strcat().\"</em></li>\n<li>You need to set the first character of <code>path</code> to <code>NULL</code> before your first call to <code>strcat()</code>, or better, use <code>strncpy()</code>, in which case you will want to set the last character of <code>path</code> to NULL after you're done.</li>\n<li>Use <code>strncat()</code> with <code>PATH_MAX - strlen(path)</code> because otherwise you could overflow <code>path</code>.</li>\n</ul>\n\n<p>Here's an example:</p>\n\n<pre><code>char *resolve_path(const char *filename) {\n    printf(\"trying to resolve path...\\n\");\n    char *path_var = getenv(\"PATH\");\n    tok_t *path_list = get_toks(path_var);\n    char *path = malloc(PATH_MAX+1); // See, no cast, and the +1 is for the NULL\n    if (!path) {\n        return NULL; // Check for failure\n    }\n    // strncpy/strncat won't null-terminate path if we run out of space\n    path[PATH_MAX] = NULL;\n    for (int i = 0; path_list[i]; i++) {\n       // this could be done more efficiently with memcpy/hand-coding/etc\n       strncpy(path, path_list[i], PATH_MAX); // don't dereference it\n       strncat(path, filename, PATH_MAX - strlen(path));\n       printf(\"Trying... %s\\n\", path);\n       if (file_exists(path)) {\n           return path;\n       }\n    }\n    free(path);\n    return NULL;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442378639, "post_id": 32599463, "comment_id": 53052378, "body": "Oh, I missed that. I&#39;ve updated my answer. Note that a) it should result in a compiler warning (the classic <i>makes pointer from integer without a cast</i>) and b) it won&#39;t necessarily result in a segmentation fault, but at the very least using the resulting pointer is undefined behaviour."}], "tags": [], "owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "is_accepted": false, "score": 0, "last_activity_date": 1442375486, "last_edit_date": 1495542127, "creation_date": 1442375486, "answer_id": 32599463, "question_id": 32598793, "link": "https://stackoverflow.com/questions/32598793/resolving-filepath-to-executable-in-c/32599463#32599463", "title": "Resolving filepath to executable in C", "body": "<p>I'm expounding on <a href=\"https://stackoverflow.com/questions/32598793/resolving-filepath-to-executable-in-c/32598921#32598921\">@Iskar_Jarak's answer</a> because using that code as-is still results in a segmentation fault.</p>\n\n<p>Because <code>tok_t</code> is just a typedef for <code>char*</code>, it sort of muddles your code. <code>get_toks()</code> is (without typedef's) technically just returning a <code>char**</code>.</p>\n\n<p>That means this line:</p>\n\n<pre><code>strncpy(path, *path_list[i], PATH_MAX);\n</code></pre>\n\n<p>should actually be</p>\n\n<pre><code>strncpy(path, path_list[i], PATH_MAX);\n</code></pre>\n\n<p>Because you shouldn't dereference <code>path_list[i]</code>. If you do, you pass a <code>char</code> to<code>strncpy</code> when it takes a <code>char*</code>. That's why you're getting that warning and a seg fault.</p>\n\n<p>So, for what it's worth, here're my corrections to your code:</p>\n\n<pre><code>char *resolve_path(const char *filename) {\n    printf(\"trying to resolve path...\\n\");\n    char *path_var = getenv(\"PATH\");\n    tok_t *path_list = get_toks(path_var);\n    char *path = malloc(PATH_MAX+1);\n    if (path == NULL) {\n        return NULL; // malloc failed\n    }\n    path[PATH_MAX] = '\\0'; // null terminate path\n    for (int i = 0; path_list[i]; i++) {\n       size_t len =  strlen(path_list[i]); // get the length of this path\n       strncpy(path, path_list[i], PATH_MAX); // copy path_list to path\n       path[len] = '/'; // add seperator\n       strncat(path, filename, PATH_MAX - len - 1); // -1 because of separator\n       printf(\"Trying... %s\\n\", path);\n       if (file_exists(path)) {\n           return path;\n       }\n    }\n    free(path);\n    return NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 2809687, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/65Kfv.jpg?s=128&g=1", "display_name": "theRook", "link": "https://stackoverflow.com/users/2809687/therook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 32598921, "answer_count": 2, "score": 0, "last_activity_date": 1442378912, "creation_date": 1442370784, "question_id": 32598793, "link": "https://stackoverflow.com/questions/32598793/resolving-filepath-to-executable-in-c", "title": "Resolving filepath to executable in C", "body": "<p>I am currently tasked with a homework assignment to write a primitive shell in C, and am having difficulty implementing the shell feature which constructs a path to a given requested program. e.g. Transforming user input of <code>wc</code> to <code>/usr/bin/wc</code>.</p>\n\n<p>Getenv() is working fine to get the value of $PATH. Using code supplied by my instructors, I've also parsed this value into individual 'tokens,' where a token is defined: <code>typedef char *tok_t</code></p>\n\n<p>My question is how can I fix this implementation of the following function, which seeks to return the absolute path to a given filename if found, and <code>NULL</code> otherwise.</p>\n\n<p>The main issue here is concatenating a <code>tok_t</code> and a <code>char*</code> to produce the full pathname.</p>\n\n<pre><code>char *resolve_path(char *filename) {\n    printf(\"trying to resolve path...\\n\");\n    char *path_var = getenv(\"PATH\");\n    tok_t *path_list = get_toks(path_var);\n    //fprint_tok(stdout, path_list);\n    char *path;\n    for (int i = 0; path_list[i]; i++) {\n       path = (char*) malloc(PATH_MAX);\n       strcat(path, *path_list[i]);\n       strcat(path, filename);\n       printf(\"Trying... %s\\n\", path);\n       if (file_exists(path)) {\n           return path;\n       }\n       free(path);\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>Should I bother with malloc() and strcat(), or is there some better way of implementing this? Currently getting segfaults and warnings about the type compatibility in use of strcat().</p>\n"}, {"tags": ["c", "unix"], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442372631, "post_id": 32598879, "comment_id": 53050798, "body": "Note: The return value of <code>execvp()</code> should be returned from <code>main()</code>."}, {"owner": {"reputation": 2948, "user_id": 150577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb0d44ff2c6b2d016764e5bfc67025f?s=128&d=identicon&r=PG", "display_name": "Spudd86", "link": "https://stackoverflow.com/users/150577/spudd86"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1442373522, "post_id": 32598879, "comment_id": 53051011, "body": "@chux What? Are you talking about the fact that I didn&#39;t include any error handling? Unless <code>execvp()</code> fails it simply doesn&#39;t return at all, that&#39;s it. The parent process will be able to get the exit value of the <code>exec()</code>d program no matter what we do with the return value since if it succeeds it doesn&#39;t return. Error handling wise we can do whatever we want and return whatever exit code we choose. Or we could use IPC of some kind to tell our parent we failed, what ever."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442418839, "post_id": 32598879, "comment_id": 53077312, "body": "Good answer, however, <i>I</i> would fork() and if child then call execvp().  Then the parent process could call waitpid() so it resumes running after the child process exits.    Also, want to parse the user entered input rather than hard coding the single &#39;ls&#39; command"}, {"owner": {"reputation": 2948, "user_id": 150577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb0d44ff2c6b2d016764e5bfc67025f?s=128&d=identicon&r=PG", "display_name": "Spudd86", "link": "https://stackoverflow.com/users/150577/spudd86"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1442499659, "post_id": 32598879, "comment_id": 53114289, "body": "@user3629249 I was just showing how <code>execvp()</code> works not trying to solve the whole thing since that&#39;s really what the question was about."}, {"owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "edited": false, "score": 0, "creation_date": 1442502427, "post_id": 32598879, "comment_id": 53116285, "body": "@Spudd86 so <code>*file</code> will always be &quot;/bin/&lt;command&gt;&quot;? and why add <code>NULL</code> to the <code>argv</code>? the rest I think I understand"}, {"owner": {"reputation": 2948, "user_id": 150577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb0d44ff2c6b2d016764e5bfc67025f?s=128&d=identicon&r=PG", "display_name": "Spudd86", "link": "https://stackoverflow.com/users/150577/spudd86"}, "reply_to_user": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "edited": false, "score": 0, "creation_date": 1449694383, "post_id": 32598879, "comment_id": 56123860, "body": "@TommyK The <code>NULL</code> is how <code>execvp()</code> knows where the end of the argument list is, it must be there"}], "tags": [], "owner": {"reputation": 2948, "user_id": 150577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb0d44ff2c6b2d016764e5bfc67025f?s=128&d=identicon&r=PG", "display_name": "Spudd86", "link": "https://stackoverflow.com/users/150577/spudd86"}, "is_accepted": false, "score": 3, "last_activity_date": 1442371332, "creation_date": 1442371332, "answer_id": 32598879, "question_id": 32598779, "link": "https://stackoverflow.com/questions/32598779/writing-a-program-to-act-like-command-line-in-c/32598879#32598879", "title": "writing a program to act like command line in C", "body": "<p>First, <code>exec()</code> doesn't return because it results in the process having it executing program replaced with whatever program was <code>exec()</code>ed. That is if you run <code>ls</code> via <code>exec()</code> after a <code>fork()</code> the PID of <code>ls</code> will be the same as the one that called <code>exec()</code>. That is <code>exec()</code> doesn't create a new process so it can't return because all the memory and code from the program that called it is effectively gone and replaced with whatever it <code>exec()</code>ed</p>\n\n<p>Run <code>ls -a</code> with <code>execvp()</code> assuming <code>ls</code> is in <code>/bin</code></p>\n\n<pre><code>const char *file = \"/bin/ls\";\nconst char *arg1 = \"ls\";\nconst char *arg2 = \"-a\";\nconst char **argv = {arg1, arg2, NULL};\nexecvp(file, argv);\n</code></pre>\n"}], "owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442371622, "creation_date": 1442370697, "last_edit_date": 1442371622, "question_id": 32598779, "link": "https://stackoverflow.com/questions/32598779/writing-a-program-to-act-like-command-line-in-c", "title": "writing a program to act like command line in C", "body": "<p>So from what I found out on my own I know I'm going to need to use <code>fork()</code> and <code>execvp()</code>, but I can't quite figure out how to use <code>execvp()</code> correctly from any examples online. Its supposed to let me essentially run command line stuff, but I don't understand the arguments it takes. Like if I wanted to run <code>ls -a</code> how would I put that into <code>execvp()</code>? And then there's the problem of <code>exec()</code> doesn't return. How do I handle that?</p>\n"}, {"tags": ["c", "project"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1442371189, "post_id": 32598770, "comment_id": 53050449, "body": "Are you not sure how the <code>printf</code> line that prints <code>c</code> works?"}, {"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1442371941, "post_id": 32598770, "comment_id": 53050635, "body": "Essentially yes. Sorry, i didn&#39;t know how to explain it, but you are correct."}], "answers": [{"tags": [], "owner": {"reputation": 2948, "user_id": 150577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb0d44ff2c6b2d016764e5bfc67025f?s=128&d=identicon&r=PG", "display_name": "Spudd86", "link": "https://stackoverflow.com/users/150577/spudd86"}, "is_accepted": false, "score": 1, "last_activity_date": 1442372273, "creation_date": 1442372273, "answer_id": 32599018, "question_id": 32598770, "link": "https://stackoverflow.com/questions/32598770/need-some-assistance-with-understanding-char-ascii-and-some-basics/32599018#32599018", "title": "Need some assistance with understanding char-&gt;ASCII and some basics", "body": "<p>Essentially a <code>char</code> is just an integer with a range from 0 to 255, the only thing that makes it a 'character' is that we have assigned characters to be represented by certain numbers. </p>\n\n<p>What's going on in the <code>printf()</code> is that first you tell it that you're going to pass a <code>char</code> and would it please just output that byte to be displayed, then you say that you want it to convert an integer to a string and output that.</p>\n\n<p>What it boils down to is that the ASCII code <em>is</em> the character.</p>\n\n<p>Note: for reasons that are not important at the moment when being passed into a vararg function like <code>printf()</code> <code>char</code>s and <code>short</code>s are promoted to <code>int</code>s.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1442373076, "post_id": 32599035, "comment_id": 53050911, "body": "This is perfect. I thank you a million times! I will save that reference sheet, it will definitely come in handy."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1442372383, "creation_date": 1442372383, "answer_id": 32599035, "question_id": 32598770, "link": "https://stackoverflow.com/questions/32598770/need-some-assistance-with-understanding-char-ascii-and-some-basics/32599035#32599035", "title": "Need some assistance with understanding char-&gt;ASCII and some basics", "body": "<p>It will be helpful to have a <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow\">reference documentation of <code>printf</code></a> handy.</p>\n\n<p>When the format specifier is <code>%c</code>, <code>printf</code> expects an <code>int</code>. A <code>char</code> works since it is promoted to an <code>int</code>.</p>\n\n<p>When the format specifier is <code>%d</code>, <code>printf</code> expects an <code>int</code>. A <code>char</code> works since it is promoted to an <code>int</code>.</p>\n\n<p>For the first case, <code>printf</code> prints the character corresponding to the value of the <code>int</code>.</p>\n\n<p>For the second case, <code>printf</code> just prints the number.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1442380480, "post_id": 32599162, "comment_id": 53052981, "body": "It was very helpful. My professor isn&#39;t exactly thorough with his explanations, quite frankly he leaves it up to us to figure it out. But I think, as painful as it is, it&#39;s a very effective way to learn. Thank you for the help and information. Have a great one!"}], "tags": [], "owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1442373251, "creation_date": 1442373251, "answer_id": 32599162, "question_id": 32598770, "link": "https://stackoverflow.com/questions/32598770/need-some-assistance-with-understanding-char-ascii-and-some-basics/32599162#32599162", "title": "Need some assistance with understanding char-&gt;ASCII and some basics", "body": "<p>Here is my attempt at explaining this.  </p>\n\n<p>Everything in a program memory is stored as sequences of 0s and 1s (binary numbers).  You are probably familiar with bits and bytes, but just in case: a binary digit (0 or 1) is a bit.  A sequence of 8 bits is a byte.  Characters, such as 'A', 'b', '1', etc. have to be stored as numbers in memory.  There are different ways to map a character to a number: EBCDIC (very rare these days, was used on large mainframes in the old days), UTF-8, UTF-16, UTF-32 (types of Unicode), ASCII.  These mappings are called character encodings, and ASCII is the simplest of those commonly used.  </p>\n\n<p>So, when you enter a character, it gets stored in the variable c as an integer number encoded using ASCII.  The content of memory location corresponding to the variable can be thus viewed both as a character and an integer.</p>\n\n<p>When using the printf() function you can request the same variable to be printed using different possible representations.  In this case, since c is a character variable and can be represented as a character or a number, you can use the different format specifiers, %c and %d, to have it printed as character and integer, respectively.</p>\n\n<p>The 1st of the printf() calls above takes 3 arguments.  The first argument is a string that is printed out, with things that start with % being used to interpret the remaining arguments.  %c corresponds to the 2nd argument, %d to the 3rd.  %c says: \"treat the 2nd argument as character and print it out.\"  %s says: \"treat the 3rd argument as integer and print it out.\"</p>\n\n<p>The other 2 printf() calls in your code take only 2 arguments.  The 1st argument, the string, contains only one thing starting with % (format specifier), so we only need 1 additional argument to be interpreted using the format specifier.</p>\n\n<p>Hope this is helpful. </p>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 4359203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df6e3ae7788d056a6e0f89a78ea5e29a?s=128&d=identicon&r=PG&f=1", "display_name": "Prog_is_life", "link": "https://stackoverflow.com/users/4359203/prog-is-life"}, "is_accepted": false, "score": 0, "last_activity_date": 1442415431, "creation_date": 1442415431, "answer_id": 32612173, "question_id": 32598770, "link": "https://stackoverflow.com/questions/32598770/need-some-assistance-with-understanding-char-ascii-and-some-basics/32612173#32612173", "title": "Need some assistance with understanding char-&gt;ASCII and some basics", "body": "<p>the Man <a href=\"http://man7.org/linux/man-pages/man7/ascii.7.html\" rel=\"nofollow\">ascii</a> will make you understand</p>\n"}], "owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1442415431, "creation_date": 1442370641, "question_id": 32598770, "link": "https://stackoverflow.com/questions/32598770/need-some-assistance-with-understanding-char-ascii-and-some-basics", "title": "Need some assistance with understanding char-&gt;ASCII and some basics", "body": "<p>I had a project to write this program that reads a character, integer and a floating number. It also had to convert the character in to its ASCII integer. I vaguely understand most of it except the code regarding the ASCII number. I created most of it on my own but when it came to converting the character I had a buddy help me, but he is not the best at explaining this. </p>\n\n<p>Any explanation would be very helpful, thank you. I did this all by trial and error for... probably far too long :P</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n\n      char c;                       \n      int i;\n      float f;\n\n      printf (\"Please enter a character: \");\n      scanf (\"%c\", &amp;c);\n\n      printf (\"Please enter an integer: \");\n      scanf (\"%d\", &amp;i);\n\n      printf (\"Please enter a floating point number: \");\n      scanf (\"%f\", &amp;f);\n      printf (\"\\n\");\n\n      printf (\"The character you entered is: %c which is %d in integer-specification\\n\", c,c);\n      printf (\"The integer you entered is: %d.\\n\", i);\n      printf (\"The floating-point number you entered is: %f.\\n\", f);\n\n      return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 1, "creation_date": 1442370777, "post_id": 32598769, "comment_id": 53050358, "body": "Because the array name decays to a pointer when passing as function argument."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 1, "creation_date": 1442371324, "post_id": 32598769, "comment_id": 53050483, "body": "There are so many duplicates of this question on this site."}], "answers": [{"comments": [{"owner": {"reputation": 256, "user_id": 4742584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cyOiw.png?s=128&g=1", "display_name": "Mandrill", "link": "https://stackoverflow.com/users/4742584/mandrill"}, "edited": false, "score": 0, "creation_date": 1442370964, "post_id": 32598789, "comment_id": 53050393, "body": "Just to complement, the first call returns 12 because the size of int in that machine is 4 bytes so and array of 3 elements occupy 12 bytes."}, {"owner": {"reputation": 73, "user_id": 3856709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7c8fb2e68a7d9c31dbb0fba125ca39?s=128&d=identicon&r=PG&f=1", "display_name": "Yuan Tian", "link": "https://stackoverflow.com/users/3856709/yuan-tian"}, "edited": false, "score": 0, "creation_date": 1442373912, "post_id": 32598789, "comment_id": 53051113, "body": "Thank you very much for answering my question."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 73, "user_id": 3856709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7c8fb2e68a7d9c31dbb0fba125ca39?s=128&d=identicon&r=PG&f=1", "display_name": "Yuan Tian", "link": "https://stackoverflow.com/users/3856709/yuan-tian"}, "edited": false, "score": 0, "creation_date": 1442374241, "post_id": 32598789, "comment_id": 53051210, "body": "@YuanTian, you are welcome. Happy programming."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1442370770, "creation_date": 1442370770, "answer_id": 32598789, "question_id": 32598769, "link": "https://stackoverflow.com/questions/32598769/the-length-of-array-changes-after-passing-it-a-function/32598789#32598789", "title": "The length of array changes after passing it a function", "body": "<pre><code>int passing_array(int array[]) {\n    int size = sizeof(array);\n    printf(\"The size after passing: %d\\n\", size);\n}\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>int passing_array(int* array) {\n    int size = sizeof(array);\n    printf(\"The size after passing: %d\\n\", size);\n}\n</code></pre>\n\n<p>Hence, <code>size</code> is the size of a pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 3856709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7c8fb2e68a7d9c31dbb0fba125ca39?s=128&d=identicon&r=PG&f=1", "display_name": "Yuan Tian", "link": "https://stackoverflow.com/users/3856709/yuan-tian"}, "edited": false, "score": 0, "creation_date": 1442373952, "post_id": 32598794, "comment_id": 53051125, "body": "Thank you very much, too. But I can only accept one answer, sorry."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1442370808, "creation_date": 1442370808, "answer_id": 32598794, "question_id": 32598769, "link": "https://stackoverflow.com/questions/32598769/the-length-of-array-changes-after-passing-it-a-function/32598794#32598794", "title": "The length of array changes after passing it a function", "body": "<p>When you pass an array to a function, it decays to a pointer to the first element of the array.  So <code>int array[]</code> in your parameter list is really <code>int *array</code>, and <code>sizeof</code> is returning the size of the pointer.</p>\n"}], "owner": {"reputation": 73, "user_id": 3856709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7c8fb2e68a7d9c31dbb0fba125ca39?s=128&d=identicon&r=PG&f=1", "display_name": "Yuan Tian", "link": "https://stackoverflow.com/users/3856709/yuan-tian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 954, "favorite_count": 0, "closed_date": 1442371617, "accepted_answer_id": 32598789, "answer_count": 2, "score": -1, "last_activity_date": 1442370808, "creation_date": 1442370637, "last_edit_date": 1592644375, "question_id": 32598769, "link": "https://stackoverflow.com/questions/32598769/the-length-of-array-changes-after-passing-it-a-function", "closed_reason": "Duplicate", "title": "The length of array changes after passing it a function", "body": "<p>I use the following code to pass an array to a function and print its size before and after calling the function:</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint passing_array(int array[]) {\n    int size = sizeof(array);\n    printf(&quot;The size after passing: %d\\n&quot;, size);\n}\n\nint main () {\n    int a[] = {1, 2, 3};\n\n    int size = sizeof(a);\n    printf(&quot;The size before passing: %d\\n&quot;, size);\n\n    passing_array(a);\n\n    return 0;\n}\n</code></pre>\n<p>After running the code, I got a strange result:</p>\n<blockquote>\n<p>The size before passing: 12</p>\n<p>The size after passing: 8</p>\n</blockquote>\n<p>My question is: why does the size of the array change from 12 to 8?</p>\n"}, {"tags": ["c++", "c", "casting"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442370583, "post_id": 32598752, "comment_id": 53050317, "body": "<code>buffer[index]</code> is illegal if <code>buffer</code> has type <code>void *</code> : a pointer to void may not be dereferenced. Can you check that this is really the code?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442370624, "post_id": 32598752, "comment_id": 53050329, "body": "<code>&amp;buffer[index]</code> means <code>&amp;(buffer[index])</code>.  If <code>buffer</code> were of type <code>const char *</code> then it is the same as <code>buffer + index</code>, i.e. offset the pointer by <code>index</code> number of bytes."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1442370739, "post_id": 32598752, "comment_id": 53050353, "body": "@M.M could very well be a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html\" rel=\"nofollow noreferrer\">gcc extension being used here</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1442370857, "post_id": 32598752, "comment_id": 53050372, "body": "@ShafikYaghmour Perhaps... gcc 4.9.2 issues a warning even using the default options , so OP should have noticed this"}, {"owner": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442370863, "post_id": 32598752, "comment_id": 53050374, "body": "It was <code>char *</code> in the original and I tried making it <code>const void *</code> because of external factors and it still compiled and ran (clang-llvm on OS X).  I could as easily cast the <code>const void *</code> that I&#39;m getting from my external datasource to <code>char *</code> instead."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442371183, "post_id": 32598752, "comment_id": 53050447, "body": "@Isaac why don&#39;t you leave <code>buffer</code> as <code>const char *</code> ?"}, {"owner": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442371281, "post_id": 32598752, "comment_id": 53050476, "body": "@M.M I definitely could have it as <code>const char *</code>, but it would just be an implicit cast from <code>const void *</code>, since that&#39;s how <code>data.bytes</code> is defined.  If having it as <code>const char *</code> makes the question clearer or makes it make sense, assume it&#39;s <code>const char *</code>."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442371140, "post_id": 32598833, "comment_id": 53050430, "body": "In your second code, <code>index</code> has a different meaning"}, {"owner": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442371194, "post_id": 32598833, "comment_id": 53050450, "body": "I think this makes sense, except that the latter use of <code>index</code> is probably something like <code>index&#47;4</code> because of the size difference?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1442371354, "post_id": 32598833, "comment_id": 53050492, "body": "Once you cast the pointer to the proper type, pointer arithmetic adds <code>index * sizeof(uint32_t)</code> to the raw value of <code>buffer</code> to get the proper index."}, {"owner": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442371455, "post_id": 32598833, "comment_id": 53050506, "body": "@dbush So if <code>index</code> was originally being used on an array of 1-byte values (<code>buffer[index]</code>) and now is being used on an array of 4-byte values (<code>((uint32_t *)buffer)[index]</code>), wouldn&#39;t the values of <code>index</code> to get at the same location in the array be different?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1442371932, "last_edit_date": 1442371932, "creation_date": 1442371108, "answer_id": 32598833, "question_id": 32598752, "link": "https://stackoverflow.com/questions/32598752/what-is-uint32-t-bufferindex/32598833#32598833", "title": "What is *(uint32_t *) &amp;buffer[index]?", "body": "<p>Putting parenthesis in place to make the order of operations more explicit:</p>\n\n<pre><code>*((uint32_t *) &amp;(buffer[index]))\n</code></pre>\n\n<p>So you're treating <code>buffer</code> as an array, however because <code>buffer</code> is a <code>void *</code> you can't dereference it directly.</p>\n\n<p>Assuming you want to treat this buffer as an array of <code>uint32_t</code>, what you want to do is this:</p>\n\n<pre><code>((uint32_t *)buffer)[index]\n</code></pre>\n\n<p>Which can also be written as:</p>\n\n<pre><code>*((uint32_t *)buffer + index)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If <code>index</code> is the byte offset in the buffer, that changes things.  In that case, I'd recommend defining the buffer as <code>const char *</code> instead of <code>const void *</code>.  That way, you can be sure the dereferencing of the array is working properly.</p>\n\n<p>So to break down the expression:</p>\n\n<pre><code>*(uint32_t *) &amp;buffer[index]\n</code></pre>\n\n<p>You're going <code>index</code> bytes into <code>buffer</code>:  <code>buffer[index]</code></p>\n\n<p>Then taking the address of that byte:  <code>&amp;buffer[index]</code></p>\n\n<p>Then casting that address to a <code>uint32_t</code>:  <code>(uint32_t *) &amp;buffer[index]</code></p>\n\n<p>Then dereferencing the <code>uint32_t</code> value:  <code>*(uint32_t *) &amp;buffer[index]</code></p>\n"}, {"comments": [{"owner": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442372020, "post_id": 32598944, "comment_id": 53050660, "body": "I think I&#39;m starting to get my head around this\u2014<code>buffer</code> is an array of bytes from a particular file format (TrueType Collection), or at least, it should be if the first couple of bytes are the characters <code>&#39;ttfc&#39;</code> (hence the first check).  The rest are working under the assumption that the byte stream should be interpreted as a sequence of 4-byte chunks and <code>*(uint32_t *) &amp;buffer[index]</code> is a (hacky) way to get the 4-byte chunk at an offset of <code>index</code> bytes from the start of the sequence.  \u2026"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442372095, "post_id": 32598944, "comment_id": 53050681, "body": "Yes. It causes undefined behaviour , so you have to choose between relying on UB (and definitely not using  <code>-O3</code> - in fact I&#39;d suggest using <code>-fno-strict-aliasing</code> compiler switch), or fixing up the code.  Feel free to use <code>inline</code> functions or even macros to make the code look tidier if this occurs in many places."}, {"owner": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442372129, "post_id": 32598944, "comment_id": 53050689, "body": "Assuming <code>uint32_t</code> is a reasonable 4-byte type, defining a function like <code>static uint32_t fourByteChunkInBufferAtOffset(const char *buffer, uint32_t offset)</code> to basically do what you give in the last code chunk would make sense... although <code>uint32_t</code> is probably the wrong type for the offset."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442372240, "post_id": 32598944, "comment_id": 53050725, "body": "Use <code>size_t</code> for the offset. That would be a good solution; make sure to use <code>memcpy</code> in the function body, not the aliasing cast .   The compiler will optimize it. You could use <code>const void *</code> as the parameter type."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "edited": false, "score": 0, "creation_date": 1442374928, "post_id": 32598944, "comment_id": 53051359, "body": "@Isaac updated my answer - realized that <code>memcmp</code> is a much better solution to the first problem. Also with your inline function there&#39;s no need to pass the offset separately, it can just take a pointer and you call it with <code>buffer + offset</code>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1442394524, "post_id": 32598944, "comment_id": 53060198, "body": "+1 for using <code>memcmp&#47;memcpy</code> instead. But do note that strict aliasing and optimization is not the only problem with <code>*(uint32_t*)&amp;buffer[index]</code>. It can also break on systems which have alignment restrictions."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1442374895, "last_edit_date": 1442374895, "creation_date": 1442371760, "answer_id": 32598944, "question_id": 32598752, "link": "https://stackoverflow.com/questions/32598752/what-is-uint32-t-bufferindex/32598944#32598944", "title": "What is *(uint32_t *) &amp;buffer[index]?", "body": "<p>Lots of issues here!  First of all, a <code>void *</code> cannot be dereferenced. <code>buffer[index]</code> is illegal in ISO C, although some compilers apparently have an extension that will treat it as <code>(void)((char *)buffer)[index]</code>.</p>\n\n<p>You suggest in comments that the code originally used <code>char *</code> - I recommend you leave it that way. Assuming <code>buffer</code> returns to being <code>const char *</code>:</p>\n\n<pre><code>if (ntohl(*(int32_t *) buffer) != 'ttcf') { return; }\n</code></pre>\n\n<p>The intent here is to pretend that the first four bytes of <code>buffer</code> contain an integer; read that integer, and compare it to <code>'ttcf'</code>.  The latter is a multibyte character constant, the behaviour of which is <em>implementation-defined</em>.  It could represent four characters <code>'t', 't', 'c', 'f'</code>, or <code>'f', 'c', 't', 't'</code>, or in fact anything else at all of type <code>int</code>.</p>\n\n<p>A greater problem is that pretending a buffer contains an <code>int</code> when it did not actually get written via an expression of type <code>int</code> violates the <em>strict aliasing rule</em>. This is unfortunately a common technique in older code, but even since the first C standard it has caused undefined behaviour. If you use a compiler that performs type-based aliasing optimization it could wreck your code.</p>\n\n<p>A way to write this code avoiding both of those problems is:</p>\n\n<pre><code>if ( memcmp(buffer, \"ttcf\", 4) ) { return; }\n</code></pre>\n\n<hr>\n\n<p>The later line <code>uint32_t ttf_count = ntohl(*(uint32_t *) &amp;buffer[0x08]);</code> has similar issues. In this case there is no doubt that the best fix is:</p>\n\n<pre><code>uint32_t ttf_count; \nmemcpy(&amp;ttf_count, buffer + 0x08, sizeof ttf_count);\nttf_count = ntohl(ttf_count);\n</code></pre>\n\n<hr>\n\n<p>As discussed in comments, you could make an inline function to keep this tidy. In my own code I do something like:</p>\n\n<pre><code>static inline uint32_t be_to_uint32(void const *ptr)\n{\n    unsigned char const *p = ptr;\n    return p[0] * 0x1000000ul + p[1] * 0x10000ul + p[2] * 0x100 + p[3];\n}\n</code></pre>\n\n<p>and a similar version <code>le_to_uint32</code> that reads bytes in the opposite order; then I use whichever of those corresponds to the input format instead of using <code>ntohl</code>.</p>\n"}], "owner": {"reputation": 9821, "user_id": 291280, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5ea3f0de48c164262cb00e37b6e67a30?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/291280/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1675, "favorite_count": 0, "accepted_answer_id": 32598944, "answer_count": 2, "score": 1, "last_activity_date": 1442374895, "creation_date": 1442370486, "last_edit_date": 1495542127, "question_id": 32598752, "link": "https://stackoverflow.com/questions/32598752/what-is-uint32-t-bufferindex", "title": "What is *(uint32_t *) &amp;buffer[index]?", "body": "<p>In some supposed-C++ code I found, I have <code>buffer</code> defined as <code>const void *buffer;</code> (it's arbitrary binary data that, I think, gets interpreted as a stream of 32-bit unsigned integers) and in many places, I have</p>\n\n<pre><code>*(uint32_t *) &amp;buffer[index]\n</code></pre>\n\n<p>where <code>index</code> is some kind of integer (I think it was <code>long</code> or <code>unsigned long</code> and got swept up in my replacing those with <code>int32_t</code> and <code>uint32_t</code> when I was making the code work on a 64-bit system).</p>\n\n<p>I recognize that this is taking the address of <code>buffer</code> (<code>&amp;buffer</code>), casting it as a pointer to a <code>uint32_t</code>, and dereferencing that, at least based on <a href=\"https://stackoverflow.com/a/14173495/291280\">this question</a>... but then I'm confused by how the <code>[index]</code> part interacts with that or where I missed inserting the <code>[index]</code> part in between the steps I listed.</p>\n\n<p>What, conceptually, is this doing?  Is there some way I could define another variable to be a better type, with the casting there once, and then use that, rather than having this complicated expression throughout the code?  Is this actually C++ or is this C99?</p>\n\n<p><strong><em>edit:</em></strong>  The first couple of lines of the code are:</p>\n\n<pre><code>const void *buffer = data.bytes;\nif (ntohl(*(int32_t *) buffer) != 'ttcf') {\n    return;\n}\nuint32_t ttf_count = ntohl(*(uint32_t *) &amp;buffer[0x08]);\n</code></pre>\n\n<p>where <code>data.bytes</code> has type <code>const void *</code>.  Before I was getting <code>buffer</code> from <code>data.bytes</code>, it was <code>char *</code>.</p>\n\n<p><strong><em>edit 2:</em></strong> Apparently, having <code>const void *buffer</code> work is not normal C (though it absolutely works in my situation), so if it makes more sense, assume it's <code>const char *buffer</code>.</p>\n"}, {"tags": ["c", "printf", "atmel", "teraterm"], "comments": [{"owner": {"reputation": 1110, "user_id": 831128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2c698fdd2222ecccc49d2cc35c8607c?s=128&d=identicon&r=PG", "display_name": "Isa A", "link": "https://stackoverflow.com/users/831128/isa-a"}, "edited": false, "score": 0, "creation_date": 1442370755, "post_id": 32598651, "comment_id": 53050354, "body": "Have you set where you try to print it out to? e.g UART, USART."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1442386362, "post_id": 32598651, "comment_id": 53055441, "body": "Is stdout redirect to the serial line connected to Tera Term? Are parameters of Tera Term (baud rate, stop bits...) the same as on Atmel? The warning means that there is something wrong in in your project configs.."}], "answers": [{"tags": [], "owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "is_accepted": true, "score": 0, "last_activity_date": 1442404688, "creation_date": 1442404688, "answer_id": 32607957, "question_id": 32598651, "link": "https://stackoverflow.com/questions/32598651/tera-term-with-atmel-board-in-c/32607957#32607957", "title": "Tera Term with Atmel Board in C", "body": "<p>You must initialize UART of the uC and write custom function for redirecting output on it, if you want to view output on tera-term. printf does not output on UART unless it is written in that way.\nHowever in this case, the output of the program can be viewed in the output console of the IDE which you are using.</p>\n"}], "owner": {"reputation": 47, "user_id": 5202393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204977496980746/picture?type=large", "display_name": "heyjaynell", "link": "https://stackoverflow.com/users/5202393/heyjaynell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 32607957, "answer_count": 1, "score": 0, "last_activity_date": 1442404688, "creation_date": 1442369719, "last_edit_date": 1442386329, "question_id": 32598651, "link": "https://stackoverflow.com/questions/32598651/tera-term-with-atmel-board-in-c", "title": "Tera Term with Atmel Board in C", "body": "<p>Trying to debug an issue using Atmel Mega 328p Board. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;avr/io.h&gt;\n\nvoid main() \n{\n   while(1)\n   {\n      printf(\"hello world,\");\n   }\n   return;\n} \n</code></pre>\n\n<p>Viewing this port in Tera Term returns nothing at all.</p>\n\n<blockquote>\n  <p>Warning : Implicit declaration of printf(); </p>\n</blockquote>\n\n<p>What could be the problem in our code? </p>\n"}, {"tags": ["c", "pointers", "static"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1442368124, "post_id": 32598417, "comment_id": 53049766, "body": "Have you read <a href=\"http://stackoverflow.com/questions/246564/what-is-the-lifetime-of-a-static-variable-in-a-c-function\">this SO post</a> ?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1442368145, "post_id": 32598417, "comment_id": 53049770, "body": "You could do that, but it&#39;s essentially just a round about way to make a global variable."}], "answers": [{"tags": [], "owner": {"reputation": 6426, "user_id": 376382, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bb4579713b5d8a26ff716896fe1f7565?s=128&d=identicon&r=PG", "display_name": "Cacho Santa", "link": "https://stackoverflow.com/users/376382/cacho-santa"}, "is_accepted": false, "score": 2, "last_activity_date": 1442368317, "creation_date": 1442368317, "answer_id": 32598473, "question_id": 32598417, "link": "https://stackoverflow.com/questions/32598417/access-pointers-in-c-programming/32598473#32598473", "title": "access Pointers in C programming", "body": "<p>Could a static variable be declared inside a function and then accessed or deferenced from outside the function?</p>\n\n<p>Yes, you can do that. </p>\n\n<p>Explain the scenario where you need this, but in general I don't think its a good approach. Just declare it global.</p>\n\n<p>That question was part of a Homework in Programming 101 when I was in college :)</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1442369683, "last_edit_date": 1442369683, "creation_date": 1442368480, "answer_id": 32598494, "question_id": 32598417, "link": "https://stackoverflow.com/questions/32598417/access-pointers-in-c-programming/32598494#32598494", "title": "access Pointers in C programming", "body": "<blockquote>\n  <p>Could a <code>static</code> variable be declared inside a function and then accessed or deferenced from outside the function?</p>\n</blockquote>\n\n<p>The language allows it. So, yes, you can access a pointer to it from outside the function and dereference the pointer from outside the function.</p>\n\n<blockquote>\n  <p>Why would you not allow explicit pointers to it out of scope, since the memory of the static variable would remain allocated.</p>\n</blockquote>\n\n<p>There are risks associated with that. A calling function can change the state of the <code>static</code> variable. That may or may not be OK depending on the overall structure of your program.</p>\n"}], "owner": {"reputation": 781, "user_id": 871877, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/096850bedfcadd093652c2b18aaf3b7a?s=128&d=identicon&r=PG", "display_name": "snapplex", "link": "https://stackoverflow.com/users/871877/snapplex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 32598494, "answer_count": 2, "score": 0, "last_activity_date": 1442369683, "creation_date": 1442367941, "question_id": 32598417, "link": "https://stackoverflow.com/questions/32598417/access-pointers-in-c-programming", "title": "access Pointers in C programming", "body": "<p>I'm new to programming, and am trying to get a better understanding of pointers specifically. Could a static variable be declared inside a function and then accessed or deferenced from outside the function? Why would you not allow explicit pointers to it out of scope, since the memory of the static variable would remain allocated.</p>\n"}]