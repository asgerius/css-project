[{"tags": ["c"], "comments": [{"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1534978308, "post_id": 51976160, "comment_id": 90902704, "body": "I&#39;m guessing that you want to &quot;define a function to clean up code&quot;? That wouldn&#39;t be a <code>#define</code>, just a new function definition, like what you&#39;ve done for <code>main</code> already."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1534978316, "post_id": 51976160, "comment_id": 90902706, "body": "What exactly do you mean by &quot;implement at #define&quot;?  Do you want to do something like <code>#define HEALTH_ID 35.00</code>?"}, {"owner": {"reputation": 250, "user_id": 10118785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EBK6yjyiX5Y/AAAAAAAAAAI/AAAAAAAAAE8/GSDei6J9J18/photo.jpg?sz=128", "display_name": "Leon Trotsky", "link": "https://stackoverflow.com/users/10118785/leon-trotsky"}, "edited": false, "score": 0, "creation_date": 1534978373, "post_id": 51976160, "comment_id": 90902720, "body": "I think he wants to implement some functions, judging by the comments."}, {"owner": {"reputation": 576, "user_id": 4411923, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e7fab96c4ec90ad679d7139c128a777?s=128&d=identicon&r=PG&f=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/4411923/parzival"}, "edited": false, "score": 0, "creation_date": 1534978951, "post_id": 51976160, "comment_id": 90902829, "body": "You can convert  <code>coursecost1 = i*credithour; coursecost2 = k*credithour; totalcost= healthID+coursecost1+coursecost2;</code>  to macros"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1534979043, "post_id": 51976160, "comment_id": 90902846, "body": "Note that when you issue the print statement: <code>printf(&quot;\\nThank you!\\nPRESS ANY KEY TO CONTINUE...\\n\\n&quot;);</code>, your program won&#39;t actually wait for the user to press a key."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1534982854, "post_id": 51976160, "comment_id": 90903536, "body": "There&#39;s nothing in your code that shouts out &quot;Use a macro!&quot; so you probably shouldn&#39;t be using one.  It&#39;s curious that you don&#39;t seem to use <code>course1[4]</code> or <code>course2[4]</code> \u2013 but that&#39;s still not a reason to use a macro.  You should indent the code more thoroughly and systematically."}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 9503398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJP-8CtH8yg/AAAAAAAAAAI/AAAAAAAAAgE/1-gqJBPn77o/photo.jpg?sz=128", "display_name": "Luiz Fernando", "link": "https://stackoverflow.com/users/9503398/luiz-fernando"}, "is_accepted": true, "score": 0, "last_activity_date": 1534989229, "creation_date": 1534989229, "answer_id": 51977316, "question_id": 51976160, "link": "https://stackoverflow.com/questions/51976160/how-can-i-impliment-a-define-statement-into-my-code/51977316#51977316", "title": "how can i impliment a #define statement into my code?", "body": "<p>\"define\" is basically creating a shortcut for stuff you write often in your code, or stuff you want to change often in order to test your code.</p>\n\n<p>An example: </p>\n\n<pre><code>#define fail printf(\"You did something wrong\")\n\nint main (void)\n\n{\n    int number;\n\n    printf(\"Insert a number between 1 and 3\");\n    scanf(\"%d\", &amp;number);\n\n    if (number&gt;3||number&lt;1)\n    {\n        fail;\n        return -1\n    }\n    else\n    {\n        printf(\"Insert a number between 4 and 6\");\n        scanf(\"%d\", &amp;number);\n        if (number&lt;4||number&gt;6)\n        {\n            fail;\n            return -1;\n        }\n        else return 0;\n    }\n}\n</code></pre>\n\n<p>When this program is read by the compiler, every \"fail\" gets substituted by \"printf(\"you did something wrong\").</p>\n\n<p>This is the main use of define, and if you are beginning now, that's what I'd consider important. </p>\n\n<p>About your code, when you do scanf for strings, don't use \"&amp;\", or use the \"gets\" function. I could try to explain why to you, but I'm not the best person for this job. My tip is, keep studying and when you start seeing pointers, you'll understand better why this happens. </p>\n\n<p>Also, when you use arrays without a starting value, you don't need to do the \"={ }\" thing, just call them without \"=\".</p>\n\n<p>Now, as you asked, this is how I'd write your code, with the corrections done:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n\n    int studentID, intcount = 0; // Count is a function, better not mix things up, that's why I called it \"intcount\"\n    char course1[10], course2[10];\n    float coursecost1, coursecost2, totalcost;\n    float credithour = 120.25;\n    float healthID=35.00;\n\n\n    // Asks for student ID\n\n    printf(\"Enter the Students Id: \\n\");\n    scanf(\"%d\",&amp;studentID);\n\n    // Enter CRN/Credit hrs for first course\n\n    printf(\"Enter crn/credit hours for the first course: \\n\");\n    scanf(\"%s\", course1);\n\n    // Enter CRN/Credit hrs for Second Course\n\n    printf(\"Enter crn/credit hours for the second course: \\n\");\n    scanf(\"%s\", course2);\n\n    // Closing statement\n\n    // printf(\"\\nThank you!\\nPRESS ANY KEY TO CONTINUE...\\n\\n\");\n\n    /* Decided not to delete this one, so you can\n    compare this printf with the new one and the system pause */\n\n    printf(\"\\nThank you!\\n\");\n    system(\"pause\");\n\n    // Calculates Cost of Class\n\n    // I'm not sure what you were trying to do in these lines, so I won't touch them\n\n    int i = course1[5]-'0';\n    int k = course2[5]-'0';\n    coursecost1 = i*credithour;\n    coursecost2 = k*credithour;\n    totalcost= healthID+coursecost1+coursecost2;\n\n    // Printout\n\n    printf(\"\\t\\tVALENCE COMMUNITY COLLEGE\\n\\t\\tORLANDO FL 10101\\n\\t\\t\");\n    do\n    {\n        intcount++;\n        printf(\"*\");\n    }\n    while(intcount&lt;26);\n\n    printf(\"\\n\\t\\tFee Invoice Prepared for Student V%d\\n\",studentID);\n    printf(\"\\t\\t1 Credit Hour = %.2f\\n\",credithour);\n    printf(\"\\t\\tCRN\\t    CREDIT HOURS\\n\");\n    printf(\"\\t\\t%c%c%c%c\\t    %c\\t\\t       $%.2f\\n\",course1[0],course1[1],course1[2],course1[3],course1[5],coursecost1);\n    printf(\"\\t\\t%c%c%c%c\\t    %c\\t\\t       $%.2f\\n\",course2[0],course2[1],course2[2],course2[3],course2[5],coursecost2);\n    printf(\"\\t\\t\\t    Health &amp; id fees   $  %.2f\\n\",healthID);\n    printf(\"\\t\\t\");\n    intcount=0;\n    do\n    {                     //could define a function to clean up code\n        intcount++;\n        printf(\"-\");\n    }\n    while (intcount &lt; 39);\n    printf(\"\\n\\t\\t\\t    Total Payments     $ %.2f\",totalcost);\n\n} \n</code></pre>\n\n<p>Basically just try to avoid placing too much information on the same line, even split single printfs into multiple ones if neccessary. </p>\n\n<p>Hope I could be of some use!</p>\n"}], "owner": {"reputation": 99, "user_id": 7998256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YkoLd.jpg?s=128&g=1", "display_name": "Rando", "link": "https://stackoverflow.com/users/7998256/rando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 51977316, "answer_count": 1, "score": 0, "last_activity_date": 1534989229, "creation_date": 1534977930, "question_id": 51976160, "link": "https://stackoverflow.com/questions/51976160/how-can-i-impliment-a-define-statement-into-my-code", "title": "how can i impliment a #define statement into my code?", "body": "<p>First off, how can I implement a #define in this code? I'm fairly lost when it comes to defining and calling of that #define. Also, if there are any ways to make this code look better it would be greatly appreciated! I'm new to coding so any help would be awsome. This is technically homework but I met all the requirements for the assignment so now this is simply exploratory.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n\nint studentID;\nint count= 0;\nchar course1[10]={};//issue with storing user input, used an array\nchar course2[10]={};\nfloat coursecost1;\nfloat coursecost2;\nfloat credithour = 120.25;\nfloat healthID=35.00;\nfloat totalcost;\n\n// Asks for student ID\n\nprintf(\"Enter the Students Id: \\n\");\nscanf(\"%d\",&amp;studentID);\n\n// Enter CRN/Credit hrs for first course\n\nprintf(\"Enter crn/credit hours for the first course: \\n\");\nscanf(\"%s\", &amp;course1);\n\n// Enter CRN/Credit hrs for Second Course\n\nprintf(\"Enter crn/credit hours for the second course: \\n\");\nscanf(\"%s\", &amp;course2);\n\n// Closing statement\n\nprintf(\"\\nThank you!\\nPRESS ANY KEY TO CONTINUE...\\n\\n\");\n\n// Calculates Cost of Class\n\nint i = course1[5]-'0'; // Bad version of type casting from char to int.\nint k = course2[5]-'0'; // Bad version of type casting from char to int.\ncoursecost1 = i*credithour;\ncoursecost2 = k*credithour;\ntotalcost= healthID+coursecost1+coursecost2;\n\n// Printout\n\nprintf(\"\\t\\tVALENCE COMMUNITY COLLEGE\\n\\t\\tORLANDO FL 10101\\n\\t\\t\");\ndo{\n    count++;\n    printf(\"*\");\n}while(count&lt;26);\nprintf(\"\\n\\t\\tFee Invoice Prepared for Student V%d\\n\",studentID);\nprintf(\"\\t\\t1 Credit Hour = %.2f\\n\",credithour);\nprintf(\"\\t\\tCRN\\t    CREDIT HOURS\\n\");\nprintf(\"\\t\\t%c%c%c%c\\t    %c\\t\\t       $ \n%.2f\\n\",course1[0],course1[1],course1[2],course1[3],course1[5],coursecost1);\nprintf(\"\\t\\t%c%c%c%c\\t    %c\\t\\t       $ \n%.2f\\n\",course2[0],course2[1],course2[2],course2[3],course2[5],coursecost2);\nprintf(\"\\t\\t\\t    Health &amp; id fees   $  %.2f\\n\",healthID);\nprintf(\"\\t\\t\");\ncount=0;\ndo{                     //could define a function to clean up code\n    count++;\n    printf(\"-\");\n}while (count &lt; 39);\nprintf(\"\\n\\t\\t\\t    Total Payments     $ %.2f\",totalcost);\n\n    return 0;\n</code></pre>\n"}, {"tags": ["c", "binary"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1534977960, "post_id": 51976032, "comment_id": 90902630, "body": "Note that if you turn on Warnings you&#39;d have seen the issue.  For example, compiling with <code>gcc</code> and the <code>-Wall</code> option would do the trick.  I always put that in my Makefiles."}, {"owner": {"reputation": 35, "user_id": 7255089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db7b8563ff2fb86c83d1298bdc0750?s=128&d=identicon&r=PG&f=1", "display_name": "J. Pex", "link": "https://stackoverflow.com/users/7255089/j-pex"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1534978343, "post_id": 51976032, "comment_id": 90902715, "body": "Thanks for the tip! I\u2019ll start doing that from now on!"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7255089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db7b8563ff2fb86c83d1298bdc0750?s=128&d=identicon&r=PG&f=1", "display_name": "J. Pex", "link": "https://stackoverflow.com/users/7255089/j-pex"}, "edited": false, "score": 0, "creation_date": 1534977916, "post_id": 51976089, "comment_id": 90902613, "body": "Thanks! I can\u2019t believe I didn\u2019t notice that. I\u2019ve made the changes now, but every input prints the same incorrect value, and each decimal prints as though it were 64 bit."}, {"owner": {"reputation": 35, "user_id": 7255089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db7b8563ff2fb86c83d1298bdc0750?s=128&d=identicon&r=PG&f=1", "display_name": "J. Pex", "link": "https://stackoverflow.com/users/7255089/j-pex"}, "edited": false, "score": 1, "creation_date": 1534977979, "post_id": 51976089, "comment_id": 90902634, "body": "Whoops! Disregard that comment. Works perfectly! Thanks!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 35, "user_id": 7255089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db7b8563ff2fb86c83d1298bdc0750?s=128&d=identicon&r=PG&f=1", "display_name": "J. Pex", "link": "https://stackoverflow.com/users/7255089/j-pex"}, "edited": false, "score": 0, "creation_date": 1534978719, "post_id": 51976089, "comment_id": 90902780, "body": "@J.Pex &quot;I can\u2019t believe I didn\u2019t notice that.&quot; --&gt; You are not supposed to notice it.  That is the job for a well enabled compiler.  Save time and enable all warnings on your compiler.  Not using warnings (or a good compiler) is the real mistake."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1534977399, "creation_date": 1534977399, "answer_id": 51976089, "question_id": 51976032, "link": "https://stackoverflow.com/questions/51976032/c-program-to-convert-decimal-to-binary-only-values-under-64-bits-are-accurate/51976089#51976089", "title": "C Program To Convert Decimal to Binary - Only Values Under 64 Bits are Accurate", "body": "<p>Here's the problem:</p>\n\n<pre><code> scanf(\"%d\", &amp;d);\n</code></pre>\n\n<p>The type of <code>d</code> is <code>unsigned long long</code>, but you're using <code>%d</code> which expects the address of an <code>int</code>.  Using the wrong format specifier invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>The correct format specifier for an <code>unsigned long long</code> is <code>%llu</code>:</p>\n\n<pre><code> scanf(\"%llu\", &amp;d);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7255089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db7b8563ff2fb86c83d1298bdc0750?s=128&d=identicon&r=PG&f=1", "display_name": "J. Pex", "link": "https://stackoverflow.com/users/7255089/j-pex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 51976089, "answer_count": 1, "score": 2, "last_activity_date": 1534977424, "creation_date": 1534977013, "question_id": 51976032, "link": "https://stackoverflow.com/questions/51976032/c-program-to-convert-decimal-to-binary-only-values-under-64-bits-are-accurate", "title": "C Program To Convert Decimal to Binary - Only Values Under 64 Bits are Accurate", "body": "<p>I have created a small beginner program that converts decimal values to binary. However, only decimal values up to 32 bits are printing correctly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define EIGHT_BITS 255\n#define SIXTEEN_BITS 65535\n#define THIRTY_TWO_BITS 4294967295UL\n#define SIXTY_FOUR_BITS 18446744073709551615ULL\n\nint main() {\n static int b[64];\n int l, r;\n unsigned long long d;\n\n scanf(\"%d\", &amp;d);\n\n // determines number of bits to output\n if (d &lt;= EIGHT_BITS) {\n      l = 8;\n      printf(\"8bits\\n\");\n }\n else if (d &gt; EIGHT_BITS &amp;&amp; d &lt;= SIXTEEN_BITS) {\n      l = 16;\n      printf(\"16bits\\n\");\n }\n else if (d &gt; SIXTEEN_BITS &amp;&amp; d &lt;= THIRTY_TWO_BITS) {\n      l = 32;\n      printf(\"32bits\\n\");\n }\n else if (d &gt; THIRTY_TWO_BITS &amp;&amp; d &lt;= SIXTY_FOUR_BITS) {\n      l = 64;\n      printf(\"64bits\\n\");\n }\n\n // creates array\n for (int i = 0; i &lt; l; i++) {\n      r = d % 2;\n      d /= 2;\n      b[i] = r;\n }\n\n // reverses array for binary value\n for (int j = l - 1; j &gt;= 0; j--) {\n      printf(\"%d\", b[j]);\n }\n\n return 0;\n}\n</code></pre>\n\n<p>When I enter various decimal values up to the 64 bit unsigned long long, the decimals print with the corresponding binary value. However, somewhere between the 32 bit values and the 64 bit values, the numbers become incorrect. </p>\n\n<p>I receive accurate 32 bit values when I define \u201cd\u201d with \u201cunsigned long,\u201d but when I change the type to \u201cunsigned long long\u201d to accommodate larger numbers, the 8, 16, and 32 bit values are no longer accurate, and neither are the 64 bit values.</p>\n\n<p>Here is my output:</p>\n\n<pre><code>// correct\n&gt;&gt; 357\n     16bits\n     0000000101100101\n\n// correct\n&gt;&gt; 4294967295\n     32bits\n     11111111111111111111111111111111\n\n// incorrect\n&gt;&gt; 18446744073709551615\n     64bits\n 0000000001000000000110100110111011111111111111111111111111111111\n</code></pre>\n"}, {"tags": ["c", "arrays", "gcc", "ansi"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1534983789, "post_id": 51975991, "comment_id": 90903691, "body": "When you say &quot;ANSI C&quot;, do you mean C89 (equivalent to Standard C from ISO, C90), or do you mean &#39;Standard C&#39; \u2014 probably C11 or perhaps C18, depending on how modern your compiler is? If your answer is &quot;I&#39;ve no idea what you&#39;re talking about&quot;, then the chances are you&#39;re actually using a compiler capable of working with C11 (use <code>-std=c11</code> or <code>-std=gnu11</code>), and should use that instead of <code>-ansi</code> (which means <code>-std=c90</code>). C90 did not support variable length arrays at all; C99 does support them, but they must defined within a function; C11 provides conditional support for variable length arrays."}, {"owner": {"reputation": 23, "user_id": 7310691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e02fd79925fc920769456bda1cf7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Connorh", "link": "https://stackoverflow.com/users/7310691/sarah-connorh"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1534991870, "post_id": 51975991, "comment_id": 90905197, "body": "Hey ! I&#39;m talking about C89, but my compiler is definitely c11. I&#39;m using the K&amp;R book but indeed, i may use a C90 compiler, not dumb.. shame on me !"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1534982958, "post_id": 51976037, "comment_id": 90903558, "body": "Or an <code>enum</code> \u2014 see also <a href=\"https://stackoverflow.com/questions/1674032\"><code>static const</code> vs <code>#define</code> vs <code>enum</code></a>."}, {"owner": {"reputation": 23, "user_id": 7310691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e02fd79925fc920769456bda1cf7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Connorh", "link": "https://stackoverflow.com/users/7310691/sarah-connorh"}, "edited": false, "score": 0, "creation_date": 1534992005, "post_id": 51976037, "comment_id": 90905224, "body": "Hey thx for answer me. I tried to use it, but also (may be the compiler c11 that doesnt support this macro) i can&#39;t create this macro :/ PS : enum worked but i want to understand why the rest doesnt."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 23, "user_id": 7310691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e02fd79925fc920769456bda1cf7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Connorh", "link": "https://stackoverflow.com/users/7310691/sarah-connorh"}, "edited": false, "score": 0, "creation_date": 1534992159, "post_id": 51976037, "comment_id": 90905252, "body": "@SarahConnorh The above should work.  If it doesn&#39;t then you must have mistyped something."}, {"owner": {"reputation": 23, "user_id": 7310691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e02fd79925fc920769456bda1cf7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Connorh", "link": "https://stackoverflow.com/users/7310691/sarah-connorh"}, "edited": false, "score": 0, "creation_date": 1535047428, "post_id": 51976037, "comment_id": 90933163, "body": "@dbush Yes but using macro. I wanted to use a more local variable this macro is accessible only on one file and callable from everyfunction.."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1534977058, "creation_date": 1534977058, "answer_id": 51976037, "question_id": 51975991, "link": "https://stackoverflow.com/questions/51975991/ansi-c-arrays-variably-modified-at-file-scope/51976037#51976037", "title": "ANSI C -&gt; Arrays -&gt; Variably modified at file scope", "body": "<p>The length of an array defined at file scope <strong>must</strong> be a compile time constant, and the value of another variable does not qualify as such.</p>\n\n<p>If you want to use a name for the length of this array, you'll need to use a macro:</p>\n\n<pre><code>#define MAXLIGNE 5000\nchar *ptrlig[MAXLIGNE]; \n</code></pre>\n\n<p>The macro does a direct text substitution, so after the preprocessor stage it is the same as <code>char *ptrlig[5000];</code></p>\n"}], "owner": {"reputation": 23, "user_id": 7310691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e02fd79925fc920769456bda1cf7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Connorh", "link": "https://stackoverflow.com/users/7310691/sarah-connorh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 51976037, "answer_count": 1, "score": 1, "last_activity_date": 1534983033, "creation_date": 1534976793, "last_edit_date": 1534983033, "question_id": 51975991, "link": "https://stackoverflow.com/questions/51975991/ansi-c-arrays-variably-modified-at-file-scope", "title": "ANSI C -&gt; Arrays -&gt; Variably modified at file scope", "body": "<p>While I'm trying to explore possibilities of arrays in C in ANSI, I'm confronted with an issue. Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstatic int MAXLIGNE = 5000;\nchar *ptrlig[MAXLIGNE]; // PTR SUR LA LIGNE DE TXT // GOT AN ISSUE : \n                        // VARIABLY MODIFIED PTRLIG @ FILESCOPE\n\nint lirelignes(char *ptrlig[], int nlignes);\nvoid ecrirelignes(char *ptrlig[], int nlignes);\nvoid trirapide(char *ptrlig[], int gauche, int droite);\n</code></pre>\n\n<p>Error from the GCC : </p>\n\n<pre><code>VARIABLY MODIFIED PTRLIG at FILESCOPE\n</code></pre>\n\n<p>I've seen that 'const' type may create that kind of issues.  I tried to make it like :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstatic int MAXLIGNE = 5000;\nunsigned char *ptrlig[MAXLIGNE];\n</code></pre>\n\n<p>But that doesn't seem to change anything in this case.</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "mutex"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1534975610, "post_id": 51975739, "comment_id": 90902038, "body": "You need to initialize the mutex and the condition variables. See for example <a href=\"https://stackoverflow.com/questions/14622646/does-pthread-mutex-t-mutex-0-initialize-mutex\">this question</a>"}], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 4411923, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e7fab96c4ec90ad679d7139c128a777?s=128&d=identicon&r=PG&f=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/4411923/parzival"}, "edited": false, "score": 0, "creation_date": 1534977685, "post_id": 51976102, "comment_id": 90902561, "body": "Thanks for your time."}], "tags": [], "owner": {"reputation": 24558, "user_id": 457237, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34f7425ea0a472d1493230c28204010a?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan Manjunath", "link": "https://stackoverflow.com/users/457237/pavan-manjunath"}, "is_accepted": true, "score": 4, "last_activity_date": 1534978456, "last_edit_date": 1534978456, "creation_date": 1534977510, "answer_id": 51976102, "question_id": 51975739, "link": "https://stackoverflow.com/questions/51975739/pthread-synchronization-print-even-odd-numbers/51976102#51976102", "title": "Pthread synchronization - print even odd numbers", "body": "<p>There are multiple issues with your program-</p>\n\n<ol>\n<li>As suggested in the comments, the <code>lock</code> and the conditional variables need to be initialized.</li>\n</ol>\n\n<blockquote>\n<pre><code>pthread_mutex_t lock = PTHREAD_LOCK_INITIALIZER;\npthread_cond_t  even = PTHREAD_COND_INITIALIZER;\npthread_cond_t  odd =  PTHREAD_COND_INITIALIZER;\n</code></pre>\n</blockquote>\n\n<p>You might get lucky accidentally here even without initialization since you've declared them as global and they will be zero-inited and pthread implementations might actually be zero-initing when you properly initialize them.</p>\n\n<ol start=\"2\">\n<li><p>Your <code>printf</code> doesn't have <code>\\n</code> and hence output is not flushed to screen. Just add the newline and you'll see your threads are indeed running.</p></li>\n<li><p>When <code>n</code> reaches 10, ie when <code>print_odd</code> threads increments from <code>9</code>, it simply exits without signaling the even thread. Hence your even thread is hung in the <code>cond_wait</code> and your <code>main</code> thread is hung in <code>pthread_join</code>. You can fix this by waking up the even thread by signalling it before exiting the odd thread.</p></li>\n</ol>\n\n<p><strong>EDIT</strong> I found one more issue</p>\n\n<ol start=\"4\">\n<li>Even if the odd thread signals the even thread just before exiting, since <code>n=10</code>, the even thread does NOT exit the <code>while(n%2 == 0)</code> loop and goes back to sleep again. This time, there's no one to wake up the poor soul. It is for this reason that you need to test the termination condition <code>n&gt;=max</code> inside the <code>while</code> loop</li>\n</ol>\n"}], "owner": {"reputation": 576, "user_id": 4411923, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e7fab96c4ec90ad679d7139c128a777?s=128&d=identicon&r=PG&f=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/4411923/parzival"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 51976102, "answer_count": 1, "score": 1, "last_activity_date": 1534978456, "creation_date": 1534975145, "last_edit_date": 1534977466, "question_id": 51975739, "link": "https://stackoverflow.com/questions/51975739/pthread-synchronization-print-even-odd-numbers", "title": "Pthread synchronization - print even odd numbers", "body": "<p>I am new to pthreads. I am trying to print even and odd numbers from two threads. What is wrong with below code? Its intention is to create two threads - one will print odd numbers and other will print even numbers. The numbers have to be printed in order. It seems to get stuck (time limit exceeded in ideone).. I have spent a lot of time staring at it. Just can't figure out what is wrong..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n\n\npthread_mutex_t lock;\nint n = 0;\nint max = 10;\n\npthread_cond_t even;\npthread_cond_t odd;\n\n\nvoid* print_odd(void *x)\n{\n    while(1)\n    {\n        pthread_mutex_lock(&amp;lock);\n        while(n%2 != 0)\n        {\n            pthread_cond_wait(&amp;even, &amp;lock);\n        }\n        if(n &gt;= max)\n        {\n            pthread_mutex_unlock(&amp;lock);\n            pthread_exit(NULL);\n        }\n        printf(\"Thread A : %d\", ++n);\n        pthread_cond_signal(&amp;odd);\n        pthread_mutex_unlock(&amp;lock);\n    }\n}\n\n\nvoid* print_even(void *x)\n{\n    while(1)\n    {\n        pthread_mutex_lock(&amp;lock);\n        while(n%2 == 0)\n        {\n            pthread_cond_wait(&amp;odd, &amp;lock);\n        }\n        if(n &gt;= max)\n        {\n            pthread_mutex_unlock(&amp;lock);\n            pthread_exit(NULL);\n        }\n        printf(\"Thread B : %d\", ++n);\n        pthread_cond_signal(&amp;even);\n        pthread_mutex_unlock(&amp;lock);\n    }\n}\n\nmain()\n{\n    pthread_t t1, t2;\n    pthread_create(&amp;t1, NULL, print_odd, NULL);\n    pthread_create(&amp;t2, NULL, print_even, NULL);\n    pthread_join(t1, NULL);\n    pthread_join(t2, NULL);\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "strstr"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1534975161, "post_id": 51975718, "comment_id": 90901899, "body": "Have you stepped through this code in a debugger? Note: Convention has it you pass in <code>char*</code> not <code>char[]</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1534975354, "post_id": 51975718, "comment_id": 90901954, "body": "@user3121023 I believe you can make it an answer. It&#39;s just that using <code>strcspn</code> for this seems to be an overkill..."}, {"owner": {"reputation": 11, "user_id": 10261927, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h1rEsqvFH_k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOewl9TUw-uLbWA2quyI8fY2HQJrg/mo/photo.jpg?sz=128", "display_name": "obro39", "link": "https://stackoverflow.com/users/10261927/obro39"}, "edited": false, "score": 0, "creation_date": 1534975620, "post_id": 51975718, "comment_id": 90902041, "body": "@user3121023- Can you elaborate somewhat? Based on what I found trying different things, this makes sense.  I&#39;m just not sure where the trailing newline comes from, and exactly what kind of syntax is used to resolve that issue.  Is it convention to remove it the way you said, or is there a better way to accomplish the same result by changing other parts of the code? Thanks!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1534975686, "post_id": 51975718, "comment_id": 90902051, "body": "@user3121023 Maybe not, you know... you still need to calculate the length to get the last character."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534975754, "post_id": 51975718, "comment_id": 90902069, "body": "@obro From <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>man fgets</code></a>: <i>..Reading stops after an EOF or a newline. If a newline is read, it is stored into the buffer...</i>"}, {"owner": {"reputation": 11, "user_id": 10261927, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h1rEsqvFH_k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOewl9TUw-uLbWA2quyI8fY2HQJrg/mo/photo.jpg?sz=128", "display_name": "obro39", "link": "https://stackoverflow.com/users/10261927/obro39"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534975994, "post_id": 51975718, "comment_id": 90902141, "body": "@EugeneSh. So that is to say that when a user presses &quot;enter&quot; to indicate that the data is to be entered, it is stored as a &quot;\\n&quot; newline character? Any ideas as to why the book seems to have ignored this, like differences with past versions or different compilers/OS/etc?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1534976614, "post_id": 51975718, "comment_id": 90902320, "body": "@obro39 The code may have used <code>gets</code> originally, and somebody changed it to <code>fgets</code> without bothering to retest. <code>gets</code> was removed from the language in 2011."}, {"owner": {"reputation": 11, "user_id": 10261927, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h1rEsqvFH_k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOewl9TUw-uLbWA2quyI8fY2HQJrg/mo/photo.jpg?sz=128", "display_name": "obro39", "link": "https://stackoverflow.com/users/10261927/obro39"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1534982685, "post_id": 51975718, "comment_id": 90903503, "body": "@user3386109 so just to make sure I understand, the fix works by using strcspn to find the newline and replacing it with a null character, thereby solving the substring recognition issue?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534984370, "post_id": 51975718, "comment_id": 90903808, "body": "@EugeneSh. The &quot;<code>strcspn()</code> technique&quot; \u2014 <code>buffer[strcspn(buffer, &quot;\\n&quot;)] = &#39;\\0&#39;;</code> \u2014 has advantages over most alternatives because it works correctly when there is no newline in the buffer, or the buffer is empty.  Tests with <code>strlen()</code> have to check for empty strings, and whether there&#39;s a newline at the end.  Even using <code>strchr()</code> means you have to test whether you got a null pointer back."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1534984772, "post_id": 51975718, "comment_id": 90903887, "body": "You should check the return value from <code>fgets()</code>, but it probably isn&#39;t failing. You should print your input when you&#39;re not sure what it contains, making sure it is easy to spot some common problems, like embedded newlines or carriage returns. Consider: <code>printf(&quot;Searching for: [[%s]]\\n&quot;, search_for);</code> after the call to <code>fgets()</code> and before the call to <code>find_track()</code>. The output will show the pair of <code>]]</code> brackets on the second line because the track name will contain a newline, because you hit &#39;return&#39; when you finished typing the line (unless the input was so long it didn&#39;t fit)."}, {"owner": {"reputation": 11, "user_id": 10261927, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h1rEsqvFH_k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOewl9TUw-uLbWA2quyI8fY2HQJrg/mo/photo.jpg?sz=128", "display_name": "obro39", "link": "https://stackoverflow.com/users/10261927/obro39"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1534984941, "post_id": 51975718, "comment_id": 90903924, "body": "@JonathanLeffler the trailing newline seems to have been an issue- there is a very good answer to another question about removing trailing newlines and now that I realize that was the problem it was an easy fix and a good thing to note for later.  Thanks!"}], "owner": {"reputation": 11, "user_id": 10261927, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h1rEsqvFH_k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOewl9TUw-uLbWA2quyI8fY2HQJrg/mo/photo.jpg?sz=128", "display_name": "obro39", "link": "https://stackoverflow.com/users/10261927/obro39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1534985066, "answer_count": 0, "score": 1, "last_activity_date": 1534975005, "creation_date": 1534975005, "question_id": 51975718, "link": "https://stackoverflow.com/questions/51975718/what-is-the-issue-in-the-code-with-the-usage-of-strstr-to-search-an-array-of-str", "closed_reason": "Duplicate", "title": "What is the issue in the code with the usage of strstr to search an array of strings?", "body": "<p>I hate to ask a \"what is wrong here?\" question, but I'm working through the Head First C book and I came across an issue while attempting to compile an example which I took directly from the book.  The aim of the code is simply to take input from the user and search the \"Track List\" (the strings in the track array) for any copy of the user's exact input.  Since the code is taken directly from the book, it should compile and work perfectly with no issues.  However, it is not recognizing when the input is a part of any of the strings.  All of my own fruitless attempts to determine the source of the problem seem to point to the if state where the strstr function is used- but it's not overly complicated, and I don't see the issue.  Here is the code:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\n    char tracks[][80] = {\n        \"I left my heart in Harvard Med School\",\n        \"Newark, Newark - a wonderful town\",\n        \"Dancing with a Dork\",\n        \"From here to maternity\",\n        \"The girl for Iwo Jima\",\n    };\n\n    void find_track(char search_for[]) {\n        int i;\n        for (i = 0; i &lt; 5; i++) {\n            if (strstr(tracks[i], search_for))\n                printf(\"Track %i: '%s'\\n\", i, tracks[i]);\n        }\n    }\n\n    int main() {\n        char search_for[80];\n        printf(\"Search for: \");\n        fgets(search_for, 80, stdin);\n        find_track(search_for);\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "api", "openssl", "certificate", "authenticode"], "answers": [{"tags": [], "owner": {"reputation": 213, "user_id": 4879957, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e359bc340f611be2ca1ce75ad18948f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Tatasurya", "link": "https://stackoverflow.com/users/4879957/sam-tatasurya"}, "is_accepted": true, "score": 0, "last_activity_date": 1536643165, "creation_date": 1536643165, "answer_id": 52269107, "question_id": 51975566, "link": "https://stackoverflow.com/questions/51975566/openssl-c-api-certificate-chain-validation-with-crl/52269107#52269107", "title": "OpenSSL C API: Certificate chain validation with CRL", "body": "<p>Actually the code above is already correct to achieve my goal in performing CRL check.\nOne potential pitfall for someone new to X509 certificate structure is that <strong><em>the \"CRL Distribution Points\" URL for the certificate of interest is contained within that certificate itself, and not on the issuer's certificate</em></strong>. This was my mistake which led to the error I mentioned. I hope this may help people who just get started in understanding the X509 standard.</p>\n"}], "owner": {"reputation": 213, "user_id": 4879957, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e359bc340f611be2ca1ce75ad18948f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Tatasurya", "link": "https://stackoverflow.com/users/4879957/sam-tatasurya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 52269107, "answer_count": 1, "score": 2, "last_activity_date": 1536643165, "creation_date": 1534974199, "question_id": 51975566, "link": "https://stackoverflow.com/questions/51975566/openssl-c-api-certificate-chain-validation-with-crl", "title": "OpenSSL C API: Certificate chain validation with CRL", "body": "<p>I'm trying to perform certificate chain validation for Windows executable files, which also includes check for revoked certificates, using OpenSSL 1.0.2 C API.</p>\n\n<p>I have the CRL files stored locally and I want to load them during verification (as opposed to download the CRL via \"CRL Distribution Points\" URL from certificates which have it).</p>\n\n<p>Here's my simplified example of loading a single CRL file (omitting any error checking):</p>\n\n<pre><code>X509_STORE *store = NULL;\nX509_STORE_CTX *ctx = NULL;\nX509_VERIFY_PARAM *params = NULL;\n\nX509_CRL *crl = d2i_X509_CRL_fp(fc, NULL);  // fc is a file pointer to CRL file\nX509_STORE_add_crl(store, crl);\nX509_STORE_CTX_init(ctx, store, NULL, NULL);\n\nparams = X509_STORE_CTX_get0_param(ctx);\nX509_VERIFY_PARAM_set_purpose(params, X509_PURPOSE_ANY);\nX509_VERIFY_PARAM_set_flags(params, X509_V_FLAG_CRL_CHECK);  // only want to check end entity\nX509_STORE_set1_param(store, params);\n\n// assume p7 is properly initialized PKCS7*\n// assume bio is properly initialized BIO*\nint ret = PKCS7_verify(p7, p7-&gt;d.sign-&gt;cert, store, bio, NULL, 0);\n</code></pre>\n\n<p>Above code will return <code>ret == 0</code> with error: <code>unable to get certificate CRL</code>, which from my understanding means that OpenSSL is still trying to search CRL from the certificate itself instead of using the one I load locally.</p>\n\n<p>What is the proper way of achieving this task?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 422, "user_id": 1060378, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CFCzq.jpg?s=128&g=1", "display_name": "schroeder", "link": "https://stackoverflow.com/users/1060378/schroeder"}, "edited": false, "score": 0, "creation_date": 1534974202, "post_id": 52123304, "comment_id": 91197828, "body": "The risk assessment says: &quot;Errors of omission can result in unintended program flow.&quot;"}, {"owner": {"reputation": 121, "user_id": 4760502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d712898103f06ff3a080cce901ba39cd?s=128&d=identicon&r=PG&f=1", "display_name": "AndrolGenhald", "link": "https://stackoverflow.com/users/4760502/androlgenhald"}, "edited": false, "score": 0, "creation_date": 1534974252, "post_id": 52123304, "comment_id": 91197829, "body": "&quot;because doing so typically indicates programmer error and can result in unexpected behavior.&quot;"}, {"owner": {"reputation": 121, "user_id": 4760502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d712898103f06ff3a080cce901ba39cd?s=128&d=identicon&r=PG&f=1", "display_name": "AndrolGenhald", "link": "https://stackoverflow.com/users/4760502/androlgenhald"}, "edited": false, "score": 0, "creation_date": 1534974615, "post_id": 52123304, "comment_id": 91197830, "body": "They even give a list of allowed exceptions, <code>while ((ptr = ptr-&gt;next) != 0)</code> appears to be fine, as does <code>while ((ptr = ptr-&gt;next))</code>."}, {"owner": {"reputation": 1213, "user_id": 3263864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/41c98358d847c68ff3b45bffc099d98f?s=128&d=identicon&r=PG&f=1", "display_name": "DeepDeadpool", "link": "https://stackoverflow.com/users/3263864/deepdeadpool"}, "edited": false, "score": 2, "creation_date": 1534975523, "post_id": 52123304, "comment_id": 91197831, "body": "The explanation &quot;indicates programmer error&quot; doesn&#39;t explain much to me. Neither does &quot;errors of omission&quot;, since I&#39;m perfectly aware of the assignment that is happening. I was hoping to find an example on the page that provided a security reason why. Besides, the parenthesis workaround still opens me up to an assignment vs comparator mistake."}, {"owner": {"user_type": "does_not_exist", "display_name": "user71659"}, "edited": false, "score": 1, "creation_date": 1534985730, "post_id": 52123304, "comment_id": 91197832, "body": "It says in your link &quot;...it is frequently a case of the programmer mistakenly using the assignment operator = instead of the equals operator ==. Consequently, many compilers will warn about this condition...&quot; Are you looking for something more?"}, {"owner": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "edited": false, "score": 2, "creation_date": 1535022467, "post_id": 52123304, "comment_id": 91197833, "body": "There was an <a href=\"https://freedom-to-tinker.com/2013/10/09/the-linux-backdoor-attempt-of-2003/\" rel=\"nofollow noreferrer\">attempted backdoor in Linux</a> which eploited <code>=</code> vs <code>==</code>. So <i>this</i> is why it says to avoid <code>=</code> in the <code>while</code> condition... Sure there are some legit use cases, but it can easily be a symptom of a hard-to-diagnose error with big consequences."}, {"owner": {"reputation": 1213, "user_id": 3263864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/41c98358d847c68ff3b45bffc099d98f?s=128&d=identicon&r=PG&f=1", "display_name": "DeepDeadpool", "link": "https://stackoverflow.com/users/3263864/deepdeadpool"}, "edited": false, "score": 0, "creation_date": 1535384194, "post_id": 52123304, "comment_id": 91197834, "body": "Now that&#39;s a reason!"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1535758601, "post_id": 52123304, "comment_id": 91198562, "body": "I think <code>for (; ptr != NULL; ptr = ptr-&gt;next)</code>. The intent is clear that way."}], "answers": [{"tags": [], "owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "is_accepted": false, "score": 2, "last_activity_date": 1534987971, "creation_date": 1534987280, "answer_id": 52123305, "question_id": 52123304, "link": "https://stackoverflow.com/questions/52123304/why-does-cert-c-prohibit-assignments-within-a-while-loop-declaration/52123305#52123305", "title": "Why does Cert-C prohibit assignments within a while loop declaration?", "body": "<p>Assignments, using the <code>=</code> operator, can be easily confused with the equality <code>==</code> operator. This is clearly shown by this part of the text:</p>\n\n<blockquote>\n  <p>Although the intent of the code may be to assign <code>b</code> to <code>a</code> and test the value of the result for equality to <code>0</code>, it is frequently a case of the programmer mistakenly using the assignment operator <code>=</code> instead of the equals operator <code>==</code>. </p>\n</blockquote>\n\n<p>I agree that in the case of the <code>while</code> loop - where you expect that each loop takes the next element - this element of surprise is not really present for accomplished coders. For new coders it may still wrong foot-them. Either they mistake the assignment for testing equality or they don't directly see when the result of the expression is <code>0</code>.</p>\n\n<hr>\n\n<p>I'd make sure the expression is written <code>while (ptr != NULL)</code> because that way the intent is most clear, and the expression doesn't have any side effects. You could use <code>while ((ptr = ptr-&gt;next) != NULL)</code> if you do allow a single side effect within selection statements (I prefer the term \"flow control statements\" myself, but that's more Java-like).</p>\n\n<p>I'd myself stay away from the additional parentheses as in <code>while ((ptr = ptr-&gt;next))</code> as that may be mistaken for sloppiness and code beautifiers may warn against the unnecessary parentheses.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://itsecurity.stackexchange.com"], "launch_date": 1310490000, "open_beta_date": 1290106800, "closed_beta_date": 1289502000, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/security/Img/apple-touch-icon@2.png", "twitter_account": "StackSecurity", "favicon_url": "https://cdn.sstatic.net/Sites/security/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/security/Img/apple-touch-icon.png", "audience": "information security professionals", "site_url": "https://security.stackexchange.com", "api_site_parameter": "security", "logo_url": "https://cdn.sstatic.net/Sites/security/Img/logo.png", "name": "Information Security", "site_type": "main_site"}, "on_date": 1535754919, "question_id": 192131}, "owner": {"reputation": 1213, "user_id": 3263864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/41c98358d847c68ff3b45bffc099d98f?s=128&d=identicon&r=PG&f=1", "display_name": "DeepDeadpool", "link": "https://stackoverflow.com/users/3263864/deepdeadpool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535754919, "creation_date": 1534973422, "question_id": 52123304, "link": "https://stackoverflow.com/questions/52123304/why-does-cert-c-prohibit-assignments-within-a-while-loop-declaration", "title": "Why does Cert-C prohibit assignments within a while loop declaration?", "body": "<p>Say I want to loop through a list in C. There are two usual ways I can do this.</p>\n\n<pre><code>/* method a */\nwhile (ptr = ptr-&gt;next) { /* do stuff */ }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/* method b */\nptr = head;\nwhile (ptr) { /* do stuff */ ptr = ptr-&gt;next; }\n</code></pre>\n\n<p><a href=\"https://wiki.sei.cmu.edu/confluence/display/c/EXP45-C.+Do+not+perform+assignments+in+selection+statements\" rel=\"nofollow noreferrer\">CERT-C bans method A</a>. Why is this? Surely B requires more manual coding to remember to iterate at all possible loop points  (maybe the function needs to <code>continue</code> past some nodes if they're invalid) and method A guarantees consistent iteration.</p>\n"}, {"tags": ["c", "pointers", "struct", "insert", "binary-tree"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1534972726, "post_id": 51975155, "comment_id": 90900961, "body": "<code>node = ...</code> within your function means <i>nothing</i> to the caller (in this case <code>main</code>). Pointers are passed by value in C, just like everything else. If you want to modify the pointer in <code>main()</code> you either have to pass it by address (of the pointer, so as a pointer-to-pointer) and dereference it accordingly in your function for assignment, or utilize the otherwise unused return result of <code>addNode</code>. This question appears near-daily here, so a duplicate should be forthcoming. <a href=\"https://stackoverflow.com/questions/13431108/changing-address-contained-by-pointer-using-function\">Like this one</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1534972683, "post_id": 51975253, "comment_id": 90900943, "body": "You should add a short example of what that would look like."}], "tags": [], "owner": {"reputation": 89, "user_id": 10124570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6c2e238e4133242bed666ac34776f9?s=128&d=identicon&r=PG&f=1", "display_name": "Giedrius Statkevi\u010dius", "link": "https://stackoverflow.com/users/10124570/giedrius-statkevi%c4%8dius"}, "is_accepted": true, "score": 1, "last_activity_date": 1534972587, "creation_date": 1534972587, "answer_id": 51975253, "question_id": 51975155, "link": "https://stackoverflow.com/questions/51975155/unable-to-refer-to-pointer-from-main-method-within-function-that-takes-in-pointe/51975253#51975253", "title": "Unable to refer to pointer from main method within function that takes in pointer as argument", "body": "<p>The problem is that in your addNode function you are actually modifying the local <code>node</code>, not the actual variable in the outer scope. To fix this issue, you need to pass a <em>pointer to</em> pointer to <code>NODE</code> in <code>addNode</code>. Also, please do not cast the result of malloc as it is not needed and it may hide bugs i.e. you might forget to add the needed headers.</p>\n"}], "owner": {"reputation": 133, "user_id": 9790188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NqIWR.png?s=128&g=1", "display_name": "AC-5", "link": "https://stackoverflow.com/users/9790188/ac-5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1534972718, "accepted_answer_id": 51975253, "answer_count": 1, "score": 0, "last_activity_date": 1534973062, "creation_date": 1534972121, "question_id": 51975155, "link": "https://stackoverflow.com/questions/51975155/unable-to-refer-to-pointer-from-main-method-within-function-that-takes-in-pointe", "closed_reason": "Duplicate", "title": "Unable to refer to pointer from main method within function that takes in pointer as argument", "body": "<p>I recently finished \"The C Programming Language - 2nd Edition\" and I thought a good next step would be creating my own data structures library using C.</p>\n\n<p>I'm currently working on implementing a standard binary tree and I've been stuck with the insertion method.  So far I've created the node struct:</p>\n\n<pre><code>typedef struct node\n{\n    int data;\n    struct node * rc;\n    struct node * lc;\n}NODE;\n</code></pre>\n\n<p>and I'm trying to get insertion method to work when presented with the root node of the tree.  Here is how I've created the root node and how I call it in the addNode() function:</p>\n\n<pre><code>int main() {\n    NODE * root = NULL;\n    addNode(12, root);\n\n    return 0;\n}\n</code></pre>\n\n<p>My addNode() function is structued like so:</p>\n\n<pre><code>void addNode(int info, NODE * node)\n{\n    if (node == NULL) {\n        node = (NODE *)malloc(sizeof(NODE));\n        node-&gt;data = info;\n        node-&gt;rc = NULL;\n        node-&gt;lc = NULL;\n    }\n}\n</code></pre>\n\n<p>When I try to display the actual value of 'data' stored within the NODE * root from the main method, I get a segmentation fault.  After some exploring, I realized that the reason for this was that my memory allocation for node in the addNode() method was not actually redefining root to be newly allocated memory with the value 'info' but was instead creating a separate NODE * node.</p>\n\n<p>Ultimately I think my issue is that I'm still trying to grasp pointers in C but I would greatly appreciate any insight into how I could go about fixing my code.  (Sorry in advance if my C terminology is not quite there yet either)</p>\n"}, {"tags": ["c", "multithreading", "thread-safety"], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 4834897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXb7I.jpg?s=128&g=1", "display_name": "Or Hirshfeld", "link": "https://stackoverflow.com/users/4834897/or-hirshfeld"}, "edited": false, "score": 0, "creation_date": 1587976226, "post_id": 51975156, "comment_id": 108710656, "body": "Is it possible to connect many clients (modbus_t) to one server? I&#39;m trying to create many threads to connect to the same controller, each with its own instance, but it seems that only the last one connected can communicate. Is ModBus Protocol allowing more than one client on the same server? Does libmodbus allow multi-connection to the same server?"}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 3, "last_activity_date": 1534972124, "creation_date": 1534972124, "answer_id": 51975156, "question_id": 51975005, "link": "https://stackoverflow.com/questions/51975005/multiple-threads-with-libmodbus/51975156#51975156", "title": "Multiple threads with libmodbus?", "body": "<p>libmodbus does not document whether it is threadsafe or not, so this has been determined by looking at the source code:</p>\n\n<ul>\n<li><p>You cannot share a <code>modbus_t</code> between threads, a <code>modbus_t</code> instance is not thread safe.</p></li>\n<li><p>You can have many threads each operating on different instances of a <code>modbus_t</code>. </p></li>\n<li>The creation of a <code>modbus_t</code> instance is thread safe.</li>\n</ul>\n\n<p>If you need to share a <code>modbus_t</code> instance across threads, you need to provide your own locking in order to ensure only one of your threads access that instance concurrently.</p>\n"}], "owner": {"reputation": 67, "user_id": 10234415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ae514c461631135da74aa076c7fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10234415/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 3, "accepted_answer_id": 51975156, "answer_count": 1, "score": 2, "last_activity_date": 1534972124, "creation_date": 1534971397, "question_id": 51975005, "link": "https://stackoverflow.com/questions/51975005/multiple-threads-with-libmodbus", "title": "Multiple threads with libmodbus?", "body": "<p>I'm confused about libmodbus (<a href=\"http://libmodbus.org/\" rel=\"nofollow noreferrer\">http://libmodbus.org/</a>) regarding the thread-safety.</p>\n\n<p>I have a program, which works as a Modbus client. I have 5 modbus devices (server), from which I want to read some values.\nCurrently I programmed a function, which I call in my main(). In this function I have an array with 5 modbus_t instances and with a FOR loop I establish the connection to the servers and read the values - one after another.\nIt is possible to use the libmodbus in threads so I can establish and read the values simultaneously or not? \nSome websites say 'yes', some say 'no'...</p>\n\n<p>Andre</p>\n"}, {"tags": ["c", "sockets", "tcp", "server", "client"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1534992094, "post_id": 51974836, "comment_id": 90905239, "body": "they cannot both &#39;read&#39; as their first action"}], "answers": [{"tags": [], "owner": {"reputation": 2704, "user_id": 6794772, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2d8db2b0d48b6e1b25657fda9ec4ae02?s=128&d=identicon&r=PG&f=1", "display_name": "Dellowar", "link": "https://stackoverflow.com/users/6794772/dellowar"}, "is_accepted": true, "score": 1, "last_activity_date": 1534973417, "creation_date": 1534973417, "answer_id": 51975412, "question_id": 51974836, "link": "https://stackoverflow.com/questions/51974836/c-client-server-with-socket-h/51975412#51975412", "title": "C client server with &lt;socket.h&gt;", "body": "<p>First off, it's always good practice to wrap all error/loging functions so they can be modified for later scaling. I do this so, later I can add file/line to my errors.</p>\n\n<pre><code>void perr(char *message)\n{\n    fprintf(stderr, message);\n}\n</code></pre>\n\n<p>On to your question. It's a very practice-rich answer. (Better asked on <a href=\"https://softwareengineering.stackexchange.com/\">this board</a>. But I'll help you anyways.</p>\n\n<p>You're right to have the backbone as solid as possible before expanding. The best practice for a well made application is to have it very 'flat' in scope. (not to many <code>if</code>'s in <code>if</code>'s). Doing this will also provide you with a better understanding of the flow of code and more atomic error reporting:</p>\n\n<pre><code>main()\n{\n    if(!(soc = createsocket(...)) return 1;\n    if(!bindsocket(soc))\n    {\n         deletesocket(soc);\n         return 1;\n    }\n\n    // Main server loop\n    while(req = accept_request(soc))\n    {\n        proc_request(req);\n    }\n    plog(\"No longer accepting request\");\n    return 0;\n}\n</code></pre>\n\n<p>Notice how I have no error reporting in the driver function (<code>main</code> in this example). This is because all error reporting is handled INSIDE of the called functions (<code>createsocket()</code>, <code>bindsocket()</code>, ect).</p>\n\n<p>The driver function is only concerned if the called functions succeeded or not. The details of each failure are best described in the function who's arguments lead to the failure.</p>\n\n<p>Here are my tips:</p>\n\n<ul>\n<li>Avoid <code>exit()</code>, your code needs to be ready to use <code>return</code> all the way up to <code>main()</code> if something goes wrong. There are execptions (threads and child procs, but you get the idea)</li>\n<li>Good programs are good at failing</li>\n<li>For a server/client relationship, the server is typically single threaded and only loops through all client requests (computers are faster than you think, unless you're expecting around 5k requests).</li>\n<li>State Machines are extremely useful in your situation. Think of the states your program is going to be in between start and stop, lay out what methods need to be in each state and have an overall plan what happens with errors in each state. (ie, <code>opened</code>, <code>establishing</code>, <code>running</code>, <code>stopping</code>)</li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 10261669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4970706429458875b696d328bc02e5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Coding Dork", "link": "https://stackoverflow.com/users/10261669/coding-dork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 51975412, "answer_count": 1, "score": 2, "last_activity_date": 1534973417, "creation_date": 1534970672, "question_id": 51974836, "link": "https://stackoverflow.com/questions/51974836/c-client-server-with-socket-h", "title": "C client server with &lt;socket.h&gt;", "body": "<p>Hello and good evening,</p>\n\n<p>I am writing a client &amp; server pair of programs in C. Right now I got both of them running and by providing access to ports on my server through router settings, I can establish local and global connections for a barebones chat back and forth. Here is what both programs do until now.</p>\n\n<p>Client:</p>\n\n<ul>\n<li><p>create a socket</p></li>\n<li><p>create an sockaddr_in (port and IP address)</p></li>\n<li><p>connect the socket with the sockaddr_in to the server</p></li>\n<li><p>go into a loop for read / write to the server, one at a time</p></li>\n</ul>\n\n<p>Server:</p>\n\n<ul>\n<li><p>create a socket</p></li>\n<li><p>create a sockaddr_in (port and IP address)</p></li>\n<li><p>bind the socket to sockaddr_in</p></li>\n<li><p>listen to request on the socket</p></li>\n<li><p>accept a request</p></li>\n<li><p>go into a loop for read / write to the server, one at a time</p></li>\n</ul>\n\n<p><strong>My question:</strong></p>\n\n<p>What do I have to consider for handling and error-handling these individual steps correctly?</p>\n\n<p>What I got until now is code like this:</p>\n\n<pre><code>printf(\"trying to connect to: IPv4 &lt;%s&gt; port &lt;%s&gt; ...\", argv[1], argv[2]);\n\nif(connect(net_socket, (struct sockaddr *)&amp;server_address, sizeof server_address) == -1)\n{\n    fprintf(stderr, \"\\ntcp connection failed.\\n\");\n    exit(4);\n}\n\nprintf(\" success.\\nconnection to server: IPv4 &lt;%s&gt; port &lt;%s&gt;\\n\", argv[1], argv[2]);\n</code></pre>\n\n<p>Code like this is wrapped around all the steps these programs do from socket creation to connect and accept. And they work given the right input.</p>\n\n<p>I want to scale my programs:</p>\n\n<ul>\n<li><p>simultaneous read and write for both sides</p></li>\n<li><p>multiple clients to server instead of client and server</p></li>\n<li><p>correct data encapsulation</p></li>\n</ul>\n\n<p>etc.</p>\n\n<p>For that I need to know how to do the backbone correct and I want to get the basics straight before I start multithreading, forking, selecting or building whatnot around the core.</p>\n\n<p>I don't want to overscale this post, hence I will only post my code if it is requested at all. Thank you very much for reading and replying in advance.</p>\n"}, {"tags": ["c", "bit"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1534968930, "post_id": 51974413, "comment_id": 90899336, "body": "Are you looking for the maximum cluster of set bits within a binary number?"}, {"owner": {"reputation": 97, "user_id": 8773581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51acbe6ded26cd0f961aaeac68dc9285?s=128&d=identicon&r=PG&f=1", "display_name": "Sile", "link": "https://stackoverflow.com/users/8773581/sile"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1534969167, "post_id": 51974413, "comment_id": 90899448, "body": "@Myst let&#39;s say that the output is 01110110. I must say how many &quot;1&quot; are near, in 01110110 there are 3 near &quot;1&quot; and then 2 near &quot;1&quot;, i hope it&#39;s clearer now"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1534969267, "post_id": 51974413, "comment_id": 90899501, "body": "I&#39;m not sure I understand. In your example, you say there are 3 and than 2... do you want the script to remember the 3 (the maximum only) or do you need all results?"}, {"owner": {"reputation": 97, "user_id": 8773581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51acbe6ded26cd0f961aaeac68dc9285?s=128&d=identicon&r=PG&f=1", "display_name": "Sile", "link": "https://stackoverflow.com/users/8773581/sile"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1534969303, "post_id": 51974413, "comment_id": 90899521, "body": "No, only the higher result"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1534973545, "post_id": 51974413, "comment_id": 90901290, "body": "Apparently, you only need 256 values. Try a lookup array: <code>static int lookup[] = {0, 1, 1, 2, 1, 1, 2, 3, 1, ... 8};</code> them simply print the pre computed value: <code>printf(&quot;%d has %d 1-bits in succession.\\n&quot;, value, lookup[value]);</code>"}, {"owner": {"reputation": 97, "user_id": 8773581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51acbe6ded26cd0f961aaeac68dc9285?s=128&d=identicon&r=PG&f=1", "display_name": "Sile", "link": "https://stackoverflow.com/users/8773581/sile"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1534976767, "post_id": 51974413, "comment_id": 90902357, "body": "I got it, thanks @pmg!"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1534969810, "post_id": 51974623, "comment_id": 90899766, "body": "I would use MAX instead of <code>if</code>."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1534971179, "post_id": 51974623, "comment_id": 90900349, "body": "I would reconsider the direction on the bit shifting... (just print it all at once with a <code>char buffer[8]</code>."}, {"owner": {"reputation": 97, "user_id": 8773581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51acbe6ded26cd0f961aaeac68dc9285?s=128&d=identicon&r=PG&f=1", "display_name": "Sile", "link": "https://stackoverflow.com/users/8773581/sile"}, "edited": false, "score": 0, "creation_date": 1534976808, "post_id": 51974623, "comment_id": 90902363, "body": "This is exactly what i was thinking about, unfortunately i&#39;m still a beginner and i had some difficulties getting to it. Thank you @dbush!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1534971365, "last_edit_date": 1534971365, "creation_date": 1534969664, "answer_id": 51974623, "question_id": 51974413, "link": "https://stackoverflow.com/questions/51974413/dysplaying-the-bits-of-a-number/51974623#51974623", "title": "Dysplaying the bits of a number", "body": "<p>If you're looking to count the maximum number of adjacent bits that are set to 1, so can do so as follows.</p>\n\n<p>Have a counter that keeps track of how may '1' bits in a row you've found.  When you find a '1' increment it, when you find a '0' set it to 0.  You also need a variable that keeps track of the longest run.  If the current is bigger than the longest run, set the longest to the current.</p>\n\n<pre><code>int current_run = 0, longest_run = 0;\nwhile (displayMask) {\n   if (value &amp; displayMask) {\n       current_run++;\n       if (current_run &gt; longest_run) {\n           longest_run = current_run;\n       }\n       putchar('1');\n   } else {\n       current_run = 0;\n       putchar('0');\n   }\n\n   displayMask &gt;&gt;= 1;\n} \n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8773581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51acbe6ded26cd0f961aaeac68dc9285?s=128&d=identicon&r=PG&f=1", "display_name": "Sile", "link": "https://stackoverflow.com/users/8773581/sile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 51974623, "answer_count": 1, "score": -2, "last_activity_date": 1534971365, "creation_date": 1534968676, "last_edit_date": 1534968939, "question_id": 51974413, "link": "https://stackoverflow.com/questions/51974413/dysplaying-the-bits-of-a-number", "title": "Dysplaying the bits of a number", "body": "<p>I created a program which is supposed to receive an integer and return the binary representation of that number. Now i would like to add a function to count how many \"1\" are near in the number, that's where i am having some troubles, example: </p>\n\n<p>INPUT: 123\n-> 0b01111011 -> 4 (Because there are 4 near \"1\")</p>\n\n<p>To do that, i need to store in a variable the output of my current script, but i can't go beyond that, since i'm using putchar: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid displayBits(unsigned int value); // prototype\n\nint main(void)\n{ \n   unsigned int x; // variable to hold user input\n   printf(\"%s\", \"Enter a nonnegative int: \");\n   scanf(\"%u\", &amp;x);\n   displayBits(x);\n} \n// display bits of an unsigned int value\nvoid displayBits(unsigned int value)\n{  \n\n\n\n   // define displayMask and left shift 31 bits\n   unsigned int displayMask = 1 &lt;&lt; 7; \n   printf(\"%10u = \", value);\n   printf(\"0b\");\n\n\n   // loop through bits \n   for (unsigned int c = 1; c &lt;= 8; ++c) {\n\n      putchar(value &amp; displayMask ? '1' : '0');\n      value &lt;&lt;= 1;\n\n\n   } \n   putchar('\\n');\n} \n</code></pre>\n"}, {"tags": ["c", "input", "limiting"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1534966265, "post_id": 51973854, "comment_id": 90898204, "body": "The &quot;break&quot; part is not clear. What do you want to do if the input is not a number?"}, {"owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1534966974, "post_id": 51973854, "comment_id": 90898517, "body": "One option (if input is limited to ASCII characters) is to cast <code>ch</code> to an integer and then check the <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII code</a>. Numbers will fall between 48 and 57."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 1, "creation_date": 1534971672, "post_id": 51973854, "comment_id": 90900555, "body": "@ReticulatedSpline <code>ch</code> should be <code>int</code> anyway, to match the return value from <code>getchar</code> so no need to cast. And no need to assume ASCII, just use the range <code>&#39;0&#39;</code> to <code>&#39;9&#39;</code> which are also <code>int</code> values. The code will be clearer too."}, {"owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1534974141, "post_id": 51973854, "comment_id": 90901519, "body": "@WeatherVane Whoops, good catch. I mentioned the ASCII tables because this has the feel of anassignment and that was a &#39;learning outcome&#39; for a similar project I once encountered."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1534971495, "last_edit_date": 1534971495, "creation_date": 1534966356, "answer_id": 51973946, "question_id": 51973854, "link": "https://stackoverflow.com/questions/51973854/filtering-input-to-only-numbers-c/51973946#51973946", "title": "filtering input to only numbers. C", "body": "<p>When you need to perform error checking, do different things based on the input, etc., it's best to read user input line by line and process each line as you see fit.</p>\n\n<pre><code>// Make it large enough for your needs.\n#define LINE_LENGTH 200\n\nchar line[LINE_LENGTH];\n\n// Keep reding lines of text until there is nothing to read.\nwhile ( fgets(line, sizeof(line), stdin) != NULL )\n{\n   // Process contents of line.\n}\n</code></pre>\n\n<p>If you expect to see only one number per line, you can use <code>sscanf</code> to extract numbers from each line.</p>\n\n<pre><code>while ( fgets(line, sizeof(line), stdin) != NULL )\n{\n   int num;\n   if ( sscanf(line, \"%d\", &amp;num) == 1 )\n   {\n      // Got a number. Use it.\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1534966809, "creation_date": 1534966809, "answer_id": 51974038, "question_id": 51973854, "link": "https://stackoverflow.com/questions/51973854/filtering-input-to-only-numbers-c/51974038#51974038", "title": "filtering input to only numbers. C", "body": "<p>The probably easiest way to read in a number is using <code>scanf</code>:</p>\n\n<pre><code>int number;\nif (scanf(\"%d\",&amp;number) == 1) {\n  printf(\"successfully read number %d\\n\",number);\n} else {\n  printf(\"not a number.\\n\");\n}\n</code></pre>\n\n<p>It skips leading white spaces and then takes characters from <code>stdin</code> as long as these match an integral number format. Note that you still might have to press \"enter\" before your program will proceed, because the operating system might buffer the input (beyond your control).</p>\n\n<p>Note that a <code>ch=getchar()</code> will take also the first non-digit value from <code>stdin</code>, which can then not be consumed by any further access to <code>stdin</code> anymore. <code>scanf</code>, in contrast, keeps this character in the buffer for later use.</p>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1534967843, "last_edit_date": 1534967843, "creation_date": 1534967360, "answer_id": 51974141, "question_id": 51973854, "link": "https://stackoverflow.com/questions/51973854/filtering-input-to-only-numbers-c/51974141#51974141", "title": "filtering input to only numbers. C", "body": "<p>Just check if the input is some value between <code>'0'</code> and <code>'9'</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    size_t len = 0;\n    char str[32];\n    int ch;\n\n    while (len &lt; sizeof(str) - 1) {\n        ch = getchar();\n        if ((ch &gt;= '0') &amp;&amp; (ch &lt;= '9')) {\n            str[len++] = (char)ch;\n        } else {\n            break;\n        }\n    }\n    str[len] = '\\0';\n    puts(str);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10261421, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mis_wjWLxRc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUryAOWFc-M0HKrHV-9UPh9-jCjA/mo/photo.jpg?sz=128", "display_name": "asker", "link": "https://stackoverflow.com/users/10261421/asker"}, "edited": false, "score": 0, "creation_date": 1535056307, "post_id": 51975798, "comment_id": 90937373, "body": "that is a nice elegant solution! maybe you can help me take it one step further. do you mind contacting me through e-mail? i see this site doesn&#39;t support messaging. omerben.g@gmail.com"}, {"owner": {"reputation": 449, "user_id": 7775673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff1f0f3fe7ed5fc8beddeee6c91fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Badran", "link": "https://stackoverflow.com/users/7775673/badran"}, "reply_to_user": {"reputation": 1, "user_id": 10261421, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mis_wjWLxRc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUryAOWFc-M0HKrHV-9UPh9-jCjA/mo/photo.jpg?sz=128", "display_name": "asker", "link": "https://stackoverflow.com/users/10261421/asker"}, "edited": false, "score": 0, "creation_date": 1535058397, "post_id": 51975798, "comment_id": 90938255, "body": "Okay I will but tomorrow cuz i don&#39;t have my laptop now i left it at work , and please accept and upvote my solution if you liked it :)"}], "tags": [], "owner": {"reputation": 449, "user_id": 7775673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff1f0f3fe7ed5fc8beddeee6c91fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Badran", "link": "https://stackoverflow.com/users/7775673/badran"}, "is_accepted": false, "score": 0, "last_activity_date": 1534975574, "creation_date": 1534975574, "answer_id": 51975798, "question_id": 51973854, "link": "https://stackoverflow.com/questions/51973854/filtering-input-to-only-numbers-c/51975798#51975798", "title": "filtering input to only numbers. C", "body": "<p>simple, nice and neat solution:), I used to solve similar questions when I started programming, this will let you only input numbers</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\nchar ch;\n  do{\n    ch=getchar();\n   }while (!(ch&gt;=48 &amp;&amp; ch&lt;=57));\nprintf(\"yay,we got a number : %c !\",ch);\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10261421, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mis_wjWLxRc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUryAOWFc-M0HKrHV-9UPh9-jCjA/mo/photo.jpg?sz=128", "display_name": "asker", "link": "https://stackoverflow.com/users/10261421/asker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1534975574, "creation_date": 1534966030, "question_id": 51973854, "link": "https://stackoverflow.com/questions/51973854/filtering-input-to-only-numbers-c", "title": "filtering input to only numbers. C", "body": "<p>Here's a basic question: </p>\n\n<p>How can I take the input from a user and only accept numbers?\nI know I need to use this start:</p>\n\n<pre><code>    do{\n    ch=getchar();\n     }while (ch != '\\n');\n</code></pre>\n\n<p>But I know it's not enough. This will block every input, including numbers, so I need to break when input is number. \nalso how do I break not after the first digit of the number?</p>\n\n<p>I tried looking this up with no luck.</p>\n\n<p>thanks!          </p>\n"}, {"tags": ["android", "c", "bluetooth"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1536498734, "post_id": 51973785, "comment_id": 91438009, "body": "Please take a look at: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1812, "user_id": 2689839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pQkd.jpg?s=128&g=1", "display_name": "Parthiban", "link": "https://stackoverflow.com/users/2689839/parthiban"}, "is_accepted": false, "score": 0, "last_activity_date": 1535820981, "creation_date": 1535820981, "answer_id": 52130344, "question_id": 51973785, "link": "https://stackoverflow.com/questions/51973785/how-to-properly-connect-the-bluetooth-server-in-c-for-android/52130344#52130344", "title": "How to properly connect the bluetooth server in C for Android?", "body": "<p>I don't know how to do this in libbluetooth/raw socket based. But you can use profile manager interface provided by Bluez to create your own custom profile and register this with bluetoothd.</p>\n\n<p>Below is the sample slide directly copied from <a href=\"http://events17.linuxfoundation.org/sites/events/files/slides/Bluetooth%20on%20Modern%20Linux_0.pdf\" rel=\"nofollow noreferrer\">this presentation</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/N3Jm5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N3Jm5.png\" alt=\"Profile Manager\"></a></p>\n\n<p>To explain in detail, you need to define the methods described in <a href=\"https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/profile-api.txt#n108\" rel=\"nofollow noreferrer\">Profile1</a> interface and register it with Bluetoothd using \"<a href=\"https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/profile-api.txt#n12\" rel=\"nofollow noreferrer\">RegisterProfile</a>\" method.</p>\n\n<p>I don't have any custom profile implementation example, but you can always refer <a href=\"https://github.com/Arkq/bluez-alsa\" rel=\"nofollow noreferrer\">bluez-alsa repository</a> for AG/HFP/HS based profile implementations, which is implemented as external profiles using this interface.</p>\n\n<p>Most interesting part for you in this repository is, \"<a href=\"https://github.com/Arkq/bluez-alsa/blob/master/src/bluez.c#L886\" rel=\"nofollow noreferrer\">register_profile</a>\" API, which take UUID and other required parameters. You can copy the same implementation and register your own UUID and implement,</p>\n\n<p><a href=\"https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/profile-api.txt#n119\" rel=\"nofollow noreferrer\">NewConnection</a>: Action which needs to be performed when new device is connected with server. You can find how to connect using DBUS in Linux <a href=\"https://gist.github.com/parthitce\" rel=\"nofollow noreferrer\">here</a> with explanation <a href=\"https://www.linumiz.com/category/blog/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><a href=\"https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/profile-api.txt#n132\" rel=\"nofollow noreferrer\">RequestDisconnection</a>: Which will be called by Bluetoothd when device is disconnected. You can perform cleanup for device based allocation/resources.</p>\n\n<p><a href=\"https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/profile-api.txt#n111\" rel=\"nofollow noreferrer\">Release</a>: Which will be called when Bluetoothd exits. You can perform the profile complete cleanup and <a href=\"https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/profile-api.txt#n95\" rel=\"nofollow noreferrer\">UnregisterProfile</a> for graceful exit.</p>\n"}], "owner": {"reputation": 437, "user_id": 7483497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7ccfed63638927359cc49f439f38c7?s=128&d=identicon&r=PG", "display_name": "Beto", "link": "https://stackoverflow.com/users/7483497/beto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535820981, "creation_date": 1534965785, "question_id": 51973785, "link": "https://stackoverflow.com/questions/51973785/how-to-properly-connect-the-bluetooth-server-in-c-for-android", "title": "How to properly connect the bluetooth server in C for Android?", "body": "<p>I'm trying to connect an application between the computer and an android app. The app will be the client and the computer will be the server.</p>\n\n<p>Using BlueZ (C library for bluetooth on linux) for server:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/rfcomm.h&gt;\n\nint main(int argc, char **argv)\n{\n    struct sockaddr_rc loc_addr = { 0 }, rem_addr = { 0 };\n    char buf[1024] = { 0 };\n    int s, client, bytes_read;\n    socklen_t opt = sizeof(rem_addr);\n\n    // allocate socket\n    s = socket(AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM);\n\n    // bind socket to port 1 of the first available \n    // local bluetooth adapter\n    loc_addr.rc_family = AF_BLUETOOTH;\n    loc_addr.rc_bdaddr = *BDADDR_ANY;\n    loc_addr.rc_channel = (uint8_t) 1;\n    bind(s, (struct sockaddr *)&amp;loc_addr, sizeof(loc_addr));\n\n    // put socket into listening mode\n    listen(s, 1);\n\n    // accept one connection\n    client = accept(s, (struct sockaddr *)&amp;rem_addr, &amp;opt);\n\n    ba2str( &amp;rem_addr.rc_bdaddr, buf );\n    fprintf(stderr, \"accepted connection from %s\\n\", buf);\n    memset(buf, 0, sizeof(buf));\n\n    // read data from the client\n    bytes_read = read(client, buf, sizeof(buf));\n    if( bytes_read &gt; 0 ) {\n        printf(\"received [%s]\\n\", buf);\n    }\n\n    // close connection\n    close(client);\n    close(s);\n    return 0;\n}\n</code></pre>\n\n<p>The source of this example is : <a href=\"http://people.csail.mit.edu/albert/bluez-intro/x502.html\" rel=\"nofollow noreferrer\">http://people.csail.mit.edu/albert/bluez-intro/x502.html</a></p>\n\n<p>And the class of the app that i'm using to connect is:</p>\n\n<pre><code>import android.bluetooth.BluetoothAdapter;\nimport android.bluetooth.BluetoothDevice;\nimport android.bluetooth.BluetoothServerSocket;\nimport android.bluetooth.BluetoothSocket;\nimport android.os.Bundle;\nimport android.os.Message;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.Arrays;\nimport java.util.UUID; \n\npublic class ConnectionThread extends Thread {\n\n\n    BluetoothSocket btSocket = null;\n    BluetoothServerSocket btServerSocket = null;\n    InputStream input = null;\n    OutputStream output = null;\n    String btDevAddress = null;\n    String myUUID = \"00000101-0000-1000-8000-00805F9C34BF\";\n    boolean server;\n    boolean running = false;\n    public ConnectionThread() {\n\n        this.server = true;\n    }\n    public ConnectionThread(String btDevAddress) {\n\n        this.server = false;\n        this.btDevAddress = btDevAddress;\n    }\n    public void run() {\n\n        this.running = true;\n        BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();\n\n        if(this.server) {\n            try {\n                btServerSocket = btAdapter.listenUsingRfcommWithServiceRecord(\"Super Bluetooth\", UUID.fromString(myUUID));\n                btSocket = btServerSocket.accept();\n                if(btSocket != null) {\n\n                    btServerSocket.close();\n                }\n\n            } catch (IOException e) {\n                e.printStackTrace();\n                toMainActivity(\"---N\".getBytes());\n            }\n\n\n        } else {\n\n            try {\n\n                BluetoothDevice btDevice = btAdapter.getRemoteDevice(btDevAddress);\n                btSocket = btDevice.createRfcommSocketToServiceRecord(UUID.fromString(myUUID));\n\n                btAdapter.cancelDiscovery();\n\n                if (btSocket != null)\n                    btSocket.connect();\n\n            } catch (IOException e) {\n                e.printStackTrace();\n                toMainActivity(\"---N\".getBytes());\n            }\n\n        }\n\n        if(btSocket != null) {\n\n            toMainActivity(\"---S\".getBytes());\n\n            try {\n                input = btSocket.getInputStream();\n                output = btSocket.getOutputStream();\n\n                byte[] buffer = new byte[1024];\n                int bytes;\n\n                while(running) {\n\n                    bytes = input.read(buffer);\n                    toMainActivity(Arrays.copyOfRange(buffer, 0, bytes));\n\n                }\n\n            } catch (IOException e) {\n                e.printStackTrace();\n                toMainActivity(\"---N\".getBytes());\n            }\n        }\n\n    }\n    private void toMainActivity(byte[] data) {\n\n        Message message = new Message();\n        Bundle bundle = new Bundle();\n        bundle.putByteArray(\"data\", data);\n        message.setData(bundle);\n        MainActivity.handler.sendMessage(message);\n    }\n    public void write(byte[] data) {\n\n        if(output != null) {\n            try {\n\n                output.write(data);\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } else {\n            toMainActivity(\"---N\".getBytes());\n        }\n    }\n\n\n    public void cancel() {\n\n        try {\n\n            running = false;\n            btServerSocket.close();\n            btSocket.close();\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        running = false;\n    }\n}\n</code></pre>\n\n<p>To send a data to the server I do:</p>\n\n<pre><code>ConnectionThread connect = new ConnectionThread(data.getStringExtra(\"Address_server\"));\nconnect.start();\nbyte[] data = \"20\".getBytes();\nconnect.write(data);\n</code></pre>\n\n<p>The problem is not that the connection is occurring. I believe it's because the server is out of UUID.</p>\n\n<p>How can I insert the UUID into the server so that it can receive the data sent?</p>\n"}, {"tags": ["c", "string", "input", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1534964240, "post_id": 51973431, "comment_id": 90897287, "body": "Please revisit the documentation for <code>scanf</code> about format specifiers and what should be provided as arguments.."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 3, "creation_date": 1534964249, "post_id": 51973431, "comment_id": 90897292, "body": "<code>scanf(&quot;%s&quot;, userNum);</code> --&gt; <code>scanf(&quot;%d&quot;, &amp;userNum);</code>"}, {"owner": {"reputation": 59, "user_id": 9330500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e510300989fa63e228b98858e147c528?s=128&d=identicon&r=PG&f=1", "display_name": "David B.", "link": "https://stackoverflow.com/users/9330500/david-b"}, "edited": false, "score": 0, "creation_date": 1534964393, "post_id": 51973431, "comment_id": 90897361, "body": "Solved, thank you!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1534967268, "post_id": 51973431, "comment_id": 90898644, "body": "Also note New C Programmers who fail to check the <b>return</b> of <code>scanf</code> are lined up and systematically <i>shot at sunrise...</i> You have three conditions to <b>validate</b> (1) <code>EOF</code> returned, (2) less than the number of conversions -- indicating a <i>matching</i> or <i>input</i> failure, or (3) equal to the number of conversion indicating all valid conversions took place. Start now, protect against all three every time, account for any characters that remain in the input buffer -- and you can correctly use <code>scanf</code>."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1534965306, "creation_date": 1534965306, "answer_id": 51973673, "question_id": 51973431, "link": "https://stackoverflow.com/questions/51973431/a-user-types-a-word-and-a-number-on-a-single-line-read-them-into-the-provided-v/51973673#51973673", "title": "A user types a word and a number on a single line. Read them into the provided variables. Then print", "body": "<p>You used format <code>%s</code> for reading in an integral value; it should have been <code>%d</code>.\nOnce having fixed this (i.e. by writing <code>scanf(\"%d\", &amp;userNum);</code>, note that your code will read in a string and a number even if the string and the number were not in the same line (cf., for example, <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">cppreferene/scanf</a> concerning format <code>%s</code> and treatment of white spaces). Further, you will run into undefined behaviour if a user enters a string with more than 19 characters (without any white space in between), because you then exceed your <code>userWord</code>-array.</p>\n\n<p>To overcome both, you could read in a line with <code>fgets</code>, then use <code>sscanf</code> to parse the line. Note that you can parse the line in one command; the result of <code>scanf</code> is then the number of successfully read items. Further, note the <code>%19s</code>, which limits the input to 19 characters (+ the final string termination character <code>'\\0'</code>):</p>\n\n<pre><code>int main() {\n    char line[100];\n    if (fgets(line,100,stdin)) {\n        char userWord[20];\n        int userNum;\n\n        if (sscanf(line, \"%19s %d\", userWord, &amp;userNum) != 2) {\n            printf(\"invalid input.\\n\");\n        } else {\n            printf(\"word:'%s'; number: %d\", userWord, userNum);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 576, "user_id": 4411923, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e7fab96c4ec90ad679d7139c128a777?s=128&d=identicon&r=PG&f=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/4411923/parzival"}, "is_accepted": true, "score": 1, "last_activity_date": 1534979525, "creation_date": 1534979525, "answer_id": 51976358, "question_id": 51973431, "link": "https://stackoverflow.com/questions/51973431/a-user-types-a-word-and-a-number-on-a-single-line-read-them-into-the-provided-v/51976358#51976358", "title": "A user types a word and a number on a single line. Read them into the provided variables. Then print", "body": "<p>Change </p>\n\n<pre><code>scanf(\"%s\", userNum);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>scanf(\"%d\", &amp;userNum);\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9330500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e510300989fa63e228b98858e147c528?s=128&d=identicon&r=PG&f=1", "display_name": "David B.", "link": "https://stackoverflow.com/users/9330500/david-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 51976358, "answer_count": 2, "score": 1, "last_activity_date": 1534979525, "creation_date": 1534964138, "question_id": 51973431, "link": "https://stackoverflow.com/questions/51973431/a-user-types-a-word-and-a-number-on-a-single-line-read-them-into-the-provided-v", "title": "A user types a word and a number on a single line. Read them into the provided variables. Then print", "body": "<p>It takes in a word and a number, I can't seem to understand why the number variable won't receive the input, help please. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n\n   char userWord[20];\n\n   int userNum;\n\n   scanf(\"%s\", userWord);\n\n   printf(\"%s_\", userWord);\n\n   scanf(\"%s\", userNum);\n\n   printf(\"%d\\n\", userNum);\n\n\n   return 0;\n}\n</code></pre>\n\n<p>Should be:</p>\n\n<p>Input: Stop 7</p>\n\n<p>Output: Stop_7</p>\n\n<p>What I get:</p>\n\n<p>Input: Stop 7</p>\n\n<p>Output: Stop_0</p>\n"}, {"tags": ["mysql", "c"], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 0, "last_activity_date": 1534965692, "last_edit_date": 1534965692, "creation_date": 1534965121, "answer_id": 51973635, "question_id": 51973389, "link": "https://stackoverflow.com/questions/51973389/convert-timestamp-to-mysql-time/51973635#51973635", "title": "Convert timestamp to MYSQL_TIME", "body": "<p>My approach would be using <code>localtime()</code> which takes timer values in seconds and fills the <code>tm</code> structure. Use <code>tm</code> structure to fill <code>MYSQL_TIME</code>  structure.</p>\n\n<p>definition of <code>tm</code> structure is </p>\n\n<pre><code>struct tm {\n   int tm_sec;         /* seconds,  range 0 to 59          */\n   int tm_min;         /* minutes, range 0 to 59           */\n   int tm_hour;        /* hours, range 0 to 23             */\n   int tm_mday;        /* day of the month, range 1 to 31  */\n   int tm_mon;         /* month, range 0 to 11             */\n   int tm_year;        /* The number of years since 1900   */\n   int tm_wday;        /* day of the week, range 0 to 6    */\n   int tm_yday;        /* day in the year, range 0 to 365  */\n   int tm_isdst;       /* daylight saving time             */   \n};\n</code></pre>\n\n<p>And your <code>convert_to_MYSQL_TIME</code> function will look like below.</p>\n\n<pre><code> MYSQL_TIME  convert_to_MYSQL_TIME(time_t t)\n    {\n       struct tm * timeinfo;\n       MYSQL_TIME sqlTime;\n\n       timeinfo = localtime (&amp;t);\n       sqlTime.year = timeinfo.tm_year;\n       sqlTime.month = timeinfo.tm_mon;\n       sqlTime.day = timeinfo.tm_mday;\n       sqlTime.hour = timeinfo.tm_hour;\n       sqlTime.minute = timeinfo.tm_min;\n       sqlTime.second = timeinfo.tm_sec;\n\n      return sqlTime;\n    }\n</code></pre>\n"}], "owner": {"reputation": 1119, "user_id": 2334592, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/93b11fd2f8c163fa1137cb2182b07ce2?s=128&d=identicon&r=PG&f=1", "display_name": "Boy", "link": "https://stackoverflow.com/users/2334592/boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534965692, "creation_date": 1534963901, "last_edit_date": 1534964208, "question_id": 51973389, "link": "https://stackoverflow.com/questions/51973389/convert-timestamp-to-mysql-time", "title": "Convert timestamp to MYSQL_TIME", "body": "<p>I want to insert unix timestamp into MySQL using C library.</p>\n\n<p>According to MySQL <a href=\"https://dev.mysql.com/doc/refman/8.0/en/c-api-prepared-statement-date-handling.html\" rel=\"nofollow noreferrer\">doc</a>, I should use MYSQL_TIME struct, like so:</p>\n\n<pre><code>MYSQL_TIME  ts;\n\nts.year= 2002;\nts.month= 02;\nts.day= 03;\n\nts.hour= 10;\nts.minute= 45;\nts.second= 20;\n</code></pre>\n\n<p>What is the correct way to convert integer value that holds timestamp into this struct?</p>\n\n<p>Is there any solution other than pure parsing of the number?</p>\n\n<p>This is my goal:</p>\n\n<pre><code>std::time_t t = 1534963754;\nMYSQL_TIME mysql_time = convert_to_MYSQL_TIME(t);\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1534961836, "post_id": 51972863, "comment_id": 90896217, "body": "If you need 10 arrays, you need to define 10 arrays. Or an array of 10 arrays."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534961855, "post_id": 51972863, "comment_id": 90896228, "body": "You now about arrays. They provide int0, int1, int2, ... Now compare that to your question. What you want is an array of arrays, or a 2D array, isn&#39;t it?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1534962028, "post_id": 51972863, "comment_id": 90896302, "body": "How are you intending to use said arrays?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1534962033, "post_id": 51972863, "comment_id": 90896305, "body": "You <i>do</i> get a new, different array in each iteration of that loop, as far as C is concerned.  And the lifetime of each one ends at the end of its iteration.  If you want arrays with longer lifetime then they need to have broader scope or allocated duration."}], "answers": [{"comments": [{"owner": {"reputation": 250, "user_id": 10118785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EBK6yjyiX5Y/AAAAAAAAAAI/AAAAAAAAAE8/GSDei6J9J18/photo.jpg?sz=128", "display_name": "Leon Trotsky", "link": "https://stackoverflow.com/users/10118785/leon-trotsky"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534962512, "post_id": 51972978, "comment_id": 90896513, "body": "Yeah, i meant without the &quot;int&quot;. Making array global."}], "tags": [], "owner": {"reputation": 250, "user_id": 10118785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EBK6yjyiX5Y/AAAAAAAAAAI/AAAAAAAAAE8/GSDei6J9J18/photo.jpg?sz=128", "display_name": "Leon Trotsky", "link": "https://stackoverflow.com/users/10118785/leon-trotsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1534962465, "last_edit_date": 1534962465, "creation_date": 1534962148, "answer_id": 51972978, "question_id": 51972863, "link": "https://stackoverflow.com/questions/51972863/can-a-loop-create-a-new-different-array-each-time-it-runs/51972978#51972978", "title": "Can a loop create a new, different array each time it runs?", "body": "<pre><code>arrayi[5]\n</code></pre>\n\n<p>What you probably want is this array[i][j].\nIf i understood your question correctly you would need something like this:</p>\n\n<pre><code>  for(int i = 0; i &lt; 10; i++)\n  for(int j = 0; j &lt; 10; j++)\n   {\n     array[i][j] = /*use some random function like rand()*/;\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1534963146, "post_id": 51973030, "comment_id": 90896780, "body": "I&#39;m not sure what definition of huge you&#39;re using, but 10x5 <code>int</code> array is not huge."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1534964257, "post_id": 51973030, "comment_id": 90897297, "body": "Array size in MBs"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1534966467, "post_id": 51973030, "comment_id": 90898288, "body": "The original question makes no mention of megabytes. It&#39;s literally 10 arrays of 5 <code>int</code> elements. That&#39;s 400 bytes. Not megabytes."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -1, "last_activity_date": 1534962391, "creation_date": 1534962391, "answer_id": 51973030, "question_id": 51972863, "link": "https://stackoverflow.com/questions/51972863/can-a-loop-create-a-new-different-array-each-time-it-runs/51973030#51973030", "title": "Can a loop create a new, different array each time it runs?", "body": "<p>If the array is huge you may consider use of the <code>malloc</code> family functions.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1534963016, "post_id": 51973032, "comment_id": 90896725, "body": "The &quot;make a bunch of array variables&quot; approach is not programming, it&#39;s against the <a href=\"https://en.wikipedia.org/wiki/Zero_one_infinity_rule\" rel=\"nofollow noreferrer\">Zero, One or Infinity Rule</a> and just makes a gigantic mess of things. The 2D array approach is the answer."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1534963327, "post_id": 51973032, "comment_id": 90896859, "body": "@tadman I have made it more clear, but the point was that they are for different purposes, not similar variables that could be in an array. If they are for unrelated purposes and they are limited and the amount of them is not decided at run time then this approach is ok."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1534963438, "post_id": 51973032, "comment_id": 90896906, "body": "If they&#39;re for entirely different purposes, then <i>perhaps</i>. Usually a mess of variables like that is a good way to dig a very deep hole for yourself. What this code probably needs is a generator function that can allocate, populate, and return a pointer to an array of some arbitrary size. These static-length arrays are going to be trouble to pass around."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1534963572, "post_id": 51973032, "comment_id": 90896971, "body": "@tadman I guess the example i am thinking of is the kinematics of a robot. In a six axis robot kinematic calculation you may have a series of arrays that store different data and are of different length. In an inverse kinematic function for a 6 axis robot you would see this type of arrays. This might be the same in other fields like karmen filters etc. It is rare, which is why i bolded <b>rarely</b>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1534963645, "post_id": 51973032, "comment_id": 90897003, "body": "I get what you&#39;re saying, but it also means that point #2 is the important one and point #1 is basically a &quot;you&#39;ll probably never need this code&quot;, so I&#39;m questioning why #1 is given prominence. State the best practice first, the edge cases second, that&#39;s all."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1534963748, "post_id": 51973032, "comment_id": 90897050, "body": "@tadman You are right. I swapped them and made the rareity point more prominant."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 5, "last_activity_date": 1534963722, "last_edit_date": 1534963722, "creation_date": 1534962438, "answer_id": 51973032, "question_id": 51972863, "link": "https://stackoverflow.com/questions/51972863/can-a-loop-create-a-new-different-array-each-time-it-runs/51973032#51973032", "title": "Can a loop create a new, different array each time it runs?", "body": "<p>This depends on what exactly you want to do. In your example, you will create 10 individual and seperate arrays, but maybe their use is not so helpful because:</p>\n\n<pre><code>for(int i = 0; i &lt; 10; i++)\n{\n  int arrayi[5] = {0};  // The array is created here.\n} // The array goes out of scope and is destroyed here. It can't be used in the next\n  // iteration of the for loop.\n// You can't use any of the arrays created here.\n</code></pre>\n\n<p>Maybe this is what you want, if you want to use the array in the for loop for example.</p>\n\n<p>Maybe you want the array to stick around so you can use it after. Then you have 2 choices:</p>\n\n<ol>\n<li>Make a 2d array:</li>\n</ol>\n\n<hr>\n\n<pre><code>int arr[10][5]; // Use by indexing eg arr[4][1] is the second \n                // element of the fifth array.\n// or\nint arr[50]; // A flat packed array, usually accessed via \n             // index: row*rowlength + colomn \n</code></pre>\n\n<ol start=\"2\">\n<li>Define each of the arrays as a seperate named object (<strong>very rare</strong> that this is required):</li>\n</ol>\n\n<hr>\n\n<pre><code>int arrForUse[5];\nint arrForDifferentUse[7];\n...\nint arrXXX[15];\n</code></pre>\n\n<p>If the arrays are truely used for different things and are not related at all this is what you will do. They will not be named <code>arr1</code>, <code>arr2</code>, ... though.</p>\n"}, {"tags": [], "owner": {"reputation": 12315, "user_id": 658031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/711e76c263d03660772b5a5198d33671?s=128&d=identicon&r=PG", "display_name": "Saeid Yazdani", "link": "https://stackoverflow.com/users/658031/saeid-yazdani"}, "is_accepted": false, "score": 0, "last_activity_date": 1534962805, "creation_date": 1534962805, "answer_id": 51973128, "question_id": 51972863, "link": "https://stackoverflow.com/questions/51972863/can-a-loop-create-a-new-different-array-each-time-it-runs/51973128#51973128", "title": "Can a loop create a new, different array each time it runs?", "body": "<p>You can not literraly replace a character in a variable name using a loop. E.g. the <code>i</code> in <code>arrayi</code> can not be replaced by a loop or anything else!</p>\n\n<p>What you need to do is to either:</p>\n\n<ul>\n<li>Declare arrays before, and fill them with a loop</li>\n<li>Declare a single 2D array and then in loops <code>malloc</code> and fill each position with pointer to those <code>malloced</code> arrays.</li>\n</ul>\n"}], "owner": {"reputation": 1244, "user_id": 10002294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARNs5.jpg?s=128&g=1", "display_name": "Uclydde", "link": "https://stackoverflow.com/users/10002294/uclydde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 0, "accepted_answer_id": 51973032, "answer_count": 4, "score": 1, "last_activity_date": 1534963722, "creation_date": 1534961728, "question_id": 51972863, "link": "https://stackoverflow.com/questions/51972863/can-a-loop-create-a-new-different-array-each-time-it-runs", "title": "Can a loop create a new, different array each time it runs?", "body": "<p>I want to create a loop in C that will generate a new, different array each time it runs. Can this be done? And if so, how?</p>\n\n<p>Something along the lines of:</p>\n\n<pre><code>int main()\n{\n   for(int i = 0; i &lt; 10; i++)\n   {\n     int arrayi[5] = {0};\n   }\n   return 0;\n}\n</code></pre>\n\n<p>The intended behavior is to then have 10 arrays, called array1, array2, array3, array4, array5, array6, array7, array8, array9, array10; each holding 5 elements, and each element being 0.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1534960790, "post_id": 51972556, "comment_id": 90895762, "body": "Fyi, you could change the type of <code>q</code> to <code>void *</code> and have the same output, and likely questions. All those casts are important, relevant to the output you&#39;re seeing, and basically disregarding the pointer-type of <code>q</code> and thus making it irrelevant. You should learn more about what casting does (then avoid using them, as they generally mean you&#39;re doing something questionable, especially for beginners)."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1534961709, "creation_date": 1534961709, "answer_id": 51972858, "question_id": 51972556, "link": "https://stackoverflow.com/questions/51972556/c-language-struct-accessing-elements/51972858#51972858", "title": "C language struct accessing elements", "body": "<blockquote>\n  <p>How is <code>*q</code> accessing the elements of <code>p</code>?</p>\n</blockquote>\n\n<p>It does so through a <code>char</code> pointer, using a rule that the address of the <code>struct</code> must match the address of its initial element (i.e. field <code>p.x</code>). However, the standard allows the compiler to insert padding after <code>x</code>, so adding <code>1</code> to <code>((char*)q)</code> may not necessarily yield the address of <code>y</code>.</p>\n\n<p>You can fix your program as follows:</p>\n\n<pre><code>printf(\n    \"%c, %c\"\n,   *((char *)q + offsetof(struct Ournode, y))\n,   *((char *)q + offsetof(struct Ournode, z))\n);\n</code></pre>\n\n<p>Since <code>((char*)q)</code> points to part of <code>int</code> field <code>a</code>, printing <code>%c</code> from these addresses yields implementation-defined re-interpretations of parts of <code>int</code>'s representation as <code>char</code>. As far as printing <code>int</code>s is concerned, you should add the same <code>offsetof</code> trick to counter the results of potential padding.</p>\n\n<p><strong>Note:</strong> I am yet to see a compiler that inserts padding between <code>char</code>s, but I didn't find anything in the standard preventing it from doing so. The situation would be different if instead of <code>char x, y, z</code> you used <code>char x[3]</code>, because padding between array members is not allowed.</p>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1535000840, "creation_date": 1535000840, "answer_id": 51978674, "question_id": 51972556, "link": "https://stackoverflow.com/questions/51972556/c-language-struct-accessing-elements/51978674#51978674", "title": "C language struct accessing elements", "body": "<blockquote>\n  <p>how is q accessing the elements? </p>\n</blockquote>\n\n<p>This has been already answered, so I want to answer this other question of yours.</p>\n\n<blockquote>\n  <p>In this case how can we access the elements? I get garbage output sometimes depending upon the order in which i create Ournode (i.e. a,b,c first then x,y,z or x,y,z first then a,b,c).</p>\n</blockquote>\n\n<p>If you want to access the members of <code>struct Ournode</code> through a pointer <code>q</code> to that node, there is an operator <code>-&gt;</code> that makes this possible.\nYour code will now look like this.</p>\n\n<pre><code>int main() {\n  struct Ournode p = {3,4,5,'1', '0', 'a' + 2,6};\n  struct Ournode *q = &amp;p;\n  printf(\"%d, %d, %d, %c, %c, %c, %d\", , q-&gt;a, q-&gt;b, q-&gt;c, q-&gt;x, q-&gt;y, q-&gt;z, q-&gt;d );\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10237512, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hiELQMOWnlc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oc_EqlwO9q9x2E7SJpSCoWx0qILw/mo/photo.jpg?sz=128", "display_name": "AMAN GUPTA", "link": "https://stackoverflow.com/users/10237512/aman-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 51972858, "answer_count": 2, "score": 2, "last_activity_date": 1535000840, "creation_date": 1534960317, "last_edit_date": 1534960819, "question_id": 51972556, "link": "https://stackoverflow.com/questions/51972556/c-language-struct-accessing-elements", "title": "C language struct accessing elements", "body": "<pre><code>#include &lt;stdio.h&gt;\nstruct Ournode {\n  char x, y, z;\n};\n\nint main() {\n  struct Ournode p = {'1', '0', 'a' + 2};\n  struct Ournode *q = &amp;p;\n  printf(\"%c, %c\", *((char *)q + 1), *((char *)q + 2));\n  return 0;\n}\n</code></pre>\n\n<p>I came across this question on geeksforgeeks(<a href=\"https://www.geeksforgeeks.org/c-language-2-gq/input-and-output-gq/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/c-language-2-gq/input-and-output-gq/</a>)  (question 21). How is *q accessing the elements of p? what if we had struct like </p>\n\n<pre><code>struct Ournode {\n  int a,b,c;\n  char x, y, z;\n  int d;\n};\nint main() {\n  struct Ournode p = {3,4,5,'1', '0', 'a' + 2,6};\n  struct Ournode *q = &amp;p;\n  printf(\"%c, %c\", *((char *)q + 1), *((char *)q + 2));\n  printf(\"%d, %d\\n\", *((int *)q + 1), *((int *)q +2 ));\n  return 0;\n}\n</code></pre>\n\n<p>In this case how can we access the elements?I get garbage output sometimes depending upon the order in which i create Ournode (i.e. a,b,c first then x,y,z or x,y,z first then a,b,c).</p>\n\n<p>what is happening behind the scenes here? how is q accessing the elements?   </p>\n"}, {"tags": ["c", "scanf", "integer-overflow", "twos-complement"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1534959246, "post_id": 51972234, "comment_id": 90895042, "body": "Use <code>%u</code> to read an unsigned int."}, {"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1534959470, "post_id": 51972234, "comment_id": 90895135, "body": "@wildplasser I am aware of that. But it&#39;s not my question ! My question pertains to why <code>sscanf</code> handles <i>signed maximal integer value</i> by casting away its MSB, while an assignment simply converts it with two&#39;s complement ?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 4, "creation_date": 1534959567, "post_id": 51972234, "comment_id": 90895186, "body": "The assignment is done by the compiler; the scanning is done by a library routine. They may use different algorithms to derive the value from the ascii characters. As wildplasser says, use %u to read unsigned; otherwise the result is not defined."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1534959804, "post_id": 51972234, "comment_id": 90895288, "body": "...for example, the compiler itself is 64 bits and truncates the value but the run-time library routine is 32 bits and overflows."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1534960766, "post_id": 51972234, "comment_id": 90895752, "body": "Note: the argument to sscanf() is <i>only</i> a pointer. You could hand it a pointer to a float and still complain that the observed behaviour is not what you expect."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1534969614, "post_id": 51972234, "comment_id": 90899669, "body": "&quot;... to why sscanf handles signed maximal integer value by casting away its MSB&quot;.  This is not what happened.  Try <code>char input[] = &quot;4294967290&quot;;</code>  (last digit 0 not 5).  I suspect the result will still be <code>2147483647</code>.  Review <code>strtol()</code> for insight."}], "answers": [{"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1534971496, "post_id": 51972463, "comment_id": 90900491, "body": "In OP&#39;s sample code, the format specifier does match the type of the variable being written; it&#39;s the value that&#39;s out of range (which is still UB, but under a different rule)."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1534959916, "creation_date": 1534959916, "answer_id": 51972463, "question_id": 51972234, "link": "https://stackoverflow.com/questions/51972234/sscanf-handles-maximal-unsigned-integer-value-differently-than-assignment-does/51972463#51972463", "title": "sscanf handles maximal unsigned integer value differently than assignment does", "body": "<p>Using the wrong format specifier for <code>scanf</code> invokes <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">undefined behavior</a>, so the result doesn't have to make sense.</p>\n\n<p>For example, running the same code on my machine gives the following results:</p>\n\n<pre><code>scanned 1 elements : -1\nAssigned j = -1\n</code></pre>\n\n<p>So use <code>%u</code> instead of <code>%d</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 0, "creation_date": 1534960127, "post_id": 51972470, "comment_id": 90895454, "body": "This is amazing. I didn&#39;t expect such a plethora of pertinent informations gathered in a single one answer !!"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 0, "creation_date": 1534960268, "post_id": 51972470, "comment_id": 90895514, "body": "@programmersn I pretty much have this particular rant memorized.  It comes up a lot, here and elsewhere."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1534971368, "post_id": 51972470, "comment_id": 90900449, "body": "@chux Thanks, I always forget that decimal literals don&#39;t follow the same type determination rules as hex literals.  Please see what you think of the revised text."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1534975324, "post_id": 51972470, "comment_id": 90901945, "body": "Good - UV.  Curious this answer discusses the ID behavior of assignment (which can include a &quot;signal is raised&quot;) as discounted as a large concern and -1 is expected yet the UB of <code>scanf()</code> is painted bad quite broadly when it is certain code simply acted like <code>strtol()</code> would and assigned <code>INT_MAX</code>. IMO, The IDB vs UB is only marginal better and your advice to use <code>strto*()</code> is the best approach."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1535031665, "post_id": 51972470, "comment_id": 90923899, "body": "@chux It&#39;s a fair point. The reason I deprecate <code>scanf</code> a lot more than the i-d integer conversion overflow behavior is I know a lot more about what can be expected from the i-d integer conversion overflow on real implementations than what can be expected from <code>scanf</code> on real implementations.  Yes, OP&#39;s implementation seems to have called <code>strtol</code>, but I don&#39;t personally know that that can be relied on cross-platform.  Also I get really nervous nowadays about compilers drawing optimization inferences from UB, even inside library functions."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1535035504, "post_id": 51972470, "comment_id": 90926494, "body": "True  &quot;nervous nowadays about compilers drawing optimization inferences from UB&quot; is a real concern.  With IDB, at least the compiler maker needs to state the behavior, and that begets a history for them making future changes less capricious."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 3, "last_activity_date": 1534971545, "last_edit_date": 1534971545, "creation_date": 1534959958, "answer_id": 51972470, "question_id": 51972234, "link": "https://stackoverflow.com/questions/51972234/sscanf-handles-maximal-unsigned-integer-value-differently-than-assignment-does/51972470#51972470", "title": "sscanf handles maximal unsigned integer value differently than assignment does", "body": "<p>Converting an integer value to <code>int</code> by cast or assignment, when the value is not representable by <code>int</code> but is representable by some supported type with a larger range, produces an implementation-defined value in the <code>int</code> (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.3\" rel=\"nofollow noreferrer\">C11 \u00a76.3.1.3</a>).  Almost all implementations nowadays define this conversion such that <code>int x = UINT_MAX;</code> sets x to &minus;1.  The only exception I am aware of is Unisys (n\u00e9e Burroughs) mainframes, which still use ones-complement representation for negative numbers.</p>\n\n<p>By contrast, all of the <code>scanf</code> functions have <em>undefined</em> behavior upon reading a number which is outside of the representable range for the type of the variable the number will be written to (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.2p10\" rel=\"nofollow noreferrer\">C11 \u00a77.21.6.2p10</a>).  That means, not only can you <em>not</em> count on it to do the same thing that integer conversion does, you can't count on it to do anything constructive at all, and the compiler would in fact be entitled to generate machine code that makes demons fly out of your nose.</p>\n\n<p>It is my considered opinion that 7.21.6.2p10 is a defect in the standard, but since I consider the <code>scanf</code> family unfit for purpose <em>anyway</em> (this is only one of many problems with them), I can't be bothered to file a DR.  Use the <code>strto*</code> functions instead.  They have well-defined and documented overflow behavior.</p>\n"}], "owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 51972470, "answer_count": 2, "score": 1, "last_activity_date": 1534971545, "creation_date": 1534958953, "question_id": 51972234, "link": "https://stackoverflow.com/questions/51972234/sscanf-handles-maximal-unsigned-integer-value-differently-than-assignment-does", "title": "sscanf handles maximal unsigned integer value differently than assignment does", "body": "<p>Consider the following code :</p>\n\n<pre><code>main()\n{\n  int assigned = 4294967295;     // Max unsigned integer value on 32-bits arch\n\n  char input[] = \"4294967295\";\n  int sscanned;\n\n\n  unsigned int result = sscanf(input, \"%d\", &amp;sscanned);\n  printf (\"scanned %u elements : %d\\n\n          \"Assigned j = %d\\n\", \n          result, sscanned, assigned);\n\n  return 0;\n}\n</code></pre>\n\n<p>When compiled for 32-bits arch (with compilation command: <code>gcc -Wall -Wextra -std=c11 -pedantic -m32 test_sscanf.c -o test_sscanf32</code>), it spits out an expectable warning about \"<em>overflow in conversion from \u2018long long int\u2019 to \u2018int\u2019 changes value from \u20184294967295\u2019 to \u2018-1\u2019 [-Woverflow]</em>\".  </p>\n\n<p>Now seeing the result :</p>\n\n<pre><code>&gt; ./test_sscanf32 \nscanned 1 elements : 2147483647\nAssigned j = -1\n</code></pre>\n\n<p>While the <code>assigned</code> value has rightfully been converted into the maximal negative signed integer value, through two's complement representation (-1 = <strong><em>-2^31 + 2^30 + ... + 2^0</em></strong>), the <code>scanned</code> value on the other hand has apparently got its MSB dismissed which caused it to shrink to the value 2147483647 = <strong><em>2^31 - 1</em></strong>.  </p>\n\n<p>So my question is : what does justify such a difference in the treatment of the <em>maximum n-bits integer value</em> on an <em>n-bits machine</em> (knowing that on a 64-bits arch, the same behavior occurs) ?<br>\nIs a programmer not rightfully entitled to expect that <code>sscanf</code> would treat the value the same way an assignment does, on a given architecture ? </p>\n"}, {"tags": ["c", "mingw"], "comments": [{"owner": {"reputation": 441, "user_id": 5325067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0de99c01c9c50323415b1498fb0e2ae?s=128&d=identicon&r=PG&f=1", "display_name": "ad3angel1s", "link": "https://stackoverflow.com/users/5325067/ad3angel1s"}, "edited": false, "score": 0, "creation_date": 1534962534, "post_id": 51972231, "comment_id": 90896523, "body": "this question should help you: <a href=\"https://stackoverflow.com/questions/19690504/how-do-i-compile-and-link-a-32-bit-windows-executable-using-mingw-w64\" title=\"how do i compile and link a 32 bit windows executable using mingw w64\">stackoverflow.com/questions/19690504/&hellip;</a>"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1535121565, "post_id": 51972231, "comment_id": 90963575, "body": "<i>MinGW</i> (32/64) contains a bunch of executables (e.g. <i>gcc</i> compiler). 32bit executables run on 32 and 64 bit platforms, while 64bit executables only run on 64bit platforms. the <i>gcc</i> compiler is able to produce both 32 and 64 bit executables, regardless of its architecture. By default it produce executables for the same architecture as itself. You can force the target architecture by specifying <code>-m32</code> or <code>-m64</code>. arguments. What <i>OS</i> are you on?"}], "owner": {"reputation": 11, "user_id": 7588555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/effa23920fc13aa257ab7baa07dca219?s=128&d=identicon&r=PG&f=1", "display_name": "John Berden", "link": "https://stackoverflow.com/users/7588555/john-berden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 535, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534958944, "creation_date": 1534958944, "question_id": 51972231, "link": "https://stackoverflow.com/questions/51972231/how-to-compile-in-mingw-on-x86-and-x64", "title": "How to compile in MinGW on X86 and X64?", "body": "<p>The following situation. As I understand it, 64-bit MinGW will only compile on X64. Then there is a 32-bit compiler on both systems. Can you please tell me how to compile separately for each platform X86 and X64, what compilers, and how to compile one application right away for 2 platforms?</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 714, "user_id": 10052693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edf3364de11eaf98d38723a3f9a7bca7?s=128&d=identicon&r=PG", "display_name": "Koen", "link": "https://stackoverflow.com/users/10052693/koen"}, "edited": false, "score": 1, "creation_date": 1534959245, "post_id": 51972222, "comment_id": 90895041, "body": "The bot variable in the main never changes.  It starts as an uninitialized pointer and it has the same value after the call to initBot.  If you want the value to be accessible after the call to initBot, you should pass the address of bot in the main by doing: initBot(&amp;bot) and have the declaration be initBot(BotPtr_t *bot) - including using *bot everywhere you are using bot now (in the initBot function)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1534959791, "post_id": 51972222, "comment_id": 90895279, "body": "or dont pass a pointer in and just return a bot pointer from the init function"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 10261108, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c9c9c02c05c8913372c1cddea9d09a55?s=128&d=identicon&r=PG", "display_name": "PMar", "link": "https://stackoverflow.com/users/10261108/pmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1534960077, "last_edit_date": 1534960077, "creation_date": 1534959474, "answer_id": 51972358, "question_id": 51972222, "link": "https://stackoverflow.com/questions/51972222/initializing-adt-in-c/51972358#51972358", "title": "initializing ADT in C", "body": "<p>You appear to be trying to return a pointer to your <code>BotStruct_t</code> via the init argument.  The problem is, in C all arguments are passed by -value-, so the pointer <code>bot</code> in the <code>initBot()</code> routine is local to that routine.</p>\n\n<p>What you need to do is pass A POINTER TO a pointer to your <code>BotStruct_t</code>, so you can assign to the caller's version of the pointer via the pointer-to-pointer.  I.e change <code>BotPtr_t bot</code> to <code>BotPtr_t * pbot</code>, assign <code>*pbot = malloc(...)</code>, etc.</p>\n"}], "owner": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 51972358, "answer_count": 1, "score": 0, "last_activity_date": 1534960077, "creation_date": 1534958915, "question_id": 51972222, "link": "https://stackoverflow.com/questions/51972222/initializing-adt-in-c", "title": "initializing ADT in C", "body": "<p>I've got the following ADT definition in my .h</p>\n\n<pre><code>struct BotStruct_t {\n    int n_bots;\n    char** nombre;\n    char** caracter;\n    int* fichas;\n    int* carta_maxima;\n};\n\ntypedef struct BotStruct_t * BotPtr_t;\n\nint initBot(BotPtr_t bot);\n</code></pre>\n\n<p>And in the .c</p>\n\n<pre><code>int initBot(BotPtr_t bot) {\n    bot = malloc(sizeof(struct BotStruct_t));\n    if (bot == NULL) return 1;\n\n    FILE* fp = fopen(\"/home/norhther/CLionProjects/blackjack/bot.txt\",\"r\");\n\n    if (fp == NULL) {\n        printf(\"El archivo de los bots no existe\\n\");\n        fclose(fp);\n        return 1;\n    }\n    else {\n        char* line = NULL;\n        size_t len = 0;\n        getline(&amp;line, &amp;len, fp);\n        int n_bots = atoi(line);\n        bot-&gt;n_bots = n_bots;\n        char** nombres_bots = malloc( sizeof(char*) * n_bots);\n        char** caracter = malloc( sizeof(char*) * n_bots);\n        int* fichas = malloc (sizeof (int) * n_bots);\n        int* carta_maxima = malloc (sizeof (int) * n_bots);\n\n        if (nombres_bots == NULL || caracter == NULL || fichas == NULL || carta_maxima == NULL) return 1;\n        int i;\n        for (i = 0; i &lt; n_bots; i++) {\n            getline(&amp;line, &amp;len, fp);\n            nombres_bots[i] = strdup(line);\n            getline(&amp;line, &amp;len, fp);\n            fichas[i] = atoi(line);\n            getline(&amp;line, &amp;len, fp);\n            caracter[i] = strdup(line);\n            getline(&amp;line, &amp;len, fp);\n            carta_maxima[i] = atoi(line);\n        }\n        bot-&gt;nombre = nombres_bots;\n        bot-&gt;caracter = caracter;\n        bot-&gt;fichas = fichas;\n        bot-&gt;carta_maxima = carta_maxima;\n    }\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>Finally my main</p>\n\n<pre><code>int main() {\n    BotPtr_t bot;\n    initBot(bot);\n}\n</code></pre>\n\n<p>The problem here is that when I try to access to any element of bot, for instance, bot->carta_maxima[0] I get a SIGSEGV. If I try to do the same in the .c, inside the init function, it works. I really don't get it, because I'm working with the pointer and also doing the apporpiate malloc.\nAny clues here?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "function", "matrix"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 2, "creation_date": 1534957518, "post_id": 51971858, "comment_id": 90894255, "body": "<code>findSumEachRowAndTotalSum(a,c,r);</code> You never declared <code>a</code>, <code>c</code> and <code>r</code> in main. Maybe you meant <code>findSumEachRowAndTotalSum(m,col,row);</code>? Beside that if you declare a two dimensional array as function parameter you have to define second dimension."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534958354, "post_id": 51971858, "comment_id": 90894633, "body": "The compiler is also correct about the return type from main. It should be <code>int main(void)</code>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1534963529, "post_id": 51971858, "comment_id": 90896952, "body": "Please note that in C, multidimentional array are stored row-wise. E.g. <code>int m[3][2] = {{1,2}, {3,4}, {4,5}};</code> the first row is <code>{1,2}</code>. You may ignore this in your program, but you should do it consistently, while in your code you are apparently trying to pass the number of cols as <code>c</code> in your function and using it as the number of rows, which is confusing."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1534963773, "post_id": 51971858, "comment_id": 90897060, "body": "Also, you could update the value of <code>totalSum</code> outside the inner loop using the value of <code>rowSum</code>. Consider splitting the posted function into smaller functions."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1535001310, "post_id": 51971858, "comment_id": 90907095, "body": "You might be interested in <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array member</a>s like in <a href=\"https://stackoverflow.com/a/41410503/841108\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1534958424, "post_id": 51971928, "comment_id": 90894669, "body": "I think the question here is a bit unclear. My understanding was that the maximum dimensions are 50x50 and <code>col</code> and <code>row</code> defines the used subset, otherwise there would be no need for <code>col</code> and <code>row</code> at all."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1534957839, "last_edit_date": 1534957839, "creation_date": 1534957680, "answer_id": 51971928, "question_id": 51971858, "link": "https://stackoverflow.com/questions/51971858/how-to-turn-this-c-program-into-a-function-which-calculates-the-sum-of-each-row/51971928#51971928", "title": "How to turn this C program into a function which calculates the sum of each row and their total sums?", "body": "<p>The error is due to the definition of the parameter <code>a</code> to the function <code>findSumEachRowAndTotalSum</code>:</p>\n\n<pre><code>void findSumEachRowAndTotalSum(int a[][], int c, int r){\n</code></pre>\n\n<p>When an array of more than one dimension is a parameter to a function, only the first dimension is allowed to be left blank.  All others must be specified. </p>\n\n<p>Since you seem to be using <code>c</code> and <code>r</code> as the dimensions, you need to give those parameters first and subsequently use them as the dimensions of the array:</p>\n\n<pre><code>void findSumEachRowAndTotalSum(int c, int r, int a[c][r]){\n</code></pre>\n\n<p>Then you would call the function like this:</p>\n\n<pre><code>findSumEachRowAndTotalSum(50, 50, m);\n</code></pre>\n\n<p>Regarding the warning, the <code>main</code> function must be defined to return type <code>int</code>, and you need to subsequently return a value:</p>\n\n<pre><code>int main(void){\n   ...\n   return 0;    \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2191, "user_id": 10232790, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ffWFm9uJgO4/AAAAAAAAAAI/AAAAAAAABjI/hXd8V3yjdoE/photo.jpg?sz=128", "display_name": "Harshith Rai", "link": "https://stackoverflow.com/users/10232790/harshith-rai"}, "is_accepted": false, "score": 0, "last_activity_date": 1535000961, "creation_date": 1535000961, "answer_id": 51978698, "question_id": 51971858, "link": "https://stackoverflow.com/questions/51971858/how-to-turn-this-c-program-into-a-function-which-calculates-the-sum-of-each-row/51978698#51978698", "title": "How to turn this C program into a function which calculates the sum of each row and their total sums?", "body": "<p>@Osiris, you must post your comment as an answer. You are right, @ArselDoe might have mistakenly overlooked what name was given to the array in <code>main()</code>. </p>\n\n<p>@ArselDoe, you have declared the array with the identifier as <code>m[][]</code>, but have passed <code>a</code> as the parameter to the function call. Changing this should fix the error. </p>\n"}], "owner": {"reputation": 21, "user_id": 10092719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7083b4ef07ea9c3bb3a569efba680c02?s=128&d=identicon&r=PG&f=1", "display_name": "Arsel Doe", "link": "https://stackoverflow.com/users/10092719/arsel-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 51971928, "answer_count": 2, "score": 0, "last_activity_date": 1535000961, "creation_date": 1534957368, "question_id": 51971858, "link": "https://stackoverflow.com/questions/51971858/how-to-turn-this-c-program-into-a-function-which-calculates-the-sum-of-each-row", "title": "How to turn this C program into a function which calculates the sum of each row and their total sums?", "body": "<p>My Solution:\nI am running this program in CodeBlocks. It is not working and it shows:</p>\n\n<pre><code>       //error: array type has incomplete elements type 'int[]'\n      //warning: return type of 'main' is not 'int'\n</code></pre>\n\n<p>I want to function which calculates the sum of each row and their total. This solution doesn't work because it shows an error in function declaration. </p>\n\n<pre><code>   //function declaration\n  void findSumEachRowAndTotalSum(int a[][], int c, int r){\n     int i, j, rowSum, totalSum;\n     //ask the user to give elements of rows\n     for(i=0; i&lt;c; i++){\n       printf(\"\\nGive elements of row %d:\\n\", i+1);\n        for(j=0; j&lt;r; j++)\n        scanf(\"%d\", &amp;a[i][j]);\n     }\n   totalSum = 0;\n   for(i=0; i&lt;c; i++){\n     rowSum = 0;\n     for(j=0; j&lt;r; j++){\n     //calculates the sum of each row and total sums\n      rowSum = rowSum + a[i][j];\n      totalSum = totalSum + a[i][j];\n   }\n   //displays sum of each row on the screen\n  printf(\"\\nSum of row %d is %d\", i+1, rowSum);\n }\n  //displays the total sum of all rows on the screen\nprintf(\"\\nTotal sum is %d\\n\", totalSum);\n}\n\n//main function\nvoid main(void){\n  int col, row, m[50][50], i, j;\n  //...\n  //function call\n  findSumEachRowAndTotalSum(a,c,r);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1534956726, "post_id": 51971660, "comment_id": 90893834, "body": "Try to remove the second occurrence of <code>typedef</code> and refer to some <a href=\"http://en.cppreference.com/w/c\" rel=\"nofollow noreferrer\">C reference</a> site. Enable all warnings &amp; debug info in your compiler (e.g. <code>gcc -Wall -Wextra -g</code>). Read  <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1534957201, "post_id": 51971660, "comment_id": 90894084, "body": "Use anonymous enums, or simple <code>#defines</code>. Get rid of the union and the cast."}], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 2, "last_activity_date": 1534958861, "creation_date": 1534958861, "answer_id": 51972205, "question_id": 51971660, "link": "https://stackoverflow.com/questions/51971660/c-extending-enum-with-union-of-enums/51972205#51972205", "title": "C, extending enum with union of enums", "body": "<p>As long as you don't need the enum to be a type, you can do this easily enough.</p>\n\n<pre><code>enum State{\n    STATE_PAUSED = 0,\n    STATE_RUN,\n    STATE_COUNTING,\n    STATE_PERIODIC,\n    STATE_MAX // must be last\n};\n\nenum GPS_State{\n    GPS_MCU_UART_DEFAULT = STATE_MAX,\n    GPS_FOO,\n    GPS_BAR\n};\n\nenum Other_State{\n    OS_CORGI = STATE_MAX,\n    OS_FOO,\n    OS_BAR\n};\n</code></pre>\n\n<p>This does mean that a variable that could store any of these states would need to be an <code>int</code>. I'm not sure that there <em>is</em> a way to do it while enforcing type safety.</p>\n"}, {"tags": [], "owner": {"reputation": 1173, "user_id": 1734108, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bd845e394662aedc5beeefe13c3ccfcd?s=128&d=identicon&r=PG", "display_name": "orfruit", "link": "https://stackoverflow.com/users/1734108/orfruit"}, "is_accepted": false, "score": 0, "last_activity_date": 1534959167, "creation_date": 1534959167, "answer_id": 51972282, "question_id": 51971660, "link": "https://stackoverflow.com/questions/51971660/c-extending-enum-with-union-of-enums/51972282#51972282", "title": "C, extending enum with union of enums", "body": "<p>Well... thanks for negative votes (someone shall review that more carefully).</p>\n\n<p>Seems that in C you just cannot extend enums.\nThanks to this post, I found a trick that works perfect for me\n<a href=\"https://stackoverflow.com/questions/11076941/warning-case-not-evaluated-in-enumerated-type\">Warning : case not evaluated in enumerated type?</a></p>\n\n<p>Cast switch to int, than cast old enum to new one so:\n- compiler will not complain about missing sw entry\n- compiler will not complain about unused xxx_t</p>\n\n<p>Here is my solution in case anyone needs to \"extend enums\" in C </p>\n\n<pre><code>   typedef enum {\n        GPS_MCU_UART_DEFAULT = 10,\n    }xxx_t;\n\n\n    switch((int)(xxx_t)(me-&gt;State))\n    {\n    case STATE_RUN:\n\n        break;\n\n    case GPS_MCU_UART_DEFAULT:\n\n        break;\n\n\n    }\n</code></pre>\n\n<p>I will give my vote to Tim, thanks!</p>\n"}], "owner": {"reputation": 1173, "user_id": 1734108, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bd845e394662aedc5beeefe13c3ccfcd?s=128&d=identicon&r=PG", "display_name": "orfruit", "link": "https://stackoverflow.com/users/1734108/orfruit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 51972205, "answer_count": 2, "score": 0, "last_activity_date": 1534959167, "creation_date": 1534956638, "question_id": 51971660, "link": "https://stackoverflow.com/questions/51971660/c-extending-enum-with-union-of-enums", "title": "C, extending enum with union of enums", "body": "<p>I have a structure like this</p>\n\n<pre><code>typedef enum {\n    STATE_PAUSED = 0,\n    STATE_RUN,\n    STATE_COUNTING,\n    STATE_PERIODIC,\n} State_t;\n</code></pre>\n\n<p>And what I need is to extend for new states that make sens just locally.\nBasically I want to have a switch that handles both original me->State and extended one State. </p>\n\n<p>So I thought to wrap all in a local union but I can't figure out how :)\nOf course, I will take care for overlapping values.</p>\n\n<pre><code>  typedef union{\n        State_t OrigState;\n        typedef enum {\n            GPS_MCU_UART_DEFAULT = 10,\n            }LocalState;\n    }State;\n\n    switch((State)(me-&gt;State))\n    {\n    case STATE_RUN:\n\n        break;\n\n    case GPS_MCU_UART_DEFAULT:\n\n        break;\n\n    }\n</code></pre>\n\n<p>Appreciate a little help.</p>\n"}, {"tags": ["c", "database", "sqlite"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1534956658, "post_id": 51971609, "comment_id": 90893808, "body": "Instead of posting tbl_id1,tbl_col2,tbl_col3 .... post the actual values so that we can see what are those values are."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1534956737, "post_id": 51971609, "comment_id": 90893842, "body": "<code>sprintf</code> is a very dangerous way to compose queries because it cannot handle proper <a href=\"http://bobby-tables.com\" rel=\"nofollow noreferrer\">SQL escaping</a>. Be very careful when constructing queries and use <i>prepared statements with placeholder values</i> whenever possible."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1534956784, "post_id": 51971609, "comment_id": 90893871, "body": "Please narrow down to either an SQLite problem or a C problem. To do so, try to insert as desired via SQLite commandline tool, using some sample data. If that fails, it is a SQLite problem. If it works it is a problem to do the same from C."}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1534957984, "post_id": 51971609, "comment_id": 90894472, "body": "@kiranBiradar I have updated the post to show the values. And, as I mentioned before, the values I&#39;m writing to the database are of the correct type, because I can pass them  without a problem when I don&#39;t specify the columns I want to insert data to."}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534960219, "post_id": 51971609, "comment_id": 90895492, "body": "@Yunnosch I&#39;ve done as you said, and this statement using the command line works fine, so I guess this is a C problem."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534960772, "post_id": 51971609, "comment_id": 90895755, "body": "So what happens if you use exactly the working string you tested in commandline, without any variable replacements?"}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534967173, "post_id": 51971609, "comment_id": 90898607, "body": "@Yunnosch still not working"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "edited": false, "score": 0, "creation_date": 1534970952, "post_id": 51973233, "comment_id": 90900264, "body": "Thank you so much! This fixed the issue."}], "tags": [], "owner": {"reputation": 2238, "user_id": 3810510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65Qrj.jpg?s=128&g=1", "display_name": "Denis Sablukov", "link": "https://stackoverflow.com/users/3810510/denis-sablukov"}, "is_accepted": true, "score": 1, "last_activity_date": 1534967027, "last_edit_date": 1534967027, "creation_date": 1534963268, "answer_id": 51973233, "question_id": 51971609, "link": "https://stackoverflow.com/questions/51971609/having-trouble-with-sqlites-insert-into-in-c/51973233#51973233", "title": "Having trouble with SQLite&#39;s INSERT INTO in C", "body": "<p>The issue is in the <strong><em>column names</em></strong>. With given values, sqlite3_exec returns SQLITE_ERROR (1) instead of SQLITE_OK (0).</p>\n\n<p>Use column names without brackets (and everything within them) in INSERT query. For your example use following column names:</p>\n\n<pre><code>#define tbl_col1_clear    \"Run\"\n#define tbl_col2_clear    \"Date\"\n#define tbl_col3_clear    \"Time\"\n#define tbl_col4_clear    \"Accept\"\n#define tbl_col5_clear    \"F_Peak\"\n#define tbl_col6_clear    \"m_Peak\"\n#define tbl_col7_clear    \"Cycle\"\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 51973233, "answer_count": 1, "score": 0, "last_activity_date": 1534967027, "creation_date": 1534956444, "last_edit_date": 1534957722, "question_id": 51971609, "link": "https://stackoverflow.com/questions/51971609/having-trouble-with-sqlites-insert-into-in-c", "title": "Having trouble with SQLite&#39;s INSERT INTO in C", "body": "<p>So, I'm trying to insert data into a table using SQLite in C. The insert works fine whenever I do it without specifying the columns I'm going to insert the data to. However, I want to use the primary key property in one of my columns, so I tried using the INSERT INTO table name (columns) VALUES (values) method and it's not working. </p>\n\n<p>Table creation:</p>\n\n<pre><code>snprintf(sql_query,sizeof(sql_query), \"CREATE TABLE IF NOT EXISTS %s(%s INTEGER PRIMARY KEY,%s TEXT NOT NULL, %s TEXT NOT NULL, %s TEXT NOT NULL,%s REAL NOT NULL, %s REAL NOT NULL, %s REAL NOT NULL);\",tbl_id1,tbl_col1,tbl_col2,tbl_col3,tbl_col4,tbl_col5,tbl_col6,tbl_col7);\nrc = sqlite3_exec(db, sql_query, callback, 0, NULL);\n</code></pre>\n\n<p>Insert:</p>\n\n<pre><code>sprintf(sql, \"INSERT INTO %s (%s,%s,%s,%s,%s,%s)  VALUES ('%d/%d/%d','%d:%d:%d','4','%d','%d','7');\",tbl_id1,tbl_col2,tbl_col3,tbl_col4,tbl_col5,tbl_col6,tbl_col7,year,month,day,hour,min,sec,peak,real);\nint ic = sqlite3_exec(db, sql, callback, 0, NULL);\n</code></pre>\n\n<p>As I said, it works fine if I were to do it without specifying the columns I want to insert the data into.</p>\n\n<p>Edit: <a href=\"https://i.stack.imgur.com/TCoAy.png\" rel=\"nofollow noreferrer\">Names of my variables</a></p>\n\n<pre><code>#define db_name     \"db_test.db\"\n#define tbl_id1     \"Meter1\"\n#define tbl_id2     \"Meter2\"\n#define tbl_id3     \"Meter3\"\n#define tbl_col1    \"Run[#]\"\n#define tbl_col2    \"Date[YY-MM-DD]\"\n#define tbl_col3    \"Time[HH:MM:SS]\"\n#define tbl_col4    \"Accept[True/False]\"\n#define tbl_col5    \"F_Peak[N/cm]\"\n#define tbl_col6    \"m_Peak[g]\"\n#define tbl_col7    \"Cycle[s]\"\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 1, "creation_date": 1534954685, "post_id": 51971098, "comment_id": 90892720, "body": "<code>a[0]=1;a[2]=1</code> is that intentional, that it is <code>2</code> and not <code>1</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1534954690, "post_id": 51971098, "comment_id": 90892726, "body": "It is unclear how you build the sequence.  What is the logic behind arranging the numbers like <code>1,2,1,3,1, ...</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534954804, "post_id": 51971098, "comment_id": 90892792, "body": "<a href=\"https://en.cppreference.com/w/cpp/algorithm/nth_element\" rel=\"nofollow noreferrer\">std::nth_element</a> seems to me to be the perfect tool for the job (if I&#39;m understanding the question correctly)."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1534954810, "post_id": 51971098, "comment_id": 90892796, "body": "Do you know how to generate the Fibonacci sequence? Do you know how to generate prime numbers?"}, {"owner": {"reputation": 59, "user_id": 10083840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU8xBE-zGHw/AAAAAAAAAAI/AAAAAAAAAAc/IdrjM2Ht4xI/photo.jpg?sz=128", "display_name": "Nishi Sharma", "link": "https://stackoverflow.com/users/10083840/nishi-sharma"}, "edited": false, "score": 0, "creation_date": 1534954813, "post_id": 51971098, "comment_id": 90892801, "body": "Here the odd places like 1st 3rd 5th and so on r fibbonaci series...1,1,2,3,5,8..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1534954916, "post_id": 51971098, "comment_id": 90892858, "body": "So shouldn&#39;t the sequence be <code>1,2,1,3,2,5,3,7,5, ...</code>?"}, {"owner": {"reputation": 59, "user_id": 10083840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU8xBE-zGHw/AAAAAAAAAAI/AAAAAAAAAAc/IdrjM2Ht4xI/photo.jpg?sz=128", "display_name": "Nishi Sharma", "link": "https://stackoverflow.com/users/10083840/nishi-sharma"}, "edited": false, "score": 0, "creation_date": 1534954930, "post_id": 51971098, "comment_id": 90892870, "body": "Yes, sir, i do know to print both the series separately."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1534954981, "post_id": 51971098, "comment_id": 90892897, "body": "Use two functions: one to compute the prime number and one to compute the Fibonacci number. You might use global variables for the precomputed values to keep it simple."}, {"owner": {"reputation": 59, "user_id": 10083840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU8xBE-zGHw/AAAAAAAAAAI/AAAAAAAAAAc/IdrjM2Ht4xI/photo.jpg?sz=128", "display_name": "Nishi Sharma", "link": "https://stackoverflow.com/users/10083840/nishi-sharma"}, "edited": false, "score": 0, "creation_date": 1534955009, "post_id": 51971098, "comment_id": 90892913, "body": "Yes sir , I think 1 is mistakenly printed in question. I appolozise for the mistake."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534956902, "post_id": 51971098, "comment_id": 90893924, "body": "I have seen the same question asked a few days ago. Is this an assignment for some class you share with the other author?"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3659239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b6ed436c73d42ba39748209936b7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3659239/sandy"}, "edited": false, "score": 0, "creation_date": 1534955400, "post_id": 51971308, "comment_id": 90893125, "body": "I think the objective is to print only the Nth term."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 855, "user_id": 3659239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b6ed436c73d42ba39748209936b7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3659239/sandy"}, "edited": false, "score": 0, "creation_date": 1534955519, "post_id": 51971308, "comment_id": 90893192, "body": "@Sandeep: From title, yes, but the whole question tends to be to <i>&quot;print terms alternatively.&quot;</i>."}, {"owner": {"reputation": 59, "user_id": 10083840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU8xBE-zGHw/AAAAAAAAAAI/AAAAAAAAAAc/IdrjM2Ht4xI/photo.jpg?sz=128", "display_name": "Nishi Sharma", "link": "https://stackoverflow.com/users/10083840/nishi-sharma"}, "edited": false, "score": 0, "creation_date": 1534955884, "post_id": 51971308, "comment_id": 90893404, "body": "We can replace size with the number of terms we want, I think it will be solved"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1534955403, "last_edit_date": 1534955403, "creation_date": 1534955284, "answer_id": 51971308, "question_id": 51971098, "link": "https://stackoverflow.com/questions/51971098/1-2-1-3-2-5-3-7-5-11-8-13-13-17-print-the-nth-term/51971308#51971308", "title": "1,2,1,3,2,5,3,7,5,11,8,13,13,17... Print the Nth term", "body": "<p>You might do something similar to:</p>\n\n<pre><code>void intersperse_print(const int* arr1, const int* arr2, int size)\n{\n    for (int i = 0; i != size; ++i) {\n        printf(\" %d %d\", arr1[i], arr2[i]);\n    }\n}\n</code></pre>\n\n<p>So once you populate <code>a</code> (with Fibonacci numbers) and <code>P</code> (with prime numbers),\ncall it:</p>\n\n<pre><code>intersperse_print(a, P, 100);\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10083840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU8xBE-zGHw/AAAAAAAAAAI/AAAAAAAAAAc/IdrjM2Ht4xI/photo.jpg?sz=128", "display_name": "Nishi Sharma", "link": "https://stackoverflow.com/users/10083840/nishi-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2945, "favorite_count": 0, "closed_date": 1534972096, "accepted_answer_id": 51971308, "answer_count": 1, "score": -4, "last_activity_date": 1534955403, "creation_date": 1534954555, "last_edit_date": 1534955088, "question_id": 51971098, "link": "https://stackoverflow.com/questions/51971098/1-2-1-3-2-5-3-7-5-11-8-13-13-17-print-the-nth-term", "closed_reason": "Needs details or clarity", "title": "1,2,1,3,2,5,3,7,5,11,8,13,13,17... Print the Nth term", "body": "<p>All the odd terms in this series form Fibonacci series and all even terms are prime number in ascending order.</p>\n\n<pre><code>#include&lt;stdio.h&gt;    \n\nint main()\n{\n    int i,n,k,a[100],next,j, P[151],l1,l2,l;   //variables\n    scanf(\"%d\", &amp;n);      // input the number on terms\n    a[0]=1;\n    a[2]=1;\n    /* Calculaate Fibonacci series */\n    for(i=4;i&lt;n;i+=2)\n        a[i]=a[i-2]+a[i-4];\n    for(i=0;i&lt;n;i+=2)\n        printf(\" %d\",a[i]);\n    for (i = 2; i &lt;=n; ++i)\n        P[i] = 0;\n    for (i = 2; i &lt;=n; ++i )\n    {\n        if (P[i] ==0)\n           //printf (\" %i\", i);\n           printf(\" %d\",i);\n        for (j = 1; j*i &lt;= n; j++)\n            P[i*j] = 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I cannot print the terms as shown in the series. How to print terms alternatively.</p>\n"}, {"tags": ["c", "operators", "polygon", "convex-polygon"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 7, "creation_date": 1534954200, "post_id": 51970927, "comment_id": 90892411, "body": "google down today?"}, {"owner": {"reputation": 517, "user_id": 9956279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iStX1.jpg?s=128&g=1", "display_name": "Sushilinux", "link": "https://stackoverflow.com/users/9956279/sushilinux"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1534954284, "post_id": 51970927, "comment_id": 90892463, "body": "haha, I know that <code>!</code> is NOT operator, but I don&#39;t understand why someone wants to flip the value from zero to non-zero and vice versa."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1534955123, "post_id": 51970927, "comment_id": 90892973, "body": "@ShiningGo The alternative in the code you posted would be to replace <code>c = !c;</code> with <code>c++;</code> (or <code>c = c + 1;</code>) and then return <code>c &amp; 1</code> at the end, but what&#39;s wrong with doing it the original way?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1534955833, "post_id": 51970927, "comment_id": 90893379, "body": "... although using <code>c++;</code> and returning <code>c</code> would give you a &quot;winding number&quot; rather than a simple &quot;in/out&quot; indication ..."}, {"owner": {"reputation": 44734, "user_id": 964243, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/fL1rH.png?s=128&g=1", "display_name": "Boann", "link": "https://stackoverflow.com/users/964243/boann"}, "edited": false, "score": 0, "creation_date": 1534972662, "post_id": 51970927, "comment_id": 90900932, "body": "It&#39;s counting parity. <code>c</code> is 1 when the total number of times the <code>if</code> has been true is <b>odd</b>. Looks like a <a href=\"https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule\" rel=\"nofollow noreferrer\">point in polygon test</a>."}], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 9956279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iStX1.jpg?s=128&g=1", "display_name": "Sushilinux", "link": "https://stackoverflow.com/users/9956279/sushilinux"}, "edited": false, "score": 0, "creation_date": 1534954202, "post_id": 51970949, "comment_id": 90892415, "body": "I haven&#39;t seen a code that intentionally flips a value in any language. What is the use of that?"}, {"owner": {"reputation": 855, "user_id": 3659239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b6ed436c73d42ba39748209936b7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3659239/sandy"}, "reply_to_user": {"reputation": 517, "user_id": 9956279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iStX1.jpg?s=128&g=1", "display_name": "Sushilinux", "link": "https://stackoverflow.com/users/9956279/sushilinux"}, "edited": false, "score": 0, "creation_date": 1534954452, "post_id": 51970949, "comment_id": 90892552, "body": "@ShiningGo Flipping values is common, especially code like &quot;a = !!a&quot; is very common and is used to change a to zero/one."}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "reply_to_user": {"reputation": 517, "user_id": 9956279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iStX1.jpg?s=128&g=1", "display_name": "Sushilinux", "link": "https://stackoverflow.com/users/9956279/sushilinux"}, "edited": false, "score": 0, "creation_date": 1534954463, "post_id": 51970949, "comment_id": 90892565, "body": "@ShiningGo It&#39;s extremely common to want to change a true to false or vice versa."}], "tags": [], "owner": {"reputation": 855, "user_id": 3659239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b6ed436c73d42ba39748209936b7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3659239/sandy"}, "is_accepted": false, "score": 0, "last_activity_date": 1534954284, "last_edit_date": 1534954284, "creation_date": 1534954027, "answer_id": 51970949, "question_id": 51970927, "link": "https://stackoverflow.com/questions/51970927/what-is-the-purpose-of-in-this-code-from-point-in-polygon-test/51970949#51970949", "title": "What is the purpose of &quot;!&quot; in this code from &quot;Point in Polygon Test&quot;?", "body": "<p><code>!</code> stands for logical NOT in C. So basically the value of <code>c</code> is being flipped from zero to non-zero and vice versa.</p>\n"}, {"tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 2, "last_activity_date": 1534954481, "creation_date": 1534954481, "answer_id": 51971080, "question_id": 51970927, "link": "https://stackoverflow.com/questions/51970927/what-is-the-purpose-of-in-this-code-from-point-in-polygon-test/51971080#51971080", "title": "What is the purpose of &quot;!&quot; in this code from &quot;Point in Polygon Test&quot;?", "body": "<p>Any non-zero number or non-null pointer is considered to have a logical value of \"true\", whereas a number with value 0 or a null pointer is considered to have a logical value of \"false\".</p>\n\n<p>The <code>!</code> operator is the logical NOT operator (as opposed to a bit-wise NOT operator). It inverts the logical value of its operand, producing the integer value 0 if the operand has a logical value of \"true\", and the value 1 if the operand has a logical value of \"false\".</p>\n"}], "owner": {"reputation": 517, "user_id": 9956279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iStX1.jpg?s=128&g=1", "display_name": "Sushilinux", "link": "https://stackoverflow.com/users/9956279/sushilinux"}, "delete_vote_count": 2, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1534967013, "accepted_answer_id": 51971080, "answer_count": 2, "score": -7, "last_activity_date": 1535301726, "creation_date": 1534953960, "last_edit_date": 1535301726, "question_id": 51970927, "link": "https://stackoverflow.com/questions/51970927/what-is-the-purpose-of-in-this-code-from-point-in-polygon-test", "closed_reason": "Needs details or clarity", "title": "What is the purpose of &quot;!&quot; in this code from &quot;Point in Polygon Test&quot;?", "body": "<p>Point in Polygon Test Code</p>\n\n<pre><code>int pnpoly(int nvert, float *vertx, float *verty, float testx, float testy)\n{\n  int i, j, c = 0;\n  for (i = 0, j = nvert-1; i &lt; nvert; j = i++) {\n    if ( ((verty[i]&gt;testy) != (verty[j]&gt;testy)) &amp;&amp;\n     (testx &lt; (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) )\n       c = !c;\n  }\n  return c;\n}\n</code></pre>\n\n<p>What is the purpose of <code>!</code> in <code>c = !c;</code> ? </p>\n"}, {"tags": ["c", "macos", "cmake", "clion", "json-c"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9369640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1042e39ef135020d813a8012f74967?s=128&d=identicon&r=PG&f=1", "display_name": "BozonK", "link": "https://stackoverflow.com/users/9369640/bozonk"}, "edited": false, "score": 0, "creation_date": 1534964137, "post_id": 51971079, "comment_id": 90897228, "body": "Ok, I figured It out. Thank you for help :)"}, {"owner": {"reputation": 1627, "user_id": 579698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f69501fa0ff653b5a6e9466b43773d3?s=128&d=identicon&r=PG", "display_name": "Stanley F.", "link": "https://stackoverflow.com/users/579698/stanley-f"}, "reply_to_user": {"reputation": 33, "user_id": 9369640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1042e39ef135020d813a8012f74967?s=128&d=identicon&r=PG&f=1", "display_name": "BozonK", "link": "https://stackoverflow.com/users/9369640/bozonk"}, "edited": false, "score": 0, "creation_date": 1534998630, "post_id": 51971079, "comment_id": 90906456, "body": "@BozonK as you are a new user, I want to encourage you to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a>,  if it was helpful."}], "tags": [], "owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "is_accepted": true, "score": 3, "last_activity_date": 1534954478, "creation_date": 1534954478, "answer_id": 51971079, "question_id": 51970878, "link": "https://stackoverflow.com/questions/51970878/undefined-symbols-for-architecture-x86-64-with-json-c/51971079#51971079", "title": "Undefined symbols for architecture x86_64 with Json-C", "body": "<p>You are missing something like</p>\n\n<pre><code>LDFLAGS+= -ljson-c\n</code></pre>\n\n<p>to link with the library. It was in the setup instructions for CMake in their README.</p>\n"}], "owner": {"reputation": 33, "user_id": 9369640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1042e39ef135020d813a8012f74967?s=128&d=identicon&r=PG&f=1", "display_name": "BozonK", "link": "https://stackoverflow.com/users/9369640/bozonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 51971079, "answer_count": 1, "score": 3, "last_activity_date": 1534954478, "creation_date": 1534953751, "question_id": 51970878, "link": "https://stackoverflow.com/questions/51970878/undefined-symbols-for-architecture-x86-64-with-json-c", "title": "Undefined symbols for architecture x86_64 with Json-C", "body": "<p>Basically it's my first stack overflow question, so I am sorry for any inaccuracies/stupid questions here + I have tried for 3 days to solve my problem using all other answers people gave on similar questions, but either way I don't know Cmake enough or I am doing something wrong from the very beginning.</p>\n\n<p>I've installed Json-c through Homebrew (<em>brew install json-c</em>). I am using Clion on macOS which uses Cmake. \nI have modified my CmakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10) \nproject(Project C)\n\nset(CMAKE_C_STANDARD 99) \nINCLUDE_DIRECTORIES(/usr/local/Cellar/json-c/0.13.1/include/json-c) \nLINK_DIRECTORIES(/usr/local/Cellar/json-c/0.13.1/lib)\n\n\nadd_executable(Project main.c functions.c functions.h exp_functions.c exp_functions.h) \nTARGET_LINK_LIBRARIES(Project)\n</code></pre>\n\n<p>but I am not sure how to set arguments for TARGET_LINK_LIBRARIES.</p>\n\n<p>When I am trying to build the project it gives me this:</p>\n\n<pre><code> Undefined symbols for architecture x86_64:\n\n\n    \"_json_object_new_double\", referenced from:\n          _GenerateJson in functions.c.o\n      \"_json_object_new_object\", referenced from:\n          _GenerateJson in functions.c.o\n      \"_json_object_new_string\", referenced from:\n          _GenerateJson in functions.c.o\n      \"_json_object_object_add\", referenced from:\n          _GenerateJson in functions.c.o\n      \"_json_object_to_json_string\", referenced from:\n          _GenerateJson in functions.c.o\n    ld: symbol(s) not found for architecture x86_64\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>From what I have found on the web, someone had similar problem (<a href=\"https://github.com/json-c/json-c/issues/235\" rel=\"nofollow noreferrer\">https://github.com/json-c/json-c/issues/235</a>), but after I have installed the package through Brew, I don't have any \"json-c\" files/folders in /usr/local/lib. There's only \"json-c\" alias in usr/local/include to brew directory. </p>\n\n<p>I have tried to install json-c using instructions that are provided on repository site (<a href=\"https://github.com/json-c/json-c\" rel=\"nofollow noreferrer\">https://github.com/json-c/json-c</a>), but after that I had no clue how to set CmakeLists.txt to make the project work</p>\n\n<p>What am I doing wrong. I am fresh at programming at all + I don't know much of the cmake and how macOS/Homebrew manages files when I am installing new packages through <em>git clone</em>.</p>\n"}, {"tags": ["c", "qt-creator", "dbus", "gdbus"], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 5141750, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4cb8d418202ac19558255064620e7e2e?s=128&d=identicon&r=PG&f=1", "display_name": "zepperik", "link": "https://stackoverflow.com/users/5141750/zepperik"}, "is_accepted": false, "score": 1, "last_activity_date": 1534951599, "last_edit_date": 1534951599, "creation_date": 1534951409, "answer_id": 51970154, "question_id": 51970153, "link": "https://stackoverflow.com/questions/51970153/qtcreator-error-adding-symbols-dso-missing-from-command-line/51970154#51970154", "title": "Qtcreator error adding symbols: DSO missing from command line", "body": "<p>You need to add the library to the .pro file via <code>LIBS += ....</code></p>\n\n<p>After trying unsuccessfully variants of \"libglib-2.0\", I learned that the way to get the library name from the error is to replace the \"lib\" with a \"-l\", so -lglib-2.0.</p>\n\n<p>The error was solved after adding </p>\n\n<p><code>LIBS += -lglib-2.0</code> as well as   </p>\n\n<pre><code>\\  -lgio-2.0 \\\n    -lgobject-2.0 \\ \n</code></pre>\n\n<p>when those missing DSO errors then popped up (libgio-2.0 and libgobject-2.0)</p>\n"}], "owner": {"reputation": 67, "user_id": 5141750, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4cb8d418202ac19558255064620e7e2e?s=128&d=identicon&r=PG&f=1", "display_name": "zepperik", "link": "https://stackoverflow.com/users/5141750/zepperik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535034165, "creation_date": 1534951409, "last_edit_date": 1535034165, "question_id": 51970153, "link": "https://stackoverflow.com/questions/51970153/qtcreator-error-adding-symbols-dso-missing-from-command-line", "title": "Qtcreator error adding symbols: DSO missing from command line", "body": "<p>My specific error is when trying to run a GDBus example code from here: <a href=\"https://developer.gnome.org/gio/2.30/GDBusConnection.html\" rel=\"nofollow noreferrer\">https://developer.gnome.org/gio/2.30/GDBusConnection.html</a></p>\n\n<p>The error looks like this:</p>\n\n<pre><code>/usr/bin/ld: main.o: undefined reference to symbol 'g_variant_type_checked_'\n\n//usr/lib64/libglib-2.0.so.0: error adding symbols: DSO missing from command line\n\ncollect2: error: ld returned 1 exit status\n\nmake: *** [GDbus_test] Error 1\n</code></pre>\n"}, {"tags": ["c", "function", "parameters"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1534949780, "post_id": 51969619, "comment_id": 90889760, "body": "It is implicitly converted to a pointer to a function."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534950222, "post_id": 51969692, "comment_id": 90890012, "body": "In fact, a function identifier is converted to a pointer to the function <i>wherever</i> it appears in a valid expression, except as the operand of the address-of, <code>sizeof</code>, or <code>_Alignof</code> operators (C11 6.3.2.1/4).  In particular, this is the only type family allowed for the operand of a function call expression: &quot;The expression that denotes the called function shall have type pointer to function [...]&quot; (C11 6.5.2.2/1).  This is closely analogous to arrays decaying to pointers."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1534949844, "creation_date": 1534949844, "answer_id": 51969692, "question_id": 51969619, "link": "https://stackoverflow.com/questions/51969619/pass-function-as-parameter-with-and-withou-ampersand-c/51969692#51969692", "title": "pass function as parameter with and withou ampersand c", "body": "<p>Function names are special.  </p>\n\n<p>When used without calling the function, it automatically is translated to a pointer to the function.  So <code>&amp;print</code>, <code>print</code>, <code>*print</code>, <code>**print</code>, <code>***print</code>, etc. all evaluate to the same expression of type <code>int (*)(int)</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 9428187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86b815b627032de0503f287ebe2d4cf?s=128&d=identicon&r=PG&f=1", "display_name": "loannnlo", "link": "https://stackoverflow.com/users/9428187/loannnlo"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1534949848, "answer_count": 1, "score": -1, "last_activity_date": 1534949844, "creation_date": 1534949612, "question_id": 51969619, "link": "https://stackoverflow.com/questions/51969619/pass-function-as-parameter-with-and-withou-ampersand-c", "closed_reason": "Duplicate", "title": "pass function as parameter with and withou ampersand c", "body": "<p>I want to pass a function as parameter, but I am confused if I should pass it with ampersand or not. The following snippet works in both ways. Why? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint print(int pas){\nreturn pas;\n}\n\n\nint func_print(int (*k)(int)){\n(*k)(555);\n}\n\nint main(){\n\n\n\nprintf(\"%d\",func_print(print));\nprintf(\"%d\",func_print(&amp;print));\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "compiler-errors", "iar"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1535006170, "post_id": 51969604, "comment_id": 90908932, "body": "This seems like a false alarm to me. Compiler doesn&#39;t seem to be sophisticated enough to see that this special case is fine. I would suggest that you just disable the warning, and restore it after you are done."}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1535020256, "post_id": 51969604, "comment_id": 90916780, "body": "@user694733 Yes I want to do this in a tidy portable way."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1535092633, "post_id": 51969604, "comment_id": 90946563, "body": "Well, the protability is kind of out already with the <code>pack</code>. If you want serialization portably, then it&#39;s better to avoid structs altogether. Convert each member manually to byte array or back using bitshifts. That will also sort out the endianness issues."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1535006051, "post_id": 51969789, "comment_id": 90908870, "body": "Unfortunately swapping members won&#39;t work. <code>double</code> will still be out of it&#39;s normal alignment due to <code>pack</code>. Compiler seems to take into account that <code>my_t</code> might be used in array, even if it&#39;s not really the case here."}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1535020159, "post_id": 51969789, "comment_id": 90916724, "body": "The main reason for using a packed structure is as a &quot;template&quot; to interpret data from another source. For example a communication protocol. So swapping around the order is not always an option."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1534950149, "creation_date": 1534950149, "answer_id": 51969789, "question_id": 51969604, "link": "https://stackoverflow.com/questions/51969604/get-rid-of-iar-compile-warning-pa039-use-of-address-of-unaligned-structure-me/51969789#51969789", "title": "Get rid of IAR compile warning Pa039 ? &quot;use of address of unaligned structure member&quot;", "body": "<p>Because a <code>double</code> is typically larger than an <code>int</code>, and because the struct is packed, the field <code>b</code> is not properly aligned when the smaller field appears first.</p>\n\n<p>Put the larger field first and both should be properly aligned:</p>\n\n<pre><code> typedef struct {\n    double b;\n    int a;\n } my_t;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1535019954, "post_id": 51982409, "comment_id": 90916608, "body": "I think offsetof is an actual macro. If so then it will generate the warning too. I started down that rabbit hole but I needed typeof() and portability became an issue."}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1535020013, "post_id": 51982409, "comment_id": 90916645, "body": "Unfortunately I need it to be portable too so I would want to wrap the pragmas and I end up with six in total."}, {"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "reply_to_user": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1535020209, "post_id": 51982409, "comment_id": 90916752, "body": "@WilliamJBagshaw Since offsetof is intended for precisely this kind of things it uses internal tricks in the compiler to avoid the warning. Both of my examples gives a clean compile in iccarm 8.30."}, {"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "reply_to_user": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1535020531, "post_id": 51982409, "comment_id": 90916945, "body": "@WilliamJBagshaw The offsetof version also compiles clean in gcc (Arm Embedded Processors 7-2017-q4-major) and armclang (ARM Compiler 6.7)."}], "tags": [], "owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "is_accepted": false, "score": 3, "last_activity_date": 1535016148, "creation_date": 1535016148, "answer_id": 51982409, "question_id": 51969604, "link": "https://stackoverflow.com/questions/51969604/get-rid-of-iar-compile-warning-pa039-use-of-address-of-unaligned-structure-me/51982409#51982409", "title": "Get rid of IAR compile warning Pa039 ? &quot;use of address of unaligned structure member&quot;", "body": "<p>Personally I would switch off the warning for this section of code using pragmas like in the example below.</p>\n\n<pre><code>char *g(void)\n{\n#pragma diag_suppress=Pa039\n  return (char *)(&amp;d.b);\n#pragma diag_default=Pa039\n}\n</code></pre>\n\n<p>If this is not an option, it is possible to find the offset of <code>b</code> in <code>my_t</code> and add this to the address of <code>d</code></p>\n\n<pre><code>char *f(void)\n{\n  return (char *)&amp;d + offsetof(my_t, b);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 0, "creation_date": 1535033402, "post_id": 51986545, "comment_id": 90925077, "body": "This is trivial. If the field is suitably aligned for a double there will be no warning. The question is about how to avoid the warning when the field for some reason is not suitably aligned."}, {"owner": {"reputation": 483, "user_id": 3489176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6vqs.jpg?s=128&g=1", "display_name": "denis krasutski", "link": "https://stackoverflow.com/users/3489176/denis-krasutski"}, "reply_to_user": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 0, "creation_date": 1535037404, "post_id": 51986545, "comment_id": 90927747, "body": "is not trivial, is a typical mistake. Many people think that data packing and data alignment the same stuff. Keywords are ` #pragma data_alignment = 4`  You can have packed structure but this structure can be located on 0x20000001 address. For example, the compiler can use VLDR instruction to load value from structure field but this instruction must have address values are multiples of 4! So, using #pragma data_alignment = 4 will guarantee correctly located and the warning is disappeared"}], "tags": [], "owner": {"reputation": 483, "user_id": 3489176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6vqs.jpg?s=128&g=1", "display_name": "denis krasutski", "link": "https://stackoverflow.com/users/3489176/denis-krasutski"}, "is_accepted": false, "score": 0, "last_activity_date": 1535029602, "creation_date": 1535029602, "answer_id": 51986545, "question_id": 51969604, "link": "https://stackoverflow.com/questions/51969604/get-rid-of-iar-compile-warning-pa039-use-of-address-of-unaligned-structure-me/51986545#51986545", "title": "Get rid of IAR compile warning Pa039 ? &quot;use of address of unaligned structure member&quot;", "body": "<p><strong>Firstly</strong>: you should be sure that double variable aligned inside data type by 4 bytes, your code is correct!</p>\n\n<pre><code> #pragma pack(push, 4)\n typedef struct {\n    int a;\n    double b;\n } my_t;\n #pragma pack(pop)\n</code></pre>\n\n<p><strong>Secondly</strong>: your variable address should be located corresponded</p>\n\n<pre><code>#pragma data_alignment = 4 \nmy_t d;\nchar * p = (char *)(&amp;(d.b));\n</code></pre>\n"}], "owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2844, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1535029602, "creation_date": 1534949585, "question_id": 51969604, "link": "https://stackoverflow.com/questions/51969604/get-rid-of-iar-compile-warning-pa039-use-of-address-of-unaligned-structure-me", "title": "Get rid of IAR compile warning Pa039 ? &quot;use of address of unaligned structure member&quot;", "body": "<p>IAR compiler for ARM...</p>\n\n<p>I have a structure packed using</p>\n\n<pre><code> #pragma pack(push, 4)\n typedef struct {\n    int a;\n    double b;\n } my_t;\n #pragma pack(pop)\n</code></pre>\n\n<p>I want to take the address of a field and then cast to a <code>char *</code>.</p>\n\n<pre><code>my_t d;\nchar * p = (char *)(&amp;(d.b));\n</code></pre>\n\n<p>Can I achieve this warning free without disabling the warning using a pragma?</p>\n"}, {"tags": ["c", "double"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1534947571, "post_id": 51968934, "comment_id": 90888220, "body": "Different data types have different format specifiers for <code>scanf</code>. You are using wrong ones."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1534947852, "post_id": 51968934, "comment_id": 90888402, "body": "Use <code>%lf</code> to read floating-point types in <code>scanf</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1534980018, "post_id": 51968934, "comment_id": 90903043, "body": "@JohnBode <code>%lf</code> is for <code>double</code>. Each floating point type has its own specifier"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1534990135, "post_id": 51968934, "comment_id": 90904894, "body": "<a href=\"https://stackoverflow.com/q/46620751/995714\">C - Scanf not changing value of double</a>, <a href=\"https://stackoverflow.com/q/13730188/995714\">Reading in double values with scanf in c</a>"}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1534949900, "post_id": 51969027, "comment_id": 90889834, "body": "@TimRandall See this, about format specifiers: <a href=\"https://codeforwin.org/2015/05/list-of-all-format-specifiers-in-c-programming.html\" rel=\"nofollow noreferrer\">codeforwin.org/2015/05/&hellip;</a> it&#39;s the table I was always using."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534950259, "post_id": 51969027, "comment_id": 90890045, "body": "Hmm. I suppose I&#39;m thinking of printf"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534950919, "post_id": 51969027, "comment_id": 90890451, "body": "@TimRandall Please delete your first comment as it&#39;s wrong and may confuse some readers. Thanks"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534957408, "post_id": 51969027, "comment_id": 90894201, "body": "<code>scanf()</code> detail: <code>&quot;%d&quot;</code> match <code>int *</code> not <code>int</code>, <code>&quot;%f&quot;</code> match <code>float *</code>, <code>&quot;%lf&quot;</code> match <code>double *</code>."}], "tags": [], "owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "is_accepted": false, "score": 5, "last_activity_date": 1534947780, "creation_date": 1534947780, "answer_id": 51969027, "question_id": 51968934, "link": "https://stackoverflow.com/questions/51968934/float-double-data-types-confusion-in-external-functions-c/51969027#51969027", "title": "Float, Double data types confusion in external functions (C)", "body": "<p>In your <code>scanf()</code>you used the format specifier <code>%d</code>which is used for integers. As you declared your whole variables as doubles use <code>%lf</code> (floating point) instead. I tried the code and with the correct specifier, the Code works.</p>\n"}], "owner": {"reputation": 29, "user_id": 10170532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6a5cb1f947f5ada0de7ef6506f1cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Xuttuh", "link": "https://stackoverflow.com/users/10170532/xuttuh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "closed_date": 1535013332, "answer_count": 1, "score": 2, "last_activity_date": 1534984589, "creation_date": 1534947471, "last_edit_date": 1534984589, "question_id": 51968934, "link": "https://stackoverflow.com/questions/51968934/float-double-data-types-confusion-in-external-functions-c", "closed_reason": "Duplicate", "title": "Float, Double data types confusion in external functions (C)", "body": "<p>The code below compiles alright:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ndouble add(double summand1, double summand2)\n{\n    double sum;\n    sum = summand1+summand2;\n    return sum;\n}\n\ndouble subtract(double minuend, double subtrahend)\n{\n    double diff;\n    diff = minuend-subtrahend;\n    return diff;\n}\n\nint main()\n{\n    double a,b,c,d;\n    printf(\"Enter Operand 1:\\n\");\n    scanf(\"%d\",&amp;a);\n    printf(\"Enter Operand 2:\\n\");\n    scanf(\"%d\",&amp;b);\n    // Add\n    c = add(a,b);\n\n    // Subtract\n    d = subtract(a,b);\n\n    printf(\"Sum: %.3f\\n\", c);\n    printf(\"Difference: %.3f\\n\", d);\n\n    return 0;\n}\n</code></pre>\n\n<p>However, when entering <code>5</code> and <code>5</code> the result is <code>0.000</code> (wrong) and <code>0.000</code> (expected).\nWhen entering a decimal number (e.g. <code>2.5</code>), the second prompt is skipped altogether and two random numbers are printed for <code>sum</code> and <code>difference</code>.\nThe problem must be with the data types double and float, which I seem to be using incorrectly.</p>\n"}, {"tags": ["c", "matrix", "input"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1534947936, "post_id": 51968896, "comment_id": 90888458, "body": "Will your matrix size fixed always(3*3)?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1534947989, "post_id": 51968896, "comment_id": 90888504, "body": "You need 1/ to read lines (search for <code>fgets</code>), then 2/ convert character strings to <code>double</code> (search for <code>strtod</code>). The tokenization with <code>strtok</code> is unnecessary here."}, {"owner": {"reputation": 253, "user_id": 9217311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/62d8f46918cfc7178d43c5f94d93f624?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard22", "link": "https://stackoverflow.com/users/9217311/gerard22"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1534948181, "post_id": 51968896, "comment_id": 90888659, "body": "Yes, for now is a 3x3 fixed matrix @kiranBiradar. I did not think about strtod, thanks sergebellesta!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1534949216, "post_id": 51968896, "comment_id": 90889399, "body": "Curious: what matrix line would you expect with input like: <code>&quot;1.0#2.0#-3.0&quot;</code> or <code>&quot;0.0#0.0#0.0&quot;</code> (the sum == 0.0)?"}, {"owner": {"reputation": 253, "user_id": 9217311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/62d8f46918cfc7178d43c5f94d93f624?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard22", "link": "https://stackoverflow.com/users/9217311/gerard22"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534961684, "post_id": 51968896, "comment_id": 90896151, "body": "What do you mean @chux?"}], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 1, "creation_date": 1534949762, "post_id": 51969272, "comment_id": 90889747, "body": "Just a heads up: it may be useful to verify if <code>sum != 0</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1535146900, "post_id": 51969272, "comment_id": 90975080, "body": "The output <code>printf</code> format should be <code>&quot;%f#%f#%f\\n&quot;</code>"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 2, "last_activity_date": 1534948826, "last_edit_date": 1534948826, "creation_date": 1534948516, "answer_id": 51969272, "question_id": 51968896, "link": "https://stackoverflow.com/questions/51968896/reading-a-matrix-of-numbers-from-a-txt-file/51969272#51969272", "title": "Reading a matrix of numbers from a txt file", "body": "<p>Assuming your <code>matrix</code> will be of size <code>3*3</code> always and <code>#</code> is the deliminator, in that case you can use <code>fscanf</code> to read 3 values in while loop like below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    FILE *fptr;\n    double a=0,b=0,c=0;\n    double matrix[3][3];\n\n    // Open file\n    fptr = fopen(\"mat.txt\", \"r\");\n    if (fptr == NULL)\n    {\n        printf(\"Cannot open file \\n\");\n        exit(0);\n    }\n\n    int i =0;\n   /*fscanf reads the 3 values each time into a,b and c*/\n    while (fscanf(fptr,\"%lf#%lf#%lf\", &amp;a,&amp;b,&amp;c) == 3)\n    {\n        double sum = a+b+c;\n        matrix[i][0] = a/sum;\n        matrix[i][1] = b/sum;\n        matrix[i][2] = c/sum;\n        i++;\n    }\n\n    for (i=0;i&lt;3;i++)\n     printf (\"%lf %lf %lf\\n\", matrix[i][0],matrix[i][1],matrix[i][2]);\n\n    fclose(fptr);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 180, "user_id": 8385942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f635b936a791ee6b06b2bff8df8871?s=128&d=identicon&r=PG&f=1", "display_name": "satyaGolladi", "link": "https://stackoverflow.com/users/8385942/satyagolladi"}, "is_accepted": false, "score": 0, "last_activity_date": 1535120397, "last_edit_date": 1535120397, "creation_date": 1534949259, "answer_id": 51969509, "question_id": 51968896, "link": "https://stackoverflow.com/questions/51968896/reading-a-matrix-of-numbers-from-a-txt-file/51969509#51969509", "title": "Reading a matrix of numbers from a txt file", "body": "<p>Below method uses dynamic memory allocation</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\nint main()\n{\n    size_t x = 3, y = 3;\n    int ret, i, j;\n    FILE *fptr_in , *fptr_out;\n    double (*d)[y], sum = 0;\n    d = malloc( sizeof(double) * x * y );\n    assert(d != NULL);\n    // Open file\n    fptr_in = fopen(\"mat.txt\", \"r\");\n    assert(fptr_in != NULL);\n\n    /*file to write output*/\n    fptr_out = fopen(\"mat_out.txt\", \"w\");\n    assert(fptr_out != NULL);\n\n    for(i = 0; i &lt; x; i++){\n        sum = 0;\n        for(j = 0; j &lt; y; j++){\n            ret = fscanf(fptr_in, \"%lf\", &amp;d[i][j]);\n            assert(ret &gt; 0);\n            sum += d[i][j];\n        }\n        for(j = 0; j &lt; x; j++){\n            ret = fprintf(fptr_out, \"%lf \", d[i][j]/sum);\n        }\n        fprintf(fptr_out, \"\\n\");\n    }\n    free(d);\n    fclose(fptr_in);\n    fclose(fptr_out);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 9217311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/62d8f46918cfc7178d43c5f94d93f624?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard22", "link": "https://stackoverflow.com/users/9217311/gerard22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 51969272, "answer_count": 2, "score": 1, "last_activity_date": 1535146833, "creation_date": 1534947390, "last_edit_date": 1535146833, "question_id": 51968896, "link": "https://stackoverflow.com/questions/51968896/reading-a-matrix-of-numbers-from-a-txt-file", "title": "Reading a matrix of numbers from a txt file", "body": "<p>So, I created a matrix on a text file, which looks like this:</p>\n\n<pre><code>1.0#2.2#3.4\n3.4#5.5#1.0\n6.6#5.5#1.0\n</code></pre>\n\n<p>I need my script to read each number on the line, add them and then create a new matrix with the result of dividing each number for the sum of the whole line.\nExample:</p>\n\n<pre><code>1.0+2.2+3.4 = 6.6\n</code></pre>\n\n<p>The first line of the second matrix that I will create will be: </p>\n\n<pre><code>0.15#0.33#0.51 (because 1.0/6.6 is 0.15 etc.)\n</code></pre>\n\n<p>Now I can print the whole matrix but I can't get my head on how to save each number of the line as a variable and add it to the next numbers, any suggestion on this?</p>\n\n<p>This is my current work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n\nint main() {\n    FILE *fptr;\n    double c;\n\n    // Open file\n    fptr = fopen(\"mat.txt\", \"r\");\n    if (fptr == NULL) {\n        printf(\"Cannot open file \\n\");\n        exit(0);\n    }\n\n    // Read contents from file\n    c = fgetc(fptr);\n    while (c != EOF) {\n        printf (\"%c\", c);\n        c = fgetc(fptr);\n    }\n\n    fclose(fptr);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 8, "creation_date": 1534946572, "post_id": 51968515, "comment_id": 90887547, "body": "The reason is karma. You are getting punished by the universe for hiding a pointer behind a typedef."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1534946921, "post_id": 51968515, "comment_id": 90887799, "body": "I wouldn&#39;t say you shouldn&#39;t never do it. You can do your programming in whatever style you like, just be mindful and responsible for the choices. Hiding a pointer in a typedef is perfectly fine. Usually when that&#39;s used to encapsulate a data structure then one could also provide functions to initialize such structure properly so the end user of it doesn&#39;t have to mess with the internals. Also, functions to deallocate the data are equally handy."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1534946940, "post_id": 51968515, "comment_id": 90887808, "body": "There is another thing going on here. You say you are having an array of struct pointers. You are not. And again, if you didn&#39;t hide your pointer type behind a typedef, it would be much easier to see."}, {"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1534947105, "post_id": 51968515, "comment_id": 90887910, "body": "Try this: <code>s_ptr array = malloc(sizeof(struct student) * 4);</code> You&#39;ll be allocation enugh space for <code>4 students</code>, not  <code>4 pointers</code> !!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 4, "creation_date": 1534947626, "post_id": 51968515, "comment_id": 90888256, "body": "@sidyll Regarding encapsulating a data structure: no, I would still not hide a pointer behind a typedef, because then the programmer thinks that they need to pass on a <code>HANDLE*</code> to functions, while <code>HANDLE</code> is actually enough. This adds needless obfuscation and makes debugging more difficult. I don&#39;t even hide function pointer typedefs behind pointers, but typedef a function type instead."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534948564, "post_id": 51968515, "comment_id": 90888926, "body": "@Lundin I appreciate the response and clarification. It might be a bit of personal taste but of course the project context and nature are key in deciding what to use. I&#39;m comfortable with opaque pointers, and should note that frameworks such as Apple&#39;s CoreFoundation do use it as a standard. However I can perfectly understand and agree with your argument. I just don&#39;t think it generates such bad karma :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1534948768, "post_id": 51968515, "comment_id": 90889088, "body": "@sidyll If using opaque pointers and you only allow the caller to declare <code>type* variable;</code> rather than <code>type variable;</code>, then there&#39;s nothing mysterious or magical with <code>type</code> - the caller simply doesn&#39;t need to care of its internals. One example of this style is the C standard opaque <code>FILE*</code>, which is always declared as a pointer. The C standard being a canonical reference of the C language, unlike Apple."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534949324, "post_id": 51968515, "comment_id": 90889474, "body": "@Lundin Sure. Well, l think I shall now leave and start the karma cleansing"}], "answers": [{"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 12, "last_activity_date": 1534946223, "creation_date": 1534946223, "answer_id": 51968536, "question_id": 51968515, "link": "https://stackoverflow.com/questions/51968515/how-can-this-behaviour-of-an-array-of-struct-pointers-be-explained/51968536#51968536", "title": "How can this behaviour of an array of struct pointers be explained?", "body": "<p><code>sizeof(s_ptr)</code> is the size of a pointer; not the size of a structure.</p>\n\n<p>This is another example of why typedefing pointers (that you mean to use as pointers) is error prone.</p>\n\n<p>Beyond that, you can circumvent such errors by applying <code>sizeof</code> to an expression:</p>\n\n<pre><code>array = malloc(sizeof(*array) * 4);\n</code></pre>\n\n<p>Now, whatever <code>array</code> points at, you will allocate the correct size.</p>\n"}], "owner": {"reputation": 8260, "user_id": 906738, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/40909afbdc397444acebc91b63958a99?s=128&d=identicon&r=PG", "display_name": "JohnnyFromBF", "link": "https://stackoverflow.com/users/906738/johnnyfrombf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 51968536, "answer_count": 1, "score": 1, "last_activity_date": 1534949349, "creation_date": 1534946152, "question_id": 51968515, "link": "https://stackoverflow.com/questions/51968515/how-can-this-behaviour-of-an-array-of-struct-pointers-be-explained", "title": "How can this behaviour of an array of struct pointers be explained?", "body": "<p>I'm having an array of struct pointers and assign real students to the array. Here's the code:</p>\n\n<pre><code>struct student {\n    char* firstName;\n    char* lastName;\n    int day;\n    int month;\n    int year;\n};\n\ntypedef struct student* s_ptr;\n\nint main(int argc, char **argv) {\n\n    s_ptr array = malloc(sizeof(s_ptr) * 4);\n\n    int x;\n    for (x = 0; x &lt; 4; x++) {\n        struct student newStudent = { \"john\", \"smith\", x, x, x };\n        array[x] = newStudent;\n    }\n\n    printf(\"%d \", array[0].day);\n    printf(\"%d \", array[1].day);\n    printf(\"%d \", array[2].day);\n    printf(\"%d \", array[3].day);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>It compiles but it gives the output</p>\n\n<p>0\n2608\n2\n3</p>\n\n<p>instead of </p>\n\n<p>0\n1\n2\n3</p>\n\n<p>What's happening here? How to fix this?</p>\n"}, {"tags": ["javascript", "c#", "c"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10248719, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5ymzQFwcVeg/AAAAAAAAAAI/AAAAAAAAAAc/zNvqGv1z528/photo.jpg?sz=128", "display_name": "Akki geek", "link": "https://stackoverflow.com/users/10248719/akki-geek"}, "edited": false, "score": 0, "creation_date": 1535092754, "post_id": 51968226, "comment_id": 90946626, "body": "It is working well in javascript. any idea about C# ?"}], "tags": [], "owner": {"reputation": 4043, "user_id": 1252169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841c9223703ce79ececdd17a5188ec1?s=128&d=identicon&r=PG", "display_name": "Luca", "link": "https://stackoverflow.com/users/1252169/luca"}, "is_accepted": true, "score": 0, "last_activity_date": 1534945173, "creation_date": 1534945173, "answer_id": 51968226, "question_id": 51967986, "link": "https://stackoverflow.com/questions/51967986/thinger-io-response-timestamp-1486047553711-string-to-date-time/51968226#51968226", "title": "Thinger.IO response timestamp (1486047553711) string to Date time", "body": "<p>The number 1486047553711 is the date as the number of milliseconds since January 1, 1970, 00:00:00 UTC. You can convert it to javascript date by passing it in the constructor.</p>\n\n<p>For example</p>\n\n<pre><code>new Date(1486047553711);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 10248719, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5ymzQFwcVeg/AAAAAAAAAAI/AAAAAAAAAAc/zNvqGv1z528/photo.jpg?sz=128", "display_name": "Akki geek", "link": "https://stackoverflow.com/users/10248719/akki-geek"}, "edited": false, "score": 0, "creation_date": 1535092773, "post_id": 51968405, "comment_id": 90946637, "body": "It is working well in javascript. any idea about C# ?"}], "tags": [], "owner": {"reputation": 1, "user_id": 10259970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bcC7m5BlppM/AAAAAAAAAAI/AAAAAAAAAY4/kcNQq_TT9zY/photo.jpg?sz=128", "display_name": "anurag chauhan", "link": "https://stackoverflow.com/users/10259970/anurag-chauhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534945771, "creation_date": 1534945771, "answer_id": 51968405, "question_id": 51967986, "link": "https://stackoverflow.com/questions/51967986/thinger-io-response-timestamp-1486047553711-string-to-date-time/51968405#51968405", "title": "Thinger.IO response timestamp (1486047553711) string to Date time", "body": "<p>You can convert it to proper date format by passing it to date constructor:\n new Date(1486047553711);\nthe response is : Thu Feb 02 2017 20:29:13 GMT+0530 (India Standard Time)</p>\n"}], "owner": {"reputation": 51, "user_id": 10248719, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5ymzQFwcVeg/AAAAAAAAAAI/AAAAAAAAAAc/zNvqGv1z528/photo.jpg?sz=128", "display_name": "Akki geek", "link": "https://stackoverflow.com/users/10248719/akki-geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 51968226, "answer_count": 2, "score": 0, "last_activity_date": 1534945771, "creation_date": 1534944401, "last_edit_date": 1534945452, "question_id": 51967986, "link": "https://stackoverflow.com/questions/51967986/thinger-io-response-timestamp-1486047553711-string-to-date-time", "title": "Thinger.IO response timestamp (1486047553711) string to Date time", "body": "<p>I am using thinger.io for my project.</p>\n\n<p>I send request to fetch registered devices in thinger.IO and its details by using following URL</p>\n\n<p><a href=\"http://%7Bmyip%7D/v1/users/username/devices?authorization=%7Bmytoken%7D\" rel=\"nofollow noreferrer\">http://{myip}/v1/users/username/devices?authorization={mytoken}</a></p>\n\n<p>and i get the following response</p>\n\n<pre><code>[\n {\n  \"device\":\"nodemcu\",\n  \"description\":\"NodeMCU With ESP8266\",\n  \"connection\":{\n  \"active\":true,\n  \"ts\":1486047553711\n }\n}\n]\n</code></pre>\n\n<p>I want to convert the ts \"1486047553711\" to proper date time by using Javascript or with anything possible.</p>\n\n<p>As I am beginner in <code>thinger.io</code>. Its getting hard for me to understand their document.</p>\n\n<p>Any help.</p>\n"}, {"tags": ["c", "linker", "cygwin"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1534949122, "post_id": 51967800, "comment_id": 90889334, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17601949/building-a-shared-library-using-gcc-on-linux-and-mingw-on-windows\">Building a shared library using gcc on Linux and MinGW on Windows</a>"}, {"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534950089, "post_id": 51967800, "comment_id": 90889938, "body": "Are you, by chance, compiling from 64-bit Linux to 32-bit Cygwin, or vice-versa?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534950312, "post_id": 51967800, "comment_id": 90890075, "body": "@SusmitAgrawal Nope. My main sys is 64 bit Linux and the Cygwin I&#39;m trying to build my project on is 64 bit Win7 with Cygwin. I have tried compiling it on 32 bit Linuxes but haven&#39;t tried 32 bit Cygwin yet."}, {"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534950663, "post_id": 51967800, "comment_id": 90890283, "body": "Try prefixing <code>extern</code> before <code>my_main</code>. So the prototype would look like: <code>extern long my_main(int, char**);</code>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534950889, "post_id": 51967800, "comment_id": 90890436, "body": "@SusmitAgrawal That doesn&#39;t and shouldn&#39;t do anything. Extern on non-static non-inline function declarations doesn&#39;t do anything"}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1534952536, "post_id": 51967800, "comment_id": 90891398, "body": "you can&#39;t leave <code>my_main</code> undefined at link time, it does not work on any Windows platform Cygwin included"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1534952752, "post_id": 51967800, "comment_id": 90891537, "body": "@matzeri I&#39;m not very familiar with Windows. I&#39;ll read up on how its shared libraries work, but if you provide an executable recipe that fixes the example in the question before then, your answer might get upvoted and possibly accepted ;-)."}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1534952825, "post_id": 51967800, "comment_id": 90891576, "body": "Where is <code>my_main</code> defined ?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1534953014, "post_id": 51967800, "comment_id": 90891694, "body": "@matzeri In the main program (instead of main) that links the library."}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1534954443, "post_id": 51967800, "comment_id": 90892545, "body": "easy way is to move it in the library."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1534954612, "post_id": 51967800, "comment_id": 90892675, "body": "@matzeri the whole point of this is that the user of library provides my_main."}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1535061027, "post_id": 51967800, "comment_id": 90939158, "body": "see <a href=\"https://eli.thegreenplace.net/2013/07/09/library-order-in-static-linking\" rel=\"nofollow noreferrer\">eli.thegreenplace.net/2013/07/09/&hellip;</a> for info on the matter of circular reference"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534948778, "creation_date": 1534943806, "last_edit_date": 1534948778, "question_id": 51967800, "link": "https://stackoverflow.com/questions/51967800/creating-a-shared-library-with-an-undefined-reference-on-cygwin", "title": "Creating a shared library with an undefined reference on Cygwin", "body": "<p>I'm porting what's primarily a very central (kind of like a libc extension) library from Linux to Cygwin and since I have a lot of setup and teardown and since I don't want to be using ctor/dtor attribute becaus of tcc compatibility, my library provides a <code>main</code> function and the user is supposed to be using a \"my_main\" function that gets called by the <code>main</code> function in the library.</p>\n\n<p>It has worked very well on Linux but on Cygwin, I'm getting linker errors.</p>\n\n<p>Here's an MCVE for building the library:</p>\n\n<pre><code>#!/bin/sh -eu\ncat &gt; libmain.c &lt;&lt;EOF\n#include &lt;stdio.h&gt;\nlong my_main(int, char**);\nint main(int C, char**V)\n{\n\n        int r = 0;\n        puts(\"setup\");\n        if(0&gt;my_main(C,V))\n                r=-1;\n        puts(\"teardown\");\n        return r;\n}\nEOF\ngcc -shared -fpic -o libmain.so  libmain.c -Wl,--allow-shlib-undefined\n</code></pre>\n\n<p>The above works on Linux, but on Cygwin, I'm getting:</p>\n\n<pre><code>/tmp/cc0s6qei.o:libmain.c:(.text+0x32): undefined reference to `my_main'\n/tmp/cc0s6qei.o:libmain.c:(.text+0x32): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `my_main'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Can this be made to work on Cygwin?</p>\n"}, {"tags": ["c", "arrays", "stm32"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534943683, "post_id": 51967680, "comment_id": 90885545, "body": "To make the index calculations easier, I suggest <i>two</i> loop variables, one for the <code>AccX</code> index, one for the <code>rawData</code> indexes. Increase the first by one, and the second by <code>18</code>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1534943881, "post_id": 51967680, "comment_id": 90885695, "body": "I would change the type of <code>AccX</code> to <code>uint16_t *</code>."}, {"owner": {"reputation": 59, "user_id": 8035876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377f144eac47be15bf90e420bade993d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek Wo\u017aniak", "link": "https://stackoverflow.com/users/8035876/bartek-wo%c5%baniak"}, "edited": false, "score": 2, "creation_date": 1534943967, "post_id": 51967680, "comment_id": 90885762, "body": "Endiannes ? btw. why heap ?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534943989, "post_id": 51967680, "comment_id": 90885772, "body": "If you define a data structure consisting of 18 one-byte items in the correct order, then you can access the raw data through a pointer to that struct (and/or an array of 300 structs). It should then be relatively easy to pull out the correct bytes every time."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534944039, "post_id": 51967680, "comment_id": 90885806, "body": "@TimRandall that sounds like it breaks the strict aliasing rule."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1534944052, "post_id": 51967680, "comment_id": 90885819, "body": "BTW: not directly related to your problem: it&#39;s pointless to allocate dynamic memory for small fixed size buffers. Replace <code>int16_t *AccX = malloc(300*sizeof(int16_t));</code> with <code>int16_t AccX[300];</code>. This is far more efficient and you don&#39;t need to worry about freeing the memory."}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1534944332, "post_id": 51967680, "comment_id": 90886032, "body": "To really help you, we&#39;d need to know a bit more about how this data is sent. Is it big-endian or little-endian? Right now you simply store byte1byte0 in memory and call it an int, is that the right order? etc..."}, {"owner": {"reputation": 308, "user_id": 6589237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/208b7aef2775e7bc7f6e7cc9d4b3bc41?s=128&d=identicon&r=PG&f=1", "display_name": "muliku", "link": "https://stackoverflow.com/users/6589237/muliku"}, "reply_to_user": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1534944514, "post_id": 51967680, "comment_id": 90886156, "body": "@Qubit data should be first LSB X, second MSB X, third LSB Y and so on..."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1534944581, "post_id": 51967680, "comment_id": 90886206, "body": "@mch if the data is accessed through a <code>char*</code> and a pointer to struct, there should be no problem with aliasing. (And if there&#39;s any risk of this data being written to while it&#39;s being read, there are a lot more problems with this case than we were told in the initial question.)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534944761, "post_id": 51967680, "comment_id": 90886360, "body": "To help debugging your issue, take a look at the hexadecimal values of the data. Both the data in the <code>rawData</code> array, and the data in <code>AccX</code>. Are the bytes in the correct order in <code>AccX</code>?"}, {"owner": {"reputation": 59, "user_id": 8035876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377f144eac47be15bf90e420bade993d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek Wo\u017aniak", "link": "https://stackoverflow.com/users/8035876/bartek-wo%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1534944931, "post_id": 51967680, "comment_id": 90886461, "body": "&quot;Yet in my AccX array are values I do not expect to be there&quot; - data in rawData[] array is correct ? Did You try to convert value for some axis manually ? Use debugger after receiving data package and check your arrays values."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534947951, "post_id": 51967680, "comment_id": 90888472, "body": "You can&#39;t do anything before you read the manual to see if the device is little endian or big endian."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1534949010, "post_id": 51967680, "comment_id": 90889258, "body": "@muliku: Are you sure your raw data array has <i>acceleration</i> fields first? In the register map, the <i>gyroscope</i> registers are before the <i>acceleration</i> fields. So, I&#39;d suggest using <code>[i*18+7]</code> and <code>[i*18+6]</code> instead."}, {"owner": {"reputation": 308, "user_id": 6589237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/208b7aef2775e7bc7f6e7cc9d4b3bc41?s=128&d=identicon&r=PG&f=1", "display_name": "muliku", "link": "https://stackoverflow.com/users/6589237/muliku"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1534949324, "post_id": 51967680, "comment_id": 90889473, "body": "@NominalAnimal yeah I&#39;m sure. I inspected it and it&#39;s there. It had (for example) 0xFF4E, which in two&#39;s complement is -178 (value I&#39;d expect) but then in the AccX was 0x1E80"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1534951309, "post_id": 51967680, "comment_id": 90890694, "body": "@muliku: What C compiler are you using? I don&#39;t know of any way how <code>0x4E 0xFF</code> would be converted to <code>0x1E80</code>."}], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 6589237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/208b7aef2775e7bc7f6e7cc9d4b3bc41?s=128&d=identicon&r=PG&f=1", "display_name": "muliku", "link": "https://stackoverflow.com/users/6589237/muliku"}, "edited": false, "score": 0, "creation_date": 1534947416, "post_id": 51968704, "comment_id": 90888109, "body": "Yeah, in my previous code I had pretty much what you are saying and it worked fine. But now, when I&#39;m trying to fill an array it shows just some junk. rawData array has values I would expect but then when I try to fill AccX array in a for loop (as in OP) it just fills it with garbage"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534948218, "post_id": 51968704, "comment_id": 90888678, "body": "Since the target is STM32, the 32 meaning 32 bits, <code>(uint16_t)buf[1]</code> is completely superfluous clutter. <code>buf[1]</code> will get promoted to <code>int</code> regardless of the cast. To get rid of implicit promotions and make the code robust, you need to write <code>gyro_x = (int16_t) ( (uint32_t)buf[1] &lt;&lt; 8) | (uint32_t)buf[0] );</code>. More info at <a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">Implicit type promotion rules</a>."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534948854, "post_id": 51968704, "comment_id": 90889139, "body": "@Lundin: Wouldn&#39;t that make <code>gyro_x = (int16_t)( (((uint_fast16_t)buf[1]) &lt;&lt; 8) | ((uint_fast16_t)buf[0]) );</code> even better? I don&#39;t want the example to be specific for STM32. I want it to produce correct (but not silly) machine code on 8-bit microcontrollers, too."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534949225, "post_id": 51968704, "comment_id": 90889406, "body": "@NominalAnimal No, in case <code>int</code> is 16 bits then <code>uint16_t</code> or <code>uint_fast16_t</code> would block the explicit promotion and work as intended. But it will not work on a 32 bitter with 16 bit data instructions, where the MCU reads 16 bit data as fast as it reads 32 bits. In such a case you would still get the implicit promotion. Notably, implicit promotion has nothing to do with performance, it is just an artificial rule intended to block overflows. (Which in practice causes more bugs than it prevents.) For fast code that is also portable to 8/16 bit MCUs, you should probably cast to <code>unsigned int</code>."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534949804, "post_id": 51968704, "comment_id": 90889779, "body": "@Lundin: You have me convinced re. <code>unsigned int</code>; it should work correctly in all cases even on oddball compilers. Some of the proprietary microcontroller C compilers don&#39;t follow standards. I know <code>avr-gcc</code>, <code>arm-none-eabi-gcc</code>, and <code>gcc</code> generate the correct code either way (same codebase, but I did check all separately to verify!), and pretty much optimal if <code>-Os</code>, <code>-O1</code>, or <code>-O2</code> is used; and using one of those is a good idea on microcontrollers.) Thank you!"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 3, "last_activity_date": 1534951042, "last_edit_date": 1534951042, "creation_date": 1534946753, "answer_id": 51968704, "question_id": 51967680, "link": "https://stackoverflow.com/questions/51967680/8bit-two-values-array-to-16bit-array-one-value/51968704#51968704", "title": "8bit (two values) array to 16bit array (one value)", "body": "<p>Look at the <a href=\"https://www.st.com/resource/en/datasheet/lsm9ds1.pdf\" rel=\"nofollow noreferrer\">datasheet</a>. Essentially, there are two separate devices in a single package.</p>\n\n<p>You need the accelerometer/gyroscope device registers:</p>\n\n<ul>\n<li><p>21 and 22 (0x15 and 0x16) for temperature</p></li>\n<li><p>24 and 25 (0x18 and 0x19) for gyroscope X axis</p></li>\n<li><p>26 and 27 (0x1A and 0x1B) for gyroscope Y axis</p></li>\n<li><p>28 and 29 (0x1C and 0x1D) for gyroscope Z axis</p></li>\n<li><p>40 and 41 (0x28 and 0x29) for accelerometer X axis</p></li>\n<li><p>42 and 43 (0x2A and 0x2B) for accelerometer X axis</p></li>\n<li><p>44 and 45 (0x2C and 0x2D) for accelerometer Z axis</p></li>\n</ul>\n\n<p>For the magnetic field, you need the magnetic sensor registers:</p>\n\n<ul>\n<li><p>40 and 41 (0x28 and 0x29) for X axis field strength</p></li>\n<li><p>42 and 43 (0x2A and 0x2B) for Y axis field strength</p></li>\n<li><p>44 and 45 (0x2C and 0x2D) for Z axis field strength</p></li>\n</ul>\n\n<p>These are all in two's complement format, with least significant byte first.</p>\n\n<p>Since practically all microcontrollers use two's complement format for signed integers (STM32 definitely does, as do ARMs and AVRs, including all Arduinos), you can write five simple helper functions. In pseudo-C:</p>\n\n<pre><code>static int16_t  temperature;\nstatic int16_t  gyro_x, gyro_y, gyro_z;\nstatic int16_t  accel_x, accel_y, accel_z;\nstatic int16_t  mag_x, mag_y, mag_z;\nstatic uint8_t  buf[6];\n\n\nstatic void update_temperature(void)\n{\n    /* Read 2 bytes from registers 0x15 and 0x16 (21 and 22)\n       from the accelerometer/gyroscope device, to buf[] */\n    temperature = (int16_t)((((unsigned int)buf[1]) &lt;&lt; 8) | (unsigned int)(buf[0]));\n}\n\nstatic void update_gyro(void)\n{\n    /* Read 6 bytes from registers 0x18..0x1D (24 through 29)\n       from the accelerometer/gyroscope device, to buf[] */\n    gyro_x = (int16_t)((((unsigned int)buf[1]) &lt;&lt; 8) | (unsigned int)(buf[0]));\n    gyro_y = (int16_t)((((unsigned int)buf[3]) &lt;&lt; 8) | (unsigned int)(buf[2]));\n    gyro_z = (int16_t)((((unsigned int)buf[5]) &lt;&lt; 8) | (unsigned int)(buf[4]));\n}\n\nstatic void update_accel(void)\n{\n    /* Read 6 bytes from registers 0x28..0x2D (40 through 45)\n       from the accelerometer/gyroscope device, to buf[] */\n    accel_x = (int16_t)((((unsigned int)buf[1]) &lt;&lt; 8) | (unsigned int)(buf[0]));\n    accel_y = (int16_t)((((unsigned int)buf[3]) &lt;&lt; 8) | (unsigned int)(buf[2]));\n    accel_z = (int16_t)((((unsigned int)buf[5]) &lt;&lt; 8) | (unsigned int)(buf[4]));\n}\n\nstatic void update_mag(void)\n{\n    /* Read 6 bytes from registers 0x28..0x2D (40 through 45)\n       from the magnetic sensor device, to buf[] */\n    mag_x = (int16_t)((((unsigned int)buf[1]) &lt;&lt; 8) | (unsigned int)(buf[0]));\n    mag_y = (int16_t)((((unsigned int)buf[3]) &lt;&lt; 8) | (unsigned int)(buf[2]));\n    mag_z = (int16_t)((((unsigned int)buf[5]) &lt;&lt; 8) | (unsigned int)(buf[4]));\n}\n\nstatic void update_all(void)\n{\n    update_temperature();\n    update_gyro();\n    update_accel();\n    update_mag();\n}\n</code></pre>\n\n<p>The assignments look funky, but the compiler should optimize them to sane machine code.</p>\n\n<p>You'll probably want to write a helper function to do the actual reads (or perhaps three functions; one for reading 2 bytes from the accelerometer/gyroscope device to buf[], one for reading 6 bytes from the accelerometer/gyroscope device to buf[], and one for reading 6 bytes from the magnetic sensor device to buf[], all from consecutive registers given as a parameter to the function). </p>\n\n<p>This approach uses 26 bytes of RAM, and should be suitable for all microcontrollers, both 8-bit (AVRs) and 32-bit (STM32, ARMs). The above code is not sensitive to the byte order (endianness) of the microcontroller.</p>\n\n<hr>\n\n<p>If your device sends the gyroscope, accelerometer, and magnetic sensor values via USB or serial to your computer, you need to know the byte order (endianness) of the output values is.</p>\n\n<p>The sensor itself provides them in least significant byte first. STM32 is, as far as I know, little-endian too, so it should also provide them least significant byte first.</p>\n\n<p>So, lets assume you receive <code>18*N</code> bytes from the device, with gyroscope axes first, then accelerometer axes, and finally magnetic sensor axis readings. The following should convert those values to signed integers for easy manipulation:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;inttypes.h&gt;\n\nstatic inline void extract16toint(int *const                 to,\n                                  const unsigned char *const from,\n                                  const size_t               n,\n                                  const size_t               stride)\n{\n    const unsigned char *const end = from + n * stride;\n    const unsigned char       *src = from;\n    int                       *dst;\n\n    while (src &lt; end) {\n        *(dst++) = (int16_t)(  (unsigned int)(src[0])\n                            | ((unsigned int)(src[1]) &lt;&lt; 8) );\n        src += stride;\n    }\n}\n\nstatic void extract_gyroX(int *const                  to,\n                          const unsigned char *const  data,\n                          const size_t                n)\n{\n    extract16toint(to, data + 0, n, 18);\n}\n\nstatic void extract_gyroY(int *const                  to,\n                          const unsigned char *const  data,\n                          const size_t                n)\n{\n    extract16toint(to, data + 2, n, 18);\n}\n\nstatic void extract_gyroZ(int *const                  to,\n                          const unsigned char *const  data,\n                          const size_t                n)\n{\n    extract16toint(to, data + 4, n, 18);\n}\n\nstatic void extract_accelX(int *const                  to,\n                           const unsigned char *const  data,\n                           const size_t                n)\n{\n    extract16toint(to, data + 6, n, 18);\n}\n\nstatic void extract_accelY(int *const                  to,\n                           const unsigned char *const  data,\n                           const size_t                n)\n{\n    extract16toint(to, data + 8, n, 18);\n}\n\nstatic void extract_accelZ(int *const                  to,\n                           const unsigned char *const  data,\n                           const size_t                n)\n{\n    extract16toint(to, data + 10, n, 18);\n}\n\nstatic void extract_magX(int *const                  to,\n                         const unsigned char *const  data,\n                         const size_t                n)\n{\n    extract16toint(to, data + 12, n, 18);\n}\n\nstatic void extract_magY(int *const                  to,\n                         const unsigned char *const  data,\n                         const size_t                n)\n{\n    extract16toint(to, data + 14, n, 18);\n}\n\nstatic void extract_magZ(int *const                  to,\n                         const unsigned char *const  data,\n                         const size_t                n)\n{\n    extract16toint(to, data + 16, n, 18);\n}\n</code></pre>\n\n<p>In OP's case, calling something like</p>\n\n<pre><code>int *accelX = malloc(300 * sizeof (int));\nextract_accelX(accelX, rawData, 300);\n</code></pre>\n\n<p>should work.</p>\n"}], "owner": {"reputation": 308, "user_id": 6589237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/208b7aef2775e7bc7f6e7cc9d4b3bc41?s=128&d=identicon&r=PG&f=1", "display_name": "muliku", "link": "https://stackoverflow.com/users/6589237/muliku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1534951042, "creation_date": 1534943410, "last_edit_date": 1534948301, "question_id": 51967680, "link": "https://stackoverflow.com/questions/51967680/8bit-two-values-array-to-16bit-array-one-value", "title": "8bit (two values) array to 16bit array (one value)", "body": "<p>I'm reading data from a sensor, that sends them as two 8bit values and user have to convert them into one signed 16bit value. I save these values into an array of 5400 elements (the sensor is accelerometer+gyro+magnetometer, so 9 axes, so in the end I'll have 300 values of each). So lets say I need reading from accelerometer's X axis. In my array I save these in first two places, so my accX readings are on indexes 0,1 then 18,19 then 36,37 and so on..... \nNow I need to extract these into new 16bit array with 300 elements that will represent only the X axis from accelerometer. What I came up is following:</p>\n\n<pre><code>uint8_t rawData[5400]={0};\n\nint16_t *AccX = malloc(300*sizeof(int16_t));\n\nfor(int i=0;i&lt;300;i++){\n    AccX[i]=(rawData[i+1+i*17]&lt;&lt;8 | rawData[i+0+i*17]);\n}\n//do some calculations\nfree(AccX);\n</code></pre>\n\n<p>Yet in my AccX array are values I do not expect to be there. Any idea what might have gone wrong? The sensor is LSM9DS1.</p>\n\n<p>Edit: sorry I didn't give more info about the device. I know for sure this works:</p>\n\n<pre><code>x_accel = (rawData[1]&lt;&lt;8 | rawData[0]);\n</code></pre>\n\n<p>also I inspected the rawData array and it contains correct data. It goes wrong when I try to fill that data to AccX array</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1534942849, "post_id": 51967478, "comment_id": 90884980, "body": "Using a <code>switch</code>-<code>case</code>? Or perhaps an array of function pointers? Also &quot;efficient&quot; in regards to what?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534942850, "post_id": 51967478, "comment_id": 90884981, "body": "Are the numbers small? Could they be used as indexes into an array (of pointers to functions)? Or perhaps use hash-tables or trees or other similar solutions?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1534942865, "post_id": 51967478, "comment_id": 90884995, "body": "function pointers in an array."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6596792, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zdo6ETOK8so/AAAAAAAAAAI/AAAAAAAAAc8/kQRaf3BjcBk/photo.jpg?sz=128", "display_name": "Abhishek kumar", "link": "https://stackoverflow.com/users/6596792/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1535907300, "post_id": 51967696, "comment_id": 91227900, "body": "what if one has to do it in cpp ? the same method is followed or is there some other way of doing the same?"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 4, "last_activity_date": 1534943467, "creation_date": 1534943467, "answer_id": 51967696, "question_id": 51967478, "link": "https://stackoverflow.com/questions/51967478/how-to-call-different-functions-on-different-int-values-in-c/51967696#51967696", "title": "How to call different functions on different int values in c", "body": "<p>One of the option would be using function pointers, as below.</p>\n\n<blockquote>\n  <p>Declares a type of a void function</p>\n</blockquote>\n\n<pre><code>typedef void (*fp)();\n</code></pre>\n\n<blockquote>\n  <p>define your functions</p>\n</blockquote>\n\n<pre><code>void func1()\n{}\n.\n.\n.\nvoid func10()\n{}\n</code></pre>\n\n<blockquote>\n  <p>declare array of function pointers like below</p>\n</blockquote>\n\n<pre><code>fp function_pointers[10];  //declares the array\n</code></pre>\n\n<blockquote>\n  <p>Initialize the function pointers like below</p>\n</blockquote>\n\n<pre><code> function_pointers[0] = func1()\n  .\n  .\n  function_pointers[9] = func10()\n</code></pre>\n\n<blockquote>\n  <p>Call function using function pointers like below</p>\n</blockquote>\n\n<pre><code> for (int i=0;i&lt;10;i++)\n function_pointers[i]();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2238, "user_id": 3810510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65Qrj.jpg?s=128&g=1", "display_name": "Denis Sablukov", "link": "https://stackoverflow.com/users/3810510/denis-sablukov"}, "is_accepted": false, "score": 3, "last_activity_date": 1534943661, "creation_date": 1534943661, "answer_id": 51967755, "question_id": 51967478, "link": "https://stackoverflow.com/questions/51967478/how-to-call-different-functions-on-different-int-values-in-c/51967755#51967755", "title": "How to call different functions on different int values in c", "body": "<p>Use function pointers. </p>\n\n<p><strong><em>Simple example:</em></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//pointer to a void function declaration\n\ntypedef void(*someFunc)();\n\nvoid f1() {\n    printf(\"f1 function call\\n\");\n}\n\nvoid f2() {\n    printf(\"f2 function call\\n\");\n}\n\nvoid f3() {\n    printf(\"f3 function call\\n\");\n}\n\n//array of function pointers\nconst someFunc funcTable[] = {\n    f1,\n    f2,\n    f3\n};\n\nint main() {\n    uint number = 0;\n    printf(\"Enter 0, 1 or 2\\n\");\n\n    scanf(\"%u\",&amp;number);\n    if(number &lt; 3) {\n        funcTable[number]();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6596792, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zdo6ETOK8so/AAAAAAAAAAI/AAAAAAAAAc8/kQRaf3BjcBk/photo.jpg?sz=128", "display_name": "Abhishek kumar", "link": "https://stackoverflow.com/users/6596792/abhishek-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 51967696, "answer_count": 2, "score": 4, "last_activity_date": 1541435498, "creation_date": 1534942767, "last_edit_date": 1541435498, "question_id": 51967478, "link": "https://stackoverflow.com/questions/51967478/how-to-call-different-functions-on-different-int-values-in-c", "title": "How to call different functions on different int values in c", "body": "<p>In an interview I was asked to write an efficient program such that for each integer value given, a function is called.</p>\n\n<p>For example: if user enters 1 then <code>function one</code> will get executed if user enters 5 then <code>function five</code> gets executed and so on..</p>\n\n<p>I was not able to come up with an efficient idea, like we can't use an if statement for checking the value entered and then executing the corresponding functions.</p>\n\n<p>Is there any way we can do this in an efficient manner?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1534942619, "post_id": 51967386, "comment_id": 90884820, "body": "You need to store that information somewhere. Create separate multiple bitfields and store the bitfield history, have an array of bitfields to store which function run first, allocate a string to store function names in it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534942729, "post_id": 51967386, "comment_id": 90884896, "body": "This seems like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> to me. <b><i>Why</i></b> do you need the functions to be called in a specific order? What is the <i>actual</i> problem you want to solve by this? And if you&#39;re doing the programming, why can&#39;t you just make sure that the functions are called in the order you want?"}, {"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 1, "creation_date": 1534942898, "post_id": 51967386, "comment_id": 90885027, "body": "Use some logging maybe? If you have just 3 functions you can set the most significant bit and then shift right SHIFT_X times, then you can decode it,"}, {"owner": {"reputation": 1229, "user_id": 7151380, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CGs59.png?s=128&g=1", "display_name": "Alerra", "link": "https://stackoverflow.com/users/7151380/alerra"}, "edited": false, "score": 0, "creation_date": 1534942913, "post_id": 51967386, "comment_id": 90885044, "body": "In addition to the above comments, this seems like something that could be very easily done with <code>gdb</code>, plus in general its a great tool to learn how to use. I would recommend that."}, {"owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "reply_to_user": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1534944320, "post_id": 51967386, "comment_id": 90886019, "body": "@perreal Would it be possible that you show this on the example above?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1534946344, "post_id": 51967386, "comment_id": 90887409, "body": "@perreal <i>Use some logging maybe?</i> Indeed.  The simplest way to find out what a program does <b>is to have it tell you</b>."}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1534944963, "creation_date": 1534944963, "answer_id": 51968152, "question_id": 51967386, "link": "https://stackoverflow.com/questions/51967386/how-to-set-a-bitfield-in-a-specific-order-and-check-later-against-the-order/51968152#51968152", "title": "How to set a bitfield in a specific order and check later against the order", "body": "<p>\"You cannot know which way the train went by looking at the tracks\" and neither can you know in which order the functions were called by looking at the bits. They will only tell you that the function was called, but not in which order.</p>\n\n<p>The following does however:</p>\n\n<pre><code>struct BITMASK {\n    unsigned int b1:3;\n    unsigned int b2:3;\n    unsigned int b3:3;\n    unsigned int b4:3;\n    unsigned int b5:3;\n    unsigned int b6:3;\n    unsigned int b7:3;\n} myBits;\nint counter;\n\nstatic void SetBitField(u8 Bit)\n{\n    switch (Bit) {\n    case 0: myBits.b1= ++counter; return;\n    case 1: myBits.b2= ++counter; return;\n    case 2: myBits.b3= ++counter; return;\n    case 3: myBits.b4= ++counter; return;\n    case 4: myBits.b5= ++counter; return;\n    case 5: myBits.b6= ++counter; return;\n    case 6: myBits.b7= ++counter; return;\n    }\n}\n</code></pre>\n\n<p>So here you are using three bits (max seven function calls) to hold a number which is the order of invocation.</p>\n"}, {"comments": [{"owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "edited": false, "score": 0, "creation_date": 1535011196, "post_id": 51968485, "comment_id": 90911538, "body": "Thank you for the tipps! At the end it&#39;s easier than I expexted."}], "tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": false, "score": 0, "last_activity_date": 1534946009, "creation_date": 1534946009, "answer_id": 51968485, "question_id": 51967386, "link": "https://stackoverflow.com/questions/51967386/how-to-set-a-bitfield-in-a-specific-order-and-check-later-against-the-order/51968485#51968485", "title": "How to set a bitfield in a specific order and check later against the order", "body": "<p>Given 3 functions and shift values (1, 2, 3).</p>\n\n<p>If you apply this rule upon function invocation:</p>\n\n<ul>\n<li>set the most significant bit, then shift right by the respective value.</li>\n</ul>\n\n<p>For the given (order), you will get [these bits]:</p>\n\n<pre><code>(1, 2, 3) [0, 0, 0, 1, 0, 1, 1, 0]\n(1, 3, 2) [0, 0, 1, 0, 0, 1, 1, 0]\n(2, 1, 3) [0, 0, 0, 1, 1, 0, 1, 0]\n(2, 3, 1) [0, 1, 0, 0, 1, 0, 1, 0]\n(3, 1, 2) [0, 0, 1, 1, 0, 0, 1, 0]\n(3, 2, 1) [0, 1, 0, 1, 0, 0, 1, 0]\n</code></pre>\n\n<p>The python script that generated the bits for example purposes:</p>\n\n<pre><code>import itertools                             \n\ndef mark(v, x):                              \n  v[0] = 1                                   \n  v = [0] * x + v[:-x]                       \n  return v                                   \n\nfor x in itertools.permutations([1,2,3]):    \n  v = [0] * 8                                \n  for xx in x:                               \n    v = mark(v, xx)                          \n  print x, v                                 \n</code></pre>\n"}], "owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 51968152, "answer_count": 2, "score": 0, "last_activity_date": 1534946009, "creation_date": 1534942513, "question_id": 51967386, "link": "https://stackoverflow.com/questions/51967386/how-to-set-a-bitfield-in-a-specific-order-and-check-later-against-the-order", "title": "How to set a bitfield in a specific order and check later against the order", "body": "<p>Let's say I have 3 functions within a system which can be called or not.\nLater in my algorythm (see \"<em>myMainFunction()</em>\" below), I'm interested to know if all the functions are called or not.</p>\n\n<p>Actually to track if my functions are called I use a helper function which sets a 16 bitfield:</p>\n\n<pre><code>static void SetBitField(u16 p_Bitfield, u8 Bit)\n{\n   u16 tmp_Bitmask;\n\n   tmp_Bitmask = (u16)((u16)(1) &lt;&lt; (u16)(Bit));\n\n   *p_Bitfield |= tmp_Bitmask;\n\n}\n</code></pre>\n\n<p>Now in my functions I'm doing the following:</p>\n\n<pre><code>static u16 BitMask;\n\n#define SHIFT_0     0\n#define SHIFT_1     1\n#define SHIFT_2     2\n\n#define MASK        7\n\nfun1()\n{\n/*doing some stuff*/\n\nSetBitField(&amp;BitMask,SHIFT_0)\n\n}\n\nfun2()\n{\n\n/*doing some stuff*/\n\nSetBitField(&amp;BitMask,SHIFT_1)\n}\n\nfun3()\n{\n\n/*doing some stuff*/\n\nSetBitField(&amp;BitMask,SHIFT_2)\n}\n</code></pre>\n\n<p>And now in the main function I can check if all the functions are called</p>\n\n<pre><code>    myMainFunction()\n    {\n\n    /*doing some stuff*/\n\n    if ((BitMask &amp; MASK) == MASK)\n    {\n        /*all functions are called*/\n    }\n\n    /*doing some stuff*/\n}\n</code></pre>\n\n<p>This is fine so far. But on the end I will get the same BitMask no matter in which order the functions are called.\nBut how to modify the SetBitField() function in the way that I can later check if my functions are called in a specific order.\nFor example to check that func1() --> func2() --> func3() is called and not for example func2() --> func1() --> func3()?</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2627, "user_id": 2595450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GviOi.png?s=128&g=1", "display_name": "Spoody", "link": "https://stackoverflow.com/users/2595450/spoody"}, "edited": false, "score": 0, "creation_date": 1534942234, "post_id": 51967244, "comment_id": 90884545, "body": "You want to reset value to 1 if it hits 14?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1534942265, "post_id": 51967244, "comment_id": 90884563, "body": "I think <code>i%13 + 1</code>"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534945308, "post_id": 51967244, "comment_id": 90886719, "body": "You&#39;ll probably get better results if you use 0-12 rather than 1-13 for your card values. A zero-based numbering scheme is going to work better if you use an array to (for example) name the cards"}], "answers": [{"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1534942906, "post_id": 51967382, "comment_id": 90885039, "body": "It should be <code>i%13</code>, cause value was compared with 14, and the value was greater then 1 to i. ; )"}, {"owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "edited": false, "score": 0, "creation_date": 1534943509, "post_id": 51967382, "comment_id": 90885433, "body": "Yes, you are right, it shall be i%13, I fixed it at the answer above."}, {"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 1, "creation_date": 1534945378, "post_id": 51967382, "comment_id": 90886759, "body": "For completeness, a magic one-liner: <code>for (int i = 0; i &lt; deck-&gt;n_cards; deck-&gt;cards[i] = (i++ % 13) + 1);</code> Don`t try this at home =)"}], "tags": [], "owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "is_accepted": true, "score": 1, "last_activity_date": 1535012122, "last_edit_date": 1535012122, "creation_date": 1534942497, "answer_id": 51967382, "question_id": 51967244, "link": "https://stackoverflow.com/questions/51967244/a-more-elegant-way-to-write-this-deck-of-cards/51967382#51967382", "title": "A more elegant way to write this? (Deck of cards)", "body": "<p>I'm not familiar with Blackjack play, however I understand from your code, the values range is 1 to 13. \nTry this code:</p>\n\n<pre><code>int i;\nfor (i = 0; i &lt; deck-&gt;n_cards; i++) {\n    deck-&gt;cards[i] = (i % 13) + 1;\n}\n</code></pre>\n\n<p>i%13 range is 0 to 12, adding one to this, makes this range 1 to 13</p>\n"}, {"comments": [{"owner": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "edited": false, "score": 0, "creation_date": 1534944682, "post_id": 51967462, "comment_id": 90886285, "body": "I don&#39;t really care about the suits nor cards, I&#39;m only interested in the actual value. What do you mean by &quot;magic&quot; numbers?"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "edited": false, "score": 0, "creation_date": 1534945606, "post_id": 51967462, "comment_id": 90886929, "body": "@Norhther Instead of using 13 use something representative of 13 like <code>CARDS_IN_SUIT</code> otherwise 13 might just be your lucky number for all anyone reading the code knows.  Don&#39;t you want to display the card along with the suit in your simulation?"}, {"owner": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "edited": false, "score": 0, "creation_date": 1534946178, "post_id": 51967462, "comment_id": 90887311, "body": "I don&#39;t really need to display the card. I get what you meant, so I will use <code>#define</code>."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1534943283, "last_edit_date": 1534943283, "creation_date": 1534942696, "answer_id": 51967462, "question_id": 51967244, "link": "https://stackoverflow.com/questions/51967244/a-more-elegant-way-to-write-this-deck-of-cards/51967462#51967462", "title": "A more elegant way to write this? (Deck of cards)", "body": "<p>It's not good to use \"magic\" numbers in your code.  Define, or Enumerate some values...  You only care about the value of the cards when you're totaling each hand.</p>\n\n<pre><code>#define CARDS_IN_DECK 52\n#define CARDS_IN_SUIT 13\n#define DECKS_IN_BOOT 8\n#define SUITS_IN_DECK 4\n\n#define HEARTS 0\n#define SPADES 1\n#define CLUBS  2\n#define DIAMONDS 3\n#define CARD_SUIT(c)  suits[((c)/CARDS_IN_SUIT)]\n#define CARD_FACE(c)  cards[((c)%CARDS_IN_SUIT)]\n#define CARD_VALUE(c) cardValue[((c)%CARDS_IN_SUIT)]\n\nint deck[DECKS_IN_BOOT][CARDS_IN_DECK];\nint boot, card;\nint needsShuffle = 1;\nconst char *suits[] = {\"Hearts\", \"Spades\", \"Clubs\", \"Diamonds\"};\nconst char *cards[] = {\"Ace\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\",\n                  \"Seven\", \"Eight\", \"Nine\", \"Ten\", \"Jack\", \"Queen\", \"King\"};\nconst int cardValue[] = {11, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10};\n\nvoid shuffle()\n{\n    int num_shuffles = 1000;\n    int i, j, k, m, n, temp;\n\n    printf(\"\\n\\t Shuffling ... \\n\");\n    /* Create the boot */\n    for (i=0;i&lt;DECKS_IN_BOOT;i++)\n        for (j=0;j&lt;CARDS_IN_DECK;j++)\n            deck[i][j] = j;\n\n    for ( ;num_shuffles--; )\n    {\n        m = rand() % DECKS_IN_BOOT;\n        n = rand() % DECKS_IN_BOOT;\n\n        j = rand() % CARDS_IN_DECK;\n        k = rand() % CARDS_IN_DECK;\n\n        temp = deck[n][j];\n        deck[n][j] = deck[m][k];\n        deck[m][k] = temp;\n    }\n    needsShuffle = boot = card = 0;\n}\n\nvoid testPrintDeck()\n{\n    int i, j;\n\n    /* Create the boot */\n    for (i=0;i&lt;DECKS_IN_BOOT;i++)\n        for (j=0;j&lt;CARDS_IN_DECK;j++)\n            printf(\"%d %s %s\\n\",\n                   deck[i][j],\n                   CARD_FACE(deck[i][j]),\n                   CARD_SUIT(deck[i][j]));\n}\n\nmain(int c, char *v[])\n{\n    srand(time(0));\n    shuffle();\n    testPrintDeck();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1534942822, "creation_date": 1534942822, "answer_id": 51967494, "question_id": 51967244, "link": "https://stackoverflow.com/questions/51967244/a-more-elegant-way-to-write-this-deck-of-cards/51967494#51967494", "title": "A more elegant way to write this? (Deck of cards)", "body": "<p>if what you want is, given a pointer to 52 int array, fill it in 4 sets of 1-13, a simpler approach would be, IMO:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct deck{\n    int n_cards;\n    int cards[52];\n}deck_t;\n\n int main(void) {\n\n    deck_t *deck = malloc(sizeof(deck_t));\n    deck-&gt;n_cards = 52;\n\n    int value = 1, suit_size = 13, num_of_suits = 4;\n\n    /* 1st option*/\n    for(int i = 0; i &lt; deck-&gt;n_cards / num_of_suits; i++){\n        for(int j = 0; j &lt; deck-&gt;n_cards; j += suit_size){\n            deck-&gt;cards[i+j] = value;\n        }\n        value++;\n    }\n\n    for(int i = 0; i &lt; deck-&gt;n_cards; i++){\n        printf(\"%d \", deck-&gt;cards[i]);\n    }\n\n    /* 2nd option*/\n    value = 0;\n    for(int i = 0; i &lt; deck-&gt;n_cards; i++){\n        deck-&gt;cards[i] = 1 + value++ % 13;\n    }\n\n    for(int i = 0; i &lt; deck-&gt;n_cards; i++){\n        printf(\"%d \", deck-&gt;cards[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 51967382, "answer_count": 3, "score": 0, "last_activity_date": 1535012122, "creation_date": 1534942052, "last_edit_date": 1534942188, "question_id": 51967244, "link": "https://stackoverflow.com/questions/51967244/a-more-elegant-way-to-write-this-deck-of-cards", "title": "A more elegant way to write this? (Deck of cards)", "body": "<p>I'm currently writing a Blackjack simulator, and I'm generating n decks of cards to play with:</p>\n\n<pre><code>int i;\nint value = 1;\nfor (i = 0; i &lt; deck-&gt;n_cards; i++) {\n    deck-&gt;cards[i] = value;\n    value++;\n    if (value == 14) value = 1;\n}\n</code></pre>\n\n<p>(deck->n_cards % 52 == 0)</p>\n\n<p>I tried an approach to write the same with modulo operations, but I can't get it away using more than 1 deck. I think that using that if is really ugly. Is there a more elegant solution to this?</p>\n"}, {"tags": ["c", "string", "multidimensional-array", "segmentation-fault", "dynamic-arrays"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1534941723, "post_id": 51967099, "comment_id": 90884210, "body": "<code>array[r] = 0; &#47;&#47; point it to 0 (&#39;\\0&#39;)</code> doesn&#39;t seems correct."}, {"owner": {"reputation": 429, "user_id": 9302544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiWhL.jpg?s=128&g=1", "display_name": "AymenTM", "link": "https://stackoverflow.com/users/9302544/aymentm"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1534941788, "post_id": 51967099, "comment_id": 90884249, "body": "I just arbitrarily want the last pointer in the array of pointers to be 0 (i.e &#39;\\0&#39;); in other words the last string in the array of strings to hold 1 character: &#39;\\0&#39;."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1534941855, "post_id": 51967099, "comment_id": 90884300, "body": "So you mean <code>&#47;&#47; point it to 0 (NULL)</code> instead of <code>&#47;&#47; point it to 0 (&#39;\\0&#39;)</code>, isn&#39;t it?"}, {"owner": {"reputation": 429, "user_id": 9302544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiWhL.jpg?s=128&g=1", "display_name": "AymenTM", "link": "https://stackoverflow.com/users/9302544/aymentm"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1534941909, "post_id": 51967099, "comment_id": 90884340, "body": "No not NULL, as in the last pointer has memory allocated to it (the container/string exists), it&#39;s just that the only character of the string is &#39;\\0&#39; (0 in ASCII)."}, {"owner": {"reputation": 714, "user_id": 10052693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edf3364de11eaf98d38723a3f9a7bca7?s=128&d=identicon&r=PG", "display_name": "Koen", "link": "https://stackoverflow.com/users/10052693/koen"}, "edited": false, "score": 0, "creation_date": 1534942811, "post_id": 51967099, "comment_id": 90884953, "body": "array[c][r] might work better if entered as array[r][c]."}], "answers": [{"comments": [{"owner": {"reputation": 2389, "user_id": 9453926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3faa500658bbb2d2e88c5463a75c32e1?s=128&d=identicon&r=PG&f=1", "display_name": "politinsa", "link": "https://stackoverflow.com/users/9453926/politinsa"}, "edited": false, "score": 3, "creation_date": 1534943005, "post_id": 51967501, "comment_id": 90885098, "body": "Compile with flag -g in gcc, and then <code>gdb yourprog</code> and type <code>run</code>"}, {"owner": {"reputation": 429, "user_id": 9302544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiWhL.jpg?s=128&g=1", "display_name": "AymenTM", "link": "https://stackoverflow.com/users/9302544/aymentm"}, "edited": false, "score": 1, "creation_date": 1534944794, "post_id": 51967501, "comment_id": 90886384, "body": "Thank you @KeineLust. It works now. So rows first, then columns... and for all this time I thought it was the opposite :S"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 2, "last_activity_date": 1534942848, "creation_date": 1534942848, "answer_id": 51967501, "question_id": 51967099, "link": "https://stackoverflow.com/questions/51967099/c-2-dimensional-string-array-segmentation-fault/51967501#51967501", "title": "C: 2-Dimensional String Array Segmentation Fault", "body": "<p>Replace all ocurrences of <code>array[c][r]</code> with <code>array[r][c]</code></p>\n\n<p>The first dimension is the row.</p>\n\n<p>Next time you can check this using a debugger:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x00000000004007ea in main () at demo.c:37\n37  array[c][r] = str[i];\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 9302544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiWhL.jpg?s=128&g=1", "display_name": "AymenTM", "link": "https://stackoverflow.com/users/9302544/aymentm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 51967501, "answer_count": 1, "score": 1, "last_activity_date": 1534949065, "creation_date": 1534941558, "last_edit_date": 1534949065, "question_id": 51967099, "link": "https://stackoverflow.com/questions/51967099/c-2-dimensional-string-array-segmentation-fault", "title": "C: 2-Dimensional String Array Segmentation Fault", "body": "<p>Trying to make a small program that separates words within a big string and stores each word (of the big string) in a string (i.e pointer) in an array of strings (i.e pointers); forming a 2-dimensional string array.\nThe word separator is simply a whitespace (32 in ASCII); the big string is: </p>\n\n<hr>\n\n<p>\"Showbizzes Oxygenized Equalizing Liquidized Jaywalking\"</p>\n\n<p>Note: </p>\n\n<ul>\n<li>the words are all 10 characters in length</li>\n<li>the total length of the string is 54 characters (spaces included)</li>\n<li>the total size of the buffer is 55 bytes ('\\0' included)</li>\n</ul>\n\n<hr>\n\n<p>One more thing, the last pointer in the array of pointers must hold a 0 (i.e 1 character: '\\0') (this is completely arbitrary).</p>\n\n<hr>\n\n<p>Here is the program, nothing special, but ...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n\n    // The string that we need to break down into individual words\n    char str[] = \"Showbizzes Oxygenized Equalizing Liquidized Jaywalking\";\n\n    // Allocate memory for 6 char pointers (i.e 6 strings) (5 of which will contain words)\n    // the last one will just hold 0 ('\\0')\n    char **array; array = malloc(sizeof(char *) * 6);\n\n    // i: index for where we are in 'str'\n    // r: index for rows of array\n    // c: index for columns of array\n    int i, r, c;\n\n    // Allocate 10 + 1 bytes for each pointer in the array of pointers (i.e array of strings)\n    // +1 for the '\\0' character\n    for (i = 0; i &lt; 6; i++)\n        array[i] = malloc(sizeof(char)*11);\n\n    // Until we reach the end of the big string (i.e until str[i] == '\\0');\n    for (i = 0, c = 0, r = 0; str[i]; i++) {\n\n        // Word seperator is a whitespace: ' ' (32 in ASCII)\n        if (str[i] == ' ') { \n\n            array[c][r] = '\\0';     // cut/end the current word\n            r++;                    // go to next row (i.e pointer)\n            c = 0;                  // reset index of column/letter in word\n        }\n\n        // Copy character from 'str', increment index of column/letter in word\n        else { array[c][r] = str[i]; c++; }\n\n    }   \n\n    // cut/end the last word (which is the current word)\n    array[c][r] = '\\0'; \n\n    // go to next row (i.e pointer)\n    r++; \n\n    // point it to 0 ('\\0')\n    array[r] = 0; \n\n\n\n// Print the array of strings in a grid - - - - - - - - - - - - - - \n\n    printf(\"       ---------------------------------------\\n\"); \n    for (r = 0; r &lt; 6; r++) {\n\n        printf(\"Word %i --&gt; \", r);\n        for (c = 0; array[c][r]; c++)\n            printf(\"| %c \", array[c][r]);\n\n        printf(\"|\");printf(\"\\n\");\n        printf(\"       ---------------------------------------\");\n        printf(\"\\n\");\n    }\n\n// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    return 0;\n}\n</code></pre>\n\n<p>.. there's something wrong and I don't understand how to fix it.</p>\n\n<hr>\n\n<p>For some reason it copies into the first string (i.e pointer), in the array of strings (i.e pointers), the first 6 characters of the big string, then on the 7th it gives a <strong>segmentation fault</strong>. I've allocated 6 pointers each with 11 bytes.. at least thats what I think the code is doing, so really I have NO clue why this is happening... </p>\n\n<p>Hope someone can help.</p>\n"}, {"tags": ["c", "git", "libgit2"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1534941629, "post_id": 51966897, "comment_id": 90884158, "body": "From the manpage: <code>The contents of the packfile will be stored in the given buffer.    It is the caller&#39;s responsibility to ensure that the generated  packfile is available to the repository (e.g. by writing it to disk, or doing something crazy like distributing it across   several copies of the repository over a network).</code>. So indeed, you have to care yourself about what to do with it. But it isn&#39;t particularly hard to write it to disk, is it?"}, {"owner": {"reputation": 12016, "user_id": 377393, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/85ddc411411f3353241b688e9432362e?s=128&d=identicon&r=PG", "display_name": "abyss.7", "link": "https://stackoverflow.com/users/377393/abyss-7"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1535022994, "post_id": 51966897, "comment_id": 90918362, "body": "@Ctx It breaks all the abstractions - I don&#39;t want to know how and where I should put pack inside current version of git repository. It&#39;s like compiler gives you a binary assembled sequence of some ELF section and tells you: put it somewhere and execute."}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "edited": false, "score": 0, "creation_date": 1535856414, "post_id": 51966897, "comment_id": 91217541, "body": "There are no subtle way because libgit2 doesn&#39;t know how the ODB backends you might be using actually work, hence it relies on you to make the call (ie. packfiles might not even make sense for some backends). Hence, you&#39;re supposed to know that executables go in $PATH / <code>.git&#47;objects&#47;pack</code>. An alternative would be to use the <code>packbuilder</code> API directly, which ought to give you more control over what it is you&#39;re trying to do while staying clear of the caveats of <code>memdump</code>."}], "owner": {"reputation": 12016, "user_id": 377393, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/85ddc411411f3353241b688e9432362e?s=128&d=identicon&r=PG", "display_name": "abyss.7", "link": "https://stackoverflow.com/users/377393/abyss-7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1534940831, "creation_date": 1534940831, "question_id": 51966897, "link": "https://stackoverflow.com/questions/51966897/how-to-use-mempack-from-libgit2", "title": "How to use mempack from libgit2?", "body": "<p>There is a function <code>git_mempack_dump()</code> which puts some in-memory objects into buffer (from code comments):</p>\n\n<blockquote>\n  <p>The contents of the packfile will be stored in the given buffer.\n  It is the caller's responsibility to ensure that the generated\n  packfile is available to the repository</p>\n</blockquote>\n\n<p>But I can't find any subtle way to put buffer's content to the disk inside repository's default ODB - using libgit2 API.</p>\n\n<p>Am I missing something or it's just unimplemented yet?</p>\n"}, {"tags": ["c", "increment", "post-increment", "pre-increment"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534938708, "post_id": 51966237, "comment_id": 90882201, "body": "What output would you expect?"}, {"owner": {"reputation": 859, "user_id": 9448540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEXpF.png?s=128&g=1", "display_name": "Sophie Roseinsta", "link": "https://stackoverflow.com/users/9448540/sophie-roseinsta"}, "edited": false, "score": 0, "creation_date": 1534938788, "post_id": 51966237, "comment_id": 90882255, "body": "If I am not wrong the output shall be 43. But I am pretty wrong!"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1534939179, "post_id": 51966237, "comment_id": 90882531, "body": "Please write readable code. Saves you and the maintainers a lot less stress and headache in the long run."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1534940211, "post_id": 51966237, "comment_id": 90883245, "body": "Even if this was correct, you would never write code like that in a real world program. And BTW it&#39;s rather <code>#include &lt;stdio.h&gt;</code> than <code>#include &quot;stdio.h&quot;</code>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534946380, "post_id": 51966237, "comment_id": 90887431, "body": "@Jabberwocky I would expect to get fired or an &#39;F-&#39; fail mark, and  I would deserve it:)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1534946784, "post_id": 51966237, "comment_id": 90887702, "body": "What would you expect <code>43++</code> to do?  (That&#39;s basically what <code>++a++</code> tries to do in your example.)"}], "answers": [{"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 2, "last_activity_date": 1534938899, "creation_date": 1534938899, "answer_id": 51966308, "question_id": 51966237, "link": "https://stackoverflow.com/questions/51966237/why-does-increment-operation-a-not-work-at-least-in-c/51966308#51966308", "title": "Why does increment operation ++a++ not work, at least in C?", "body": "<blockquote>\n  <p>Could somebody explain the error output?</p>\n</blockquote>\n\n<p>It means C doesn't support such an operation.</p>\n"}, {"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1534944908, "post_id": 51966324, "comment_id": 90886448, "body": "In essence, it&#39;s the same thing as trying to assign a new value to the result of <code>a + b</code> - there&#39;s nothing to assign <i>to</i>."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 11, "last_activity_date": 1534938977, "creation_date": 1534938977, "answer_id": 51966324, "question_id": 51966237, "link": "https://stackoverflow.com/questions/51966237/why-does-increment-operation-a-not-work-at-least-in-c/51966324#51966324", "title": "Why does increment operation ++a++ not work, at least in C?", "body": "<p><code>++a++</code> is equal to <code>++(a++)</code> (because of <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"noreferrer\">operator precedence</a>), and the value returned by <code>a++</code> is a <a href=\"https://en.cppreference.com/w/c/language/value_category#Non-lvalue_object_expressions\" rel=\"noreferrer\">non-lvalue object expression</a> (also known as <em>rvalues</em>).</p>\n\n<p>Such values are (in essence) ephemeral and can not be modified by the prefix <code>++</code> operator.</p>\n"}, {"tags": [], "owner": {"reputation": 449, "user_id": 7775673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff1f0f3fe7ed5fc8beddeee6c91fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Badran", "link": "https://stackoverflow.com/users/7775673/badran"}, "is_accepted": false, "score": 4, "last_activity_date": 1534939782, "creation_date": 1534939782, "answer_id": 51966560, "question_id": 51966237, "link": "https://stackoverflow.com/questions/51966237/why-does-increment-operation-a-not-work-at-least-in-c/51966560#51966560", "title": "Why does increment operation ++a++ not work, at least in C?", "body": "<p>In C, <code>++x</code> is a value, not an lvalue. Its effect is to increment <code>x</code>, and evaluate to the newly assigned value of <code>x</code>. Since <code>++x</code> is not an lvalue, it cannot be incremented.</p>\n\n<p>In C++, <code>++x</code> is an lvalue, not an rvalue. Its effect is to increment <code>x</code>, and evaluate to <code>x</code> as an lvalue. Since ++x is an lvalue again, it can be incremented again.</p>\n\n<p>The reason why it makes sense for <code>++x</code> to be an lvalue in C++ is because C++ introduced reference types. Given</p>\n\n<pre><code>void f(int &amp;);\nint i;\n</code></pre>\n\n<p>it may make sense to call <code>f(++i)</code>, which passes i by reference after incrementing it.</p>\n\n<p>Since C doesn't have reference types, there's little point in ++i being an lvalue. Historically, it never was, and unlike C++, C never gained a compelling reason to change the rules.</p>\n\n<p>Note that C++ required more extensive changes than making <code>++x</code> an lvalue to actually let it work. Making <code>++x</code> an lvalue, without anything else, would make ++x undefined behavior because there would not be a sequence point between the modification to x and the subsequent lvalue-to-value conversion. Even more clearly so for <code>++++x</code>. C++ had to modify the sequencing rules to make it work. In C, modifications to the sequencing rules might cause problems for existing compilers to conform to the new rules, so such modifications would likely be rejected unless there's a big benefit.</p>\n"}], "owner": {"reputation": 859, "user_id": 9448540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEXpF.png?s=128&g=1", "display_name": "Sophie Roseinsta", "link": "https://stackoverflow.com/users/9448540/sophie-roseinsta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 51966324, "answer_count": 3, "score": -1, "last_activity_date": 1534957969, "creation_date": 1534938661, "last_edit_date": 1534957969, "question_id": 51966237, "link": "https://stackoverflow.com/questions/51966237/why-does-increment-operation-a-not-work-at-least-in-c", "title": "Why does increment operation ++a++ not work, at least in C?", "body": "<p>I was curious and find out the current piece of code does not work however I can not figure out why:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(){\n        int a = 42;\n        printf(\"%d\\n\", ++a++);\n}\n</code></pre>\n\n<p>It does not seem like a wrong syntax to me. Could somebody explain the error output?</p>\n\n<pre><code>first.c: In function \u2018main\u2019:\nfirst.c:5:17: error: lvalue required as increment operand\n  printf(\"%d\\n\", ++a++);\n</code></pre>\n"}, {"tags": ["c", "validation", "passwords"], "comments": [{"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534937556, "post_id": 51965904, "comment_id": 90881553, "body": "Give an example case of the expected result and the result you get."}, {"owner": {"reputation": 13, "user_id": 10259395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-waahSK72950/AAAAAAAAAAI/AAAAAAAAABk/mS9uhN7IuxM/photo.jpg?sz=128", "display_name": "Krutik Desai", "link": "https://stackoverflow.com/users/10259395/krutik-desai"}, "reply_to_user": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534937858, "post_id": 51965904, "comment_id": 90881712, "body": "For example when I enter &quot;rabbit&quot; as password, it should show &quot;Not a valid password&quot;, but it shows nothing (which happens if the password is valid)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1534938074, "post_id": 51965904, "comment_id": 90881838, "body": "Your program logic and your overall approach look totally wrong to me."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534938464, "post_id": 51965904, "comment_id": 90882055, "body": "Not directly related, but why don&#39;t you name the variable containing the length of the password <code>length</code>, or <code>passwordlength </code>instead of <code>a</code>? That would make your code a lot more readable."}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1534938465, "post_id": 51965904, "comment_id": 90882058, "body": "Your parentheses are wrong, you want <code>isupper(pass[i])</code>, instead you have the logical and in there as well. It&#39;s the same with <code>isdigit</code>. Still, even once you&#39;ve fixed that, your code will print &quot;Not a valid password&quot; twice if you enter &quot;rabbit&quot;."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1534939751, "post_id": 51965904, "comment_id": 90882910, "body": "Please do not edit your code after you received comments and answers. People spent time to provide feedback for your problem which is rendered useless if you change your code. Questions should not be moving targets."}, {"owner": {"reputation": 604, "user_id": 2989291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHyYS.jpg?s=128&g=1", "display_name": "ShellNinja", "link": "https://stackoverflow.com/users/2989291/shellninja"}, "edited": false, "score": 0, "creation_date": 1534940045, "post_id": 51965904, "comment_id": 90883136, "body": "Seems like a good job for a regex."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10133896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3893c04d41bf7bde0e754f45359215?s=128&d=identicon&r=PG&f=1", "display_name": "Erick Salas", "link": "https://stackoverflow.com/users/10133896/erick-salas"}, "is_accepted": false, "score": 0, "last_activity_date": 1534938004, "creation_date": 1534938004, "answer_id": 51966052, "question_id": 51965904, "link": "https://stackoverflow.com/questions/51965904/c-program-about-password-validation-not-working/51966052#51966052", "title": "C Program about Password Validation not working", "body": "<p>Why don't you add a bool that is triggered if you find an upper or a lower or a number and then exit out of the loop, because right now you are just traversing the whole string. Also you are checking for an upper in the third loop again.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10259395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-waahSK72950/AAAAAAAAAAI/AAAAAAAAABk/mS9uhN7IuxM/photo.jpg?sz=128", "display_name": "Krutik Desai", "link": "https://stackoverflow.com/users/10259395/krutik-desai"}, "edited": false, "score": 0, "creation_date": 1534938926, "post_id": 51966072, "comment_id": 90882353, "body": "I am a beginner and didn&#39;t know what flags were. I&#39;ll surely check them now, thanks!"}, {"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "reply_to_user": {"reputation": 13, "user_id": 10259395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-waahSK72950/AAAAAAAAAAI/AAAAAAAAABk/mS9uhN7IuxM/photo.jpg?sz=128", "display_name": "Krutik Desai", "link": "https://stackoverflow.com/users/10259395/krutik-desai"}, "edited": false, "score": 0, "creation_date": 1534939115, "post_id": 51966072, "comment_id": 90882489, "body": "<code>Flag</code> is just a term, used to say that some part of the code has changed, according to some rules. For example, if you&#39;ve played &quot;Minesweeper&quot;, if you don&#39;t want to mark that a tile shouldn&#39;t be clicked, you &quot;flag&quot; it."}, {"owner": {"reputation": 13, "user_id": 10259395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-waahSK72950/AAAAAAAAAAI/AAAAAAAAABk/mS9uhN7IuxM/photo.jpg?sz=128", "display_name": "Krutik Desai", "link": "https://stackoverflow.com/users/10259395/krutik-desai"}, "edited": false, "score": 0, "creation_date": 1534941430, "post_id": 51966072, "comment_id": 90884031, "body": "Are int and bool interchangeable when we use &#39;1 and 0&#39; instead of &#39;true and false&#39;?"}, {"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "reply_to_user": {"reputation": 13, "user_id": 10259395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-waahSK72950/AAAAAAAAAAI/AAAAAAAAABk/mS9uhN7IuxM/photo.jpg?sz=128", "display_name": "Krutik Desai", "link": "https://stackoverflow.com/users/10259395/krutik-desai"}, "edited": false, "score": 0, "creation_date": 1534947406, "post_id": 51966072, "comment_id": 90888097, "body": "@KrutikDesai Yes, they are interchangeable. Internally, <code>true</code>is <code>1</code> and <code>false</code> is <code>0</code>."}], "tags": [], "owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "is_accepted": true, "score": 2, "last_activity_date": 1534938062, "creation_date": 1534938062, "answer_id": 51966072, "question_id": 51965904, "link": "https://stackoverflow.com/questions/51965904/c-program-about-password-validation-not-working/51966072#51966072", "title": "C Program about Password Validation not working", "body": "<p>It looks like you have copied the code of the loop that checks uppercase, and used it in the other loops. The <code>else if</code> part in each loop contains the exact same condition.</p>\n\n<p>A better way to do this would be using three flags:</p>\n\n<pre><code>int lower_flag = 0, upper_flag = 0, digit_flag = 0;\nfor(i=0 ; i&lt;a ; i++) {\n    if(isupper(pass[i])) upper_flag=1;\n    else if(islower(pass[i])) lower_flag=1;\n    else if(isdigit(pass[i])) digit_flag=1;\n}\nif(upper_flag &amp;&amp; lower_flag &amp;&amp; digit_flag)\n    printf(\"Valid\");\nelse\n    printf(\"Invalid\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 1, "last_activity_date": 1534938220, "creation_date": 1534938220, "answer_id": 51966110, "question_id": 51965904, "link": "https://stackoverflow.com/questions/51965904/c-program-about-password-validation-not-working/51966110#51966110", "title": "C Program about Password Validation not working", "body": "<p>You don't need 3 loops to check the valid password in your case.\nYou can do as below with one loop. All you need is 3 <code>bool</code> variables to mark <code>upper,lower &amp; digits</code> presence in your password.</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include&lt;stdbool.h&gt;\nint main()\n{\n  char pass[20];\n  int a, i=0;\n  bool upperPresent = false,lowerPresent = false,digitPresent = false;\n  printf(\"Enter your password. It must contain an uppercase and a lowercase letter with a number. Password should be less than 19 characters.\\n \");\n  scanf(\" %s\", pass);\n  a = strlen(pass);\n\n/* Checking if an uppercase letter is present*/\n\nfor(i=0; i&lt;a ; i++){\n    if(isupper(pass[i])){\n      upperPresent = true;\n    }\n   else if (islower(pass[i])){\n      lowerPresent = true;\n    }else if (isdigit(pass[i])){\n     digitPresent = true;\n    }\n\n  }\n\n  if (upperPresent &amp;&amp; lowerPresent &amp;&amp; digitPresent)\n   printf(\"Valid password\\n\");\n  else\n   printf(\"invalid Password\\n\");\n\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10259395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-waahSK72950/AAAAAAAAAAI/AAAAAAAAABk/mS9uhN7IuxM/photo.jpg?sz=128", "display_name": "Krutik Desai", "link": "https://stackoverflow.com/users/10259395/krutik-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 51966072, "answer_count": 3, "score": 1, "last_activity_date": 1534941436, "creation_date": 1534937486, "last_edit_date": 1534941436, "question_id": 51965904, "link": "https://stackoverflow.com/questions/51965904/c-program-about-password-validation-not-working", "title": "C Program about Password Validation not working", "body": "<p>I wrote a program which is supposed to check if an entered password has an uppercase letter , a lowercase letter and a number. It won't return anything if the password is valid and if the password is invalid it should say \"Not a valid password!\". But this program doesn't work and I don't understand why.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n  char pass[20];\n  int a, i=0;\n  printf(\"Enter your password. It must contain an uppercase and a lowercase letter with a number. Password should be less than 19 characters.\\n \");\n  scanf(\" %s\", pass);\n  a = strlen(pass);\n\n  /* Checking if an uppercase letter is present*/\n\n  for(i=0; i&lt;a ; i++)\n  {\n    if(!isupper(pass[i] &amp;&amp; i!=(a-1)))\n    {\n        continue;\n    }\n    else if (!isupper(pass[i]))\n    {\n        printf(\"Not a valid Password!\");\n    }\n    else\n    {\n        break;\n    }\n  }\n\n  /* Checking if a lowercase letter is present */\n\n  for(i=0; i&lt;a ; i++)\n  {\n    if(!islower(pass[i] &amp;&amp; i!=(a-1)))\n    {\n        continue;\n    }\n    else if (!islower(pass[i]))\n    {\n        printf(\"Not a valid Password!\");\n    }\n    else\n    {\n        break;\n    }\n  }\n\n  /* Checking if a number is present*/\n\n  for(i=0; i&lt;a ; i++)\n  {\n    if(!isdigit(pass[i] &amp;&amp; i!=(a-1)))\n    {\n        continue;\n    }\n    else if (!isdigit(pass[i]))\n    {\n        printf(\"Not a valid Password!\");\n    }\n    else\n    {\n        break;\n    }\n  }\n}  \n</code></pre>\n"}, {"tags": ["c", "x11", "xlib"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1534936664, "post_id": 51965353, "comment_id": 90881059, "body": "1. Save all window attributes into allocated array of structures. 2. Sort it. 3. Get the first array member."}, {"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1534937936, "post_id": 51965353, "comment_id": 90881755, "body": "@KamilCuk Sorting it is exacly what I am struggling with. What attribute shall I sort it with ?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1534938124, "post_id": 51965353, "comment_id": 90881875, "body": "Is there a Z-Plane attribute that you can sort on?  Z-plane == 0 is the last one drawn, so it will be on top."}, {"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1534938347, "post_id": 51965353, "comment_id": 90881999, "body": "@ryyker Doesn&#39;t look like it. The Attribute structure can be found here: <a href=\"https://tronche.com/gui/x/xlib/window-information/XGetWindowAttributes.html\" rel=\"nofollow noreferrer\">tronche.com/gui/x/xlib/window-information/&hellip;</a> ; the only thing that looked interesting was the <code>depth</code> field, but it always seems to be either 24 or 32."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1534938418, "post_id": 51965353, "comment_id": 90882029, "body": "I just <i><a href=\"https://stackoverflow.com/a/40259066/645128\">read this about windows managers in x11</a></i>.  It seems pretty spartan.  I think depth field may have to do with color depth."}, {"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "edited": false, "score": 0, "creation_date": 1534938672, "post_id": 51965353, "comment_id": 90882170, "body": "Ah, ye effectively. Unfortunately I am not creating a window manager, there is already one setup. I only wish to retrieve the topmost window at a location for already built windows. I use X11 because I need to draw some shapes anywhere on the screen without associating it a window, but maybe am I using the wrong library ?"}, {"owner": {"reputation": 7642, "user_id": 436275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a51d31e40d541a9786e0243678029?s=128&d=identicon&r=PG", "display_name": "Uli Schlachter", "link": "https://stackoverflow.com/users/436275/uli-schlachter"}, "edited": false, "score": 0, "creation_date": 1534942269, "post_id": 51965353, "comment_id": 90884567, "body": "What exactly are you trying to do? Put differently: Why are you starting from _NET_CLIENT_LIST? Do you only want toplevel windows as defined by ICCCM (i.e. windows actually managed by the WM), or any windows? I am asking, because I was going to suggest you use XQueryTree on the root window. That returns the list of children in sorted order. Alternatively, you might want to use <code>_NET_CLIENT_LIST_STACKING</code> instead of <code>_NET_CLIENT_LIST</code>. Depending on what you really want, I can turn the relevant part of this into an answer."}, {"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "edited": false, "score": 0, "creation_date": 1534943876, "post_id": 51965353, "comment_id": 90885690, "body": "What I am looking for is the dimensions of the visible window. From what I&#39;ve seen, <code>_NET_CLIENT_LIST</code> gives some inner window with relative <code>x</code> and <code>y</code> position. The <code>_NET_CLIENT_LIST_STACKING</code> looks to be what I am looking for, the topmost always seem to be the last index. One issue with it though: it does not display windows created after the one started after the program. What I am trying to do: retrieve the positions and dimensions of the window I am clicking on."}], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1534945166, "creation_date": 1534945166, "answer_id": 51968224, "question_id": 51965353, "link": "https://stackoverflow.com/questions/51965353/x11-retrieve-topmost-window-according-to-an-area-position/51968224#51968224", "title": "X11 Retrieve Topmost Window According To An Area Position", "body": "<p><a href=\"https://tronche.com/gui/x/xlib/window-information/XQueryTree.html\" rel=\"nofollow noreferrer\"><code>XQueryTree()</code></a> returns the windows in stacking order, topmost last.</p>\n\n<blockquote>\n  <p><strong>Description</strong></p>\n  \n  <p>The <code>XQueryTree()</code> function returns the root ID, the parent window ID,\n  a pointer to the list of children windows (<code>NULL</code> when there are no\n  children), and the number of children in the list for the specified\n  window. <strong>The children are listed in current stacking order, from\n  bottommost (first) to topmost (last).</strong> <code>XQueryTree()</code> returns zero if\n  it fails and nonzero if it succeeds. To free a non-<code>NULL</code> children\n  list when it is no longer needed, use <code>XFree()</code>.</p>\n</blockquote>\n\n<p>I've never used the call for this purpose, and haven't done direct X11 programming in years, but from that I'd imagine you could just loop through the returned list from querying the root window and save the window ID of any window covering your desired location to the same variable every time.  Since the last one found covering that location is the topmost (at least it was when you made the call...), that would be the window ID of the visible window at that location. </p>\n"}], "owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534945166, "creation_date": 1534935535, "last_edit_date": 1534936388, "question_id": 51965353, "link": "https://stackoverflow.com/questions/51965353/x11-retrieve-topmost-window-according-to-an-area-position", "title": "X11 Retrieve Topmost Window According To An Area Position", "body": "<p>I ma currently looking retrieve the window present at a certain position. I've already retrieved the list of windows but I'm not sure how to proceed to retrieve the topmost one.</p>\n\n<p>Here is what I have accomplished so far (contains a testing main):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;X11/Xlib.h&gt;\n#include &lt;X11/Xatom.h&gt;\n\ntypedef struct\n{\n    int x;\n    int y;\n    int w;\n    int h;\n} area_coords_t;\n\nstatic inline Window get_toplevel_parent(Display * display, Window window)\n{\n    Window parent;\n    Window root;\n    Window * children;\n    unsigned int num_children;\n\n    while (1) {\n        if (0 == XQueryTree(display, window, &amp;root, &amp;parent, &amp;children, &amp;num_children)) {\n            fprintf(stderr, \"XQueryTree error\\n\");\n            abort(); //change to whatever error handling you prefer\n        }\n        if (children) { //must test for null\n            XFree(children);\n        }\n        if (window == root || parent == root) {\n            return window;\n        }\n        else {\n            window = parent;\n        }\n    }\n}\n\nstatic inline void print_windows(Display *display, area_coords_t *area)\n{\n    Window *list;\n    Window toplevel;\n    Atom prop = XInternAtom(display, \"_NET_CLIENT_LIST\",False);\n    Atom type;\n    unsigned long len;\n    XWindowAttributes attr;\n\n    if (XGetWindowProperty(display, XDefaultRootWindow(display), prop,\n        0, 1024, False, XA_WINDOW, &amp;type, &amp;(int) { 0 }, &amp;len, &amp;(unsigned long) { 0 }, (unsigned char **) &amp;list) != Success)\n        return;\n    for (unsigned long it = 0; it &lt; len; ++it)\n    {\n        toplevel = get_toplevel_parent(display, list[it]);\n        XGetWindowAttributes(display, toplevel, &amp;attr);\n        /* Retrieve only windows in the given area */\n        //if (area-&gt;x &gt;= attr.x &amp;&amp; area-&gt;x &lt;= attr.x + attr.width &amp;&amp; area-&gt;y &gt;= attr.y &amp;&amp; area-&gt;y &lt;= attr.y + attr.height)\n        printf(\"%dx%dx%dx%d\\n\", attr.x, attr.y, attr.width, attr.height);\n    }\n}\n\nint main(void)\n{\n    Display *display = XOpenDisplay(NULL);\n    /* Should retrieve a window occupying at least a pixel at of the bottom right part of the screen of a 1920x1080 screen */\n    area_coords_t coords = { 1920 / 2, 1080 / 2, 1920 / 2, 1080 / 2 };\n\n    print_windows(display, &amp;coords);\n    return 0;\n}\n</code></pre>\n\n<p>The problem with that is the windows do not seem to be ordered.</p>\n\n<p>How can I retrieve the topmost window to ensure I get the appropriate window for a given position ?</p>\n"}, {"tags": ["c", "function", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 1, "creation_date": 1534933847, "post_id": 51964851, "comment_id": 90879599, "body": "<code>*head=(*head)-&gt;next</code> is generally <code>head = head-&gt;next</code>. You use <code>.</code> for an object, and <code>-&gt;</code> for a pointer to the object. Also, in a linked list, never overwrite the head node, just the pointer."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534933931, "post_id": 51964851, "comment_id": 90879649, "body": "You really should not use <code>*head</code> when iterating over the list, as that will change where <code>*head</code> is pointing. Which means you will lose your actual head."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534934044, "post_id": 51964851, "comment_id": 90879716, "body": "And for linked list operations, no matter what they are, I always suggest you draw them all down on paper. Draw a few lists, with small squares being the nodes, and with arrows being the links between the nodes. Then &quot;perform&quot; the operations step by step, drawing and redrawing between each little step. Once you think you got it all right on paper, then try to translate the drawings into code."}, {"owner": {"reputation": 180, "user_id": 8385942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f635b936a791ee6b06b2bff8df8871?s=128&d=identicon&r=PG&f=1", "display_name": "satyaGolladi", "link": "https://stackoverflow.com/users/8385942/satyagolladi"}, "edited": false, "score": 0, "creation_date": 1534934217, "post_id": 51964851, "comment_id": 90879797, "body": "@And Ro clarify me one thing. You want to make some element of the linked-list as head and head to repalce that or just the data swapping?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534934287, "post_id": 51964851, "comment_id": 90879832, "body": "It&#39;s somewhat unclear what you want. Please show us a drawing and/or your existing code. Overall answer to your question (if I understood it correctly) is: yes it can be done."}, {"owner": {"reputation": 11, "user_id": 10259132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HqywXqiobqo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP84iDCJwB9JuUjvb9m_8wbrXJpWg/mo/photo.jpg?sz=128", "display_name": "And Ro", "link": "https://stackoverflow.com/users/10259132/and-ro"}, "edited": false, "score": 0, "creation_date": 1534934435, "post_id": 51964851, "comment_id": 90879893, "body": "@ satyaGolladi i want to replace the current head and a link, not the data. Thank you all for help"}, {"owner": {"reputation": 11, "user_id": 10259132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HqywXqiobqo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP84iDCJwB9JuUjvb9m_8wbrXJpWg/mo/photo.jpg?sz=128", "display_name": "And Ro", "link": "https://stackoverflow.com/users/10259132/and-ro"}, "reply_to_user": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534934501, "post_id": 51964851, "comment_id": 90879936, "body": "@SusmitAgrawal and I understand, however this is a function, so it does not overwrite right?"}, {"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1534934775, "post_id": 51964851, "comment_id": 90880058, "body": "The pointer value passed does not get overwritten. The value at the pointer does. You should read up on how exactly pointers work in functions."}, {"owner": {"reputation": 11, "user_id": 10259132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HqywXqiobqo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP84iDCJwB9JuUjvb9m_8wbrXJpWg/mo/photo.jpg?sz=128", "display_name": "And Ro", "link": "https://stackoverflow.com/users/10259132/and-ro"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534938032, "post_id": 51964851, "comment_id": 90881814, "body": "@Jabberwocky I&#39;ve updated it and added the problem so you can understand more clearly, can you explain how can it be done?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534938850, "post_id": 51964851, "comment_id": 90882298, "body": "Are there any reason that you doesn&#39;t do a simple swap of data and leave the linked list unchanged? When data is just a simple <code>int</code> it&#39;s much easier to swap data"}, {"owner": {"reputation": 11, "user_id": 10259132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HqywXqiobqo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP84iDCJwB9JuUjvb9m_8wbrXJpWg/mo/photo.jpg?sz=128", "display_name": "And Ro", "link": "https://stackoverflow.com/users/10259132/and-ro"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534938990, "post_id": 51964851, "comment_id": 90882398, "body": "@4386427 I know it is much simpler to this, however that isn&#39;t what the problem wants - it specifically needs the link swap"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534940173, "post_id": 51964851, "comment_id": 90883220, "body": "See this for swapping two nodes in a linked list <a href=\"https://stackoverflow.com/a/15316061/4386427\">stackoverflow.com/a/15316061/4386427</a>"}, {"owner": {"reputation": 11, "user_id": 10259132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HqywXqiobqo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP84iDCJwB9JuUjvb9m_8wbrXJpWg/mo/photo.jpg?sz=128", "display_name": "And Ro", "link": "https://stackoverflow.com/users/10259132/and-ro"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534941321, "post_id": 51964851, "comment_id": 90883960, "body": "@4386427 a worthwhile post, thank you, however it doesn&#39;t answer my question"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1534946969, "creation_date": 1534946969, "answer_id": 51968760, "question_id": 51964851, "link": "https://stackoverflow.com/questions/51964851/swapping-head-of-linked-list-with-a-link-within-it/51968760#51968760", "title": "Swapping head of linked list with a link within it?", "body": "<p>This can be solved if you write a function that can move one element in a linked list in front of another element in the same linked list.</p>\n\n<p>As input the function should take</p>\n\n<ul>\n<li><p>A pointer to the <code>head</code> pointer'</p></li>\n<li><p>A pointer b to the element to be moved</p></li>\n<li><p>A pointer a to the element that b shall be moved in front of</p></li>\n</ul>\n\n<p>Like</p>\n\n<pre><code>void move_b_in_front_of_a(cvor **head, cvor* b, cvor* a) { ... }\n</code></pre>\n\n<p>When calling the function is required that</p>\n\n<ul>\n<li><p>Both <code>a</code> and <code>b</code> points to elements in the list <code>*head</code> </p></li>\n<li><p>That <code>a</code> is located before <code>b</code> in the list</p></li>\n</ul>\n\n<p>The implementation could be like:</p>\n\n<pre><code>void move_b_in_front_of_a(cvor **head, cvor* a, cvor* b)\n{\n  // Find the element just before a\n  cvor* a_prev = find_element_before(head, a);\n\n  // Find the element just before b (start from a)\n  cvor* b_prev = find_element_before(a, b);\n  if (b_prev == NULL) { .... add error handling ....}\n\n  // Take b out of the list\n  b_prev-&gt;next = b-&gt;next;\n\n  // Insert b in front of a\n  if (a_prev == NULL)\n  {\n    (*head) = b;\n  }\n  else\n  {\n    a_prev-&gt;next = b;\n  }\n  b-&gt;next = a;\n}\n</code></pre>\n\n<p>In the above code I used the function</p>\n\n<pre><code>cvor* find_element_before(cvor* l, cvor* e)\n{\n  // Add code to find the element just before e in the list l\n  // Return NULL if e is first element\n  // Add error handling if element e isn't found\n\n  ...\n  ...\n\n  return pointer_to_element_just_before_e;\n}\n</code></pre>\n\n<p>that you'll need to implement.</p>\n\n<p>When you have these two functions it should be pretty easy to implement the <code>intertwine</code> function. </p>\n\n<p>Here are some pseudo code for the function that might get you started:</p>\n\n<pre><code>current_element = *head\nexpected-type = odd\nloop:\n    if current_element is expected-type\n        toggle expected-type\n        current_element = next\n        if current_element is NULL return\n    else\n        find_element with_correct_type\n        if no element found return\n        move found_element in front of current_element  (use above function)\n        current_element = found_element\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10259132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HqywXqiobqo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP84iDCJwB9JuUjvb9m_8wbrXJpWg/mo/photo.jpg?sz=128", "display_name": "And Ro", "link": "https://stackoverflow.com/users/10259132/and-ro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 51968760, "answer_count": 1, "score": -1, "last_activity_date": 1534947407, "creation_date": 1534933759, "last_edit_date": 1534947407, "question_id": 51964851, "link": "https://stackoverflow.com/questions/51964851/swapping-head-of-linked-list-with-a-link-within-it", "title": "Swapping head of linked list with a link within it?", "body": "<p>To clarify the title: I am traversing the linked list like so <code>*head=(*head)-&gt;next</code> because it is a function. In my function I pick my <strong>current</strong> <code>head</code> and another link that is between the <strong>current</strong> <code>head</code> and the end of the list to swap with. </p>\n\n<p>What I want is to make a function that would swap the <code>head</code> and the link (not only data) knowing that all the conditions of the swap are met; meaning the link isn't the current <code>head</code> or the link isn't a <code>NULL</code>. Can it be done like that or do I have to try something else?</p>\n\n<p>Thanks in advance.</p>\n\n<p>since my question is unclear, ill give you the problem.</p>\n\n<p>I need to make a function like this:</p>\n\n<pre><code>void intertwine(cvor **head)\n</code></pre>\n\n<p>I recieve a linked list with random numbers. What i need to do is to swap the links until it look like so: uneven number, even number, uneven, even etc.</p>\n\n<p>i must respect the order the uneven and even are in.</p>\n\n<p>if there are no equal amout of even and uneven just leave them in the order they are in within the list.</p>\n\n<p>here are 2 examples:</p>\n\n<p>input: 11, 7, 5, 16, 12, 15, 17, 13, 10, 4, 1</p>\n\n<p>output:11, 16, 7, 12, 5, 10, 15, 4, 17, 13, 1</p>\n\n<p>input: 1, 3, 2, 4</p>\n\n<p>output: 1, 2, 3, 4</p>\n\n<p>my current code looks like this(<strong>unfinished</strong>)</p>\n\n<p>edit2: sorry forgot the language barrier</p>\n\n<pre><code>typedef struct atom{\n    int el;\n    struct atom *next;\n} cvor;\n\nvoid intertwine (cvor **head){\n    cvor *pom,int br=1;\n\n    pom=*head;\n    while(*head){\n        if((*head)-&gt;el%2==(br%2)){\n            pom=(*head)-&gt;next;\n            while(pom){\n                if(pom-&gt;el%2==(br+1)%2)break;\n                pom=pom-&gt;next;\n            }\n            if(pom==NULL) return;\n</code></pre>\n\n<p>Here at the end is when the swap I want would occour.</p>\n"}, {"tags": ["c", "arrays", "function", "return"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534931997, "post_id": 51964296, "comment_id": 90878595, "body": "Don&#39;t forget that array indexes are <i>zero-based</i>. I.e. an array of ten elements will have indexes from <code>0</code> to <code>9</code> (inclusive)."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1534932013, "post_id": 51964296, "comment_id": 90878605, "body": "Note: C &#39;s indexes are zero-based. (<code>0..9</code> in your case)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1534932077, "post_id": 51964296, "comment_id": 90878637, "body": "This is one of the better first questions I&#39;ve seen. Welcome to SO!"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1534932105, "post_id": 51964296, "comment_id": 90878660, "body": "<code>m1</code> is the memory address where the data are stored. You write the data to that memory address. Then you pass the same memory address to another function. The data are there, in that memory, where <code>m1</code> is pointing. When you pass <code>m1</code> to a function, you don&#39;t pass the whole array, you only pass a single value, that is the address of the memory."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1534931927, "creation_date": 1534931927, "answer_id": 51964321, "question_id": 51964296, "link": "https://stackoverflow.com/questions/51964296/how-does-a-void-type-function-return-a-value-to-a-local-variable-in-c-without-po/51964321#51964321", "title": "How does a void type function return a value to a local variable in C without pointers?", "body": "<p>Arguments are passed by value in C, but arrays decay to pointers to the first element. So the memory being accessed is the same, which is why the elements are changing.</p>\n\n<p>You can verify this by adding code to print out the value of the array (as a pointer) inside each function, like this in <code>main()</code>:</p>\n\n<pre><code>printf(\"the array is at %p\\n\", (void *) m1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 0, "last_activity_date": 1534931964, "creation_date": 1534931964, "answer_id": 51964328, "question_id": 51964296, "link": "https://stackoverflow.com/questions/51964296/how-does-a-void-type-function-return-a-value-to-a-local-variable-in-c-without-po/51964328#51964328", "title": "How does a void type function return a value to a local variable in C without pointers?", "body": "<p>Passing an array as the argument decayed to pointer in C language. Whenever arrays are passed as the arguments to functions, they are always passed by using the \u2018Pass by reference\u2019 mechanism</p>\n"}], "owner": {"reputation": 9, "user_id": 10258559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zQdMIdWk3DU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOO8EZcQ7sR7fZYqed1gEaLb16zrw/mo/photo.jpg?sz=128", "display_name": "Akash kariappa", "link": "https://stackoverflow.com/users/10258559/akash-kariappa"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1534932464, "answer_count": 2, "score": 0, "last_activity_date": 1534932172, "creation_date": 1534931856, "last_edit_date": 1534932172, "question_id": 51964296, "link": "https://stackoverflow.com/questions/51964296/how-does-a-void-type-function-return-a-value-to-a-local-variable-in-c-without-po", "closed_reason": "Duplicate", "title": "How does a void type function return a value to a local variable in C without pointers?", "body": "<p>Here's a program to read an array and print it using functions, in C:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid read_arr(int a[10][10],int row,int col)\n{\n    int i,j;\n    for(i=1;i&lt;=row;i++)\n    {\n        for(j=1;j&lt;=col;j++)\n        {\n            printf(\"\\nEnter Element %d %d : \",i,j);\n            scanf(\"%d\",&amp;a[i][j]);\n        }\n    }\n}\nvoid print_arr(int m[10][10],int row,int col)\n{\n    int i,j;\n    for(i=1;i&lt;=row;i++)\n    {\n        for(j=1;j&lt;=col;j++)\n        {\n            printf(\"%d \",m[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\nvoid main()\n{\n    int m1[10][10],row,col;\n    printf(\"Enter number of rows :\\n\");\n    scanf(\"%d\",&amp;row);\n    printf(\"Enter number of colomns :\\n\");\n    scanf(\"%d\",&amp;col);\n    read_arr(m1,row,col);\n    printf(\"\\n\");\n    print_arr(m1,row,col);\n}\n</code></pre>\n\n<p>Since we're inputting values into the array 'a' in the function 'read_arr', how are those values being passed into the local variable 'm1' in the 'main' function (we know this because when we pass 'm1' to the function 'print_arr', the output correctly shows the entered array), since we are not returning 'a' from 'read_arr'.</p>\n\n<p>(<strong>Iff</strong> it is possible can you explain how 'm1' is getting values, by explaining how the control goes about in the program)</p>\n"}, {"tags": ["c", "arrays", "character", "scanf", "c-strings"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534931340, "post_id": 51963936, "comment_id": 90878242, "body": "You don&#39;t seem to null terminate the string, so strlen will go bananas."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1534931749, "post_id": 51963936, "comment_id": 90878461, "body": "You do a <code>scanf</code>, which consumes input, and in <code>getword</code> you do <code>getchar</code>, which also consumes input. Make up your mind, but don&#39;t do both."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1534931893, "post_id": 51963936, "comment_id": 90878538, "body": "Instead of <code>while(scanf</code> do <code>while(getword</code> and don&#39;t forget to first set <code>w[0]=&#39;\\0&#39;;</code> and to terminate <code>w</code> before calling <code>strlen</code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1534933575, "post_id": 51963936, "comment_id": 90879446, "body": "You read a string into <code>s</code>, pass it to <code>getword</code> and completely ignore that string but replace it by another one. Doesn&#39;t make much sense IMHO..."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2035824, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ce6dcdf5ac38aa22f77782b860ba97ea?s=128&d=identicon&r=PG", "display_name": "Dragon Wolf", "link": "https://stackoverflow.com/users/2035824/dragon-wolf"}, "edited": false, "score": 0, "creation_date": 1534954960, "post_id": 51965799, "comment_id": 90892889, "body": "hmmm, while those made sense upon reading this morning, upon execution, this is not performing as intended :(. Using that it wont read &quot;no-brainer&quot;      but it will read n=3 and output s= one, basically the latter half of the string. still playing with this to see what I can do to fix........"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536966088, "post_id": 51965799, "comment_id": 91627382, "body": "<code>scanf</code> does not return a count of characters written because <code>scanf</code> is used for reading, not writing. <code>scanf</code> returns the number of items successfully read (which can be 0 if the first item failed) or <code>EOF</code> if the end of input was reached before any item could be read. For <code>scanf(&quot;%s&quot;, s)</code> there is only a single item (<code>%s</code>), so the possible return values are <code>1</code>, <code>0</code>, and <code>EOF</code>."}], "tags": [], "owner": {"reputation": 9, "user_id": 6040056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be42b320304e8ef1b259bf568f56e8dc?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/6040056/peter-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1534937089, "creation_date": 1534937089, "answer_id": 51965799, "question_id": 51963936, "link": "https://stackoverflow.com/questions/51963936/c-returning-character-string-count-and-character-string-issues-rusty-in-c/51965799#51965799", "title": "C returning character string count and character string issues (rusty in C....)", "body": "<p>The first issue, your program DOES NOT STOP THE APPLICATION. because in the while loop \n    while(scanf(\"%s\", s)){\nscanf will return number of characters written if success, otherwise a negative number is returned. int means this while loop is non-stop.</p>\n\n<p>The second issue, you should use fgets as a replacement.</p>\n\n<p>ex:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint getword(char *w);\nint main(){\n\n    char s[255];\n    int len = 0;\n\n    len = getword(s);\n    printf(\"n=%d, s=[%s]\\n\", len, s);\n\n    return 0;\n}\n\nint getword(char *w)\n{\n    char c;\n    int counter = 0;\n\n    printf(\"Enter text: \");\n    w[0] = '\\0';\n    while((c = getchar()) != '\\n' &amp;&amp; c != '\\t' &amp;&amp; c != '\\0' &amp;&amp; c != EOF )\n    {\n        w[0] = c;\n        fgets(w+1, 255, stdin);\n        counter = strlen(w);\n    }\n    w[--counter] = '\\0';\n    return counter;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2035824, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ce6dcdf5ac38aa22f77782b860ba97ea?s=128&d=identicon&r=PG", "display_name": "Dragon Wolf", "link": "https://stackoverflow.com/users/2035824/dragon-wolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534955843, "creation_date": 1534930702, "last_edit_date": 1534955843, "question_id": 51963936, "link": "https://stackoverflow.com/questions/51963936/c-returning-character-string-count-and-character-string-issues-rusty-in-c", "title": "C returning character string count and character string issues (rusty in C....)", "body": "<p>OK, so here I am trying to get back into C for a course that starts this upcoming semester. I have not used C in about ten years, and I am having some issues here.....</p>\n\n<p>I am trying a simple program that is supposed to use a method getword() that accepts a pointer to a character string array as an argument. </p>\n\n<p>The method is to be delimited by a tab character '\\t', the EOF signal, or a newline character '\\n'. The method is also to return the length of the current word that it found in the character string array....</p>\n\n<p>I was finally able to (sort of) get it to work; but I have two unique issues that I could use some guidance on: \nONE: How can I get it to read a character string with a space in it? \nTWO: How can I properly flush the input so it stops reading the last word from getword repeatedly?</p>\n\n<p>Here is all the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"getword.h\"\n\nint main(){\n\n    char s[255];\n    printf(\"Enter text: \");\n    fflush(stdout);\n    while(scanf(\"%s\", s)){\n        printf(\"n=%d, s=[%s]\\n\", getword(s), s);\n\n        fflush(stdout);\n\n    }\n    return 0;\n}\n\nint getword(char *w){\n    int c;\n    int counter;\n    counter = 0;\n    while((c = getchar()) != '\\n' &amp;&amp; c != '\\t' &amp;&amp; c != '\\0' &amp;&amp; c != EOF ){\n        w[counter] = c;\n        counter++;\n    }\n    return (int)strlen(w);\n}\n</code></pre>\n\n<p>When I run this as is, using the input \"no-brainer\\tone\\t\\n\" the output displays what I hope for, but DOES NOT STOP THE APPLICATION:</p>\n\n<pre><code>Enter text: no-brainer  one \nn=10, s=[no-brainer]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\nn=3, s=[one]\n</code></pre>\n\n<p>I dont know how to flush the input once it reads both words delimited by a tab as above so it stops reading just the last one it read and outputting those values.....essentially I want it to output just the first two lines under \"Enter text: no-brainer     one\"</p>\n\n<p>My second issue that I can't find a work around for is when there is a space in the char string to be read. For this application, a word like \"house cat\" with a space is ONE WORD and should be read as n=9. When I try to use </p>\n\n<pre><code>scanf(\"%[^\\n]\", s) \n</code></pre>\n\n<p>as the input, it will properly read \"house cat\" and say n=10 (no doubt because of \\0 or \\n but I can deal with that later) but it will no longer properly read \"no-brainer\\tone\\t\\n\" as it did before, instead it reads the whole line for \"no-brainer\\tone\\t\\n\" and outputs n=16. </p>\n\n<p>So is there another way to do this while reading a space character and still including that as a character in the \"word\" for the getword() function?</p>\n\n<p>EDIT: \nThanks for the suggestions! Still having some problems though, for example, when using while(getword(s) > 0) it never seems to read the first part of any line, only the parts after the first whitespace.......no Idea why. Using teh other suggestion does something similar....... for further clarification, I am basically trying to do a basic, simple lexical analyzer (super super basic) and the output I am TRYING to achieve, with the input of \"no-brainer\\tone\\t\" (no-brainer     one     &lt;---each with a tab after the word) should look like: </p>\n\n<pre><code>n=10 s=[no-brainer]\nn=3 s=[one]\nn=0 s=[] &lt;&lt;&lt;&lt;&lt;&lt;&lt;When \\n is read\nn=-1 s=[] &lt;&lt;&lt;&lt;&lt;&lt;&lt;for when EOF or \\0 is reached.\n</code></pre>\n\n<p>input of \"house cat\" with a SPACE should output: </p>\n\n<pre><code>n=9 s=[house cat]\n</code></pre>\n\n<p>right now, I can get ONE OR THE OTHER TO GIVE PROPER OUTPUT(but application wont terminate, ill get to that later), but NOT BOTH, and I really believe both SHOULD be able to be done in the same function....also keep in mind for the purposes of what I am trying to do here, I don't care that the string will get overwritten since its a pointer.....just want it to output the intended output</p>\n\n<p>I tried something like this just now, but still not working as intended :(</p>\n\n<pre><code>    int c;\nint counter;\ncounter = 0;\nw[0] = '\\0';\nwhile((c = getchar()) != EOF ){\n    if(c == EOF &amp;&amp; strlen(w) == 0){\n        return c;\n    } else if(c == '\\n' &amp;&amp; strlen(w) == 0){\n        return 0;\n    }else if(c == '\\t' || c == '\\n' || c == EOF){\n        if(c == '\\n'){\n            ungetc(c, stdin);\n            break;\n        }\n        break;\n    }\n    w[counter] = c;\n    counter++;\n\n}\nw[counter] = '\\0';\nreturn (int)strlen(w);\n</code></pre>\n"}, {"tags": ["c", "x86", "cpu-cache", "memory-barriers", "rdtsc"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1534986093, "post_id": 51963834, "comment_id": 90904139, "body": "<i>between two time stamps, there are three instructions</i>.  No, there are three C statements.  You didn&#39;t show the asm the compiler emitted.  There will be <i>at least</i> two extra <code>mov</code> instructions after the first <code>rdtsc</code> but before the 2nd, to save the results in registers that won&#39;t be overwritten.  Or a shift + OR + mov, or shift + LEA.  <a href=\"https://stackoverflow.com/a/51907627\">Get CPU cycle count?</a>.  Since you compiled with optimization enabled, that&#39;s probably all (and will run in parallel with the load), but don&#39;t make the mistake of forgetting talking about C like it&#39;s actual asm."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 1, "creation_date": 1534986243, "post_id": 51963834, "comment_id": 90904175, "body": "The compiler can optimize away <code>int tmp = array[ 0 ]</code> because <code>tmp</code> is not used.  Check the generated assembly code. Also, make sure you fix the core frequency."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 1, "creation_date": 1534986512, "post_id": 51963834, "comment_id": 90904222, "body": "<code>clock_gettime</code> cannot be used to measure the perf of such tiny pieces of code because its own overhead can be relatively massive. Also it only works at the nanoseconds granularity."}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1535018316, "post_id": 51963834, "comment_id": 90915663, "body": "@HadiBrais: But <code>clock_gettime</code> is said to be be the most precise method. What I understand from your comment is that, measuring cache miss/hit via application layer is not possible. What we can find is only TSC value which is also not convertible to time due to many issues."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1535024060, "post_id": 51963834, "comment_id": 90919029, "body": "Measuring a <i>single</i> cache miss is really hard.  Much better to create a dependency chain of cache misses that HW prefetching can&#39;t handle, e.g. a very long linked list with the elements randomly scattered in different cache lines.  (at least 2 cache-lines apart to defeat the L2 spatial prefetcher).  Then you time a whole loop that traverses it, or see how many iterations you do in 1 second (with a circular list for example).   Measuring cache-miss latency is a fairly well-studied problem, google for what other people have done."}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1535029395, "post_id": 51963834, "comment_id": 90922327, "body": "@PeterCordes: You mentioned prefetching which I was planning to discuss that later. The question is, how can we be sure that HW prefetcher doesn&#39;t bring <code>array[0]</code> after <code>_mm_clflush</code> and prior to <code>int tmp = array[0]</code>?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1535031378, "post_id": 51963834, "comment_id": 90923694, "body": "Because there&#39;s nothing that could trigger it before the demand-load runs.  It&#39;s not magic, see Intel&#39;s optimization manual for descriptions of what triggers the L1d / L2 prefetchers.  But that&#39;s a moot point if you construct a giant linked list and traverse it instead of trying to measure a <i>single</i> access on its own."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1535043334, "post_id": 51963834, "comment_id": 90931220, "body": "<code>CLOCK_MONOTONIC</code> is generally good for measuring the perf of code that takes more than a microsecond. But you&#39;re measuring something that may take less than 100 nanoseconds. Check <a href=\"https://stackoverflow.com/questions/13772567/get-cpu-cycle-count/51907627#51907627\">this</a> answer on how to convert TSC cycle counts to SI time units."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1535140052, "post_id": 51963834, "comment_id": 90972562, "body": "Re: update: The L2 spatial prefetcher may be generating a request for the adjacent cache line while the first cache line is still in flight."}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1535163729, "post_id": 51963834, "comment_id": 90977734, "body": "So, how exactly cache attacks, e.g. meltdown and spectre, overcome such issue? Basially they have to disable hw prefetcher since they try to measure adjacent addresses in order to find if they are hit or miss. I am not going to attack because there are some kernel updates to patch them."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1535208895, "post_id": 51963834, "comment_id": 90987047, "body": "@mahmood: didn&#39;t see your reply because you didn&#39;t \\@ notify me.  The cache-read  side-channel as part of a Meltdown or Spectre attack typically uses a stride large enough that HW prefetching can&#39;t detect the access pattern.  e.g. on separate pages instead of contiguous lines.  One of the first google hits for <code>meltdown cache read prefetch stride</code>was <a href=\"https://medium.com/@mattklein123/meltdown-spectre-explained-6bc8634cc0c2\" rel=\"nofollow noreferrer\">medium.com/@mattklein123/&hellip;</a>, which uses a stride of 4096.  It could be tougher for Spectre, because your stride is at the mercy of the &quot;gadgets&quot; you can find in the target process."}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1535278001, "post_id": 51963834, "comment_id": 91000597, "body": "@peter-cordes: Thanks for the help. I really appreciate that."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1535656374, "post_id": 51963834, "comment_id": 91158869, "body": "You can certainly measure cache misses with (most implementations of) <code>clock_gettime</code>. Such methods usually take about 20-30 ns, with nanosecond resolution, and cache misses take between 50-100 ns. Even if the <code>clock</code> calls took longer than a single cache miss you could determine the difference between a cache hit and a miss if their timing was stable. It&#39;s <i>harder</i> to measure such short events, but it can be done. Don&#39;t handicap yourself unnecessarily though, use <code>rdtsc</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1535032366, "post_id": 51977139, "comment_id": 90924371, "body": "Even in golbolt, when I write <code>int tmp=array[0]; tmp++;</code>, the assembly code in the middle of the page shows <code>clflush lfence lfence rdtsc lfence lfence</code> and then some <code>mov</code> instructions. You can check that."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1535034792, "post_id": 51977139, "comment_id": 90926029, "body": "@mahmood: yeah, because the <code>tmp++</code> result is still unused.  I updated my answer to explain more clearly what will work and what won&#39;t.  Why don&#39;t you want to use <code>*(volatile int*) array</code>, which my answer shows does work without having to print any extra stuff?"}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1535139836, "post_id": 51977139, "comment_id": 90972471, "body": "<code>(void) *(volatile int*)array;</code> works but I was trying to understand the logic step by step. Please see <code>UPDATE 1</code> in the first post."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 1, "creation_date": 1535649591, "post_id": 51977139, "comment_id": 91155596, "body": "I think there is still a problem. The compiler seems to insist on emitting two stores inside the first timed section. This would definitely impact the measurement. See the <a href=\"https://godbolt.org/z/Mdx8gw\" rel=\"nofollow noreferrer\">code</a>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1535650090, "post_id": 51977139, "comment_id": 91155840, "body": "@HadiBrais: huh, that&#39;s weird.  clang doesn&#39;t do that.  I guess the <code>_mm_lfence()</code> is making gcc want to spill a temporary or something?  IDK why it stores the same thing twice.  At least the <code>lfence</code> doesn&#39;t wait for the store to commit, only for it to be written into the store buffer.  There&#39;s no <code>mfence</code> in the timed region.  The main concern is more accesses to stack memory where the array lives, not so much the store instruction itself.  There&#39;s already a shift and or in the timed region."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1535650427, "post_id": 51977139, "comment_id": 91155998, "body": "@PeterCordes Yeah, what is gcc doing creating stores out of thin air like that? Makes no sense."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1535650688, "post_id": 51977139, "comment_id": 91156123, "body": "Looks like a &quot;missed-optimization&quot; bug that should get reported.  Do you have time to file it, or should I?  It doesn&#39;t happen with a simpler version only doing 1 miss and 1 hit: <a href=\"https://godbolt.org/z/KAbwWO\" rel=\"nofollow noreferrer\">godbolt.org/z/KAbwWO</a>.  (The Godbolt link from my answer, with the bug fixed using <code>(void) *(volatile int*)(array+30)</code>.  i.e. the same thing I showed asm output for in the 2nd section.  I still get that without extra stores.)  So something is weird with a larger function."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1535651132, "post_id": 51977139, "comment_id": 91156295, "body": "Regarding the other three non-memory instructions mov/sal/or, aren&#39;t these a bug too? IDK whether these instructions are useful or redundant, but if they are needed, then they are probably used for the printf call. I think the compiler is not supposed to schedule instructions across lfence."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 1, "creation_date": 1535651510, "post_id": 51977139, "comment_id": 91156480, "body": "I used clang to compile the code and got the same measurements. These two stores don&#39;t seem to have any impact that matters."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1535652178, "post_id": 51977139, "comment_id": 91156776, "body": "@HadiBrais: I don&#39;t think gcc &quot;knows&quot; about <code>lfence</code>&#39;s instruction-serialization effect.  The reorder-blocking is probably limited to loads/stores to non-local variables, like for reordering across a non-inline function call or <code>asm(&quot;&quot;:::&quot;memory&quot;)</code>.  It would be legal for the compiler to just <code>mov</code> to 2 other registers, and do the shift/or outside the timed region.  (Or if the final time delta was only 32 bit, to optimize away doing anything with the high half at all, saving instructions).  I notice clang chooses to do the shift/or right after <code>rdtsc</code>."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 3, "last_activity_date": 1535663822, "last_edit_date": 1535663822, "creation_date": 1534987349, "answer_id": 51977139, "question_id": 51963834, "link": "https://stackoverflow.com/questions/51963834/using-time-stamp-counter-and-clock-gettime-for-cache-miss/51977139#51977139", "title": "Using time stamp counter and clock_gettime for cache miss", "body": "<p><strong>You broke Hadi's code by removing the read of <code>tmp</code> at the end, so it gets optimized away by gcc.</strong>  There is no load in your timed region.  C statements are not asm instructions.</p>\n\n<p>Look at the compiler-generated asm, e.g. <a href=\"https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAOgAYB2ACwBOAKyCATAGZhsucIAcpAFZdSrZrVDIApBIBCe/aQDOqAK7FkHAOR6peWslbmsAah1SAwiYL5U3Aie2Dq8AIL2js6umB7evvj0gcGhEdJRLu6eXgAeCgBsjgTEjslSIeGpRW4AtsyOEACUqTr8huFunW7VzMTEzACeOqL6bpy8vB6iACKe7WFdbjTEbhDd9N1x0268c5vZYxN7eEZGbs0di1edvf1DI/szW91zqYvmRfmCAPoEbgScUj/CRA1AANyB%2BCoVFelUunW%2BNRq31YVEwTkwTVhCy6iORzioLhMCDWenyt0Gw1Gk2G22aUnmizxKLRGKxDJa8LczNR6Os7MZXQBz2%2B32I6AIJmQAreuKRLL5mPpgs61QINQADs8KfdqVNZhyuQB6I0QMGoPDoRpuABUZtQGgIeHY6wINsaOuxTPlvLZytlnQIEhFYolUplXJ5rP5/rhOM6UKozyDbgAtP9OF6uhqSvQqKSJBJE90TB4JKIXMMvLQ9CC3MXYxFIz7o0qs4HOCHxZLpY3vcjfTH29yW4qI/HgV2w73h1Gx32uuDk8H0wDhzmivmyxJB7FwZhiAhMMx0CWyxXzFWa4XQWDzuvcwQt7WangTKXkANnJhS2/z5XRGrWtITwaFUyXRsAzcYhMAISxaB2bFWmmGxGnUEAbFEGxSFoDDeGw1AMK8U4DDcMxLGsMspE4bCCDw1C0IAaxAKR8m4SR%2BE4RRRGEXgFAEfIFEEdCbEEbCai4CYcPo0hCJsbCTBAXhSDomx8LQuBYBgRAUFQTVnQPchKDQfT2GIEBgAUEEqGdAgD0UiAACMZMcxxegGDCaNIEyanRAgAHlaFYDy1OwrA6i0dgZPwGDkCdMEfxkzAckwZBzDszzsKKTBWBk4o8AkmwaLQjQtBQEjjFYPBHMUyA0NQDUnToRSbFTfypDTAB1NhWAUiwrA4TgSowrDpNC2SMLyfJUy%2BNxgGQZA3AUbhgwgXBCBIKjATcLw9I1AyVnsKRrWIgwjFo%2BjGjQo8TwPSgmJACRhG4fheGEfgJH4fjOHyd7ZGE3LRPEkB8ikPhQd4CGoakSGxvwib5NMJSVMu0hNJ0iwCA1dKjIgEz9rMljSEwfAiHMwEAHd%2Bg1TLhsw7DcPGuSjrcCnCAQNwppmwQ5oWpaVou0KrtIG6sHMpoRLE0gJNY7hhFY%2BXfoVhXhMZ%2BG5IU5HVPUh6npet6Pq%2B3gfr%2B4QAYwqQGZkjWUaFtHtIgJB8YO3HncJ5xNGAfIpJs1g7OIBznPG1zaHczLvL03z6EC4LoswCLgCi8aYtS%2BLEvG5LUvS2wvOywH4fywrivUT3yrOgx1Gq2qJYapraBatqOtTbrWF60x%2BusLg6dGtWCMmgpubcD2tDcNjeD4VZ1rJragV20yDyoiQToqwWdZF48xfu0hmKkMGChh/hWIEERBF3/JJeB8ZlN7hHNeU7WGJEiQraZjDV8fhKA7wOgQEEIA%3D%3D%3D\" rel=\"nofollow noreferrer\">on the Godbolt compiler explorer</a>.  You should always be doing this when you're trying to microbenchmark really low-level stuff like this, especially if your timing results are unexpected.</p>\n\n<pre><code>    lfence\n    clflush [rcx]\n    lfence\n\n    lfence\n    rdtsc                     # start of first timed region\n    lfence\n       # nothing because tmp=array[0] optimized away.\n    lfence\n    mov     rcx, rax\n    sal     rdx, 32\n    or      rcx, rdx\n    rdtsc                     # end of first timed region\n    mov     edi, OFFSET FLAT:.LC2\n    lfence\n\n    sal     rdx, 32\n    or      rax, rdx\n    sub     rax, rcx\n    mov     rsi, rax\n    mov     rbx, rax\n    xor     eax, eax\n    call    printf\n</code></pre>\n\n<p>You get a compiler warning about an unused variable from <code>-Wall</code>, but you can silence that in ways that still optimize away.  e.g. your <code>tmp++</code> doesn't make <code>tmp</code> available to anything outside the function, so it still optimizes away.  Silencing the warning is not sufficient: print the value, return the value, or assign it to a <code>volatile</code> variable outside the timed region.  (Or use inline <code>asm volatile</code> to require the compiler to have it in a register at some point.  Chandler Carruth's CppCon2015 talk about using <code>perf</code> mentions some tricks: <a href=\"https://www.youtube.com/watch?v=nXaxk27zwlk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=nXaxk27zwlk</a>)</p>\n\n<hr>\n\n<p><strong>In GNU C (at least with gcc and clang <code>-O3</code>), you can force a read by casting to <code>(volatile int*)</code></strong>, like this:</p>\n\n<pre><code>// int tmp = array[0];           // replace this\n(void) *(volatile int*)array;    // with this\n</code></pre>\n\n<p>The <code>(void)</code> is to avoid a warning for evaluating an expression in a void context, like writing <code>x;</code>.</p>\n\n<p>This kind of looks like strict-aliasing UB, but my understanding is that gcc defines this behaviour.  The Linux kernel casts a pointer to add a <code>volatile</code> qualifier in its <code>ACCESS_ONCE</code> macro, so it's used in one of the codebases that gcc definitely cares about supporting.  You could always make the whole array <code>volatile</code>; it doesn't matter if initialization of it can't auto-vectorize.</p>\n\n<p>Anyway, this compiles to </p>\n\n<pre><code>    # gcc8.2 -O3\n    lfence\n    rdtsc\n    lfence\n    mov     rcx, rax\n    sal     rdx, 32\n    mov     eax, DWORD PTR [rsp]    # the load which wasn't there before.\n    lfence\n    or      rcx, rdx\n    rdtsc\n    mov     edi, OFFSET FLAT:.LC2\n    lfence\n</code></pre>\n\n<p>Then you don't have to mess around with making sure <code>tmp</code> is used, or with worrying about dead-store elimination, CSE, or constant-propagation.  In practice the <code>_mm_mfence()</code> or something else in Hadi's original answer included enough memory-barriering to make gcc actually redo the load for the cache-miss + cache-hit case, but it easily could have optimized away one of the reloads.</p>\n\n<hr>\n\n<p>Note that this can result in asm that loads into a register but never reads it.  Current CPUs do still wait for the result (especially if there's an <code>lfence</code>), but overwriting the result could let a hypothetical CPU discard the load and not wait for it.  (It's up to the compiler whether it happens to do something else with the register before the next <code>lfence</code>, like <code>mov</code> part of the <code>rdtsc</code> result there.)</p>\n\n<p>This is tricky / unlikely for hardware to do, because the CPU has to be ready for exceptions, see <a href=\"https://stackoverflow.com/questions/46080327/what-is-the-penalty-of-mixing-evex-and-vex-encoded-scheme/46086289?noredirect=1#comment91161408_46086289\">discussion in comments here</a>.)  RDRAND reportedly does work that way (<a href=\"https://stackoverflow.com/questions/10484164/what-is-the-latency-and-throughput-of-the-rdrand-instruction-on-ivy-bridge/11042778#11042778\">What is the latency and throughput of the RDRAND instruction on Ivy Bridge?</a>), but that's probably a special case.</p>\n\n<p>I tested this myself on Skylake by adding an <code>xor eax,eax</code> to the compiler's asm output, right after the <code>mov eax, DWORD PTR [rsp]</code>, to kill the result of the cache-miss load.  That didn't affect the timing.</p>\n\n<p>Still, this is a potential gotcha with discarding the results of a <code>volatile</code> load; future CPUs might behave differently.  It might be better to sum the load results (outside the timed region) and assign them at the end to a <code>volatile int sink</code>, in case future CPUs start discarding uops that produce unread results.  But still use <code>volatile</code> for the loads to make sure they happen where you want them.</p>\n\n<hr>\n\n<p><strong>Also don't forget to do some kind of warm-up loop to get the CPU up to max speed</strong>, unless you <em>want</em> to measure the cache-miss execution time at idle clock speed.  It looks like your empty timed region is taking a lot of reference cycles, so your CPU was probably clocked down pretty slow.</p>\n\n<hr>\n\n<blockquote>\n  <p>So, how exactly cache attacks, e.g. meltdown and spectre, overcome such issue? Basically they have to disable hw prefetcher since they try to measure adjacent addresses in order to find if they are hit or miss.</p>\n</blockquote>\n\n<p>The cache-read side-channel as part of a Meltdown or Spectre attack typically uses a stride large enough that HW prefetching can't detect the access pattern. e.g. on separate pages instead of contiguous lines. One of the first google hits for <code>meltdown cache read prefetch stride</code> was <a href=\"https://medium.com/@mattklein123/meltdown-spectre-explained-6bc8634cc0c2\" rel=\"nofollow noreferrer\">https://medium.com/@mattklein123/meltdown-spectre-explained-6bc8634cc0c2</a>, which uses a stride of 4096. It could be tougher for Spectre, because your stride is at the mercy of the \"gadgets\" you can find in the target process.</p>\n"}], "owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 51977139, "answer_count": 1, "score": 0, "last_activity_date": 1535663822, "creation_date": 1534930369, "last_edit_date": 1592644375, "question_id": 51963834, "link": "https://stackoverflow.com/questions/51963834/using-time-stamp-counter-and-clock-gettime-for-cache-miss", "title": "Using time stamp counter and clock_gettime for cache miss", "body": "<p>As a follow-up to this <a href=\"https://stackoverflow.com/questions/51818655/clflush-to-invalidate-cache-line-via-c-function\">topic</a>, in order to calculate the memory miss latency, I have wrote the following code using <code>_mm_clflush</code>, <code>__rdtsc</code> and <code>_mm_lfence</code> (which is based on the code from this <a href=\"https://stackoverflow.com/questions/51818655/clflush-to-invalidate-cache-line-via-c-function\">question/answer</a>).</p>\n<p>As you can see in the code, I first load the array into the cache. Then I flush one element and therefore the cache line is evicted from all cache levels. I put <code>_mm_lfence</code> in order to preserve the order during <code>-O3</code>.</p>\n<p>Next, I used time stamp counter to calculate the latency or reading <code>array[0]</code>.  As you can see between two time stamps, there are three instructions: two <code>lfence</code> and one <code>read</code>. So, I have to subtract the <code>lfence</code> overhead. The last section of the code calculates that overhead.</p>\n<p>At the end of the code, the overhead and miss latency are printed. However, the result is not valid!</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;x86intrin.h&gt;\nint main()\n{\n    int array[ 100 ];\n    for ( int i = 0; i &lt; 100; i++ )\n            array[ i ] = i;\n    uint64_t t1, t2, ov, diff;\n\n    _mm_lfence();\n    _mm_clflush( &amp;array[ 0 ] );\n    _mm_lfence();\n\n    _mm_lfence();\n    t1 = __rdtsc();\n    _mm_lfence();\n    int tmp = array[ 0 ];\n    _mm_lfence();\n    t2 = __rdtsc();\n    _mm_lfence();\n\n    diff = t2 - t1;\n    printf( &quot;diff is %lu\\n&quot;, diff );\n\n    _mm_lfence();\n    t1 = __rdtsc();\n    _mm_lfence();\n    _mm_lfence();\n    t2 = __rdtsc();\n    _mm_lfence();\n    ov = t2 - t1;\n    printf( &quot;lfence overhead is %lu\\n&quot;, ov );\n    printf( &quot;miss cycles is %lu\\n&quot;, diff-ov );\n\n    return 0;\n}\n</code></pre>\n<p>However, the output is not valid</p>\n<pre><code>$ gcc -O3 -o flush1 flush1.c\n$ taskset -c 0 ./flush1\ndiff is 161\nlfence overhead is 147\nmiss cycles is 14\n$ taskset -c 0 ./flush1\ndiff is 161\nlfence overhead is 154\nmiss cycles is 7\n$ taskset -c 0 ./flush1\ndiff is 147\nlfence overhead is 154\nmiss cycles is 18446744073709551609\n</code></pre>\n<p>Any thought?</p>\n<p>Next, I tried <code>clock_gettime</code> function in order to calculate the miss latency as below</p>\n<pre><code>    _mm_lfence();\n    _mm_clflush( &amp;array[ 0 ] );\n    _mm_lfence();\n\n    struct timespec start, end;\n    clock_gettime(CLOCK_MONOTONIC, &amp;start);\n    _mm_lfence();\n    int tmp = array[ 0 ];\n    _mm_lfence();\n    clock_gettime(CLOCK_MONOTONIC, &amp;end);\n    diff = 1000000000 * (end.tv_sec - start.tv_sec) + end.tv_nsec - start.tv_nsec;\n    printf(&quot;miss elapsed time = %lu nanoseconds\\n&quot;, diff);\n</code></pre>\n<p>The output is <code>miss elapsed time = 578 nanoseconds</code>. Is that reliable?</p>\n<p>UPDATE1:</p>\n<p>Thanks to Peter and Hadi, to summarize the responses till now, I found out</p>\n<blockquote>\n<p>1- Unused variables are omitted in the optimization phase and that was the reason on weird values I seen in the output. Thanks to Peter's reply, there are some ways to fix that.</p>\n<p>2- <code>clock_gettime</code> is not suitable for such resolution and that function is used for larger delays.</p>\n</blockquote>\n<p>As a workaround, I tried to bring the array in to the cache and then flush all elements to be sure that all elements are evicted from all cache levels. Then I measured the latency of <code>array[0]</code> and then <code>array[20]</code>. Since each element is 4-bytes, the distance is 80 bytes. I expect to get two cache misses. However, the latency of <code>array[20]</code> is similar to a cache hit. A safe guess is that the cache line is not 80 bytes. So, maybe <code>array[20]</code> is prefetched by hardware. Not always, but I also see some odd results again</p>\n<pre><code>    for ( int i = 0; i &lt; 100; i++ ) {\n            _mm_lfence();\n            _mm_clflush( &amp;array[ i ] );\n            _mm_lfence();\n    }\n\n    _mm_lfence();\n    t1 = __rdtsc();\n    _mm_lfence();\n    int tmp = array[ 0 ];\n    _mm_lfence();\n    t2 = __rdtsc();\n    _mm_lfence();\n    diff1 = t2 - t1;\n    printf( &quot;tmp is %d\\ndiff1 is %lu\\n&quot;, tmp, diff1 );\n\n    _mm_lfence();\n    t1 = __rdtsc();\n    tmp = array[ 20 ];\n    _mm_lfence();\n    t2 = __rdtsc();\n    _mm_lfence();\n    diff2 = t2 - t1;\n    printf( &quot;tmp is %d\\ndiff2 is %lu\\n&quot;, tmp, diff2 );\n\n    _mm_lfence();\n    t1 = __rdtsc();\n    _mm_lfence();\n    _mm_lfence();\n    t2 = __rdtsc();\n    _mm_lfence();\n    ov = t2 - t1;\n    printf( &quot;lfence overhead is %lu\\n&quot;, ov );\n    printf( &quot;TSC1 is %lu\\n&quot;, diff1-ov );\n    printf( &quot;TSC2 is %lu\\n&quot;, diff2-ov );\n</code></pre>\n<p>Output is</p>\n<pre><code>$ ./flush1\ntmp is 0\ndiff1 is 371\ntmp is 20\ndiff2 is 280\nlfence overhead is 147\nTSC1 is 224\nTSC2 is 133\n$ ./flush1\ntmp is 0\ndiff1 is 399\ntmp is 20\ndiff2 is 280\nlfence overhead is 154\nTSC1 is 245\nTSC2 is 126\n$ ./flush1\ntmp is 0\ndiff1 is 392\ntmp is 20\ndiff2 is 840\nlfence overhead is 147\nTSC1 is 245\nTSC2 is 693\n$ ./flush1\ntmp is 0\ndiff1 is 364\ntmp is 20\ndiff2 is 140\nlfence overhead is 154\nTSC1 is 210\nTSC2 is 18446744073709551602\n</code></pre>\n<p>The statement that &quot;HW prefetcher brings other blocks&quot; is about 80% correct then. What is the going on then? Any more accurate statement?</p>\n"}, {"tags": ["c", "x86", "printf", "32-bit", "long-long"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1534929848, "post_id": 51963609, "comment_id": 90877389, "body": "What is the reason you want to use a <code>long long</code> type to store a pointer? The correct way to have a pointer to <code>char</code> would be <code>char *</code>."}, {"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534930046, "post_id": 51963609, "comment_id": 90877480, "body": "@Someprogrammerdude Yeah you&#39;re right, I am aware that the right way of doing it is as you said. but as I mentioned in the post, I&#39;m purposely messing around with pointers in order to fully master the C memory model and when undefined behavior is triggered. So it&#39;s more of an academic question than of a practical one ;-)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 3, "creation_date": 1534930114, "post_id": 51963609, "comment_id": 90877531, "body": "if you want to convert a pointer to an integer type you must use <code>(u)intptr_t</code>. And you&#39;re getting UB since you&#39;re printing <code>ptr</code> with <code>%p</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1534930125, "post_id": 51963609, "comment_id": 90877533, "body": "Using your compiler options, you should get a whole list of warnings here. The code has undefined behavior."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1534930140, "post_id": 51963609, "comment_id": 90877544, "body": "Fair enough, but then remember that one of the possibilities of UB is that it might seemingly work, making it very hard to detect."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1534930198, "post_id": 51963609, "comment_id": 90877583, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16864552/what-happens-when-i-use-the-wrong-format-specifier\">What happens when I use the wrong format specifier?</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1534930227, "post_id": 51963609, "comment_id": 90877611, "body": "<i>to fully master the C memory model and when undefined behavior is triggered.</i>  There&#39;s nothing to master with undefined behavior.  Compilers can assume undefined behavior never happens, so when you do trigger it there&#39;s no way to tell what might happen."}, {"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1534930373, "post_id": 51963609, "comment_id": 90877706, "body": "@phuclv I don&#39;t think the issue is related to format specifier. Maybe it has more to do with the long long var being 8 bytes longs and receiving a 4 bytes address ?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 4, "creation_date": 1534930560, "post_id": 51963609, "comment_id": 90877804, "body": "@programmersn to print a <code>long long</code> you have to use <code>%lld</code>. Since you&#39;re using a wrong one it invokes UB and in this case it messes up the stack layout and results in the segfault"}, {"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1534931012, "post_id": 51963609, "comment_id": 90878070, "body": "@phuclv You were damn right, changing to %llx the format specifier made the issue disappear ! Could you please rephrase your solution in an answer and also, if you can, expand a little bit about the stack layout ? So I can mark your solution as the right one ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1534938343, "post_id": 51963609, "comment_id": 90881997, "body": "@programmersn Curious you choose to try <code>&quot;%llx&quot;</code> with <code>long long</code> rather than the <a href=\"https://stackoverflow.com/questions/51963609/using-long-long-integer-to-store-32-bit-pointer-causes-printf-to-bug#comment90877804_51963609\">recommended <code>%lld</code></a>.  When a <code>long long</code> is not in <code>unsigned long long</code> range (negative values), using <code>&quot;%llx&quot;</code> is UB."}, {"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534941833, "post_id": 51963609, "comment_id": 90884288, "body": "@chux You must be right. I chose that format in order to print the address in hexadecimal. How would you print out a signed integer with hexadecimal notation ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1534943213, "post_id": 51963609, "comment_id": 90885255, "body": "@programmersn To print a signed integer with  with hexadecimal notation, simple cast to the corresponding unsigned type and then use the matching <code>&quot;%x&quot; ,&quot;%X&quot;</code>.   Alternatively, with such issues code could change <code>ptr</code> to an unsigned  type like <code>uintptr_t</code> or <code>uintmax_t</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 0, "creation_date": 1534956882, "post_id": 51963757, "comment_id": 90893914, "body": "Could you expand a little more on <i>stack layout broken</i> ? What do you mean by that ?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 1, "creation_date": 1534974101, "post_id": 51963757, "comment_id": 90901498, "body": "@programmersn: the same thing I meant by getting the calling convention wrong in comments on the other answer.  <a href=\"https://stackoverflow.com/a/47170047\">Function called in a file without a prototype produce different results on ARM and x86-64</a> is another example of the same problem.  (Nice update, \\@Gerhardh.  First version was a little vague, and didn&#39;t go into as much detail about exactly what does happen in this case for this calling convention.)"}, {"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 0, "creation_date": 1535059259, "post_id": 51963757, "comment_id": 90938579, "body": "@gerhardh The update cleared away most of the difficulties. Wonderful explanation ! I just have one last question: why is the <code>%c</code> format specifier translated into a 4-bytes memory slot by <code>printf</code> ? Was a <code>char</code> not meant to take up 1 byte in memory ? I&#39;ve always thought that only <i>wide chars</i> were expanding on 4 bytes in order to represent UTF-32 characters, and in any way the length modifier <code>l</code> could be used in <code>%lc</code> in order to represent a 4-bytes character."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1535099819, "post_id": 51963757, "comment_id": 90950056, "body": "If you have a function that does not specify the types of parameters, any integer like variable is promoted to <code>int</code> before calling the function. This means for a <code>char</code> or <code>short</code> there are the same number of bytes used as for <code>int</code>. As a result the function must fetch the exact same number when it handles that parameter. Of course after fetching the parameter from the stack, only 1 byte is used for printing when <code>%c</code> is used."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 1, "creation_date": 1535122023, "post_id": 51963757, "comment_id": 90963869, "body": "@programmersn: Even if you <i>do</i> have a prototype like <code>void foo(char c, short s,  int i)</code>, the minimum width of an arg-passing slot is 4 or 8 bytes in normal 32 or 64-bit calling conventions.  Narrow args leave the upper bytes unused.  Look at compiler-generated asm for a caller of such a function: <a href=\"https://godbolt.org/z/d7rLcU\" rel=\"nofollow noreferrer\">godbolt.org/z/d7rLcU</a>.  it just uses <code>push</code> (32-bit stack-args calling convention), or puts args in registers, with the whole register dedicated to one arg (instead of packing multiple narrow args into the first 64-bit register)."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1535124313, "post_id": 51963757, "comment_id": 90965235, "body": "@PeterCordes In practice probably yes. But the C standard would not mandate it if a prototype is present. An implementation would be allowed to use less than size of an integer. Because then the type is <code>char</code> and you put that type in your considerations wrt. alignment and calling conventions. But without a prototype it is converted to <code>int</code> before any alignment and calling conventions are applied. It might be the same result or not."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1535125213, "post_id": 51963757, "comment_id": 90965788, "body": "The C standard doesn&#39;t mandate anything: any way your program could detect / depend on calling convention details is undefined behaviour.  So yes, a calling convention that packs args tightly is of course possible.  I just thought it was interesting/useful to point out the &quot;stack slot&quot; way of thinking about arg-passing, in addition to your correct comment that the default promotions to <code>int</code> or <code>double</code> mean that <code>%c</code> really accepts an <code>int</code> which is then converted to <code>unsigned char</code>.  The default-promotion rules for unprototyped might have been chosen because of PDP-11 calling conventions."}], "tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": true, "score": 7, "last_activity_date": 1535102829, "last_edit_date": 1535102829, "creation_date": 1534930160, "answer_id": 51963757, "question_id": 51963609, "link": "https://stackoverflow.com/questions/51963609/using-long-long-integer-to-store-32-bit-pointer-causes-printf-to-bug/51963757#51963757", "title": "Using long long integer to store 32 bit pointer causes printf to bug", "body": "<p>You are basically cheating your compiler.</p>\n\n<p>You tell <code>printf</code> that you pass a pointer as first parameter after the format string. But instead you pass an integer variable.</p>\n\n<p>While this is always undefined behaviour, it may somehow work as long as the size of expected type and passed type are the same. That's the \"undefined\" in \"undefined behaviour\". It is also not defined to crash or immediately show bad results. It may just pretent to work while waiting to hit you from behind.</p>\n\n<p>If your <code>long long</code> has 64 bits while a pointer only has 32 bits, the layout of your stack is broken causing <code>printf</code> to read from wrong location.</p>\n\n<p>Depending on your architecture and tools, you have good chances that your stack looks like this when you call a function with variadic parameter list:</p>\n\n<pre><code>+---------------+---------------+---------------+\n| last fixed par| Par 1   type1 | Par 2   type2 |\n|    x bytes    |    x bytes    |    x bytes    | \n+---------------+---------------+---------------+\n</code></pre>\n\n<p>The unknown parameters are pushed on the stack and finally the last known parameter from the signature is pushed. (Other known parameters are ignored here)</p>\n\n<p>Then the function can walk through the parameter list using <code>va_arg</code> and friends. For this purpose the function must know which types of parameters are passed. The <code>printf</code> function uses the format specifier to decide which parameter to consume from the stack.</p>\n\n<p>Now it comes to the point where everything depends on you telling the truth.</p>\n\n<p>What you tell your compiler:</p>\n\n<pre><code>+---------------+---------------+---------------+\n| format  char* | Par 1   void* | Par 2     int |\n|    4 bytes    |    4 bytes    |    4 bytes    | \n+---------------+---------------+---------------+\n</code></pre>\n\n<p>For the first parameter (<code>%p</code>) the compiler takes 4 bytes which is the size of a <code>void*</code>. Then it takes another 4 bytes (size of an <code>int</code>) for parameter 2 (<code>%c</code>). </p>\n\n<p>(Note: The last parameter is printed as a character, i.e. only 1 byte will be used in the end. Due to integer type promotion rules for function calls without proper parameter type specification the parameter is stored as an <code>int</code> on the stack. Hence <code>printf</code> must also consume the bytes for an <code>int</code> in this case.)</p>\n\n<p>Now let's look at your function call (What you really put into <code>printf</code>):</p>\n\n<pre><code>+---------------+-------------------------------+---------------+\n| format  char* |   Par 1           long long   | Par 2     int |\n|    4 bytes    |            8 bytes            |    4 bytes    | \n+---------------+-------------------------------+---------------+\n</code></pre>\n\n<p>You still claim to provide a pointer and a integer parameter of 4 bytes each.\nBut now the first parameter comes with an extra 4 bytes of length which remains unknown to the <code>printf</code> function.\nAs you have told it, the function reads 4 bytes for the pointer. This may be in line with the first 4 bytes of the <code>long long</code> but the remaining 4 bytes are not consumed.\nNow the next 4 bytes that are used for the <code>%c</code> format, are read but we are still reading the second half of your <code>long long</code> Whatever this may be, it is not what you want to.\nFinally the pushed integer is still untouched when the function returns.</p>\n\n<p>That's the reason why you should not mess with weird type casting and wrong types.</p>\n\n<p>And that's also the reason why you should look at your warnings during compiling.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1534934062, "post_id": 51964041, "comment_id": 90879723, "body": "The same logic also applies for 32-bit x86 calling conventions that use register args, like Windows <code>__fastcall</code> or <code>__vectorcall</code>.  Or ARM / MIPS / etc."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1534934279, "post_id": 51964041, "comment_id": 90879828, "body": "And yes, <code>*(char*)ptr</code> is 1 significant byte padded to a 4-byte stack slot (or register) in any normal calling convention.  The upper bytes are potentially garbage.  Most 32-bit x86 calling conventions use at most two registers for  arg-passing, so yes, the char will be on the stack there.  (see <a href=\"https://stackoverflow.com/tags/x86/info\">stackoverflow.com/tags/x86/info</a> for ABI docs).  But on 32-bit ARM it&#39;ll be in <code>r3</code>."}, {"owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1534936610, "post_id": 51964041, "comment_id": 90881022, "body": "@Petercordes I still do not understand why does it print a good result when using <code>%llx</code> (8 bytes) format specifier but yields a wrong result when using <code>%p</code> (4 bytes) specifier. I mean <code>*(char*)ptr</code> should interpret as a 1-byte memory location to lookup at, in any ways. Right ?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 1, "creation_date": 1534937117, "post_id": 51964041, "comment_id": 90881312, "body": "@programmersn: because you&#39;re violating the calling convention.  The <code>%p</code> conversion only consumes the first 4 bytes of the 8+1 bytes you passed, so the <code>%c</code> conversion is taking the low byte of high half of the <code>long long</code> you passed (because x86 is little-endian).  Compare the asm output for the two versions of your code and look at where stuff ends up on the stack.  The one passing a 4-byte arg is the one that matches where <code>printf</code> with <code>%p</code> will look for args."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 1, "creation_date": 1534937404, "post_id": 51964041, "comment_id": 90881480, "body": "@programmersn: See also <a href=\"https://stackoverflow.com/a/47170047\">Function called in a file without a prototype produce different results on ARM and x86-64</a> for a more detailed explanation of this.  (The question is comparing x86-64 vs. ARM, but it would be the same for 32-bit x86 because they&#39;re doing the same thing: passing a 64-bit arg to a function that&#39;s expecting a 32-bit arg followed by another arg.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534938670, "post_id": 51964041, "comment_id": 90882168, "body": "&quot;The type intptr_t is an integer type that can store a pointer.&quot; is correct when the <i>optional types</i> <code>(u)intptr_t</code> exists - very common.  Yet now how to print that?  <code>printf (&quot;%jx\\n&quot;, (uintmax_t) some_uintptr_t_object);</code> commonly works - perhaps guaranteed to work."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "edited": false, "score": 1, "creation_date": 1534938963, "post_id": 51964041, "comment_id": 90882375, "body": "@programmersn Same byte size and mis-matched print specifiers/Arguments can still cause problems.  Different types of arguments in a <code>...</code> functions like <code>printf()</code>. need not get passed to the function is a like manner on the stack or what ever.  This mis-match is common with <code>&quot;%u&quot;</code> and <code>float</code>.  Moral of the story - enable all compiler warnings and use matching specifiers/arguments."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1534973969, "post_id": 51964041, "comment_id": 90901458, "body": "@chux: Probably your best bet for printing a <code>uintptr_t</code> is <code>%p</code> with <code>(void*)p</code>, if you&#39;re happy with pointer formatting.  Oh, <a href=\"https://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">cppreference says that <code>PRIdPTR</code> from <code>&lt;inttypes.h&gt;</code></a> is a macro for the equivalent of <code>%d</code> for signed <code>intptr_t</code>.  So problem solved for C99.  Upcasting to <code>uintmax_t</code> will increase code-size when it&#39;s wider than a pointer, especially wider than an arg-passing slot.  (The x32 ABI for x86-64 (32-bit pointers), has 8-byte arg-passing slots.)"}], "tags": [], "owner": {"reputation": 184, "user_id": 864929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ac4995a89867ab5548abf84b51d12b?s=128&d=identicon&r=PG", "display_name": "Niko Kiirala", "link": "https://stackoverflow.com/users/864929/niko-kiirala"}, "is_accepted": false, "score": 2, "last_activity_date": 1534931108, "last_edit_date": 1534931108, "creation_date": 1534931026, "answer_id": 51964041, "question_id": 51963609, "link": "https://stackoverflow.com/questions/51963609/using-long-long-integer-to-store-32-bit-pointer-causes-printf-to-bug/51964041#51964041", "title": "Using long long integer to store 32 bit pointer causes printf to bug", "body": "<p>One big issue: you are using the wrong type for integer/pointer shenanigans. The type <code>intptr_t</code> is an integer type that can store a pointer.</p>\n\n<p>So, what goes wrong on the 32-bit architecture?</p>\n\n<p>The type <code>long long int</code> is (with gcc) a 64-bit type. However, the <code>printf</code> command with <code>%p</code> format expects to receive a 32-bit pointer, not a 64-bit one.</p>\n\n<p>The call to printf will have on the call stack: (illustrative purposes only, details may differ)</p>\n\n<pre><code>pointer to format string\nptr (8 bytes)\n*(char *)ptr (at least 1 byte, likely 4)\n</code></pre>\n\n<p><code>printf</code> reads the format string, discovers that it should receive a 32-bit pointer and a <code>char</code>. It then reads the first 4 bytes of <code>ptr</code> as the pointer to read and next 1-4 bytes as the character to print. It never even knows that there was more data, the actual character it should have printed, on the stack.</p>\n"}], "owner": {"reputation": 402, "user_id": 5500552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuK6o.jpg?s=128&g=1", "display_name": "programmersn", "link": "https://stackoverflow.com/users/5500552/programmersn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 0, "accepted_answer_id": 51963757, "answer_count": 2, "score": 1, "last_activity_date": 1535102829, "creation_date": 1534929681, "question_id": 51963609, "link": "https://stackoverflow.com/questions/51963609/using-long-long-integer-to-store-32-bit-pointer-causes-printf-to-bug", "title": "Using long long integer to store 32 bit pointer causes printf to bug", "body": "<p>Messing around a bit with C pointers, I came across a rather strange behavior.<br>\nConsider the following code :</p>\n\n<pre><code>int \nmain ()\n{\n   char charac = 'r';\n\n   long long ptr = (long long) &amp;charac;  // Stores the address of charac into a long long variable\n\n   printf (\"[ptr] points to %p containing the char %c\\n\", ptr, *(char*)ptr);\n\n}\n</code></pre>\n\n<h2>On 64-bits architectures</h2>\n\n<p>Now when compiled for a 64-bits target architecture (compilation command : <code>gcc -Wall -Wextra -std=c11 -pedantic test.c -o test</code>), everything is fine, the execution gives</p>\n\n<pre><code>&gt; ./test \n[ptr] points to 0x7fff3090ee47 containing the char r\n</code></pre>\n\n<h2>On 32-bits architectures</h2>\n\n<p>But, if the compilation targets a 32-bits arch (with compilation command : <code>gcc -Wall -Wextra -std=c11 -pedantic -ggdb -m32 test.c -o test</code>), the execution gives this weird result :</p>\n\n<pre><code>&gt; ./test     \n[ptr] points to 0xff82d4f7 containing the char \ufffd\n</code></pre>\n\n<p>The weirdest part now is if I change the <code>printf</code> call in the previous code to <code>printf (\"[ptr] contains the char %c\\n\", *(char*)ptr);</code>, the execution gives a correct result : </p>\n\n<pre><code>&gt; ./test     \n[ptr] contains the char r\n</code></pre>\n\n<p>The issue seems to arise only on 32-bits arch, and I can't figure out why the <code>printf</code> call change causes the execution to behave differently.</p>\n\n<p><strong><em>PS</em></strong>: It's maybe worth mentioning that the underlying machine is a x86 64-bits architecture, but using the 32-bits compatibility mode triggered by the <code>-m32</code> option in <code>gcc</code>.</p>\n"}, {"tags": ["c", "address-sanitizer"], "comments": [{"owner": {"reputation": 3785, "user_id": 2388257, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/4QzSp.jpg?s=128&g=1", "display_name": "Hi-Angel", "link": "https://stackoverflow.com/users/2388257/hi-angel"}, "edited": false, "score": 1, "creation_date": 1600336192, "post_id": 51963570, "comment_id": 113057979, "body": "Actually, it&#39;s the expected behavior. The reason is that otherwise you&#39;d be guaranteed to get a bunch of false-positives: the more of them the bigger your app. An example why: suppose in your code, right after the cycle you had a <code>free(a)</code>. So technically, no leak in your code. However upon SIGINTing the app you&#39;d get an invalid leak report, because the memory was not freed by the time you killed the app. Basically, SIGINT/SIGTERM means, no cleanups/destructors will get run except those you explicitly bound to the signal."}], "answers": [{"comments": [{"owner": {"reputation": 250, "user_id": 1798390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6830191bbabb663c3832cb4249de1719?s=128&d=identicon&r=PG", "display_name": "Bungow", "link": "https://stackoverflow.com/users/1798390/bungow"}, "edited": false, "score": 0, "creation_date": 1534933900, "post_id": 51964764, "comment_id": 90879629, "body": "Can you point me to some relevant information about this? and why if I install a SIGINT handler in my code calling just <code>exit()</code> the &quot;destructor&quot; is not called? Sorry but I&#39;m a bit lost here because using other libraries, like SDL, I can kill his main loop with SIGINT and I get a report. Thank you."}, {"owner": {"reputation": 2795, "user_id": 469026, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3c29baddd50856a673e476a8f8091a2d?s=128&d=identicon&r=PG", "display_name": "Neowizard", "link": "https://stackoverflow.com/users/469026/neowizard"}, "reply_to_user": {"reputation": 250, "user_id": 1798390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6830191bbabb663c3832cb4249de1719?s=128&d=identicon&r=PG", "display_name": "Bungow", "link": "https://stackoverflow.com/users/1798390/bungow"}, "edited": false, "score": 0, "creation_date": 1534968867, "post_id": 51964764, "comment_id": 90899315, "body": "I&#39;m not sure. The ASAN code clearly shows it runs using atexit, but I can&#39;t figure out when the registration happens. Perhaps Kamil Cuk is right and it registers the handler <i>after</i> <code>main</code> completes...which seems odd"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1600631373, "post_id": 51964764, "comment_id": 113141671, "body": "@Neowizard The registration happens in <code>__lsan_init</code> function (see [lsan.cpp]( <a href=\"https://github.com/llvm-mirror/compiler-rt/blob/master/lib/lsan/lsan.cpp\" rel=\"nofollow noreferrer\">github.com/llvm-mirror/compiler-rt/blob/master/lib/lsan/&hellip;</a>)) which is registered during preinit stage (i.e. before all C/C++ constructors)."}], "tags": [], "owner": {"reputation": 2795, "user_id": 469026, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3c29baddd50856a673e476a8f8091a2d?s=128&d=identicon&r=PG", "display_name": "Neowizard", "link": "https://stackoverflow.com/users/469026/neowizard"}, "is_accepted": false, "score": 3, "last_activity_date": 1534933400, "creation_date": 1534933400, "answer_id": 51964764, "question_id": 51963570, "link": "https://stackoverflow.com/questions/51963570/how-get-output-of-address-sanitizer-when-emiting-sigint-to-halt-a-loop/51964764#51964764", "title": "How get output of address sanitizer when emiting SIGINT to halt a loop", "body": "<p>The code responsible for printing that error output is called as a destructor (fini) procedure. Since your program terminates without calling any of the process destructors (due to the SIGINT), you do not get any error printouts.</p>\n"}, {"comments": [{"owner": {"reputation": 250, "user_id": 1798390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6830191bbabb663c3832cb4249de1719?s=128&d=identicon&r=PG", "display_name": "Bungow", "link": "https://stackoverflow.com/users/1798390/bungow"}, "edited": false, "score": 1, "creation_date": 1534938141, "post_id": 51964939, "comment_id": 90881883, "body": "I guess you are right, but I&#39;m just surprised leak sanitizer not running when calling <code>exit()</code>; I accept your answer for providing a way to force output with <code>setjmp</code>."}, {"owner": {"reputation": 544, "user_id": 5405069, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/872170dced53d779e1b7909a1a9309dd?s=128&d=identicon&r=PG&f=1", "display_name": "senx", "link": "https://stackoverflow.com/users/5405069/senx"}, "reply_to_user": {"reputation": 250, "user_id": 1798390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6830191bbabb663c3832cb4249de1719?s=128&d=identicon&r=PG", "display_name": "Bungow", "link": "https://stackoverflow.com/users/1798390/bungow"}, "edited": false, "score": 1, "creation_date": 1565986686, "post_id": 51964939, "comment_id": 101527358, "body": "@Bungow most liekly it doesn\u2019t work because call to exit doesn\u2019t trigger stack unwinding"}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 5, "last_activity_date": 1534934106, "creation_date": 1534934106, "answer_id": 51964939, "question_id": 51963570, "link": "https://stackoverflow.com/questions/51963570/how-get-output-of-address-sanitizer-when-emiting-sigint-to-halt-a-loop/51964939#51964939", "title": "How get output of address sanitizer when emiting SIGINT to halt a loop", "body": "<p>I tried many ways, with <code>exit()</code> and <code>abort()</code> calls, this works:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;setjmp.h&gt;\n\njmp_buf jmpbuf;\nvoid handler (int signum) {    \n        printf(\"handler %d \\n\", signum);\n        // we jump from here to main()\n        // and then call return\n        longjmp(jmpbuf, 1);\n}\n\nint main(int argc, char *argv[])\n{\n    if (setjmp(jmpbuf)) { \n        // we are in signal context here\n        return 2;\n    }\n    signal(SIGINT, handler);\n    signal(SIGTERM, handler);\n\n    char *a = malloc(1024);\n    while (argc - 1);\n    return 1;\n}\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>&gt; gcc file.c -fsanitize=address &amp;&amp; timeout 1 ./a.out arg\nhandler 15 \n\n=================================================================\n==12970==ERROR: LeakSanitizer: detected memory leaks\n\nDirect leak of 1024 byte(s) in 1 object(s) allocated from:\n    #0 0x7f4798c9bd99 in __interceptor_malloc /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:86\n    #1 0x5569e64e0acd in main (/tmp/a.out+0xacd)\n    #2 0x7f479881206a in __libc_start_main (/usr/lib/libc.so.6+0x2306a)\n\nSUMMARY: AddressSanitizer: 1024 byte(s) leaked in 1 allocation(s).\n</code></pre>\n\n<p>I guess that the address sanitizer function are executed after main returns.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 3638460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4b9c035217bdfc407af18b2e453c55?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Burckhardt", "link": "https://stackoverflow.com/users/3638460/jacob-burckhardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1615248043, "creation_date": 1615248043, "answer_id": 66538947, "question_id": 51963570, "link": "https://stackoverflow.com/questions/51963570/how-get-output-of-address-sanitizer-when-emiting-sigint-to-halt-a-loop/66538947#66538947", "title": "How get output of address sanitizer when emiting SIGINT to halt a loop", "body": "<p>__lsan_do_leak_check() can help you avoid using longjmp in @KamilCuk's answer:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sanitizer/lsan_interface.h&gt;\n\nvoid handler (int signum) {\n   __lsan_do_leak_check();\n}\n\nint main(int argc, char *argv[])\n{\n   signal(SIGINT, handler);\n   char *a = malloc(1024);\n   a=0;\n   printf(&quot;lost pointer\\n&quot;);\n   for(;;);\n   return 1;\n}\n</code></pre>\n<p>Demo:</p>\n<pre><code>clang test.c -fsanitize=address -fno-omit-frame-pointer -g -O0 -o test &amp;&amp; ./test\nlost pointer\n  C-c C-c\n=================================================================\n==29365==ERROR: LeakSanitizer: detected memory leaks\n\nDirect leak of 1024 byte(s) in 1 object(s) allocated from:\n    #0 0x4c9ca3 in malloc (/home/bjacob/test+0x4c9ca3)\n    #1 0x4f9187 in main /home/bjacob/test.c:13:14\n    #2 0x7fbc9898409a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2409a)\n\nSUMMARY: AddressSanitizer: 1024 byte(s) leaked in 1 allocation(s).\n</code></pre>\n<p>Note I added a=0 to create a leak.</p>\n<p>I also added a printf.  Without that printf, the leak error is not printed.  I suspect the compiler optimized-out the use of the variable &quot;a&quot; despite my using the -O0 compiler option.</p>\n"}], "owner": {"reputation": 250, "user_id": 1798390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6830191bbabb663c3832cb4249de1719?s=128&d=identicon&r=PG", "display_name": "Bungow", "link": "https://stackoverflow.com/users/1798390/bungow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "accepted_answer_id": 51964939, "answer_count": 3, "score": 3, "last_activity_date": 1615248043, "creation_date": 1534929567, "last_edit_date": 1534935907, "question_id": 51963570, "link": "https://stackoverflow.com/questions/51963570/how-get-output-of-address-sanitizer-when-emiting-sigint-to-halt-a-loop", "title": "How get output of address sanitizer when emiting SIGINT to halt a loop", "body": "<p>When I compile this simple test program I get the obvious leak report from address sanitizer, but when I compile the same program but with a infinite loop, and break it emitting <code>SIGINT</code> I don't get any output.</p>\n\n<p>Checking asm output, the <code>malloc</code> is not optimized away (if this is possible at all)</p>\n\n<p>Is this the expected behavior of address sanitizer? I don't encounter this problem in other developments.</p>\n\n<p>Working example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nint main(void)\n{\n    char *a = malloc(1024);\n    return 1;\n}\n</code></pre>\n\n<p>Not working (kill with SIGINT):</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nint main(void)\n{\n    char *a = malloc(1024);\n    for(;;);\n    return 1;\n}\n</code></pre>\n\n<p>compile: <code>gcc test.c -o test -fsanitize=address</code></p>\n\n<p><em>I encounter this problem in a full programm but I reduced it to this minimal example.</em></p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1534929017, "post_id": 51963315, "comment_id": 90876931, "body": "Please show the contents of <code>data.csv</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534929726, "post_id": 51963315, "comment_id": 90877311, "body": "Not difrectly related, but consider what happens if the file could not be opened. You see the problem?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534929888, "post_id": 51963315, "comment_id": 90877399, "body": "Your program should print the first line of your csv file. I can&#39;t see what&#39;s wrong apart from the problem reported in my previous comment, but if the file actually exists, your program should work. Please <a href=\"https://stackoverflow.com/posts/51963315/edit\">edit</a>  your question and show the first couple of lines of your csv file"}, {"owner": {"reputation": 11, "user_id": 10257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343a10da5575451bae831828172b6c4b?s=128&d=identicon&r=PG&f=1", "display_name": "user10257574", "link": "https://stackoverflow.com/users/10257574/user10257574"}, "edited": false, "score": 0, "creation_date": 1534930156, "post_id": 51963315, "comment_id": 90877558, "body": "Updated. I&#39;ve been having issues accessing pointers in a number of applications, even so far as copying code from other sources directly and having issues. Could it be anything to do with static and dynamically allocated arrays?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534930372, "post_id": 51963315, "comment_id": 90877704, "body": "Also consider inceasing the buffer size from 152 to say 1000. But even if the buffer size is too small, ypoiur program should output the start of the line."}, {"owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "edited": false, "score": 0, "creation_date": 1534931100, "post_id": 51963315, "comment_id": 90878113, "body": "Double check that the CSV file does not have empty line at the begin."}, {"owner": {"reputation": 11, "user_id": 10257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343a10da5575451bae831828172b6c4b?s=128&d=identicon&r=PG&f=1", "display_name": "user10257574", "link": "https://stackoverflow.com/users/10257574/user10257574"}, "edited": false, "score": 0, "creation_date": 1534931703, "post_id": 51963315, "comment_id": 90878433, "body": "That was the issue. Not sure whether to feel relieved that this problem is solved, or disappointed in my stupidity. Thanks heaps for all the help."}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1534932234, "post_id": 51963315, "comment_id": 90878727, "body": "Was the issue, that the line buffer was too small or that your CSV file started with an empty line? Either way please write it as an answer, to make it easier for future readers that may have a similar problem"}, {"owner": {"reputation": 11, "user_id": 10257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343a10da5575451bae831828172b6c4b?s=128&d=identicon&r=PG&f=1", "display_name": "user10257574", "link": "https://stackoverflow.com/users/10257574/user10257574"}, "edited": false, "score": 0, "creation_date": 1534934538, "post_id": 51963315, "comment_id": 90879953, "body": "The CSV had a leading line break, I believe. Opening it in notepad, it wasn&#39;t visible. But opening it in Excel showed that the first line of data was empty."}], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 2623045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q7UIB.png?s=128&g=1", "display_name": "grenix", "link": "https://stackoverflow.com/users/2623045/grenix"}, "is_accepted": false, "score": 0, "last_activity_date": 1534940354, "creation_date": 1534940354, "answer_id": 51966757, "question_id": 51963315, "link": "https://stackoverflow.com/questions/51963315/printing-lines-from-a-csv-file-with-fgets/51966757#51966757", "title": "Printing lines from a CSV file with fgets()", "body": "<p>It is typical for stdlib not to flush output until a '\\n'.</p>\n\n<p>I would either do</p>\n\n<pre><code>printf(\"Line is: %s\\n\", line);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fflush(stdout);\n</code></pre>\n\n<p>before you quit the program</p>\n"}], "owner": {"reputation": 11, "user_id": 10257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343a10da5575451bae831828172b6c4b?s=128&d=identicon&r=PG&f=1", "display_name": "user10257574", "link": "https://stackoverflow.com/users/10257574/user10257574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534940354, "creation_date": 1534928660, "last_edit_date": 1534930721, "question_id": 51963315, "link": "https://stackoverflow.com/questions/51963315/printing-lines-from-a-csv-file-with-fgets", "title": "Printing lines from a CSV file with fgets()", "body": "<p>When I run the following function, the output is \"Line is:\" and the next line is left blank. I think I have some flawed understanding of how pointers and strings work. The file is opening correctly and the line is being read correctly, otherwise my error messages would be printed, and no warnings or error messages are appearing in the console. Any help would be hugely appreciated!</p>\n\n<p>UPDATED CODE:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[]){\n\n\n    char filename[152];\n    sprintf(filename, \"%s\", argv[1]);\n    printf(\"%s\", filename);\n\n    FILE* stream = fopen(filename, \"r\");\n\n    if(!stream){\n        printf(\"\\nError: File could not be read\\n\");\n    }\n    char line[1000];\n    if(fgets(line, 1000, stream) == NULL){\n        printf(\"\\nError: Line could not be read\\n\");\n    } else {\n        printf(\"Line is:\\n\");\n        printf(\"%s\", line);\n    }\n    fclose(stream);\n    return 0;\n}\n</code></pre>\n\n<p>This is the csv file:</p>\n\n<pre><code>125779,Sofiya Aleksandrovna Velikaya,F,23,175,70,Russia,RUS,2008 Summer,2008,Summer,Beijing,Fencing,\"Fencing Women's Sabre, Individual\",NA\n60890,Toshiaki Kitai,M,28,NA,NA,Japan,JPN,1952 Summer,1952,Summer,Helsinki,Equestrianism,\"Equestrianism Men's Jumping, Individual\",NA\n31299,Iera Echebarra Fernndez,F,23,160,63,Spain,ESP,2016 Summer,2016,Summer,Rio de Janeiro,Rugby Sevens,Rugby Sevens Women's Rugby Sevens,NA\n28351,Adalbert Dickhut,M,29,NA,NA,Germany,GER,1952 Summer,1952,Summer,Helsinki,Gymnastics,Gymnastics Men's Pommelled Horse,NA\n99701,James Reid,M,24,180,70,South Africa,RSA,2016 Summer,2016,Summer,Rio de Janeiro,Cycling,\"Cycling Men's Mountainbike, Cross-Country\",NA\n132730,Reza Mohammad Ali Yazdani,M,23,172,100,Iran,IRI,2008 Summer,2008,Summer,Beijing,Wrestling,\"Wrestling Men's Light-Heavyweight, Freestyle\",NA\n129830,Ernst Theodor Georgsson Westerlund,M,50,NA,NA,Raili,FIN,1948 Summer,1948,Summer,London,Sailing,Sailing Mixed 6 metres,NA\n95980,Julie Pomagalski,F,25,161,60,France,FRA,2006 Winter,2006,Winter,Torino,Snowboarding,Snowboarding Women's Parallel Giant Slalom,NA\n</code></pre>\n"}, {"tags": ["c", "strcmp"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1534927438, "post_id": 51962920, "comment_id": 90876077, "body": "There&#39;s way too much code here, can you isolate a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> out of it? And check that you have proper <code>NUL</code> terminators everywhere they&#39;re needed."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534927534, "post_id": 51962920, "comment_id": 90876131, "body": "You seem to have forgotten that <code>char</code> strings in C are really called <b><i>null-terminated</b> byte strings</i>. That <i>null-terminated</i> bit is really important."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1534928451, "post_id": 51962920, "comment_id": 90876608, "body": "Not directly related to your question, but rather than <code>char *ampm = (char*)calloc(2,sizeof(char)) ;</code> you should write <code>char ampm[2]</code>, because <code>ampm</code> is strictly local. It&#39;s pointless to allocaty memory dynamically for fixed size local buffers unless they are very big, which is not the case here. Same for <code>hh</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534929006, "post_id": 51962920, "comment_id": 90876922, "body": "That can&#39;t possibly compile, with <code>void swap(char **str1_ptr, char **str2_ptr)</code> and <code>swap(*(str+start), *(str+end));</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534929173, "post_id": 51962920, "comment_id": 90877032, "body": "Compile your code with `-Wall? There are many warnings you should fix."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534928294, "post_id": 51963036, "comment_id": 90876516, "body": "Other problem: <code>char* sub;</code>: <code>sub</code> is never initialized."}, {"owner": {"reputation": 31, "user_id": 5619307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/178828589115339/picture?type=large", "display_name": "Ahmed Safwat", "link": "https://stackoverflow.com/users/5619307/ahmed-safwat"}, "edited": false, "score": 0, "creation_date": 1534928419, "post_id": 51963036, "comment_id": 90876586, "body": "Thanks a lot, i have totally forgotten about the &#39;\\0"}, {"owner": {"reputation": 31, "user_id": 5619307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/178828589115339/picture?type=large", "display_name": "Ahmed Safwat", "link": "https://stackoverflow.com/users/5619307/ahmed-safwat"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534928468, "post_id": 51963036, "comment_id": 90876616, "body": "@Jabberwocky yes it is another mistake too, i will initialize it thanks"}], "tags": [], "owner": {"reputation": 2597, "user_id": 768656, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TgeZI.png?s=128&g=1", "display_name": "Benjamin Maurer", "link": "https://stackoverflow.com/users/768656/benjamin-maurer"}, "is_accepted": false, "score": 3, "last_activity_date": 1534927686, "creation_date": 1534927686, "answer_id": 51963036, "question_id": 51962920, "link": "https://stackoverflow.com/questions/51962920/c-invalid-read-of-size-1/51963036#51963036", "title": "C - invalid read of size 1", "body": "<p>Like the commenters mentioned, it seems like you are missing the NULL-termination, e.g.:</p>\n\n<p><code>char *ampm = (char*)calloc(2,sizeof(char)) ;</code></p>\n\n<p>Two characters ('am'/'pm') plus the NULL-Termination would be <strong>3 characters</strong>, not 2.\nYou have to make sure that all your strings have a size of len + 1 and are properly '\\0' terminated.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5619307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/178828589115339/picture?type=large", "display_name": "Ahmed Safwat", "link": "https://stackoverflow.com/users/5619307/ahmed-safwat"}, "edited": false, "score": 1, "creation_date": 1535270354, "post_id": 51963225, "comment_id": 90998867, "body": "thanks a lot for your comment my code works just  fine now (Y)"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 2, "last_activity_date": 1534928907, "last_edit_date": 1534928907, "creation_date": 1534928359, "answer_id": 51963225, "question_id": 51962920, "link": "https://stackoverflow.com/questions/51962920/c-invalid-read-of-size-1/51963225#51963225", "title": "C - invalid read of size 1", "body": "<p>There are 4 issues in your  code.</p>\n\n<ol>\n<li><p>You are not allocating memory to <code>NULL</code> char for <code>apmp</code></p>\n\n<p><code>char *ampm = (char*)calloc(3,sizeof(char)) ;</code></p></li>\n<li><p>You are receiving double pointer for <code>swap</code> function  and passing <code>char</code> value</p>\n\n<p><code>void swap(char **str1_ptr, char **str2_ptr)</code></p>\n\n<p>should be</p>\n\n<p><code>void swap(char *str1_ptr, char *str2_ptr)</code></p>\n\n<p>and you call swap function like below</p>\n\n<p><code>swap((str+start), (str+end));</code></p></li>\n<li><p>You are not allocating memory to <code>sub</code> pointer</p>\n\n<p><code>char* sub = malloc (9 * sizeof(char));</code></p></li>\n<li><p>You are not deallocating memory for <code>hh</code>, <code>sub</code> and <code>ampm</code>.</p>\n\n<p><code>free (hh); free(ampm); free(sub);</code></p></li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 5619307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/178828589115339/picture?type=large", "display_name": "Ahmed Safwat", "link": "https://stackoverflow.com/users/5619307/ahmed-safwat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 51963225, "answer_count": 2, "score": 1, "last_activity_date": 1534928907, "creation_date": 1534927305, "question_id": 51962920, "link": "https://stackoverflow.com/questions/51962920/c-invalid-read-of-size-1", "title": "C - invalid read of size 1", "body": "<p>ok that's it, it's been more than 15 hours and i still can't figure out what's going on ! \nHere is a code for timeconversion problem in hackerrank, a function takes a string (time in 12--hour AM/PM format) and converts it to military (24-hour) time (returning a string) </p>\n\n<p>the problem is exactly in the function <code>char* timeConversion(char* s)</code></p>\n\n<p>in this line of code \n<code>b = strcmp(ampm,\"PM\");</code></p>\n\n<p>it always gives me error which i can not understand </p>\n\n<blockquote>\n  <p>\"ERROR: invalid read of size 1\"</p>\n</blockquote>\n\n<p>can anyone help me ?!</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar* readline();\n\n/*\n * Complete the timeConversion function below.\n */\n\n/*\n * Please either make the string static or allocate on the heap. For example,\n * static char str[] = \"hello world\";\n * return str;\n *\n * OR\n *\n * char* str = \"hello world\";\n * return str;\n *\n */\n\n/* Swaps strings by swapping pointers */\nvoid swap(char **str1_ptr, char **str2_ptr)\n{\n  char *temp = *str1_ptr;\n  *str1_ptr = *str2_ptr;\n  *str2_ptr = temp;\n}  \n\nvoid reverse(char str[], int length)\n{\n    int start = 0;\n    int end = length -1;\n    while (start &lt; end)\n    {\n        swap(*(str+start), *(str+end));\n        start++;\n        end--;\n    }\n}\n// Implementation of itoa()\nchar* itoa(int num, char* str, int base)\n{\n    int i = 0;\n    bool isNegative = false;\n\n    /* Handle 0 explicitely, otherwise empty string is printed for 0 */\n    if (num == 0)\n    {\n        str[i++] = '0';\n        str[i] = '\\0';\n        return str;\n    }\n\n    // In standard itoa(), negative numbers are handled only with \n    // base 10. Otherwise numbers are considered unsigned.\n    if (num &lt; 0 &amp;&amp; base == 10)\n    {\n        isNegative = true;\n        num = -num;\n    }\n\n    // Process individual digits\n    while (num != 0)\n    {\n        int rem = num % base;\n        str[i++] = (rem &gt; 9)? (rem-10) + 'a' : rem + '0';\n        num = num/base;\n    }\n\n    // If number is negative, append '-'\n    if (isNegative)\n        str[i++] = '-';\n\n    str[i] = '\\0'; // Append string terminator\n\n    // Reverse the string\n    reverse(str, i);\n\n    return str;\n}\n\nchar* timeConversion(char* s) {\n    /*\n     * Write your code here.\n     */\n    char *result = (char*)calloc(8,sizeof(char)) ;\n    char *ampm = (char*)calloc(2,sizeof(char)) ;    \n    char *hh = (char*)calloc(2,sizeof(char)) ;\n\n    int a = 0, b = 0 ,c = 0,i;\n\n    long int dec = 0;\n    int len = strlen(s);\n\n    // substring     hh:mm:ssAM\n    while ( c &lt; 2)      // 2 : LENGTH\n    {\n        ampm[c] = s[9+c-1];    // 9 : position\n        hh[c] = s[1+c-1];      // 1 : position\n        c++ ; \n    } \n\n    // string to int \n    //len = strlen(ampm);\n    for(i = 0; i &lt; 2 ; i++)\n    {\n        dec = dec * 10 + (hh[i] - '0');\n    }\n\n    b = strcmp(ampm,\"PM\");\n    a = strcmp(ampm,\"AM\"); \n    printf(\"%d\\n\",a);\n    printf(\"%d\\n\",b);\n\n    // processing\n    if (!strcmp(ampm,\"AM\") &amp;&amp; dec==12)  dec = 0;\n    if (!strcmp(ampm,\"PM\") &amp;&amp; dec!=12) dec += 12; \n\n    //if (strcmp(s[9],'A') &amp;&amp; dec==12)  dec = 0;\n    //if (strcmp(s[9],'P') &amp;&amp; dec!=12)  dec += 12;\n\n    // convert int back to string \n    char* hhh = itoa(dec, hh, 10);    \n    //dec = atol(hh);\n    // hh = itoa(dec,10);\n    // snprintf(result,9,\"%d\", dec);\n\n\n    //printf(\"%s\\n\",hh);\n    c = 0;\n    char* sub;\n    while (c &lt; 9)\n    {\n        sub[c] = s[3+c-1];\n        c++ ;\n    }\n\n    strcat(result,hhh);\n    strcat(result,sub);\n\n    return result;\n\n}\n\nint main()\n{\n    char *s = \"07:05:45PM\"; \n\n    char* result = timeConversion(s);\n\n    printf(\"%s\\n\", result);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "while-loop", "perfect-numbers"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 4, "creation_date": 1534925981, "post_id": 51962569, "comment_id": 90875299, "body": "Set <code>sum</code> to <code>0</code> at the begin of the <code>while</code> loop."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1534926052, "post_id": 51962569, "comment_id": 90875333, "body": "@mch But that outputs 6, 28, and 496.  <a href=\"http://rextester.com/VSFVE45383\" rel=\"nofollow noreferrer\">I don&#39;t get it</a>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1534926138, "post_id": 51962569, "comment_id": 90875385, "body": "@TimBiegeleisen that&#39;s the correct output: <a href=\"https://en.wikipedia.org/wiki/List_of_perfect_numbers\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/List_of_perfect_numbers</a>"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1534926207, "post_id": 51962569, "comment_id": 90875421, "body": "@user you might want to include a definition for what is a perfect number, just to make your question complete."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1534926295, "post_id": 51962569, "comment_id": 90875463, "body": "If you try printing an else along with the sum and number, this might have helped you spot the problem."}, {"owner": {"reputation": 735, "user_id": 9787228, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fcJNJ1f6KHA/AAAAAAAAAAI/AAAAAAAADVQ/g9S8fr3y6UQ/photo.jpg?sz=128", "display_name": "Hiren Patel", "link": "https://stackoverflow.com/users/9787228/hiren-patel"}, "edited": false, "score": 0, "creation_date": 1534927081, "post_id": 51962569, "comment_id": 90875878, "body": "Set sum =  0 before for loop and  change numero to number, you can check on <a href=\"http://c.net-question.in/c-basic-programs/perfect-numbers-between-1-and-100\" rel=\"nofollow noreferrer\">Perfect Number</a>"}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 3047096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fabf1234dabc02e91208aad5eb91e74?s=128&d=identicon&r=PG&f=1", "display_name": "goutnet", "link": "https://stackoverflow.com/users/3047096/goutnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1534926275, "creation_date": 1534926275, "answer_id": 51962670, "question_id": 51962569, "link": "https://stackoverflow.com/questions/51962569/perfect-numbers-between-1-and-1000/51962670#51962670", "title": "Perfect numbers between 1 and 1000", "body": "<p>You did not reset the <code>sum</code> in the loop:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int number=1;\n\n    while(number&lt;=1000){\n        int i, sum=0;\n\n        for(i=1; i&lt;number; i++){\n            if(number%i==0){\n                sum+=i;\n            }\n        }\n\n        if(sum==number){\n            printf(\"%d is perfect\\n\", numero);\n        }\n        number++;\n    }\n\n    return 0;\n\n}\n</code></pre>\n\n<p>for the record, according to <a href=\"https://en.wikipedia.org/wiki/Perfect_number\" rel=\"nofollow noreferrer\">Wikipedia</a>:</p>\n\n<blockquote>\n  <p>In number theory, a perfect number is a positive integer that is equal\n  to the sum of its proper positive divisors, that is, the sum of its\n  positive divisors excluding the number itself (also known as its\n  aliquot sum). Equivalently, a perfect number is a number that is half\n  the sum of all of its positive divisors (including itself) i.e. \u03c31(n)\n  = 2n.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5314, "user_id": 5270581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leDO2.jpg?s=128&g=1", "display_name": "Laurent H.", "link": "https://stackoverflow.com/users/5270581/laurent-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1534927492, "last_edit_date": 1534927492, "creation_date": 1534926647, "answer_id": 51962754, "question_id": 51962569, "link": "https://stackoverflow.com/questions/51962569/perfect-numbers-between-1-and-1000/51962754#51962754", "title": "Perfect numbers between 1 and 1000", "body": "<p>As already said, you have to reset the <code>sum</code> to zero at the beginning of the loop.<br>\nYou also have to replace <code>numero</code> with <code>number</code> (typo).<br>\nAnd to go further, I suggest you to use a for loop instead the while loop, which I find more readable IMHO. The inner for loop can also stop when <code>i &lt;= number/2</code> to optimize a bit. Here is my suggestion of code:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n    int sum;\n\n    for(int number = 1;number &lt;= 1000; number++){\n        sum = 0;\n\n        for (int i = 1; i &lt;= number/2; i++){\n            if (number % i == 0){\n                sum += i;\n            }\n        }\n\n        if (sum == number){\n            printf(\"%d is perfect\\n\", number);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>6 is perfect\n28 is perfect\n496 is perfect\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 9203745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UjCsO5jRzDU/AAAAAAAAAAI/AAAAAAAAAb0/pBX67zmj0s0/photo.jpg?sz=128", "display_name": "&#199;a\u011fatay Y&#252;celen", "link": "https://stackoverflow.com/users/9203745/%c3%87a%c4%9fatay-y%c3%bccelen"}, "is_accepted": false, "score": 0, "last_activity_date": 1534927654, "last_edit_date": 1534927654, "creation_date": 1534926723, "answer_id": 51962774, "question_id": 51962569, "link": "https://stackoverflow.com/questions/51962569/perfect-numbers-between-1-and-1000/51962774#51962774", "title": "Perfect numbers between 1 and 1000", "body": "<p>There are 3 perfect numbers between 1 and 1000. </p>\n\n<pre><code>{6, 28, 496}\n</code></pre>\n\n<p>Your code is mostly correct but you forgot to reset the sum value after each loop iteration.</p>\n\n<pre><code> ...\n    }\n    number++;\n    sum = 0; // set sum to zero at the end of the while loop\n  }\n</code></pre>\n\n<p>And also you misspelled the <code>number</code> variable as <code>numero</code> inside <code>printf</code> function.</p>\n\n<pre><code>printf(\"%d is perfect\\n\", numero);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 10233601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ff18efc647423a8423e1db0fb23dce?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/10233601/akshay"}, "is_accepted": false, "score": 0, "last_activity_date": 1534928363, "creation_date": 1534928363, "answer_id": 51963228, "question_id": 51962569, "link": "https://stackoverflow.com/questions/51962569/perfect-numbers-between-1-and-1000/51963228#51963228", "title": "Perfect numbers between 1 and 1000", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n    int number = 1, sum = 0;\n\n    while(number&lt;=1000){\n\n        sum = 0;\n        for(int i = 1; i &lt; number; i++){\n\n            if(number % i == 0){\n                sum += i;\n            }\n        }\n\n        if(sum == number){\n            printf(\"%d is perfect\\n\", number);\n        }\n        number++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>reset the value of sum  to 0 and change numero to number in printf</p>\n"}, {"comments": [{"owner": {"reputation": 1184, "user_id": 1619695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ylPM5.jpg?s=128&g=1", "display_name": "Tgilgul", "link": "https://stackoverflow.com/users/1619695/tgilgul"}, "edited": false, "score": 0, "creation_date": 1618650242, "post_id": 67125017, "comment_id": 118669969, "body": "I&#39;m sorry but this answer doesn&#39;t add anything on top of the existing answers."}], "tags": [], "owner": {"reputation": 1, "user_id": 15660378, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NDObem9kLX8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnn0AKfpElJIdR6AlFQE6E4MFQSvQ/s96-c/photo.jpg?sz=128", "display_name": "Hurricane", "link": "https://stackoverflow.com/users/15660378/hurricane"}, "is_accepted": false, "score": -1, "last_activity_date": 1618578375, "last_edit_date": 1618578375, "creation_date": 1618575073, "answer_id": 67125017, "question_id": 51962569, "link": "https://stackoverflow.com/questions/51962569/perfect-numbers-between-1-and-1000/67125017#67125017", "title": "Perfect numbers between 1 and 1000", "body": "<p>This code works just fine, taking all the suggestions presented in other answers with a little modification.</p>\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid main(){\n\nint number = 1;\n\n    while(number &lt;= 1000){\n    \n       int i, sum = 0; \n\n       for(i=1; i&lt;number; i++){\n\n          if(number%i == 0){\n\n              sum+=i;               \n          }\n\n          if( i == number-1 &amp;&amp; sum == number){\n             \n               //modify the expression within the parenthesis\n            \n               printf(&quot;%d is a perfect number.\\n&quot;, number);\n            \n               sum=0;\n          }\n\n      }\n\n      number++;\n\n  }\n\n}\n</code></pre>\n<p><strong>Output:</strong><br></p>\n<pre><code>6 is a perfect number.\n28 is a perfect number.\n496 is a perfect number.\n</code></pre>\n<p>The expression inside the last if-statement parenthesis needs to be modified, besides other mistakes indicated by other answers. This is done to prevent the inclusion of such numbers, in whose case the sum of factors becomes equal to the number before all the factors have been calculated.\nIf left unmodified, the output shall include the number 24 as well.</p>\n"}], "owner": {"reputation": 69, "user_id": 10198594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1a32b51f990643596ed6ce670c1895?s=128&d=identicon&r=PG&f=1", "display_name": "user10198594", "link": "https://stackoverflow.com/users/10198594/user10198594"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10819, "favorite_count": 0, "accepted_answer_id": 51962754, "answer_count": 5, "score": -1, "last_activity_date": 1618578375, "creation_date": 1534925839, "last_edit_date": 1534928929, "question_id": 51962569, "link": "https://stackoverflow.com/questions/51962569/perfect-numbers-between-1-and-1000", "title": "Perfect numbers between 1 and 1000", "body": "<p>I don't understand why this program doesn't give any output. I just can't see the bug. This is a program to find every perfect number between 1 and 1000. Please help me find the bug. Thanks.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int number=1, i, sum=0;\n\n    while(number&lt;=1000){\n\n        for(i=1; i&lt;number; i++){\n            if(number%i==0){\n                sum+=i;\n            }\n        }\n\n        if(sum==number){\n            printf(\"%d is perfect\\n\", numero);\n        }\n        number++;\n    }\n\n    return 0;   \n}\n</code></pre>\n"}, {"tags": ["c", "datetime"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 1, "creation_date": 1534925637, "post_id": 51962478, "comment_id": 90875114, "body": "3: You use the bonus <code>struct</code> keyword because you had to in C."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1534925638, "post_id": 51962478, "comment_id": 90875115, "body": "pretty common in C++? not really...."}, {"owner": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1534925703, "post_id": 51962478, "comment_id": 90875145, "body": "<a href=\"http://www.cplusplus.com/reference/chrono/\" rel=\"nofollow noreferrer\">chrono</a> would be the way to go today in C++."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534926432, "post_id": 51962478, "comment_id": 90875522, "body": "In both C and C++, the ampersand (<code>&amp;</code>) applied to an <i>expression</i> is the &quot;address-of&quot; operator and produces a pointer. In C++, <code>&amp;</code> in a <i>type</i> indicates a reference type. There are no references here."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1534926436, "post_id": 51962478, "comment_id": 90875524, "body": "BTW - there are no references here - as your question mentions. The <code>&amp;tt</code> is getting the address of <code>tt</code> in each case. This is C, not C++."}, {"owner": {"reputation": 111, "user_id": 9279385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7usMnA4JV5I/AAAAAAAAAAI/AAAAAAAAAHk/AVksjQ5H9pU/photo.jpg?sz=128", "display_name": "Aryaman", "link": "https://stackoverflow.com/users/9279385/aryaman"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534926861, "post_id": 51962478, "comment_id": 90875756, "body": "@user463035818 my bad! Sadly, the compiler and books I&#39;m using are very old (I&#39;m using DOSBOX, Turbo C++) thanks to the syllabus of my school, which is why I turned a blind eye to it. :P"}, {"owner": {"reputation": 111, "user_id": 9279385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7usMnA4JV5I/AAAAAAAAAAI/AAAAAAAAAHk/AVksjQ5H9pU/photo.jpg?sz=128", "display_name": "Aryaman", "link": "https://stackoverflow.com/users/9279385/aryaman"}, "edited": false, "score": 0, "creation_date": 1534926896, "post_id": 51962478, "comment_id": 90875778, "body": "Much of my confusion was because this code is C code being used in C++. My apologies!"}], "answers": [{"tags": [], "owner": {"reputation": 2389, "user_id": 9453926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3faa500658bbb2d2e88c5463a75c32e1?s=128&d=identicon&r=PG&f=1", "display_name": "politinsa", "link": "https://stackoverflow.com/users/9453926/politinsa"}, "is_accepted": false, "score": 0, "last_activity_date": 1534944086, "last_edit_date": 1534944086, "creation_date": 1534926109, "answer_id": 51962630, "question_id": 51962478, "link": "https://stackoverflow.com/questions/51962478/confusion-regarding-how-this-snippet-uses-pointers-and-references-to-display-the/51962630#51962630", "title": "Confusion regarding how this snippet uses pointers and references to display the time", "body": "<ol>\n<li>You're (partially) right. <code>tt</code> is not an <em>object</em>, it's a <em>variable of type time_t</em></li>\n<li>Yup</li>\n<li><p><code>struct tm *</code> is a datatype: a pointer to a <code>struct tm</code>. If you are not familiar with this, try to implement in pure C a stack or a queue or a chained list.</p></li>\n<li><p>RTFM: from the doc (<code>man 2 time</code>)</p></li>\n</ol>\n\n<blockquote>\n  <p>time_t time(time_t *tloc);</p>\n  \n  <p>DESCRIPTION<br>\n         time() returns the time as the number of seconds since the Epoch, 1970-01-01 00:00:00 +0000\n        (UTC).  </p>\n  \n  <p><strong>If tloc is non-NULL, the return value is also stored in the memory pointed to by tloc.</strong></p>\n</blockquote>\n\n<p>So yes, the time is now stored in <code>ti</code> and in <code>tt</code>.\nSee <a href=\"https://stackoverflow.com/questions/12240059/what-is-the-difference-between-clock-t-time-t-and-struct-tm\">What is the difference between clock_t, time_t and struct tm?</a></p>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "is_accepted": false, "score": 0, "last_activity_date": 1534926119, "creation_date": 1534926119, "answer_id": 51962636, "question_id": 51962478, "link": "https://stackoverflow.com/questions/51962478/confusion-regarding-how-this-snippet-uses-pointers-and-references-to-display-the/51962636#51962636", "title": "Confusion regarding how this snippet uses pointers and references to display the time", "body": "<pre><code>time_t tt;  // a data type to store the number of seconds since the epoch\nstruct tm * ti;  // a structure that stores the number of seconds decoded into\n                 // integers for year, month, day, hour, etc\ntime (&amp;tt);      // get the current time and store it in tt\nti = localtime(&amp;tt);  //decode the seconds into separate year/month/day/etc ints\ncout &lt;&lt; asctime(ti);  // convert the ints into string representation and print it\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 9279385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7usMnA4JV5I/AAAAAAAAAAI/AAAAAAAAAHk/AVksjQ5H9pU/photo.jpg?sz=128", "display_name": "Aryaman", "link": "https://stackoverflow.com/users/9279385/aryaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534944086, "creation_date": 1534925521, "last_edit_date": 1534929089, "question_id": 51962478, "link": "https://stackoverflow.com/questions/51962478/confusion-regarding-how-this-snippet-uses-pointers-and-references-to-display-the", "title": "Confusion regarding how this snippet uses pointers and references to display the time", "body": "<p>This is the (pretty common, I'll add) code that you find for displaying the current in time in C and C++.</p>\n\n<pre><code>time_t tt; \nstruct tm * ti; \ntime (&amp;tt); \nti = localtime(&amp;tt);\ncout &lt;&lt; asctime(ti);\n</code></pre>\n\n<p>This is what I do understand:</p>\n\n<ol>\n<li>time_t is the data type that stores time values. tt is an object of that.</li>\n<li><p>struct tm is a structure in the ctime header file.</p></li>\n<li><p>I can't seem to wrap my head around what ti is. It seems to be a pointer object of tm, but why is the \"struct\" keyword being used here? Isn't tm an already existing structure?</p></li>\n<li><p>What is time(&amp;tt)? Storing the value of time in tt? </p></li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1534925316, "post_id": 51962397, "comment_id": 90874961, "body": "using <code>strcasecmp</code>?"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1534925321, "post_id": 51962397, "comment_id": 90874964, "body": "show your effort"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1534925347, "post_id": 51962397, "comment_id": 90874974, "body": "... using <code>strxfrm</code>?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1534925373, "post_id": 51962397, "comment_id": 90874990, "body": "... using <code>strcoll</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534927137, "post_id": 51962505, "comment_id": 90875901, "body": "This doesn&#39;t work for &#220;.  On an EBCDIC platform this will declare &quot;&#230;&quot; equal to &quot;&#166;&quot;.  (The latter is in the range &#39;A&#39; to &#39;Z&#39;.)  Use <code>tolower</code> - it handles all of these cases (it doesn&#39;t handle &#223;, but that is another world of pain)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1534927278, "post_id": 51962505, "comment_id": 90875985, "body": "Or define the macro with <code>(&#39;A&#39; &lt;= c &amp;&amp; c &lt;= &#39;Z&#39;) ? c ^ (&#39;A&#39; ^ &#39;a&#39;) : c</code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1534927358, "post_id": 51962505, "comment_id": 90876034, "body": "How about using <code>TO_LOWER</code> before subtracting the characters for the return value?"}, {"owner": {"reputation": 2795, "user_id": 469026, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3c29baddd50856a673e476a8f8091a2d?s=128&d=identicon&r=PG", "display_name": "Neowizard", "link": "https://stackoverflow.com/users/469026/neowizard"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1534927394, "post_id": 51962505, "comment_id": 90876057, "body": "@DavidC.Rankin, why would <code>c ^ (&#39;A&#39; ^&#39;a&#39;)</code> be better than <code>c - (&#39;A&#39; -&#39;a&#39;)</code>? I think subtraction is clearer, but maybe I&#39;m missing something here"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1534927401, "post_id": 51962505, "comment_id": 90876060, "body": "@DavidC.Rankin Still doesn&#39;t work for EBCDIC, and the obvious question is &quot;why?&quot;"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1534927505, "post_id": 51962505, "comment_id": 90876113, "body": "It will handle both ASCII and EBCDIC."}, {"owner": {"reputation": 2795, "user_id": 469026, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3c29baddd50856a673e476a8f8091a2d?s=128&d=identicon&r=PG", "display_name": "Neowizard", "link": "https://stackoverflow.com/users/469026/neowizard"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1534927563, "post_id": 51962505, "comment_id": 90876145, "body": "@Gerhardh, you&#39;re right, omitting those <code>TO_LOWER</code>s can invert the result when the strings are not equal. Fixed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1534929717, "post_id": 51962505, "comment_id": 90877301, "body": "@MartinBonner Having code break on an EBCDIC system is not a bad thing, it is a feature. The problem is in the EBCDIC symbol table, not the code. You can add a static assert <code>&#39;Z&#39; - &#39;A&#39;</code> to prevent the code from compiling on stupidly designed systems. Providing compatibility to such systems in the year 2018 is nonsense."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1534930761, "post_id": 51962505, "comment_id": 90877900, "body": "@DavidC.Rankin It correctly handles all uppercase letters in EBCDIC <b><i>but</i></b> it also changes some other characters that are not uppercase letters."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534930836, "post_id": 51962505, "comment_id": 90877945, "body": "@Lundin I disagree.  Using <code>tolower</code> (which must be part of the C implementation) is both simpler and more portable.  (And it will handle &#220; if your locale uses that.)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534931201, "post_id": 51962505, "comment_id": 90878168, "body": "@MartinBonner No. If you are using an extended character set, you will be using <code>towlower</code> and <code>wchar_t</code>. That C allows all manner of symbol tables for <code>char</code> is mostly historical reasons, from the days when evil things like &quot;extended ASCII&quot; walked the earth."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534931526, "post_id": 51962505, "comment_id": 90878336, "body": "@Lundin &quot;You will be using <code>towupper</code>&quot; - that&#39;s remarkable presumptious.  ISO-8859-1 covers North America and most of Europe; yes, if you want full I18n you need to use <code>wchar_t</code>, but a lot of people don&#39;t."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534931704, "post_id": 51962505, "comment_id": 90878434, "body": "@MartinBonner The problem isn&#39;t if it will fit in 8 bits or not. The problem is all the trashy symbol tables that have been shown into said 8 bit format over the years, making the use of <code>char</code> for anything beyond 7 bit ASCII completely non-reliable."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534967147, "post_id": 51962505, "comment_id": 90898594, "body": "@MartinBonner <code>(&#39;A&#39; &lt;= c &amp;&amp; c &lt;= &#39;Z&#39;) ? c ^ (&#39;A&#39; ^ &#39;a&#39;) : c </code> is only applied against upper case in both ASCII and EBCDIC."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1535001993, "post_id": 51962505, "comment_id": 90907327, "body": "@DavidC.Rankin You realize that A-Z are not continguous in EBCDIC.   &#39;&#166;&#39; is greater than A and less than Z.  You will transform it to &#39;&#230;&#39;."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1535012081, "post_id": 51962505, "comment_id": 90912018, "body": "@MartinBonner yes, you are correct there. You would actually need to protect 3 zones <code>A-I</code>, <code>J-R</code> and <code>S-Z</code> to eliminate the brace and backslash and non-contiguous areas."}], "tags": [], "owner": {"reputation": 2795, "user_id": 469026, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3c29baddd50856a673e476a8f8091a2d?s=128&d=identicon&r=PG", "display_name": "Neowizard", "link": "https://stackoverflow.com/users/469026/neowizard"}, "is_accepted": true, "score": 0, "last_activity_date": 1534927551, "last_edit_date": 1534927551, "creation_date": 1534925604, "answer_id": 51962505, "question_id": 51962397, "link": "https://stackoverflow.com/questions/51962397/how-to-make-a-function-to-compare-strings-without-case-sensitivity-without-strc/51962505#51962505", "title": "How to make a function to Compare Strings Without Case Sensitivity, without strcmpi()", "body": "<p>Just implement your own:</p>\n\n<pre><code>#define TO_LOWER(c) ((c &gt;= 'A' &amp;&amp; c &lt;= 'Z') ? c - 'A' + 'a' : c)\n\nint my_strcmpi(char* str1, char* str2) {\n    while (*str1 &amp;&amp; *str2 &amp;&amp; TO_LOWER(*str1) == TO_LOWER(*str2))\n    {\n        str1++;\n        str2++;\n    }\n    return TO_LOWER(*str1) - TO_LOWER(*str2);\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9522428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4521b81c30feee792c4286ab3e160d1a?s=128&d=identicon&r=PG", "display_name": "Ion", "link": "https://stackoverflow.com/users/9522428/ion"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1534929517, "accepted_answer_id": 51962505, "answer_count": 1, "score": -4, "last_activity_date": 1534927551, "creation_date": 1534925176, "last_edit_date": 1534926770, "question_id": 51962397, "link": "https://stackoverflow.com/questions/51962397/how-to-make-a-function-to-compare-strings-without-case-sensitivity-without-strc", "closed_reason": "Not suitable for this site", "title": "How to make a function to Compare Strings Without Case Sensitivity, without strcmpi()", "body": "<p>My question is about How to make a function to compare strings without case sensitivity, without using <code>strcmpi()</code> in C.</p>\n"}, {"tags": ["c", "count"], "comments": [{"owner": {"reputation": 5593, "user_id": 3179310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffeUP.png?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/3179310/mateusz"}, "edited": false, "score": 2, "creation_date": 1534926330, "post_id": 51962235, "comment_id": 90875482, "body": "I&#39;m voting to close this question as it&#39;s primarily opinion based. Since the solution works for you it is the correct solution. There might be more elegant ways but more elegant to who? Who has to decide on that? This will create a discussion based on other people opinions rather than on fixing the issue which is not present anywhere. Another time, before posting any question read description of tags you&#39;re about to put. There&#39;s nothing about <code>word</code> or <code>kernighan-and-ritchie</code> or either a <code>sequence</code>, next time just refer to <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1534928591, "post_id": 51962235, "comment_id": 90876691, "body": "Please do not ask SO contributors to test and verify your app."}, {"owner": {"reputation": 111, "user_id": 9045860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2512a2f91591cab4a486f51bcce9d6af?s=128&d=identicon&r=PG&f=1", "display_name": "helsereet", "link": "https://stackoverflow.com/users/9045860/helsereet"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1534953289, "post_id": 51962235, "comment_id": 90891866, "body": "@Martin James OK. If in SO I can&#39;t ask these kinds of questions, where can I do this? Could you tell me this resource(s) ?"}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1534925897, "creation_date": 1534925897, "answer_id": 51962584, "question_id": 51962235, "link": "https://stackoverflow.com/questions/51962235/count-number-of-words-in-input-line-where-word-is-just-consistency-where-first/51962584#51962584", "title": "Count number of words in input line. Where word is just consistency, where first character is only letter", "body": "<blockquote>\n  <p>Is it correct solution?</p>\n</blockquote>\n\n<p>I tested a few cases and it seems okay to me.</p>\n\n<blockquote>\n  <p>Is it possible to decide this task in more elegant way? If yes, How?</p>\n</blockquote>\n\n<p>The following line </p>\n\n<pre><code>if((65 &lt; c &amp;&amp; c &lt; 90) || (97 &lt; c &amp;&amp; c &lt; 122)) \n</code></pre>\n\n<p>uses magic numbers and ASCII values to check if <code>c</code> is an alphabet.</p>\n\n<p>You can instead use the library function <code>isalpha()</code> which is defined in <code>&lt;ctype.h&gt;</code> header file so that the above line becomes:  </p>\n\n<pre><code>if (isalpha(c)) \n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 9045860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2512a2f91591cab4a486f51bcce9d6af?s=128&d=identicon&r=PG&f=1", "display_name": "helsereet", "link": "https://stackoverflow.com/users/9045860/helsereet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 51962584, "answer_count": 1, "score": -2, "last_activity_date": 1534945471, "creation_date": 1534924607, "last_edit_date": 1534945471, "question_id": 51962235, "link": "https://stackoverflow.com/questions/51962235/count-number-of-words-in-input-line-where-word-is-just-consistency-where-first", "title": "Count number of words in input line. Where word is just consistency, where first character is only letter", "body": "<p>Exact formulation:\nWrite a program, which counts numbers of words in the input line. In word means consistency, where the first character must be a letter.</p>\n\n<p>Examples of inputs and outputs:</p>\n\n<p>Input: <code>one 2two three</code>\nOutput: <code>2</code></p>\n\n<p>Input: <code>one two three four five 6six</code>\nOutput: <code>5</code></p>\n\n<p>Input: <code>789878moer and more</code>\nOutput: <code>2</code></p>\n\n<p>Input: <code>something      like    8this</code> Output: <code>2</code></p>\n\n<p>Program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define YES 1\n#define NO 0\n\nint main() {                   \n    int c, nw, inword, first_char;  \n    inword = first_char = NO;  \n    nw = 0;                    \n\n    while((c = getchar()) != EOF) { \n        if (c == ' ' || c == '\\n' || c == '\\t') {\n            inword = first_char = NO;\n        } else if (inword == NO &amp;&amp; first_char == NO) {\n            if ((65 &lt; c &amp;&amp; c &lt; 90) || (97 &lt; c &amp;&amp; c &lt; 122)) { \n                ++nw;          \n                inword = YES;  \n            } else {           \n                first_char = YES;               \n            }                  \n        }\n    }\n\n    printf(\"%d\\n\", nw);\n}\n</code></pre>\n\n<p>Answers:</p>\n\n<ol>\n<li>Is it correct solution?</li>\n<li>Is it possible to decide this task in more elegant way? If yes, How?</li>\n</ol>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1534924669, "post_id": 51962213, "comment_id": 90874612, "body": "What is the initial content?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1534924767, "post_id": 51962213, "comment_id": 90874664, "body": "Its probably too big for the stack, beside the fact that it is not initialized."}, {"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 1, "creation_date": 1534924879, "post_id": 51962213, "comment_id": 90874724, "body": "That is over 3GB of memory. Many computers don&#39;t even have that much available to programs."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534924883, "post_id": 51962213, "comment_id": 90874726, "body": "Local variables, including arrays, are usually stored on the stack of the process. The stack is a limited resource, usually 8MiB on Linux but only a single MiB on Windows. Now if <code>sizeof(int) == 4</code> (which is the usual) then you attempt to create an array of over 3 <b><i>giga</i></b> bytes on the very limited and small stack."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534924950, "post_id": 51962213, "comment_id": 90874769, "body": "Also note that local variables, if uninitialized, will have an <i>indeterminate</i> (and seemingly random) value."}, {"owner": {"reputation": 397, "user_id": 6673721, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81791bbf84512810e15d2c044f0bd643?s=128&d=identicon&r=PG&f=1", "display_name": "R K", "link": "https://stackoverflow.com/users/6673721/r-k"}, "edited": false, "score": 0, "creation_date": 1534924982, "post_id": 51962213, "comment_id": 90874781, "body": "I only wanted to store 1 or 0 and that costs 3GB memory"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534926377, "post_id": 51962213, "comment_id": 90875504, "body": "@RK if you want only store 0 or 1 you could use a bitmap where each value is represented by one bit, this will save memory by a factor of 32 (if sizeof(int) is 4 on your platform), or even by a factor of 64 if sizeof (int)  is 8 on your platform. However this is slighly more complicated and may be slightly slower. <a href=\"https://stackoverflow.com/q/1225998/898348\">This SO article</a> may be useful."}], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 6673721, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81791bbf84512810e15d2c044f0bd643?s=128&d=identicon&r=PG&f=1", "display_name": "R K", "link": "https://stackoverflow.com/users/6673721/r-k"}, "edited": false, "score": 0, "creation_date": 1534925110, "post_id": 51962288, "comment_id": 90874856, "body": "I am certainly a newbie in C ,not aware of the memory management, recommend me some tutorial or resource if you can"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 397, "user_id": 6673721, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81791bbf84512810e15d2c044f0bd643?s=128&d=identicon&r=PG&f=1", "display_name": "R K", "link": "https://stackoverflow.com/users/6673721/r-k"}, "edited": false, "score": 0, "creation_date": 1534926634, "post_id": 51962288, "comment_id": 90875645, "body": "@RK there are many, many resources on the internet covering this. Googling &quot;C memory variables&quot; or similar stuff should help. Any good C text book should cover this as well."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 1, "last_activity_date": 1534924789, "creation_date": 1534924789, "answer_id": 51962288, "question_id": 51962213, "link": "https://stackoverflow.com/questions/51962213/segmentation-fault-error-array-in-c/51962288#51962288", "title": "Segmentation fault error array in c", "body": "<p>987654321 is certainly too big for a local variable.</p>\n\n<p>If you need a dynamically sized array of that size you need to use <code>malloc</code> like:</p>\n\n<pre><code>int limit = 987654321;\nint *arr = malloc(limit * sizeof(*arr));\nif (arr == NULL)\n{ \n  ... display error message and quit\n}\n...\nfree(arr); // free it once you're dont with the array\n</code></pre>\n\n<p>BTW are you aware that your array uses roughly 4 gigabytes of memory assuming the size of <code>int</code> is 4 on your platform?</p>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1534929562, "creation_date": 1534929562, "answer_id": 51963569, "question_id": 51962213, "link": "https://stackoverflow.com/questions/51962213/segmentation-fault-error-array-in-c/51963569#51963569", "title": "Segmentation fault error array in c", "body": "<p>Since you want to store values of 1 and 0 only, and these values require only one bit, you can use a bit array instead of an integer array.  </p>\n\n<p>The size of <code>int</code> is 4 bytes (32 bits) usually, so you can reduce the memory required by a factor of 32. </p>\n\n<p>So instead of about 4 GB, you will only need about 128 MB of memory. Resources on how to implement a bit array can be found online. One such implementation is <a href=\"https://www.sanfoundry.com/c-program-implement-bit-array/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 397, "user_id": 6673721, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81791bbf84512810e15d2c044f0bd643?s=128&d=identicon&r=PG&f=1", "display_name": "R K", "link": "https://stackoverflow.com/users/6673721/r-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1534930769, "accepted_answer_id": 51962288, "answer_count": 2, "score": -2, "last_activity_date": 1534929562, "creation_date": 1534924521, "question_id": 51962213, "link": "https://stackoverflow.com/questions/51962213/segmentation-fault-error-array-in-c", "closed_reason": "Duplicate", "title": "Segmentation fault error array in c", "body": "<p>I want to write a program in which I want to initialize integer array of size 987654321 for storing values of 1 and 0 only,\nhere is my program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n    int x,y,z;\n    int limit = 987654321;\n    int arr[limit];\n    for (x = 0;x &lt; limit;x++){\n        printf(\"%d \\n\",arr[x]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>but it gives segmentation fault</p>\n"}, {"tags": ["c", "arrays", "string", "stdin", "rpn"], "comments": [{"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 1, "creation_date": 1534924108, "post_id": 51962053, "comment_id": 90874318, "body": "use <code>fscanf</code> instead of <code>fgets</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534924174, "post_id": 51962053, "comment_id": 90874351, "body": "That is part of the <i>parsing</i> you need to do to understand the expressions you read."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1534924204, "post_id": 51962053, "comment_id": 90874362, "body": "What if the number is <code>1234</code> and it doesn&#39;t fit in a <code>char</code>?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1534924340, "post_id": 51962053, "comment_id": 90874440, "body": "You cannot put 2 characters (<code>&#39;1&#39;</code> and <code>&#39;2&#39;</code>) in the space of 1 (<code>expression[0][0]</code>)"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1534924456, "post_id": 51962053, "comment_id": 90874493, "body": "Also... don&#39;t use <code>fscanf</code> instead of <code>fgets</code>. Prefer <code>fgets()</code> followed by <code>sscanf()</code>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1534924676, "post_id": 51962053, "comment_id": 90874615, "body": "Maybe you don&#39;t need to store the file, or even the line, and can just calculate as you read (add numbers to a &quot;stack&quot;, do operations, ...)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10216080"}, "edited": false, "score": 0, "creation_date": 1535127697, "post_id": 51977807, "comment_id": 90967134, "body": "This works for 1000 lines, but when I use 5000+, segmentation fault occurs. Is there a way to prevent this?"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1535148194, "post_id": 51977807, "comment_id": 90975376, "body": "@fereydoon318 : yes, there are various ways to prevent this; one is to not store each line at all -- just process each line upon input (see e.g. the relevant aspects of the answer from chqrlie, below);  or, you can dynamically allocate memory as you read in more input lines -- dynamic memory allocation is a general need in C programming (and in other languages), and there are lots of resources on-line to guide you;  HTH"}], "tags": [], "owner": {"reputation": 4946, "user_id": 2656614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/rJz0Z.png?s=128&g=1", "display_name": "Addison", "link": "https://stackoverflow.com/users/2656614/addison"}, "is_accepted": true, "score": 1, "last_activity_date": 1534993712, "creation_date": 1534993712, "answer_id": 51977807, "question_id": 51962053, "link": "https://stackoverflow.com/questions/51962053/store-contents-of-a-file-with-both-integers-and-characters-in-c/51977807#51977807", "title": "Store contents of a file with both integers and characters in C", "body": "<p>Good work with your example so far! Thanks for posting a question that explains what you want, and making an attempt at solving it.</p>\n\n<p>The main problem you've got is that you're storing an <code>array of array of chars</code>, when you need an <code>array of array of strings</code> (remember a <code>string</code> is a <code>char *</code>).</p>\n\n<p>I've used the <code>[strtok][1]</code> method, which splits a string (using a NULL character) every time it hits one of the characters listed in its call. I then allocate memory, and copy the string into the array.</p>\n\n<p>I made up some example code <a href=\"https://onlinegdb.com/r13xSijUX\" rel=\"nofollow noreferrer\">(try it online)</a> which does just this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    char* expression[1000][256];\n    char buffer[256];\n    int line = 0;\n\n    while (fgets(buffer, 256, stdin)) {\n        int word = 0;\n        char* token = strtok(buffer, \" \\r\\n\");\n        do {\n            expression[line][word] = calloc(sizeof(char), strlen(token) + 1);\n            strcpy(expression[line][word], token);\n            word++;\n        } while ((token = strtok(NULL, \" \\r\\n\")) != NULL);\n        line++;;\n    }\n    printf(\"'%s', '%s', '%s'\\n\", expression[0][0], expression[0][1], expression[0][2]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1535146451, "last_edit_date": 1535146451, "creation_date": 1535143647, "answer_id": 52011502, "question_id": 51962053, "link": "https://stackoverflow.com/questions/51962053/store-contents-of-a-file-with-both-integers-and-characters-in-c/52011502#52011502", "title": "Store contents of a file with both integers and characters in C", "body": "<p>You probably do not need to store the whole file in memory, but instead read one line at a time, evaluate it and print the result:</p>\n\n<ul>\n<li>define a buffer long enough for a line of input</li>\n<li>define an array of <code>int</code> to use as an RPN stack</li>\n<li>in a loop, read each line of input</li>\n<li><p>in a nested loop, using <code>strtok</code>, parse tokens:</p>\n\n<ul>\n<li>if the token is a number, push its value onto the stack</li>\n<li>if the token is an operator, perform this operation between the top 2 elements of the stack and store the result onto the stack after popping them.</li>\n</ul></li>\n<li><p>at the end of the line, print the value at the top of the stack</p></li>\n</ul>\n\n<p>You want to perform simple checks for stack overflow and underflow.</p>\n\n<p>Here is a sample implementation:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    char buffer[256];\n    int stack[sizeof(buffer) / 2]; // no need for stack overflow check\n    int i, sp, tos;\n\n    while (fgets(buffer, sizeof buffer, stdin)) {\n        char *p = buffer, *token, *q;\n        sp = -1;\n        stack[++sp] = 1;\n        stack[++sp] = 1;\n        while ((token = strtok(p, \" \\t\\r\\n\")) != NULL) {\n            p = NULL;\n            tos = stack[sp];\n            if (!strcmp(token, \"+\")) {\n                stack[--sp] += tos;\n            } else\n            if (!strcmp(token, \"-\")) {\n                stack[--sp] -= tos;\n            } else\n            if (!strcmp(token, \"*\")) {\n                stack[--sp] *= tos;\n            } else\n            if (!strcmp(token, \"/\")) {\n                if (tos == 0 || (tos == -1 &amp;&amp; stack[sp - 1] == INT_MAX)) {\n                    printf(\"division overflow\\n\");\n                    break;\n                }\n                stack[--sp] /= tos;\n            } else\n            if (!strcmp(token, \"%\")) {\n                if (tos == 0 || (tos == -1 &amp;&amp; stack[sp - 1] == INT_MAX)) {\n                    printf(\"division overflow\\n\");\n                    break;\n                }\n                stack[--sp] %= tos;\n            } else {\n                tos = strtol(token, &amp;q, 0);\n                if (q == token || *q != '\\0') {\n                    printf(\"invalid token: %s\\n\", token);\n                    break;\n                }\n                stack[++sp] = tos;\n            }\n            if (sp &lt; 2) {\n                printf(\"stack underflow for %s\\n\", token);\n                break;\n            }\n        }\n        if (token == NULL) {\n            for (i = 2; i &lt;= sp; i++) {\n                printf(\"%d%c\", stack[i], i == sp ? '\\n' : ' ');\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>12 3 /\n2 3 -\n3 4 *\n1 2 4 + - 5 * 7 /\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>4\n-1\n12\n-3\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10216080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 51977807, "answer_count": 2, "score": 4, "last_activity_date": 1535146451, "creation_date": 1534923900, "last_edit_date": 1535040984, "question_id": 51962053, "link": "https://stackoverflow.com/questions/51962053/store-contents-of-a-file-with-both-integers-and-characters-in-c", "title": "Store contents of a file with both integers and characters in C", "body": "<p>I have a text file <code>input.txt</code> whose contents are of the form:</p>\n\n<pre><code>12 3 /\n2 3 -\n3 4 *\n1 2 4 + - 5 * 7 /\n</code></pre>\n\n<p>My end goal is to read each line of the file and evaluate the given RPN expression. I have written the following code snippet to read the contents of the file from stdin and store it in a character array:</p>\n\n<pre><code>char expression[1000][256];\nint i = 0;\nwhile (fgets(expression[i], 256, stdin)) \n{   \n    expression[i][strcspn(expression[i],\"\\r\\n\")] = 0;\n    i++;\n}\n</code></pre>\n\n<p>Now, I have all the lines in the array. My issue here is that I want to store these such that there are no spaces and each number (with all digits) or character is in a separate index. </p>\n\n<p>For example, here, <code>expression[0][0]</code> is 1 and <code>expression[0][1]</code> is 2. But, I want <code>expression[0][0]</code> to be 12 and <code>expression[0][1]</code> to be 3, etc.</p>\n"}, {"tags": ["memory", "c", "c++", "elf"], "comments": [{"owner": {"reputation": 2477, "user_id": 799204, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CNmjQ.jpg?s=128&g=1", "display_name": "sourcejedi", "link": "https://stackoverflow.com/users/799204/sourcejedi"}, "edited": false, "score": 3, "creation_date": 1534921993, "post_id": 51968080, "comment_id": 90886344, "body": "There is a static library for the C runtime which is linked by the compiler, and which includes the <i>real</i> entry point which calls main(). You should see the real entry point function e.g. if you run <code>objdump --disassemble</code>.  <code>objdump -f</code> will show information including the &quot;start address&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "Time Traveller"}, "reply_to_user": {"reputation": 2477, "user_id": 799204, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CNmjQ.jpg?s=128&g=1", "display_name": "sourcejedi", "link": "https://stackoverflow.com/users/799204/sourcejedi"}, "edited": false, "score": 0, "creation_date": 1534922437, "post_id": 51968080, "comment_id": 90886345, "body": "I see a few libraries linked to my object when i run objdump on it, the ouput of <code>file a.out</code> said it&#39;s dynamically linked ELF so i assumed there are no statically linked libraries, guess i was wrong."}, {"owner": {"reputation": 111, "user_id": 9086893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzgNi.png?s=128&g=1", "display_name": "nxnev", "link": "https://stackoverflow.com/users/9086893/nxnev"}, "edited": false, "score": 2, "creation_date": 1534923448, "post_id": 51968080, "comment_id": 90886346, "body": "Related: <a href=\"http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html\" rel=\"nofollow noreferrer\">A Whirlwind Tutorial on Creating Really Teensy ELF Executables for Linux</a>"}, {"owner": {"reputation": 329, "user_id": 4499133, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203124958359891/picture?type=large", "display_name": "Rui F Ribeiro", "link": "https://stackoverflow.com/users/4499133/rui-f-ribeiro"}, "edited": false, "score": 1, "creation_date": 1534924622, "post_id": 51968080, "comment_id": 90886347, "body": "Related: <a href=\"https://unix.stackexchange.com/questions/419697/why-are-true-and-false-so-large/419704#419704\" title=\"why are true and false so large\">unix.stackexchange.com/questions/419697/&hellip;</a> and <a href=\"https://unix.stackexchange.com/questions/418354/understanding-what-a-linux-binary-is-doing/418357#418357\" title=\"understanding what a linux binary is doing\">unix.stackexchange.com/questions/418354/&hellip;</a>"}, {"owner": {"reputation": 181, "user_id": 6085739, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/69a6890e678d1e5f615641b33441b88f?s=128&d=identicon&r=PG", "display_name": "filo", "link": "https://stackoverflow.com/users/6085739/filo"}, "edited": false, "score": 1, "creation_date": 1534936928, "post_id": 51968080, "comment_id": 90886348, "body": "Compile it with -g and run <code>nm</code> on it - you will see all the symbols in the elf file."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 10, "last_activity_date": 1534924726, "creation_date": 1534922286, "answer_id": 51968081, "question_id": 51968080, "link": "https://stackoverflow.com/questions/51968080/linux-size-command-why-are-bss-and-data-sections-not-zero/51968081#51968081", "title": "Linux size command, why are bss and data sections not zero?", "body": "<p><code>int main(){return 0;}</code> puts data in <code>.text</code> only.</p>\n\n<pre><code>$ echo 'int main(){return 0;}' | gcc -xc - -c -o main.o &amp;&amp; size main.o\n   text    data     bss     dec     hex filename\n     67       0       0      67      43 main.o\n</code></pre>\n\n<p>You're probably <code>size</code>ing a fully linked executable.</p>\n\n<pre><code>$ gcc main.o -o main &amp;&amp; size main\n   text    data     bss     dec     hex filename\n   1415     544       8    1967     7af main\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "Time Traveller"}, "edited": false, "score": 0, "creation_date": 1534922706, "post_id": 51968082, "comment_id": 90886350, "body": "Thank you! I figured out my mistake, time to brush up my concepts of gcc and linking libraries."}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 1, "creation_date": 1534922773, "post_id": 51968082, "comment_id": 90886351, "body": "No problem, this field is huge! You have to start somewhere! Good luck and keep going! :)"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1534945435, "post_id": 51968082, "comment_id": 90886792, "body": "Please be more precise: &quot;<i>These functions use a little bit of memory that is taken from the BSS and the DATA segment.</i>&quot; could better be told as &quot;These functions have global variables that require storage; uninitialized (zero initialized) global variables in the BSS segment and initialized global variables in the DATA segment&quot;"}], "tags": [], "owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "is_accepted": true, "score": 9, "last_activity_date": 1534945534, "last_edit_date": 1534945534, "creation_date": 1534922550, "answer_id": 51968082, "question_id": 51968080, "link": "https://stackoverflow.com/questions/51968080/linux-size-command-why-are-bss-and-data-sections-not-zero/51968082#51968082", "title": "Linux size command, why are bss and data sections not zero?", "body": "<p>In fact, if you are compiling with the libc attached to the binary, there are functions that are added before (and after) the <code>main()</code> function. They are here mostly to load dynamic libraries (even if you do not need it in your case) and unload it properly once <code>main()</code> end.</p>\n\n<p>These functions have global variables that require storage; uninitialized (zero initialized) global variables in the BSS segment and initialized global variables in the DATA segment.</p>\n\n<p>This is why, you will always see BSS and DATA in all the binaries compiled with the libc. If you want to get rid of this, then you should write your own assembly program, like this (<code>asm.s</code>):</p>\n\n<pre><code>.globl _start\n\u00a0_start:\n    mov %eax, %ebx\n</code></pre>\n\n<p>And, then compile it without the libc:</p>\n\n<pre><code>$&gt; gcc -nostdlib -o asm asm.s\n</code></pre>\n\n<p>You should reduce your footprint to the BSS and DATA segment on this ELF binary.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1534944744, "question_id": 464051}, "owner": {"reputation": 91, "user_id": 13189339, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5jWtF2BKgdU/AAAAAAAAAAI/AAAAAAAAAA4/GICs5xgD1Vk/photo.jpg?sz=128", "display_name": "Time Traveller", "link": "https://stackoverflow.com/users/13189339/time-traveller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1566, "favorite_count": 0, "accepted_answer_id": 51968082, "answer_count": 2, "score": 9, "last_activity_date": 1534945534, "creation_date": 1534920943, "question_id": 51968080, "link": "https://stackoverflow.com/questions/51968080/linux-size-command-why-are-bss-and-data-sections-not-zero", "title": "Linux size command, why are bss and data sections not zero?", "body": "<p>I came across the size command which gives the section size of the ELF file. While playing around with it, I created an output file for the simplest C++ program :</p>\n\n<pre><code>int main(){return 0;}\n</code></pre>\n\n<p>Clearly, I have not defined any initialized or uninitialized, data then why are my BSS and DATA sections of the size 512 and 8 bytes?</p>\n\n<p>I thought it might be because of <code>int main()</code>, I tried creating object file for the following C program :</p>\n\n<pre><code>void main(){}\n</code></pre>\n\n<p>I still don't get 0 for BSS and DATA sections. </p>\n\n<p>Is it because a certain minimum sized memory is allocated to those section? </p>\n\n<p>EDIT- I thought it might be because of linked libraries but my object is dynamically linked so probably it shouldn't be the issue</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1534920692, "post_id": 51961166, "comment_id": 90872685, "body": "what is your desired output?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1534920707, "post_id": 51961166, "comment_id": 90872689, "body": "What did you want to get?"}, {"owner": {"reputation": 689, "user_id": 367419, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5e71e1f6efdcfb30e3aa77baaf499c?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/367419/greg"}, "edited": false, "score": 1, "creation_date": 1534920749, "post_id": 51961166, "comment_id": 90872707, "body": "&quot;all possible combinations of elements&quot; seems descriptive enough"}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1534921415, "post_id": 51961166, "comment_id": 90873016, "body": "Also see: powerset"}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "is_accepted": true, "score": 3, "last_activity_date": 1534920837, "creation_date": 1534920837, "answer_id": 51961242, "question_id": 51961166, "link": "https://stackoverflow.com/questions/51961166/printing-all-possible-combinations-of-elements-in-an-array/51961242#51961242", "title": "Printing all possible combinations of elements in an array", "body": "<p>If you want to keep the array intact, you need to revert any changes to the array you've made in your function. In this case you should store in a temporary variable the value of <code>flag[idx]</code> before changing it and then restore it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid recur(int flag[], int n, int idx) {\n  if (idx == n) {\n    for (int i = 0; i &lt; n; i++) {\n      if (flag[i]) {\n        printf(\"%d  \", i);\n      }\n    }\n    printf(\"\\n\");\n    return;\n  }\n\n  recur(flag, n, idx + 1);\n  int temp = flag[idx];  // Change line 1\n  flag[idx] = 1;\n  recur(flag, n, idx + 1);\n  flag[idx] = temp;  // Change line 2\n}\n\nint main() {\n  int flag[] = {0, 0, 0};\n  recur(flag, 3, 0);\n  return 0;\n}\n</code></pre>\n\n<p>See it in ideone: <a href=\"https://ideone.com/Q6Vb7A\" rel=\"nofollow noreferrer\">https://ideone.com/Q6Vb7A</a></p>\n"}], "owner": {"reputation": 57, "user_id": 8523720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cecc6b494ae14426dc1f44a44f7a788?s=128&d=identicon&r=PG&f=1", "display_name": "Satyendra Singh", "link": "https://stackoverflow.com/users/8523720/satyendra-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 1, "accepted_answer_id": 51961242, "answer_count": 1, "score": 1, "last_activity_date": 1534942350, "creation_date": 1534920490, "last_edit_date": 1534942350, "question_id": 51961166, "link": "https://stackoverflow.com/questions/51961166/printing-all-possible-combinations-of-elements-in-an-array", "title": "Printing all possible combinations of elements in an array", "body": "<p>During recursion, once elements are changed in an array, this change persist. How to pass array so that changes are done according to the call stack ?\nOnce element at index 2 is set, its set in every function call.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid recur(int flag[], int n, int idx){\n    if(idx==n){\n        for(int i=0; i&lt;n; i++)\n            if(flag[i])\n                printf(\"%d  \", i);\n        printf(\"\\n\");\n        return;\n    }\n\n    recur(flag, n, idx+1);\n    flag[idx] = 1;\n    recur(flag, n, idx+1);\n}\nint main(){\n    int flag[] = {0, 0, 0};\n    recur(flag, 3, 0);\n    return 0;\n}\n</code></pre>\n\n<p>It gives me the following output:</p>\n\n<pre><code>2\n1 2\n1 2\n0 1 2\n0 1 2\n0 1 2\n0 1 2\n</code></pre>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534926574, "post_id": 51961115, "comment_id": 90875606, "body": "Apparently the compiler does not carry over the information that b is local to a. (The memory b points to could be allocated dynamically; if you return <code>&amp;a</code> (after changing the function signature) you certainly get the warning.) Btw., gcc does not complain either."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1534927099, "post_id": 51961115, "comment_id": 90875887, "body": "A safety net can only stretch so far..."}, {"owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "edited": false, "score": 0, "creation_date": 1534928026, "post_id": 51961115, "comment_id": 90876378, "body": "clang compiler seems to detect this problem: ` warning: Address of stack memory associated with local variable &#39;b&#39; returned to caller`"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1534928164, "post_id": 51961115, "comment_id": 90876453, "body": "@StoryTeller I would hope that an optimizer eliminates <code>a</code> altogether. If the optimizer can see these things, the compiler can, too, with acceptable effort, at least with an option (so that we do not degrade compile time for known good programs)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534928298, "post_id": 51961115, "comment_id": 90876518, "body": "@PeterA.Schneider - On the flip side, an optimizer can reduce this program to the equivalent of <code>return 0;</code> - So there may not be anything left to diagnose if it comes back to it."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1534928371, "post_id": 51961115, "comment_id": 90876553, "body": "@StoryTeller True enough. I chose not to include that thought (no observable behavior) in my first comment in order to focus on the essential idea ;-)."}], "answers": [{"tags": [], "owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1534927789, "creation_date": 1534927789, "answer_id": 51963075, "question_id": 51961115, "link": "https://stackoverflow.com/questions/51961115/why-does-not-the-warning-c4172-returning-address-of-local-variable-or-temporary/51963075#51963075", "title": "Why does not the &quot;Warning C4172 returning address of local variable or temporary&quot; error occur?", "body": "<p>In <code>C</code> there are two kinds of \"errors\" (I am using the term <em>error</em> here very loosely). Errors that <strong>must</strong> be caught at compile time and the compiler <strong>is obligated</strong> to issue a diagnostic. In this case there can be no executable created.</p>\n\n<p>For instance:</p>\n\n<pre><code>int foo() int\n{\n    return 24\n}\n</code></pre>\n\n<p>The above snippet of code is not a <code>C</code> program and it can't compile.</p>\n\n<p>The other kind are run-time error. And while here there are a couple of them, I will focus on Undefined Behavior. Some programs on some portions of them have semantics such that <strong>if they get executed</strong> the behavior of the program is undefined. And, important to note here, the standard says: \"no diagnostics required\".</p>\n\n<p>Lets take an example close to yours:</p>\n\n<pre><code>int* foo()\n{\n    int a;\n    return &amp;a;\n}\n</code></pre>\n\n<p>This is technically legal. What would be illegal is to use the pointer. For instance if in any point your program does this:</p>\n\n<pre><code>int* x = foo();\n*x = 24;\n</code></pre>\n\n<p>then your program has Undefined Behavior. And the compiler is not required to issue any diagnostics. This is so because in practice it can get very difficult, impossible or with great performance penalty to check for UB.</p>\n\n<p>On the other hand if your program never uses the pointer from <code>foo()</code> then all is OK. But since the returned pointer is practically useless and most likely a bug, most compilers try to detect this case and issue a warning at compile time. It just happens that the analysis is not deep or complex enough to detect the returning of local address in your particular case.</p>\n"}], "owner": {"reputation": 7, "user_id": 10258180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce3bd83c84d30f20a069064c7363cf0a?s=128&d=identicon&r=PG&f=1", "display_name": "y1026", "link": "https://stackoverflow.com/users/10258180/y1026"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534927789, "creation_date": 1534920303, "last_edit_date": 1534926341, "question_id": 51961115, "link": "https://stackoverflow.com/questions/51961115/why-does-not-the-warning-c4172-returning-address-of-local-variable-or-temporary", "title": "Why does not the &quot;Warning C4172 returning address of local variable or temporary&quot; error occur?", "body": "<p>this code, returning a local pointer variable.</p>\n\n<p>But, Why does not the \"Warning C4172 returning address of local variable or temporary\" error occur?</p>\n\n<p>The compiler does not output any errors.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nstatic const char *test(void){\n    const char *a = NULL;\n    char b[64] = {0,};\n    a = b;\n    return a;\n\n}\n\nint main() {\n   const char *a;\n   a = test();\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2017", "c11"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1534919147, "post_id": 51960833, "comment_id": 90872029, "body": "Apparently Microsoft has not yet implemented this in their C compiler."}, {"owner": {"reputation": 29569, "user_id": 863980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea08c9063ae1de86e8d576fb569d513a?s=128&d=identicon&r=PG", "display_name": "vulcan raven", "link": "https://stackoverflow.com/users/863980/vulcan-raven"}, "edited": false, "score": 0, "creation_date": 1608670035, "post_id": 51960833, "comment_id": 115652385, "body": "VS 2019 16.8 has added C11 and C17 support <a href=\"https://devblogs.microsoft.com/cppblog/c11-and-c17-standard-support-arriving-in-msvc/\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/cppblog/&hellip;</a>, including <code>_Generic</code>. &quot;With the advent of two new compiler switches, /std:c11 and /std:c17, we are officially supporting the latest ISO C language standards.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 1, "creation_date": 1534920522, "post_id": 51960928, "comment_id": 90872590, "body": "Well, technically, they <i>do</i> support C11 features since C++17 defers to C11 for some of its stuff. However, C++17-compliant compilers are only required to support certain features from the C11 <i>library</i> and generic macros are not covered by that."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 9, "last_activity_date": 1534923554, "last_edit_date": 1534923554, "creation_date": 1534919250, "answer_id": 51960928, "question_id": 51960833, "link": "https://stackoverflow.com/questions/51960833/visual-studio-2017-does-not-supportc11-new-feature-generic/51960928#51960928", "title": "Visual Studio 2017 does not supportC11 new feature _Generic", "body": "<p>Visual Studio 2017 does not support any C11 features. You can plug <strong>Intel C compiler</strong> into Visual Studio (which supports C11) or use <strong>Clang</strong> or <strong>Gcc</strong>.</p>\n\n<p><a href=\"https://www.quora.com/How-can-I-run-c11-or-c99-in-Visual-Studio-2017/answer/Dusan-Jovanovic-3\" rel=\"nofollow noreferrer\">Quora</a> answer:</p>\n\n<blockquote>\n  <ul>\n  <li>To your Visual Studio add the inbuilt <strong>CLANG</strong> support</li>\n  <li>Create new project</li>\n  <li>In project properties (General) for \u201cPlatform Toolset\u201d select \u201cVisual Studio 2017 - Clang with Microsoft CodeGen (v141_clang_c2)</li>\n  <li>In C/C++ \u201cLanguage\u201d section open the \u201cC language\u201d standard list , where you will find all the C standards relevant todayL C89, C99, C11\n  \u2026select the one you wish</li>\n  </ul>\n  \n  <p>After this (same as ever) VS2017 will compile files with \u201c.c\u201d\n  extension as C, and \u201c.cpp\u201d extension as C++. </p>\n  \n  <p>Do not forget that one can change the properties on the per file basis\n  too.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 10257692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2abf711b6ff81fd8702062058522d1?s=128&d=identicon&r=PG&f=1", "display_name": "Marvin Zhang", "link": "https://stackoverflow.com/users/10257692/marvin-zhang"}, "edited": false, "score": 0, "creation_date": 1534920378, "post_id": 51960939, "comment_id": 90872523, "body": "Thanks for your reply. It&#39;s useful for me."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1534920646, "post_id": 51960939, "comment_id": 90872664, "body": "I seem to recall that MS have quite often made it clear that, though their product <i>started</i> as &quot;a C/C++ compiler&quot;, it is now focussed on C++. That means they only need to support the stuff required by the C++ standard (including certain <i>library</i> features from C11). It&#39;s natural that they deprioritise C stuff that&#39;s not necessary."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1534921043, "post_id": 51960939, "comment_id": 90872854, "body": "@paxdiablo And yet those libraries are not C++ compliant. For example they don&#39;t support all format specifiers required by <code>std::printf</code>/<code>cstdio</code>."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1534921949, "post_id": 51960939, "comment_id": 90873259, "body": "No doubt. <a href=\"https://blogs.msdn.microsoft.com/vcblog/2018/05/07/announcing-msvc-conforms-to-the-c-standard/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2018/05/07/&hellip;</a> - guess Microsoft&#39;s definition of the word &quot;conform&quot; is slightly different to mine :-)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1534922040, "post_id": 51960939, "comment_id": 90873287, "body": "Microsoft&#39;s understanding of conforming undoubtedly is that Microsoft tries to make the world conform to them."}, {"owner": {"reputation": 29569, "user_id": 863980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea08c9063ae1de86e8d576fb569d513a?s=128&d=identicon&r=PG", "display_name": "vulcan raven", "link": "https://stackoverflow.com/users/863980/vulcan-raven"}, "edited": false, "score": 0, "creation_date": 1608691638, "post_id": 51960939, "comment_id": 115657385, "body": "C++11 through C++20 are supported in recent versions of MSVC toolchain. C11 and C17 are added in VS 2019. Checkout the conformance table: <a href=\"https://docs.microsoft.com/en-us/cpp/overview/visual-cpp-language-conformance\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/overview/&hellip;</a>."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 6, "last_activity_date": 1534919272, "creation_date": 1534919272, "answer_id": 51960939, "question_id": 51960833, "link": "https://stackoverflow.com/questions/51960833/visual-studio-2017-does-not-supportc11-new-feature-generic/51960939#51960939", "title": "Visual Studio 2017 does not supportC11 new feature _Generic", "body": "<p>This is because Microsoft has never prioritized conformance to the C language standard. Over the last 20 years or so, their main focus has been C++. So Visual Studio is to be regarded as a C++ compiler. </p>\n\n<p>In \"C mode\", it still has questionable compliance towards the first C standard C90. It took them forever to make an attempt to get C99 compliance, they made some effort towards that only in recent years. It is still not fully C99 compliant either. As far as I know, there are no plans for C11 or C17 compliance.</p>\n\n<p>So if standard conformance is important to you, you must look for another C compiler.</p>\n"}], "owner": {"reputation": 155, "user_id": 10257692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2abf711b6ff81fd8702062058522d1?s=128&d=identicon&r=PG&f=1", "display_name": "Marvin Zhang", "link": "https://stackoverflow.com/users/10257692/marvin-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1518, "favorite_count": 0, "accepted_answer_id": 51960928, "answer_count": 2, "score": 4, "last_activity_date": 1534944450, "creation_date": 1534918792, "last_edit_date": 1534944450, "question_id": 51960833, "link": "https://stackoverflow.com/questions/51960833/visual-studio-2017-does-not-supportc11-new-feature-generic", "title": "Visual Studio 2017 does not supportC11 new feature _Generic", "body": "<p>Can anybody advise why Visual Studio 2017 does not support the C11 new feature <code>_Generic</code>? I found it is a very useful feature but cannot used in Visual Studio 2017.</p>\n\n<p>Below is the sample code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MYTYPE(X) _Generic((X),\\\nint:\"int\",\\\nfloat:\"float\",\\\ndouble:\"double\",\\\ndefault:\"other\")\n\nint main(void)\n{\n      int d = 5;\n      printf(\"%s\\n\", MYTYPE(d));\n      printf(\"%s\\n\", MYTYPE(2.0*D));\n      return 0;\n}\n</code></pre>\n\n<p>The complier will give below warnings and errors:</p>\n\n<pre><code>1&gt;------ Build started: Project: Project1, Configuration: Debug Win32 ------\n1&gt;predef.c\n1&gt;c:\\users\\mia\\documents\\c\\listing 16.13\\project1\\project1\\predef.c(11): warning C4013: '_Generic' undefined; assuming extern returning int\n1&gt;c:\\users\\mia\\documents\\c\\listing 16.13\\project1\\project1\\predef.c(11): error C2059: syntax error: 'type'\n1&gt;c:\\users\\mia\\documents\\c\\listing 16.13\\project1\\project1\\predef.c(12): error C2065: 'D': undeclared identifier\n1&gt;c:\\users\\mia\\documents\\c\\listing 16.13\\project1\\project1\\predef.c(12): error C2059: syntax error: 'type'\n1&gt;Done building project \"Project1.vcxproj\" -- FAILED.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n"}, {"tags": ["c", "csv", "struct"], "comments": [{"owner": {"reputation": 116, "user_id": 2831379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZmXu.jpg?s=128&g=1", "display_name": "P Kumarasamy", "link": "https://stackoverflow.com/users/2831379/p-kumarasamy"}, "edited": false, "score": 0, "creation_date": 1534915938, "post_id": 51960275, "comment_id": 90870893, "body": "Can you tell how stored in the .csv file . column wise  or continuous  data . Sample input if you share so that i can help you out."}, {"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "reply_to_user": {"reputation": 116, "user_id": 2831379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZmXu.jpg?s=128&g=1", "display_name": "P Kumarasamy", "link": "https://stackoverflow.com/users/2831379/p-kumarasamy"}, "edited": false, "score": 0, "creation_date": 1534916440, "post_id": 51960275, "comment_id": 90871073, "body": "Columns, so all the x values would be under x, all the y under y, etc. X and Y would be coordinates and U and V velocities."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534918039, "post_id": 51960275, "comment_id": 90871606, "body": "One usually chooses how to store data based on what they need to do with the data.  Generally you choose a data-structure that makes your most frequent operations efficient.  In your case, if you&#39;re just playing around, start with an <code>struct</code> that has fields for each column (e.g., <code>int x; int y; int u; int v;</code> and try to read one row into the struct, parsing the characters into integers.  Next make an array of the structs, and try to read one line into each array index.  Then move on to making a linked-list of structs, so that you can read files with an arbitrary number of lines. see <code>fscanf</code>."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "edited": false, "score": 0, "creation_date": 1535094783, "post_id": 51960961, "comment_id": 90947513, "body": "Okay, sorry for the late reply. I&#39;ve tried this code but it doesn&#39;t print anything. Would the &quot;%f %f %f %f\\n&quot; part of fscanf work, if the values are separated by a comma, like in a CSV file?"}, {"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "edited": false, "score": 0, "creation_date": 1535094823, "post_id": 51960961, "comment_id": 90947530, "body": "Alright I changed that, it works now, thank you for your help."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 2, "last_activity_date": 1534920310, "last_edit_date": 1534920310, "creation_date": 1534919420, "answer_id": 51960961, "question_id": 51960275, "link": "https://stackoverflow.com/questions/51960275/adding-data-from-a-csv-file-into-a-struct/51960961#51960961", "title": "Adding data from a CSV file into a Struct", "body": "<blockquote>\n<pre><code>flow_data *dataset = malloc(sizeof(flow_fileopen) * entry_count);\n</code></pre>\n</blockquote>\n\n<p><code>flow_fileopen</code> is a pointer and <code>sizeof(flow_fileopen)</code> is just the size of pointer (4 or 8 for example). You want <code>sizeof(flow_data)</code> instead. You can also use <code>sizeof(*dataset)</code> which maybe less prone to typing error.</p>\n\n<p>Once you allocate enough memory, you can use <code>fscanf</code> to read each line, and save to the structure. If <code>fscanf</code> is successful, it returns the number of fields it reads. Make sure you skip the first line which holds the field names \"x y u v\". </p>\n\n<pre><code>int entry_count = 7;\nflow_data* dataset = malloc(sizeof(*dataset) * entry_count);\n\n//skip the first line which includes field names\nchar buf[500];\nfgets(buf, sizeof(buf), flow_fileopen);\n\nint total = 0;\nwhile(1)\n{\n    flow_data* p = &amp;dataset[total];\n    if(4 != fscanf(flow_fileopen, \"%f %f %f %f\\n\",\n        &amp;p-&gt;xvalue, &amp;p-&gt;yvalue, &amp;p-&gt;uvalue, &amp;p-&gt;vvalue))\n    break;\n    total++;\n    if(total == entry_count)\n        break; //this array can only hold a maximum of `entry_count`\n}\n</code></pre>\n\n<p>Instead of guessing how many lines there are in the file, use <code>realloc</code> to increase the size of the array as needed.</p>\n\n<pre><code>int main() \n{\n    FILE* fp = fopen(\"flow_data.csv\", \"r\");\n    if(fp == NULL)\n    {\n        perror(\"Error opening file\");\n        exit(1);\n    }\n\n    char buf[500];\n    fgets(buf, sizeof(buf), fp); //skip the first line\n\n    int total = 0;\n    flow_data d;\n    flow_data* dataset = NULL;\n    while(4 == fscanf(fp, \"%f %f %f %f\\n\", &amp;d.xvalue, &amp;d.yvalue, &amp;d.uvalue, &amp;d.vvalue))\n    {\n        dataset = realloc(dataset, sizeof(*dataset) * (total + 1));\n        dataset[total] = d;\n        total++;\n    }\n\n    for(int i = 0; i &lt; total; i++)\n    {\n        flow_data* p = &amp;dataset[i];\n        printf(\"%.1f, %.1f, %.1f, %.1f\\n\", p-&gt;xvalue, p-&gt;yvalue, p-&gt;vvalue, p-&gt;uvalue);\n    }\n\n    free(dataset);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 51960961, "answer_count": 1, "score": 1, "last_activity_date": 1534920310, "creation_date": 1534915079, "last_edit_date": 1534916919, "question_id": 51960275, "link": "https://stackoverflow.com/questions/51960275/adding-data-from-a-csv-file-into-a-struct", "title": "Adding data from a CSV file into a Struct", "body": "<p>I was wondering how I'd add data I've read from a CSV file into a Struct (would a Struct even be the best way to go?). My CSV file is just 4 values under a header (x,y,u,v). The plan would be to store the data (without the header), and then manipulate it and/or perform calculations with it. \nThe file reads fine, I'm just confused what to do with it, once it's opened.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;string.h&gt;\n#include \"tasks.h\"\n\ntypedef struct {\n    float xvalue;\n    float yvalue;\n    float uvalue;\n    float vvalue;\n} flow_data;\n\nint main(int argc, char *argv[]) {\n\nchar* flow_file = NULL;\nint resolution = 0;\n\nflow_file = argv[2];\nresolution = atoi(argv[3]);\n\n// Reading flow_data.csv\nFILE* flow_fileopen = fopen(flow_file, \"r\");\n\n// Checking if the file has been read succesfully\nif( flow_fileopen == NULL)\n{\n    perror(\"Error opening file\");\n    exit(1);\n}\n\n// Wasn't sure how to find the entry count, so I manually set it for now.\nint entry_count = 7;\n\nflow_data *dataset = malloc(sizeof(flow_fileopen) * entry_count);\n\nchar c;\n\ndo {\n    c = fgetc(flow_fileopen);\n    printf(\"%c\", c );\n} while (c != EOF);\n\nfree(dataset);\n</code></pre>\n\n<p>What the data set looks like </p>\n\n<pre><code>x y u v\n1 2 3 4\n2 3 4 5\n</code></pre>\n"}, {"tags": ["c", "arrays", "static", "character"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534912309, "post_id": 51959880, "comment_id": 90869993, "body": "If your read your text-book, what does it say about local static variables?"}, {"owner": {"reputation": 1036, "user_id": 8209813, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-50FvkCZNkNA/AAAAAAAAAAI/AAAAAAAAABM/kJBPktdQ6uQ/photo.jpg?sz=128", "display_name": "Nick S", "link": "https://stackoverflow.com/users/8209813/nick-s"}, "edited": false, "score": 1, "creation_date": 1534913573, "post_id": 51959880, "comment_id": 90870286, "body": "Static variable exist during all lifetime of a program also it\u2019s save it value between function call, local variable exist only during function work. That\u2019s why it doesn\u2019t work when you remove keyword static, you return local variable. Also please read about static it\u2019s has another meaning in some case, for functions or for global scope variable"}], "answers": [{"comments": [{"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1534913087, "post_id": 51959949, "comment_id": 90870190, "body": "Please note that OP is also returning this variable, which would be illegal for a non-static local variable."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1534913437, "post_id": 51959949, "comment_id": 90870254, "body": "@r3musn0x Thanks for pointing that out. I simplified debugging the OP&#39;s code on my machine by replacing the <code>return</code> statement with <code>puts(result)</code> so I overlooked this."}, {"owner": {"reputation": 365, "user_id": 9895768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2596ead42525b8d149a0fef8b0812f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rajdeep Dutta", "link": "https://stackoverflow.com/users/9895768/rajdeep-dutta"}, "edited": false, "score": 0, "creation_date": 1534915311, "post_id": 51959949, "comment_id": 90870710, "body": "Ok. So if don&#39;t use the word &#39;static&#39;, then when I return from the function, the array goes out of scope i.e. the main() doesn&#39;t find any such array having the address I just returned. But if I use the word &#39;static&#39;, then the array persists in the memory even after the command returns to main(), and hence the main() can access the array. Is this the case?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 365, "user_id": 9895768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2596ead42525b8d149a0fef8b0812f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rajdeep Dutta", "link": "https://stackoverflow.com/users/9895768/rajdeep-dutta"}, "edited": false, "score": 1, "creation_date": 1534916545, "post_id": 51959949, "comment_id": 90871112, "body": "@RajdeepDutta Pretty much."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1534913763, "last_edit_date": 1592644375, "creation_date": 1534912615, "answer_id": 51959949, "question_id": 51959880, "link": "https://stackoverflow.com/questions/51959880/what-is-the-use-of-static-in-declaring-character-arrays/51959949#51959949", "title": "What is the use of Static in declaring character arrays?", "body": "<p>Two things:</p>\n<ol>\n<li><p>You are returning the <em>address</em> of a stack-allocated array from your function. If it were not <code>static</code>, you'd just be returning the address of an array that doesn't exist anymore since ordinarily, objects on the stack disappear when they go out of scope (i.e. when the function returns).  To return an array from a function that can actually be used by the calling code, it must either be allocated on the heap (i.e. with <code>malloc</code>) or be declared <code>static</code>, since local variables in functions that are declared with the <code>static</code> qualifier persist after the function returns.</p>\n</li>\n<li><p>If a variable without the <code>static</code> qualifier is declared but not initialized explicitly, it just gets whatever's already in memory at the time.</p>\n<p>If a local variable or array is declared with the <code>static</code> qualifier, it is implicitly initialized with zeroes. This means that the variable <code>result</code> can be populated with the parsed date/time value and is guaranteed to be a null-terminated string since all the elements of the array that aren't populated by the code in the function are already zero.</p>\n</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1534915087, "creation_date": 1534915087, "answer_id": 51960276, "question_id": 51959880, "link": "https://stackoverflow.com/questions/51959880/what-is-the-use-of-static-in-declaring-character-arrays/51960276#51960276", "title": "What is the use of Static in declaring character arrays?", "body": "<p><strong>C11 6.2.2 Linkages of identifiers(P3):</strong></p>\n\n<blockquote>\n  <p>If the declaration of a file scope identifier for an object or a\n  function contains the storage class specifier <code>static</code>, the identifier\n  has internal linkage.30)</p>\n</blockquote>\n\n<p><strong>Footnote:</strong></p>\n\n<blockquote>\n  <p>30) A function declaration can contain the storage-class specifier\n  <code>static</code> only if it is at file scope; see\n  6.7.1.</p>\n</blockquote>\n\n<p>It means <code>static</code> variable is declared once and its life time is entire execution of the program. That's why return static array working fine in your code, which makes sense.</p>\n\n<p>If you remove <code>static</code> keyword, then array become a local or auto and scope of local variable exists only within the block or function that it is declared in. in your code, you are trying to return local array, that's invoked <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p><strong>GCC Compiler warning :</strong></p>\n\n<pre><code>In function 'timeConversion':\nprog.c:30:12: warning: function returns address of local variable [-Wreturn-local-addr]\n     return result;\n            ^~~~~~\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1534915149, "creation_date": 1534915149, "answer_id": 51960284, "question_id": 51959880, "link": "https://stackoverflow.com/questions/51959880/what-is-the-use-of-static-in-declaring-character-arrays/51960284#51960284", "title": "What is the use of Static in declaring character arrays?", "body": "<blockquote>\n  <p>I don't understand that, what is the use of Static here? </p>\n</blockquote>\n\n<p>A couple of meanings of <code>static</code> relevant to your program, taken from C99 standard (N1256):  </p>\n\n<blockquote>\n  <p><strong>6.2.4 Storage durations of objects</strong>  </p>\n  \n  <ol>\n  <li><p>An object has a storage duration that determines its lifetime. There are three storage\n  durations: static, automatic, and allocated. Allocated storage is described in 7.20.3.  </p></li>\n  <li><p>The lifetime of an object is the portion of program execution during which storage is\n  guaranteed to be reserved for it. An object exists, has a constant address,25) and retains\n  its last-stored value throughout its lifetime.26) If an object is referred to outside of its lifetime, the behavior is undefined. The value of a pointer becomes indeterminate when\n  the object it points to reaches the end of its lifetime.  </p></li>\n  <li><p>An object whose identifier is declared with external or internal linkage, <strong>or with the\n  storage-class specifier static has static storage duration. Its lifetime is the entire\n  execution of the program and its stored value is initialized only once, prior to program\n  startup.</strong></p></li>\n  </ol>\n  \n  <p><strong>6.7.8 Initialization</strong><br>\n  ....<br>\n  10. If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate. <strong>If an object that has static storage duration is not initialized explicitly, then:</strong>  </p>\n  \n  <p>\u2014 if it has pointer type, it is initialized to a null pointer;<br>\n  \u2014 <strong>if it has arithmetic type, it is initialized to (positive or unsigned) zero;</strong><br>\n  \u2014 <strong>if it is an aggregate, every member is initialized (recursively) according to these rules;</strong><br>\n  \u2014 if it is a union, the first named member is initialized (recursively) according to these\n  rules.  </p>\n</blockquote>\n\n<p>So, in your example, <code>static</code> specifies the lifetime of the <code>result</code> array and also initializes the array as per the rules highlighted above.</p>\n"}], "owner": {"reputation": 365, "user_id": 9895768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2596ead42525b8d149a0fef8b0812f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rajdeep Dutta", "link": "https://stackoverflow.com/users/9895768/rajdeep-dutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 51959949, "answer_count": 3, "score": 2, "last_activity_date": 1534915149, "creation_date": 1534912034, "question_id": 51959880, "link": "https://stackoverflow.com/questions/51959880/what-is-the-use-of-static-in-declaring-character-arrays", "title": "What is the use of Static in declaring character arrays?", "body": "<p>I was doing this <a href=\"https://www.hackerrank.com/challenges/time-conversion/problem\" rel=\"nofollow noreferrer\">program</a> from Hackerrank in C and I solved the program without declaring my character array 'result' as static. It returned an error where my Output didn't match with the Expected Output. But as soon as I inserted the keyword 'static' in the declaration of the array 'result', the code ran successfully.</p>\n\n<p>Here is my code snippet:</p>\n\n<pre><code>char* timeConversion(char* s) \n{\n    int i;\n    static char result[100];      // this doesn't work if i remove the word 'static'\n    if (s[0]=='1' &amp;&amp; s[1]=='2' &amp;&amp; s[8]=='A')\n        { \n            result[0]='0';\n            result[1]='0';\n            for (i=2;i&lt;8;i++)\n               result[i]=s[i];  \n        }\n    else if (s[0]=='1' &amp;&amp; s[1]=='2' &amp;&amp; s[8]=='P')\n        for (i=0;i&lt;8;i++)\n               result[i]=s[i];\n    else\n    {\n       if (s[8]=='A')\n           for (i=0;i&lt;8;i++)\n               result[i]=s[i];\n       if (s[8]=='P')\n       {\n           result[0]=s[0]+1;\n           result[1]=s[1]+2;\n           for (i=2;i&lt;8;i++)\n               result[i]=s[i];           \n       }        \n     }\n    return result; \n}\n</code></pre>\n\n<p>I don't understand that, what is the use of Static here? </p>\n"}, {"tags": ["c", "linked-list", "structure"], "comments": [{"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 1, "creation_date": 1534911354, "post_id": 51959728, "comment_id": 90869770, "body": "Consider using a loop with fgets() + sscanf() instead of fscanf(). It help parsing line by line and no more need fot feof()."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1534911581, "post_id": 51959728, "comment_id": 90869820, "body": "Undefined behavior at <code>strcmp(newStd.studentID, endOfFileMarker)</code>; <code>newStd.studentID</code> is uninitialized."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1534911637, "post_id": 51959728, "comment_id": 90869835, "body": "You&#39;re using <code>feof</code> wrong; see <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1534914220, "post_id": 51959915, "comment_id": 90870443, "body": "You could also do <code>buffer[strcspn(buffer, &quot;\\n&quot;)] = &#39;\\0&#39;;</code> which is always safe."}, {"owner": {"reputation": 69, "user_id": 9843867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PIG_-4ZYr2M/AAAAAAAAAAI/AAAAAAAAACg/8c05NQq8oSc/photo.jpg?sz=128", "display_name": "Benjamin John", "link": "https://stackoverflow.com/users/9843867/benjamin-john"}, "edited": false, "score": 0, "creation_date": 1534962591, "post_id": 51959915, "comment_id": 90896546, "body": "so I&#39;ve tried using the second variation of the while(fgets) you used. I guess I&#39;m not understanding the nature of how sscanf works because I first used one sscanf line to read each line up until the coursesAttended line because I need a way to read a variable amount of courseNames and courseIDs, so I use the value of of coursesAttended to read in the courseNames and courseIDs of each line. The file is read correctly however only up to and including the coursesAttended variable. It begins reading the studentID repetitively in the courseName and coursed variables. Would I need fseek here?"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1534914366, "last_edit_date": 1534914366, "creation_date": 1534912296, "answer_id": 51959915, "question_id": 51959728, "link": "https://stackoverflow.com/questions/51959728/how-to-stop-reading-a-file-once-a-certain-string-appears-in-c/51959915#51959915", "title": "How to stop reading a file once a certain string appears in c", "body": "<p>I'll suggest that you read the file line by line using  <code>fgets</code> and use <code>sscanf</code> to do the scanning. Then you can use <code>strcmp</code> to break the loop. Something like:</p>\n\n<pre><code>while(fgets(buffer, SIZE_OF_BUFFER, fileptr))\n{\n    size_t len = strlen(buffer);\n    if (len &gt; 0 &amp;&amp; buffer[len-1] == '\\n') buffer[len - 1] = '\\0'; // Strip \\n if present\n    if (strcmp(buffer, \"***\") == 0) break;  // Stop reading\n\n    // use sscanf on buffer to find the individual fields in the line\n}\n</code></pre>\n\n<p>Note that  <code>fgets</code> also stores the <code>\\n</code> character (aka newline) into the <code>buffer</code> so before doing the string compare, the <code>\\n</code> is stripped off (if present).</p>\n\n<p>For your use case you don't really need to test whether the last character in the string is actually a <code>\\n</code>. Just make the buffer sufficiently large and always strip off the last character. In this way the code can be simplified to:</p>\n\n<pre><code>while(fgets(buffer, SIZE_OF_BUFFER, fileptr))\n{\n    size_t len = strlen(buffer);\n    if (len) buffer[len - 1] = '\\0';         // Strip last character\n    if (strcmp(buffer, \"***\") == 0) break;   // Stop reading\n\n    // use sscanf on buffer to find the individual fields in the line\n}\n</code></pre>\n\n<p>or an even more compact way (thanks to @melpomene):</p>\n\n<pre><code>while(fgets(buffer, SIZE_OF_BUFFER, fileptr))\n{\n    buffer[strcspn(buffer, \"\\n\")] = '\\0';    // Strip \\n character if present\n    if (strcmp(buffer, \"***\") == 0) break;   // Stop reading\n\n    // use sscanf on buffer to find the individual fields in the line\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 9843867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PIG_-4ZYr2M/AAAAAAAAAAI/AAAAAAAAACg/8c05NQq8oSc/photo.jpg?sz=128", "display_name": "Benjamin John", "link": "https://stackoverflow.com/users/9843867/benjamin-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534914366, "creation_date": 1534910825, "last_edit_date": 1534911328, "question_id": 51959728, "link": "https://stackoverflow.com/questions/51959728/how-to-stop-reading-a-file-once-a-certain-string-appears-in-c", "title": "How to stop reading a file once a certain string appears in c", "body": "<p>I'm having trouble figuring out how to get my program to stop reading a file once the character string endOfFileMarker \"***\" is read given a file called \"studentRecords.txt\" with sample input as shown:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>23456770,Mina,Porter,3,ENEE,114,CMSC,412,ENME,515  \n23456790,Alex,Simpson,1,CMSC,412  \n***\n</code></pre>\n\n<p>I'm reading the file using a while loop indicating that as long the file is not equal to the end of the file and if the first input from which I read is not equivalent to  the endOfFileMarker. Right now the output doesn't stop reading at the endOfFileMarker and takes it as a new record in the structure with the given output of a display function (I realize the error with the 2nd record but that appears to be a problem with the display function and not the way I'm storing it):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>23456770 Mina Porter    3        ENEE 114  CMSC 412  ENME 515\n\n23456Alex Alex Simpson  1        CMSC 412\n\n*** Alex Simpson        1        CMSC 412\n</code></pre>\n\n<p>I've tried using fgets earlier and creating an input buffer to read each line. But since there will be variable number of course names and course codes for each student, I found fscanf and using a while loop with control condition of !feof to work better. Kind of at a loss right now of how to stop storing into the structure once I hit the endOfFileMarker. If someone can please help me out with this, that would be very appreciated. My full code is written below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define filename \"studentRecords.txt\"\n\ntypedef struct courseInfo\n{//structure defining courseInfo elements\n    int courseID;\n    char courseName[30];\n}crsInfo;\n\ntypedef struct studentInfo\n{//structure defining studentInfo elements\n    char studentID[9];\n    char firstName[20];\n    char lastName[25];\n    int coursesAttended;\n    crsInfo cInfo[10];\n    struct studentInfo * next;\n}stdInfo;\n\nstdInfo * firstStdNodePointer = NULL;\n\nstdInfo * currentStdNodePointer = NULL;\n\nvoid addStudentInfo(stdInfo newStd)\n{   \n    if (firstStdNodePointer == NULL) //Create the first course node\n    {\n        firstStdNodePointer = (stdInfo *) malloc(sizeof(stdInfo));\n        strcpy(firstStdNodePointer-&gt;studentID, newStd.studentID);\n        strcpy(firstStdNodePointer-&gt;firstName, newStd.firstName);\n        strcpy(firstStdNodePointer-&gt;lastName, newStd.lastName);\n        firstStdNodePointer-&gt;coursesAttended = newStd.coursesAttended;\n\n        for(int i = 0; i &lt; newStd.coursesAttended; i++)\n        {\n            firstStdNodePointer-&gt;cInfo[i].courseID = newStd.cInfo[i].courseID;\n            strcpy(firstStdNodePointer-&gt;cInfo[i].courseName, newStd.cInfo[i].courseName);\n        }\n\n        firstStdNodePointer-&gt;next = NULL;\n        currentStdNodePointer = firstStdNodePointer;\n    }\n    else // add next course to the end of the course linked list.\n    {\n\n        // Go to the last Course in the list to get the course ID\n\n        stdInfo * newStdNodePointer = (stdInfo *) malloc(sizeof(stdInfo));\n\n        strcpy(newStdNodePointer-&gt;studentID, newStd.studentID);\n        strcpy(newStdNodePointer-&gt;firstName, newStd.firstName);\n        strcpy(newStdNodePointer-&gt;lastName, newStd.lastName);\n        newStdNodePointer-&gt;coursesAttended = newStd.coursesAttended;\n\n        for(int j = 0; j &lt; newStd.coursesAttended; j++)\n        {\n            newStdNodePointer-&gt;cInfo[j].courseID = newStd.cInfo[j].courseID;\n            strcpy(newStdNodePointer-&gt;cInfo[j].courseName, newStd.cInfo[j].courseName);\n        }\n\n        newStdNodePointer-&gt;next = NULL;\n        currentStdNodePointer-&gt;next = newStdNodePointer;         // Link previous node with newNode\n        currentStdNodePointer = currentStdNodePointer-&gt;next; // Make current node as previous node\n    }\n}\n\nvoid loadStudentInfo()\n{\n    FILE * fptr = NULL;\n    fptr = fopen(filename, \"r+\");\n\n    const char endOfFileMarker[] = \"***\"; //marks the end of the student record list\n\n    if(fptr == NULL)\n    {\n        printf(\"File can not be opened\\n\");\n    }\n\n    stdInfo newStd;//defining a new struct studentInfo variable so I can pass to the addStudent function\n    //char line[100] = \"\";\n    //char * strPtr;\n    while (!feof(fptr) &amp;&amp; strcmp(newStd.studentID, endOfFileMarker) != 0 )\n    {\n        fscanf(fptr, \"%[^,],\", newStd.studentID); \n        printf(\"%s\\n\", newStd.studentID);\n\n        fscanf(fptr, \"%[^,],\", newStd.firstName);\n        printf(\"%s\\n\", newStd.firstName);\n\n        fscanf(fptr, \"%[^,],\", newStd.lastName);\n\n        fscanf(fptr, \"%i,\", &amp;newStd.coursesAttended);\n\n        for(int j = 0; j &lt; newStd.coursesAttended; j++)\n        {//To read each courseName and ID, you need to go according to how many courses they entered\n        //because the amount of records in cInfo should correspond with how many pairs of courseName\n        //are entered into the file\n            fscanf(fptr, \"%[^,],\", newStd.cInfo[j].courseName);\n            fscanf(fptr, \"%i,\", &amp;newStd.cInfo[j].courseID);\n        }\n\n        addStudentInfo(newStd);\n    }\n    fclose(fptr);\n}\n\nvoid displayCourseInfo()\n{\n    printf(\"------------------------------------------------\\n\");\n\n    stdInfo * stdListPointer = firstStdNodePointer;\n\n    //start from the beginning\n    while(stdListPointer != NULL) {\n        printf(\"%s %s %s\\t%i\\t\", stdListPointer-&gt;studentID, stdListPointer-&gt;firstName, stdListPointer-&gt;lastName, stdListPointer-&gt;coursesAttended);\n        for(int i = 0; i &lt; stdListPointer-&gt;coursesAttended; i++)\n        {\n            printf(\" %s %i \", stdListPointer-&gt;cInfo[i].courseName, stdListPointer-&gt;cInfo[i].courseID);\n        }\n        printf(\"\\n\");\n        stdListPointer = stdListPointer-&gt;next;\n    }\n    printf(\"------------------------------------------------\\n\");\n}\nvoid switchCaseMenu()\n{\n    int selection;\n    int menuActive = 1;\n    while(menuActive)\n    {\n\n        printf(\"60-141 Bonus Assignment - Ben John\\n\");\n        printf(\"------------\\n\");\n        printf(\"1. Add a new student\\n\");\n        printf(\"2. Delete a student\\n\");\n        printf(\"3. Search for a student\\n\");\n        printf(\"4. Display current students\\n\");\n        printf(\"5. Save student information to file\\n\");\n        printf(\"6. Exit\\n\");\n\n        printf(\"Please enter a selection: \");\n        scanf(\"%i\", &amp;selection);\n\n        switch(selection)\n        {\n            case 1:\n                printf(\"~Selected - Add a new student~\\n\");\n                break;\n            case 2:\n                printf(\"~Selected - Delete a student~\\n\");\n                break;\n            case 3:\n                printf(\"~Selected - Search for s student~\\n\");\n                break;\n            case 4:\n                printf(\"~Selected - Display current students~\\n\");\n                displayCourseInfo();\n                break;\n            case 5:\n                printf(\"~Selected - Save student information to file~\\n\");\n                break;\n            case 6:\n                printf(\"~Selected - Exit~\\n\");\n                menuActive = 0;\n                break;\n            default:\n                printf(\"Invalid Input!\\n\");\n        }\n    }\n    printf(\"Goodbye!\\n\");\n}\n\nint main(void)\n{\n    loadStudentInfo();\n\n    switchCaseMenu();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "binary-search-tree"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534910400, "post_id": 51959396, "comment_id": 90869576, "body": "1) You never put any data into <code>name</code> - is that intended? 2) Are you sure you want to store pointers in your tree - I would expect strings."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534910657, "post_id": 51959396, "comment_id": 90869627, "body": "You should post the code where you do the printing that fails"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534910896, "post_id": 51959396, "comment_id": 90869665, "body": "This <code>data[0] &lt; curr-&gt;data[0]</code> compares two pointers. I&#39;m pretty sure that isn&#39;t what you want to do. I&#39;ll recommend that you edit your question and explain what you want the program to do. As it is now there seem to be something wrong with the data structure"}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1534911080, "post_id": 51959396, "comment_id": 90869714, "body": "Please give an example input, what you expected the structure to be, and what it was instead.  I agree with @4386427 that without seeing what you&#39;re passing for <code>data</code> it&#39;s hard to know your intent.  You can use indentation in text to show the expected tree, E.g., with the root at the left, and children on lines above and below indented rightward."}], "owner": {"reputation": 11, "user_id": 10257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343a10da5575451bae831828172b6c4b?s=128&d=identicon&r=PG&f=1", "display_name": "user10257574", "link": "https://stackoverflow.com/users/10257574/user10257574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534938883, "creation_date": 1534907875, "last_edit_date": 1534938883, "question_id": 51959396, "link": "https://stackoverflow.com/questions/51959396/how-to-properly-store-a-pointer-to-the-root-of-a-binary-search-tree", "title": "How to properly store a pointer to the root of a binary search tree?", "body": "<p>I am attempting to insert a series of nodes into a binary search tree. I have set up the following main and struct. My issue is that when I print after the addition of each node the values <code>parent-&gt;name</code> and <code>(*insertLocation)-&gt;name</code>, they contain the data of the new node and not of the root of the tree, as I've intended. I believe it has something to do with the parent pointer somehow being reassigned and not retaining the value of the root. Is there some other way to retain the root of a binary tree?</p>\n\n<pre><code>typedef struct nodeT{\n    char* name;\n    char** data;\n    struct nodeT* left;\n    struct nodeT* right;\n} node_t ;    \n\nint main(int argc, char** argv){\n\n    node_t *parent = NULL;\n    node_t** Location = &amp;parent;\n\n    int i;\n    char* name = malloc(sizeof(char)*MAXSTRLEN);\n    char** data = malloc(sizeof(char*)*NUMRECORDS);\n    for (i = 0; i &lt; NUMRECORDS; i++){\n        data[i] = malloc(sizeof(char)*MAXSTRLEN);\n    }\n    add(Location, data, name);\n}\n</code></pre>\n\n<p>My functions to insert a node are as follows:</p>\n\n<pre><code>node_t* newNode(char** data, char* name){\n\n  node_t* node = (node_t*) malloc(sizeof(node_t));\n  node-&gt;data  = data;\n  node-&gt;name  = name;\n  node-&gt;left  = NULL;\n  node-&gt;right = NULL;\n  return node;\n}\n\nvoid add(node_t** insertLocation, char** data, char* name){\n\n    node_t* curr = *insertLocation;\n    if(curr == NULL){\n        curr = newNode(data, name);\n        *insertLocation = curr;\n    }else{\n        if(data[0] &lt; curr-&gt;data[0]){\n            add(&amp;curr-&gt;left, data, name);\n        }else{\n            add(&amp;curr-&gt;right, data, name);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "modulus"], "comments": [{"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 1, "creation_date": 1534909299, "post_id": 51959383, "comment_id": 90869396, "body": "The answer to the name will be better posed on math.stackexchange.com.  Generally, the concept you&#39;re looking for is &quot;congruence class&quot; in the sense it is used in modular arithmetic.  Well, technically, you&#39;re computing a &quot;representative of the congruence class or residue&quot;, choosing the smallest positive representative in the set.  The <a href=\"https://en.wikipedia.org/wiki/Modular_arithmetic#Congruence_classes\" rel=\"nofollow noreferrer\">Wikipedia page</a> is somewhat opaque, but it&#39;s a start."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 2, "creation_date": 1534909949, "post_id": 51959383, "comment_id": 90869500, "body": "It&#39;s maybe worth a second comment to point out that the function you describe is the normal modulus function from the perspective of discrete math/abstract algebra.  The implementation of modulus you get in programming languages and computers is the one that&#39;s baffling.  But in the ring of integers modulo <code>n</code>, the values <code>-1</code>, <code>n-1</code>, <code>2n-1</code>, <code>...</code> are all in the same class, so <code>-1</code> can be read as <code>n-1</code>.  In your example, <code>n=5</code>."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 1, "creation_date": 1534911107, "post_id": 51959383, "comment_id": 90869721, "body": "@lockcmpxchg8b: modulo, not modulus. Modulus is the absolute value or norm."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1534911626, "post_id": 51959383, "comment_id": 90869831, "body": "@CrisLuengo: oops. you&#39;re correct.  The operation I meant is modulo.  (I was not aware of that usage of &quot;modulus&quot;, I&#39;ve only heard that term for the second operand of the modulo operation)"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534911761, "post_id": 51959383, "comment_id": 90869866, "body": "@lockcmpxchg8b: I&#39;m looking into this <a href=\"https://stackoverflow.com/questions/tagged/modulo\">modulo</a> / <a href=\"https://stackoverflow.com/questions/tagged/modulus\">modulus</a> thing. They both seem to be used mostly for the same purpose. Seems nobody cares as much about this as I do... <a href=\"https://meta.stackoverflow.com/questions/274503/clean-up-modulus-and-modulo\" title=\"clean up modulus and modulo\">meta.stackoverflow.com/questions/274503/&hellip;</a>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1534912201, "post_id": 51959383, "comment_id": 90869965, "body": "Why not normalize after the modulo operator? Much simpler logic"}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1534912427, "post_id": 51959383, "comment_id": 90870018, "body": "@CrisLuengo: Well, &quot;modulo&quot; is unambiguous, which makes it the clearly superior choice.  Changing definitions to match incorrect usage, <a href=\"https://www.merriam-webster.com/dictionary/literally\" rel=\"nofollow noreferrer\">as with &quot;literally&quot;</a> just hurts."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534912912, "post_id": 51959383, "comment_id": 90870133, "body": "@lockcmpxchg8b Perhaps a math.stackexchange.com review would be useful, yet OP&#39;s code has troubles with the full <code>int</code> range for <code>value</code> - and issues like that are better addressed on SO.  It has 2 case of UB  (both <code>int</code> overflow): <code>PositiveModulus(INT_MIN, divisor)</code> and <code>PositiveModulus(INT_MIN+1, 1)</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1534913244, "post_id": 51959383, "comment_id": 90870222, "body": "@MadPhysicist Re: &quot;Why not normalize after the modulo operator? &quot; --&gt; There are corner cases given the <code>int&#47;unsigned</code> mix applied to <code>%</code> that make that approach challenging.  Yet if code used <code>int divisor</code>, that approach would work for <code>divisors</code> in the reduced positive range of <code>int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1534910131, "post_id": 51959489, "comment_id": 90869526, "body": "Try this code&#39;s <code>PositiveModulus(some_negative_value,  7)</code> provides different results than OP&#39;s.  This one relies on <code>INT_MAX%divisor == 0</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534940385, "post_id": 51959489, "comment_id": 90883369, "body": "@chux Looks like a signed to unsigned conversion messed things up.  Fixed by changing <code>divisor</code> from <code>unsigned int</code> to <code>int</code>.  Not much reason to have it unsigned anyway."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534945690, "post_id": 51959489, "comment_id": 90886988, "body": "A reason for <code>unsigned divisor</code> vs. <code>int</code> divisor is to support <code>divisor == INT_MAX+1</code> - a reasonable case OP may need."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1534940339, "last_edit_date": 1534940339, "creation_date": 1534908742, "answer_id": 51959489, "question_id": 51959383, "link": "https://stackoverflow.com/questions/51959383/what-is-this-zero-invariant-modulus-function-called/51959489#51959489", "title": "What is this zero-invariant modulus function called?", "body": "<p>Not sure about the name of the function, but there is a slightly better way.</p>\n\n<p>If you simply return <code>value%divisor</code> from the function and change <code>divisor</code>  and the return value to <code>int</code>, you get this:</p>\n\n<pre><code>-10 -&gt; 0\n-9 -&gt; -4\n-8 -&gt; -3\n-7 -&gt; -2\n-6 -&gt; -1\n-5 -&gt; 0\n-4 -&gt; -4\n-3 -&gt; -3\n-2 -&gt; -2\n-1 -&gt; -1\n0 -&gt; 0\n1 -&gt; 1\n2 -&gt; 2\n3 -&gt; 3\n4 -&gt; 4\n5 -&gt; 0\n6 -&gt; 1\n7 -&gt; 2\n8 -&gt; 3\n9 -&gt; 4\n10 -&gt; 0\n</code></pre>\n\n<p>Note that you can go from the negative mod to the positive mod by just adding the divisor.  So you can simplify the function like this:</p>\n\n<pre><code>unsigned int PositiveModulus(int value, int divisor)\n{\n    int result = value%divisor;\n    if (result &lt; 0) {\n        return result + divisor;\n    } else {\n        return result;\n    }\n}\n</code></pre>\n\n<p>Note that it's necessary to change the type of <code>divisor</code> to <code>int</code> instead of <code>unsigned</code>, otherwise a negative <code>value</code> gets converted to a large unsigned values.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1534937530, "last_edit_date": 1534937530, "creation_date": 1534911943, "answer_id": 51959866, "question_id": 51959383, "link": "https://stackoverflow.com/questions/51959383/what-is-this-zero-invariant-modulus-function-called/51959866#51959866", "title": "What is this zero-invariant modulus function called?", "body": "<blockquote>\n  <p>What is this zero-invariant modulus function called?</p>\n</blockquote>\n\n<p>A potential C-like name is <a href=\"https://stackoverflow.com/a/20638659/2410359\">Euclidean modulo</a>.<br>\nJust  <code>mod()</code>, <a href=\"https://stackoverflow.com/questions/51959383/what-is-this-zero-invariant-modulus-function-called/51959866?noredirect=1#comment90869500_51959383\">@lockcmpxchg8b</a>, would be OK if parameters were both <code>int</code>, yet <code>int value, unsigned divisor</code> is a special combination.</p>\n\n<hr>\n\n<blockquote>\n  <p>Here's my current implementation, which appears to work correctly, AFAICT:</p>\n</blockquote>\n\n<p>Code has avoidable corner issues on this line of code:</p>\n\n<pre><code>const int numCyclesToAdd = 1+((-value)/divisor);\n\nPositiveModulus(INT_MIN, any_divisor)\n// UB (undefined behavior)\n// int overflow with -INT_MIN\n\nPositiveModulus(INT_MIN+1, 1)\n// Implementation defined behavior on conversion `unsigned` to `int` during assignment.\n// int numCyclesToAdd = 1+((-(INT_MIN+1)/1u);\n</code></pre>\n\n<hr>\n\n<p>Candidate improvement useful when <code>*</code> is expensive.</p>\n\n<p>Even works when <code>value == INT_MIN</code> and avoids the UB of OP's <code>(-INT_MIN)</code>.</p>\n\n<pre><code>unsigned PositiveModulus(int value, unsigned divisor) {\n  unsigned result;\n  if (value &lt; 0) {\n    unsigned uv = -1 - value;\n    uv %= divisor;\n    result = divisor - 1 - uv;\n  } else {\n    result = value%divisor;\n  }\n  return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 51959866, "answer_count": 2, "score": 3, "last_activity_date": 1534940339, "creation_date": 1534907733, "question_id": 51959383, "link": "https://stackoverflow.com/questions/51959383/what-is-this-zero-invariant-modulus-function-called", "title": "What is this zero-invariant modulus function called?", "body": "<p>I've got some code that calculates a cyclic offset for a given integer, and I want it to calculate the cyclic-offset such that the function's output will not show any anomalous behavior as the input value transitions from positive to negative and back.</p>\n\n<p>Here's my current implementation, which appears to work correctly, AFAICT:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n\n unsigned int PositiveModulus(int value, unsigned int divisor)\n {\n    if (value &lt; 0)\n    {\n       const int numCyclesToAdd = 1+((-value)/divisor);\n       value += numCyclesToAdd*divisor;\n    }\n    return value%divisor;\n }\n\n // unit test\n int main(int argc, char ** argv)\n {\n    for (int i=-10; i&lt;=10; i++) printf(\"%i -&gt; %u\\n\", i, PositiveModulus(i,5));\n    return 0;\n }\n</code></pre>\n\n<p>... in particular, when I run the above, I get the following output, which demonstrates the behavior I want:</p>\n\n<pre><code> $ ./a.out\n -10 -&gt; 0\n -9 -&gt; 1\n -8 -&gt; 2\n -7 -&gt; 3\n -6 -&gt; 4\n -5 -&gt; 0\n -4 -&gt; 1\n -3 -&gt; 2\n -2 -&gt; 3\n -1 -&gt; 4   // note output transitions from 4 to 0 on these two\n 0 -&gt; 0    // lines, just like every other iteration of the cycle\n 1 -&gt; 1\n 2 -&gt; 2\n 3 -&gt; 3\n 4 -&gt; 4\n 5 -&gt; 0\n 6 -&gt; 1\n 7 -&gt; 2\n 8 -&gt; 3\n 9 -&gt; 4\n 10 -&gt; 0\n</code></pre>\n\n<p>My question is, does this function have a well-known/official name?  (Searching for \"positive modulus\" returns some results, but the function described in those results doesn't seem to behave the same as the above code)</p>\n\n<p>... and a bonus question is:  Is the function shown above the best way to implement this behavior, or is there another approach that is more concise and/or mathematically correct?</p>\n"}, {"tags": ["c", "linked-list", "segmentation-fault", "strcpy"], "comments": [{"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534906045, "post_id": 51959177, "comment_id": 90868741, "body": "I think you left off a <code>typedef struct studentInfo sInf;</code>"}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534906209, "post_id": 51959177, "comment_id": 90868774, "body": "Also, this program can&#39;t segfault.  It&#39;s sitting in an infinite loop because your <code>while</code> condition is always true, but the condition of the <code>if</code> inside it is always false.  Hint: <code>i</code> never increments."}, {"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534906307, "post_id": 51959177, "comment_id": 90868791, "body": "Yeah as I said earlier, I only put the piece that is giving me the seg fault.  I have i incrementing below that but I didn&#39;t copy it."}, {"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534906359, "post_id": 51959177, "comment_id": 90868800, "body": "Assume that there is not an infinite loop (because there isn&#39;t), and that i is incrementing (because it is)."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 2, "creation_date": 1534906807, "post_id": 51959177, "comment_id": 90868877, "body": "Isn&#39;t <code>strcpy(stdID, Temp);</code> going to copy ~35 characters (i.e., the whole first line of your file) over the 8-character wide buffer <code>stdId</code>?  That could be enough to corrupt other variables on the stack and give you random behaviors."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534907246, "post_id": 51959177, "comment_id": 90868965, "body": "I bet if you <code>printf(&quot;LoadStudent: 0x%p\\n&quot;, loadStudent);</code> right after the allocation, then again right before the segfaulting line, you&#39;ll see it change.  (Assuming the <code>printf</code> you&#39;ve got right before that line is giving you what you expect)."}, {"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534907591, "post_id": 51959177, "comment_id": 90869044, "body": "All IDs are 6 characters long"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "edited": false, "score": 0, "creation_date": 1534908577, "post_id": 51959435, "comment_id": 90869240, "body": "I had strtok work for the first line but it would segfault when looping to get the second line.  I&#39;m going to try expanding the size of stdID right now and I&#39;ll get back to you.  Thanks"}, {"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "edited": false, "score": 0, "creation_date": 1534908720, "post_id": 51959435, "comment_id": 90869271, "body": "I still get the segmentation fault when expanding the size of stdID"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "edited": false, "score": 0, "creation_date": 1534908970, "post_id": 51959435, "comment_id": 90869327, "body": "@user7438591 How did you change <code>stdID</code> ? New size ?"}, {"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "edited": false, "score": 0, "creation_date": 1534909021, "post_id": 51959435, "comment_id": 90869341, "body": "Yeah just changed the size to 256"}, {"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "edited": false, "score": 0, "creation_date": 1534909162, "post_id": 51959435, "comment_id": 90869375, "body": "I also just tried using strtok again (because I had the code saved from before) but this time, all of the strtok calls were in a different function that was then called by the above function and that also resulted in a seg fault"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "edited": false, "score": 0, "creation_date": 1534909584, "post_id": 51959435, "comment_id": 90869442, "body": "After increasing the size I can&#39;t reproduce your problem. See <a href=\"https://ideone.com/9snYAu\" rel=\"nofollow noreferrer\">ideone.com/9snYAu</a> The problem may be in some code you didn&#39;t post"}, {"owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "edited": false, "score": 0, "creation_date": 1534909879, "post_id": 51959435, "comment_id": 90869490, "body": "You are correct, there is an error in a different part of my code.  It was the size of the strings that I was copying too.  Thank you!"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1534908181, "creation_date": 1534908181, "answer_id": 51959435, "question_id": 51959177, "link": "https://stackoverflow.com/questions/51959177/segmentation-fault-when-using-strcpy-with-a-linked-list-member/51959435#51959435", "title": "Segmentation Fault when using strcpy with a linked list member", "body": "<p>Your problem starts here:</p>\n\n<pre><code>strcpy(stdID, Temp);\n</code></pre>\n\n<p>This will copy the <strong>whole</strong> first line into <code>stID</code>. As <code>stID</code> can only hold 8 chars and the first line is more than 8 chars, you write out of bounds which is undefined behavior. After that anything may happen.</p>\n\n<p>You write that you couldn't make <code>strtok</code> work. Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    char str[] = \"11111,First,Last,2,COR,100,SEG,200\";\n    char* p = strtok(str, \",\");\n    while(p)\n    {\n        printf(\"%s\\n\", p);\n        p = strtok(NULL, \",\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>11111\nFirst\nLast\n2\nCOR\n100\nSEG\n200\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7438591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d22d073571570adf124a3af4854cde?s=128&d=identicon&r=PG&f=1", "display_name": "user7438591", "link": "https://stackoverflow.com/users/7438591/user7438591"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 51959435, "answer_count": 1, "score": 0, "last_activity_date": 1534908665, "creation_date": 1534905550, "last_edit_date": 1534908665, "question_id": 51959177, "link": "https://stackoverflow.com/questions/51959177/segmentation-fault-when-using-strcpy-with-a-linked-list-member", "title": "Segmentation Fault when using strcpy with a linked list member", "body": "<p>I have a text file with the following data:</p>\n\n<pre><code>11111,First,Last,2,COR,100,SEG,200\n22222,F,L,1,COR,100\n33333,Name,Name,3,COR,100,SEG,200,CMP,300\n***\n</code></pre>\n\n<p>I need to separate the data in each line (at the commas) and add each line of data into a linked list.  Here is a piece of the code that I am using to do it:</p>\n\n<pre><code>struct courseInfo{\n    int courseID;\n    char courseName[30];\n};\ntypedef struct courseInfo cInf;\n\nstruct studentInfo{\n    char studentID[8];\n    char firstN[20];\n    char lastN[25];\n    int nCourses;\n    cInf courseInf[10];\n    struct studentInfo *next;\n};\ntypedef struct studentInfo sInf;\nvoid loadStudentInfo(){\nFILE *loadFile;\nloadFile = fopen(\"studentRecords.txt\", \"r\");\nwhile(1){\n    sInf *loadStudent;\n    loadStudent = (sInf*)malloc(sizeof(sInf));\n    char Temp[256];\n    fgets(Temp,256,loadFile);\n    if (Temp[0] == '*')\n        break;\n    int commaCount = 0;\n    int i = 0;\n    while(Temp[i] != '\\0'){\n        if(Temp[i] == ',' &amp;&amp; commaCount == 0){\n            char stdID[8];\n            strcpy(stdID, Temp);\n            int commaLoc = 0;\n            while(stdID[commaLoc] != ','){                                             //Finds where stdID ends\n                commaLoc++;\n            }\n            for(;commaLoc &lt; 8; commaLoc++){                                            //Delimits stdID, 8 is the max size of studentID\n                stdID[commaLoc] = '\\0';\n            }\n            printf(\"%s\\n\", stdID);\n            strcpy(loadStudent -&gt;studentID, stdID);    //Causing segmentation fault\n            commaCount++;\n        }\n</code></pre>\n\n<p>Now, what I have done to separate the data in each line may not be the most efficient but I tried using strtok() (which read the first line fine but resulted in a segmentation fault when reading the second line) and also tried using fscanf and %[^,] but it did not work for me.  Anyway, I don't think that the method I am using to separate the data is causing the segmentation fault.  This loop will continue on separating and storing the rest of the data in the appropriate member of loadStudent.  The line causing the segmentation fault is shown above.  Any help with determining the cause of this error is appreciated.</p>\n"}, {"tags": ["c", "swift", "struct"], "comments": [{"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "edited": false, "score": 0, "creation_date": 1534905090, "post_id": 51959004, "comment_id": 90868531, "body": "<code>BYTE</code>, <code>GUID</code>, and <code>UINT16</code> (caps) do not look like standard C types...  Where are these coming from?"}, {"owner": {"reputation": 202, "user_id": 5113017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69599620b8aad0fbb738733fe290add7?s=128&d=identicon&r=PG&f=1", "display_name": "vikkuu", "link": "https://stackoverflow.com/users/5113017/vikkuu"}, "reply_to_user": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "edited": false, "score": 0, "creation_date": 1534905848, "post_id": 51959004, "comment_id": 90868696, "body": "These parameters are Windows based C and I&#39;m able to convert to MacOS in C but I need same structure in swift."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 2, "creation_date": 1534920260, "post_id": 51959004, "comment_id": 90872486, "body": "The only reliable way to define a layout compatible  struct in Swift is to define it in C, and import the definition to Swift."}], "answers": [{"comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 2, "creation_date": 1534920122, "post_id": 51959506, "comment_id": 90872425, "body": "<code>[UInt8](repeating:0, count:16)</code> is an <code>Array</code>, which is a fixed-size structure with (opaque) pointers to the element storage. It is <i>not</i> layout compatible to the C array <code>BYTE  HeaderTag[16]</code>."}, {"owner": {"reputation": 1105, "user_id": 453406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bed8e9c3fe3ce0344573e610df84eca?s=128&d=identicon&r=PG", "display_name": "Brett", "link": "https://stackoverflow.com/users/453406/brett"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1535012294, "post_id": 51959506, "comment_id": 90912131, "body": "@MartinR is absolutely correct here, headerTag is always 8 bytes in size regardless of the value of count.  I should have realised this."}], "tags": [], "owner": {"reputation": 1105, "user_id": 453406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bed8e9c3fe3ce0344573e610df84eca?s=128&d=identicon&r=PG", "display_name": "Brett", "link": "https://stackoverflow.com/users/453406/brett"}, "is_accepted": true, "score": 0, "last_activity_date": 1534908941, "creation_date": 1534908941, "answer_id": 51959506, "question_id": 51959004, "link": "https://stackoverflow.com/questions/51959004/convert-c-typedef-struct-to-swift/51959506#51959506", "title": "Convert C typedef struct to Swift", "body": "<p>It is almost identical in Swift apart from the headerTag.\nI'll start you off:</p>\n\n<pre><code>struct Header\n{\n    var headerTag = [UInt8](repeating:0, count:16)\n    var unused_field_1 : UInt16 = 0\n    var unused_field_2 : UInt16 = 0\n    var data : UInt32 = 0\n    var size : UInt64 = 0\n    var UpperHeaderSize : UInt32 = 0\n    var LowerHeaderSize : UInt32 = 0\n    // You can add the rest based on above\n}\n\nlet headerA = Header()\n</code></pre>\n\n<p>I have no idea what format a GUID is though, but BYTE is UInt8 in Swift. </p>\n\n<p>Note: structs are passed by value in Swift and not by references as in C.</p>\n"}], "owner": {"reputation": 202, "user_id": 5113017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69599620b8aad0fbb738733fe290add7?s=128&d=identicon&r=PG&f=1", "display_name": "vikkuu", "link": "https://stackoverflow.com/users/5113017/vikkuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "closed_date": 1534941858, "accepted_answer_id": 51959506, "answer_count": 1, "score": 1, "last_activity_date": 1534908941, "creation_date": 1534903957, "last_edit_date": 1534905327, "question_id": 51959004, "link": "https://stackoverflow.com/questions/51959004/convert-c-typedef-struct-to-swift", "closed_reason": "Needs details or clarity", "title": "Convert C typedef struct to Swift", "body": "<p>I have this C typedef struct:</p>\n\n<pre><code>typedef struct _HEADER {\n  BYTE              HeaderTag[16];\n  UINT16            __unused_field_1;   \n  UINT16            __unused_field_2;   \n  UINT32            data;       \n  UINT64            size;\n  UINT32            UpperHeaderSize;    \n  UINT32            LowerHeaderSize;    \n  UINT32            KeySize;            \n  UINT32            bufferEndOffset;\n  UINT32            NcefTag;            \n  BYTE              Description[128];   \n  UINT32            ContainerVersion;   \n  UINT32            HeaderSize;         \n  GUID              KeyId;              \n  UINT32            FileId;             \n} HEADER, *P_HEADER;\n\ntypedef struct _INITIALIZATION_VECTOR {\n  UINT32            Offset;             \n  UINT32            __unused_field_1;\n  UINT64            __unused_field_2;\n} INITIALIZATION_VECTOR, *PINITIALIZATION_VECTOR;\n</code></pre>\n\n<p>I want to convert this C typedef struct to Swift.</p>\n"}, {"tags": ["c", "assembly", "instruction-set", "machine-instruction"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1534903429, "post_id": 51958881, "comment_id": 90868209, "body": "well on my x86 computer sizeof(unisgned long int) is 8 not 4."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534903562, "post_id": 51958881, "comment_id": 90868233, "body": "int test ( void ) { return(sizeof(unsigned long int)); }   compile to object and then disassemble, what do you see on your x86 computer?  now the answer does change depending on which generation of x86, this is true, and there is a long period of time when your question made sense."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534903629, "post_id": 51958881, "comment_id": 90868251, "body": "the professor/text should have been careful about using int as the answer for the same reason they should follow their own model and use int32_t"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534903897, "post_id": 51958881, "comment_id": 90868303, "body": "and since this shows both C code and assembly, why didnt you just plug in int and then long int for data_t and &lt; for COMP and see what your compiler on your computer produced?  here again I see 64 bit registers being used for long int and 32 bit registers for int.  What did your compiler show when you tried it?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534904127, "post_id": 51958881, "comment_id": 90868362, "body": "of course I see a complete result of the C code not the incorrect fragment shown by the assembly provided.  granted it depends on the calling standard used by the compiler that generated that example, for that example to be correct/complete the definition of int would be 8 bits or one byte and then sure a long could be, hmmm 16 or 32 bits one would assume if int is defined as 8 for that compiler."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534904248, "post_id": 51958881, "comment_id": 90868383, "body": "please apply the appropriate tag x86 or x86-64 to this question, I cannot tell from what you have provided."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1534904910, "post_id": 51958881, "comment_id": 90868496, "body": "<code>long int</code> is 8 bytes on Linux, but 4 on Windows."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1534909141, "post_id": 51958881, "comment_id": 90869368, "body": "@immibis that is very amusing, linux vs windows has nothing to do with the C language nor the implementation defined size.  I can demonstrate on both operating systems a long int as being 4 as well as both showing an 8, as well as cross compilers with long int showing other sizes on those operating systems.  that is the problem with the OP&#39;s question/assumption/understanding.  Plus this is a pretty bad textbook to be learning from so that doesnt help."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1534909500, "post_id": 51958881, "comment_id": 90869423, "body": "the cmpl instruction and the shown registers imply a particular size, although with compiler implementations for x86, that instruction all by itself can be generated from smaller variables.  so even if you assume one specific size C has a way to resolve that across implementations and targets (operating system is irrelevant)."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534909566, "post_id": 51958881, "comment_id": 90869437, "body": "Those size specific of course are converted in a header file to the traditional variables types which is what the compiler itself actually supports (as it doesnt support uint32_t ,etc), leading to this confusion.  Your stdint.h has to match the compiler but is often delivered with the separately developed C library, which leads to the opportunity for failure."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534909707, "post_id": 51958881, "comment_id": 90869464, "body": "I am sure you cant, but I would find a better textbook/class/university...If this is the rare case you picked up this book to learn on your own, get a better book.  If this is a book being used by a class in a particular university I assume you dont have the time/resources to find something better.  Dont worry the grass is often not greener at other schools/professors/textbooks."}], "answers": [{"tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 1, "last_activity_date": 1534910532, "creation_date": 1534910532, "answer_id": 51959683, "question_id": 51958881, "link": "https://stackoverflow.com/questions/51958881/mapping-from-assembly-instruction-sequences-to-c-code/51959683#51959683", "title": "mapping from (Assembly) instruction sequences to C code", "body": "<p>The very specific answer to your very specific question is because long does not have a fixed size definition.  When the first 32 bit x86 processors came out and the 16 bit to 32 bit transition started, for a number of compilers int changed from 16 bit to 32 bit.  But long int stayed at 32 bits.  And this continued until the 64 bit x86 processors came out and a/some popular compilers changed long to be 64 bits and int stayed 32 bits.</p>\n\n<p>But the definition of how bit an int or long is is the choice of the compiler author, the term \"implementation defined\" is used in the language specification to cover this.  So it is very possible that one compiler or compiler version of the same compiler interprets long as 32 bit, and another compiler or version of the same interprets long as 64 bits for the same target.  This is where stdint.h came from it is a bit of a hack but based on the age and history of the C language and the many many compilers, they didnt have much of a choice.</p>\n\n<p>Now if you example compiler output further you may/will find that some compilers use the larger registers eax/rax and avoid al/bl ah/bl operations, has to do with microcoding and performance in part.  So cmpl and eax/edx tell you the beginning of the story, read this straight of your assemblers documentation for its assembly language (assembly languages are defined by the assembler, the tool, not the chip/logic designer, although they will often mostly resemble the chip/ip vendors documentation).  And then allow for the possibility that some copmilers can use that same specific instruction for smaller variables (but not larger of course).</p>\n\n<p>But this assembly doesnt match the C code provided unless the definition of an int is 8 bits.  The textbook implies the definition of an int is 32 bits.  So this is a horrible and very broken example.  If the rest of the textbook is like this I wish you luck.  x86 is the wrong first instruction set to learn anyway, should never be used for teaching this kind of a topic.  many/most others would serve you better.  I am sure you probably dont have a choice though so your task is much harder.</p>\n\n<p>What you can/should do is take that code, take the compiler or compilers you have and provided defines for data_t and COMP and see what you get.  The _t in the C code implies the knowledge of stdint.h so use those definitions for your test code and your answer to this homework assignment.</p>\n"}], "owner": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534910532, "creation_date": 1534902940, "question_id": 51958881, "link": "https://stackoverflow.com/questions/51958881/mapping-from-assembly-instruction-sequences-to-c-code", "title": "mapping from (Assembly) instruction sequences to C code", "body": "<p>There is one exercise from my textbook:</p>\n\n<pre><code>int comp(data_t a, data_t b) {\n    return a COMP b;\n}\n</code></pre>\n\n<p>shows a general comparison between arguments a and b, where we can set the\ndata type of the arguments by declaring data_t with a typedef declaration, and\nwe can set the comparison by defining COMP with a #define declaration. Suppose a is in %edx and b is in %eax. For each of the following instruction sequences, determine which data types data_t (There can be multiple correct answers;you should list them all.)</p>\n\n<pre><code>cmpl %eax, %edx\nsetl %al\n</code></pre>\n\n<p>And the answer from the textbook is:</p>\n\n<p><em>The suffix \u2018l\u2019 and the register identifiers indicate 32-bit operands, while the comparison is for a two\u2019s complement \u2018&lt;\u2019. We can infer that data_t must be int.</em></p>\n\n<p>so my question is :since it asks to list all possible answers, why data_t cannot also be 'long int' and pointer which are also 32 bits?</p>\n"}, {"tags": ["c", "hashtable"], "comments": [{"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534916942, "post_id": 51958742, "comment_id": 90871254, "body": "I&#39;m confused about the question.  Once you have the words, you feed each word to the hash function to generate the hash-table bucket index.  You then store the word at that bucket in the hash table.  If your hash function is good, this will result in an approximately-uniform distribution of the words over the hash-table buckets.  If your hash is too large to be a table index, take it modulo the number of table indices (which, if that&#39;s a power of 2, won&#39;t harm your uniformity)"}, {"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1534920923, "post_id": 51958742, "comment_id": 90872789, "body": "Hi lockcmp! Thank you for the reply. I guess my main question is how exactly do I go from what I have (therefore just the above code), to actually feeding the words into the hash function? I guess I&#39;m having trouble linking all these different concepts into creating the end product."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 9165191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a57473edcddc63e52ee89e77d79dd1?s=128&d=identicon&r=PG&f=1", "display_name": "abt jeremie", "link": "https://stackoverflow.com/users/9165191/abt-jeremie"}, "is_accepted": false, "score": 0, "last_activity_date": 1534926468, "creation_date": 1534926468, "answer_id": 51962711, "question_id": 51958742, "link": "https://stackoverflow.com/questions/51958742/creating-a-hash-table-and-nodes-from-a-paragraph-of-words/51962711#51962711", "title": "Creating a hash table and nodes from a paragraph of words", "body": "<p>We use hashtable to store a pair of things, the examples often given is you store a name, and with that you want to retrieve his adresses or phone number ...\nbut here (maybe I have misendurstood something but ?) you want to store a word into an hashtable, but you are using as index the word to retrieve the word.\nwith my example you obtain something like that : </p>\n\n<pre><code>int index = hash_it(some_random_name)\nhashtable[index];//this will give you his phone number for example;\n</code></pre>\n\n<p>but with your problem</p>\n\n<pre><code>int index = hash_it(some_word_in_paragraph);\nhashtable[index];//this will give you the word, but you had it already at \n// the time you were passing it to the function hash_it\n</code></pre>\n\n<p>so if I've well understood the question, i think a changing of data structure you're having might be good;</p>\n"}], "owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534934753, "creation_date": 1534901628, "last_edit_date": 1534934753, "question_id": 51958742, "link": "https://stackoverflow.com/questions/51958742/creating-a-hash-table-and-nodes-from-a-paragraph-of-words", "title": "Creating a hash table and nodes from a paragraph of words", "body": "<p>I have a paragraph of words, and I want to chuck each word into a hash table, and divide them evenly amongst the buckets. </p>\n\n<p>My issue is, I have the hash table, and I've got the code written for the nodes, as they seem the easiest, however what do I do to have the code read the paragraph of text, and then spit each word into the hash table? I'm using the a while loop, with fscanf but I'm stuck on what to write after</p>\n\n<pre><code>while (fscanf(paragraph, \"%s\", paragraph_word) != EOF)\n{\n</code></pre>\n\n<p>If it helps, my hash table and nodes:</p>\n\n<pre><code>for (int i = 0; i &lt; HASHTABLE_SIZE; i++)\n{\n    hashtable[i] = NULL;\n}\n\nif (new_node == NULL)\n{\n    unload();\n    return false;\n}\n</code></pre>\n\n<p>This is my hash function, that I obtained online.</p>\n\n<pre><code>int hash_it(char* word)\n{\nunsigned int hash = 0;\nfor (int i=0, n=strlen(word); i&lt;n; i++)\n    hash = (hash &lt;&lt; 2) ^ word[i];\nreturn hash % hashtable_size;\n}\n</code></pre>\n\n<p><strong>Question</strong>: How do I use fscanf to read each word in a paragraph and then place them into a hash table, with even buckets?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1534901274, "creation_date": 1534901274, "answer_id": 51958708, "question_id": 51958684, "link": "https://stackoverflow.com/questions/51958684/declare-struct-inside-main/51958708#51958708", "title": "Declare struct inside main()", "body": "<p>You don't need to use <code>typedef</code> in order to define a new structured type. This is perfectly valid:</p>\n\n<pre><code>struct student_s {\n    char* name;\n    int age;\n    struct student_s* next;   \n}; // Remove \"student\". Now you don't have a global variable.\n</code></pre>\n\n<p>A consequence of this is that <code>student_s</code> is <em>not</em> a name of your structured type; it is a <em>tag</em> of your structured type. Therefore, declaring objects of structured type corresponding to <code>student_s</code> must start with the keyword <code>struct</code>:</p>\n\n<pre><code>int main(void)\n{\n    struct student_s student;\n    ... // The rest of your code remains the same\n}\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 9644113, "user_type": "registered", "profile_image": "https://graph.facebook.com/1497019217094603/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/9644113/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1439, "favorite_count": 0, "accepted_answer_id": 51958708, "answer_count": 1, "score": 1, "last_activity_date": 1534901274, "creation_date": 1534901038, "question_id": 51958684, "link": "https://stackoverflow.com/questions/51958684/declare-struct-inside-main", "title": "Declare struct inside main()", "body": "<p>I am new to C. I got asked to modify this program so that the variables <code>student</code> and <code>anotherStudent</code> are not global but are local to main.It will still be printed by <code>printStudnets</code>. <code>typedef</code> is not allowed to use.\nI understand if declare struct in main and it would be ascessible to the main function only.Do I have to declare struct in each function to achieve this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nstruct student_s {\n    char* name;\n    int age;\n    struct student_s* next;   \n} student;\nstruct student_s anotherStudent;\nvoid printOneStudent(struct student_s student)\n{\n    printf(\"%s (%d)\\n\", student.name, student.age);\n}   \nvoid printStudents(const struct student_s* student)\n{\n    while (student != NULL) {\n        printOneStudent(*student);\n        student = student-&gt;next;\n    }\n}\nint main(void)\n{\n    student.name = \"Agnes McGurkinshaw\";\n    student.age = 97;\n    student.next = &amp;anotherStudent;\n\n    anotherStudent.name = \"Jingwu Xiao\";\n    anotherStudent.age = 21;\n    anotherStudent.next = NULL;\n\n    printStudents(&amp;student);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1534894716, "post_id": 51957929, "comment_id": 90866536, "body": "Arrays cannot be assigned, only copied. So you need to write a <code>for</code> loop that copies each of the pointers in <code>args</code> into the corresponding location in <code>full_command</code>."}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1534898773, "post_id": 51958295, "comment_id": 90867333, "body": "<code>full_command = args;</code> is forbidden in C. You&#39;ll get an error from the compiler if you try that."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1534896940, "creation_date": 1534896940, "answer_id": 51958295, "question_id": 51957929, "link": "https://stackoverflow.com/questions/51957929/assigning-char-struct-data-element-gives-warning/51958295#51958295", "title": "Assigning char*[] struct data element gives warning", "body": "<pre><code>char *args[MAX_ARGS];\n</code></pre>\n\n<p><code>args</code> is an array of MAX_ARGS pointers. <code>args</code> itself points to the memory of the first pointer. <code>args</code> hold the memory address in which the first pointer is. <code>args[0]</code> is the value of the first pointer. <code>args[0][0]</code> means, that we go to the memory of the first pointer, then go to the memory address pointed to by that pointer, and then get the value of the first byte in that memory address.</p>\n\n<pre><code>char *full_command[MAX_ARGS];\n</code></pre>\n\n<p>Now, this is also an array of MAX_ARGS pointers. <code>full_command</code> points to memory region that is <code>MAX_ARGS * sizeof(char*)</code> bytes length. <code>full_command[0]</code> is the value of the first pointer inside that memory region.<br>\nNow lets try assignment:</p>\n\n<pre><code>full_command = args;\n</code></pre>\n\n<p>Now we get the value of the memory address of the first pointer in <code>args</code> and assign that value into <code>full_command</code> variable. The memory of <code>full_command</code> is lost, it's no longer accessible by any other handle. Now <code>args[0] = smth</code> only and only if <code>full_command[0] = smth</code>. <code>full_command</code> points to the memory region that <code>args</code> points to.<br>\nTo copy array VALUES you need to copy each VALUE of the array:</p>\n\n<pre><code>for (size_t i = 0; i &lt; MAX_ARGS; ++i) { \n     full_command[i] = args[i];\n}\n</code></pre>\n\n<p>or using memcpy:</p>\n\n<pre><code>memcpy(full_command, args, sizeof(full_command));\n</code></pre>\n\n<p>After such operation <code>full_command</code> points to a different region that <code>args</code>, both are <code>sizeof(char*) * MAX_ARGS</code> bytes long. And they both hold the same values.<br>\nYou need to assign each array value:</p>\n\n<pre><code>struct background_element bg_elem = {\n   .pid = child, \n   .number = num_background, \n   .full_command = { args[0], args[1], args[2], ....&lt;up until MAX_ARGS&gt; }, \n};\n</code></pre>\n\n<p>That's not very usuable, it needs to be modified each time MAX_ARGS changes. So use memcpy or a loop:</p>\n\n<pre><code>struct background_element bg_elem = {\n    .pid = child, \n    .number = num_background, \n};\nmemcpy(bg_elem.full_command, args, sizeof(bg_elem.full_command));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1534931610, "post_id": 51958324, "comment_id": 90878391, "body": "Also, if you already have the length, <code>memcpy()</code> is generally faster. Anyway, in production-code I would use <code>strdup()</code> for those three lines, even if I had to define it myself."}], "tags": [], "owner": {"reputation": 751, "user_id": 8060691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lLUSG.png?s=128&g=1", "display_name": "ejohnso49", "link": "https://stackoverflow.com/users/8060691/ejohnso49"}, "is_accepted": false, "score": 2, "last_activity_date": 1534915768, "last_edit_date": 1534915768, "creation_date": 1534897139, "answer_id": 51958324, "question_id": 51957929, "link": "https://stackoverflow.com/questions/51957929/assigning-char-struct-data-element-gives-warning/51958324#51958324", "title": "Assigning char*[] struct data element gives warning", "body": "<p>As @user3386109 said, it's because <code>char *full[MAX_ARGS]</code> cannot be assigned to. There's two paths from here depending on your scenario. If args isn't going to be modified, either by other code or by freeing its string elements, then we can just point the elements of full_command to them like so:</p>\n\n<pre><code>struct background_element bg_elem = {.pid = child, .number = num_background};\nfor (unsigned int i = 0; i &lt; MAX_ARGS; i++) {\n    bg_elem.full_command[i] = args[i];\n}\n</code></pre>\n\n<p>If however you need to copy the strings, then you'll have to use malloc to create space for the strings, and then strcpy to copy the data over:</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; MAX_ARGS; i++) {\n    int str_len = strlen(args[i]);\n    bg_elem.full_command[i] = malloc((str_len + 1) * sizeof(char));\n    strcpy(bg_elem.full_command[i], args[i]);\n}\n</code></pre>\n\n<p>The above for loop first:</p>\n\n<ol>\n<li>Get the length of the ith arg</li>\n<li>Allocate enough memory to the ith pointer of bg_elem.full_command\n\n<ul>\n<li>We need <code>str_len + 1</code> because we need space for the null character</li>\n</ul></li>\n<li>Copy the string from args to bg_elem.full_command</li>\n</ol>\n\n<p>Finally, if you're needing to copy the strings from args don't forget to iterate through and free that memory at the end when you're done.</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; MAX_ARGS; i++) {\n    free(bg_elem.full_command[i]);\n}\n</code></pre>\n\n<p>Note: If you need the memory that you are copying to be zeroed, calloc would be better. However since we're using strcpy, malloc works just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "is_accepted": false, "score": 0, "last_activity_date": 1534905486, "last_edit_date": 1534905486, "creation_date": 1534903099, "answer_id": 51958900, "question_id": 51957929, "link": "https://stackoverflow.com/questions/51957929/assigning-char-struct-data-element-gives-warning/51958900#51958900", "title": "Assigning char*[] struct data element gives warning", "body": "<p>You have a lot of correct answers above.  Simply put: arrays are weird in C.  You can initialize them, but not assign them.  You can't individually initialize them in a struct initializer, but you can assign them as part of a struct assignment.</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n  char *test1 [3] = {\"a\", \"b\", \"c\"}; //initialization, not assignment; allowed\n  char *test2 [3];\n\n  //test2 = test1; //assignment of arrays; not allowed\n\n  memcpy(test2, test1, sizeof(test1)); //the right way to do a shallow array copy\n}\n</code></pre>\n\n<p>But also, confusingly:</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nstruct _array_holder\n{\n  char *array[3];\n};\n\nint main(int argc, char *argv[])\n{\n  struct _array_holder test1 = {{\"a\", \"b\", \"c\"}}; //_struct_ initialization; allowed\n  struct _array_holder test2;\n\n  test2 = test1; //assignment of _structs_; allowed!\n\n  memcpy(&amp;test2, &amp;test1, sizeof(test1)); //also a fine way to copy a struct\n}\n</code></pre>\n\n<p>So, unfortunately, there is no pretty way (i.e., elegant syntax) to do what you want.  Here's at least a reasonably self-contained way to use the fact that array assignments within structs work, to keep you from having to write several lines of initialization each time you want to populate a new struct:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#define MAX_ARGS 5\nstruct background_element\n{\n  pid_t pid;\n  int number;\n  char *full_command[MAX_ARGS];\n};\n\n//something akin to a constructor for the struct\nstruct background_element init_background_element(pid_t pid, int number, char *full_command[])\n{\n  struct background_element ret = {.pid = pid, .number=number};\n  memcpy(ret.full_command, full_command, sizeof(ret.full_command));\n  return ret;\n}\n\nint main(int argc, char *argv[])\n{\n  pid_t child = 1;\n  int num_background = 5;\n  char *args[MAX_ARGS] = {\"a\", \"b\"};\n\n  //use of the constructor-like thing\n  struct background_element bg_elem = init_background_element(child, num_background, args);\n\n  return bg_elem.pid;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1534905683, "post_id": 51959115, "comment_id": 90868657, "body": "OK, if <code>assert.h</code> is included. Didn&#39;t know about that one!"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1534905383, "last_edit_date": 1534905383, "creation_date": 1534904987, "answer_id": 51959115, "question_id": 51957929, "link": "https://stackoverflow.com/questions/51957929/assigning-char-struct-data-element-gives-warning/51959115#51959115", "title": "Assigning char*[] struct data element gives warning", "body": "<p>Array objects in C are limited to only two kinds of initializers:</p>\n\n<ol>\n<li><code>{}</code>-enclosed initializers, i.e a pair of <code>{}</code> with individual initializers for array elements inside</li>\n<li>String literals for <code>char []</code> arrays.</li>\n</ol>\n\n<p>Your initializer does not fall into any of these categories. It is invalid. You cannot initialize one array by another array (aside from case 2 above).</p>\n\n<p>Formally, you can spell it out explicitly</p>\n\n<pre><code>struct background_element bg_elem = \n{ \n  .pid = child, \n  .number = num_background, \n  .full_command = { args[0], args[1], /* ... and so on */ }\n};\n</code></pre>\n\n<p>but this is not really a viable approach. A much better idea would be</p>\n\n<pre><code>struct background_element bg_elem = \n{ \n  .pid = child, \n  .number = num_background\n};\n\nstatic_assert(sizeof bg_elem.full_command == sizeof args, \"\");\nmemcpy(bg_elem.full_command, args, sizeof args);\n</code></pre>\n\n<p>although it might suffer a bit from \"double initialization\" issue.</p>\n\n<p>P.S. What you are trying to do is called <em>initialization</em>, not <em>assignment</em>. Assignment is a very different thing in C.</p>\n"}], "owner": {"reputation": 21, "user_id": 10257091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edb1bf061ac5e362f0df819a96e890a?s=128&d=identicon&r=PG&f=1", "display_name": "cssenior", "link": "https://stackoverflow.com/users/10257091/cssenior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1534915768, "creation_date": 1534893618, "question_id": 51957929, "link": "https://stackoverflow.com/questions/51957929/assigning-char-struct-data-element-gives-warning", "title": "Assigning char*[] struct data element gives warning", "body": "<p>I have a struct that contains a value of type char*[]. It's defined like so:</p>\n\n<pre><code>struct background_element\n{\n    pid_t pid;\n    int number;\n    char *full_command[MAX_ARGS];\n};\n</code></pre>\n\n<p>I also have a global char*[] variable, args.</p>\n\n<pre><code>char *args[MAX_ARGS];\n</code></pre>\n\n<p>I try to create a new variable of type struct background_element and assign the full_command value like so:</p>\n\n<pre><code>struct background_element bg_elem = { .pid = child, .number = num_background, .full_command = args};\n</code></pre>\n\n<p>However, the assignment of args to .full_command seems to throw this warning: \"Warning: initialization from incompatible pointer type.\"</p>\n\n<p>I've tried to use strcpy, but since they're not char[] but char*[], it doesn't seem to work. I'm a bit at a loss of how to assign this. Any help would be appreciated.</p>\n"}, {"tags": ["c", "list"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1534893727, "post_id": 51957901, "comment_id": 90866296, "body": "<code>node = new_node</code> only changes the <i>local</i> variable <code>node</code>, so your function doesn&#39;t modify the value of of the node pointer passed to it."}, {"owner": {"reputation": 3, "user_id": 5197757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d628cec0e009ca04f05c6552bb867cd4?s=128&d=identicon&r=PG&f=1", "display_name": "shirley sven", "link": "https://stackoverflow.com/users/5197757/shirley-sven"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1534894014, "post_id": 51957901, "comment_id": 90866360, "body": "Tried using a pointer-to-pointer now, head node works, but it doesn&#39;t work when adding a second node into the list."}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1534894086, "post_id": 51957901, "comment_id": 90866372, "body": "Show the new code. &quot;It doesn&#39;t work&quot; is not a valid problem description."}, {"owner": {"reputation": 3, "user_id": 5197757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d628cec0e009ca04f05c6552bb867cd4?s=128&d=identicon&r=PG&f=1", "display_name": "shirley sven", "link": "https://stackoverflow.com/users/5197757/shirley-sven"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1534894232, "post_id": 51957901, "comment_id": 90866410, "body": "Edited the question with the new code"}, {"owner": {"reputation": 3, "user_id": 5197757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d628cec0e009ca04f05c6552bb867cd4?s=128&d=identicon&r=PG&f=1", "display_name": "shirley sven", "link": "https://stackoverflow.com/users/5197757/shirley-sven"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1534894506, "post_id": 51957901, "comment_id": 90866465, "body": "I keep getting new_node-&gt;next was 0xCDCDCDCD."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5197757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d628cec0e009ca04f05c6552bb867cd4?s=128&d=identicon&r=PG&f=1", "display_name": "shirley sven", "link": "https://stackoverflow.com/users/5197757/shirley-sven"}, "edited": false, "score": 0, "creation_date": 1534894961, "post_id": 51958084, "comment_id": 90866592, "body": "Oh thank you. It works well and I understand my mistake now. :)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1534900875, "post_id": 51958084, "comment_id": 90867729, "body": "It is good practice for new (and not so new) C programmers to initialize ALL variables when declared to prevent just such surprises <code>:)</code>"}], "tags": [], "owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "is_accepted": true, "score": 1, "last_activity_date": 1534894858, "creation_date": 1534894858, "answer_id": 51958084, "question_id": 51957901, "link": "https://stackoverflow.com/questions/51957901/inserting-a-new-node-into-a-doubly-linked-list-after-a-given-node/51958084#51958084", "title": "Inserting a new node into a doubly linked list after a given node", "body": "<p>When you create a new list, the first node's <code>next</code> pointer is unspecified. This could lead to undefined behaviour when inserting the second node, e.g. the <code>0xcdcdcdcd</code> value you saw. Set it to null before returning:</p>\n\n<pre><code>if ((*node) == NULL) {\n    new_node-&gt;prev = new_node-&gt;next = NULL;\n    (*node) = new_node;\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5197757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d628cec0e009ca04f05c6552bb867cd4?s=128&d=identicon&r=PG&f=1", "display_name": "shirley sven", "link": "https://stackoverflow.com/users/5197757/shirley-sven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 51958084, "answer_count": 1, "score": 0, "last_activity_date": 1534894858, "creation_date": 1534893351, "last_edit_date": 1534894518, "question_id": 51957901, "link": "https://stackoverflow.com/questions/51957901/inserting-a-new-node-into-a-doubly-linked-list-after-a-given-node", "title": "Inserting a new node into a doubly linked list after a given node", "body": "<p>This function inserts a new node after a given node in a doubly linked list.</p>\n\n<p>It works well unless the list is empty or when given node is NULL.</p>\n\n<p>I have tried to solve this problem by inserting the new node as head, but it doesn't add the new node or does problems when adding a second node.</p>\n\n<pre><code>void insert(Polynomial** node, int new_data, int pow) {\nPolynomial* new_node = ( Polynomial*)malloc(sizeof( Polynomial));\nnew_node-&gt;num = new_data;\nnew_node-&gt;pow = pow;\n\nif ((*node) == NULL) {\n    new_node-&gt;prev = NULL;\n    (*node) = new_node;\n    return;\n}\n\nnew_node-&gt;next = (*node)-&gt;next;\n(*node)-&gt;next = new_node;\nnew_node-&gt;prev = (*node);\n\nif (new_node-&gt;next != NULL)\n    new_node-&gt;next-&gt;prev = new_node; \n}\n</code></pre>\n\n<p>Struct:</p>\n\n<pre><code>typedef struct Polynomial {\nint num;\nint pow;\nstruct Polynomial* next;\nstruct Polynomial* prev;\n}Polynomial;\n</code></pre>\n"}, {"tags": ["c++", "c", "command", "at-command"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1534893520, "post_id": 51957796, "comment_id": 90866257, "body": "Which language, C <b>or</b> C++?  They are distinct languages.  For example, C++ has <code>std::string</code> and C doesn&#39;t.  C++ has an associative array or <code>std::map</code>, C doesn&#39;t.  In C++ you can use <i>functors</i> in a <code>std::map</code> to help parse.  Also, C++ has the <code>bool</code> type, so you can return <code>true</code> or <code>false</code> instead of 1 or 0."}, {"owner": {"reputation": 1, "user_id": 9995812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d8a70d24330d2dd7383eb6cbc65d47?s=128&d=identicon&r=PG&f=1", "display_name": "jou", "link": "https://stackoverflow.com/users/9995812/jou"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1534894980, "post_id": 51957796, "comment_id": 90866597, "body": "I prefer to use pure C, My issue is the strcmp is not comparing as fast as I want, and it is being overwritten with new data"}, {"owner": {"reputation": 630, "user_id": 4036474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d14f2e960a6cee6a3831edfa089d34?s=128&d=identicon&r=PG&f=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/4036474/rich"}, "edited": false, "score": 0, "creation_date": 1534911155, "post_id": 51957796, "comment_id": 90869727, "body": "Why do you use &quot;thread&quot; in quotes?  What&#39;s the actual implementation?  Also, you are going to need some form of mutual exclusion to avoid stomping on old data."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1534946303, "post_id": 51957796, "comment_id": 90887378, "body": "You should remove the language tag you are not using.  Mixing C and C++ is an added headache, which I don&#39;t recommend."}], "answers": [{"tags": [], "owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "is_accepted": false, "score": 0, "last_activity_date": 1534893273, "creation_date": 1534893273, "answer_id": 51957889, "question_id": 51957796, "link": "https://stackoverflow.com/questions/51957796/at-command-response-parser/51957889#51957889", "title": "AT command response parser", "body": "<p>This has the scent of an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY Problem</a></p>\n\n<p>If you have seen the buffer contents being over written, you might want to look into a <a href=\"https://stackoverflow.com/questions/15278343/c11-thread-safe-queue\">thread safe queue</a> to deliver messages from the RX thread to the parsing thread.  That way even if a second message arrives while you're processing the first, you won't run into \"buffer overwrite\" problems.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1534913010, "creation_date": 1534913010, "answer_id": 51960009, "question_id": 51957796, "link": "https://stackoverflow.com/questions/51957796/at-command-response-parser/51960009#51960009", "title": "AT command response parser", "body": "<p>Move the data out of the receive buffer and place it in another buffer. Two buffers is rarely enough, so create a pool of buffers. In the past I have used linked lists of pre-allocated buffers to keep fragmentation down, but depending on the memory management and caching smarts in your microcontroller, and the language you elect to use, something along the lines of <code>std::deque</code> may be a better choice.</p>\n\n<p>So</p>\n\n<p>Make a list of free buffers.</p>\n\n<p>When a the UART handling thread loop looks something like, </p>\n\n<ol>\n<li>Get a buffer from the free list  </li>\n<li>Read into the buffer until full or timeout </li>\n<li>Pass buffer to parser. \n\n<ol>\n<li>Parser puts buffer in its own receive list </li>\n<li>Parsing sends a signal to wake up its thread. </li>\n</ol></li>\n</ol>\n\n<p>Repeat until terminated. If the free list is emptied, your program is probably still too slow to keep up. Perhaps adding more buffers will allow the program to get through a busy period, but if the data flow is relatively constant and the free list empties out... Well, you have a problem.</p>\n\n<p>Parser loop also repeats until terminated looks like: </p>\n\n<ol>\n<li>If receive list not empty, \n\n<ol>\n<li>Get buffer from receive list </li>\n<li>Process buffer</li>\n<li>Return buffer to free list</li>\n</ol></li>\n<li>Otherwise\n\n<ol>\n<li>Sleep</li>\n</ol></li>\n</ol>\n\n<p>Remember to protect the lists from concurrent access by the different threads.  C11 and C++11 have a number of useful tools to assist you here.</p>\n"}], "owner": {"reputation": 1, "user_id": 9995812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d8a70d24330d2dd7383eb6cbc65d47?s=128&d=identicon&r=PG&f=1", "display_name": "jou", "link": "https://stackoverflow.com/users/9995812/jou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1063, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1534913010, "creation_date": 1534892425, "question_id": 51957796, "link": "https://stackoverflow.com/questions/51957796/at-command-response-parser", "title": "AT command response parser", "body": "<p>I am working on my own implementation to read AT commands from a Modem using a microcontroller and c/c++</p>\n\n<p>but!! always a BUT!! after I have two \"threads\" on my program, the first one were I am comparing the possible reply from the Moden using <strong>strcmp</strong> which I believe is terrible slow</p>\n\n<p>comparing function</p>\n\n<pre><code>if (strcmp(reply, m_buffer) == 0)\n        {\n            memset(buffer, 0, buffer_size); \n            buffer_size = 0;\n            memset(m_buffer, 0, m_buffer_size); \n            m_buffer_size = 0;  \n            return 0;\n        }\nelse\n       return 1;\n</code></pre>\n\n<p>this one works fine for me with AT commands like AT or AT+CPIN? where the last response from the Modem is \"OK\" and nothing in the middle, but it is not working with commands like AT+CREG?, wheres it responses:  </p>\n\n<pre><code>+REG: n,n \nOK\n</code></pre>\n\n<p>and I am specting for \"+REG: n,n\" but I believe strncpy is very slow and my buffer data is replaced for \"OK\"</p>\n\n<p>2nd \"thread\" where it enables a UART RX interruption and replaces my buffer data every time it receives new data</p>\n\n<p>Interruption handle:</p>\n\n<pre><code>m_buffer_size = buffer_size;\nstrncpy(m_buffer, buffer, buffer_size + m_buffer_size);\n</code></pre>\n\n<p>Do you know any out there faster than strcmp? or something to improve the AT command responses reading?</p>\n"}, {"tags": ["c++", "c", "git", "libgit2"], "comments": [{"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "edited": false, "score": 0, "creation_date": 1534960119, "post_id": 51957383, "comment_id": 90895451, "body": "Just pointing out that you&#39;re doing strange things in your initial example : &quot;anonymous&quot; remotes are in-memory only, they are never created in the repository. So your creation/connect will always fail, because there&#39;s no configured URL. Your <code>git_remote_add_fetch</code> is targeting the existing git remote (it might be creating it in the process), but then you&#39;re loading it again and fetching this one, so your initial anonymous remote is never used (and might actually always fail to perform anything, as it has no URL configured)."}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "reply_to_user": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "edited": false, "score": 0, "creation_date": 1534970550, "post_id": 51957383, "comment_id": 90900109, "body": "@tiennou If I create an anonymous remote repository I can&#39;t connect and fetch data from him? Or I wrong understand you?"}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "edited": false, "score": 0, "creation_date": 1534976813, "post_id": 51957383, "comment_id": 90902366, "body": "Please ignore what I just said ;-). You&#39;re setting the URL when creating the remote, I glossed over that when reading the docs. That only leaves the point that you&#39;re actually stomping over &quot;origin&quot;&#39;s URL and fetching from that instead."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1534927412, "post_id": 51958111, "comment_id": 90876069, "body": "I have updated my topic. Please, look up. Maybe you have some advice."}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535020480, "post_id": 51958111, "comment_id": 90916914, "body": "Your example work is great! Now me interesting how to get from fetch data commit message, ssh, and author? Which function must I use?"}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535020858, "post_id": 51958111, "comment_id": 90917127, "body": "Also, be interesting how to get name remote branches? I tried to use <code>git_branch_remote_name</code>, but I don&#39;t understand what does it mean the third parameter <code>canonical_branch_name</code> in this function."}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "reply_to_user": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535036864, "post_id": 51958111, "comment_id": 90927382, "body": "Now that your fetch is ok, this means the commits from the remote are in your repository, so standard repository functions should be used (eg. git_revwalk will allow you to list commits, which will have the message &amp; author). I do not understand what you&#39;re referring to with &quot;ssh&quot;, as it&#39;s only the underlying transport your remote is/could be using, and doesn&#39;t functionally matter, so look at its URL."}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "reply_to_user": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535037245, "post_id": 51958111, "comment_id": 90927642, "body": "For <code>git_branch_remote_name</code>, it seems the 3rd parameter must be a reference name, and it will return its branch short name. To clarify, <code>&quot;refs&#47;remotes&#47;origin&#47;master&quot;</code> returns <code>&quot;master&quot;</code>, and I&#39;d wager <code>&quot;refs&#47;remotes&#47;origin&#47;fix&#47;404-error&quot;&quot; would return </code>&quot;fix/404-error&quot;`."}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535038676, "post_id": 51958111, "comment_id": 90928576, "body": "How to get the list all remote branch? I didn&#39;t find anything about this in the documentation."}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "reply_to_user": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535050249, "post_id": 51958111, "comment_id": 90934552, "body": "That&#39;s <code>git_branch_iterator_new</code>. To clarify, branches don&#39;t exist (yeah that&#39;s scary \ud83d\ude09), they&#39;re more like a &quot;git porcelain&quot; concept. At a lower-level they&#39;re just a file in some specific folder of <code>.git&#47;refs</code> (like <code>refs&#47;heads&#47;</code> contains local branches, <code>refs&#47;remotes&#47;origin&#47;</code> contains the remote branches of <code>origin</code>, etc.). That&#39;s why sometimes you can end up searching for a <code>git_branch</code> function while there&#39;s actually a generic version around <code>git_reference</code>."}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535116682, "post_id": 51958111, "comment_id": 90960289, "body": "I used <code>git_branch_iterator_new</code> and got the iterator. Next, I used <code>git_branch_next</code> and got git_reference. And finally, I used <code>git_branch_name</code> and got a branch name. But I got the second branch name. What function can I use to get the <code>git_reference</code> from the <code>git_branch_iterator</code>?"}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "reply_to_user": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535130963, "post_id": 51958111, "comment_id": 90968705, "body": "I don&#39;t understand what you&#39;re trying to achieve. You&#39;re getting a <code>git_reference</code> from <code>git_branch_next</code> already (you should be calling it in a loop until it returns <code>GIT_EITEROVER</code> BTW), and <code>git_branch_iterator_new</code> gives you all remote branch available. If you&#39;re trying to filter for a specific remote, you need <code>git_branch_remote_name</code>."}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535138951, "post_id": 51958111, "comment_id": 90972133, "body": "I have two remote branches: master and develop. The <code>git_branch_iterator_new</code> function gives me all remote branches, but not their names. In order to get names these branches, I can use the <code>git_branch_name</code> function. This function has one parameter. The type this parameter is <code>git_reference*</code>. How to get <code>git_reference</code> from <code>git_branch_iterator</code>?"}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535138972, "post_id": 51958111, "comment_id": 90972144, "body": "Now, I use the next steps: <code>git_branch_iterator</code> (I got all branches) -&gt; <code>git_branch_name</code> (I got git_reference, but the current branch is the second branch: develop) -&gt; <code>git_branch_name</code> (I got name the second branch). Which steps must I do in order to get a name the first branch (master)?  P.S. I hope, you will understand me. :)"}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535141407, "post_id": 51958111, "comment_id": 90973135, "body": "The problem with <code>git_branch_iterator</code> is not actual. She was resolved. :)"}, {"owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535143641, "post_id": 51958111, "comment_id": 90974007, "body": "I have a question about <code>git_revwalk</code>. I have got <code>git_revwalk</code> which I have got from <code>git_revwalk_new</code>. How to get commit&#39;s message and commit&#39;s author from <code>git_revwalk</code>?"}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "reply_to_user": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "edited": false, "score": 0, "creation_date": 1535153155, "post_id": 51958111, "comment_id": 90976438, "body": "I&#39;d really like that you&#39;d 1) accept the answer to your original question, on the basis that it resolved your authentication issue 2) give a close look to the existing documentation/headers, because it&#39;s (IMHO) pretty good 3) ask questions as actual questions instead of more comments on an &quot;unrelated&quot; question. Hint: look at the log example : <a href=\"https://libgit2.org/libgit2/ex/HEAD/log.html\" rel=\"nofollow noreferrer\">libgit2.org/libgit2/ex/HEAD/log.html</a>"}, {"owner": {"reputation": 322, "user_id": 3330093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0C2vx.jpg?s=128&g=1", "display_name": "KS7X", "link": "https://stackoverflow.com/users/3330093/ks7x"}, "edited": false, "score": 0, "creation_date": 1552409660, "post_id": 51958111, "comment_id": 96995247, "body": "@tiennou what would be example parameters for my_git_cred_cb? I am confused with this example"}, {"owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "reply_to_user": {"reputation": 322, "user_id": 3330093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0C2vx.jpg?s=128&g=1", "display_name": "KS7X", "link": "https://stackoverflow.com/users/3330093/ks7x"}, "edited": false, "score": 0, "creation_date": 1552906844, "post_id": 51958111, "comment_id": 97174586, "body": "@KS7X <code>my_git_cred_cb</code> is a callback called by the library when a remote requests authentication (ie. password, ssh keypair, etc.). You&#39;re supposed to check <code>allowed_types</code> so that you know which kind of credentials the remote expects (see the <code>git_cred_*_new</code> functions). HTH !"}], "tags": [], "owner": {"reputation": 407, "user_id": 444323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d6086e0608c5bf16fb9cee9eb548ca?s=128&d=identicon&r=PG", "display_name": "tiennou", "link": "https://stackoverflow.com/users/444323/tiennou"}, "is_accepted": true, "score": 2, "last_activity_date": 1534959845, "last_edit_date": 1534959845, "creation_date": 1534895130, "answer_id": 51958111, "question_id": 51957383, "link": "https://stackoverflow.com/questions/51957383/connect-to-remote-repository-and-fetch-data/51958111#51958111", "title": "Connect to remote repository and fetch data", "body": "<p>The remote you're connecting to is asking yourself to authenticate. You need to use the <code>callbacks</code> parameter of <code>git_remote_connect</code> to pass a <code>git_cred_acquire_cb</code> (docs for the <a href=\"https://libgit2.org/libgit2/#HEAD/type/git_remote_callbacks\" rel=\"nofollow noreferrer\">struct</a>, for the <a href=\"https://libgit2.org/libgit2/#HEAD/group/callback/git_cred_acquire_cb\" rel=\"nofollow noreferrer\">callback</a>).</p>\n\n<p>This will get called when authentication is requested, along with the \"type\" of authentication you need to provide. See the <a href=\"https://libgit2.org/libgit2/#HEAD/group/cred\" rel=\"nofollow noreferrer\">cred</a> section of the docs for the details (which supports password or SSH methods), and which are used to build a <code>git_cred</code> object that your callback should return.</p>\n\n<p>Here's a minimal example (compilation errors intended) :</p>\n\n<pre><code>int my_git_cred_cb(git_cred **cred, const char *url, const char *username_from_url, unsigned int allowed_types, void *payload)\n{\n    if ((allowed_type &amp; GIT_CREDTYPE_USERPASS_PLAINTEXT) != 0) {\n        return git_cred_userpass_plaintext_new(&amp;cred, \"user\", \"pass\");\n    } else {\n        /* Some other kind of authentication was requested */\n        return -1;\n    }\n\n    return 1; /* unable to provide authentication data */\n}\n\nvoid perform_fetch(git_remote *remote)\n{\n    git_fetch_options opts = GIT_FETCH_OPTIONS_INIT;\n\n    opts.callbacks.credentials = my_git_cred_cb;\n    opts.callbacks.payload = NULL; /* you'll get that pointer back as the payload parameter */\n\n    return git_remote_fetch(remote, NULL, &amp;opts, NULL);\n}\n</code></pre>\n\n<p>Note that you don't need to go through all the steps (ie, connect, check connection), calling <code>git_remote_fetch</code> will cause the connection to be made and if it succeeded, the fetch will happen.</p>\n"}], "owner": {"reputation": 119, "user_id": 9662389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebf319b146a78022adee421c8e779b7?s=128&d=identicon&r=PG&f=1", "display_name": "igdev", "link": "https://stackoverflow.com/users/9662389/igdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 51958111, "answer_count": 1, "score": 1, "last_activity_date": 1534959845, "creation_date": 1534889418, "last_edit_date": 1534930855, "question_id": 51957383, "link": "https://stackoverflow.com/questions/51957383/connect-to-remote-repository-and-fetch-data", "title": "Connect to remote repository and fetch data", "body": "<p>I want to connect to the remote repository and fetch data from him. I include and use the libgit2 library. This my code:</p>\n\n<pre><code>const char* url = \"http://address.to.repository\";\ngit_libgit2_init();\n\ngit_repository* repo = nullptr;\ngit_remote* newremote = nullptr;\ngit_buf* buf;\ngit_strarray remotes = {0};\n\n\nif (git_repository_init(&amp;repo, \"/tmp/gittest\", false) != 0)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_repository_init, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n\nif (git_remote_create_anonymous(&amp;newremote, repo, url) != 0)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_remote_create_anonymous, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n\n\nif (git_remote_connect(newremote, GIT_DIRECTION_FETCH, nullptr, nullptr, nullptr) != 0)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_remote_connect, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n\nif (git_remote_connected(newremote) != 1)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_remote_connected, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n\ngit_remote_add_fetch(repo, \"origin\", \"refs/heads/master:refs/heads/master\");\n\n\nif (git_remote_lookup(&amp;newremote, repo, \"origin\") != 0)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_remote_lookup, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n\nif (git_remote_fetch(newremote, nullptr, nullptr, nullptr) != 0)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_remote_fetch, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n\ngit_remote_free(newremote);\ngit_repository_free(repo);\ngit_libgit2_shutdown();\n</code></pre>\n\n<p>I'm not sure, that I did all correctly. And now, I have three errors:</p>\n\n<pre><code>problem with git_remote_connect, error message : 'authentication required but no callback set'\nproblem with git_remote_connected, error message : 'authentication required but no callback set'\nproblem with git_remote_lookup, error message : 'remote 'origin' does not exist'\nproblem with git_remote_fetch, error message : 'authentication required but no callback set'\n</code></pre>\n\n<p>I don't understand, how to connect to the remote repository correctly and fix these issues. So, I will be grateful if you give advice or share links on how to fix these issues.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I have read the documentation and looked at the topics, which discuss the different problems with libgit2. I have created a function which can solve my issues (maybe :))  </p>\n\n<pre><code>int cred_acquire_cb(git_cred** out,\n                    const char* url,\n                    const char* username_from_url,\n                    unsigned int allowed_types,\n                    void* payload)\n{\n    return git_cred_userpass_plaintext_new(out, \"user\", \"pass\");\n}\n</code></pre>\n\n<p>In the main code, I write:</p>\n\n<pre><code>git_remote_callbacks callback = GIT_REMOTE_CALLBACKS_INIT;\ncallback.credentials = cred_acquire_cb;\n</code></pre>\n\n<p>On the internet, I found some examples for old library version. And now I can't understand how to use this callback option in <code>git_remote_connect</code> function.  </p>\n\n<p><strong>UPDATE2</strong></p>\n\n<p>I tried to go another way and made this:</p>\n\n<pre><code>git_strarray remotes = {0};\ngit_cred* cred = nullptr;\ngit_proxy_options opt = GIT_PROXY_OPTIONS_INIT;\n\nif (git_cred_userpass_plaintext_new(&amp;cred, \"user\", \"pass\") != 0)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_cred_userpass_plaintext_new, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n\nif (git_remote_connect(newremote, GIT_DIRECTION_FETCH, git_cred_acquire_cb(&amp;cred, url, \"username@bitbucket.org\", 1, nullptr), opt, remotes) != 0)\n{\n    const git_error *lastError = giterr_last();\n    std::cerr &lt;&lt; \"problem with git_remote_connect, error message : '\" &lt;&lt; lastError-&gt;message &lt;&lt;\"'\"&lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>But compiler tells me the next errors:</p>\n\n<pre><code>error: expression list treated as compound expression in functional cast [-fpermissive]\n     if (git_remote_connect(newremote, GIT_DIRECTION_FETCH, git_cred_acquire_cb(&amp;cred, url, \"ableigdev@bitbucket.org\", 1, nullptr), opt, remotes) != 0)\n\nerror: cannot convert \u2018git_cred_acquire_cb {aka int (*)(git_cred**, const char*, const char*, unsigned int, void*)}\u2019 to \u2018const git_remote_callbacks*\u2019 for argument \u20183\u2019 to \u2018int git_remote_connect(git_remote*, git_direction, const git_remote_callbacks*, const git_proxy_options*, const git_strarray*)\u2019\n     if (git_remote_connect(newremote, GIT_DIRECTION_FETCH, git_cred_acquire_cb(&amp;cred, url, \"ableigdev@bitbucket.org\", 1, nullptr), opt, remotes) != 0)\n</code></pre>\n\n<p>How to fix it? And which one of two way more correct?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 1, "creation_date": 1534889264, "post_id": 51957319, "comment_id": 90865197, "body": "my 2 cents is  that process or thread is needed for this task"}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1534889274, "post_id": 51957319, "comment_id": 90865201, "body": "Dont use <code>break</code> use <code>return 0</code> for starters, <code>scanf</code> is also a blocking call, you will need to use <code>fork</code> or something similar to accomplish what you want"}, {"owner": {"reputation": 934, "user_id": 5245070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JfrKO.jpg?s=128&g=1", "display_name": "Devmix", "link": "https://stackoverflow.com/users/5245070/devmix"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1534889307, "post_id": 51957319, "comment_id": 90865217, "body": "@snr how to implement the thread?"}, {"owner": {"reputation": 934, "user_id": 5245070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JfrKO.jpg?s=128&g=1", "display_name": "Devmix", "link": "https://stackoverflow.com/users/5245070/devmix"}, "reply_to_user": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1534889346, "post_id": 51957319, "comment_id": 90865226, "body": "@Mitchel0022 after using return 0 how to get it to work and exit program after 5 seconds if user doesnt enter anything?"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1534889417, "post_id": 51957319, "comment_id": 90865246, "body": "@progx create a thread counting behind the curtain the seconds while the user is entering password, just google it"}, {"owner": {"reputation": 11660, "user_id": 2055998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/2Vx3A.jpg?s=128&g=1", "display_name": "PM 77-1", "link": "https://stackoverflow.com/users/2055998/pm-77-1"}, "edited": false, "score": 0, "creation_date": 1534889479, "post_id": 51957319, "comment_id": 90865266, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19185958/wait-only-5-second-for-user-input\">Wait only 5 second for user input</a>"}, {"owner": {"reputation": 934, "user_id": 5245070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JfrKO.jpg?s=128&g=1", "display_name": "Devmix", "link": "https://stackoverflow.com/users/5245070/devmix"}, "reply_to_user": {"reputation": 11660, "user_id": 2055998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/2Vx3A.jpg?s=128&g=1", "display_name": "PM 77-1", "link": "https://stackoverflow.com/users/2055998/pm-77-1"}, "edited": false, "score": 0, "creation_date": 1534889617, "post_id": 51957319, "comment_id": 90865314, "body": "@PM77-1 yes I came across the answer but then I started having issue by not being able to use &lt;unistd.h&gt; on visual studio and other things. Do you have another way of accomplishing this?"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1534889654, "post_id": 51957319, "comment_id": 90865326, "body": "@progx yes, of course, <a href=\"https://stackoverflow.com/questions/1981459/using-threads-in-c-on-windows-simple-example\" title=\"using threads in c on windows simple example\">stackoverflow.com/questions/1981459/&hellip;</a>"}, {"owner": {"reputation": 11660, "user_id": 2055998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/2Vx3A.jpg?s=128&g=1", "display_name": "PM 77-1", "link": "https://stackoverflow.com/users/2055998/pm-77-1"}, "edited": false, "score": 0, "creation_date": 1534889786, "post_id": 51957319, "comment_id": 90865367, "body": "<a href=\"https://stackoverflow.com/questions/21197977/how-can-i-prevent-scanf-to-wait-forever-for-an-input-character\" title=\"how can i prevent scanf to wait forever for an input character\">stackoverflow.com/questions/21197977/&hellip;</a>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1534892644, "post_id": 51957319, "comment_id": 90866053, "body": "It&#39;s fairly trivial to start a pthread that sleeps for 5 sec and then checks an atomic &#39;user entered something&#39; flag and terminates the process if not set. It&#39;s easier to do that than mess around with select()."}], "answers": [{"tags": [], "owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "is_accepted": true, "score": 3, "last_activity_date": 1534891701, "last_edit_date": 1534891701, "creation_date": 1534890825, "answer_id": 51957583, "question_id": 51957319, "link": "https://stackoverflow.com/questions/51957319/how-to-start-counting-5-seconds-before-exiting-from-program/51957583#51957583", "title": "How to start counting 5 seconds before exiting from program?", "body": "<p>Your main challenge is that <code>scanf()</code> - as well as <code>getchar()</code> and similar commands - are <em>blocking</em>. An unknown interval of time could elapse before the user actually enters any input - and your five seconds might already be up at that stage.</p>\n\n<h3><code>select()</code> - monitor file descriptors with timeout</h3>\n\n<p>I think one of the most feasible options is to use <code>select()</code> - which monitors for activity on certain sets of file descriptors. Specifically, you want to monitor for activity on the <code>stdin</code> file descriptor.</p>\n\n<p>The following accomplishes something close to what you need I believe.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void) {\n    char buf[16] = {'\\0'};\n    char *pass = buf;\n    time_t time_update = 0, time_now = 0;\n    struct timeval tm;\n    int res = 0;\n    struct termios term_attr, new_attr;\n    fd_set rset;\n\n    // Change terminal attributes (We don't want line-buffered mode.)\n    tcgetattr(fileno(stdin), &amp;term_attr);\n    tcgetattr(fileno(stdin), &amp;new_attr);\n    new_attr.c_lflag &amp;= ~(ICANON | ECHO);\n\n    tcsetattr(fileno(stdin), TCSANOW, &amp;new_attr);\n\n    printf(\"Enter password: \");\n\n    time_update = time(NULL);\n    while (1) {\n        tm.tv_sec = 0;\n        tm.tv_usec = 50000;\n        FD_ZERO(&amp;rset);\n        FD_SET(STDIN_FILENO, &amp;rset);\n\n        res = select(fileno(stdin) + 1, &amp;rset, NULL, NULL, &amp;tm);\n        if (FD_ISSET(STDIN_FILENO, &amp;rset)) {\n            time_update = time(NULL);\n            int c = getchar();\n            if (c == '\\n') {\n                break;\n            }\n            *pass = c;\n            pass++;\n        }\n        time_now = time(NULL);\n        if (time_now - time_update &gt;= 5) {\n            puts(\"Timed out ...\");\n            break;\n        }\n    }\n\n    pass = buf;\n\n    printf(\"You entered: %s \\n\", pass);\n\n    // Restore original terminal attributes\n    tcsetattr(fileno(stdin), TCSANOW, &amp;term_attr);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Notes</strong>:</p>\n\n<ul>\n<li>The last argument to <code>select()</code> is a <code>struct timeval</code> which specifies how long to wait for activity on the specified file descriptors. In this case I have specified a timeout of 50 milliseconds.</li>\n<li>The terminal needs to be placed in <em>character buffer</em> mode rather than line-buffered mode. (Otherwise you will need to press enter every time there is a new character.)</li>\n</ul>\n\n<h3>Operating system support</h3>\n\n<p><code>select()</code> is part of the POSIX specification, but I do not know if it is implemented on Windows. Maybe someone can clarify?</p>\n\n<p>Also ... I do not know if setting the terminal attributes will work as expected on Windows either. (I have only tested on Linux.)</p>\n\n<p>I realize this solution might be a little longer / more complex than you hoped - but I am not aware of an easier way.</p>\n"}], "owner": {"reputation": 934, "user_id": 5245070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JfrKO.jpg?s=128&g=1", "display_name": "Devmix", "link": "https://stackoverflow.com/users/5245070/devmix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 51957583, "answer_count": 1, "score": 1, "last_activity_date": 1534891701, "creation_date": 1534889019, "question_id": 51957319, "link": "https://stackoverflow.com/questions/51957319/how-to-start-counting-5-seconds-before-exiting-from-program", "title": "How to start counting 5 seconds before exiting from program?", "body": "<p>I've been pulling my hair out on this for many hours now. Basically, I have a program that asks the user to enter his password (123), and if the user doesn't enter anything for <strong>5 seconds</strong> then the program will exit (game over). I've been trying to use time(NULL) and clock() but still no luck. Can anyone point me in the right direction, please? Thanks a lot in advance!</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\n int main(){\n   int password = 0;\n   int num = 0;\n   printf(\"%s\\n\", \"Please enter your password\");\n   scanf(\"%d\", &amp;password);\n   // Here I need to check if user didnt enter anything for 5 seconds,\n   // and if he didnt enter anything then exit out of the program\n   // I tried using time\n   // time_t start = time(NULL);\n   // time_t stop = time(NULL);\n   //   if(((stop - start) * 1000) &gt; 5000){\n   //  printf(\"%s\\n\", \"Game Over\");\n   //  break;          \n  //  }\n\n   printf(\"%s\\n\", \"Thank you for entering your password, now enter any number\");\n   scanf(\"%d\", &amp;num);\n   return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 94277, "user_id": 282848, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ced1d4c4fa1cd38d87553bf0e4836120?s=128&d=identicon&r=PG", "display_name": "Andreas Rejbrand", "link": "https://stackoverflow.com/users/282848/andreas-rejbrand"}, "edited": false, "score": 0, "creation_date": 1534886707, "post_id": 51956859, "comment_id": 90864388, "body": "Are you looking for a C standard library function or a function in the Windows API?"}, {"owner": {"reputation": 21, "user_id": 7692569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00c24184f792b9ef954b9df9a4c25cb?s=128&d=identicon&r=PG&f=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/7692569/deep"}, "reply_to_user": {"reputation": 94277, "user_id": 282848, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ced1d4c4fa1cd38d87553bf0e4836120?s=128&d=identicon&r=PG", "display_name": "Andreas Rejbrand", "link": "https://stackoverflow.com/users/282848/andreas-rejbrand"}, "edited": false, "score": 0, "creation_date": 1534886970, "post_id": 51956859, "comment_id": 90864480, "body": "Any of them should work for me. I am working on a C application which is on Windows platform."}, {"owner": {"reputation": 94277, "user_id": 282848, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ced1d4c4fa1cd38d87553bf0e4836120?s=128&d=identicon&r=PG", "display_name": "Andreas Rejbrand", "link": "https://stackoverflow.com/users/282848/andreas-rejbrand"}, "edited": false, "score": 0, "creation_date": 1534887138, "post_id": 51956859, "comment_id": 90864541, "body": "I tried Google and found this almost at the top: <a href=\"https://stackoverflow.com/questions/5392735/parent-directory-of-a-file?rq=1\" title=\"parent directory of a file\">stackoverflow.com/questions/5392735/&hellip;</a> Does that answer help?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1534887139, "post_id": 51956859, "comment_id": 90864542, "body": "Since you&#39;ve tagged <code>winapi</code> you can use <code>PathRemoveFileSpec</code> from <code>shlwapi.dll</code>."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1534889073, "post_id": 51956859, "comment_id": 90865139, "body": "the standard APIs are <code>dirname</code> and <code>pathname</code>.  Have you tried them on Windows?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1534891299, "post_id": 51956859, "comment_id": 90865710, "body": "@JonathanPotter Unfortunately, <code>PathRemoveFileSpec</code> doesn&#39;t handle foreslashes. <code>&quot;C:\\\\abc&#47;def&#47;ghi&quot;</code> becomes <code>&quot;C:\\\\abc&quot;</code>"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 1, "creation_date": 1534905091, "post_id": 51956859, "comment_id": 90868532, "body": "what is wrong with a simple search for the last <code>&#47;</code> or ` \\ ` ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1534929056, "post_id": 51956859, "comment_id": 90876960, "body": "also win32 name can containing <code>&#47;..&#47;</code> for example - need first normalize name by <code>GetFullPathName</code> and than call <code>PathRemoveFileSpec</code> or yourself remove last \\ which is aloso simply"}, {"owner": {"reputation": 21, "user_id": 7692569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00c24184f792b9ef954b9df9a4c25cb?s=128&d=identicon&r=PG&f=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/7692569/deep"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1534968150, "post_id": 51956859, "comment_id": 90899020, "body": "@RbMm Thank you for your help. I tried below code   <code>char SearchFolder[MAX_PATH_LENGTH]; GetFullPathNameA(path, dwDataSize, SearchFolder, &amp;string); PathRemoveFileSpecA(SearchFolder);</code> Output of GetFullPathNameA statement is <code>D:\\Builds\\OSApp\\x64\\Debug\\&quot;C:\\Program Files\\PTC\\Creo 4.0\\M040\\Parametric\\bin\\parametric.exe&quot;</code> Output of PathRemoveFileSpecA is <code>D:\\Builds\\OSApp\\x64\\Debug\\&quot;C:\\Program Files\\PTC\\Creo 4.0\\M040\\Parametric\\bin</code> What I want is  <code>C:\\Program Files\\PTC\\Creo 4.0\\M040\\Parametric\\bin</code> How do I strip the initial path of the calling application?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1534970083, "post_id": 51956859, "comment_id": 90899889, "body": "you pass wrong file path to <code>GetFullPathName</code> - it must not containing &quot;. use for example <code>GetModuleFileNameW</code>. and stop use A api. use only W"}], "owner": {"reputation": 21, "user_id": 7692569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00c24184f792b9ef954b9df9a4c25cb?s=128&d=identicon&r=PG&f=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/7692569/deep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "closed_date": 1534926441, "answer_count": 0, "score": 1, "last_activity_date": 1534892213, "creation_date": 1534886428, "last_edit_date": 1534887194, "question_id": 51956859, "link": "https://stackoverflow.com/questions/51956859/how-to-get-parent-directory-in-c-programming", "closed_reason": "Duplicate", "title": "How to get parent Directory in C programming?", "body": "<p>I would like to do this in C programming without using string manipulation especially since the path contains a mix of forward and backward slashes.</p>\n\n<pre><code>path = \"C:\\Program Files\\PTC/Creo 4.0/M040/Parametric/bin/parametric.exe\";\nvar searchDir = Path.GetDirectoryName(Path.GetDirectoryName(Path.GetDirectoryName(path)));\n</code></pre>\n\n<p>The path is char array.  </p>\n\n<pre><code>char InstallExe[MAX_PATH_LENGTH].\n</code></pre>\n\n<p>The output I am expecting is </p>\n\n<pre><code>searchDir = \"C:\\Program Files\\PTC/Creo 4.0/M040\"\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534886513, "post_id": 51956857, "comment_id": 90864329, "body": "Your <code>executor</code> needs to take some extra argument(s) which will get passed to <code>func</code> and let the caller worry about the allocation.. Or use some global/static/dynamically allocated buffers. Which I would not recommend..."}], "answers": [{"comments": [{"owner": {"reputation": 1461, "user_id": 5641188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bab5cda330ff2a8e1f909f3c2ac7700?s=128&d=identicon&r=PG&f=1", "display_name": "pavikirthi", "link": "https://stackoverflow.com/users/5641188/pavikirthi"}, "edited": false, "score": 0, "creation_date": 1534888402, "post_id": 51956905, "comment_id": 90864945, "body": "Also, is there any way to just not pass any function, for example executor(void) something like that?"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 1461, "user_id": 5641188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bab5cda330ff2a8e1f909f3c2ac7700?s=128&d=identicon&r=PG&f=1", "display_name": "pavikirthi", "link": "https://stackoverflow.com/users/5641188/pavikirthi"}, "edited": false, "score": 0, "creation_date": 1534889067, "post_id": 51956905, "comment_id": 90865138, "body": "@pavikirthi, I&#39;m not sure I understand that question; I&#39;d suggest asking a new question that specifies exactly what behavior you&#39;d want if you passed in no arguments."}, {"owner": {"reputation": 1461, "user_id": 5641188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bab5cda330ff2a8e1f909f3c2ac7700?s=128&d=identicon&r=PG&f=1", "display_name": "pavikirthi", "link": "https://stackoverflow.com/users/5641188/pavikirthi"}, "edited": false, "score": 0, "creation_date": 1534897450, "post_id": 51956905, "comment_id": 90867075, "body": "Sure! Thank you"}], "tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": true, "score": 1, "last_activity_date": 1534886678, "creation_date": 1534886678, "answer_id": 51956905, "question_id": 51956857, "link": "https://stackoverflow.com/questions/51956857/passing-function-pointer-in-c-with-a-pointer-argument/51956905#51956905", "title": "passing function pointer in c with a pointer argument", "body": "<p>Just add it to the argument list of <code>executor</code>.</p>\n\n<pre><code>void executor(FUNC_PTR func, uint8_t* b)\n{ \n   uint64_t opts = 0x0000010;\n   res = func(opts, b);\n}\n</code></pre>\n\n<p>You can allocate the memory on the stack or heap in main.</p>\n\n<pre><code>void main()\n{\n   uint8_t mem1, mem2;\n   executor(func1, &amp;mem1);\n   executor(func2, &amp;mem2);\n}\n</code></pre>\n"}], "owner": {"reputation": 1461, "user_id": 5641188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bab5cda330ff2a8e1f909f3c2ac7700?s=128&d=identicon&r=PG&f=1", "display_name": "pavikirthi", "link": "https://stackoverflow.com/users/5641188/pavikirthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 51956905, "answer_count": 1, "score": 0, "last_activity_date": 1534886678, "creation_date": 1534886405, "question_id": 51956857, "link": "https://stackoverflow.com/questions/51956857/passing-function-pointer-in-c-with-a-pointer-argument", "title": "passing function pointer in c with a pointer argument", "body": "<p>Here, I have defined two function pointers <code>func1</code> and <code>func2</code>, and I guess this a way to use function pointers in c.But my question is when I call </p>\n\n<pre><code>executor(func1);\nexecutor(func2);\n</code></pre>\n\n<p>How can I allocate memory for <code>uint8_t *</code> and pass it as an argument for either <code>func1</code> and <code>func2</code>, so that I can use it back in main()</p>\n\n<pre><code>typedef int (*FUNC_PTR)(uint64_t, uint8_t*);\n\nvoid executor(FUNC_PTR func)\n{ \n   uint64_t opts = 0x0000010;\n   uint8_t val = 0;\n   res = func(opts, &amp;val);\n}\n\nint func1(uint64_t a, uint8_t* b)\n{ \n   //do some stuff\n\n}\n\nint func2(uint64_t a, uint8_t* b)\n{ \n//do some stuff\n}\n\nvoid main()\n{\n   executor(func1);\n   executor(func2);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pthreads", "posix"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1534885944, "post_id": 51956715, "comment_id": 90864157, "body": "You can roll your own RW locks using <code>sys v</code> semaphores.  Use the UNDO flag with the semaphores to recover from crashed process (it allows the system to &quot;undo&quot; the semaphore operations the process had performed)"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 2, "creation_date": 1534889712, "post_id": 51956715, "comment_id": 90865346, "body": "It should also be possible to roll your own rwlocks with a robust mutex and condvar or POSIX semaphore. Using sysv semaphores is going to be 1000x slower just because every operation is a syscall."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1534890115, "post_id": 51956715, "comment_id": 90865433, "body": "@R.. do you have citation for the speed difference?  I&#39;ve seen some charts showing the difference in speed between POSIX semaphores and SYS V in the past (though it was in a book that&#39;s almost 20 years old), but I don&#39;t recall anything about the POSIX robust mutex (I didn&#39;t even know that existed)."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1534890962, "post_id": 51956715, "comment_id": 90865625, "body": "Any reasonable implementation of the POSIX primitives is entirely userspace except in the contended case, and thus just takes roughly the number of cycles imposed by atomics and memory barriers. The sysv ipc objects, on the other hand, have permission, handle, and lifetime properties that make it necessary for the kernel to mediate any action on them. Even on the fastest machines the most trivial syscalls like <code>getpid</code> (the actual syscall, not the glibc cached result) take nearly 1000 cycles, and ones that do actual work take considerably more."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1534891048, "post_id": 51956715, "comment_id": 90865635, "body": "However I think you&#39;re right that sysv semaphores can be used to implement robust rwlocks, where a write lock is just decrementing the semaphore by the max allowed value which ensures there can be no readers, and with the kernel backout-on-process-death feature. I don&#39;t see any way to do this with the POSIX threads/semaphore primitives."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1534890699, "creation_date": 1534890699, "answer_id": 51957570, "question_id": 51956715, "link": "https://stackoverflow.com/questions/51956715/robust-rwlock-in-posix/51957570#51957570", "title": "Robust rwlock in posix", "body": "<blockquote>\n  <p>How can a process gracefully recover from a process crashing while holding a <code>rwlock</code>?</p>\n</blockquote>\n\n<p>POSIX does not define a robustness option for its rwlocks.  If a process dies while holding one locked, the lock is not recoverable -- you cannot even <code>pthread_rwlock_destroy</code> it.  You also cannot expect any processes blocked trying to acquire the lock to unblock until their timeout, if any, expires.  Threads blocked trying unconditionally and without a timeout to acquire the lock cannot be unblocked even by delivering a signal, because POSIX specifies that if their wait is interrupted by a signal, they will resume blocking after the signal handler finishes.</p>\n\n<p>Therefore, in the case that one of several cooperating processes dies while holding a shared rwlock locked, whether for reading or writing, the best possible result is probably to arrange for the other cooperating processes to shut down as cleanly as possible.  You shhould be able to arrange for something like that via a separate monitoring process that sends <code>SIGTERM</code>s to the others when a locking failure occurs.  There would need to be much more to it than that, though, probably including some kind of extra discipline or wrapping around acquiring the rwlock.</p>\n\n<p>Honestly, if you want robustness then you're probably better off rolling your own read/write lock using, for example, POSIX robust mutexes and POSIX condition variables, as @R.. described in comments.</p>\n\n<p>Consider also that robustness of the lock itself is only half the picture.  If a thread dies while holding the write lock, then you have the additional issue of ensuring the integrity of the data protected by the lock before continuing.</p>\n"}, {"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1534890748, "creation_date": 1534890748, "answer_id": 51957572, "question_id": 51956715, "link": "https://stackoverflow.com/questions/51956715/robust-rwlock-in-posix/51957572#51957572", "title": "Robust rwlock in posix", "body": "<p>Implementing a robust rwlock is actually quite difficult due to the \"concurrent readers\" property - a rwlock with bounded storage but an unbounded number of concurrent readers fundamentally cannot track who its readers are, so if knowledge of who the current readers are is to be kept (in order to decrement the current read lock count when a reader dies), it must be the reader tasks themselves, not the rwlock, which are aware of their ownership of it. I don't see any obvious way it can be built on top of robust mutexes, or on top of the underlying mechanisms (like <code>robust_list</code> on Linux) typically used to implement robust mutexes.</p>\n\n<p>If you really need robust rwlock semantics, you're probably better off having some sort of protocol with a dedicated coordinator process that's assumed not to die, that tracks death of clients via closure of a pipe/socket to them and is able to tell via shared memory contents whether the process that died held a read lock. Note that this still involves implementing your own sort of rwlock.</p>\n"}], "owner": {"reputation": 412, "user_id": 100046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aae2e22ec5f482f3ce144ac827a2dd7?s=128&d=identicon&r=PG", "display_name": "user100046", "link": "https://stackoverflow.com/users/100046/user100046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 4, "answer_count": 2, "score": 4, "last_activity_date": 1534890748, "creation_date": 1534885625, "question_id": 51956715, "link": "https://stackoverflow.com/questions/51956715/robust-rwlock-in-posix", "title": "Robust rwlock in posix", "body": "<p>Posix provides a mechanism for a mutex to be marked as \"robust\", allowing multi-processes systems to recover gracefully from the crash of a process holding a mutex.</p>\n\n<pre><code>pthread_mutexattr_setrobust(&amp;mutexattr, PTHREAD_MUTEX_ROBUST);\n</code></pre>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/pthread_mutexattr_setrobust.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/pthread_mutexattr_setrobust.3.html</a></p>\n\n<p>However, there doesn't seem to be an equivalent for rwlock (reader-writer locks).</p>\n\n<p>How can a process gracefully recover from a process crashing while holding a <code>rwlock</code>?</p>\n"}, {"tags": ["c", "function", "recursion"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1534883880, "post_id": 51956330, "comment_id": 90863314, "body": "Your title says <code>c++</code> but the question is tagged <code>c</code>. They are different languages; please choose one."}, {"owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1534884132, "post_id": 51956330, "comment_id": 90863415, "body": "@JonathonReinhart thanks, corrected it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1534884142, "post_id": 51956330, "comment_id": 90863422, "body": "Don&#39;t use <code>static</code>s in recursive function. It is defeating its purity."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534884222, "post_id": 51956330, "comment_id": 90863457, "body": "When a function executes a <code>return</code> statement, control exits the function body.  This can get a bit confusing for recursive functions, but no, if the <code>return fun(n-2) + 3;</code> statement is reached then <i>that call</i> does not execute the <code>return fun(n-1) + x;</code>."}, {"owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534884399, "post_id": 51956330, "comment_id": 90863527, "body": "@JohnBollinger that way answer comes out to be 4 but when i compile the code, the output is 19."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534884794, "post_id": 51956330, "comment_id": 90863700, "body": "No, @MasterKas, that way the answer comes out to 19.  You are perhaps not appreciating the significance of &quot;that call&quot;, or the order of events.  In order to execute the <code>return fun(n-2) + 3;</code>, the value of <code>fun(n-2)</code> must first be evaluated.  The <code>return fun(n-1) + x;</code> will be executed in that function call and two other more deeply recursing ones, but it is not executed after the <code>return</code> in the topmost call of the recursion."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "edited": false, "score": 0, "creation_date": 1534884777, "post_id": 51956517, "comment_id": 90863687, "body": "But x is assigned value 0 at the beginning and being static how could we assign it value 5?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "edited": false, "score": 0, "creation_date": 1534884838, "post_id": 51956517, "comment_id": 90863714, "body": "Exactly as in the code: <code>x = n;</code>. What problem do you see?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "edited": false, "score": 0, "creation_date": 1534884931, "post_id": 51956517, "comment_id": 90863751, "body": "Why would that be a problem, @MasterKas?  Are you confusing <code>static</code> with <code>const</code>?  Or are you perhaps not appreciating that static initialization is a one-time event, logically occurring at the beginning of the whole program&#39;s execution?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1534885027, "post_id": 51956517, "comment_id": 90863794, "body": "That&#39;s why I commented above <i>not</i> to use <code>static</code> with recursions"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534885061, "post_id": 51956517, "comment_id": 90863815, "body": "@Yunnosch, it is inaccurate and potentially confusing to assert that the static initialization happens during the first function call.  As far as the language is concerned, it happens <i>before</i> the first call, at the very beginning of the program."}, {"owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "edited": false, "score": 0, "creation_date": 1534885101, "post_id": 51956517, "comment_id": 90863831, "body": "But x = 0 and being static, why does it get reassigned to 5? Doesn&#39;t it get fixed to 0 in the beginning itself."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534885150, "post_id": 51956517, "comment_id": 90863844, "body": "<code>static</code> is initialized only once, on the program startup. Then it can be assigned anything."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534885157, "post_id": 51956517, "comment_id": 90863848, "body": "@John  True, I did improve that."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "edited": false, "score": 0, "creation_date": 1534885244, "post_id": 51956517, "comment_id": 90863881, "body": "@MasterKas As others have hinted, are you aware of the difference of <code>static</code> and <code>const</code> ?"}, {"owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "edited": false, "score": 0, "creation_date": 1534885574, "post_id": 51956517, "comment_id": 90863995, "body": "according to my understanding  that&#39;s fine., but static value should not change if the global values are initialized"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534885601, "post_id": 51956517, "comment_id": 90864007, "body": "Which global values do you mean?"}, {"owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "edited": false, "score": 0, "creation_date": 1534885811, "post_id": 51956517, "comment_id": 90864098, "body": "@Yunnosch static int x = 0;"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534885813, "post_id": 51956517, "comment_id": 90864101, "body": "A <code>static</code> local variable, if a new value is written (e.g. 5), should change. An attempt to write to a <code>const</code> variable should result in a compiler error."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534885862, "post_id": 51956517, "comment_id": 90864130, "body": "What you quote I would not describe as &quot;initialising a global value/variable&quot;. It is initialising a local though static variable, which afterwards can be changed by the function body."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 3, "last_activity_date": 1534886740, "last_edit_date": 1534886740, "creation_date": 1534884599, "answer_id": 51956517, "question_id": 51956330, "link": "https://stackoverflow.com/questions/51956330/unexpected-output-in-recursive-function-involving-static-local-variable/51956517#51956517", "title": "unexpected output in recursive function involving static local variable", "body": "<p>This is the sequence of what happens:</p>\n\n<pre><code>call fun(5)\n  x=0; which, being the initialisation of a static local variable, \n       only happens before the very first call to fun()\n  5&gt;3: x=5 (not a problem, static vars can be changed and keep the value)\n  return fun(3)+3\n    return fun(2) + 5\n      return fun(1) + 5\n        return fun(0) + 5\n          return 1\n        return 1 + 5\n      return 6 + 5\n    return 11 + 5\n  return 16 + 3\n</code></pre>\n\n<p>The exact meaning an relation of the following lines seem to be of interest to you.</p>\n\n<pre><code>static int x = 0;\n/* Defines a local but static variable, initialised to 0;\n   the initialisation happens before the first execution of the function,\n   conceptually at the beginning of the whole program (credits John Bollinger).\n   This does NOT cause an assignment to 0 during each execution of the function.\n   The static attribute also means that the value at the end of one\n   execution will still be found in the variable at the start of the next\n   execution, even and especially if that start is before the end of the current execution,\n   which is typical for recursive functions.\n */\n\n/* ... */\n\nx = n;\n/* This conditional (inside an if) assignment in the middle of the \n   recursive function changes the value of the static variable away from\n   the initialisation value, to e.g. 5.\n   If/because no other assignment occurs, the value will stay in the\n   for the rest of the program.\n */\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 51956517, "answer_count": 1, "score": -4, "last_activity_date": 1534886740, "creation_date": 1534883650, "last_edit_date": 1534885457, "question_id": 51956330, "link": "https://stackoverflow.com/questions/51956330/unexpected-output-in-recursive-function-involving-static-local-variable", "title": "unexpected output in recursive function involving static local variable", "body": "<p>I am trying to find the output for fun(5). But I am getting an unexpected result (19) and don't know why.<br>\nMy doubt is for n =5 for instance, it would return fun(3) + 3. After that would the return fun(4) + x work or the function fun will be called again?</p>\n\n<pre><code>int fun(int n)\n{\n   static int x = 0;\n   if (n&lt;=0) return 1;\n   if (n&gt;3)\n   {\n     x = n;\n     return fun(n-2) + 3;\n   }\n   return fun(n-1) + x;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534884386, "post_id": 51956322, "comment_id": 90863519, "body": "my 2 cents... you don&#39;t know what you don&#39;t know. I don&#39;t know how Minecraft works, but it isn&#39;t magic. It&#39;s probably using some discovery protocol where it&#39;s sending out beacons that the clients are listening for. You can do some googling or network sniffing to figure it out. I&#39;m sure there are several protocols like this that already exist, and I wouldn&#39;t recommend trying to spin your own unless it&#39;s for your own enlightenment. The most straightforward way to discover open ports is to port scan... unless you&#39;re talking UDP ports in which case port scanning isn&#39;t reliable."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1534886820, "post_id": 51956322, "comment_id": 90864431, "body": "Apple call one protocol that provides discovery \u201cBonjour\u201d - not tied to Apple, you will find information by goggling."}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1534889018, "post_id": 51956322, "comment_id": 90865122, "body": "On a LAN, the classic technique is to use a UDP broadcast to advertise an available service."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534889186, "post_id": 51956322, "comment_id": 90865177, "body": "Yes but no point reinventing the wheel, as @yano also points out, and who knows what other discovery services a homegrown hackaprotocol might conflict with/break, is there?"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 2, "creation_date": 1534889458, "post_id": 51956322, "comment_id": 90865263, "body": "It&#39;s not like UDP broadcasts are particularly complex, especially if you&#39;re already writing a TCP server in C. Here&#39;s a simple example that looks a lot like what the OP is trying to do: <a href=\"https://stackoverflow.com/questions/24071415/sending-broadcast-server-client-and-sending-back-client-server-udp-c-socke\" title=\"sending broadcast server client and sending back client server udp c socke\">stackoverflow.com/questions/24071415/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4946, "user_id": 2656614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/rJz0Z.png?s=128&g=1", "display_name": "Addison", "link": "https://stackoverflow.com/users/2656614/addison"}, "is_accepted": false, "score": 1, "last_activity_date": 1535081713, "creation_date": 1535081713, "answer_id": 51997090, "question_id": 51956322, "link": "https://stackoverflow.com/questions/51956322/c-find-computer-on-lan-with-open-server/51997090#51997090", "title": "C Find Computer on LAN With Open Server", "body": "<p>There's plenty of articles out there on how to use Unix built-in's to scan your Local Area Network for other hosts.</p>\n\n<p>You can find your own IP address and Network using ifconfig, like in <a href=\"https://itsfoss.com/how-to-find-what-devices-are-connected-to-network-in-ubuntu/\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<p>It's then a simple task to get a list of IP's/hostnames on your LAN using a command like <a href=\"http://man7.org/linux/man-pages/man1/nmap.1.html\" rel=\"nofollow noreferrer\"><code>nmap</code></a>, and then sort through the output.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>sudo nmap -sn 10.84.32.54/24 | grep -Po \"(\\d{1,3}\\.){3}\\d{1,3}\"\n</code></pre>\n\n<p>Which will return you a list of ip-addresses on your network like:</p>\n\n<pre><code>10.84.32.1\n10.84.32.11\n10.84.32.12\n10.84.32.14\n10.84.32.17\n</code></pre>\n\n<p>You could then go about scan each of the ports on these by running:</p>\n\n<pre><code>nmap -p- 10.84.32.1\n</code></pre>\n\n<p>To get an output like:</p>\n\n<pre><code>PORT     STATE SERVICE\n22/tcp   open  ssh\n2581/tcp open  unknown\n2443/tcp open  unknown\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 6248181, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e2cfe60613a6a45e954c668fc69950d2?s=128&d=identicon&r=PG&f=1", "display_name": "BElgy", "link": "https://stackoverflow.com/users/6248181/belgy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535081713, "creation_date": 1534883608, "last_edit_date": 1534884872, "question_id": 51956322, "link": "https://stackoverflow.com/questions/51956322/c-find-computer-on-lan-with-open-server", "title": "C Find Computer on LAN With Open Server", "body": "<p>Im trying to figure out a way for one user to open a server, on a port of their choice, and for a user on the same LAN, to be able to see that server without manually putting in the ip and port. Think like when you open a minecraft LAN server, and people on the LAN can see the server, even though they never put in the ip, and the port is different every time. Is there a way to do this in c on linux with the Berkley Sockets API, with TCP sockets?</p>\n"}, {"tags": ["python", "c", "numpy", "pointers", "swig"], "comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1534925392, "post_id": 51956101, "comment_id": 90874999, "body": "Does <code>myswig.myvoidp(ctypes.c_void_p(40546992))</code> work? If not, then you can eliminate <code>numpy</code> from the question"}, {"owner": {"reputation": 59, "user_id": 9945857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d9dd10efc6b8750b65f201c695b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Seifert", "link": "https://stackoverflow.com/users/9945857/michael-seifert"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1535022505, "post_id": 51956101, "comment_id": 90918046, "body": "Good idea. Yes, that yields the same error, so numpy is not playing in. I&#39;ve found a way to make it work in ctypes though, I guess because in ctypes I specify that I want to pass a void pointer as the first arg."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1535042199, "post_id": 51956101, "comment_id": 90930650, "body": "So to be clear, it works using ctypes to call the function, but not swig?"}, {"owner": {"reputation": 59, "user_id": 9945857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d9dd10efc6b8750b65f201c695b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Seifert", "link": "https://stackoverflow.com/users/9945857/michael-seifert"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1535095387, "post_id": 51956101, "comment_id": 90947778, "body": "Yes, that&#39;s correct. I believe that&#39;s because in ctypes I need to define the expected argument first. Which I do like this:    self.clib_myvoidp.argtypes = [ctypes.c_void_p].   So somehow SWIG must mess up the definition of the void * type."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9945857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d9dd10efc6b8750b65f201c695b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Seifert", "link": "https://stackoverflow.com/users/9945857/michael-seifert"}, "edited": false, "score": 0, "creation_date": 1535457637, "post_id": 52030988, "comment_id": 91064845, "body": "Cool. I will try that out. Thank you :)"}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 59, "user_id": 9945857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d9dd10efc6b8750b65f201c695b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Seifert", "link": "https://stackoverflow.com/users/9945857/michael-seifert"}, "edited": false, "score": 0, "creation_date": 1556315983, "post_id": 52030988, "comment_id": 98410597, "body": "Could the downvoter please explain where my answer is lacking?"}, {"owner": {"reputation": 59, "user_id": 9945857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d9dd10efc6b8750b65f201c695b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Seifert", "link": "https://stackoverflow.com/users/9945857/michael-seifert"}, "edited": false, "score": 0, "creation_date": 1556539041, "post_id": 52030988, "comment_id": 98461325, "body": "I dont think that was me, but I&#39;m a noob here anyway &amp;  don&#39;t know if it was a freak mouse click ;)I&#39;ve voted you one up JIC."}], "tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": false, "score": -1, "last_activity_date": 1535326245, "creation_date": 1535326245, "answer_id": 52030988, "question_id": 51956101, "link": "https://stackoverflow.com/questions/51956101/python-passing-void-pointer-as-parameter-to-c-function-swig-numpy/52030988#52030988", "title": "Python passing void pointer as parameter to C function (SWIG, Numpy)", "body": "<p>I guess you want to receive a pointer to the data of the NumPy array, so that you can access the array elements from C.  NumPy ships with <a href=\"https://docs.scipy.org/doc/numpy/reference/swig.html\" rel=\"nofollow noreferrer\">SWIG support</a> which is easy and convenient to use.  Just download <a href=\"https://github.com/numpy/numpy/blob/master/tools/swig/numpy.i\" rel=\"nofollow noreferrer\"><code>numpy.i</code></a> and place it in your project directory.</p>\n\n<p>Just change the signature of the C function from <code>(void *p)</code> to <code>(double *data, int length)</code> and apply the NumPy typemap.</p>\n\n<p><strong><code>test.i</code></strong></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>%module example\n%{\n#define SWIG_FILE_WITH_INIT\n#include &lt;stdio.h&gt;\n\nvoid myvoidp(double *data, int length) {\n    printf(\"data = [ \");\n    for (int i = 0; i &lt; length; ++i) {\n        printf(\"%f \", data[i]);\n    }\n    printf(\"]\\n\");\n}\n%}\n\n%include \"numpy.i\"\n\n%init %{\nimport_array();\n%}\n\n%apply (double* IN_ARRAY1, int DIM1) {(double *data, int length)}\nvoid myvoidp(double *data, int length);\n</code></pre>\n\n<p><strong><code>test.py</code></strong></p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from example import myvoidp\nfrom numpy import array\n\nanp = array([1,2,3])\nmyvoidp(anp)\n</code></pre>\n\n<p>Example invocation:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ swig -python test.i\n$ clang -Wall -Wextra -Wpedantic -I /usr/include/python3.6m/ -fPIC -shared -o _example.so test_wrap.c -lpython3.6m\n$ python3 test.py \ndata = [ 1.000000 2.000000 3.000000 ]\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9945857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d9dd10efc6b8750b65f201c695b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Seifert", "link": "https://stackoverflow.com/users/9945857/michael-seifert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 679, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535326245, "creation_date": 1534882619, "question_id": 51956101, "link": "https://stackoverflow.com/questions/51956101/python-passing-void-pointer-as-parameter-to-c-function-swig-numpy", "title": "Python passing void pointer as parameter to C function (SWIG, Numpy)", "body": "<p>I need to pass a pointer from Python to a C function. I'm currently trying with SWIG but I'm ready to switch to anything that will solve my issue :)</p>\n\n<p>To simplify my problem, I wrote this empty C function in SWIG:</p>\n\n<pre><code>extern void myvoidp(void *p);\n</code></pre>\n\n<p>I've setup my .i and .c files, all compile fine and work in Python.</p>\n\n<p>I'd like to pass a Numpy array. I can get the memory address of the Numpy data like this</p>\n\n<pre><code>&gt;&gt;&gt; anp = array([1,2,3])\narray([1, 2, 3])\n&gt;&gt;&gt; anp.ctypes.data\n40546992\n</code></pre>\n\n<p>I can cast it to a void * like this with ctypes and numpy:</p>\n\n<pre><code>&gt;&gt;&gt; anp.ctypes.data_as(ctypes.c_void_p)\nc_void_p(40546992)\n</code></pre>\n\n<p>I've tried endless variants. Whatever I do, when I invoke my C function I get this error.</p>\n\n<pre><code>&gt;&gt;&gt; myswig.myvoidp(anp.ctypes.data_as(ctypes.c_void_p))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: in method 'myvoidp', argument 1 of type 'void *'\n</code></pre>\n\n<p>I can't figure out how to write a Python / numpy statement that allows me to (simply) pass a pointer to my C function. :-(</p>\n"}, {"tags": ["c", "gcc", "int", "bit-manipulation", "toggle"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1534881734, "post_id": 51955862, "comment_id": 90862317, "body": "Why are you trying to toggle the hundredth bit of a datatype that does not have 100 bits?  That sounds problematic."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 2, "creation_date": 1534881734, "post_id": 51955862, "comment_id": 90862318, "body": "@cleblanc: I&#39;m guessing OP just make an error retyping the code since the output seems to indicate the <code>scanf</code> was correct."}, {"owner": {"reputation": 37, "user_id": 8161519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkLGEZEL278/AAAAAAAAAAI/AAAAAAAAAL4/HRIfoY05mDk/photo.jpg?sz=128", "display_name": "Niko_Jako", "link": "https://stackoverflow.com/users/8161519/niko-jako"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1534882012, "post_id": 51955862, "comment_id": 90862426, "body": "@ChristianGibbons just curious to see what would happen."}, {"owner": {"reputation": 37, "user_id": 8161519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkLGEZEL278/AAAAAAAAAAI/AAAAAAAAAL4/HRIfoY05mDk/photo.jpg?sz=128", "display_name": "Niko_Jako", "link": "https://stackoverflow.com/users/8161519/niko-jako"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1534882046, "post_id": 51955862, "comment_id": 90862439, "body": "@cleblanc what is OP, did you mean OR?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1534882222, "post_id": 51955862, "comment_id": 90862536, "body": "You shouldn&#39;t rely on weird experiments like that.  There are many examples of undefined behavior in C, so while your experiments may show one result, another system or another run could have another result.  I would recommend taking a look at the C standard some time if you are interested in learning more about how things work.  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/standards\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/standards</a>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1534882403, "post_id": 51955862, "comment_id": 90862619, "body": "&quot;OP&quot; is Original Post or Original Poster depending on the context... he&#39;s talking about you. <a href=\"https://www.webopedia.com/TERM/O/op_original_poster.html\" rel=\"nofollow noreferrer\">webopedia.com/TERM/O/op_original_poster.html</a>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1534882416, "post_id": 51955862, "comment_id": 90862623, "body": "@Niko_Jako What did you expect would happen?"}, {"owner": {"reputation": 37, "user_id": 8161519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkLGEZEL278/AAAAAAAAAAI/AAAAAAAAAL4/HRIfoY05mDk/photo.jpg?sz=128", "display_name": "Niko_Jako", "link": "https://stackoverflow.com/users/8161519/niko-jako"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1534882439, "post_id": 51955862, "comment_id": 90862639, "body": "@ChristianGibbons thanks for the link, I will investigate."}, {"owner": {"reputation": 37, "user_id": 8161519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkLGEZEL278/AAAAAAAAAAI/AAAAAAAAAL4/HRIfoY05mDk/photo.jpg?sz=128", "display_name": "Niko_Jako", "link": "https://stackoverflow.com/users/8161519/niko-jako"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1534889407, "post_id": 51955862, "comment_id": 90865244, "body": "@SteveSummit - I expected to get a compiler error similar to the one I get when I travel outside the bounds of an array."}, {"owner": {"reputation": 37, "user_id": 8161519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkLGEZEL278/AAAAAAAAAAI/AAAAAAAAAL4/HRIfoY05mDk/photo.jpg?sz=128", "display_name": "Niko_Jako", "link": "https://stackoverflow.com/users/8161519/niko-jako"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534889443, "post_id": 51955862, "comment_id": 90865256, "body": "@yano - cool website, thanks for sharing."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1534896212, "post_id": 51955862, "comment_id": 90866850, "body": "@Niko_Jako Aha.  I get similar errors for both of those: I get no errors for either of those."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8161519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkLGEZEL278/AAAAAAAAAAI/AAAAAAAAAL4/HRIfoY05mDk/photo.jpg?sz=128", "display_name": "Niko_Jako", "link": "https://stackoverflow.com/users/8161519/niko-jako"}, "edited": false, "score": 0, "creation_date": 1534882109, "post_id": 51955890, "comment_id": 90862476, "body": "can you reference your answer?"}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 4, "last_activity_date": 1534882281, "last_edit_date": 1534882281, "creation_date": 1534881661, "answer_id": 51955890, "question_id": 51955862, "link": "https://stackoverflow.com/questions/51955862/toggling-100th-bit-of-data-type-int-gives-unexpected-results/51955890#51955890", "title": "Toggling 100th bit of data type int gives unexpected results", "body": "<p>C does not have such a thing as a \"runtime error\". In the expression <code>x&lt;&lt;n</code>, if the value of <code>n</code> exceeds the width of the (promoted) type of <code>x</code>, or if the type is signed and the result would overflow, <strong>the behavior is undefined</strong>. That means the language does not impose any requirement on what happens, and it can be something weird and unexpected.</p>\n\n<p>The relevant text is <em>6.5.7 Bitwise shift operators</em>, \u00b63:</p>\n\n<blockquote>\n  <p>The integer promotions are performed on each of the operands. The type of the result is that of the promoted left operand. If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined. </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1534883751, "post_id": 51956011, "comment_id": 90863270, "body": "The note on x86 cpus is likely misleading in a question about C because it need not reflect anything about how the compiler implement the shift on x86. In some cases the <code>&lt;&lt;</code> might be combined with a <code>mul</code> operation, or performed with a different-size register than the type size (for example shifting in a 64-bit register then later only using the low 32 bits). Or if the compiler statically determines the shift amount is always out of bounds, it might remove the code entirely as unreachable by virtue of being undefined."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1534884003, "post_id": 51956011, "comment_id": 90863367, "body": "@R.. I am mentioning this only as a &quot;hindsight rationalization&quot; of the behavior OP is observing. Even Intel&#39;s manual says the result is undefined, which is probably because they do not wish to commit themselves to any particular behavior in the future: obviously, they know exactly what their CPU does with the upper bits of the register."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1534884933, "post_id": 51956011, "comment_id": 90863753, "body": "The x86 ISA behavior is definitely not undefined; in fact compilers use it to optimize. See for example <a href=\"https://godbolt.org/z/judF7w\" rel=\"nofollow noreferrer\">godbolt.org/z/judF7w</a>"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1534882177, "creation_date": 1534882177, "answer_id": 51956011, "question_id": 51955862, "link": "https://stackoverflow.com/questions/51955862/toggling-100th-bit-of-data-type-int-gives-unexpected-results/51956011#51956011", "title": "Toggling 100th bit of data type int gives unexpected results", "body": "<p>According to C language standard, the behavior is undefined:</p>\n\n<blockquote>\n  <p>6.5.7.3: If the value of the right operand is negative or is\n  greater than or equal to the width of the promoted left operand, the behavior is undefined.</p>\n</blockquote>\n\n<p>What happens in each particular case is hardware-dependent, so any program relying on it is invalid. In your case it appears that the hardware truncates the upper bits of <code>tbit</code>, as if the code were as follows:</p>\n\n<pre><code>ans = (tool&lt;&lt; (tbit &amp; 0x1F)) ^ num; \n</code></pre>\n\n<p>This is the behavior commonly observed with X86 CPUs:</p>\n\n<blockquote>\n  <p>Intel's manual] states that the results are undefined when <code>cnt</code> is greater than the operand size, but at least for 32- and 64-bit data sizes it has been observed that shift operations are performed by <code>(cnt mod n)</code>, with <code>n</code> being the data size (<a href=\"https://en.wikibooks.org/wiki/X86_Assembly/Shift_and_Rotate\" rel=\"nofollow noreferrer\">source</a>).</p>\n</blockquote>\n"}], "owner": {"reputation": 37, "user_id": 8161519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkLGEZEL278/AAAAAAAAAAI/AAAAAAAAAL4/HRIfoY05mDk/photo.jpg?sz=128", "display_name": "Niko_Jako", "link": "https://stackoverflow.com/users/8161519/niko-jako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 51955890, "answer_count": 2, "score": 0, "last_activity_date": 1534882281, "creation_date": 1534881524, "last_edit_date": 1534881874, "question_id": 51955862, "link": "https://stackoverflow.com/questions/51955862/toggling-100th-bit-of-data-type-int-gives-unexpected-results", "title": "Toggling 100th bit of data type int gives unexpected results", "body": "<p>The following code simply asks for a number <code>num</code> and then a bit <code>tbit</code> of that number to toggle/invert and then print the new number <code>ans</code>. </p>\n\n<p>Using Geany on debian 9 with a gcc compiler version 6.3.0 20170516, when I execute the following code I get an answer <code>ans</code> of 6, when I would have expected a compiler or runtime error telling me I'm out of bounds or something.</p>\n\n<p>Using this version of gcc the <code>sizeof(int)</code> returns four bytes or 32 bits. When I attempt to toggle the 100th bit, what is happening such that <code>ans=6</code>? </p>\n\n<p>Example input:</p>\n\n<pre><code>Enter a number : 22\nEnter the bit you want to toggle : 100\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>The number you entered is 22\nafter toggling the 100 bit\nthe new number is 6.`\n</code></pre>\n\n<p>Code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\n int num, tbit, tool = 1, ans; \n\nprintf(Enter a number :\"); \nscanf(\"%d\", &amp;num); \n\nprintf(Enter the bit you want to toggle :\");\nscanf(\"%d\", &amp;tbit);\n\nans = (tool&lt;&lt;tbit) ^ num; \n\nprintf(\"The number you entered is %d after toggling the %d bit the new \nnumber is %d\\n\" , num, tbit, ans);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "udp"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1534880958, "post_id": 51955615, "comment_id": 90861972, "body": "UDP packets are send-and-pray. If anyone receives them, great. If no one does, well, that&#39;s OK too. Nothing on the receiving end should cause the sender to fail. Of course, the sender might be something like a DNS server, that sends out request packets and expects someone to respond, but still it is in full control--it should be written so that if no response comes, it simply reports that without causing a failure."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1534889284, "post_id": 51955615, "comment_id": 90865203, "body": "Well yes. That\u2019s what UDP does. You must have considered such possibilities when you designed-in use of fire-and-forget UDP."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1534910216, "last_edit_date": 1534910216, "creation_date": 1534883190, "answer_id": 51956236, "question_id": 51955615, "link": "https://stackoverflow.com/questions/51955615/sending-udp-packet-to-dead-server/51956236#51956236", "title": "Sending UDP packet to dead server", "body": "<p>It won't fail, the transaction simply won't happen. Having said that, any and all packets that aren't recieved are lost.</p>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 1, "last_activity_date": 1534884036, "creation_date": 1534884036, "answer_id": 51956405, "question_id": 51955615, "link": "https://stackoverflow.com/questions/51955615/sending-udp-packet-to-dead-server/51956405#51956405", "title": "Sending UDP packet to dead server", "body": "<p>UDP protocol doesn't let you know whether the data is transmitted since it doesn't have such a property. There is no any problem flow of the program. In my opinion, it's the case why datagrams are useful.</p>\n"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534910216, "creation_date": 1534880411, "question_id": 51955615, "link": "https://stackoverflow.com/questions/51955615/sending-udp-packet-to-dead-server", "title": "Sending UDP packet to dead server", "body": "<p><code>sendto()</code> &amp; <code>recvfrom()</code> socket API is used to send a packet over UDP.</p>\n\n<p>We have a scenario where, <code>Node1</code>(UDP client program) sending a UDP packet to <code>Node2</code>(server which is UP) &amp; <code>Node3</code>(server which is down).</p>\n\n<hr>\n\n<p>TCP performs handshake before start and after finishing data communication. UDP doesn't.</p>\n\n<p>So, Does application running on <code>Node1</code> fail for a reason that server program on <code>Node3</code> is not ready(down) to receive UDP packets?</p>\n"}, {"tags": ["c", "process", "shared-memory"], "comments": [{"owner": {"reputation": 2841, "user_id": 1641381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/crUHq.jpg?s=128&g=1", "display_name": "kevinsa5", "link": "https://stackoverflow.com/users/1641381/kevinsa5"}, "edited": false, "score": 0, "creation_date": 1534880453, "post_id": 51955523, "comment_id": 90861710, "body": "What research have you done?  Have you tried anything already?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1534880472, "post_id": 51955523, "comment_id": 90861714, "body": "This sounds like a crazy idea. What&#39;s wrong with using a file to store this data in a client/server configuration?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 10187877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2629d4df545f7772bf4e06cd3de0365?s=128&d=identicon&r=PG&f=1", "display_name": "x0xchoc0late", "link": "https://stackoverflow.com/users/10187877/x0xchoc0late"}, "edited": false, "score": 0, "creation_date": 1534885411, "post_id": 51955638, "comment_id": 90863931, "body": "Thanks for the helpful response! Any way you can point me to any resources that can help me figure out how to implement this the first way you suggested? I don&#39;t know much about network file shares and such. Thanks in advance!"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1534880503, "creation_date": 1534880503, "answer_id": 51955638, "question_id": 51955523, "link": "https://stackoverflow.com/questions/51955523/shared-memory-between-two-linux-machines/51955638#51955638", "title": "Shared memory between two Linux machines?", "body": "<blockquote>\n  <p>I'm trying to figure out how I might be able to work with shared memory between two Linux machines.</p>\n</blockquote>\n\n<p>This is a bad idea. Synchronizing access to shared memory is difficult; you will have a hard time preventing multiple clients from interfering with each other, even on a single machine. Across multiple machines, the situation will only get worse.</p>\n\n<p>If you really want to do this, you have essentially two options:</p>\n\n<ol>\n<li><p><strong>The simple way.</strong> Create a file to represent the shared memory and store it on a network file share. Use <code>mmap()</code> to map it into memory on each machine. Make sure to use <code>msync()</code> to flush changes to disk and invalidate cache.</p></li>\n<li><p><strong>The complicated way.</strong> Use an Infiniband link to connect the machines and perform remote memory access. Details of how you do this will depend on what Infiniband vendor you use.</p></li>\n</ol>\n\n<p>That all being said, you will probably be much better off using another approach entirely. Details will depend on your application.</p>\n"}], "owner": {"reputation": 57, "user_id": 10187877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2629d4df545f7772bf4e06cd3de0365?s=128&d=identicon&r=PG&f=1", "display_name": "x0xchoc0late", "link": "https://stackoverflow.com/users/10187877/x0xchoc0late"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1534880503, "creation_date": 1534880017, "last_edit_date": 1534880337, "question_id": 51955523, "link": "https://stackoverflow.com/questions/51955523/shared-memory-between-two-linux-machines", "title": "Shared memory between two Linux machines?", "body": "<p>I'm trying to figure out how I might be able to work with shared memory between two Linux machines. Ideally, each machine has its own shared memory segment and is running two processes (one that reads from the machine's shared memory, and one that writes to the machine's shared memory). When one machine's shared memory gets written to or updated, I need the other machine to be notified and have its own shared memory sync up with the shared memory of the first machine.</p>\n\n<p>Is this possible? How can I do this?</p>\n\n<p>Thanks a million!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1534876806, "post_id": 51954759, "comment_id": 90860142, "body": "Is it Borland C in disguise?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1534877072, "post_id": 51954759, "comment_id": 90860262, "body": "@HaymantMangla TurboC accessed the graphics card directly. That can&#39;t be done on a modern PC, you&#39;ll have to run this in a simulator."}, {"owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 0, "creation_date": 1534877073, "post_id": 51954759, "comment_id": 90860264, "body": "Yep... &quot;<i>*graphmode is an integer that specifies the initial graphics mode (unless *graphdriver equals DETECT; in which case, *graphmode is set by initgraph to the highest resolution available for the detected driver).</i>&quot; (<code>DETECT</code> is <code>0</code>)."}, {"owner": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "edited": false, "score": 0, "creation_date": 1534877415, "post_id": 51954759, "comment_id": 90860431, "body": "I suddenly feel afraid that I&#39;m going to wake up and discover that the past 25 years were all a dream."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1534879135, "post_id": 51954759, "comment_id": 90861160, "body": "Assuming you are running on a system such as MS-DOS 6.22 you need the BGI files to be available."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 0, "creation_date": 1534879674, "post_id": 51954759, "comment_id": 90861381, "body": "@Attie the code sample in <a href=\"https://en.wikipedia.org/wiki/Borland_Graphics_Interface\" rel=\"nofollow noreferrer\">this link</a> shows that the OP&#39;s program is correct. The second argument is the return value from the function, although properly the first argument should be passed from <code>int gd = DETECT</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "edited": false, "score": 0, "creation_date": 1534879933, "post_id": 51954759, "comment_id": 90861484, "body": "@JoeFarrell in some countries the dream is to one day being able to afford modern technology. The Linux OS and the gcc compiler are free, but the computers they run on are not. In such places everything is recycled. If a bright spark has an opportunity to learn on an ancient machine, let&#39;s not discourage that."}, {"owner": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "edited": false, "score": 0, "creation_date": 1534880291, "post_id": 51954759, "comment_id": 90861638, "body": "It was meant as a joke, just because I haven&#39;t seen <code>graphics.h</code> in so very long. My apologies if anyone took offense."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1534956999, "post_id": 51954759, "comment_id": 90893969, "body": "there are only two valid signatures for <code>main()</code>  <code>int main( int argc, char *argv[] )</code>  and <code>int main( void )</code>"}], "owner": {"reputation": 11, "user_id": 10256236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af91ca897f3b906eeb06d6f288a7fdb?s=128&d=identicon&r=PG&f=1", "display_name": "Haymant Mangla", "link": "https://stackoverflow.com/users/10256236/haymant-mangla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534877333, "creation_date": 1534876501, "last_edit_date": 1534877333, "question_id": 51954759, "link": "https://stackoverflow.com/questions/51954759/file-has-stopped-working", "title": "File has stopped working", "body": "<p>I am using code blocks as my default IDE to code my c programs. but I am constantly getting the error that file has stopped working whenever I compile the following code related to graphics in c programming.</p>\n\n<pre><code>#include &lt;graphics.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nmain()\n{\nint gd=0,gm;\ninitgraph(&amp;gd,&amp;gm,\"\");\ncircle(300,200,80);\ngetch();\nclosegraph();\n}\n</code></pre>\n\n<p>I am getting no error and no warning. But still I am unable to run this code properly. I have added all the files like library and header files in correct order. Please help me to run this code successfully.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534875644, "post_id": 51954576, "comment_id": 90859650, "body": "Please <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. And perhaps check that condition and think about its logic?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1534875656, "post_id": 51954576, "comment_id": 90859655, "body": "<code>counter == MAX</code>? I don&#39;t think so, since <code>counter</code> is initially 0 and <code>MAX</code> is 9. The condition should be <code>counter &lt;= MAX</code>"}, {"owner": {"reputation": 475, "user_id": 8138241, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1vjoG.jpg?s=128&g=1", "display_name": "Jason Liu", "link": "https://stackoverflow.com/users/8138241/jason-liu"}, "edited": false, "score": 0, "creation_date": 1534875662, "post_id": 51954576, "comment_id": 90859661, "body": "Should it be <code>counter != MAX</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 475, "user_id": 8138241, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1vjoG.jpg?s=128&g=1", "display_name": "Jason Liu", "link": "https://stackoverflow.com/users/8138241/jason-liu"}, "edited": false, "score": 3, "creation_date": 1534875770, "post_id": 51954576, "comment_id": 90859694, "body": "@JasonLiu For a loop iterating over a range, that&#39;s usually a bad condition. Especially if the iterations suddenly have to be changed to step over every second value (i.e. the loop increment expression becomes <code>counter += 2</code>) or similar."}, {"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 0, "creation_date": 1534875810, "post_id": 51954576, "comment_id": 90859710, "body": "I would advise to (re)read how conditions in for-loops work. <a href=\"https://www.tutorialspoint.com/cprogramming/c_for_loop.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_for_loop.htm</a>"}, {"owner": {"reputation": 475, "user_id": 8138241, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1vjoG.jpg?s=128&g=1", "display_name": "Jason Liu", "link": "https://stackoverflow.com/users/8138241/jason-liu"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534876408, "post_id": 51954576, "comment_id": 90860008, "body": "@Someprogrammerdude You are absolutely correct and my previous comment is wrong on not only the initial cause of problems but the requirement. Because he wants to print from 0 to 9."}, {"owner": {"reputation": 449, "user_id": 7775673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff1f0f3fe7ed5fc8beddeee6c91fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Badran", "link": "https://stackoverflow.com/users/7775673/badran"}, "edited": false, "score": 0, "creation_date": 1534887290, "post_id": 51954576, "comment_id": 90864594, "body": "that&#39;s C++ not C , in C you can&#39;t declare variable in for loop! like for( int counter = 0 ... this is wrong , you should do the following int counter; for(counter = 0 ..... etc"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10256042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bTxYFJcOb7c/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMRA4OuulNvVgYl3x8aVI9ZeET2Ig/mo/photo.jpg?sz=128", "display_name": "nielan", "link": "https://stackoverflow.com/users/10256042/nielan"}, "edited": false, "score": 0, "creation_date": 1534875836, "post_id": 51954607, "comment_id": 90859723, "body": "Counter is already <code>counter == MAX</code> ... and nothing happens"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "reply_to_user": {"reputation": 5, "user_id": 10256042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bTxYFJcOb7c/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMRA4OuulNvVgYl3x8aVI9ZeET2Ig/mo/photo.jpg?sz=128", "display_name": "nielan", "link": "https://stackoverflow.com/users/10256042/nielan"}, "edited": false, "score": 0, "creation_date": 1534875924, "post_id": 51954607, "comment_id": 90859761, "body": "Read the answer again, you need to change it to <code>counter &lt;= MAX</code>"}], "tags": [], "owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1534875845, "last_edit_date": 1534875845, "creation_date": 1534875718, "answer_id": 51954607, "question_id": 51954576, "link": "https://stackoverflow.com/questions/51954576/c-printing-for-loop/51954607#51954607", "title": "C: printing for loop", "body": "<p>Change <code>counter == MAX</code> to <code>counter &lt;= MAX</code>. So in this case your loop will run until counter is less than or equal to <code>MAX</code></p>\n"}, {"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1534875935, "post_id": 51954608, "comment_id": 90859769, "body": "@user3386109 Thanks, fixed :)"}, {"owner": {"reputation": 5, "user_id": 10256042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bTxYFJcOb7c/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMRA4OuulNvVgYl3x8aVI9ZeET2Ig/mo/photo.jpg?sz=128", "display_name": "nielan", "link": "https://stackoverflow.com/users/10256042/nielan"}, "edited": false, "score": 0, "creation_date": 1534876462, "post_id": 51954608, "comment_id": 90860027, "body": "Condition must be met in order to execute... thanks!"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 2, "last_activity_date": 1534875832, "last_edit_date": 1534875832, "creation_date": 1534875718, "answer_id": 51954608, "question_id": 51954576, "link": "https://stackoverflow.com/questions/51954576/c-printing-for-loop/51954608#51954608", "title": "C: printing for loop", "body": "<p>The <code>for</code> loop will keep on running so long as the checking expression <code>counter == MAX</code> remains <code>true</code>. Which is never the case in this code snippet. You probably meant <code>counter != MAX</code>.</p>\n\n<p>This would print 0 - 8 and not 0 -9. For that you would need to make <code>MAX</code> 10 or change the loop condition to <code>counter &lt;= MAX</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 10256042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bTxYFJcOb7c/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMRA4OuulNvVgYl3x8aVI9ZeET2Ig/mo/photo.jpg?sz=128", "display_name": "nielan", "link": "https://stackoverflow.com/users/10256042/nielan"}, "edited": false, "score": 0, "creation_date": 1534875935, "post_id": 51954619, "comment_id": 90859770, "body": "Thank you for correcting my thinking!"}, {"owner": {"reputation": 449, "user_id": 7775673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff1f0f3fe7ed5fc8beddeee6c91fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Badran", "link": "https://stackoverflow.com/users/7775673/badran"}, "edited": false, "score": 0, "creation_date": 1534887378, "post_id": 51954619, "comment_id": 90864629, "body": "you can&#39;t declare a variable in for loop in C language"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 449, "user_id": 7775673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff1f0f3fe7ed5fc8beddeee6c91fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Badran", "link": "https://stackoverflow.com/users/7775673/badran"}, "edited": false, "score": 0, "creation_date": 1534893200, "post_id": 51954619, "comment_id": 90866182, "body": "@Badran I&#39;m pretty sure support for that has been added in C11; if you try <code>for(int i = 0; i &lt;  10; i++) printf(&quot;%d\\n&quot;, i);</code> on various compilers on <a href=\"http://godbolt.org\" rel=\"nofollow noreferrer\">godbolt.org</a> you&#39;ll find that GCC 5.1 x86-64 supports it as well as MSVC and Clang"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1534875776, "creation_date": 1534875776, "answer_id": 51954619, "question_id": 51954576, "link": "https://stackoverflow.com/questions/51954576/c-printing-for-loop/51954619#51954619", "title": "C: printing for loop", "body": "<p>My guess is that you think the statement after the first semicolon in the <code>for</code> loop is the condition that stops the loop when it is true. Actually, that statement has to be true/non-zero to the loop to execute. </p>\n\n<p>Try <code>for(int counter = 0; counter &lt;= MAX; counter++)</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 0, "creation_date": 1534875925, "post_id": 51954629, "comment_id": 90859762, "body": "just change to <code>&lt;= MAX </code> since 9 needs to be included"}, {"owner": {"reputation": 3331, "user_id": 8038186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac0cc4d0f1414caf2172751b2ded50?s=128&d=identicon&r=PG&f=1", "display_name": "KoralK", "link": "https://stackoverflow.com/users/8038186/koralk"}, "reply_to_user": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 1, "creation_date": 1534876018, "post_id": 51954629, "comment_id": 90859822, "body": "@KyrSt I missed that part, you right. fixed."}], "tags": [], "owner": {"reputation": 3331, "user_id": 8038186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac0cc4d0f1414caf2172751b2ded50?s=128&d=identicon&r=PG&f=1", "display_name": "KoralK", "link": "https://stackoverflow.com/users/8038186/koralk"}, "is_accepted": false, "score": 1, "last_activity_date": 1534875968, "last_edit_date": 1534875968, "creation_date": 1534875834, "answer_id": 51954629, "question_id": 51954576, "link": "https://stackoverflow.com/questions/51954576/c-printing-for-loop/51954629#51954629", "title": "C: printing for loop", "body": "<p>The idea behind the middle area in the for is the condition for the loop to continue, and not to stop if it is true. While the condition returning <code>true</code> value, the loop will continue. In your case the condition have to look like this one: <code>counter &lt;= MAX</code>. And in the whole loop:</p>\n\n<pre><code>for (int counter = 0; counter &lt;= MAX; counter++)\n    printf(\"%d \\n\", counter);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 5864207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e0tZi1RE1wY/AAAAAAAAAAI/AAAAAAAAA34/OyxqKUpcWPQ/photo.jpg?sz=128", "display_name": "Abhyas29", "link": "https://stackoverflow.com/users/5864207/abhyas29"}, "is_accepted": false, "score": 0, "last_activity_date": 1534877535, "creation_date": 1534877535, "answer_id": 51955000, "question_id": 51954576, "link": "https://stackoverflow.com/questions/51954576/c-printing-for-loop/51955000#51955000", "title": "C: printing for loop", "body": "<p>There are two things that might prevent this code from running. </p>\n\n<ol>\n<li><p>First thing is what everyone else have pointed. The condition is forever false in the conditional part of the for loop in</p>\n\n<pre><code>for(initialization; condition; increment/decrement)\n{\n    //code here\n}\n</code></pre></li>\n</ol>\n\n<p>the correct condition seems to be </p>\n\n<pre><code>    counter &lt;= MAX\n</code></pre>\n\n<ol start=\"2\">\n<li>Second thing might be that you are using an old compiler in which case you need to initialize the counter at the beginning of the code before performing any other action. Initialization is not allowed within for in many old compilers. The place where it would be most suited would be right after the opening braces <code>{</code> of the <code>main()</code> function block. </li>\n</ol>\n\n<p>Thus the best approach would be </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;    \n    #define MAX 9\n\n    int main()\n    {\n        int counter;\n        for (counter = 0; counter &lt;= MAX; counter++)\n            printf(\"%d \\n\", counter);\n\n    return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10256042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bTxYFJcOb7c/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMRA4OuulNvVgYl3x8aVI9ZeET2Ig/mo/photo.jpg?sz=128", "display_name": "nielan", "link": "https://stackoverflow.com/users/10256042/nielan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1534879067, "accepted_answer_id": 51954619, "answer_count": 5, "score": -1, "last_activity_date": 1534877535, "creation_date": 1534875563, "last_edit_date": 1534876111, "question_id": 51954576, "link": "https://stackoverflow.com/questions/51954576/c-printing-for-loop", "closed_reason": "Not suitable for this site", "title": "C: printing for loop", "body": "<p>Trying to complete a larger task in C, but for some reason this one small simple (or so I thought) piece of the puzzle isn't working.</p>\n\n<p>I want to print 0 to 9, each on individual lines:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX 9\n\nint main()\n{\n\n    for (int counter = 0; counter == MAX; counter++)\n        printf(\"%d \\n\", counter);\n\n    return 0;\n}\n</code></pre>\n\n<p>However, nothing* happens when I build &amp; run. I've been staring it for over an hour...</p>\n\n<p>*Nothing = <code>Process returned 0 (0x0)</code>...</p>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 7, "creation_date": 1534875311, "post_id": 51954488, "comment_id": 90859513, "body": "Sounds like a job for <code>union</code>."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534875463, "post_id": 51954488, "comment_id": 90859580, "body": "I&#39;ve been thinking about that as well, but how would you handle both a 4 byte uint32_t and a 32byte char array (string)?"}, {"owner": {"reputation": 1300, "user_id": 1198066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a0a68dd4c4916fc2fd33708e595bf5?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1198066/ross"}, "edited": false, "score": 0, "creation_date": 1534886810, "post_id": 51954488, "comment_id": 90864425, "body": "You note that you want to &quot;store them in a common array&quot;.  Why do you want this to be the solution?  Can you design a getter that abstracts the actual storage from the rest of your code?  That way you won&#39;t have to go down the union route...  We can tell you ways to solve the given problem (basically unions), but if you describe the wider problem better you&#39;re apt to get better solutions."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1534901579, "post_id": 51954488, "comment_id": 90867865, "body": "Define &quot;efficient&quot;."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1534904948, "post_id": 51954488, "comment_id": 90868507, "body": "Define &quot;correct&quot;"}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534918288, "post_id": 51954488, "comment_id": 90871693, "body": "efficient -&gt; doesn&#39;t waste more space than required if possible; correct -&gt; industry-acknowledged"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1534921175, "post_id": 51954488, "comment_id": 90872912, "body": "Creating a &quot;variant&quot; through union is widely recognized as bad practice, which in turns originates from bad program design. There should never be a need to create such types, since that&#39;s not how you do generic programming in C."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1534924251, "post_id": 51954488, "comment_id": 90874385, "body": "@Lundin: Feel free to provide an alternative solution. Consider a machine with multiple types of sensors in a memory-limited environment (microcontroller). malloc is forbidden by design."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534928646, "post_id": 51954488, "comment_id": 90876725, "body": "@TomL. On such systems in particular, variants are forbidden, most because they don&#39;t make much sense. See for example MISRA-C. But the root of the problem here is that your system is 100% deterministic, yet you suggest a program design which assumes that the system isn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534875706, "post_id": 51954557, "comment_id": 90859670, "body": "If I understand correctly, this would allocate memory of 58 bytes for each instance (assuming double is 8 bytes), even if I just want to store a single uint8_t. Correct?"}, {"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "reply_to_user": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534875896, "post_id": 51954557, "comment_id": 90859745, "body": "@TomL. Yes. If you use pointers instead, it will only allocate `sizeof(void *); but you&#39;ll need to deal with memory allocation and deallocation manually."}, {"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "reply_to_user": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534875951, "post_id": 51954557, "comment_id": 90859781, "body": "@TomL. Wait; the union part will only be 42 bytes."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534875954, "post_id": 51954557, "comment_id": 90859783, "body": "I&#39;m trying to just use static memory allocation as this is intended for an embedded system where I don&#39;t want to deal with malloc."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534875983, "post_id": 51954557, "comment_id": 90859796, "body": "Oh yeah, sorry, unions just reserve space for the largest element if I remember correctly."}, {"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "reply_to_user": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534876018, "post_id": 51954557, "comment_id": 90859821, "body": "Which makes 47 bytes, assuming <code>char</code> is 1 which I think is a given."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534876026, "post_id": 51954557, "comment_id": 90859829, "body": "What would be foo_count and why can&#39;t I do the second two things of your example? Or do you just mean that I can&#39;t do those in sequence?"}, {"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "reply_to_user": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534876083, "post_id": 51954557, "comment_id": 90859856, "body": "<code>foo_count</code> is the number of <code>foo</code>s. It&#39;s irrelevant. And it&#39;s in sequence that you can&#39;t do them, yes."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 5, "creation_date": 1534878444, "post_id": 51954557, "comment_id": 90860880, "body": "The actual size of the union will depend on how your compiler aligns/pads the structure, and this is usually very dependent on the memory access methods of the target processor, i.e. only if your compiler generates byte address will the size of the union be 47 - best method is to write some simple code which prints the sizeof the union. Your desired method can work but can create a lot of overhead (wasted RAM) if most instances of this union hold eight-wide-thing values."}, {"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1534885629, "post_id": 51954557, "comment_id": 90864016, "body": "@barny You are correct; I forgot about that. Thanks for reminding me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 2, "creation_date": 1534901555, "post_id": 51954557, "comment_id": 90867859, "body": "@barny: The correct way would be to read the ABI of the implementation for the specific platform and <b>then</b> verify the length (I&#39;ve seen broken implementations which don&#39;t follow the ABI in all aspects). Also it&#39;s not guaranteed there is no &quot;filler&quot; bytes between different data objects which don&#39;t belong to any object. Said that: it&#39;s a bad idea to rely on a specific layout for a <code>struct</code>. Luckily it&#39;s most times also completely irrelevant, if the code is written correctly these days even on common MCUs."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1534904770, "post_id": 51954557, "comment_id": 90868468, "body": "my way of saying it is never use structs (unions/bitfields) across compile domains.  If you properly use a struct (union, etc) within a program and only access the union/struct items directly you never point a struct at memory or fread into or out of a struct, never memcpy into or out of except into another one declared and compiled into that code and use sizeof(), you will be fine, even with bitfields.  its when you make any kind of assumption as to the size you get into trouble eventually.  usually when it is most painful to the project."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1534904891, "post_id": 51954557, "comment_id": 90868491, "body": "the job of the union is just to save on consumption for items that are mutually exclusive which is why a union sounds so tempting to your question.  if the data type can be one of your list, only one at a time of your list, then you can save some space in the struct by using a union, and the largest of those items (plus target and compiler padding) will define the width of that union, where each of the union items lands within that width is target and compiler specific, not just brand of compiler specific but version, build options, etc."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1534904921, "post_id": 51954557, "comment_id": 90868500, "body": "If you dont need to save the space then there is no need for the union just have one of each of the types in the struct and just use the appropriate one based on the type."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1534918181, "post_id": 51954557, "comment_id": 90871658, "body": "I think I understand where this is heading. Space is at least a little of concern even if it&#39;s not the most pressing issue."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1534927268, "post_id": 51954557, "comment_id": 90875980, "body": "My point wasn&#39;t about so much how to establish the size (but clearly running code on the target to tell you what the size of the structure is <i>will</i> tell you the space it takes) as that a simple adding up of the bytes involved may well not be the actual size of the union - and if the OP wants &quot;efficient&quot; storage then the &quot;efficiency&quot; of struct-containing-a-union-of-all-the-possible-types depends on their usage because wasted space could be very large if perhaps 99.99% of values stored in this struct are in fact only 1 byte of actual data."}], "tags": [], "owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "is_accepted": false, "score": 2, "last_activity_date": 1534875805, "last_edit_date": 1534875805, "creation_date": 1534875466, "answer_id": 51954557, "question_id": 51954488, "link": "https://stackoverflow.com/questions/51954488/efficient-storage-of-parameters-in-c/51954557#51954557", "title": "Efficient storage of parameters in C", "body": "<p>Unions are the way to go! Have an <code>enum</code> saying what type is stored there (I've used an <code>int_8</code> to make the example small) and then do this:</p>\n\n<pre><code>struct {\n    int_8 type;\n    union {\n        int_8 eight_wide_thing;\n        char char_buffer[42];\n        double more_bad_variable_names;\n    }\n    int_32 foo_count;\n} example;\n</code></pre>\n\n<p>You can do this:</p>\n\n<pre><code>struct example bar;\nbar.eight_wide_thing = 42;\nprintf(\"%d\", bar.eight_wide_thing);\nbar.char_buffer[3] = '\\0';\nbar.char_buffer[0] = 'H';\nbar.char_buffer[1] = 'i';\nbar.char_buffer[2] = '!';\nprintf(\"%s\", bar.char_buffer);\n</code></pre>\n\n<p>But not this:</p>\n\n<pre><code>bar.eight_wide_thing = 42;\nbar.more_bad_variable_names /= 6;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 1, "creation_date": 1534918242, "post_id": 51959255, "comment_id": 90871676, "body": "Having a custom parameter type (t_uint32) is a great idea. Seems very useful to me."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1534960829, "last_edit_date": 1534960829, "creation_date": 1534906411, "answer_id": 51959255, "question_id": 51954488, "link": "https://stackoverflow.com/questions/51954488/efficient-storage-of-parameters-in-c/51959255#51959255", "title": "Efficient storage of parameters in C", "body": "<blockquote>\n  <p>Efficient storage of parameters in C</p>\n</blockquote>\n\n<p>Let us assume a fixed size per parameter.</p>\n\n<blockquote>\n  <p>So basically the largest parameter was a 32byte string </p>\n</blockquote>\n\n<p>So we need at least 32 bytes.  Use a <code>union</code> to overlay the various types of data.  </p>\n\n<pre><code>typedef union {\n  char s[32];\n  TBD;\n} valueType;\n</code></pre>\n\n<p>A <em>string</em> always ends with a <em>null character</em> so code can use the last <code>char</code> <code>string[32-1]</code> zero-ness as a flag for <code>string</code> vs. non-string.</p>\n\n<p>For other types, keep track via a <code>.type_identifier</code> member.</p>\n\n<pre><code>typedef union {\n  char string[32];\n  struct {\n    union {\n      struct { uint32_t val; uint32_t min; uint32_t max; uint32_t  initial; } t_uint32;\n      struct { float val;    float min;    float max;    float initial; } t_float;\n      struct { char val;     char min;     char max;     char initial; } t_char;\n    } u; \n    uint8_t type_identifier;\n    uint8_t access_mode;\n  } not_string; \n} valueType;\n</code></pre>\n\n<p>This is fine when the size of <code>.not_string</code> is less than the size of <code>.string</code>.</p>\n\n<hr>\n\n<p>Yet OP wants to code <code>double</code>, which commonly takes 8 bytes each and also wants 4 <code>double</code>members.</p>\n\n<p>So might as well:</p>\n\n<pre><code>typedef struct {\n  int type_identifier;  // or  uint8_t\n  int access_mode;      // or  uint8_t\n  union {\n    char string[32];\n    struct { uint32_t val; uint32_t min; uint32_t max; uint32_t  initial; } t_uint32;\n    struct { double val;   double min;   double max;   double initial; } t_double;\n    struct { float val;    float min;    float max;    float initial; } t_float;\n    struct { char val;     char min;     char max;     char initial; } t_char;\n  } u; \n} valueType;\n</code></pre>\n\n<p>This may be as small as 2 + 32 bytes or a tad larger depending on padding requirements.</p>\n"}], "owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "closed_date": 1535028073, "accepted_answer_id": 51959255, "answer_count": 2, "score": 0, "last_activity_date": 1534960829, "creation_date": 1534875186, "last_edit_date": 1534901599, "question_id": 51954488, "link": "https://stackoverflow.com/questions/51954488/efficient-storage-of-parameters-in-c", "closed_reason": "Opinion-based", "title": "Efficient storage of parameters in C", "body": "<p>I have an application where I need to store values, those values can be either a double, an integer, a string (fixed size char array), uint8_t, chars, ...</p>\n\n<p>Each of these values also has additional parameters, it can be Read-Only, Read-Write or they can have a max or min value (obviously for numeric types only).</p>\n\n<p>So basically a simple struct would look like this:</p>\n\n<pre><code>typedef struct {\n    uint32_t current_val;\n    uint32_t min;\n    uint32_t max;\n    uint8_t type;\n    uint32_t initial_value;\n    uint8_t access_mode = READ_WRITE;\n} valueType;\n</code></pre>\n\n<p>Now obviously this struct could only hold a uint32_t parameter value. I'd like to have many of those with different types and then store them in a common array.</p>\n\n<p>Do you see any chance of doing this except for storing the reference to the instance and then finding out what the parameter type actually is?</p>\n\n<p>I've seen a solution where for each of those parameters a memory section was allocated and then parameter was stored there. So basically the largest parameter was a 32byte string which caused even an uint32_t to occupy 32 bytes.</p>\n\n<p>What would be the correct way to address this issue? Is there some common way to do this? Maybe just throw in some term so I know what to google for.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1534874731, "post_id": 51954327, "comment_id": 90859194, "body": "I&#39;d guess buffer overflow on <code>array</code>. You&#39;re only declaring room for 100, then looping over 1000. Maybe the math works out and you&#39;re fine, I don&#39;t know. Put a conditional breakpoint at the <code>array[k]=i;</code> line for when <code>k</code> &gt; 99 and see if it gets hit."}, {"owner": {"reputation": 69, "user_id": 10198594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1a32b51f990643596ed6ce670c1895?s=128&d=identicon&r=PG&f=1", "display_name": "user10198594", "link": "https://stackoverflow.com/users/10198594/user10198594"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534874982, "post_id": 51954327, "comment_id": 90859351, "body": "@yano What&#39;s a conditional breakpoint?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1534875228, "post_id": 51954327, "comment_id": 90859473, "body": "It&#39;s a breakpoint that breaks only when a condition is met. It&#39;s helpful in a case like this when the problem might occur only after several iterations through a loop. If <code>k</code> ever becomes &gt; 99 in that double <code>for</code> loop, then you&#39;ll access <code>array</code> out of bounds, invoking undefined behavior. If you simply put a breakpoint at <code>array[k] = i;</code>, you&#39;ll have a lottttt of stepping through to do before the part that could be causing the problem (<code>k</code> &gt; 99). If you&#39;ve never used a debugger before, now is an excellent time to learn."}, {"owner": {"reputation": 69, "user_id": 10198594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1a32b51f990643596ed6ce670c1895?s=128&d=identicon&r=PG&f=1", "display_name": "user10198594", "link": "https://stackoverflow.com/users/10198594/user10198594"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534875436, "post_id": 51954327, "comment_id": 90859572, "body": "@yano I&#39;ve set the array as array[10000] and it still doesn&#39;t work."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534875436, "post_id": 51954327, "comment_id": 90859573, "body": "If the conditional breakpoint never gets hit, then you can eliminate that double <code>for</code> loop as the problem and move on to the <code>while</code> loop. If you really don&#39;t want to mess with a debugger, <code>printf</code> the value of <code>k</code> right before <code>array[k] = i;</code>. If <code>k</code> is ever &gt; 99,, there&#39;s your undefined behavior which in your case is manifesting itself as a seg fault. A debugger will also tell you which line it&#39;s crashing on."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1534875768, "post_id": 51954327, "comment_id": 90859693, "body": "well, you are looping ~one million times, 1000 over 1000. Potentially that could make <code>k</code> ~1000000. (It won&#39;t because of the condition, but it might get bigger than 9999). One way or another you need to figure out what <code>k</code> is before you write or read from <code>array[k]</code>. Any access beyond its bounds, even by 1, invokes undefined behavior, and your program could do anything after that."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534876231, "post_id": 51954327, "comment_id": 90859938, "body": "A segmentation fault ordinarily arises from an out-of-bounds array access or from dereferencing a null or wild pointer.  That might be an issue for you even with <code>array</code> dimensioned at 10000.  But more importantly, your approach to the problem is at best extremely obtuse.  You do not need <code>array</code> at all, or anything like it, to solve this problem."}, {"owner": {"reputation": 69, "user_id": 10198594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1a32b51f990643596ed6ce670c1895?s=128&d=identicon&r=PG&f=1", "display_name": "user10198594", "link": "https://stackoverflow.com/users/10198594/user10198594"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534876656, "post_id": 51954327, "comment_id": 90860095, "body": "@JohnBollinger What I was trying to do is find prime numbers between 1 and 1000 and then find if a number inserted by the user between 1 and 1000 is prime."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1534876910, "post_id": 51954327, "comment_id": 90860187, "body": "@user10198594, testing whether a number is perfect does not require identifying primes, which is good because your code does not appear to successfully discover primes anyway.  You just need to find the proper divisors of the input number -- all of them, not just the prime ones -- and add them up."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1534877009, "post_id": 51954327, "comment_id": 90860226, "body": "FWIW, in my tests, your <code>while</code> loop fails to terminate for at least some inputs before it runs off the end of the populated part of <code>array</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1534877373, "post_id": 51954327, "comment_id": 90860409, "body": "@user10198594 You need to rethink the design of your program. A <a href=\"https://en.wikipedia.org/wiki/Perfect_number\" rel=\"nofollow noreferrer\">perfect number</a> is a number that is equal to the sum of its proper divisors. For example, 28 = 1 + 2 + 4 + 7 + 14. Notice that it&#39;s <b>not</b> the sum of the prime divisors, which would be 2 + 2 + 7."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1534893190, "post_id": 51954327, "comment_id": 90866180, "body": "There is a simpler solution: <code>if (n==6 || n==28 || n==496 || n==8128 || n==33550336) puts(&quot;It&#39;s a perfect number&quot;);</code> (Although you&#39;ll have to add another 3 numbers to the list if your <code>int</code> size is 64 bits.)"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1534885682, "creation_date": 1534885682, "answer_id": 51956727, "question_id": 51954327, "link": "https://stackoverflow.com/questions/51954327/program-to-find-if-a-number-is-perfect/51956727#51956727", "title": "Program to find if a number is perfect", "body": "<p>Given the loop index maximum value <code>1000</code>, the array <code>array</code> should be defined with a size of at least <code>1001</code>.  With a size of <code>100</code>, you likely have a buffer overflow causing undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 593, "user_id": 644939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad327fb8209704f105f687c34db1746?s=128&d=identicon&r=PG", "display_name": "Ian Miller", "link": "https://stackoverflow.com/users/644939/ian-miller"}, "is_accepted": false, "score": 2, "last_activity_date": 1534892714, "creation_date": 1534892714, "answer_id": 51957828, "question_id": 51954327, "link": "https://stackoverflow.com/questions/51954327/program-to-find-if-a-number-is-perfect/51957828#51957828", "title": "Program to find if a number is perfect", "body": "<p>The segmentation fault tells you that you are trying to access memory outside the bounds of what you are allowed. Your array is nowhere near big enough for what your program does.</p>\n\n<p>You need to reconsider what you are storing in array. All numbers up to a thousand that are divisible by other numbers, right? But actually it's going to be</p>\n\n<ul>\n<li>all of them <strong>and</strong></li>\n<li>all the even ones <strong>and</strong></li>\n<li>all of them that are divisible by 3 <strong>and</strong></li>\n<li>all of them that are divisible by 4 etc.</li>\n</ul>\n\n<p>That sounds like a lot more than 100 doesn't it? There will also be many, many repeats which I doubt you intend. For example, you will store 6 three times as it is divisible by 2, 3 and itself. (So, by the way, you should stop looking once j is greater than i.)</p>\n\n<p>Your while loop is also peculiar. It terminates when tmp2 is 1. How is tmp ever going to be equal to 1?</p>\n\n<p>Back to the drawing board, I'm afraid!</p>\n"}], "owner": {"reputation": 69, "user_id": 10198594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1a32b51f990643596ed6ce670c1895?s=128&d=identicon&r=PG&f=1", "display_name": "user10198594", "link": "https://stackoverflow.com/users/10198594/user10198594"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 51956727, "answer_count": 2, "score": 1, "last_activity_date": 1534892714, "creation_date": 1534874482, "last_edit_date": 1534885735, "question_id": 51954327, "link": "https://stackoverflow.com/questions/51954327/program-to-find-if-a-number-is-perfect", "title": "Program to find if a number is perfect", "body": "<p>I'm having trouble trying to run this program that I made to find if a number if perfect. It gives me a segmentation error. What does that mean? Can you help me to understand what I did wrong? Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid perfect(int number);\n\nint main() {\n    int n;\n\n    printf(\"Insert a number greater than 0: \");\n    scanf(\"%d\", &amp;n);\n\n    perfect(n);\n\n    return 0;\n}\n\nvoid perfect(int number) {\n    int i, j, array[100], k = 0, tmp = 0, tmp2 = number;\n\n    for (i = 2; i &lt;= 1000; i++) {\n        for (j = 2; j &lt;= 1000; j++) {\n            if (i % j == 0) {\n                array[k] = i;\n                k++;\n            }\n        }\n    }\n    k = 0;\n\n    while (tmp2 != 1) {\n        if (tmp2 % array[k] == 0) {\n            tmp += array[k];\n            tmp2 /= array[k];\n        }\n        k++;\n    }\n\n    tmp++;\n    if (tmp == tmp2) {\n        printf(\"It's a perfect number\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "printf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534874558, "post_id": 51954318, "comment_id": 90859082, "body": "No you pass a <i>single</i> <code>char</code> value (which is then converted to an <code>int</code>). If you mean you pass a pointer when printing a string, then that&#39;s something very different because <code>printf</code> knows how to handle those pointers with the <code>&quot;%s&quot;</code> format."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1534874583, "post_id": 51954318, "comment_id": 90859098, "body": "Please demonstrate where you are passing a pointer to a string. You aren&#39;t even passing a <i>string</i>... also, try <code>printf( &quot;%p\\n&quot;, ptr )</code>. Then read the manual on <code>printf()</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1534874671, "post_id": 51954318, "comment_id": 90859158, "body": "In the first case, &quot;%c&quot; expects a single character, and you pass it a dereferenced character pointer (*astring), which is a single character. It is not a &quot;pointer to a string&quot; as you say, that would be &amp;astring. All is well. &quot;%d&quot; expects an integer value, not a pointer. If you dereference it (*ptr), then that would work."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1534874840, "post_id": 51954318, "comment_id": 90859265, "body": "Don&#39;t just smash around with wild experiments. Read the documentation carefully and see what values have to be paired up with particular placeholders."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5556323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fcd4c78e3824705e5e0650c8062a76?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Khullar", "link": "https://stackoverflow.com/users/5556323/kartik-khullar"}, "edited": false, "score": 0, "creation_date": 1534912052, "post_id": 51954363, "comment_id": 90869921, "body": "Yes you are right.. that was exactly what I wanted to ask.. I put the wrong code here before."}], "tags": [], "owner": {"reputation": 24558, "user_id": 457237, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34f7425ea0a472d1493230c28204010a?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan Manjunath", "link": "https://stackoverflow.com/users/457237/pavan-manjunath"}, "is_accepted": true, "score": 2, "last_activity_date": 1534875225, "last_edit_date": 1534875225, "creation_date": 1534874639, "answer_id": 51954363, "question_id": 51954318, "link": "https://stackoverflow.com/questions/51954318/can-we-pass-pointers-in-printf/51954363#51954363", "title": "Can we pass pointers in printf?", "body": "<p>In the first <code>printf</code> you did NOT send a pointer. You de-referenced the pointer and hence, you are actually sending a character. Likewise if you want to print an integer, send <code>*ptr</code>, the dereferenced value of the integer pointer.</p>\n\n<p>I'm guessing the source of your confusion to be this-</p>\n\n<pre><code> printf(\"%s\", string_ptr);\n</code></pre>\n\n<p>perfectly prints the <strong>string value</strong> instead of the <strong>pointer value</strong> but</p>\n\n<pre><code>printf(\"%d\", integer_ptr);\n</code></pre>\n\n<p>prints the <strong>pointer value</strong> instead of the <strong>integer value</strong>.</p>\n\n<p>This is because the way <code>printf</code> is implemented. When it sees a <code>%s</code> in the format string, it considers the corresponding parameter as a pointer to a NULL-terminated string. And goes looking for the value of that string at the address contained in the pointer.</p>\n\n<p>But when it sees a <code>%d</code>, it considers the corresponding parameter as an integer value and prints it out directly.</p>\n\n<p>The change in behavior is because types like integer, floats etc are smaller and finite in size and can be passed to <code>printf</code> as values directly. But a string can be arbitrarily large in size. So it makes sense to pass it as a pointer and let <code>printf</code> go find the actual value using the pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1534882957, "creation_date": 1534882957, "answer_id": 51956169, "question_id": 51954318, "link": "https://stackoverflow.com/questions/51954318/can-we-pass-pointers-in-printf/51956169#51956169", "title": "Can we pass pointers in printf?", "body": "<p>Because the language specification says so.</p>\n\n<p>The <code>%s</code> conversion specifier expects its corresponding argument to have type <code>char *</code>; <code>printf</code> will then print out the sequence of characters starting at that address until it sees the string terminator.</p>\n\n<p>The <code>%d</code> conversion specifier expects its corresponding argument to have type <code>int</code>; <code>printf</code> will then print out the text representation of that value as a signed decimal integer.  </p>\n\n<p>Check your handy C reference manual for the complete list of conversion specifiers and the types of arguments they expect.  If you don't have a handy C reference manual, my preferred one has been <a href=\"http://careferencemanual.com\" rel=\"nofollow noreferrer\">C: A Reference Manual</a> since the late 1980s, although the current edition only covers up to C99.  </p>\n\n<p>If you use <code>%d</code> and pass something that <em>isn't</em> an integer, then the behavior is <em>undefined</em>.  The compiler isn't required to yell at you for passing an argument of the wrong type.  If you run the code, anything may happen.  In practice, you'll usually get garbled output.  If you pass something that isn't a pointer for <code>%s</code>, you may get a runtime error.  </p>\n"}], "owner": {"reputation": 37, "user_id": 5556323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fcd4c78e3824705e5e0650c8062a76?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Khullar", "link": "https://stackoverflow.com/users/5556323/kartik-khullar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 51954363, "answer_count": 2, "score": 0, "last_activity_date": 1534911616, "creation_date": 1534874456, "last_edit_date": 1534911616, "question_id": 51954318, "link": "https://stackoverflow.com/questions/51954318/can-we-pass-pointers-in-printf", "title": "Can we pass pointers in printf?", "body": "<p>In the following code, we pass pointer to a string and it works fine but it doesn't works for pointer to an integer. I want to know why ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    char *astring = \"afdv\";\n     printf(\"%s\",astring);\n    int a;\n    a = 1000;\n    int *ptr = &amp;a;\n    printf(\"\\n%d\", ptr);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1534871538, "post_id": 51953672, "comment_id": 90857668, "body": "You are both <code>fgetc</code>ing and <code>fscanf</code>ing. Bad idea."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1534872855, "post_id": 51953672, "comment_id": 90858253, "body": "<code>char c;</code> should be <code>int c;</code> because <code>EOF</code> is not guaranteed to be representable by the <code>char</code> type."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1534873063, "post_id": 51953672, "comment_id": 90858338, "body": "@IanAbbott I would say it is guaranteed not to be represented :) (don&#39;t ask me where...)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1534873214, "post_id": 51953672, "comment_id": 90858413, "body": "If <code>fgetc</code> reads a digit, it has already gone by the time you call <code>fscanf</code> so you could read the wrong number. If you really want to use <code>fscanf</code>, you could check if <code>c</code> is a digit, and if so, call <code>ungetc</code> to push the digit back on the stream before you call <code>fscanf</code> to read it. You are only guaranteed to be able to push back one character before reading it again."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1534873646, "post_id": 51953672, "comment_id": 90858606, "body": "@EugeneSh. Where? <code>EOF</code> is only guaranteed to be an integer constant expression with type <code>int</code> and a negative value. C11 7.21.1p3. It is only guaranteed not to be represented on implementations where <code>char</code> is unsigned."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1534874305, "post_id": 51953672, "comment_id": 90858945, "body": "@IanAbbott As I said - don&#39;t ask me :) But apparently  if <code>EOF</code> could be represented as <code>char</code>, you could do <code>fwrite</code> a buffer with some <code>EOF</code>s in the middle. What would it do then?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534874590, "post_id": 51953672, "comment_id": 90859107, "body": "@nigerianprince It was good to post input.  &quot;should be 84 for this file, but it prints 87&quot; was only describing output.  Posting your exact output and expected output is even more useful."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534875553, "post_id": 51953672, "comment_id": 90859617, "body": "@EugeneSh. <a href=\"https://stackoverflow.com/questions/51953672/reading-integers-from-a-text-file-and-adding-them-c/51954278#comment90858945_51953672\">re:</a>  If <code>EOF</code>, perhaps with a value of -1, and on a system where <code>char</code> is signed (quite common),  <code>char c = EOF; fwrite(&amp;ch, 1, 1, file);</code> would simply write a character that a later <code>int d = fgetc()</code> would read as a value of 255."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534875647, "post_id": 51953672, "comment_id": 90859652, "body": "@chux But what the dual <code>fread</code> will read? Anyway, why would the function write character <code>255</code>, when it is asked to write <code>EOF</code>? This doesn&#39;t make sense, so I would claim that <code>EOF</code> cannot be represented as <code>char</code> without breaking other things."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534876096, "post_id": 51953672, "comment_id": 90859864, "body": "@EugeneSh. Using <code>fread()</code> of this 1 byte file --&gt; <code>char c; size_t x = fread(&amp;ch, 1, 1, file);</code> --&gt; <code>c == -1, x == 1</code>.  Unclear what you mean by &quot;dual&quot; <code>fread()</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534876176, "post_id": 51953672, "comment_id": 90859898, "body": "@chux Yes, this is what I mean. But if <code>EOF</code> is <code>char</code> it should not read <code>-1</code>. It should encounter <code>EOF</code> instead and not read anything."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1534876395, "post_id": 51953672, "comment_id": 90860001, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/178469/discussion-between-chux-and-eugene-sh\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1534875224, "last_edit_date": 1534875224, "creation_date": 1534874277, "answer_id": 51954278, "question_id": 51953672, "link": "https://stackoverflow.com/questions/51953672/reading-integers-from-a-text-file-and-adding-them-c/51954278#51954278", "title": "Reading integers from a text file and adding them (C)", "body": "<blockquote>\n  <p>... should I just change something in the code?</p>\n</blockquote>\n\n<p><code>while((c=fgetc(file))!=EOF)</code> does nothing with <code>c</code> and so loses a potential character of numeric input.  </p>\n\n<p><code>if( fscanf(file, \"%d\", &amp;number))</code> is a problem as is gets fooled when end-of-file occurs as <code>fscanf()</code> returned non-zero and so code thinks a number was read.</p>\n\n<p>Instead try a 3-way branch.  Use the result value from <code>fscanf()</code> to guide the next steps.</p>\n\n<pre><code>int conversion_count;\ndo {\n  conversion_count = fscanf(file, \"%d\", &amp;number);\n  if (conversion_count == 1) {\n    // scanf() found an `int`\n    printf(\"The number is %i\\n  \", number);\n    sum = sum + number;\n  } else if (conversion_count == 0) {\n    // scanf() failed to finf an `int`.\n    // Offending non-numeric input remains in `file`.\n    // Read non-numeric input character and quietly toss it.\n    fgetc(file); // \n  }\n} while (conversion_count != EOF);\n</code></pre>\n\n<p>Alternative: Robust code would read a line of text with <code>fgets()</code> and <code>strtol()</code> to look for integers.</p>\n"}], "owner": {"reputation": 23, "user_id": 10250407, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PHzObKaFrmM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOKIQo7l8kxHyHel5vNU7kVGWtoxQ/mo/photo.jpg?sz=128", "display_name": "nigerianprince", "link": "https://stackoverflow.com/users/10250407/nigerianprince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 51954278, "answer_count": 1, "score": 2, "last_activity_date": 1534879069, "creation_date": 1534871456, "last_edit_date": 1534879069, "question_id": 51953672, "link": "https://stackoverflow.com/questions/51953672/reading-integers-from-a-text-file-and-adding-them-c", "title": "Reading integers from a text file and adding them (C)", "body": "<p>I am a beginner in C programming. I am currently preparing for an exam and I'm stuck on a program. The task is to read from a text file and make the sum of the integers inside it. The file also contains characters. I have tried this as a solution, and it is nearly correct, but it sometimes adds an integer too many times.</p>\n\n<pre><code>void calculate(char* file_name) {\n    FILE* file;\n    int sum = 0;\n    int number;\n\n    file = fopen(file_name, \"r\");\n    char c;\n\n    while ((c = fgetc(file)) != EOF) {\n    if (fscanf(file, \"%d\", &amp;number)) {\n        printf(\"The number is %i\\n  \", number);\n        sum = suma + number;\n    }   \n    }   \n    fclose(file);\n    printf(\"The sum is %i\\n\", sum);\n}\n</code></pre>\n\n<p>For example, the text in the file is:</p>\n\n<pre><code>         asdd12 ddd15 dddgh51hh3\n         3adb jk !!!*\n</code></pre>\n\n<p>The sum should be 84 for this file, but it prints 87. Is my method completely wrong or should I just change something in the code?</p>\n\n<p>Thank you in advance for your help.</p>\n"}, {"tags": ["c", "mergesort"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1534870642, "post_id": 51953309, "comment_id": 90857245, "body": "<a href=\"https://stackoverflow.com/q/605845/995714\">Don&#39;t cast the result of <code>malloc</code> family in C</a>. And why don&#39;t you free the memory after use?"}, {"owner": {"reputation": 49, "user_id": 9913310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4PkrseG8THw/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2ZXxZAUxrIPCrwq2qMPNBG54IFbg/mo/photo.jpg?sz=128", "display_name": "Rock star", "link": "https://stackoverflow.com/users/9913310/rock-star"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1534871243, "post_id": 51953309, "comment_id": 90857538, "body": "thanks for the suggestion @phuclv also are you able to spot the logical error in the code why am i getting the wrong answer"}], "answers": [{"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1534870682, "post_id": 51953407, "comment_id": 90857263, "body": "this isn&#39;t an answer. And long may have the same size as int, for example in 32-bit systems and on 64-bit Windows"}], "tags": [], "owner": {"reputation": 1, "user_id": 10246713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15d127d9a1390d759b9c6852b585af?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Pawar", "link": "https://stackoverflow.com/users/10246713/gaurav-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1534890491, "last_edit_date": 1534890491, "creation_date": 1534870390, "answer_id": 51953407, "question_id": 51953309, "link": "https://stackoverflow.com/questions/51953309/inversions-in-a-matrix/51953407#51953407", "title": "Inversions in a matrix", "body": "<p>I think you should use <code>long int</code>, because you are using values that are greater than the size of an <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9913310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4PkrseG8THw/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2ZXxZAUxrIPCrwq2qMPNBG54IFbg/mo/photo.jpg?sz=128", "display_name": "Rock star", "link": "https://stackoverflow.com/users/9913310/rock-star"}, "edited": false, "score": 0, "creation_date": 1534871080, "post_id": 51953524, "comment_id": 90857461, "body": "ya that&#39;s the answer i am getting which is wrong.The answer should be 4999950000"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 3, "last_activity_date": 1534870889, "creation_date": 1534870889, "answer_id": 51953524, "question_id": 51953309, "link": "https://stackoverflow.com/questions/51953309/inversions-in-a-matrix/51953524#51953524", "title": "Inversions in a matrix", "body": "<p>You declare count as <code>long long int count = 0;</code> but then you pass it around <code>&amp;count</code> as if it were only an <code>int *</code>.  Try fixing the functions where you pass <code>&amp;count</code> to take a <code>long long int *</code>.</p>\n\n<p>I think the result you're getting is 704982704</p>\n"}], "owner": {"reputation": 49, "user_id": 9913310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4PkrseG8THw/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2ZXxZAUxrIPCrwq2qMPNBG54IFbg/mo/photo.jpg?sz=128", "display_name": "Rock star", "link": "https://stackoverflow.com/users/9913310/rock-star"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1554404757, "creation_date": 1534869991, "question_id": 51953309, "link": "https://stackoverflow.com/questions/51953309/inversions-in-a-matrix", "title": "Inversions in a matrix", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstatic void merge(int *array, int start, int mid, int end, int *count){\n    int *leftarray = (int *)calloc(sizeof(int), mid-start+2);\n    int *rightarray = (int *)calloc(sizeof(int), end-mid+2);\n    int i,j = 0,k=0;\n    for (i = start; i &lt;= mid; i++){\n        leftarray[j++] = array[i];\n    }\n    leftarray[j] = 2147483647;\n    j = 0;\n    for (i = mid + 1; i &lt;= end; i++){\n        rightarray[j++] = array[i];\n    }\n        rightarray[j] = 2147483647;\n        j = 0;\n        for (i = start; i &lt;= end; i++){\n            if (leftarray[j] &lt;= rightarray[k]){\n                array[i] = leftarray[j];\n                j++;\n            }\n            else {\n                array[i] = rightarray[k];\n                k++;\n                if (i != end){\n                    *count += mid + 1 - start - j;\n                }\n            }\n\n        }\n}\n\nstatic void display(int *array, int size){\n    for (int i = 0; i&lt;size; i++){\n        printf(\"%d \", array[i]);\n    }\n    printf(\"\\n\");\n}\n\nstatic void mergeSort(int *array, int start, int end, int *count){\n    if (start &gt;= end){\n        return;\n    }\n    int mid = (start + end) / 2;\n    mergeSort(array, start, mid, count);\n    mergeSort(array, mid + 1, end, count);\n    merge(array, start, mid, end, count);\n}\nint mergesort() {\nint n;\nlong long int count = 0;\n//scanf(\"%d\", &amp;n);\nint * array = (int *)calloc(sizeof(int), 100005);\nint number = 199999;\nfor (int i = 0; i &lt; 100000; i++){\n    array[i] = number--;\n}\n/*for (int i=0; i&lt;n; i++){\n    scanf(\"%d\", &amp;array[i]);\n}*/\nmergeSort(array, 0, 100000 - 1, &amp;count);\n/*display(array, n);*/\nprintf(\"%d\\n\", count);\nreturn 0;\n}\n\nint main(){\n    mergesort();\n    return 0;\n}\n</code></pre>\n\n<p>I am trying to solve this problem from geeksforgeeks (<a href=\"https://www.geeksforgeeks.org/counting-inversions/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/counting-inversions/</a>) and implemented the following code but it gives wrong result for the above input values the reverse sorted array from 199999 to 100000 instead of getting result as 4999950000 i am getting some other result i tried debugging but it was useless can anyone tell me where did i go wrong </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 5, "creation_date": 1534868720, "post_id": 51952996, "comment_id": 90856309, "body": "scanf(&quot;%d&quot;, &amp;hallo); You need to pass address of <code>hallo</code> variable"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1534868867, "post_id": 51952996, "comment_id": 90856372, "body": "<i>This question was caused by a problem that can no longer be reproduced or a simple typographical error. While similar questions may be on-topic here, this one was resolved in a manner unlikely to help future readers. This can often be avoided by identifying and closely inspecting the shortest program necessary to reproduce the problem before posting. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a></i>"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 10145166, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-swSgOi7fqRQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7psPSOw5ebSc32P4D0VVCaUruVmZg/mo/photo.jpg?sz=128", "display_name": "Nikhil Shedshale", "link": "https://stackoverflow.com/users/10145166/nikhil-shedshale"}, "is_accepted": true, "score": 1, "last_activity_date": 1534871240, "last_edit_date": 1534871240, "creation_date": 1534870267, "answer_id": 51953377, "question_id": 51952996, "link": "https://stackoverflow.com/questions/51952996/the-output-not-displaying-after-scanf-using-c-programming/51953377#51953377", "title": "The output not displaying after scanf() using c programming", "body": "<p>The 4th line of the code: <code>scanf(\"%d\", hallo);</code></p>\n\n<p>Here <code>&amp;hallo</code> should be used instead of just the variable name <code>hallo</code>.</p>\n\n<p>The significance of the <code>&amp;</code> sign is that it gives the address of a particular variable. So whatever the value is entered by the user, it will be stored at the address of the variable (in this case at the address of variable <code>hallo</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10246713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15d127d9a1390d759b9c6852b585af?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Pawar", "link": "https://stackoverflow.com/users/10246713/gaurav-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1534870698, "creation_date": 1534870698, "answer_id": 51953481, "question_id": 51952996, "link": "https://stackoverflow.com/questions/51952996/the-output-not-displaying-after-scanf-using-c-programming/51953481#51953481", "title": "The output not displaying after scanf() using c programming", "body": "<p>Use the &amp; after the , in scanf\nLike this \nscanf(\"%d\", &amp; hallo);</p>\n"}], "owner": {"reputation": 17, "user_id": 9536469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JvRXr.png?s=128&g=1", "display_name": "afifizain", "link": "https://stackoverflow.com/users/9536469/afifizain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51953377, "answer_count": 2, "score": -2, "last_activity_date": 1535677752, "creation_date": 1534868691, "last_edit_date": 1535677752, "question_id": 51952996, "link": "https://stackoverflow.com/questions/51952996/the-output-not-displaying-after-scanf-using-c-programming", "title": "The output not displaying after scanf() using c programming", "body": "<p>Here im working on my first coding in c programming. I've got the problem when I want to get the user input and display the output from the user input. here my code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main(){\n    printf(\"Enter the number : \");\n    int hallo = 0;\n    scanf(\"%d\", hallo);\n    printf(\"hallo, %d\", hallo);\n\n}\n</code></pre>\n\n<p>after executing the code the last line not appear where is <code>prinf(\"hallo, %d\", hallo);</code>. Which is to display the user input.</p>\n"}, {"tags": ["c", "loops", "infinite-loop"], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1534868016, "post_id": 51952787, "comment_id": 90855958, "body": "and avoid UB by avoiding signed overflow?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534868271, "post_id": 51952787, "comment_id": 90856092, "body": "why not use an <code>int</code> for your loop variable?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1534868326, "post_id": 51952787, "comment_id": 90856120, "body": "@TimRandall It makes no difference one way or the other."}, {"owner": {"reputation": 29, "user_id": 10255737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be89db7de696d42d7bd1ed3bd326f854?s=128&d=identicon&r=PG&f=1", "display_name": "Hoss Boffman", "link": "https://stackoverflow.com/users/10255737/hoss-boffman"}, "edited": false, "score": 0, "creation_date": 1534869048, "post_id": 51952787, "comment_id": 90856469, "body": "@dasblinkenlight Thank you. I get it."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1534868299, "last_edit_date": 1534868299, "creation_date": 1534867934, "answer_id": 51952787, "question_id": 51952757, "link": "https://stackoverflow.com/questions/51952757/my-character-frequency-program-seems-to-have-an-infinite-loop/51952787#51952787", "title": "My character frequency program seems to have an infinite loop", "body": "<p>The problem is with your variable <code>j</code>, which has type <code>char</code>:</p>\n\n<pre><code>for (j = 0 ; j &lt;= 127 ; j++)\n</code></pre>\n\n<p>On systems where <code>char</code> is signed, max value of <code>char</code> is <code>127</code>, meaning that <code>j &lt;= 127</code> condition is always true.</p>\n\n<p>Although you can fix this problem by declaring <code>j</code> as <code>unsigned char</code>, there is a better approach to counting characters: make an array of 128 counters, and walk through the <code>input[]</code> once:</p>\n\n<pre><code>unsigned char input[100];\nint tally[128] = {0};\nfor (int i = 0 ; i &lt; 100 ; i++) {\n    if (input[i] &lt; 128) {\n        tally[input[i]]++;\n    }\n}\nfor (int c = 0 ; c != 128 ; c++) {\n    if (tally[c] != 0) {\n        printf(\"%c : %d times\\n\", c, tally[c]);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10255737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be89db7de696d42d7bd1ed3bd326f854?s=128&d=identicon&r=PG&f=1", "display_name": "Hoss Boffman", "link": "https://stackoverflow.com/users/10255737/hoss-boffman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 51952787, "answer_count": 1, "score": -1, "last_activity_date": 1534868299, "creation_date": 1534867780, "question_id": 51952757, "link": "https://stackoverflow.com/questions/51952757/my-character-frequency-program-seems-to-have-an-infinite-loop", "title": "My character frequency program seems to have an infinite loop", "body": "<p>Here's my solution to exercise 1-14 of the classic, \"The C Programming Language.\" It's supposed to return the frequencies of the characters in the input. It does that, but it keeps printing the complete list of frequencies until the compiler stops. I've tried to find the source of the infinite loop. Where is it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar j;\nint i;\nint tally;\nchar input[100];\nint k;\n\nint main ()\n{\nfor (k = 0; k &lt; 100; k++)\n{\n    input[k] = getchar();\n}\n\nfor (j = 0; j &lt;= 127; j++)\n{\n    tally = 0;\n    for (i = 0; i &lt; 100; i++)\n    {\n        if (input[i] == j)\n        { \n            tally++;\n        }\n    }\n    if (tally != 0)\n    {\n        printf (\"%c : %d times\\n\", j, tally);\n    }\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "stdin", "fgets", "getchar"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 1, "creation_date": 1534867386, "post_id": 51952603, "comment_id": 90855569, "body": "They are completely different things, and the best one to use depends entirely on what you&#39;re doing."}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1534867389, "post_id": 51952603, "comment_id": 90855571, "body": "Have you considered scanf?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1534867516, "post_id": 51952603, "comment_id": 90855652, "body": "There is <code>fgetc</code> if you want to read a single character from a specified stream."}, {"owner": {"reputation": 3, "user_id": 10255678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9_8Eg7Hrhg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM0g0FKCf3UiJIaK-00x6TaSK-QmQ/mo/photo.jpg?sz=128", "display_name": "Shaurya Singh", "link": "https://stackoverflow.com/users/10255678/shaurya-singh"}, "edited": false, "score": 0, "creation_date": 1534867632, "post_id": 51952603, "comment_id": 90855716, "body": "I understand that <code>getchar()</code> uses <code>fgetc()</code> but my question is pretty clear &quot;Is there a reason to prefer one over the other, provided they both suffice for the task at hand. &quot;"}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1534867714, "post_id": 51952603, "comment_id": 90855773, "body": "If inputting strings use a string based function. If inputting chars use a char based function. What Are you doing?"}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1534867902, "post_id": 51952603, "comment_id": 90855883, "body": "If your operating a menu system. I don&#39;t think that fgets will work well. I think you have to hit return to get anything. Using char based stuff for imputing strings, names, addresses etc. will require more code. For strings use the string based functions as its a lot easier."}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1534868215, "post_id": 51952603, "comment_id": 90856069, "body": "I think fgets() will give you chunks that you can glue back together in dynamically allocated buffers if you want to do that. What are you doing?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1534868958, "post_id": 51952603, "comment_id": 90856420, "body": "<code>getchar()</code> vs <code>fgets()</code>?  Unless you&#39;re doing this for the purpose of learning, neither.  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\">If available, use <code>getline()</code></a> and get an entire line of unspecified length with one line of code: <code>char *line = NULL; size_t len = 0; ssize_t read = getline( &amp;line, &amp;len, stdin );</code>  There&#39;s no need to reinvent the wheel."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1534869575, "post_id": 51952603, "comment_id": 90856726, "body": "@WilliamJBagshaw -- you will have to press ENTER to get character input regardless of whether <code>fgets()</code> or <code>getchar()</code> is used."}, {"owner": {"reputation": 3, "user_id": 10255678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9_8Eg7Hrhg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM0g0FKCf3UiJIaK-00x6TaSK-QmQ/mo/photo.jpg?sz=128", "display_name": "Shaurya Singh", "link": "https://stackoverflow.com/users/10255678/shaurya-singh"}, "edited": false, "score": 0, "creation_date": 1534869657, "post_id": 51952603, "comment_id": 90856778, "body": "Yes, I got the fact it&#39;s about reading strings vs characters. Unless i am required to perform some character by character operations as i allocate, I shouldn&#39;t be using <code>getchar()</code> for the purpose of reading strings. The other methods should prove to be more optimal. Correct me if I&#39;m wrong."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10255678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9_8Eg7Hrhg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM0g0FKCf3UiJIaK-00x6TaSK-QmQ/mo/photo.jpg?sz=128", "display_name": "Shaurya Singh", "link": "https://stackoverflow.com/users/10255678/shaurya-singh"}, "edited": false, "score": 0, "creation_date": 1534869037, "post_id": 51952936, "comment_id": 90856461, "body": "The way I&#39;m seeing it now is that I should almost always prefer <code>fgets()</code> over <code>getchar()</code> unless i want to perform operation on the characters as they are being allocated. ( Strictly speaking in terms of the example above. )"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3, "user_id": 10255678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9_8Eg7Hrhg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM0g0FKCf3UiJIaK-00x6TaSK-QmQ/mo/photo.jpg?sz=128", "display_name": "Shaurya Singh", "link": "https://stackoverflow.com/users/10255678/shaurya-singh"}, "edited": false, "score": 0, "creation_date": 1534872772, "post_id": 51952936, "comment_id": 90858219, "body": "@ShauryaSingh, yes, for reading <i>strings</i>, and especially whole-line strings I agree that <code>fgets()</code> is usually to be preferred.  <code>getchar()</code> serves a different purpose."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1534868513, "creation_date": 1534868513, "answer_id": 51952936, "question_id": 51952603, "link": "https://stackoverflow.com/questions/51952603/c-using-getchar-over-fgets-for-stdin/51952936#51952936", "title": "C - Using getchar over fgets for stdin", "body": "<blockquote>\n  <p>Is there any disadvantage to using <code>getchar()</code> method as opposed to\n  <code>fgets()</code> for reading a string, other than the fact that <code>getchar()</code>\n  reads just from stdin where as we can choose a stream for <code>fgets()</code>.</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<ul>\n<li><p><code>fgets()</code> requires only one call in the general case, and it handles recognizing end-of-line automatically.  <code>getchar()</code> needs to be called in a loop in the general case, and you need to handle line-termination recognition yourself.  That makes <code>getchar()</code> both more complicated to use and more costly for the purpose.</p></li>\n<li><p>Furthermore, if there is more than one place in your program where you want to read strings, you would want to put any <code>getchar()</code>-based solution into a <code>function</code> so that you can reuse it, and then you're straight to your own reimplimentation of <code>fgets</code> anyway.</p></li>\n<li><p>It is also reasonable to expect the experts who wrote and tuned your C library to have implemented <code>fgets()</code> more efficiently than you can reasonably expect to match by rolling your own with <code>getchar()</code>.</p></li>\n</ul>\n\n<blockquote>\n  <p>The one advantage I see for <code>getchar()</code> is that <code>fgets()</code> requires us to\n  specify the maximum characters that can be read in advanced, whereas\n  we can use a buffer in case of <code>getchar()</code> to store the string and\n  reallocate as per our need.</p>\n</blockquote>\n\n<p>If you mean that using <code>getchar()</code> allows you to reallocate <em>on a character-by-character basis</em> then</p>\n\n<ol>\n<li>Technically, you can get that with <code>fgets()</code>, too.</li>\n<li>You generally want to perform (re)allocation in larger chunks, because it is expensive.  And you can do <em>that</em> in conjunction with <code>fgets</code>, too.</li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 10255678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9_8Eg7Hrhg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM0g0FKCf3UiJIaK-00x6TaSK-QmQ/mo/photo.jpg?sz=128", "display_name": "Shaurya Singh", "link": "https://stackoverflow.com/users/10255678/shaurya-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 51952936, "answer_count": 1, "score": -1, "last_activity_date": 1534868513, "creation_date": 1534867155, "last_edit_date": 1534868264, "question_id": 51952603, "link": "https://stackoverflow.com/questions/51952603/c-using-getchar-over-fgets-for-stdin", "title": "C - Using getchar over fgets for stdin", "body": "<p>New here,</p>\n\n<p>Is there any disadvantage to using <code>getchar()</code> method as opposed to <code>fgets()</code> for reading a string, other than the fact that <code>getchar()</code> reads just from <code>stdin</code> where as we can choose a stream for <code>fgets()</code>.</p>\n\n<p>Assuming, I have to only work with <code>stdin</code>, is there a reason why I should or shouldn't choose one or the other?</p>\n\n<p>The one advantage I see for <code>getchar()</code> is that <code>fgets()</code> requires us to specify the maximum characters that can be read in advanced, whereas we can use a buffer in case of <code>getchar()</code> to store the string and reallocate as per our need.</p>\n\n<p><strong>[ EDIT ]</strong></p>\n\n<p>I implemented this function to read inputs, but is there any reason to do so when <code>fgets()</code> could also suffice if the length of the string is known.</p>\n\n<pre><code>char *scanner ( const char *text )\n{\n    char *buffer = ( char * ) malloc ( sizeof ( char ) * BUFFER_SIZE );\n\n    int token;\n    int length = 0;\n    int limit = BUFFER_SIZE;\n\n    printf(\"%s\", text);\n\n    while ( ( token = getchar ( ) ) != '\\n' &amp;&amp; token != EOF )\n    {\n        buffer [ length ++ ] = token;\n\n        if ( length &gt; limit )\n        {\n            limit += 256;\n            buffer = ( char * ) realloc ( buffer, sizeof ( char ) * limit );\n        }\n    }\n\n    buffer [ length ] = '\\0';\n\n    return buffer;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management", "segmentation-fault"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 8, "creation_date": 1534866186, "post_id": 51952248, "comment_id": 90854876, "body": "How we will know without code and proper problem description?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1534866272, "post_id": 51952248, "comment_id": 90854920, "body": "The must be some bug in the code you didn&#39;t show here. Please read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 9, "creation_date": 1534866419, "post_id": 51952248, "comment_id": 90855005, "body": "Remember the stack is limited. If this array is on the stack it is will cause stack overflow on most systems unless you increase the stack size."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1534866540, "post_id": 51952248, "comment_id": 90855079, "body": "Just to add proportions to Stack size limitations, on many systems the stack is limited to 2Mb or 4 Mb. Unless ou have a special system, 10Mb of data should be dynamically allocated and filled."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1534866618, "post_id": 51952248, "comment_id": 90855141, "body": "What you have posted isn&#39;t valid C (no type of <code>A</code>), but assuming that&#39;s just fantasy code and your <i>real</i> code is actually proper., if that really is a 10MB automatic variable in <code>main()</code>, that&#39;s very likely your problem and @drescherjm hit it spot-on. The most effortless step you can take is to move it outside of <code>main</code> or qualify it as <code>static</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1534866737, "post_id": 51952248, "comment_id": 90855214, "body": "I believe that Windows has a default stack size of 1 MiB and Unix machines generally have a default stack size of 8 MiB.  Your outline code is missing the type, but even assuming it is <code>char</code>, you are blowing the stack.  You&#39;ll need to define and initialize the variable outside the <code>main()</code> function \u2014 or use dynamic memory allocation, but that leaves you with a major problem w.r.t the initializer.  Go with file static variable outside the function (or even a <code>static</code> variable inside the function)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1534866828, "post_id": 51952248, "comment_id": 90855272, "body": "There are a number of previous questions where there was similar code with similar consequence and similar prescriptions (<code>static</code>, or dynamic allocation).  Finding a canonical duplicate will be harder, though."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1534866860, "post_id": 51952248, "comment_id": 90855292, "body": "What is <code>s</code> in your code?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534867258, "post_id": 51952248, "comment_id": 90855502, "body": "if you&#39;re on linux, you can <code>ulimit -s</code> to display the current per-thread stack size in kilobytes. Mine defaults (I haven&#39;t changed it) to 8192k == 8Mb, so 10+Mb would overflow my stack"}], "owner": {"reputation": 87, "user_id": 7885206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7563a5a98310d5eba7819c5aa7206055?s=128&d=identicon&r=PG&f=1", "display_name": "Leonel Hern&#225;ndez", "link": "https://stackoverflow.com/users/7885206/leonel-hern%c3%a1ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534866910, "creation_date": 1534866006, "last_edit_date": 1534866910, "question_id": 51952248, "link": "https://stackoverflow.com/questions/51952248/how-to-avoid-segmentation-fault-in-c-when-the-array-is-defined", "title": "How to avoid segmentation fault in C when the array is defined?", "body": "<p>I have an array <code>A1[ ]={1,0,1,1,..'X',0,1,'X',.1,0...}</code>, as big as 10 Megas of binary integers and some 'X' values (taken as the ASCII integer value), I am thinking to use <code>malloc</code> but I already have the array defined (I am just copy and paste the values before running my code). Any other suggestions on how to avoid <strong><em>segmentation fault</em></strong>? So far this the error that I am geting :(. </p>\n\n<p>The code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n\n    //int A[]={'x','x',1,0,'x',0,'x',1,1,1,...};//up to 10M values\n    int A[]={0,'x',1,'x',1,0,'x',0,'x','x',1,'x',0,'x','x','x','x','x','x',0};\n    int j;\n\n    #define n (sizeof(A)/sizeof(*A))     // bits\n    printf(\"Patt size= %d\\n\",n);\n\n    /*Code will be added here to make some calculations with A*/\n\n    printf(\"A =\");                       // show input\n    for(j=0; j&lt;n; j++)\n        printf(\" %d\",A[j]);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1534863799, "post_id": 51951546, "comment_id": 90853394, "body": "Cause <code>i &lt; n&#47;2</code> is different from <code>i &lt;= (n-1)&#47;2</code>. Maybe you meant <code>i &lt;= n&#47;2-1</code>?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1534863877, "post_id": 51951546, "comment_id": 90853449, "body": "&lt;O/T&gt; use <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead of <code>gets</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1534863966, "post_id": 51951546, "comment_id": 90853508, "body": "That&#39;s a perfect opportunity to start learning how to use your debugger."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1534863987, "post_id": 51951546, "comment_id": 90853523, "body": "You need to master the art of debugging programs. There is a wonderful tutorial out there, which will teach you this invaluable skill: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 1, "creation_date": 1534864398, "post_id": 51951546, "comment_id": 90853774, "body": "Are you sure it&#39;s a good idea to call <code>strlen</code> twice per iteration over the string...? Why not just <code>int i=0, j=strlen(string) - 1; for(; i&lt;j; ++i,--j){ swap(...); }</code>"}, {"owner": {"reputation": 83, "user_id": 7920332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70120e97d87a1af2b9912b57e76102f2?s=128&d=identicon&r=PG&f=1", "display_name": "JustStartedCoding", "link": "https://stackoverflow.com/users/7920332/juststartedcoding"}, "reply_to_user": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1534865744, "post_id": 51951546, "comment_id": 90854603, "body": "@CiaPan I wanted my code to be readable to beginners. I will consider your recommendation if I dive into competitive coding. Thanks anyway."}], "answers": [{"comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1534866121, "post_id": 51951691, "comment_id": 90854835, "body": "the language in the question is <code>C</code>. Although I agree with you that C++ makes your life easier (until it doesn&#39;t) , suggesting to change the language is a little presumptuous. There are perfectly valid applications for the <code>C</code> language where changing the language itself is not practical or blatantly impossible."}], "tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": false, "score": 0, "last_activity_date": 1534864072, "creation_date": 1534864072, "answer_id": 51951691, "question_id": 51951546, "link": "https://stackoverflow.com/questions/51951546/what-s-wrong-with-this-code-to-reverse-a-string-if-swap-fuction-is-created-with/51951691#51951691", "title": "What\u2019s wrong with this code to reverse a string, if swap fuction is created without using the &quot;temp&quot; variable?", "body": "<p>It does not work because you cannot use this code:</p>\n\n<pre><code>string[i] = string[i] + string[j];  //i = i + j\nstring[j] = string[i] - string[j];  //j = i + j - j = i\nstring[i] = string[i] - string[j];  //i = i + j - i = j\n</code></pre>\n\n<p>to swap the value of the variable with itself, since it's the same variable, not two different variables, and the value gets overwritten.</p>\n\n<p>I would strongly recommend you start using C++, and use <code>std::swap()</code> every time you need something to be swapped =)</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1534864175, "creation_date": 1534864175, "answer_id": 51951720, "question_id": 51951546, "link": "https://stackoverflow.com/questions/51951546/what-s-wrong-with-this-code-to-reverse-a-string-if-swap-fuction-is-created-with/51951720#51951720", "title": "What\u2019s wrong with this code to reverse a string, if swap fuction is created without using the &quot;temp&quot; variable?", "body": "<p>The version of the swap function without a temp depends on the two indexes being different from each other.</p>\n\n<p>Suppose <code>i</code> and <code>j</code> are the same.  You then effectively have the following:</p>\n\n<pre><code>string[i] = string[i] + string[i];  // string[i] is now 2 * string[i]\nstring[i] = string[i] - string[i];  // string[i] is now always 0\nstring[i] = string[i] - string[i];  // still 0\n</code></pre>\n\n<p>So swapping an element with itself will zero it out.</p>\n\n<p>Now looking at the loop in <code>reverseString</code> when you use <code>i &lt; (strlen(string) / 2)</code> as your condition.  If the length of the string is odd, the loop stops before reaching the middle element, so swapping an element with itself doesn't happen.  </p>\n\n<p>But when <code>i &lt;= ((strlen(string) - 1) / 2)</code> is your condition, the loop <em>does</em> operate on the middle element which subsequently gets swapped with itself and gets zeroed out.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1534865548, "last_edit_date": 1534865548, "creation_date": 1534864974, "answer_id": 51951975, "question_id": 51951546, "link": "https://stackoverflow.com/questions/51951546/what-s-wrong-with-this-code-to-reverse-a-string-if-swap-fuction-is-created-with/51951975#51951975", "title": "What\u2019s wrong with this code to reverse a string, if swap fuction is created without using the &quot;temp&quot; variable?", "body": "<p>I would suggest less <code>strlen</code> calls. Your code it IMO too complicated</p>\n\n<pre><code>char *reverse(char *str) \n{\n    char *saved = str;\n    size_t len = strlen(str);\n    char *end = str + len - 1; \n\n    for(size_t index = 0; index &lt; len / 2; index++)\n    {\n        char tmp = *str;\n        *str++ = *end;\n        *end -- = tmp;\n    }\n    return saved; \n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>char *reverse1(char *str)\n{\n    char *saved = str;\n    size_t len = strlen(str);\n    char *end = str + len - 1; \n\n    while(str &lt; end)\n    {\n        char tmp = *str;\n        *str++ = *end;\n        *end -- = tmp;\n    }\n    return saved;\n}\n</code></pre>\n\n<p>why to return <code>char *</code> instead of <code>void</code>. it allows you yo use the functions directly in another operations. For example:</p>\n\n<pre><code>char str[] = \"Hello World\";\n\nprintf(\"%s\\n\", reverse(str));\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7920332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70120e97d87a1af2b9912b57e76102f2?s=128&d=identicon&r=PG&f=1", "display_name": "JustStartedCoding", "link": "https://stackoverflow.com/users/7920332/juststartedcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 51951720, "answer_count": 3, "score": 0, "last_activity_date": 1534865548, "creation_date": 1534863655, "question_id": 51951546, "link": "https://stackoverflow.com/questions/51951546/what-s-wrong-with-this-code-to-reverse-a-string-if-swap-fuction-is-created-with", "title": "What\u2019s wrong with this code to reverse a string, if swap fuction is created without using the &quot;temp&quot; variable?", "body": "<pre><code>/*implementation of strrev i.e. string reverse function*/\n\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\n/*length of the string i.e. cells in the string*/\nstatic const unsigned int MAX_LENGTH = 100;\n//static const int MAX_LENGTH = -100;\n\n/*reverses the string*/\nvoid reverseString(char[]);\n/*swaps the elements in the cells of a string*/\nvoid swap(char[], int, int);\n\n/*runs the program*/\nint main()\n{\n    char string[MAX_LENGTH];\n    //char string[0];  //no error!\n    //char string[-1]; //error! \n\n    gets(string);\n    reverseString(string);\n    printf(\"\\n%s\", string);\n\n    return 0;\n}\n\nvoid reverseString(char string[])\n{\n    int i;\n    for(i = 0; i &lt; (strlen(string) / 2); i++)\n    //for(i = 0; i &lt;= ((strlen(string) - 1) / 2); i++)\n    {\n        swap(string, i, (strlen(string) - 1 - i));\n    }\n}\n\nvoid swap(char string[], int i, int j)\n{\n    int temp = string[i];\n    string[i] = string[j];\n    string[j] = temp;\n    /*     \n    string[i] = string[i] + string[j];  //i = i + j\n    string[j] = string[i] - string[j];  //j = i + j - j = i\n    string[i] = string[i] - string[j];  //i = i + j - i = j\n    */\n}\n</code></pre>\n\n<p>Look at the \"reverseString\" and \"swap\" functions. The current code works perfectly. If the swap function is rewritten by using no \"temp\" variable, code still runs smoothly.</p>\n\n<p>However if the \"for\" line in \"reverseString\" function is replaced with the code just below it (commented using single-line comment), the code doesn't work for single character strings if modified swap function (without temp) is used, but works if original swap function (with temp) is used.</p>\n\n<p>Why is this behavior seen?</p>\n"}, {"tags": ["c", "goto"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1534863230, "post_id": 51951413, "comment_id": 90852996, "body": "You haven&#39;t reset <code>length</code> after the jump to <code>line:</code> only once, beforehand. So if the first string entered had length <code>6</code> then the second string will have a length <code>6</code> more than it actually has, and so on."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 3, "creation_date": 1534863259, "post_id": 51951413, "comment_id": 90853015, "body": "<code>char str[10]</code> can&#39;t hold a string of length 10, since in C strings are null-terminated."}, {"owner": {"reputation": 421, "user_id": 1924261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2f856227c3dc145ddc85f5edbab56?s=128&d=identicon&r=PG", "display_name": "kingW3", "link": "https://stackoverflow.com/users/1924261/kingw3"}, "edited": false, "score": 1, "creation_date": 1534863385, "post_id": 51951413, "comment_id": 90853098, "body": "scanf writes 10 chars to your char array and doesn&#39;t have place for the terminating zero."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1534863545, "post_id": 51951413, "comment_id": 90853216, "body": "@Sayantani please read comments 2 and 3. What did you expect to happen after entering a 16-character string? The <i>is</i> stack-smashing."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534864765, "post_id": 51951413, "comment_id": 90854009, "body": "Using goto to jump non-conditionally upwards is considered bad programming and spaghetti code. You should replace it with while/do-while."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1534865816, "post_id": 51951413, "comment_id": 90854636, "body": "His <code>goto</code> is conditional, not unconditional, @Lundin.  But I personally adopt a stronger position than yours: using <code>goto</code> to jump backward is poor form regardless of context.  In any case, there is no good reason for this particular code to use <code>goto</code> instead of one of the structured looping constructs."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1534946487, "post_id": 51951413, "comment_id": 90887493, "body": "You might want to use <code>strlen</code> instead of this not-really-correct-or-safe method of calculating the string length."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6513029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29723089558245ec47cf589a24eeb74d?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/6513029/null"}, "edited": false, "score": 0, "creation_date": 1534873427, "post_id": 51951545, "comment_id": 90858507, "body": "Initially what I planned for is : to accept user input string of any unspecified length and print out the length and then if it goes beyond length = 10, then show some kind of error message but then being a beginner I didn&#39;t know how to accept input string of any length from user."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1534863653, "creation_date": 1534863653, "answer_id": 51951545, "question_id": 51951413, "link": "https://stackoverflow.com/questions/51951413/c-goto-command-creating-infinite-loop/51951545#51951545", "title": "C GOTO command creating infinite loop", "body": "<p>You are not properly restricting how many characters the user can enter.</p>\n\n<p>The array <code>str</code> can hold 10 bytes, but the call to <code>scanf</code> doesn't restrict the user from entering more characters.  As a result, it is possible to write past the end of the array if too many characters are entered.  This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>, which in this case causes the code to crash.</p>\n\n<p>You need to change the format specifier to <code>scanf</code> to allow a maximum of 9 characters (because you need to save 1 byte for the null terminating character):</p>\n\n<pre><code>scanf(\"%9[A-Za-z]\", str);\n</code></pre>\n\n<p>You can then get rid of the length check (and the associated <code>goto</code>) since a string of 10 or longer can no longer be entered.</p>\n\n<p>If you want the user to be able to enter up to 10 characters, you need increase the size of <code>str</code> to 11.</p>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 6513029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29723089558245ec47cf589a24eeb74d?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/6513029/null"}, "edited": false, "score": 0, "creation_date": 1534873142, "post_id": 51953254, "comment_id": 90858378, "body": "Thank you for such an elaborate answer. What if I print a string like : &quot;abbh23&quot; and I want not to consider the first 4 letters i.e &quot;abbh&quot; but to print some kind of error message that I want a proper input string with only alphabets [A-Za-z] ?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 133, "user_id": 6513029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29723089558245ec47cf589a24eeb74d?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/6513029/null"}, "edited": false, "score": 0, "creation_date": 1534877535, "post_id": 51953254, "comment_id": 90860488, "body": "@Sayantani: You could use the <code>%[</code> conversion specifier - <code>%[A-Za-z]</code> (note no trailing <code>s</code>).  In my code above, you&#39;d replace <code>STR(s)</code> with <code>STR([A-Za-z])</code>.  That will tell <code>scanf</code> to stop reading at the first character that isn&#39;t alphabetic.  So if you enter a string that&#39;s 10 characters long, but the last character is a digit, then <code>scanf</code> will only read 9 characters into <code>str</code>."}, {"owner": {"reputation": 133, "user_id": 6513029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29723089558245ec47cf589a24eeb74d?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/6513029/null"}, "edited": false, "score": 0, "creation_date": 1534906491, "post_id": 51953254, "comment_id": 90868828, "body": "No I want to print error message when it encounters the first numeric (or anything that isn&#39;t [A-Za-z] ) while reading the string."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 133, "user_id": 6513029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29723089558245ec47cf589a24eeb74d?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/6513029/null"}, "edited": false, "score": 0, "creation_date": 1534945230, "post_id": 51953254, "comment_id": 90886666, "body": "@Sayantani: Ah.  Okay.  In that case, you&#39;d use the <code>%s</code> conversion specifier as mentioned above to read into <code>str</code>.  Then you&#39;d do the length check as above.  Then you&#39;d use the oh-so-intuitively-named <a href=\"http://pubs.opengroup.org/onlinepubs/009695299/functions/strpbrk.html\" rel=\"nofollow noreferrer\">strpbrk</a> function to check for non-alpha characters - <code>if ( strpbrk( str, &quot;0123456789&quot; ) ) { printf( &quot;Input is not strictly alphabetic\\n&quot; );</code> ."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1534946387, "last_edit_date": 1534946387, "creation_date": 1534869784, "answer_id": 51953254, "question_id": 51951413, "link": "https://stackoverflow.com/questions/51951413/c-goto-command-creating-infinite-loop/51953254#51953254", "title": "C GOTO command creating infinite loop", "body": "<p>To hold a 10-character string, <code>str</code> needs to be <em>at least</em> 11 elements wide:</p>\n\n<pre><code>char str[11]; // holds up to 10 characters plus 0 terminator\n</code></pre>\n\n<p>Unfortunately, the <code>%s</code> specifier doesn't know how big the target buffer is - if you enter more characters than the target buffer is sized to hold, those extra characters will be written past the end of the buffer, potentially clobbering important data.  If you want to limit the number of characters read from the input stream into <code>str</code>, then you can add a field width to the format:</p>\n\n<pre><code>scanf( \"%10s\", str );\n</code></pre>\n\n<p>Unfortunately, unlike <code>printf</code>, you can't specify the field with as an argument - it must be hardcoded into the format string.  There is a way around it using macros:</p>\n\n<pre><code>#define MAX_INPUT_LENGTH 10 // or whatever value\n#define STR(x) #x           // \"stringify\" the argument           \n#define EXP(x) STR(x)       // expand and then stringify the argument\n\n#define FMT STR(%) EXP(MAX_INPUT_LENGTH) STR(s) // will expand to \"%\" \"10\" \"s\"\n</code></pre>\n\n<p>So you can write</p>\n\n<pre><code>char str[MAX_INPUT_LENGTH + 1]; // +1 for terminator\nscanf( FMT, str );\n</code></pre>\n\n<p>and not worry about writing past end of <code>str</code>.  </p>\n\n<p>Now, about that <code>goto</code>...</p>\n\n<p>There is a <em>much</em> better way to do this that doesn't use <code>goto</code> at all, and is a little easier to follow:</p>\n\n<pre><code>#include &lt;string.h&gt; // for strlen\n...\nchar str[MAX_INPUT_LENGTH + 1];\nsize_t len = 0;\ndo\n{\n  printf( \"Enter a string that's 10 characters long: \" );\n  scanf( FMT, str );\n} while ( strlen( str ) != 10 );\n</code></pre>\n\n<p>Now, as written, this has a few problems.  First, if you enter more than <code>MAX_INPUT_LENGTH</code> characters, the unread characters are left in the input stream, ready to foul up the next read.  You would probably want to clear out any unread characters before asking for more:</p>\n\n<pre><code>do\n{\n  printf( \"Enter a string that's 10 characters long: \" );\n  scanf( FMT, str );\n  while ( getchar() != '\\n' ) // consume unread characters up to the newline\n    ; // empty loop \n} while ( strlen( str ) != 10 );\n</code></pre>\n\n<p>After <code>scanf</code> reads <code>MAX_INPUT_LENGTH</code> characters into <code>str</code>, it then scrubs any extra characters up to the newline character.  </p>\n\n<p>But there's one more problem - you won't get a friendly error message if the string length isn't right - you'll just get the original prompt again.  If you want to write the error message, you'll need to do another check within the body of the <code>do</code> loop:</p>\n\n<pre><code>do\n{\n  printf( \"Enter a string that's 10 characters long: \" );\n  scanf( FMT, str );\n  while ( getchar() != '\\n' )\n    ; // empty loop\n  if ( strlen( str ) != 10 )\n    printf( \"Input is not the right length, try again.\\n\" );\n} while ( strlen( str ) != 10 );\n</code></pre>\n\n<p>Calling <code>strlen</code> twice is a bit ugly, so we can save the result of the first <code>strlen</code> call to use again.  To use it as part of the loop control expression, it must be declared outside of the loop body:</p>\n\n<pre><code>size_t len = 0;\ndo\n{\n  printf( \"Enter a string that's 10 characters long: \" );\n  scanf( FMT, str );\n  while ( getchar() != '\\n' )\n    ; // empty loop\n  if ( (len = strlen( str )) != 10 ) // assign as part of the check\n    printf( \"Input is not the right length, try again.\\n\" );\n} while ( len != 10 );\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Should have mentioned, you can avoid the buffer overflow concerns and macro trickery by using <code>fgets</code> instead of <code>scanf</code>:</p>\n\n<pre><code>size_t len = 0;\ndo\n{\n  printf( \"Enter a string that's 10 characters long: \" );\n  if ( fgets( str, sizeof str, stdin ) )\n  {\n    while ( getchar() != '\\n' )\n      ; // empty loop\n    if ( (len = strlen( str )) != 10 ) // assign as part of the check\n      printf( \"Input is not the right length, try again.\\n\" );\n  }\n  else\n  {\n    // EOF or error on input, handle as appropriate\n  }\n} while ( len != 10 );\n</code></pre>\n\n<p>To check <code>str</code> for non-alphabetic input, use the <code>strpbrk</code> function:</p>\n\n<pre><code>#define NON_ALPHA \"0123456789!@#$%^&amp;*()-_=+[]{};:,.&lt;&gt;/?'\\\\|\\\"\";\n...\nsize_t len = 0;\nchar *non_alpha_ptr = NULL;\n\ndo\n{\n  printf( \"Enter a string that's 10 characters long: \" );\n  if ( fgets( str, sizeof str, stdin ) )\n  {\n    while ( getchar() != '\\n' )\n      ; // empty loop\n    if ( (len = strlen( str )) != 10 ) // assign as part of the check\n      printf( \"Input is not the right length, try again.\\n\" );\n    else if ( (non_alpha_ptr = strpbrk( str, NON_ALPHA ) ) )\n      printf( \"Input is not strictly alphabetic, try again.\\n\" );\n  }\n  else\n  {\n    // EOF or error on input, handle as appropriate\n  }\n} while ( len != 10 || non_alpha_ptr != NULL );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 6355229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83b6573aea6beaf9640d567bcfece1d?s=128&d=identicon&r=PG&f=1", "display_name": "onkar", "link": "https://stackoverflow.com/users/6355229/onkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1534872114, "last_edit_date": 1534872114, "creation_date": 1534871389, "answer_id": 51953653, "question_id": 51951413, "link": "https://stackoverflow.com/questions/51951413/c-goto-command-creating-infinite-loop/51953653#51953653", "title": "C GOTO command creating infinite loop", "body": "<p>Most important problem with your program is that you are allocating memory for\n10 <code>char</code>'s (10 bytes) in <code>str</code>, but <code>scanf</code> is storing 11 <code>char</code>'s (11 bytes) (10 <code>char</code>'s which you enter + 1 sentinel/delimiter char <code>'\\0'</code>, that it inserts). </p>\n\n<p>Hence the result of following line --</p>\n\n<pre><code>if (length != 10) \n</code></pre>\n\n<p><strong>can be</strong> true the first time even if you enter only 10 <code>char</code>'s, and once it gets <strong>true</strong> for the first time, there is no looking back and <code>length</code> is only going to increase as there is nothing that decreases <code>length</code> in the <code>goto</code> loop. Hence the <code>goto</code> loop will loop forever.</p>\n"}], "owner": {"reputation": 133, "user_id": 6513029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29723089558245ec47cf589a24eeb74d?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/6513029/null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1534946387, "creation_date": 1534863144, "question_id": 51951413, "link": "https://stackoverflow.com/questions/51951413/c-goto-command-creating-infinite-loop", "title": "C GOTO command creating infinite loop", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char str[10];int i,length=0;\n    line:\n    { \n        printf(\"Enter string of length 10 \\n\");\n        scanf(\"%[A-Za-z]s\", str);\n    }\n    for (i=0; str[i] != '\\0'; i++)\n    {\n        length++;\n    }\n    if (length != 10)\n    {\n        printf(\"Length of string is : %d \\n Give a string of length 10 please \\n\", length);\n        goto line;\n    }\n    else \n    {\n        printf(\"length = %d \\n\", length);\n        printf(\"Your String is: %s\", str);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>If the user inputs a string of length not equal to 10, then my expected output should be : printing out \"Enter string o length 10\" and waiting for the user to input another string and then check it's length. </p>\n\n<p>I have removed Goto statement and checked for string of length not equal to 10, it does compute the length and outputs it, something like this :</p>\n\n<pre><code>Enter string of length 10 \ndciciibiyciyigiy\nLength of string is : 16 \nGive a string of length 10 please. \n*** stack smashing detected ***: ./palindrome.out terminated\nAborted (core dumped)\n</code></pre>\n\n<p>I have done similar Goto command execution in some other code elsewhere, but for this one : if I try to input a string of length not equal to 10, it shows the length and then goes into an infinite loop o printing something like this :</p>\n\n<pre><code>...\nLength of string is : 428115 \nGive a string of length 10 please. \nEnter string of length 10 \nLength of string is : 428130 \nGive a string of length 10 please. \nEnter string of length 10 \nLength of string is : 428145 \nGive a string of length 10 please. \n...\n</code></pre>\n\n<p>and so on. I do not understand what am I doing wrong?</p>\n"}, {"tags": ["c", "netbeans", "makefile", "cygwin", "cunit"], "comments": [{"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1534881518, "post_id": 51950357, "comment_id": 90862228, "body": "Netbeans is NOT a cygwin program so it could mess the cygwin ambient and it is likely the cause of missing output. Have you tried to run the test outside Netbeans ?"}, {"owner": {"reputation": 275, "user_id": 5936575, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/4472535098bd9e500ba4e06a42bd813f?s=128&d=identicon&r=PG&f=1", "display_name": "Vik78", "link": "https://stackoverflow.com/users/5936575/vik78"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1535211571, "post_id": 51950357, "comment_id": 90987734, "body": "Yes, and when I run the same makefile line and then the .exe it seems to work. That&#39;s a shame, considering they give instructions on their website for installing Netbeans with Cygwin. Would you recommend a better IDE for C and Cygwin?"}], "owner": {"reputation": 275, "user_id": 5936575, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/4472535098bd9e500ba4e06a42bd813f?s=128&d=identicon&r=PG&f=1", "display_name": "Vik78", "link": "https://stackoverflow.com/users/5936575/vik78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534860119, "creation_date": 1534859743, "last_edit_date": 1534860119, "question_id": 51950357, "link": "https://stackoverflow.com/questions/51950357/netbeans-8-2-cygwin-broken-pipe-error-while-running-cunit-tests", "title": "Netbeans 8.2/Cygwin: Broken pipe error while running CUnit tests", "body": "<p>If I create a new C11 application in Netbeans (with auto-generated makefile), add a dummy function to its main.c file that just returns 0, add a test to the function, and run the test via Netbeans from the test folder, I get the following error:</p>\n\n<pre><code>make: *** [nbproject/Makefile-impl.mk:73: .test-impl] Broken pipe\n</code></pre>\n\n<p>However, when I debug the test, it works properly. I get varying results when testing the whole project-- sometimes the output ends with the following message:</p>\n\n<pre><code>CUnit - A unit testing framework for C - Version 2.1-3\n     http://cunit.sourceforge.net/\n</code></pre>\n\n<p>And sometimes I get the same error. Regardless the actual test results don't get output. Although if I close Netbeans and reopen, the first time I try to test the project the results are displayed correctly, although not any of the subsequent tries.</p>\n\n<p>Any idea what this could be?</p>\n\n<p>This is using CUnit 2.1.3-1, make 4.2.1-2, and gdb 7.12.1-2, all in cygwin 2.10.0 running on Windows 10.</p>\n\n<p>Here's lines 71-73 of the makefile it's referring to, if that helps:</p>\n\n<pre><code>.test-impl: .build-tests-impl .test-pre\n    @#echo \"=&gt; Running $@... Configuration=$(CONF)\"\n    \"${MAKE}\" -f nbproject/Makefile-${CONF}.mk SUBPROJECTS=${SUBPROJECTS} .test-conf\n</code></pre>\n\n<p>Of course I can provide more of that file if needed, although you should get the same one if you reproduce the steps that led me to the error.</p>\n"}, {"tags": ["c", "file", "text", "copy", "calloc"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10186397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248a947d0b88664a8ec9a6dada37c05b?s=128&d=identicon&r=PG&f=1", "display_name": "S.NewUser", "link": "https://stackoverflow.com/users/10186397/s-newuser"}, "edited": false, "score": 0, "creation_date": 1534859902, "post_id": 51950082, "comment_id": 90850805, "body": "&quot;When you do char xdest[sizeof(buffer)]; you get a buffer the size of a char* pointer (likely 4 bytes), not a buffer the size of what you allocated with malloc.&quot;  I tried:      xdest[numbytes];      ydest[numbytes];  this didnt work.  I then tried to tried using malloc on xptr and yptr and this didnt work either.  Am I doing something wrong?"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1534858828, "creation_date": 1534858828, "answer_id": 51950082, "question_id": 51949991, "link": "https://stackoverflow.com/questions/51949991/using-data-stored-in-calloc-buffer/51950082#51950082", "title": "Using data stored in calloc buffer", "body": "<p>In the normal case, <code>sizeof</code> is a compile-time evaluation. It cannot be used as some sort of run-time function to get the size of allocated memory.</p>\n\n<p>When you do <code>char xdest[sizeof(buffer)];</code> you get a buffer the size of a <code>char*</code> pointer (likely 4 bytes), not a buffer the size of what you allocated with malloc.</p>\n\n<p>You need to keep track of the allocated memory with a variable. If more than one buffer should have the same size, as determined in run-time, the malloc all of them.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10235911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64369ae7a70ba2d7596683051fe2a7e9?s=128&d=identicon&r=PG&f=1", "display_name": "M. Owais", "link": "https://stackoverflow.com/users/10235911/m-owais"}, "is_accepted": false, "score": 0, "last_activity_date": 1534860007, "creation_date": 1534860007, "answer_id": 51950437, "question_id": 51949991, "link": "https://stackoverflow.com/questions/51949991/using-data-stored-in-calloc-buffer/51950437#51950437", "title": "Using data stored in calloc buffer", "body": "<p>Try reorganizing the code a bit first in my opinion.</p>\n\n<ol>\n<li>Find pointer to '(' using strstr(). </li>\n<li>Now look for next pointer to ')' </li>\n<li>The string in between '(' and ')' is a XY point. Parse it to fill your arrays.  </li>\n<li>Copy pointer of ')' to '('</li>\n</ol>\n\n<p>Continue 1,2,3,4 in loop till no more references to '(' in input.</p>\n\n<p>If you want to use same structure then use different iteration counter</p>\n\n<pre><code>char* it = buffer;\nfor (int i = 0; i &lt; numbytes ; i++) \n{\n  if (it[i] == ',') \n  {\n    ...\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10186397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248a947d0b88664a8ec9a6dada37c05b?s=128&d=identicon&r=PG&f=1", "display_name": "S.NewUser", "link": "https://stackoverflow.com/users/10186397/s-newuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1534860007, "creation_date": 1534858536, "question_id": 51949991, "link": "https://stackoverflow.com/questions/51949991/using-data-stored-in-calloc-buffer", "title": "Using data stored in calloc buffer", "body": "<p>I was wondering if someone could explain how I can use the data stored in a dynamically allocated memory buffer.</p>\n\n<p>My aim is to read a text file, store this in said buffer (which works). Then loop through this buffer to gather and store the desired info in arrays.</p>\n\n<p>The aim of my program is to take the desired info from a text file and store the information, coordinates, in respective x and y arrays.</p>\n\n<p>The program worked perfectly fine with a const char array, shown below:</p>\n\n<pre><code>const char buffer[] =\n\"I have(60438.0,63493.0)loads of(-2100.0,63493.0) stuff \"\n\"(87659.0,55553.0)to copy (-70048.0,-61111.0) to strings.\";\n</code></pre>\n\n<p>I wish to move past this now.</p>\n\n<p>I can see that buffer is pointing to the location in memory.. how do I use this data?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar *buffer;\n\n#define buffer_begin (buffer)\n#define buffer_end (buffer + sizeof(buffer))\n\n/*global variables*/\nconst char a = '(';\nconst char b = ')';\nint i = 1;\nlong pos = 0;\nFILE* file;\nlong numbytes;\n\nchar xdest[sizeof(buffer)];\nchar ydest[sizeof(buffer)];\n\nstatic char* copy_itx(const char* base, size_t len, char* out) {\n    memcpy(out, base, len); // copy from 'base' of length 'last-first' to xptr\n    out[len] = '\\0';        // set everything after \n    return out + len + 1;\n}\n\nstatic char* copy_ity(const char* base, size_t len, char* out) {\n    memcpy(out, base, len);\n    out[len] = '\\0';\n    return out + len + 1;\n}\n\n/*main function*/\nint main() {\n\n    // read txt file and store in calloc buffer\n\n    file = fopen(\"instance_info.txt\",\"r\"); /*open file*/\n\n        if(file == NULL)/* quit if the file does not exist */\n            return -1;\n\n    fseek(file, 0L, SEEK_END); /* Get the number of bytes */\n    numbytes = ftell(file);     \n\n    fseek(file, 0L, SEEK_SET);  /* reset the file position indicator to \n                                the beginning of the file */\n\n    buffer = (char*)calloc(numbytes, sizeof(char)); /* grab sufficient memory for the \n                                                       buffer to hold the text, \n                                                       calloc clears all rubbish memory values */\nif(buffer == NULL){ /* memory error */\n    perror(\"%s\");\n    return -1;\n}\n\nfread(buffer, sizeof(char), numbytes, file); /* copy all the text into the buffer, \n                                                reads 'numbytes' number of chars  */        \nfclose(file); //close the file\n\nprintf(\"%s\", buffer); \n\ni=0;\nchar* xptr = xdest;\nchar* yptr = ydest;\nconst char* first = NULL;\nconst char* last = NULL;\n\n// GET X CORDS HERE\n\nprintf(\"\\n\");\nprintf(\"x cords:\\n\");\n\nfor (const char* it = buffer_begin; it != buffer_end; it++) { // for loop to iterate through buffer\n\n    if (*it == '(') {   // if char pointer *it is '('\n\n        first = it + 1; // set first char equal to open bracket\n        last  = NULL;   // ensure last char still equal to a NULL char\n\n    }\n\n    if (*it == ',' &amp;&amp; first != NULL) {  // if const char pointer *it is equal to ',' \n                                        //and first char isnt pointing to NULL\n\n      last = it;        //set last char equal to current position\n      char* next = copy_itx(first, last-first, xptr);   // call copy_itx function\n      printf(\"%d: %s\\n\", i++, xptr);    // print char stored at xptr\n      first = NULL;     // set first char back to NULL\n      xptr = next;      // assign char pointer next to xptr\n\n    }\n\n}\n\n\n// GET Y CORDS HERE\n\nprintf(\"\\n\");\nprintf(\"y cords:\\n\");\ni=0;\n\nfor (const char* it = buffer_begin; it != buffer_end; it++) {\n    if (*it == ',') {\n        first = it + 1;\n        last  = NULL;\n    }\n    if (*it == ')' &amp;&amp; first != NULL) {\n        last = it;\n        char* next = copy_ity(first, last-first, yptr);\n        printf(\"%d: %s\\n\", i++, yptr);\n        first = NULL;\n        yptr = next;\n    }\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n\n<p>Thanks</p>\n"}]