[{"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449100584, "post_id": 34055309, "comment_id": 55864935, "body": "what is <code>Dictionary</code> ?"}, {"owner": {"reputation": 25, "user_id": 5629354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a2d2e7bb093c1c70a8b02bb72debbb?s=128&d=identicon&r=PG&f=1", "display_name": "jay", "link": "https://stackoverflow.com/users/5629354/jay"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449101122, "post_id": 34055309, "comment_id": 55865082, "body": "Sorry, I edited it to add the definition."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1449101165, "post_id": 34055309, "comment_id": 55865096, "body": "<code>malloc(sizeof(Dictionary)</code> allocates the wrong amount of space. You can avoid this sort of error by using the pattern <code>new_table = malloc( sizeof *new_table );</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1449101200, "post_id": 34055309, "comment_id": 55865109, "body": "Pointer typedefs make the code harder to read; normally if someone sees a function taking <code>Foo</code> as parameter, they assume it&#39;s passing by value ."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1449101464, "post_id": 34055309, "comment_id": 55865190, "body": "You have a potential memory leak if the first malloc succeeds but the second one fails."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5629354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a2d2e7bb093c1c70a8b02bb72debbb?s=128&d=identicon&r=PG&f=1", "display_name": "jay", "link": "https://stackoverflow.com/users/5629354/jay"}, "edited": false, "score": 0, "creation_date": 1449100973, "post_id": 34055371, "comment_id": 55865044, "body": "I got rid of the struct, but now I get this error in the header file &quot;error: unknown type name &quot;entry&quot;&quot;"}, {"owner": {"reputation": 25, "user_id": 5629354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a2d2e7bb093c1c70a8b02bb72debbb?s=128&d=identicon&r=PG&f=1", "display_name": "jay", "link": "https://stackoverflow.com/users/5629354/jay"}, "edited": false, "score": 0, "creation_date": 1449101175, "post_id": 34055371, "comment_id": 55865100, "body": "No, I only got rid of the specific one you mentioned above."}, {"owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "reply_to_user": {"reputation": 25, "user_id": 5629354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a2d2e7bb093c1c70a8b02bb72debbb?s=128&d=identicon&r=PG&f=1", "display_name": "jay", "link": "https://stackoverflow.com/users/5629354/jay"}, "edited": false, "score": 0, "creation_date": 1449101230, "post_id": 34055371, "comment_id": 55865119, "body": "Yes, this in fact makes sense, because by the time you declare <code>next</code> <code>entry</code> is not defined yet. I will update my answer in a second."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449102744, "post_id": 34055371, "comment_id": 55865540, "body": "Also fix the bug on the <code>Dictionary</code> allocation."}], "tags": [], "owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "is_accepted": true, "score": 4, "last_activity_date": 1449101336, "last_edit_date": 1449101336, "creation_date": 1449100308, "answer_id": 34055371, "question_id": 34055309, "link": "https://stackoverflow.com/questions/34055309/many-assignments-from-incompatible-pointer-type-c/34055371#34055371", "title": "Many assignments from incompatible pointer type C", "body": "<p>If you declare your struct as:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct entry { ... };\n</code></pre>\n\n<p>Then you should use it as</p>\n\n\n\n<pre><code>struct entry* next;\n</code></pre>\n\n<p>If you declare it as:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct { ... } entry;\n</code></pre>\n\n<p>Then you should use it as</p>\n\n\n\n<pre><code>entry* next;\n</code></pre>\n\n<p>In this case <code>struct entry* next</code> will still compile (as in your case), but will refer to an incomplete type, which is <strong>not</strong> the <code>entry</code> that you defined. Assigning from something that is <code>entry*</code> to something that is <code>struct entry*</code> will, therefore, give you an error.</p>\n\n<p>To fix your problem just replace all occurrences of <code>struct entry</code> with <code>entry</code>.</p>\n\n<p>UPDATE: it will not work, because by the time you define <code>entry* next</code> <code>entry</code> itself is not defined yet. You can fix it like this, for example:</p>\n\n<pre><code> typedef struct entry_t {\n   char * word;\n   char * defn;\n   struct entry_t *next;\n } entry;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5629354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a2d2e7bb093c1c70a8b02bb72debbb?s=128&d=identicon&r=PG&f=1", "display_name": "jay", "link": "https://stackoverflow.com/users/5629354/jay"}, "edited": false, "score": 0, "creation_date": 1449100914, "post_id": 34055439, "comment_id": 55865031, "body": "Sorry, I forgot the line where I define Dictionary in the header file. I just added it."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1449101107, "last_edit_date": 1449101107, "creation_date": 1449100712, "answer_id": 34055439, "question_id": 34055309, "link": "https://stackoverflow.com/questions/34055309/many-assignments-from-incompatible-pointer-type-c/34055439#34055439", "title": "Many assignments from incompatible pointer type C", "body": "<p>Beside other problems, <code>Dictionary</code> is not defined.  From how you use it, I am guessing it is a <code>typedef</code> for a pointer to a <code>hashTable</code>.  The allocation is wrong, you allocate the size for a pointer, not for the <code>hashTable</code> structure. You should write:</p>\n\n<pre><code>Dictionary new_table = malloc(sizeof(*new_table));\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5629354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a2d2e7bb093c1c70a8b02bb72debbb?s=128&d=identicon&r=PG&f=1", "display_name": "jay", "link": "https://stackoverflow.com/users/5629354/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 34055371, "answer_count": 2, "score": 2, "last_activity_date": 1449101336, "creation_date": 1449099944, "last_edit_date": 1449100857, "question_id": 34055309, "link": "https://stackoverflow.com/questions/34055309/many-assignments-from-incompatible-pointer-type-c", "title": "Many assignments from incompatible pointer type C", "body": "<p>I'm pretty new to C, and I don't have a very good grasp of pointers. I'm trying to build a hash table. Here's what I have so far.</p>\n\n<p>I've been cobbling this together from several sources, and I've lost any idea I have of what the pointers are doing. If anyone could even give me a hint as to where my problem is I'd be very grateful. </p>\n\n<p>Header File</p>\n\n<pre><code> typedef struct {\n   char * word;\n   char * defn;\n   struct entry *next;\n } entry;\n\n\n typedef struct {\n   int size;\n   struct entry **table;\n } hashTable;\n\n typedef hashTable * Dictionary;\n</code></pre>\n\n<p>Code</p>\n\n<pre><code> #include \"hashP.h\"\n #include &lt;stdlib.h&gt;\n #include &lt;string.h&gt;\n #include &lt;limits.h&gt;\n\n\n Dictionary create(int initial_capacity, int delta_capacity){\n     Dictionary new_table;\n     int i;\n\n     if ((new_table = malloc(sizeof(Dictionary))) == NULL){\n         return NULL;\n     }\n\n     if ((new_table-&gt;table = malloc(sizeof(entry *) * initial_capacity)) == NULL){\n         return NULL;\n     }\n\n     for(i=0; i &lt; initial_capacity; i++){\n         new_table-&gt;table[i] = NULL;\n     }\n     return new_table;\n }\n\n\n /* Insert a key-value pair into a hash table. */\n void insertEntry(Dictionary table, char *index, char *value) {\n     int bin = 0;\n     entry *newpair = NULL;\n     entry *next = NULL;\n     entry *last = NULL;\n     unsigned long int hashval;\n     int i = 0;\n     char *word = index;\n     char *defn = value;\n\n     /* Convert our string to an integer */\n     while( hashval &lt; ULONG_MAX &amp;&amp; i &lt; strlen(word) ) {\n         hashval = hashval &lt;&lt; 8;\n         hashval += word[i];\n         i++;\n     }\n\n     bin = hashval % table-&gt;size;\n\n     next = table-&gt;table[bin];\n\n\n     while( next != NULL &amp;&amp; next-&gt;word != NULL &amp;&amp; strcmp(word, next-&gt;word ) &gt; 0 ) {\n         last = next;\n         next = next-&gt;next;\n     }\n\n     /* There's already a pair.  Let's replace that string. */\n     if( next != NULL &amp;&amp; next-&gt;word != NULL &amp;&amp; strcmp( word, next-&gt;word ) == 0 ) {\n\n         free( next-&gt;defn );\n         next-&gt;defn = strdup(defn);\n\n     /* Nope, could't find it.  Time to grow a pair. */\n     } else {\n\n         if( ( newpair = malloc( sizeof(entry) ) ) == NULL ) {\n             return NULL;\n         }\n\n         if( ( newpair-&gt;word = strdup(word) ) == NULL ) {\n             return NULL;\n         }\n\n         if( ( newpair-&gt;defn = strdup(defn) ) == NULL ) {\n             return NULL;\n         }\n\n         newpair-&gt;next = NULL;\n\n         /* We're at the start of the linked list in this bin. */\n         if( next == table-&gt;table[ bin ] ) {\n             newpair-&gt;next = next;\n             table-&gt;table[bin] = newpair;\n\n         /* We're at the end of the linked list in this bin. */\n         } else if ( next == NULL ) {\n             last-&gt;next = newpair;\n\n         /* We're in the middle of the list. */\n         } else  {\n             newpair-&gt;next = next;\n             last-&gt;next = newpair;\n         }\n     }\n }\n</code></pre>\n\n<p>Sorry for the huge wall of text. It gives me an \"Assignment from incompatible pointer type\" every time I use \"next\".</p>\n"}, {"tags": ["c", "linux", "gtk"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 1, "creation_date": 1449105021, "post_id": 34055179, "comment_id": 55866302, "body": "The latter is the preferred way; that is the purpose of the <code>user_data</code> parameter to signal functions, after all."}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1449136287, "post_id": 34055179, "comment_id": 55878579, "body": "why though, I never got the reason behind that"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1449157092, "post_id": 34055179, "comment_id": 55893113, "body": "What do you mean, why you need <code>user_data</code> parameters? Or are you confused about something else? And are you familiar with any other GUI toolkits besides GTK+ or programming languages other than C? (This last question may help me make explaining the situation easier.)"}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1449173268, "post_id": 34055179, "comment_id": 55903580, "body": "I meant why is declaring them globally something bad, I&#39;m familiar with Java and cpp, and I&#39;m familiar with no other gui toolkits"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 2, "creation_date": 1449174361, "post_id": 34055179, "comment_id": 55904195, "body": "Declaring them globally isn&#39;t <i>bad</i>. Rather, using the <code>user_data</code> is <i>idiomatic</i>. It&#39;s a bit harder since you have to manage the memory for the <code>user_data</code> yourself, but using <code>user_data</code> keeps your code modules more self-contained. You will need to decide what you want to do."}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1449175445, "post_id": 34055179, "comment_id": 55904794, "body": "perfect, just the answer I was looking for, thank you"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 1, "last_activity_date": 1499774681, "creation_date": 1499774681, "answer_id": 45034115, "question_id": 34055179, "link": "https://stackoverflow.com/questions/34055179/passing-gtkwidget-parameters/45034115#45034115", "title": "passing GtkWidget parameters", "body": "<blockquote>\n  <p>Which way is better for passing these parameters: - declaring the\n  parameters globally - passing the parameters as a struct to the first\n  function, and passing the struct members to the read_button_config\n  function?</p>\n</blockquote>\n\n<p>The latter is the preferred way; that is the purpose of the <code>user_data</code> parameter to signal functions, after all.<br>\nDeclaring them globally isn&#39;t <i>bad</i>. Rather, using the <code>user_data</code> is <i>idiomatic</i>. It&#39;s a bit harder since you have to manage the memory for the <code>user_data</code> yourself, but using <code>user_data</code> keeps your code modules more self-contained. You will need to decide what you want to do.\n                    &ndash;&nbsp;andlabs</p>\n"}], "owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499774681, "creation_date": 1449099365, "last_edit_date": 1449101146, "question_id": 34055179, "link": "https://stackoverflow.com/questions/34055179/passing-gtkwidget-parameters", "title": "passing GtkWidget parameters", "body": "<p>I have a function that is connected to the \"changed\" signal for a combobox in gtk, which in turn calls another function read_button_config.</p>\n\n<p>The read_button_config takes the main window, a combobox and a vcontainer which I had not declared globally as parameters</p>\n\n<p>Which way is better for passing these parameters:\n- declaring the parameters globally\n- passing the parameters as a struct to the first function, and passing the struct members to the read_button_config function?</p>\n\n<p>Please let me know why you think either is better, I want to know what is a better way for future development </p>\n"}, {"tags": ["c", "linux", "shared-libraries", "development-environment"], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 3369597, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LWx78.png?s=128&g=1", "display_name": "benaryorg", "link": "https://stackoverflow.com/users/3369597/benaryorg"}, "edited": false, "score": 0, "creation_date": 1449101953, "post_id": 34055606, "comment_id": 55865329, "body": "Thank you for you answer, but this is not exactly what I want, I want to be able to compile, deploy and run the application as if the library was installed on the system root, so I can be really sure everything works, but at the same time not trash my root filesystem."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 537, "user_id": 3369597, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LWx78.png?s=128&g=1", "display_name": "benaryorg", "link": "https://stackoverflow.com/users/3369597/benaryorg"}, "edited": false, "score": 0, "creation_date": 1449102582, "post_id": 34055606, "comment_id": 55865507, "body": "@benaryorg, in that case you need a VM or at least a chroot environment.  That requirement wasn&#39;t clear from your original question, or more likely my reading comprehension decreases with the amount of time I&#39;m awake :)."}, {"owner": {"reputation": 537, "user_id": 3369597, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LWx78.png?s=128&g=1", "display_name": "benaryorg", "link": "https://stackoverflow.com/users/3369597/benaryorg"}, "edited": false, "score": 0, "creation_date": 1449104731, "post_id": 34055606, "comment_id": 55866202, "body": "Well, that wouldn&#39;t be that much of a problem in my situation, but it just caught my attention because there seems to be just nothing in that direction. <a href=\"https://wiki.gentoo.org/wiki/Portage\" rel=\"nofollow noreferrer\">portage</a> uses a program called <code>sandbox</code> which uses <code>$LD_PRELOAD</code> to somehow grant or prevent access to specific directories, but sadly it doesn&#39;t support temporarily storing the data."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 537, "user_id": 3369597, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LWx78.png?s=128&g=1", "display_name": "benaryorg", "link": "https://stackoverflow.com/users/3369597/benaryorg"}, "edited": false, "score": 0, "creation_date": 1449105097, "post_id": 34055606, "comment_id": 55866322, "body": "$LD_PRELOAD, if I recall correctly, causes the specified library to be used first for symbol resolution.  I used it once to defeat some anti-debugging in a piece of code I was reverse engineering"}, {"owner": {"reputation": 537, "user_id": 3369597, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LWx78.png?s=128&g=1", "display_name": "benaryorg", "link": "https://stackoverflow.com/users/3369597/benaryorg"}, "edited": false, "score": 0, "creation_date": 1449122301, "post_id": 34055606, "comment_id": 55871461, "body": "Exactly. <code>sandbox</code> then overrides some functions for file access (I guess <code>fopen()</code> and <code>open()</code> or similar) so that it can check if it is allowed and if it is, it redirects to the real function, if not, it returns as if there was an error."}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 2, "last_activity_date": 1449101731, "creation_date": 1449101731, "answer_id": 34055606, "question_id": 34055140, "link": "https://stackoverflow.com/questions/34055140/virtual-environment-for-c-library-development/34055606#34055606", "title": "Virtual environment for C library development", "body": "<p>You don't really need to 'install' the library, you can work in the development tree.</p>\n\n<p>(1) for compilation all you need to do is use -I flag to specify where the libraries header files are, and this can be a relative path, for example in your case you could do -I../../library/include</p>\n\n<p>(2) for linking you need to tell the linker where the library is located at, you can use the -L flag append to the library search order.</p>\n\n<p>(3) for testing the application, you are correct that the application needs to be able to find the library.  You have a couple of options:</p>\n\n<p>(a) make sure the library and the executable are in the same directory </p>\n\n<p>(b) you can temporarily modify your <code>LD_LIBRARY_PATH</code>, in your current shell only, for testing:</p>\n\n<pre><code>     export LD_LIBRARY_PATH=abs_path_to_library:$LD_LIBRARY_PATH\n</code></pre>\n\n<p>note that this will only effect the current shell (command terminal) you are working in.  Any other shells you may have open, or open later will have your normal LD_LIBRARY_PATH.  I know you specified that you don't want to modify your PATH or LD_LIBRARY_PATH, but being local to the shell that the command is executed it is a nice, easy way to do this.</p>\n\n<p>(c) embed the path to the library in the client executable.  To do this you need to pass an option to the linker.  The command for gcc is:</p>\n\n<pre><code>     -Wl,-rpath,$(DEFAULT_LIB_INSTALL_PATH)\n</code></pre>\n\n<p>see <a href=\"http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN95\" rel=\"nofollow\">this how-to</a></p>\n"}], "owner": {"reputation": 537, "user_id": 3369597, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LWx78.png?s=128&g=1", "display_name": "benaryorg", "link": "https://stackoverflow.com/users/3369597/benaryorg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449102236, "creation_date": 1449099115, "last_edit_date": 1449102236, "question_id": 34055140, "link": "https://stackoverflow.com/questions/34055140/virtual-environment-for-c-library-development", "title": "Virtual environment for C library development", "body": "<h1>Original</h1>\n\n<p>I am looking for a way to create a non-isolated development environment for a C-library.</p>\n\n<p>I will most likely use <code>cmake</code> to build the library and my IDE is a simple text editor.</p>\n\n<p>The problem now is that I do not only create the library but also some sample \"applications\" using the library.\nTherefore I need to install the library's headers and the shared object (I'm using GNU/Linux) somewhere and I do not want to install it to <code>/usr/local/lib</code> or (the even worse) <code>/usr/lib</code>.</p>\n\n<p>Is there a way to create a virtual environment similar to python's pyvenv (and similar) where I can install the everything to but still have access to the host libraries?</p>\n\n<p>Also I do <strong>not</strong> want to rewrite my <code>$PATH</code>/<code>$LD_LIBRARY_PATH</code>, setup a VM, container, or chroot.</p>\n\n<p>The usage would then look like:</p>\n\n<pre><code># switch to environment somehow\nloadenv library1\n\n# for library\ncd library\nmake &amp;&amp; make install\n\n# for application\ncd ../application1\nmake &amp;&amp; ./application1\n</code></pre>\n\n<p>Is this possible?</p>\n\n<h1>Edit 1</h1>\n\n<p>So basically my directory structure will look like this:</p>\n\n<pre><code>library/\nlibrary/src/\nlibrary/src/&lt;files&gt;.c\nlibrary/include/&lt;files&gt;.h\napplication/\napplication/src/\napplication/src/&lt;files&gt;.c\n</code></pre>\n\n<p>First I need to compile the library and install the binary and header files.\nThese should be installed in a fake system-location.</p>\n\n<p>Then I can compile the application and run it.</p>\n\n<h1>Edit 2</h1>\n\n<p>I thought a bit about it and it seems all I need is a filesystem sandbox.\nSo basically I want to open up a shell where every write to disk is not committed to the filesystem but rather temporarily saved in e.g. a ramfs/tmpfs just to be dropped when the shell exits.</p>\n\n<p>This way I can exactly test how everything would behave if compiled, deployed and executed on the real machine without any danger to existing files or directories and without accidentally creating files or directories without cleaning them up.</p>\n"}, {"tags": ["c", "security", "file-access"], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449100915, "post_id": 34055401, "comment_id": 55865032, "body": "The reverse comparison scheme is inelegant and obsolete."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449102696, "post_id": 34055401, "comment_id": 55865529, "body": "@chqrlie it is the scheme that I&#39;ve always seen as a way to avoid TOCTTOU.  care to share a more elegant and modern scheme?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449102901, "post_id": 34055401, "comment_id": 55865594, "body": "Enable more compiler warnings. <code>gcc -Wall -W -Werror</code> or <code>clang -Weverything -Werror</code> prevent this and many more silly mistakes and typos.  The reverse comparison thing reduces readability IMHO."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449179039, "post_id": 34055401, "comment_id": 55906875, "body": "I think, the &quot;reverse comparison&quot; that @chqrlie talks about is this: <code>if(-1 != (fd = open(file, R_OK | W_OK)))</code>. A &quot;normal&quot; approach would be: <code>fd = open(file, R_OK | W_OK); if (fd != -1) { ....}</code>. Your solution itself for TOUTOC is good."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1449180393, "post_id": 34055401, "comment_id": 55907663, "body": "@BlueMoon: that&#39;s correct! funny it didn&#39;t even occur to me that we weren&#39;t talking about the same thing.  thurizas solution is a fine answer for the problem, and I upvoted it, but the style hurts my eyes.  Sorry to be so anal about this."}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": true, "score": 3, "last_activity_date": 1449100510, "creation_date": 1449100510, "answer_id": 34055401, "question_id": 34055100, "link": "https://stackoverflow.com/questions/34055100/update-a-file-securely-incase-of-symbolic-links-c/34055401#34055401", "title": "Update a file securely incase of symbolic links - C", "body": "<p>Assuming that your <code>access</code> function checks the file type and determines if the user has the appropriate privileges to manipulate the file, you are concerned about a potential TOCTTOU error between the call to <code>access</code> and the call to <code>open</code>.</p>\n\n<p>The typical way to avoid this would be:</p>\n\n<pre><code>int updatefile(char *file)\n{\n    int   fd = -1;\n\n    if(-1 != (fd = open(file, R_OK | W_OK)))\n    {\n         struct stat buf;\n\n         if(0 == fstat(fd, &amp;buf))\n         {\n             /* perform any necessary check on the here */\n             /* do what ever else you need to do */\n\n             /* write to the file here */\n\n             /* gain elevated permissions here */\n             /* do privileged task */\n             /* drop back to normal permissions here */\n\n             close(fd);\n         }\n         else\n         {\n             /* handle error stating the file */\n         }\n    }\n    else\n    {\n         /* handle error for not opening file */\n    }\n}\n</code></pre>\n\n<p>The reason that this works, is that we postpone doing any checks on the file till after we get a \"handle\" to the file.  We can tell if the user doesn't have the permissions to open the file by the value of <code>errno</code> in the outer else block;</p>\n\n<p>If we are able to get a \"handle\" to the file, we then can do what ever checks we want.  Because we maintain the \"handle\" from the time that we open the file, through when we perform our checks and finally when we use the file; a malicious would not be able to modify the file system between check and use.</p>\n\n<p>Hope this helps \nT. </p>\n"}], "owner": {"reputation": 901, "user_id": 3573539, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1v9R5.jpg?s=128&g=1", "display_name": "Jimbo Jones", "link": "https://stackoverflow.com/users/3573539/jimbo-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 34055401, "answer_count": 1, "score": 1, "last_activity_date": 1449101532, "creation_date": 1449098887, "last_edit_date": 1449101532, "question_id": 34055100, "link": "https://stackoverflow.com/questions/34055100/update-a-file-securely-incase-of-symbolic-links-c", "title": "Update a file securely incase of symbolic links - C", "body": "<p>I am wondering if anyone could assist me with this, I am try to figure out how to handle a time of check, time of use problem and drop privileges when they are not needed, in case the for example it is a symbolic link to the file which could be changed to say the shadow file. Assuming the function below is invoked while the calling process is running with elevated privileges.</p>\n\n<pre><code>int\nupdatefile(char *file)\n{\n  int fd;\n\n  if (access(file, R_OK|W_OK)) {\n    perror(\"access()\");\n    return (-1);\n  }\n\n  fd = open(file, O_RDWR);\n\n  /*\n   * file is written to here.\n   */\n\n  printf(\"Updated %s on...\\n\", file);\n  system(\"date\");\n\n  /*\n   * elevated privileges are required here...\n   */\n\n  return (0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1449097515, "post_id": 34054762, "comment_id": 55863803, "body": "What is <code>fp[i]</code> supposed to be?"}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 2, "creation_date": 1449097533, "post_id": 34054762, "comment_id": 55863812, "body": "why are you indexing fp?  It is not an array. <a href=\"http://www.cplusplus.com/reference/cstdio/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio</a>"}, {"owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "edited": false, "score": 2, "creation_date": 1449097540, "post_id": 34054762, "comment_id": 55863815, "body": "Have you read any documentation for <code>fopen</code> ?"}, {"owner": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 0, "creation_date": 1449097925, "post_id": 34054762, "comment_id": 55863981, "body": "fp is a file pointer. if you increment fp (i.e. fp[i]), you are moving that file pointer to point to another memory location and you would get some random value currently stored in the memory location. You might want to try <code>while (fgets (...))</code> which is the function you want to use if you are trying to stream the text from your text file."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449101649, "post_id": 34054762, "comment_id": 55865241, "body": "Do not post line numbered source code, it looks ugly and is a pain to compile."}], "answers": [{"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 3, "last_activity_date": 1449097699, "creation_date": 1449097699, "answer_id": 34054840, "question_id": 34054762, "link": "https://stackoverflow.com/questions/34054762/error-used-struct-type-value-where-scalar-is-required/34054840#34054840", "title": "error: used struct type value where scalar is required", "body": "<p><code>fp</code> is a <em>file pointer</em>,  not an array of whats in your file. <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fopen.htm\" rel=\"nofollow\">Have a look at use of <code>fopen</code> in a tutorial.</a> </p>\n\n<p>You will need to use something like <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow\"><code>fgets</code></a> to read your file into a buffer. You can also use <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fgetc.htm\" rel=\"nofollow\"><code>fgetc</code></a> to read your file one character at a time. </p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 5166832, "user_type": "registered", "profile_image": "https://graph.facebook.com/688226600/picture?type=large", "display_name": "alfalfasprout", "link": "https://stackoverflow.com/users/5166832/alfalfasprout"}, "is_accepted": false, "score": 0, "last_activity_date": 1449097773, "creation_date": 1449097773, "answer_id": 34054855, "question_id": 34054762, "link": "https://stackoverflow.com/questions/34054762/error-used-struct-type-value-where-scalar-is-required/34054855#34054855", "title": "error: used struct type value where scalar is required", "body": "<p>The file pointer is not an array... consider using fgetc/fgets. <code>fp[i]</code> doesn't give you the i-th byte of the file. fgetc will let you iterate over the bytes of the file and return EOF when you're at the end.</p>\n\n<p>See the documentation for fgetc <a href=\"http://linux.die.net/man/3/fgetc\" rel=\"nofollow\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449101822, "post_id": 34054942, "comment_id": 55865291, "body": "Make <code>c</code> an <code>int</code> and check for end of file idiomatically: <code>if (c == EOF)</code>.  <code>feof()</code> is error prone."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449102056, "post_id": 34054942, "comment_id": 55865356, "body": "frof() is not wrong and it doesn&#39;t mean you need to down vote."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449102638, "post_id": 34054942, "comment_id": 55865521, "body": "Please do not suggest the use of <code>feof()</code> to a beginner, you are not helping him.  Also define <code>c</code> as an <code>int</code>."}], "tags": [], "owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1449102804, "last_edit_date": 1449102804, "creation_date": 1449098153, "answer_id": 34054942, "question_id": 34054762, "link": "https://stackoverflow.com/questions/34054762/error-used-struct-type-value-where-scalar-is-required/34054942#34054942", "title": "error: used struct type value where scalar is required", "body": "<p>wrong way accessing file pointer <code>fp</code>. It is an pointer to a file not a array character or string. Each time a file is opened, the system places the file pointer at the beginning of the file, which is offset zero.</p>\n\n<p>Close the opened file every time after processing using <code>fclose(fP)</code>;</p>\n\n<p>sample example code snippet of using file pointer.</p>\n\n<pre><code>int c;\nfp = fopen(\"file.txt\",\"r\");\n   while(1)\n   {\n      c = fgetc(fp);// or fgets as per the usage\n      if( c==EOF)\n      { \n        //Exit\n      }\n      // your code \n   }\n   fclose(fp);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 128, "user_id": 5632450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hkhgc.jpg?s=128&g=1", "display_name": "Synchronyze", "link": "https://stackoverflow.com/users/5632450/synchronyze"}, "is_accepted": false, "score": 0, "last_activity_date": 1449098200, "creation_date": 1449098200, "answer_id": 34054955, "question_id": 34054762, "link": "https://stackoverflow.com/questions/34054762/error-used-struct-type-value-where-scalar-is-required/34054955#34054955", "title": "error: used struct type value where scalar is required", "body": "<p>Here is an example on how to acquire strings from txt. There are many other ways</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n\n    FILE *fp;\n    fp = fopen(\"oldFile.txt\", \"r\");\n    char str[1024];\n    while(fgets(str, 1024, fp)!=NULL) {     //acquire strings from oldFile.txt through fgets() which returns a pointer. NULL is returned at the end of file\n        printf(\"%s\", str); //just an example\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5499177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cee5cbb3de4dfd50b30da8f0dfb0f489?s=128&d=identicon&r=PG&f=1", "display_name": "user5499177", "link": "https://stackoverflow.com/users/5499177/user5499177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3011, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1449102804, "creation_date": 1449097332, "question_id": 34054762, "link": "https://stackoverflow.com/questions/34054762/error-used-struct-type-value-where-scalar-is-required", "title": "error: used struct type value where scalar is required", "body": "<p>I am creating a program which takes an input and opens a text file and changes words to lower or upper case depending on what the user wants. When I compile the program I gets the following error:</p>\n\n<pre><code>22:11: error: used struct type value where scalar is required\n30:11: error: used struct type value where scalar is required\n\n  1 #include &lt;stdio.h&gt;\n  2 int main(void) {\n  3\n  4         char choice;\n  5         char fileName;\n  6         char newFileName;\n  7         int i = 0;\n  8\n  9         printf(\"Change Case \\n\");\n 10         printf(\"============\\n\");\n 11         printf(\"Case (U for upper, L for lower) : \");\n 12         scanf(\" %c\", &amp;choice);\n 13         printf(\"Name of the original file : oldFile.txt \\n\");\n 14         printf(\"Name of the updated file : newFile.txt \\n\");\n 15\n 16         FILE *fp = NULL;\n 17\n 18         fp = fopen(\"oldFile.txt\", \"a\");\n 19\n 20         if (fp != NULL &amp;&amp; choice == 'L') {\n 21\n 22                 while ( fp[i] ) {\n 23\n 24                         putchar(tolower(fp[i]));\n 25                         i++;\n 26                 }\n 27         }\n 28         else if (fp != NULL &amp;&amp; choice == 'U') {\n 29\n 30                 while ( fp[i] ) {\n 31\n 32                         putchar(toupper(fp[i]));\n 33                         i++;\n 34                 }\n 35         }\n 36         else {\n 37\n 38                 printf(\"ERROR: No proper choice was made \\n\");\n 39         }\n 40 }\n</code></pre>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 2380, "user_id": 2639886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b521fc2a7c7e631cc9a18c66d0dea9?s=128&d=identicon&r=PG", "display_name": "andrewdleach", "link": "https://stackoverflow.com/users/2639886/andrewdleach"}, "edited": false, "score": 0, "creation_date": 1449096524, "post_id": 34054555, "comment_id": 55863418, "body": "Reread the question and deleted."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449096542, "post_id": 34054555, "comment_id": 55863426, "body": "Unrelated note; <code>buffer</code> does not hold a string in this code (a string being a sequence of chars followed by a <code>\\0</code>); if the garbage after it happens to be a digit, then atoi won&#39;t return what you expect."}, {"owner": {"reputation": 1385, "user_id": 4712672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-39lw_wxtXmY/AAAAAAAAAAI/AAAAAAAAABM/RVm-QZc6ARY/photo.jpg?sz=128", "display_name": "Exprove", "link": "https://stackoverflow.com/users/4712672/exprove"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449096718, "post_id": 34054555, "comment_id": 55863492, "body": "@immibis buffer is just an &quot;holder&quot;, since the specific &quot;string&quot; only have 2 numbers and I will not output it do I really need to terminate it with \\0?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1449096764, "post_id": 34054555, "comment_id": 55863506, "body": "<code>atoi</code> takes a c-style string. A c-style string ends with a <code>\\0</code>. So yes it is needed."}, {"owner": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 0, "creation_date": 1449097127, "post_id": 34054555, "comment_id": 55863642, "body": "what do you mean by inline? In one line? If so, there&#39;s alot of type inference being done in C# that you CANNOT do in C (for obvious reasons). Short of the fact that C strings are not really strings but an array of chars terminated by a \\0. time.Substring itself in C# probably has the same amount of code (or more) as your getseconds function."}, {"owner": {"reputation": 1385, "user_id": 4712672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-39lw_wxtXmY/AAAAAAAAAAI/AAAAAAAAABM/RVm-QZc6ARY/photo.jpg?sz=128", "display_name": "Exprove", "link": "https://stackoverflow.com/users/4712672/exprove"}, "reply_to_user": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 0, "creation_date": 1449097453, "post_id": 34054555, "comment_id": 55863771, "body": "@FrancoSolleza I mean by not placing the result to a variable, in C you normally place the input to a variable."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449097513, "post_id": 34054555, "comment_id": 55863801, "body": "The C# code only works if the format is fixed.  What if there is only 1 digit before <code>h</code> or if the number of seconds is missing, or if the spacing varies?"}, {"owner": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 0, "creation_date": 1449097638, "post_id": 34054555, "comment_id": 55863854, "body": "@Exprove Just to clarify, do you mean that in the code <code>int seconds = int.Parse(time.Substring(0, 2)) * 3600 + int.Parse(time.Substring(4, 2)) * 60</code>, that the function call <code>int.Parse(time.Substring(0, 2))</code> is evaluated &quot;inline&quot; as in, within the line without assigning to a variable before using it in the rest of the expression?"}, {"owner": {"reputation": 1385, "user_id": 4712672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-39lw_wxtXmY/AAAAAAAAAAI/AAAAAAAAABM/RVm-QZc6ARY/photo.jpg?sz=128", "display_name": "Exprove", "link": "https://stackoverflow.com/users/4712672/exprove"}, "reply_to_user": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 0, "creation_date": 1449097965, "post_id": 34054555, "comment_id": 55863997, "body": "@FrancoSolleza I am saying that C# functions return the input, while C functions return normally a condition (example, number of inputs correctly read, etc...)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449098544, "post_id": 34054555, "comment_id": 55864225, "body": "<i>You can spot the number of lines difference I guess :).</i>  Yes we can!  It is an indication of your lack of experience, but here, you will learn how to improve ;-)"}, {"owner": {"reputation": 1385, "user_id": 4712672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-39lw_wxtXmY/AAAAAAAAAAI/AAAAAAAAABM/RVm-QZc6ARY/photo.jpg?sz=128", "display_name": "Exprove", "link": "https://stackoverflow.com/users/4712672/exprove"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449098789, "post_id": 34054555, "comment_id": 55864310, "body": "@chqrlie I know c# and lot of languages not my fault ;p, I am just entering in the C World, sorry If I am a noob yet :)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449099338, "post_id": 34054555, "comment_id": 55864513, "body": "We have all been beginners, no need to be sorry, but you remark could be misconstrued as an indication of C# superiority... C aficionados are easily tripped."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1449173709, "post_id": 34054555, "comment_id": 55903797, "body": "Your attempt in C is not semantically equivalent to the C# code - the C# version does not attempt to validate the delimiters; neither does your accepted answer."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449097422, "post_id": 34054704, "comment_id": 55863753, "body": "Unlike the C# example, your <code>sscanf</code> will fail if there are extra characters at the end of <code>time</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449097520, "post_id": 34054704, "comment_id": 55863805, "body": "@chqrlie  By removing the <code>|| time[n] != &#39;\\0&#39;</code> code, then that matching functionality can be had."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449097561, "post_id": 34054704, "comment_id": 55863822, "body": "Although this is a perfectly good way to scan a string such as the OP presented, he did ask for an approach that does not involve any temporaries."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449097938, "post_id": 34054704, "comment_id": 55863989, "body": "@John Bollinger  Agreed this uses extra variables - yet they all exist with-in a function, so OP only needs to call <code>int seconds = getseconds2(time);</code>.  It comes down to the need for no extra variables versus the degree of needed error resiliency."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1449098134, "post_id": 34054704, "comment_id": 55864058, "body": "@chux, agreed.  Also, I stipulate that the requirement to avoid temporaries seems pretty arbitrary."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1449099353, "post_id": 34054704, "comment_id": 55864520, "body": "The solution works only if the string contains no following data, making it perhaps less flexible.  Using the converted field count return from sscanf rather than testing for nul might be better."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1449102810, "post_id": 34054704, "comment_id": 55865564, "body": "@Clifford Disagree.  The test for <code>n == 0</code> is similar to testing the <code>sscanf()</code> return value of <code>3</code> and has an advantage over the test  used <a href=\"http://stackoverflow.com/a/34054885/2410359\">here</a>.  That one give the illusion that the <code>s</code> was parsed.  It returns 3 should the <code>s</code> exist in <code>time</code> or not..  The usage here of the test for <code>time[n] != &#39;\\0&#39;</code>, which was commented on before, allows the OP to decide if trailing text is a good or bad thing."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1449097715, "last_edit_date": 1495535231, "creation_date": 1449097029, "answer_id": 34054704, "question_id": 34054555, "link": "https://stackoverflow.com/questions/34054555/c-convert-substring-to-int/34054704#34054704", "title": "C - Convert substring to int", "body": "<p><code>sscanf()</code> with <code>\"%n\"</code> to detect the end of scanning is close but does use more variables.</p>\n\n<pre><code>int getseconds2(const char * time) {\n   int h,m,s;\n   int n = 0;\n   sscanf(time, \"%d h%d m%d s %n\", &amp;h,&amp;m, &amp;s, &amp;n);\n   if (n == 0 || time[n] != '\\0') return -1;  // failure\n   return h*3600 + m *60 + s;\n}\n</code></pre>\n\n<p>The <code>\"%n\"</code> saves the count of characters scanned.  Since is used at the end of the format, testing to see if it is non-zero (the original value) and that <code>time</code> ended at the null character insures the integrity of the scan.</p>\n\n<p><a href=\"https://stackoverflow.com/users/4593267/chqrlie\">@chqrlie</a> suggested a mis-match of C# functionality.</p>\n\n<pre><code>   // to match C#\n   if (n == 0) return -1;  // failure\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1385, "user_id": 4712672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-39lw_wxtXmY/AAAAAAAAAAI/AAAAAAAAABM/RVm-QZc6ARY/photo.jpg?sz=128", "display_name": "Exprove", "link": "https://stackoverflow.com/users/4712672/exprove"}, "edited": false, "score": 0, "creation_date": 1449097734, "post_id": 34054715, "comment_id": 55863896, "body": "Hmm that example is interesting, it is what I need. But just one question in C# you give a start and a end to substring, how atoi works? It simple sees that the next char isn&#39;t a number and return a number?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1385, "user_id": 4712672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-39lw_wxtXmY/AAAAAAAAAAI/AAAAAAAAABM/RVm-QZc6ARY/photo.jpg?sz=128", "display_name": "Exprove", "link": "https://stackoverflow.com/users/4712672/exprove"}, "edited": false, "score": 0, "creation_date": 1449097855, "post_id": 34054715, "comment_id": 55863953, "body": "As I wrote in my answer <code>atoi()</code> stops when it reaches a character it cannot convert -- i.e. one that is not a base-10 digit.  <code>strtol()</code> does the same, but has some additional features, such as being able to handle bases other than 10, and giving you a means to find out where it left off parsing."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1449097914, "post_id": 34054715, "comment_id": 55863974, "body": "Simple and elegant, with the same shortcomings as the C# version. +1"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1449097115, "creation_date": 1449097115, "answer_id": 34054715, "question_id": 34054555, "link": "https://stackoverflow.com/questions/34054555/c-convert-substring-to-int/34054715#34054715", "title": "C - Convert substring to int", "body": "<p>You can use <code>atoi()</code> or <code>strtol()</code> to do this job.  You do not need to extract substrings first, because these functions stop at the first character that cannot be converted.  You just need to take a varying view of where the string starts.  Thus, this code is fairly analogous to your C# example:</p>\n\n<pre><code>int getseconds(const char * time) {\n    return atoi(time) * 3600 + atoi(time + 4) * 60 + atoi(time + 8);\n}\n</code></pre>\n\n<p>Of course it will break on some malformed inputs, but so will the C# (albeit not all the <em>same</em> inputs).</p>\n"}, {"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449098445, "post_id": 34054885, "comment_id": 55864192, "body": "@chqrlie : Compiles just fine here - what error are you seeing?  Why should it return -1?  Neither of the OP&#39;s solutions do that  It is a matter of design rather then requirement.  Why remove the check variable? That is a matter of style.  I prefer to assign then test rather then call the function or put a complex expression in the if() because it makes debugging easier (in a symbolic debugger)."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449098726, "post_id": 34054885, "comment_id": 55864282, "body": "@chqrlie : Ah - chux fixed it that&#39;s why.  The fix makes the purpose of <code>check</code> clear.  The signature of the function was as defined in the original question, but if you insist."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449098746, "post_id": 34054885, "comment_id": 55864291, "body": "It compiles thanks to @chux correction. -1 help distinguish parse failure from <code>00h 00m 00s</code>, but the OP does not seem to care.  You can further simplify by removing the <code>check</code> variable, but clarity has its virtues."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449098908, "post_id": 34054885, "comment_id": 55864347, "body": "John Bollinger&#39;s version is unquestionably <i>much simpler</i>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449099210, "post_id": 34054885, "comment_id": 55864465, "body": "@chqrlie : removing <code>check</code> does not simplify it, it simply uses one fewer variable.  The optimiser will remove it in any case, and its presence makes debugging simpler as mentioned.  - I&#39;ll let it stand thanks.  Chux&#39;s version assumes that the string does not contain following text.  This version will work regardless of what follows."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449099669, "post_id": 34054885, "comment_id": 55864634, "body": "I recognize that, but you will agree that John has a simpler one, just not semantically equivalent to yours, but much closer to the C# version."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449099858, "post_id": 34054885, "comment_id": 55864703, "body": "@chqrlie : John&#39;s solution is indeed simpler and corresponds more closely to the OP&#39;s C# solution, but will return odd results for malformed strings.  This is more tolerant to the number of spaces, but does check the h/m/s delimiters.  It is certainly not semantically equivalent; for example it will produce a result from &quot;1234567890&quot; for example, even though that does not represent valid input."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449100116, "post_id": 34054885, "comment_id": 55864794, "body": "That is true, you are both more tolerant and perform stricter checking. Note that you need chux approach to check for the <code>s</code> marker.  Incidentally, you will produce undefined behavior for <code>1234567890h 0m 0s</code>.  You get my vote at last for the effort."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449100228, "post_id": 34054885, "comment_id": 55864828, "body": "@chqrlie : I concede the <code>s</code> delimiter point.  An exercise for the reader if it matters; suggest removing <code>s</code> from the format string check <code>time[n] == &#39;s&#39;</code>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449173503, "post_id": 34054885, "comment_id": 55903696, "body": "Since the OP seems to prefer minimal to robust, I chose to &quot;fix&quot; the final delimiter check in any case."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1449173846, "last_edit_date": 1449173846, "creation_date": 1449097929, "answer_id": 34054885, "question_id": 34054555, "link": "https://stackoverflow.com/questions/34054555/c-convert-substring-to-int/34054885#34054885", "title": "C - Convert substring to int", "body": "<p>A much simpler solution is possible:</p>\n\n<pre><code>int getseconds( const char* time)\n{\n    int h, m, s = 0 ;\n    char sdelim = 0 ;\n    int check = sscanf( time, \"%dh %dm %d%c\", &amp;h, &amp;m, &amp;s, &amp;sdelim ) ;\n    if( check == 3 &amp;&amp; sdelim = 's' )\n    {\n        s = ((h * 60) + m) * 60 + s ;\n    }\n\n    return s ;\n}\n</code></pre>\n"}], "owner": {"reputation": 1385, "user_id": 4712672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-39lw_wxtXmY/AAAAAAAAAAI/AAAAAAAAABM/RVm-QZc6ARY/photo.jpg?sz=128", "display_name": "Exprove", "link": "https://stackoverflow.com/users/4712672/exprove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1952, "favorite_count": 0, "accepted_answer_id": 34054715, "answer_count": 3, "score": 2, "last_activity_date": 1449173846, "creation_date": 1449096287, "last_edit_date": 1449097233, "question_id": 34054555, "link": "https://stackoverflow.com/questions/34054555/c-convert-substring-to-int", "title": "C - Convert substring to int", "body": "<p>At the moment I got this simple code in C to convert days, minutes and seconds to seconds only: </p>\n\n<p><strong>EDITED</strong> (I understood the problem with atoi, like this is corrected right?):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint getseconds(char * time)\n{\n    int seconds=0, i=0;\n    char buffer[3];\n    while (*time != '\\0')\n    {\n        switch (*time)\n        {\n            case 'h': buffer[i]='\\0';i=0;seconds=seconds+atoi(buffer)*3600;break;\n            case 'm': buffer[i]='\\0';i=0;seconds=seconds+atoi(buffer)*60;break;\n            case 's': buffer[i]='\\0';i=0;seconds=seconds+atoi(buffer);break;\n            case ' ':break;\n            default: buffer[i]=*time;i++;break;\n        }\n        time++;\n    }\n    return seconds;\n}\n\nint main()\n{\n\n    char *time = \"12h  4m 58s\";\n    int seconds = getseconds(time);\n    printf(\"%d\",seconds);\n    return 0;\n}\n</code></pre>\n\n<p>This is working as I want, but there isn't another way to do it, without creating more variables (like C# where I just need to convert \"inline\". Does C only have functions that convert to variables and not to \"inline\")?</p>\n\n<p>C# Example:</p>\n\n<pre><code>        string time = \"12h 34m 58s\";\n        int seconds = int.Parse(time.Substring(0, 2)) * 3600 + int.Parse(time.Substring(4, 2)) * 60 + int.Parse(time.Substring(8, 2));\n</code></pre>\n\n<p>You can spot the number of lines difference I guess :).</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1449096167, "post_id": 34054492, "comment_id": 55863267, "body": "<code>F[i][j]</code> is not the same as <code>F[i,j]</code>"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1449096484, "post_id": 34054492, "comment_id": 55863401, "body": "@xsun That&#39;s because you corrected the wrong line :)"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1449096460, "creation_date": 1449096460, "answer_id": 34054578, "question_id": 34054492, "link": "https://stackoverflow.com/questions/34054492/2d-array-elements-do-not-save-values-in-c/34054578#34054578", "title": "2D Array elements do not save values in C", "body": "<p>This line </p>\n\n<pre><code>        printf(\"%f %f\\n\", r, F[i,j]);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>        printf(\"%f %f\\n\", r, F[i][j]);\n</code></pre>\n\n<p>However, the reason it's a valid syntax is because of the <em>comma operator</em>. Comma operator evaluates its operands and yields only the last operand's value. So, </p>\n\n<pre><code>        printf(\"%f %f\\n\", r, F[i,j]);\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>        printf(\"%f %f\\n\", r, F[j]);\n</code></pre>\n\n<p>However, this has a problem. <code>F[j]</code> is of type <code>double *</code> whereas <code>%f</code> expects a <code>double</code>. GCC warns:</p>\n\n<pre><code>    warning: format \u2018%f\u2019 expects argument of type \u2018double\u2019, but argument 3  \nhas type \u2018double *\u2019 [-Wformat=]\n</code></pre>\n\n<p>Increasing your compiler warning levels would help catch these.</p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 5166832, "user_type": "registered", "profile_image": "https://graph.facebook.com/688226600/picture?type=large", "display_name": "alfalfasprout", "link": "https://stackoverflow.com/users/5166832/alfalfasprout"}, "is_accepted": false, "score": 0, "last_activity_date": 1449096472, "creation_date": 1449096472, "answer_id": 34054582, "question_id": 34054492, "link": "https://stackoverflow.com/questions/34054492/2d-array-elements-do-not-save-values-in-c/34054582#34054582", "title": "2D Array elements do not save values in C", "body": "<p>Why are you using the comma operator <code>F[i,j]</code>? The array populates correctly... just replace this with <code>F[i][j]</code> to verify.</p>\n\n<p>Also, free your memory.</p>\n"}], "owner": {"reputation": 11, "user_id": 5632596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7421d38efc7873453cdd40097b3cf0ba?s=128&d=identicon&r=PG&f=1", "display_name": "xsun", "link": "https://stackoverflow.com/users/5632596/xsun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1449096472, "creation_date": 1449095972, "question_id": 34054492, "link": "https://stackoverflow.com/questions/34054492/2d-array-elements-do-not-save-values-in-c", "title": "2D Array elements do not save values in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(void) {\n    double** F = (double**) malloc(4097 * sizeof(double*));;\n    int flops = 0;\n    int i, j, k;\n    double r;\n\n    for (i=0; i&lt;4097; i++) {\n        F[i] = (double*) malloc(4097*sizeof(double));\n    }\n\n    // insert code to initialize array elements to random values between 1.0 and 2.0\n    for (i=0; i&lt;4097; i++) {\n        for (j=0; j&lt;4097; j++) {\n            r = (double)rand()/(double)(RAND_MAX/2.0);\n            F[i][j] = r;\n            printf(\"%f %f\\n\", r, F[i,j]);\n        }\n    }\n\n}\n</code></pre>\n\n<p>I am trying to generate random numbers and store them into a 4097 x 4097 array but when the above code is run the array is not updated.</p>\n"}, {"tags": ["c", "arrays", "text", "storage"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1449096590, "post_id": 34054457, "comment_id": 55863445, "body": "you are creating an array of chars but should create an array (or better: list) of strings. And for starters have a look at this for example: <a href=\"http://stackoverflow.com/questions/12337614/how-feof-works-in-c\">stackoverflow.com/questions/12337614/how-feof-works-in-c</a>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1449252595, "post_id": 34054457, "comment_id": 55941736, "body": "For your code you&#39;re saying, <i>...this is what I&#39;ve done so far</i>, and then you are saying, <i>Also I don&#39;t have any idea what the feof function does...</i> and are using <code>feof</code>. If you wrote the code, why are you using <code>feof</code> if you don&#39;t know what it does?"}], "answers": [{"tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 0, "last_activity_date": 1449096654, "creation_date": 1449096654, "answer_id": 34054620, "question_id": 34054457, "link": "https://stackoverflow.com/questions/34054457/storing-words-from-text-file-into-char-array-using-feof/34054620#34054620", "title": "Storing words from text file into char array using feof", "body": "<p>Usually you may use the following steps:</p>\n\n<ul>\n<li>Dump the whole text file to a char buffer.</li>\n<li>Use <code>strtok</code> to split the char buffer to multiple tokens or words.</li>\n<li>Use an array of pointer to char to store individual words.</li>\n</ul>\n\n<p>Something along this line would do. Note, I use your question title as the text file. You will need to replace <code>20</code> as appropriately.</p>\n\n<pre><code>    int main ()\n    {\n        FILE *in_file;\n        in_file = fopen(\"in.txt\", \"r\");\n        fseek( in_file, 0, SEEK_END );\n        long fsize = ftell( in_file );\n        fseek( in_file, 0, SEEK_SET );\n\n        char *buf = malloc( fsize + 1 );\n        fread( buf, fsize, 1, in_file ); // Dump the whole file to a char buffer.\n        fclose( in_file );\n\n        char *items[20] = { NULL };\n        char *pch;\n\n        pch = strtok (buf,\" \\t\\n\");\n        int i = 0;\n        while (pch != NULL)\n        {\n            items[i++] = pch;\n            pch = strtok (NULL, \" \\t\\n\");\n        }\n\n        for( i = 0; i &lt; 20; i++ )\n        {\n            if( items[i] != NULL )\n            {\n                printf( \"items[%d] = %s\\n\", i, items[i] );\n            }\n        }\n        return 0;\n    }\n</code></pre>\n\n<hr>\n\n<p>Output:</p>\n\n<pre><code>items[0] = Storing\nitems[1] = words\nitems[2] = from\nitems[3] = textfile\nitems[4] = into\nitems[5] = char\nitems[6] = array\nitems[7] = using\nitems[8] = feof?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449164545, "post_id": 34054627, "comment_id": 55898432, "body": "hello thanks for the reply, what do you mean by reads words with %s?"}, {"owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449164594, "post_id": 34054627, "comment_id": 55898464, "body": "and why am i creating an array with rows and columns(wordcountmax and wordsizemax)? please help!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449166311, "post_id": 34054627, "comment_id": 55899431, "body": "@anony Each <code>word_list[i]</code> stores 1 word with up to <code>WORD_SIZE_MAX-1</code> characters.  The fixed sized <code>array[][]</code> supports up to <code>WORD_COUNT_MAX</code> words.  Other approaches exist involving memory management (<code>malloc()&#47;free()</code>.  I thought this would be simplest for you to code and use."}, {"owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449167236, "post_id": 34054627, "comment_id": 55899968, "body": "i mean, the numbers in my textfile max&#39; characters a word could have is 5. (seven, three, eight). so would the word_size_max be 5 for me? i tried using your code but it is too confusing for me :/ which file exactly in your code does the scanning words into array business?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449168537, "post_id": 34054627, "comment_id": 55900825, "body": "@anony  The above comment &quot;... with up to <code>WORD_SIZE_MAX-1</code> characters.&quot; implies that if the longest word is 5 characters, then <code>WORD_SIZE_MAX</code> needs to be <i>at least</i> 6.  In this answer <code>infile</code> is the <code>FILE</code> pointer, used just like in your post.  The <code>fscanf()</code> performs the scanning."}, {"owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449170097, "post_id": 34054627, "comment_id": 55901762, "body": "<a href=\"http://textuploader.com/5gde8\" rel=\"nofollow noreferrer\">textuploader.com/5gde8</a> this is my code.. i think i confused myself with it :/"}, {"owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449188332, "post_id": 34054627, "comment_id": 55910911, "body": "after a lot of time looking at this, i think i&#39;ve finally figured it out, thanks very much for the help!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449198922, "post_id": 34054627, "comment_id": 55913698, "body": "@anony  Ref code should be <code>if (fscanf(in_file,&quot;%5s&quot;, array[i]) != 1) {</code>  5 not 19 as you have <code>char array[45000][6];</code> and not <code>char array[45000][20];</code>"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1449096667, "creation_date": 1449096667, "answer_id": 34054627, "question_id": 34054457, "link": "https://stackoverflow.com/questions/34054457/storing-words-from-text-file-into-char-array-using-feof/34054627#34054627", "title": "Storing words from text file into char array using feof", "body": "<ol>\n<li><p>Rather than check <code>feof()</code>, which tells you if the end-of-file occurred in the <em>previous</em> input operation, check the result of <code>fscanf()</code></p></li>\n<li><p>Reads \"words\" with <code>\"%s\"</code> and limit the max numbers of <code>char</code> to be read.</p>\n\n<pre><code>char buf[100];\nfscanf(in_file,\"%99s\",buf);\n</code></pre></li>\n</ol>\n\n<p>Putting that together:</p>\n\n<pre><code>    #define WORD_SIZE_MAX 20\n    #define WORD_COUNT_MAX 10000\n\n    char array[WORD_COUNT_MAX][WORD_SIZE_MAX];\n    unsigned word_i = 0;\n\n    for (i=0; i&lt;WORD_COUNT_MAX; i++) {\n      if (fscanf(in_file,\"%19s\", word_list[i]) != 1) {\n        break;\n      }\n    }\n</code></pre>\n\n<hr>\n\n<p>Another approach is to use OP code nearly as is.  Read the whole file into 1 array.  Then on printing, skip white-space.</p>\n"}], "owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 34054627, "answer_count": 2, "score": 1, "last_activity_date": 1449099447, "creation_date": 1449095827, "last_edit_date": 1449099447, "question_id": 34054457, "link": "https://stackoverflow.com/questions/34054457/storing-words-from-text-file-into-char-array-using-feof", "title": "Storing words from text file into char array using feof", "body": "<p>So I have a textfile which goes like this:</p>\n\n<p>zero three two one five zero zero five seven .. etc</p>\n\n<p>and there is a lot of it, 9054 words to be exact</p>\n\n<p>My idea was to create a char array of 9054 spaces and store it in, this is what I have done so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\nchar tmp;\nint i = 0;\nint j = 0;\nchar array[44000];\n\nFILE *in_file;\n\nin_file = fopen(\"in.txt\", \"r\");\n\n// Read file in to array\nwhile (!feof(in_file))\n{\n      fscanf(in_file,\"%c\",&amp;tmp);\n      array[i] = tmp;\n      i++;\n}\n\n// Display array\nwhile (j&lt;i)\n{\n      printf(\"%c\",array[j]);\n      j++;\n}\n\n\nfclose(in_file);\n\nwhile(1);\nreturn 0;\n}\n</code></pre>\n\n<p>The problem is I don't know how to store words, because from what I have done stores each character into the array so it becomes an array of around 44000. How can I make it so the array holds words instead? </p>\n\n<p>Also I don't have an idea what the feof function does, especially the line</p>\n\n<pre><code>while (!feof(in_file))\n</code></pre>\n\n<p>what does this line exactly mean? Sorry I am still in the baby stages of learning C, I tried looking up what feof does but there is not much to find</p>\n"}, {"tags": ["c", "linux", "stack-trace", "debug-symbols", "bfd"], "answers": [{"tags": [], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "is_accepted": true, "score": 0, "last_activity_date": 1449110515, "creation_date": 1449110515, "answer_id": 34056930, "question_id": 34054445, "link": "https://stackoverflow.com/questions/34054445/recover-location-information-from-trace-using-bfd/34056930#34056930", "title": "Recover location information from trace using bfd", "body": "<p>I looked for more examples, it seems that I was missing two things, calling the function <code>bfd_check_format</code> after opening and also populating and passing the address information in the <code>bfd_data</code> structure.</p>\n\n<pre><code>...\n    bfd *abfd = bfd_openr(info.dli_fname, NULL); assert(abfd);\n//  char **matching;\n//  bfd_data data;// = (bfd_data *)obj;\n\n    if (!bfd_check_format (abfd, bfd_object)){\n        bfd_close (abfd);       assert(0);\n    }\n...\n</code></pre>\n\n<p>later <code>bfd_data</code> variable is used as input and output of the <code>find_addr_sect</code>. Therefore </p>\n\n<pre><code>...\nbfd_data data;// = (bfd_data *)obj;\ndata.pc = (bfd_hostptr_t)info.dli_saddr;\ndata.found = FALSE;\nbfd_map_over_sections(abfd, find_addr_sect, &amp;data);\n...\n</code></pre>\n\n<p>And now it works.</p>\n"}], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 34056930, "answer_count": 1, "score": 1, "last_activity_date": 1605031727, "creation_date": 1449095780, "last_edit_date": 1605031727, "question_id": 34054445, "link": "https://stackoverflow.com/questions/34054445/recover-location-information-from-trace-using-bfd", "title": "Recover location information from trace using bfd", "body": "<p>I am using the <code>dladdr</code> from <code>libld</code> (<a href=\"http://linux.die.net/man/3/dladdr\" rel=\"nofollow\">http://linux.die.net/man/3/dladdr</a>) to get a trace of the function calls. Here it is minimal example with a single traced element:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;dlfcn.h&gt; // link with -ldl -rdynamic a\n\nvoid f(){\n    void **frame = static_cast&lt;void **&gt;(__builtin_frame_address(0));\n    void **bp = static_cast&lt;void **&gt;(*frame);\n    void *ip = frame[1];\n    Dl_info info;\n    dladdr(ip, &amp;info);\n    std::cout &lt;&lt; info.dli_sname &lt;&lt; \" \" &lt;&lt; info.dli_fname &lt;&lt; \" \" &lt;&lt; info.dli_saddr &lt;&lt; std::endl;\n\n    ip = bp[1];\n    bp = static_cast&lt;void**&gt;(bp[0]);\n    dladdr(ip, &amp;info);\n    std::cout &lt;&lt; info.dli_sname &lt;&lt; \" \" &lt;&lt; info.dli_fname &lt;&lt; \" \" &lt;&lt; info.dli_saddr &lt;&lt; std::endl;\n}\n\nint main(){\n    f();\n}\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>  main ./a.out 0x402800\n__libc_start_main /lib64/libc.so.6 0x7febf6bf2610\n</code></pre>\n\n<p>that is, <code>Dl_info</code> has the traced function name, the compiled file where it belongs and some <strong>address</strong> (<code>0x7f...</code>) described in the man page as \"Exact address of symbol named\".</p>\n\n<p>This <strong>address</strong> has information of the source file location (from where the function has been called). In fact with the help of some utility I can get that information:</p>\n\n<pre><code>$ addr2line -e a.out\n/home/user/test.cpp:34\n</code></pre>\n\n<p>(give the exact line where <code>main</code> is defined in source file). And this works as long as the program was compiled with the <code>-g</code> option.</p>\n\n<p><strong>Now what I want is to extract this information programmaticaly. Supposedly, this is possible with the BFD library.</strong></p>\n\n<p>This is my attempt, based on BFD examples found for example here: <a href=\"http://opensource.apple.com/source/X11libs/X11libs-40.2/cairo/cairo-1.8.6/util/backtrace-symbols.c\" rel=\"nofollow\">http://opensource.apple.com/source/X11libs/X11libs-40.2/cairo/cairo-1.8.6/util/backtrace-symbols.c</a></p>\n\n<p>1) first I have to define a function <code>find_addr_sect</code> that will be called by <code>bfd_map_over_sections</code> (through a pointer) later.</p>\n\n<pre><code>static void find_addr_sect(bfd *abfd, asection *section, void *obj){\n\n\n    bfd_data *data = (bfd_data *)obj;\n    bfd_vma vma;\n    bfd_size_type size;\n\n    if (data-&gt;found)\n        return;\n\n    if (!(bfd_get_section_vma(abfd, section)))\n        return;\n\n    vma = bfd_get_section_vma(abfd, section);\n    if (data-&gt;pc &lt; vma)\n        return;\n\n    size = bfd_get_section_size(section);\n    if (data-&gt;pc &gt;= vma + size)\n        return;\n\n    data-&gt;found = bfd_find_nearest_line(abfd, section, syms,\n                        data-&gt;pc - vma,\n                        &amp;data-&gt;filename,\n                        &amp;data-&gt;function,\n                        &amp;data-&gt;line);\n\n}\n</code></pre>\n\n<p>2) I put the code directing inside the function (this replaces the function <code>void f()</code> above.</p>\n\n<pre><code>void f(){\n\n    void **frame = static_cast&lt;void **&gt;(__builtin_frame_address(0));\n    void **bp = static_cast&lt;void **&gt;(*frame);\n    void *ip = frame[1];\n    Dl_info info;\n    dladdr(ip, &amp;info);\n    std::cout &lt;&lt; info.dli_sname &lt;&lt; \" \" &lt;&lt; info.dli_fname &lt;&lt; \" \" &lt;&lt; info.dli_saddr &lt;&lt; std::endl;\n////////////////////\n    // this will try to find the location of main (first in the stack)\n    bfd *abfd = bfd_openr(info.dli_fname, NULL); assert(abfd); // the executable file is opened successfully\n//  bfd_data data;\n    bfd_map_over_sections(abfd, find_addr_sect, nullptr); // !! doesn't call `find_addr_sect` at all.\n\n\n///////////////////\n    ip = bp[1];\n    bp = static_cast&lt;void**&gt;(bp[0]);\n\n    dladdr(ip, &amp;info);\n    std::cout &lt;&lt; info.dli_sname &lt;&lt; \" \" &lt;&lt; info.dli_fname &lt;&lt; \" \" &lt;&lt; info.dli_saddr &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p>Sadly, I am stuck here because the <code>bfd_map_over_sections</code> call doesn't do anything. I am using <code>bfd_map_over_sections</code> in the wrong way, why?</p>\n\n<p>Sorry for using C++, in this is a C question. It shortens most of my code and I am more used to it.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> I added this lines and I can confirm that one clue of the problem is that the number of sections is zero.</p>\n\n<pre><code>unsigned int numSections = -1;\nnumSections =  bfd_count_sections(abfd);\nstd::cout &lt;&lt; \"num sections \" &lt;&lt; numSections &lt;&lt; std::endl; // gives \"0\"\n</code></pre>\n"}, {"tags": ["c", "struct", "io"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449095008, "post_id": 34054216, "comment_id": 55862708, "body": "<code>fscanf(file, &quot;%s%s%s%d%f%c&quot;,</code> --&gt; <code>fscanf(file, &quot;%s%s%s%d%f %c&quot;,</code>  Add space before %c"}, {"owner": {"reputation": 11, "user_id": 5583893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6876040fa261c215698827a0eed261f?s=128&d=identicon&r=PG&f=1", "display_name": "AwesomeSauce", "link": "https://stackoverflow.com/users/5583893/awesomesauce"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449095142, "post_id": 34054216, "comment_id": 55862777, "body": "Sweet mother of God you&#39;re amazing thank you!!"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1449095626, "last_edit_date": 1449095626, "creation_date": 1449095195, "answer_id": 34054313, "question_id": 34054216, "link": "https://stackoverflow.com/questions/34054216/read-variables-from-a-file-and-store-them-in-structs-c/34054313#34054313", "title": "Read variables from a file and store them in structs - C", "body": "<blockquote>\n  <p>Input white-space characters (as specified by the isspace function) are skipped, unless the specification includes a <code>[</code>, <code>c</code>, or <code>n</code> specifier.  C11 \u00a77.21.6.2 8</p>\n</blockquote>\n\n<p>1) Add a space before <code>\"%c\"</code> to consume white-space.  <code>\"%c\"</code> does not do it by itself.  The other used specifiers do that even without a leading space.</p>\n\n<p>2) Check the return value of <code>*scanf()</code> functions.  Unless the return value if 6, in this case, do not trust that the scan completed successfully.</p>\n\n<p>3) Limit string input by declaring a width one less than the size for <code>'%s'</code>.  Code certainly should be prevented from overrunning the arrays. </p>\n\n<pre><code>for (i=0; i&lt;numCustomers; i++){\n  // fscanf(file, \"%s%s%s%d%f%c\", &amp;cdata[i].first, &amp;cdata[i].last, \n  //   &amp;cdata[i].type, &amp;cdata[i].boxes, &amp;cdata[i].cost, &amp;cdata[i].paid);\n\n  if (6 != fscanf(file, \"%11s%11s%9s%d%f %c\", \n      &amp;cdata[i].first, &amp;cdata[i].last, &amp;cdata[i].type, \n      &amp;cdata[i].boxes, &amp;cdata[i].cost, &amp;cdata[i].paid)) {\n    printf(\"Bad input!\");\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5583893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6876040fa261c215698827a0eed261f?s=128&d=identicon&r=PG&f=1", "display_name": "AwesomeSauce", "link": "https://stackoverflow.com/users/5583893/awesomesauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449095920, "creation_date": 1449094783, "last_edit_date": 1449095920, "question_id": 34054216, "link": "https://stackoverflow.com/questions/34054216/read-variables-from-a-file-and-store-them-in-structs-c", "title": "Read variables from a file and store them in structs - C", "body": "<p>I'm having some serious trouble with this program.\nPretty much I need to read from a file that has a set of first and last name, a cookie type, the amount purchased, the cost, and whether is was paid for or not.</p>\n\n<p>I'm fairly confident that my functions are correct.</p>\n\n<p>When I run the program, it runs correctly but there looks to be extra digits in between certain numbers. What I mean is, if the input file is:\nJohn Green mint 1 1.00 Y\nJane Blue chip 2 2.00 N\nThe output file will be something like:\nJohn Green 12 20000 mint 455 1 etc...</p>\n\n<p>Any ideas? I'm guessing I messed up in reading the file/storing them into the struct.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\n/*structure definition*/\nstruct customer{\n    char first[12], last[12], type[10], paid;\n    int boxes;\n    float cost;\n};\n\n/*prototypes*/\nvoid readCustomerData(FILE*, struct customer[]);\nvoid printCustomerData(FILE*, int, struct customer[]);\nfloat moneyReceived(int, struct customer[]);\nint custWhoOwe(int, struct customer[]);\nfloat moneyOutstanding(int, struct customer[]);\nint moneyReceivedPercent(int, struct customer[]);\n\nint main (){ \n    int numCustomers;\n    float money, money2;\n    int cust, perc;\n    FILE*input;\n    FILE*output;\n\n    input = fopen(\"custInfo.txt\", \"r\");\n    output = fopen(\"output.txt\", \"w\");\n\n    fscanf(input, \"%d\", &amp;numCustomers);\n\n\n    struct customer customerData[numCustomers];\n\n    readCustomerData(input, customerData);\n    printCustomerData(output, numCustomers, customerData);\n    fprintf(output, \"Summary:\\n\\n\");\n    money = moneyReceived(numCustomers, customerData);\n    fprintf(output, \"Total Cash Received: $%.2f\\n\\n\", money);\n    cust = custWhoOwe(numCustomers, customerData);\n    fprintf(output, \"Num customers who have not paid: %d\\n\\n\", cust);\n    money2 = moneyOutstanding(numCustomers, customerData);\n    fprintf(output, \"Total Amount Outstanding: $%.2f\\n\\n\", money2);\n    perc = moneyReceivedPercent(numCustomers, customerData);\n    fprintf(output, \"Percentage of Sales outstanding: %d%%\\n\\n\", perc);\n\n\n\n    fclose(input);\n    fclose(output);\n    return 0;\n}\n\nvoid readCustomerData(FILE*file, struct customer cdata[]){\n    int numCustomers, i;\n    file = fopen(\"custInfo.txt\", \"r\");\n\n    fscanf(file, \"%d\", &amp;numCustomers);\n\n    for (i=0; i&lt;numCustomers; i++){\n        fscanf(file, \"%s%s%s%d%f%c\", &amp;cdata[i].first, &amp;cdata[i].last, &amp;cdata[i].type, &amp;cdata[i].boxes, &amp;cdata[i].cost, &amp;cdata[i].paid);\n    }\n    fclose(file);\n}\n\nvoid printCustomerData(FILE*file, int num, struct customer cdata[]){\n    int i;\n    fprintf(file, \"Customers:\\n\\n\");\n    fprintf(file, \"Name\\t\\tType of Cookie\\t\\tNum of Boxes\\tCost of Box\\tPaid\\n\");\n    fprintf(file, \"--------------------------------------------------------------------------------\\n\\n\");\n    for (i=0; i&lt;num; i++){\n    fprintf(file, \"%s %s\\t\", cdata[i].first, cdata[i].last);\n    fprintf(file, \"%s\\t\\t\", cdata[i].type);\n    fprintf(file, \"%d\\t\\t\", cdata[i].boxes);\n    fprintf(file, \"$%.2f\\t\\t\", cdata[i].cost);\n    fprintf(file, \"%c\", cdata[i].paid);\n    fprintf(file, \"\\n\\n\");\n}\n    fprintf(file, \"\\n\\n\\n\\n\\n\");\n\n}\n\nfloat moneyReceived(int num, struct customer cdata[]){\n    int i, sum=0;\n    for (i=0; i&lt;num; i++){\n        if(cdata[i].paid=='Y'){\n            sum= sum+(cdata[i].cost*cdata[i].boxes);}\n}\n    return sum;\n}\n\nint custWhoOwe(int num, struct customer cdata[]){\n    int count=0, i;\n    for (i=0; i&lt;num; i++){\n        if (cdata[i].paid=='N'){\n            count++;}\n    }\n    return count;\n}\n\nfloat moneyOutstanding(int num, struct customer cdata[]){\n    int i, sum=0;\n    for (i=0; i&lt;num; i++){\n        if (cdata[i].paid=='N'){\n            sum= sum+(cdata[i].cost*cdata[i].boxes);}\n    }\n    return sum;\n}\n\nint moneyReceivedPercent(int num, struct customer cdata[]){\n    int answ;\n    float money, moneyOut;\n    money = moneyReceived(num, cdata);\n    moneyOut = moneyOutstanding(num, cdata);\n\n    answ=(moneyOut/money)*100;\n\n    return answ;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "encryption", "openssl", "aes"], "comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1449134327, "post_id": 34053868, "comment_id": 55877255, "body": "Why wouldn\u2019t you expect encrypting the same plaintext with the same key and IV to produce the same value?  Did you want to repeat the plaintext as the second block?"}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1449134891, "post_id": 34053868, "comment_id": 55877624, "body": "Yes. I expect that data can repeat. And as I understood for my security wouldn&#39;t be broken the cipher must be different"}], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449141134, "post_id": 34063760, "comment_id": 55882038, "body": "Ok, I removed &quot;EVP_EncryptInit_ex&quot; and &quot;EVP_CIPHER_CTX_ctrl&quot; lines. But result is the same. So I need to encrypt my packetized data. As I understood, I can use EVP_aes_256_ctr to do what I want or use GCM but for each packet set the new IV?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449141678, "post_id": 34063760, "comment_id": 55882389, "body": "Call <code>EVP_EncryptUpdate()</code> multiple times after initializing the <code>ctx</code> once. Some example code: <a href=\"https://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption#Authenticated_Decryption_using_GCM_mode\" rel=\"nofollow noreferrer\">wiki.openssl.org/index.php/&hellip;</a>"}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449143060, "post_id": 34063760, "comment_id": 55883340, "body": "So I should use it without verifying the tag? EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_GET_TAG, 16, outbuf) called after encrypt_final"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449179914, "post_id": 34063760, "comment_id": 55907420, "body": "You should verify the tag when decrypting.  Call <code>EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_AEAD_SET_TAG, taglen, tag);</code> after <code>EVP_EncryptInit_ex()</code> but before <code>EVP_DecryptUpdate()</code>."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1449141742, "last_edit_date": 1449141742, "creation_date": 1449139196, "answer_id": 34063760, "question_id": 34053868, "link": "https://stackoverflow.com/questions/34053868/aes-gcm-ctr-same-output/34063760#34063760", "title": "AES GCM/CTR same output", "body": "<p>If you run the algorithm twice with the same inputs, you\u2019ll get the same outputs.  If you want to encrypt the same plaintext multiple times and not let an attacker see it\u2019s the same, use a different IV.  If you want to repeat a block within the plaintext and not let an attacker deduce the pattern, you don\u2019t want to restart.  Notice how, in the example that worked, you called <code>EVP_EncryptInit_ex()</code> <em>before</em> your calls to <code>EVP_EncryptUpdate()</code>, and in the example that didn\u2019t, you called <code>EVP_EncryptInit_ex()</code> again <em>between</em> them.</p>\n"}], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "accepted_answer_id": 34063760, "answer_count": 1, "score": 0, "last_activity_date": 1449141742, "creation_date": 1449093472, "question_id": 34053868, "link": "https://stackoverflow.com/questions/34053868/aes-gcm-ctr-same-output", "title": "AES GCM/CTR same output", "body": "<p>I'm trying to use AES-GCM. My code for encryption works, but when I try to encrypt the same plain text with the same IV and key, I've got same result. My code for GCM:</p>\n\n<pre><code>EVP_CIPHER_CTX *ctx;\nint outlen, tmplen;\nunsigned char outbuf[1024];\nctx = EVP_CIPHER_CTX_new();\nEVP_EncryptInit_ex(ctx, EVP_aes_256_gcm(), NULL, NULL, NULL);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, sizeof(gcm_iv), NULL);\nEVP_EncryptInit_ex(ctx, NULL, NULL, gcm_key, gcm_iv);\nEVP_EncryptUpdate(ctx, NULL, &amp;outlen, gcm_aad, sizeof(gcm_aad));\nEVP_EncryptUpdate(ctx, outbuf, &amp;outlen, gcm_pt, sizeof(gcm_pt));\nprintf(\"Ciphertext:\\n\");\nBIO_dump_fp(stdout, outbuf, outlen);\nEVP_EncryptFinal_ex(ctx, outbuf, &amp;outlen);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_GET_TAG, 16, outbuf);\n\nprintf(\"\\n\\n\\n\");\n\nEVP_EncryptInit_ex(ctx, EVP_aes_256_gcm(), NULL, NULL, NULL);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, sizeof(gcm_iv), NULL);\nEVP_EncryptInit_ex(ctx, NULL, NULL, gcm_key, gcm_iv);\nEVP_EncryptUpdate(ctx, NULL, &amp;outlen, gcm_aad, sizeof(gcm_aad));\nEVP_EncryptUpdate(ctx, outbuf2, &amp;outlen2, gcm_pt, sizeof(gcm_pt));\nprintf(\"Ciphertext:\\n\");\nBIO_dump_fp(stdout, outbuf2, outlen2);\nEVP_EncryptFinal_ex(ctx, outbuf2, &amp;outlen2);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_GET_TAG, 16, outbuf2);\nEVP_CIPHER_CTX_free(ctx);\n</code></pre>\n\n<p>If in the second encryption I will remove init_ex, ctx_ctrl etc, my ciphertext will be an empty string.</p>\n\n<p>But if I will use EVP_aes_256_ctr, then next encryption will give me new ciphertext. Code for EVP_aes_256_ctr:</p>\n\n<pre><code>EVP_CIPHER_CTX *ctx;\nint outlen, tmplen;\nunsigned char outbuf[1024];\nctx = EVP_CIPHER_CTX_new();\nEVP_EncryptInit_ex(ctx, EVP_aes_256_ctr(), NULL, NULL, NULL);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, sizeof(gcm_iv), NULL);\nEVP_EncryptInit_ex(ctx, NULL, NULL, gcm_key, gcm_iv);\nEVP_EncryptUpdate(ctx, outbuf, &amp;outlen, gcm_pt, sizeof(gcm_pt));\nBIO_dump_fp(stdout, outbuf, outlen);\nEVP_EncryptFinal_ex(ctx, outbuf, &amp;outlen);\n\nprintf(\"\\n\\n\\n\");\n\nEVP_EncryptUpdate(ctx, outbuf, &amp;outlen, gcm_pt, sizeof(gcm_pt));\nprintf(\"Ciphertext:\\n\");\nBIO_dump_fp(stdout, outbuf, outlen);\nEVP_EncryptFinal_ex(ctx, outbuf, &amp;outlen);\nEVP_CIPHER_CTX_free(ctx);\n</code></pre>\n\n<p>As I understood both modes work in Counter mode, so the counter will make different cyphers for same IV,Key,Plaintext. So why in GCM mode cyphertext is the same?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1449093707, "post_id": 34053859, "comment_id": 55862035, "body": "you would be returning the address of a local variable, this is no good. As soon as you leave your function that variable ceases to exist. Add a forth parameter that points to the array where you want to place the concattenation."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449093734, "post_id": 34053859, "comment_id": 55862049, "body": "@JensGustedt, he is returning NULL in the posted code."}, {"owner": {"reputation": 901, "user_id": 3573539, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1v9R5.jpg?s=128&g=1", "display_name": "Jimbo Jones", "link": "https://stackoverflow.com/users/3573539/jimbo-jones"}, "edited": false, "score": 0, "creation_date": 1449093864, "post_id": 34053859, "comment_id": 55862120, "body": "That was typo, I realized and cant change"}], "answers": [{"comments": [{"owner": {"reputation": 702, "user_id": 3560192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0TwaN.png?s=128&g=1", "display_name": "Alexguitar", "link": "https://stackoverflow.com/users/3560192/alexguitar"}, "edited": false, "score": 0, "creation_date": 1449094248, "post_id": 34053991, "comment_id": 55862346, "body": "You have a <code>const char *d</code> as the third argument, which you do not use"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095545, "post_id": 34053991, "comment_id": 55862979, "body": "I&#39;d prefer the <code>snprintf</code> solution in all cases, it&#39;s much more readable"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095827, "post_id": 34053991, "comment_id": 55863120, "body": "@M.M: The <code>snprintf</code> version is indeed more readable, it is easy to detect truncation by checking if the return value is <code>&gt;= sizeof dest</code>. Just be careful to use the actual buffer size if <code>dest</code> is not an array."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 10, "last_activity_date": 1607260284, "last_edit_date": 1607260284, "creation_date": 1449093899, "answer_id": 34053991, "question_id": 34053859, "link": "https://stackoverflow.com/questions/34053859/concatenate-3-strings-and-return-a-pointer-to-the-new-string-c/34053991#34053991", "title": "Concatenate 3 strings and return a pointer to the new string C", "body": "<p>You cannot do it this way, you would return a pointer to a local array that is no longer valid once the function returns, furthermore, you do not check for buffer overflow.</p>\n<p>Here is a quick and dirty version that allocates memory:</p>\n<pre><code>#include &lt;stdlib.h&gt;  \n#include &lt;string.h&gt;\n\nchar *concatenate(const char *a, const char *b, const char *c) {\n    return strcat(strcat(strcpy(malloc(strlen(a) + strlen(b) + strlen(c) +  1,\n                                a), b), c);\n}\n</code></pre>\n<p>Here is a more elaborate version using <code>memcpy</code> and testing for <code>malloc</code> failure:</p>\n<pre><code>#include &lt;stdlib.h&gt;  \n#include &lt;string.h&gt;\n\nchar *concatenate(const char *a, const char *b, const char *c) {\n    size_t alen = strlen(a);\n    size_t blen = strlen(b);\n    size_t clen = strlen(c);\n    char *res = malloc(alen + blen + clen + 1);\n    if (res) {\n        memcpy(res, a, alen);\n        memcpy(res + alen, b, blen);\n        memcpy(res + alen + blen, c, clen + 1);\n    }\n    return res;\n}\n</code></pre>\n<p>It should be more efficient since it does not perform the extra scans <code>strcpy</code> and <code>strcat</code> do, but only careful benchmarking can prove if it is a real improvement over the simple version above.</p>\n<p>If you need to concatenate 3 strings into an existing buffer, a very simple solution is:</p>\n<pre><code>char dest[DEST_SIZE];\n\nsnprintf(dest, sizeof dest, &quot;%s%s%s&quot;, a, b, c);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 901, "user_id": 3573539, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1v9R5.jpg?s=128&g=1", "display_name": "Jimbo Jones", "link": "https://stackoverflow.com/users/3573539/jimbo-jones"}, "edited": false, "score": 0, "creation_date": 1449094055, "post_id": 34053996, "comment_id": 55862233, "body": "Thanks for your help , was trying to use strncpy and strncat.  But could not figure it out but this is a help in its self"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1449094152, "post_id": 34053996, "comment_id": 55862284, "body": "DO NOT USE <code>strncpy</code>, it is never the right tool.  Use <code>memcpy</code> if you insist on efficiency.  Do not parenthesize the return value."}, {"owner": {"reputation": 901, "user_id": 3573539, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1v9R5.jpg?s=128&g=1", "display_name": "Jimbo Jones", "link": "https://stackoverflow.com/users/3573539/jimbo-jones"}, "edited": false, "score": 0, "creation_date": 1449094247, "post_id": 34053996, "comment_id": 55862345, "body": "How would one use memcpy in this example then..? Sorry I am just learning c"}], "tags": [], "owner": {"reputation": 841, "user_id": 1441090, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c85a81b706c1c8f51e2ea177531e9107?s=128&d=identicon&r=PG", "display_name": "Jorgel", "link": "https://stackoverflow.com/users/1441090/jorgel"}, "is_accepted": false, "score": 6, "last_activity_date": 1449094919, "last_edit_date": 1449094919, "creation_date": 1449093910, "answer_id": 34053996, "question_id": 34053859, "link": "https://stackoverflow.com/questions/34053859/concatenate-3-strings-and-return-a-pointer-to-the-new-string-c/34053996#34053996", "title": "Concatenate 3 strings and return a pointer to the new string C", "body": "<p>Your str is local to your function.<br>\nYou could add a fourth parameter to your concatenated string or you could malloc it inside the function, just make sure to free it after use.</p>\n\n<pre><code>char *concatenate(char *a, char *b, char *c)\n{\n  int size = strlen(a) + strlen(b) + strlen(c) + 1;\n  char *str = malloc(size);\n  strcpy (str, a);\n  strcat (str, b);\n  strcat (str, c); \n\n  return str;\n}\n\nint main(void) {\n\n    char *str = concatenate(\"bla\", \"ble\", \"bli\");\n\n    printf(\"%s\", str);\n    free(str);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449095306, "post_id": 34054095, "comment_id": 55862862, "body": "The comments are OK for teaching the OP.  In a real program, such comments would be stating the obvious."}], "tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": false, "score": 3, "last_activity_date": 1449095261, "last_edit_date": 1449095261, "creation_date": 1449094282, "answer_id": 34054095, "question_id": 34053859, "link": "https://stackoverflow.com/questions/34053859/concatenate-3-strings-and-return-a-pointer-to-the-new-string-c/34054095#34054095", "title": "Concatenate 3 strings and return a pointer to the new string C", "body": "<p>Maybe something like that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;  \n\nchar * concatenate(const char *a, const char *b, const char *d)\n{\n    /* calculate the length of the new string */\n    size_t len = strlen(a) + strlen(b) + strlen(d);\n    /* allocate memory for the new string */\n    char* str = malloc(len + 1);\n\n    /* concatenate */\n    strcpy(str, a);\n    strcat(str, b);\n    strcat(str, d); \n\n    /* return the pointer to the new string\n     * NOTE: clients are responsible for releasing the allocated memory\n     */\n    return str;\n}\n\nint main(void)\n{\n    const char a[] = \"lorem\";\n    const char b[] = \"impsum\";\n    const char d[] = \"dolor\";\n    char* str = concatenate(a, b, d);\n\n    printf(\"%s\\n\", str);\n    free(str);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449102396, "post_id": 34054464, "comment_id": 55865451, "body": "This API is interesting but somewhat inconsistent, why does <code>g_strconcat(NULL)</code> return <code>NULL</code> instead of a newly allocated empty string as documented?"}], "tags": [], "owner": {"reputation": 177, "user_id": 5613058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a4f95b0640a26ca27fb47cbfec1d89?s=128&d=identicon&r=PG&f=1", "display_name": "L. Carlier", "link": "https://stackoverflow.com/users/5613058/l-carlier"}, "is_accepted": false, "score": 3, "last_activity_date": 1449095841, "creation_date": 1449095841, "answer_id": 34054464, "question_id": 34053859, "link": "https://stackoverflow.com/questions/34053859/concatenate-3-strings-and-return-a-pointer-to-the-new-string-c/34054464#34054464", "title": "Concatenate 3 strings and return a pointer to the new string C", "body": "<p>If you want something even more generic (e.g. concatenate N strings), you can have a look to the implementation of g_strconcat of the glib library here:\n<a href=\"https://github.com/GNOME/glib/blob/master/glib/gstrfuncs.c#L563\" rel=\"nofollow\">https://github.com/GNOME/glib/blob/master/glib/gstrfuncs.c#L563</a></p>\n"}], "owner": {"reputation": 901, "user_id": 3573539, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1v9R5.jpg?s=128&g=1", "display_name": "Jimbo Jones", "link": "https://stackoverflow.com/users/3573539/jimbo-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10765, "favorite_count": 1, "accepted_answer_id": 34053991, "answer_count": 4, "score": 8, "last_activity_date": 1607260284, "creation_date": 1449093429, "question_id": 34053859, "link": "https://stackoverflow.com/questions/34053859/concatenate-3-strings-and-return-a-pointer-to-the-new-string-c", "title": "Concatenate 3 strings and return a pointer to the new string C", "body": "<p>I am wondering if anyone could help me, I am trying to concatenate 3 strings and return a pointer to the new string. I can't seem to figure out how to do this using strncat instead of strcat and strncpy instead of strcpy. I am only learning c, so any help wil. be greatly aprecaited.</p>\n\n<pre><code>char *\nconcatenate(char *a, char *b, char *d)\n{\n  char str[80];\n  strcpy (str, a);\n  strcat (str,b);\n  strcat (str,d); \n  puts (str);\n\n  return (NULL);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449090401, "post_id": 34052950, "comment_id": 55860242, "body": "It is quite confusing to use the same identifier <code>Adress</code> for both the typedef and the name of the local array pointer."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1449090533, "post_id": 34052950, "comment_id": 55860317, "body": "<code>Adress</code> has only one element by <code>Adress = malloc(sizeof(struct adress)*(n+1));</code>."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1449090638, "post_id": 34052950, "comment_id": 55860375, "body": "just to clarify, it is not the compiler that gives that output but your program."}, {"owner": {"reputation": 23, "user_id": 5422224, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b49d8ab1a23cabab5bb0863507abf54c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoan15", "link": "https://stackoverflow.com/users/5422224/yoan15"}, "edited": false, "score": 0, "creation_date": 1449090687, "post_id": 34052950, "comment_id": 55860400, "body": "What can i do to result the problem ?"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1449090575, "creation_date": 1449090575, "answer_id": 34053039, "question_id": 34052950, "link": "https://stackoverflow.com/questions/34052950/compiler-complain-about-glibc-detected-myprog-corrupted-double-link/34053039#34053039", "title": "Compiler complain about &#39;&#39;*** glibc detected *** ./myprog: corrupted double-linked list: 0x0000000001cd6240 *** &#39;&#39;", "body": "<p>You only allocate enough space for one <code>struct adress</code>, if you read more than one line, you will write beyond the end of the array pointed to by <code>Adress</code> and corrupt the heap.  A subsequent call to <code>malloc</code> detects this and aborts with the message: <code>./myprog: corrupted double-linked list: 0x0000000001cd6240</code>.</p>\n\n<p>Initiliaze <code>Adress</code> to <code>NULL</code>:</p>\n\n<pre><code>    struct adress *Adress = NULL;\n</code></pre>\n\n<p>and change these 3 lines:</p>\n\n<pre><code>    if (n == 0) {\n        Adress = malloc(sizeof(struct adress)*(n+1));\n    }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    Adress = realloc(Adress, sizeof(struct adress)*(n+1));\n    if (!Adress) {\n         printf(\"out of memory\\n\");\n         exit(1);\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449090923, "post_id": 34053086, "comment_id": 55860519, "body": "I&#39;m afraid you are going to confuse the OP even more.  The heap management internals are beyond the scope of this question.  Helping the OP find the offending code is more useful."}, {"owner": {"reputation": 23, "user_id": 5422224, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b49d8ab1a23cabab5bb0863507abf54c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoan15", "link": "https://stackoverflow.com/users/5422224/yoan15"}, "edited": false, "score": 0, "creation_date": 1449091921, "post_id": 34053086, "comment_id": 55861073, "body": "Thank you so much ;) Now the programm have not errors but when i put three o for adress in my file, i have just two adress in the output. Why ??"}], "tags": [], "owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "is_accepted": false, "score": 0, "last_activity_date": 1449090746, "creation_date": 1449090746, "answer_id": 34053086, "question_id": 34052950, "link": "https://stackoverflow.com/questions/34052950/compiler-complain-about-glibc-detected-myprog-corrupted-double-link/34053086#34053086", "title": "Compiler complain about &#39;&#39;*** glibc detected *** ./myprog: corrupted double-linked list: 0x0000000001cd6240 *** &#39;&#39;", "body": "<p>your program is buggy and corrupted the libc linked list that handle your memory.</p>\n\n<p>The lib c has 'private' data stored in the hunk of memory you allocated.</p>\n\n<p>usually there is a header like:</p>\n\n<pre><code>struct hdr\n{\n  size_t size;                  /* Exact size requested by user.  */\n  unsigned long int magic;      /* Magic number to check header integrity.  */\n  struct hdr *prev;\n  struct hdr *next;\n  __ptr_t block;                /* Real block allocated, for memalign.  */\n  unsigned long int magic2;     /* Extra, keeps us doubleword aligned.  */\n};\n</code></pre>\n\n<p>if one of the magic is corrupted by a buffer overflow in your code, you get such errors (as the libc can figure out that its structures were corrupted)</p>\n"}], "owner": {"reputation": 23, "user_id": 5422224, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b49d8ab1a23cabab5bb0863507abf54c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoan15", "link": "https://stackoverflow.com/users/5422224/yoan15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449093430, "creation_date": 1449090261, "last_edit_date": 1449093430, "question_id": 34052950, "link": "https://stackoverflow.com/questions/34052950/compiler-complain-about-glibc-detected-myprog-corrupted-double-link", "title": "Compiler complain about &#39;&#39;*** glibc detected *** ./myprog: corrupted double-linked list: 0x0000000001cd6240 *** &#39;&#39;", "body": "<p>I have this function :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;stdlib.h&gt;\n\n#include &lt;string.h&gt;\n\ntypedef struct adress Adress;\n\nstruct adress {char *num; char *street; char *namestreet; char *city; char *postal;};\n\nint main(void) {\n\n    int n = 0;\n\n    int i;\n\n    struct adress *Adress;\n\n    FILE *f = fopen(\"/home/file.txt\",\"r\");\n    if (!f) {\n        printf(\"Impossible to open file\\n\");\n        return 1;\n    }\n    char line[256];\n    while (fgets(line,256,f)) {\n        if (n == 0) {\n            Adress = malloc(sizeof(struct adress)*(n+1));\n        }\n        Adress[n].num = malloc( 256*sizeof( char));\n\n        Adress[n].street = malloc( 256*sizeof( char));\n\n        Adress[n].namestreet = malloc( 256*sizeof( char));\n\n        Adress[n].city = malloc( 256*sizeof( char));\n\n        Adress[n].postal = malloc( 256*sizeof( char));\n\n        fscanf( f , \"%s %s %s %s %s\", Adress[n].num, Adress[n].street, Adress[n].namestreet, Adress[n].city ,Adress[n].postal);\n\n        n++;  \n    }\n\n    for (i = 0; i &lt; n; i++)\n    {\n        printf(\"\\nNum : %s \\n\", Adress[i].num);\n        printf(\"\\nStreet : %s \\n\", Adress[i].street);\n        printf(\"\\nStreet Name :%s \\n\", Adress[i].namestreet);\n        printf(\"\\nCity :%s \\n\", Adress[i].city);\n        printf(\"\\nPostal Code : %s \\n\", Adress[i].postal);\n    }\n    fclose(f);\n    return 0;\n}\n</code></pre>\n\n<p>When I try to compile my program I get the following errors:</p>\n\n<blockquote>\n  <p><strong>* glibc detected *</strong> ./myprog: corrupted double-linked list: 0x0000000001cd6240</p>\n</blockquote>\n\n<p>What is it that I am doing wrong?</p>\n\n<p>Has anyone gotten this type of error before?</p>\n"}, {"tags": ["c", "segmentation-fault", "scanf"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1449089467, "post_id": 34052694, "comment_id": 55859716, "body": "Your scanf call looks fine. Are you sure it&#39;s the <code>scanf()</code> call that gives the segfault and not some other part of the code?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1449089528, "post_id": 34052694, "comment_id": 55859745, "body": "Please use a debugger for this kind of problems. We can&#39;t help you here, without an minimal complete example."}, {"owner": {"reputation": 435, "user_id": 562325, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3e2fcc2d0f1c77be361c54c00fbe8eee?s=128&d=identicon&r=PG", "display_name": "vidit jain", "link": "https://stackoverflow.com/users/562325/vidit-jain"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1449089604, "post_id": 34052694, "comment_id": 55859777, "body": "@BlueMoon I guess so output of above code is      <code>Connection Established Successfully 4 4  Segmentation fault (core dumped)</code> 4 4 is the input given"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1449089793, "post_id": 34052694, "comment_id": 55859861, "body": "Take a look <a href=\"https://www.cs.rutgers.edu/~pxk/417/notes/rpc/step5.html\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 435, "user_id": 562325, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3e2fcc2d0f1c77be361c54c00fbe8eee?s=128&d=identicon&r=PG", "display_name": "vidit jain", "link": "https://stackoverflow.com/users/562325/vidit-jain"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1449090006, "post_id": 34052694, "comment_id": 55859989, "body": "@Michi the given program used command line argument not input from console."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1449089992, "creation_date": 1449089992, "answer_id": 34052877, "question_id": 34052694, "link": "https://stackoverflow.com/questions/34052694/scanf-not-behaving-properly/34052877#34052877", "title": "scanf not behaving properly", "body": "<p>Your problem is most likely somewhere else.\nI suspect the output from the second <code>printf</code> does not get flushed to the terminal and the program keeps going until you crash somewhere later in the calling function.</p>\n\n<p>Modify the function this way and retest:</p>\n\n<pre><code>printf(\"Connection Established Successfully\\n\");\nscanf(\"%d %d\",&amp;x ,&amp;y);\nprintf(\"Input Successfully\\n\");\nfflush(stdout);\nadd_1_arg.a = x;\nadd_1_arg.a = y;\n</code></pre>\n\n<p>You should learn to use a debugger such as <code>gdb</code>: when the program hits a segmentation fault, the OS dumps a file named <code>core</code> that you can load with the debugger.  It contains all the info to point exactly when the fault occurred.</p>\n"}], "owner": {"reputation": 435, "user_id": 562325, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3e2fcc2d0f1c77be361c54c00fbe8eee?s=128&d=identicon&r=PG", "display_name": "vidit jain", "link": "https://stackoverflow.com/users/562325/vidit-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 34052877, "answer_count": 1, "score": 0, "last_activity_date": 1449089992, "creation_date": 1449089351, "last_edit_date": 1449089790, "question_id": 34052694, "link": "https://stackoverflow.com/questions/34052694/scanf-not-behaving-properly", "title": "scanf not behaving properly", "body": "<p>I am trying to input 2 numbers via scanf but scanf throws segmentation fault. </p>\n\n<pre><code>void add_prog_1(char *host){\nCLIENT *clnt;\nint *result_1;\nintpair add_1_arg;\nint x;\nint y;\nclnt = clnt_create (host, ADD_PROG, ADD_VERS, \"udp\");\nif (clnt == NULL) {\n    clnt_pcreateerror (host);\n    exit (1);\n} else {\n\n    printf(\"Connection Established Successfully\");\n    scanf(\"%d %d\",&amp;x ,&amp;y);\n    printf(\"Input Successfully\");\n    add_1_arg.a = x;\n    add_1_arg.a = y;\n\n}\n</code></pre>\n\n<p>Output of the program is </p>\n\n<pre><code>Connection Established Successfully\n4 4 \nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Please help!!</p>\n"}, {"tags": ["c", "null"], "comments": [{"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 2, "creation_date": 1449089184, "post_id": 34052618, "comment_id": 55859545, "body": "change <code>printf(&quot;%d\\n&quot;, largest(2, 4));</code> to <code>largest(2, 4);</code> you already do the printf in the function."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1449089236, "post_id": 34052618, "comment_id": 55859576, "body": "You don&#39;t seem to have a clear idea of which function&#39;s responsibility it is to do the printing. <code>largest</code> prints a message, but then <code>main</code> calls <code>printf</code> expecting <code>largest</code> to return an <code>int</code>."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1449089518, "post_id": 34052618, "comment_id": 55859738, "body": "Also, the <code>getchar</code> after the <code>return</code> has no effect."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1449089744, "post_id": 34052618, "comment_id": 55859834, "body": "Apart from duplication, the major problem is your <code>int</code> function does not return any value, so you print an undefined value in <code>main()</code>. The compiler would tell you this, if you looked at the warnings."}], "answers": [{"comments": [{"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 1, "creation_date": 1449089238, "post_id": 34052651, "comment_id": 55859578, "body": "this has no effect on his question"}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 1, "creation_date": 1449089299, "post_id": 34052651, "comment_id": 55859624, "body": "he would still get the wrong output even with this change."}, {"owner": {"reputation": 2503, "user_id": 3700563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f0a11869957330c6018b71ec9310138?s=128&d=identicon&r=PG&f=1", "display_name": "JJF", "link": "https://stackoverflow.com/users/3700563/jjf"}, "reply_to_user": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1449089775, "post_id": 34052651, "comment_id": 55859849, "body": "The question as I read it is &quot;the output gives me some garbage number&quot;.  I assume the garbage number is the value 2 printed by the first line in main() as it is trying to print the larger of the values 2 and 4 which clearly is not 2.  My answer fixes that problem.  I assumed the printfs were debugging aids and he&#39;s not complaining about too much output rather that the function he wrote is not working.  Which it wasn&#39;t because it returned nothing explicitly."}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1449089919, "post_id": 34052651, "comment_id": 55859936, "body": "see this is where we don&#39;t agree -- I don&#39;t think it is trying to print anything -- I think the programmer does not know what the printf statement does."}], "tags": [], "owner": {"reputation": 2503, "user_id": 3700563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f0a11869957330c6018b71ec9310138?s=128&d=identicon&r=PG&f=1", "display_name": "JJF", "link": "https://stackoverflow.com/users/3700563/jjf"}, "is_accepted": false, "score": 0, "last_activity_date": 1449096863, "last_edit_date": 1449096863, "creation_date": 1449089181, "answer_id": 34052651, "question_id": 34052618, "link": "https://stackoverflow.com/questions/34052618/function-with-garbage-at-the-end-of-the-string-tried-with-null/34052651#34052651", "title": "Function with garbage at the end of the string (tried with NULL)", "body": "<p>You do not return any value from your largest() function. e.g <code>return num1;</code> when num1 is larger.</p>\n\n<pre><code>int largest(int num1, int num2)\n{\n    int biggest;\n    if (num2 &gt; num1) \n        return num2;\n    else\n       return num1;\n}\n</code></pre>\n\n<p>But this implementation has a problem as well: what if the number are equal.  You would have no way of determining that with this interface as it appears to be defined such that the return value is the larger of the two.</p>\n\n<p>An alternate way to implement this would be to have the function return -1 if num1 > num2, 1 of num2 > num1 and 0 if the values were equal.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char **argv);\nint largest(int num1, int num2, int* largestValue);\n\n/*******************************************/\n/* function that compares two numbers and  */\n/* returns:                                */\n/*    -1 if num1 &gt; num2                    */\n/*     1 if num2 &gt; num1                    */\n/*     0 if num1 == num2                   */\n/* if the return value is not 0 then the   */\n/* larger of the numbers is copied into    */\n/* the location pointed to by largestValue */\n/*******************************************/\nint largest(int num1, int num2, int *largestValue)  {\n   int rc = 0;\n\n   if (num1 &gt; num2) {\n      rc = -1;\n      *largestValue = num1;\n   } else if (num2 &gt; num1) {\n      rc = 1;\n      *largestValue = num2;\n   }\n\n   return rc;\n}\n\n\n/* run pgm with \"pgname num1 num2\" */\nint main(int argc, char **argv)  {\n   int largestNum;\n   int num1=atoi(argv[1]);\n   int num2=atoi(argv[2]);\n\n   int rc = largest(num1, num2, &amp;largestNum);\n\n   if (rc != 0)\n      printf(\"Largest of %d and %d is %d\\n\", num1, num2, largestNum);\n   else\n      printf(\"The numbers are equal\");\n\n   return 0;\n}\n</code></pre>\n\n<p>But that really seems like overkill to have a function whose purpose was to return the larger of two values.  Most if not all standard libraries provide max() macro that do what you were originally trying with your largest() function.</p>\n"}, {"comments": [{"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1449089228, "post_id": 34052662, "comment_id": 55859569, "body": "this has no effect on his question"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1449090643, "post_id": 34052662, "comment_id": 55860378, "body": "@Hogan - OP really asks only one question.  This answer addresses it. ( <i>how do i get rid of it?</i> ).  As for the rest, it is valid and useful information."}], "tags": [], "owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1449091161, "last_edit_date": 1449091161, "creation_date": 1449089212, "answer_id": 34052662, "question_id": 34052618, "link": "https://stackoverflow.com/questions/34052618/function-with-garbage-at-the-end-of-the-string-tried-with-null/34052662#34052662", "title": "Function with garbage at the end of the string (tried with NULL)", "body": "<ol>\n<li><code>getchar()</code> is after <code>return</code> in the main function.</li>\n<li>the first line of output is from function <code>largest()</code>.</li>\n<li>the second line of output <code>2</code> is the function return value printed by <code>printf()</code>, since you don't have any return value inside the function, it will output the default return value.</li>\n</ol>\n\n<p>Solution: Don't call function inside <code>printf()</code>. you can call function directly.</p>\n\n<blockquote>\n  <p><code>largest(2,4);</code> instead of <code>printf(\"%d\\n\", largest(2, 4));</code>\n            or add return statement inside function where ever necessary.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1449089351, "post_id": 34052685, "comment_id": 55859652, "body": "this would still have the same problem it would just print 4 not 2"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449089453, "post_id": 34052685, "comment_id": 55859710, "body": "Could be simplified by removing all the unnecessary <code>else</code> clauses you introduced following <code>return</code>. It <i>looks</i> as though not all paths return a value."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449089728, "post_id": 34052685, "comment_id": 55859827, "body": "@WeatherVane The way it was set up before with only <code>if</code>s, it&#39;s possible that there could be a path that doesn&#39;t return if the conditions have a bug in them.  With the <code>if</code>...<code>else</code> structure here, than ensures that all paths return."}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "reply_to_user": {"reputation": 1941, "user_id": 988207, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a757b52f46dede44d9323d13fb65cf4?s=128&d=identicon&r=PG", "display_name": "Andrew Falanga", "link": "https://stackoverflow.com/users/988207/andrew-falanga"}, "edited": false, "score": 0, "creation_date": 1449089999, "post_id": 34052685, "comment_id": 55859981, "body": "@AndrewFalanga - we are not told the point -- we are told the &quot;2&quot; is garbage.  Solution: take out the line that prints it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449090004, "post_id": 34052685, "comment_id": 55859988, "body": "@dbush my point was you don&#39;t need an <code>else</code> after a <code>return</code> or a <code>break</code> or a <code>goto</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1449090232, "post_id": 34052685, "comment_id": 55860139, "body": "@Hogan  We are told the point:  &quot;What im trying to do, is <b>a function that return the greater value for two numbers</b>. However, the <b>output brings me some garbage number, and thats my problem</b>&quot;, i.e. the fact that the value is garbage is the issue, not the fact that there&#39;s something there at all."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1449091124, "last_edit_date": 1449091124, "creation_date": 1449089314, "answer_id": 34052685, "question_id": 34052618, "link": "https://stackoverflow.com/questions/34052618/function-with-garbage-at-the-end-of-the-string-tried-with-null/34052685#34052685", "title": "Function with garbage at the end of the string (tried with NULL)", "body": "<p>The problem is here:</p>\n\n<pre><code>printf(\"%d\\n\", largest(2, 4));\n</code></pre>\n\n<p>You're printing the return value of the <code>largest</code> function, but you aren't returning any value from that function.</p>\n\n<p>Update your function to return the larger value in each of the cases:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nint largest(int num1, int num2)\n{\n    if (num2 &gt; num1) {\n        printf(\"%d is bigger than %d\\n\", num2, num1);\n        return num2;\n    } else if (num1 &gt; num2){\n        printf(\"%d is bigger than %d\\n\", num1, num2);\n        return num1;\n    } else {\n        printf(\"%d and %d are equal\\n\", num1, num2);\n        return num1;\n    }\n}\n\n\nint main()\n\n{\n\n    printf(\"%d\\n\", largest(2, 4));\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 1, "last_activity_date": 1449089512, "creation_date": 1449089512, "answer_id": 34052731, "question_id": 34052618, "link": "https://stackoverflow.com/questions/34052618/function-with-garbage-at-the-end-of-the-string-tried-with-null/34052731#34052731", "title": "Function with garbage at the end of the string (tried with NULL)", "body": "<p>The computer is printing an extra number <strong>because you told it to</strong>:</p>\n\n<pre><code>printf(\"%d\\n\", largest(2, 4));\n</code></pre>\n\n<p>If you <em>don't</em> want to print the return value of <code>largest(2, 4)</code>, then change this to just:</p>\n\n<pre><code>largest(2, 4);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1449091597, "post_id": 34053056, "comment_id": 55860901, "body": "As long as you are implementing, what about if <code>num1</code> == <code>num2</code>?  It appears the answer would incorrectly indicate <code>num2</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1449091948, "post_id": 34053056, "comment_id": 55861094, "body": "@ryyker that is not what was asked. OP asked why there is garbage, that his function is supposed to return a value. I simplified the code to illustrate why."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1449093319, "post_id": 34053056, "comment_id": 55861817, "body": "@ryyker please explain why <code>4</code> would be the wong answer for <code>largest(4, 4)</code>. Are you saying it should have been the <i>other</i> <code>4</code>? It returns the larger value of two numbers, so my own quibble is that the function should be called <code>larger</code>."}, {"owner": {"reputation": 2503, "user_id": 3700563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f0a11869957330c6018b71ec9310138?s=128&d=identicon&r=PG&f=1", "display_name": "JJF", "link": "https://stackoverflow.com/users/3700563/jjf"}, "edited": false, "score": 0, "creation_date": 1449096797, "post_id": 34053056, "comment_id": 55863521, "body": "I handled this situation in the answer below"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1449100056, "post_id": 34053056, "comment_id": 55864774, "body": "@WeatherVane - Lol, point taken.  I truly failed to see that when I commented.  Wow, too much going on.  Nice answer."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 3, "last_activity_date": 1449090633, "creation_date": 1449090633, "answer_id": 34053056, "question_id": 34052618, "link": "https://stackoverflow.com/questions/34052618/function-with-garbage-at-the-end-of-the-string-tried-with-null/34053056#34053056", "title": "Function with garbage at the end of the string (tried with NULL)", "body": "<p>Your function is not returning any value, so the <code>printf</code> in <code>main</code> prints garbage. The function is also duplicating the print in <code>main</code>. Here is a simple remedy.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint largest(int num1, int num2)\n{\n    return num1 &gt; num2 ? num1 : num2;\n}\n\nint main(void)\n{\n    printf(\"%d\\n\", largest(2, 4));\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>4\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5178142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/af301bc5fa7e455b6454283f7b08cc63?s=128&d=identicon&r=PG&f=1", "display_name": "tryingsohard", "link": "https://stackoverflow.com/users/5178142/tryingsohard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 34053056, "answer_count": 5, "score": -3, "last_activity_date": 1449096863, "creation_date": 1449089055, "question_id": 34052618, "link": "https://stackoverflow.com/questions/34052618/function-with-garbage-at-the-end-of-the-string-tried-with-null", "title": "Function with garbage at the end of the string (tried with NULL)", "body": "<p>Im a beginner and i've looked everywhere for this solution but without result. What im trying to do, is a function that return the greater value for two numbers.\nHowever, the output brings me some garbage number, and thats my problem.\nHeres my code</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   #include &lt;stdlib.h&gt;\n   #include &lt;conio.h&gt;\n\nint largest(int num1, int num2)\n{\n    int biggest;\n    if (num2 &gt; num1) {\n        printf(\"%d is bigger than %d\\n\\0\", num2, num1);\n    }\n    if (num1 &gt; num2){\n        printf(\"%d is bigger than %d\\n\", num1, num2);\n    }\n    if (num1 == num2) {\n        printf(\"%d and %d are equal\\n\", num1, num2);\n    }\n}\n\n\nint main()\n\n{\n\n    printf(\"%d\\n\", largest(2, 4));\n\n    return(0);\n    getchar();\n\n}\n</code></pre>\n\n<p>I've tried to use \\0 at the end of my string but my output still gives me this:</p>\n\n<pre><code>4 is bigger than 2\n2\n</code></pre>\n\n<p>The duece at the end is my problem(sometimes its a different character), how do i get rid of it? And again, the point here is the function, i can do it without a function but i want to learn functions.\nThanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 8, "creation_date": 1449087304, "post_id": 34052139, "comment_id": 55858602, "body": "The format argument is a single string, e.g. <code>&quot;%d%f%s&quot;</code>"}, {"owner": {"reputation": 712, "user_id": 4979380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-s_LEy5WIb-s/AAAAAAAAAAI/AAAAAAAAAHc/IDwR0EhwHdc/photo.jpg?sz=128", "display_name": "Hemant Parihar", "link": "https://stackoverflow.com/users/4979380/hemant-parihar"}, "edited": false, "score": 0, "creation_date": 1449087411, "post_id": 34052139, "comment_id": 55858658, "body": "what are you doing playing editing editing."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 3, "creation_date": 1449087978, "post_id": 34052139, "comment_id": 55858952, "body": "Try <b><i>reading the documentation</i></b>.  <a href=\"http://www.cplusplus.com/reference/cstdio/fscanf/\" rel=\"nofollow noreferrer\">fscanf</a> and <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">printf</a>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1449087654, "post_id": 34052262, "comment_id": 55858777, "body": "Note: the spaces in <code>&quot;%d %f %s&quot;</code> are not needed, but do no real harm."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1449087947, "post_id": 34052262, "comment_id": 55858935, "body": "Thanks I was wondering, using %f should be fine to read the decimal 3.1 correct? my printf keeps outputting some huge number starting with -92559604"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449088010, "post_id": 34052262, "comment_id": 55858965, "body": "Use <code>%f</code> to read to <code>float</code>, use <code>%lf</code> to read into <code>double</code>."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1449088017, "post_id": 34052262, "comment_id": 55858968, "body": "Nevermind, I fixed it thanks thanks Weather Vane I just realized that too"}], "tags": [], "owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "is_accepted": true, "score": 3, "last_activity_date": 1449087810, "last_edit_date": 1449087810, "creation_date": 1449087582, "answer_id": 34052262, "question_id": 34052139, "link": "https://stackoverflow.com/questions/34052139/reading-information-from-file/34052262#34052262", "title": "Reading information from file", "body": "<p>Your format specifiers for both <code>fscanf</code> and <code>printf</code> need to be a single string.</p>\n\n<p>So for example, the following might work for you:</p>\n\n<pre><code>fscanf(fr, \"%d%f%s\", &amp;age, &amp;grade, class);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>printf(\"%d, %f, %s\", age, grade, class);\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 34052262, "answer_count": 1, "score": -3, "last_activity_date": 1449088267, "creation_date": 1449087182, "last_edit_date": 1449087365, "question_id": 34052139, "link": "https://stackoverflow.com/questions/34052139/reading-information-from-file", "title": "Reading information from file", "body": "<p>In C I'm trying to read a line data from a file and save it.\nI think i'm opening it properly but when I try to print it, it isn't working properly</p>\n\n<p>example: I'm trying to read a line with: </p>\n\n<pre><code>20 3.1 U\n</code></pre>\n\n<p>I'm using fscanf but it is only reading the first data properly.\nWhat I've been trying</p>\n\n<pre><code>fscanf(fr, \"%d\",\"%f\",\"%s\",&amp;age, &amp;grade, class);\n</code></pre>\n\n<p>Am I getting the parameter format wrong?\nWhen I only do the first parameter it works fine</p>\n\n<pre><code>fscanf(fr, \"%d\",&amp;age, &amp;grade, class);\n</code></pre>\n\n<p>I'm trying to use printf to print</p>\n\n<pre><code>printf(\"%d\",\"%f\",\"%s\",age, grade, class);\n</code></pre>\n\n<p>only age is printing properly</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 3, "creation_date": 1449086274, "post_id": 34051841, "comment_id": 55858036, "body": "So declare those variables?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1449086323, "post_id": 34051841, "comment_id": 55858067, "body": "There are obvious syntax errors in your code."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1449087152, "post_id": 34051841, "comment_id": 55858513, "body": "You seem to be using function arguments as local variables. Just declare <code>answer</code> as a local variable, and remove it from the argument list."}], "answers": [{"tags": [], "owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "is_accepted": false, "score": 1, "last_activity_date": 1451655264, "creation_date": 1451655264, "answer_id": 34556572, "question_id": 34051841, "link": "https://stackoverflow.com/questions/34051841/error-answer-undeclared-first-use-in-this-function/34556572#34556572", "title": "error: &#39;answer&#39; undeclared (first use in this function)", "body": "<p>Declare the variables in the beginning of the function used in. Leave one empty row after those. Also don't forget to initialize them (somewhere before using their value), otherwise you can get only garbage.</p>\n\n<p>About the warning: </p>\n\n<p>You must take care of the priority in which you want to use the operators. Moreover, both <code>&amp;&amp;</code> and <code>||</code> are binary operators, so they take 2 arguments. That's why you must put parentheses. Probably like:</p>\n\n<pre><code>while(answer != 1 &amp;&amp; (answer != 0 || status == 0))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5631838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd9771fdf3265a6241ea7e5c7070f74?s=128&d=identicon&r=PG&f=1", "display_name": "D. Fike", "link": "https://stackoverflow.com/users/5631838/d-fike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2317, "favorite_count": 0, "answer_count": 1, "score": -8, "last_activity_date": 1451655264, "creation_date": 1449086155, "last_edit_date": 1449086461, "question_id": 34051841, "link": "https://stackoverflow.com/questions/34051841/error-answer-undeclared-first-use-in-this-function", "title": "error: &#39;answer&#39; undeclared (first use in this function)", "body": "<p>I need help with this code I don't know what to do.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\n\nint input(float nom[],float toler[],int SIGN[],char V_F[],float *Spec_Min,float *Spec_Max);\n\nfloat tolerances(int size, float nom[],float toler[],int SIGN[],char V_F[],float Spec_Min,float Spec_Max);\n\nvoid adjust(int size, float nom[],float toler[],int SIGN[],char V_F[],float Spec_Min,float Spec_Max, int answer, float *dimension, float *impact, float *DgapMean, float *gaptol, float *newtol, float *newdim);\n\n\nint main(void)\n{\n    float nom[70], toler[70], Spec_Min=0, Spec_Max=0;\n    int SIGN[70];\n    char V_F[70];\n    int i, n;\n    n = input( nom, toler, SIGN, V_F, &amp;Spec_Min, &amp;Spec_Max);\n    for(i=0; i&lt;n; ++i)\n    {\n        printf(\"Part: %f, %d, %f, %c\\n\\n\", nom[i], SIGN[i], toler[i], V_F[i]);//printing off all parts and the dimensions tolerances and if the part is fixed or variable\n    }\n    printf(\"_______________________\\n\");\n    printf(\"Gap: %f, %f\\n\\n\", Spec_Min, Spec_Max);//print the size of the gap\n    int size = 0;\n    size = input( nom, toler, SIGN, V_F, &amp;Spec_Min, &amp;Spec_Max);\n\n    tolerances(size, nom, toler, SIGN, V_F, Spec_Min, Spec_Max);\n&gt;line 43 is below this\n\n    adjust( size, nom, toler, SIGN, V_F, Spec_Min, Spec_Max, answer, &amp;dimension, &amp;impact, &amp;DgapMean, &amp;gaptol, &amp;newtol, &amp;newdim);\n    return 0;\n\n\n}\n\nint input(float nom[],float toler[],int SIGN[],char V_F[],float *Spec_Min,float *Spec_Max)\n{\n    int status, i;\n    FILE *FTIN;\n    FTIN = fopen (\"C:\\\\EGR107\\\\input.txt\", \"r\");\n\n    if (FTIN == NULL)\n    {\n        printf(\"ERROR\\n\");//if the file didnt work show an error\n        return -1;\n    }\n    else\n    {\n        for(i=0;;)\n        {\n            if((status = fscanf(FTIN,\" PART,%f,%d,%f,%c\", &amp;nom[i], &amp;SIGN[i], &amp;toler[i], &amp;V_F[i]))==4)//scans parts until it doesnt start with part\n            {\n                ++i;\n            }\n            else if((status = fscanf(FTIN, \" GAP,%f,%f\", Spec_Min, Spec_Max))==0)//scans gap after part was scaned\n            {\n                fgetc(FTIN);\n            }\n            else if(status == EOF)\n            {\n                break;\n            }\n        }\n    }\n    fclose(FTIN);\n    return i;\n}\n\n\nfloat tolerances(int size, float nom[],float toler[],int SIGN[],char V_F[],float Spec_Min,float Spec_Max)\n    {\n\n    int x;\n    float Act_Gap, Act_Toler, Max_Gap = 0.0, Min_Gap = 0.0;\n    for ( x=0, Act_Gap = 0; x&lt;size; x++)    //does math for the tolerance\n    {\n        Act_Gap = Act_Gap + (nom[x]*SIGN[x]);\n    }\n    for ( x=0, Act_Toler = 0; x&lt;size; x++)\n    {\n        Act_Toler = Act_Toler + (toler[x]);\n    }\n    for (x= 0, Max_Gap = 0; x&lt;size; x++)\n    {\n        Max_Gap = (nom[x]*SIGN[x]+toler[x])+Max_Gap;\n        Min_Gap = (nom[x]*SIGN[x]-toler[x])+Min_Gap;\n    }\n    printf(\"_______________________\\n\");\n    printf(\"Actual Gap Mean: %.3f\\\"\\n\\n\", Act_Gap);  //printing actual gap and gap tolerances\n    printf(\"Actual Gap Tolerance: %.3f\\\"\\n\\n\", Act_Toler);\n    if (Max_Gap &gt; Spec_Max)\n    {\n        printf(\"The Maximum gap %.3f\\\" is Greater than specified %.3f\\\"\\n\\n\", Max_Gap, Spec_Max);//printing whether or not the max gap is greater than or less than the specified\n    }\n    if (Max_Gap &lt; Spec_Max)\n    {\n        printf(\"The Maximum gap %.3f\\\" is Less than specified %.3f\\\"\\n\\n\", Max_Gap, Spec_Max);\n    }\n    if (Min_Gap &gt; Spec_Min)\n    {\n        printf(\"The Minimum gap %.3f\\\" is Greater than specified %.3f\\\"\\n\\n\", Min_Gap, Spec_Min);//printing whether or not the min gap is greater than or less than the specified\n    }\n    if (Min_Gap &lt; Spec_Min)\n    {\n        printf(\"The Minimum gap %.3f\\\" is Less than specified %.3f\\\"\\n\\n\", Min_Gap, Spec_Min);\n    }\n    return 0;\n}\n\nvoid adjust(int size, float nom[],float toler[],int SIGN[],char V_F[],float Spec_Min,float Spec_Max,int answer, float *dimension, float *impact, float *DgapMean, float *gaptol, float *newtol, float *newdim)\n{\n\n    int i, x, status, change;\n    double gapmean, Atolerance, changeinNOM, changeinTOL;\n\n    double Part, TOL;\n\n    for(i=0; i&lt;size; i++)\n    {\n        gapmean = gapmean+(dimension[i]*impact[i]);         //gets actual gap of parts\n        printf(\"Gap Mean: %.3f\\n\", gapmean);\n        Atolerance = Atolerance + toler[i];             //gets actual tolerance of parts\n        printf(\"Actual Tolerance: %.3f\\n\",Atolerance);\n\n    }\n\n    changeinNOM = *DgapMean - gapmean;                  //finds change in the dimension\n    printf(\"Change in nominal value: %.3f\\n\",changeinNOM);\n    changeinTOL = Atolerance - *gaptol;                 //finds change in the tolerance\n    printf(\"Change in tolerance value: %.3f\\n\",changeinTOL);\n\n    printf(\"____________________________\\n\");   //return\n    printf(\"\\n\");   //return\n\n    for(i=0; i&lt;size; i++)\n    {\n        if(V_F[i] == 'V')      //looks for variable part\n        {\n            Part = dimension[i] - changeinNOM;          //calculates new dimension of part\n            TOL = toler[i] - changeinTOL;           //calculates new tolerance of part\n            if(TOL &lt; 0)\n            {\n                printf(\"Part %d cannot be changed\\n\", i+1);\n            }\n            if(TOL &gt;= 0)\n            {\n                printf(\"Part %d will be changed to %.3f\\n\",i+1,Part);\n                printf(\"Tolerance of Part %d will be changed to %.3f\\n\",i+1, TOL);\n                printf(\"Would you like to save the changes?\\n\");\n                printf(\"Please enter a number value 1 for yes or 0 or no.\\n\");\n                do\n                {\n                    status = scanf(\"%d\", &amp;answer);\n                    if(x != 1 &amp;&amp; x != 0)\n                    {\n                        printf(\"Please enter a number value 1 or 0.\\n\");\n                        fflush(stdin);\n                    }\n                    if(answer == 1)\n                    {\n                        change = 1;\n                    }\n                    else if(answer == 0)\n                    {\n                        change = 0;\n                    }\n                }\n                while(answer != 1 &amp;&amp; answer != 0 || status == 0);\n\n                if(change == 1)\n                {\n                    newdim[i] = Part;\n                    newtol[i] = TOL;\n                    printf(\"New Part dimension: %.3f and new part tolerance: %.3f\\n\", newdim[i], newtol[i] );\n                    printf(\"Your changes have been made.\\n\");\n                }\n                else if(change == 0)\n                {\n                    printf(\"Your changes will not be saved.\\n\");\n                }\n\n            }\n\n        }\n    }\n}\n</code></pre>\n\n<p>Compiler output:</p>\n\n<pre><code>||=== Build: Debug in Final_project_12_2_15 (compiler: GNU GCC Compiler) ===|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c||In function 'main':|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|error: 'answer'   undeclared (first use in this function)|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|note: each undeclared  identifier is reported only once for each function it appears in|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|error: 'dimension' undeclared (first use in this function)|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|error: 'impact' undeclared (first use in this function)|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|error: 'DgapMean' undeclared (first use in this function)|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|error: 'gaptol' undeclared (first use in this function)|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|error: 'newtol' undeclared (first use in this function)|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|43|error: 'newdim' undeclared (first use in this function)|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c||In function 'adjust':|\nC:\\EGR107\\Code_Blocks\\Final_project_12_2_15\\main.c|179|warning: suggest parentheses around '&amp;&amp;' within '||' [-Wparentheses]|\n||=== Build failed: 7 error(s), 1 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["java", "android", "c", "android-studio", "android-ndk"], "comments": [{"owner": {"reputation": 7514, "user_id": 4128945, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/U1QZS.jpg?s=128&g=1", "display_name": "Bhargav", "link": "https://stackoverflow.com/users/4128945/bhargav"}, "edited": false, "score": 0, "creation_date": 1449085406, "post_id": 34051511, "comment_id": 55857564, "body": "my guess is that its some gradle task that is mucking the build"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1449089407, "post_id": 34051511, "comment_id": 55859689, "body": "first of all, you don&#39;t need root to access the libraries in <b>/data/app-lib/com.myapp.test-1/</b>"}, {"owner": {"reputation": 1427, "user_id": 870135, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c38999ade29a05b0750a21bf2ec4f33d?s=128&d=identicon&r=PG", "display_name": "CCJ", "link": "https://stackoverflow.com/users/870135/ccj"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 1, "creation_date": 1449090201, "post_id": 34051511, "comment_id": 55860119, "body": "@AlexCohn true, but you do need root to list the contents of /data/app-lib via adb shell &#39;ls -al /data/app-lib&#39;, and I didn&#39;t want to have to get my app&#39;s folder&#39;s name at runtime from Context::getApplicationInfo().nativeLibraryDir"}, {"owner": {"reputation": 1560, "user_id": 4758618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f04c304d3c41dcc6f9b721cbe22d4f0?s=128&d=identicon&r=PG&f=1", "display_name": "V-master", "link": "https://stackoverflow.com/users/4758618/v-master"}, "edited": false, "score": 1, "creation_date": 1449128764, "post_id": 34051511, "comment_id": 55874281, "body": "@CCJ you dont need to if you are running debug app: <a href=\"http://stackoverflow.com/a/7712173/4758618\">stackoverflow.com/a/7712173/4758618</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1427, "user_id": 870135, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c38999ade29a05b0750a21bf2ec4f33d?s=128&d=identicon&r=PG", "display_name": "CCJ", "link": "https://stackoverflow.com/users/870135/ccj"}, "edited": false, "score": 0, "creation_date": 1449245655, "post_id": 34053028, "comment_id": 55937639, "body": "huh, weird.  I wonder how/why libmyotherlib made it past the install process then?  The final apk had a libtest for all abis, including armeabi-v7a, but libmyotherlib was only present in armeabi..."}, {"owner": {"reputation": 1427, "user_id": 870135, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c38999ade29a05b0750a21bf2ec4f33d?s=128&d=identicon&r=PG", "display_name": "CCJ", "link": "https://stackoverflow.com/users/870135/ccj"}, "edited": false, "score": 1, "creation_date": 1449247326, "post_id": 34053028, "comment_id": 55938772, "body": "could the installer have detected that there was a library called libmylib available in the device&#39;s /system/lib directory?  If so, that could explain why libmyotherlib made it through installation and libmylib was thrown out -- the actual library I&#39;m loading is a modified version of one found under /system/lib on my test device, so that and/or the abi best-fit filtration you mentioned would explain the behavior I saw"}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 2, "last_activity_date": 1449090537, "creation_date": 1449090537, "answer_id": 34053028, "question_id": 34051511, "link": "https://stackoverflow.com/questions/34051511/android-native-libs-disappearing-once-app-is-installed/34053028#34053028", "title": "Android native libs disappearing once app is installed", "body": "<p>Yes, the best approach is to define <strong>jniLibs.srcDir</strong> such that all prebuilt libraries can be copied from there.</p>\n\n<p>Yes, the ABI is the most probable source of the problem. If the prebuilt library was built for <strong>armeabi</strong> but the device (as the vast majority of devices today) supports <strong>armeabi-v7a</strong>, then the installer will happily copy the <strong>\u2026v7a</strong> versions of your not-prebuilt libraries to <strong>/data/app-lib/com.myapp.test-1</strong>, and the loader will later complain that <strong>libmylib.so</strong> is missing.</p>\n\n<p>You should instruct Android Studio to only build one ABI. If you did not do something special in Eclipse build, then this is most likely <strong>armeabi</strong>.</p>\n\n<p>The way to instruct AS depends on the version of gradle plugin.</p>\n\n<p>For <strong>'com.android.tools.build:gradle:1.5.0'</strong> plugin, I use something like </p>\n\n<pre><code>android {\n    defaultConfig.ndk {\n        \u2026\n        abiFilter 'armeabi'\n    }\n\n    splits {\n        abi {\n            enable true\n            reset()\n            include 'armeabi'\n        }\n    }\n}\n</code></pre>\n\n<p>For <strong>\u2026gradle-experimental:0.2.0</strong>, I use</p>\n\n<pre><code>model {\n    android.ndk {\n        \u2026\n        abiFilters += 'armeabi'\n    }\n}\n</code></pre>\n\n<p>I didn't have a need to enable splits on the <em>experimental</em> plugin, so I will not mislead you about the syntax changes there.</p>\n"}], "owner": {"reputation": 1427, "user_id": 870135, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c38999ade29a05b0750a21bf2ec4f33d?s=128&d=identicon&r=PG", "display_name": "CCJ", "link": "https://stackoverflow.com/users/870135/ccj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2404, "favorite_count": 1, "accepted_answer_id": 34053028, "answer_count": 1, "score": 1, "last_activity_date": 1449090537, "creation_date": 1449085170, "last_edit_date": 1495542616, "question_id": 34051511, "link": "https://stackoverflow.com/questions/34051511/android-native-libs-disappearing-once-app-is-installed", "title": "Android native libs disappearing once app is installed", "body": "<p>After switching to Android Studio, I began seeing the dreaded </p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: dlopen failed: library\n'/data/app-lib/com.myapp.test-1/libmylib.so' not found \n</code></pre>\n\n<p>error. When I unpack the apk, I can see libmylib.so along with all the other native libraries (libmyotherlib.so and libtest.so) under the lib/armeabi folder, so packaging shouldn't be the problem... I decided to root my test device and check out the actual contents of my app's folder under /data/app-lib, where its native libraries should be after install -- I found that one of my app's native libraries (libmylib.so) was missing after the app is installed on a device.  libmylib.so and libmyotherlib.so are pre-built .so files placed in src/main/jniLibs, and libtest.so is compiled from test.c in src/main/jni.   </p>\n\n<p>This only started after I switched to Android Studio; I've verified that apks built from the same code in Eclipse ADT have all the required libraries present under /data/app-lib/com.myapp.test-1 after installation.</p>\n\n<p>Relevant build.gradle for Android Studio build:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"21.1.2\"\n\n    defaultConfig {\n        applicationId \"com.myapp.test\"\n        minSdkVersion 17\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n\n        ndk{\n\n            moduleName \"test\"//testing ndk integration\n        }\n\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'  \n        }\n    }\n\n}\n\nrepositories {\n    // You can also use jcenter if you prefer\n    mavenCentral()\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n\n    //android support libs etc.\n    compile 'com.android.support:appcompat-v7:23.1.0'\n    compile 'com.android.support:support-v13:23.1.0'\n\n}\n</code></pre>\n\n<p>Relevant gradle.properties file</p>\n\n<pre><code>android.useDeprecatedNdk=true\n</code></pre>\n\n<p>Under src/main/jni I have only test.c</p>\n\n<pre><code>#include &lt;jni.h&gt;\n\nint main(){\n\n    return 0;\n}\n</code></pre>\n\n<p>and under src/main/jniLibs/armeabi I have</p>\n\n<pre><code>libmylib.so\nlibmyotherlib.so\n</code></pre>\n\n<p>Relevant Android.mk for Eclipse ADT build:</p>\n\n<pre><code>include $(CLEAR_VARS)\nLOCAL_MODULE    := test\nLOCAL_SRC_FILES += test.c\ninclude $(BUILD_SHARED_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := myotherlib\nLOCAL_SRC_FILES :=  $(TARGET_ARCH_ABI)/libmyotherlib.so\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include\ninclude $(PREBUILT_SHARED_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := mylib\nLOCAL_SRC_FILES :=  $(TARGET_ARCH_ABI)/libmylib.so\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include\ninclude $(PREBUILT_SHARED_LIBRARY)\n</code></pre>\n\n<p>Relevant /data/app-lib contents after installing app built by Android Studio:</p>\n\n<pre><code>root@SOLONE SL-K40:/ # ls /data/app-lib/com.myapp.test-1               \nlibmyotherlib.so\nlibtest.so\n</code></pre>\n\n<p>Relevant /data/app-lib contents after installing app built by Eclipse ADT:</p>\n\n<pre><code>root@SOLONE SL-K40:/ # ls /data/app-lib/com.myapp.test-1               \nlibmylib.so\nlibmyotherlib.so\nlibtest.so\n</code></pre>\n\n<p>I accidentally found that by adding </p>\n\n<pre><code>sourceSets {\n        main {\n            jni.srcDirs = []\n }\n}\n</code></pre>\n\n<p>to my build.gradle I can get libmylib.so to show up again after installation, but this precludes having any NDK source code in my project.</p>\n\n<p><strong>First Question:</strong>\nAny idea what might be going on here?  Could it be that mylib was actually compiled for an abi other than armeabi and Android is discarding it because its actual abi doesn't match the folder it came in inside the apk (I don't have the source code for mylib)?  My problem sounds similar to one discussed <a href=\"https://stackoverflow.com/questions/29897408/i-need-loadlibrary-two-so-library-files-on-android-studio-v1-1-0\">here</a>, but that person seemed to see only one shared library in the final installed app; I'm seeing all but one of my shared libraries. </p>\n\n<p><strong>Second Question:</strong>\nWhat is the current correct way to include pre-built .so files in an Android Studio build? <a href=\"https://stackoverflow.com/questions/21096819/jni-and-gradle-in-android-studio\">Clues</a> <a href=\"https://stackoverflow.com/questions/25724999/how-to-add-prebuilt-so-library-in-android-studio-0-8-6\">around</a> <a href=\"https://github.com/googlesamples/android-ndk/issues/57\" rel=\"nofollow noreferrer\">the 'net</a> seem to vary wildly by Android Studio version (I'm using Android Studio 1.5, Gradle version 2.4, Android plugin version 1.3.0)  Is there still a need to redirect the jniLibs.srcDir variable to src/main/libs?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1449085280, "post_id": 34051421, "comment_id": 55857495, "body": "Use <code>snprintf</code> to create a variable format specifier and pass the resulting string into <code>printf</code>."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1449094086, "post_id": 34051421, "comment_id": 55862253, "body": "@kaylum: does <code>printf</code> accept string variable as a control string?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1449094214, "post_id": 34051421, "comment_id": 55862324, "body": "@artm Yes, of course it does. Try it if you have any doubts."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1449094422, "post_id": 34051421, "comment_id": 55862436, "body": "can you show me an example, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1449085396, "post_id": 34051568, "comment_id": 55857559, "body": "Would that change the format specified in printf statement"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1449085706, "post_id": 34051568, "comment_id": 55857712, "body": "Yes it would as juxtaposed string literals form a single string constant"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1449085714, "post_id": 34051568, "comment_id": 55857718, "body": "yeah I think the preprocessor would change the control string format in <code>&quot;[%d] &quot;FS</code>"}, {"owner": {"reputation": 11, "user_id": 5631951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42697c36a9f0c53c5af3900d45e2b0a?s=128&d=identicon&r=PG&f=1", "display_name": "todd42", "link": "https://stackoverflow.com/users/5631951/todd42"}, "edited": false, "score": 0, "creation_date": 1449085970, "post_id": 34051568, "comment_id": 55857862, "body": "Using this approach seems to result in the same error"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 1, "creation_date": 1449086490, "post_id": 34051568, "comment_id": 55858163, "body": "It works for me. Remember to delete the line <code>const char FS[2] = &quot;%f&quot;;</code>; and put  <code>#define FS &quot;%f&quot;</code> outside main(), then try it again."}, {"owner": {"reputation": 11, "user_id": 5631951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42697c36a9f0c53c5af3900d45e2b0a?s=128&d=identicon&r=PG&f=1", "display_name": "todd42", "link": "https://stackoverflow.com/users/5631951/todd42"}, "edited": false, "score": 0, "creation_date": 1449087222, "post_id": 34051568, "comment_id": 55858556, "body": "Got it now! I had a <code>;</code> after the <code>&quot;%f&quot;</code> by mistake.  Thanks a lot"}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 3, "last_activity_date": 1449085670, "last_edit_date": 1449085670, "creation_date": 1449085318, "answer_id": 34051568, "question_id": 34051421, "link": "https://stackoverflow.com/questions/34051421/variable-format-specifier-in-c/34051568#34051568", "title": "Variable format specifier in C", "body": "<p>Instead of <code>const char FS[2] = \"%f\";</code>, you may try to use macro like this:</p>\n\n<p><code>#define FS \"%f\"</code></p>\n\n<p>that would aggregate the control string format as you apparently want.</p>\n"}, {"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449092697, "post_id": 34051952, "comment_id": 55861480, "body": "+1, but be careful with the <code>default</code> case. If something else is given as an argument and the compiler isn&#39;t smart enough to see that there are not enough formats, this will crash at run time. Just leave out the <code>default</code> case and this will just not compile if there is another type. (Ah, and maybe also add a case for <code>char const*</code>)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449094571, "post_id": 34051952, "comment_id": 55862518, "body": "@Jens Gustedt Agree work is needed for the default case - leaving out seems good.  Note: <code>const char *</code> invokes the <code>char *: &quot;%s\\n&quot;</code> case, at least on my GCC"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449095565, "post_id": 34051952, "comment_id": 55862989, "body": "no it shouldn&#39;t, <code>char*</code> and <code>char const*</code> are incompatible types."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1449086814, "last_edit_date": 1449086814, "creation_date": 1449086501, "answer_id": 34051952, "question_id": 34051421, "link": "https://stackoverflow.com/questions/34051421/variable-format-specifier-in-c/34051952#34051952", "title": "Variable format specifier in C", "body": "<blockquote>\n  <p>Is there a way to make the format specifier update depending on the variable type used?</p>\n</blockquote>\n\n<p>Yes, C11 has <code>_Generic</code>.  This allows code selection based on the type of the expression.  The selection is not evaluated at run-time, but at compile time, the type is determined.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define print(X) printf(_Generic((X), \\\n    double: \"%e\\n\", \\\n    int: \"%i\\n\", \\\n    char *: \"%s\\n\", \\\n    default: \"TBD\" \\\n) , X)\n\nint main(void) {\n  print(5.0);\n  print(5);\n  print(\"Five\");\n  print(1.0f);\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>5.000000e+00\n5\nFive\nTBD\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 889, "user_id": 5127698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5f9fa2e9d5310e3cae38a4ef3552b4?s=128&d=identicon&r=PG&f=1", "display_name": "JonatanE", "link": "https://stackoverflow.com/users/5127698/jonatane"}, "is_accepted": false, "score": 0, "last_activity_date": 1449087227, "creation_date": 1449087227, "answer_id": 34052144, "question_id": 34051421, "link": "https://stackoverflow.com/questions/34051421/variable-format-specifier-in-c/34052144#34052144", "title": "Variable format specifier in C", "body": "<p>You could use an enum and a lookup table for format strings.\nJust make sure your struct that contains the data also contains a matching enum describing the type of data currently contained in the struct.</p>\n\n<p>That way you can write a print function that accepts such a struct as an argument and prints its value using a correct format string for that type of data.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef enum Format_\n{\n    /* Add/remove formats as needed. */\n    SIGNED_DECIMAL_INT,\n    UNSIGNED_DECIMAL_INT,\n    DECIMAL_FLOATING_POINT,\n    STRING,\n    POINTER_ADDRESS,\n    NUM_SUPPORTED_FORMATS\n} Format;\n\nstatic const char* formatStrings[NUM_SUPPORTED_FORMATS] =\n{\n    \"%d\\n\", /* Add more complex format strings if needed. */\n    \"%u\\n\",\n    \"%f\\n\",\n    \"%s\\n\",\n    \"%p\\n\"\n};\n\ntypedef struct Wrapper_\n{\n    Format format;\n    float data;\n} Wrapper;\n\nvoid printData(const Wrapper *const wrapper)\n{\n    printf(formatStrings[wrapper-&gt;format], wrapper-&gt;data);\n}\n\nint main(void)\n{\n    Wrapper wrapper;\n\n    wrapper.format = DECIMAL_FLOATING_POINT;\n    wrapper.data = 12.345f;\n\n    /* Prints 12.345000 */\n    printData(&amp;wrapper);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5631951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42697c36a9f0c53c5af3900d45e2b0a?s=128&d=identicon&r=PG&f=1", "display_name": "todd42", "link": "https://stackoverflow.com/users/5631951/todd42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1449087227, "creation_date": 1449084865, "question_id": 34051421, "link": "https://stackoverflow.com/questions/34051421/variable-format-specifier-in-c", "title": "Variable format specifier in C", "body": "<p>I have a printf statement as follows:</p>\n\n<pre><code>printf(\"[%d] %d\", i, n-&gt;data);\n</code></pre>\n\n<p>I'm trying to make the related code flexible so you can change the variable type of \"n->data\" depending on your need.  Is there a way to make the format specifier update depending on the variable type used?</p>\n\n<p>I've tried including:</p>\n\n<pre><code>const char FS[2] = \"%f\";\n</code></pre>\n\n<p>when the variable is a float, then amending the printf statement to:</p>\n\n<pre><code>printf(\"[%d] \"FS, i, n-&gt;data);\n</code></pre>\n\n<p>but this gets the following error, which I don't know how to resolve:</p>\n\n<pre><code>dLList.c:125:23: error: expected ')'\n        printf(\"[%d] \"FS, i, n-&gt;data);\n                      ^\ndLList.c:125:15: note: to match this '('\n        printf(\"[%d] \"FS, i, n-&gt;data);\n              ^\n1 error generated.\n</code></pre>\n\n<p>Any ideas?\nThanks</p>\n"}, {"tags": ["c", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1449085031, "post_id": 34051402, "comment_id": 55857355, "body": "TLDR; please provide a short and sweet <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> which illustrates the problem. Don&#39;t post code that works."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449085833, "post_id": 34051402, "comment_id": 55857788, "body": "@WeatherVane Sorry about that, removed the part with the example."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450279597, "post_id": 34051402, "comment_id": 56373349, "body": "Down Voter Please explain, why? Is there any chance to see who down voted me?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450280053, "post_id": 34051402, "comment_id": 56373679, "body": "that flagged me as my comment was above - but it wasn&#39;t my downvote."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450280464, "post_id": 34051402, "comment_id": 56373991, "body": "I really need to know, what was wrong with this question. ThisiIs not right, what&#39;s happens here."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450280899, "post_id": 34051402, "comment_id": 56374341, "body": "Perhaps it was for the reason in my critical first comment - some people here are very quick to downvote. Have a +1 on me. But I think you are whistling into the wind: the downvoter is unlikely to revisit the question."}], "answers": [{"tags": [], "owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "is_accepted": false, "score": 1, "last_activity_date": 1449085022, "creation_date": 1449085022, "answer_id": 34051465, "question_id": 34051402, "link": "https://stackoverflow.com/questions/34051402/while-loop-shows-a-different-output-than-for-loop/34051465#34051465", "title": "WHILE loop shows a different output than FOR loop", "body": "<p>Because the while loop does not initialize <code>j=0</code> at every iteration of the outermost while loop!</p>\n"}, {"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1449085025, "creation_date": 1449085025, "answer_id": 34051469, "question_id": 34051402, "link": "https://stackoverflow.com/questions/34051402/while-loop-shows-a-different-output-than-for-loop/34051469#34051469", "title": "WHILE loop shows a different output than FOR loop", "body": "<p>Note that the <code>while</code> loop doesn't initialize <code>j</code> to <code>0</code>.</p>\n\n<p>Remove the initialization of <code>j</code> to <code>0</code> and add</p>\n\n<pre><code>j = 0;\n</code></pre>\n\n<p>in front of your nested <code>while</code> loop.</p>\n"}, {"tags": [], "owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "is_accepted": false, "score": 1, "last_activity_date": 1449085031, "creation_date": 1449085031, "answer_id": 34051471, "question_id": 34051402, "link": "https://stackoverflow.com/questions/34051402/while-loop-shows-a-different-output-than-for-loop/34051471#34051471", "title": "WHILE loop shows a different output than FOR loop", "body": "<p>You never reset j to 0 with the while loop.</p>\n\n<p>This bit:</p>\n\n<pre><code>for(j=0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1449085351, "last_edit_date": 1449085351, "creation_date": 1449085046, "answer_id": 34051479, "question_id": 34051402, "link": "https://stackoverflow.com/questions/34051402/while-loop-shows-a-different-output-than-for-loop/34051479#34051479", "title": "WHILE loop shows a different output than FOR loop", "body": "<p>What's missing is that the <code>for</code> loop is initializing <code>j</code> to 0 when it first enters.  </p>\n\n<p>Although <code>j</code> is initialized to 0 when it declared, the <code>while</code> loop is called within another <code>while</code> loop, so it doesn't get reinitialized each time.</p>\n\n<p>Add the initialization:</p>\n\n<pre><code>    j=0;\n    while(tmp[j] != '\\0'){\n        if(tmp[j] == str[i]){\n            found++;\n        }\n        j++;\n    }\n</code></pre>\n\n<p>And you get:</p>\n\n<pre><code>Before = Mississippi\nAfter  = Misp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1449086651, "last_edit_date": 1449086651, "creation_date": 1449086279, "answer_id": 34051881, "question_id": 34051402, "link": "https://stackoverflow.com/questions/34051402/while-loop-shows-a-different-output-than-for-loop/34051881#34051881", "title": "WHILE loop shows a different output than FOR loop", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/language/for\" rel=\"nofollow\">for loop</a></p>\n\n<blockquote>\n<pre><code>for ( init-statement(optional) ; condition(optional) ;\n      iteration_expression(optional) )\n  statement\n</code></pre>\n  \n  <p>The above syntax produces code equivalent to:</p>\n\n<pre><code>{\n  init_statement \n  while ( condition ) { \n    statement \n    iteration_expression ; \n  }\n}\n</code></pre>\n  \n  <p>Except that</p>\n  \n  <ol>\n  <li>Names declared by the init-statement (if init-statement is a declaration) and names declared by condition (if condition is a\n  declaration) are in the same scope (which is also the scope of\n  statement).</li>\n  <li><code>continue</code> in the statement will execute iteration_expression</li>\n  <li>Empty condition is equivalent to <code>while(true)</code></li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 34051479, "answer_count": 5, "score": 0, "last_activity_date": 1449086651, "creation_date": 1449084783, "last_edit_date": 1449085773, "question_id": 34051402, "link": "https://stackoverflow.com/questions/34051402/while-loop-shows-a-different-output-than-for-loop", "title": "WHILE loop shows a different output than FOR loop", "body": "<p>As far as I know the difference between <code>for</code> loop and <code>while</code> loop looks like this:</p>\n\n<p><strong>for:</strong></p>\n\n<p>fist initialization takes place then conditional expression is checked and if it results in <code>TRUE</code> then only statement part gets executed this loop is continuous till conditional expression results <code>FALSE</code>.</p>\n\n<p><strong>While:</strong></p>\n\n<p>conditional expression is checked first and if result <code>TRUE</code> then statement part gets executed otherwise not, this loop is continuous till conditional expression results <code>FALSE</code>.</p>\n\n<hr>\n\n<p>Today I wrote an Algorithm which check if a <code>string</code> has duplicates, and if so to print only those which aren't:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main(void){\n    const char *str = \"Mississippi\";\n    char tmp[15] = {0};\n    size_t i=0,j=0,k=1;\n    int found=0;\n\n    tmp[0] = str[0];\n\n    printf(\"Before = %s\\n\",str);\n    while(str[i] != '\\0'){\n        for(j=0;tmp[j] != '\\0';j++){\n            if(tmp[j] == str[i]){\n                found++;\n            }\n        }\n\n        if(found==0){\n            tmp[k]=str[i];\n            k++;\n        }\n\n        found=0;\n        i++;\n    }\n\n    tmp[strlen(tmp)] = '\\0';\n    printf(\"After  = %s\\n\",tmp);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Before = Mississippi\nAfter  = Misp\n</code></pre>\n\n<p>Now watch what happens if replace the <code>for</code> loop:</p>\n\n<pre><code>for(j=0;tmp[j] != '\\0';j++){\n    if(tmp[j] == str[i]){\n        found++;\n    }\n}\n</code></pre>\n\n<p>With a `while loop:</p>\n\n<pre><code>while(tmp[j] != '\\0'){\n    if(tmp[j] == str[i]){\n        found++;\n    }\n    j++;\n}\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main(void){\n    const char *str = \"Mississippi\";\n    char tmp[15] = {0};\n    size_t i=0,j=0,k=1;\n    int found=0;\n\n    tmp[0] = str[0];\n\n    printf(\"Before = %s\\n\",str);\n    while(str[i] != '\\0'){\n        while(tmp[j] != '\\0'){\n            if(tmp[j] == str[i]){\n                found++;\n            }\n            j++;\n        }\n\n        if(found==0){\n            tmp[k]=str[i];\n            k++;\n        }\n\n        found=0;\n        i++;\n    }\n\n    tmp[strlen(tmp)] = '\\0';\n    printf(\"After  = %s\\n\",tmp);\n    return 0;\n}\n</code></pre>\n\n<p>But the output is not as expected:</p>\n\n<pre><code>Before = Mississippi\nAfter  = Misp\n</code></pre>\n\n<p>But:</p>\n\n<pre><code>Before = Mississippi\nAfter  = Misisipi\n</code></pre>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["c", "multithreading", "unit-testing", "atomic", "testcase"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1449084458, "post_id": 34051215, "comment_id": 55857042, "body": "Not unit-testable by definition, sorry."}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1449090345, "post_id": 34051215, "comment_id": 55860205, "body": "You can&#39;t unit test this as SergeyA stated. You can test the inputs passed into the API by creating stubs for those functions, but you can&#39;t actually test what the API is doing."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449093014, "post_id": 34051215, "comment_id": 55861646, "body": "You can only give a test that proves that the implementation is incorrect, never that it is correct. Something like having a lot of threads hammer on the same variable with an atomic increment. At the end you should be able to see if the total number of increments is correct. And you should test that with different optimization levels, the code that is choosen for this kind of operation depends a lot on that."}, {"owner": {"reputation": 56, "user_id": 5631671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Rtey.png?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5631671/jack"}, "edited": false, "score": 0, "creation_date": 1449498315, "post_id": 34051215, "comment_id": 56019354, "body": "Is there any way at all to test atomicity?"}], "owner": {"reputation": 56, "user_id": 5631671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Rtey.png?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5631671/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449084128, "creation_date": 1449084128, "question_id": 34051215, "link": "https://stackoverflow.com/questions/34051215/unit-testing-atomic-library-functions", "title": "Unit testing atomic library functions", "body": "<p>How would one go about unit testing an atomic function that is part of an API?  How can you guarantee that the atomicity of the function is actually being tested in time dependent situations like this? The system I am working with is inherently multithreaded with many real-time elements, and is written in C.</p>\n\n<p>My first thought is to perhaps set up one or more threads that are set to try and modify the same data that the atomic function under test is operating on, then check to see if the resultant value of the data is different than expected. Is this a valid approach? Or am I missing an obvious solution to the problem?</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1449084186, "post_id": 34051183, "comment_id": 55856869, "body": "Put this in a debugger, set a breakpoint, and step through it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449084667, "post_id": 34051183, "comment_id": 55857145, "body": "It would be more revealing to check the return value from <code>strstr()</code> than blindly use it."}, {"owner": {"reputation": 49, "user_id": 3052272, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/05142303fef9d6978b85d41bac465f69?s=128&d=identicon&r=PG&f=1", "display_name": "MarK", "link": "https://stackoverflow.com/users/3052272/mark"}, "edited": false, "score": 0, "creation_date": 1449085107, "post_id": 34051183, "comment_id": 55857413, "body": "I used debugging to check the return value from both strstr() and the subtraction. I didn&#39;t know the thing &#39;\\n&#39; thing about fgets() and i&#39;m feeling ashamed for that, but now i will surely keep that in mind, thanks for helping!"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3052272, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/05142303fef9d6978b85d41bac465f69?s=128&d=identicon&r=PG&f=1", "display_name": "MarK", "link": "https://stackoverflow.com/users/3052272/mark"}, "edited": false, "score": 0, "creation_date": 1449084744, "post_id": 34051311, "comment_id": 55857185, "body": "That makes sense why the word &quot;mere&quot; gave the correct output, thank you for your answer!"}, {"owner": {"reputation": 49, "user_id": 3052272, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/05142303fef9d6978b85d41bac465f69?s=128&d=identicon&r=PG&f=1", "display_name": "MarK", "link": "https://stackoverflow.com/users/3052272/mark"}, "edited": false, "score": 0, "creation_date": 1449085160, "post_id": 34051311, "comment_id": 55857445, "body": "I added the following line:     cuv[strlen(cuv) - 1] = 0;  after second fgets() and it works like a charm!"}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 2, "last_activity_date": 1449084573, "last_edit_date": 1449084573, "creation_date": 1449084486, "answer_id": 34051311, "question_id": 34051183, "link": "https://stackoverflow.com/questions/34051183/cannot-find-the-position-of-an-array-of-char-in-another-array-of-char/34051311#34051311", "title": "Cannot find the position of an array of char in another array of char", "body": "<p>The text <code>\"are\\n\"</code> is not found within the string <code>\"Ana are mere\\n\"</code>.<br> <br><strong>Therefore <code>strstr</code> returns <code>NULL</code>.</strong></p>\n\n<p>To get the expected output, you need to make sure you don't get the final Carriage Return (<code>\\n</code>) on your search string.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 5631913, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/UZLHO.jpg?s=128&g=1", "display_name": "Jahidul Islam", "link": "https://stackoverflow.com/users/5631913/jahidul-islam"}, "is_accepted": false, "score": 1, "last_activity_date": 1449086203, "creation_date": 1449086203, "answer_id": 34051852, "question_id": 34051183, "link": "https://stackoverflow.com/questions/34051183/cannot-find-the-position-of-an-array-of-char-in-another-array-of-char/34051852#34051852", "title": "Cannot find the position of an array of char in another array of char", "body": "<p>The both string include a new line, likes <code>\"Ana are mere\\n\"</code> and <code>\"are\\n\"</code> but there is no <code>\"are\\n\"</code> in the string <code>\"Ana are mere\\n\"</code> So that's why, we can removed the new line from <code>\"are\\n\"</code>by using this statement <code>\"cuv[strlen(cuv)-1] = '\\0';\"</code> after <code>\"fgets(cuv, 10, stdin);\"</code></p>\n"}], "owner": {"reputation": 49, "user_id": 3052272, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/05142303fef9d6978b85d41bac465f69?s=128&d=identicon&r=PG&f=1", "display_name": "MarK", "link": "https://stackoverflow.com/users/3052272/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 34051311, "answer_count": 2, "score": 0, "last_activity_date": 1449086203, "creation_date": 1449084019, "last_edit_date": 1495540340, "question_id": 34051183, "link": "https://stackoverflow.com/questions/34051183/cannot-find-the-position-of-an-array-of-char-in-another-array-of-char", "title": "Cannot find the position of an array of char in another array of char", "body": "<p>Here is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main (){\n    char prop[100], cuv[10], poz[100];\n    fgets(prop, 100, stdin);\n    fgets(cuv, 10, stdin);\n    printf(\"%ld\\n\", strstr(prop, cuv) - prop);\n    puts(prop);\n    puts(cuv);\n    return 0;\n}\n</code></pre>\n\n<p>However, when i run it, and give it this input:</p>\n\n<blockquote>\n  <p>Ana are mere</p>\n</blockquote>\n\n<p>and this for the second string:</p>\n\n<blockquote>\n  <p>are</p>\n</blockquote>\n\n<p>the output is the following:</p>\n\n<blockquote>\n  <p>-2752172</p>\n</blockquote>\n\n<p>I used the same method as given <a href=\"https://stackoverflow.com/questions/7500892/get-index-of-substring\">in this question</a>. What should i change in the code?</p>\n"}, {"tags": ["c", "arrays", "pointers", "cs50"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1449085836, "post_id": 34051163, "comment_id": 55857790, "body": "Please provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal Complete and Verifiable Example</a>. In particular, a <code>main</code> function which shows how you are setting up the dictionary, how you are calling the <code>check</code> and what the input file contains."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449085852, "post_id": 34051163, "comment_id": 55857799, "body": "I formatted the code, and noticed there is no <code>main()</code> function."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1449097091, "post_id": 34051163, "comment_id": 55863629, "body": "Given the answers thus far, it is clear that you would do better to step this code in a debugger and observe the variable state and code flow than to ask SO to debug it for you,  Using a debugger is always a more efficient method of debugging than posting code and questions.  If you have never used one, the hour you take to learn the basics (less if you are not stuck with just the GDB command line debugger, and probably  less again if you are using Visual Studio) will save you many many hours of development time."}], "answers": [{"comments": [{"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1449130580, "post_id": 34052743, "comment_id": 55875137, "body": "IMHO, you may remove the line declaration you do not use, and maybe stress the fact that the buffer allocated by <code>strdup()</code> needs to be freed.  Some check of <code>hashtable[hashvalue]</code> being NULL before you put the node inside would probably prevent strange behavior in case of collision"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1449135599, "post_id": 34052743, "comment_id": 55878095, "body": "@OznOg: Thank you for pointing out the inconsistency.  The global array <code>word</code> is actually not used.  At startup, all entries in the global array <code>hashtable[]</code> are initialized to <code>NULL</code>, so there is no need for extra checks.  If the slot is empty, <code>np-&gt;next</code> receives <code>NULL</code>, otherwise <code>np</code> is prepended to the list."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1449139354, "post_id": 34052743, "comment_id": 55880693, "body": "the check was about collisions in the hash which will fail silently if I understand correctly"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1449141496, "post_id": 34052743, "comment_id": 55882262, "body": "@OznOg: Not at all, the check was redundant. The hashtable is an array of slots, each with a list of nodes that have the same hashvalue.  The code above inserts the node in the proper slot, at the beginning of the list."}, {"owner": {"reputation": 33, "user_id": 5631916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d64f686ae417711fce3a83668521b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5631916/gabriel"}, "edited": false, "score": 0, "creation_date": 1449147271, "post_id": 34052743, "comment_id": 55886058, "body": "Thank you ! You helped me a great deal. I&#39;ll spend time reviewing and understanding the code before implementing it."}, {"owner": {"reputation": 33, "user_id": 5631916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d64f686ae417711fce3a83668521b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5631916/gabriel"}, "edited": false, "score": 0, "creation_date": 1449147303, "post_id": 34052743, "comment_id": 55886081, "body": "Moreover, I&#39;ll think about a more efficient hash function."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1449135408, "last_edit_date": 1449135408, "creation_date": 1449089558, "answer_id": 34052743, "question_id": 34051163, "link": "https://stackoverflow.com/questions/34051163/spell-checker-in-c/34052743#34052743", "title": "Spell-checker in C", "body": "<p>There are many problems in your code:</p>\n\n<ul>\n<li><p>in the <code>load</code> function, you do not load words from the dictionary into the hash table.  You read one character at a time with <code>fgetc()</code> and create a node from an uninitialized local buffer <code>word</code>.</p></li>\n<li><p>the <code>hash_it</code> function only hashes the last 16 characters from the word.  Furthermore, <code>hashtable_size</code> is a power of 2, a bad idea.  Indeed only the last 8 characters participate in the hash value. This is not a bug, just an inefficient hashing method.</p></li>\n<li><p>in the <code>check</code> function, you copy the word and convert it to lowercase, but you forget to set the final byte of the <code>tmp</code> array to <code>'\\0'</code>.</p></li>\n</ul>\n\n<p>Here is a corrected version of <code>load</code> that reads one word per dictionary line:</p>\n\n<pre><code>bool load(const char *dictionary) {\n    char line[256];\n    FILE *dict = fopen(dictionary, \"r\");\n\n    if (!dict)\n        return false;\n\n    while (fgets(line, sizeof line, dict) != NULL) {\n        char *p = line + strspn(line, \" \\t\");  // skip blanks\n\n        p[strcspn(p, \" \\t\\r\\n\")] = '\\0'; // strip trailing blanks\n\n        if (*p == '\\0' || *p == '#' || *p == ';')\n            continue;  // ignore blank lines and comments\n\n        count++;\n\n        int hashvalue = hash_it(p);\n        node *np = malloc(sizeof(node));\n\n        np-&gt;word = strdup(p);\n        np-&gt;next = hashtable[hashvalue];\n        hashtable[hashvalue] = np;\n    }\n    fclose(dict);\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5631916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d64f686ae417711fce3a83668521b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5631916/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1460, "favorite_count": 0, "accepted_answer_id": 34052743, "answer_count": 1, "score": -1, "last_activity_date": 1539983587, "creation_date": 1449083966, "last_edit_date": 1539983587, "question_id": 34051163, "link": "https://stackoverflow.com/questions/34051163/spell-checker-in-c", "title": "Spell-checker in C", "body": "<p>I've been trying to implement a spell-checker using a large dictionary against some text file which contains around 2000 words. However, my spell-checker returns all words as being misspelled. I honestly have no idea why \u2014 could someone help me? </p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\n#include \"dictionary.h\"\n\n#define lenght 45\n#define hashtable_size 65536\n\nchar word[lenght+1];\nint count = 0;\n\n/*\n*\n* Hash function. Thanks to Brenda from cs50 reddit.\n*/\nint hash_it(const char* needs_hashing)\n{\n    unsigned int hash = 0;\n    for (int i=0, n=strlen(needs_hashing); i&lt;n; i++)\n        hash = (hash &lt;&lt; 2) ^ needs_hashing[i];\n    return hash % hashtable_size;\n}\n\ntypedef struct node\n{\n    char* word;\n    struct node* next;\n}node;\n\nnode* previous;\nnode* hashtable[hashtable_size];\n\n\n/*\n*\n* Loads dictionary into memory.  Returns true if successful else false.\n*/\nbool load(const char* dictionary)\n{\n    char word[lenght+1];\n    FILE* dict = fopen(dictionary,\"r\");\n\n    for(int i = 0; i &lt; 26;i++)\n    {\n        hashtable[i] = NULL;\n        for(int a = fgetc(dict); a != EOF; a = fgetc(dict))\n        {\n            count++;\n\n            int hashvalue = hash_it(word);\n\n            node* new = malloc(sizeof(node));\n\n            if(hashtable[hashvalue] == NULL)\n            {\n                hashtable[hashvalue] = new;\n                new -&gt; next = NULL;\n            }\n            else\n            {\n                new -&gt; next = hashtable[hashvalue];\n                hashtable[hashvalue] = new;\n            }\n        }\n    }\n    fclose(dict);\n    return true;\n}\n\n/*\n*\n* Returns true if word is in dictionary else false.\n*/\nbool check(const char* word)\n{\n\n    char tmp[lenght + 1];\n    int lenghtw = strlen(word);\n    for (int i = 0; i &lt; lenghtw; i++)\n    {\n        tmp[i] = tolower(word[i]);\n    }\n\n\n    int index = hash_it(tmp);\n\n    if (hashtable[index] == NULL)\n    {\n        return false;\n    }\n\n    node* cursor = hashtable[index];\n\n    while(cursor != NULL)\n    {\n        if(strcmp(tmp, cursor -&gt; word) == 0)\n        {\n            return true;\n        }\n        cursor = cursor -&gt; next;\n    }\n\n    return false;\n}\n\n/*\n*\n* Returns number of words in dictionary if loaded else 0 if not yet loaded.\n*/\nunsigned int size(void)\n{\n    return count;\n}\n\n/*\n*\n* Unloads dictionary from memory.  Returns true if successful else false.\n*/\nbool unload(void)\n{\n    int index = 0;\n\n    while(index &lt; hashtable_size)\n    {\n        if(hashtable[index] == NULL)\n        {\n            index++;\n        }\n        else\n        {\n            while(hashtable[index] != NULL)\n            {\n                node* cursor = hashtable[index];\n                hashtable[index] = cursor -&gt; next;\n                free(cursor);\n            }\n            index++;\n        }\n    }\n    return true;\n}\n\nint main(int argc, char **argv)\n{\n\n    if (argc != 2)\n        return 3;\n\n    if (!load(\"dictionary\"))\n        return 1;\n\n    printf(\"loaded %d words\\n\", size());\n    printf(\"word '%s'%s found\\n\", argv[1], check(argv[1]) ? \"\" : \" not\");\n    unload();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sorting", "struct"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1449084320, "post_id": 34051144, "comment_id": 55856957, "body": "As an FYI: C != C++ and you should generally only tag the language you are writing/compiling (the answers may vary greatly)."}, {"owner": {"reputation": 689, "user_id": 662593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e745cd82e8f6f2832568ee8a67e61661?s=128&d=identicon&r=PG", "display_name": "StahlRat", "link": "https://stackoverflow.com/users/662593/stahlrat"}, "edited": false, "score": 0, "creation_date": 1449084408, "post_id": 34051144, "comment_id": 55857014, "body": "any particular reason why you don&#39;t use std::sort ?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449084374, "post_id": 34051207, "comment_id": 55856991, "body": "I don&#39;t believe i&#39;m allowed to make another function for this. It has to be in the void sortData(struct Data yearData[], int sz) function.."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "reply_to_user": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449084467, "post_id": 34051207, "comment_id": 55857045, "body": "Fair enough.  Just embed the logic in your main function.  Make a <code>cmp</code> variable that defaults to <code>0</code> then use the <code>if</code> statements from the <code>yearDataCmp</code> function.  Instead of returning a value, simply do <code>cmp = -1</code> or <code>cmp = 1</code> accordingly."}], "tags": [], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "is_accepted": false, "score": 0, "last_activity_date": 1449084113, "creation_date": 1449084113, "answer_id": 34051207, "question_id": 34051144, "link": "https://stackoverflow.com/questions/34051144/selection-sort-for-struct/34051207#34051207", "title": "Selection Sort for struct", "body": "<p>Make a comparison function, then use its result.  The comparison function should return 0 if the structs are equal, -1 if the left should go first, +1 if the right should go first.</p>\n\n<p>It will look something like:</p>\n\n<pre><code>int yearDataCmp(struct Data left, struct Data right) {\n    if ( left.month &lt; right.month ) { return -1; }\n    if ( left.month &gt; right.month ) { return  1; }\n    if ( left.day   &lt; right.day   ) { return -1; }\n    if ( left.day   &gt; right.day   ) { return  1; }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449084955, "post_id": 34051277, "comment_id": 55857301, "body": "ahhhh that looks like what I want it to do. The reason i don&#39;t swap the entire struct is because there is more members than just the months and days in it."}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085067, "post_id": 34051277, "comment_id": 55857389, "body": "this is what the struct looks like in its complete form:"}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085094, "post_id": 34051277, "comment_id": 55857407, "body": "struct Data{        int day;        int month;        int year;        float high;        float low;        float precipitation;        char condition;     };"}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "reply_to_user": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085190, "post_id": 34051277, "comment_id": 55857457, "body": "I understand but you want to sort the elements according to their month/day. if you only move the dates around, you are actually corrupting the data. I am sure this is not what you want."}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085391, "post_id": 34051277, "comment_id": 55857555, "body": "ahhhh, so if you just use yearData[ ] for the swap comparisons that will perform the correct sort for months and days not just months? i don&#39;t know why I&#39;m struggling to understand this as much as I am when it seems so simple"}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085461, "post_id": 34051277, "comment_id": 55857586, "body": "ahhhhh because if i don&#39;t swap all the months and days will change but the data that they are related to will be messed up which makes it corrupt data?"}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "reply_to_user": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085512, "post_id": 34051277, "comment_id": 55857626, "body": "exactly, you got it now!"}], "tags": [], "owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "is_accepted": false, "score": 1, "last_activity_date": 1449084763, "last_edit_date": 1449084763, "creation_date": 1449084345, "answer_id": 34051277, "question_id": 34051144, "link": "https://stackoverflow.com/questions/34051144/selection-sort-for-struct/34051277#34051277", "title": "Selection Sort for struct", "body": "<p>Try this:</p>\n\n<pre><code>...\nif((yearData[j].month &lt; yearData[m].month) || \n   ((yearData[j].month == yearData[m].month) &amp;&amp; \n    (yearData[j].day &lt; yearData[m].day))) {\n    m = j;\n}\n...\n</code></pre>\n\n<p>However, I am not sure I understand your swap. You should swap the entire struct, not the its members one by one. Consider this:</p>\n\n<pre><code>if (m != i) {\n  struct Data tmp = yearData[i];\n  yearData[i] = yearData[m];\n  yearData[m] = tmp;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1175, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522020298, "creation_date": 1449083903, "last_edit_date": 1522020298, "question_id": 34051144, "link": "https://stackoverflow.com/questions/34051144/selection-sort-for-struct", "title": "Selection Sort for struct", "body": "<p>i'm having an issue with the logic surrounding using selection sort for a struct array. for example say this is my struct :</p>\n\n<pre><code>struct data {\n    int month\n    int day\n    ..\n    .. }\n</code></pre>\n\n<p>now what I want to do is sort the months and days. I believe I know how to do this for the months, yet am having a hard time understanding how to implement this for days. here is my code for the months so far:</p>\n\n<pre><code>void sortData(struct Data yearData[], int sz)\n    int i, j, m;\n    int temp;\n\n    for (i = 0; i &lt; sz; i++) {\n        m = i;\n        for (j = i + 1; j &lt; sz; j++)\n            if (yearData[j].month &lt; yearData[m].month) {\n                m = j;\n             }\n\n        if (m != i) {\n            temp = yearData[i].month;\n            yearData[i].month = yearData[m].month;\n            yearData[m].month = temp;\n        }\n    }\n}\n</code></pre>\n\n<p>I think i want to check to see if the months are the same then look at days and sort them as well. I just don't know if it would be correct to add another iteration to this sort. Thanks!</p>\n"}, {"tags": ["c", "arrays", "string", "binaryfiles"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1449084364, "creation_date": 1449084364, "answer_id": 34051284, "question_id": 34051106, "link": "https://stackoverflow.com/questions/34051106/how-to-read-from-binary-file-to-a-string-array-and-an-int-in-c/34051284#34051284", "title": "How to read from binary file to a string/array and an int in c?", "body": "<pre><code>for (i=0;i&lt;25;i++){\n    fwrite(&amp;tomb[i].cim, sizeof(rec), 1, ptr_myfile);\n    fwrite(&amp;tomb[i].x, sizeof(rec), 1, ptr_myfile);\n}\n</code></pre>\n\n<p>Is not right. You need to use:</p>\n\n<pre><code>for (i=0;i&lt;25;i++){\n    fwrite(&amp;tomb[i], sizeof(rec), 1, ptr_myfile);\n}\n</code></pre>\n\n<p>Remember that <code>tomb[i]</code> is a <code>rec</code>, not <code>tomb[i].cim</code> or <code>tomb[i].x</code>.</p>\n\n<p>Also,</p>\n\n<pre><code> for(i=0;i&lt;25;i++){\n     fread(&amp;ujtomb, sizeof(rec), 1, ptr_myfile);   \n     printf(\"%s %d\\n\", ujtomb-&gt;cim, ujtomb-&gt;x);\n }\n</code></pre>\n\n<p>is not right. You need to use:</p>\n\n<pre><code> for(i=0;i&lt;25;i++){\n     fread(&amp;ujtomb[i], sizeof(rec), 1, fin);\n                 ^^^^^ Missing index.  ^^^^ Use the right FILE*\n\n     printf(\"%s %d\\n\", ujtomb[i].cim, ujtomb[i].x);\n                             ^^^^           ^^^^ Use the i-th element\n }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5622272, "user_type": "registered", "profile_image": "https://graph.facebook.com/876412452479596/picture?type=large", "display_name": "reallytitkos", "link": "https://stackoverflow.com/users/5622272/reallytitkos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 34051284, "answer_count": 1, "score": 1, "last_activity_date": 1449084364, "creation_date": 1449083793, "question_id": 34051106, "link": "https://stackoverflow.com/questions/34051106/how-to-read-from-binary-file-to-a-string-array-and-an-int-in-c", "title": "How to read from binary file to a string/array and an int in c?", "body": "<p>In this program i wrote into a binary file using arrays of a structure, and i'm trying to put it's data into another array of structures this way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct rec{\n    char cim[60];\n    int x;\n}rec;            //my structure\n\n\n\n int main(){\n     int i;\n     FILE *ptr_myfile;\n     rec ujtomb[25];    //I want to have the elements here after reading the file\n     rec tomb[25]={{\"Spectre\",3521},\n         {\"The Hunger Games Mockingjay Part 2\",6123},\n         {\"Star Wars The Force awakens\",9736},\n         {\"The Thirty Three\",2342},\n         {\"The man From UNCLE\",4312},\n         {\"Creed\",4123},\n         {\"Inside out\",6584},\n         {\"The martian\",6674},\n         {\"Ant-man\",7352},\n         {\"Secret in their eyes\",2345},\n         {\"The night before\",4758},\n         {\"Love\",1586},\n         {\"Legend\",8576},\n         {\"Trainwreck\",4628},\n         {\"Love the Coopers\",6372},\n         {\"Maze runner The scorch trials\",8750},\n         {\"No escape\",5793},\n         {\"Terminator genisys\",8451},\n         {\"Krampus\",452},\n         {\"Bridge of spies\",9581},\n         {\"By the sea\",7582},\n         {\"The peanuts movie\",3214},\n         {\"Heist\",1346},\n         {\"Spotlight\",7450},\n         {\"Jurassic world\",5438}};      //I listed the elements of the array\n ptr_myfile=fopen(\"nezettseg.bin\",\"wb\");\n if (!ptr_myfile)\n {\n printf(\"Unable to open file!\");\n return 1;\n }\n for (i=0;i&lt;25;i++){     //here i write into nezettseg.bin\n        fwrite(&amp;tomb[i].cim, sizeof(rec), 1, ptr_myfile);\n        fwrite(&amp;tomb[i].x, sizeof(rec), 1, ptr_myfile);\n }\n fclose(ptr_myfile);\n\n     FILE* fin = fopen(\"nezettseg.bin\", \"rb\");   //opening the binary file\n     for(i=0;i&lt;25;i++){    //now I'm trying to write those movies and numbers into ujtomb\n         fread(&amp;ujtomb, sizeof(rec), 1, ptr_myfile);   \n         printf(\"%s %d\\n\", ujtomb-&gt;cim, ujtomb-&gt;x);\n     }\n     fclose(fin);\n     return 0;\n}\n</code></pre>\n\n<p>My code works but the output looks like this:</p>\n\n<pre><code>Spectre 3521\n\\301\n 0\nThe Hunger Games Mockingjay Part 2 6123\n\\353 0\nStar Wars The Force awakens 9736\n&amp; 0\nThe Thirty Three 2342\n&amp;    0\nThe man From UNCLE 4312\n\\330 0\nCreed 4123\n 0\nInside out 6584\n\\270 0\nThe martian 6674\n 0\nAnt-man 7352\n\\270 0\nSecret in their eyes 2345\n)    0\nThe night before 4758\n\\226 0\nLove 1586\n2 0\nLegend 8576\nProgram ended with exit code: 0\n</code></pre>\n\n<p>sooo basically it writes 25 lines, but \\number comes with the variable 'cim', and the 0-s come with x.\nCan you help me how to put those titles and numbers correctly to ujtomb?</p>\n"}, {"tags": ["c", "gcc", "optimization"], "answers": [{"comments": [{"owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "edited": false, "score": 0, "creation_date": 1449084120, "post_id": 34051135, "comment_id": 55856822, "body": "Is there a way to check what is called at  <code>0x100000f76</code>? I assume here is <code>printf</code>, but what if I have a more complicated code?"}, {"owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "edited": false, "score": 0, "creation_date": 1449084694, "post_id": 34051135, "comment_id": 55857159, "body": "No. I have copy-pasted everything I got. Maybe because it is not statically linked. But I still am curious how to inspect such calls."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1449084377, "last_edit_date": 1449084377, "creation_date": 1449083884, "answer_id": 34051135, "question_id": 34051056, "link": "https://stackoverflow.com/questions/34051056/what-is-called-in-this-optimised-code/34051135#34051135", "title": "What is called in this optimised code", "body": "<p>You didn't declare <code>p()</code> as <code>static</code>, so what you are seeing is a compiled version of <code>p()</code> which calls <code>printf()</code> (via a <code>jmp</code>), and then you are also getting an inline version of <code>p()</code> inside <code>main()</code>, which also just gets converted to a call to <code>printf()</code>. If you declare <code>p()</code> as <code>static</code> then you'll just see the inline call in <code>main()</code>. </p>\n\n<p>To answer your question though, it appears that <code>0x100000f76</code> will be the entry point for <code>printf()</code>. </p>\n\n<p>Rather than disassmbling your code you might find it more instructive to tell the compiler to generate asm, since this will contain more useful info, e.g. <code>gcc -S -O3</code> (using clang on OS X) generates:</p>\n\n<pre><code>    .section    __TEXT,__text,regular,pure_instructions\n    .macosx_version_min 10, 11\n    .globl  _p\n    .align  4, 0x90\n_p:                                     ## @p\n    .cfi_startproc\n## BB#0:\n    pushq   %rbp\nLtmp0:\n    .cfi_def_cfa_offset 16\nLtmp1:\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\nLtmp2:\n    .cfi_def_cfa_register %rbp\n    leaq    L_.str(%rip), %rdi\n    xorl    %eax, %eax\n    popq    %rbp\n    jmp _printf                 ## TAILCALL\n    .cfi_endproc\n\n    .globl  _main\n    .align  4, 0x90\n_main:                                  ## @main\n    .cfi_startproc\n## BB#0:\n    pushq   %rbp\nLtmp3:\n    .cfi_def_cfa_offset 16\nLtmp4:\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\nLtmp5:\n    .cfi_def_cfa_register %rbp\n    leaq    L_.str(%rip), %rdi\n    xorl    %eax, %eax\n    callq   _printf\n    xorl    %eax, %eax\n    popq    %rbp\n    retq\n    .cfi_endproc\n\n    .section    __TEXT,__cstring,cstring_literals\nL_.str:                                 ## @.str\n    .asciz  \"jjjj\"\n\n\n.subsections_via_symbols\n</code></pre>\n\n<p>Here you can see the <code>jmp</code> and <code>callq</code> to <code>printf</code> rather than just some unknown address.</p>\n"}], "owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449084377, "creation_date": 1449083598, "question_id": 34051056, "link": "https://stackoverflow.com/questions/34051056/what-is-called-in-this-optimised-code", "title": "What is called in this optimised code", "body": "<p>I have a simple C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid p(){\n    printf(\"jjjj\");\n}\n\nint main(){\n    p();\n}\n</code></pre>\n\n<p>If I compile this with g++ on Mac OSX and disassemble with <code>otool -tv</code> I can see the <code>p</code> and <code>main</code> functions, and that <code>main</code> calls <code>p</code>. Using optimizations (<code>-O3</code>) I got this:</p>\n\n<pre><code>(__TEXT,__text) section\n__Z1pv:\n0000000100000f40    pushq   %rbp\n0000000100000f41    movq    %rsp, %rbp\n0000000100000f44    leaq    0x4b(%rip), %rdi\n0000000100000f4b    xorl    %eax, %eax\n0000000100000f4d    popq    %rbp\n0000000100000f4e    jmp 0x100000f76\n0000000100000f53    nopw    %cs:(%rax,%rax)\n_main:\n0000000100000f60    pushq   %rbp\n0000000100000f61    movq    %rsp, %rbp\n0000000100000f64    leaq    0x2b(%rip), %rdi\n0000000100000f6b    xorl    %eax, %eax\n0000000100000f6d    callq   0x100000f76\n0000000100000f72    xorl    %eax, %eax\n0000000100000f74    popq    %rbp\n0000000100000f75    retq\n</code></pre>\n\n<p>It seems that <code>main</code> still calls something at address <code>0x100000f76</code>. How can I check what is at this location? What is <code>g++</code> doing here?</p>\n"}, {"tags": ["c", "string", "search"], "comments": [{"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1449083941, "post_id": 34050962, "comment_id": 55856716, "body": "What have you done so far?  How did it go wrong?"}], "answers": [{"tags": [], "owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "is_accepted": false, "score": 1, "last_activity_date": 1449083435, "creation_date": 1449083435, "answer_id": 34051005, "question_id": 34050962, "link": "https://stackoverflow.com/questions/34050962/string-search-in-c-from-a-http-get-request/34051005#34051005", "title": "string search in c from a http GET request", "body": "<p>You can use <code>strstr(buff,\"GET \")</code> and <code>strstr(buff,\" HTTP/1.1\")</code> to find the start end end pos, then use <code>strncpy</code> to copy whats in between.</p>\n"}], "owner": {"reputation": 1, "user_id": 5631845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f006e2ab6b24ce1168227ad1eaf0565?s=128&d=identicon&r=PG&f=1", "display_name": "abmos", "link": "https://stackoverflow.com/users/5631845/abmos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1449083540, "creation_date": 1449083283, "last_edit_date": 1449083540, "question_id": 34050962, "link": "https://stackoverflow.com/questions/34050962/string-search-in-c-from-a-http-get-request", "title": "string search in c from a http GET request", "body": "<p>how to extract a specific string from an array of characters? </p>\n\n<p><a href=\"https://i.stack.imgur.com/oqX9o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oqX9o.png\" alt=\"enter image description here\"></a></p>\n\n<p>in my case buff contain what's shown in the image and i want to copy the file name 'hi.jpg' to another array of char, keep in mind that the file name will change depending on the http request sent by the browser.</p>\n"}, {"tags": ["c", "pointers", "memory", "char", "integer"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449082265, "post_id": 34050600, "comment_id": 55855750, "body": "Perhaps because the anti-aliasing rule is broken which lead to UB?  The value in <code>y</code> is not known to be used and so it is optimized out?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449082324, "post_id": 34050600, "comment_id": 55855781, "body": "That&#39;s curious.  What machine are you running on?  O/S?  Compiler?  It could be partly an &#39;endianness&#39; issue, but superficially, you should be getting a zero whether it is big-endian or little-endian.  When I test the code on both RHEL 5 and Mac OS X 10.11.1, I get 0 output, as I&#39;d expect."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449082348, "post_id": 34050600, "comment_id": 55855799, "body": "@chux: Aren&#39;t <code>char *</code> exempt from anti-aliasing?  (And I think we both mean &#39;strict aliasing&#39; \u2014 anti-aliasing is related to things like fonts and pixels, isn&#39;t it?)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449082399, "post_id": 34050600, "comment_id": 55855831, "body": "@Jonathan Leffler  I think you are correct."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1449082416, "post_id": 34050600, "comment_id": 55855840, "body": "@chux Any object can be accessed through a character pointer without violating strict-aliasing. It&#39;s not UB."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1449082508, "post_id": 34050600, "comment_id": 55855886, "body": "@Rafael Are you sure you got -1 as output for 256, not 255?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1449082637, "post_id": 34050600, "comment_id": 55855974, "body": "@Blue Moon Does the anti-aliasing rule exemption to <code>char *</code>, <code>unsigned char *</code>, etc?"}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "edited": false, "score": 0, "creation_date": 1449082660, "post_id": 34050600, "comment_id": 55855985, "body": "That&#39;s weird <code>p = &amp;y</code> caused the problem, but <code>p = (char *)&amp;y</code> didn&#39;t. I&#39;m curious why though. And also shouldn&#39;t <code>255</code> returns 255 as well ?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449082728, "post_id": 34050600, "comment_id": 55856026, "body": "@chux Yes. There&#39;s another type to that list: <code>signed char*</code>. C standard considers the 3 of them as distinct types."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449082803, "post_id": 34050600, "comment_id": 55856075, "body": "What do you get with <code>printf(&quot;Value %d %d\\n&quot;, *p, y);</code>?"}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1449082970, "post_id": 34050600, "comment_id": 55856171, "body": "@chux for y = 256, I get &quot;Value 0 256&quot;. But for y = 255, I get &quot;Value -1 255&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1449083068, "post_id": 34050600, "comment_id": 55856214, "body": "This differs from your original post that had <code>y=256</code> and &quot;it returns -1&quot;.  Now the answer is easy. code is simply printing the least significant byte of <code>y</code> as a <code>signed char</code>."}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449083314, "post_id": 34050600, "comment_id": 55856345, "body": "@chux Sorry, but what do you mean by &quot;The original case could be explained by <code>y</code> being optimized out as it was not used.&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449083523, "post_id": 34050600, "comment_id": 55856463, "body": "When code explicitly uses <code>y</code> as in <code>printf(&quot;Value %d %d\\n&quot;, *p, y);</code>, then <code>y</code> is used and must have the <i>value</i> of 255 or 256 or whatever.  Without using <code>y</code>, but only the <i>address</i> of <code>y</code> as in <code>char *p = (char *)&amp;y</code> it is unclear to me  if a compliant compiler must maintain the value of <code>y</code>.  It that were the case, possible the compiler did not initialize <code>y</code> as thought."}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1449083797, "post_id": 34050600, "comment_id": 55856637, "body": "@chux But why 255 still gives me -1 ? Even though i&#39;m printing <code>y</code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1449084610, "post_id": 34050600, "comment_id": 55857115, "body": "Getting <code>Value -1 255</code> when <code>y</code> is 255 makes sense.  <code>p</code> points to a byte that looks like <code>11111111</code> in binary, <code>*p</code> is a signed char, and <code>%d</code> prints a signed value, so that&#39;s why it prints -1."}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1449084877, "post_id": 34050600, "comment_id": 55857260, "body": "@dbush Ah, I totally forgot about the MSB. Thanks a lot."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1498113901, "creation_date": 1498113901, "answer_id": 44692029, "question_id": 34050600, "link": "https://stackoverflow.com/questions/34050600/c-using-a-char-pointer-to-print-int-value-not-getting-expected-result/44692029#44692029", "title": "C - Using a char pointer to print int value, not getting expected result", "body": "<blockquote>\n  <p>But why 255 still gives me -1 ? Even though i&#39;m printing\n  <code>y</code></p>\n</blockquote>\n\n<p>Getting <code>Value -1 255</code> when <code>y</code> is 255 makes sense.  <code>p</code> points to a byte that looks like <code>11111111</code> in binary, <code>*p</code> is a signed char, and <code>%d</code> prints a signed value, so that&#39;s why it prints -1.\n                    &ndash;&nbsp;dbush</p>\n"}], "owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498113901, "creation_date": 1449082009, "last_edit_date": 1449082248, "question_id": 34050600, "link": "https://stackoverflow.com/questions/34050600/c-using-a-char-pointer-to-print-int-value-not-getting-expected-result", "title": "C - Using a char pointer to print int value, not getting expected result", "body": "<p>I'm trying to understand how pointers work. I created an <code>int</code> value and made a <code>char</code> pointer to point at it. </p>\n\n<p>When printing the content of the address that <code>char</code> pointer points to, I don't get the expected result.</p>\n\n<p>Like if that <code>char</code> pointer is pointing to <strong>256</strong>, I was expecting the content of that address to return <strong>0</strong> because <strong>(256)10 = (0000000100000000)2</strong>. Because a <code>char</code> pointer points to one byte so it'll return the first 8 bits which are zeros.</p>\n\n<p>But it returns <strong>-1</strong>.</p>\n\n<p>Here's my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int y = 256;\n    char *p = (char *)&amp;y;\n\n    // returns Value -1\n    printf(\"Value %d \\n\", *p);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "memory", "libgphoto2"], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 1973454, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9721a5917f0a43e216655b602f24d3a1?s=128&d=identicon&r=PG", "display_name": "mynameisjohnj", "link": "https://stackoverflow.com/users/1973454/mynameisjohnj"}, "is_accepted": false, "score": 1, "last_activity_date": 1449088552, "last_edit_date": 1449088552, "creation_date": 1449087369, "answer_id": 34052190, "question_id": 34050599, "link": "https://stackoverflow.com/questions/34050599/how-does-gp-camera-file-get-work/34052190#34052190", "title": "How does gp_camera_file_get work?", "body": "<p>Never mind, I think I've found it. </p>\n\n<p>So <code>gp_camera_file_get</code> ends up calling <code>gp_filesystem_get_file</code>, which calls <code>gp_filesystem_get_file_impl</code>. That function looks at the <code>CameraFileType</code>, and if it's <code>GP_FILE_TYPE_NORMAL</code> (which it is, in my case), it calls <code>gp_file_copy</code> with an instance of CameraFileSystemFile as the source. </p>\n\n<p><code>gp_file_copy</code> ends up calling <code>malloc</code> if <code>GP_FILE_ACCESSTYPE_MEMORY</code> is the destination file's accesstype, and writes to disk if the accesstype is <code>GP_FILE_ACCESSTYPE_FD</code>. </p>\n\n<p>Then, the call to <code>gp_file_free</code> calls <code>gp_file_clean</code>, which calls <code>free</code> if the accesstype is <code>GP_FILE_ACCESSTYPE_MEMORY</code>. </p>\n"}], "owner": {"reputation": 341, "user_id": 1973454, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9721a5917f0a43e216655b602f24d3a1?s=128&d=identicon&r=PG", "display_name": "mynameisjohnj", "link": "https://stackoverflow.com/users/1973454/mynameisjohnj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1449088552, "creation_date": 1449082007, "question_id": 34050599, "link": "https://stackoverflow.com/questions/34050599/how-does-gp-camera-file-get-work", "title": "How does gp_camera_file_get work?", "body": "<p>I'm new to libgphoto2 and had some questions about where the actual image memory is located. It seems that photos are accessed via an object called a <code>CameraFile</code>. There's an example included in the source called sample-capture.c that has a function called <code>capture_to_memory</code>. </p>\n\n<p>In that function, a CameraFile object is created and initialized using <code>gp_file_new</code>. The implementation of <code>gp_file_new</code> creates a <code>CameraFile</code> object whose accesstype member is set to <code>GP_FILE_ACCESSTYPE_MEMORY</code>. </p>\n\n<p>That <code>CameraFile</code> object is then passed to <code>gp_camera_file_get</code>, and I'm not really clear what happens in this function. </p>\n\n<p>After the call to <code>gp_camera_file_get</code>, the file is sent to <code>gp_file_get_data_and_size</code>. Looking at the implementation of that function, and given that the files accesstype is <code>GP_FILE_ACCESSTYPE_MEMORY</code>, the <code>gp_file_get_data_and_size</code> function will not allocate any memory and instead merely assign the pointer to the CameraFile's data member (same with size). </p>\n\n<p>So where is the memory this pointer points to? Is it on the actual camera? Or is it somewhere in my ram? I'm just trying to avoid as many memory operations as possible. I've found a nice blog post</p>\n\n<p><a href=\"http://sepharads.blogspot.com/2011/11/camera-tethered-capturing-using.html?m=1\" rel=\"nofollow\">http://sepharads.blogspot.com/2011/11/camera-tethered-capturing-using.html?m=1</a></p>\n\n<p>where the <code>CameraFile</code> object is created via <code>gp_file_new_from_fd</code>. This sets the files accesstype to <code>GP_FILE_ACCESSTYPE_FD</code>. When <code>gp_file_get_data_and_size</code> is called on a file with this accesstype, new memory is allocated and the file's data is copied into it. However, this is read from disk, or at least I assume it is since FD means Unix File Descriptor, and it needs an actual filename string. Does that mean that <code>gp_camera_file_get</code> reads the data into a file on disk if the CameraFile's accestype is <code>GP_FILE_ACCESSTYPE_FD</code>?</p>\n\n<p>There is a function called <code>gp_file_free</code>. If it's an FD file it closes the file handle, but it doesn't call <code>free(file-&gt;data)</code> anywhere, so I'm pretty confused...</p>\n\n<p>What does <code>gp_camera_file_get</code> do? The implementation is there, but it kind of threw me. Does it actually bring the file from my camera's memory to my computer's memory and allocate <code>CameraFile-&gt;data</code> in ram? Or does it just give me a handle to something stored on my camera?</p>\n\n<p>Sorry if this is the wrong place to ask, I did see some sort of mailing list for libgphoto2 but I couldn't tell how active it was. </p>\n"}, {"tags": ["c", "struct", "binary-search-tree"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1449082197, "post_id": 34050539, "comment_id": 55855717, "body": "Move your <code>struct</code> definitions from map.c to map.h, between the <code>#include</code> and the <code>typedef</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5388697"}, "edited": false, "score": 0, "creation_date": 1449082545, "post_id": 34050686, "comment_id": 55855915, "body": "thanks, not sure what you mean to create functions to access their data from the outside, should it not know about it from my header file?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449082834, "post_id": 34050686, "comment_id": 55856091, "body": "It means you provide functions that read/write every struct member, instead of exposing the struct definition, but I don&#39;t think that was your question."}, {"owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "edited": false, "score": 0, "creation_date": 1449083357, "post_id": 34050686, "comment_id": 55856374, "body": "Whether or not you allow files outside map.c to know your BST&#39;s implementation details depends on you."}, {"owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "edited": false, "score": 0, "creation_date": 1449083363, "post_id": 34050686, "comment_id": 55856379, "body": "There&#39;s both advantages to disadvantages on using encapsulation (go read up on it if you&#39;re interested) but i should probably mention that an abstract data type such as a BST is usually defined by and only by its functions, so allowing outsiders to touch around and possibly break an ADT&#39;s invariants is not only risky but also pointless and contradicting of its definition (like, there&#39;s no way to manually change the root on a BST, but without encapsulation, you could. If you can do that it&#39;s not technically a BST anymore, since you can do more than you should)"}, {"owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "edited": false, "score": 0, "creation_date": 1449083586, "post_id": 34050686, "comment_id": 55856502, "body": "I should also probably add that even if you decide on using it or not, and fix all compilation errors, it&#39;s still quite messy. You&#39;re mixing up 2 ways of implementing a BST: with 2 structures (node and tree) and only one structure (node/tree, and every node is a potential subtree). You should decide on one and organize your structure definitions and function prototypes around it before even beginning to actually code."}], "tags": [], "owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "is_accepted": true, "score": 0, "last_activity_date": 1449082305, "creation_date": 1449082305, "answer_id": 34050686, "question_id": 34050539, "link": "https://stackoverflow.com/questions/34050539/binary-search-tree-and-struct-errors/34050686#34050686", "title": "binary search tree and struct errors", "body": "<p>First error is because while main.c has the declaration of a struct node, the actual structure definition is in map.c, and mainphone.c does not know it. </p>\n\n<p>Now this is usually a good thing, since it forces us to encapsulate. If you want to keep your structures in map.c, you'll need to create functions to access their data from outside.</p>\n\n<p>The second error is most likely a compilation one. Be sure to either link a previously compiled map.o to mainphone.c:</p>\n\n<pre><code>gcc (FLAGS_HERE) map.c -c\ngcc (FLAGS HERE) map.o mainphone.c -o (YOUR_EXECUTABLE_NAME)\n</code></pre>\n\n<p>or use the automagical *.c syntax.</p>\n\n<pre><code>gcc (FLAGS_HERE) *.c -o (YOUR_EXECUTABLE_NAME)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5388697"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 34050686, "answer_count": 1, "score": 0, "last_activity_date": 1449082305, "creation_date": 1449081787, "question_id": 34050539, "link": "https://stackoverflow.com/questions/34050539/binary-search-tree-and-struct-errors", "title": "binary search tree and struct errors", "body": "<p>This program should create a binary search tree, insert numbers 1-366 into the tree and then should prompt the user to enter a number to see if the number is in the binary search tree. It worked when it was all in one C file but I now need to make it modular and have main in a separate file but it now gives me errors that I don't understand.</p>\n\n<p>I've got 3 files:</p>\n\n<p>map.h:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\ntypedef struct tree Tree;\ntypedef struct node Node;\n\n//creates a new tree\nTree *new_tree();\n\n//create a new node\nNode* NewNode(int data);\n\n//insert in to the binary tree\nNode* insert(Node* node, int data);\n\n//search for nodes to see if they exist\nbool NodeSearch(Node* node,int data);\n</code></pre>\n\n<p>map.c:</p>\n\n<pre><code>//Binary search tree implementation\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"map.h\"\n\n//node structure\nstruct node {\n    int data;\n    struct node* left;\n    struct node* right;\n} ;\n\n//tree wrapper structure\nstruct tree {\n    struct node *root;\n} ;\n\n//create a new tree\nTree *new_tree() {\n    Tree *t = malloc(sizeof(Tree));\n    t-&gt;root = NULL;\n    return t;\n}\n\n//create a new node\nNode* NewNode(int data) {\n  Node* node = malloc(sizeof *node);    // \"new\" is like \"malloc\"\n  node-&gt;data = data;\n  node-&gt;left = NULL;\n  node-&gt;right = NULL;\n\n  return(node);\n}\n\n//insert in to the binary tree\nNode* insert(Node* node, int data) {\n  // 1. If the tree is empty, return a new, single node\n  if (node == NULL) {\n    return(NewNode(data));\n  }\n  else {\n    // 2. Otherwise, recur down the tree\n    if (data &lt;= node-&gt;data) node-&gt;left = insert(node-&gt;left, data);\n    else node-&gt;right = insert(node-&gt;right, data);\n\n    return(node); // return the (unchanged) node pointer\n  }\n}\n//search for nodes to see if they exist\nbool NodeSearch(Node* node,int data) {\n    if(node==NULL) return false;\n    else if(node-&gt;data == data) return true;\n    else if(data  &lt;= node -&gt;data) return NodeSearch(node-&gt;left, data);\n    else return NodeSearch(node-&gt;right, data);\n}\n</code></pre>\n\n<p>mainphone.c:</p>\n\n<pre><code># include \"map.h\"\n# include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\n\nint main(){\n    struct node* root = NULL;\n\n    for (int i = 1; i &lt; 367; i++) {\n        root = insert(root,i);\n        Node *n = NewNode (i);\n        insert (n, n-&gt;data);}\n\n    int number;\n    printf(\"Enter Number\\n\");\n    scanf(\"%d\",&amp;number);\n    if(NodeSearch(root, number) == true) printf(\"Found\\n\");\n    else printf(\"Not found\\n\");\n\n\n}\n</code></pre>\n\n<p>the errors it gives me are:</p>\n\n<pre><code>mainphone.c:11:15: error: incomplete definition of type 'struct node'\n            insert (n, n-&gt;data);}\n                       ~^\n\n./map.h:4:16: note: forward declaration of 'struct node'\ntypedef struct node Node;\n           ^\n\nmainphone.c:16:5: error: implicit declaration of function 'NodeSearch' is\n  invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    if(NodeSearch(root, number) == true) printf(\"Found\\n\");\n</code></pre>\n"}, {"tags": ["c", "trigonometry"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 2, "creation_date": 1449085299, "post_id": 34050505, "comment_id": 55857510, "body": "Function <code>cos</code> is declared to return a double-value.  However I do not see any <code>return</code> statement in that function."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1449085722, "post_id": 34050505, "comment_id": 55857723, "body": "Also C doesn&#39;t support default arguments"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1449086626, "post_id": 34050505, "comment_id": 55858246, "body": "Meh, C is not pascal! Use <code>return s;</code> instead of <code>cos=s;</code> and so on."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1449086937, "post_id": 34050505, "comment_id": 55858401, "body": "Your error message seems to be a C++ error message. Are you compiling as C or C++?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1449087215, "post_id": 34050505, "comment_id": 55858553, "body": "As @crashmstr points out, C doesn&#39;t have overloading, so a C compiler wouldn&#39;t complain about an overloaded function. Make sure that your source file is named with a <code>.c</code> suffix, and that you&#39;re compiling it using a C compiler, not a C++ compiler. And your indentation is inconsistent; the <code>else</code> should be aligned under the <code>if</code>."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1449086724, "post_id": 34051601, "comment_id": 55858300, "body": "Also, OP shall fix <code>return</code> statements. Now he is trying to use pascal syntax <code>FunctionName = value;</code> instead of <code>return value;</code>."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 3, "last_activity_date": 1449087066, "last_edit_date": 1449087066, "creation_date": 1449085406, "answer_id": 34051601, "question_id": 34050505, "link": "https://stackoverflow.com/questions/34050505/how-to-fix-my-code/34051601#34051601", "title": "How to fix my code?", "body": "<p>You included <code>math.h</code>, which has a function named <code>cos</code>, that works a bit differently.</p>\n\n<p>You have overloaded that name (eg. written another function also with the name <code>cos</code>) but have not given the compiler any means to deduce which version of <code>cos</code> you want to call.</p>\n\n<p>Fix this by naming your function something different and unique.</p>\n\n<hr>\n\n<p>Here's my attempt at a fix:</p>\n\n<pre><code>double TaylorCOS(double x, double eps, double s=0,double n=0,double a=0)\n{\n    if (abs(n)&lt;1)\n    {\n        return TaylorCOS(x, eps,1,1,1);\n    }\n\n    a = -a*x*x / ((2*n-1) * (2*n));\n    if (abs(a)&lt;=eps)\n    {\n        return s;\n    }\n\n    return TaylorCOS(x, eps, s+a, a,n+1);\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1449086447, "creation_date": 1449086447, "answer_id": 34051925, "question_id": 34050505, "link": "https://stackoverflow.com/questions/34050505/how-to-fix-my-code/34051925#34051925", "title": "How to fix my code?", "body": "<p>You can't assign to a function identifier like you do in</p>\n\n<pre><code>cos=s;\ncos=cos(x, eps, s+a, a,n+1);\n</code></pre>\n\n<p>Neither in C, nor in C++. This program is broken beyond repair.</p>\n"}], "owner": {"reputation": 23, "user_id": 5468821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fdfb0e542d652abf65ee6509193632?s=128&d=identicon&r=PG&f=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/5468821/dom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 34051601, "answer_count": 2, "score": -1, "last_activity_date": 1449087066, "creation_date": 1449081639, "last_edit_date": 1449085029, "question_id": 34050505, "link": "https://stackoverflow.com/questions/34050505/how-to-fix-my-code", "title": "How to fix my code?", "body": "<p>Taylor series expansion of cos(x) with a given accuracy </p>\n\n<p><strong>eps</strong>\n<strong>Recursive approach</strong></p>\n\n<blockquote>\n  <p>[Error] overloaded function with no contextual type information</p>\n</blockquote>\n\n<p>How can I fix this error?</p>\n\n<p><a href=\"http://i.stack.imgur.com/qEKpc.png\" rel=\"nofollow\">Photo1</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble cos(double x, double eps, double s=0,double n=0,double a=0) {\n    if (abs(n)&lt;1){\n    cos=cos(x, eps,1,1,1);\n}\nelse {\n    a = -a*x*x / ((2*n-1) * (2*n));\n    if (abs(a)&lt;=eps) {\n        cos=s;\n    }\n    else{\n        cos=cos(x, eps, s+a, a,n+1);\n    }\n  }\n} \nint main () {\n    double x;\n    scanf(\"%f\", &amp;x);\n    cos(x, 0.000000000000001);\n}\n</code></pre>\n"}, {"tags": ["java", "c", "multithreading", "operating-system"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449082009, "post_id": 34050388, "comment_id": 55855626, "body": "You could use call_once for this."}, {"owner": {"reputation": 1, "user_id": 4098434, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006659676722/picture?type=large", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/4098434/abhishek-tripathi"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449082340, "post_id": 34050388, "comment_id": 55855792, "body": "sorry edited the question the java thread call my main method."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449082439, "post_id": 34050388, "comment_id": 55855855, "body": "This is what I am talking about. Use call_once in the c code - it will ensure the function will be called only once."}], "owner": {"reputation": 1, "user_id": 4098434, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006659676722/picture?type=large", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/4098434/abhishek-tripathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449082186, "creation_date": 1449081208, "last_edit_date": 1449082186, "question_id": 34050388, "link": "https://stackoverflow.com/questions/34050388/how-to-handle-c-library-in-multithreading", "title": "How to handle c library in multithreading", "body": "<p>I have a main method which has two methods \n1) A Method which returns a handle to a library .\n2) I use this handle in other method .</p>\n\n<p>I call this main method from java thread using JNI . \nThe problem is when multiple threads run from java callout(OSB) and call the main method  it opens the handle to library multiple times . \nI want to open this handle  only once for multiple thread (i.e call method one only once for both the threads).\nI cannot do this on java side (Due to some constraints) . \nIs there any way to this from C program i tried using IPC but the address returned are inconsistent.</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "answers": [{"tags": [], "owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "is_accepted": false, "score": 1, "last_activity_date": 1449086798, "last_edit_date": 1449086798, "creation_date": 1449081238, "answer_id": 34050397, "question_id": 34050239, "link": "https://stackoverflow.com/questions/34050239/how-malloc-array-in-struct-in-function/34050397#34050397", "title": "How malloc array in struct in function", "body": "<p>Two <code>malloc</code>s are required.  One for the <code>AKCIE</code> array and another for each <code>int</code> array.  Below is an example for statically sized arrays:</p>\n\n<pre><code>#define STRUCT_ARRAY_DEPTH (10)\n#define INT_ARRAY_DEPTH    (20)\n\nint i;\nAKCIE *idStock;\n\nidStock = malloc(STRUCT_ARRAY_DEPTH * sizeof(*idStock));\nfor(i = 0; i &lt; STRUCT_ARRAY_DEPTH; i++)\n    idStock[i].stockArray = malloc(INT_ARRAY_DEPTH * sizeof(int));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 5132876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2Cfv.png?s=128&g=1", "display_name": "Levin", "link": "https://stackoverflow.com/users/5132876/levin"}, "edited": false, "score": 0, "creation_date": 1449083215, "post_id": 34050433, "comment_id": 55856292, "body": "Ok, you are right. It means, if id = 1, sizeof( AKCIE ) is 8, idStock will be idStock[0] ..... idStock[7]?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 85, "user_id": 5132876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2Cfv.png?s=128&g=1", "display_name": "Levin", "link": "https://stackoverflow.com/users/5132876/levin"}, "edited": false, "score": 0, "creation_date": 1449083466, "post_id": 34050433, "comment_id": 55856436, "body": "@Levin Not sure what you mean by that.  Are you suggesting that <code>sizeof(AKCIE)</code> is dependent on the value of <code>id</code>?  Because that&#39;s not true.  The value of <code>sizeof(AKCIE)</code> is a constant."}, {"owner": {"reputation": 85, "user_id": 5132876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2Cfv.png?s=128&g=1", "display_name": "Levin", "link": "https://stackoverflow.com/users/5132876/levin"}, "edited": false, "score": 0, "creation_date": 1449083939, "post_id": 34050433, "comment_id": 55856715, "body": "I mean, it creat id * sizeof(AKCIE) places in array. For id = 1, it creat 8 places."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 85, "user_id": 5132876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2Cfv.png?s=128&g=1", "display_name": "Levin", "link": "https://stackoverflow.com/users/5132876/levin"}, "edited": false, "score": 0, "creation_date": 1449084095, "post_id": 34050433, "comment_id": 55856807, "body": "@Levin No, it doesn&#39;t create 8 places.  It creates a space of 8 <b>bytes</b>, which is big enough for a 1 element array.  So <code>idStock[0]</code> would be the only valid element in that case.  If you want 8 elements then set <code>id</code> to 8."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1449081347, "creation_date": 1449081347, "answer_id": 34050433, "question_id": 34050239, "link": "https://stackoverflow.com/questions/34050239/how-malloc-array-in-struct-in-function/34050433#34050433", "title": "How malloc array in struct in function", "body": "<p>This is incorrect:</p>\n\n<pre><code>idStock = ( AKCIE *)malloc( id * sizeof( int ));\n</code></pre>\n\n<p>Assuming <code>idStock</code> is to be treated as an array, and <code>id</code> is the length of that array, you're not allocating the proper amount of space.  You're only allocating space for a number of <code>int</code> variables, but the struct contains an <code>int *</code>, which may not be the same size.</p>\n\n<p>What you want is this:</p>\n\n<pre><code>idStock = ( AKCIE *)malloc( id * sizeof( AKCIE ));\n</code></pre>\n\n<p>This allocates an array of <code>AKCIE</code>s of length <code>id</code>.  Once you do this, you don't need to allocate the individual array members, since it's already done.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 5132876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2Cfv.png?s=128&g=1", "display_name": "Levin", "link": "https://stackoverflow.com/users/5132876/levin"}, "edited": false, "score": 0, "creation_date": 1449083327, "post_id": 34050544, "comment_id": 55856351, "body": "Thank you, that is it, what i need."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5609732"}, "is_accepted": true, "score": 0, "last_activity_date": 1449082882, "last_edit_date": 1449082882, "creation_date": 1449081801, "answer_id": 34050544, "question_id": 34050239, "link": "https://stackoverflow.com/questions/34050239/how-malloc-array-in-struct-in-function/34050544#34050544", "title": "How malloc array in struct in function", "body": "<p>This is how you can alloc the memory for each of the elements in the struct.</p>\n\n<p>This is the procedure:</p>\n\n<pre><code>void procedure(AKCIE *idStock, int n){ //n is the dim\n        int i;\n        for(i=0; i&lt;n; i++){\n          idStock[i].stockArray = (int *)malloc(HOW_MANY_DO_YOU_NEED * sizeof(int));\n        }\n    }\n</code></pre>\n\n<p>and this is how you call it:</p>\n\n<pre><code>    .\n    .\n    .\n    procedure(idStock, dim);\n    .\n    .\n    .\n</code></pre>\n\n<p>PS: there is an error in your allocation of memory for idStock. It does not contains <code>int</code>, but <code>int *</code>. </p>\n\n<p>To avoid this kind of mistakes you can just pass the whole structure to the function <code>sizeof()</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 5132876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2Cfv.png?s=128&g=1", "display_name": "Levin", "link": "https://stackoverflow.com/users/5132876/levin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 34050544, "answer_count": 3, "score": 0, "last_activity_date": 1449086798, "creation_date": 1449080688, "question_id": 34050239, "link": "https://stackoverflow.com/questions/34050239/how-malloc-array-in-struct-in-function", "title": "How malloc array in struct in function", "body": "<p>I have struct:</p>\n\n<pre><code>typedef struct akcie\n{\n    int *stockArray;\n} AKCIE;\n</code></pre>\n\n<p>Declaration</p>\n\n<pre><code> AKCIE *idStock;\n</code></pre>\n\n<p>Malloc idStock</p>\n\n<pre><code>idStock = ( AKCIE *)malloc( id * sizeof( int )); // id is an integer\n</code></pre>\n\n<p>Now I want to malloc to every idStock[i], i = 1,2,3,..... stockArray in function, etc. void(parameters) { malloc every idStock[i].stockArray; }.</p>\n\n<p>How to alloc idStock[0], idStock[1] in function? I dont know how to transmit the struct as parameter. Thank you for help.</p>\n"}, {"tags": ["c", "time", "arduino"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1449080671, "post_id": 34050119, "comment_id": 55854874, "body": "Google &quot;c moving average filter&quot;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449081510, "post_id": 34050119, "comment_id": 55855361, "body": "Don&#39;t use delays, set a target time 10 seconds in the future. Monitor the voltage, if it is 5v set the target time again to 10 seconds in the future. When you reach the target time, make your response. Also, look up &quot;hysteresis&quot; because you probably want the same behaviour when turning the lamp off. If your software kit does not provide a free-run seconds or milliseconds counter: make one!"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449092277, "post_id": 34052464, "comment_id": 55861256, "body": "In <code>if (millis() &gt;= turnOnAt)</code> the variable <code>turnOnAt</code> is uninintialised. If it <b>is</b> initialised to <code>0</code> as a global, <code>millis</code> might well be greater than 0 at this test after power-up. <code>turnOnAt = millis() + turnOnDelay;</code> should be before you enter the loop."}], "tags": [], "owner": {"reputation": 318, "user_id": 5582897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0fJq0.jpg?s=128&g=1", "display_name": "Matthew Heironimus", "link": "https://stackoverflow.com/users/5582897/matthew-heironimus"}, "is_accepted": false, "score": 1, "last_activity_date": 1449088417, "creation_date": 1449088417, "answer_id": 34052464, "question_id": 34050119, "link": "https://stackoverflow.com/questions/34050119/how-to-measure-voltage-over-10-seconds-with-arduino/34052464#34052464", "title": "How to measure voltage over 10 seconds with Arduino?", "body": "<p>I believe something like this addresses your 10 second delay issue. If you want the same 10 second delay to turn it off, you will need to do something similar.</p>\n\n<pre><code>int Pin = 2;\nconst float baselineVoltage = 5.0;\nint belowBaselineVoltage = false;\nunsigned long turnOnAt;\nconst unsigned long turnOnDelay = 10 * 1000;\n\nvoid setup() {\n    Serial.begin(9600);\n    pinMode(Pin, OUTPUT);\n}\n\nvoid loop() {\n    int sensorValue = analogRead(A0);\n    float voltage = sensorValue * (5.0 / 1023.0);\n    Serial.println(voltage);\n\n    if (voltage &lt; baselineVoltage)\n    {\n        if (belowBaselineVoltage == true)\n        {\n            if (millis() &gt;= turnOnAt)\n            {\n                digitalWrite(2, HIGH);\n            }\n        }\n        else\n        {\n            belowBaselineVoltage = true;\n            turnOnAt = millis() + turnOnDelay;\n        }\n    }\n    else\n    {\n        belowBaselineVoltage = false;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5621993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8995d36256c69809fa32573c928d23db?s=128&d=identicon&r=PG&f=1", "display_name": "EmilHaugaard", "link": "https://stackoverflow.com/users/5621993/emilhaugaard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449088417, "creation_date": 1449080284, "last_edit_date": 1449080542, "question_id": 34050119, "link": "https://stackoverflow.com/questions/34050119/how-to-measure-voltage-over-10-seconds-with-arduino", "title": "How to measure voltage over 10 seconds with Arduino?", "body": "<p>I am building a program that measure the voltage of a component (photoswitch). When the potential is under 5 V, the lamp will turn on. </p>\n\n<p>But my problem is, I want the Arduino to turn on the lamp, if the voltage has been under 5 V for 10 seconds or more. For example, if the voltage level is under 5 V for 8 seconds and then it changes to over 5 V again, the lamp should not turn on. </p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>int Pin = 2;\nconst float baselineVoltage = 5.0;\n\nvoid setup() {\n    Serial.begin(9600);\n    pinMode(Pin,OUTPUT);\n}\n\nvoid loop() {\n    int sensorValue = analogRead(A0);\n    float voltage = sensorValue * (5.0 / 1023.0);\n    Serial.println(voltage);\n    if(voltage &lt; baselineVoltage){\n        digitalWrite(2,HIGH);\n   }\ndelay(10);\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "struct", "casting", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "edited": false, "score": 0, "creation_date": 1449081255, "post_id": 34050315, "comment_id": 55855223, "body": "I understand this point, the problem is how this cast works ? It&#39;s kinda weird, How the compiler understands it ?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "edited": false, "score": 0, "creation_date": 1449082072, "post_id": 34050315, "comment_id": 55855660, "body": "@MichaelHeidelberg See my edit.  Hopefully that makes things more clear."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1449082049, "last_edit_date": 1449082049, "creation_date": 1449080973, "answer_id": 34050315, "question_id": 34050115, "link": "https://stackoverflow.com/questions/34050115/c-casting-h-addr-list-array-to-type-struct-in-addr/34050315#34050315", "title": "C - Casting &quot;h_addr_list&quot; array to type &quot;struct in_addr **&quot;", "body": "<p>When you call <code>gethostbyname</code>, it returns a pointer to a <code>struct hostent</code>.  One of the fields in this struct, <code>h_addr_list</code>, is an array of pointers to network addresses.  </p>\n\n<p>Since a network address can be either a <code>struct in_addr</code> for an IPv4 address or a <code>struct in6_addr</code> for an IPv6 address, <code>h_addr_list</code> is defined as a <code>char **</code> as a generic type that can point to either one.  The <code>h_addrtype</code> field tells you which one of these is valid.</p>\n\n<p>Once you know that, you cast <code>h_addr_list</code> to either <code>struct in_addr **</code> or <code>struct in6_addr **</code> as appropriate, then access each element in the array.</p>\n\n<p>EDIT:</p>\n\n<p>Pointers between either <code>void</code> or <code>char</code> types and any other non-function type can freely be casted to or from each other.  </p>\n\n<p>In this particular case, it's likely that <code>gethostbyname</code> has a static <code>char</code> buffer that it casts to a <code>struct in_addr **</code> or a <code>struct in6_addr **</code> as appropriate in order to create the array.  Then the calling function performs the same cast in order to get the values out.</p>\n"}], "owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 34050315, "answer_count": 1, "score": 1, "last_activity_date": 1449082049, "creation_date": 1449080276, "last_edit_date": 1449081401, "question_id": 34050115, "link": "https://stackoverflow.com/questions/34050115/c-casting-h-addr-list-array-to-type-struct-in-addr", "title": "C - Casting &quot;h_addr_list&quot; array to type &quot;struct in_addr **&quot;", "body": "<p>I'm reading this tutorial: <a href=\"http://www.binarytides.com/socket-programming-c-linux-tutorial/\" rel=\"nofollow\">here</a> But I can't understand how this part works. Casting from <code>char**</code> to a <code>struct in_addr **</code> that contains an <code>unsigned long</code> seems weird. </p>\n\n<pre><code>// Cast the h_addr_list to in_addr \n// since h_addr_list also has the ip address in long format only\naddr_list = (struct in_addr **) he-&gt;h_addr_list;\n</code></pre>\n\n<p>I wish someone could explain what's happening and how the code works.</p>\n\n<p><strong>EDIT:</strong> To be more specific: I want to know how can the compiler understand what we are trying to do here ? why should this code be correct ?</p>\n"}, {"tags": ["c", "apache"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5631685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce19af281e66ef9acf6c81ae5ec2066a?s=128&d=identicon&r=PG&f=1", "display_name": "phpManer", "link": "https://stackoverflow.com/users/5631685/phpmaner"}, "edited": false, "score": 1, "creation_date": 1449129203, "post_id": 34051516, "comment_id": 55874481, "body": "Thank you! Do not you have any examples of how to get the status?"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 0, "last_activity_date": 1449085179, "creation_date": 1449085179, "answer_id": 34051516, "question_id": 34050067, "link": "https://stackoverflow.com/questions/34050067/writing-module-for-apache/34051516#34051516", "title": "Writing module for Apache", "body": "<p>The fixups phase is the wrong place to do this. It occurs before the request handler is called, so the response (and its status) has not been determined yet.</p>\n\n<p>If your module needs to modify the response after it has been generated, it will need to operate as a filter. You may want to refer to the Apache document <a href=\"https://httpd.apache.org/docs/2.4/developer/filters.html\" rel=\"nofollow\">How filters work in Apache</a> for details.</p>\n"}], "owner": {"reputation": 21, "user_id": 5631685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce19af281e66ef9acf6c81ae5ec2066a?s=128&d=identicon&r=PG&f=1", "display_name": "phpManer", "link": "https://stackoverflow.com/users/5631685/phpmaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449085179, "creation_date": 1449080130, "last_edit_date": 1449083148, "question_id": 34050067, "link": "https://stackoverflow.com/questions/34050067/writing-module-for-apache", "title": "Writing module for Apache", "body": "<p>I wrote a simple module for web server, but I cann't apply the filter for a specific HTTP status. For example, I would like to add a specific header in the response if the response from the server is <code>200</code>.</p>\n\n<p>For processing the request I use <code>ap_hook_fixups</code>. As the handler of the hook, can get the status of the answer?</p>\n"}, {"tags": ["c", "operators"], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 5, "creation_date": 1449079716, "post_id": 34049899, "comment_id": 55854346, "body": "Or simply <code>a = a &#47; b;</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1449079776, "post_id": 34049899, "comment_id": 55854380, "body": "@FredLarson Absolutely. Just elaborated to remove any more confusions.:)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1449079601, "creation_date": 1449079601, "answer_id": 34049899, "question_id": 34049868, "link": "https://stackoverflow.com/questions/34049868/what-does-this-operator-mean/34049899#34049899", "title": "What does this operator mean? /=", "body": "<p>The <code>/=</code> is a shorthand operator.</p>\n\n<pre><code>a /= b\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>c = a/b;\na = c;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 873703, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e654d99c125053d4f1eae192efc1553?s=128&d=identicon&r=PG", "display_name": "wentimo", "link": "https://stackoverflow.com/users/873703/wentimo"}, "is_accepted": false, "score": 2, "last_activity_date": 1449080603, "last_edit_date": 1449080603, "creation_date": 1449079646, "answer_id": 34049918, "question_id": 34049868, "link": "https://stackoverflow.com/questions/34049868/what-does-this-operator-mean/34049918#34049918", "title": "What does this operator mean? /=", "body": "<p><code>n /= 10</code> is taking the value of <code>n</code>, dividing it by <code>10</code> and reassigning that value to <code>n</code>. </p>\n\n<p>It's just shorthand for <code>n = (n / 10)</code> just like <code>n++</code> is <code>n = n + 1</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5609732"}, "is_accepted": false, "score": 2, "last_activity_date": 1449159225, "last_edit_date": 1449159225, "creation_date": 1449079941, "answer_id": 34050005, "question_id": 34049868, "link": "https://stackoverflow.com/questions/34049868/what-does-this-operator-mean/34050005#34050005", "title": "What does this operator mean? /=", "body": "<p>It is the same as</p>\n\n<pre><code>n = n/10 ;\n</code></pre>\n\n<p>You can use this form also with other operators (+, -, %,...).</p>\n\n<p>The case n+=1 (n-=1) can also be written as <code>n++</code> (increase n by 1) or <code>++n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1449080710, "post_id": 34050196, "comment_id": 55854904, "body": "Maybe &quot;concise&quot; better word than &quot;shorter&quot;."}, {"owner": {"reputation": 149, "user_id": 5181941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q4rXS.jpg?s=128&g=1", "display_name": "Riccardo Maffei", "link": "https://stackoverflow.com/users/5181941/riccardo-maffei"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1449081602, "post_id": 34050196, "comment_id": 55855399, "body": "@FiddlingBits you are right! Sorry, I&#39;m not a native English speaker. Just edited."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1449087103, "post_id": 34050196, "comment_id": 55858488, "body": "You&#39;re English is perfect!"}], "tags": [], "owner": {"reputation": 149, "user_id": 5181941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q4rXS.jpg?s=128&g=1", "display_name": "Riccardo Maffei", "link": "https://stackoverflow.com/users/5181941/riccardo-maffei"}, "is_accepted": false, "score": 3, "last_activity_date": 1449081540, "last_edit_date": 1449081540, "creation_date": 1449080569, "answer_id": 34050196, "question_id": 34049868, "link": "https://stackoverflow.com/questions/34049868/what-does-this-operator-mean/34050196#34050196", "title": "What does this operator mean? /=", "body": "<p>The <code>/=</code> is one of the shorthand operators.</p>\n\n<p>A shorthand operator is a concise way to express something that is already available in a programming language.</p>\n\n<p>They are:</p>\n\n<ul>\n<li><code>+=</code> (E.g.: <code>x += 4;</code> is equivalent to <code>x = x + 4;</code>)</li>\n<li><code>-=</code> (E.g.: <code>x -= 4;</code> is equivalent to <code>x = x - 4;</code>)</li>\n<li><code>*=</code> (E.g.: <code>x *= 4;</code> is equivalent to <code>x = x * 4;</code>)</li>\n<li><code>/=</code> (E.g.: <code>x *= 4;</code> is equivalent to <code>x = x / 4;</code>)</li>\n<li><code>%=</code> (E.g.: <code>x %= 4;</code> is equivalent to <code>x = x % 4;</code>)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 15679, "user_id": 369450, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/5cf82bfcd75a3bd40deaad83f7657c59?s=128&d=identicon&r=PG&f=1", "display_name": "All Workers Are Essential", "link": "https://stackoverflow.com/users/369450/all-workers-are-essential"}, "edited": false, "score": 1, "creation_date": 1460918041, "post_id": 36376703, "comment_id": 60950869, "body": "How is this any different from the 4 answers posted last year that already say this?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6149800"}, "is_accepted": false, "score": -1, "last_activity_date": 1459618927, "creation_date": 1459618927, "answer_id": 36376703, "question_id": 34049868, "link": "https://stackoverflow.com/questions/34049868/what-does-this-operator-mean/36376703#36376703", "title": "What does this operator mean? /=", "body": "<p>It simply means <code>n = n/10</code>. The same form can be used with other operators too.</p>\n"}], "owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "accepted_answer_id": 34049899, "answer_count": 5, "score": 1, "last_activity_date": 1459618927, "creation_date": 1449079521, "last_edit_date": 1449080711, "question_id": 34049868, "link": "https://stackoverflow.com/questions/34049868/what-does-this-operator-mean", "title": "What does this operator mean? /=", "body": "<p>I have just come across some code with the line:</p>\n\n<pre><code>n /= 10;\n</code></pre>\n\n<p>I assumed it was a typo and removed the <code>/</code> to make it <code>n = 10</code>, but the program no longer works.</p>\n\n<p>Never seen this sort of operator before, anybody know?</p>\n"}, {"tags": ["c", "shell", "process"], "comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1449080195, "post_id": 34049865, "comment_id": 55854600, "body": "Could you please fix that horrible indentation?"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1449080395, "post_id": 34049865, "comment_id": 55854722, "body": "we&#39;ll need to see the rest of the code."}, {"owner": {"reputation": 89, "user_id": 5484075, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/21d8da742d4619960077dbe3aba512cc?s=128&d=identicon&r=PG&f=1", "display_name": "esrtr", "link": "https://stackoverflow.com/users/5484075/esrtr"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1449081144, "post_id": 34049865, "comment_id": 55855159, "body": "I edit my question again @ErikNyquist can you look at ?"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1449082461, "post_id": 34049865, "comment_id": 55855866, "body": "please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete and Verifiable example</a>"}, {"owner": {"reputation": 89, "user_id": 5484075, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/21d8da742d4619960077dbe3aba512cc?s=128&d=identicon&r=PG&f=1", "display_name": "esrtr", "link": "https://stackoverflow.com/users/5484075/esrtr"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1449082645, "post_id": 34049865, "comment_id": 55855975, "body": "Ok , I will consider your advice @ErikNyquist"}, {"owner": {"reputation": 89, "user_id": 5484075, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/21d8da742d4619960077dbe3aba512cc?s=128&d=identicon&r=PG&f=1", "display_name": "esrtr", "link": "https://stackoverflow.com/users/5484075/esrtr"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1449083183, "post_id": 34049865, "comment_id": 55856280, "body": "I edit my post. you can see whole code @ErikNyquist"}], "answers": [{"tags": [], "owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "is_accepted": false, "score": 2, "last_activity_date": 1449084302, "last_edit_date": 1495539880, "creation_date": 1449083878, "answer_id": 34051131, "question_id": 34049865, "link": "https://stackoverflow.com/questions/34049865/background-process-in-shell/34051131#34051131", "title": "background process in shell", "body": "<p>you're not implementing background processes, you're trying to start a background process using the syntax of the already-implemented-shell on your computer (but honestly, it's pretty hard to tell what's going on with that indentation. That's really bad. Can you make it readable, please?). That '&amp;' character is recognised by your shell, not by execvp. Have a look at <a href=\"https://stackoverflow.com/questions/20790765/run-a-program-in-background-with-execvp-system-call-in-c\">this similar looking question</a> which was the first hit in a google search for your problem.</p>\n"}], "owner": {"reputation": 89, "user_id": 5484075, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/21d8da742d4619960077dbe3aba512cc?s=128&d=identicon&r=PG&f=1", "display_name": "esrtr", "link": "https://stackoverflow.com/users/5484075/esrtr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449084302, "creation_date": 1449079514, "last_edit_date": 1449083137, "question_id": 34049865, "link": "https://stackoverflow.com/questions/34049865/background-process-in-shell", "title": "background process in shell", "body": "<p>I want to implement my own shell. I'm stucked on implementing background process . Actually ,I write some piece of code but I'm not sure if it is work or not . </p>\n\n<p>my code : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;unistd.h&gt;\n\n #define MAX_LINE 80 /* 80 chars per line, per command, should be enough. */\n  #define HISTORY_SIZE 5 /*keep track of 5 most recent commands*/\n\n int cmd_count; /*global to keep track of most recent commands entered*/\n char history[HISTORY_SIZE][MAX_LINE]; /* global so it can be         accessed     in interrupt handler. */\n\n\n void viewHistory()\n{\nint i;\n\nif (cmd_count &lt; 1)\n    printf(\"No command history to show. \\n\");\nelse {\n    printf(\"\\n\\n\");\n    for (i = (cmd_count &gt;= HISTORY_SIZE) ? cmd_count - HISTORY_SIZE:0;\n         i &lt; cmd_count; i++)\n        printf(\"%d: %s\\n\",i+1,history[i%HISTORY_SIZE]);\n}\n//printf(\"SystemsIIShell-&gt;\");\n  }\n\n\n\n  int setup(char inputBuffer[], char *args[],int *background)\n   {\nint length, /* # of characters in the command line */\ni,      /* loop index for accessing inputBuffer array */\nstart,  /* index where beginning of next command parameter is */\nct;     /* index of where to place the next parameter into args[] */\n\nint temp;\n\nct = 0;\n\n/* read what the user enters on the command line */\nlength = read(STDIN_FILENO, inputBuffer, MAX_LINE);\n\nstart = -1;\nif (length == 0)\n    exit(0);            /* ^d was entered, end of user command stream */\nif (length &lt; 0){\n    perror(\"error reading the command\");\n    exit(-1);           /* terminate with error code of -1 */\n}else{\n    inputBuffer[length]='\\0';\n    if(inputBuffer[0]=='r'){\n        if(inputBuffer[1]=='r'){\n            if(cmd_count==0){\n                printf(\"No recent command can be found in the history. \\n\");\n                return 0;\n            }\n            strcpy(inputBuffer,history[(cmd_count)% HISTORY_SIZE]);\n        }else{\n            temp = atoi(&amp;inputBuffer[1]);\n            if(temp &lt; 1 || temp &gt; cmd_count || temp &lt;= cmd_count -HISTORY_SIZE){\n                printf(\"Command number cannot be found. \\n\");\n                return 0;\n\n            }\n            strcpy(inputBuffer,history[(temp-1)%HISTORY_SIZE]);\n\n        }\n        length = strlen(inputBuffer);\n\n    }\n    cmd_count++;\n    strcpy(history[(cmd_count-1)%HISTORY_SIZE], inputBuffer);\n    for (i = 0; i &lt; length; i++) {\n        if (inputBuffer[i] == '&amp;') {\n            inputBuffer[i] = '\\0';\n            *background = 1;\n            --length;\n            break;\n        }\n\n    }\n}\n\n/* examine every character in the inputBuffer */\nfor (i = 0; i &lt; length; i++) {\n    switch (inputBuffer[i]){\n        case ' ':\n        case '\\t' :               /* argument separators */\n            if(start != -1){\n                args[ct] = &amp;inputBuffer[start];    /* set up pointer */\n                ct++;\n            }\n            inputBuffer[i] = '\\0'; /* add a null char; make a C string */\n            start = -1;\n            break;\n\n        case '\\n':                 /* should be the final char examined */\n            if (start != -1){\n                args[ct] = &amp;inputBuffer[start];\n                ct++;\n            }\n            inputBuffer[i] = '\\0';\n            args[ct] = NULL; /* no more arguments to this command */\n            break;\n\n        case '&amp;':\n            *background = 1;\n            inputBuffer[i] = '\\0';\n            break;\n\n        default :             /* some other character */\n            if (start == -1)\n                start = i;\n    }\n}\nargs[ct] = NULL; /* just in case the input line was &gt; 80 */\n  }\n\n   int main(void)\n   {\nchar inputBuffer[MAX_LINE]; /* buffer to hold the command entered */\nint background;             /* equals 1 if a command is followed by '&amp;' */\nchar *args[MAX_LINE/2+1];/* command line (of 80) has max of 40 arguments */\n\nwhile (1){            /* Program terminates normally inside setup */\n    background = 0;\n    printf(\"SystemsIIShell-&gt;\");\n    fflush(0);\n    setup(inputBuffer, args, &amp;background);       /* get next command */\n\n    pid_t child; /* process id for child */\n    int status; /* status for execvp */\n\n    child = fork(); /* create a child process*/\n\n    if(child &lt; 0){ /* if the child process didn't return 0, the fork is failed */\n        printf(\"Fork failed! \\n\");\n\n    }else if(child==0){ /* child process */\n        if(inputBuffer[0]=='history' || inputBuffer[0] =='h'){\n            viewHistory();\n            return 0;\n        }\n        status = execvp(args[0],args);\n        if(status !=0){\n            printf(\"%s: command not found. \\n\", args[0]);\n        }\n\n    }else{ /* parent process */\n        if(background == 0)\n            waitpid(child,&amp;background,0);\n\n    }\n\n    /* the steps are:\n     (1) fork a child process using fork()\n     (2) the child process will invoke execvp()\n     (3) if background == 0, the parent will wait,\n     otherwise returns to the setup() function. */\n\n}return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I don't add whole code but the other things are true. I call execv and it works. When I write on the console :</p>\n\n<p>output terminal :</p>\n\n<pre><code>$ gedit  -------&gt;it works correctly because it is a foreground\n\n\n$ gedit &amp; -----&gt; it opens a gedit file which name is \"&amp;\"\n$ firefox ---&gt; it works correctly\n$ firefox &amp; ---&gt; it opens a firefox window which url is www.&amp;.com \n</code></pre>\n\n<p>How can fix it ?any suggestions ?</p>\n\n<p>editing part : <a href=\"https://github.com/iqbalhasnan/CSE2431-System-II/blob/master/lab2/lab2.c\" rel=\"nofollow\">https://github.com/iqbalhasnan/CSE2431-System-II/blob/master/lab2/lab2.c</a>  --> I use this code as a reference</p>\n"}, {"tags": ["c", "parsing", "microcontroller", "uart", "osc"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1449079739, "post_id": 34049560, "comment_id": 55854362, "body": "In general, with indeterminate-length data, and given a serial byte stream, there is no possible answer, you are completely stuft and your task cannot be completed."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1449080303, "post_id": 34049560, "comment_id": 55854668, "body": "You are welcome to visit my <a href=\"http://electronics.stackexchange.com/questions/186254/serial-protocol-delimiting-synchronization-techniques\">very related question on EE SE</a>"}, {"owner": {"reputation": 2832, "user_id": 3735873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K93GY.jpg?s=128&g=1", "display_name": "tonypdmtr", "link": "https://stackoverflow.com/users/3735873/tonypdmtr"}, "edited": false, "score": 0, "creation_date": 1449132227, "post_id": 34049560, "comment_id": 55876009, "body": "Do not do any decoding inside the ISR.  The main loop should do all the decoding/parsing.  A circular buffer should be as big as needed only to avoid overrun from incoming chars, i.e., the parsing of the various recognized parts should take less time than to fill up the buffer at your given &#39;baud&#39; rate.  The length of this buffer has nothing to do with the length of your data stream.  This problem is very similar to parsing source code with a compiler.  The length of the source is unknown to the compiler while it parses more code.  No compiler uses a buffer to hold the entire source."}], "answers": [{"tags": [], "owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "is_accepted": false, "score": 1, "last_activity_date": 1449091095, "creation_date": 1449091095, "answer_id": 34053180, "question_id": 34049560, "link": "https://stackoverflow.com/questions/34049560/how-to-parse-indeterminate-length-packet-from-mcu-uart/34053180#34053180", "title": "How to parse indeterminate length packet from MCU UART?", "body": "<p>The UART receive ISR should simply read the incoming byte from the UART and copy it to a circular buffer.  I wouldn't do any decoding/parsing/interpretation of the bytes in the ISR.  The circular buffer should be large enough to contain the largest message you expect to receive (or larger if bursts of messages can arrive faster than your main loop can handle them).</p>\n\n<p>The main loop should use a state machine to parse the byte stream into a message.  The states could be named READ_ADDRESS, READ_TYPE, and READ_DATA.  Or you may want to have a unique READ_DATA state for each message type.</p>\n\n<p>From a high level view, each state should read the appropriate number of bytes from the circular buffer and then advance to the next state.  It sounds like the data state handler function will have to be smart enough to calculate the appropriate number of data bytes.  If you have to interpret some of the data in order to figure the data length then you might want to consider breaking the READ_DATA state into two states, one for reading enough to figure the length and the other for reading the rest of the data.</p>\n\n<p>When you're designing your state handler functions, consider that the appropriate number of bytes may not have been received into the circular buffer yet.  From a low level view, the state handlers should return to the main loop when not enough bytes are available.  This allows the main loop to service other parts of the application while the ISR receives more bytes.  Then when the your main loop calls the state machine again, the state handler should pick up where it left off.</p>\n"}, {"tags": [], "owner": {"reputation": 2031, "user_id": 2539867, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/3gog5.png?s=128&g=1", "display_name": "Jubatian", "link": "https://stackoverflow.com/users/2539867/jubatian"}, "is_accepted": false, "score": 0, "last_activity_date": 1449511667, "creation_date": 1449511667, "answer_id": 34140269, "question_id": 34049560, "link": "https://stackoverflow.com/questions/34049560/how-to-parse-indeterminate-length-packet-from-mcu-uart/34140269#34140269", "title": "How to parse indeterminate length packet from MCU UART?", "body": "<p>So let's say you have a protocol where packets are of arbitrary size, but they have some patterns by which they are indentifiable. For some identification techniques, see below, first the reading process.</p>\n\n<ul>\n<li><p>Interrupt: It just loads bytes into a circular buffer, incrementing the write pointer (and pushing forth the read pointer when the buffer is full, so it drops bytes in a somewhat clean manner).</p></li>\n<li><p>Main program: Polls the buffer. It starts at the current read pointer and seeks whether from that a packet can be identified. If nothing is found, it tries to seek from read pointer + 1, and so on until covering the buffer. The read pointer is left unchanged (this is important). If a packet could be identified, it processes it, and (only then) sets the read pointer at the packet's end, thus discarding its contents from the circular buffer.</p></li>\n</ul>\n\n<p>Why leaving the read pointer unchanged is important when no packet could be identified? Since as further bytes trickle in, a larger packet might complete later.</p>\n\n<p>When the buffer is full with junk, thus the interrupt is pushing forth the read pointer, you might experience hazards depending on how cautiously you designed the interaction between the IT and the main thread. Usually with any reasonably sane implementation, there shouldn't be too many problems here. The push forth behavior in the IT is more consistent than simply passing the read pointer by the write pointer (thus indirectly discarding the entire buffer).</p>\n\n<p>Usually this approach works fine for just about anything. Once I had a situation where I had packet types which contained a smaller otherwise correct packet for the protocol. Now that was nasty to fix, to get the outer packet these cases! (The above algorithm will fetch the inner packet since it likely arrives sooner)</p>\n\n<p><em>So what about identification?</em></p>\n\n<ul>\n<li><p>If you have any identifiable header, a synchronization byte or whatever, it is easier to get the beginning (you can bail off fast if from the given start offset in the buffer it doesn't look like a proper header).</p></li>\n<li><p>You may need to do a partial processing in the identification (in the main program of course) to figure out the length of the packet. The simplest if there is any direct length indication, but without it, if there is a packet type identification (which implies a length, this seems to be your case) it is nothing much harder.</p></li>\n<li><p>If there is any checksum or CRC, it is also a good thing to detect the packet. Use it as part of the identification even if a complex header seems to be right: if it's there correct, then you definitely have a valid packet.</p></li>\n<li><p>If there is no checksum or CRC at all, use whatever fixed bits the packet has, or whatever fixed ranges the protocol imposes on certain values within the packet to see whether they match a valid packet.</p></li>\n</ul>\n\n<p>Using these principles I was able to get around quite wrecked protocols proper, I mean things like which assumed delays between packets with hardly any framing, the delays acting as separators, which ceased to exist after the data travelled through the Internet and / or was fetched by a PC running an operating system (in an operating system environment the interrupt and circular buffer is replaced by the OS' own buffering mechanisms, the principles to detect the packets are the same).</p>\n"}], "owner": {"reputation": 207, "user_id": 2953867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a603b887a4fa63490e22bf2feb63029?s=128&d=identicon&r=PG&f=1", "display_name": "M D", "link": "https://stackoverflow.com/users/2953867/m-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1449511667, "creation_date": 1449078517, "question_id": 34049560, "link": "https://stackoverflow.com/questions/34049560/how-to-parse-indeterminate-length-packet-from-mcu-uart", "title": "How to parse indeterminate length packet from MCU UART?", "body": "<p>I am attempting to attach a new microcontroller to an existing OSC (Open Sound Control) network via an ethernet-to-serial converter.</p>\n\n<p>The OSC messages are sent with the following formatting:</p>\n\n<ul>\n<li>OSC Address Pattern: /string/optional substring --> always 32-bit packed/DWORD aligned with extra NULL bytes at the end</li>\n<li>Type Tags: int32 (i), float32 (f), string (s)</li>\n<li>Data: for certain patterns, this is a known length; for others, it is indeterminate in length</li>\n</ul>\n\n<p>I'm a bit confused as to how best to divide up the code and how to buffer this.  In my UART receive ISR, I was hoping to just dump the incoming bytes to a SRAM buffer and then decode them in the main loop, but I'm not certain how to do this with indeterminate length packets.  I've never worked with a variable length packet that didn't indicate the packet size in the header somewhere.  There also doesn't appear to be any EOP/footer to indicate the completion of the packet and you are left with decoding x number of bytes based on the type tag.</p>\n\n<p>Some concerns:\n1. How to size the buffer?  Yes, I could do this dynamically, but I'd prefer to avoid that overhead, if possible.  That leads me towards a circular buffer, but how do I pull out what I need to in the main loop while continuing to decode the variable length packets?\n2. How much of the decode should be done in the ISR?  Do I set up some type of state machine in the main loop that advances based on the ISR decode of the incoming bytes and then flush those bytes as I advance the FSM?</p>\n\n<p>Looking for any advice/guidance on how best to tackle this problem/architect the code.  Thank you in advance.</p>\n"}, {"tags": ["c++", "c", "file", "floating-accuracy"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1449078667, "post_id": 34049530, "comment_id": 55853723, "body": "because <code>%Lf</code> literally means a number with up to six point precision. use standard <code>%f</code> instead"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1449078756, "post_id": 34049530, "comment_id": 55853768, "body": "This is using C function <code>frpintf()</code> so added <code>C</code> to get the appropriate audience."}, {"owner": {"reputation": 387, "user_id": 3481478, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5480528a062081d64c103c6966ef27f0?s=128&d=identicon&r=PG&f=1", "display_name": "user3481478", "link": "https://stackoverflow.com/users/3481478/user3481478"}, "edited": false, "score": 0, "creation_date": 1449078772, "post_id": 34049530, "comment_id": 55853784, "body": "Well, that is for writing into the file. When i am printing into the terminal its giving the same value."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1449078816, "post_id": 34049530, "comment_id": 55853808, "body": "Try <code>%Lg</code> or <code>%.20Lg</code> instead of <code>%Lf</code> in <code>fprintf</code> - does this help?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 1, "creation_date": 1449078880, "post_id": 34049530, "comment_id": 55853841, "body": "If you read a scientific notation number but write a fixed point one, this is the expected behavior."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1449078944, "post_id": 34049530, "comment_id": 55853873, "body": "Also, maybe you should clarify what you expected to get. I mean, literally write which output you want to get (<a href=\"https://stackoverflow.com/posts/34049530/edit\">edit</a> your question)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449079039, "post_id": 34049530, "comment_id": 55853925, "body": "Is the result displayed the result of &#39;cout&#39; or the file &#39;output&#39; ?"}, {"owner": {"reputation": 387, "user_id": 3481478, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5480528a062081d64c103c6966ef27f0?s=128&d=identicon&r=PG&f=1", "display_name": "user3481478", "link": "https://stackoverflow.com/users/3481478/user3481478"}, "edited": false, "score": 0, "creation_date": 1449079604, "post_id": 34049530, "comment_id": 55854278, "body": "I think &#39;%Lg&#39; works! Thanks :) What does it specify though?"}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 5, "last_activity_date": 1449079530, "last_edit_date": 1449079530, "creation_date": 1449079058, "answer_id": 34049722, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision/34049722#34049722", "title": "Long double not giving the required precision", "body": "<p>Try printing the values as <code>fixed</code></p>\n\n<p><a href=\"http://www.cplusplus.com/reference/iomanip/setprecision/\" rel=\"nofollow\">http://www.cplusplus.com/reference/iomanip/setprecision/</a><br>\n<a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdio/printf/</a></p>\n\n<pre><code> std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(10) &lt;&lt; value &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Definition:</p>\n\n<pre><code> fixed:       the value is represented with exactly as many digits in\n              the decimal part as specified by the precision field\n              (precision) and with no exponent part.\n\n scientific:  as many decimal digits as the precision field\n              (precision). Finally, this notation always includes an\n              exponential part consisting on the letter e followed by\n              an optional sign and three exponential digits.\n</code></pre>\n\n<p>For printing in C:</p>\n\n<pre><code>  fprintf(fp2, \"%.10f\\n\", value);\n</code></pre>\n\n<p>The definition of the format specifier is:</p>\n\n<pre><code>  %[flags][width][.precision][length]specifier\n\n  Precision: For a, A, e, E, f and F specifiers: this is the number\n             of digits to be printed after the decimal point.\n</code></pre>\n\n<p>So to achieve the same format in C++ as you get with C(%f) you need to use <code>std::fixed</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 707, "user_id": 1191041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6edf84b51543211a48ea137390a4faab?s=128&d=identicon&r=PG", "display_name": "maddin45", "link": "https://stackoverflow.com/users/1191041/maddin45"}, "is_accepted": false, "score": 2, "last_activity_date": 1449079428, "creation_date": 1449079428, "answer_id": 34049840, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision/34049840#34049840", "title": "Long double not giving the required precision", "body": "<p>If you want <code>fprintf</code> to print ten digits after the dot you have to write <code>%.10f</code> in the formatting string. The precision of <code>cout</code> does not influence <code>fprintf</code>.</p>\n\n<p>And you have to pass the IO manipulator <code>fixed</code> to <code>cout</code> before the numbers for it to take effect. Otherwise the first number you print will not be in fixed precition.</p>\n\n<pre><code>cout &lt;&lt; fixed &lt;&lt; numberlist[j] &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1449079819, "last_edit_date": 1495539880, "creation_date": 1449079819, "answer_id": 34049967, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision/34049967#34049967", "title": "Long double not giving the required precision", "body": "<p>To see the number in <code>C</code> in exponential notation (scientific) with 5 places after the decimal point use <code>\"%e\"</code>.</p>\n\n<pre><code>fprintf(fp2,\"%.5Le\\n\",numberlist[j]);\nfprintf(fp2,\"%.*Le\\n\", 5, numberlist[j]);\nfprintf(fp2,\"%.Le\\n\",numberlist[j]);  // If not precision give, defaults to 6.\n</code></pre>\n\n<p>To see a FP value in <a href=\"https://stackoverflow.com/q/16839658/2410359\">Printf width specifier to maintain precision</a> use</p>\n\n<pre><code>#include &lt;float.h&gt;\n\nfprintf(fp2,\"%.*Le\\n\", LDBL_DECIMAL_DIG - 1, numberlist[j]);\n// or simply in hexadecimal notation\nfprintf(fp2,\"%.*La\\n\", numberlist[j]);\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3481478, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5480528a062081d64c103c6966ef27f0?s=128&d=identicon&r=PG&f=1", "display_name": "user3481478", "link": "https://stackoverflow.com/users/3481478/user3481478"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 34049967, "answer_count": 3, "score": 2, "last_activity_date": 1449085068, "creation_date": 1449078435, "last_edit_date": 1592644375, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision", "title": "Long double not giving the required precision", "body": "<p>I am reading from a file which has values to a precision of 7 digits in the terms of exponential values</p>\n<blockquote>\n<p>4.81591e-007</p>\n<p>5.17968e-007</p>\n<p>5.03954e-008</p>\n<p>-8.30735e-007</p>\n</blockquote>\n<p>Though the values I am getting is with only a 5 point precision</p>\n<blockquote>\n<p>0.000000</p>\n<p>0.000001</p>\n<p>0.000000</p>\n<p>-0.000001</p>\n<p>-0.000002</p>\n</blockquote>\n<p>The code is as follows and is</p>\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;utility&gt; \n#include&lt;algorithm&gt;\n#include&lt;map&gt;\n#include&lt;cmath&gt;\n#include&lt;sstream&gt;\n#include&lt;string&gt;\n#include&lt;queue&gt;\n#include&lt;cstdlib&gt;\n#include&lt;cstdio&gt;\n#include&lt;fstream&gt;\nusing namespace std;    \nint main()\n{\n    FILE *fp2;\n    fp2=fopen(&quot;output&quot;,&quot;w&quot;);\n    int i=0;\n    ifstream myFile;\n    myFile.open(&quot;sruthi_DATA_.txt&quot;);\n    vector&lt;long double&gt;numberlist;\n    long double number;\n    while(myFile &gt;&gt; number){    //\n            numberlist.push_back(number);\n            i++;\n    }\n    int j;\n    for(j=0;j&lt;i;j++)\n    {\n        cout.precision(10);\n        cout&lt;&lt;numberlist[j]&lt;&lt;fixed&lt;&lt;endl;\n        fprintf(fp2,&quot;%Lf\\n&quot;,numberlist[j]);\n    }\n    fclose(fp);\n    fclose(fp2);\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "character", "scanf"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1449078291, "post_id": 34049463, "comment_id": 55853505, "body": "When the second colon appears you&#39;re supposed to enter something. ^^"}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 4802584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8f48f904639b2a2ad00d1f1f65d7e52?s=128&d=identicon&r=PG&f=1", "display_name": "Ramana Uday", "link": "https://stackoverflow.com/users/4802584/ramana-uday"}, "edited": false, "score": 0, "creation_date": 1449078523, "post_id": 34049496, "comment_id": 55853644, "body": "Dude thank for that but what is the space doing there ?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 255, "user_id": 4802584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8f48f904639b2a2ad00d1f1f65d7e52?s=128&d=identicon&r=PG&f=1", "display_name": "Ramana Uday", "link": "https://stackoverflow.com/users/4802584/ramana-uday"}, "edited": false, "score": 2, "creation_date": 1449078611, "post_id": 34049496, "comment_id": 55853697, "body": "A whitespace in the format string means <code>scanf()</code> will ignore all whitespaces in the input. You can use any whitespace character for the same effect, not necessarily <i>space</i>. There are other ways to achieve the same such as reading all chars from stdin using <code>getchar()</code> in a loop. My general suggestion is to avoid <code>scanf()</code> whenever possible. Instead use <code>fgets()</code> to read a line and use <code>sscanf()</code> to parse the line as necessary."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1449078298, "creation_date": 1449078298, "answer_id": 34049496, "question_id": 34049463, "link": "https://stackoverflow.com/questions/34049463/scanf-is-not-working-in-c/34049496#34049496", "title": "Scanf is not working in C", "body": "<p>It's because the previous <code>scanf()</code> left a newline in the input buffer. A simple fix to tell scanf to ignore all the whitespaces:</p>\n\n<pre><code>scanf(\" %c\",&amp;n); //Note the space before %c\n</code></pre>\n\n<p>Any whitespace directive ( space, <code>\\n</code> etc) in the format string tells scanf ignore any number of whitespaces in the input.</p>\n\n<p>From <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow\"><code>scanf()</code></a> manual:</p>\n\n<blockquote>\n<pre><code>   A sequence of white-space characters (space, tab, newline,\n          etc.; see isspace(3)).  This directive matches any amount of\n          white space, including none, in the input.\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 255, "user_id": 4802584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8f48f904639b2a2ad00d1f1f65d7e52?s=128&d=identicon&r=PG&f=1", "display_name": "Ramana Uday", "link": "https://stackoverflow.com/users/4802584/ramana-uday"}, "edited": false, "score": 0, "creation_date": 1449078414, "post_id": 34049497, "comment_id": 55853573, "body": "Dude that was awesome thank for that. But how is that space is working dude ?"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 255, "user_id": 4802584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8f48f904639b2a2ad00d1f1f65d7e52?s=128&d=identicon&r=PG&f=1", "display_name": "Ramana Uday", "link": "https://stackoverflow.com/users/4802584/ramana-uday"}, "edited": false, "score": 0, "creation_date": 1449078481, "post_id": 34049497, "comment_id": 55853620, "body": "@RamanaUday It tells the <code>scanf()</code> to ignore all white spaces."}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 1, "last_activity_date": 1449078304, "creation_date": 1449078304, "answer_id": 34049497, "question_id": 34049463, "link": "https://stackoverflow.com/questions/34049463/scanf-is-not-working-in-c/34049497#34049497", "title": "Scanf is not working in C", "body": "<p>The previous <code>scanf()</code> leaves a trailing newline character <code>\\n</code>. Eat it by doing</p>\n\n<pre><code>scanf(\" %c\",&amp;n);\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 4802584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8f48f904639b2a2ad00d1f1f65d7e52?s=128&d=identicon&r=PG&f=1", "display_name": "Ramana Uday", "link": "https://stackoverflow.com/users/4802584/ramana-uday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1303, "favorite_count": 0, "closed_date": 1449081856, "accepted_answer_id": 34049496, "answer_count": 2, "score": -1, "last_activity_date": 1517354970, "creation_date": 1449078221, "last_edit_date": 1517354970, "question_id": 34049463, "link": "https://stackoverflow.com/questions/34049463/scanf-is-not-working-in-c", "closed_reason": "Duplicate", "title": "Scanf is not working in C", "body": "<p>I am trying to work out why the second scanf is not working for me. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n     char n;int p;\n     printf(\"Enter the number: \");\n     scanf(\"%d\",&amp;p);\n     if(p==1) {\n          printf(\"Enter a character: \");\n          scanf(\"%c\",&amp;n);\n     }\n}\n</code></pre>\n\n<p>In this program the second <code>scanf(\"%c\",&amp;n)</code> is not working. What am I doing wrong? The output of above program is:</p>\n\n<pre><code>Enter a number: 1\nEnter a charter: \n</code></pre>\n\n<p>It is coming out of compiler.</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449078406, "post_id": 34049421, "comment_id": 55853568, "body": "Please consider restricting your questions to code that will at least pass the compiler, or else to questions about why the compiler rejects the code.  Yours is neither."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1449079380, "post_id": 34049421, "comment_id": 55854148, "body": "<code>int arr*;</code> won&#39;t compile."}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1449078184, "last_edit_date": 1495540763, "creation_date": 1449078184, "answer_id": 34049453, "question_id": 34049421, "link": "https://stackoverflow.com/questions/34049421/declaring-array-of-structs/34049453#34049453", "title": "Declaring array of structs", "body": "<p>\"Pushing\" isn't supported; neither by the standard library nor by any built-in. You'll need to write your own <a href=\"https://stackoverflow.com/questions/27992299/converting-c-implementation-of-vector-in-c\">dynamic memory allocation mechanism</a> instead.</p>\n\n<p>Also, C doesn't support default initialization of <code>struct</code> members like what you are attempting to use. Use a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html\" rel=\"nofollow noreferrer\">designated initializer list</a>.</p>\n"}], "owner": {"reputation": 67, "user_id": 5615848, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9f5865567f41a796376ab31a85c9c144?s=128&d=identicon&r=PG&f=1", "display_name": "Abdir", "link": "https://stackoverflow.com/users/5615848/abdir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449084347, "creation_date": 1449078074, "last_edit_date": 1449084347, "question_id": 34049421, "link": "https://stackoverflow.com/questions/34049421/declaring-array-of-structs", "title": "Declaring array of structs", "body": "<p>I have an array</p>\n\n<pre><code>int arr*;\n</code></pre>\n\n<p>I have declared a struct</p>\n\n<pre><code>struct counter{\n    int index=0;\n    int count=0;\n    int *values;  // array\n}\n</code></pre>\n\n<p>and the array will have a predefined max size. </p>\n\n<p>How do I \"push\" structs inside each index of array? I have tried to do as following:</p>\n\n<pre><code>for ( int i =0; i &lt; max ; i ++ ){\n    arr[i]=counter Store_Struct;\n    arr[i]-&gt;values=(int *)malloc ( 2 * sizeof ( int ));\n}\n</code></pre>\n\n<p>but this little piece of code didn't work. How can I push structures as array values?</p>\n"}, {"tags": ["c", "multithreading", "parallel-processing", "openmp", "interpolation"], "comments": [{"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 1, "creation_date": 1449078417, "post_id": 34049383, "comment_id": 55853577, "body": "When you run your modified program, do you get the same result as the original?"}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 1, "creation_date": 1449104356, "post_id": 34049383, "comment_id": 55866074, "body": "No this will not work correctly. First off, you misspelled it as <i>paralel</i> in one place. Secondly, you are using <code>section</code> outside of a <code>sections</code> unit, so they will do nothing. Thirdly, you have other compiler errors, so this won&#39;t even run to begin with. I suggest you run this sequentially first and fix those errors before trying to run it in parallel with OpenMP."}], "owner": {"reputation": 105, "user_id": 3217315, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/KaidY.jpg?s=128&g=1", "display_name": "abnerabbey", "link": "https://stackoverflow.com/users/3217315/abnerabbey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449119302, "creation_date": 1449077989, "question_id": 34049383, "link": "https://stackoverflow.com/questions/34049383/how-to-parallelize-correctly-this-program-using-openmp", "title": "How to parallelize correctly this program using OpenMP", "body": "<p>I'm in the process of learning parallelize concepts using OpenMP. So I have this program about interpolation and I made a try parallelizing this program, but I want to know if this is the correct form of doing this. \nThis is the program:</p>\n\n<p>Function 'main' demonstrates the polynomial interpolation function by generating some test points and then calling 'polint' with a\n value of x between two of the test points.</p>\n\n<p>Polynomial Interpolation\nThis program demonstrates a function that performs polynomial\ninterpolation. The function is taken from \"Numerical Recipes\nin C\", Second Edition, by William H. Press, Saul A. Teukolsky,\nWilliam T. Vetterling, and Brian P. Flannery.</p>\n\n<pre><code>#include&lt;math.h&gt; \n#include&lt;stdlib.h&gt; \n#include&lt;stdio.h&gt;\n#include&lt;openmp.h&gt;\n#define N 20 \n#define X 14.5\nint main (intargc, char *argv[]) {\ndouble x, y, dy;\ndouble *xa, *ya;\nint i;\nxa = vector (1, N); ya = vector (1, N);\n/* Initialize xa's and ya's */\nfor (i = 1; i&lt;= N; i++) {\n    init (i, &amp;xa[i], &amp;ya[i]);\n    printf (\"f(%4.2f) = %13.11f\\n\", xa[i], ya[i]);\n}\n/* Interpolate polynomial at X */\npolint (xa, ya, N, X, &amp;y, &amp;dy);\nprintf (\"\\nf(%6.3f) = %13.11f with error bound %13.11f\\n\", X, y, fabs(dy));\nfree_vector (xa, 1, N); free_vector (ya, 1, N); return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Functions 'sign' and 'init' are used to initialize the x and y vectors holding known values of the function.</p>\n\n<pre><code>int sign (int j)\n{\n    if (j % 2 == 0) return 1;\n    else return -1;\n}\nvoid init(inti, double *x, double *y) {\n    // int j;\n    *x = (double) i;\n    *y = sin(i);\n}\n</code></pre>\n\n<p>Function 'polint' performs a polynomial interpolation</p>\n\n<pre><code>void polint (double xa[], double ya[], int n, double x, double *y,     double *dy) {\ninti, m, ns=1;\ndoubleden,dif,dift,ho,hp,w;\ndouble *c, *d;\ndif = fabs(x-xa[1]); c = vector(1,n);\nd = vector(1,n);\n#pragma omp parallel\n{\n    #pragma omp for\n    for (i=1; i&lt;= n; i++)\n    {\n        #pragma section\n        dift = fabs (x - xa[i]);\n        #pragma omp simple\n        {\n            if (dift&lt;dif)\n            {\n                ns = i;\n                dif = dift;\n            }\n        }\n        c[i] = ya[i];\n        d[i] = ya[i];\n    }\n}\n*y = ya[ns--];\n#pragma omp paralel\n{\n    #pragma for reduction(/: den)\n    shared(m, n)\n    for (m = 1; m &lt; n; m++)\n    {\n        for (i = 1; i&lt;= n-m; i++)\n        {\n            ho = xa[i] - x;\n            hp = xa[i+m] - x;\n            w = c[i+1] - d[i]; den = ho - hp;\n            den = w / den;\n            d[i] = hp * den;\n            c[i] = ho * den;\n        }\n        #pragma omp section\n        *y += (*dy=(2*ns &lt; (n-m) ? c[ns+1] : d[ns--]));\n    }\n    #pragma omp section\n    free_vector (d, 1, n); free_vector (c, 1, n); }\n  }\n</code></pre>\n\n<p>Function 'free_vector' is used to free up memory allocated with function 'vector'</p>\n\n<pre><code>void free_vector(double *v, long nl, long nh) {\n    free ((char *) (v+nl-1));\n}\n</code></pre>\n\n<p>Function 'vector' is used to allocate vectors with subscript range v[nl..nh]</p>\n\n<pre><code>double *vector (long nl, long nh) {\n    double *v;\n    v = (double *) malloc(((nh-nl+2)*sizeof(double))); return v-nl+1;\n}\n</code></pre>\n"}, {"tags": ["c", "plc", "proficy"], "comments": [{"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449079548, "post_id": 34049351, "comment_id": 55854239, "body": "Not an answer but I asked a similar question a while ago <a href=\"http://stackoverflow.com/questions/757543/c-to-iec-61131-3-il-compiler\" title=\"c to iec 61131 3 il compiler\">stackoverflow.com/questions/757543/c-to-iec-61131-3-il-compi&zwnj;&#8203;ler</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4004661"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449080618, "post_id": 34049351, "comment_id": 55854848, "body": "@PeterM What tools did you use for structure text?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4004661"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449080866, "post_id": 34049351, "comment_id": 55854993, "body": "@PeterM What also are the best variables to use to store registers? I got a about 20 of them and need to be able to store and use them"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449082225, "post_id": 34049351, "comment_id": 55855734, "body": "The only tool really is Machine Edition.  Write the code and build it and see if there any errors.  As for variables, you can use whatever datatypes you feel you need (that are supported by ME and the specific PLC)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4004661"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449083136, "post_id": 34049351, "comment_id": 55856257, "body": "@PeterM are you only allowed to have variables that reference variables that on under variables list on the PLC? REAL was black till I created a variable called REAL and now they are lit up. I can put VARIABLE : R05555; which points to my variable for that register. Does this mean I can&#39;t make variables that are only accessible to this MAIN PROGRAM?"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449086285, "post_id": 34049351, "comment_id": 55858046, "body": "Creating a variable called <code>REAL</code> doesn&#39;t make sense.  You should have access to the <code>REAL</code> data type (BTW  <code>LREAL</code> should be the the GE equivalent of <code>double</code>).  I suspect in doing so that you created a linked variable eg your variable was linked to the variable called <code>REAL</code> in the PLC.  And I think that the answer to your last question is that you are correct.  All variables in GE PLCs are effectively global.  However variables do not have to be backed by registers (or bits etc)"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449086418, "post_id": 34049351, "comment_id": 55858115, "body": "Also it maybe better asking your questions on <a href=\"http://www.plctalk.net/\" rel=\"nofollow noreferrer\">plctalk.net</a> or <a href=\"http://forums.ge-ip.com/\" rel=\"nofollow noreferrer\">forums.ge-ip.com</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4004661"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449086862, "post_id": 34049351, "comment_id": 55858360, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/96829/discussion-between-dark-shadow-and-peter-m\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 6013461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f30e305520f0278ce2e48e8bf07dbb?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Campbell", "link": "https://stackoverflow.com/users/6013461/paul-campbell"}, "is_accepted": false, "score": 1, "last_activity_date": 1457118488, "creation_date": 1457118488, "answer_id": 35804145, "question_id": 34049351, "link": "https://stackoverflow.com/questions/34049351/plc-structure-text-from-c/35804145#35804145", "title": "PLC Structure Text From C", "body": "<p>Structured text is for all intents and purposes Pascal. Newer PLC's which are IEC 61131 compatible support local variable scopes and since you mentioned GE Proficy ME that means it's not one of them. The newer I#XI processors are IEC 61131 compatible but the older ones predate this standard.</p>\n\n<p>There is no \"translator\" and no real compatibility with anything else. Other than the older Logicmaster software which is DOS based, what you see is what you have to work with. This series of PLC's was originally rebranded Toyo PLC's until later when the GE/Fanuc joint venture began building their own.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4004661"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457118488, "creation_date": 1449077873, "last_edit_date": 1449079122, "question_id": 34049351, "link": "https://stackoverflow.com/questions/34049351/plc-structure-text-from-c", "title": "PLC Structure Text From C", "body": "<p>I have some old C code that is used to perform tasks on top of the PLC. I am wanting to convert this code into Structure Text on GEs Proficy Machine Edition. Is there any special tools or etc. that can help me to better understand how to convert the C code into structure text? Is there any software that can find syntax errors or anything of that matter since there is no color changes in this to show I used a keyword or etc.? I am starting to translate my global double variables into real variables in structure text but I am not sure if this is correct since I have never used Structure Text before.</p>\n\n<pre><code>CONFIGURATION DefaultCfg\n     VAR_GLOBAL\n        variable : REAL;\n     END_VAR\n\n     PROGRAM MAIN : MAIN;\nEND_CONFIGURATION\n\nPROGRAM MAIN\n     VAR\n        nonglobal : REAL;\n     END_VAR\nEND_PROGRAM\n</code></pre>\n"}, {"tags": ["c", "linux", "gstreamer", "gst-launch"], "comments": [{"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 1, "creation_date": 1449133533, "post_id": 34049138, "comment_id": 55876810, "body": "what about adding -e to gst-launch - hope it is there at 0.10 but its just a gues.. it should emit EOS when pipeline is done - its usually used when you shut pipe with ^c"}], "owner": {"reputation": 9, "user_id": 5108539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e188c2ebc1e28b068aebdcf039dbdf?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/5108539/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 835, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449137294, "creation_date": 1449077197, "last_edit_date": 1449137294, "question_id": 34049138, "link": "https://stackoverflow.com/questions/34049138/gstreamer-element-multifilesrc-does-not-throw-eos-with-stop-index-parameter-set", "title": "GStreamer element multifilesrc does not throw EOS with stop-index parameter set", "body": "<p>I have a <code>pipeline</code> which does not throw an EOS when I have the <code>stop-index</code>parameter set. </p>\n\n<p>The pipeline looks like this:</p>\n\n<pre><code>gst-launch-0.10 multifilesrc start-index=140 stop-index=145 location=\"ADIF%04d.jpg\" ! image/jpeg, framerate=5/1 ! decodebin ! videoscale ! video/x-raw-yuv, width=1920, height=1080, framerate=5/1 ! ffmpegcolorspace ! queue ! x264enc bitrate=5000 ! queue ! h264parse ! avimux ! filesink location=x264enc_1080p_5fps_bitrate_5000.avi\n</code></pre>\n\n<p>This pipeline continuously creates a video of the 5 frames ADIF0140.jpg -> ADIF0145.jpg, repeatedly, until I manually stop it. For example, I would have a video which shows the 5 frames, then the 5 frames again, and again and again etc. Its like its stuck in a loop of some kind.</p>\n\n<p>If I remove the <code>stop-index</code>, then the pipeline will generate an EOS when the file list is exhausted. However, I need the pipeline to throw an EOS once I've reached a specific number of frames.</p>\n\n<p><code>gst-inspect-0.10 multifilesrc</code> tells me that the <code>stop-index</code> parameter does indeed tell the pipeline to stop once the index has been reached. Maybe I'm misunderstanding something?</p>\n\n<p>Is there a way for multifilesrc to generate an EOS on reaching the <code>stop-index</code> parameter?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have followed the suggestion in the comments section and added -e to my gst-launch command. It hasn't made any difference to my output unfortunately. Still don't receive any EOS. However, now when I control c manually, I do see a message printed saying:</p>\n\n<pre><code>EOS on shutdown enabled -- Forcing EOS on the pipeline\nGot EOS from element \"pipeline0\".\nEOS received - stopping pipeline...\n</code></pre>\n\n<p>I ran a <code>export GST_DEBUG=\"*:3\"</code> before running the gst-launch command with the <code>stop-index</code> parameter set and get an interesting output which I can't make sense of.</p>\n\n<pre><code>New clock: GstSystemClock\n0:00:02.708615944  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:02.946719402  1037      0x16b7800 INFO               h264parse gsth264parse.c:1137:gst_h264_parse_update_src_caps:&lt;h264parse0&gt; setting framerate in caps\n0:00:02.946788159  1037      0x16b7800 INFO               baseparse gstbaseparse.c:3234:gst_base_parse_set_latency:&lt;h264parse0&gt; min/max latency 0:00:00.200000000, 0:00:00.200000000\n0:00:02.946850722  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:03.247947224  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:03.428127717  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:03.671530817  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:03.861473919  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:04.213566287  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:04.400715503  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:04.852917625  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:05.018448277  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:05.200358262  1037      0x16b7800 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0x16b78b0 (tag) to all internally linked pads\n0:00:05.266578561  1037      0x16b7800 INFO               h264parse gsth264parse.c:1137:gst_h264_parse_update_src_caps:&lt;h264parse0&gt; setting framerate in caps\n0:00:05.266680768  1037      0x16b7800 INFO               baseparse gstbaseparse.c:3234:gst_base_parse_set_latency:&lt;h264parse0&gt; min/max latency 0:00:00.200000000, 0:00:00.200000000\n</code></pre>\n\n<p>If I run the same gst-launch command, without the stop-index, I get an EOS output:</p>\n\n<pre><code>New clock: GstSystemClock\n0:00:02.073319330  1052       0xec1400 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;avimux0:video_00&gt; Sending event 0xec14b0 (tag) to all internally linked pads\n0:00:02.073429953  1052       0xec1400 INFO                GST_PADS gstpad.c:3554:gst_pad_event_default_dispatch:&lt;h264parse0:sink&gt; Sending event 0xec7e90 (eos) to all internally linked pads\n0:00:02.073525245  1052       0xec1400 INFO               GST_EVENT gstevent.c:606:gst_event_new_new_segment_full: creating newsegment update 0, rate 1.000000, format bytes, start 0, stop -1, position 0\n0:00:02.073572978  1052       0xec1400 INFO               GST_EVENT gstevent.c:606:gst_event_new_new_segment_full: creating newsegment update 0, rate 1.000000, format bytes, start 902654, stop -1, position 902654\nGot EOS from element \"pipeline0\".\n</code></pre>\n\n<p>Can anyone help explain these outputs?</p>\n"}, {"tags": ["c", "string", "pointers", "atoi"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1449077342, "post_id": 34049112, "comment_id": 55852955, "body": "You want to learn how to sue a debugger, to be able to step through your code and see what is really going on. Also some useful hints here:  <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1449077479, "post_id": 34049112, "comment_id": 55853024, "body": "After the <code>atoi</code> you must advance to the next <code>&#39;x&#39;</code> or string terminator, but <code>i</code> is still indexing part of the number you have just converted. That&#39;s why it works only with single-digit numbers. Better yet, advance to the next non-digit so your algorithm can handle different arithmetic operators."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1449077704, "post_id": 34049112, "comment_id": 55853168, "body": "C does not have a specific <code>string</code> type."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5597193, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/795fb21f32a72075a327924717c0ff89?s=128&d=identicon&r=PG&f=1", "display_name": "condog", "link": "https://stackoverflow.com/users/5597193/condog"}, "edited": false, "score": 0, "creation_date": 1449078244, "post_id": 34049279, "comment_id": 55853480, "body": "Thank you! I wasn&#39;t sure how you&#39;d go about using delimiters in C."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 0, "last_activity_date": 1449077938, "last_edit_date": 1449077938, "creation_date": 1449077632, "answer_id": 34049279, "question_id": 34049112, "link": "https://stackoverflow.com/questions/34049112/converting-character-pointer-to-string-pointer-removing-duplication/34049279#34049279", "title": "converting character pointer to string pointer, removing duplication", "body": "<p>As others have suggested, <strong>learn to debug</strong>. It's going to be worth it!</p>\n\n<hr>\n\n<p>Have a look at <code>strtok</code>. From <code>man strtok</code>:</p>\n\n<blockquote>\n  <p>The <code>strtok()</code> function parses a string into a sequence of tokens.</p>\n</blockquote>\n\n<p>These tokens are divided by delimiters like <code>\"x\"</code>. So, in order to parse the numbers, use something like this:</p>\n\n<pre><code>char d[] = \"53x23x4\";\n\nint array[3];\n\nchar* it = strtok(d, \"x\");\n\nfor (size_t i = 0; i &lt; sizeof(array) / sizeof(*array) &amp;&amp; it; ++i, it = strtok(NULL, \"x\"))\n    array[i] = atoi(it);\n</code></pre>\n\n<p><strong>Note</strong> that <code>d</code> points to an <strong>automatic and writable</strong> string. <code>strtok</code> modifies a string's content and since string literal modification yields undefined behavior, you need to allocate the string at a writable location.</p>\n\n<p>Instead of <code>array</code> use some dynamic memory allocation mechanism and you have it. This spares you from this inconvenient hassle you're currently using.</p>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>stop using <code>char*</code> to point to string literals. Use <code>const char*</code> instead. This prevents subtle errors where you try to modify string literals (undefined behavior).</li>\n</ul>\n"}], "owner": {"reputation": 37, "user_id": 5597193, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/795fb21f32a72075a327924717c0ff89?s=128&d=identicon&r=PG&f=1", "display_name": "condog", "link": "https://stackoverflow.com/users/5597193/condog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 34049279, "answer_count": 1, "score": 0, "last_activity_date": 1449077938, "creation_date": 1449077149, "last_edit_date": 1449077214, "question_id": 34049112, "link": "https://stackoverflow.com/questions/34049112/converting-character-pointer-to-string-pointer-removing-duplication", "title": "converting character pointer to string pointer, removing duplication", "body": "<p>I'm writing a program that takes in a string as input e.g. 35x40x12. I want to then store the numbers as separate elements using an int pointer. So far I've managed to do this so that single digit numbers work, i.e. 3x4x6 works, however if I put in two digit numbers such as 35x40x12, the 35 will be stored in the first position, however in the second position it will also store the 5 from 35, it does this for positions 3 and 4 with regard to 40 as well. How do I remove this duplication? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint present(int l, int w, int h);\nint *stringC (char *z);\n\n\n  int main(int argc, char *argv[])\n{\n\n    char *d = \"53x23x4\";//input\n    printf(\"%d\", *(stringC(d)+2));//whatever's stored in pointer position\n\n    return 0;\n}\n\n int *stringC (char *z)\n    {\n\n    int i;\n    int *k = malloc(sizeof(int)*20);\n    int j = 0;\n\nfor(i=0; z[i] !='\\0';i++)\n   {\n     if( z[i]!= 'x')\n     {\n       k[j]=atoi(&amp;z[i]);\n       j++;}\n   }\n\n\n    return k;\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1449076953, "post_id": 34048979, "comment_id": 55852694, "body": "What happens is you change <code>printf(&quot;accessing str with null pointer %d\\n&quot;, p-&gt;str);</code> to <code>printf(&quot;accessing str with null pointer %s\\n&quot;, p-&gt;str);</code> since you are trying to output a string and not an integer?"}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 1, "creation_date": 1449077194, "post_id": 34048979, "comment_id": 55852858, "body": "Duplicate? C and C++ are not the same I&#39;d say. Here it is the printf function and the specifier that influence the result. I would not close that question."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1449077212, "post_id": 34048979, "comment_id": 55852869, "body": "Undefined Behavior is Undefined Behavior"}, {"owner": {"reputation": 214, "user_id": 4248363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oMgWN.png?s=128&g=1", "display_name": "Masud Parves Bhuiyan", "link": "https://stackoverflow.com/users/4248363/masud-parves-bhuiyan"}, "edited": false, "score": 0, "creation_date": 1449077253, "post_id": 34048979, "comment_id": 55852897, "body": "my intention isn&#39;t to print the string value but to access p-&gt;str. str is a array. so %d should print the address of array. but since p is null it should not (?) able to do that? right?"}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 1, "creation_date": 1449077294, "post_id": 34048979, "comment_id": 55852920, "body": "The &quot;value&quot; of <code>p-&gt;str</code> that is passed to printf() is actually the pointer to <code>str</code>&#39;s first element (due to implicit conversion of array to pointer). This address is calculated directly by adding an offset to <code>p</code>, without the need to <i>dereference</i> it. On the other hand, displaying <code>i</code> or the array contents dereferences the pointer."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1449077405, "post_id": 34048979, "comment_id": 55852988, "body": "@Elyasin the whole discussion about what happens when you pass... is moot. The moment you write <code>p-&gt;whatever</code> or <code>*p</code> where <code>p</code> is NULL you get Undefined Behavor"}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 1, "creation_date": 1449077588, "post_id": 34048979, "comment_id": 55853098, "body": "In fact, it&#39;s exactly the same kind of behavior one would get with <code>printf(&quot;Address-of through null pointer: %p\\n&quot;, &amp;p-&gt;i);</code> (only with the correct format specifier, this time). In either case, the pointer is not dereferenced because all it takes is adding the variable&#39;s offset to it."}, {"owner": {"reputation": 214, "user_id": 4248363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oMgWN.png?s=128&g=1", "display_name": "Masud Parves Bhuiyan", "link": "https://stackoverflow.com/users/4248363/masud-parves-bhuiyan"}, "reply_to_user": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 0, "creation_date": 1449077905, "post_id": 34048979, "comment_id": 55853276, "body": "@Medinoc I get your point. thanks for your help."}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 0, "creation_date": 1449078142, "post_id": 34048979, "comment_id": 55853416, "body": "Last thing: I&#39;d like to point out that the <code>offsetof</code> macro does precisely this: Use a null pointer to the structure, get the address of its member, and return this as the offset."}], "owner": {"reputation": 214, "user_id": 4248363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oMgWN.png?s=128&g=1", "display_name": "Masud Parves Bhuiyan", "link": "https://stackoverflow.com/users/4248363/masud-parves-bhuiyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "closed_date": 1449076908, "answer_count": 0, "score": 0, "last_activity_date": 1449077403, "creation_date": 1449076732, "last_edit_date": 1495542655, "question_id": 34048979, "link": "https://stackoverflow.com/questions/34048979/why-null-pointer-able-access-member-array-of-a-structure-in-c", "closed_reason": "Duplicate", "title": "Why null pointer able access member array of a structure in C?", "body": "<p>I'm confused about how null pointer access a structure member in c language. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct A\n{\n    int i;\n    char str[30];\n};\n\nint main()\n{\n    struct A *p = NULL;\n\n    printf(\"accessing str with null pointer %d\\n\", p-&gt;str);\n    printf(\"accessing i with null pointer %d\\n\", p-&gt;i);\n    printf(\"accessing str[0] with null pointer %d\\n\", p-&gt;str[0]);\n\n    return 0;\n}\n</code></pre>\n\n<p>In above example, only first printf is executing. Other printf are crashing the program. I thought all of them would crash the program. but why p->str(array member) isn't causing any problem? From my search I found those questions <a href=\"https://stackoverflow.com/questions/10904951/null-pointer-able-to-access-class-member-function\">NULL pointer able to access class member function</a> and <a href=\"https://stackoverflow.com/questions/669742/accessing-class-members-on-a-null-pointer\">Accessing class members on a NULL pointer</a> which is helpful but questions are related with member function. Can someone help me to understand, how null pointer access work for member variables (array and non-array).</p>\n"}, {"tags": ["c", "r", "visual-studio", "visual-studio-2012", "r-package"], "comments": [{"owner": {"reputation": 239581, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 0, "creation_date": 1449078966, "post_id": 34048938, "comment_id": 55853890, "body": "I do not think that the standard binary installations of R have the files you need. I know that *nix users need to install an expanded set of files in order to have the correct header files available."}, {"owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "edited": false, "score": 2, "creation_date": 1449080908, "post_id": 34048938, "comment_id": 55855022, "body": "See the R Installation and Administration manual section on <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-admin.html#The-Windows-toolset\" rel=\"nofollow noreferrer\">the Windows toolset</a> -- basically, you&#39;ll have a very difficult time using Visual Studio, and instead need to use MinGW-based Rtools."}, {"owner": {"reputation": 1813, "user_id": 1957102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dlhPM.jpg?s=128&g=1", "display_name": "Patric", "link": "https://stackoverflow.com/users/1957102/patric"}, "edited": false, "score": 0, "creation_date": 1459329666, "post_id": 34048938, "comment_id": 60232858, "body": "Could you try VS2015 which supports R natively? Maybe the problem can be fixed sometime? Btw, <code>.C()</code> can work with VS, example <a href=\"https://devblogs.nvidia.com/parallelforall/accelerate-r-applications-cuda/\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 4, "last_activity_date": 1449093715, "creation_date": 1449093715, "answer_id": 34053933, "question_id": 34048938, "link": "https://stackoverflow.com/questions/34048938/building-r-packages-c-api-with-visual-studio/34053933#34053933", "title": "Building R packages (C API) with Visual Studio", "body": "<p>Allow me to quote from the <a href=\"https://github.com/RcppCore/Rcpp/blob/master/vignettes/Rcpp-FAQ.Rnw\" rel=\"nofollow\">Rcpp FAQ</a> vignette:</p>\n\n<blockquote>\n  <p><strong>Can I use <code>Rcpp</code> with Visual Studio ?</strong></p>\n  \n  <p>Not a chance.</p>\n  \n  <p>And that is not because we are meanies but because <code>R</code> and Visual\n  Studio simply do not get along. As <code>Rcpp</code> is all about extending\n  <code>R</code> with <code>C++</code> interfaces, we are bound by the available\n  toolchain.  And <code>R</code> simply does not compile with Visual Studio. Go\n  complain to its vendor if you are still upset.</p>\n</blockquote>\n\n<p>Microsoft more or less went out of its way to ensure what its OS and tooling were not POSIX compliant.  As R grew up in a Unix / POSIX world there simply is a gap you cannot bridge (easily).</p>\n\n<p>So on Windows the MinGW port of gcc it is.</p>\n"}], "owner": {"reputation": 1121, "user_id": 1569170, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7a5bf1854f1eae9cc5fd8392a3f9fba3?s=128&d=identicon&r=PG", "display_name": "gipouf", "link": "https://stackoverflow.com/users/1569170/gipouf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 0, "accepted_answer_id": 34053933, "answer_count": 1, "score": 4, "last_activity_date": 1449093715, "creation_date": 1449076604, "question_id": 34048938, "link": "https://stackoverflow.com/questions/34048938/building-r-packages-c-api-with-visual-studio", "title": "Building R packages (C API) with Visual Studio", "body": "<p>I'm trying to build a simple R package with Visual Studio, here is my code:</p>\n\n<pre><code>#include &lt;R.h&gt;\n#include &lt;Rinternals.h&gt;\n\nSEXP add(SEXP a, SEXP b) {\n  SEXP result = PROTECT(allocVector(REALSXP, 1));\n  REAL(result)[0] = asReal(a) + asReal(b);\n  UNPROTECT(1);\n\n  return result;\n}\n</code></pre>\n\n<p>I have R runtime and RTools installed.</p>\n\n<p>When I try to compile it, I get the following link error:</p>\n\n<pre><code>error LNK2019: unresolved external symbol REAL referenced in function \"struct SEXPREC * __cdecl add(struct SEXPREC *,struct SEXPREC *)\" (?add@@YAPEAUSEXPREC@@PEAU1@0@Z)\nerror LNK2019: unresolved external symbol Rf_asReal referenced in function \"struct SEXPREC * __cdecl add(struct SEXPREC *,struct SEXPREC *)\" (?add@@YAPEAUSEXPREC@@PEAU1@0@Z)\nerror LNK2019: unresolved external symbol Rf_allocVector referenced in function \"struct SEXPREC * __cdecl add(struct SEXPREC *,struct SEXPREC *)\" (?add@@YAPEAUSEXPREC@@PEAU1@0@Z)\nerror LNK2019: unresolved external symbol Rf_protect referenced in function \"struct SEXPREC * __cdecl add(struct SEXPREC *,struct SEXPREC *)\" (?add@@YAPEAUSEXPREC@@PEAU1@0@Z)\nerror LNK2019: unresolved external symbol Rf_unprotect referenced in function \"struct SEXPREC * __cdecl add(struct SEXPREC *,struct SEXPREC *)\" (?add@@YAPEAUSEXPREC@@PEAU1@0@Z)\n</code></pre>\n\n<p>Well, I guess that i'm missing some binaries that are required for the linking process. The problem is that I have no idea where can I find the necessary <code>.lib</code> files. Inside the R runtime installation folder I can find the <code>include</code> directory, but I cannot find any <code>lib</code> directory. What am I missing?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "strstr"], "comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 3, "creation_date": 1449076769, "post_id": 34048907, "comment_id": 55852570, "body": "There&#39;s a terminating &#39;\\0&#39; missing in haystack which will cause you all kinds of trouble."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1449076965, "post_id": 34049026, "comment_id": 55852704, "body": "1+ for using <code>strcspn()</code> :-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1449077099, "post_id": 34049026, "comment_id": 55852799, "body": "Limiting the read-loop to not overflow the <code>haystack</code> would also be nice ... ;-)"}, {"owner": {"reputation": 41, "user_id": 5592330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5d668a8e8dc4fb6d96822f2f9af321?s=128&d=identicon&r=PG&f=1", "display_name": "NoobProgrammerWannabe", "link": "https://stackoverflow.com/users/5592330/noobprogrammerwannabe"}, "edited": false, "score": 0, "creation_date": 1449078306, "post_id": 34049026, "comment_id": 55853511, "body": "I see it, and i entirely agree with the needle, since i want it limited to 1 line only, but when it comes to haystack - I&#39;d like it to be more than 1 line. With that in mind, can i somehow do it, so that i don&#39;t need to define the haystack a [250] element array, and it woud count the elements as i end inputting? But then another problem would occur, since i wouldn&#39;t have \\n in my needle, but i would have it in haystack - ergo it wouldn&#39;t match if the needle would be divided in 2 lines in my haystack."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1449085523, "post_id": 34049026, "comment_id": 55857630, "body": "You could translate neelines to spaces as you read the rest of stdin into the haystack buffer."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1449077168, "last_edit_date": 1449077168, "creation_date": 1449076874, "answer_id": 34049026, "question_id": 34048907, "link": "https://stackoverflow.com/questions/34048907/strstr-works-only-if-my-substring-is-at-the-end-of-string/34049026#34049026", "title": "strstr works only if my substring is at the end of string", "body": "<p>You read one string with <code>fgets()</code> and the other with <code>getchar()</code> upto the end of file.  There is a trailing <code>'\\n'</code> at the end of both strings, Hence <code>strstr()</code> can only match the substring if it is at the end of the main string.\nFurthermore, you do not store a final <code>'\\0'</code> at the end of <code>haystack</code>.  You must do this because <code>haystack</code> is a local array (automatic storage), and as such is not initialized implicitly.</p>\n\n<p>You can correct the problem this way:</p>\n\n<pre><code>//getting my substring here (needle)\nif (!fgets(needle, sizeof(needle), stdin)) {\n    // unexpected EOF, exit\n    exit(1);\n}\nneedle[strcspn(needle, \"\\n\")] = '\\0';\n\n//getting my string here (haystack)\nif (!fgets(haystack, sizeof(haystack), stdin)) {\n    // unexpected EOF, exit\n    exit(1);\n}\nhaystack[strcspn(haystack, \"\\n\")] = '\\0';\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5592330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5d668a8e8dc4fb6d96822f2f9af321?s=128&d=identicon&r=PG&f=1", "display_name": "NoobProgrammerWannabe", "link": "https://stackoverflow.com/users/5592330/noobprogrammerwannabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489095707, "creation_date": 1449076506, "last_edit_date": 1489095707, "question_id": 34048907, "link": "https://stackoverflow.com/questions/34048907/strstr-works-only-if-my-substring-is-at-the-end-of-string", "title": "strstr works only if my substring is at the end of string", "body": "<p>I've encountered a couple of problems with the program that i'm writing now.</p>\n\n<ol>\n<li>strstr outputs my substring only if it's at the end of my string <img src=\"https://i.stack.imgur.com/yAkbQ.png\" alt=\"enter image description here\"></li>\n<li>it also outputs some trash characters after that <img src=\"https://i.stack.imgur.com/cIB4X.png\" alt=\"enter image description here\"></li>\n<li>I've had problems with \"const char *haystack\" and then adding input to it, so i did it with fgets and getchar loop</li>\n<li>somewhere along the way it worked with a substring that was not only at the end, but then i outputted substring and the rest of the string ater that</li>\n</ol>\n\n<p>here is my main: </p>\n\n<pre><code>int main() {\n    char    haystack[250],\n            needle[20];\n\n    int     currentCharacter,\n            i=0;\n\n    fgets(needle,sizeof(needle),stdin); //getting my substring here (needle)\n\n    while((currentCharacter=getchar())!=EOF) //getting my string here (haystack)\n\n    {\n        haystack[i]=currentCharacter;\n        i++;\n    }\n\n    wordInString(haystack,needle);\n\n    return(0);\n}\n</code></pre>\n\n<p>and my function:</p>\n\n<pre><code>int wordInString(const char *str, const char * wd)\n{\n    char *ret;\n    ret = strstr(str,wd);\n\n    printf(\"The substring is: %s\\n\", ret);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 3, "creation_date": 1449076537, "post_id": 34048848, "comment_id": 55852404, "body": "Perhaps read the manual page and escape the %"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1449077567, "post_id": 34048848, "comment_id": 55853084, "body": "Or just use <code>strncpy()</code> since <code>sprintf()</code> is for formatting a string, which you&#39;re not doing here."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449078078, "post_id": 34048848, "comment_id": 55853374, "body": "Be careful with <code>strncpy()</code>; it does not guarantee null termination.  But I agree that using <code>snprintf()</code> to do a simple string copy is a little bit of overkill."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1449078191, "post_id": 34048848, "comment_id": 55853447, "body": "Why are you invoking a shell to do this, anyway?  Just <code>stat()</code> the file and compute the value in C - much more efficient, more reliable, more maintainable."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 2, "last_activity_date": 1449077904, "creation_date": 1449077904, "answer_id": 34049362, "question_id": 34048848, "link": "https://stackoverflow.com/questions/34048848/string-concatenation-using-snprintf/34049362#34049362", "title": "String concatenation using snprintf", "body": "<p>If you want the <code>%s</code> to be substituted, then provide <code>const char*</code> arguments to <code>snprintf</code> with the value to write.</p>\n\n<p>If you want literal <code>%s</code> in <code>msgText</code>, then either escape the <code>%</code> as <code>%%</code>, or pass the string as a single argument to a format string of <code>\"%s\"</code>:</p>\n\n<pre><code>snprintf(msgText, MAX_MSG_SIZE-1, \"%s\", \"$(date +%s) ...\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 1, "last_activity_date": 1449079081, "creation_date": 1449079081, "answer_id": 34049731, "question_id": 34048848, "link": "https://stackoverflow.com/questions/34048848/string-concatenation-using-snprintf/34049731#34049731", "title": "String concatenation using snprintf", "body": "<p>You shouldn't be invoking a shell and two <code>date</code> processes for something as simple as this.  You should just <code>stat()</code> the file and subtract its mtime from the current time in C:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/stat.h&gt;\n\ndouble age(const char *path) {\n    struct stat buf;\n\n    if (stat(path, &amp;buf)) {\n        perror(\"stat\");\n        return -1;\n    }\n\n    time_t now = time(NULL);\n    if (time &lt; 0) {\n        perror(\"time\");\n        return -1;\n    }\n\n    return difftime(now, buf.st_mtime) / 86400;\n}\n</code></pre>\n\n<p>The test program can be very simple:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char **argv)\n{\n    while (*++argv)\n        printf(\"%s: %.0f days\\n\", *argv, age(*argv));\n}\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 954598, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/41dae48028cadf4edbea24a271fc4731?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/954598/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1449079081, "creation_date": 1449076350, "last_edit_date": 1449078120, "question_id": 34048848, "link": "https://stackoverflow.com/questions/34048848/string-concatenation-using-snprintf", "title": "String concatenation using snprintf", "body": "<p>I am making a string using <code>snprintf()</code>:</p>\n\n<pre><code>snprintf(msgText, MAX_MSG_SIZE-1, \"expr $((($(date +%s) - $(date +%s -r filename.txt)) / 86400))\");\n</code></pre>\n\n<p>This is intended to store a Linux command in <code>msgText</code>.  The command will get executed later and output the age of <code>filename.txt</code> in days.</p>\n\n<p>Issue here is:</p>\n\n<p>This is wrong, as <code>snprintf</code> expects <code>%s</code> to have a string argument. The compiler reports this error:</p>\n\n<pre><code>error: format \u2018%s\u2019 expects a matching \u2018char *\u2019 argument \n</code></pre>\n\n<p>What should I do?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5552189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f3a459241dafc65b302574cc6c29ab?s=128&d=identicon&r=PG&f=1", "display_name": "user5552189", "link": "https://stackoverflow.com/users/5552189/user5552189"}, "edited": false, "score": 0, "creation_date": 1449076805, "post_id": 34048852, "comment_id": 55852595, "body": "Aahhhh of course......silly me. I used array-&gt;head = (smallList*)malloc(sizeof(smallList));"}, {"owner": {"reputation": 952, "user_id": 5548598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46ca4f3bb8b45761077cbfd9a6e9d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Taelsin", "link": "https://stackoverflow.com/users/5548598/taelsin"}, "reply_to_user": {"reputation": 31, "user_id": 5552189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f3a459241dafc65b302574cc6c29ab?s=128&d=identicon&r=PG&f=1", "display_name": "user5552189", "link": "https://stackoverflow.com/users/5552189/user5552189"}, "edited": false, "score": 0, "creation_date": 1449078089, "post_id": 34048852, "comment_id": 55853383, "body": "Also here&#39;s something I didn&#39;t know until a few weeks ago about malloc and why you shouldn&#39;t cast the pointer: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}], "tags": [], "owner": {"reputation": 952, "user_id": 5548598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46ca4f3bb8b45761077cbfd9a6e9d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Taelsin", "link": "https://stackoverflow.com/users/5548598/taelsin"}, "is_accepted": false, "score": 2, "last_activity_date": 1449076357, "creation_date": 1449076357, "answer_id": 34048852, "question_id": 34048792, "link": "https://stackoverflow.com/questions/34048792/list-into-a-list-segmentation-fault/34048852#34048852", "title": "List into a list segmentation fault", "body": "<p>You haven't allocated memory for the <code>head</code> variable in the array. After you <code>malloc</code> space for <code>array</code> try something like</p>\n\n<pre><code>array-&gt;head = malloc(sizeof(smallList));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2805, "user_id": 4568212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EFy85.jpg?s=128&g=1", "display_name": "Punit Vara", "link": "https://stackoverflow.com/users/4568212/punit-vara"}, "is_accepted": true, "score": 1, "last_activity_date": 1449079427, "creation_date": 1449079427, "answer_id": 34049839, "question_id": 34048792, "link": "https://stackoverflow.com/questions/34048792/list-into-a-list-segmentation-fault/34049839#34049839", "title": "List into a list segmentation fault", "body": "<p>Segmentation fault occur here because you are trying to access data structure to which you does not allot memory . You should allot memory for <code>head</code> pointer . That can be done by \n<code>array-&gt;head = malloc(sizeof(smallList));</code></p>\n\n<p>Effective code of your question is :</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n\n  #include &lt;stdlib.h&gt;\n\n\n  #define N 3\n\n\n  typedef struct smallList{\n\n      int x;\n\n      struct smallList *next;\n\n  }smallList;\n\n\n  typedef struct bigList{\n\n      int count;\n\n      struct bigList *next;\n\n      smallList *head;\n\n  }bigList;\n\n\n  void main(void)\n\n  {\n      bigList *array = malloc(sizeof(bigList));\n    array-&gt;head = malloc(sizeof(smallList));\n      array-&gt;count = 3;\n      printf(\"%d \\n\", array-&gt;count);\n\n      array-&gt;head-&gt;x = 10;\n      printf(\"%d \\n\", array-&gt;head-&gt;x);\n\n  }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5552189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f3a459241dafc65b302574cc6c29ab?s=128&d=identicon&r=PG&f=1", "display_name": "user5552189", "link": "https://stackoverflow.com/users/5552189/user5552189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 34049839, "answer_count": 2, "score": -1, "last_activity_date": 1449079652, "creation_date": 1449076184, "last_edit_date": 1449079652, "question_id": 34048792, "link": "https://stackoverflow.com/questions/34048792/list-into-a-list-segmentation-fault", "title": "List into a list segmentation fault", "body": "<p>I was just experimenting with C and i tried to put a list inside a list. The problem is that while it prints the array->count it shows a segmentation fault when i try to change the array->head->x. What i am doing wrong? I havent finished my programm yet so thats why i use a macro.</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n  #define N 3\n\n  typedef struct smallList{\n      int x;\n      struct smallList *next;\n  } smallList;\n\n  typedef struct bigList{\n      int count;\n      struct bigList *next;\n      smallList *head;\n  } bigList;\n\n  void main(void)\n  {\n      bigList *array = (bigList*)malloc(sizeof(bigList));\n\n      array-&gt;count = 3;\n      printf(\"%d \\n\", array-&gt;count);\n\n      array-&gt;head-&gt;x = 10;\n      printf(\"%d \\n\", array-&gt;head-&gt;x);\n  }\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "edited": false, "score": 0, "creation_date": 1449076638, "post_id": 34048766, "comment_id": 55852480, "body": "Do any of your reads and/or writes succeed?  I noticed in the server portion of the code the first use of read and write fail to check the return value.  Depending on how your socket connection was achieved, you could have some synchronous blocking issues as well."}, {"owner": {"reputation": 15, "user_id": 5589302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8LTB1sy3WDc/AAAAAAAAAAI/AAAAAAAAMMg/TcRCgNK_IjM/photo.jpg?sz=128", "display_name": "Stefano Belli", "link": "https://stackoverflow.com/users/5589302/stefano-belli"}, "reply_to_user": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "edited": false, "score": 0, "creation_date": 1449076765, "post_id": 34048766, "comment_id": 55852568, "body": "yes, previous write/read works on both of source codes :/"}, {"owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "edited": false, "score": 0, "creation_date": 1449076997, "post_id": 34048766, "comment_id": 55852734, "body": "But how do you know if you aren&#39;t checking the return value? Additionally, what is the value for <code>errno</code> when the one write you check returns with an error?"}, {"owner": {"reputation": 15, "user_id": 5589302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8LTB1sy3WDc/AAAAAAAAAAI/AAAAAAAAMMg/TcRCgNK_IjM/photo.jpg?sz=128", "display_name": "Stefano Belli", "link": "https://stackoverflow.com/users/5589302/stefano-belli"}, "reply_to_user": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "edited": false, "score": 0, "creation_date": 1449077174, "post_id": 34048766, "comment_id": 55852848, "body": "I know because client is working as expect when it reads from fd..."}, {"owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "edited": false, "score": 3, "creation_date": 1449077372, "post_id": 34048766, "comment_id": 55852973, "body": "Just because a read or write system call returns doesn&#39;t mean it succeeded.  You need to check the return value every time to ensure that it succeeded and determine how many bytes were read or written. It&#39;s good programming practice.  When those things fail, you should also capture the value of <code>errno</code> as an indication of why it failed.  The <code>perror</code> function is a relatively simple way to get this information to begin with."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1449078084, "post_id": 34048766, "comment_id": 55853380, "body": "Read the documentation closely, especially on what the functions return if they do not return -1."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1449079239, "post_id": 34048766, "comment_id": 55854053, "body": "You should be checking the return values for system calls, as others have noted, as well as paying attention to the manual pages for these calls - particularly the need to handle <code>EINTR</code> / <code>EAGAIN</code>, or blocking SIGPIPE, etc. <a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html\" rel=\"nofollow noreferrer\">Beej&#39;s guide</a> has been around forever, and is probably a good place to start."}, {"owner": {"reputation": 15, "user_id": 5589302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8LTB1sy3WDc/AAAAAAAAAAI/AAAAAAAAMMg/TcRCgNK_IjM/photo.jpg?sz=128", "display_name": "Stefano Belli", "link": "https://stackoverflow.com/users/5589302/stefano-belli"}, "edited": false, "score": 0, "creation_date": 1449080336, "post_id": 34048766, "comment_id": 55854687, "body": "Yes I will, thank all of you guys!"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1449078284, "last_edit_date": 1449078284, "creation_date": 1449077366, "answer_id": 34049198, "question_id": 34048766, "link": "https://stackoverflow.com/questions/34048766/read-or-write-functions-are-not-working/34049198#34049198", "title": "read() or write() functions are not working", "body": "<p>For the most part, you do not check the return values of your <code>read()</code> and <code>write()</code> calls.  This is always an error if you are transferring more than one byte, for even if no I/O error occurs, these functions are in no way guaranteed to transfer the specified number of bytes.  That number gives the <em>maximum</em> that will be transferred; you need to be prepared to transfer the desired bytes over multiple calls.</p>\n\n<p>Moreover, it follows that in most cases you need some kind of protocol by which each reader can predict how many bytes to expect to read.  If you're sending fixed-length messages then writer and reader must agree on message length; if you're sending variable-length messages then you need either a per-message explicit message length (itself a fixed-length component) or a message terminator that the reader can recognize.</p>\n\n<p>Your case is somewhat illustrative.  This write by the server:</p>\n\n<pre><code>write(client_sockfd,auth,sizeof(auth));\n</code></pre>\n\n<p>seems intended to be paired with this read by the client:</p>\n\n<pre><code>read(sockfd,get_msg_from_server,255);\n</code></pre>\n\n<p>Note, however, that <code>auth</code> is declared as <code>char auth[256]</code>, so its size is <code>256</code>.  Supposing that the server indeed writes all 256 bytes (which as I said, is not guaranteed), the client reads at most <code>255</code> of them, leaving at least one waiting, unread.  The <em>next</em> read (into <code>answer</code>) will start at that unread byte.  It will be a <code>0</code> (given the initializer provided for <code>auth</code>), therefore <code>answer</code> will be interpreted an empty string, notwithstanding whatever bytes may follow that initial <code>'\\0'</code>.</p>\n\n<p>Indeed, even if the server successfully transfers fewer than 256 bytes, if it transfers even one more than enough for the client to recognize the message as containing the string <code>\"auth-required\"</code> then the next byte the client reads will always have value zero.</p>\n"}], "owner": {"reputation": 15, "user_id": 5589302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8LTB1sy3WDc/AAAAAAAAAAI/AAAAAAAAMMg/TcRCgNK_IjM/photo.jpg?sz=128", "display_name": "Stefano Belli", "link": "https://stackoverflow.com/users/5589302/stefano-belli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 34049198, "answer_count": 1, "score": 1, "last_activity_date": 1449078284, "creation_date": 1449076085, "question_id": 34048766, "link": "https://stackoverflow.com/questions/34048766/read-or-write-functions-are-not-working", "title": "read() or write() functions are not working", "body": "<p>I am trying to send data / read data from socket fds with</p>\n\n<p>write()  and  read() functions.</p>\n\n<p>The problem is that one of them are not working correctly, I explain: </p>\n\n<p>write() sends data to \"sockfd\" -> \"sockfd\" inserts data to \"answer\" variable with read() function</p>\n\n<p>the problem is that when I try to get the content of answer \n(with the usual printf(\"%s\\n\",answer) ), it is empty.</p>\n\n<p>I don't know if the problem comes from read() or write(), if both of them fail, they return -1 so I added a simple check to see if one of them return &lt; 0.</p>\n\n<p>Below the code: </p>\n\n<p>This one is the sender, problem comes with the last write() call\n[This:  if (write(client_sockfd,denied,sizeof(denied)) &lt; 0)]</p>\n\n<pre><code>                                if(login_required(client_ipaddr) == 1)\n                                {\n                                  char getpasswd[256];\n                                  char auth[256]=\"auth-required\";\n                                  char granted[9]=\"granted\";\n                                  char denied[7]=\"denied\";\n                                  //checks that password file exists!\n                                  //check_passwd_file(\"passfile\",client_sockfd);\n                                  log_string(\"[CLIENT-AUTH]Authentication required! ...\");\n                                  write(client_sockfd,auth,sizeof(auth));\n                                  read(client_sockfd,getpasswd,sizeof(getpasswd));\n                                  //log_string(getpasswd);\n                                  //check here\n                                  if(strcmp(getpasswd,\"jasmtest\") == 0)\n                                  {\n                                    log_string(\"[PWD][OK]Password accepted!\\n\");\n                                    log_string(\"[PWD][OK]Authorized!\\n\");\n                                  }     \n                                  else if(strcmp(getpasswd,\"jasmtest\") != 0)\n                                  {\n                                     log_error(\"[PWD][DEN]Wrong password!\\n\");\n                                     log_error(\"[PWD][DEN]Closing connection...\\n\");\n                                     if (write(client_sockfd,denied,sizeof(denied)) &lt; 0)\n                                       log_error(\"[core/ipc.c][start_server()][getpasswd][write()] ERROR while sending denied\\n\");\n                                  }\n                                }\n                                else\n                                {\n                                  write(client_sockfd,not_required,sizeof(not_required));\n                                  log_string(\"[CLIENT-AUTH]Authentication NOT required!\");\n                                }\n</code></pre>\n\n<p>Here is the \"client\"\nI explain: \nuntil write(sockfd,get_my_pass,sizeof(get_my_pass));\nall is working, when i call: read(sockfd,answer,sizeof(answer)) it is not working anymore as I described above. </p>\n\n<pre><code>read(sockfd,get_msg_from_server,255);\n\n        if(strcmp(get_msg_from_server, \"auth-required\") == 0)\n        {\n          printf(\"+-----------------------------------------------------------------------+\\n\");\n          printf(\"* Authentication is required before accessing JASM Command Line Interface\\n\");\n          printf(\"* Password: \\n\");\n\n          write(sockfd,get_my_pass,sizeof(get_my_pass));\n          if(read(sockfd,answer,sizeof(answer)) &lt; 0)\n           printf(\"* Error on read\\n\");\n\n          if(strcmp(answer,\"denied\") == 0)\n          {\n              printf(\"* Non-authorized access!!\\n\");\n              printf(\"* Exiting...\\n\");\n              close(sockfd);\n              exit(3);\n          }\n\n        }\n        else if(strcmp(get_msg_from_server, \"auth-not-required\") == 0)\n          printf(\"* Authentication is not required for this session\\n\");\n</code></pre>\n\n<p>Thanks to all of u :) </p>\n"}, {"tags": ["c", "linux", "zip", "installation", "libraries"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449076377, "post_id": 34048451, "comment_id": 55852305, "body": "I&#39;d be inclined to take the incomplete source and broken links at the project web site as good reasons to avoid this project.  <i>At best</i>, it is unsupported."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1449077209, "post_id": 34048451, "comment_id": 55852865, "body": "It looks like it wasn&#39;t meant to be used as a traditional Unix library, but instead simply compiled and linked in with your system-specific C code. There&#39;s a Makefile in demo/LINUX, for instance, that references virtually all the source files. That doesn&#39;t mean it can&#39;t be made into a library, of course."}, {"owner": {"reputation": 300, "user_id": 3837185, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0287ad5b226567054f9b6214381954d?s=128&d=identicon&r=PG&f=1", "display_name": "TolkienWASP", "link": "https://stackoverflow.com/users/3837185/tolkienwasp"}, "edited": false, "score": 0, "creation_date": 1449243430, "post_id": 34048451, "comment_id": 55936058, "body": "Great, thanks for the confirmation!"}], "owner": {"reputation": 300, "user_id": 3837185, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0287ad5b226567054f9b6214381954d?s=128&d=identicon&r=PG&f=1", "display_name": "TolkienWASP", "link": "https://stackoverflow.com/users/3837185/tolkienwasp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449075242, "creation_date": 1449075242, "question_id": 34048451, "link": "https://stackoverflow.com/questions/34048451/how-to-install-library-from-source-code-without-any-config-nor-makefile", "title": "How to install library from source code, without any config nor Makefile?", "body": "<p>Sorry for what is likely a simple question -- still getting a handle on Linux. </p>\n\n<p>I've been attempting to install the 'FreeMODBUS' library, however judging from the website, it is somewhat outdated. The download link leads to nowhere, however the source code is still accessible via Sourceforge as a .zip download. In the past I've only dealt with libraries that come via .tar, however the bigger issue is that there seems to be no config, makefile nor README detailing the installation process. </p>\n\n<p>Additionally I tried including all of the source code and header files supplied within my Eclipse project. I was hoping that this would be the lazy man's solution to all of my problems -- or at the very least I could compile the .so file myself -- however I'm still getting 'undefined reference to [Function]' errors. From what I understand this is a linking issue. To the best of my knowledge all inclusions are correctly set up. </p>\n\n<p>Is this library deprecated, or is there a step to the process that I'm overlooking? Thanks!</p>\n\n<hr>\n\n<p>Some superfluous project information:</p>\n\n<p>I'm using modbus for a C project. The network is ideally going to be setup so that a number of modbus enabled devices are configured on a single daisy chained RS-485 hub -- therein containing all our modbus communications to a single comm port in a rather complex system. </p>\n\n<p>The problem however is that popular open source modbus library, 'libmodbus', doesn't appear to lend itself to this configuration. In order to instantiate a modbus node instance, it requires the comm port to be passed, as opposed to the unit's modbus id. </p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 1, "creation_date": 1449074397, "post_id": 34048104, "comment_id": 55850869, "body": "So what&#39;s your question?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1449074514, "post_id": 34048104, "comment_id": 55850962, "body": "<i>&quot;create it <b>if</b> the the file with same name already exists.&quot;</i> If a file of that name already exists, then it isn&#39;t unique."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1449074707, "post_id": 34048104, "comment_id": 55851096, "body": "You really need to read up on pointers. <code>&amp;fileName[i]</code>? you&#39;re continually overwriting part of your <code>fileName</code> string with new stuff. and <code>fileName is a string, not an array of strings. </code>fileName[i]` makes no sense"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1449074781, "post_id": 34048104, "comment_id": 55851154, "body": "fileName is an array of strings. The issue is that it&#39;s being treated like a single string (passing a <code>char**</code> to sprintf instead of a <code>char*</code>) which should be an error if not a warning. Also no space is allocated for the strings themselves."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1449075139, "post_id": 34048104, "comment_id": 55851433, "body": "Instead of <code>sprintf(&amp;fileName[i],&quot;Output%d.txt&quot;,i+1);</code>, use <code>sprintf(fileName,&quot;Output%d.txt&quot;,i+1);</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1449075458, "post_id": 34048104, "comment_id": 55851685, "body": "..ah... yet another one who doesn&#39;t allocate room for the strings and is amazed by the segmentation fault...Don&#39;t you guys learn about the heap and malloc?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1449078488, "post_id": 34048104, "comment_id": 55853624, "body": "<code>if (!access(filename, F_OK) ) { output = fopen( filename, &quot;w&quot; );}</code> creates a race condition.  See <a href=\"http://stackoverflow.com/questions/24712383/how-to-avoid-race-condition-when-checking-if-file-exists-and-then-creating-it\" title=\"how to avoid race condition when checking if file exists and then creating it\">stackoverflow.com/questions/24712383/&hellip;</a>"}, {"owner": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449080457, "post_id": 34048104, "comment_id": 55854753, "body": "Guys YOU ALL WERE wrong.. Well it was my fault to send wrong variation of the code. But the segmentation appears not because of fileName* I was at the beginning as static two dim array. Not a pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449080581, "post_id": 34048104, "comment_id": 55854817, "body": "Come on now, you&#39;ve CHANGED THE QUESTION and told all these people trying to help they are wrong."}, {"owner": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449084176, "post_id": 34048104, "comment_id": 55856858, "body": "You just guys are so mean to new programmers. Whatever.  It wasn&#39;t the problem with dynamic and heap memory, so I will get the answer and post it for the future programmers. You can downvote me as much as you want..."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449079287, "post_id": 34048839, "comment_id": 55854082, "body": "Wait have you done all of them in one go? Am i right? I just need one try function (like while) till it finds the name which is not taken. I just put the for loop there to have limit to 100."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449080391, "post_id": 34048839, "comment_id": 55854719, "body": "@RandomNoob this is a simplified example to show you how to use the string array. It was not intended to implement your exact problem, since I don&#39;t have the library functions you are using."}, {"owner": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449080596, "post_id": 34048839, "comment_id": 55854830, "body": "Well the funniest point is that I have a working piece of code which was written half year ago and I just can&#39;t make variation of it"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449080795, "post_id": 34048839, "comment_id": 55854951, "body": "@RandomNoob I&#39;m very happy that you find it funny wasting everybody&#39;s time, and putting them down when they have tried to help you. I&#39;m splitting my sides with laughter now."}, {"owner": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449081016, "post_id": 34048839, "comment_id": 55855084, "body": "why is it wasting of time. II still want to find the actual problem which cause segmentation. Im not trying insult you. Thank you for your time an deffort I really appreciate it! Just was on lecture and got back with -5 rating sure I will be upset of it"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449081134, "post_id": 34048839, "comment_id": 55855150, "body": "@RandomNoob it&#39;s wasting people&#39;s time because they answered the question you asked, but then changed, saying you didn&#39;t need those answers anyway. Bye bye."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1449076320, "creation_date": 1449076320, "answer_id": 34048839, "question_id": 34048104, "link": "https://stackoverflow.com/questions/34048104/how-to-make-a-unique-name-for-each-file-in-c/34048839#34048839", "title": "How to make a unique name for each file in C?", "body": "<p>You did not allocate any memory for your array of pointers to point to. Also your syntax was a bit off here and there. This simple example shows how to allocate memory for an array of strings, assign some values, print them and free the memory.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXNAMES 10\n#define MAXLEN   32\n\nint main(void)\n{\n    char* fileName[MAXNAMES];\n    int i;\n\n    for(i=0; i&lt;MAXNAMES; i++)\n        if ((fileName[i] = malloc(MAXLEN)) == NULL)\n            exit(1);\n\n    sprintf(fileName[0],\"Output.txt\");     // your first name is an exception    \n    for(i = 1; i&lt;MAXNAMES; i++)            // the rest of the names\n        sprintf(fileName[i], \"Output%d.txt\", i+1);    // using your offset of 1\n\n    for(i = 0; i&lt;MAXNAMES; i++)\n        printf(\"%s\\n\", fileName[i]);\n\n    for(i = 0; i&lt;MAXNAMES; i++)\n        free(fileName[i]);\n\n    return 0;   \n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>Output.txt\nOutput2.txt\nOutput3.txt\nOutput4.txt\nOutput5.txt\nOutput6.txt\nOutput7.txt\nOutput8.txt\nOutput9.txt\nOutput10.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "edited": false, "score": 0, "creation_date": 1449080298, "post_id": 34048846, "comment_id": 55854662, "body": "Thanks but I don&#39;t want to allocate anything.. I have already allocated almost all the variables in a Program so I want to leave it static. Thanks for suggestion"}], "tags": [], "owner": {"reputation": 7, "user_id": 5626255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6890b883b1a88639bb44520b3747e4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dimos", "link": "https://stackoverflow.com/users/5626255/dimos"}, "is_accepted": false, "score": 1, "last_activity_date": 1449076347, "creation_date": 1449076347, "answer_id": 34048846, "question_id": 34048104, "link": "https://stackoverflow.com/questions/34048104/how-to-make-a-unique-name-for-each-file-in-c/34048846#34048846", "title": "How to make a unique name for each file in C?", "body": "<p>you have to malloc memory for the strings.</p>\n\n<p>example</p>\n\n<pre><code>char** fileName;\nint Number_Of_Strings, String_Length, i;\nfileName = malloc(Number_Of_Strings * sizeof(char*));\n\nfor ( i = 0; i &lt; Number_Of_String; i++)   // For each string\n    fileName = malloc(String_Length * sizeof(char));\n</code></pre>\n\n<p>Number_If_Strings : How many strings do you need?\nString_Length : The length of each string</p>\n"}, {"tags": [], "owner": {"reputation": 464, "user_id": 2696475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fa3d62dda3410946b8eea5685b0f054?s=128&d=identicon&r=PG&f=1", "display_name": "FrodeTennebo", "link": "https://stackoverflow.com/users/2696475/frodetennebo"}, "is_accepted": false, "score": 1, "last_activity_date": 1449076906, "creation_date": 1449076906, "answer_id": 34049038, "question_id": 34048104, "link": "https://stackoverflow.com/questions/34048104/how-to-make-a-unique-name-for-each-file-in-c/34049038#34049038", "title": "How to make a unique name for each file in C?", "body": "<p>What you have here:</p>\n\n<pre><code>char* fileName[100];\n</code></pre>\n\n<p>...is an array of 100 char pointers.  However, you have not made space for the actual strings themselves.</p>\n\n<p>When you do this:</p>\n\n<pre><code>sprintf(&amp;fileName[0],\"output.txt\");\n</code></pre>\n\n<p>...you write \"output.txt\" to the location pointed to by the address in fileName[0], most likely 0x0 or some random value depending on your compiler and whether you allocate the array on the stack or the heap, etc.     This normally results in a segmentation violation and your program terminates.</p>\n"}], "owner": {"reputation": 45, "user_id": 4801778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6c88a5a88a48a3902e78f3711deebc7?s=128&d=identicon&r=PG&f=1", "display_name": "Random Noob", "link": "https://stackoverflow.com/users/4801778/random-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 34048839, "answer_count": 3, "score": -6, "last_activity_date": 1449080164, "creation_date": 1449074316, "last_edit_date": 1449080164, "question_id": 34048104, "link": "https://stackoverflow.com/questions/34048104/how-to-make-a-unique-name-for-each-file-in-c", "title": "How to make a unique name for each file in C?", "body": "<p>How are you today. I have a question about file name handling :D. My code doesn't want to work it gives me <em>false segmentation</em>.</p>\n\n<p>The idea is to make unique file name and create it <strong><em>if</em></strong> the the file with same name already exists. The first is the exception without file so the for loop starts from 1 instead of 0.</p>\n\n<p><em>unistd.h is required!</em></p>\n\n<pre><code>char fileName[15][100];\nsprintf(fileName[0],\"output.txt\");\nFILE *output;\n\n   for(int i = 1 ;i &lt; 100; i++){\n        sprintf(fileName[i],\"Output%d.txt\",i+1);\n\n        //File exists\n        if(!access(fileName[i],F_OK))\n        {\n            //Create and open a file\n            output = fopen(fileName[i], \"w\");\n            break;\n        }    \n    }\n</code></pre>\n\n<p>I just need to make a try function (like while) till it finds the name which is not taken. I just put the for loop there to have limit to 100.</p>\n"}, {"tags": ["c", "string", "reverse", "words"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1449074233, "post_id": 34048025, "comment_id": 55850713, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/29243374/having-trouble-writing-program-to-reverse-words-in-string-in-c\">Having trouble writing program to reverse words in string in C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 766, "user_id": 5631362, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d71db07625c0d57cd7d55c7931f86c60?s=128&d=identicon&r=PG", "display_name": "Jaron Thatcher", "link": "https://stackoverflow.com/users/5631362/jaron-thatcher"}, "is_accepted": true, "score": 5, "last_activity_date": 1449074666, "creation_date": 1449074666, "answer_id": 34048239, "question_id": 34048025, "link": "https://stackoverflow.com/questions/34048025/c-reverse-words-in-string/34048239#34048239", "title": "C Reverse words in string", "body": "<p>I won't give away the answer because this seems like a homework problem and is a great opportunity to learn, but here is a hint:</p>\n\n<p>Think about how you could programatically reference the 'opposite' of each letter in the word. So str[0] and str[strlen(str)], and so on. That should help you, but feel free to probe with further questions.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1449078027, "post_id": 34048302, "comment_id": 55853354, "body": "Is this in <code>C language</code>?"}], "tags": [], "owner": {"reputation": 651, "user_id": 2300633, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5hUVg.jpg?s=128&g=1", "display_name": "Rose", "link": "https://stackoverflow.com/users/2300633/rose"}, "is_accepted": false, "score": 0, "last_activity_date": 1449074862, "creation_date": 1449074862, "answer_id": 34048302, "question_id": 34048025, "link": "https://stackoverflow.com/questions/34048025/c-reverse-words-in-string/34048302#34048302", "title": "C Reverse words in string", "body": "<p>Try this...</p>\n\n<pre><code>private void Button1_Click(object sender, EventArgs e)\n{\n    const string targetWords = \"Hello World\";\n    int count = targetWords.Length;\n    string result = null;\n    string chr = null;\n\n    while (!(count == 0)) {\n        chr = targetWords.Substring((count - 1), 1);\n        result += chr;\n        count -= 1;\n    }\n    Debug.WriteLine(result);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 657, "user_id": 3181432, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5c77bc404fe32c5c44ee519e0477598f?s=128&d=identicon&r=PG&f=1", "display_name": "MeChris", "link": "https://stackoverflow.com/users/3181432/mechris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 34048239, "answer_count": 2, "score": 2, "last_activity_date": 1449074862, "creation_date": 1449074118, "question_id": 34048025, "link": "https://stackoverflow.com/questions/34048025/c-reverse-words-in-string", "title": "C Reverse words in string", "body": "<p>Trying to learn C and so I want to reverse each word in string. \n\"Hello World\" to \"olleH dlroW\"\nThis is what I have so far.</p>\n\n<pre><code>int main()\n{\n    char str[100];\n    int i;\n    printf(\"Enter string:\");\n    fgets(str,sizeof(str),stdin);\n\n    for (i = 0; i &lt;= strlen(str); i++)\n    {\n        if (str[i] == ' ')\n        {\n            // Here the space and how should I switch words now?\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Should I do something like this:</p>\n\n<p><strong>temp = str[i];\nj = str[i-1];</strong></p>\n\n<p>and then switch places? <strong>str[i]=j; and j=temp;</strong>\nI am stuck at this point here!</p>\n"}, {"tags": ["c", "loops", "struct", "crash", "malloc"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1449073977, "post_id": 34047927, "comment_id": 55850556, "body": "Don&#39;t cast the return value of <code>malloc</code>."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1449074078, "post_id": 34047927, "comment_id": 55850606, "body": "putting it inside the loop means you are allocating memory again and again. Do you really wanna do that?"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449074500, "post_id": 34047927, "comment_id": 55850957, "body": "See my fix above, the loop should only occur just once, but it may have two or three times so it&#39;s not a big issue. It doesn&#39;t really explain why it never worked in the first place, the loop only iterates once with my test data anyway"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1449074736, "post_id": 34047927, "comment_id": 55851121, "body": "@GlennCooper, if the problem has stopped manifesting for you then it is unlikely to be because of your change to the members of <code>struct daastMediaFile</code>.  <code>malloc()</code> neither knows or cares about the members of your struct; it just allocates the number of bytes requested."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449074865, "post_id": 34047927, "comment_id": 55851225, "body": "For us to determine what&#39;s really going on, we&#39;ll need to see an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449074907, "post_id": 34047927, "comment_id": 55851262, "body": "Any suggestion in this case? This is strange behaviour"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449075180, "post_id": 34047927, "comment_id": 55851466, "body": "&quot;Any suggestion in this case?&quot; How about dropping <code>newMediaFile</code> and the <code>malloc()</code> call altogether, since you never use the allocated result."}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449075606, "post_id": 34047927, "comment_id": 55851781, "body": "@JohnBollinger, I never put the rest of the code in to make it simpler, regardless of whether it&#39;s is used or not, this should not crash"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449075721, "post_id": 34047927, "comment_id": 55851862, "body": "@GlennCooper, evidently either your intuition for what should not crash or your analysis of where the crash occurs is faulty.  Otherwise, you would have no question.  This is why we ask for an MCVE."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1449076001, "post_id": 34047927, "comment_id": 55852049, "body": "And because the process of producing an MCVE sometimes leads you to discover and solve the problem for yourself."}, {"owner": {"reputation": 7085, "user_id": 47461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3980d1eb309c7669ef8fb3d0234adc03?s=128&d=identicon&r=PG", "display_name": "cadrian", "link": "https://stackoverflow.com/users/47461/cadrian"}, "edited": false, "score": 0, "creation_date": 1449125219, "post_id": 34047927, "comment_id": 55872578, "body": "@GlennCooper the only &quot;suggestion&quot; I have is to heed the answers!"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449074426, "post_id": 34048005, "comment_id": 55850889, "body": "You completely missed the point of the crash, but if you see my fix above, it appears to work now. On the note of the duration - this also works fine and is able to store more what I need"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449074721, "post_id": 34048005, "comment_id": 55851104, "body": "@GlennCooper so have you <i>bodged</i> a fix that &quot;works&quot;?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 2, "creation_date": 1449075049, "post_id": 34048005, "comment_id": 55851360, "body": "@GlennCooper it is not uncommon to think that because you move one line that alters the behaviour then that is the line at fault. As this answer said, you allocated one byte of memory and then copy a string into that space. Far from &quot;missing the point&quot; this answer has found a definite fault in your code."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1449075096, "post_id": 34048005, "comment_id": 55851391, "body": "<code>xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives-&gt;data-&gt;linear-&gt;duratio&zwnj;&#8203;n = malloc (strlen(nodeValue)+1);</code>. Or you could use <code>xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives-&gt;data-&gt;linear-&gt;duratio&zwnj;&#8203;n = strdup(nodeValue);</code> if your C runtime library has <code>strdup</code> (you wouldn&#39;t need the <code>strcpy</code> call in this case, as <code>strdup</code> combines the <code>malloc</code> and <code>strcpy</code>)."}], "tags": [], "owner": {"reputation": 7085, "user_id": 47461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3980d1eb309c7669ef8fb3d0234adc03?s=128&d=identicon&r=PG", "display_name": "cadrian", "link": "https://stackoverflow.com/users/47461/cadrian"}, "is_accepted": false, "score": 1, "last_activity_date": 1449074076, "creation_date": 1449074076, "answer_id": 34048005, "question_id": 34047927, "link": "https://stackoverflow.com/questions/34047927/malloc-crashes-in-loop-but-fine-outside-of-loop/34048005#34048005", "title": "malloc crashes in loop but fine outside of loop", "body": "<pre><code>xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives-&gt;data-&gt;linear-&gt;duration = malloc (sizeof(char));\n</code></pre>\n\n<p>this allocates memory for only ONE character. In C, it may hold only an empty string (since the last char is '\\0'). Is it what you intended?</p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 5626255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6890b883b1a88639bb44520b3747e4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dimos", "link": "https://stackoverflow.com/users/5626255/dimos"}, "is_accepted": false, "score": -1, "last_activity_date": 1449075647, "creation_date": 1449075647, "answer_id": 34048614, "question_id": 34047927, "link": "https://stackoverflow.com/questions/34047927/malloc-crashes-in-loop-but-fine-outside-of-loop/34048614#34048614", "title": "malloc crashes in loop but fine outside of loop", "body": "<pre><code>//Outside the loop\ntypedef struct daastMediaFile *daastMediaFiles;\ndaastMediaFiles newMediaFile;\n\n//In the loop, if needed. free() is important in end of loop\nnewMediaFile = malloc(sizeof *newMediaFile);\n\n...\n\nfree(newMediaFile);\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449075647, "creation_date": 1449073881, "last_edit_date": 1449074340, "question_id": 34047927, "link": "https://stackoverflow.com/questions/34047927/malloc-crashes-in-loop-but-fine-outside-of-loop", "title": "malloc crashes in loop but fine outside of loop", "body": "<p>I have the following procedure that's causing my program to crash:</p>\n\n<pre><code>void parseLinear(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\n// Set up Linear Property Here\nstruct daastLinear *Linear;\nLinear = (struct daastLinear *) malloc (sizeof(struct daastLinear));\n\n// Assign  Property\nxmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives-&gt;data-&gt;linear = Linear;\n\n// ***** THIS IS FINE HERE\nstruct daastMediaFile *newMediaFile;\nnewMediaFile = (struct daastMediaFile *) malloc (sizeof(struct daastMediaFile));\n\ndo {\n\n    // ***** PROGRAM CRASHES IF I PUT IT HERE INSTEAD\n    //struct daastMediaFile *newMediaFile;\n    //newMediaFile = (struct daastMediaFile *) malloc (sizeof(struct daastMediaFile));\n\n\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"Duration\")) == 0){\n\n        char *nodeValue = (char *) node-&gt;children-&gt;content;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives-&gt;data-&gt;linear-&gt;duration = malloc (sizeof(char));\n        strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives-&gt;data-&gt;linear-&gt;duration, nodeValue);\n\n    } else if (xmlStrcmp (node-&gt;name, XMLSTR(\"MediaFiles\")) == 0){\n        //\n        parseMediaFiles(doc,node-&gt;children,xmlFile);\n    }\n} while ((node = node-&gt;next));\n\n}\n</code></pre>\n\n<p>The problem is with the lines:</p>\n\n<pre><code>struct daastMediaFile *newMediaFile;\nnewMediaFile = (struct daastMediaFile *) malloc (sizeof(struct daastMediaFile));\n</code></pre>\n\n<p>If I put these outside of the loop, the program works fine, but if I place them inside the loop, it just crashes and I can't see any error logs.</p>\n\n<p>Does anyone know what is happening here?</p>\n\n<p><strong><em>EDIT and possible fix?</em></strong>\nThis is the original struct of the MediaFile:</p>\n\n<pre><code>//THIS CAUSES A CRASH\nstruct daastMediaFile {\n    char *id;\n    char *delivery;\n    char *type;\n    char *url;\n    char *bitRate;\n};\n</code></pre>\n\n<p>But adding an int variable, it then works?</p>\n\n<pre><code>//THIS CAUSES A CRASH\nstruct daastMediaFile {\n    char *id;\n    char *delivery;\n    char *type;\n    char *url;\n    char *bitRate;\n    int MediaID;\n};\n</code></pre>\n"}, {"tags": ["c", "gcc", "enums", "structure"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1449074327, "post_id": 34047870, "comment_id": 55850792, "body": "You should be getting a warning about converting an <code>int</code> to a <code>void*</code> when passing <code>*b</code> and <code>*d</code> to <code>generateInstruction</code>."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5631265, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9377c2b647d522bac95f711a3009af80?s=128&d=identicon&r=PG&f=1", "display_name": "jon.e", "link": "https://stackoverflow.com/users/5631265/jon-e"}, "edited": false, "score": 0, "creation_date": 1449074335, "post_id": 34047972, "comment_id": 55850798, "body": "may I know what arguments should i pass to malloc? Now I can pass instType but the rest still doesn&#39;t work. I tried this : <code>tInst* I = malloc(sizeof(struct tInst));</code> which seems to be wrong. Maybe the error is somewhere else."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1449076114, "post_id": 34047972, "comment_id": 55852137, "body": "Your call <code>generateInstruction(0, DOUBLE, *b, INT, *d, INT, NULL)</code> is also wrong. The <code>*b</code> and <code>*d</code> should be <code>b</code> and <code>d</code> respectively, or you could just use <code>&amp;a</code> and <code>&amp;c</code> instead of <code>b</code> and <code>d</code>. Presumably, the <code>0</code> should be <code>I_ADD</code> as well."}], "tags": [], "owner": {"reputation": 702, "user_id": 3560192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0TwaN.png?s=128&g=1", "display_name": "Alexguitar", "link": "https://stackoverflow.com/users/3560192/alexguitar"}, "is_accepted": false, "score": 1, "last_activity_date": 1449074384, "last_edit_date": 1449074384, "creation_date": 1449073983, "answer_id": 34047972, "question_id": 34047870, "link": "https://stackoverflow.com/questions/34047870/how-to-pass-enum-value-into-structure/34047972#34047972", "title": "how to pass enum value into structure", "body": "<pre><code>tInst* I;\n\nI-&gt;instType = instType;\n</code></pre>\n\n<p>You're not allocating memory for <code>I</code>.</p>\n\n<p>As it currently is <code>I</code> is just a pointer with a (potentially) random value. Use <code>malloc</code> to get a suitable address with free memory.</p>\n\n<p>This could be done like this:</p>\n\n<pre><code>tInst* I;\nI = malloc(sizeof(tInst));\nI-&gt;op1 = malloc(sizeof(iOperand));\nI-&gt;op2 = malloc(sizeof(iOperand));\nI-&gt;res = malloc(sizeof(iOperand));\n</code></pre>\n\n<p>Though keep in mind that <code>malloc</code> can fail, so you want to check the return value for NULL.</p>\n"}], "owner": {"reputation": 73, "user_id": 5631265, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9377c2b647d522bac95f711a3009af80?s=128&d=identicon&r=PG&f=1", "display_name": "jon.e", "link": "https://stackoverflow.com/users/5631265/jon-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449074384, "creation_date": 1449073720, "last_edit_date": 1449074179, "question_id": 34047870, "link": "https://stackoverflow.com/questions/34047870/how-to-pass-enum-value-into-structure", "title": "how to pass enum value into structure", "body": "<p>My problem is I need to pass value from argument (instType, typ1, *op1...) to the structure type tInst.</p>\n\n<p>I'm sure it's a trivial problem but I've spent about 3 hours of my time working on it.</p>\n\n<p>GCC returns segmentation fault 11.</p>\n\n<p>my .h file</p>\n\n<pre><code>typedef enum tInstCode {\n\n    I_ADD=0, // (dest, addr, addr) +\n    I_SUB, // (dest, addr, addr) -\n    I_MUL, // (dest, addr, addr) *\n    I_DIV, // (dest, addr, addr) /\n\n} tInstCode;\n\n\n\ntypedef enum TypeI{\n    INT=0,  \n    DOUBLE, \n    STRING\n} TypeI;\n\n\ntypedef struct iOperand\n{\n    TypeI type; \n    void *content; \n} iOperand;\n\ntypedef struct tInst \n{\n    tInstCode instType; \n    iOperand *op1; \n    iOperand *op2; \n    iOperand *res; \n} tInst;\n\ntypedef struct ListItem \n{\n    tInst Instruction;\n    struct ListItem *NextItem;\n} tListItem;\n</code></pre>\n\n<p>my main file :</p>\n\n<pre><code>void generateInstruction(tInstCode instType, TypeI typ1,  void *op1, TypeI typ2, void *op2, TypeI typ3, iOperand *op3 )\n\n{\n\n   tListOfInstr list;\n   listInit(&amp;list);  //list defined in another file\n   tInst* I;\n\n   I-&gt;instType = instType;\n   I-&gt;op1-&gt;type = typ1;\n\n\n   I-&gt;op1-&gt;content = op1;\n\n   I-&gt;op2 -&gt; type = typ2;\n   I-&gt;op2 -&gt; content = op2;\n\n   I-&gt;res -&gt; type = typ3;\n   I-&gt;res -&gt; content = op3;\n   listInsertLast(&amp;list, *I);\n\n}\n\n\nint main(int argc, char** argv)\n{\n  int a;      \n  a=8;\n  int *b;      \n  b = &amp;a; \n\n  int c;       \n  c=1;\n  int *d;      \n  d = &amp;c; \n\n  generateInstruction(0, DOUBLE, *b, INT, *d, INT, NULL);\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "concurrency", "mutex"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1449076087, "post_id": 34047746, "comment_id": 55852114, "body": "I&#39;m having a hard time understanding &quot;but if the event is already triggered, the user will synchronously call the callback&quot; because that means the user didn&#39;t register the callback (he is calling it himself) and the user knows the event is in progress. Could you be more clear on this? Also please identify where in the sequence of T1..Tn is Ti."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1449076668, "post_id": 34047746, "comment_id": 55852501, "body": "Can you edit the code in your question? The indentation is all wrong and you have more <code>{</code> than <code>}</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1449077125, "post_id": 34047746, "comment_id": 55852816, "body": "Any how, you need to release the mutex after the <code>while</code> loop, not inside the <code>while</code> loop."}, {"owner": {"reputation": 1, "user_id": 5631173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3da3f5725926ba5bd1b94633bf98322?s=128&d=identicon&r=PG&f=1", "display_name": "finkelstin lu", "link": "https://stackoverflow.com/users/5631173/finkelstin-lu"}, "edited": false, "score": 0, "creation_date": 1449079659, "post_id": 34047746, "comment_id": 55854308, "body": "just edit the code, thanks for the suggestion"}, {"owner": {"reputation": 1, "user_id": 5631173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3da3f5725926ba5bd1b94633bf98322?s=128&d=identicon&r=PG&f=1", "display_name": "finkelstin lu", "link": "https://stackoverflow.com/users/5631173/finkelstin-lu"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1449081816, "post_id": 34047746, "comment_id": 55855529, "body": "@PaulOgilvie Try my best to clarify: I think the problem is asking: user could register those callback functions before a certain event happens, and after that that event is triggered, all the call back function that is registered after that event will be executed synchronously. Is that helpful?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1449143198, "post_id": 34047746, "comment_id": 55883428, "body": "What I see of your code now is that <code>event_trigger()</code> is a function that returns <code>int</code> but I don&#39;t see a <code>return</code> statement - your compiler should complain. The same holds for <code>register_cb(cb)</code> which takes a parameter supposedly to be <code>int</code> and again has no <code>return</code> statement. If this code is inside a function, then a block is unconditionally executed after <code>event_trigger()</code> and after <code>register_cb(cb)</code>. Please fix the code."}, {"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 1, "creation_date": 1449255372, "post_id": 34047746, "comment_id": 55943175, "body": "You should add details explaining <i>why</i> you think this solution is wrong: what unexpected behavior are you seeing?"}], "owner": {"reputation": 1, "user_id": 5631173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3da3f5725926ba5bd1b94633bf98322?s=128&d=identicon&r=PG&f=1", "display_name": "finkelstin lu", "link": "https://stackoverflow.com/users/5631173/finkelstin-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449343492, "creation_date": 1449073384, "last_edit_date": 1449343492, "question_id": 34047746, "link": "https://stackoverflow.com/questions/34047746/async-callback-problems-involving-mutex", "title": "async_callback problems involving mutex", "body": "<p>I am having hard time trying to solve the concurrency problem: </p>\n\n<blockquote>\n  <p>Assume in a system, users will register a callback function with\n  system and that callback function will be called when an event is\n  triggered but if the event is already triggered, the user will\n  synchronously call the callback function.</p>\n  \n  <p>For example:</p>\n\n<pre><code>suppose user i registers cb i at time Ti,\nand the event happens at time Te\nand assume that T1 &lt; T2 &lt; T3 &lt;...&lt; Tm &lt; Te &lt; Tm+1 &lt; ... &lt; Tn\nat time Te, cb1..cbm will be called\ncbm+1 .. cbn will be called synchronously\nimplement two APIs: void register_cb (cb), and void event_trigger()\n</code></pre>\n</blockquote>\n\n<p>Currently, my solution is:</p>\n\n<pre><code>is_triggered = false;\nmutex_a = 1\n\nvoid event_trigger(){\n    aquire(mutex_a); \n    is_triggered = true;\n    while(!q.empty()){\n        cb = q.top();\n        q.pop();\n        cb();\n    \uff5d\n    release(mutex_a);     \n\uff5d\n\nvoid register_cb(cb){\n   aquire(mutex_a);\n   if(is_triggered) \n         release(mutex_a);\n         cb();       \n   else{\n         q.push(cb);\n         release(mutex_a);\n   }\n}\n</code></pre>\n\n<p>But this does not solve the problem: I think I have misplaced the mutex. Where am I going wrong?</p>\n"}, {"tags": ["c", "opengl", "texture-mapping"], "answers": [{"tags": [], "owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": false, "score": 0, "last_activity_date": 1449074513, "creation_date": 1449074513, "answer_id": 34048174, "question_id": 34047702, "link": "https://stackoverflow.com/questions/34047702/opengl-330-core-creating-and-using-a-texture-2d/34048174#34048174", "title": "Opengl 330 core creating and using a texture 2D", "body": "<p>There are at least two things that might be wrong:</p>\n\n<pre><code>glVertexAttribPointer(2, 4, GL_FLOAT, GL_FALSE, sizeof(quad-&gt;tex_coords),\n                  quad-&gt;tex_coords);\n</code></pre>\n\n<p>Are you sure that <code>quad-&gt;tex_coords</code> contains 4-dimensional vectors? The fragment shader expects <code>vec2</code>. If you only supply two floats per vertex, you have to change the second parameter to two. When OpenGL tries to read from a too small <code>ARRAY_BUFFER</code> this can also cause segmentation faults. Note, that attributes are set to inactive if they do not contribute to the final color, thus the texture coordinates might only be read when textures are used.</p>\n\n<p>Second: You are calling <code>glGenerateMipmap</code> before uploading data to the texture.</p>\n"}, {"tags": [], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "is_accepted": false, "score": 1, "last_activity_date": 1449140525, "creation_date": 1449140525, "answer_id": 34064267, "question_id": 34047702, "link": "https://stackoverflow.com/questions/34047702/opengl-330-core-creating-and-using-a-texture-2d/34064267#34064267", "title": "Opengl 330 core creating and using a texture 2D", "body": "<p>okay this was definitely a problem of my own creation. The reason that I was getting segmentation fault was because of this code.</p>\n\n<pre><code>glGenVertexArrays(1, &amp;vao);\nglBindVertexArray(vao);\n\nglGenBuffers(1, &amp;vert_buff);\nglBindBuffer(GL_ARRAY_BUFFER, vert_buff);\nglBufferData(GL_ARRAY_BUFFER, sizeof(quad-&gt;vertices), quad-&gt;vertices,\n             GL_STATIC_DRAW);\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\nglEnableVertexAttribArray(0);\nglBindBuffer(GL_ARRAY_BUFFER, 0);\n\nglGenBuffers(1, &amp;col_buff);\nglBindBuffer(GL_ARRAY_BUFFER, col_buff);\nglBufferData(GL_ARRAY_BUFFER, sizeof(quad-&gt;colors), quad-&gt;colors,\n             GL_STATIC_DRAW);\nglVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, 0);\nglEnableVertexAttribArray(1);\nglBindBuffer(GL_ARRAY_BUFFER, 0); //right here\n\nglVertexAttribPointer(2, 4, GL_FLOAT, GL_FALSE, sizeof(quad-&gt;tex_coords),\n                      quad-&gt;tex_coords);\nglEnableVertexAttribArray(2);\n\n\nglGenBuffers(1, &amp;ind_buff);\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ind_buff);\nglBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(quad-&gt;indices), quad-&gt;indices,\n             GL_STATIC_DRAW);\n\nglBindVertexArray(0);\n</code></pre>\n\n<p>after you bind your vbo buffer to zero attempting to access it will cause a segmentation fault...</p>\n\n<p>After that just making sure that I sent the proper data to the gpu and all other code worked as expected.</p>\n\n<pre><code>             GL_STATIC_DRAW);\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\nglEnableVertexAttribArray(0);\nglBindBuffer(GL_ARRAY_BUFFER, 0);\n\nglGenBuffers(1, &amp;col_buff);\nglBindBuffer(GL_ARRAY_BUFFER, col_buff);\nglBufferData(GL_ARRAY_BUFFER, sizeof(quad-&gt;colors), quad-&gt;colors,\n             GL_STATIC_DRAW);\nglVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, 0);\nglEnableVertexAttribArray(1);\n//glBindBuffer(GL_ARRAY_BUFFER, 0); //right here remove this\n\n//properly setup the local data to gpu data\nglBufferData(GL_ARRAY_BUFFER, rend2d_get_sizeof_tex_coord(quad),\n             rend2d_get_tex_coord_data(quad), GL_STATIC_DRAW);\nglVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, 0);\nglEnableVertexAttribArray(2);\n\nglBindBuffer(GL_ARRAY_BUFFER, 0); //put it here after finished with vbo\n</code></pre>\n\n<p>after those two changes everything worked as expected. Hopefully this can save someone some time.</p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449140525, "creation_date": 1449073292, "last_edit_date": 1449080737, "question_id": 34047702, "link": "https://stackoverflow.com/questions/34047702/opengl-330-core-creating-and-using-a-texture-2d", "title": "Opengl 330 core creating and using a texture 2D", "body": "<p>It's been a while since I've wrote some graphics programming and I've been staring at this for quite some time now and can't figure out what i'm doing wrong.</p>\n\n<p>This is how I am creating my texture.</p>\n\n<pre><code>GLuint create_texture(const char* filename) {\n    SDL_Surface* surface;\n    GLenum tex_format;\n    GLint num_colors;\n    GLuint tex_id;\n    char* file_path;\n\nfile_path = get_resource(filename);\nsurface = IMG_Load(file_path);\nif (!surface) {\n    SDL_Log(\"failed to create surface\\n\");\n    SDL_Quit();\n    return -1;\n} else {\n    if ((surface-&gt;w &amp; (surface-&gt;w - 1)) != 0) {\n        SDL_Log(\"image { %s } width is not power of 2\\n\", filename);\n    }\n    if ((surface-&gt;h &amp; (surface-&gt;h - 1)) != 0) {\n        SDL_Log(\"image { %s } height is not power of 2\\n\", filename);\n    }\n\n    num_colors = surface-&gt;format-&gt;BytesPerPixel;\n    if (num_colors == 4) {\n        if (surface-&gt;format-&gt;Rmask == 0x000000ff)\n            tex_format = GL_RGBA;\n        else\n            tex_format = GL_BGRA;\n    }\n    if (num_colors == 3) {\n        if (surface-&gt;format-&gt;Rmask == 0x000000ff)\n            tex_format = GL_RGB;\n        else\n            tex_format = GL_BGR;\n\n    } else {\n        SDL_Log(\"pixel image format shouldn't get here! Quitting\\n\");\n        SDL_Quit();\n    };\n\n    glGenTextures(1, &amp;tex_id);\n    glBindTexture(GL_TEXTURE_2D, tex_id);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glTexImage2D(GL_TEXTURE_2D, 0, tex_format, surface-&gt;w, surface-&gt;h, 0,\n                 tex_format, GL_UNSIGNED_BYTE, surface-&gt;pixels);\n}\nif (surface) SDL_FreeSurface(surface);\nfree(file_path);\n\nreturn tex_id;\n}\n</code></pre>\n\n<p>this code above works correctly for loading the image data.</p>\n\n<p>vertex shader</p>\n\n<pre><code>#version 330 core\n\nlayout (location = 0) in vec3 a_pos;\nlayout (location = 1) in vec4 a_col;\nlayout (location = 2) in vec2 a_tex;\n\nuniform mat4 u_mvp_mat;\nuniform mat4 u_mod_mat;\nuniform mat4 u_view_mat;\nuniform mat4 u_proj_mat;\n\nout vec4 f_color;\nout vec2 f_tex;\n\nvoid main()\n{\n    gl_Position =   u_mvp_mat * vec4(a_pos, 1.0);\n    f_tex = a_tex;\n    f_color = a_col;\n}\n</code></pre>\n\n<p>fragment shader.</p>\n\n<pre><code>#version 330 core\n\nin vec4 f_color;\nout vec4 o_color;\n\nin vec2 f_tex;\nuniform sampler2D u_sprite_tex;\n\nvoid main (void)\n{\n    o_color = f_color;\n    o_color = texture(u_sprite_tex, f_tex);\n}\n</code></pre>\n\n<p>this is how i setup my VBO</p>\n\n<pre><code>quad = ren2d_new(); //just a wrapper around a quad or two tri.\nren2d_set_tint(quad, 0, 1, 0, 1); //setting the color to green\n\npos_loc = get_attrib_location(ce_get_default_shader(), \"a_pos\");\ncol_loc = get_attrib_location(ce_get_default_shader(), \"a_col\");\nmvp_matrix_loc = get_uniform_location(ce_get_default_shader(), \"u_mvp_mat\");\nmodel_mat_loc = get_uniform_location(ce_get_default_shader(), \"u_mod_mat\");\nview_mat_loc = get_uniform_location(ce_get_default_shader(), \"u_view_mat\");\nproj_matrix_loc =\n    get_uniform_location(ce_get_default_shader(), \"u_proj_mat\");\n\ntex_loc = get_uniform_location(ce_get_default_shader(), \"u_sprite_tex\");\n\ncamera = cam_2d_new(ce_get_width(), ce_get_height());\n\nmodel_mat = mat4_identity();\nmat4_scale(model_mat, 128, 128, 1);\n\ntex_id = create_texture(\"test.png\");\n\nglGenVertexArrays(1, &amp;vao);\nglBindVertexArray(vao);\n\nglGenBuffers(1, &amp;vert_buff);\nglBindBuffer(GL_ARRAY_BUFFER, vert_buff);\nglBufferData(GL_ARRAY_BUFFER, sizeof(quad-&gt;vertices), quad-&gt;vertices,\n             GL_STATIC_DRAW);\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\nglEnableVertexAttribArray(0);\nglBindBuffer(GL_ARRAY_BUFFER, 0);\n\nglGenBuffers(1, &amp;col_buff);\nglBindBuffer(GL_ARRAY_BUFFER, col_buff);\nglBufferData(GL_ARRAY_BUFFER, sizeof(quad-&gt;colors), quad-&gt;colors,\n             GL_STATIC_DRAW);\nglVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, 0);\nglEnableVertexAttribArray(1);\n\nglVertexAttribPointer(2, 4, GL_FLOAT, GL_FALSE, sizeof(quad-&gt;tex_coords),\n                      quad-&gt;tex_coords);\nglEnableVertexAttribArray(2);\nglBindBuffer(GL_ARRAY_BUFFER, 0);\n\nglGenBuffers(1, &amp;ind_buff);\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ind_buff);\nglBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(quad-&gt;indices), quad-&gt;indices,\n             GL_STATIC_DRAW);\n\nglBindVertexArray(0);\n</code></pre>\n\n<p>this is my render function:</p>\n\n<pre><code>glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\nglClear(GL_COLOR_BUFFER_BIT);\n\n//could my texturing problems be here?\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, tex_id);\nglUniform1i(tex_loc, 0);\n\nglUseProgram(ce_get_default_shader()-&gt;shader_program);\nglBindVertexArray(vao);\n\n//excuse the silly names\nce_get_view_matrices(&amp;vview_mat, &amp;pproj_mat, &amp;mmvp_mat);\n\nmat4_multi(&amp;mmvp_mat, &amp;vview_mat, model_mat);\nmat4_multi(&amp;mmvp_mat, &amp;pproj_mat, &amp;mmvp_mat);\nglUniformMatrix4fv(mvp_matrix_loc, 1, GL_FALSE, mat4_get_data(&amp;mmvp_mat));\n\nglUniformMatrix4fv(model_mat_loc, 1, GL_FALSE, mat4_get_data(model_mat));\nglUniformMatrix4fv(view_mat_loc, 1, GL_FALSE, mat4_get_data(&amp;vview_mat));\nglUniformMatrix4fv(proj_matrix_loc, 1, GL_FALSE, mat4_get_data(&amp;pproj_mat));\n\nglDrawElements(GL_TRIANGLES, quad-&gt;vertex_count, GL_UNSIGNED_SHORT, 0);\nglBindVertexArray(0);\n</code></pre>\n\n<p>I am just getting a black quad. I can't track it down and i've been staring at this for quite a few hours now. </p>\n\n<p>doing some very basic testing in the fragment shader like this.</p>\n\n<pre><code>#version 330 core\n\nin vec4 f_color;\nout vec4 o_color;\n\nin vec2 f_tex;\nuniform sampler2D u_sprite_tex;\n\nvoid main (void)\n{\n    //o_color = f_color;\n    vec4 c;\n    if(f_tex.y == 1.0) { c = vec4(1.0, 0.0, 0.0, 1.0); }\n    if(f_tex.y == 0.0) { c = vec4(0.0, 0.0, 1.0, 1.0); }\n    o_color = c;\n    o_color = texture(u_sprite_tex, f_tex);\n}\n</code></pre>\n\n<p>my quads turn out to be blue both along the x and the y axis. That seems to be that the only value being passed in in 0.0 which doesn't make sense.</p>\n"}, {"tags": ["c++", "objective-c", "c", "macos", "active-directory"], "comments": [{"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 1, "creation_date": 1449073454, "post_id": 34047532, "comment_id": 55850141, "body": "@rmaddy, thanks for editing the tags, but I&#39;m looking for a solution in any of the languages C, C++ or objective-c, which is the reason for the tags. If you still think these tags are not relevant, please let me know why."}, {"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1449073551, "post_id": 34047532, "comment_id": 55850243, "body": "Tags should represent what your question is about. Your question isn&#39;t about any specific language which is why I removed the language tags. You should update your question stating what languages you are willing to work with."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 1, "creation_date": 1449075234, "post_id": 34047532, "comment_id": 55851504, "body": "@rmaddy, thanks for your input. However, after searching Meta, I believe the tags are relevant, as discussed <a href=\"http://meta.stackoverflow.com/questions/281443/how-general-must-a-problem-be-to-warrant-use-of-a-language-library-tag\">here</a> and <a href=\"http://meta.stackoverflow.com/questions/281094/tags-is-less-more\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2595, "user_id": 2452682, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GEzX4.jpg?s=128&g=1", "display_name": "IdoT", "link": "https://stackoverflow.com/users/2452682/idot"}, "is_accepted": false, "score": 0, "last_activity_date": 1526469212, "creation_date": 1526469212, "answer_id": 50369401, "question_id": 34047532, "link": "https://stackoverflow.com/questions/34047532/check-if-a-user-is-a-local-or-domain-account/50369401#50369401", "title": "Check if a user is a local or domain account", "body": "<p>Using <em>OpenDirectory</em> API I've managed to achieve a similar task, here is the modified solution that would fit your query:</p>\n\n<pre><code>bool isDomainUser(std::string currentUser)\n{\n    NSString *queryVal = [NSString stringWithUTF8String:currentUser.c_str()];\n\n    ODSession *session = [ODSession defaultSession];\n\n    ODNode *node = [ODNode nodeWithSession:session \n                                type:kODNodeTypeAuthentication error:NULL];\n\n    ODQuery *query = [ODQuery queryWithNode:node forRecordTypes:kODRecordTypeUsers\n                                 attribute:kODAttributeTypeRecordName\n                                 matchType:kODMatchEqualTo \n                                 queryValues:queryVal\n                        returnAttributes:kODAttributeTypeStandardOnly\n                        maximumResults:0 error:NULL];\n\n    NSArray *records = [query resultsAllowingPartial:NO error:NULL];\n\n    for (ODRecord *record in records)\n    {\n        ODAttributeType type = @\"dsAttrTypeStandard:OriginalAuthenticationAuthority\";\n        NSArray *lines = [record valuesForAttribute:type error:nil];\n\n        if (lines)\n        {\n            for(NSString *line in lines)\n            {\n                if ([line hasPrefix:@\"NetLogon\"])\n                {\n                    return true;\n                }\n            }\n        }\n    }\n\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 745, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1526469212, "creation_date": 1449072821, "last_edit_date": 1495542617, "question_id": 34047532, "link": "https://stackoverflow.com/questions/34047532/check-if-a-user-is-a-local-or-domain-account", "title": "Check if a user is a local or domain account", "body": "<p>Given the name of a user in OS X, it is possible to query its Active Directory SID using the BSD <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/mbr_sid_to_string.3.html\" rel=\"nofollow noreferrer\">membership functions</a>.</p>\n\n<p>However, when a local user name is provided on a machine that is not a member of a directory, an SID is also returned.</p>\n\n<p>A solution for checking if the local logged-in user is a domain account is provided <a href=\"https://stackoverflow.com/questions/14904749/mac-osx-determing-whether-user-account-is-an-active-directory-user-vs-local-us/15284509#15284509\">here</a>, but this assumes that the user in question is that of the current session, which may not be the case. In addition, if the user is a mobile account (roaming), then a home directory is found and it returns incorrectly.</p>\n\n<p>So, how would one check if a given username is a local or domain user where the username can be any name, including names used for local processes?</p>\n"}, {"tags": ["c", "word-count"], "comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1449071539, "post_id": 34047050, "comment_id": 55848697, "body": "And what is the question ?"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 1, "creation_date": 1449071766, "post_id": 34047050, "comment_id": 55848902, "body": "EVERY TIME I RAN THIS CODE WITH A MENU OPTION AND TEXT FILE, I WOULD ALWAYS GET A &quot;SEGMENTATION FAULT (CORE DUMPED)&quot; ERROR, PLEASE HELP"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "edited": false, "score": 0, "creation_date": 1449071827, "post_id": 34047050, "comment_id": 55848943, "body": "yes please, that would help alot"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 3, "creation_date": 1449071828, "post_id": 34047050, "comment_id": 55848945, "body": "@Erine Henien please, don&#39;t use caps lock!"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "edited": false, "score": 0, "creation_date": 1449071861, "post_id": 34047050, "comment_id": 55848976, "body": "my bad, caps lock was on"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 3, "creation_date": 1449071935, "post_id": 34047050, "comment_id": 55849038, "body": "You&#39;re using <code>i</code> without initializing it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1449071960, "post_id": 34047050, "comment_id": 55849064, "body": "Please do yourself a favor and format your code correctly."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1449072205, "post_id": 34047050, "comment_id": 55849227, "body": "Also, main should be <code>int main(int arc, char * argv[])</code>"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1449072278, "post_id": 34047050, "comment_id": 55849293, "body": "@FiddlingBits i just did but its still not working"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1449072316, "post_id": 34047050, "comment_id": 55849317, "body": "@ErineHenien.: Have you added the modifications I mentioned"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1449072447, "post_id": 34047050, "comment_id": 55849418, "body": "@Garf365 just did still not working"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1449072581, "post_id": 34047050, "comment_id": 55849497, "body": "@ErineHenien It&#39;s normal, it doesn&#39;t change anything about your segfault but it&#39;s the correct way of doing a main. I didn&#39;t say anymore cause answer juste below seams to help you"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1449072623, "post_id": 34047050, "comment_id": 55849541, "body": "@coderredoc im still confused on what to do, is there email i can contact you with"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1449072659, "post_id": 34047050, "comment_id": 55849569, "body": "@ErineHenien.: check my answer"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1449072934, "post_id": 34047050, "comment_id": 55849747, "body": "@coderredoc, did it but still getting same error"}], "answers": [{"comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "edited": false, "score": 0, "creation_date": 1449072864, "post_id": 34047193, "comment_id": 55849707, "body": "@ErineHenien.; got it?"}, {"owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "edited": false, "score": 0, "creation_date": 1449073126, "post_id": 34047193, "comment_id": 55849896, "body": "im getting these errors too ./hw71.c: line 4: syntax error near unexpected token <code>(&#39; .&#47;hw71.c: line 4: </code>int main()&#39;"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "edited": false, "score": 0, "creation_date": 1449077011, "post_id": 34047193, "comment_id": 55852741, "body": "@ErineHenien.: listen can I discuss with you later..rightnow I am kinda busy..the thing..get the whole string &quot;-c example.c&quot; in a string fully..."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1449072456, "last_edit_date": 1449072456, "creation_date": 1449071851, "answer_id": 34047193, "question_id": 34047050, "link": "https://stackoverflow.com/questions/34047050/c-programming-word-count/34047193#34047193", "title": "c programming , word count", "body": "<p>Use <code>fgets</code> so that all strings are read in a line. Here only 1 string is read.</p>\n\n<p>Or get the command step by step. Then look for the operation.</p>\n\n<p>Note: initialize <code>i</code>.</p>\n\n<p><strong><em>Problem</em></strong></p>\n\n<p>And another thing <code>scanf</code> reads until a linebreak/space/tab is found. SO file name is not read in <code>command</code>.</p>\n\n<pre><code>while( fgets(buffer, BUFFERSIZE , stdin) ) /* break with ^D or ^Z */\n{\n  //process buffer\n}\n</code></pre>\n\n<h2><strong><em>Where is it going wrong?</em></strong></h2>\n\n<pre><code>scanf(\"%s\",command); //use fgets here you are not reading everything here\n\n//Extracting file name\nif(command[2]==' ') {\n\nif(command[1]=='l'||command[1]=='w'||command[1]=='c') {\nwhile(command[i]!='\\0')\n{\nif(i&gt;2) {\nfileName[j]=command[i];\ni++;\n}\nfileName[i]='\\0';\n}\n</code></pre>\n\n<p>For understanding what is going wrong you just put a print statement after reading <code>command</code> and then print it and comment out rest of the code.</p>\n"}], "owner": {"reputation": 1, "user_id": 5631102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72834490203a0dd678824fb106acd03b?s=128&d=identicon&r=PG&f=1", "display_name": "Erine Henien", "link": "https://stackoverflow.com/users/5631102/erine-henien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1449248787, "creation_date": 1449071501, "last_edit_date": 1449248787, "question_id": 34047050, "link": "https://stackoverflow.com/questions/34047050/c-programming-word-count", "title": "c programming , word count", "body": "<blockquote>\n  <p>Write a C program named \u201cmywc.c\u201d simulating the \u201cwc\u201d command taking some options and text file as arguments.<br>\n  If no option is given, mywc outputs the number of lines, words and characters in the given file as well as the file name separated by a blank space.<br>\n  When the \u2013l option is used, mywc can output the number of lines;<br>\n  When the \u2013w option is used, mywc can output the number of words;<br>\n  When the \u2013c option is used, mywc can output the number of characters.<br>\n  If the given file doesn\u2019t exist, it gives an error message with program name, text file name and the causal separated by colon. \n  The program should also meet the following requirements.<br>\n  (1) Use structure to store the number of lines, words, and characters.<br>\n  (2) Characters only include letters and digits.<br>\n  (3) The order of options does not matter.<br>\n  (4) When take the screenshot, always show the text first.<br>\n  The output could be like this:</p>\n  \n  <p>(omitted)</p>\n</blockquote>\n\n<p>I did this code but not working</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    FILE *fp;\n    char buff[255];\n    char command[255];\n    int c=0,i,j=0;\n    int line=0;\n    int word=0;\n    char ch;\n    char fileName[255];\n    printf(\"*********************************************\\n\");\n    printf(\"Enter command (Example -c input.txt)\\n\");\n    printf(\"-c for Number of character in file \\n\");\n    printf(\"-w for Number of words in file \\n\");\n    printf(\"-l for Number of lines in file \\n\");\n    printf(\"*********************************************\\n\");\n    scanf(\"%s\",command);\n    //Extracting file name\n    if(command[2]==' ') {\n        if(command[1]=='l' || command[1]=='w' || command[1]=='c') {\n            while(command[i]!='\\0') {\n                if(i&gt;2) {\n                    fileName[j]=command[i];\n                    i++;\n                }\n                fileName[i]='\\0';\n            }\n            printf(\"*********************************************\\n\");\n            printf(\"File Name You have provided is:%s\\n\",fileName);\n            printf(\"*********************************************\\n\");\n            fp = fopen(fileName, \"r\");\n            if(fp) {\n                while(!feof(fp )) {\n                    memset(buff, '\\0', sizeof( buff) );\n                    fgets(buff, 255, (FILE*)fp);\n                    for(i = 0; buff[ i ]; i++)\n                    {\n                        if (buff[i] == '\\n')\n                            line ++,word++;\n                        else if (buff[i] == ' ')\n                            word ++;\n                        else\n                            c++;\n                    }\n                }\n                fclose(fp);\n                if(command[0]=='-' &amp;&amp; command[1]=='w')\n                    printf(\"Number of words in file: %i\\n\", word);\n                else if(command[0]=='-' &amp;&amp; command[1]=='c')\n                    printf(\"Number of characters in file: %i\\n\",(c-2));\n                else if(command[0]=='-' &amp;&amp; command[1]=='l')\n                    printf(\"Number of lines in file: %i \\n\", line);\n                else {\n                    printf(\"Number of words in file: %i\\n\", word);\n                    printf(\"Number of characters in file: %i\\n\",(c-2));\n                    printf(\"Number of lines in file: %i \\n\", line);\n                }\n                printf(\"*********************************************\\n\");\n            } else\n                printf(\"File not found\");\n            return;\n        }\n</code></pre>\n\n<p>Every time I ran this code with a menu option and text file, I always get a <code>Segmentation fault (core dumped)</code> error. How can I avoid this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 1, "creation_date": 1449071347, "post_id": 34046943, "comment_id": 55848541, "body": "I cant see where you are calling the function from <code>main()</code>"}, {"owner": {"reputation": 9, "user_id": 5530078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182480088447043/picture?type=large", "display_name": "Haidar Wahid", "link": "https://stackoverflow.com/users/5530078/haidar-wahid"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1449071471, "post_id": 34046943, "comment_id": 55848647, "body": "i&#39;ve tried but when im calling it it prints out all the questions at once ! i forgot to mention that im going to be using a structure were all my question as well as the answers will be stored !"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1449071621, "post_id": 34046943, "comment_id": 55848763, "body": "ook, so you want it to print the question, ask for the answer by the user, and then move on to next question? And where is this structure in which you want to store your questions and answers"}, {"owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "edited": false, "score": 0, "creation_date": 1449071807, "post_id": 34046943, "comment_id": 55848929, "body": "What I am getting out of this question is : Store the first question along with its options in a string and then print the Question and Options as desired output is stated... Is that so?"}, {"owner": {"reputation": 9, "user_id": 5530078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182480088447043/picture?type=large", "display_name": "Haidar Wahid", "link": "https://stackoverflow.com/users/5530078/haidar-wahid"}, "edited": false, "score": 0, "creation_date": 1449071826, "post_id": 34046943, "comment_id": 55848941, "body": "exactly!! i&#39;ve edit  it now !"}, {"owner": {"reputation": 9, "user_id": 5530078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182480088447043/picture?type=large", "display_name": "Haidar Wahid", "link": "https://stackoverflow.com/users/5530078/haidar-wahid"}, "reply_to_user": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "edited": false, "score": 0, "creation_date": 1449072387, "post_id": 34046943, "comment_id": 55849377, "body": "yea exactly! @nullpointer"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5530078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182480088447043/picture?type=large", "display_name": "Haidar Wahid", "link": "https://stackoverflow.com/users/5530078/haidar-wahid"}, "edited": false, "score": 0, "creation_date": 1449073368, "post_id": 34047412, "comment_id": 55850084, "body": "thank u @Haris  for ur time !! but i still get some errors when i run the program !!"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 9, "user_id": 5530078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182480088447043/picture?type=large", "display_name": "Haidar Wahid", "link": "https://stackoverflow.com/users/5530078/haidar-wahid"}, "edited": false, "score": 0, "creation_date": 1449073479, "post_id": 34047412, "comment_id": 55850167, "body": "@HaidarWahid, Make an edit in your question and add the new code."}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 1, "last_activity_date": 1449072828, "last_edit_date": 1449072828, "creation_date": 1449072490, "answer_id": 34047412, "question_id": 34046943, "link": "https://stackoverflow.com/questions/34046943/reading-line-by-line-and-storing-in-an-array-of-structure/34047412#34047412", "title": "reading line by line and storing in an array of structure", "body": "<p>To store the question along with the right answer you would need a structure something like this</p>\n\n<pre><code>struct quiz \n{ \n    char question[50];\n    char* alt[4];\n    char correctanswer[1];\n};\n</code></pre>\n\n<p>Then in the <code>while</code> loop you can read the question and store in the structure</p>\n\n<pre><code>struct quiz all_ques[10];\nint i = 0;\n\n\n//use i to terminate the loop, as how many questions are there in the file\nwhile(fgets(str, 500, fp) || i&lt;4)               // read 500 characters\n{\n    ptr = strtok(str, \";\");           // split our findings around the \" \"\n    strcpy(all_ques[i].questions, ptr);    // store the question\n\n    ptr = strtok(NULL, \";\");            // and keep splitting\n    all_ques[i].alt[0] = malloc(10);\n    strcpy(all_ques[i].alt[0], ptr);    // store the first option\n\n    ptr = strtok(NULL, \";\");       // and keep splitting\n    all_ques[i].alt[1] = malloc(10);\n    strcpy(all_ques[i].alt[1], ptr);    // store the second option\n\n    ptr = strtok(NULL, \";\");       // and keep splitting\n    all_ques[i].alt[2] = malloc(10);\n    strcpy(all_ques[i].alt[2], ptr);    // store the third option\n\n    ptr = strtok(NULL, \";\");       // and keep splitting\n    all_ques[i].alt[3] = malloc(10);\n    strcpy(all_ques[i].alt[3], ptr);    // store the fourth option\n\n    fgets(str, 500, fp)\n    strcpy(all_ques[i].correctanswer, str);    // store the correct answer\n\n    i++;\n}\n</code></pre>\n\n<hr>\n\n<p>After this you can use the array of structure <code>all_ques[]</code> to give the questions to the users.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 5530078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182480088447043/picture?type=large", "display_name": "Haidar Wahid", "link": "https://stackoverflow.com/users/5530078/haidar-wahid"}, "is_accepted": false, "score": 1, "last_activity_date": 1449074398, "creation_date": 1449074398, "answer_id": 34048134, "question_id": 34046943, "link": "https://stackoverflow.com/questions/34046943/reading-line-by-line-and-storing-in-an-array-of-structure/34048134#34048134", "title": "reading line by line and storing in an array of structure", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n\n\nstruct quiz\n{\n    char questions[50];\n    char* alt[4];\n    char correctanswer[1];\n};\n\nint main (){\n\nstruct quiz all_ques[10];\nint i = 0;\n\nFILE *haidar;\nhaidar=fopen(\"gameee.txt\",\"r\");\nchar str[500];\nchar *ptr;\n\nwhile(fgets(str, 500, haidar))               // read 500 characters\n{\n    ptr = strtok(str, \";\");           // split our findings around the \" \"\n    strcpy(all_ques[i].questions, ptr);    // store the question\n\n    ptr = strtok(NULL, \";\");            // and keep splitting\n    all_ques[i].alt[0] = malloc(10);\n    strcpy(all_ques[i].alt[0], ptr);    // store the first option\n\n    ptr = strtok(NULL, \";\");       // and keep splitting\n    all_ques[i].alt[1] = malloc(10);\n    strcpy(all_ques[i].alt[1], ptr);    // store the second option\n\n    ptr = strtok(NULL, \";\");       // and keep splitting\n    all_ques[i].alt[2] = malloc(10);\n    strcpy(all_ques[i].alt[2], ptr);    // store the third option\n\n    ptr = strtok(NULL, \";\");       // and keep splitting\n    all_ques[i].alt[3] = malloc(10);\n    strcpy(all_ques[i].alt[3], ptr);    // store the fourth option\n\n    fgets(str, 500, haidar);\n    strcpy(all_ques[i].correctanswer, str);    // store the correct answer\n\n    i++;\n}\n}\n</code></pre>\n\n<p>sorry if i did some dummy mistakes!! really new and trying to learn @Haris </p>\n"}], "owner": {"reputation": 9, "user_id": 5530078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182480088447043/picture?type=large", "display_name": "Haidar Wahid", "link": "https://stackoverflow.com/users/5530078/haidar-wahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1449074398, "creation_date": 1449071225, "last_edit_date": 1449073871, "question_id": 34046943, "link": "https://stackoverflow.com/questions/34046943/reading-line-by-line-and-storing-in-an-array-of-structure", "title": "reading line by line and storing in an array of structure", "body": "<p>I'm trying to read lines from a text file line by line and store it in an array. the txt file has some question in it which will be asked to the player !</p>\n\n<p>Here's some of the questions !!</p>\n\n<pre><code>1: N\u00e4r kom potatisen till Europa?;A:1300-talet; B:1500-talet; C:900-talet;D:1700-talet\\n\nr\u00e4tt svar : B\n\n2: I vilken enhet mats elektrisk sp\u00e4nning ?;A:Ampere;B:Volt;C:Joule;D:Watt\\n\nR\u00e4tt svar: A\n\n3: Fr\u00e5n vilket land har vi f\u00e5tt lego?;A:Tyskland;B:Australien;C:Japan;D:Danmark\\n\nr\u00e4tt svar : D\n</code></pre>\n\n<p>Its in Sweden !</p>\n\n<p>I have made a function that splits the line wherever it finds a semicolon! like this:</p>\n\n<pre><code>void readline_andsplit()\n{\n    char str[500];\n    char *ptr;// token\n    FILE * fp = fopen(\"gameee.txt\",\"r\");\n\n   while(fgets(str, 500, fp)){            // read 500 characters\n                  // print what we read for fun\n    ptr = strtok(str, \";\");         // split our findings around the \" \"\n\n    while(ptr != NULL)  // while there's more to the string\n    {\n        printf(\"%s\\n\", ptr);     // print what we got\n        ptr = strtok(NULL, \";\"); // and keep splitting\n    }\n\n   }\n    fclose(fp);\n\n}\n</code></pre>\n\n<p>And here's the main code:</p>\n\n<pre><code>int main() {\n    int i = 0;\n    int numProgs = 0;\n    char* nrofqeustions[50];\n    char line[80];\n    int j = 0;\n    char correctanswer;\n\n    FILE *file;\n    file = fopen(\"gameee.txt\", \"r\");\n\n    while(fgets(line, sizeof line, file)!=NULL) {\n        nrofqeustions[i] = calloc(strlen(line)+1, 1);   //add each filename into array of nrofqeustions\n        strcpy(nrofqeustions[i], line);\n        i++;  //count number of nrofqeustions in file\n    }\n\n    //check to be sure going into array correctly\n    //for (j=0 ; j&lt;numProgs+1; j++) {\n    //printf(\"\\n%s\", nrofqeustions[j]);\n    //}\n\n    printf(\"%s\\n\",nrofqeustions[0]);\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n\n<p>I want it to produce the following output:</p>\n\n<pre><code>1: N\u00e4r kom potatisen till Europa?\nA:1300-talet\n B:1500-talet \nC:900-talet\nD:1700-talet\n</code></pre>\n\n<p>When the user chooses it moves on to the next question ! it's a quiz \ni'm kinda of new to the language !</p>\n\n<p>Here's my struct :</p>\n\n<pre><code> struct quiz{\nchar question[x];\nchar alt [4];\nchar correctanswer[1];\n\n\n};\n</code></pre>\n"}, {"tags": ["c", "system", "system-calls", "minix"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449072273, "post_id": 34046910, "comment_id": 55849290, "body": "What error message do you get?"}, {"owner": {"reputation": 31, "user_id": 5631031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1024945544214234/picture?type=large", "display_name": "Jordan Barnes", "link": "https://stackoverflow.com/users/5631031/jordan-barnes"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449072318, "post_id": 34046910, "comment_id": 55849319, "body": "test.c:13:26: error: use of undeclared identifier &#39;PRINTPPIDS&#39;     _syscall(PM_PROC_NR, PRINTPPIDS, &amp;m);"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449072389, "post_id": 34046910, "comment_id": 55849381, "body": "You will have to define <code>PRINTPPIDS</code> somewhere which i visible from the <code>main()</code> function."}, {"owner": {"reputation": 31, "user_id": 5631031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1024945544214234/picture?type=large", "display_name": "Jordan Barnes", "link": "https://stackoverflow.com/users/5631031/jordan-barnes"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449073217, "post_id": 34046910, "comment_id": 55849957, "body": "<code>PRINTPPIDS</code> is defined in the <code>callnr.h</code> file with the call number 70"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1449133589, "post_id": 34046910, "comment_id": 55876841, "body": "why all that extra effort?   just use: <code>pid_t parentPid = getppid();</code> of course the code will need to <code>#include &lt;sys&#47;types.h&gt;</code>  and <code>#include &lt;unistd.h&gt;</code>"}, {"owner": {"reputation": 1799, "user_id": 1306269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vkmN1.png?s=128&g=1", "display_name": "Luis Liz", "link": "https://stackoverflow.com/users/1306269/luis-liz"}, "edited": false, "score": 0, "creation_date": 1570822859, "post_id": 34046910, "comment_id": 103050197, "body": "The point is to remake it to understand the inner workings"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5631031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1024945544214234/picture?type=large", "display_name": "Jordan Barnes", "link": "https://stackoverflow.com/users/5631031/jordan-barnes"}, "is_accepted": false, "score": 2, "last_activity_date": 1449076077, "creation_date": 1449076077, "answer_id": 34048764, "question_id": 34046910, "link": "https://stackoverflow.com/questions/34046910/adding-print-parent-process-id-system-call-to-minix/34048764#34048764", "title": "Adding print parent process ID system call to Minix", "body": "<p>Literally make sure to update and save all files before running <strong>Make Service + Install</strong> and then recompile the test class. Spent 4 hours staring pointlessly at my code because of it <strong>sigh</strong></p>\n"}], "owner": {"reputation": 31, "user_id": 5631031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1024945544214234/picture?type=large", "display_name": "Jordan Barnes", "link": "https://stackoverflow.com/users/5631031/jordan-barnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2548, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449076077, "creation_date": 1449071134, "question_id": 34046910, "link": "https://stackoverflow.com/questions/34046910/adding-print-parent-process-id-system-call-to-minix", "title": "Adding print parent process ID system call to Minix", "body": "<p>This is is the program to Print Process ID and Parent Process ID's in C using Minix. I'm trying to compile the test code below this code to return the ID's but it isn't compiling. Any help would be appreciated.</p>\n\n<pre><code>//Program to print its Process ID, Parent Process ID \n\n  #include &lt;stdio.h&gt;\n  #include \"pm.h\"  // for various global variables \n  #include \"mproc.h\"  // for process table mproc\n\nint do_printppids(void)\n{\n\nint idx = m_in.m1_i1;\nint n = m_in.m1_i2;\nwhile(n &gt; 0 )\n{\n    int pid = mproc[idx].mp_pid;\n    if(pid)\n    {\n        int parent = mproc[mproc[idx].mp_parent].mp_pid;\n        printf(\"proc: %sn\", mproc[idx].mp_name);\n        printf(\"Pid: %d, PPid %dn\", pid, parent);\n        n++;\n    }\n    else\n    {\n        n = 0;\n    }\n    idx++;\n}\nreturn 1;\n}\n</code></pre>\n\n<p>This is my test class to try and return the Process ID and Parent Process IDs, but it isn't compiling in Minix.</p>\n\n<pre><code>#include &lt;lib.h&gt;    // provides _syscall and message\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; // provides atoi\n\nint main(void) {\n\n\nmessage m;      // Minix uses message to pass parameters to a system call\n\nm_in.m1_i1 = 0;\nm_in.m1_i2 = 10;    \n\n_syscall(PM_PROC_NR, PRINTPPIDS, &amp;m);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 1, "creation_date": 1449071465, "post_id": 34046882, "comment_id": 55848639, "body": "I would guess, that memory alignments are not part of the C standard."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1449071518, "post_id": 34046882, "comment_id": 55848683, "body": "Use <code>malloc</code> and avoid such experiments. Why you need VLA instead of <code>malloc</code>? It looks like &quot;modern language&quot;? If this is the reason - use Python, Perl, etc."}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1449071602, "post_id": 34046882, "comment_id": 55848744, "body": "@i486 - premature optimization, what else :)? Seriously, although it&#39;s a good advice, it doesn&#39;t answer the question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1449072171, "post_id": 34046882, "comment_id": 55849209, "body": "VLAs is basically the same as using <code>alloca</code>. Alignement will automatically be correct depending on your platform."}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1449072222, "post_id": 34046882, "comment_id": 55849240, "body": "Thanks, @MichaelWalz! Do you have any references supporting that?"}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1449072324, "post_id": 34046882, "comment_id": 55849322, "body": "@ceving I failed to find that in C99 myself, but I&#39;m not that good at interpreting it."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449072432, "post_id": 34046882, "comment_id": 55849409, "body": "I suppose you could always align manually, i.e. create an array which is ALIGN_CHUNK_SIZE-1 larger than needed and return the address to an offset if the alignment is not correct."}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449072598, "post_id": 34046882, "comment_id": 55849520, "body": "Thanks, @PeterA.Schneider! Yeah, I might as well resort to that since so far there&#39;s no consensus nor any authoritative info. Still the question is interesting by itself."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1449072607, "post_id": 34046882, "comment_id": 55849527, "body": "And I&#39;m sure that you cannot rely on the alignment of a char array. Try compiling with -Os for reduced size, and try other compilers and for other platforms."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 2, "creation_date": 1449072729, "post_id": 34046882, "comment_id": 55849612, "body": "@ceving, your guess is just wrong"}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449072836, "post_id": 34046882, "comment_id": 55849685, "body": "@JensGustedt I expect ceving meant the VLA alignment is not specified. However, although I couldn&#39;t find it myself, I doubt it&#39;s not actually there."}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449072939, "post_id": 34046882, "comment_id": 55849752, "body": "@PeterA.Schneider Tried -Os (no change) and ARM (got down to 8 bytes, but that&#39;s likely due to drop to 32 bits) - no luck."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449072968, "post_id": 34046882, "comment_id": 55849775, "body": "@spbnick, to work properly, arrays have to align their elements the same way as an ordinary variable of the same type. What do you expect differently?"}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449073168, "post_id": 34046882, "comment_id": 55849927, "body": "@JensGustedt Well, I&#39;m kind of hoping they would have strictest alignment requirements spelled out somewhere due to potential implementation complexity. That wouldn&#39;t break anything."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1449074316, "post_id": 34046882, "comment_id": 55850785, "body": "@spbnick: it is very rare for a standard to require more than necessary, and much less because someone thinks the excess requirement is easier to implement. An implementation is free to align more strictly than necessary, but it is also free to provide only the required alignment, whether or not that is more work for the implementers."}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1449074463, "post_id": 34046882, "comment_id": 55850926, "body": "@rici Yeah, this is reasonable. Logic ruins everything as usual, don&#39;t hope - think :) Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "edited": false, "score": 0, "creation_date": 1449071678, "post_id": 34047058, "comment_id": 55848815, "body": "Thank you. Can you provide any references to substantiate this?"}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "edited": false, "score": 0, "creation_date": 1449071803, "post_id": 34047058, "comment_id": 55848926, "body": "And yeah, I don&#39;t know the type, I only know the size. Hmm, actually I can add the alignment to the type description, but it would be nice to avoid that."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "edited": false, "score": 0, "creation_date": 1449072848, "post_id": 34047058, "comment_id": 55849692, "body": "@spbnick, the C standard says so. <code>_Alignof</code> and <code>_Alignas</code> have been introduced with C11, so you&#39;d need  a compiler that supports this version."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "edited": false, "score": 0, "creation_date": 1449072923, "post_id": 34047058, "comment_id": 55849739, "body": "@spbnick Unfortunately it&#39;s hard to find compact and specific reference to quote, since VLAs are not specificly mentioned in alignment section of the C standard."}, {"owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "edited": false, "score": 0, "creation_date": 1449073042, "post_id": 34047058, "comment_id": 55849826, "body": "@user694733 Thanks a lot! Aargh, so far it looks like I&#39;ll have to forget about it and just align it myself on the strictest alignment."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1449078443, "post_id": 34047058, "comment_id": 55853593, "body": "Could you stick your char VLA in a union with a <code>intmax_t</code>, a <code>long double</code> and a <code>void *</code>? That would probably be fairly maximally aligned. Perhaps add a function pointer type to the union for good measure!"}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 3, "last_activity_date": 1449071518, "creation_date": 1449071518, "answer_id": 34047058, "question_id": 34046882, "link": "https://stackoverflow.com/questions/34046882/how-variable-length-arrays-are-aligned-in-c/34047058#34047058", "title": "How variable length arrays are aligned in C?", "body": "<p>VLAs are aligned same way as the normal arrays. </p>\n\n<p>Which means that allocating array of <code>char</code>s and storing <code>int</code> into it is not going to work, if you want to access that integer directly.</p>\n\n<p>You can use <code>_Alignof</code> to determine alignment for type and calculate needed adjustments manually, but even then it's implementation defined at best.</p>\n\n<p>I believe that you might have to disable strict aliasing on your compiler for this to work.</p>\n"}], "owner": {"reputation": 4338, "user_id": 1161045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fca0b4be71150e13329805cd6867f5?s=128&d=identicon&r=PG", "display_name": "spbnick", "link": "https://stackoverflow.com/users/1161045/spbnick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1449071518, "creation_date": 1449071055, "last_edit_date": 1449071335, "question_id": 34046882, "link": "https://stackoverflow.com/questions/34046882/how-variable-length-arrays-are-aligned-in-c", "title": "How variable length arrays are aligned in C?", "body": "<p>What logic is used to align variable length arrays (VLAs) in C99?</p>\n\n<p>I'm considering allocating storage on the stack for arbitrary objects with unknown alignment requirements and so would need the strictest alignment. I would prefer avoiding <code>alloca()</code> and using (<code>char</code>) VLAs instead as they're better standardized.</p>\n\n<p>My tests with GCC haven't managed to disprove they're aligned on anything less than 16 bytes.</p>\n"}, {"tags": ["c++", "c", "network-programming", "protocols", "udp-data-transfer"], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449080945, "post_id": 34049970, "comment_id": 55855049, "body": "Yes, I found this, but forgot to write here. It is really sends ok. I did as u said: on both sides did hex-print of buffers and they were the same. But you first wrote correct answer =)"}], "tags": [], "owner": {"reputation": 376, "user_id": 405312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645533ddfd0ca5653a3b51c0525ac752?s=128&d=identicon&r=PG", "display_name": "Dav3xor", "link": "https://stackoverflow.com/users/405312/dav3xor"}, "is_accepted": true, "score": 1, "last_activity_date": 1449080773, "last_edit_date": 1449080773, "creation_date": 1449079832, "answer_id": 34049970, "question_id": 34046850, "link": "https://stackoverflow.com/questions/34046850/udt-cant-send-unsigned-char/34049970#34049970", "title": "UDT can&#39;t send unsigned char*", "body": "<p>Oh, tricky...  You're hashing your pointer.</p>\n\n<p>see <a href=\"http://en.cppreference.com/w/cpp/utility/hash\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/utility/hash</a> (under notes)</p>\n\n<p>I'd recommend printing the hex value of what you're sending on both ends to confirm it's the same, and it should be.  If you're sending a null terminated string, you might be missing the null.  But that's probably not the case here, given you specify it's unsigned chars.</p>\n"}], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 34049970, "answer_count": 1, "score": 1, "last_activity_date": 1449080773, "creation_date": 1449070964, "question_id": 34046850, "link": "https://stackoverflow.com/questions/34046850/udt-cant-send-unsigned-char", "title": "UDT can&#39;t send unsigned char*", "body": "<p>I use UDT library to send my data. But seems it unable to send unsigned char* data properly. On one side I send it like</p>\n\n<pre><code>int rc = UDT::sendmsg(socket, full_data, size, -1, true);\n</code></pre>\n\n<p>On another side I receive like:</p>\n\n<pre><code>unsigned char* data;\nint size = 2500;\ndata = new char[size];\n\nwhile (true) {\n    int rc = UDT::recvmsg(sock, data, size);\n    if (rc == -1) std::cout &lt;&lt; \"Error: \" &lt;&lt; UDT::getlasterror().getErrorMessage() &lt;&lt; std::endl;\n    else std::cout &lt;&lt; \"Received packet of length\" &lt;&lt; rc &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>On both sides send/receive count bytes are same. But data is different. When I do kind of </p>\n\n<pre><code>std::hash&lt;unsigned char*&gt; ptr_hash;\ncout &lt;&lt; \"Hash: \" &lt;&lt; ptr_hash(data);\n</code></pre>\n\n<p>I've got different hashes. In UDT sources there are lines:</p>\n\n<pre><code>UDT_API int sendmsg(UDTSOCKET u, const char* buf, int len, int ttl = -1, bool inorder = false);\nUDT_API int recvmsg(UDTSOCKET u, char* buf, int len);\n</code></pre>\n\n<p>As you can see input parameters are char* but not unsigned char* or void*. Does this means that I should send only char* or use for example base64 to encode my binary data?</p>\n"}, {"tags": ["c", "algorithm", "matrix"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1449070949, "post_id": 34046752, "comment_id": 55848296, "body": "start by applying your linearised algorithm to the transpose of the matrix to get column-matches (assuming input is row-major) and similarly to the linearisation of the diagonal and cross elements. generalise and condense after you have achieved that"}], "answers": [{"tags": [], "owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "is_accepted": false, "score": 2, "last_activity_date": 1449073209, "last_edit_date": 1449073209, "creation_date": 1449071554, "answer_id": 34047072, "question_id": 34046752, "link": "https://stackoverflow.com/questions/34046752/finding-a-pattern-in-a-matrix-in-any-order/34047072#34047072", "title": "Finding a pattern in a matrix in any order?", "body": "<p>(I'm calling this pseudocode - massing the matrix, etc in this way is incorrect.)</p>\n\n<pre><code>int match(char** matrix, int width, int height, int x, int y, char *str, int strPos, int strLen, int dx, int dy)\n{\n\n    if (strPos == strLen)\n        return 1;\n\n    int i = x + dx;\n    int j = y + dy;\n\n    if (i &lt; 0 || i &gt;= width || j &lt; 0 || j &gt;= height || strPos &gt; strLen)\n        return 0;\n\n    /// fix this...\n    char mc = matrix[x][y];\n\n    if (mc != str[strPos])\n        return 0;\n\n    return match(matrix, width, height, i, j, str, strPos + 1, strLen, dx, dy);\n}\n\nint matches(char** matrix, int width, int height, char* str, int strLen)\n{\n    for (int i = 0; i &lt; matrixWidth; ++i)\n    {\n        for (int j = 0; j &lt; matrixHeight; ++j)\n        {\n            if (matrix[i][j] != str[0])\n                continue;\n\n            for (int dx = -1; dx &lt;= 1; ++dx)\n            {\n                for (int dy = -1; dy &lt;= 1; ++dy)\n                {\n                    if (match(matrix, matrixWidth, matrixHeight, i, j, dx, dy))\n                        return 1;\n                }\n            }\n        }\n    }\n\n    return 0;\n\n\n\n}\n</code></pre>\n\n<p>This is probably missing some bounds checks, and could be optimized by only checking a direction (dx,dy) if it's possible for the string to fit without going outside of the matrix bounds.</p>\n\n<p>This is very similar to a flood fill, with the additional constraint that checks must go in a single direction from the initial recursive call, rather than spiraling out.</p>\n"}, {"comments": [{"owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "edited": false, "score": 0, "creation_date": 1449139364, "post_id": 34063196, "comment_id": 55880698, "body": "I checked this code,This is working extremely well.Kudos"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 1, "last_activity_date": 1449137644, "creation_date": 1449137644, "answer_id": 34063196, "question_id": 34046752, "link": "https://stackoverflow.com/questions/34046752/finding-a-pattern-in-a-matrix-in-any-order/34063196#34063196", "title": "Finding a pattern in a matrix in any order?", "body": "<p>I tried it storing the grid in a 2-dimensional array of <code>char</code> as there are less boundary conditions to worry about (such as <code>char *</code>'s pointing to strings of different lengths). Anyway, here is the result. The grid used in this example was \"borrowed\" from <a href=\"http://thewordsearch.com/puzzle/9/types-of-dog/\" rel=\"nofollow\">Types of Dog Word Search</a>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstatic void findword(const char *word, const char *grid, int rows, int cols)\n{\n    int len = strlen(word);\n    int xdir, ydir, xstart, ystart, xend, yend, xpos, ypos, pos, step, i;\n\n    for (xdir = -1; xdir &lt;= 1; xdir++) {\n        xstart = xdir &lt; 0 ? len - 1 : 0;\n        xend = xdir &gt; 0 ? cols - len : cols - 1;\n        if (xend &lt; xstart)\n            continue;\n        for (ydir = -1; ydir &lt;= 1; ydir++) {\n            if (ydir == 0 &amp;&amp; xdir == 0)\n                continue;\n            ystart = ydir &lt; 0 ? len - 1 : 0;\n            yend = ydir &gt; 0 ? rows - len : rows -1;\n            if (yend &lt; ystart)\n                continue;\n            for (xpos = xstart; xpos &lt;= xend; xpos++) {\n                for (ypos = ystart; ypos &lt;= yend; ypos++) {\n                    pos = ypos * cols + xpos;\n                    step = ydir * cols + xdir;\n                    for (i = 0; i &lt; len; i++) {\n                        if (word[i] != grid[pos])\n                            break;\n                        pos += step;\n                    }\n                    if (i == len) {\n                        printf(\"Found %s at row %d, column %d, dir %s%s\\n\",\n                                word, ypos + 1, xpos + 1,\n                                ydir &lt; 0 ? \"north\" : ydir &gt; 0 ? \"south\" : \"\",\n                                xdir &lt; 0 ? \"west\" : xdir &gt; 0 ? \"east\" : \"\");\n                    }\n                }\n            }\n        }\n    }\n}\n\n#define GRID_COLS 14\n#define GRID_ROWS (sizeof(wordgrid) / sizeof(wordgrid[0]))\n\nstatic const char wordgrid[][GRID_COLS] = {\n    \"ESULBULLDOGHER\",\n    \"EDHISHLSRUDSRE\",\n    \"IARELIEWTTORRE\",\n    \"RLGTLAEITCORGI\",\n    \"EMRDERIISLEPCF\",\n    \"HARSCANHHHLEHF\",\n    \"CTREDOETOEGBII\",\n    \"SIETLPLUHEATHT\",\n    \"NAITHXNLAUECUS\",\n    \"INRELDEEIBBOAA\",\n    \"PNRREOADREHGHM\",\n    \"UDEAAERHIAFRUI\",\n    \"BRTOBOXERHTSAI\",\n    \"LELAMSLRLHUDRL\"\n};\n\n#define NUM_WORDS (sizeof(words) / sizeof(words[0]))\n\nstatic const char * const words[] = {\n    \"CHIHUAHUA\", \"BULLDOG\", \"TERRIER\", \"COLLIE\", \"SHEPHERD\", \"BOXER\",\n    \"HOUND\", \"BEAGLE\", \"CORGI\", \"ROTTWEILER\", \"PINSCHER\", \"DALMATIAN\",\n    \"SETTER\", \"MASTIFF\"\n};\n\nint main(void)\n{\n    int i;\n\n    printf(\"Grid:\\n\\n\");\n    for (i = 0; i &lt; GRID_ROWS; i++)\n        printf(\"%.*s\\n\", GRID_COLS, wordgrid[i]);\n    printf(\"\\n\");\n    for (i = 0; i &lt; NUM_WORDS; i++) {\n        printf(\"*** Looking for %s ***\\n\", words[i]);\n        findword(words[i], &amp;wordgrid[0][0], GRID_ROWS, GRID_COLS);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>There are probably more efficient algorithms, such as searching the grid for the first letter of the word and then checking the eight directions for the remaining letters of the word (with impossible directions filtered out according to grid position and word length).</p>\n"}], "owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1449643421, "accepted_answer_id": 34063196, "answer_count": 2, "score": 1, "last_activity_date": 1449137644, "creation_date": 1449070705, "last_edit_date": 1449070899, "question_id": 34046752, "link": "https://stackoverflow.com/questions/34046752/finding-a-pattern-in-a-matrix-in-any-order", "closed_reason": "Needs more focus", "title": "Finding a pattern in a matrix in any order?", "body": "<p>This is a question which I worked upon. The target was to find pattern in a two dimensional matrix of letters. The catch is that I should be able to find the pattern even if it occurs</p>\n\n<ol>\n<li>across rows</li>\n<li>across columns</li>\n<li>along the</li>\n</ol>\n\n<p>diagonals.</p>\n\n<p>Let the matrix be</p>\n\n<pre><code>A B C D\nE F G H\nI J K L\nM N O P\n</code></pre>\n\n<p>I wrote a C program by taking the matrix as an an array of character pointers and used the substring (<code>strstr</code>) to find the pattern. I partially succeeded. I was able to look for any substring which occurs continously in the linearized matrix.But then I hit the roadblock with the diagonal elements and cross elements. By cross elements I mean</p>\n\n<pre><code>A  \nB E  \nI F C etc.\n</code></pre>\n\n<p>I am sure that some algorithm will be there which will do a brute force to find out any pattern in a simple 2D matrix. But I am not able to conceive it after hours of struggle.</p>\n\n<p>Please suggest a method to approach this issue in C. I know using scripting and text based approach this will be an easy one, but I am looking for a algo which can be implemented in C.</p>\n\n<p>p.s This is no home work problem or work assignment. I am curious to know   that's all.</p>\n"}, {"tags": ["c++", "c", "filesystems", "hex", "osdev"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1449069619, "post_id": 34046348, "comment_id": 55847270, "body": "Please post the relevant code inline as text and not as links"}, {"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1449069651, "post_id": 34046348, "comment_id": 55847290, "body": "@EdChum okay,I will in a sec"}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 3, "creation_date": 1449069938, "post_id": 34046348, "comment_id": 55847518, "body": "&quot;I need to convert to decimal,because parsing the super block requires all values to be in decimal.&quot; I think you are at a very wron level of abstraction. I don&#39;t think you need to parse or convert anything here. Just take the values as they are, maybe combine them to form values longer than 1 byte. But I really don&#39;t see the need for conversion to or drom text."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449070353, "post_id": 34046348, "comment_id": 55847863, "body": "Where is the target <code>00 00 01</code> in the code?"}, {"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449070422, "post_id": 34046348, "comment_id": 55847918, "body": "@MikeCAT it&#39;s meant to be generic,but that is in a 1GB hard drive image,so I figured it would be too big to post"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449070552, "post_id": 34046348, "comment_id": 55848013, "body": "OK, you are asking how to implement <code>hex2dec</code>, right?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 2, "creation_date": 1449070902, "post_id": 34046348, "comment_id": 55848259, "body": "@ZachS If you think that e.g. <code>int x = 4711;</code> somehow puts a &quot;decimal&quot; value in <code>x</code>, I believe you&#39;re way into the deep end writing an operating system and a file system driver. That&#39;s just not true, and your question makes little sense (as pointed out by @glglgl). Converting four packed bytes into an integer has nothing to do with &quot;converting hex to decimal&quot;."}, {"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1449071276, "post_id": 34046348, "comment_id": 55848499, "body": "@unwind Firstly the four packed bytes are in hexadecimal format when read into the string from my ata reader,secondly I Know that integers are positive and negative numbers,and pointers point to memory,etc. Secondly I never thought that it was a decimal value. I just need to convert  from the character pointer to an integer. for example on the ext2 superblock the 1st 3 bytes are made to point the number of inodes in the system,but they are in hexadecimal format. They are read into my string as char str[] = {0x00,0x00,0x01}. I need to get that to decimal format or at least int"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1449071616, "post_id": 34046348, "comment_id": 55848758, "body": "@ZachS That is raw binary data, it is not in hexadecimal format, that is just a property of how you happen to view the data. <code>char str[] = { 0, 0, 1 };</code> is the exact same data but in decimal."}, {"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1449071730, "post_id": 34046348, "comment_id": 55848866, "body": "@unwind But that&#39;s not how I want it. I need all of the characters &quot;combined&quot; to be 10000. That&#39;s where the problem arises. I know I can express string like that,but I need some way to read all in put it into a single char or int."}], "answers": [{"comments": [{"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "edited": false, "score": 0, "creation_date": 1449070679, "post_id": 34046730, "comment_id": 55848114, "body": "I don&#39;t have access to a c library"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "edited": false, "score": 1, "creation_date": 1449070729, "post_id": 34046730, "comment_id": 55848147, "body": "Most modern compilers, including those for embedded systems, have these kinds of libraries."}, {"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "edited": false, "score": 0, "creation_date": 1449071605, "post_id": 34046730, "comment_id": 55848746, "body": "And the hex text is not so much of a string if it where written as a string it would look like &quot;\\0\\0\\1&quot; . However I am thinking of putting it into a string,but I will do that when i&#39;m at home"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "edited": false, "score": 0, "creation_date": 1449071725, "post_id": 34046730, "comment_id": 55848860, "body": "Are you trying to convert one or more bytes to a larger hex value?  If so, what is the byte ordering, Big Endian or Little Endian?"}, {"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "edited": false, "score": 0, "creation_date": 1449071830, "post_id": 34046730, "comment_id": 55848949, "body": "I believe it is little endian but when I get home i&#39;ll make sure"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1449071081, "last_edit_date": 1449071081, "creation_date": 1449070638, "answer_id": 34046730, "question_id": 34046348, "link": "https://stackoverflow.com/questions/34046348/convert-string-of-hexadecimal-to-decimal-in-c/34046730#34046730", "title": "Convert string of hexadecimal to decimal in c", "body": "<p>You can use <code>std::istringstream</code> or <code>sscanf</code> instead of writing your own.</p>\n\n<pre><code>char const * hex_text[] = \"0x100\";\nconst std::string hex_str(hex_text);\nstd::istringstream text_stream(hex_str);\nunsigned int value;\ntext_stream &gt;&gt; std::ios::hex &gt;&gt; value;\nstd::cout &lt;&lt; \"Decimal value of 0x100: \" &lt;&lt; value &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Or using <code>sscanf</code>:</p>\n\n<pre><code>sscanf(hex_text, \"0x%X\", &amp;value);\nstd::cout &lt;&lt; \"Decimal value of 0x100: \" &lt;&lt; value &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>A good idea is to search your C++ reference for existing functions or search the internet, before writing your own. </p>\n\n<p>To roll your own:</p>\n\n<pre><code>unsigned int hex2dec(const std::string&amp; hex_text)\n{\n  unsigned int value = 0U;\n  const unsigned int length = hex_text.length();\n  for (unsigned int i = 0; i &lt; length; ++i)\n  {\n    const char c = hex_text[i];\n    if ((c &gt;= '0') &amp;&amp; (c &lt;= '9'))\n    {\n       value = value * 16 + (c - '0');\n    }\n    else\n    {\n      c = toupper(c);\n      if ((c &gt;= 'A') &amp;&amp; (c &lt;= 'Z'))\n      {\n         value = value * 16 + (c - 'A') + 10;\n      }\n    }\n  }\n  return value;\n}\n</code></pre>\n\n<p>To convert to use C-style character strings, change the parameter type and use <code>strlen</code> for the length.  </p>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "edited": false, "score": 0, "creation_date": 1449071886, "post_id": 34047175, "comment_id": 55848999, "body": "Thank you i&#39;ll try that when I get home"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1449071805, "creation_date": 1449071805, "answer_id": 34047175, "question_id": 34046348, "link": "https://stackoverflow.com/questions/34046348/convert-string-of-hexadecimal-to-decimal-in-c/34047175#34047175", "title": "Convert string of hexadecimal to decimal in c", "body": "<p>If you have this:</p>\n\n<pre><code>const uint8_t bytes[] = { 0, 0, 1 };\n</code></pre>\n\n<p>and you want to consider that the bytes of a (24-bit) unsigned integer in little-endian order, you can convert to the actual integer using:</p>\n\n<pre><code>const uint32_t value = ((uint32_t) bytes[2] &lt;&lt; 16) | (bytes[1] &lt;&lt; 8) | bytes[0];\n</code></pre>\n\n<p>This will set <code>value</code> equal to 65536.</p>\n"}], "owner": {"reputation": 66, "user_id": 5619274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbbecc530b3d9ca9d74d65aef16fa2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach S", "link": "https://stackoverflow.com/users/5619274/zach-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1154, "favorite_count": 0, "accepted_answer_id": 34047175, "answer_count": 2, "score": -2, "last_activity_date": 1449071805, "creation_date": 1449069587, "last_edit_date": 1449069938, "question_id": 34046348, "link": "https://stackoverflow.com/questions/34046348/convert-string-of-hexadecimal-to-decimal-in-c", "title": "Convert string of hexadecimal to decimal in c", "body": "<p>I am writing an operating system in C and assembly, and in implementing the EXT2 file system I have encountered a problem. I need to convert FOUR bytes of hexadecimal to decimal in c. An example would be to convert <code>00 00 01</code>(<code>10000</code>) to <code>65536</code>.I need to convert to decimal,because parsing the super block requires all values to be in decimal. Most specifically the ext2 fs I'm working on is here:<br></p>\n\n<pre><code>#include \"ext2.h\"\n#include &lt;stdlib.h&gt;\nlong hex2dec(unsigned const char *hex){\nlong ret = 0;\nint i = 0;\nwhile(hex[i] != 0){\n    //if(hex[i] &gt;= 0x00 &amp;&amp; hex[i] &lt;= 0x09)\n    //  ret+=(10 * i) * hex[i];\n}\n//kprintf(\"\\n\");\nreturn ret;\n}\nchar *strsep(char *buf,int offset,int num){\nchar *ret = malloc(1024);\nint j = 0;\nint i = offset;\nint end = (offset + num);\nint i1 = 0;\nwhile(i1 &lt; num){\n    ///kstrcat(ret,&amp;buf[i]);\n    ret[i1] = buf[i];\n    i++;\n    i1++;\n}\nreturn ret;\n}\nint get_partition(partnum){\nif(partnum &gt; 4)\n    return -1;\n//int i = (12 * partnum);\nint i = 0;\nif(partnum == 1)\n    i = 190;\nelse if(partnum == 2)\n    i = 206;\nelse if(partnum == 3)\n    i = 222;\nelse\n    i = 190;\nint ret = 0;\nchar *buf = malloc(1024);\nata_read_master(buf,1,0x00);\nret = buf[(i + 2)];\nreturn ret;\n}\nint _intlen(int i){\nint ret = 0;\nwhile(i){\n    ret++;\n    i/=10;\n}\nreturn ret;\n}\nint _hex2int(char c){\nif(c == '0')\n    return 0;\nelse if(c == '1')\n    return 1;\nelse if(c == '2')\n    return 2;\nelse if(c == '3')\n    return 3;\n    else if(c == '4')\n            return 4;\n    else if(c == '5')\n            return 5;\n    else if(c == '6')\n            return 6;\n    else if(c == '7')\n            return 7;\n    else if(c == '8')\n            return 8;\n    else if(c == '9')\n            return 9;\n    else if(c == 'A')\n            return 10;\n    else if(c == 'B')\n            return 11;\n    else if(c == 'C')\n            return 12;\n    else if(c == 'D')\n            return 13;\n    else if(c == 'E')\n            return 14;\n    else if(c == 'F')\n            return 15;\n\n\n}\nint hex2int(char c){\nint i = c;\n\n}\nint comb(const char *str,int n){\nint i = 0;\nint ret = 0;\nwhile(i &lt; n){\n    //if(str[i] == 0x01)\n    //  kprintf(\"(:\");\n    /*int j = str[i];\n    int k = 0;\n    int m = 0;\n    if(j &lt; 10)\n        j*=10;\n    else\n        while(j &gt; 0){\n            k+=(10 ^ (_intlen(j) - m)) * j % 10;\n            m++;\n            j/=10;\n        }\n    //kprintf(\"%d\",j);\n    //if(j == 1)\n    //  kprintf(\"(:\");*/\n    i++;\n}\n\n//ret = (char)ret;\nret = (char)str\nint ret = 0;\nint i = 0;\nchar *s = malloc(1024);\n/*while(i &lt; n){\n\n    //kstrcat(s,&amp;((char*)buf[i]));\n    n++;\n}*/\n\nreturn ret;\n//kprintf(\"\\n\");\n//return ret;\n}\nstruct ext2_superblock *parse_sblk(int partnum){\nint i = get_partition(partnum);\nif(i &gt; 0)\n    kprintf(\"[EXT2_SUPERBLOCK]Found partition!\\n\");\nelse\n    i = 0;\nstruct ext2_superblock *ret;\nstruct ext2_superblock retnp;\nchar *buf = malloc(1024);\nint i1 = 0;\n//char *tmpbuf = malloc(4);\n/*if(i != 0)\n    ata_read_master(buf,((i * 4)/256),0x00);\nelse{\n    kprintf(\"[WRN]: Looking for superblock at offset 1024\\n\");\n    ata_read_master(buf,4,0x00);\n}*/\nata_read_master(buf,2,0x00);\nconst char *cmp = strsep(buf,0,4);\n\n\nretnp.ninode = comb(strsep(buf,0,4),4);\n\n    retnp.nblock = comb(strsep(buf,4,4),4);\n    retnp.nsblock = comb(strsep(buf,8,4),4);\n    retnp.nunallocb = comb(strsep(buf,12,4),4);\n    retnp.nunalloci = comb(strsep(buf,16,4),4);\n    retnp.supernum = comb(strsep(buf,20,4),4);\n    retnp.leftshiftbs = comb(strsep(buf,24,4),4);\n    retnp.leftshiftfs = comb(strsep(buf,28,4),4);\n    retnp.numofblockpg= comb(strsep(buf,32,4),4);\n //   retnp.numofffpbg= comb(strsep(buf,36,4));\n    retnp.numoffpbg = comb(strsep(buf,36,4),4);\n    retnp.numofinpbg = comb(strsep(buf,40,4),4);\n    retnp.lastmount = comb(strsep(buf,44,4),4);\n    retnp.lastwrite = comb(strsep(buf,48,4),4);\n    retnp.fsckpass = comb(strsep(buf,52,2),2);\n    retnp.fsckallow = comb(strsep(buf,54,2),2);\n    retnp.sig = comb(strsep(buf,56,2),2);\n    retnp.state = comb(strsep(buf,58,2),2);\n    retnp.erroropp = comb(strsep(buf,60,2),2);\n    retnp.minorpor = comb(strsep(buf,52,2),2);\n    retnp.ptimefsck = comb(strsep(buf,64,4),4);\n    retnp.inter = comb(strsep(buf,68,4),4);\n    retnp.osid = comb(strsep(buf,72,4),4);\nretnp.mpv = comb(strsep(buf,76,4),4);\n    retnp.uid = comb(strsep(buf,80,2),2);\nretnp.gid = comb(strsep(buf,82,2),2);\nret = &amp;retnp;\nreturn ret;\ni1 = 0;\n\n\n}\n</code></pre>\n\n<p>If there is anyway of avoiding conversion and successfully implementing ext2 I would be glad to hear it.  I would prefer it to be in c,but assembly is also okay.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31066, "user_id": 2704659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wObcB.jpg?s=128&g=1", "display_name": "rory.ap", "link": "https://stackoverflow.com/users/2704659/rory-ap"}, "edited": false, "score": 2, "creation_date": 1449069400, "post_id": 34046259, "comment_id": 55847080, "body": "What&#39;s the matter with what you have?  Is it not working in some way?  Please elaborate."}, {"owner": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "reply_to_user": {"reputation": 31066, "user_id": 2704659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wObcB.jpg?s=128&g=1", "display_name": "rory.ap", "link": "https://stackoverflow.com/users/2704659/rory-ap"}, "edited": false, "score": 0, "creation_date": 1449069496, "post_id": 34046259, "comment_id": 55847167, "body": "The will not compile, it has 2 errors. One is missing type specifier - int assumed. Note:C++ does not support default-int. Second error is &#39;FILE&#39; <i>fopen(const char *,char *)&#39;: cannot convert argument 1 from FILE *&#39; to &#39;const char</i>&#39;"}, {"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1449069499, "post_id": 34046259, "comment_id": 55847169, "body": "<code>scanf(&quot;%s&quot;, &amp;Filename;</code> is missing a <code>)</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1449069540, "post_id": 34046259, "comment_id": 55847207, "body": "Besides the obvious syntax error you have, please tell us what&#39;s wrong with the program. Does it give build errors? Run-time error or crashes? Produce the wrong results or output? You may want to <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1449069700, "post_id": 34046259, "comment_id": 55847328, "body": "So you are actually programming in C++, and not C? Then you should edit your question to set the correct language tag. Also include the actual, complete and unedited errors in the question body."}, {"owner": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "edited": false, "score": 0, "creation_date": 1449070104, "post_id": 34046259, "comment_id": 55847651, "body": "Sorry if i have posted the question wrong, i&#39;m knew to the site, just need a little help. I cant add the errors in the question as i am on a different pc that what the code is on"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "edited": false, "score": 0, "creation_date": 1449070192, "post_id": 34046378, "comment_id": 55847737, "body": "Thank you for answering. This might be a silly question but can i ask why you have put the number 1023 in with the %s"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "edited": false, "score": 0, "creation_date": 1449070244, "post_id": 34046378, "comment_id": 55847776, "body": "To limit the length to read to 1023 (1024 - 1 for terminating null character) in order to reduce risk of buffer overrun."}, {"owner": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "edited": false, "score": 0, "creation_date": 1449070570, "post_id": 34046378, "comment_id": 55848031, "body": "Ok thank you. When I go to run this code and enter the file name, an error message pops up saying &#39;project1 has stopped working&#39; is this an error with my code or the program not working"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "edited": false, "score": 0, "creation_date": 1449070652, "post_id": 34046378, "comment_id": 55848091, "body": "Fmmmm... This code works well on <a href=\"http://melpon.org/wandbox/permlink/EK81kUx23K9Qyzwg\" rel=\"nofollow noreferrer\">Wandbox</a>."}, {"owner": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "edited": false, "score": 0, "creation_date": 1449070720, "post_id": 34046378, "comment_id": 55848142, "body": "Okay never mind, Thank you for your help. Im using visual studio 2015 btw"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1449069683, "creation_date": 1449069683, "answer_id": 34046378, "question_id": 34046259, "link": "https://stackoverflow.com/questions/34046259/i-need-to-create-a-program-that-promts-the-user-for-the-name-of-two-input-files/34046378#34046378", "title": "I need to create a program that promts the user for the name of two input files to be read. It then read in the files and display statistics", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main (void) /* you had better specify the return value explicitly */\n{\n FILE *textfile1;\n FILE *textfile2;\n\n int c;\n char Filename[1024]; /* allocate enough buffer to store the name */\n char textfiledata1; /* add this to store the data from file */\n\n printf(\"Enter the name of text file:\");\n scanf(\"%1023s\", Filename); /* add ), and other change including limit of length to read to avoid buffer overrun */\n\n textfile1 = fopen(Filename, \"r\"); /* you have to pass the name. Do not pass the uninitialized file pointer! */\n if (textfile1 == NULL)\n {\n  printf(\"File not found\");\n }\n else\n {\n  while (fscanf(textfile1, \"%c\", &amp;textfiledata1) == 1) /* store the data from file to the file pointer? nonsense. */\n  {\n   printf(\"%c\", textfiledata1);\n  }\n  fclose(textfile1);\n }\n return 0; /* explicitly return something is a good practice */\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5630924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bded6fab1a4743219614915118774c?s=128&d=identicon&r=PG&f=1", "display_name": "benjohnson29", "link": "https://stackoverflow.com/users/5630924/benjohnson29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1449069683, "creation_date": 1449069364, "last_edit_date": 1449069422, "question_id": 34046259, "link": "https://stackoverflow.com/questions/34046259/i-need-to-create-a-program-that-promts-the-user-for-the-name-of-two-input-files", "title": "I need to create a program that promts the user for the name of two input files to be read. It then read in the files and display statistics", "body": "<p>This is the code that I currently have but it doesn't seem to compile. Any help would be very much appreciated. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nmain (void)\n{\n  FILE *textfile1;\n  FILE *textfile2;\n\n  int c;\n  char Filename;\n\n  printf(\"Enter the name of text file:\");\n  scanf(\"%s\", &amp;Filename;\n\n  textfile1 = fopen(textfile1, \"r\");\n  if (textfile1 == NULL)\n  {\n    printf(\"File not found\");\n  }\n  else\n  {\n    while (fscanf(textfile1, \"%c\", &amp;textfile1) == 1)\n   {\n     printf(\"%c\", textfile1);\n    }\n    fclose(textfile1);\n    }\n   }\n</code></pre>\n"}, {"tags": ["c", "mkdir"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5630937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1524282585bfe5202b351dfe376f1996?s=128&d=identicon&r=PG&f=1", "display_name": "GGWP", "link": "https://stackoverflow.com/users/5630937/ggwp"}, "edited": false, "score": 0, "creation_date": 1449069521, "post_id": 34046247, "comment_id": 55847189, "body": "Actually I just type it wrong in a question. In compiled code i have <code>if(!mkdir) if(chdir) error else error</code> And I still have an issue"}, {"owner": {"reputation": 13, "user_id": 5630937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1524282585bfe5202b351dfe376f1996?s=128&d=identicon&r=PG&f=1", "display_name": "GGWP", "link": "https://stackoverflow.com/users/5630937/ggwp"}, "edited": false, "score": 0, "creation_date": 1449069725, "post_id": 34046247, "comment_id": 55847353, "body": "I GOT IT. The problem was in else priority. Compiler thinks else statement belongs to the second scoped IF statement."}], "tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 2, "last_activity_date": 1449069653, "last_edit_date": 1449069653, "creation_date": 1449069334, "answer_id": 34046247, "question_id": 34046133, "link": "https://stackoverflow.com/questions/34046133/error-handling-mkdir-and-chdir-in-c/34046247#34046247", "title": "error handling mkdir and chdir in C?", "body": "<p>According to <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/mkdir.html\" rel=\"nofollow\">the documentation of <code>mkdir</code></a>:</p>\n\n<blockquote>\n  <p>Upon successful completion, mkdir() shall return 0. Otherwise, -1 shall be returned, no directory shall be created, and errno shall be set to indicate the error.</p>\n</blockquote>\n\n<p>Now, remember, in C <code>0</code> evaluates to <code>false</code>, non-zero evaluates to <code>true</code>. So, when you check <code>if( mkdir( ... ) )</code> you are essentially asking if <code>mkdir</code> returned non-zero. And -1 is non-zero, so you are asking whether <code>mkdir()</code> failed, not whether <code>mkdir()</code> succeeded.</p>\n\n<p>What you want to do instead is <code>if( mkdir ( ... ) == 0 )</code>.</p>\n\n<p>Also, in the event of failure, you have no reason to suppose that the reason of the failure was an \"access denied\" error.  Check <code>errno</code> and report the correct error accordingly.</p>\n"}, {"tags": [], "owner": {"reputation": 6841, "user_id": 3960399, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c5OVT.jpg?s=128&g=1", "display_name": "Frank Bryce", "link": "https://stackoverflow.com/users/3960399/frank-bryce"}, "is_accepted": false, "score": 3, "last_activity_date": 1449069779, "creation_date": 1449069779, "answer_id": 34046413, "question_id": 34046133, "link": "https://stackoverflow.com/questions/34046133/error-handling-mkdir-and-chdir-in-c/34046413#34046413", "title": "error handling mkdir and chdir in C?", "body": "<p>It looks like you need curly braces around the <code>if</code> statement bodies so that the <code>else</code> is bound to the correct <code>if</code> statement.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1449070864, "creation_date": 1449070864, "answer_id": 34046817, "question_id": 34046133, "link": "https://stackoverflow.com/questions/34046133/error-handling-mkdir-and-chdir-in-c/34046817#34046817", "title": "error handling mkdir and chdir in C?", "body": "<p>As correctly diagnosed by John Carpenter, the <code>else</code> relates to the second <code>if</code>.  Use braces to avoid this bug known as the dangling else issue.</p>\n\n<p>There is another issue in your code: under Linux or BSD, the prototype for <code>mkdir</code> is:</p>\n\n<pre><code>#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n\nint mkdir(const char *path, mode_t mode);\n</code></pre>\n\n<p>Do you include the system header files?</p>\n\n<p>Not passing proper permissions, such as <code>0777</code> invokes undefined behavior, the syscall wrapper will pass indeterminate permissions, creating the directory with inconsistent permissions.</p>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>const char *dirName = \"Output\";\n\nif (!mkdir(dirName, 0777)) {\n    if (chdir(dirName)) {\n        printf(\"Permission to open a new directory is denied\");\n    }\n} else {\n    printf(\"Permission to create a new directory is denied\");\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5630937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1524282585bfe5202b351dfe376f1996?s=128&d=identicon&r=PG&f=1", "display_name": "GGWP", "link": "https://stackoverflow.com/users/5630937/ggwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2289, "favorite_count": 1, "accepted_answer_id": 34046817, "answer_count": 3, "score": 1, "last_activity_date": 1449070864, "creation_date": 1449069051, "last_edit_date": 1449069941, "question_id": 34046133, "link": "https://stackoverflow.com/questions/34046133/error-handling-mkdir-and-chdir-in-c", "title": "error handling mkdir and chdir in C?", "body": "<p>I do not understand why after creating directory <strong>mkdir</strong> return different values. In this example i'm trying to make a directory <strong><em>if not</em></strong> so error handle <strong><em>otherwise</em></strong> go to this directory <strong><em>if not</em></strong> so error handle.</p>\n\n<p>But it's not working as I want!\nIt shows me 'failed to create' but actually creates the directory.\nIf I read reference right it returns 0 when successes.</p>\n\n<p><em>Code:</em></p>\n\n<pre><code>    char* dirName = \"Output\";\n    FILE *output;\n\n    if(!mkdir(dirName))\n        if(chdir(dirName))\n            printf(\"Permission to open a new directory is denied\");\n    else\n        printf(\"Permission to create a new directory is denied\");\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1449068992, "post_id": 34045853, "comment_id": 55846762, "body": "There are several rather odd things about your code, some of them surely flaws, but likely the one that is causing the trouble you asked about is your failure to ensure that the merged string has a terminator (for which you must also ensure space is allocated)."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1449072259, "post_id": 34045853, "comment_id": 55849277, "body": "Why do you re-implement <code>strlen()</code>? That&#39;s just insane. if you have <code>malloc()</code>, you surely have <code>strlen()</code>. Aargh. Also, <a href=\"http://stackoverflow.com/a/605858/28169\">please don&#39;t cast the return value of <code>malloc()</code> in C</a>."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1449080944, "post_id": 34045853, "comment_id": 55855048, "body": "I&#39;m kinda new to C, and I get to know new methods and stuff every day.. I&#39;m not sure my lecturer told me about strlen().. but he saw my code and he didnt tell me anything about it.. in fact he wrote a similar function.. John, could you please tell me what else is bad in the code? I like to improve :)"}], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 791790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d18669533b0e47423691a7ca8fb38bce?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/791790/peter"}, "edited": false, "score": 0, "creation_date": 1449073042, "post_id": 34047266, "comment_id": 55849825, "body": "Your method checkNumberOfChars works fine but, like @unwind suggested, you could use the C library function size_t strlen(const char *str) like this <code>stringToReturn = (char *)malloc(strlen(text1) + strlen(text2) + 1);</code> Just make sure to include the library <code>#include &lt;string.h&gt;</code> in bohan.c."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1449081212, "post_id": 34047266, "comment_id": 55855198, "body": "Thanks for the answer. What does stringToReturn = &#39;\\0&#39; do? dont I need to add it somehow like this: *stringToReturn = &#39;\\0&#39; ?"}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1449082710, "post_id": 34047266, "comment_id": 55856020, "body": "It now works, but adds garbage at the end of the string.. when I added a * before the stringToReturn = &#39;\\0&#39; it worked and printed it just right"}, {"owner": {"reputation": 213, "user_id": 791790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d18669533b0e47423691a7ca8fb38bce?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/791790/peter"}, "reply_to_user": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 1, "creation_date": 1449152433, "post_id": 34047266, "comment_id": 55889615, "body": "yes, it should be <code>*stringToReturn=&#39;\\0&#39;</code>. It adds the null terminator at the end of the string. It basically marks where the string ends. The string begins at the address specified by beginOfStringToReturn and ends where the null terminator &#39;\\0&#39; is encountered. That is why <code>printf(&quot;%s \\n&quot;, mergedString);</code> is able to print the string. You provide it the start address mergedString and it will print the content until the null terminator &#39;\\0&#39; is encountered."}], "tags": [], "owner": {"reputation": 213, "user_id": 791790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d18669533b0e47423691a7ca8fb38bce?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/791790/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1449152684, "last_edit_date": 1449152684, "creation_date": 1449072059, "answer_id": 34047266, "question_id": 34045853, "link": "https://stackoverflow.com/questions/34045853/error-reading-characters-of-string-c-visual-studio-2013/34047266#34047266", "title": "&quot;Error reading characters of string&quot; C, Visual Studio 2013", "body": "<p>In the merge_strings method you must define a pointer (beginOfStringToReturn) to hold the address of the beginning of the merged string. The merge_strings method should return this pointer at the end. Also add '\\0' after the merged string has been built.</p>\n\n<pre><code>char* merge_strings(char* text1, char* text2) {\nint i;\nint hasChanged;\nchar* stringToReturn;\nif (text1 == NULL &amp;&amp; text2 == NULL)\n    return NULL;\nstringToReturn = (char *)malloc(checkNumberOfChars(text1) + checkNumberOfChars(text2) + 1);\nchar* beginOfStringToReturn = stringToReturn;\nif (stringToReturn == NULL)\n    return NULL;\nfor (i = 1; i &lt;= MAX_ASCII; i++) {\n    hasChanged = FALSE;\nif (*text1 != '\\0' || *text2 != '\\0') {\n    if (*text1 != '\\0') {\n        if (i == *text1) {\n            *stringToReturn = i;\n            stringToReturn++;\n            hasChanged = TRUE;\n            while (*text1 == i)\n                text1++;\n        }\n    }\n    if (*text2 != '\\0') {\n        if (i == *text2) {\n            if (!hasChanged) {\n            *stringToReturn = i;\n            stringToReturn++;\n            }\n            while (*text2 == i)\n                text2++;\n        }\n    }\n}\nelse\n    break;\n}\n*stringToReturn = '\\0';\nreturn beginOfStringToReturn;\n}\n</code></pre>\n\n<p>In bohan.h include the guard like this:</p>\n\n<pre><code>#ifndef BOHAN_H\n#define BOHAN_H\n#define TRUE 1\n#define FALSE 0\n#define MAX_TEXT 100\n#define MAX_ASCII 255\n\nint checkNumberOfChars(char *text);\nchar *merge_strings(char *text1, char *text2);\n\n#endif\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4461, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449152684, "creation_date": 1449068299, "question_id": 34045853, "link": "https://stackoverflow.com/questions/34045853/error-reading-characters-of-string-c-visual-studio-2013", "title": "&quot;Error reading characters of string&quot; C, Visual Studio 2013", "body": "<p>Ive been asked to write a function that merges two sorted (ascii sorted) strings without duplicates.\nFor example, for string1 = aabcd, and string2 = abbcdg, the end result string should be abcdg.\nFor some reason, the end result string doesnt allocate well, or so I think.. its not working anyway and its giving me weird characters instead of what its supposed to give.\nThe value of stringToReturn is always 0xfffffffe \"Error reading characters of string\", and inside it says \"Unable to read memory\"</p>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"bohan.h\"\n\nint main() {\nchar* string1;\nchar* string2;\nchar* mergedString;\nstring1 = (char*)malloc(MAX_TEXT + 1);\nif (string1 == NULL)\n    return;\nstring2 = (char*)malloc(MAX_TEXT + 1);\nif (string2 == NULL)\n    return;\nprintf(\"Please enter string no. 1: \");\nscanf(\"%s\", string1);\nprintf(\"Please enter string no. 2: \");\nscanf(\"%s\", string2);\nmergedString = merge_strings(string1, string2);\nprintf(\"%s \\n\", mergedString);\n\nfree(string1);\nfree(string2);\nfree(mergedString);\n}\n</code></pre>\n\n<p>bohan.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"bohan.h\"\n\nint checkNumberOfChars(char* text) {\nint sum = 0;\nif (text == NULL)\n    return 0;\nwhile (*text != '\\0')\n{\n    sum++;\n    text++;\n}\nreturn sum;\n}\n\nchar* merge_strings(char* text1, char* text2) {\nint i;\nint hasChanged;\nchar* stringToReturn;\nif (text1 == NULL &amp;&amp; text2 == NULL)\n    return NULL;\nstringToReturn = (char *)malloc(checkNumberOfChars(text1) + checkNumberOfChars(text2) + 1);\nif (stringToReturn == NULL)\n    return NULL;\nfor (i = 1; i &lt;= MAX_ASCII; i++) {\n    hasChanged = FALSE;\n    if (*text1 != '\\0' || *text2 != '\\0') {\n        if (*text1 != '\\0') {\n            if (i == *text1) {\n                *stringToReturn = i;\n                stringToReturn++;\n                hasChanged = TRUE;\n                while (*text1 == i)\n                    text1++;\n            }\n        }\n        if (*text2 != '\\0') {\n            if (i == *text2) {\n                if (!hasChanged) {\n                *stringToReturn = i;\n                stringToReturn++;\n                }\n                while (*text2 == i)\n                    text2++;\n            }\n        }\n    }\n    else\n        break;\n}\nreturn stringToReturn;\n}\n</code></pre>\n\n<p>bohan.h:</p>\n\n<pre><code>#ifndef DEF\n#define TRUE 1\n#define FALSE 0\n#define MAX_TEXT 100\n#define MAX_ASCII 255\n\nint checkNumberOfChars(char *text);\nchar *merge_strings(char *text1, char *text2);\n\n#endif DEF\n</code></pre>\n"}, {"tags": ["c", "parameters"], "comments": [{"owner": {"reputation": 2501, "user_id": 450000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f522ea287d08a156b51d3d75ad1eb2?s=128&d=identicon&r=PG", "display_name": "greggo", "link": "https://stackoverflow.com/users/450000/greggo"}, "edited": false, "score": 0, "creation_date": 1449068005, "post_id": 34045707, "comment_id": 55846003, "body": "Not quite sure what you&#39;re asking. But the answer may be <code>.&#47;server -p 1234 &amp; .&#47;client -p 1234 -h asdffdsasdf</code> which runs them concurrently. Unless windows."}, {"owner": {"reputation": 5, "user_id": 4981540, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152895946137011/picture?type=large", "display_name": "J&#250;l&#237;us G&#237;slason", "link": "https://stackoverflow.com/users/4981540/j%c3%bal%c3%adus-g%c3%adslason"}, "reply_to_user": {"reputation": 2501, "user_id": 450000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f522ea287d08a156b51d3d75ad1eb2?s=128&d=identicon&r=PG", "display_name": "greggo", "link": "https://stackoverflow.com/users/450000/greggo"}, "edited": false, "score": 0, "creation_date": 1449068251, "post_id": 34045707, "comment_id": 55846215, "body": "No I&#39;m asking about what I need to do so I can run it with parameters, how do I create that..  Now I can open 2x putties and do ./server in one of them and then ./client in the other..  And get a response of what I want. But at the moment there is a fixed port number.  Somehow I must incorperate it so that I will do ./server -p XXXX So my server runs on port XXXX,  To connect to it I must do the same for client ./client -p XXXX  So I get the correct response back."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4981540, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152895946137011/picture?type=large", "display_name": "J&#250;l&#237;us G&#237;slason", "link": "https://stackoverflow.com/users/4981540/j%c3%bal%c3%adus-g%c3%adslason"}, "edited": false, "score": 0, "creation_date": 1449068394, "post_id": 34045814, "comment_id": 55846324, "body": "This will also work with multiple parameters? even if I would have a list of 5 different ones?  Thanks!"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 5, "user_id": 4981540, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152895946137011/picture?type=large", "display_name": "J&#250;l&#237;us G&#237;slason", "link": "https://stackoverflow.com/users/4981540/j%c3%bal%c3%adus-g%c3%adslason"}, "edited": false, "score": 0, "creation_date": 1449068482, "post_id": 34045814, "comment_id": 55846394, "body": "Yes, it works with how many parameters you need. Just check <code>argc</code> before accessing <code>argv</code>."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 4, "last_activity_date": 1449068160, "creation_date": 1449068160, "answer_id": 34045814, "question_id": 34045707, "link": "https://stackoverflow.com/questions/34045707/c-run-program-with-parameters-such-as-prog-p-8888/34045814#34045814", "title": "C - Run program with parameters such as ./prog -p 8888", "body": "<p>You need to use program startup arguments; see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1\" rel=\"nofollow\">Standard 5.1.2.2.1</a>.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;string.h&gt;\nint main(int argc, char **argv) {\n    if (argc &gt;= 2) {\n        if (strcmp(argv[1], \"-p\") == 0) /* -p detected */;\n    }\n    return 0;\n}\n</code></pre>\n\n<p><em><sup>TLDR: just read the title</sup></em></p>\n"}], "owner": {"reputation": 5, "user_id": 4981540, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152895946137011/picture?type=large", "display_name": "J&#250;l&#237;us G&#237;slason", "link": "https://stackoverflow.com/users/4981540/j%c3%bal%c3%adus-g%c3%adslason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34045814, "answer_count": 1, "score": 0, "last_activity_date": 1449070443, "creation_date": 1449067818, "last_edit_date": 1449070443, "question_id": 34045707, "link": "https://stackoverflow.com/questions/34045707/c-run-program-with-parameters-such-as-prog-p-8888", "title": "C - Run program with parameters such as ./prog -p 8888", "body": "<p>So I'm doing communication between server and client in C. I'm having issues with searching for it on the web how to do the following.</p>\n\n<pre><code>./server -p 1234\n./client -p 1234 -h asdffdsasdf\n</code></pre>\n\n<p>Can someone describe the basics of doing it inside the project or is it included in the Makefile??(Using Putty terminal).</p>\n\n<p>Or show me a website where it is explained very well, because I dont know what to google for this.</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1449067856, "post_id": 34045699, "comment_id": 55845877, "body": "Try using hex editor or <code>od -Ax -t x1 filename</code> command to check the content of the file."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449068865, "post_id": 34045699, "comment_id": 55846681, "body": "By the way, what is your question?"}, {"owner": {"reputation": 27, "user_id": 2425416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8319c14eafd32fe32b96f0e0ac282572?s=128&d=identicon&r=PG", "display_name": "user2425416", "link": "https://stackoverflow.com/users/2425416/user2425416"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449069096, "post_id": 34045699, "comment_id": 55846840, "body": "Hi,i retrieve this result : 0000000  00 00 00 1e 0000004 after using the command od -Ax -t x1 y.I should retrieve 30 in my file."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449069190, "post_id": 34045699, "comment_id": 55846906, "body": "0x1e = 16+14  = 30, so it seems correct and your machine seems using big endian."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449069331, "post_id": 34045699, "comment_id": 55847026, "body": "Try <code>od -Ax -t d4 y.l</code> or <code>od -Ax -t d1 y.l</code>."}, {"owner": {"reputation": 27, "user_id": 2425416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8319c14eafd32fe32b96f0e0ac282572?s=128&d=identicon&r=PG", "display_name": "user2425416", "link": "https://stackoverflow.com/users/2425416/user2425416"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1449069659, "post_id": 34045699, "comment_id": 55847296, "body": "I retrieve 0000000           30 0000004.But why i didn&#39;t retrieve the valeur 30 in my file.Because when i used :    char str[30] = &quot;This is test&quot;; write(fd,&amp;str,sizeof(str));i retrieve in my file : This is test"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2425416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8319c14eafd32fe32b96f0e0ac282572?s=128&d=identicon&r=PG", "display_name": "user2425416", "link": "https://stackoverflow.com/users/2425416/user2425416"}, "edited": false, "score": 0, "creation_date": 1449072023, "post_id": 34046874, "comment_id": 55849107, "body": "Hi,I tried to add the itoa function to convert the integer to the string but i received this error once i compile:ld: 0711-317 ERROR: Undefined symbol: .itoa ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information."}, {"owner": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "reply_to_user": {"reputation": 27, "user_id": 2425416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8319c14eafd32fe32b96f0e0ac282572?s=128&d=identicon&r=PG", "display_name": "user2425416", "link": "https://stackoverflow.com/users/2425416/user2425416"}, "edited": false, "score": 0, "creation_date": 1449073250, "post_id": 34046874, "comment_id": 55849987, "body": "I edited my answer. I forgot that itoa is not always available on Linux systems. Here is a sprintf example."}], "tags": [], "owner": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "is_accepted": true, "score": 0, "last_activity_date": 1449073114, "last_edit_date": 1449073114, "creation_date": 1449071034, "answer_id": 34046874, "question_id": 34045699, "link": "https://stackoverflow.com/questions/34045699/write-functions-langage-c/34046874#34046874", "title": "write functions langage C", "body": "<p>Problem is here : </p>\n\n<pre><code>write(fd,&amp;var,sizeof(var));\n</code></pre>\n\n<p>You are trying to write an int into your file. The second parameter of write should be of type char * if you want to write something readable for a human. Try to use the itoa function to convert your var value, it will transform it into a string representation of that number. If itoa is not available on your system, you can also use sprintf :</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;fcntl.h&gt;\n    #include &lt;strings.h&gt; //for strlen\n\n    int main (int argc,char * argv[])\n    {\n    char buff[256]; //the buffer used by sprintf\n    char File_name_1[100];\n    int fd=0;\n    char str[30] = \"This is test\";\n    int var=30;         \n\n    printf(\"Saisir le nom du fichier2 \");\n    scanf(\"%s\",File_name_1);\n\n    if ( (fd = open(File_name_1,O_WRONLY|O_TRUNC|O_CREAT,0777)) &lt; 0 )\n    {\n            printf(\"Impossible d'ouvrir fichier \\n\");\n    }\n    else\n    {       printf(\"Traitement2 \u00e0 commencer2 var :%d:\",var);\n            sprintf(buff, \"%d\", var); //convert your int into a string\n            write(fd,buff,strlen(buff)); //wrtie the string in the fd\n    }\n\n    close(fd);\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2425416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8319c14eafd32fe32b96f0e0ac282572?s=128&d=identicon&r=PG", "display_name": "user2425416", "link": "https://stackoverflow.com/users/2425416/user2425416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 34046874, "answer_count": 1, "score": -3, "last_activity_date": 1449073114, "creation_date": 1449067789, "last_edit_date": 1449068139, "question_id": 34045699, "link": "https://stackoverflow.com/questions/34045699/write-functions-langage-c", "title": "write functions langage C", "body": "<p>Hi i'm trying to write into a file using the write function.But i got '^^' instead of my variable :\nbelow my code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n\nmain (int argc,char * argv[])\n{\n    FILE *PF=NULL;\n    char File_name_1[100];\n    int fd=0;\n    char str[30] = \"This is test\";\n    int var=30;         \n\n    printf(\"Saisir le nom du fichier2 \");\n    scanf(\"%s\",File_name_1);\n\n    if ( (fd = open(File_name_1,O_WRONLY|O_TRUNC|O_CREAT,0777)) &lt; 0 )\n    {\n            printf(\"Impossible d'ouvrir fichier \\n\");\n    }\n    else\n    {       printf(\"Traitement2 \u00e0 commencer2 var :%d:\",var);\n            write(fd,&amp;var,sizeof(var));\n    }\n\n    close(fd);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "ubuntu", "gcc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1449067152, "post_id": 34045347, "comment_id": 55845315, "body": "Rough guess: <code>.&#47;configure</code> first?"}, {"owner": {"reputation": 9, "user_id": 4122122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c13100892edc5e2097e312023aba7ed?s=128&d=identicon&r=PG&f=1", "display_name": "Beyayfivay", "link": "https://stackoverflow.com/users/4122122/beyayfivay"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1449067856, "post_id": 34045347, "comment_id": 55845875, "body": "@Olaf Yes, thank you, I forgot to mention. There is a ./Configuration file that my colleague provided a replacement for. I&#39;ll edit the first post to include this."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1449087740, "post_id": 34045347, "comment_id": 55858824, "body": "Are you familiar with C and with Linux? If not, try to get help from someone who is familiar with both.  I guess that would be very simple for him. Very probably, he&#39;ll be able to install SR using a <i>recent</i> GCC compiler (the one usual in your distribution)"}], "answers": [{"tags": [], "owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1449088116, "last_edit_date": 1449088116, "creation_date": 1449087334, "answer_id": 34052178, "question_id": 34045347, "link": "https://stackoverflow.com/questions/34045347/sr-programming-language-install-on-ubuntu-14-04-compiler-errors/34052178#34052178", "title": "Sr Programming Language Install On Ubuntu 14.04 Compiler Errors", "body": "<hr>\n\n<p>\"SR\" : Old files \u2192 \u2192 year 2001 !</p>\n\n<p>\"SR\" compiles OK with gcc version 3.2.3 or gcc version 3.4.6 (\nEdit the file 'Configuration'. (\nNo gcc32 for Ubuntu 14.04 ).)</p>\n\n<p><code># make install</code> : Provides /usr/local/bin/<strong>sr</strong></p>\n\n<p>P.S. : gcc34 is available for Ubuntu 14.04 :\ncompat-gcc34-3.4.6-ubuntu1204-1_<strong>amd64</strong>.deb, or compat-gcc34_3.4.6-ubuntu15_<strong>i386</strong>.deb</p>\n\n<hr>\n"}], "owner": {"reputation": 9, "user_id": 4122122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c13100892edc5e2097e312023aba7ed?s=128&d=identicon&r=PG&f=1", "display_name": "Beyayfivay", "link": "https://stackoverflow.com/users/4122122/beyayfivay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449088116, "creation_date": 1449066842, "last_edit_date": 1449068034, "question_id": 34045347, "link": "https://stackoverflow.com/questions/34045347/sr-programming-language-install-on-ubuntu-14-04-compiler-errors", "title": "Sr Programming Language Install On Ubuntu 14.04 Compiler Errors", "body": "<p>The SR Programming language is no longer being maintained, so I realize my chances of finding help on this issue might be slim. However, I need the language installed for classroom purposes and can't think of how to proceed.</p>\n\n<p>Here's the seemingly sole source of information on the web about the language\n<a href=\"http://www.cs.arizona.edu/sr/\" rel=\"nofollow\">http://www.cs.arizona.edu/sr/</a></p>\n\n<p>The install package provides a Makefile for installation. However, running the following:</p>\n\n<pre><code>mkdir /usr/local/src/sr\ncd /usr/local/src/sr\nwget ftp://ftp.cs.arizona.edu/sr/sr.tar.Z\ntar xzf sr.tar.Z\nmake\n</code></pre>\n\n<p>results in these errors</p>\n\n<pre><code>echo \"#\"               &gt;paths.sh\necho \"#  Created mechanically;  DO NOT EDIT THIS FILE.\"   &gt;&gt;paths.sh\necho \"#\"              &gt;&gt;paths.sh\nsed -n &gt;&gt;paths.sh &lt;Configuration  \\\n    -e 's/#.*//' -e 's/[  ]*$//' -e 's/ *= */=/' \\\n    -e 's/=\"*\\(.* [^\"]*\\)\"*$/=\"\\1\"/' -e '/^[A-Z0-9_]* *=/p'\necho \"\"               &gt;&gt;paths.sh\necho  &gt;paths.tmp '/*'\necho &gt;&gt;paths.tmp ' *  Created mechanically;  DO NOT EDIT THIS FILE.'\necho &gt;&gt;paths.tmp ' */'\nsed  &gt;&gt;paths.tmp &lt;paths.sh \\\n      -n -e 's/\"//g' -e 's/.*/#define &amp;\"/' -e 's/= */ \"/p'\nif cmp -s paths.tmp paths.h; then :; else cp paths.tmp paths.h; fi\ncc -g     -c -o util.o util.c\nutil.c: In function \u2018salloc\u2019:\nutil.c:79:27: warning: incompatible implicit declaration of built-in function \u2018strlen\u2019 [enabled by default]\n     return strcpy (alloc (strlen (s) + 1), s);\n                           ^\nutil.c: In function \u2018strtail\u2019:\nutil.c:94:14: warning: incompatible implicit declaration of built-in function \u2018strlen\u2019 [enabled by default]\n     int ls = strlen (s);\n              ^\nutil.c: In function \u2018setpath\u2019:\nutil.c:221:25: warning: incompatible implicit declaration of built-in function \u2018strlen\u2019 [enabled by default]\n     searchpath = alloc (strlen (evpath) + strlen (ifdir) + 100);\n                         ^\ncmp -s multi/uni.h srmulti.h || cp multi/uni.h srmulti.h\ncmp -s multi/uni.c srmulti.c || cp multi/uni.c srmulti.c\ncd sr;    make  CC=\"cc\" CFLAGS=\"-g  \"\nmake[1]: Entering directory `/usr/local/src/sr/sr'\ncc -g     -c -o main.o main.c\nIn file included from main.c:7:0:\n../arch.h:147:11: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018--\u2019 token\n     ERROR -- no architecture selected\n           ^\nmain.c:114:1: warning: conflicting types for \u2018options\u2019 [enabled by default]\n options (argc, argv)\n ^\nmain.c:114:1: error: static declaration of \u2018options\u2019 follows non-static declaration\nmain.c:53:5: note: previous implicit declaration of \u2018options\u2019 was here\n     options (argc, argv);  /* process options */\n     ^\nmake[1]: *** [main.o] Error 1\nmake[1]: Leaving directory `/usr/local/src/sr/sr'\nmake: *** [all] Error 2\n</code></pre>\n\n<p>I figured that this might be a problem with the compiler version I was using. <code>gcc -v</code> returns <code>gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04)</code>, and the install files seem to be made to compile on earlier versions. I tried installing an earlier version of gcc such that <code>gcc -v</code> yields <code>gcc version 3.4.6 (Debian 3.4.6-5)</code>, but ran into similar yet different compiler errors. Perhaps I did something wrong with the downgraded install because it seems weird that it says <code>Debian 3.4.6-5</code>.</p>\n\n<p>The package also provides a <code>install.sh</code> file. Trying</p>\n\n<pre><code>chmod +x /usr/local/src/sr/install.sh\n/usr/local/src/sr/install.sh\n</code></pre>\n\n<p>returns the following:</p>\n\n<pre><code>+ cp sr/sr /usr/local/bin\ncp: cannot stat \u2018sr/sr\u2019: No such file or directory\n+ strip /usr/local/bin/sr\nstrip: Warning: '/usr/local/bin/sr' is not an ordinary file\n+ cp srl/srl /usr/local/bin\ncp: cannot stat \u2018srl/srl\u2019: No such file or directory\n+ strip /usr/local/bin/srl\nstrip: Warning: '/usr/local/bin/srl' is not an ordinary file\n+ cp srm/srm /usr/local/bin\ncp: cannot stat \u2018srm/srm\u2019: No such file or directory\n+ strip /usr/local/bin/srm\nstrip: Warning: '/usr/local/bin/srm' is not an ordinary file\n+ cp srprof/srprof /usr/local/bin\ncp: cannot stat \u2018srprof/srprof\u2019: No such file or directory\n+ strip /usr/local/bin/srprof\nstrip: Warning: '/usr/local/bin/srprof' is not an ordinary file\n+ cp srtex/srtex /usr/local/bin\ncp: cannot stat \u2018srtex/srtex\u2019: No such file or directory\n+ strip /usr/local/bin/srtex\nstrip: Warning: '/usr/local/bin/srtex' is not an ordinary file\n+ cp srlatex/srlatex /usr/local/bin\ncp: cannot stat \u2018srlatex/srlatex\u2019: No such file or directory\n+ strip /usr/local/bin/srlatex\nstrip: Warning: '/usr/local/bin/srlatex' is not an ordinary file\n+ cp srgrind/srgrind /usr/local/bin\ncp: cannot stat \u2018srgrind/srgrind\u2019: No such file or directory\n+ cp preproc/*2sr /usr/local/bin\ncp: cannot stat \u2018preproc/*2sr\u2019: No such file or directory\n+ cp sr.h /usr/local/lib/sr\n+ cp srmulti.h /usr/local/lib/sr\n+ cp rts/srlib.a /usr/local/lib/sr\ncp: cannot stat \u2018rts/srlib.a\u2019: No such file or directory\n+ [ -f /bin/ranlib -o -f /usr/bin/ranlib ]\n+ ranlib /usr/local/lib/sr/srlib.a\nranlib: '/usr/local/lib/sr/srlib.a': No such file\n+ cp library/*.o /usr/local/lib/sr\ncp: cannot stat \u2018library/*.o\u2019: No such file or directory\n+ cp library/*.spec /usr/local/lib/sr\ncp: cannot stat \u2018library/*.spec\u2019: No such file or directory\n+ cp library/*.impl /usr/local/lib/sr\ncp: cannot stat \u2018library/*.impl\u2019: No such file or directory\n+ cp srmap /usr/local/lib/sr\n+ cp rts/srx /usr/local/lib/sr\ncp: cannot stat \u2018rts/srx\u2019: No such file or directory\n+ strip /usr/local/lib/sr/srx\nstrip: '/usr/local/lib/sr/srx': No such file\n+ cp srlatex/srlatex.sty /usr/local/lib/sr\n+ cp preproc/ccr2sr.h preproc/csp2sr.h preproc/m2sr.h /usr/local/lib/sr\n+ cp sr-mode.el /usr/local/lib/sr\n+ [ ! -z /usr/man/manl -a -d /usr/man/manl -a ! -z l ]\n+ echo not installing man pages for commands\nnot installing man pages for commands\n+ [ ! -z /usr/man/manl -a -d /usr/man/manl -a ! -z l ]\n+ echo not installing sranimator/srgetopt/srwin man pages\nnot installing sranimator/srgetopt/srwin man pages\n+ [ ! -z /usr/man/manl -a -d /usr/man/manl -a ! -z l ]\n+ echo not installing srmap/srtrace man pages\nnot installing srmap/srtrace man pages\n+ exit 0\n</code></pre>\n\n<p>and nothing happens.</p>\n\n<p>Can anyone make sense of these errors or at least give advice on how to proceed? It might seem futile because the language hasn't been maintained in a decade, but any advice would help me out tremendously.</p>\n\n<p>Thank you</p>\n\n<p><strong>Update:</strong>\nMy Colleague provided these changes to the <code>./Configuration</code> file:</p>\n\n<pre><code>sed -i -e \"s:/usr/local:/usr:\" -e \"s:/usr/X11/lib:/usr/lib:\" \\\n  -e \"s:CCPATH = /bin/cc:CCPATH = /usr/bin/gcc\" \\\n  -e \"s:RSHPATH = /usr/ucb/rsh:RSHPATH = /usr/bin/ssh:\" \\\n  -e \"s:VFPATH = /usr/lib/vfontedpr:VFPATH = :\" Configuration\n</code></pre>\n\n<p>Running <code>make</code> on gcc 4.8.4 after this gives</p>\n\n<pre><code>cmp -s multi/uni.h srmulti.h || cp multi/uni.h srmulti.h\ncmp -s multi/uni.c srmulti.c || cp multi/uni.c srmulti.c\ncd sr;      make  CC=\"cc\" CFLAGS=\"-g  \"\nmake[1]: Entering directory `/usr/local/src/sr/sr'\ncc -g     -c -o main.o main.c\nIn file included from main.c:7:0:\n../arch.h:147:11: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018--\u2019 token\n     ERROR -- no architecture selected\n           ^\nmain.c:114:1: warning: conflicting types for \u2018options\u2019 [enabled by default]\n options (argc, argv)\n ^\nmain.c:114:1: error: static declaration of \u2018options\u2019 follows non-static declaration\nmain.c:53:5: note: previous implicit declaration of \u2018options\u2019 was here\n     options (argc, argv);  /* process options */\n     ^\nmake[1]: *** [main.o] Error 1\nmake[1]: Leaving directory `/usr/local/src/sr/sr'\nmake: *** [all] Error 2\n</code></pre>\n\n<p>It gets rid of the initial pathing issues, but the compiler issues are still there.</p>\n\n<p>With gcc 3.4 it gives</p>\n\n<pre><code>cmp -s multi/uni.h srmulti.h || cp multi/uni.h srmulti.h\ncmp -s multi/uni.c srmulti.c || cp multi/uni.c srmulti.c\ncd sr;      make  CC=\"cc\" CFLAGS=\"-g  \"\nmake[1]: Entering directory `/usr/local/src/sr/sr'\ncc -g     -c -o main.o main.c\nIn file included from main.c:7:\n../arch.h:147: error: syntax error before '--' token\nmain.c:115: error: conflicting types for 'options'\nmain.c:53: error: previous implicit declaration of 'options' was here\nmake[1]: *** [main.o] Error 1\nmake[1]: Leaving directory `/usr/local/src/sr/sr'\nmake: *** [all] Error 2\n</code></pre>\n"}, {"tags": ["c", "lua"], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 31979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MvzCU.png?s=128&g=1", "display_name": "vyom", "link": "https://stackoverflow.com/users/31979/vyom"}, "edited": false, "score": 0, "creation_date": 1449073497, "post_id": 34046163, "comment_id": 55850180, "body": "Thanks for writing such a comprehensive answer."}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1449087848, "post_id": 34046163, "comment_id": 55858882, "body": "Of course you can pass the registry to Lua: <code>lua_pushvalue(L, LUA_REGISTRYINDEX)</code>. This is what <code>debug.getregistry</code> does ..."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1449087910, "post_id": 34046163, "comment_id": 55858919, "body": "@siffiejoe: Noted and fixed."}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1449087949, "post_id": 34046163, "comment_id": 55858937, "body": "@NicolBolas: That was fast ... ;-)"}, {"owner": {"reputation": 239, "user_id": 31979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MvzCU.png?s=128&g=1", "display_name": "vyom", "link": "https://stackoverflow.com/users/31979/vyom"}, "edited": false, "score": 0, "creation_date": 1449144921, "post_id": 34046163, "comment_id": 55884515, "body": "@NicolBolas can you check the updated code above in <code>register_blob</code>. Does that look alrite? I am still have issues when I do this multiple times to register multiple classes like Blob, Face etc."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 239, "user_id": 31979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MvzCU.png?s=128&g=1", "display_name": "vyom", "link": "https://stackoverflow.com/users/31979/vyom"}, "edited": false, "score": 0, "creation_date": 1449153826, "post_id": 34046163, "comment_id": 55890615, "body": "@vyom: You&#39;re not supposed to update your question so that it has the answer within it. That makes it impossible for someone to understand what your problem was, which means your question is only helpful to you and nobody else."}, {"owner": {"reputation": 239, "user_id": 31979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MvzCU.png?s=128&g=1", "display_name": "vyom", "link": "https://stackoverflow.com/users/31979/vyom"}, "edited": false, "score": 0, "creation_date": 1449154223, "post_id": 34046163, "comment_id": 55890916, "body": "Fair enough. Should I undo it?"}, {"owner": {"reputation": 239, "user_id": 31979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MvzCU.png?s=128&g=1", "display_name": "vyom", "link": "https://stackoverflow.com/users/31979/vyom"}, "edited": false, "score": 0, "creation_date": 1449154452, "post_id": 34046163, "comment_id": 55891096, "body": "Alternatively \u2013 I could rollback, and then add a section at the <i>end</i> of my question explicitly stating that it was added later."}], "tags": [], "owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 2, "last_activity_date": 1449087899, "last_edit_date": 1449087899, "creation_date": 1449069114, "answer_id": 34046163, "question_id": 34045339, "link": "https://stackoverflow.com/questions/34045339/lua-c-modules-confused-about-including-members/34046163#34046163", "title": "Lua C modules: confused about including members", "body": "<p>What <code>register_blob</code> does really depends on what <code>new_blob</code> needs to do. The two feed into one another.</p>\n\n<p>Given your use case, <code>new_blob</code> needs to create new objects, and those new objects have metatable members equal to your <code>blob_methods</code> table. So, what <code>new_blob</code> needs to do is:</p>\n\n<ol>\n<li>Create a table/userdata to be returned.</li>\n<li>Assign that table/userdata a metatable built from the contents of <code>blob_methods</code> table.</li>\n<li>Do whatever other initialization work is needed on the object.</li>\n<li>Return the object.</li>\n</ol>\n\n<p>So what your <code>register_blob</code> code needs to do is build the metatable that you intend to use in step 2, then store it somewhere that <code>new_blob</code> can easily access it. But also somewhere that <em>noone else can</em>. Or at least, noone outside of C code.</p>\n\n<p>Lua being well designed, it has a place for storing exactly this kind of data. It's called the <a href=\"http://www.lua.org/manual/5.3/manual.html#4.5\" rel=\"nofollow\">Lua registry table</a>. The registry acts like a global table. But it can only be access from C; Lua code can't touch it (well, unless you use the debug library. Or pass the registry table to Lua).</p>\n\n<p>The idiomatic way (as I understand it) that the registry is used is that every C module stakes out its own table index in the registry. So your <code>luaopen_luaharfbuzz</code> function would create a table and store that into a key in the registry. The key would probably some string, likely named after your module. And you put all your private stuff into that table.</p>\n\n<p>So your <code>register_blob</code> function would:</p>\n\n<ol>\n<li>Create the table that will be used as the metatable for <code>blob</code> objects.</li>\n<li>Use <code>luaL_setfuncs</code> to set the <code>blob_methods</code> into the newly created table.</li>\n<li>Get the <code>harfbuzz</code> table from the registry.</li>\n<li>Put the newly created table into a known key in the <code>harfbuzz</code> table from the registry.</li>\n</ol>\n\n<p>That way, <code>new_blob</code> knows exactly where to go to get the metatable to use.</p>\n"}], "owner": {"reputation": 239, "user_id": 31979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MvzCU.png?s=128&g=1", "display_name": "vyom", "link": "https://stackoverflow.com/users/31979/vyom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34046163, "answer_count": 1, "score": 1, "last_activity_date": 1449154559, "creation_date": 1449066825, "last_edit_date": 1449154559, "question_id": 34045339, "link": "https://stackoverflow.com/questions/34045339/lua-c-modules-confused-about-including-members", "title": "Lua C modules: confused about including members", "body": "<p>I am trying to register a Lua C module that I need to use like this.</p>\n\n<pre><code>local harfbuzz = require 'harfbuzz'\n\n-- initialize blob\nlocal blob = harfbuzz.Blob.new(\u2026)\nprint(blob:length())\n</code></pre>\n\n<p>My understanding is that I should create a new table and add a metatable to it with the methods, and then add that table as a member <code>Blob</code> to the top-level lib table.</p>\n\n<p>Here is the relevant snippet of code in my C file. I am not very sure what to include in the <code>register_blob</code> function. I tried a few things and they did not work. </p>\n\n<pre><code>static const struct luaL_Reg blob_methods[] = {\n  { \"length\", blob_length },\n    {\"__gc\", blob_destroy },\n  { NULL, NULL },\n};\n\nstatic const struct luaL_Reg blob_functions[] = {\n  { \"new\", blob_new },\n  { NULL,  NULL }\n};\n\nstatic const struct luaL_Reg lib_table [] = {\n  {\"version\", get_harfbuzz_version},\n  {NULL, NULL}\n};\n\nint register_blob(lua_State *L) {\n  // QUESTION: What should I include here\n}\n\nint luaopen_luaharfbuzz (lua_State *L) {\n  lua_newtable(L);\n\n  register_blob(L);\n\n  luaL_setfuncs(L, lib_table, 0);\n\n  return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "linux", "pointers", "64-bit"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1449067166, "post_id": 34045306, "comment_id": 55845329, "body": "What is this thing supposed to do?  Why are you treating the members of &#39;nums&#39; as pointers when they are not?"}], "answers": [{"comments": [{"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449068716, "post_id": 34045507, "comment_id": 55846571, "body": "Is it possible to add the <code>clang</code> warnings as text?  My corporate overlords don&#39;t allow me to visit <code>imgur</code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449068982, "post_id": 34045507, "comment_id": 55846756, "body": "@PeterM - I am not sure I follow what you are asking.  What is <code>imgur</code>?  Essentially, the text is: Warning: Incompatible integer to pointer conversion: assigning to int ** from int [W-pointer-int-conv].  This same text is repeated three times, once for each occurrence. as well as similar warning for not having a prototype, and not using a return statement. (both related)"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449069114, "post_id": 34045507, "comment_id": 55846860, "body": "Stackoverflow hosts images on <code>i.stack.imgur.com</code>, which is where your <code>clang</code> image is hosted by the site.  While my corporate overlords allow access to <code>stackoverflow.com</code>, I can&#39;t see anything on the <code>imgur.com</code> domain.  So for your image all I see is a broken link.  This is really my problem, not yours, but I am sure other people are in the same boat, plus google can&#39;t index the warning."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449069313, "post_id": 34045507, "comment_id": 55847010, "body": "@PeterM -  My compiler will not let me cut and paste that content unfortunately.  Does the text in comment help?"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449069442, "post_id": 34045507, "comment_id": 55847117, "body": "yes it helps, but to be really annoying I&#39;d suggest putting it in your answer!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449069494, "post_id": 34045507, "comment_id": 55847166, "body": "Note: on-line sites like <a href=\"https://www.newocr.com\" rel=\"nofollow noreferrer\">newocr.com</a> almost does it: &quot;E}  play_6.c - 5 warnings ...g -6, 9 waming: incompatible integer to pointer conversion assigning to int \u201cfrom \u2019Int&#39; [.Wpointerintconv] ...&quot;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449069998, "post_id": 34045507, "comment_id": 55847576, "body": "@PeterM - added a text version of the comment to post.  However,  pictures are a part of the accepted post content on Stackoverflow, Overloards not withstanding.  Until now, I have never been requested to convert to text.  Tell your Overlords to lighten up a little :)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449070139, "post_id": 34045507, "comment_id": 55847693, "body": "@Chux - Can you see the picture okay?  Are you aware of an emerging difficulty among others recently in accessing image content?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449078961, "post_id": 34045507, "comment_id": 55853884, "body": "Picture is clear and fine. I have no problem with the picture - just thought I would comment of an aid to help OCR it.   A difficulty in using picture content instead of text includes searching post/answers on keywords - which of course a picture does not match.  Unclear why an unedited OCR of the picture was posted."}, {"owner": {"reputation": 191, "user_id": 3713067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f70a33e4bcee6f1bd3cc2d4fdea761?s=128&d=identicon&r=PG", "display_name": "Rodrigo Hjort", "link": "https://stackoverflow.com/users/3713067/rodrigo-hjort"}, "edited": false, "score": 0, "creation_date": 1449110280, "post_id": 34045507, "comment_id": 55867772, "body": "Thank you guys for the quick and precise help. The final code is working on both platforms now: <a href=\"https://github.com/hjort/mega-sena/blob/master/lab/sortear.c\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1449151626, "post_id": 34045507, "comment_id": 55889007, "body": "@chux - Thanks.  I removed the redundant picture and edited the OCR text version."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1449153993, "post_id": 34045507, "comment_id": 55890728, "body": "@chux - have always found your comments positive and useful.  Thanks."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 5, "last_activity_date": 1449151493, "last_edit_date": 1449151493, "creation_date": 1449067276, "answer_id": 34045507, "question_id": 34045306, "link": "https://stackoverflow.com/questions/34045306/code-in-c-issue-on-int-array-function-argument-in-64-bit-systems/34045507#34045507", "title": "Code in C: issue on int array function argument in 64-bit systems", "body": "<p>A good debugger will help you to find compile-time errors and warnings for simple issues, such as those you have in your code.  For example:  </p>\n\n<p>When I attempt to compile this with all warnings turned on (CLANG), the problems are clearly shown in warnings:</p>\n\n<pre><code>play_6.c - 5 warnings \n    5,9 warning: incompatible integer to pointer conversion assigning to 'int *' from 'int'[-Wpointer-int-conv]\n    6,9 warning: incompatible integer to pointer conversion assigning to 'int *' from 'int'[-Wpointer-int-conv]\n    7,9 warning: incompatible integer to pointer conversion assigning to 'int *' from 'int'[-Wpointer-int-conv]\n    8,1 warning: function does not return a value [-Wreturn-type]\n    10,5 warning: function declaration isnt a prototype. [-Wstrict-prototypes] \n</code></pre>\n\n<p>You are attempting an illegal pointer conversion </p>\n\n<pre><code>int change(int** ns) {\n  ns[0] = 111; //here\n  ns[1] = 222; //here\n  ns[2] = 333; //here\n  return 0; //add return statement here\n}\n</code></pre>\n\n<p><strong><em>To address these issues</em></strong>:<br>\nChange this line in main:</p>\n\n<pre><code>change((int**) &amp;nums);//nums is already a pointer, no need to dereference\n                      //and casting to int ** is also a problem\n</code></pre>\n\n<p>to    </p>\n\n<pre><code>change( nums);\n</code></pre>\n\n<p>And change your prototype from:</p>\n\n<pre><code>int change(int** ns) {\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>int change(int* ns) {\n</code></pre>\n\n<p><strong><em>Next</em></strong>, add a return statement to the <code>change</code> function.<br>\n<strong>Note</strong>: In your function definition:</p>\n\n<pre><code>int change(int* ns); \n</code></pre>\n\n<p>The first <code>int</code> says you want the function to return an <code>int</code> value.  If you want to use the function without requiring a return, create it as:</p>\n\n<pre><code>void change(int *ns);\n</code></pre>\n\n<p><strong><em>And finally</em></strong>, when I run your code, with the changes above, in either 32bit or 64 bit targets, the results are the same:</p>\n\n<pre><code>nums[0] = 111\nnums[1] = 222\nnums[2] = 333\nnums[3] = 0\nnums[4] = 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 3713067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f70a33e4bcee6f1bd3cc2d4fdea761?s=128&d=identicon&r=PG", "display_name": "Rodrigo Hjort", "link": "https://stackoverflow.com/users/3713067/rodrigo-hjort"}, "edited": false, "score": 0, "creation_date": 1449110012, "post_id": 34045545, "comment_id": 55867675, "body": "Thank you guys for the quick answer! I didn&#39;t realize that arrays were already passed by reference. It worked as expected in both platforms."}], "tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": false, "score": 1, "last_activity_date": 1449067379, "creation_date": 1449067379, "answer_id": 34045545, "question_id": 34045306, "link": "https://stackoverflow.com/questions/34045306/code-in-c-issue-on-int-array-function-argument-in-64-bit-systems/34045545#34045545", "title": "Code in C: issue on int array function argument in 64-bit systems", "body": "<p>Here's your working code:</p>\n\n<pre><code>#define MAX 5\n\nint change(int ns[])\n{\n  ns[0] = 111;\n  ns[1] = 222;\n  ns[2] = 333;\n}\n\nint main()\n{\n    int i, nums[MAX];\n    memset(nums, 0, sizeof(nums));\n    change(nums);\n    for (i = 0; i &lt; MAX; i++)\n        printf(\"nums[%d] = %d\\n\", i, nums[i]);\n    return 0;\n}\n</code></pre>\n\n<p>You don't need to pass <code>(int**) &amp;nums</code> to <code>change</code> as array is already pass by reference.</p>\n"}], "owner": {"reputation": 191, "user_id": 3713067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f70a33e4bcee6f1bd3cc2d4fdea761?s=128&d=identicon&r=PG", "display_name": "Rodrigo Hjort", "link": "https://stackoverflow.com/users/3713067/rodrigo-hjort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1449151493, "creation_date": 1449066754, "question_id": 34045306, "link": "https://stackoverflow.com/questions/34045306/code-in-c-issue-on-int-array-function-argument-in-64-bit-systems", "title": "Code in C: issue on int array function argument in 64-bit systems", "body": "<p>The following C code works perfectly on a 32-bit Linux, but not in 64-bit systems:</p>\n\n<pre><code>#define MAX 5\n\nint change(int** ns) {\n  ns[0] = 111;\n  ns[1] = 222;\n  ns[2] = 333;\n}\n\nint main() {\n  int i, nums[MAX];\n  memset(nums, 0, sizeof(nums));\n  change((int**) &amp;nums);\n  for (i = 0; i &lt; MAX; i++)\n    printf(\"nums[%d] = %d\\n\", i, nums[i]);\n  return 0;\n}\n</code></pre>\n\n<p>Linux 32-bit (x86):</p>\n\n<pre><code>$ uname -a\nLinux host-1549776 3.2.0-58-generic-pae #88-Ubuntu SMP Tue Dec 3 18:00:02 UTC 2013 i686 i686 i386 GNU/Linux\n\n$ gcc inta.c -o inta\n$ ./inta\nnums[0] = 111\nnums[1] = 222\nnums[2] = 333\nnums[3] = 0\nnums[4] = 0\n</code></pre>\n\n<p>Linux 64-bit (x86_64):</p>\n\n<pre><code>$ uname -a\nLinux host-1530141 2.6.32-504.12.2.el6.x86_64 #1 SMP Wed Mar 11 22:03:14 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\n$ gcc inta.c -o inta\n$ ./inta\nnums[0] = 111\nnums[1] = 0\nnums[2] = 222\nnums[3] = 0\nnums[4] = 333\n</code></pre>\n\n<p>I've read that integer pointers in C are 4 bytes long in 32-bit and 8 bytes in 64-bit, but I couldn't figure out how to solve this issue in order to make it a portable code no matter the architecture.</p>\n\n<p>Any suggestion?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1328, "user_id": 2697817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/241e4153ea3a3c484c6947f1e774ef32?s=128&d=identicon&r=PG&f=1", "display_name": "user2697817", "link": "https://stackoverflow.com/users/2697817/user2697817"}, "edited": false, "score": 0, "creation_date": 1449068452, "post_id": 34045195, "comment_id": 55846368, "body": "What logic are using to count the frequencies?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1449070389, "post_id": 34045195, "comment_id": 55847889, "body": "If you want to find out which letter occurs most often, you must keep track of the occurrences of all letters. That means you need an array of counts, not just a scalar. And if you just want to count the occurrences of letters, you don&#39;t have to store the names, just process them, that is count their letters, as they come."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "edited": false, "score": 0, "creation_date": 1449066993, "post_id": 34045256, "comment_id": 55845185, "body": "it gives me a letter but it isn&#39;t  the frequent letter"}, {"owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "reply_to_user": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "edited": false, "score": 1, "creation_date": 1449067974, "post_id": 34045256, "comment_id": 55845974, "body": "You are using <code>strcmp()</code>. This is used for comparing strings, not characters. Try this instead: <code>if(*(name+i) == *(name+j))</code>."}, {"owner": {"reputation": 1328, "user_id": 2697817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/241e4153ea3a3c484c6947f1e774ef32?s=128&d=identicon&r=PG&f=1", "display_name": "user2697817", "link": "https://stackoverflow.com/users/2697817/user2697817"}, "edited": false, "score": 0, "creation_date": 1449068370, "post_id": 34045256, "comment_id": 55846304, "body": "That would be just comparing two pointers. You would need to de-reference again to get the character value. Using indexes would read better."}, {"owner": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "edited": false, "score": 0, "creation_date": 1449068661, "post_id": 34045256, "comment_id": 55846531, "body": "i did what you said but again it doesnt give the letter"}, {"owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "edited": false, "score": 0, "creation_date": 1449068819, "post_id": 34045256, "comment_id": 55846642, "body": "Try this instead: <code>if(**(name+i) == **(name+j))</code>"}, {"owner": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "edited": false, "score": 0, "creation_date": 1449069529, "post_id": 34045256, "comment_id": 55847195, "body": "in the printf i&#39;m gonna use index_max[0]; ?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "edited": false, "score": 2, "creation_date": 1449070497, "post_id": 34045256, "comment_id": 55847975, "body": "@user5624945: It does not work, because the whole logic of your program is wrong. Take a step back, look at what your program does and then at what you wat to achieve. Fixing small things in a program that is fundamentally broken won&#39;t help you much."}], "tags": [], "owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "is_accepted": false, "score": 2, "last_activity_date": 1449066594, "creation_date": 1449066594, "answer_id": 34045256, "question_id": 34045195, "link": "https://stackoverflow.com/questions/34045195/i-want-to-find-the-frequent-letters/34045256#34045256", "title": "i want to find the frequent letters", "body": "<p>You are printing a string (<code>%s</code>) instead of a character (<code>%c</code>).</p>\n\n<p><strong>Try this</strong></p>\n\n<pre><code>printf(\"The most frequent character is: %c with %d occurences\", index_max[0], maximum);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1449073721, "creation_date": 1449073721, "answer_id": 34047873, "question_id": 34045195, "link": "https://stackoverflow.com/questions/34045195/i-want-to-find-the-frequent-letters/34047873#34047873", "title": "i want to find the frequent letters", "body": "<p>Your program has errors that others have already pointed out. The biggest error is that the program's logic is not correct.</p>\n\n<p>I reckon that if your names are Alice, Bob, Charlie, Dora, Emily and Frank, you want the output to be E, which occurs most often across all names, namely 4 times.</p>\n\n<p>If so, then you must count the occurences of all characters. There are many possible ways to do that. You could loop over all letters and then over all words and their letters and increment the count when the letter matches. That is straightforward, but rather inefficient, because you process the data 26 times.</p>\n\n<p>A better way might be to keep an array of counts for the letters. Then you need to inspect each word and each letter only once: Look at the character and if it is a letter, increment the according count.</p>\n\n<p>A nice side effect is that now you don't need to store the names anymore. Let the letters stream in from <code>stdin</code> as the user types them, process them and immediately forget about them. You are only interested in the total count of each letter.</p>\n\n<p>Not storing the names also means that you don't run into memory management problems anymore. For example, in your original code you want to loop over the letters in each word from 0 up to 20, but there aren't necessarily that many letters in the word. The char buffer holds valid input only up to the terminating null character; everything after that is garbage. You also mistakenly use the letter index as index for the words, of which there are only six. That leads to bad memory accesses.</p>\n\n<p>Here's an example implementation that lets you input as many names as you like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int count[26] = {0};        // counts for 26 letters\n    char line[80];              // line buffer\n    int i;\n\n    puts(\"[Please enter text. A blank line or Ctrl-D/Z ends input.]\");\n\n    while (fgets(line, sizeof(line), stdin)) {\n        int nonspace = 0;\n\n        for (i = 0; line[i] != '\\0'; i++) {\n            int c = line[i];\n\n            if ('A' &lt; c &amp;&amp; c &lt;= 'Z') count[c - 'A']++;\n            if ('a' &lt; c &amp;&amp; c &lt;= 'z') count[c - 'a']++;\n            if (c != ' ' &amp;&amp; c != '\\n') nonspace++;\n        }\n\n        if (nonspace == 0) break;\n    }\n\n    int imax = 0;\n\n    for (i = 1; i &lt; 26; i++) {\n        if (count[i] &gt; count[imax]) {\n            imax = i;\n        }\n    }\n\n    printf(\"Most frequent character is %c (occurs %d times).\\n\",\n        'A' + imax, count[imax]);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449073721, "creation_date": 1449066459, "last_edit_date": 1449066607, "question_id": 34045195, "link": "https://stackoverflow.com/questions/34045195/i-want-to-find-the-frequent-letters", "title": "i want to find the frequent letters", "body": "<p>in that programm i will give 6 names and then i want to find from the whole names the frequent characters . I tried this but it doesn't show me the character from all the names but the whole name insteed.    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define max 6\n\nint main()\n{\n\n\n    char name[max][20];\n    char *ptrnaame;\n    int i,j,len, cnt, k, next, occurence=0, maximum=0;\n    char *index_max=NULL;\n\n\n    ptrname=name[0];\n\n    for(i=0; i&lt;max; i++)\n    {\n        printf(\"Give the name :\");\n        gets(name[i]);\n        len=strlen(name[i]);\n        while(len&gt;20)\n        {\n            printf(\"Give the name again:\");\n            gets(name[i]);\n        }\n    }\n\n    for(i=0; i&lt;max; i++)\n    {\n        occurence=0;\n        for(j=i; j&lt;20; j++)\n        {\n            if(!strcmp(*(name+i), *(name+j)))\n            {\n                occurence++;\n            }\n        }\n        if(occurence&gt;maximum)\n        {\n            maximum=occurence;\n            index_max=*(name+i);\n        }\n    }\n    if(index_max!=NULL)\n    {\n        printf(\"The most frequent character is: %s with %d occurences\", index_max, maximum);\n    }\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel"], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 2888942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549712ce18e10fbbc9018040921ab2ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2888942/nithin"}, "is_accepted": true, "score": 2, "last_activity_date": 1449159216, "last_edit_date": 1449159216, "creation_date": 1449117469, "answer_id": 34057972, "question_id": 34045146, "link": "https://stackoverflow.com/questions/34045146/process-runtime-in-kernel-space/34057972#34057972", "title": "Process runtime in kernel space", "body": "<p>We'll get process runtime from <code>task-&gt;utime</code>, <code>task-&gt;stime</code>, etc.</p>\n\n<p>Check function <code>account_process_tick()</code> <a href=\"http://lxr.free-electrons.com/source/kernel/sched/cputime.c#L463\" rel=\"nofollow\">source</a>.</p>\n\n<p>The one you have mentioned i.e <code>task-&gt;cputime_expires</code> is used for <code>timer_settime()</code> system call to arm a POSIX per-process timer.</p>\n"}], "owner": {"reputation": 534, "user_id": 3669290, "user_type": "registered", "accept_rate": 24, "profile_image": "https://graph.facebook.com/1288851003/picture?type=large", "display_name": "Mohamed Horani", "link": "https://stackoverflow.com/users/3669290/mohamed-horani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 34057972, "answer_count": 1, "score": 0, "last_activity_date": 1449159216, "creation_date": 1449066303, "question_id": 34045146, "link": "https://stackoverflow.com/questions/34045146/process-runtime-in-kernel-space", "title": "Process runtime in kernel space", "body": "<p>I'm trying to get the runtime of a given process in kernel space or user space.\nAnyway here is what i'm trying to do...</p>\n\n<pre><code>//suppose struct task_struct *task has a direct link to pid 1\ncputime_t ktime = task-&gt;cputime_expires.stime;\ncputime_t utime = task-&gt;cputime_expires.utime;\ncputime_t total = ktime + utime;\nprintk(KERN_INFO \"TOTAL [%lu]\",total); // 0 \n</code></pre>\n\n<p>why the output is zero ? </p>\n"}, {"tags": ["c", "pointers", "struct", "linked-list"], "comments": [{"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1449065777, "post_id": 34044767, "comment_id": 55844315, "body": "In the first block of the code it is a bit unclear what the role of <code>breaks</code> is. Apparently there are two cases; in the first one,<code>breaks</code> is assigned a new node, while in the second one, <code>breaks</code> already has a successor, which is then assigned a new node, which finally is then appended to the list. Furthermore, the function <code>appendToList</code> inserts <code>item</code> at the end of the list, but does not set <code>item-&gt;next</code> to <code>null</code>, which however is done by <code>createNode</code>; is my understanding correct?"}, {"owner": {"reputation": 13, "user_id": 5624919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEBH38IAL84/AAAAAAAAAAI/AAAAAAAAABI/l3lwvlYw__c/photo.jpg?sz=128", "display_name": "Mike Travis", "link": "https://stackoverflow.com/users/5624919/mike-travis"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1449065825, "post_id": 34044767, "comment_id": 55844354, "body": "Yes, you are correct. I&#39;ll add that in the original post."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5624919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEBH38IAL84/AAAAAAAAAAI/AAAAAAAAABI/l3lwvlYw__c/photo.jpg?sz=128", "display_name": "Mike Travis", "link": "https://stackoverflow.com/users/5624919/mike-travis"}, "edited": false, "score": 0, "creation_date": 1449066601, "post_id": 34045040, "comment_id": 55844925, "body": "Oh, I get it now. Does that mean I was accidentally copying more elements to the schedule list than I intended?  Would adding a copy of breaks, instead of breaks itself, be the solution?"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 13, "user_id": 5624919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEBH38IAL84/AAAAAAAAAAI/AAAAAAAAABI/l3lwvlYw__c/photo.jpg?sz=128", "display_name": "Mike Travis", "link": "https://stackoverflow.com/users/5624919/mike-travis"}, "edited": false, "score": 0, "creation_date": 1449068753, "post_id": 34045040, "comment_id": 55846592, "body": "I can&#39;t really tell from the snippets you have posted; it seems inconsistent to me that the implementation accesses the pointers in the list directly on one hand, but on the other hand uses an abstraction like <code>appendToList</code>."}, {"owner": {"reputation": 13, "user_id": 5624919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEBH38IAL84/AAAAAAAAAAI/AAAAAAAAABI/l3lwvlYw__c/photo.jpg?sz=128", "display_name": "Mike Travis", "link": "https://stackoverflow.com/users/5624919/mike-travis"}, "edited": false, "score": 0, "creation_date": 1449072450, "post_id": 34045040, "comment_id": 55849419, "body": "Using a copy worked. I suspected that my previous implementation was appending lists instead of elements. This caused some really odd behavior I didn&#39;t bother examining."}], "tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": true, "score": 0, "last_activity_date": 1449065986, "creation_date": 1449065986, "answer_id": 34045040, "question_id": 34044767, "link": "https://stackoverflow.com/questions/34044767/element-appended-to-a-linked-list-appears-to-change-after-being-appended/34045040#34045040", "title": "Element appended to a linked list appears to change after being appended", "body": "<p>To my understanding, in the second case of the first code snippet the part</p>\n\n<pre><code>breaks -&gt; next = createNode(breakstart, breakend);\nbreaks = breaks -&gt; next;\n// some debug code\nappendToList(schedule, breaks);\n</code></pre>\n\n<p>inserts a node into the list which is already inserted by having its predecessor pointing to it.</p>\n"}], "owner": {"reputation": 13, "user_id": 5624919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEBH38IAL84/AAAAAAAAAAI/AAAAAAAAABI/l3lwvlYw__c/photo.jpg?sz=128", "display_name": "Mike Travis", "link": "https://stackoverflow.com/users/5624919/mike-travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34045040, "answer_count": 1, "score": 1, "last_activity_date": 1449065986, "creation_date": 1449065186, "last_edit_date": 1449065893, "question_id": 34044767, "link": "https://stackoverflow.com/questions/34044767/element-appended-to-a-linked-list-appears-to-change-after-being-appended", "title": "Element appended to a linked list appears to change after being appended", "body": "<p>My code (written in C) has a section where it is given a linked list and an item. The item is appended to the linked list, and I check for the value of the item before and after it is appended.</p>\n\n<p>It displays some weird behaviors because the second attempt of appending appears to change the element passed after it has been appended to the list.</p>\n\n<p>Part of code which calls the append function:</p>\n\n<p>There are two cases: In the first(breaks==NULL), the list is empty. In the second, it is not.</p>\n\n<pre><code>  if (breaks == NULL){\n      breaks = createNode(breakstart, breakend);\n      printf(\"Headbreaks info:\\n\");\n      printf(\"Next: %p\\n\", breaks -&gt; next);\n      head = breaks;\n      appendToList(schedule, breaks); //append the break found to schedule list\n      printf(\"\\nBreaks info after append:\\n\");\n      printf(\"Next: %p \\n\", breaks -&gt; next);\n    } else {\n      breaks -&gt; next = createNode(breakstart, breakend);\n      breaks = breaks -&gt; next;\n      printf(\"Breaks info:\\n\");\n      printf(\"Next: %p \\n\", breaks -&gt; next);\n      appendToList(schedule, breaks); //append the break found to schedule list\n      printf(\"\\nBreaks info after append:\\n\");\n      printf(\"Next: %p \\n\", breaks -&gt; next);\n      i++;\n    }\n</code></pre>\n\n<p>Append function: Travels to the end of list and appends item to it. Also has some print functions for some amateur debugging.</p>\n\n<pre><code>void appendToList(timeblock *list, timeblock* item){\n  while (list -&gt; next != NULL){\n    printf(\"(%d - %d)\", list -&gt; start, list -&gt; end);\n    list = list -&gt; next;\n  }\n  printf(\"\\nAppend to: (%d - %d)\", list -&gt; start, list -&gt; end);\n  list -&gt; next = item;\n}\n</code></pre>\n\n<p>Node creation:</p>\n\n<pre><code>timeblock* createNode(int start, int end){\n  timeblock *new = malloc(sizeof(timeblock));\n  new -&gt; start = start;\n  new -&gt; end = end;\n  new -&gt; next = NULL;\n  return new;\n}\n</code></pre>\n\n<p>Output snippet:</p>\n\n<pre><code>Headbreaks info:\nNext : 00000000\nHeadbreaks info after append:\nNext : 00000000\n\nBreaks info:\nNext : 00000000\nBreaks info after append:\nNext : 00322438 //I expected it to be null!\n</code></pre>\n"}, {"tags": ["c", "windows", "visual-studio-2010", "dll"], "comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1449096917, "post_id": 34044535, "comment_id": 55863558, "body": "Is foo.dll the actual name of the DLL?  If not, please provide the actual name, as it may conflict with a well-known DLL.  Is the DLL part of your solution or is it third-party code?  Are you running the 64-bit version of the program or the 32-bit version?  What version of Windows are you running?  Why not put the DLLs in the same directory as the executable?  Is the DLL a COM server?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1449097043, "post_id": 34044535, "comment_id": 55863606, "body": "Are you sure that, when you copied the files to the system directories, that they actually ended up there and not in some redirected location?  Do you get different results if you try to run the program from Visual Studio or from a standard command prompt rather than cygwin?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1449123453, "post_id": 34044535, "comment_id": 55871879, "body": "Yes I am quite sure I put the 32-bits DLL into SysWOW64 and 64-bit DLL into System32. Can I provide you the DLL name (mkf3412.dll) but it will not help you since it is developed by some colleagues."}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1449065602, "post_id": 34044887, "comment_id": 55844211, "body": "Yes this is a solution, but according to <a href=\"https://msdn.microsoft.com/en-us/library/7d83bc18(v=vs.100).aspx\" rel=\"nofollow noreferrer\">this</a> information, an executable should also look on <code>System32</code>."}], "tags": [], "owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "is_accepted": true, "score": 0, "last_activity_date": 1449065543, "creation_date": 1449065543, "answer_id": 34044887, "question_id": 34044535, "link": "https://stackoverflow.com/questions/34044535/executable-built-with-vs2010-does-not-find-dlls-in-system32/34044887#34044887", "title": "Executable built with VS2010 does not find DLLs in System32", "body": "<p>Alternatively, you can simply add the DLL files to the bin folder as well.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 34044887, "answer_count": 1, "score": -2, "last_activity_date": 1449083952, "creation_date": 1449064511, "last_edit_date": 1449083952, "question_id": 34044535, "link": "https://stackoverflow.com/questions/34044535/executable-built-with-vs2010-does-not-find-dlls-in-system32", "title": "Executable built with VS2010 does not find DLLs in System32", "body": "<p>I recently built a project on VisualStudio. I got an executable in the bin folder and I put all the dependencies x64 DLL in <code>C:\\Windows\\System32</code> and all the x32 DLL in <code>C:\\Windows\\SysWOW64</code></p>\n\n<p>When I execute my executable, I get an error message <code>This program can't start because foo.dll is missing from your computer</code>. </p>\n\n<p>I tried to get the dependencies with <code>ldd.exe</code> on Cygwin, but I don't see any references to <code>foo.dll</code>. I also tried to execute from PowerShell <code>Start-Process -PassThru sample.exe</code>, but I still get the same error message. </p>\n\n<p>Where does Windows executables look for DLLs? </p>\n\n<p>I've read that a Windows executable will look for its dependencies in a certain order:</p>\n\n<ul>\n<li>In the local folder</li>\n<li>In System32 </li>\n<li>In the %PATH%</li>\n</ul>\n\n<p>I also read that I may need to use <code>regsvr32.exe</code> to register my DLL if it is located into System32.</p>\n\n<p>What is the actual reality of this story?</p>\n"}, {"tags": ["c", "microcontroller", "iar"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 4, "creation_date": 1449064931, "post_id": 34044479, "comment_id": 55843744, "body": "Have you checked the datasheet yet?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1449064991, "post_id": 34044479, "comment_id": 55843783, "body": "That device has an LCD built-in?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1449065080, "post_id": 34044479, "comment_id": 55843848, "body": "@MartinJames It has an LCD controller peripheral, which one presumes is used in the OP&#39;s board to drive an LCD."}, {"owner": {"reputation": 85, "user_id": 3364345, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001280235720/picture?type=large", "display_name": "Aidan Howie", "link": "https://stackoverflow.com/users/3364345/aidan-howie"}, "edited": false, "score": 0, "creation_date": 1449065277, "post_id": 34044479, "comment_id": 55844002, "body": "Yes I&#39;ve checked the data sheet but I&#39;m not 100% sure what a base address looks like. Yeah it has a built in LCD but I&#39;m using a header file which is asking for the base address to initialise it and use different functions. How would I call the base address, is there a predefined function such as LCD_BASE?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1449065738, "post_id": 34044479, "comment_id": 55844286, "body": "Use TI provided headers! And read the family guide."}], "answers": [{"comments": [{"owner": {"reputation": 24913, "user_id": 1300910, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/se92W.jpg?s=128&g=1", "display_name": "huysentruitw", "link": "https://stackoverflow.com/users/1300910/huysentruitw"}, "edited": false, "score": 1, "creation_date": 1449065363, "post_id": 34044803, "comment_id": 55844058, "body": "Table 6-47. LCD Registers (Base Address: 0600h) on page 75 is even more interesting"}, {"owner": {"reputation": 85, "user_id": 3364345, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001280235720/picture?type=large", "display_name": "Aidan Howie", "link": "https://stackoverflow.com/users/3364345/aidan-howie"}, "edited": false, "score": 0, "creation_date": 1449065563, "post_id": 34044803, "comment_id": 55844188, "body": "I think this is it thanks very much! Could you possibly explain what the h at the end means. Sorry I am new to using microcontrollers"}, {"owner": {"reputation": 24913, "user_id": 1300910, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/se92W.jpg?s=128&g=1", "display_name": "huysentruitw", "link": "https://stackoverflow.com/users/1300910/huysentruitw"}, "edited": false, "score": 1, "creation_date": 1449065579, "post_id": 34044803, "comment_id": 55844196, "body": "h = hexadecimal, 0600h = 0x0600"}], "tags": [], "owner": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "is_accepted": true, "score": 3, "last_activity_date": 1449065307, "creation_date": 1449065307, "answer_id": 34044803, "question_id": 34044479, "link": "https://stackoverflow.com/questions/34044479/lcd-base-address/34044803#34044803", "title": "LCD Base Address", "body": "<p>In the datasheet (<a href=\"http://www.ti.com/lit/ds/symlink/msp430fr4133.pdf\" rel=\"nofollow\">http://www.ti.com/lit/ds/symlink/msp430fr4133.pdf</a>) on page 70 they say, that the LCD driver's registers are at <code>0x600</code>. Is that what You are looking for?</p>\n"}], "owner": {"reputation": 85, "user_id": 3364345, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001280235720/picture?type=large", "display_name": "Aidan Howie", "link": "https://stackoverflow.com/users/3364345/aidan-howie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 34044803, "answer_count": 1, "score": -3, "last_activity_date": 1449065307, "creation_date": 1449064384, "question_id": 34044479, "link": "https://stackoverflow.com/questions/34044479/lcd-base-address", "title": "LCD Base Address", "body": "<p>I'm coding in C with microcontrollers as part of degree and am struggling to find the base address of different components. The microcontroller I am using is the MSP430FR413x and I am currently trying to figure out the base address of the LCD screen so that I can display some text. Could anyone help me either with how to find the base address or what this base address is. Thanks!</p>\n"}, {"tags": ["c", "pipe", "named-pipes", "mkfifo"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1449064430, "post_id": 34044455, "comment_id": 55843405, "body": "use <code>perror</code> to print the actual error message"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1449064447, "post_id": 34044455, "comment_id": 55843415, "body": "check that you have write permission on the cwd"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 3, "creation_date": 1449064450, "post_id": 34044455, "comment_id": 55843419, "body": "Did you check errno? Probably EEXISTS if I had to guess."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1449064477, "post_id": 34044455, "comment_id": 55843435, "body": "check that there is no file already"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1449064666, "post_id": 34044455, "comment_id": 55843540, "body": "You want to replace <code>fprintf(stderr,&quot;Error creating fifo\\n&quot;);</code> by <code>perror(&quot;mkfifo() failed&quot;);</code>. This gives you the long text error message which corresponds to the value of <code>errno</code> set by <code>mkfifo()</code> on failure."}, {"owner": {"reputation": 435, "user_id": 562325, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3e2fcc2d0f1c77be361c54c00fbe8eee?s=128&d=identicon&r=PG", "display_name": "vidit jain", "link": "https://stackoverflow.com/users/562325/vidit-jain"}, "edited": false, "score": 1, "creation_date": 1449064915, "post_id": 34044455, "comment_id": 55843733, "body": "Thanks that worked, it had a existing file by same name."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1499062501, "creation_date": 1499062501, "answer_id": 44878845, "question_id": 34044455, "link": "https://stackoverflow.com/questions/34044455/mkfifo-not-able-to-create-file-in-c/44878845#44878845", "title": "mkfifo() not able to create file in C", "body": "<p>You want to replace <code>fprintf(stderr,&quot;Error creating fifo\\n&quot;);</code> by <code>perror(&quot;mkfifo() failed&quot;);</code>. This gives you the long text error message which corresponds to the value of <code>errno</code> set by <code>mkfifo()</code> on failure.\n                    &ndash;&nbsp;alk</p>\n\n<p>Thanks that worked, it had a existing file by same name.\n                    &ndash;&nbsp;vidit jain</p>\n"}], "owner": {"reputation": 435, "user_id": 562325, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3e2fcc2d0f1c77be361c54c00fbe8eee?s=128&d=identicon&r=PG", "display_name": "vidit jain", "link": "https://stackoverflow.com/users/562325/vidit-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1477, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499062501, "creation_date": 1449064332, "question_id": 34044455, "link": "https://stackoverflow.com/questions/34044455/mkfifo-not-able-to-create-file-in-c", "title": "mkfifo() not able to create file in C", "body": "<p>I'm trying to create a named pipe in C, but have not had any success.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#define FIFO_NAME \"/tmp/myfifo\"\nint main(){\n    int fd;\n    fd = mkfifo(FIFO_NAME, 0666);//, 0);\n    if(fd&lt;0){\n      fprintf(stderr,\"Error creating fifo\\n\");\n      exit(0);\n    }\n</code></pre>\n\n<p>On running the above code every time output comes out:</p>\n\n<pre><code>Error creating fifo\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "edited": false, "score": 1, "creation_date": 1449064333, "post_id": 34044359, "comment_id": 55843347, "body": "On which line does the error occur?"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1449064351, "creation_date": 1449064351, "answer_id": 34044464, "question_id": 34044359, "link": "https://stackoverflow.com/questions/34044359/pointer-to-function-pointer-expression-must-be-a-modifiable-lvalue/34044464#34044464", "title": "pointer to function pointer - expression must be a modifiable lvalue", "body": "<p>This:</p>\n\n<pre><code>**ptrfuncptr=&amp;DispFirmware;\n</code></pre>\n\n<p>should just be</p>\n\n<pre><code>*ptrfuncptr = DispFirmware;\n</code></pre>\n\n<p>Also there's no need to dereference a function pointer when calling, the name of a function can be thought of as a pointer to it so an ordinary call works just like that through a pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 3560192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0TwaN.png?s=128&g=1", "display_name": "Alexguitar", "link": "https://stackoverflow.com/users/3560192/alexguitar"}, "is_accepted": false, "score": 1, "last_activity_date": 1449064980, "creation_date": 1449064980, "answer_id": 34044697, "question_id": 34044359, "link": "https://stackoverflow.com/questions/34044359/pointer-to-function-pointer-expression-must-be-a-modifiable-lvalue/34044697#34044697", "title": "pointer to function pointer - expression must be a modifiable lvalue", "body": "<p>There were a couple issues with your code. Here's the fixed version:</p>\n\n<pre><code>void main(void)\n{\n   CmdDataType CmdData;\n\n   void (*fptr)(CmdDataType *);\n\n   Check_Commands(&amp;fptr);\n\n   (*fptr)(&amp;CmdData);\n}\n\n\nvoid Check_Commands(void (**ptrfuncptr)(CmdDataType *))\n{\n\n   *ptrfuncptr=&amp;DispFirmware;\n\n}\n\n\nvoid DispFirmware(CmdDataType *CmdData_ptr) { }\n</code></pre>\n\n<p><code>fptr</code> is a pointer to a function which takes a <code>CmdDataType</code> pointer as a parameter, so that needed to be fixed.</p>\n\n<p>And in the function <code>Check_Commands</code> the function pointer needs to be dereferenced only once.</p>\n"}], "owner": {"reputation": 1, "user_id": 5630411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360475262edf7c5f0190334d10f9ee93?s=128&d=identicon&r=PG&f=1", "display_name": "jsmith", "link": "https://stackoverflow.com/users/5630411/jsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449064980, "creation_date": 1449064094, "question_id": 34044359, "link": "https://stackoverflow.com/questions/34044359/pointer-to-function-pointer-expression-must-be-a-modifiable-lvalue", "title": "pointer to function pointer - expression must be a modifiable lvalue", "body": "<p>I want to acquire address of a needed function in function Check_Commands, put it in pointer fptr, and then call it. But, when trying to compile this code, I get following message:</p>\n\n<p>\"Error[Pe137]: expression must be a modifiable lvalue\"</p>\n\n<p>am I missing something?</p>\n\n<pre><code>void main(void)\n{\n   ...\n\n   void(*fptr)(CmdDataType);\n\n   Check_Commands(&amp;fptr);\n\n   (*fptr)(&amp;CmdData);\n}\n\n\nvoid Check_Commands(void (**ptrfuncptr)(CmdDataType))\n{\n   ...\n\n   **ptrfuncptr=&amp;DispFirmware;\n\n   ...\n}\n\n\nvoid DispFirmware(CmdDataType *CmdData_ptr)\n{\n   ...\n}\n</code></pre>\n"}, {"tags": ["c", "string", "icu"], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 335870, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7feb4484ffbceca667ddbf44d8ad759a?s=128&d=identicon&r=PG", "display_name": "user335870", "link": "https://stackoverflow.com/users/335870/user335870"}, "edited": false, "score": 0, "creation_date": 1449065149, "post_id": 34044341, "comment_id": 55843896, "body": "Yes, I know, I have seen this page, but the point is, I couldn&#39;t find strlen and other functions. where can i find a complete list of UTF-8 based functions?"}, {"owner": {"reputation": 12350, "user_id": 1722462, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/4Gy00.jpg?s=128&g=1", "display_name": "uchuugaka", "link": "https://stackoverflow.com/users/1722462/uchuugaka"}, "edited": false, "score": 0, "creation_date": 1452700240, "post_id": 34044341, "comment_id": 57287007, "body": "You want bytes length or count of characters? Either way, you need to first deal with normalization or not."}], "tags": [], "owner": {"reputation": 23569, "user_id": 8899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a10a71c01ea57ccf32fb7ff7959398ff?s=128&d=identicon&r=PG", "display_name": "Nemanja Trifunovic", "link": "https://stackoverflow.com/users/8899/nemanja-trifunovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1449064034, "creation_date": 1449064034, "answer_id": 34044341, "question_id": 34044151, "link": "https://stackoverflow.com/questions/34044151/icu-and-basic-opreation-on-utf-8-strings/34044341#34044341", "title": "ICU and basic opreation on UTF-8 strings", "body": "<p>ICU supplies a set of C macros and functions for working with UTF-8 encoded strings. Start here: <a href=\"http://userguide.icu-project.org/strings/utf-8\" rel=\"nofollow\">http://userguide.icu-project.org/strings/utf-8</a> </p>\n"}, {"comments": [{"owner": {"reputation": 391, "user_id": 335870, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7feb4484ffbceca667ddbf44d8ad759a?s=128&d=identicon&r=PG", "display_name": "user335870", "link": "https://stackoverflow.com/users/335870/user335870"}, "edited": false, "score": 2, "creation_date": 1449065250, "post_id": 34044376, "comment_id": 55843978, "body": "mbstowcs if  for converting other encodings such as ANSI to wide char. not for getting length of string. it only return the required space for creating new UTF-16 string."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 391, "user_id": 335870, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7feb4484ffbceca667ddbf44d8ad759a?s=128&d=identicon&r=PG", "display_name": "user335870", "link": "https://stackoverflow.com/users/335870/user335870"}, "edited": false, "score": 1, "creation_date": 1449115518, "post_id": 34044376, "comment_id": 55869224, "body": "@user335870: Have you tried the code I wrote before saying it doesn&#39;t work?"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 1, "last_activity_date": 1449064119, "creation_date": 1449064119, "answer_id": 34044376, "question_id": 34044151, "link": "https://stackoverflow.com/questions/34044151/icu-and-basic-opreation-on-utf-8-strings/34044376#34044376", "title": "ICU and basic opreation on UTF-8 strings", "body": "<p>You can use regular <code>strcat</code> and similar functions with UTF-8.  As for length, if you mean to count characters you can do <code>mbstowcs(NULL, s, 0)</code>.</p>\n"}], "owner": {"reputation": 391, "user_id": 335870, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7feb4484ffbceca667ddbf44d8ad759a?s=128&d=identicon&r=PG", "display_name": "user335870", "link": "https://stackoverflow.com/users/335870/user335870"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449064119, "creation_date": 1449063484, "question_id": 34044151, "link": "https://stackoverflow.com/questions/34044151/icu-and-basic-opreation-on-utf-8-strings", "title": "ICU and basic opreation on UTF-8 strings", "body": "<p>how can I do basic string operations such as strcat, strlen and ... on UTF-8 string with ICU library in C. </p>\n\n<p>I found lots of functions for UTF-16 but not for UFT-8.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1172, "user_id": 1076111, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/82509620e4f45b74c10054281b517574?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1076111/alex"}, "edited": false, "score": 1, "creation_date": 1449063920, "post_id": 34044105, "comment_id": 55843059, "body": "Instead of providing a solution, it&#39;s better if you debug the program.  Please let us know which compiler and operating system you are using so we can tell you how to debug.  For example, if you are on Solaris and using native compiler, you may use: dbx myprogram core  ; However if you are on Windows in Visual Studio, you can just run the program by pressing F5 (it will run with debugger).  The debugger will show you where the problem is, and you&#39;ll be able to inspect variables at time of crash and figure out the problem."}, {"owner": {"reputation": 13, "user_id": 5628308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049e4360264f842b536cf19a55219767?s=128&d=identicon&r=PG&f=1", "display_name": "Yogurt4655", "link": "https://stackoverflow.com/users/5628308/yogurt4655"}, "reply_to_user": {"reputation": 1172, "user_id": 1076111, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/82509620e4f45b74c10054281b517574?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1076111/alex"}, "edited": false, "score": 0, "creation_date": 1449064016, "post_id": 34044105, "comment_id": 55843128, "body": "I&#39;m using GCC. I&#39;ve looked up how to debug it but it didn&#39;t make much sense to me. I&#39;ll give it a try."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1449064017, "post_id": 34044105, "comment_id": 55843130, "body": "I don&#39;t see how your code would produce <code>bagel</code> even once. What sort of input are you giving it?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1449064071, "post_id": 34044105, "comment_id": 55843158, "body": "You need to null terminate the <code>correct</code> string."}, {"owner": {"reputation": 13, "user_id": 5628308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049e4360264f842b536cf19a55219767?s=128&d=identicon&r=PG&f=1", "display_name": "Yogurt4655", "link": "https://stackoverflow.com/users/5628308/yogurt4655"}, "edited": false, "score": 0, "creation_date": 1449064271, "post_id": 34044105, "comment_id": 55843304, "body": "Jongware - I type in bagel when prompted for a word to search for. Lundin - what&#39;s the command for that?"}, {"owner": {"reputation": 1172, "user_id": 1076111, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/82509620e4f45b74c10054281b517574?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1076111/alex"}, "edited": false, "score": 0, "creation_date": 1449064815, "post_id": 34044105, "comment_id": 55843656, "body": "If you end up debugging the problem, go through a gdb tutorial, for example here&#39;s simple one I found: <a href=\"http://cs.baylor.edu/~donahoo/tools/gdb/tutorial.html\" rel=\"nofollow noreferrer\">cs.baylor.edu/~donahoo/tools/gdb/tutorial.html</a>   Basically you end up building a program with debugging enabled by specifying &#39;-g&#39; flag, as follows: gcc -g myfile.c -o myprogram   Then you run debugger: gdb myprogram From this point on you&#39;ll use commands such as: run - this will start the program, up - this will go up the stack, etc. I&#39;d look at some tutorials and make a list of commands you&#39;re likely to use (up/down/print/list/break/continue)."}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1499072022, "post_id": 34044105, "comment_id": 76740848, "body": "With what arguments do you run the program?"}], "owner": {"reputation": 13, "user_id": 5628308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049e4360264f842b536cf19a55219767?s=128&d=identicon&r=PG&f=1", "display_name": "Yogurt4655", "link": "https://stackoverflow.com/users/5628308/yogurt4655"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449063343, "creation_date": 1449063343, "question_id": 34044105, "link": "https://stackoverflow.com/questions/34044105/trying-to-implement-a-word-search-in-c", "title": "Trying to implement a word search in C", "body": "<p>As the title says, I'm trying to make a word search in C. However, when I run what I have, I'm getting an aborted(core dumped) message.</p>\n\n<p>My code:</p>\n\n<pre><code>void lefttoright(int rowcol, char **matrix, char* find){\n\n    int i, j, k, q, len, count = 0;\n    len = strlen(find);\n\n    for (i = 0; i &lt; rowcol; i++){\n            for (j = 0; j &lt; rowcol; j++){\n                    if (matrix[i][j] == find[0]){\n                            char* correct = malloc(sizeof(char) * 20);\n\n                            for (q = j; q &lt; rowcol; q++){\n                                    for (k = 0; k &lt; len; k++){\n                                            if (matrix[i][q] == find[k]){\n                                                    correct[k] = matrix[i][q];\n                                            }\n                                    }\n                            if (strcmp(correct, find) == 0){\n                                    count++;\n                                    printf(\"%s\\n\", correct);\n                                    printf(\"%d\\n\", count);\n                            }\n                            }\n                            free(correct);\n                    }\n                    else continue;\n            }\n    }\n    printf(\"%d\", count);\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>if (strcmp(correct, find) == 0){\n         count++;\n         printf(\"%s\\n\", correct);\n         printf(\"%d\\n\", count);\n}\n</code></pre>\n\n<p>prints </p>\n\n<pre><code>bagel\n1\nbagel\n2\nbagel\n3\nbagel\n4\nbagel\n5\nbagel\n6\nbagel\n7\nbagel\n8\nbagel\n9\nbagel\n10\nbagel\n11\nbagel\n12\nbagel\n13\nAborted (core dumped)\n</code></pre>\n\n<p>What is making it abort? Also, what do I need to do differently to make count == 1 (the word only appears once)?</p>\n\n<p>My entire program if needed:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"scanner.h\"\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nchar** matrixMaker(int argc, char **argv);\nvoid displayMatrix(int rowcol, char **matrix);\nvoid lefttoright(int rowcol, char **matrix, char* find);\n\nint main(int argc, char **argv){\n\n    FILE *fp = fopen(argv[2], \"r\");\n\n    int rowcol = atoi(argv[1]);\n    int a, i = 0, j;\n    unsigned char cha;\n    char **matrix;\n    matrix = malloc( sizeof(char *) * rowcol);\n\n    for (a=0; a&lt;20; a++)\n            matrix[a] = malloc( sizeof(char) * rowcol);\n\n    for (i = 0; i &lt; rowcol; i++){\n            for (j = 0; j &lt; rowcol; j++){\n                    cha = tolower((unsigned char)readChar(fp));\n                    matrix[i][j] = cha;\n            }\n    }\n\n    char* find = malloc(sizeof(char) * 20);\n\n    displayMatrix(rowcol, matrix);\n\n    printf(\"Enter a word to find in the puzzle : \\n\");\n    scanf(\"%s\", find);\n\n    while(find[i]){\n            putchar(tolower((unsigned char)find[i]));\n            i++;\n    }\n\n    lefttoright(rowcol, matrix, find);\n\n    free(matrix);\n\n    return 0;\n}\n\nvoid displayMatrix(int rowcol, char **matrix){\n\n    int r,c;\n    for (r = 0; r &lt; rowcol; ++r){\n            for (c = 0; c &lt; rowcol; ++c){\n                    printf(\"%c\",matrix[r][c]);\n            }\n            printf(\"\\n\");\n    }\n}\n\nvoid lefttoright(int rowcol, char **matrix, char* find){\n\n    int i, j, k, q, len, count = 0;\n    len = strlen(find);\n\n    for (i = 0; i &lt; rowcol; i++){\n            for (j = 0; j &lt; rowcol; j++){\n                    if (matrix[i][j] == find[0]){\n                            char* correct = malloc(sizeof(char) * 20);\n\n                            for (q = j; q &lt; rowcol; q++){\n                                    for (k = 0; k &lt; len; k++){\n                                            if (matrix[i][q] == find[k]){\n                                                    correct[k] = matrix[i][q];\n                                            }\n                                    }\n                            if (strcmp(correct, find) == 0){\n                                    count++;\n                                    printf(\"%s\\n\", correct);\n                                    printf(\"%d\\n\", count);\n                            }\n                            }\n                            free(correct);\n                    }\n                    else continue;\n            }\n    }\nprintf(\"%d\", count);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "posix"], "comments": [{"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 1, "creation_date": 1449063221, "post_id": 34044031, "comment_id": 55842570, "body": "You should copy your array(argv) in another one to work with"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1449063333, "post_id": 34044031, "comment_id": 55842646, "body": "<code>argv</code> is not <code>const</code>. You are free to modify it as you wish (and so will <code>grep</code>), so make a copy every time you pass it on."}, {"owner": {"reputation": 6658, "user_id": 293048, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f6dc18955196327fce8300800c7fee5e?s=128&d=identicon&r=PG", "display_name": "someguy", "link": "https://stackoverflow.com/users/293048/someguy"}, "edited": false, "score": 0, "creation_date": 1449063393, "post_id": 34044031, "comment_id": 55842687, "body": "you want to join the elements of argv into a single string separated by a space, right? that&#39;s what you&#39;re missing in that case"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 6658, "user_id": 293048, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f6dc18955196327fce8300800c7fee5e?s=128&d=identicon&r=PG", "display_name": "someguy", "link": "https://stackoverflow.com/users/293048/someguy"}, "edited": false, "score": 0, "creation_date": 1449063423, "post_id": 34044031, "comment_id": 55842711, "body": "@someguy. Nope. Just pass the vector along as-is."}, {"owner": {"reputation": 6658, "user_id": 293048, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f6dc18955196327fce8300800c7fee5e?s=128&d=identicon&r=PG", "display_name": "someguy", "link": "https://stackoverflow.com/users/293048/someguy"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449063487, "post_id": 34044031, "comment_id": 55842755, "body": "@Mad Physicist: doesn&#39;t make sense then. <code>grep</code> is a string, not an array strings."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 6658, "user_id": 293048, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f6dc18955196327fce8300800c7fee5e?s=128&d=identicon&r=PG", "display_name": "someguy", "link": "https://stackoverflow.com/users/293048/someguy"}, "edited": false, "score": 0, "creation_date": 1449063853, "post_id": 34044031, "comment_id": 55843000, "body": "@someguy. I was referring to <code>grep</code> the program. That is what OP was going to open a pipe to."}, {"owner": {"reputation": 6658, "user_id": 293048, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f6dc18955196327fce8300800c7fee5e?s=128&d=identicon&r=PG", "display_name": "someguy", "link": "https://stackoverflow.com/users/293048/someguy"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449064089, "post_id": 34044031, "comment_id": 55843184, "body": "@Mad Physicist: nvm i didn&#39;t look at the manual for <code>execvp</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1560, "user_id": 4303216, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-crjc3oGU_5c/AAAAAAAAAAI/AAAAAAAAADc/BTLu8OHFfRM/photo.jpg?sz=128", "display_name": "sameera sy", "link": "https://stackoverflow.com/users/4303216/sameera-sy"}, "is_accepted": false, "score": 1, "last_activity_date": 1449063486, "creation_date": 1449063486, "answer_id": 34044153, "question_id": 34044031, "link": "https://stackoverflow.com/questions/34044031/from-argv-to-execvp/34044153#34044153", "title": "From argv to execvp", "body": "<p>The problem lies here</p>\n\n<pre><code>const char* grep = argv; \n</code></pre>\n\n<p>C does not provide internal type casting for const types. And if your motive is to copy the array of <code>argv</code> into <code>grep</code>, it's wrong, use <code>strcpy</code> or any such function to make a clone of that array. </p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 2, "last_activity_date": 1449064210, "last_edit_date": 1449064210, "creation_date": 1449063889, "answer_id": 34044291, "question_id": 34044031, "link": "https://stackoverflow.com/questions/34044031/from-argv-to-execvp/34044291#34044291", "title": "From argv to execvp", "body": "<p>Your grep variable needs to be a pointer to an array of strings or an array of strings (not simply a string).</p>\n\n<p>Something like:</p>\n\n<pre><code>argv[0] = \"grep\";\nconst char** grep = (const char**)argv; //make grep point to the modified char** argv;\n</code></pre>\n\n<p>should do it, or construct a new array:</p>\n\n<pre><code>const char* grep[argc+1]; \ngrep[0] = \"grep\";\ngrep[argc]=NULL;\nfor(int i=1; i&lt;argc; i++){\n  grep[i] = argv[i];\n}\n</code></pre>\n\n<p>BTW, I believe you only need one <code>NULL</code> at the end of each string array.</p>\n"}], "owner": {"reputation": 74, "user_id": 4255679, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Phb7VLefJpU/AAAAAAAAAAI/AAAAAAAAADM/vNPFhVhZ3zA/photo.jpg?sz=128", "display_name": "Gabriel Tigerstr&#246;m", "link": "https://stackoverflow.com/users/4255679/gabriel-tigerstr%c3%b6m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 34044291, "answer_count": 2, "score": 1, "last_activity_date": 1449064210, "creation_date": 1449063118, "question_id": 34044031, "link": "https://stackoverflow.com/questions/34044031/from-argv-to-execvp", "title": "From argv to execvp", "body": "<p>So I have a problem I haven't been able to solve.\nI'm writing a C program that executes some OS functions via pipes. The execution is done with execvp(const char *file, char *const argv[]);.</p>\n\n<p>In my main function I would like to take the whole line passed to the program (argv) except for the first char-array and pass it to grep. Everything works at the moment, but I keep getting the warning:</p>\n\n<pre><code>warning: initialization from incompatible pointer type [enabled by default]\nconst char* grep = argv;\n                   ^\n</code></pre>\n\n<p>My code looks like following. In the clause <code>if(1 &lt; argc)</code> i want to be able to send the <code>argv</code> with the first post modified to <code>newPipeline</code> on the same format as printenv, sort and less.</p>\n\n<pre><code>int main(int argc, char** argv, char **envp){\n\n    const char* printenv[] = {\"printenv\", NULL, NULL};\n    const char* sort[] = {\"sort\", NULL, NULL};\n    const char* less[] = {\"less\", NULL, NULL};\n    if(1&lt;argc){\n        argv[0] = \"grep\";\n        const char* grep = argv; \n        const char* const* commands[] = {printenv, sort, grep, less, NULL};\n        newPipeline((char* const**)commands, 0, STDIN_FILENO);\n    }\n    //FROM HERE ON IT WORKS\n    else{\n        const char* const* commands[] = {printenv, sort, less, NULL};\n        newPipeline((char* const**)commands, 0, STDIN_FILENO);\n    }\n    if(signal(SIGCHLD, SIG_IGN) == SIG_ERR){\n        perror(\"A problem with the children\");\n    }\n    exit(0);\n}\n</code></pre>\n\n<p>I know that the pointer types are wrong. Should I build up a completely new array for <code>grep</code> or should I, as I am trying to do now, cast pointers into the right kind of pointers. If the later, which pointers would that be? </p>\n"}, {"tags": ["c", "linux", "linux-device-driver", "pci"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1449063382, "post_id": 34044026, "comment_id": 55842680, "body": "Well, does that path exist on your system?  What device do you think it is?"}, {"owner": {"reputation": 7794, "user_id": 448413, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ITDlC.jpg?s=128&g=1", "display_name": "Amit Singh Tomar", "link": "https://stackoverflow.com/users/448413/amit-singh-tomar"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1449063435, "post_id": 34044026, "comment_id": 55842719, "body": "Yes , I checked it and it is there on my system."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1449063492, "post_id": 34044026, "comment_id": 55842759, "body": "Can you show us the output of <code>ls -l &#47;sys&#47;bus&#47;pci&#47;devices&#47;0000:00:01.0&#47;resource</code> ?  Also, use <code>perror</code> instead of <code>printf</code> to print the errno text as well, because it will give you a more detailed reason for the failure."}, {"owner": {"reputation": 7794, "user_id": 448413, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ITDlC.jpg?s=128&g=1", "display_name": "Amit Singh Tomar", "link": "https://stackoverflow.com/users/448413/amit-singh-tomar"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1449063561, "post_id": 34044026, "comment_id": 55842791, "body": "-r--r--r-- 1 root root 4096 Jan  1 00:03 /sys/bus/pci/devices/0000:00:01.0/resource"}], "answers": [{"comments": [{"owner": {"reputation": 7794, "user_id": 448413, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ITDlC.jpg?s=128&g=1", "display_name": "Amit Singh Tomar", "link": "https://stackoverflow.com/users/448413/amit-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1449063683, "post_id": 34044198, "comment_id": 55842869, "body": "Ah, I see but can I make it chmod 777  /sys/bus/pci/devices/0000:00:01.0/resource?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 7794, "user_id": 448413, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ITDlC.jpg?s=128&g=1", "display_name": "Amit Singh Tomar", "link": "https://stackoverflow.com/users/448413/amit-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1449064156, "post_id": 34044198, "comment_id": 55843227, "body": "You&#39;re welcome to try.  I have no idea what the device is, or how this will work."}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 2, "last_activity_date": 1449063620, "creation_date": 1449063620, "answer_id": 34044198, "question_id": 34044026, "link": "https://stackoverflow.com/questions/34044026/unable-to-open-sys-bus-pci-devices-00000001-0-resource/34044198#34044198", "title": "Unable to open /sys/bus/pci/devices/0000:00:01.0/resource", "body": "<p>You are trying to open the path for read/write, but it is only readable (that's what the <code>-r--r--r--</code> in <code>ls -l</code> output means).  You'll need to change <code>O_RDWR</code> to <code>O_RDONLY</code>.</p>\n"}], "owner": {"reputation": 7794, "user_id": 448413, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ITDlC.jpg?s=128&g=1", "display_name": "Amit Singh Tomar", "link": "https://stackoverflow.com/users/448413/amit-singh-tomar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1998, "favorite_count": 0, "accepted_answer_id": 34044198, "answer_count": 1, "score": 0, "last_activity_date": 1449063620, "creation_date": 1449063109, "question_id": 34044026, "link": "https://stackoverflow.com/questions/34044026/unable-to-open-sys-bus-pci-devices-00000001-0-resource", "title": "Unable to open /sys/bus/pci/devices/0000:00:01.0/resource", "body": "<p>I am trying to open an absolute path of a PCI device in C code</p>\n\n<pre><code> fd = open(\"/sys/bus/pci/devices/0000:00:01.0/resource\", O_RDWR);\n\n if (fd &lt; 0) {\n            printf(\"Not found %s\\n\", path);\n            return -1;\n    }\n</code></pre>\n\n<p>But it gives me an error saying Not found /sys/bus/pci/devices/0000:00:01.0/resource</p>\n\n<p>Can anyone please point me out what I am doing here?</p>\n"}, {"tags": ["c", "binary", "termcap"], "comments": [{"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 0, "creation_date": 1449063055, "post_id": 34043911, "comment_id": 55842449, "body": "Why people unvote ??"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1449063349, "post_id": 34043911, "comment_id": 55842662, "body": "Maybe because you will find the answer by just googling for &quot;c operators&quot; or in any C book, tutorial, etc.?"}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1449063618, "post_id": 34043911, "comment_id": 55842830, "body": "i did ! i look, i found few thing ... but i didn&#39;t understand why all of this have to do with termcaps !"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1449065401, "post_id": 34043911, "comment_id": 55844096, "body": "Specifically, nothing.  It has to do with boolean algebra, ie. the way computers work."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 5, "last_activity_date": 1449065901, "last_edit_date": 1449065901, "creation_date": 1449062958, "answer_id": 34043972, "question_id": 34043911, "link": "https://stackoverflow.com/questions/34043911/what-is-this-operation-in-c/34043972#34043972", "title": "What is this operation in C?", "body": "<p>Assuming <code>ICANON</code> is a bit-mask, i.e. an integer with bits set to represent some feature, that statement will make sure those bits are <em>not</em> set in <code>c_lflag</code>.</p>\n\n<p>This is often called \"masking off\" those bits.</p>\n\n<p>The operation is a bitwise AND with the bitwise inverse (<code>~</code> is bitwise inverse).</p>\n\n<p>So, if the value of <code>c_lflag</code> is 3 (binary 11<sub>2</sub>) before the operation, and <code>ICANON</code> has the value 2 (binary 10<sub>2</sub>), it will become 1 since it's bitwise-AND:ed with the value <code>~2</code> which has all bits set except bit number 1 (binary ...11101<sub>2</sub>).</p>\n\n<p>It could also be written more verbosely as</p>\n\n<pre><code>term.c_lflag = term.c_lflag &amp; ~ICANON;\n</code></pre>\n\n<p>The parentheses around <code>ICANON</code> should not be needed.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 1346098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9973cc617bfea22beea91c1633be9270?s=128&d=identicon&r=PG", "display_name": "Sylvain P.", "link": "https://stackoverflow.com/users/1346098/sylvain-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1449063386, "creation_date": 1449063386, "answer_id": 34044114, "question_id": 34043911, "link": "https://stackoverflow.com/questions/34043911/what-is-this-operation-in-c/34044114#34044114", "title": "What is this operation in C?", "body": "<p>Your line remove the bit(s) of <code>ICANON</code> from <code>term.c_lflag</code>:</p>\n\n<p>Assuming terms ares 4 bits long, if the value of <code>ICANON</code> is 4 (0100b), then the value of <code>~ICANON</code> is 11 (1011b), and so:</p>\n\n<pre><code>    term.c_lflag  1 1 1 0\nAND      ~ICANON  1 0 1 1\n    ---------------------\n                  1 0 1 0\n</code></pre>\n\n<p>==> 1010b, 10 in decimal</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1449063474, "post_id": 34044115, "comment_id": 55842747, "body": "It is not equal. There are subtle differences when evaluationg the lvalue."}], "tags": [], "owner": {"reputation": 333, "user_id": 3545900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfcea097187c6acd399d85436a1af70b?s=128&d=identicon&r=PG&f=1", "display_name": "Sabri &#214;zg&#252;r", "link": "https://stackoverflow.com/users/3545900/sabri-%c3%96zg%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1449063387, "creation_date": 1449063387, "answer_id": 34044115, "question_id": 34043911, "link": "https://stackoverflow.com/questions/34043911/what-is-this-operation-in-c/34044115#34044115", "title": "What is this operation in C?", "body": "<pre><code>term.c_lflag &amp;= ~(ICANON);\n</code></pre>\n\n<p>is equal to</p>\n\n<pre><code>term.c_lflag = term.c_lflag &amp; ~(ICANON);\n</code></pre>\n\n<p>&amp; and ~ operators are two distinct operators. ~ is NOT operator in which it converts each bit with its inverse. &amp; operator is bitwise AND operator in which it compares operands bit by bit.</p>\n"}], "owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 34043972, "answer_count": 3, "score": -6, "last_activity_date": 1449065901, "creation_date": 1449062775, "question_id": 34043911, "link": "https://stackoverflow.com/questions/34043911/what-is-this-operation-in-c", "title": "What is this operation in C?", "body": "<p>I start working with the termcaps and i saw this kind of operation.</p>\n\n<p><code>term.c_lflag &amp;= ~(ICANON);</code></p>\n\n<p>I know <code>&amp;=</code> is a <code>binary AND</code>, and i am not very confortable with it.</p>\n\n<p>Why didn't simply use <code>=</code> or make a <code>#define</code>, and what the <code>&amp;= ~</code> do ?</p>\n"}, {"tags": ["c++", "c", "dbus", "bluez"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1449179389, "post_id": 34043855, "comment_id": 55907097, "body": "FWIW, when I was looking I didn&#39;t find any good tutorials or samples either. Ended up just looking at the bluez code, particularly the client/tool code, and working it out from there. <a href=\"https://bitbucket.org/kaylum/bluez-rssi-example/src\" rel=\"nofollow noreferrer\">Here</a> is a simple sample I wrote to discover devices and get the RSSI of a device. Was for a different question. And it&#39;s for bluez4 and not bluez5 (as the OP asked for that). But the DBUS aspects are the same and you just need to call the bluez5 APIs instead. Providing in case it is helpful for you."}, {"owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1449179969, "post_id": 34043855, "comment_id": 55907452, "body": "@Kaylum Thank you for your code example. You may want to post it as an answer."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1483722906, "post_id": 34043855, "comment_id": 70227534, "body": "I would like to know status of your application @jnbrq-CanberkS&#246;nmez. I am planning to start bluez. Should i use bluez api or dbus?"}, {"owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "edited": false, "score": 0, "creation_date": 1517904325, "post_id": 34043855, "comment_id": 84272613, "body": "How to solve a problem is 90% finding accurate timely in-sync with the api version in question documentation.  As many software authors and companies are now relying more and more on &quot;crowdsourcing&quot;  it is getting harder and harder to get good, hopefully curated, information."}], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 578870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b99db4acea17602bb023ee94dc204287?s=128&d=identicon&r=PG", "display_name": "nymo", "link": "https://stackoverflow.com/users/578870/nymo"}, "edited": false, "score": 1, "creation_date": 1503501613, "post_id": 34152077, "comment_id": 78645201, "body": "i&#39;m looking into the <code>bluetoothctl</code> code and stuck at when characteristics are being retrieved. Guessing it&#39;s a watch on the client but i&#39;m lost in code... i&#39;ll comment if i find it, and if @Zimano has not replied yet."}, {"owner": {"reputation": 502, "user_id": 578870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b99db4acea17602bb023ee94dc204287?s=128&d=identicon&r=PG", "display_name": "nymo", "link": "https://stackoverflow.com/users/578870/nymo"}, "edited": false, "score": 2, "creation_date": 1503586290, "post_id": 34152077, "comment_id": 78687881, "body": "it was just a matter of finding the path of the device, then introspecting it for service nodes (e.g. <code>service001f</code> for UART), then tacking that on to the path and search the latter on the object manager with <code>g_dbus_object_manager_get_object (manager, path)</code>. Of course, the path to the service could also, more easily, be found with Bluez&#39;s client: <code>bluetoothctl</code>."}, {"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "reply_to_user": {"reputation": 502, "user_id": 578870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b99db4acea17602bb023ee94dc204287?s=128&d=identicon&r=PG", "display_name": "nymo", "link": "https://stackoverflow.com/users/578870/nymo"}, "edited": false, "score": 0, "creation_date": 1503586451, "post_id": 34152077, "comment_id": 78688004, "body": "@nymo Awesome! Glad you solved it."}], "tags": [], "owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "is_accepted": false, "score": 25, "last_activity_date": 1449566924, "last_edit_date": 1449566924, "creation_date": 1449566426, "answer_id": 34152077, "question_id": 34043855, "link": "https://stackoverflow.com/questions/34043855/bluez-d-bus-c-or-c-sample/34152077#34152077", "title": "BlueZ D-Bus C or C++ Sample", "body": "<p>You might want to check out the <code>main.c</code> file in the <code>client</code> folder of the most recent Bluez source code. It's the source code for the <code>bluetoothctl</code> tool. Run it too. The source code shows exactly how they use GDBus, including proxies, agents, calling methods like described in the API documentation (/doc folder) and all that. It's in C and uses the high level API.</p>\n\n<p>I suggest you step through the code because it took me 2 weeks endlessly trying to understand Bluez in C and the fact that there's no documentation, but when I read that main.c file I was ready in a day. Read up on proper DBus API documentation and more importantly the concepts. Some documents that helped me:</p>\n\n<p>The gdbus tool: <a href=\"https://developer.gnome.org/gio/stable/gdbus.html\">https://developer.gnome.org/gio/stable/gdbus.html</a></p>\n\n<p>These contain all the calls to gdbus and objects in the main.c file and explain them very well. <a href=\"https://developer.gnome.org/gio/stable/gdbus-convenience.html\">https://developer.gnome.org/gio/stable/gdbus-convenience.html</a></p>\n\n<p>D-Feet, an invaluable tool to inspecting and learning about Dbus on your system. Try checking out the /bluez bus. <a href=\"https://wiki.gnome.org/action/show/Apps/DFeet?action=show&amp;redirect=DFeet\">https://wiki.gnome.org/action/show/Apps/DFeet?action=show&amp;redirect=DFeet</a></p>\n\n<p>or</p>\n\n<p><code>sudo apt-get install d-feet</code></p>\n\n<p>Not much of a tutorial, but worth a read to understand some concepts, as the bluetoothctl tool fits into what they're trying to say here. <a href=\"http://dbus.freedesktop.org/doc/dbus-tutorial.html\">http://dbus.freedesktop.org/doc/dbus-tutorial.html</a></p>\n\n<p>The bluetoothctl creates an interactive shell though, so it might not be wise to waste time trying to fit in your code, but just pick what you need from it.</p>\n"}], "owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13193, "favorite_count": 5, "closed_date": 1450049914, "answer_count": 1, "score": 12, "last_activity_date": 1449566924, "creation_date": 1449062593, "question_id": 34043855, "link": "https://stackoverflow.com/questions/34043855/bluez-d-bus-c-or-c-sample", "closed_reason": "Not suitable for this site", "title": "BlueZ D-Bus C or C++ Sample", "body": "<p>I am trying to write an application which searches Bluetooth devices nearby and communicates with them. My application is going to be written in C++, and intended to work under Linux.</p>\n\n<p>4 years ago, I used BlueZ. But now, as I see, the API has been changed a lot and now it's using D-Bus. I was not experienced with D-Bus. I looked at some tutorials related to client/server model. Now, I'm OK with D-Bus.</p>\n\n<p>But I couldn't find any example which explains how to use BlueZ with D-Bus. I need some guidance for using BlueZ and D-Bus together.</p>\n\n<p>Are there any tutorial or sample for working with BlueZ via D-Bus in C or C++?</p>\n\n<p>(note: already googled it)</p>\n"}, {"tags": ["c", "arrays", "ascii", "xor"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1449060908, "post_id": 34043222, "comment_id": 55841023, "body": "Always define what &quot;it ain&#39;t working&quot; means. How doesn&#39;t it work? What is the result? What was expected? The only clear error in your code is the limits, i should go from 0 to 1508 for there to be 1509 values, so change 1510 to 1509 to fix that. Otherwise you are xoring chars correctly."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1449061081, "post_id": 34043222, "comment_id": 55841149, "body": "It&#39;s confusing when you mix &quot;number&quot; and &quot;word&quot;. Often a &quot;word&quot; is a number of a particular size, like 16 bits, but that&#39;s not what you seem to mean. It&#39;s important to be precise with things like these."}, {"owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449061320, "post_id": 34043222, "comment_id": 55841313, "body": "sorry, the problem is to do with the char message[3018] line, says unexpected unqualified id before xor token?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1449061803, "post_id": 34043222, "comment_id": 55841621, "body": "Try renaming the xor[] array to somthing else. (maybe <code>xor</code> is a #define or alias for the <code>^</code> operator)"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1449061979, "post_id": 34043222, "comment_id": 55841716, "body": "char message[3018] is dangours. This may lead to StackOverflow"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1449062382, "post_id": 34043222, "comment_id": 55841995, "body": "If you&#39;re using a C++ compiler to compile C code, <code>xor</code> is a keyword. Use a different name for your array."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1449063520, "post_id": 34043222, "comment_id": 55842769, "body": "Instead of using magic numbers for array sizes, use constants or <code>#defines</code>. Would have saved you from this bug."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1449102706, "post_id": 34043222, "comment_id": 55865534, "body": "Whatever character set and encoding you are using (probably not ASCII [run <code>chcp</code>(Windows) or <code>locale</code>]), be careful that it makes sense to chop up a string into bytes, XOR them with other bytes and interpret the resulting bytes as a string. It would work with ASCII (values 0-127 are valid), CP437 (values 0-255 are valid), \u2026 but not Windows-1252 (has holes its code space), UTF-8 (doesn&#39;t split at every byte boundary and every byte sequence is not valid), \u2026. Because of this, algorithms that twiddle bits typically give a byte array (numbers) as an output even if the input is a string (text)."}, {"owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "edited": false, "score": 0, "creation_date": 1480222803, "post_id": 34043222, "comment_id": 68870204, "body": "@anony could you mark an answer here and update accordingly please"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "edited": false, "score": 0, "creation_date": 1449061501, "post_id": 34043389, "comment_id": 55841424, "body": "sorry, i should have said one of the problem was the char xor[1509] initialising line, there is an unexpected unqualified id before xor token"}], "tags": [], "owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "is_accepted": false, "score": 1, "last_activity_date": 1449062175, "last_edit_date": 1449062175, "creation_date": 1449061127, "answer_id": 34043389, "question_id": 34043222, "link": "https://stackoverflow.com/questions/34043222/xoring-arrays-of-chars/34043389#34043389", "title": "XOR&#39;ing arrays of chars", "body": "<p>Changing :</p>\n\n<pre><code>for(i=0;i&lt;1510;i++)\n   xor[i] = (char)(message[i] ^ message[i+1509]);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for(i=0;i&lt;1509;i++)\n  xor[i] = (char)(message[i] ^ message[i+1509]);\n</code></pre>\n\n<p>should provide you a correct XOR output.</p>\n\n<p>And converting those numbers to char might result in unknown output characters for e.g. <code>k Xr2</code> was what I got for input <code>char message[10] = {10, 117, 117, 10, 10, 10, 10, 10, 90, 4};</code>. I hope you know what you are doing with them.</p>\n\n<p>AND can we have some other array name instead,please :)\nreplace all <code>xor</code> by <code>xyznotkeyword</code></p>\n"}], "owner": {"reputation": 77, "user_id": 5513712, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10201232391490027/picture?type=large", "display_name": "anony", "link": "https://stackoverflow.com/users/5513712/anony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449062175, "creation_date": 1449060626, "last_edit_date": 1449061452, "question_id": 34043222, "link": "https://stackoverflow.com/questions/34043222/xoring-arrays-of-chars", "title": "XOR&#39;ing arrays of chars", "body": "<p>I am a beginner to C programming and using devc. So I am trying to XOR one half of an array with the other half. I created one array of 3018 words which are taken as chars, and then try to XOR them. From looking around, I did as much as I can but it ain't working and neither do I understand exactly how to XOR.. </p>\n\n<p>If I have an array of 3018 numbers, i XOR the first 1509 numbers with the second 1509 numbers.. how can I do this??</p>\n\n<pre><code>int main(void)\n{\nint i = 0;\nchar message[3018] = {10, 117, 117, 10, 10, 10, 10, 10..}; \nchar xor[1509];\n\n    for(i=0; i&lt;1510;i++)\n\n\nxor[i] = (char)(message[i] ^ message[i+1509]);\n\n// Enter your code here...\n\nwhile(1);\nreturn 0;\n}\n</code></pre>\n\n<p>IMPORTANT: I cut off the </p>\n\n<pre><code>char message[3018] = {10, 117, 117, 10, 10, 10, 10, 10..}; \n</code></pre>\n\n<p>line because there are obviously 3018 words that are inputted, I cannot show them all so I just used ...</p>\n\n<p>there are some problems in the code above, for eg.<br>\nin the char message[3018] line, says unexpected unqualified id before xor token?\nunexpected primary expression before 'xor' token in the xor[i] line..</p>\n"}, {"tags": ["c", "arrays", "function", "if-statement"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1449132581, "post_id": 34043165, "comment_id": 55876232, "body": "there are a number of errors and warnings raised by the compiler.  Always compile with all warnings enabled.  (for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code> )"}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1449060821, "creation_date": 1449060821, "answer_id": 34043293, "question_id": 34043165, "link": "https://stackoverflow.com/questions/34043165/keeping-score-in-a-guessing-game-without-limits-in-c/34043293#34043293", "title": "keeping score in a guessing game without limits in C", "body": "<p>Test the return value of <code>fopen()</code></p>\n\n<pre><code>FILE *fscore = fopen(\"score.txt\", \"r\");\nif (fscore == NULL) /* file does not exist\n                    ** no games have been played */\n                    return -1;\n</code></pre>\n\n<p>Then, in the main program, test for a result of <code>-1</code></p>\n\n<pre><code>        else if(menu == 3){\n            int score = readScore();\n            if (score &lt; 0) printf(\"No games have been played.\\n\");\n            else printf(\"\\nThe best score is: %d\\n\", score);\n        }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1449064729, "post_id": 34044435, "comment_id": 55843584, "body": "Could you consider using less bold and fewer exclamation points? It&#39;s distracting and detracts from the professionalism of the site, in my opinion."}], "tags": [], "owner": {"reputation": 1253, "user_id": 5611227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jzZLsbAYX6o/AAAAAAAAAAI/AAAAAAAAAA0/sKiXWXVyiso/photo.jpg?sz=128", "display_name": "Pax", "link": "https://stackoverflow.com/users/5611227/pax"}, "is_accepted": false, "score": 0, "last_activity_date": 1449064744, "last_edit_date": 1449064744, "creation_date": 1449064271, "answer_id": 34044435, "question_id": 34043165, "link": "https://stackoverflow.com/questions/34043165/keeping-score-in-a-guessing-game-without-limits-in-c/34044435#34044435", "title": "keeping score in a guessing game without limits in C", "body": "<p>Here! you have created a variable <strong>score</strong> and it has no defined value and may contain large <strong>garbage value</strong> lets say <em>123456</em>!! Hence <strong><em>counter is always less than score</em></strong>!! So your program will save the new high score!!</p>\n\n<p>Now your program will run a new cycle!! but still it won't have your <strong>highscore</strong> in the int <strong>score</strong>! Cuz you haven't declared what <strong>score</strong> value is!! Thus it again uses <strong>score</strong> as <em>123456</em>!! Even if your new score is more than your <strong>last highscore</strong>!! It will replace your <strong>last highscore</strong>.....</p>\n\n<p>To do so:</p>\n\n<p><strong>1. Assign your (int) score with the last highscore while running main</strong></p>\n\n<pre><code>int main(){\n....//all your declarations;\n    FILE* fscore;\n    fscore = fopen(\"score.txt\", \"r\");\n    if(fscore!=NULL){\n        fscanf(fscore, \"%d\", &amp;score);\n    }\n    else if(fscore == NULL){           //if you haven't got any score in score.txt\n        score = //lets_put_a_large_random_value;\n    }\n    fclose(fscore);\n    // Now all the remaining codes begins....\n}\n</code></pre>\n\n<p>I've also found some minor bugs in your programs:-</p>\n\n<p><strong>i. If your program choose menu == 1, the program will terminate after taking user name</strong></p>\n\n<p><strong>ii. void savescore(int score); doesn't need a return value..</strong></p>\n\n<p><strong>iii. You are declaring same <em>int score</em> twice in main() function</strong></p>\n\n<p>Hope Your programs work fine now!! </p>\n"}], "owner": {"reputation": 3, "user_id": 5630285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f34d30ecd2e1c9482353ef581f13333?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Al-Masri", "link": "https://stackoverflow.com/users/5630285/anas-al-masri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1995, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449064744, "creation_date": 1449060440, "last_edit_date": 1449060597, "question_id": 34043165, "link": "https://stackoverflow.com/questions/34043165/keeping-score-in-a-guessing-game-without-limits-in-c", "title": "keeping score in a guessing game without limits in C", "body": "<p>I'm practicing C programming by making a simple guessing game. I found the problem in some notes and it is as follows:</p>\n\n<p>\"Write an application which plays a number guessing game: the program picks a random number between one and one hundred. The user then guesses the number and the program tells the user whether the number is higher or lower than their guess, until the user guesses correctly. Once the user has guessed the number correctly, the program should tell the user how many guesses it took, and offer to play the game again. The guesses become the score of the player. Minimum guesses become the highest score.\"</p>\n\n<p>I coded the game and it works properly. I made a separate function to save the highest score (least guesses) in an external file and it works. The problem is that it rewrites the highest score every time. I thought of initializing the highest score to 1, but the number of guesses cannot be less than that. Note that the number of guesses is not limited.\nHow can I resolve this issue?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint readScore(void);\nvoid saveScore(int score);\n\nint main(){\n    int menu=0;\n    char name[16];\n    int counter=0;\n    int rand_num, score;\n    int guess=0;\n\n    FILE *fscore;\n\n    while(menu != 4){\n        printf(\"\\n\\n****** NUMBER GUESSING GAME MENU v1.0 ******\\n\");\n        printf(\"\\t1.Create Player Name.\\n\\t2.Play.\\n\\t3.View Score.\\n\\t4.Quit.\\n\");\n        printf(\"***************************************\\n\");\n        printf(\"Your Choice: \");\n        scanf(\"%d\", &amp;menu);\n\n        if(menu == 1){\n            printf(\"Enter a player name: \");\n            scanf(\"%15s\", name);\n        }\n        else if(menu == 2){\n            srand(time(NULL));\n            rand_num = 1 + rand()%100;\n            while(guess != rand_num){\n                printf(\"\\nGuess the number picked: \");\n                scanf(\"%d\", &amp;guess);\n                if(guess &gt; rand_num){\n                    printf(\"\\nNumber is smaller than your guess.\");\n                }\n                else if(guess &lt; rand_num){\n                    printf(\"\\nNumber is greater than your guess.\");\n                }\n                counter++;\n            }\n            printf(\"\\nYour guess is correct!!\\n\");\n            printf(\"Number of guesses: %d\\n\", counter);\n            if(counter &lt; score){\n                saveScore(counter);\n            }\n        }\n        else if(menu == 3){\n            int score = readScore();\n            printf(\"\\nThe best score is: %d\\n\", score);\n        }\n    }\n    return 0;\n}\nint readScore(void){\n    // Read the score from file\n    FILE *fscore = fopen(\"score.txt\", \"r\");\n    int score=1;\n    fscanf(fscore, \"%d\", &amp;score);\n    fclose(fscore);\n    return score;\n}\n\nvoid saveScore(int score){\n    // Save the score to file\n    FILE *fscore = fopen(\"score.txt\", \"w+\");\n    fprintf(fscore, \"%d\", score);\n    fclose(fscore);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "encryption", "openssl", "public-key-encryption"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1449062238, "post_id": 34042899, "comment_id": 55841897, "body": "What is your question?"}, {"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1449062267, "post_id": 34042899, "comment_id": 55841920, "body": "it gives me back error. why does it?"}], "answers": [{"comments": [{"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1449066095, "post_id": 34044895, "comment_id": 55844559, "body": "thank you very very much. and i have additional question if you could answer. Can i encrypt any kind of file with this? i mean if i use example.jpg instead of test.txt would it work?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 1, "creation_date": 1449066294, "post_id": 34044895, "comment_id": 55844700, "body": "@Ojs Yes, this will work with any file, regardless of contents.  That&#39;s why it&#39;s important to not treat the data as strings."}, {"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1449066385, "post_id": 34044895, "comment_id": 55844765, "body": "and one more please :) how secure is this algorithm?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 1, "creation_date": 1449066477, "post_id": 34044895, "comment_id": 55844825, "body": "RSA is generally a secure algorithm when used with the proper padding (which you are using).  Just be sure to handle the key in a secure manner."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1449065568, "last_edit_date": 1495542221, "creation_date": 1449065568, "answer_id": 34044895, "question_id": 34042899, "link": "https://stackoverflow.com/questions/34042899/c-openssl-rsa-private-decrypt-fails-with-error0407a079rsa-routinesrsa-pad/34044895#34044895", "title": "C: OpenSSL RSA_private_decrypt() fails with &quot;error:0407A079:rsa routines:RSA_padding_check_PKCS1_OAEP:oaep decoding error\u201d", "body": "<p>There are a few errors here.  First when you're reading and encrypting:</p>\n\n<pre><code>red = fread(msg, 1, RSA_size(keypair)-42, in);\nif((RSA_public_encrypt(RSA_size(keypair)-42, (unsigned char*)msg, (unsigned char*)encrypt,\n                                     keypair, RSA_PKCS1_OAEP_PADDING)) == -1) {\n</code></pre>\n\n<p>A call to <code>fread</code> won't necessarily read the number of bytes asked for, and could return 0.  So when you reach the end of the file, you man be encrypting more bytes than you need.  So pass in <code>red</code> for the number of bytes to encrypt.  Also, first check if <code>red</code> is 0 and if so <code>break</code> out of the loop:</p>\n\n<pre><code>red = fread(msg, 1, RSA_size(keypair)-42, in);\nif (red == 0) break;\nif(((red=RSA_public_encrypt(RSA_size(keypair)-42, (unsigned char*)msg, (unsigned char*)encrypt,\n                                     keypair, RSA_PKCS1_OAEP_PADDING))) == -1) {\n</code></pre>\n\n<p>Note that we're saving the return value of <code>RSA_public_encrypt</code>.  That comes into play here where you're writing the encrypted data to disk:</p>\n\n<pre><code>if(fwrite(encrypt, 1, strlen(encrypt), out) == 1)\n</code></pre>\n\n<p><code>encrypt</code> is an array of characters, not a string.  This means it's not NULL terminated, and it might contain NULL bytes.  So you can't use <code>strlen</code>.  Instead, capture the return value of <code>RSA_public_encrypt</code> and pass that as the size to write:</p>\n\n<pre><code>if(fwrite(encrypt, 1, red, out) == 1)\n</code></pre>\n\n<p>Because we're checking the return value of <code>fread</code> to break out of the loop, this isn't needed:</p>\n\n<pre><code>if(feof(in))\n{\n    break;\n}\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">this post</a> regarding the perils of using <code>feof</code>.</p>\n\n<p>Then there's this when you're reading back the encrypted data:</p>\n\n<pre><code> red = fread(msg, 1, 256, in);\n if(RSA_private_decrypt(red, (unsigned char*)msg, (unsigned char*)decrypt,\n                       keypair, RSA_PKCS1_OAEP_PADDING) == -1) {\n</code></pre>\n\n<p><code>RSA_private_decrypt</code> expects a single encrypted block whose length is <code>RSA_size(keypair)</code>.  So read in that many bytes from disk and pass in that many bytes to the function.  Also, check the return value of <code>fread</code> and <code>break</code> out if you don't get the expected amount, and capture the return value of <code>RSA_private_decrypt</code>:</p>\n\n<pre><code> red = fread(msg, 1, RSA_size(keypair), in);\n if (red &lt; RSA_size(keypair)) break;\n if((red=RSA_private_decrypt(red, (unsigned char*)msg, (unsigned char*)decrypt,\n                       keypair, RSA_PKCS1_OAEP_PADDING)) == -1) {\n</code></pre>\n\n<p>Later when you write the decrypted data to disk:</p>\n\n<pre><code>fwrite(decrypt, 1, strlen(decrypt), out);\n</code></pre>\n\n<p>While what was decrypted is probably a string (if your input file was plain text), the returned data is not NULL terminated, so explicitly write than many bytes instead of using <code>strlen</code>:</p>\n\n<pre><code>fwrite(decrypt, 1, red, out);\n</code></pre>\n\n<p>Finally, as with the encryption loop, this is not needed in the decryption loop:</p>\n\n<pre><code>if(feof(in))\n{\n    break;\n}\n</code></pre>\n\n<p>With these fixes applied, you should get the expected results.</p>\n"}], "owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1745, "favorite_count": 1, "accepted_answer_id": 34044895, "answer_count": 1, "score": 2, "last_activity_date": 1449065568, "creation_date": 1449059664, "last_edit_date": 1449063324, "question_id": 34042899, "link": "https://stackoverflow.com/questions/34042899/c-openssl-rsa-private-decrypt-fails-with-error0407a079rsa-routinesrsa-pad", "title": "C: OpenSSL RSA_private_decrypt() fails with &quot;error:0407A079:rsa routines:RSA_padding_check_PKCS1_OAEP:oaep decoding error\u201d", "body": "<p>I'm new with cryptography, so I decided to create simple program that would open a file encrypt data, put it in etest.txt, then open this file decrypt it and put it indetest.txt.I know it sounds really weired but its for educational purposes. so here is my code. I've read many topics about this problem but none of them worked for me. </p>\n\n<pre><code>#include &lt;openssl/rsa.h&gt;\n#include &lt;openssl/pem.h&gt;\n#include &lt;openssl/err.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    size_t pri_len;            // Length of private key\n    size_t pub_len;            // Length of public key\n    char   *pri_key;           // Private key\n    char   *pub_key;           // Public key\n    char   *msg = malloc(256);  // Message to encrypt\n    char   *encrypt = NULL;    // Encrypted message\n    char   *decrypt = NULL;    // Decrypted message\n    char   *err;               // Buffer for any error messages\n    size_t red;\n\n    RSA *keypair = RSA_generate_key(2048, 3, NULL, NULL);\n     FILE *in   = fopen(\"test.txt\", \"r\");\n     FILE *out  = fopen(\"etest.txt\", \"w\");\n\n     if(in == NULL)\n     {  \n        printf(\"in Error is %d (%s).\\n\", errno, strerror(errno));\n     }\n     if(out == NULL)\n     {  \n        printf(\"out Error is %d (%s).\\n\", errno, strerror(errno));\n     }\n\n    encrypt = malloc(RSA_size(keypair));\n\n    for(;;)\n    {\n        red = fread(msg, 1, RSA_size(keypair)-42, in);\n        if((RSA_public_encrypt(RSA_size(keypair)-42, (unsigned char*)msg, (unsigned char*)encrypt,\n                                             keypair, RSA_PKCS1_OAEP_PADDING)) == -1) {\n            ERR_load_crypto_strings();\n            ERR_error_string(ERR_get_error(), err);\n            fprintf(stderr, \"Error encrypting message: %s\\n\", err);\n        }\n\n        if(fwrite(encrypt, 1, strlen(encrypt), out) == 1)\n        {\n           printf(\"fwrite Error is %d (%s).\\n\", errno, strerror(errno));\n        }\n\n        if(feof(in))\n        {\n            break;\n        }       \n    }\n\n    fclose(in);\n    fclose(out);\n\n    in   = fopen(\"etest.txt\", \"r\");\n    out  = fopen(\"dtest.txt\", \"w\");\n\n     if(in == NULL)\n     {        \n        printf(\"in Error is %d (%s).\\n\", errno, strerror(errno));\n     }\n\n     if(out == NULL)\n     {        \n        printf(\"out Error is %d (%s).\\n\", errno, strerror(errno));\n     }\n\n    decrypt = malloc(RSA_size(keypair));\n\n    for(;;)\n    {\n         red = fread(msg, 1, 256, in);\n         if(RSA_private_decrypt(red, (unsigned char*)msg, (unsigned char*)decrypt,\n                               keypair, RSA_PKCS1_OAEP_PADDING) == -1) {\n\n            ERR_load_crypto_strings();\n            ERR_error_string(ERR_get_error(), err);\n            fprintf(stderr, \"Error decrypting message: %s\\n\", err);\n        }        \n\n        fwrite(decrypt, 1, strlen(decrypt), out);\n\n        if(feof(in))\n        {\n          break;\n        }\n    }\n    fclose(in);\n    fclose(out);     \n    RSA_free(keypair);\n    return 0;\n}\n</code></pre>\n\n<p>When I run code it gives me back error saying:<code>Error decrypting message: error:0407A079:rsa routines:RSA_padding_check_PKCS1_OAEP:oaep decoding error</code> Sorry if my question sound silly. Hope you can help. Thanks. </p>\n"}, {"tags": ["c", "gnuplot", "fft"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2845360"}, "edited": false, "score": 0, "creation_date": 1449059204, "post_id": 34042601, "comment_id": 55839935, "body": "Are you absolutely sure that you&#39;re running the program in the same directory where <code>gnuplot.rsp</code> is in? It seems that you simply don&#39;t have current working directory which contains the file named so."}], "answers": [{"tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": true, "score": 2, "last_activity_date": 1449062339, "last_edit_date": 1449062339, "creation_date": 1449060899, "answer_id": 34043327, "question_id": 34042601, "link": "https://stackoverflow.com/questions/34042601/fourier-series-coefficients-gnuplot/34043327#34043327", "title": "Fourier series coefficients gnuplot", "body": "<p>here: </p>\n\n<pre><code>fprintf(rsp,\"plot '%s' using 1:2 with lines\\n\",out);  \n</code></pre>\n\n<p>you should use directly the string \"fs.out\" and not \"out\" which is a FILE pointer (and also already closed).</p>\n"}], "owner": {"reputation": 63, "user_id": 3908631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d7a01cbfb01fa1ada1ee7dbd12c5bfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3908631", "link": "https://stackoverflow.com/users/3908631/user3908631"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 0, "accepted_answer_id": 34043327, "answer_count": 1, "score": 1, "last_activity_date": 1449062339, "creation_date": 1449058781, "question_id": 34042601, "link": "https://stackoverflow.com/questions/34042601/fourier-series-coefficients-gnuplot", "title": "Fourier series coefficients gnuplot", "body": "<p>This program is supposed to find the coefficients of the fourier series, and then plot the function built from the calculated values.</p>\n\n<p>the piecewise is</p>\n\n<p>h(t)=1+(t/pi) for t&lt;0\nh(t)=1-(t/pi) for t>0</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include \"comphys.c\"\n#include \"comphys.h\"\n#define pi 3.141592653589793\n\ndouble trap1 (double l, double u, int m, int N);\ndouble trap(double l,double u,int m,int N); // Use trapezoidal method\ndouble inte(double x,int m);\ndouble integrand(double x, int m); // This is the integrand of the bms\ndouble w=1.0; //omega (here - w-2pi/Period where Period=2pi)\nint main()\n{\n  FILE *out,*rsp;\n  int m; // Index of the b coefficients\n  int M=5; // Number of coeeficients to compute\n  int T=201;  // Number of time steps \n  int t; // This is a counter to keep track of the h(t) function to plot\n  double *b,*h,j,dj,*a,a0;\n  double ll,ul;\n  a=dvector(1,M);\n  b=dvector(1,M);  // coefficients\n  h=dvector(1,T);  // function built from Fourier terms\n  ll=-pi;  // lower time limit\n  ul=pi;   // upper time limit\n\n  // Prepare to write for plotting\n  printf(\"\\nBrute force complex Fourier transform algorithm\");\n  if ((out=fopen(\"fs.out\",\"w\"))==NULL) {\n    printf(\"\\nCannot open file for output\\n\");\n    getchar();\n    return(0);          \n  }\n\n  // Loop through the wave numbers    \n  for (m=1;m&lt;=M;m++)\n    {\n      b[m]=(1.0/pi)*trap(ll,ul,m,T);\n      a[m]=(1.0/pi)*trap1(ll,ul,m,T);\n      printf(\"\\nb[%d]=%f   a[%d]=%f\",m,b[m],m,a[m]);\n\n      // Build the h(t) function as we go\n      t=0;\n      dj=(ul-ll)/(double)T;\n      for (j=ll;j&lt;=ul;j+=dj)\n    {\n      t++;\n      h[t]+=(b[m]*sin((double)m*w*j))+(a[m]*cos((double)m*w*j));\n    }\n    }\n\n  // Write out for plotting\n  t=0;\n  for (j=ll;j&lt;=ul;j+=dj)\n    {\n      t++;\n      fprintf(out,\"%f %f\\n\",j,h[t]);\n    }\n  fclose(out);\n  printf(\"\\nProgram complete without known error.\\n\");\n\n  if((rsp = fopen(\"gnuplot.rsp\",\"w\")) == NULL)\n    {\n      printf(\"\\nCannot open gnuplot.rsp for writing\\n\");\n      exit(1);\n    }\n  fprintf(rsp,\"plot '%s' using 1:2 with lines\\n\",out);\n  fprintf(rsp,\"pause mouse\\n\");\n  fprintf(rsp,\"replot\\n\");\n  fclose(rsp);\n  if(system(\"gnuplot gnuplot.rsp\") == -1)\n    {\n      printf(\"\\nCommand could not be executed\\n\");\n      exit(1);\n    }\n  return;\n}\n\ndouble trap (double l, double u, int m, int N)\n\n{\n  double x,integral,dx;\n  int i;\n\n  if (u==l) return (0.0);\n  dx=(u-l)/(double)(N-1);\n\n  integral=0.0;\n  integral+=0.5*(integrand(u,m)-integrand(l,m));\n  x=l+dx;\n  for (i=1;i&lt;N;i++)\n    {\n      integral += integrand(x,m);\n      x+=dx;\n    }\n  integral*=dx;\n  printf(\"\\n%f\\n\",integral);\n  return(integral);\n}\n\ndouble trap1 (double l, double u, int m, int N)\n{\n  double x,integral,dx;\n  int i;\n\n  if (u==l) return (0.0);\n  dx=(u-l)/(double)(N-1);\n\n  integral=0.0;\n  integral+=0.5*(inte(u,m)-inte(l,m));\n  x=l+dx;\n  for (i=1;i&lt;N;i++)\n    {\n      integral += inte(x,m);\n      x+=dx;\n    }\n  integral*=dx;\n  return(integral);\n}\n\n\ndouble integrand(double x, int m)\n{\n  if (x&lt;0) return (sin((double)m*w*x)+((x/pi)*sin((double)m*w*x)));\n  return(sin((double)m*w*x)-((x/pi)*sin((double)m*w*x)));\n}\n\ndouble inte(double x,int m)\n{\n  if (x&lt;0) return (cos((double)m*w*x)+((x/pi)*cos((double)m*w*x)));\n  return(cos((double)m*w*x)-((x/pi)*cos((double)m*w*x)));\n}\n</code></pre>\n\n<p>The problem I am have is, it compiles fine and list out the coefficients(No idea if they are right or anything), but at the end when trying to plot it gives me </p>\n\n<p>\"cant read data file \"?,??\"\n\"gnuplot.rsp\", line:1 util.c: No such file or directory\"</p>\n\n<p>And I dont know how to fix that. Ive plotted plenty of programs with gnuplot, so it shouldnt be a missing file or anything.</p>\n"}, {"tags": ["c", "pointers", "struct", "char"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1449057897, "post_id": 34042222, "comment_id": 55839109, "body": "And the memory pointed to by <code>node-&gt;children-&gt;content</code> will stay valid the entire time you need it? You don&#39;t <code>free</code> it anywhere before you use <code>xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem</code>? How do you check the contents of the memory? Where do you check it? <code>node-&gt;children-&gt;content</code> <i>have</i> ben initialized to point to valid allocated memory? Why do you cast the pointer? Can you show us the structure definitions, or at least the relevant parts? If you remove the cast, do you get any compiler warnings or errors? What if you enable more warnings (add <code>-Wall -Wextra -pedantic</code> if using GCC or Clang)?"}, {"owner": {"reputation": 1724, "user_id": 3241687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d947e2e67319fa6adcf088098adf3079?s=128&d=identicon&r=PG&f=1", "display_name": "horns", "link": "https://stackoverflow.com/users/3241687/horns"}, "edited": false, "score": 0, "creation_date": 1449058004, "post_id": 34042222, "comment_id": 55839185, "body": "You should not <code>printf</code> a string directly, it could cause a problem if there are formatting characters in the string."}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449058212, "post_id": 34042222, "comment_id": 55839306, "body": "I&#39;m fairly new to C, but I suspect what you are saying is that because -&gt;AdSystem is effectively pointing to a value created by node, when the node is free&#39;d up, so is the value? Is that correct?  I am checking the value in my main procedure, I first parse the xml doc, free the doc, then return the xmlFile.  In this case, what is the best way to assign this value? I suspect creating a direct copy is the correct method?"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449058237, "post_id": 34042222, "comment_id": 55839320, "body": "No warnings if I remove the cast"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449058289, "post_id": 34042222, "comment_id": 55839357, "body": "Code:  <code>struct daastInline {  \tchar *AdTitle; \tchar *Impression; \tVectorCreatives Creatives; \tchar *Category;  \t&#47;&#47; Optional elements \tchar *AdSystem; \tchar *Description; \tchar *Advertiser; \tchar *Expires; \tchar *Pricing; };</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1449058378, "post_id": 34042222, "comment_id": 55839403, "body": "Are you checking <code>xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem</code> before or <i>after</i> the assignment? Oh, and please don&#39;t add code in comments, please edit your question to include that instead."}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449058624, "post_id": 34042222, "comment_id": 55839559, "body": "I&#39;m checking it after the assignment"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449059002, "post_id": 34042222, "comment_id": 55839813, "body": "OK - If I don&#39;t free up my xmlDocPtr, the value is correctly displayed. So I guess I just need to directly copy the string value in the node to the struct property. What is the best way to do this?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449059052, "post_id": 34042222, "comment_id": 55839845, "body": "Why do you think you have to cast the value in the assignment? Generally casts are not a good idea, since they may just hide problems, instead of solving them."}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449059296, "post_id": 34042222, "comment_id": 55840004, "body": "@JensGustedt, I have to make the cast otherwise I receive a warning : pointer targets in assignment differ in signedness. But, I don&#39;t think this is causing my errors"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449061518, "post_id": 34042222, "comment_id": 55841435, "body": "@GlennCooper, at least it shows that you have a conceptual problem somewhere. <code>char</code>, <code>signed char</code> and <code>unsigned char</code> are all different types and for good reasons."}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449061569, "post_id": 34042222, "comment_id": 55841460, "body": "For a simple problem, this seems overly complicated? All I want to do is assign a value from the node to my struct property"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449061809, "post_id": 34042222, "comment_id": 55841625, "body": "The <code>node-&gt;children-&gt;content</code> is of type xmlChar, that&#39;s why the cast is required. <a href=\"http://www.xmlsoft.org/html/libxml-xmlstring.html#xmlChar\" rel=\"nofollow noreferrer\">xmlsoft.org/html/libxml-xmlstring.html#xmlChar</a>"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449066312, "post_id": 34042222, "comment_id": 55844716, "body": "See above edit for header and source"}], "answers": [{"comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1449061122, "post_id": 34043319, "comment_id": 55841180, "body": "No, it is not. 1) you cast the result of <code>malloc()</code>, don&#39;t do that. 2) you allocate one byte of memory, which is already used by the <code>nul</code> in the end of the string. So you must only empty strings for this to <i>not</i> go over the memory allocated. You must allocate the proper amount of memory."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1449061134, "post_id": 34043319, "comment_id": 55841190, "body": "You need to allocate enough memory. Should be <code>malloc(strlen(nodeValue)+1);</code>. That being said, you need to study the basics of strings before doing things like this."}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 1, "creation_date": 1449061494, "post_id": 34043319, "comment_id": 55841420, "body": "Back to the original problem, does anyone have a simple and effective manner to assign a value from the node value? This seems to be more complicated than it should be"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449061644, "post_id": 34043319, "comment_id": 55841510, "body": "@GlennCooper, for us it is complicated because you are not showing us everything. Produce a minimal complete example such that we see all your types and that we even might compile it ourselves. <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "edited": false, "score": 0, "creation_date": 1449061913, "post_id": 34043319, "comment_id": 55841683, "body": "xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem is simply nested structs. The node-&gt;children-&gt;content is of type xmlChar (<a href=\"http://www.xmlsoft.org/html/libxml-xmlstring.html#xmlChar\" rel=\"nofollow noreferrer\">xmlsoft.org/html/libxml-xmlstring.html#xmlChar</a>). All I need to do is assign a string value from the node to my struct"}, {"owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1449066330, "post_id": 34043319, "comment_id": 55844729, "body": "@JensGustedt - see above for header and source"}], "tags": [], "owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "is_accepted": false, "score": 1, "last_activity_date": 1449060870, "creation_date": 1449060870, "answer_id": 34043319, "question_id": 34042222, "link": "https://stackoverflow.com/questions/34042222/char-producing-unexpected-results-from-procedure-in-nested-structs/34043319#34043319", "title": "char* producing unexpected results from procedure in nested structs", "body": "<p>OK,</p>\n\n<p>I've fixed the error, but it doesn't look the cleanest of code, maybe someone can advise if this is fine?</p>\n\n<pre><code>char *nodeValue = (char*) node-&gt;children-&gt;content;\nxmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = (char *) malloc (sizeof(char));\nstrcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem, nodeValue);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1498804564, "creation_date": 1498804564, "answer_id": 44840077, "question_id": 34042222, "link": "https://stackoverflow.com/questions/34042222/char-producing-unexpected-results-from-procedure-in-nested-structs/44840077#44840077", "title": "char* producing unexpected results from procedure in nested structs", "body": "<blockquote>\n  <p>I've fixed the error, but it doesn't look the cleanest of code, maybe\n  someone can advise if this is fine?</p>\n\n<pre><code>char *nodeValue = (char*) node-&gt;children-&gt;content;\nxmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = (char *) malloc (sizeof(char));\nstrcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem, nodeValue);\n</code></pre>\n</blockquote>\n\n<p>Sami Kuhmonen and Lundin already noted that the allocated size isn't.</p>\n\n<blockquote>\n  <p>Back to the original problem, does anyone have a simple and effective\n  manner to assign a value from the node value? This seems to be more\n  complicated than it should be</p>\n</blockquote>\n\n<p>You're right; if you have a POSIX system, the above can be simplified by use of <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strdup.html\" rel=\"nofollow noreferrer\"><code>strdup()</code></a>:</p>\n\n<pre><code>xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = strdup((char *)node-&gt;children-&gt;content);\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4000392, "user_type": "registered", "accept_rate": 32, "profile_image": "https://graph.facebook.com/100000131895045/picture?type=large", "display_name": "Glenn Cooper", "link": "https://stackoverflow.com/users/4000392/glenn-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498804564, "creation_date": 1449057604, "last_edit_date": 1449066624, "question_id": 34042222, "link": "https://stackoverflow.com/questions/34042222/char-producing-unexpected-results-from-procedure-in-nested-structs", "title": "char* producing unexpected results from procedure in nested structs", "body": "<p>I am developing a few procedures that is retrieving certain values from an xml doc, and using nested struct pointers to help me manage the data.</p>\n\n<p>I am experiencing unexpected behaviour from a string value within one of my structs:</p>\n\n<p>This is the procedure:</p>\n\n<pre><code>void parseInlineElements(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\ndo {\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"AdSystem\")) == 0){\n\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = (char *)node-&gt;children-&gt;content; // does not work - displays \ufffd9;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = \"Works\"; // works\n        printf ((char *)node-&gt;children-&gt;content); // works\n    }\n    else if (xmlStrcmp (node-&gt;name, XMLSTR(\"Creatives\")) == 0){\n        parseCreatives (doc, node-&gt;children, xmlFile);\n    }\n\n    } while((node = node-&gt;next));\n\n}\n</code></pre>\n\n<p>This is the line that I am having issues with:</p>\n\n<pre><code>xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = (char *)node-&gt;children-&gt;content;\n</code></pre>\n\n<p>When I test the result in my program, the value looks like it's not pointing to the right place in memory as it produces garbage, i.e. : \"\ufffd9\" where the expected value is \"Ad System\"</p>\n\n<p>If I store a test value \"Works\" - no problems here</p>\n\n<p>And if I even print the node value, this also works : \"Ad System\"</p>\n\n<p>Thanks in advance</p>\n\n<p> - HEADER FILE</p>\n\n<pre><code>/*\n* daastXML.h\n *\n *  Created on: Nov 27, 2015\n *      Author: hearme\n */\n\n#ifndef DAASTXML_H_\n#define DAASTXML_H_\n\n#define VECTOR_INITIAL_CAPACITY 100\n\n// Define a vector type\ntypedef struct {\n    int size;               // slots used so far\n    int capacity;           // total available slots\n    struct daastAd *data;     // array of ads we're storing\n\n    char * testData;\n} VectorAds;\n\ntypedef struct {\n    int size;               // slots used so far\n    int capacity;           // total available slots\n    struct daastCreative *data;     // array of ads we're storing\n} VectorCreatives;\n\ntypedef struct {\n    int size;\n    int capacity;\n    struct daastMediaFile *data;\n} VectorMediaFiles;\n\n\nstruct daastInline {\n\n    // Required elements\n    char *AdTitle;\n    char *Impression;\n    VectorCreatives *Creatives;\n    char *Category;\n\n    // Optional elements\n    char *AdSystem;\n    char *Description;\n    char *Advertiser;\n    char *Expires;\n\n    // Multiple survey urls\n    // Multiple error urls\n\n    char *Pricing;\n\n    // Extensions - for custom xml extensions\n\n};\n\nstruct daastXML {\n    char *version;\n    VectorAds *Ads;\n};\n\nstruct daastAd {\n    char *id;\n    char *sequence;\n    struct daastInline *Inline;\n};\n\nstruct daastMediaFile {\n    char *id;\n    char *delivery;\n    char *type;\n    char *url;\n    char *bitRate;\n};\n\nstruct daastLinear {\n    char *duration;\n    VectorMediaFiles MediaFiles;\n\n};\n\nstruct daastCreative {\n    struct daastLinear linear;\n};\n\n\n\n// Main handler\nvoid processDaast (char * filePath, struct daastXML *xmlFile);\n\n\n\n// Methods used to manage Ads collection\nvoid vectorAds_init(VectorAds *vector);\nvoid vectorAds_append(VectorAds *vector, struct daastAd value);\nstruct daastAd vectorAds_get(VectorAds *vector, int index);\nvoid vectorAds_set(VectorAds *vector, int index, struct daastAd value);\nvoid vectorAds_double_capacity_if_full(VectorAds *vector);\nvoid vectorAds_free(VectorAds *vector);\n\n// Methods used to manage Creatives collection\nvoid vectorCreatives_init(VectorCreatives *vector);\nvoid vectorCreatives_append(VectorCreatives *vector, struct daastCreative value);\nstruct daastCreative VectorCreatives_get(VectorCreatives *vector, int index);\nvoid vectorCreatives_set(VectorCreatives *vector, int index, struct daastCreative value);\nvoid vectorCreatives_double_capacity_if_full(VectorCreatives *vector);\nvoid vectorCreatives_free(VectorCreatives *vector);\n\n// Methods used to manage Creatives collection\nvoid vectorMediaFiles_init(VectorMediaFiles *vector);\nvoid vectorMediaFiles_append(VectorMediaFiles *vector, struct daastMediaFile value);\nstruct daastMediaFile vectorMediaFiles_get(VectorMediaFiles *vector, int index);\nvoid vectorMediaFiles_set(VectorMediaFiles *vector, int index, struct daastMediaFile value);\nvoid vectorMediaFiles_double_capacity_if_full(VectorMediaFiles *vector);\nvoid vectorMediaFiles_free(VectorMediaFiles *vector);\n\n\n#endif /* DAASTXML_H_ */\n</code></pre>\n\n<p>C File\n    /*\n     * daastXML.c\n     *\n     *  Created on: Nov 27, 2015\n     *      Author: hearme\n     */</p>\n\n<pre><code>#ifndef DAASTXML_C_\n#define DAASTXML_C_\n\n#define XMLSTR(str) ((xmlChar *)(str))\n\n#include \"daastXML.h\"\n#include &lt;libxml/xmlmemory.h&gt;\n#include &lt;libxml/parser.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid parseAds(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\nvoid parseInline(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\nvoid parseInlineElements(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\nvoid parseCreatives(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\nvoid parseCreativesElements(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\nvoid parseCreativeElements(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\nvoid parseLinear (xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\nvoid parseMediaFiles (xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile);\n\n\nvoid processDaast (char * filePath, struct daastXML *xmlFile){\n\n    xmlDocPtr doc;\n    xmlNodePtr node;\n\n    doc = xmlParseFile(filePath);\n    node = xmlDocGetRootElement(doc);\n\n\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"DAAST\")) == 0){\n\n        xmlFile-&gt;version = (char *)xmlGetProp(node, XMLSTR(\"version\"));\n        parseAds(doc, node-&gt;children, xmlFile);\n\n    }\n\n    xmlFreeDoc(doc);\n\n}\n\nvoid parseAds(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\n    // Allocate new instance of the VectorAds and assign it to the xmlFile, set default data\n    VectorAds *Ads;\n    Ads = (VectorAds *) malloc (sizeof(VectorAds));\n\n    Ads-&gt;testData = \"testData\";\n    xmlFile-&gt;Ads = Ads;\n\n    // Initialise the vector\n    vectorAds_init(xmlFile-&gt;Ads);\n\n\n\n    do {\n        if (node == NULL) break;\n        if (xmlIsBlankNode(node)) continue;\n\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"Ad\")) == 0) {\n\n        // Set up new advert\n        struct daastAd *newAd;\n        newAd = (struct daastAd *) malloc (sizeof(struct daastAd));\n\n        // Set add properties\n        newAd-&gt;id = (char *)xmlGetProp(node, XMLSTR(\"id\"));\n        newAd-&gt;sequence = (char *)xmlGetProp(node, XMLSTR(\"sequence\"));\n\n        vectorAds_append(xmlFile-&gt;Ads, *newAd);\n\n        // At this point we need to get the inline (or wrapper) info *** WRAPPER NOT INTEGRATED ***\n        parseInline (doc, node-&gt;children, xmlFile);\n\n    }\n} while ((node = node-&gt;next));\n\n\n}\n\nvoid parseInline (xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\n\n// Set up Inline Property Here\nstruct daastInline *Inline;\nInline = (struct daastInline *) malloc (sizeof(struct daastInline));\n\n// Assing Inline Property\nxmlFile-&gt;Ads-&gt;data-&gt;Inline = Inline;\n\ndo {\n    if (node-&gt;type == XML_ELEMENT_NODE){\n        if (xmlStrcmp (node-&gt;name, XMLSTR(\"InLine\")) == 0){\n\n            // Various parses at this level\n            parseInlineElements(doc, node-&gt;children, xmlFile);\n            //xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = \"AdSystem\";\n\n            // Should this be here?\n            //parseCreatives (doc, node-&gt;children, xmlFile);\n\n            break;\n        }\n    }\n} while((node = node-&gt;next));\n}\n\nvoid parseInlineElements(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\n// loop through Inline child elements, and pick out the values\n//*\ndo {\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"AdSystem\")) == 0){\n        char *nodeValue = (char *) node-&gt;children-&gt;content;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem = malloc (sizeof(char));\n        strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdSystem, nodeValue);\n    }\n    else if (xmlStrcmp (node-&gt;name, XMLSTR(\"AdTitle\")) == 0){\n        char *nodeValue = (char *) node-&gt;children-&gt;content;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdTitle = malloc (sizeof(char));\n        strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;AdTitle, nodeValue);\n    }\n    else if (xmlStrcmp (node-&gt;name, XMLSTR(\"Category\")) == 0){\n        char *nodeValue = \"\";\n        nodeValue = (char *) node-&gt;children-&gt;content;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Category = malloc (sizeof(char));\n        strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Category, nodeValue);\n    }\n    else if (xmlStrcmp (node-&gt;name, XMLSTR(\"Advertiser\")) == 0){\n        char *nodeValue = (char *) node-&gt;children-&gt;content;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Advertiser = malloc (sizeof(char));\n        strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Advertiser, nodeValue);\n    }\n    else if (xmlStrcmp (node-&gt;name, XMLSTR(\"Pricing\")) == 0){\n        char *nodeValue = (char *) node-&gt;children-&gt;content;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Pricing = malloc (sizeof(char));\n        strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Pricing, nodeValue);\n    }\n    else if (xmlStrcmp (node-&gt;name, XMLSTR(\"Expires\")) == 0){\n        char *nodeValue = (char *) node-&gt;children-&gt;content;\n        xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Expires = malloc (sizeof(char));\n        strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Expires, nodeValue);\n    }\n//      else if (xmlStrcmp (node-&gt;name, XMLSTR(\"Impression\")) == 0){\n//          char *nodeValue = (char *) node-&gt;children-&gt;next-&gt;content;\n//          xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Impression = malloc (sizeof(char));\n//          strcpy (xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Impression, nodeValue);\n//\n//      }\n    else if (xmlStrcmp (node-&gt;name, XMLSTR(\"Creatives\")) == 0){\n        parseCreatives (doc, node-&gt;children, xmlFile);\n    }\n\n} while((node = node-&gt;next));\n\n}\n\n\nvoid parseCreatives(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\n// Need to set up a new Creatives and assign it to the nested struct pointer\nVectorCreatives *Creatives;\nCreatives = (VectorCreatives *) malloc (sizeof(VectorCreatives));\n\nVectorAds *Ads;\nAds = (VectorAds *) malloc (sizeof(VectorAds));\n\nxmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives = Creatives;\n\nvectorCreatives_init(xmlFile-&gt;Ads-&gt;data-&gt;Inline-&gt;Creatives);\n\n//*parseCreativesElements(doc, node-&gt;next, xmlFile);\n\n}\n\n\nvoid parseCreativesElements(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\ndo {\n\n    // Loop through the creatives - find the individual Creatives\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"Creative\")) == 0){\n\n        // Various parses at this level\n        parseCreativeElements(doc, node-&gt;children, xmlFile);\n    }\n\n} while ((node = node-&gt;next));\n}\n\nvoid parseCreativeElements(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\ndo {\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"Linear\")) == 0){\n        // Linear branch\n        parseLinear(doc, node-&gt;children, xmlFile);\n\n    } else if (xmlStrcmp (node-&gt;name, XMLSTR(\"CompanionAds\")) == 0){\n        // Companion Ad branch\n\n    }\n} while ((node = node-&gt;next));\n\n}\n\nvoid parseLinear(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\ndo {\n\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"Duration\")) == 0){\n\n        struct daastCreative newCreative;\n\n        //*newCreative.linear.duration = node-&gt;children-&gt;content;\n\n        //*vectorCreatives_append(&amp;xmlFile-&gt;Ads.data-&gt;Inline.Creatives, newCreative);\n\n    } else if (xmlStrcmp (node-&gt;name, XMLSTR(\"MediaFiles\")) == 0){\n        //parseMediaFiles(doc,node-&gt;children,xmlFile);\n    }\n} while ((node = node-&gt;next));\n\n}\n\n\nvoid parseMediaFiles(xmlDocPtr doc, xmlNodePtr node, struct daastXML *xmlFile){\n\n//* vectorMediaFiles_init(&amp;xmlFile-&gt;Ads.data-&gt;Inline.Creatives.data-&gt;linear.MediaFiles);\n\ndo {\n\n    // Store all occurrences of Media Files\n    if (xmlStrcmp (node-&gt;name, XMLSTR(\"MediaFile\")) == 0){\n\n        // Create a new Media File, and append\n        struct daastMediaFile newMediaFile;\n\n        newMediaFile.url = (char *) node-&gt;children-&gt;next-&gt;content;\n\n        newMediaFile.id = (char *)xmlGetProp(node, XMLSTR(\"id\"));\n        newMediaFile.type = (char *)xmlGetProp(node, XMLSTR(\"type\"));\n        newMediaFile.bitRate = (char *)xmlGetProp(node, XMLSTR(\"bitrate\"));\n        newMediaFile.delivery = (char *)xmlGetProp(node, XMLSTR(\"delivery\"));\n\n        //*vectorMediaFiles_append(&amp;xmlFile-&gt;Ads.data-&gt;Inline.Creatives.data-&gt;linear.MediaFiles, newMediaFile);\n\n    }\n} while ((node = node-&gt;next));\n\n}\n\n\n// ***************************************************************\n// ***************************************************************\n// ***************************************************************\n// ***************************************************************\n\n\n// Methods to manage collection (Ads)\n\nvoid vectorAds_init(VectorAds *vector) {\n  // initialize size and capacity\n  vector-&gt;size = 0;\n  vector-&gt;capacity = VECTOR_INITIAL_CAPACITY;\n\n  // allocate memory for vector-&gt;data\n  vector-&gt;data = malloc(sizeof(struct daastAd) * vector-&gt;capacity);\n}\n\nvoid vectorAds_append(VectorAds *vector, struct daastAd value) {\n  // make sure there's room to expand into\n  vectorAds_double_capacity_if_full(vector);\n\n  // append the value and increment vector-&gt;size\n  vector-&gt;data[vector-&gt;size++] = value;\n}\n\nstruct daastAd vectorAds_get(VectorAds *vector, int index) {\n  if (index &gt;= vector-&gt;size || index &lt; 0) {\n    printf(\"Index %d out of bounds for vector of size %d\\n\", index, vector-&gt;size);\n    exit(1);\n  }\n  return vector-&gt;data[index];\n}\n\nvoid vectorAds_set(VectorAds *vector, int index, struct daastAd value) {\n  // zero fill the vector up to the desired index\n  struct daastAd zero;\n  while (index &gt;= vector-&gt;size) {\n    vectorAds_append(vector, zero);\n  }\n\n  // set the value at the desired index\n  vector-&gt;data[index] = value;\n}\n\nvoid vectorAds_double_capacity_if_full(VectorAds *vector) {\n  if (vector-&gt;size &gt;= vector-&gt;capacity) {\n    // double vector-&gt;capacity and resize the allocated memory accordingly\n    vector-&gt;capacity *= 2;\n    vector-&gt;data = realloc(vector-&gt;data, sizeof(struct daastAd) * vector-&gt;capacity);\n  }\n}\n\nvoid vectorAds_free(VectorAds *vector) {\n  free(vector-&gt;data);\n}\n\n\n// Methods to manage Creatives Vector\n\nvoid vectorCreatives_init(VectorCreatives *vector) {\n  // initialize size and capacity\n  vector-&gt;size = 0;\n  vector-&gt;capacity = VECTOR_INITIAL_CAPACITY;\n\n  // allocate memory for vector-&gt;data\n  vector-&gt;data = malloc(sizeof(struct daastCreative) * vector-&gt;capacity);\n}\n\nvoid vectorCreatives_append(VectorCreatives *vector, struct daastCreative value) {\n  // make sure there's room to expand into\n  vectorCreatives_double_capacity_if_full(vector);\n\n  // append the value and increment vector-&gt;size\n  vector-&gt;data[vector-&gt;size++] = value;\n}\n\nstruct daastCreative vectorCreatives_get(VectorCreatives *vector, int index) {\n  if (index &gt;= vector-&gt;size || index &lt; 0) {\n    printf(\"Index %d out of bounds for vector of size %d\\n\", index, vector-&gt;size);\n    exit(1);\n  }\n  return vector-&gt;data[index];\n}\n\nvoid vectorCreatives_set(VectorCreatives *vector, int index, struct daastCreative value) {\n  // zero fill the vector up to the desired index\n  struct daastCreative zero;\n  while (index &gt;= vector-&gt;size) {\n    vectorCreatives_append(vector, zero);\n  }\n\n  // set the value at the desired index\n  vector-&gt;data[index] = value;\n}\n\nvoid vectorCreatives_double_capacity_if_full(VectorCreatives *vector) {\n  if (vector-&gt;size &gt;= vector-&gt;capacity) {\n    // double vector-&gt;capacity and resize the allocated memory accordingly\n    vector-&gt;capacity *= 2;\n    vector-&gt;data = realloc(vector-&gt;data, sizeof(struct daastCreative) * vector-&gt;capacity);\n  }\n}\n\nvoid vectorCreatives_free(VectorCreatives *vector) {\n  free(vector-&gt;data);\n}\n\n\n// Methods used to manage MediaFiles Vector\n\nvoid vectorMediaFiles_init(VectorMediaFiles *vector) {\n  // initialize size and capacity\n  vector-&gt;size = 0;\n  vector-&gt;capacity = VECTOR_INITIAL_CAPACITY;\n\n  // allocate memory for vector-&gt;data\n  vector-&gt;data = malloc(sizeof(struct daastMediaFile) * vector-&gt;capacity);\n}\n\nvoid vectorMediaFiles_append(VectorMediaFiles *vector, struct daastMediaFile value) {\n  // make sure there's room to expand into\n  vectorMediaFiles_double_capacity_if_full(vector);\n\n  // append the value and increment vector-&gt;size\n  vector-&gt;data[vector-&gt;size++] = value;\n}\n\nstruct daastMediaFile vectorMediaFiles_get(VectorMediaFiles *vector, int index) {\n  if (index &gt;= vector-&gt;size || index &lt; 0) {\n    printf(\"Index %d out of bounds for vector of size %d\\n\", index, vector-&gt;size);\n    exit(1);\n  }\n  return vector-&gt;data[index];\n}\n\nvoid vectorMediaFiles_set(VectorMediaFiles *vector, int index, struct daastMediaFile value) {\n  // zero fill the vector up to the desired index\n  struct daastMediaFile zero;\n  while (index &gt;= vector-&gt;size) {\n    vectorMediaFiles_append(vector, zero);\n  }\n\n  // set the value at the desired index\n  vector-&gt;data[index] = value;\n}\n\nvoid vectorMediaFiles_double_capacity_if_full(VectorMediaFiles *vector) {\n  if (vector-&gt;size &gt;= vector-&gt;capacity) {\n    // double vector-&gt;capacity and resize the allocated memory accordingly\n    vector-&gt;capacity *= 2;\n    vector-&gt;data = realloc(vector-&gt;data, sizeof(struct daastMediaFile) * vector-&gt;capacity);\n  }\n}\n\nvoid vectorMediaFiles_free(VectorMediaFiles *vector) {\n  free(vector-&gt;data);\n}\n\n#endif /* DAASTXML_C_ */\n</code></pre>\n\n<p>Link to XML : <a href=\"http://hearme.fm/ars.xml\" rel=\"nofollow\">http://hearme.fm/ars.xml</a></p>\n"}, {"tags": ["c#", "c++", "c", "virtual-machine", "ibm-cloud"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 3, "creation_date": 1449057720, "post_id": 34042202, "comment_id": 55838983, "body": "That\u2019s something you should ask Bluemix support, I think."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1449059530, "post_id": 34042202, "comment_id": 55840149, "body": "There is no language C/C++. But there are two different languages C and C++."}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 4454969, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zQkFQ.gif?s=128&g=1", "display_name": "ValerieLampkin", "link": "https://stackoverflow.com/users/4454969/valerielampkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1449064401, "creation_date": 1449064401, "answer_id": 34044486, "question_id": 34042202, "link": "https://stackoverflow.com/questions/34042202/bluemix-vm-openstack-using-c-language/34044486#34044486", "title": "bluemix vm openstack using c++ language", "body": "<p>As of May 11 IBM has added to Bluemix a .Net Buildpack or set of tools, along with the .Net runtime, giving developers C and C# options.<br>\n<a href=\"http://www.informationweek.com/software/enterprise-applications/ibm-bluemix-welcomes-microsofts-net/d/d-id/1320357\" rel=\"nofollow\">http://www.informationweek.com/software/enterprise-applications/ibm-bluemix-welcomes-microsofts-net/d/d-id/1320357</a></p>\n\n<p>The ASP.NET runtime is currently offered as an <a href=\"https://console.ng.bluemix.net/catalog/labs/\" rel=\"nofollow\">experimental service.</a>  </p>\n"}, {"tags": [], "owner": {"reputation": 4394, "user_id": 5050071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9I1mj.jpg?s=128&g=1", "display_name": "Alex da Silva", "link": "https://stackoverflow.com/users/5050071/alex-da-silva"}, "is_accepted": false, "score": 1, "last_activity_date": 1449069408, "creation_date": 1449069408, "answer_id": 34046282, "question_id": 34042202, "link": "https://stackoverflow.com/questions/34042202/bluemix-vm-openstack-using-c-language/34046282#34046282", "title": "bluemix vm openstack using c++ language", "body": "<p>There are 3 ways you can deploy an application in Bluemix:</p>\n\n<ol>\n<li>Cloud Foundry application</li>\n<li>Containers</li>\n<li>Virtual Machines</li>\n</ol>\n\n<p>The statement about the supported languages applies to Cloud Foundry applications. In this case a specific buildpack for a language is required to deploy an application. </p>\n\n<p>If you are using Virtual Machines you can deploy and install any application supported by the operation system you choose for the Virtual Machines, including C or C++. You basically need to install the packages required by C or C++ in the Virtual Machine.  </p>\n"}], "owner": {"reputation": 11, "user_id": 5139391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2684f7feb0f031938597170633ef089a?s=128&d=identicon&r=PG&f=1", "display_name": "Segundo Burga-Campos", "link": "https://stackoverflow.com/users/5139391/segundo-burga-campos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449069408, "creation_date": 1449057543, "question_id": 34042202, "link": "https://stackoverflow.com/questions/34042202/bluemix-vm-openstack-using-c-language", "title": "bluemix vm openstack using c++ language", "body": "<p>a Bluemix customer is planing to deploy its C/C++ (and probably C#) application in Bluemix and by using the Bluemix VM OpenStack. \nThe issue is that in the list of supported languages you can not find C/C++ as it is indicated in the documentation that: \"You can deploy and run applications that are developed in any of the following languages: Liberty for Java\u2122,SDK for node.js, GO, ASP, .NET5, PHP, Python, Ruby on Rails and Ruby Sinatra\". What solution can Bluemix offer to the C/C++ (and C#) customers?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1449057259, "post_id": 34042066, "comment_id": 55838685, "body": "Check e.g. <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">this <code>printf</code> (and family) reference</a>, it will tell you that it&#39;s not only possible, but also how to do it."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1449057411, "post_id": 34042066, "comment_id": 55838778, "body": "@JoachimPileborg Does that also apply to C? It says &quot;C File IO&quot; but the domain is &quot;cppreference&quot;"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1449057455, "post_id": 34042066, "comment_id": 55838810, "body": "@Arc676 The <a href=\"http://en.cppreference.com/\" rel=\"nofollow noreferrer\">en.cppreference.com</a> site contains both C and C++ references. The link I gave is for the C reference part."}], "answers": [{"tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": true, "score": 4, "last_activity_date": 1449057667, "last_edit_date": 1449057667, "creation_date": 1449057343, "answer_id": 34042137, "question_id": 34042066, "link": "https://stackoverflow.com/questions/34042066/is-it-possible-to-set-max-width-flag-identifiers-according-to-user-input-in-c/34042137#34042137", "title": "is it possible to set max width flag identifiers according to user input in c?", "body": "<p>Why not, use like</p>\n\n<pre><code>printf(\"%*d\\n\",width, Number);\n</code></pre>\n\n<p>So, your code might looks as follow:</p>\n\n<pre><code>int i;\nint userWidthInput=10;\nint Number = 10;\nfor(i=userWidthInput; i&gt;1;i--)\n{\n   printf(\"%*d\\n\",i , Number);\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5537131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74af8abafa295b7137b89a4e1c6bea7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dart", "link": "https://stackoverflow.com/users/5537131/dart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 34042137, "answer_count": 1, "score": 3, "last_activity_date": 1449057667, "creation_date": 1449057174, "question_id": 34042066, "link": "https://stackoverflow.com/questions/34042066/is-it-possible-to-set-max-width-flag-identifiers-according-to-user-input-in-c", "title": "is it possible to set max width flag identifiers according to user input in c?", "body": "<p>For a student course in c,<br>\nI want to know if it is possible to use the max width flag identifiers \nas an integer you get from the user \nexample :<br>\nfirst iteration of the loop :  </p>\n\n<pre><code>printf(\"%7d\\n\",Number)  \n</code></pre>\n\n<p>second iteration of the loop :      </p>\n\n<pre><code>printf(\"%6d\\n\",Number)  \n</code></pre>\n\n<p>Third iteration of the loop :   </p>\n\n<pre><code>printf(\"%5d\\n\",Number)  \n</code></pre>\n\n<p>and so on,\ni want to know if it is possible to use something like this:</p>\n\n<pre><code>    int i;\n    int userWidthInput=10;\n    for(i=userWidthInput; i&gt;1;i--)\n    {\n    printf(\"%userWidthInputd\\n\",Number);  \n    }\n</code></pre>\n\n<p>Thanks in advanced<br>\njoe.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1449056942, "post_id": 34041958, "comment_id": 55838487, "body": "Are you sure the home directories always have the form <code>&#47;home&#47;username</code>? Don&#39;t make such assumptions. For example, my home directory is in <code>&#47;export&#47;home&#47;fuz</code> and I&#39;ve also had a system where my home directory was <code>&#47;pub&#47;homesrv&#47;department&#47;home&#47;username</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1449057058, "post_id": 34041958, "comment_id": 55838561, "body": "If you have an array you don&#39;t have to worry about memory leaks, if you have a dynamically allocated buffer you <i>sholdn&#39;t</i> have to worry about it being to small."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1449057441, "post_id": 34041958, "comment_id": 55838801, "body": "You &quot;know&quot; the longest config_file_location is 46 characters... When your code crashes, remember one of the most important rules of debugging: What you know is wrong. As @FUZxxl already told you."}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1449058687, "post_id": 34041958, "comment_id": 55839600, "body": "good point FUZxxl, I&#39;ll increaase the size to 255 then"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1449057259, "creation_date": 1449057259, "answer_id": 34042101, "question_id": 34041958, "link": "https://stackoverflow.com/questions/34041958/using-malloc-when-i-know-the-maximum-size-of-the-char-array/34042101#34042101", "title": "using malloc when I know the maximum size of the char array", "body": "<p>There are two reasons why you would use dynamic allocation:</p>\n\n<ul>\n<li>Either because the amount of memory needed isn't known at compile-time, or because the amount of memory needs to be reallocated in run-time.</li>\n<li>Or because you need to allocate large amounts of data and don't want to burden the stack with it. Allocating too much memory on the stack can in the worst case lead to mysterious run-time crashes caused by stack overflow. To avoid this, large amounts of data should be allocated on the heap instead.</li>\n</ul>\n\n<p>In your case, you have a fixed amount of data and 43 bytes is hardly a large amount. So there is no need to use dynamic allocation here.</p>\n\n<p>Apart from the usual issues with memory leaks and heap fragmentation, you also have to consider that each call to malloc (and free) is quite time-consuming. On systems where dynamic allocation is feasible (such as Linux), it almost always makes more sense to optimize for speed instead of memory consumption.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 1335961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f726e4ea8c799e27465618e319c4af17?s=128&d=identicon&r=PG", "display_name": "PokeyBagelHole", "link": "https://stackoverflow.com/users/1335961/pokeybagelhole"}, "is_accepted": false, "score": 2, "last_activity_date": 1449058123, "last_edit_date": 1495535229, "creation_date": 1449058123, "answer_id": 34042383, "question_id": 34041958, "link": "https://stackoverflow.com/questions/34041958/using-malloc-when-i-know-the-maximum-size-of-the-char-array/34042383#34042383", "title": "using malloc when I know the maximum size of the char array", "body": "<p>Unless you are working in some really, really memory constrained environment, I wouldn't be worried about optimising how much memory your application uses. Just allocate a buffer on the stack that is \"big enough\" for the largest path you might encounter.</p>\n\n<p>As to how big that is, no one is going to give you a definite answer. You could use PATH_MAX, although it has been <a href=\"https://stackoverflow.com/questions/9449241/where-is-path-max-defined-in-linux\">noted</a> even that has problems. In these situations I would just take a pragmatic approach and go for something like 256 bytes. Job done. Move on.</p>\n"}], "owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 34042101, "answer_count": 2, "score": 1, "last_activity_date": 1449058123, "creation_date": 1449056758, "question_id": 34041958, "link": "https://stackoverflow.com/questions/34041958/using-malloc-when-i-know-the-maximum-size-of-the-char-array", "title": "using malloc when I know the maximum size of the char array", "body": "<p>In my program, I'm declarign  a character array holding the location of a config file, it should be something like:\n\"/home/user/.config\"</p>\n\n<p>now I understand the longest username can be 32 bytes long(GNU Linux), so I know that array will not hold more than 46 characters, in this case should I be using malloc or not.</p>\n\n<p>should I use:</p>\n\n<pre><code>char config_file_location[46];\nstrcpy (config_file_location, getenv(\"HOME\"));\nstrcat(config_file_location,\"/.config\");\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>char *config_file_location;\nconfig_file_location = (char *) malloc(43);\nstrcpy (config_file_location, getenv(\"HOME\"));\nstrcat(config_file_location,\"/.config\");\n//code goes here\nfree(config_file_location);\n</code></pre>\n\n<p>also should I use realloc in the above example to get the config_file_location to use exactly the amount of memory it is supposed to?</p>\n\n<p>I'm looking for best practice info, if it is not worth doing in this case, I would like to know when it would be, and I would like to know the reason behind which approach is better.</p>\n\n<p>Thanks I appreciate it.</p>\n"}, {"tags": ["c", "algorithm", "performance", "function", "time-complexity"], "comments": [{"owner": {"reputation": 7412, "user_id": 1488799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2305b305275c01ab2d410e25b7a8c9?s=128&d=identicon&r=PG", "display_name": "Gassa", "link": "https://stackoverflow.com/users/1488799/gassa"}, "edited": false, "score": 1, "creation_date": 1449056916, "post_id": 34041897, "comment_id": 55838477, "body": "To me, it looks like S1 is false, like you said (look what happens when j == i + 2). S2 can&#39;t be true for every existing compiler and architecture (though for some pairs, I can believe the speed may actually be higher), so it is also false."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1449056933, "post_id": 34041897, "comment_id": 55838485, "body": "CPU time is very hard to reason about: aspects like caching will have an important impact."}, {"owner": {"reputation": 7412, "user_id": 1488799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2305b305275c01ab2d410e25b7a8c9?s=128&d=identicon&r=PG", "display_name": "Gassa", "link": "https://stackoverflow.com/users/1488799/gassa"}, "edited": false, "score": 0, "creation_date": 1449056977, "post_id": 34041897, "comment_id": 55838509, "body": "Also, CPU time would surely depend on the context (number of registers available at the moment, etc)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1449057308, "post_id": 34041897, "comment_id": 55838720, "body": "More importantly, given that S1 is false (functions don&#39;t do the same), S2 does not make sense. You can&#39;t sensibly compare the performance of two functions that do different things. And you can&#39;t compare CPU times without specifying the CPU. Any aliasing of <code>a[j]</code> and <code>a[i+2]</code> will be detected and resolved by the CPU at runtime, but the time it takes depends a lot on the <b>exact</b> model of CPU."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1449060081, "post_id": 34041897, "comment_id": 55840460, "body": "1) There are no programs, but just two functions. 2) Is this C or C++? 3) SO is not &quot;do my homework&quot; site."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1449060447, "post_id": 34041897, "comment_id": 55840703, "body": "@Olaf, I&#39;ve edited it again."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "edited": false, "score": 1, "creation_date": 1449057655, "post_id": 34042034, "comment_id": 55838943, "body": "Thanks for nice explanation."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 6, "last_activity_date": 1449057034, "creation_date": 1449057034, "answer_id": 34042034, "question_id": 34041897, "link": "https://stackoverflow.com/questions/34041897/are-both-functions-equivalent-or-not-and-improvement-time-in-work2-over-work1-o/34042034#34042034", "title": "Are both functions equivalent or not, and improvement time in work2 over work1 or not?", "body": "<blockquote>\n  <p>But, somewhere it given option (1) is true, since when j == i+2 programs will return different results and S2 is false because, it is given high level language. But didn't get this explanation.</p>\n</blockquote>\n\n<p>Bingo. They are both false.</p>\n\n<p>S1 is false because <code>j</code> can equal <code>i+2</code>, causing <code>a[j]=x+1</code> to change the result of <code>a[i+2] - 3</code>.</p>\n\n<p>S2 is false (assuming there isn't more context we're supposed to assume) because it is impossible to reason generically that for two bits of code that differ semantically, one must necessarily be faster than the other. Some CPU might have all operations that take four clock cycles except for one that takes one clock cycle and does the exact equivalent of <code>int x = a[i+2]; a[j] = x+1;</code>.</p>\n\n<p>To be less silly, <code>work2</code> might use more registers than <code>work1</code> and this might cause much worse performance in their callers. Or maybe the cost of saving and restoring those registers on function invocation will hurt performance. Maybe <code>work2</code> will use just a bit more code cache and push a caller over a performance cliff. Maybe <code>work2</code> will be shorter by a few bytes and by sheer bad luck cause a huge cache alignment penalty. Who knows?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 34042034, "answer_count": 1, "score": 3, "last_activity_date": 1449060243, "creation_date": 1449056542, "last_edit_date": 1449060243, "question_id": 34041897, "link": "https://stackoverflow.com/questions/34041897/are-both-functions-equivalent-or-not-and-improvement-time-in-work2-over-work1-o", "title": "Are both functions equivalent or not, and improvement time in work2 over work1 or not?", "body": "<p>Consider these two functions and two statements S1 and S2 about them. </p>\n\n<pre><code>int work1(int *a, int i, int j)\n{\n    int x = a[i+2];\n    a[j] = x+1;\n    return a[i+2] - 3;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>int work2(int *a, int i, int j)\n{\n    int t1 = i+2;\n    int t2 = a[t1];\n    a[j] = t2+1;\n    return t2 - 3;\n}\n</code></pre>\n\n<p>S1: The transformation form <code>work1</code> to <code>work2</code> is valid, i.e., for any program state and input arguments, <code>work2</code> will compute the same output and have the same effect on program state as <code>work1</code>.</p>\n\n<p>S2: All the transformations applied to <code>work1</code> to get <code>work2</code> will always improve the performance (i.e reduce CPU time) of <code>work2</code> compared to <code>work1</code>.</p>\n\n<ol>\n<li>S1 is false and S2 is false</li>\n<li>S1 is false and S2 is true</li>\n<li>S1 is true and S2 is false</li>\n<li>S1 is true and S2 is true</li>\n</ol>\n\n<hr>\n\n<p>AFAIK : Both statements S1 and s2 are true, since both program is equivalent and if CPU used more space, then execution time should be less and vice-versa is also true. So, option (4) is true ( <code>e.g. Google.com</code> ).</p>\n\n<p>But, somewhere it given option (1) is true, since when j == i+2 programs will return different results and S2 is false because, it is given high level language. But I didn't get this explanation.</p>\n\n<p>Another explanation said option (3) is true, since Only an extra variable t1 has been added in work 2 instead of directly computing the subscript as in work 1.The output will be same. S1 is true.\nThe addition of variables t1 and t2 will not improve the performance in anyway. i.e S2 is false.</p>\n\n<hr>\n\n<blockquote>\n  <p>Can you clarify please? Are both functions equivalent or not, and improvement time in work2 over work1 or not ?</p>\n</blockquote>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1449055839, "post_id": 34041565, "comment_id": 55837835, "body": "I don&#39;t think you can. You should not trust <code>ptrace</code> to return if you are actually being debugged, such a test can be circumvented easily."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1498816675, "creation_date": 1498816675, "answer_id": 44843727, "question_id": 34041565, "link": "https://stackoverflow.com/questions/34041565/detaching-from-ptrace-called-on-itself/44843727#44843727", "title": "Detaching from ptrace called on itself", "body": "<p>Only the \"parent\" (debugger) can detach from the traced child process; it is impossible for the child to get itself detached. <a href=\"http://man7.org/linux/man-pages/man2/ptrace.2.html\" rel=\"nofollow noreferrer\"><code>man ptrace</code></a>:</p>\n\n<pre>\n       <b>PTRACE_TRACEME</b>\n              Indicate that this process is to be traced by its parent. \u2026\n\n              The <b>PTRACE_TRACEME </b>request is used only by the tracee; the\n              remaining requests are used only by the tracer. \u2026\n</pre>\n"}], "owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498816675, "creation_date": 1449055531, "question_id": 34041565, "link": "https://stackoverflow.com/questions/34041565/detaching-from-ptrace-called-on-itself", "title": "Detaching from ptrace called on itself", "body": "<p>On linux an easy method to check whether the program is in a debugger is to check <code>if(ptrace(PTRACE_TRACEME, 0, 0, 0) == -1)</code>. How can I detach after this? <code>ptrace(PTRACE_DETACH, 0, 0, 0)</code> does not work (returns <code>-1</code>).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1449055818, "post_id": 34041544, "comment_id": 55837815, "body": "First of all <code>scanf(&quot;%c&quot;, name [i]);</code> must be <code>scanf(&quot;%c&quot;, &amp;name [i]);</code>"}, {"owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "edited": false, "score": 0, "creation_date": 1449055850, "post_id": 34041544, "comment_id": 55837850, "body": "<code>numbers[]</code> should be an int array or a similar decimal type of array."}], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 2724196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae7ad61d6f045d20b45985f80a9724ae?s=128&d=identicon&r=PG&f=1", "display_name": "bznein", "link": "https://stackoverflow.com/users/2724196/bznein"}, "edited": false, "score": 0, "creation_date": 1449056132, "post_id": 34041717, "comment_id": 55838009, "body": "right answer, but I would add an explanation about what <code>name[i] - &#39;A&#39;</code> means, since OP&#39;s doesn&#39;t seem to know"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449069084, "post_id": 34041717, "comment_id": 55846828, "body": "Note: <code>&#39;A&#39;</code>, <code>&#39;B&#39;</code>, <code>&#39;C&#39;</code>, etc are very commonly sequential codes, but not specified by C to be so."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 3, "last_activity_date": 1449056891, "last_edit_date": 1449056891, "creation_date": 1449055979, "answer_id": 34041717, "question_id": 34041544, "link": "https://stackoverflow.com/questions/34041544/calculating-the-sum-of-your-name-given-every-letter-a-number/34041717#34041717", "title": "Calculating the sum of your name given every letter a number", "body": "<p>Why not simply use the fact that <code>'A'</code>, <code>'B'</code>, <em>etc</em> will be converted to sequential <code>int</code> values so you can map <code>'A'</code> to <code>1</code>, <code>'B'</code> to <code>2</code>, <em>etc</em> with something like this (use <code>toupper</code> to map <code>a</code> to <code>A</code>, <em>etc</em>):</p>\n\n<pre><code>char name [50];\nint i, sum = 0;\nscanf(\"%s\", name);\nfor (i=0; i &lt; strlen(name); ++i)\n    sum += toupper(name[i]) - 'A' + 1;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5629996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3043d46c0dd3589e49b4427caf3ac08?s=128&d=identicon&r=PG&f=1", "display_name": "A.EDD", "link": "https://stackoverflow.com/users/5629996/a-edd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449056891, "creation_date": 1449055469, "last_edit_date": 1449055725, "question_id": 34041544, "link": "https://stackoverflow.com/questions/34041544/calculating-the-sum-of-your-name-given-every-letter-a-number", "title": "Calculating the sum of your name given every letter a number", "body": "<p>I'm trying to solve this program which aims to ask the user to enter his name while given every letter of the alphabet a number e.i(a=1,b=2...) then calculate the sum of the name (Using arrays and strings)\nThis is the code I've tried Can someone help me with it. Thanks </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main (void){\nint letters [] = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};\nint sum, i, j, count=0;\nchar numbers [] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26};   \nchar name [50];\nchar ch;\nprintf(\"Enter a name --&gt; \");\nfor(i=0;i&lt;50;i++){\nscanf(\"%c\", name [i]);\n++count;\n}\nfor(j=0;j&lt;=count;j++){\n    for(i=0;i&lt;26;i++){\n        if(name [j] == letters [i])\n        sum += numbers[i];\n    }\n}\nprintf(\"Your name is: \");\nfor(i=0;i&lt;=count;i++)\nprintf(\"%c\", name[i]);\nprintf(\"\\n\");\nprintf(\"The sum of your name is: %d\\n\", sum);\nreturn (0);\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "sockets", "winapi", "windows-server-2012-r2"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1449131884, "post_id": 34041391, "comment_id": 55875816, "body": "regarding this line: <code>struct sockaddr_in addr = make_addr();</code> a sockaddr_in, which consists of several fields, is not a native C type  Therefore, an assignment will not work.   Perhaps a pointer would work, But I would incorporate a call to memcpy()"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 587587, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ded5c4da8374a78e17ad9b512e93fb6c?s=128&d=identicon&r=PG", "display_name": "Anton Lahti", "link": "https://stackoverflow.com/users/587587/anton-lahti"}, "edited": false, "score": 0, "creation_date": 1449059612, "post_id": 34041747, "comment_id": 55840193, "body": "See edits. According to MSDN, the first code snippet should behave correctly."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1449056070, "creation_date": 1449056070, "answer_id": 34041747, "question_id": 34041391, "link": "https://stackoverflow.com/questions/34041391/reuse-socket-after-connect-fails-with-wsaetimedout/34041747#34041747", "title": "Reuse socket after connect() fails with WSAETIMEDOUT?", "body": "<p>Your code was always wrong. A failed <code>connect()</code> always hoses the socket. You were lucky it worked so long.</p>\n"}], "owner": {"reputation": 195, "user_id": 587587, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ded5c4da8374a78e17ad9b512e93fb6c?s=128&d=identicon&r=PG", "display_name": "Anton Lahti", "link": "https://stackoverflow.com/users/587587/anton-lahti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449059576, "creation_date": 1449055011, "last_edit_date": 1449059576, "question_id": 34041391, "link": "https://stackoverflow.com/questions/34041391/reuse-socket-after-connect-fails-with-wsaetimedout", "title": "Reuse socket after connect() fails with WSAETIMEDOUT?", "body": "<p>Our software had problems connecting to a SIEMENS PLC. We created a socket and continually did connect() on it, always receiveing WSAETIMEDOUT. Telnetting to the PLC on the exact same IP and port worked. Pseudocode below:</p>\n\n<pre><code>// Does not work\nSOCKET reconnect(char* ip) {\n    SOCKET sock = socket(PF_INET,SOCK_STREAM,0);\n    struct sockaddr_in addr = make_addr();\n    int err;\n\n    while(1) {\n        err = connect(sock,(struct sockaddr FAR*) &amp;addr,sizeof(addr));\n        if( err==SOCKET_ERROR ) {\n            log()  // WSAETIMEDOUT logged here\n            continue;\n        }\n        return sock;\n    }\n}\n</code></pre>\n\n<p>After changing the code to create a new socket for each connect() call, it seems to work...</p>\n\n<pre><code>// Works\nSOCKET reconnect(char* ip) {\n    struct sockaddr_in addr = make_addr();\n    int err;\n\n    while(1) {\n        SOCKET sock = socket(PF_INET,SOCK_STREAM,0);\n        err = connect(sock,(struct sockaddr FAR*) &amp;addr,sizeof(addr));\n        if( err==SOCKET_ERROR ) {\n            log()  // WSAETIMEDOUT logged here\n            closesocket(sock);\n            continue;\n        }\n        return sock;\n    }\n}\n</code></pre>\n\n<p>The first snippet has been running successfully in production for ~20 years, across multiple versions of Windows. I suspect it doesn't follow the specs though... Has there been any changes/updates to Windows Server 2012 R2 (which is what the customer is running) that changes this behavior?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>According to the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737625(v=vs.85).aspx\" rel=\"nofollow\">docs</a>, </p>\n\n<blockquote>\n  <p>If the error code returned indicates the connection attempt failed\n  (that is, WSAECONNREFUSED, WSAENETUNREACH, <strong>WSAETIMEDOUT</strong>) the\n  application can call connect again for the same socket.</p>\n</blockquote>\n\n<p>... which makes this even more puzzling.</p>\n"}]