[{"tags": ["c", "multithreading", "simplehttpserver"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1476923002, "post_id": 40143311, "comment_id": 67556981, "body": "What does <code>startServer</code> do? What does <code>respond</code> do? Can we see the code?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1476923346, "post_id": 40143311, "comment_id": 67557050, "body": "You call <code>exit</code> in a thread. <code>exit</code> terminates the <i>process</i>. You&#39;re also missing a <code>return</code> from <code>threadServer</code> (<code>return NULL</code> perhaps?). You&#39;re also using a global variable inside threadServer which you simultaneously <i>change</i> in your <code>main</code> function."}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 6616359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh6.googleusercontent.com/-BrjICM4wX6Q/AAAAAAAAAAI/AAAAAAAAAAo/RuJrwzwWLqo/photo.jpg?sz=128", "display_name": "TheMangaStand", "link": "https://stackoverflow.com/users/6616359/themangastand"}, "edited": false, "score": 0, "creation_date": 1476922370, "post_id": 40143398, "comment_id": 67556840, "body": "that doesnt seem to be the problem. It seem to fail before I call exit. it fails when i send a curl <a href=\"http://localhost:8888/text.txt\" rel=\"nofollow noreferrer\">localhost:8888/text.txt</a>"}, {"owner": {"reputation": 163, "user_id": 6616359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh6.googleusercontent.com/-BrjICM4wX6Q/AAAAAAAAAAI/AAAAAAAAAAo/RuJrwzwWLqo/photo.jpg?sz=128", "display_name": "TheMangaStand", "link": "https://stackoverflow.com/users/6616359/themangastand"}, "edited": false, "score": 0, "creation_date": 1476922503, "post_id": 40143398, "comment_id": 67556869, "body": "Should I give my respond function in the code as well?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 163, "user_id": 6616359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh6.googleusercontent.com/-BrjICM4wX6Q/AAAAAAAAAAI/AAAAAAAAAAo/RuJrwzwWLqo/photo.jpg?sz=128", "display_name": "TheMangaStand", "link": "https://stackoverflow.com/users/6616359/themangastand"}, "edited": false, "score": 0, "creation_date": 1476923102, "post_id": 40143398, "comment_id": 67557006, "body": "You never set <code>slot</code>, but then you do <code>clients[slot] = ...</code> That&#39;s not good either."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 163, "user_id": 6616359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh6.googleusercontent.com/-BrjICM4wX6Q/AAAAAAAAAAI/AAAAAAAAAAo/RuJrwzwWLqo/photo.jpg?sz=128", "display_name": "TheMangaStand", "link": "https://stackoverflow.com/users/6616359/themangastand"}, "edited": false, "score": 0, "creation_date": 1476923536, "post_id": 40143398, "comment_id": 67557108, "body": "Your use of <code>slot</code> is totally broken."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1476921633, "creation_date": 1476921633, "answer_id": 40143398, "question_id": 40143311, "link": "https://stackoverflow.com/questions/40143311/c-thread-http-server-error/40143398#40143398", "title": "C Thread Http Server Error", "body": "<p>Your <code>threadServer</code> function calls <code>exit</code>, terminating the process.</p>\n\n<p>I'm not sure where that came from, since it wouldn't be appropriate in a server that calls <code>fork</code> either. But it's definitely fatal in a multi-threaded program.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 0, "last_activity_date": 1476923694, "creation_date": 1476923694, "answer_id": 40143652, "question_id": 40143311, "link": "https://stackoverflow.com/questions/40143311/c-thread-http-server-error/40143652#40143652", "title": "C Thread Http Server Error", "body": "<p><code>slot</code> is a global variable. Starting a thread can take a little while, and threads <em>share</em> the same memory. They don't have their own snapshots of it like a forked process does.</p>\n\n<p>After starting the thread, your main process <em>alters</em> <code>slot</code>.</p>\n\n<p>Best case scenario: new thread starts and gets the <em>new</em> value of slot such that <code>connections[slot] == -1</code>. Worst case: the thread runs on a different CPU core and gets <code>slot</code> <em>while</em> main is writing to it, resulting in a bad value.</p>\n\n<p>You might want to consider passing <code>slot</code> as a parameter to the thread function instead:</p>\n\n<pre><code>void *threadServer(void *arg)\n{\n    int mySlot = (int)arg;\n    printf(\"bong\\n\");\n    respond(mySlot, verbose, ROOT, clients);\n    clients[mySlot] = -1;\n    printf(\"bash\\n\");\n    return NULL;  // calling 'exit' terminates the whole process. duh.\n}\n\n// ...\n\n    pthread_create(&amp;thread, NULL, threadServer, (void*)slot);\n</code></pre>\n\n<p>Another issue you have here is that you create all these threads but you do not keep track of them individually. You probably need an array of threads, or you might want to consider a simple struct:</p>\n\n<pre><code>typedef struct Clients {\n    int fd;\n    pthread_t thread;\n} Clients;\nClients clients[MAXCONN];\n\n//\n\nwhile (signalReceived == 1)\n{\n    addrlen = sizeof(clientaddr);\n    clients[slot].fd = accept(listenfd, (struct sockaddr *) &amp;clientaddr, &amp;addrlen);\n\n    if (clients[slot].fd &lt; 0)\n        exit(0);\n    else\n    {\n        printf(\"bang\");\n        pthread_create(&amp;clients[slot].thread, NULL, threadServer, (void*)slot);\n    }\n\n    while (clients[slot] != -1)\n        slot = (slot + 1) % CONNMAX;  // what if we can't find one?\n}\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 6616359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh6.googleusercontent.com/-BrjICM4wX6Q/AAAAAAAAAAI/AAAAAAAAAAo/RuJrwzwWLqo/photo.jpg?sz=128", "display_name": "TheMangaStand", "link": "https://stackoverflow.com/users/6616359/themangastand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 40143652, "answer_count": 2, "score": 0, "last_activity_date": 1476923694, "creation_date": 1476920953, "last_edit_date": 1476921725, "question_id": 40143311, "link": "https://stackoverflow.com/questions/40143311/c-thread-http-server-error", "title": "C Thread Http Server Error", "body": "<p>I am practicing different forms of causing a server to run concurrently by being able to accept multiple responses from multiple clients. This is a school assignment. </p>\n\n<p>I am now having troubles with threading. The thread works but gets an error of </p>\n\n<p><strong>\"curl: (56) Recv failure: Connection reset by peer\"</strong> </p>\n\n<p>This is because of the line in the response function that my thread goes to. Rest assured all variables besides clients[n] are pretty much constants. So its rather not passing in right or I'm completely missing the mark on how threading should be done.</p>\n\n<pre><code>rcvd = recv(clients[n], mesg, 99999, 0);\n</code></pre>\n\n<p>which this line keeps returning -1 into rcvd and I want > 0.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/stat.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt;\n#include&lt;netdb.h&gt;\n#include&lt;signal.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;pthread.h&gt;\n\n#include \"functions.h\"\n#define CONNMAX 1000\n#define BYTES 1024\n\nchar *ROOT;\nint verbose;\nint signalReceived = 1;\nint listenfd, clients[CONNMAX], slot;\npthread_t thread;\nvoid error(char *);\n\nvoid *threadServer(void *arg)\n{\n    printf(\"bong\");\n    respond(slot, verbose, ROOT, clients);\n    exit(0);\n}\n\nvoid clean(int arg)\n{\n    signalReceived = 0;\n}\n\nint main(int argc, char *argv[])\n{\n\n    signal(SIGINT, clean);\n    signal(SIGHUP, clean);\n\n    struct sockaddr_in clientaddr;\n    socklen_t addrlen;\n    char c;\n    char PORT[6];\n    ROOT = getenv(\"PWD\");\n    strcpy(PORT, \"8888\");\n    while ((c = getopt (argc, argv, \"p:v\")) != -1)\n\n    switch (c)\n    {\n        case'v':\n        verbose = 1;\n        break;\n\n        case'p':\n        strcpy(PORT, optarg);\n        break;\n\n        case'?':\n        fprintf(stderr, \"Wrong arguments given\\n\");\n        exit(1);\n\n        default:\n        exit(1);\n    }\n    printf(\"Listening on port %s%s%s, root is %s%s%s\\n\", \"\\033[92m\", PORT, \"\\033[0m\", \"\\033[92m\", ROOT, \"\\033[0m\");\n    int i = 0;\n    for (i = 0; i &lt; CONNMAX; i++)\n        clients[i] = -1;\n    startServer(PORT, &amp;listenfd);\n\n    while (signalReceived == 1)\n    {\n        addrlen = sizeof(clientaddr);\n        clients[slot] = accept (listenfd, (struct sockaddr *) &amp;clientaddr, &amp;addrlen);\n\n        if (clients[slot] &lt; 0)\n        exit(0);\n\n        else\n        {\n            printf(\"bang\");\n            pthread_create(&amp;thread, NULL, threadServer, NULL);\n        }\n        while (clients[slot] != -1)\n            slot = (slot + 1) % CONNMAX;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I am learning and this is not my original source work, rather an edited work in order to learn. I took a forked original program and am now trying to convert it to a threaded program.</p>\n"}, {"tags": ["c", "algorithm", "square-root"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476920317, "post_id": 40143205, "comment_id": 67556312, "body": "Have you used a debugger to help you? It&#39;s designed exactly to help for delving into such problems."}, {"owner": {"reputation": 103, "user_id": 6817276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b99966733aa09850cc53f98bdfba4c9?s=128&d=identicon&r=PG&f=1", "display_name": "OcK", "link": "https://stackoverflow.com/users/6817276/ock"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476920346, "post_id": 40143205, "comment_id": 67556324, "body": "Oh could it be that the first iteration of the for loop is just too large so it freezes?"}, {"owner": {"reputation": 103, "user_id": 6817276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b99966733aa09850cc53f98bdfba4c9?s=128&d=identicon&r=PG&f=1", "display_name": "OcK", "link": "https://stackoverflow.com/users/6817276/ock"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476920417, "post_id": 40143205, "comment_id": 67556348, "body": "@kaylum No I did not use a debugger. I am currently writing code in vim in the terminal."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1476920467, "post_id": 40143205, "comment_id": 67556362, "body": "What does that have to do with using a debugger? A debugger (ie, gdb) can run in the terminal."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1476920546, "post_id": 40143205, "comment_id": 67556385, "body": "For a big enough number, <code>v = v + z;</code> is a no-op \u2014 <code>v</code> doesn&#39;t change.  That makes your loop run for a long time.  The algorithm is not a good choice.  I&#39;m not convinced it will work well for numbers like <code>1E-70</code> (and you&#39;ve shown it won&#39;t work for numbers like <code>1E+70</code>).  Note that doubles have a range up to <code>1E&#177;300</code> or more on most machines with IEEE floating point math support."}, {"owner": {"reputation": 103, "user_id": 6817276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b99966733aa09850cc53f98bdfba4c9?s=128&d=identicon&r=PG&f=1", "display_name": "OcK", "link": "https://stackoverflow.com/users/6817276/ock"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476920552, "post_id": 40143205, "comment_id": 67556387, "body": "@kaylum thank you for clarifying me, I thought that it would need an IDE. I will look for that."}, {"owner": {"reputation": 103, "user_id": 6817276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b99966733aa09850cc53f98bdfba4c9?s=128&d=identicon&r=PG&f=1", "display_name": "OcK", "link": "https://stackoverflow.com/users/6817276/ock"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476920962, "post_id": 40143205, "comment_id": 67556518, "body": "@JonathanLeffler Thank you for your explanation. But could you maybe explain why for a certain limit v = v + z is a no-op please?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476921176, "post_id": 40143205, "comment_id": 67556572, "body": "Floating point numbers have a finite number of decimal digits \u2014 around about 16 for <code>double</code>, usually.  If you add <code>1E+16</code> and <code>1E-16</code>, then the result is <code>1E+16</code>; there aren&#39;t enough significant digits to store the extra information.  You have <code>5E+10</code> as the start point; you generate fractions <code>z = 1.0</code> then <code>0.1</code>, <code>0.01</code>, ... <code>0.000 000 000 01</code> or thereabouts (what&#39;s an order of magnitude between friends?).  When you go around adding the smallest values, you don&#39;t end up changing anything."}, {"owner": {"reputation": 103, "user_id": 6817276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b99966733aa09850cc53f98bdfba4c9?s=128&d=identicon&r=PG&f=1", "display_name": "OcK", "link": "https://stackoverflow.com/users/6817276/ock"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476921427, "post_id": 40143205, "comment_id": 67556629, "body": "@JonathanLeffler Thank you very much! Now I do understand this. Can I somehow give you the &quot;you answered this&quot; mark?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476921497, "post_id": 40143205, "comment_id": 67556647, "body": "The canonical document on the subject is <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a> or from the <a href=\"http://dl.acm.org/citation.cfm?id=103163\" rel=\"nofollow noreferrer\">ACM</a>.  And there should be a Q&amp;A for which this can be a duplicate.  I don&#39;t have it identified yet.  I&#39;ll transfer my comments into an answer."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1476922889, "last_edit_date": 1476922889, "creation_date": 1476921807, "answer_id": 40143416, "question_id": 40143205, "link": "https://stackoverflow.com/questions/40143205/square-root-algorithm-in-c/40143416#40143416", "title": "Square root algorithm in C", "body": "<p>For a big enough number <code>v</code> and small enough number <code>z</code>, <code>v = v + z</code>; is a no-op \u2014 <code>v</code> doesn't change. That makes your loop run for a long time.</p>\n\n<p>The algorithm is not a good choice \u2014 you should look up the <a href=\"https://en.wikipedia.org/wiki/Newton&#39;s_method\" rel=\"nofollow\">Newton-Raphson</a> method. I'm not convinced your algorithm will work well for extreme numbers like <code>1E-70</code> (and you've shown it won't work for numbers like <code>1E+70</code>). Note that doubles have a range up to 1E\u00b1300 or more on most machines with IEEE floating point support.</p>\n\n<blockquote>\n  <p>Could you maybe explain why for a certain limit <code>v = v + z</code> is a no-op please?</p>\n</blockquote>\n\n<p>Floating point numbers have a finite number of decimal digits \u2014 around about 16 for double, usually. If you add <code>1E+16</code> and <code>1E-16</code>, then the result is <code>1E+16</code>; there aren't enough significant digits to store the extra information. You have <code>5E+10</code> as the start point; you generate fractions <code>z = 1.0</code> then <code>0.1</code>, <code>0.01</code>, \u2026 <code>0.000 000 000 01</code> or thereabouts (what's an order of magnitude between friends?). When you go around adding the smallest values, you don't end up changing anything.</p>\n\n<p>The canonical document on the subject is <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a> or from the <a href=\"http://dl.acm.org/citation.cfm?id=103163\" rel=\"nofollow\">ACM</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476921946, "post_id": 40143429, "comment_id": 67556755, "body": "Changing to <code>long double</code> is a temporary band aid \u2014 change the source number from 5E10 to 5E50 and <code>long double</code> will be no help.  It also won&#39;t resolve the problems for tiny source numbers."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476922076, "post_id": 40143429, "comment_id": 67556786, "body": "Very true Jonathan, and I quickly edited it to reflect that reality."}], "tags": [], "owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "is_accepted": false, "score": 0, "last_activity_date": 1476922017, "last_edit_date": 1476922017, "creation_date": 1476921876, "answer_id": 40143429, "question_id": 40143205, "link": "https://stackoverflow.com/questions/40143205/square-root-algorithm-in-c/40143429#40143429", "title": "Square root algorithm in C", "body": "<p>If you write a <code>printf</code> statement in the while loop to show you <code>v</code>, you will see that at some point it stops changing (which is bad, because you use it to exit your loop!).</p>\n\n<p>I put <code>printf(\"DEBUG: entered for loop, v=%lf\\n\", v);</code> in the while loop and saw this:</p>\n\n<pre><code>DEBUG: entered for loop, v=173205.080757\nDEBUG: entered for loop, v=173205.080757\nDEBUG: entered for loop, v=173205.080757\nDEBUG: entered for loop, v=173205.080757\nDEBUG: entered for loop, v=173205.080757\nDEBUG: entered for loop, v=173205.080757\nDEBUG: entered for loop, v=173205.080757\nDEBUG: entered for loop, v=173205.080757\n</code></pre>\n\n<p>You were adding z which is so small that when v is at 173205 it doesn't actually change the value. You can extend the range by changing the type of <code>v</code> to <code>long double</code>; however, as we only have a certain number of bits to work with, there is still an upper bound where adding a small enough number to it won't change the representable value.</p>\n"}], "owner": {"reputation": 103, "user_id": 6817276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b99966733aa09850cc53f98bdfba4c9?s=128&d=identicon&r=PG&f=1", "display_name": "OcK", "link": "https://stackoverflow.com/users/6817276/ock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1423, "favorite_count": 0, "accepted_answer_id": 40143416, "answer_count": 2, "score": 1, "last_activity_date": 1476922889, "creation_date": 1476920248, "last_edit_date": 1476920315, "question_id": 40143205, "link": "https://stackoverflow.com/questions/40143205/square-root-algorithm-in-c", "title": "Square root algorithm in C", "body": "<p>For practicing reasons I coded the following algorithm in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(){\n\ndouble x=0;\n\nprintf(\"Enter the number: \");\n\nscanf(\"%lf\", &amp;x);\n\nint i = 0;\n\ndouble v = 0;\ndouble n=0;\nint grenze = 12;\ndouble z = 10;\n/*\nfor(i=1; i&lt;(x/2+1); i++){\n    v=i;\n    if((v*v) &lt;= x){\n        n = i;\n    }\n}\n\nv=n;\n*/\nfor(i=1; i&lt;grenze+1; i++){\n    z = z * 0.1;\n\n    while(v*v&lt;x){\n        v = v + z;\n        if(v*v&lt;x){\n            n = v;\n        }\n    }\n    v=n;\n}\nprintf(\"%.10f\\n\", n);\n\n\n\n}\n</code></pre>\n\n<p>This works quite well, but for number greater than a certain value (I do not know when this starts) for example 50.000.000.000 the program freezes.</p>\n\n<p>Is there anything I do not see here?</p>\n"}, {"tags": ["c", "file", "popen", "md5sum"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476918899, "post_id": 40142858, "comment_id": 67555907, "body": "It&#39;s likely, without having looked hard at your setup, that you have an issue with whether there&#39;s a final newline on the data, or something similar.  At least, different numbers of trailing newline a will cause a checksum difference."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1476921352, "post_id": 40142858, "comment_id": 67556607, "body": "It should be <code>malloc((total_str_len * sizeof(char)) + 1 )</code> (or, equivalently, <code>malloc(total_str_len + 1 )</code>), but that&#39;s not your problem."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1476921641, "post_id": 40142858, "comment_id": 67556686, "body": "I think the code you&#39;ve showed us is responsible for the output lines <code>d41d8cd98f00b204e9800998ecf8427e  meow</code> and <code>rMD5: md5_out result: d41d8cd98f00b204e9800998ecf8427e  meow</code>, which agree, so whatever the problem it is, it&#39;s not in the code you&#39;ve showed us."}, {"owner": {"reputation": 73, "user_id": 2850099, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/56dccb745c60548b7d2588127aa2943f?s=128&d=identicon&r=PG&f=1", "display_name": "user2850099", "link": "https://stackoverflow.com/users/2850099/user2850099"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476973405, "post_id": 40142858, "comment_id": 67582952, "body": "Thanks @jonathan Leffler, I&#39;ll check for the newline but after the file is transferred the md5sum goes back to being identical."}, {"owner": {"reputation": 73, "user_id": 2850099, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/56dccb745c60548b7d2588127aa2943f?s=128&d=identicon&r=PG&f=1", "display_name": "user2850099", "link": "https://stackoverflow.com/users/2850099/user2850099"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1476973543, "post_id": 40142858, "comment_id": 67583075, "body": "As for the code I&#39;ve showed being responsible for the output lines agreeing, that&#39;s not the case. If you see the output you&#39;ll see that the output for &#39;meow&#39; and md5_out result are identical when I run a system(md5sum) and a popen(md5sum) for meow, but they&#39;re both incorrect. They are both supposed to match the value for md5_clnt, which is &#39;mary_lamb&#39; and completely different. Thoughts, @SteveSummit ?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476974076, "post_id": 40142858, "comment_id": 67583572, "body": "Main thought for your last question: you have agreement between the two uses of md5sum and disagreement with some piece of magic that you don&#39;t show. Given a choice, we&#39;ll assume md5sum is right and the invisible alternative is wrong. You&#39;ve not shown the contents of the files. You&#39;ve not shown us how the other value is calculated.  You&#39;ve not demonstrated that the invisible mechanism is calculating a checksum on the same data as md5sum. Sorry, but the problem is more likely in the code we can&#39;t see than in the code shown."}, {"owner": {"reputation": 73, "user_id": 2850099, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/56dccb745c60548b7d2588127aa2943f?s=128&d=identicon&r=PG&f=1", "display_name": "user2850099", "link": "https://stackoverflow.com/users/2850099/user2850099"}, "edited": false, "score": 0, "creation_date": 1476977960, "post_id": 40142858, "comment_id": 67586521, "body": "I&#39;ll update the post with the contents of the files. The other value is calculated in an identical manner, and is proven to be correct (since it matches with a simple &#39;md5sum mary_lamb&#39; on the command line of the very same machine.   I will isolate the code and write a completely new C program that runs just this function to confirm that it&#39;s nothing else messing up the popen or md5sum command. Thanks for the good suggestion.  I&#39;ll post again once I&#39;ve updated."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1477081824, "post_id": 40142858, "comment_id": 67637494, "body": "I tried your code, and it mostly worked for me.  Here are two issues to be aware of: (1) <code>md5_out</code> ends up containing a newline, because <code>fgets</code> leaves it in.  This can make the <code>strcmp</code> fail.  (2) the <code>md5sum</code> command typically includes the filename in the output, and that can mess things up, too (especially if <code>md5_clnt</code> does not contain it).  Still can&#39;t explain why sums themselves are different, but it&#39;s not this code that&#39;s causing it."}], "owner": {"reputation": 73, "user_id": 2850099, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/56dccb745c60548b7d2588127aa2943f?s=128&d=identicon&r=PG&f=1", "display_name": "user2850099", "link": "https://stackoverflow.com/users/2850099/user2850099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476918056, "creation_date": 1476918056, "question_id": 40142858, "link": "https://stackoverflow.com/questions/40142858/popen-md5sum-inconsistent-with-command-line-md5sum", "title": "popen md5sum inconsistent with command line md5sum?", "body": "<p>I've written code to transfer a small text file, \"mary_lamb\" using C-ZMQ to a new text file on the same machine called \"meow.\"</p>\n\n<p>Once the transfer is complete, I run 'md5sum mary_lamb' and 'md5sum meow' to verify that the contents are the same. The md5sums match perfectly. I also inspect the contents of the files to make sure they're good, which they are. I wrote some code using 'popen' to do md5sum verification of these two files, and what's interesting is that the result for the output file (meow) is not the same as the input file mary_lamb, even though the two files are identical. </p>\n\n<p>I've even added a step to run md5sum using system() in C to see the output, and interestingly enough that's incorrect too. Right after the program exits, I read the md5sum through the linux command line and it's different. I've made sure to do a pclose() right after I get the md5sum, but what's going on here? Is it possible that the fact that I'm reading the file changes its md5sum? </p>\n\n<p>Here's the output of the program:</p>\n\n<pre><code>running system command for md5\nd41d8cd98f00b204e9800998ecf8427e  meow\n\nattempting to popen md5sum meow...\nrMD5: md5_out result: d41d8cd98f00b204e9800998ecf8427e  meow\n\nrMD5: md5_clnt value: de76ec3d1470e034b82dcb269b11f054  mary_lamb\n\nmd5sum mismatch!\n</code></pre>\n\n<p>Here's a manual check:</p>\n\n<pre><code>$ md5sum meow\nde76ec3d1470e034b82dcb269b11f054  meow\n$ md5sum mary_lamb\nde76ec3d1470e034b82dcb269b11f054  mary_lamb\n</code></pre>\n\n<p>I have also confirmed that there is only one copy of 'meow' and 'mary_lamb' on this machine.</p>\n\n<p>Here's the code:</p>\n\n<pre><code> //return 0 if eq, else other number.\n int compMD5( char *md5_clnt, char *md5_out )\n {\n     char buf[256];\n     int total_str_len = strlen( \"md5sum\" ) + strlen( md5_out ) + 2;\n     char *full_command = (char*)malloc( (total_str_len * sizeof(char*)) + 1 );\n     //copy strings into full_command string\n     snprintf( full_command, total_str_len, \"%s %s\", \"md5sum\", md5_out );\n\n     printf( \"running system command for md5\\n\" );\n     system( full_command );\n\n     printf( \"attempting to popen %s \\n\", full_command );\n     FILE *md5 = popen( full_command, \"r\" );\n\n     while( fgets(buf, sizeof(buf), md5 ) != 0 );\n     md5_out = buf;\n     printf( \"rMD5: md5_out result: %s\\n\", md5_out );\n     printf( \"rMD5: md5_clnt value: %s\\n\", md5_clnt );\n     pclose( md5 );\n     return strcmp( md5_out, md5_clnt );\n}\n</code></pre>\n\n<p>Suggestions, ideas, comments, all welcome. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "string", "input", "format"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1476916618, "post_id": 40142615, "comment_id": 67555197, "body": "With <code>strtok</code>. Read the lines with <code>fgets</code> and examine each token, to decide how to proceed."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1476921730, "post_id": 40142615, "comment_id": 67556706, "body": "Whatever you do, don&#39;t use anything like fscanf.  Absolutely the wrong tool for the job."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476924123, "post_id": 40142615, "comment_id": 67557265, "body": "Note that some of the &#39;codes&#39; are multiletter codes, so it is the first &#39;word&#39; rather than the &#39;first character&#39; that represents the code to a function.  Since the <code>scanf()</code> family of functions don&#39;t care about lines, you can&#39;t use them to do the file input.  You need to read the lines (<code>fgets()</code> for example) and then analyze them (<code>sscanf()</code> may be OK \u2014 check <a href=\"http://stackoverflow.com/questions/3975236/how-to-use-sscanf-in-loops\">Using <code>sscanf()</code> in a loop</a>, for example)."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6234355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6490c1ebcf3fe7a387ffa61b78f35481?s=128&d=identicon&r=PG&f=1", "display_name": "Eug G", "link": "https://stackoverflow.com/users/6234355/eug-g"}, "edited": false, "score": 0, "creation_date": 1476961541, "post_id": 40142965, "comment_id": 67574032, "body": "ok i got this , can you explain me once again what the n integer exactly does ?"}, {"owner": {"reputation": 39, "user_id": 6234355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6490c1ebcf3fe7a387ffa61b78f35481?s=128&d=identicon&r=PG&f=1", "display_name": "Eug G", "link": "https://stackoverflow.com/users/6234355/eug-g"}, "edited": false, "score": 0, "creation_date": 1476964586, "post_id": 40142965, "comment_id": 67576354, "body": "ok i got this , can you explain me once again what the n integer exactly does ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 39, "user_id": 6234355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6490c1ebcf3fe7a387ffa61b78f35481?s=128&d=identicon&r=PG&f=1", "display_name": "Eug G", "link": "https://stackoverflow.com/users/6234355/eug-g"}, "edited": false, "score": 0, "creation_date": 1476978294, "post_id": 40142965, "comment_id": 67586742, "body": "@EugG <code>int n = 0;</code> gives <code>n</code> the initial value of 0.  <code>sscanf(buffer, &quot;... %n&quot;,  .... &amp;n);</code> saves into <code>n</code> the offset of the scan of the string <code>buffer[]</code> at that point in the scan.  If the scan never reaches the <code>&quot;%n&quot;</code> because of an earlier mis-match in the scan, <code>n</code> is not changed."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1476918998, "last_edit_date": 1476918998, "creation_date": 1476918645, "answer_id": 40142965, "question_id": 40142615, "link": "https://stackoverflow.com/questions/40142615/how-to-read-lines-with-different-formats/40142965#40142965", "title": "How to read lines with different formats", "body": "<p>To read a <em>line</em>, use <code>fgets()</code></p>\n\n<pre><code>char buffer[100];\nwhile (fgets, buffer, sizeof buffer, istream) != NULL) {\n</code></pre>\n\n<p>Then scan the line against the various formats, each ending with <code>\" %n\"</code>.  <code>\"%n\"</code> records the scan position, if it got that far.  Additional tests could check for extraneous extras character starting at <code>n</code>.</p>\n\n<pre><code>  int num1, num2, num3;\n  char last[sizeof buf];\n  char first[sizeof buf];\n  char code[sizeof buf];\n  double rate;\n  int n = 0;\n  //               v..v..v..v...v..v..v spaces optional here\n  sscanf(buffer, \"i %d %s %s %lf %d %s %d %n\",\n    &amp;num1, last, first, &amp;rate, &amp;num2, code, &amp;num3, &amp;n);\n  if (n) {\n    Handle_i();\n    continue;\n  }\n  sscanf(buffer, \"q %d %n\", &amp;num1, &amp;n);\n  if (n) {\n    Handle_q();\n    continue;\n  }\n  sscanf(buffer, \"ra %d %n\", &amp;num1, &amp;num2, &amp;n);\n  if (n) {\n    Handle_ra();\n    continue;\n  }\n  sscanf(buffer, \"e %n\", &amp;n);\n  if (n) {\n    Handle_e();\n    continue;\n  }\n  ...\n  fail();\n}\n</code></pre>\n\n<p>As each format begins with a unique letter pattern, the <code>sscanf()</code> will quickly exit on mis-match.</p>\n\n<p>Alternative, code could parse out the initial letters for a slightly more efficient decision tree.  Suspect profiling will show little performance difference.  </p>\n\n<p>As with any complex format, consider how one would <em>maintain</em> the code and it is bound to evolve.</p>\n"}], "owner": {"reputation": 39, "user_id": 6234355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6490c1ebcf3fe7a387ffa61b78f35481?s=128&d=identicon&r=PG&f=1", "display_name": "Eug G", "link": "https://stackoverflow.com/users/6234355/eug-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476918998, "creation_date": 1476916500, "question_id": 40142615, "link": "https://stackoverflow.com/questions/40142615/how-to-read-lines-with-different-formats", "title": "How to read lines with different formats", "body": "<p>I have an input file with the following form</p>\n\n<pre><code>i 176064 Patterson Denise 8.58 11 DEN 15788 \nq 188464\nra 148702 167443\na  73131\nd 163464\nf 6.00\nct 73131 PHY\nb 3\np 15703\npe\nm 144626 6.51 8\ne\n</code></pre>\n\n<p>The first character in each line[i,q,ra,a...] represents an code to a function , while the rest are values that I must store into variables,depending on that code. What's the best way to achieve this ? I have been thinking about using fscanf but each line does not have a specific format, the format itself depends on the code [i,q,ra,a,b..] </p>\n"}, {"tags": ["c", "string", "winapi"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1476916509, "post_id": 40142551, "comment_id": 67555155, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724301(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><b>ERROR_MORE_DATA</b></a> --  <i>The lpBuffer buffer is too small. The lpnSize parameter contains the number of bytes required to receive the name.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1476916867, "post_id": 40142606, "comment_id": 67555279, "body": "Note that the reason <code>MAX_COMPUTERNAME_LENGTH</code> isn&#39;t working is because that&#39;s the maximum length for the <i>unqualified</i> name and the OP&#39;s code asks for the <i>qualified</i> name.  I&#39;m not sure there&#39;s any fixed limit to the length of the full DNS name."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1476917133, "post_id": 40142606, "comment_id": 67555369, "body": "But I cannot set the <code>computerName[size]</code> after calling the <code>GetComputerNameEx</code> first time, because Visual Studio says <code>Expression must have a constant value</code>. What can I do? I did not use your actual code because I am using C."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1476917698, "post_id": 40142606, "comment_id": 67555543, "body": "Use <code>malloc&#47;free</code> instead of <code>new&#47;delete</code> then. I have updated the example."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 0, "creation_date": 1476921350, "post_id": 40142606, "comment_id": 67556606, "body": "I posted an answer with code that I think won&#39;t suffer from race condition."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476923174, "post_id": 40142606, "comment_id": 67557020, "body": "FYI, when <code>GetComputerNameEx()</code> fails with <code>ERROR_MORE_DATA</code>, the value of <code>dwSize</code> already includes space for a null terminator, so you don&#39;t need <code>++dwSize</code>. This is documented behavior: &quot;<i>If the buffer is too small, the function fails and <code>GetLastError</code> returns <code>ERROR_MORE_DATA</code>. This parameter receives the size of the buffer required, <b>including the terminating null character</b>.</i>&quot;"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476926439, "post_id": 40142606, "comment_id": 67557780, "body": "@RemyLebeau Yes you&#39;re right. What a confusing function. Sometimes it includes it and sometimes it doesn&#39;t."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 5, "last_activity_date": 1476926463, "last_edit_date": 1476926463, "creation_date": 1476916447, "answer_id": 40142606, "question_id": 40142551, "link": "https://stackoverflow.com/questions/40142551/error-234-more-data-is-available-with-getcomputernameex/40142606#40142606", "title": "Error 234 &quot;More data is available&quot; with GetComputerNameEx", "body": "<p>You have to call the function twice; once with a null pointer to get the required size, and again with a buffer of (at least) the specified size. As the docs say:</p>\n\n<blockquote>\n  <p>To ensure that this buffer is large enough, set this parameter to NULL\n  and use the required buffer size returned in the lpnSize parameter.</p>\n</blockquote>\n\n<p>This is a common pattern for Win32 functions. And yes, it does lead to a possible race condition, but that's just how it works.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>DWORD dwSize = 0;\nif (GetComputerNameEx(nameType, nullptr, &amp;dwSize))\n{\n    WCHAR* computerName;\n    computerName = (WCHAR*)malloc(dwSize * sizeof(WCHAR));\n    if (GetComputerNameEx(nameType, computerName, &amp;dwSize))\n    {\n        // use the name\n    }\n    free(computerName); // don't forget to free\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476921726, "post_id": 40143326, "comment_id": 67556703, "body": "if you are going to use <code>malloc()</code>, you could at least use <code>realloc()</code> instead of <code>free()</code> while looping.  Otherwise, consider using <code>LocalAlloc()</code>/<code>LocalReAlloc()</code> instead. Also, you need to use <code>GetLastError()</code> to get the <code>error</code> value, it is not returned by <code>GetComputerNameEx()</code> itself."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476922305, "post_id": 40143326, "comment_id": 67556828, "body": "Thanks for your comments. I&#39;ve updated the code. Anyway, one of the reasons I used <code>free</code>+<code>malloc</code> instead of <code>realloc</code> was that there&#39;s no need to preserve the previous memory content between reallocations."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476922988, "post_id": 40143326, "comment_id": 67556978, "body": "True. On the other hand, depending on the memory manager implementation, <code>realloc()</code> may be able to simply expand the existing memory block without having to search for and reserve a whole new block elsewhere in memory."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1476922261, "last_edit_date": 1476922261, "creation_date": 1476921069, "answer_id": 40143326, "question_id": 40142551, "link": "https://stackoverflow.com/questions/40142551/error-234-more-data-is-available-with-getcomputernameex/40143326#40143326", "title": "Error 234 &quot;More data is available&quot; with GetComputerNameEx", "body": "<p>That error means that the <code>GetComputerNameEx</code> function needs a larger buffer to store the returned string.</p>\n\n<p>To avoid the race condition cited in Jonathan Potter's answer, you could do something like this:</p>\n\n<pre><code>LONG error = ERROR_MORE_DATA;\nWCHAR* buffer = NULL;\nDWORD bufferLength = /* Some initial reasonable length for the string buffer */;\nwhile (error == ERROR_MORE_DATA) {\n    // Create a buffer with bufferLength size (measured in WCHARs)\n    buffer = realloc(buffer, bufferLength * sizeof(WCHAR));\n\n    if (GetComputerNameEx(nameType, buffer, &amp;bufferLength)) {\n        error = ERROR_SUCCESS;\n    } else {\n        error = GetLastError();\n    }\n}\nif (error != ERROR_SUCCESS) {\n    // Some error occurred\n    ...\n}\n\n// Use buffer containing computer name\n\n// Don't forget to free(buffer)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1476922813, "creation_date": 1476922813, "answer_id": 40143535, "question_id": 40142551, "link": "https://stackoverflow.com/questions/40142551/error-234-more-data-is-available-with-getcomputernameex/40143535#40143535", "title": "Error 234 &quot;More data is available&quot; with GetComputerNameEx", "body": "<p>Per the <code>GetComputerNameEx()</code> documentation:</p>\n\n<blockquote>\n  <p><em>lpBuffer</em> [out]<br>\n  A pointer to a buffer that receives the computer name or the cluster virtual server name. </p>\n  \n  <p><strong>The length of the name may be greater than <code>MAX_COMPUTERNAME_LENGTH</code> characters</strong> because DNS allows longer names. To ensure that this buffer is large enough, set this parameter to <code>NULL</code> and use the required buffer size returned in the <code>lpnSize</code> parameter.</p>\n  \n  <p><em>lpnSize</em> [in, out]<br>\n  On input, specifies the size of the buffer, in <code>TCHAR</code>s. On output, receives the number of <code>TCHAR</code>s copied to the destination buffer, not including the terminating null character. </p>\n  \n  <p><strong>If the buffer is too small, the function fails and <code>GetLastError</code> returns <code>ERROR_MORE_DATA</code></strong>. This parameter receives the size of the buffer required, including the terminating null character.</p>\n  \n  <p>If <code>lpBuffer</code> is NULL, this parameter must be zero.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>int wmain()\n{\n    COMPUTER_NAME_FORMAT nameType = ComputerNameDnsFullyQualified;\n    WCHAR *computerName = NULL, *computerNameNew;\n    DWORD size = 0;\n    BOOL pcName;\n    DWORD error;\n\n    do\n    {\n        pcName = GetComputerNameExW(nameType, computerName, &amp;size);\n        if (pcName) break;\n\n        error = GetLastError();\n        if (error != ERROR_MORE_DATA) break;\n\n        computerNameNew = (WCHAR*) realloc(computerName, sizeof(WCHAR) * size);\n        if (!computerNameNew) {\n            error = ERROR_OUTOFMEMORY;\n            break;\n        }\n\n        computerName = computerNameNew;\n    }\n    while (1);\n\n    if (pcName)\n    {\n        wprintf(\"Computer name: %s\\n\", computerName);\n    }\n    else\n    {\n        wprintf(L\"Error getting the name. Code: %ul\\n\", error);\n    }\n\n    free(computerName);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2086, "favorite_count": 0, "accepted_answer_id": 40143535, "answer_count": 3, "score": 2, "last_activity_date": 1476926463, "creation_date": 1476916141, "last_edit_date": 1476921291, "question_id": 40142551, "link": "https://stackoverflow.com/questions/40142551/error-234-more-data-is-available-with-getcomputernameex", "title": "Error 234 &quot;More data is available&quot; with GetComputerNameEx", "body": "<p>I am getting <code>More data is available</code> error with the <code>GetComputerNameEx</code> function, but no idea how to fix it.</p>\n\n<p>This is my code:</p>\n\n<pre><code>int wmain()\n{\n    COMPUTER_NAME_FORMAT nameType = ComputerNameDnsFullyQualified;\n    WCHAR computerName[MAX_COMPUTERNAME_LENGTH + 1];\n    DWORD size = ARRAYSIZE(computerName);\n\n    BOOL pcName = GetComputerNameEx(nameType, computerName, &amp;size);\n\n    DWORD error = GetLastError();\n\n\n\n    if (pcName != 0)\n    {\n        wprintf(\"Computer name: %s\\n\", computerName);\n    }\n    else\n    {\n        wprintf(L\"Error getting the name. Code: %li\\n\", error);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>No idea how to set <code>size</code> variable as output so I can declare the <code>computerName</code> array correctly.</p>\n"}, {"tags": ["c", "assembly", "nasm"], "comments": [{"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 1, "creation_date": 1476916130, "post_id": 40142479, "comment_id": 67555020, "body": "x and y are function arguments, not local variables.  They are treated differently."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4778178"}, "reply_to_user": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1476916262, "post_id": 40142479, "comment_id": 67555069, "body": "I see. I never thought they were any different. Thank you for clarifying this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4778178"}, "reply_to_user": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1476916309, "post_id": 40142479, "comment_id": 67555084, "body": "@AShelly this here, <a href=\"https://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/X86_Disassembly/&hellip;</a>, explained it. Change in question, check edit."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 3, "creation_date": 1476916449, "post_id": 40142479, "comment_id": 67555136, "body": "To reserve stack space for locals below EBP, <code>sub esp, 24</code> or whatever at the start of your function, and reverse that before returning."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 4, "creation_date": 1476916687, "post_id": 40142479, "comment_id": 67555218, "body": "hint: use meaningful names for labels.  <code>jmp epilogue</code> tells you everything that <code>jmp l20;    ;jump to l20, the leave, ret label</code> does, and doesn&#39;t need a comment.  Or the comment can explain <i>why</i> you&#39;re taking that jump there.  Similarly, <code>mov eax, 1  ;move 1 into eax</code> is a useless comment.  Resist the temptation to explain things you just learned.  A comment like <code>return 1 because ...</code> would be much more useful."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4778178"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1476916716, "post_id": 40142479, "comment_id": 67555229, "body": "@PeterCordes and to call each local I&#39;d use [ebp-4], [ebp-8], ect?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4778178"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1476916826, "post_id": 40142479, "comment_id": 67555269, "body": "@PeterCordes Thanks, I&#39;ll keep that in mind. I was wondering, if I were to pass a local variable to a call, say  <code>mov eax, [ebp-4]</code>, <code>push eax</code>, <code>call function</code>, what goes here? <code>add esp, 4</code>? is it any different from sending an argument? Sorry, I have a lot of question about assembly, and no one to answer them"}, {"owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "reply_to_user": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 1, "creation_date": 1476917412, "post_id": 40142479, "comment_id": 67555462, "body": "@AShelly Technically, arguments are local variables. You are allowed to modify them, for example. The distinction between them is, the called function allocates room for local variables below the return address, the caller allocates and initialiizes space for arguments before making the call, above the return address."}], "answers": [{"comments": [{"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1476917660, "post_id": 40142723, "comment_id": 67555534, "body": "<a href=\"https://en.wikibooks.org/wiki/X86_Disassembly/Calling_Conventions#Standard_C_Calling_Conventions\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/X86_Disassembly/&hellip;</a> explains this scheme fairly well."}], "tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": true, "score": 2, "last_activity_date": 1476917164, "creation_date": 1476917164, "answer_id": 40142723, "question_id": 40142479, "link": "https://stackoverflow.com/questions/40142479/assembly-intel-x86-which-addresses-can-be-used-to-define-arguments/40142723#40142723", "title": "Assembly intel x86 which addresses can be used to define arguments", "body": "<p><strong>Arguments</strong> are passed on the stack - the caller is responsible for pushing them. The space is already reserved when your function starts. If you changed your prototype to <code>power_c(int x, int y, int z)</code>, then z would be at <code>[ebp+16]</code>.  </p>\n\n<p><strong>Local Variables</strong> (or automatics) are your responsibility. The standard way is to subtract the space you need from <code>esp</code>, as @Peter Cordes mentions in the comments.  So to create variable <code>a</code> and <code>b</code>, you would do:</p>\n\n<pre><code>sub esp, 8\n%define a [ebp+4]\n%define b [ebp-8]\n</code></pre>\n\n<p>Note that at this point <code>ebp</code> == <code>esp+8</code>. We define the variables relative to <code>ebp</code>, not <code>esp</code>, so that you can continue to use push and pop instructions (which change the stack pointer).   Remember to set <code>esp</code> back to <code>ebp</code> (<code>mov esp, ebp</code>) before you exit the function, so that the return address is found correctly.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4778178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 40142723, "answer_count": 1, "score": 2, "last_activity_date": 1476917164, "creation_date": 1476915748, "last_edit_date": 1476916376, "question_id": 40142479, "link": "https://stackoverflow.com/questions/40142479/assembly-intel-x86-which-addresses-can-be-used-to-define-arguments", "title": "Assembly intel x86 which addresses can be used to define arguments", "body": "<p>Which memory points can I actually use?\nI have this assembly code to power(a,b) by recursion:</p>\n\n<pre><code> int power(int x, int y);                                                  *\n;*****************************************************************************\n%define x [ebp+8]\n%define y [ebp+12]\npower:\n    push ebp    \n    mov ebp, esp\n\n    mov eax, y  ;move y into eax\n    cmp eax, 0  ;compare y to 0\n    jne l10;    ;if not equal, jump to l10  \n    mov eax, 1  ;move 1 into eax\n    jmp l20;    ;jump to l20, the leave, ret label\n\nl10:\n    mov eax, y ; move y into eax\n    sub eax, 1 ; y-1\n    push eax   ; push y-1 onto stack\n    mov ebx, x ; move x into ebx\n    push ebx   ; push x onto stack\n    call power ; call power/recursion\n    add esp, 8 ; add 8 to stack(4*2) for the two vars\n    imul eax, x ; multiply the returned value from call by x\n\nl20:\n    leave ; leave\n    ret   ;ret\n</code></pre>\n\n<p>It's coded straight from this c code:</p>\n\n<pre><code>int power_c(int x, int y) {\n    if (y == 0) {\n        return 1;\n    } else {\n        return power_c(x, y - 1)*x;\n    }\n}\n</code></pre>\n\n<p>The asm code works perfectly, any suggested adjustments would be great, I'm still new to assembly. My question is, which addresses can I actually use to define arguments? Here, I have two, and I use:</p>\n\n<pre><code>%define x [ebp+8]\n%define y [ebp+12]\n</code></pre>\n\n<p>If I have more, do I just increase it? Lets say all are ints, 4bytes, like so?</p>\n\n<pre><code>%define x [ebp+8]\n%define y [ebp+12]\n%define z [ebp+16]\n%define a [ebp+20]\n%define b [ebp+24]\n</code></pre>\n\n<p>I've hit a snag with code where I need to define more arguments, I just can't figure this out, any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476916033, "post_id": 40142329, "comment_id": 67554983, "body": "<code>char my_array[name];</code> You are trying to store all the names in this same array (at various offsets). That obviously doesn&#39;t work because each <code>sscanf</code> will overwrite part of the previous name (which is exactly what you observe). One way is to have a 2D array: <code>char my_array[name][MAX_NAME_LEN];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7044743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66eaf83d0d0488a95b80504f2c317c00?s=128&d=identicon&r=PG&f=1", "display_name": "Nuri", "link": "https://stackoverflow.com/users/7044743/nuri"}, "edited": false, "score": 0, "creation_date": 1476927781, "post_id": 40142562, "comment_id": 67558049, "body": "This definitely helped clear a lot of it up, I have it now where I get the first name to show up, finally, and now it just takes a letter off each time. Would I create a new array in order to call the next name, following the same way of coding, or  am I just changing the variable?"}], "tags": [], "owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "is_accepted": true, "score": 0, "last_activity_date": 1476916196, "creation_date": 1476916196, "answer_id": 40142562, "question_id": 40142329, "link": "https://stackoverflow.com/questions/40142329/retrieving-array-values-in-c-programming-how-can-i-fix-these-errors/40142562#40142562", "title": "Retrieving array values in C Programming. How can I fix these errors?", "body": "<p>You are storing the names in the same variable, overwriting the last each time you enter one. You seem to have a misunderstanding of char arrays, I'll break down the problem code.</p>\n\n<pre><code>for(x=0;x&lt;name;++x)\n{\n    printf(\"\\n Please enter the students name:\");\n    fgets(f, sizeof(f), stdin);\n    sscanf(f, \"%s\", &amp;my_array[x]);\n}\n</code></pre>\n\n<ol>\n<li>The first line says \"starting at 0, add 1 to x until x is not less than name\". x is the variable you are using to move through the array, and you are moving 1 char at a time.  </li>\n<li>Skipping to fgets(), you are reading in a string from the user, and storing it in f.</li>\n<li>finally, sscanf() copies the string into &amp;my_array[x]. This is the problem portion of the code. Here you are copying the data that the user just entered into my_array, starting at position x. </li>\n</ol>\n\n<p>So for your example input, here is what it looks like:</p>\n\n<ol>\n<li>my_array == { 's', 'a', 'm', '\\0' } when x == 0</li>\n<li>my_array == { 's', 'd', 'e', 'a', 'n', '\\0' } when x == 1</li>\n<li>my_array == { 's', 'd', 'b', 'o', 'b', 'b', 'y', '\\0' } when x == 2</li>\n</ol>\n\n<p>Notice that it shifts one character at a time to the right, this is x being added to each loop. A char holds only a single character, it is not the same thing as a string of characters, or a char array. What you are probably trying to do is something like this:</p>\n\n<pre><code>for(x=0;x&lt;name;++x)\n{\n    printf(\"\\n Please enter the students name:\");\n    fgets(f, sizeof(f), stdin);\n    sscanf(f, \"%s\", &amp;my_array[x*100]);\n}\n</code></pre>\n\n<p>Also, when you define my_array, and a few of your other variables, your sizes are pretty obscure. Note that when you define my_array and enter 3, you are only giving it 3 characters worth of space to write to. Anything after is undefined behavior, but basically it will start putting data in places that you may not want or expect. You should also initialize this array like:</p>\n\n<pre><code>char my_array[100*name];\n</code></pre>\n\n<p>Hopefully this answer cleared up some things for you. I recommend you do some research on primitive data types and arrays in c. Another possible solution to your problem is to implement a 2D array.</p>\n"}], "owner": {"reputation": 3, "user_id": 7044743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66eaf83d0d0488a95b80504f2c317c00?s=128&d=identicon&r=PG&f=1", "display_name": "Nuri", "link": "https://stackoverflow.com/users/7044743/nuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 40142562, "answer_count": 1, "score": -1, "last_activity_date": 1489099784, "creation_date": 1476914946, "last_edit_date": 1489099784, "question_id": 40142329, "link": "https://stackoverflow.com/questions/40142329/retrieving-array-values-in-c-programming-how-can-i-fix-these-errors", "title": "Retrieving array values in C Programming. How can I fix these errors?", "body": "<p>this is my first post, so I am sorry if I didnt do this correctly. But, I am fairly new to C Programming and I have hit a roadblock. We were given an .exe file to build a code from scratch. I have gotten this far but I am having trouble getting past retrieving the names. It is storing them, or so it seems, but when set my value to 3, it takes from all three names for the first two, and only displays the third name correctly. It is always the last name that is correct. I provided a screenshot below showing my issues. I'm pretty close to being done, but cant get past this step. Any help would be really appreciated! </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nint a_delete;\nchar b[100]; \nint name;\nint counter=0;\nint F;\nint d;\nint grade;\nint set;\nint w;\nint x;\nint z;\nchar a[100];\nchar names[100];\nchar g[100];\nchar h[100];\nchar i[100];\nchar c[100];\nchar f[100];\nchar phy[100];\nchar Counter[100];\nchar final_grade[100];\ndouble class_grades[100];\ndouble total;\ndouble totals;\n\nint main()\n{\n\n\n\n    printf(\"\\n Welcome to the grade calculator\");\n    printf(\"\\n Enter the total number of students in the class:\");\n    fgets(a, sizeof(a), stdin);\n    sscanf(a, \"%d\", &amp;name);\n    char my_data[name*3];\n    char my_array[name];\n\n    if(name&lt;1)\n    {\n        printf(\"\\n Not a valid number\");\n        printf(\"\\n Please enter a valid integer number only\");\n    }\n            else\n            {\n                for(x=0;x&lt;name;++x)\n                {\n                    printf(\"\\n Please enter the students name:\");\n                    fgets(f, sizeof(f), stdin);\n                    sscanf(f, \"%s\", &amp;my_array[x]);\n\n                }\n                    if(x&lt;=name)\n                    {\n                        for(x=0 ; x&lt;name;++x)\n                        {\n\n                            printf(\"\\n Please enter %s's Physics score (out     of 100 points)  : \", &amp;my_array[x]);\n                            fgets(b, sizeof(b), stdin);\n                            sscanf(b, \"%d\", &amp;my_data[set]);\n\n                        }\n\n                            for(x=0;x&lt;name;++x)\n                            {\n\n                                printf(\"\\n Please enter %s's Chemestry score (out of 100 points)  : \", &amp;my_array[x]);\n                                fgets(c, sizeof(c), stdin);\n                                sscanf(c, \"%d\", &amp;my_data[set]);\n\n                            }\n                                for(x=0; x&lt;name;++x)\n                                {\n\n\n                                    printf(\"\\n Please enter %s's Math score     (out of 100 points)  : \", &amp;my_array[x]);\n                                    fgets(g, sizeof(g), stdin);\n                                    sscanf(g, \"%c\", &amp;my_data[set]);\n\n                                }\n                                    if(x=3)\n                                    {\n                                        for(x=0; x&lt;=name;++x)\n                                        {\n                                            puts(\"\\n*****************\");\n                                            puts(\"\\n***Report card***\");\n                                            puts(\"\\n*****************\");\n\n                                            printf(\"Name of the student: %c\", my_array[name]);\n\n                                            printf(\"\\nPhysics: %.2f/100\", my_data[set]);\n\n                                            printf(\"\\nChemistry: %.2f/100\",     my_data[set] );\n\n                                            printf(\"\\nMath: %.2f/100\", my_data[set] );\n\n\n                                                if(grade&gt;=270)\n                                                {\n\n                                                    printf(\"\\nYour letter grade: A\");\n\n                                                }\n                                                        else if(my_data[set]&lt;270&gt;=240)\n                                                        {\n                                                            printf(\"\\nYour letter grade: B\");\n                                                        }\n                                                            else if(my_data[set]&lt;240&gt;=210)\n                                                            {\n                                                                printf(\"\\nYour letter grade: C\");\n                                                            }\n                                                                else if(my_data[set]&lt;210&gt;=180)\n                                                                {\n                                                                    printf(\"\\nYour letter grade: D\");\n                                                                }\n                                                                    else if(my_data[set]&lt;180)\n                                                                    {\n                                                                        printf(\"\\nYour letter grade: F\");\n                                                                    }\n\n                                        }\n            }\n    }                               }\n\n    return(0);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1476915098, "post_id": 40142316, "comment_id": 67554634, "body": "Is there some kind of compelling reason to write code you don&#39;t understand?  Just don&#39;t, that is never necessary."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476915927, "post_id": 40142316, "comment_id": 67554949, "body": "The best fix for this sort of code is to use POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getopt.html\" rel=\"nofollow noreferrer\"><code>getopt()</code></a> or the GNU <a href=\"https://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Options.html#Getopt-Long-Options\" rel=\"nofollow noreferrer\"><code>getopt_long()</code></a> functions."}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1476916002, "post_id": 40142316, "comment_id": 67554971, "body": "@HansPassant yes yes. Maybe some other time. =)"}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476916047, "post_id": 40142316, "comment_id": 67554989, "body": "@JonathanLeffler Thanks for the info, I&#39;m quite new to c, so I end up asking silly questions when I hit the wall of pointers."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476916206, "post_id": 40142316, "comment_id": 67555042, "body": "I didn&#39;t say, and wouldn&#39;t say now, that the question is silly.  The code is fairly traditional argument parsing code by the looks of it, but that doesn&#39;t make it good code, or easy to read and understand.  It isn&#39;t easy to read or understand, though after enough exposure to such code, it becomes comprehensible (and recognizable).  In five years time, it won&#39;t be so hard.  It still won&#39;t be particularly good code; it would be better to use the functions instead.  They hide the gory details for you."}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1476917015, "post_id": 40142316, "comment_id": 67555330, "body": "Indeed, before simple variable pointers used to look unfamiliar as well, but after codding on a simple application for a while I just got used to it, I bet it&#39;s the same with everything else. =) Well thanks for the info again."}], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 1, "last_activity_date": 1476915214, "creation_date": 1476915214, "answer_id": 40142378, "question_id": 40142316, "link": "https://stackoverflow.com/questions/40142316/array-of-pointers-evaluation/40142378#40142378", "title": "Array of pointers evaluation", "body": "<p>The array subscript operator has higher precedence than the prefix ++ and the dereference operator. The latter two operators have the same precedence and are evaluated from right to left. The expression in the second while loop is equivalent to:</p>\n\n<pre><code>*(++(argv[0]))\n</code></pre>\n\n<p>The pointer to the string is obtained using the array subscript operator, then it is incremented by one using prefix increment, it now points to the second character, and then the character is obtained using the dereference operator.</p>\n"}], "owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 40142378, "answer_count": 1, "score": -1, "last_activity_date": 1476915214, "creation_date": 1476914834, "question_id": 40142316, "link": "https://stackoverflow.com/questions/40142316/array-of-pointers-evaluation", "title": "Array of pointers evaluation", "body": "<p>Can someone please tell me how would we evaluate the inner loop pointer: <code>*++argv[0]</code>.</p>\n\n<p>How does it end up getting the second character from the argument?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n    while (--argc &gt; 0 &amp;&amp; (*++argv)[0] == '-') {\n\n        while ((c = *++argv[0])) {\n            switch (c) {\n                ....\n            }\n            ...\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "parity"], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 6055902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c418f398a3c003e389ec51766693370b?s=128&d=identicon&r=PG&f=1", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/6055902/jasmine"}, "edited": false, "score": 0, "creation_date": 1476915232, "post_id": 40142340, "comment_id": 67554688, "body": "I understand what you&#39;re saying and it sounds like it&#39;s exactly what I need. But I&#39;m confused as to how I would go about emitting the 1 or zero."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 293, "user_id": 6055902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c418f398a3c003e389ec51766693370b?s=128&d=identicon&r=PG&f=1", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/6055902/jasmine"}, "edited": false, "score": 0, "creation_date": 1476915377, "post_id": 40142340, "comment_id": 67554750, "body": "Use <code>putchar</code>? Maybe I don&#39;t understand your confusion."}, {"owner": {"reputation": 293, "user_id": 6055902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c418f398a3c003e389ec51766693370b?s=128&d=identicon&r=PG&f=1", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/6055902/jasmine"}, "edited": false, "score": 0, "creation_date": 1476915476, "post_id": 40142340, "comment_id": 67554793, "body": "Oh, I&#39;m sorry I just realized I read it as &quot;omit&quot; rather than &quot;emit&quot;. But now I understand your explanation, so thank you for your help!"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 1, "last_activity_date": 1476956890, "last_edit_date": 1476956890, "creation_date": 1476914995, "answer_id": 40142340, "question_id": 40142275, "link": "https://stackoverflow.com/questions/40142275/adding-a-parity-bit-in-c/40142340#40142340", "title": "Adding a parity bit in C", "body": "<p>Assuming the parity bit must make the byte have an even number of 1 bits: keep a count of the number of 1-bits printed and when the total is BITS-1, check if the count is odd. If yes, emit a '1', else emit a zero.</p>\n\n<p>This appends the parity bit, where normally the parity bit is prepended. If that is required, add a loop first to determine the parity bit, print it and execute your current for loop.</p>\n"}], "owner": {"reputation": 293, "user_id": 6055902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c418f398a3c003e389ec51766693370b?s=128&d=identicon&r=PG&f=1", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/6055902/jasmine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 0, "accepted_answer_id": 40142340, "answer_count": 1, "score": 0, "last_activity_date": 1476956890, "creation_date": 1476914623, "last_edit_date": 1476914792, "question_id": 40142275, "link": "https://stackoverflow.com/questions/40142275/adding-a-parity-bit-in-c", "title": "Adding a parity bit in C", "body": "<p>So I understand parity bits, but in terms of my code, I don't know how to implement it. In my class, this is the code we're working with and I can't seem to figure out how to add the parity bit to the beginning of the binary number when it's not being stored anywhere, each bit is just being printed as it goes. I hope that makes sense.</p>\n\n<p>Here's a portion of my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define BITS 2\n\nint main(void)\n{\n    int choice;\n    char ch;\n    int asciiChar;\n    char end;\n    int in;\n\n    printf(\"What type of display do you want?\\n\");\n    printf(\"Enter 1 for character parity, 2 for integer checksum: \");\n    scanf(\"%d\", &amp;choice);\n    if(choice == 1)\n    {\n        printf(\"Enter a character for parity calculation: \");\n        scanf(\" %c\", &amp;ch);\n\n        int x = ch, i;\n        int mask = 1 &lt;&lt; sizeof(int) * BITS - 1;\n\n        printf(\"x = %d\\n\", x);\n\n        printf(\"Character: %c, \", ch);\n        printf(\"Bit representation: \");\n        for(i = 1; i &lt;= sizeof(int) * BITS; i++)\n        {\n            if(x &amp; mask)\n                putchar('1');\n            else\n                putchar('0');\n            x &lt;&lt;= 1;\n            if(!(i % 8))\n            {\n                putchar(' ');\n            }\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>I'm not looking for actual answers, I'm just hoping someone can provide me some guidance, thank you!</p>\n"}, {"tags": ["c", "linux", "fopen"], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1476914592, "creation_date": 1476914592, "answer_id": 40142269, "question_id": 40142210, "link": "https://stackoverflow.com/questions/40142210/what-does-the-e-flag-mean-in-fopen/40142269#40142269", "title": "What does the &quot;e&quot; flag mean in fopen", "body": "<p>It's documented in the man page on my system (release 3.54 of the Linux man-pages project).</p>\n\n<blockquote>\n  <p><strong>e</strong> (since glibc 2.7)<br>\n   Open the file with the <code>O_CLOEXEC</code> flag.  See <code>open(2)</code> for more information.  This flag is ignored for <code>fdopen()</code>.</p>\n</blockquote>\n\n<p>Scroll down; it's under \"Glibc notes\".  This is a non-standard extension.</p>\n\n<p>An online copy of the man page is <a href=\"https://linux.die.net/man/3/fdopen\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 362, "user_id": 7035175, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nL0cN4c3sY4/AAAAAAAAAAI/AAAAAAAAACM/zdZW0RFyMFM/photo.jpg?sz=128", "display_name": "Jenna Sloan", "link": "https://stackoverflow.com/users/7035175/jenna-sloan"}, "is_accepted": false, "score": 3, "last_activity_date": 1476914814, "creation_date": 1476914814, "answer_id": 40142313, "question_id": 40142210, "link": "https://stackoverflow.com/questions/40142210/what-does-the-e-flag-mean-in-fopen/40142313#40142313", "title": "What does the &quot;e&quot; flag mean in fopen", "body": "<p>On a <a href=\"http://www.gnu.org/software/libc/manual/html_node/Opening-Streams.html\" rel=\"nofollow\">GNU webpage</a> I found that the <code>e</code> means that the \"file descriptor will be closed if you use any of the exec\u2026 functions\". </p>\n"}], "owner": {"reputation": 2102, "user_id": 2828925, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/18abe23c6b1123371f171f55be659ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/2828925/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2246, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1476914814, "creation_date": 1476914373, "question_id": 40142210, "link": "https://stackoverflow.com/questions/40142210/what-does-the-e-flag-mean-in-fopen", "title": "What does the &quot;e&quot; flag mean in fopen", "body": "<p>I saw a code snippet using <code>fopen(file_name, \"r+e\")</code>. What does the <code>e</code> flag mean in fopen? I couldn't find any information from the linux man page.</p>\n"}, {"tags": ["c", "pointers", "malloc", "valgrind", "free"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476914329, "post_id": 40142156, "comment_id": 67554347, "body": "You are doing one <code>malloc</code> (in main) to allocate an array and then many <code>free</code> calls (in the child threads) for each element in the allocated array. That is not correct. Each <code>malloc</code> must have exactly one <code>free</code> and that <code>free</code> must be given the exact value returned by <code>malloc</code>. Furthermore the main thread also frees the entire array. So that&#39;s a double free as well."}, {"owner": {"reputation": 899, "user_id": 4217786, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/83dc20c5a642afe5ee1d6a59b7f678c2?s=128&d=identicon&r=PG&f=1", "display_name": "ogs", "link": "https://stackoverflow.com/users/4217786/ogs"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1477062125, "post_id": 40142156, "comment_id": 67627141, "body": "@kaylum Thanks ! It seems to solve the issue"}], "owner": {"reputation": 899, "user_id": 4217786, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/83dc20c5a642afe5ee1d6a59b7f678c2?s=128&d=identicon&r=PG&f=1", "display_name": "ogs", "link": "https://stackoverflow.com/users/4217786/ogs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476914141, "creation_date": 1476914141, "question_id": 40142156, "link": "https://stackoverflow.com/questions/40142156/valgrind-output-invalid-free-when-program-is-stopped", "title": "valgrind output : Invalid free() when program is stopped", "body": "<p>I would like to implement an application which is in charge of running several tasks in parallel.</p>\n\n<p>Before adding real tasks, I tried to set the base but the program returns various error when executing by valgrind.</p>\n\n<pre><code>==4827== Thread 3:\n==4827== Invalid free() / delete / delete[] / realloc()\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400E31: my_handler (in /home/test)\n==4827==    by 0x4E416F9: start_thread (pthread_create.c:333)\n==4827==  Address 0x5420070 is 48 bytes inside a block of size 96 free'd\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400E31: my_handler (in /home/test)\n==4827==    by 0x4E416F9: start_thread (pthread_create.c:333)\n==4827==  Block was alloc'd at\n==4827==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400B75: main (in /home/test)\n==4827== \n==4827== Thread 1:\n==4827== Invalid read of size 8\n==4827==    at 0x400CD3: main (in /home/test)\n==4827==  Address 0x5420068 is 40 bytes inside a block of size 96 free'd\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400E31: my_handler (in /home/test)\n==4827==    by 0x4E416F9: start_thread (pthread_create.c:333)\n==4827==  Block was alloc'd at\n==4827==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400B75: main (in /home/test)\n==4827== \n==4827== Invalid read of size 8\n==4827==    at 0x400CFF: main (in /home/test)\n==4827==  Address 0x5420068 is 40 bytes inside a block of size 96 free'd\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400E31: my_handler (in /home/test)\n==4827==    by 0x4E416F9: start_thread (pthread_create.c:333)\n==4827==  Block was alloc'd at\n==4827==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400B75: main (in /home/test)\n==4827== \n==4827== Invalid read of size 8\n==4827==    at 0x400D30: main (in /home/test)\n==4827==  Address 0x5420060 is 32 bytes inside a block of size 96 free'd\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400E31: my_handler (in /home/test)\n==4827==    by 0x4E416F9: start_thread (pthread_create.c:333)\n==4827==  Block was alloc'd at\n==4827==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400B75: main (in /home/test)\n==4827== \ntstop\n==4827== Invalid write of size 8\n==4827==    at 0x400D5B: main (in /home/test)\n==4827==  Address 0x5420068 is 40 bytes inside a block of size 96 free'd\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400E31: my_handler (in /home/test)\n==4827==    by 0x4E416F9: start_thread (pthread_create.c:333)\n==4827==  Block was alloc'd at\n==4827==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400B75: main (in /home/test)\n==4827== \ntstop\n==4827== Invalid free() / delete / delete[] / realloc()\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400D8C: main (in /home/test)\n==4827==  Address 0x5420040 is 0 bytes inside a block of size 96 free'd\n==4827==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400E31: my_handler (in /home/test)\n==4827==    by 0x4E416F9: start_thread (pthread_create.c:333)\n==4827==  Block was alloc'd at\n==4827==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==4827==    by 0x400B75: main (in /home/test)\n==4827== \n==4827== \n==4827== HEAP SUMMARY:\n==4827==     in use at exit: 1,614 bytes in 4 blocks\n==4827==   total heap usage: 9 allocs, 7 frees, 3,334 bytes allocated\n==4827== \n==4827== LEAK SUMMARY:\n==4827==    definitely lost: 0 bytes in 0 blocks\n==4827==    indirectly lost: 0 bytes in 0 blocks\n==4827==      possibly lost: 0 bytes in 0 blocks\n==4827==    still reachable: 1,614 bytes in 4 blocks\n==4827==         suppressed: 0 bytes in 0 blocks\n</code></pre>\n\n<p>I guess these errors are related to memory accessing already freed and invalid free().<br>\nHowever, I can not really understand how and why they occur.</p>\n\n<pre><code>typedef int (*init)();\ntypedef int (*launch)();\ntypedef int (*stop)();\n\ntypedef struct stTask stTask_t;\ntypedef struct stEngine stEngine_t;\n\nstruct stTask\n{\n    char        name[10];    \n    init        initTask;\n    launch      launchTask;\n    stop        stopTask; \n    pthread_t   tId;\n};\n\nstruct stEngine\n{\n   int16_t  NbTasks;\n   stTask_t* TaskThread;\n};\n\nstatic void sig_handler(int signo);\nstatic int tinit(void);\nstatic int tlaunch(void);\nstatic int tstop(void);\nstatic void* my_handler(void* params);\n\nstTask_t array[] =\n{\n    {\"TEST\", (init)tinit, (launch)tlaunch, (stop)tstop, 0},\n    {\"TEST2\", (init)tinit, (launch)tlaunch, (stop)tstop, 0}\n};\n\nint exitReq;\nstEngine_t engine;\n\nint main (int argc, char *argv[])\n{\n    struct sigaction action;\n    int i;\n    exitReq = 0;\n    memset(&amp;engine, 0, sizeof(stEngine_t));\n    engine.NbTasks = 2;\n\n    memset(&amp;action, '\\0', sizeof(action));\n    action.sa_handler = &amp;sig_handler;\n    sigfillset(&amp;action.sa_mask);\n    action.sa_flags = 0;\n    if ((sigaction(SIGTERM, &amp;action, NULL) != 0) || (sigaction(SIGINT,  &amp;action, NULL) != 0)) {\n        exit(EXIT_FAILURE);\n    }\n\n    engine.TaskThread = malloc(engine.NbTasks * sizeof(stTask_t));\n\n    for (i = 0; i &lt; engine.NbTasks; i++) {\n        engine.TaskThread[i] = array[i];\n        engine.TaskThread[i].initTask();\n        pthread_create(&amp;engine.TaskThread[i].tId, NULL, my_handler, (void *) &amp;engine.TaskThread[i]);\n    }\n\n    while (!exitReq) {\n        //... do stuff\n        sched_yield();\n    }       \n\n    for (i = 0; i &lt; engine.NbTasks; i++) {\n        (void)pthread_cancel(engine.TaskThread[i].tId);\n        pthread_join(engine.TaskThread[i].tId, NULL);\n        engine.TaskThread[i].stopTask();\n        engine.TaskThread[i].tId = 0;\n    }\n    free(engine.TaskThread);\n    memset(&amp;engine, 0, sizeof(stEngine_t));          \n    return 0;\n}\n\nstatic void sig_handler(int signo) \n{\n    if (signo == SIGINT || signo == SIGTERM) {\n        exitReq = 1;\n    }\n}\n\nstatic void* my_handler(void* params)\n{\n    stTask_t* ptask = (stTask_t*) params;\n\n    pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);\n\n    while (!exitReq) {\n        ptask-&gt;launchTask();\n        pthread_testcancel();\n    }\n    free(ptask);\n    pthread_exit(NULL);\n}\n\nstatic int tinit(void)\n{\n    fprintf(stdout, \"%s\\n\", __func__);\n    return 0;\n}\n\nstatic int tlaunch(void)\n{\n    fprintf(stdout, \"%s\\n\", __func__);\n    return 0;\n}\n\nstatic int tstop(void)\n{\n    fprintf(stdout, \"%s\\n\", __func__);\n    return 0;\n}\n</code></pre>\n\n<p>By adding a comment into the handling function: I got no error but several bytes are still allocated when the program is manually stopped.</p>\n\n<pre><code>    //free(ptask);\n</code></pre>\n\n<p>I get no error but several bytes are still allocated when the program is manually stopped.\nAs required I pass the struc's address as last parameter of pthread_create, but I probably misunderstand something about the memory</p>\n\n<pre><code>==6017== HEAP SUMMARY:\n==6017==     in use at exit: 1,614 bytes in 4 blocks\n==6017==   total heap usage: 9 allocs, 5 frees, 3,334 bytes allocated\n==6017== \n==6017== LEAK SUMMARY:\n==6017==    definitely lost: 0 bytes in 0 blocks\n==6017==    indirectly lost: 0 bytes in 0 blocks\n==6017==      possibly lost: 0 bytes in 0 blocks\n==6017==    still reachable: 1,614 bytes in 4 blocks\n==6017==         suppressed: 0 bytes in 0 blocks\n</code></pre>\n\n<p>Could someone explain me why, in both cases, memory is not freed correctly ?</p>\n"}, {"tags": ["c++", "c", "loops", "for-loop", "optimization"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1476914513, "post_id": 40142136, "comment_id": 67554405, "body": "<code>b = (abc % (bmax * cmax)) &#47; cmax + 1;</code> should be <code>b = (abc % (amax * cmax)) &#47; cmax + 1;</code> Likewise for c: <code>c = (abc % (amax * bmax)) % cmax + 1;</code> Discalaimer: not saying they are now equivalent (maybe more errors)."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1476914546, "post_id": 40142136, "comment_id": 67554427, "body": "Isn&#39;t adding a bunch of divisions more of a pessimization? And it&#39;s a hell of a lot less readable to boot."}, {"owner": {"reputation": 99, "user_id": 2297501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d00776d10f24a30b0874918eee5ed54?s=128&d=identicon&r=PG", "display_name": "Nayd", "link": "https://stackoverflow.com/users/2297501/nayd"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1476916098, "post_id": 40142136, "comment_id": 67555005, "body": "@DanMa\u0161ek yes, it&#39;s usually a bad idea however this was a needed hack since I want use OpenMP parallel for (and OpenMP 2.0 does not support the collapse operator)."}], "answers": [{"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1476914441, "creation_date": 1476914441, "answer_id": 40142228, "question_id": 40142136, "link": "https://stackoverflow.com/questions/40142136/condensing-nested-loops/40142228#40142228", "title": "Condensing nested loops", "body": "<p>The <code>a</code> loop has <code>amax-1</code> iterations, not <code>amax</code> iterations. Ditto for the <code>b</code> and <code>c</code> loops. So, the single loop should have <code>(amax-1)*(bmax-1)*(cmax-1)</code> iterations.</p>\n\n<p>To extract the <code>a</code>, <code>b</code> and <code>c</code> values treat the single loop index as a mixed base number (the bases you multiplied to find the number of iterations), that is, simple integer division and remainder operations.</p>\n\n<p>Add 1 to each of the resulting values.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476915652, "post_id": 40142248, "comment_id": 67554850, "body": "Is there any mileage to be gained from using <code>div()</code> from <code>&lt;stdlib.h&gt;</code>?  <code>div_t r1 = div(abc, (bmax * cmax); div_t r2 = div(r1.rem, cmax);</code>?"}], "tags": [], "owner": {"reputation": 8360, "user_id": 2103767, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d0b20ba537ec3d705cf87f48cd190d7?s=128&d=identicon&r=PG&f=1", "display_name": "bhantol", "link": "https://stackoverflow.com/users/2103767/bhantol"}, "is_accepted": false, "score": 1, "last_activity_date": 1476977926, "last_edit_date": 1476977926, "creation_date": 1476914526, "answer_id": 40142248, "question_id": 40142136, "link": "https://stackoverflow.com/questions/40142136/condensing-nested-loops/40142248#40142248", "title": "Condensing nested loops", "body": "<p>Your first loop runs far less than second loop.</p>\n\n<p>Imagine</p>\n\n<pre><code>int amax = 3;\nint bmax = 3;\nint cmax = 3;\n</code></pre>\n\n<p>Your first loop has 2, 2, 2 = 8 iterations.</p>\n\n<p>Second loop will run through 0 to &lt; <code>(3 * 3* 3 = 27)</code> i.e. <code>27</code> times</p>\n\n<p>Also there are few more issues in the computation of a,b,c checkout the following/ Notice abc starts at 1 and the condition is <code>&lt;=</code>:- \n(Code in c - haven't touched c++ since ages)</p>\n\n<pre><code>   int x = 1;\n   amax-=1; \n   bmax-=1; \n   cmax-=1;\n\n    int a = 1, b = 1, c = 1;\n    for (int abc = 1; abc &lt;= (amax * bmax * cmax); ++abc)\n    {\n        c = abc % cmax;\n        c = c != 0 ? c : cmax;\n\n        var m = ' a='+a+' b='+b+' c='+c+'  ::::'+(x++);\n        printf(\"%s\\n\", m); \n\n\n        a = abc &lt; (bmax*cmax) || abc % ((bmax*cmax)) != 0 ? a : (a + 1) % amax;\n        a = a != 0 ? a : amax;\n        b = abc &lt; cmax || abc % (cmax) != 0 ? b : (b + 1) % bmax;\n        b = b != 0 ? b : bmax;\n    }\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 2297501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d00776d10f24a30b0874918eee5ed54?s=128&d=identicon&r=PG", "display_name": "Nayd", "link": "https://stackoverflow.com/users/2297501/nayd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1476977926, "creation_date": 1476914077, "last_edit_date": 1476914490, "question_id": 40142136, "link": "https://stackoverflow.com/questions/40142136/condensing-nested-loops", "title": "Condensing nested loops", "body": "<p>I'm trying to convert these 3 loops:</p>\n\n<pre><code>for (a = 1; a &lt; amax; a++) {\n    for (b = 1; b &lt; bmax; b++) {\n        for (c = 1; c &lt; cmax; c++) {\n            ...\n        }\n    }\n}\n</code></pre>\n\n<p>to a single loop.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>for (abc = 0; abc &lt; (amax * bmax * cmax); ++abc)\n{\n    a = abc / (bmax * cmax) + 1;\n    b = (abc % (bmax * cmax)) / cmax + 1;\n    c = (abc % (bmax * cmax)) % cmax + 1;\n\n    ...\n}\n</code></pre>\n\n<p>however it is not equivalent. Where's the logic error?</p>\n"}, {"tags": ["c", "concurrency", "process", "fork", "scheduling"], "comments": [{"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1478172364, "post_id": 40142134, "comment_id": 68050433, "body": "Please edit your question to replace &quot;the possible permutations of which outputs may occur&quot; by something clear. Make sure to clearly explain what the quoted block that follows it is. (It&#39;s some kind of garbling of process output and labeling, and names for processes in the labeling is not explained.) (Also, &quot;Child 1 executing&quot; is only going to be output twice.) See my answer."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 5470001, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c158995cbbdf55b81dad75cc86d43990?s=128&d=identicon&r=PG&f=1", "display_name": "bkennedy", "link": "https://stackoverflow.com/users/5470001/bkennedy"}, "edited": false, "score": 0, "creation_date": 1476924258, "post_id": 40143259, "comment_id": 67557292, "body": "how come <code>child0</code> can produce another child but <code>child1</code> can not?"}, {"owner": {"reputation": 171, "user_id": 7026248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6174d983421a9ab1b95ea7b2ab561043?s=128&d=identicon&r=PG&f=1", "display_name": "flg", "link": "https://stackoverflow.com/users/7026248/flg"}, "reply_to_user": {"reputation": 403, "user_id": 5470001, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c158995cbbdf55b81dad75cc86d43990?s=128&d=identicon&r=PG&f=1", "display_name": "bkennedy", "link": "https://stackoverflow.com/users/5470001/bkennedy"}, "edited": false, "score": 0, "creation_date": 1476955688, "post_id": 40143259, "comment_id": 67570053, "body": "In the graph, I pictured the output of the various processes. Hence, both depicted child1 are not the same processes. In fact, there are 4 processes in total: main, child0, child1(1), child1(2)."}, {"owner": {"reputation": 403, "user_id": 5470001, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c158995cbbdf55b81dad75cc86d43990?s=128&d=identicon&r=PG&f=1", "display_name": "bkennedy", "link": "https://stackoverflow.com/users/5470001/bkennedy"}, "edited": false, "score": 0, "creation_date": 1476976544, "post_id": 40143259, "comment_id": 67585545, "body": "can you explain why child0 produce another child but then the child1 can not?"}], "tags": [], "owner": {"reputation": 171, "user_id": 7026248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6174d983421a9ab1b95ea7b2ab561043?s=128&d=identicon&r=PG&f=1", "display_name": "flg", "link": "https://stackoverflow.com/users/7026248/flg"}, "is_accepted": false, "score": 1, "last_activity_date": 1477082632, "last_edit_date": 1477082632, "creation_date": 1476920604, "answer_id": 40143259, "question_id": 40142134, "link": "https://stackoverflow.com/questions/40142134/concurrent-processes-using-fork/40143259#40143259", "title": "Concurrent Processes using fork()", "body": "<p>First, the code and behavior will be easier to understand if the loop is unrolled. The code then becomes:</p>\n\n<pre><code>int rc;\n\nif ((rc = fork()) == 0)\n    printf(\"Child 0 executing\\n\");                                          \n\nif ((rc = fork()) == 0)\n    printf(\"Child 1 executing\\n\");\n\nprintf(\"All children created\\n\");\n</code></pre>\n\n<p>Then, to help understand what's going, the best is to draw the process hierarchy as a tree. Here is an ASCII version of it:</p>\n\n<pre><code>                main\n                /|\n               / |\n              /  |\\\n          child0 | \\\n            |    |  \\\n            |    | child1\n           /|    |   |\n          / |    |   |\n         /  |    |  end\n        /  end   |   \n       /         | \n    child1      end  \n      |             \n      |             \n     end     \n</code></pre>\n\n<p>In the graph, child0 is the printf statement displaying \"Child 0 executing\", child1 is the statement \"Child 1 executing\" and \"end\" is the printf statement displaying \"All children created\".</p>\n\n<p>As you can see from the graph, you'll get 1x child0, 2x child1 and 4x \"All children created\".</p>\n\n<p>UPDATE @bkennedy</p>\n\n<p>Here is another view that shows the process view only, with P0 being the main (original) process and \"end\" indicating each process' completion:</p>\n\n<pre><code>                P0\n                /|\n               / |\n              /  |\\\n            P1   | \\\n            |    |  \\\n            |    |  P2   \n           /|    |   |\n          / |    |   |\n         /  |    |  end\n        /  end   |   \n       /         | \n      P3        end  \n      |             \n      |             \n     end     \n</code></pre>\n\n<ul>\n<li>There are really 4 processes: P0 (main), P1, P2 and P3.</li>\n<li>P1 is the first child of P0; it displays \"Child 0 executing\".</li>\n<li>P2 is the second child of P0; it displays \"Child 1 executing\". P2 never creates any children, it just finishes with the printf statement.</li>\n<li>P3 is the first (and only) child of P1.</li>\n<li>Each process displays \"All children created\" when they finish.</li>\n</ul>\n\n<p>Remember:</p>\n\n<ul>\n<li>P0 (main) goes through 2 fork calls, hence the 2 children.</li>\n<li>P1 goes through 1 fork call, hence the single child (P3).</li>\n<li>P2 never goes through a fork call.</li>\n</ul>\n\n<p>That's it, there is no other process creation. I'm not sure how to explain this better to you.</p>\n"}, {"tags": [], "owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "is_accepted": false, "score": 0, "last_activity_date": 1478171830, "creation_date": 1478171830, "answer_id": 40400162, "question_id": 40142134, "link": "https://stackoverflow.com/questions/40142134/concurrent-processes-using-fork/40400162#40400162", "title": "Concurrent Processes using fork()", "body": "<p>After the first fork and the if statement that it's in, the \"child 0 executing\" process and its silent parent process main go on to the next if statement. There they both produce a \"child 1 executing\" process while remaining silent. All of those four processes, ie main, the \"child 0 executing\" process, main's \"child 1 executing\" process\" and the \"child 0 executing\" process's \"child 1 executing process\", go on after the second fork and the if statement that it's in to print \"all children created\".</p>\n\n<p>One of \"Child 0 executing\" is output, two of \"Child 1 executing\" are output, and four of \"All children created\" are output.</p>\n\n<blockquote>\n  <p>How come child 1 can create a \"grand child\" but child 0 can not?</p>\n</blockquote>\n\n<p>No \"child 1\" creates a child. Main and \"child 0\" each create a \"child 1\". The output apparently calls \"child 0\"'s \"child 1\" the \"Grand child\" of main. So no \"child 1\" creates a child, and both main and \"child 0\" produce a \"child 1\". So your question is wrong about both \"child 1\" (of which there are two) and \"child 0\".</p>\n\n<blockquote>\n  <p>HOW these outputs occur</p>\n</blockquote>\n\n<p>The quoted \"output\" seems to call main Parent, the \"child 0\" process Child 0, main's \"child 1\" process Child 2 and the \"child 0\" process's \"child 1\" process Grand child. So you need to distinguish between what the \"output\" is naming the processes and what those processes are outputing. It also has three lines outputing \"Child 1 executing\", which is wrong. But <em>you</em> should be telling <em>us</em> what that \"output\" is supposed to be.</p>\n"}], "owner": {"reputation": 403, "user_id": 5470001, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c158995cbbdf55b81dad75cc86d43990?s=128&d=identicon&r=PG&f=1", "display_name": "bkennedy", "link": "https://stackoverflow.com/users/5470001/bkennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478172482, "creation_date": 1476914071, "last_edit_date": 1478172482, "question_id": 40142134, "link": "https://stackoverflow.com/questions/40142134/concurrent-processes-using-fork", "title": "Concurrent Processes using fork()", "body": "<p>I am given the following code:</p>\n\n<pre><code>main()\n{\nint i, rc;\n for (i = 0; i&lt;=1; i++)\n {\n   if( (rc=fork()) == 0)\n   {\n    printf(\"Child %d executing\\n\",i);\n   }  /*end if*/\n } /*end for*/ \n}\nprintf(\"All children created\\n\");\n</code></pre>\n\n<p>I am also given the solution of the possible permutations of which outputs may occur. </p>\n\n<blockquote>\n  <p>Child 0 executing |</p>\n  \n  <p>Child 1 executing | Child 1\n   All children created |</p>\n  \n  <p>Child 1 executing | Child 2\n   All children created |</p>\n  \n  <p>Child 1 executing | Grand child\n   All children created |</p>\n  \n  <p>All children created | Parent</p>\n</blockquote>\n\n<p>I know that these outputs are created by each process but I am just having trouble tracing them to understand <strong>HOW</strong> these outputs occur. I know <code>fork()</code> creates a process and <code>if (fork() == 0)</code> means it is a child process, but if anyone can help me understand where the answers beyond <em>Child 0 executing |</em> come about thanks. I believe the | is just a description of which process is currently being ran. How come <code>child 1</code> can create a \"grand child\" but child 0 can not?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1476912894, "post_id": 40141865, "comment_id": 67553777, "body": "<code>&amp;a</code> returns the ADDRESS of the variable (e.g. a pointer)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476912916, "post_id": 40141865, "comment_id": 67553781, "body": "another mistake is that <code>&quot; %d &quot;</code> in the last scan should be <code>&quot;%d&quot;</code> (no spaces). And <code>&amp;sName</code> should be <code>sName</code>."}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1476912839, "creation_date": 1476912839, "answer_id": 40141877, "question_id": 40141865, "link": "https://stackoverflow.com/questions/40141865/c-integer-throwing-out-random-value/40141877#40141877", "title": "C - Integer throwing out random value?", "body": "<p>Change this:</p>\n\n<pre><code>printf(\"%d\", &amp;a);\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>printf(\"%d\", a);\n</code></pre>\n\n<p><code>&amp;a</code> is the address of <code>a</code> (and it's of type <code>int*</code>, so <code>%d</code> is the wrong format). <code>a</code> gives you the value of <code>a</code>.</p>\n\n<p>You still need the <code>&amp;</code> in <code>scanf(\" %d \", &amp;sTime);</code>; <code>scanf</code> needs the address of <code>sTime</code> so it knows where to store the value.</p>\n"}, {"tags": [], "owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "is_accepted": false, "score": 1, "last_activity_date": 1476912849, "creation_date": 1476912849, "answer_id": 40141879, "question_id": 40141865, "link": "https://stackoverflow.com/questions/40141865/c-integer-throwing-out-random-value/40141879#40141879", "title": "C - Integer throwing out random value?", "body": "<p>You're printing the address of <code>a</code>. You don't want the <code>&amp;</code> in there:</p>\n\n<pre><code>printf(\"%d\", a);\n</code></pre>\n\n<p>You <em>do</em> want the <code>&amp;</code> for <code>scanf()</code> because you need to tell that function where (at what address) to store the value.</p>\n"}], "owner": {"reputation": 21, "user_id": 4650438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5ec50aa076083ec8564b12ea9caf25?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Millward", "link": "https://stackoverflow.com/users/4650438/thomas-millward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476922857, "creation_date": 1476912771, "last_edit_date": 1476922857, "question_id": 40141865, "link": "https://stackoverflow.com/questions/40141865/c-integer-throwing-out-random-value", "title": "C - Integer throwing out random value?", "body": "<p>Currently I am writing a simple program in C that reads in values the user enters in a loop. For some reason, when I initialize the integer <code>a</code> I am given a random value as opposed to the value I specified. Any help would be greatly appreciated</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char sName[10];\n    int sTime;\n    int a = 0;\n\n    printf(\"%d\", &amp;a);\n\n    printf(\"Please enter the name of your snail: \");\n    scanf(\"%s\", &amp;sName);\n\n    for(a = 10; a &lt; 20; a = a + 1) {\n        printf(\"%d\", &amp;a);\n        printf(\"Please enter the %d time of your snail: \", &amp;a + 1);\n        scanf(\" %d \", &amp;sTime);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "swift", "swift3", "core-telephony", "cfnotification"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1485780902, "post_id": 40141675, "comment_id": 71053088, "body": "It does not compile because <code>observer</code> is a <code>UnsafeMutableRawPointer</code>, not a <code>UnsafeRawPointer</code>."}], "answers": [{"comments": [{"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "edited": false, "score": 0, "creation_date": 1476916482, "post_id": 40142537, "comment_id": 67555146, "body": "Ah so it does, I was overcomplicating things.  Thanks!"}], "tags": [], "owner": {"reputation": 6932, "user_id": 3476191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJGHG.png?s=128&g=1", "display_name": "NobodyNada", "link": "https://stackoverflow.com/users/3476191/nobodynada"}, "is_accepted": true, "score": 2, "last_activity_date": 1476916070, "creation_date": 1476916070, "answer_id": 40142537, "question_id": 40141675, "link": "https://stackoverflow.com/questions/40141675/using-cfnotificationcallback-in-swift-or-conventionc-blocks-in-swift/40142537#40142537", "title": "Using CFNotificationCallback in Swift, or, @convention(c) blocks in Swift", "body": "<p>Letting the compiler infer the closure's signature works fine:</p>\n\n<pre><code>let callback: CFNotificationCallback = { center, observer, name, object, info in\n    //works fine\n}\n</code></pre>\n\n<p>Trying to specify <code>@convention(c)</code> in the closure's declaration gives an error:</p>\n\n<pre><code>let callback: CFNotificationCallback = { @convention(c) (center: CFNotificationCenter?, observer: UnsafeRawPointer?, name: CFString?, object: UnsafeRawPointer?, info: CFDictionary?) -&gt; Void in\n    //Attribute can only be applied to types, not declarations.\n}\n</code></pre>\n\n<p>It seems like what's going on is that when you manually declare the closure's type, it forces the compiler to use that exact type.  But that's technically a closure declaration and not a type declaration, so the <code>@convention</code> attribute isn't allowed.  When the compiler is allowed to infer the closure's type (from the type of the variable it is being stored in), it can infer the attribute too.</p>\n"}], "owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1915, "favorite_count": 1, "accepted_answer_id": 40142537, "answer_count": 1, "score": 1, "last_activity_date": 1478894263, "creation_date": 1476911842, "last_edit_date": 1478894263, "question_id": 40141675, "link": "https://stackoverflow.com/questions/40141675/using-cfnotificationcallback-in-swift-or-conventionc-blocks-in-swift", "title": "Using CFNotificationCallback in Swift, or, @convention(c) blocks in Swift", "body": "<p>I am trying to listen to CoreTelephony notifications using the (now private) <code>CTTelephonyCenterAddObserver</code> C function and <code>CFNotificationCallback</code> callback blocks.</p>\n\n<p>My bridging header (to extern the private C functions):</p>\n\n<pre><code>#include &lt;CoreFoundation/CoreFoundation.h&gt;\n\n#if __cplusplus\nextern \"C\" {\n#endif\n\n#pragma mark - API\n\n    /* This API is a mimic of CFNotificationCenter. */\n\n    CFNotificationCenterRef CTTelephonyCenterGetDefault();\n    void CTTelephonyCenterAddObserver(CFNotificationCenterRef center, const void *observer, CFNotificationCallback callBack, CFStringRef name, const void *object, CFNotificationSuspensionBehavior suspensionBehavior);\n    void CTTelephonyCenterRemoveObserver(CFNotificationCenterRef center, const void *observer, CFStringRef name, const void *object);\n    void CTTelephonyCenterRemoveEveryObserver(CFNotificationCenterRef center, const void *observer);\n\n    void CTIndicatorsGetSignalStrength(long int *raw, long int *graded, long int *bars);\n\n#pragma mark - Definitions\n\n    /* For use with the CoreTelephony notification system. */\n    extern CFStringRef kCTIndicatorsSignalStrengthNotification;\n\n#if __cplusplus\n}\n#endif\n</code></pre>\n\n<p>My Swift code:</p>\n\n<pre><code>let callback: CFNotificationCallback = { (center: CFNotificationCenter?, observer: UnsafeRawPointer?, name: CFString?, object: UnsafeRawPointer?, info: CFDictionary?) -&gt; Void in\n    // ...\n}\n\nCTTelephonyCenterAddObserver(CTTelephonyCenterGetDefault().takeUnretainedValue(), nil, callback, kCTIndicatorsSignalStrengthNotification.takeUnretainedValue(), nil, .coalesce)\n</code></pre>\n\n<p>However, I can't get the signature of my <code>completion</code> variable to match the requirements of the <code>CFNotificationCallback</code> typealias.</p>\n\n<blockquote>\n<pre><code>Cannot convert value of type\n'(CFNotificationCenter?, UnsafeRawPointer?, CFString?, UnsafeRawPointer?, CFDictionary?) -&gt; Void'\nto specified type\n'CFNotificationCallback' (aka '@convention(c) (Optional&lt;CFNotificationCenter&gt;, Optional&lt;UnsafeMutableRawPointer&gt;, Optional&lt;CFNotificationName&gt;, Optional&lt;UnsafeRawPointer&gt;, Optional&lt;CFDictionary&gt;) -&gt; ()')\n</code></pre>\n</blockquote>\n\n<p>How can I get <code>@convention(c)</code> closures to play nicely in Swift?</p>\n"}, {"tags": ["c", "algorithm", "crc"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1476912541, "post_id": 40141505, "comment_id": 67553612, "body": "Not my downvote. But the question should be self contained, i.e. any code relevant to the question should be in the question itself. The answer to your question is, &quot;Yes, you can use a generator polynomial of any order with a table based CRC algorithm.&quot; But in order to explain the comment you quoted, the code needs to be in the question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1476912563, "post_id": 40141505, "comment_id": 67553624, "body": "Certainly code can be written to handle CRC&#39;s at values other than multiples of 8.  8 is just simpler.  The post&#39;s goal is wide ranging, suggest narrowing."}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476913222, "post_id": 40141505, "comment_id": 67553911, "body": "@chux: narrowing? How?"}, {"owner": {"reputation": 930, "user_id": 4511056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bb6c2868ac49ca03c83544133f34b3?s=128&d=identicon&r=PG&f=1", "display_name": "Secto Kia", "link": "https://stackoverflow.com/users/4511056/secto-kia"}, "edited": false, "score": 0, "creation_date": 1476913601, "post_id": 40141505, "comment_id": 67554079, "body": "Of course its possible for any width, but the code would be alot more complex and slower to run. Its like asking can you do signed math that overflows at 13 bits. Of course you can, but you are going to have to do a lot of work yourself to make it happen."}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "reply_to_user": {"reputation": 930, "user_id": 4511056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bb6c2868ac49ca03c83544133f34b3?s=128&d=identicon&r=PG&f=1", "display_name": "Secto Kia", "link": "https://stackoverflow.com/users/4511056/secto-kia"}, "edited": false, "score": 0, "creation_date": 1476913878, "post_id": 40141505, "comment_id": 67554186, "body": "@Secto Kia: Well currently I use bit-wise algorithm for uncommon widths which probably is worst case. Any help or example how to implement it?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1476914298, "post_id": 40141505, "comment_id": 67554336, "body": "The only limitation in the CRC code itself is the shift by <code>order-8</code>. That assumes that <code>order &gt;= 8</code>. There is however the issue of the <code>reflect</code> function. I assume that function contains code that requires multiples of 8. If you don&#39;t need to <code>reflect</code> the input and output, the multiply of 8 limitation should go away."}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1476914678, "post_id": 40141505, "comment_id": 67554481, "body": "@user3386109: Added reflect code. Seems to have no such limitation."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1476915069, "post_id": 40141505, "comment_id": 67554619, "body": "Yup, the reflect code is bitwise. So I see no reason for that comment. The only limitation in that code is <code>order</code> must be <code>&gt;= 8</code>. So I would choose a generator polynomial with 9 bits, and then compare outputs from your bitwise code, and this table-based code. Of course, you should start by making sure your code agrees with this code for 8,16,24, and 32 bits. You&#39;re going to need to get the reflections sorted out."}], "answers": [{"comments": [{"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1476964254, "post_id": 40146395, "comment_id": 67576115, "body": "Thanks. Very interesting code of yours. Maybe I skipped that when browsing the files... but why does the code include a bit-wise function? Is there anything the bit-wise function can do what the table functions can&#39;t? Or is it for testing only?"}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "reply_to_user": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 1, "creation_date": 1476988068, "post_id": 40146395, "comment_id": 67592638, "body": "Yes. You need the bit-wise function to build the tables! Also if you want to compute the CRC on a number of bits that are not a multiple of eight, then you can adapt the bit-wise function to do that. Lastly, in an embedded system, the compactness of the CRC function may be more important than the speed."}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1476989521, "post_id": 40146395, "comment_id": 67593517, "body": "With &quot;multiple of eight&quot; you mean the data width, not the checksum width, right?"}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1477245457, "post_id": 40146395, "comment_id": 67676541, "body": "I tried to use your code. Getting a seg fault. I added an issue to github... are you active there?"}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "reply_to_user": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1477250392, "post_id": 40146395, "comment_id": 67678117, "body": "Yes. You can&#39;t use a literal string."}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1476942490, "creation_date": 1476942490, "answer_id": 40146395, "question_id": 40141505, "link": "https://stackoverflow.com/questions/40141505/crc-table-algorithm-in-c-width-limitation/40146395#40146395", "title": "CRC table algorithm in C, width limitation", "body": "<p>Yes, you can implement table-based CRCs for any width polynomial. See the output of <a href=\"https://github.com/madler/crcany\" rel=\"nofollow\">crcany</a> for example of table-based implementations for, for example, 5-bit, 13-bit, and 31-bit CRCs.</p>\n\n<p>There is nothing tricky about this.</p>\n"}], "owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "accepted_answer_id": 40146395, "answer_count": 1, "score": 0, "last_activity_date": 1476942490, "creation_date": 1476911033, "last_edit_date": 1476914449, "question_id": 40141505, "link": "https://stackoverflow.com/questions/40141505/crc-table-algorithm-in-c-width-limitation", "title": "CRC table algorithm in C, width limitation", "body": "<p>I found an easy to use implementation of CRC algorithms <a href=\"http://www.zorc.breitbandkatze.de/crctester.c\" rel=\"nofollow\">here</a>. It includes table based and bit-wise algorithms. The code seems to work fine but there is an important limitation of table based algorithms. This is the relevant code:</p>\n\n<pre><code>unsigned long reflect (unsigned long crc, int bitnum) {\n    unsigned long i, j=1, crcout=0;\n\n    for (i=(unsigned long)1&lt;&lt;(bitnum-1); i; i&gt;&gt;=1) {\n        if (crc &amp; i) crcout|=j;\n        j&lt;&lt;= 1;\n    }\n    return (crcout);\n}\n\nvoid generate_crc_table() {\n    // make CRC lookup table used by table algorithms\n\n    int i, j;\n    unsigned long bit, crc;\n\n    for (i=0; i&lt;256; i++) {\n        crc=(unsigned long)i;\n        if (refin) crc=reflect(crc, 8);\n        crc&lt;&lt;= order-8;\n\n        for (j=0; j&lt;8; j++) {\n            bit = crc &amp; crchighbit;\n            crc&lt;&lt;= 1;\n            if (bit) crc^= polynom;\n        }           \n\n        if (refin) crc = reflect(crc, order);\n        crc&amp;= crcmask;\n        crctab[i]= crc;\n    }\n}  \n\nunsigned long crctablefast (unsigned char* p, unsigned long len) {\n\n    // fast lookup table algorithm without augmented zero bytes, e.g. used in pkzip.\n    // only usable with polynom orders of 8, 16, 24 or 32.\n\n    unsigned long crc = crcinit_direct;\n\n    if (refin) crc = reflect(crc, order);\n\n    if (!refin) while (len--) crc = (crc &lt;&lt; 8) ^ crctab[ ((crc &gt;&gt; (order-8)) &amp; 0xff) ^ *p++];\n    else while (len--) crc = (crc &gt;&gt; 8) ^ crctab[ (crc &amp; 0xff) ^ *p++];\n\n    if (refout^refin) crc = reflect(crc, order);\n    crc^= crcxor;\n    crc&amp;= crcmask;\n\n    return(crc);\n}\n</code></pre>\n\n<p>Please note code comments for table functions say:</p>\n\n<blockquote>\n  <p>only usable with polynom orders of 8, 16, 24 or 32.</p>\n</blockquote>\n\n<p>Are table based algorithms generally limited to widths that are multiples of eight (especially table algorithms that use 16 and 32 bit tables)?</p>\n\n<p>Is it possible to implement a table based CRC algorithm that accepts <em>any</em> CRC widths (not only multiples of 8)? How?</p>\n"}, {"tags": ["java", "c", "linux", "java-native-interface"], "comments": [{"owner": {"reputation": 1786, "user_id": 1385083, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u6xm6.jpg?s=128&g=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/1385083/jamie"}, "edited": false, "score": 0, "creation_date": 1476911017, "post_id": 40141415, "comment_id": 67552911, "body": "Is &quot;libspeiler.so&quot; created in both cases?  Or, what is the compiler error?  What code are you using to load the .so?"}, {"owner": {"reputation": 1470, "user_id": 6620333, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4eb000d274caa34e6db0ff8e77a6a677?s=128&d=identicon&r=PG&f=1", "display_name": "mafioso", "link": "https://stackoverflow.com/users/6620333/mafioso"}, "reply_to_user": {"reputation": 1786, "user_id": 1385083, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u6xm6.jpg?s=128&g=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/1385083/jamie"}, "edited": false, "score": 0, "creation_date": 1476911111, "post_id": 40141415, "comment_id": 67552960, "body": "There is no error.. The C project should read from a txt file. If I have the sources in the bin folder it works, if I have them in a separate folder the table is empty without changing the code"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1476911423, "post_id": 40141415, "comment_id": 67553092, "body": "step through with a debugger and see what&#39;s going awry with the new version.. my first guess would be a relative file path is now busted somehow."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1476911518, "post_id": 40141415, "comment_id": 67553140, "body": "use <code>make</code> instead of a script?"}], "answers": [{"tags": [], "owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "is_accepted": true, "score": 1, "last_activity_date": 1476913246, "creation_date": 1476913246, "answer_id": 40141960, "question_id": 40141415, "link": "https://stackoverflow.com/questions/40141415/compiling-project-in-linux-terminal-doesnt-work/40141960#40141960", "title": "Compiling project in Linux terminal doesn&#39;t work", "body": "<p>The working script has:</p>\n\n<pre><code>cd bin\ngcc -fPIC -o libspieler.so -shared -I/usr/java/jdk1.8.0_73/include/ SharedTable.c\n</code></pre>\n\n<p>And the other version has:</p>\n\n<pre><code>cd data\ngcc -fPIC -o libspieler.so -shared -I/usr/java/jdk1.8.0_73/include/ SharedTable.c -lc\n</code></pre>\n\n<p>So <code>SharedTable.c</code> must be in the <code>bin</code> directory, and the <code>gcc</code> command can't find it because it's no longer in the current directory.  Try\nusing a relative path instead:</p>\n\n<pre><code>gcc -fPIC -o libspieler.so -shared -I/usr/java/jdk1.8.0_73/include/ ../bin/SharedTable.c -lc\n</code></pre>\n"}], "owner": {"reputation": 1470, "user_id": 6620333, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4eb000d274caa34e6db0ff8e77a6a677?s=128&d=identicon&r=PG&f=1", "display_name": "mafioso", "link": "https://stackoverflow.com/users/6620333/mafioso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 40141960, "answer_count": 1, "score": 2, "last_activity_date": 1476913246, "creation_date": 1476910704, "question_id": 40141415, "link": "https://stackoverflow.com/questions/40141415/compiling-project-in-linux-terminal-doesnt-work", "title": "Compiling project in Linux terminal doesn&#39;t work", "body": "<p>I have a <code>Compile.sh</code> file.<br>\nThis one works like a charm:</p>\n\n<pre><code>cd src\njavac model/JNIResultSet.java\njavah -jni model.JNIResultSet\ncp model_JNIResultSet.h ./../bin/\ncd ..\n\ncd bin\n\ngcc -fPIC -o libspieler.so -shared -I/usr/java/jdk1.8.0_73/include/ SharedTable.c -lc\n\njava -Djava.library.path=./../bin/ app.Main\n</code></pre>\n\n<p>My problem is that I don't want to have my sources in the bin folder.<br>\nI want to have them in a separate folder.<br>\nFor that my script looks like this one:</p>\n\n<pre><code>cd src\njavac model/JNIResultSet.java\njavah -jni model.JNIResultSet\ncp model_JNIResultSet.h ./../data/\ncd ..\n\ncd data\n\ngcc -fPIC -o libspieler.so -shared -I/usr/java/jdk1.8.0_73/include/ SharedTable.c -lc\ncd ..\ncd bin\njava -Djava.library.path=./../data/ app.Main\n</code></pre>\n\n<p>I don't know why this one isn't working. I get no exception but the program also doesn't work correctly. Do you know how to fix it?</p>\n"}, {"tags": ["c", "go", "compilation", "binary"], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1476910371, "post_id": 40141212, "comment_id": 67552575, "body": "And the docs aren&#39;t update for later than go1.7, which compiles that program to around 1.4M (and ~1M if you link with <code>-w</code> and <code>-s</code>)"}], "tags": [], "owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "is_accepted": true, "score": 6, "last_activity_date": 1476909917, "creation_date": 1476909917, "answer_id": 40141212, "question_id": 40141143, "link": "https://stackoverflow.com/questions/40141143/go-binary-size-in-comparison-with-c/40141212#40141212", "title": "Go binary size in comparison with c", "body": "<p>Go binaries are, by default, statically linked, and also contain more information such as information about types that allows for reflection, type assertions, and so on. To quote the <a href=\"https://golang.org/doc/faq#Why_is_my_trivial_program_such_a_large_binary\" rel=\"noreferrer\">Go FAQ</a>:</p>\n\n<blockquote>\n  <p>The linker in the gc tool chain creates statically-linked binaries by\n  default. All Go binaries therefore include the Go run-time, along with\n  the run-time type information necessary to support dynamic type\n  checks, reflection, and even panic-time stack traces.</p>\n  \n  <p>A simple C \"hello, world\" program compiled and linked statically using\n  gcc on Linux is around 750 kB, including an implementation of printf.\n  An equivalent Go program using fmt.Printf is around 2.3 MB, but that\n  includes more powerful run-time support and type information.</p>\n</blockquote>\n"}], "owner": {"reputation": 2384, "user_id": 3553432, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fb2106952e54afdb0d370799f988ba25?s=128&d=identicon&r=PG", "display_name": "nikoss", "link": "https://stackoverflow.com/users/3553432/nikoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 0, "closed_date": 1476917099, "accepted_answer_id": 40141212, "answer_count": 1, "score": -1, "last_activity_date": 1476909927, "creation_date": 1476909693, "question_id": 40141143, "link": "https://stackoverflow.com/questions/40141143/go-binary-size-in-comparison-with-c", "closed_reason": "Duplicate", "title": "Go binary size in comparison with c", "body": "<p>Yesterday I just wanted to compare simple golang <code>HelloWorld</code> app with c, go binary was something like <code>2-3 MB</code> (just <code>fmt.Println</code>) the equivalent c code, however, was just about 20 kb (<code>printf</code>). Then I checked system calls both binaries were doing, using <code>strace</code>; there was not a huge difference between both so do you have any idea why golang binary is so massive in comparison with c equivalent?</p>\n"}, {"tags": ["c", "zeromq", "flatbuffers"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 8510932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--8S1PLkA3ZA/AAAAAAAAAAI/AAAAAAAAABY/GbtwPzwD7qk/photo.jpg?sz=128", "display_name": "Arnoud Vangrunderbeek", "link": "https://stackoverflow.com/users/8510932/arnoud-vangrunderbeek"}, "edited": false, "score": 1, "creation_date": 1568211659, "post_id": 40141121, "comment_id": 102203844, "body": "Thank you sir, this really helped me!"}], "tags": [], "owner": {"reputation": 7988, "user_id": 584947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5c0e998a5b4fdce4f95cbec31e6dab22?s=128&d=identicon&r=PG", "display_name": "anon58192932", "link": "https://stackoverflow.com/users/584947/anon58192932"}, "is_accepted": true, "score": 3, "last_activity_date": 1476909608, "creation_date": 1476909608, "answer_id": 40141121, "question_id": 40141120, "link": "https://stackoverflow.com/questions/40141120/simple-flatbuffers-over-zeromq-c-example-copy-struct-to-flatbuffer-over-zmq-an/40141121#40141121", "title": "Simple Flatbuffers over ZeroMQ C example - Copy struct to flatbuffer over zmq and back to a struct again", "body": "<p>Car.fbs</p>\n\n<pre><code>namespace Test;\n\ntable Car {\n    name: string;\n    model: string;\n    year: int;\n}\nroot_type Car;\n</code></pre>\n\n<p>Subscriber.c (listens for incoming structs)</p>\n\n<pre><code>//  Hello World client\n#include \"flatbuffers/Car_builder.h\" // Generated by `flatcc`.\n#include \"flatbuffers/flatbuffers_common_builder.h\"\n#include &lt;zmq.h&gt;\n\n#undef ns\n#define ns(x) FLATBUFFERS_WRAP_NAMESPACE(Test, x) // Specified in the schema\n\nstruct Car {\n    char* name;\n    char* model;\n    int year;\n};\n\nint main (void)\n{\n    printf (\"Connecting to car world server...\\n\");\n    void *context = zmq_ctx_new ();\n    void *requester = zmq_socket (context, ZMQ_REQ);\n    zmq_connect (requester, \"tcp://localhost:5555\");\n\n    int request_nbr;\n    for (request_nbr = 0; request_nbr != 10; request_nbr++) {\n        char buffer [1024];\n        printf (\"Sending ready signal %d...\\n\", request_nbr);\n        zmq_send (requester, \"Hello\", 5, 0);\n        zmq_recv (requester, buffer, 1024, 0);\n        printf (\"Received car %d\\n\", request_nbr);\n        ns(Car_table_t) car = ns(Car_as_root(buffer));\n        int year = ns(Car_year(car));\n        flatbuffers_string_t model = ns(Car_model(car));\n        flatbuffers_string_t name = ns(Car_name(car));\n\n        struct Car nextCar;\n        // no need to double up on memory!!\n        // strcpy(nextCar.model, model);\n        // strcpy(nextCar.name, name);\n        nextCar.model = model;\n        nextCar.name = name;\n        nextCar.year = year;\n\n        printf(\"Year: %d\\n\", nextCar.year);\n        printf(\"Name: %s\\n\", nextCar.name);\n        printf(\"Model: %s\\n\", nextCar.model);\n    }\n    zmq_close (requester);\n    zmq_ctx_destroy (context);\n    return 0;\n}\n</code></pre>\n\n<p>Publisher.c (sends structs over zmq socket):</p>\n\n<pre><code>//  Hello World server\n\n#include \"flatbuffers/Car_builder.h\" // Generated by `flatcc`.\n#include \"flatbuffers/flatbuffers_common_builder.h\"\n#include &lt;zmq.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt;\n\n#undef ns\n#define ns(x) FLATBUFFERS_WRAP_NAMESPACE(Test, x) // specified in the schema\n\nstruct Car {\n    char name[10];\n    char model[10];\n    int year;\n};\n\nstruct Car getRandomCar() {\n    struct Car randomCar;\n    int a = rand();\n    if ((a % 2) == 0) {\n        strcpy(randomCar.name, \"Ford\");\n        strcpy(randomCar.model, \"Focus\");\n    } else {\n        strcpy(randomCar.name, \"Dodge\");\n        strcpy(randomCar.model, \"Charger\");\n    }\n    randomCar.year = rand();\n    return randomCar;\n}\n\nint main (void)\n{\n    srand(time(NULL));\n\n    //  Socket to talk to clients\n    void *context = zmq_ctx_new ();\n    void *responder = zmq_socket (context, ZMQ_REP);\n    int rc = zmq_bind (responder, \"tcp://*:5555\");\n    assert (rc == 0);\n    int counter = 0;\n\n    while (1) {\n        struct Car c = getRandomCar();\n\n        flatcc_builder_t builder, *B;\n        B = &amp;builder;\n        // Initialize the builder object.\n        flatcc_builder_init(B);\n        uint8_t *buf; // raw buffer used by flatbuffer\n        size_t size; // the size of the flatbuffer\n        // Convert the char arrays to strings\n        flatbuffers_string_ref_t name = flatbuffers_string_create_str(B, c.name);\n        flatbuffers_string_ref_t model = flatbuffers_string_create_str(B, c.model);\n\n        ns(Car_start_as_root(B));\n        ns(Car_name_add(B, name));\n        ns(Car_model_add(B, model));\n        ns(Car_year_add(B, c.year));\n        ns(Car_end_as_root(B));\n        buf = flatcc_builder_finalize_buffer(B, &amp;size);\n\n        char receiveBuffer [10];\n        zmq_recv (responder, receiveBuffer, 10, 0);\n        printf (\"Received ready signal. Sending car %d.\\n\", counter);\n        sleep (1);          //  Do some 'work'\n        zmq_send (responder, buf, size, 0);\n        counter++;\n\n        free(buf);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7988, "user_id": 584947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5c0e998a5b4fdce4f95cbec31e6dab22?s=128&d=identicon&r=PG", "display_name": "anon58192932", "link": "https://stackoverflow.com/users/584947/anon58192932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1476, "favorite_count": 1, "accepted_answer_id": 40141121, "answer_count": 1, "score": 1, "last_activity_date": 1476978898, "creation_date": 1476909608, "last_edit_date": 1476978898, "question_id": 40141120, "link": "https://stackoverflow.com/questions/40141120/simple-flatbuffers-over-zeromq-c-example-copy-struct-to-flatbuffer-over-zmq-an", "title": "Simple Flatbuffers over ZeroMQ C example - Copy struct to flatbuffer over zmq and back to a struct again", "body": "<p>Posting my work for posterity. Realized after finishing my last example in C++ that I actually needed to do it in C all along (awesome, right?). Both iterations took me considerable effort as a Java programmer and I think a lot of the sample code out there leaves far too many holes - <em>especially</em> when it comes to building which is considerably more difficult from the command line for someone who is used to using, say Eclipse, to build a project and handle dependencies.</p>\n\n<p>How to install dependencies for OSX with brew:</p>\n\n<p><code>brew install flatcc</code><br>\n<code>brew install zeromq</code></p>\n\n<p>You'll need all the standard builder binaries installed as well. I used gcc to compile with:</p>\n\n<p><code>gcc publisher.c -o bin/zmq_pub -lzmq -lflatcc</code><br>\n<code>gcc subscriber.c -o bin/zmq_sub -lzmq</code></p>\n\n<p>This assumes you've installed the zmq and flatcc libraries which should get symlinked to your /usr/local/include after brew finishes installing them. Like this:</p>\n\n<p><code>\nzmq_cpub $ls -la /usr/local/include\nlrwxr-xr-x    1 user  group     37 Oct 18 18:43 flatcc -&gt; ../Cellar/flatcc/0.3.4/include/flatcc\n</code></p>\n\n<p>You'll get compilation errors such as:\n<code>Undefined symbols for architecture x86_64:</code> if you don't have the libraries correctly installed / linked. The compiler / linker will rename functions and prefix them with _ and potentially confuse the hell out of you. Like <code>Undefined symbols for architecture x86_64 _flatcc_builder_init</code> even though there never is supposed to be an <code>_flatcc_builder_init</code>. </p>\n\n<p>That's because linking libraries in C / C++ is fundamentally different than in Java. Instead of a specific project build path that you add JARs too there are known locations where external C / C++ libraries can install to. <code>/usr/local/include</code>, <code>/usr/local/lib</code>, <code>/usr/lib</code>, and <code>/usr/include</code>.</p>\n\n<p>And don't forget to generate the header files to use in your local project after installing the flatcc binary to your path:</p>\n\n<p><code>flatcc -a Car.fbs</code></p>\n\n<p>That should be pretty much every obstacle I faced on my trip down C lane. Hope it helps someone out there. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1476911573, "post_id": 40141116, "comment_id": 67553182, "body": "In the future, skip the editorializing and cut to the chase."}, {"owner": {"reputation": 3, "user_id": 6949091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFNKs.png?s=128&g=1", "display_name": "Chapo", "link": "https://stackoverflow.com/users/6949091/chapo"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1476912610, "post_id": 40141116, "comment_id": 67553645, "body": "No problem. Thanks for taking the time to help me out."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6949091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFNKs.png?s=128&g=1", "display_name": "Chapo", "link": "https://stackoverflow.com/users/6949091/chapo"}, "edited": false, "score": 0, "creation_date": 1476912331, "post_id": 40141245, "comment_id": 67553520, "body": "I fee like a complete idiot. After following these steps the program works flawlessly."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 0, "last_activity_date": 1476910042, "creation_date": 1476910042, "answer_id": 40141245, "question_id": 40141116, "link": "https://stackoverflow.com/questions/40141116/display-full-value-from-string-array-in-c/40141245#40141245", "title": "Display Full Value From String Array in C", "body": "<p>The <code>fgets</code> and/or assignment below it are mucking things up; take them out, and just use <code>scanf</code> as you do with the rest. </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6949091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFNKs.png?s=128&g=1", "display_name": "Chapo", "link": "https://stackoverflow.com/users/6949091/chapo"}, "edited": false, "score": 0, "creation_date": 1476912483, "post_id": 40141250, "comment_id": 67553591, "body": "Thank you for the clarification. I initially added the fgets portion because we recently learned about &#39;\\n&#39; and &#39;\\o&#39; characters in strings and was attempting to remove them. like Scott Hunter stated, if i simply use scanf the program runs flawlessly."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1476910057, "creation_date": 1476910057, "answer_id": 40141250, "question_id": 40141116, "link": "https://stackoverflow.com/questions/40141116/display-full-value-from-string-array-in-c/40141250#40141250", "title": "Display Full Value From String Array in C", "body": "<p>After the call</p>\n\n<pre><code>scanf(\"%d\", &amp;numstudents);\n</code></pre>\n\n<p>the newline character is still in the input stream. The next call to <code>fgets</code>,</p>\n\n<pre><code>    fgets(namestudent[i], sizeof(namestudent[i]), stdin);\n</code></pre>\n\n<p>returns with an empty line, which corresponds to <code>i = 0</code>.</p>\n\n<p>You need to add code to ignore the rest of the line after the above <code>scanf</code> line.</p>\n\n<pre><code>   int c;\n   while ( (c = getchar()) != EOF &amp;&amp; c != '\\n');\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6949091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFNKs.png?s=128&g=1", "display_name": "Chapo", "link": "https://stackoverflow.com/users/6949091/chapo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1476910117, "accepted_answer_id": 40141245, "answer_count": 2, "score": 0, "last_activity_date": 1476910057, "creation_date": 1476909599, "question_id": 40141116, "link": "https://stackoverflow.com/questions/40141116/display-full-value-from-string-array-in-c", "closed_reason": "Duplicate", "title": "Display Full Value From String Array in C", "body": "<p>I am completely stumped on this one. I am attempting to create a simple grade calculator. Yes this is a school assignment. However, there are things called deadlines, and my teachers make them impossible to meet, so I've already turned in my mostly-working program for grading. But I am a curious man and my teacher couldn't answer my question - so here I am.</p>\n\n<p>Within my project everything works well; however, when printing my output the first student's name is never fully displayed. I cannot for the life of me even begin to understand how every other loop produces the name without issue, but the first iteration. What on earth have I done wrong?</p>\n\n<p>I beleive that my issue is somewhere within my variable declarations or this for statement. Any help would be appreciated, and please feel free to critique. I won't learn any other way.</p>\n\n<pre><code>    for (int m=0; m&lt;numstudents; m++) {\n        printf(\"\\n\\n*****************\\n\\n***Report card***\\n\\n*****************\");\n        printf(\"\\nName of student: %s\", namestudent[m]);\n        printf(\"\\nPhysics: %.2f/100\", physicsstudent[m]);\n        printf(\"\\nChemistry: %.2f/100\", chemistrystudent[m]);\n        printf(\"\\nMath: %.2f/100\", physicsstudent[m]);\n\n        total = physicsstudent[m]+chemistrystudent[m]+mathstudent[m];\n        realtotal = (total/300)*100;\n        printf(\"\\nTotal: %.2f/300\", total);\n\n        if(realtotal &gt; 89) {\n            printf(\"\\nYour letter grade: A\");\n        } else if(realtotal &gt; 79) {\n            printf(\"\\nYour letter grade: B\");\n        } else if(realtotal &gt; 69) {\n            printf(\"\\nYour letter grade: C\");\n        } else if(realtotal &gt; 49) {\n            printf(\"\\nYour letter grade: D\");\n        } else if((realtotal) &lt; 50) {\n            printf(\"\\nYour letter grade: F\");\n        } \n    }\n</code></pre>\n\n<p>Entire code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n  char line[100][100], namestudent[20][20];\nint numstudents, grade;\nfloat realtotal, total, physicsstudent[100], chemistrystudent[100], mathstudent[100];\n\n  printf(\"\\n***Welcome to the grade calculator***\\n\\n=&gt;Press G to enter grade calculator\\n\\n=&gt;Press H for help\\n\\nPlease enter your option: \");\nchar userinput = getchar();\n\nif (userinput == 'g' || userinput == 'G') {\n    printf(\"\\nWelcome to the grade calculator\\nEnter the total number of students in your class: \");\n    scanf(\"%d\", &amp;numstudents);\n\n    if (numstudents &lt;= 0) {\n        printf(\"Terminating program\");\n        return(0);\n    }\n\n    for (int i=0; i&lt;numstudents; i++) {\n        printf(\"\\nPlease enter the name of student %d: \", i+1);\n        fgets(namestudent[i], sizeof(namestudent[i]), stdin);\n          namestudent[strlen(namestudent[i])-1][i] = '\\0';\n          scanf(\"%s\", namestudent[i]);\n\n          printf(\"Please enter %s\\'s Physics score (out of 100 points): \", namestudent[i]);\n        scanf(\"%f\", &amp;physicsstudent[i]);\n\n        printf(\"Please enter %s\\'s Chemistry score (out of 100 points): \",namestudent[i]);\n        scanf(\"%f\", &amp;chemistrystudent[i]);\n\n        printf(\"Please enter %s\\'s Math score (out of 100 points): \",namestudent[i]);\n        scanf(\"%f\", &amp;mathstudent[i]);\n\n    }\n\n    for (int m=0; m&lt;numstudents; m++) {\n        printf(\"\\n\\n*****************\\n\\n***Report card***\\n\\n*****************\");\n        printf(\"\\nName of student: %s\", namestudent[m]);\n        printf(\"\\nPhysics: %.2f/100\", physicsstudent[m]);\n        printf(\"\\nChemistry: %.2f/100\", chemistrystudent[m]);\n        printf(\"\\nMath: %.2f/100\", physicsstudent[m]);\n\n        total = physicsstudent[m]+chemistrystudent[m]+mathstudent[m];\n        realtotal = (total/300)*100;\n        printf(\"\\nTotal: %.2f/300\", total);\n\n        if(realtotal &gt; 89) {\n            printf(\"\\nYour letter grade: A\");\n        } else if(realtotal &gt; 79) {\n            printf(\"\\nYour letter grade: B\");\n        } else if(realtotal &gt; 69) {\n            printf(\"\\nYour letter grade: C\");\n        } else if(realtotal &gt; 49) {\n            printf(\"\\nYour letter grade: D\");\n        } else if((realtotal) &lt; 50) {\n            printf(\"\\nYour letter grade: F\");\n        } \n    }\n\n} else if (userinput == 'h' || userinput == 'H') {\n    printf(\"~~~Help~~~\\n\\n*After typing G, you will be entering the grade calculator\\n\\n1.Then, you will be asked to enter the number of students that you are going to enter grades for.\\nThis will be an integer value only.\\n\\n2.If you enter any other character (other thaninteger), you must prompt to the user to enter a valid integer number only.\\n\\n3.Then the calculator asks you for the names of the students (if you entered 3 in the step 1, the loop will run for 3 times....taking 3 student names).\\n\\n4.Then the program will start asking for the individual scores (physics, chemistry and math in our case).\\n\\n5.Finally, it will print a report card with scores and the grade (calculated). I have programmed to give A, B, C and F grades only.You are free to use other grading scales as well.\");\n} else {\n    printf(\"You entered a value that is not accepted. Terminating program\");\n}\n  return(0);\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>*****************\n\n***Report card***\n\n*****************\nName of student: a    &lt;--- input was 'apple'\nPhysics: 90.00/100\nChemistry: 90.00/100\nMath: 90.00/100\nTotal: 270.00/300\nYour letter grade: A\n\n*****************\n\n***Report card***\n\n*****************\nName of student: orange\nPhysics: 90.00/100\nChemistry: 90.00/100\nMath: 90.00/100\nTotal: 270.00/300\nYour letter grade: A\n\n*****************\n\n***Report card***\n\n*****************\nName of student: banana\nPhysics: 90.00/100\nChemistry: 90.00/100\nMath: 90.00/100\nTotal: 270.00/300\nYour letter grade: A\n\nProcess exited with code: 0\n</code></pre>\n"}, {"tags": ["c", "linux", "arduino", "serial-port", "usb"], "comments": [{"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 1, "creation_date": 1476918641, "post_id": 40141047, "comment_id": 67555836, "body": "Beware that you&#39;re essentially polling the system for data, by inefficiently making a system call per inquiry."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1476910423, "creation_date": 1476910423, "answer_id": 40141342, "question_id": 40141047, "link": "https://stackoverflow.com/questions/40141047/is-there-a-way-to-inquire-the-amount-of-data-available-at-a-serial-port/40141342#40141342", "title": "Is there a way to inquire the amount of data available at a serial port?", "body": "<p>Use the <a href=\"http://man7.org/linux/man-pages/man4/tty_ioctl.4.html\" rel=\"nofollow\"><code>FIONREAD</code></a> ioctl.</p>\n\n<pre><code>int nread;\nioctl(Serial, FIONREAD, &amp;nread);\nif (nread &gt; 0) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 5666624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15pzH.jpg?s=128&g=1", "display_name": "lindebear", "link": "https://stackoverflow.com/users/5666624/lindebear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 0, "accepted_answer_id": 40141342, "answer_count": 1, "score": 0, "last_activity_date": 1476910423, "creation_date": 1476909302, "question_id": 40141047, "link": "https://stackoverflow.com/questions/40141047/is-there-a-way-to-inquire-the-amount-of-data-available-at-a-serial-port", "title": "Is there a way to inquire the amount of data available at a serial port?", "body": "<p>I just started looking into serial data acquisition and was wondering if there is a way to check, if data is available at a given port and if so how much?</p>\n\n<p>To be a little more specific: If anyone has ever looked into programming on an Arduino, one can easily check whether data is available for reading from the USB-serial interface via the call (from the Arduino API):</p>\n\n<pre><code>if(Serial.available() &gt; 0) { ... }\n</code></pre>\n\n<p>This way one can avoid a possibly blocking read()-call and simply read data, whenever necessary or desired.</p>\n\n<p>However given the inverse situation: \"A program is checking for serial sent from the Arduino\", the only way, I've seen so far, to achieve something similar in C, is to steer the behavior of read() through setting the <code>termios</code> properties <code>VMIN</code> and <code>VTIME</code> to specific values. That's not really what I want though... I don't want a non-blocking read()-call or a read()-call that only blocks if data is available. I want to know <strong>IF</strong> there is data to read to begin with, before even trying to read, and if so <strong>HOW MUCH</strong> data can be read (currently) from the serial.</p>\n"}, {"tags": ["c", "splint"], "owner": {"reputation": 239, "user_id": 5133587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445bcc7c806b0c782a93e375d4ecbe51?s=128&d=identicon&r=PG&f=1", "display_name": "EchoLynx", "link": "https://stackoverflow.com/users/5133587/echolynx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1476909297, "creation_date": 1476909297, "question_id": 40141044, "link": "https://stackoverflow.com/questions/40141044/using-binary-constants-prefix-0b-in-code-processed-by-splint", "title": "Using Binary Constants (prefix 0b) In Code Processed by Splint", "body": "<p>According to the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Binary-constants.html\" rel=\"nofollow\">GCC website</a> and the <a href=\"http://sdcc.sourceforge.net/doc/sdccman.pdf\" rel=\"nofollow\">SDCC Manual<sub>&sect;3.5.7</sub></a>, both GCC and SDCC allow the use of binary constants such as this one, where the decimal number 2 is represented: <code>0b0010</code></p>\n\n<p>Unfortunately, splint does not seem to handle this well resulting in a parse error, as shown below.</p>\n\n<p><strong>binaryConstants.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;                                       \nint main(){                                              \n        int one = 0b0001;                                \n        int two = 0x2;                                   \n        int three = 3;                                   \n        printf(\"B: %d\\nH: %d\\nD: %d\\n\", one, two, three);\n        return 0;                                        \n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ splint binaryConstants.c\nSplint 3.1.2 --- 19 Oct 2016\n\nbinaryConstants.c:3:18: Parse Error. (For help on parse errors, see splint -help\n               parseerrors.)\n*** Cannot continue.\n$\n</code></pre>\n\n<p><strong>Output with +gnuextensions</strong></p>\n\n<pre><code>$ splint +gnuextensions binaryConstants.c\nSplint 3.1.2 --- 19 Oct 2016\n\nCommand Line: Setting +gnuextensions redundant with current value\nbinaryConstants.c:3:18: Parse Error. (For help on parse errors, see splint -help\n                 parseerrors.)\n*** Cannot continue.\n$\n</code></pre>\n\n<p>Is there a flag to allow this extension to C?</p>\n"}, {"tags": ["c", "julia", "void-pointers"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476908158, "post_id": 40140699, "comment_id": 67551440, "body": "Detail: with <code>void* p;</code>, <code>p</code> is a &quot;new thing&quot; (object).  <code>create_new_thing(&amp;p);</code> allows the function to <i>assign</i> <code>p</code> a value.  Good luck with Julia."}, {"owner": {"reputation": 103, "user_id": 6710230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jB844.jpg?s=128&g=1", "display_name": "Expanding Man", "link": "https://stackoverflow.com/users/6710230/expanding-man"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476910371, "post_id": 40140699, "comment_id": 67552576, "body": "Understood, the reason I wasn&#39;t using the word object is that I was apprehensive about being very specific.  One could do this with, say, an immutable numeric type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476910674, "post_id": 40140699, "comment_id": 67552734, "body": "In C, <i>object</i> is the <i>general</i> term for &quot;region of data storage ..., the contents of which can represent values&quot;  like characters, integers, floating point, pointers, arrays, structures, unions, and constants.  Just about anything that can be pointed to except functions."}], "answers": [{"comments": [{"owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "edited": false, "score": 1, "creation_date": 1476913692, "post_id": 40141405, "comment_id": 67554108, "body": "The first <code>ccall</code> signature should probably also be <code>Ref{Ptr{Void}}</code>, instead of <code>Ptr{Ptr{Void}}</code>: <a href=\"http://docs.julialang.org/en/release-0.5/manual/calling-c-and-fortran-code/#passing-pointers-for-modifying-inputs\" rel=\"nofollow noreferrer\">docs.julialang.org/en/release-0.5/manual/&hellip;</a>"}, {"owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "reply_to_user": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "edited": false, "score": 1, "creation_date": 1476915509, "post_id": 40141405, "comment_id": 67554805, "body": "@SimonByrne From my understanding, they are exactly equivalent in this case, so I just preserved the OP&#39;s code."}, {"owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "edited": false, "score": 1, "creation_date": 1476955222, "post_id": 40141405, "comment_id": 67569705, "body": "I think they are equivalent at the moment, but the manual recommends <code>Ref</code> for mutable pointers."}, {"owner": {"reputation": 103, "user_id": 6710230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jB844.jpg?s=128&g=1", "display_name": "Expanding Man", "link": "https://stackoverflow.com/users/6710230/expanding-man"}, "edited": false, "score": 1, "creation_date": 1476970250, "post_id": 40141405, "comment_id": 67580263, "body": "Thanks for the help.  I think I understand this now, I was definitely thrown by the difference between Ref and Ptr.  I think that as far as C knows Ref and Ptr are the same thing.  Julia manages the Ref objects, but only up to the boundary with the C calls."}, {"owner": {"reputation": 103, "user_id": 6710230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jB844.jpg?s=128&g=1", "display_name": "Expanding Man", "link": "https://stackoverflow.com/users/6710230/expanding-man"}, "edited": false, "score": 0, "creation_date": 1476971398, "post_id": 40141405, "comment_id": 67581276, "body": "Actually I just realized that I was actually doing what you suggested in your answer, I just screwed up the question.  I&#39;ll guess I should thoroughly look over my code to make sure it&#39;s correct everywhere.  Thanks."}], "tags": [], "owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "is_accepted": true, "score": 10, "last_activity_date": 1476910671, "creation_date": 1476910671, "answer_id": 40141405, "question_id": 40140699, "link": "https://stackoverflow.com/questions/40140699/the-proper-way-to-declare-c-void-pointers-in-julia/40141405#40141405", "title": "the proper way to declare C void pointers in Julia", "body": "<p>Your code looks <em>almost</em> fine. But be careful! Any small error, like the one you have here, can cause a segmentation fault:</p>\n\n<pre><code>p = Ref{Ptr{Void}}()\nccall((:create_new_thing, :lib), Void, (Ptr{Ptr{Void}},), p)\nccall((:do_stuff_to_thing, :lib), Void, (Ptr{Void},), p)\n                                        # error here  ^\n</code></pre>\n\n<p>The correct way to do it is</p>\n\n<pre><code>p = Ref{Ptr{Void}}()\nccall((:create_new_thing, :lib), Void, (Ptr{Ptr{Void}},), p)\nccall((:do_stuff_to_thing, :lib), Void, (Ptr{Void},), p[])\n                                             # fixed  ^\n</code></pre>\n\n<p>The easiest way to understand where to use <code>p</code> and <code>p[]</code> is to think of the corresponding C code. In C, we write</p>\n\n<pre><code>void *p;\ncreate_new_thing(&amp;p)\ndo_stuff_to_thing(p)\n</code></pre>\n\n<p>Julia objects do not have first-class memory addresses like C objects do, so we must use <code>p = Ref{Ptr{Void}}()</code> in Julia to get a memory address. This object, as a ref, behaves like <code>&amp;p</code> in C. That means to get the object itself, <code>p</code> in C, we need to use <code>p[]</code> in Julia.</p>\n\n<p>So the equivalent in Julia is</p>\n\n<pre><code>p = Ref{Ptr{Void}}()                 # this p corresponds to &amp;p in C\nccall(:create_new_thing, ..., p)     # like &amp;p\nccall(:do_stuff_to_thing, ..., p[])  # like *(&amp;p); that is, like p\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6710230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jB844.jpg?s=128&g=1", "display_name": "Expanding Man", "link": "https://stackoverflow.com/users/6710230/expanding-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 4, "accepted_answer_id": 40141405, "answer_count": 1, "score": 9, "last_activity_date": 1476923819, "creation_date": 1476908009, "last_edit_date": 1476923819, "question_id": 40140699, "link": "https://stackoverflow.com/questions/40140699/the-proper-way-to-declare-c-void-pointers-in-julia", "title": "the proper way to declare C void pointers in Julia", "body": "<p>Ok, I originally badly screwed up my formulation of this question (it's more than a year now since I seriously wrote C++ code and I have pretty limited experience with pure C), so let's try again.</p>\n\n<p>Some C code is written to expect you to do something like the following</p>\n\n<pre><code>void* p;\ncreate_new_thing(&amp;p);  //p is now a new thing\ndo_stuff_to_thing(p);  //something happened to p\n</code></pre>\n\n<p>My question is how to create the object <code>p</code> in Julia.  Right now I believe the answer to be</p>\n\n<pre><code>p = Ref{Ptr{Void}}()\nccall((:create_new_thing, :lib), Void, (Ptr{Ptr{Void}},), p)\nccall((:do_stuff_to_thing, :lib), Void, (Ptr{Void},), p)\n</code></pre>\n\n<p>Furthermore, I believe the same code but with <code>p</code> declared instead as <code>p = Array(Ptr{Void}, 1)</code> also works.</p>\n\n<p>I do however find the whole distinction between <code>Ref</code> and <code>Ptr</code> in Julia very confusing, mostly because they seem to get converted between each other in ways I cannot keep track of. </p>\n"}, {"tags": ["c", "tcp", "kernel", "slackware"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476908088, "post_id": 40140589, "comment_id": 67551385, "body": "Just guessing, <code>data = (char *)((unsigned char *)tcph+(tcph-&gt;doff*4));</code> looks suspicious."}, {"owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476908706, "post_id": 40140589, "comment_id": 67551766, "body": "This is a magic packet handler for a rootkit."}, {"owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476908928, "post_id": 40140589, "comment_id": 67551889, "body": "Sorry I don&#39;t understand where you&#39;re going. Is it because I convert unsigned char* to char* ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476909684, "post_id": 40140589, "comment_id": 67552251, "body": "Well you said the data is incorrect. Not just those casts but also <code>*4</code> but as I said I was guessing. Since it is supposed to be &quot;magic&quot; which is not working perhaps there is some frog pretending to be a prince."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1476909820, "post_id": 40140589, "comment_id": 67552321, "body": "Perhaps you should define [in explicit detail] what you mean by &quot;good&quot; and &quot;incorrect&quot; (i.e.) expected behavior and actual behavior in both cases."}, {"owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "edited": false, "score": 0, "creation_date": 1476910087, "post_id": 40140589, "comment_id": 67552441, "body": "I know I&#39;m doing something wrong but i don&#39;t understrand what, otherwise I would never have asked a question on this forum. So do you know what&#39;s the correct way to get the data from a sk_buff?"}, {"owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "edited": false, "score": 0, "creation_date": 1476910151, "post_id": 40140589, "comment_id": 67552464, "body": "When I send a TCP packet with the command &quot;nping --tcp -c 1 --dest-ip 127.0.0.1 -p 8888 --data-string &quot;test&quot;  The result in dmesg on Debian is &quot;anhackit data: test&quot; But on SlackWare the result is &quot;anhackit data: &lt;something wrong&gt;&quot;"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1476910598, "post_id": 40140589, "comment_id": 67552685, "body": "Nothing explicit. But, can <code>tcp_hdr</code> return NULL? If so, <code>data =</code>/<code>if (! data)</code> is not a sufficient test because you&#39;ve already deref&#39;ed the pointer (i.e.) you&#39;d need <code>if (!tcph)</code> instead. I&#39;d dump the data in hex as well and then decode by hand to see things"}, {"owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "edited": false, "score": 0, "creation_date": 1476910895, "post_id": 40140589, "comment_id": 67552846, "body": "Sorry my english is not very good and I have difficulties to explain my problem. Ok thank you, I will try by replacing !data by !tcph"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1476911526, "post_id": 40140589, "comment_id": 67553150, "body": "I looked at some kernel code and I believe <code>tcp_hdr</code> can <i>not</i> be null because it returns an offset pointer from <code>skb</code>. So, your <code>if (!data)</code> isn&#39;t required. You have <code>printk</code> for the data. What does it print on the &quot;good&quot; system and the &quot;incorrect&quot; system? Edit your question and post this. Otherwise, what makes Slackware incorrect? Does it <i>not</i> print anything? Or, does it print bad data? <code>data</code> may or may not be EOS terminated, so you may want to handle that. You probably need to get the payload length (e.g. for your <code>&quot;test&quot;</code>, it would be 4 or 5 in the receiver, so find that value)"}, {"owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "edited": false, "score": 0, "creation_date": 1476912372, "post_id": 40140589, "comment_id": 67553545, "body": "Since I changed !data by !tcph, I don&#39;t have any warnings in the dmesg. That&#39;s a good thing so I think !tcph is not useless and thank you for this recommendation. Slackware display bad data (not readable). I will try to retrieve the size of the payload."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1476912722, "post_id": 40140589, "comment_id": 67553697, "body": "Look at <code>include&#47;linux&#47;tcp.h</code> and <code>include&#47;linux&#47;skbuff.h</code>. Try to understand more about the structs. Also, consider looking at other working code in the kernel source tree. Try to find a similar filter module and use that as a guide."}, {"owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "edited": false, "score": 0, "creation_date": 1476912873, "post_id": 40140589, "comment_id": 67553769, "body": "Ok thank you for your help. I post the solution if I find it."}], "owner": {"reputation": 11, "user_id": 2900031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33910e2b3357ab21109a8a7bd44b3da4?s=128&d=identicon&r=PG&f=1", "display_name": "anhackin", "link": "https://stackoverflow.com/users/2900031/anhackin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476907623, "creation_date": 1476907623, "question_id": 40140589, "link": "https://stackoverflow.com/questions/40140589/linux-kernel-module-nfilter-hook-incorrect-data-on-slackware", "title": "Linux Kernel Module - nfilter hook incorrect data on Slackware", "body": "<p>I have a linux kernel module that needs to process the data received via netfilter hook as a socket buffer.</p>\n\n<p>The data received on Debian 8 (kernel: 3.16.0) is good but with SlackWare 14.0 (kernel: 3.2.29) the data is incorrect. I do not understand what's wrong. I searched everywhere on the forum and on Google but I never found a solution.</p>\n\n<p>This is my nfilter hook function:</p>\n\n<pre><code>static unsigned int magic_packet_hook(const struct nf_hook_ops *ops, struct sk_buff *skb, const struct net_device *in, const struct net_device *out, int (*okfn)(struct sk_buff *)) {\nstruct iphdr *iph;\nstruct tcphdr *tcph;\n\n//Return if empty\nif(!skb)\n    return NF_ACCEPT;\n\n//Get ip header\niph = ip_hdr(skb);\n\n//Check protocol\nif(iph-&gt;protocol != IPPROTO_TCP)\n    return NF_ACCEPT;\n\n//Get tcp header\ntcph = tcp_hdr(skb);\n\n//Get &amp; check data\nchar *data;\ndata = (char *)((unsigned char *)tcph+(tcph-&gt;doff*4));\nif(!data)\n    return NF_ACCEPT;\n\n//Print in dmesg\n#ifdef DEBUG\n    printk(\"anhackit data: %s\\n\", data);\n#endif\n\n//Convert source ip to string\nchar ip[16];\nsnprintf(ip, 16, \"%pI4\", &amp;iph-&gt;saddr);\n\n//Convert destination port to string\nchar port[6];\nsprintf(port, \"%u\", ntohs(tcph-&gt;dest));\n\n#ifdef DEBUG\n    printk(\"anhackit - magic packet received from %s on port %s !\\n\", ip, port);\n#endif\n\nreturn NF_ACCEPT;}\n</code></pre>\n\n<p>I hope someone can help me. Thanks in advance.</p>\n"}, {"tags": ["c", "hash", "hashmap", "hashtable"], "answers": [{"comments": [{"owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "edited": false, "score": 0, "creation_date": 1476909627, "post_id": 40140517, "comment_id": 67552221, "body": "Many thanks for the reply &amp; clarification! I&#39;ll give it a shot!"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1476907370, "creation_date": 1476907370, "answer_id": 40140517, "question_id": 40140390, "link": "https://stackoverflow.com/questions/40140390/hash-function-issue-adding-functionality/40140517#40140517", "title": "Hash function issue - adding functionality", "body": "<p>This:</p>\n\n<pre><code>char* string[45];\n</code></pre>\n\n<p>means \"array of 45 character pointers\", you should drop the asterisk.</p>\n\n<p>And you can't iterate over an array by incrementing the variable, the array variable cannot be changed. You can use a separate pointer:</p>\n\n<pre><code>const char *s = string;\nwhile (c = *s++)\n</code></pre>\n\n<p>Note that assignment is spelled <code>=</code>, while <code>==</code> is comparison for equality which is not what you mean.</p>\n"}, {"comments": [{"owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "edited": false, "score": 0, "creation_date": 1477589157, "post_id": 40210190, "comment_id": 67839796, "body": "Much appreciated! I assume this is a reformulation of the original and does not convert all to lower case? Out of curiosity, what does (c | 040) mean/do, exactly. The combination of a character and a bitwise OR seems unusual. I have only recently begun doing work at the bit level, which is both cool and a total mind@#$&amp;%."}, {"owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "reply_to_user": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "edited": false, "score": 1, "creation_date": 1477709351, "post_id": 40210190, "comment_id": 67888208, "body": "(x|040) turns &quot;x&quot; to lowercase, and not change numbers. However, it changes some CTRL-symbols to some printable ones. However, this is not important for hashing purposes."}], "tags": [], "owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "is_accepted": true, "score": 1, "last_activity_date": 1477278747, "creation_date": 1477278747, "answer_id": 40210190, "question_id": 40140390, "link": "https://stackoverflow.com/questions/40140390/hash-function-issue-adding-functionality/40210190#40210190", "title": "Hash function issue - adding functionality", "body": "<p>More efficient version of your hash:</p>\n\n<pre><code>unsigned int hash_function(const char* str)\n{\n    unsigned int hash = 5381, c;\n    while(c = *str++) \n      hash += (hash &lt;&lt; 5) + (c | 040);\n\n    return (hash % LISTS);\n}\n</code></pre>\n"}], "owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 40210190, "answer_count": 2, "score": 1, "last_activity_date": 1477278747, "creation_date": 1476906878, "last_edit_date": 1476907225, "question_id": 40140390, "link": "https://stackoverflow.com/questions/40140390/hash-function-issue-adding-functionality", "title": "Hash function issue - adding functionality", "body": "<p>I tried adding functionality to the djb2 hash function, but it doesn't appear to like the changes.  Specifically, I'm trying to include a loop that converts words (strings) to lower case. It throws the following two errors: </p>\n\n<ol>\n<li>Incompatible integer to pointer conversion assigning to <code>char *</code> from <code>int</code></li>\n<li>Cannot increment value of type <code>char *[45]</code></li>\n</ol>\n\n<p>Note that in the original code <code>*str++</code> appeared in the <code>while</code> loop. This is my first hash table, and I'm rather shaky on pointers. Any insight on where I've gone wrong would be appreciated. </p>\n\n<pre><code>// djb2 by Dan Bernstein -- slightly modified;\nunsigned int hash_function(const char* str)\n{\n    unsigned int hash = 5381;\n    int c;\n    char* string[45];\n\n    for (int i = 0; str[i] != '\\0'; i++)\n    {\n        string[i] = (tolower(str[i]));\n    }\n\n    while (c == *string++)\n        hash = ((hash &lt;&lt; 5) + hash) + c; /* hash * 33 + c */\n\n    return (hash % LISTS);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 3, "creation_date": 1476905892, "post_id": 40140104, "comment_id": 67550126, "body": "<code>d</code> is a pointer and you are getting its size. That&#39;s Why."}, {"owner": {"reputation": 2584, "user_id": 5969560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5382279f13ba2e8b88384232c3d4b40b?s=128&d=identicon&r=PG&f=1", "display_name": "aring", "link": "https://stackoverflow.com/users/5969560/aring"}, "edited": false, "score": 0, "creation_date": 1476906044, "post_id": 40140104, "comment_id": 67550219, "body": "<a href=\"http://stackoverflow.com/questions/10639666/how-to-determine-the-size-of-an-allocated-c-buffer\" title=\"how to determine the size of an allocated c buffer\">stackoverflow.com/questions/10639666/&hellip;</a>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1476906093, "post_id": 40140104, "comment_id": 67550244, "body": "&quot;How to utilize sizeof()...&quot;. There&#39;s no such &quot;how&quot;. There no way to use <code>sizeof</code> for that purpose."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1476906157, "post_id": 40140104, "comment_id": 67550277, "body": "<code>sizeof</code> is not a Function its an Operator."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1476906599, "post_id": 40140104, "comment_id": 67550538, "body": "You know the size. You just <b><i>told</i></b> it what to allocate. But you failed to check the returned pointer is not <code>NULL</code>. If it is, 0 bytes were allocated. Else, it allocated the <code>5* sizeof(int)</code> bytes you requested."}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 0, "last_activity_date": 1476905962, "creation_date": 1476905962, "answer_id": 40140152, "question_id": 40140104, "link": "https://stackoverflow.com/questions/40140104/how-to-utilize-sizeof-to-return-the-size-of-malloc-buffer-allocation/40140152#40140152", "title": "How to utilize sizeof() to return the size of malloc buffer allocation", "body": "<p>C does not track the size of an allocated buffer for you.  You must track the size manually.</p>\n"}, {"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1476905973, "creation_date": 1476905973, "answer_id": 40140154, "question_id": 40140104, "link": "https://stackoverflow.com/questions/40140104/how-to-utilize-sizeof-to-return-the-size-of-malloc-buffer-allocation/40140154#40140154", "title": "How to utilize sizeof() to return the size of malloc buffer allocation", "body": "<p><code>sizeof</code> cannot provide the information you want. You <em>have</em> to keep track of it yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476906300, "post_id": 40140156, "comment_id": 67550358, "body": "<code>When a pointer is passed to sizeof</code> Sounds like <code>sizeof</code> is a function :D"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1476906339, "last_edit_date": 1476906339, "creation_date": 1476905977, "answer_id": 40140156, "question_id": 40140104, "link": "https://stackoverflow.com/questions/40140104/how-to-utilize-sizeof-to-return-the-size-of-malloc-buffer-allocation/40140156#40140156", "title": "How to utilize sizeof() to return the size of malloc buffer allocation", "body": "<p>When the <code>sizeof</code> operator is applied to a pointer, it gives the size of the pointer itself.  It does <strong>not</strong> give the size of the array it may be pointing to.</p>\n\n<p>When dynamically allocating an array, you need to manually keep track of how many elements you've allocated.</p>\n"}, {"tags": [], "owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1476906010, "creation_date": 1476906010, "answer_id": 40140166, "question_id": 40140104, "link": "https://stackoverflow.com/questions/40140104/how-to-utilize-sizeof-to-return-the-size-of-malloc-buffer-allocation/40140166#40140166", "title": "How to utilize sizeof() to return the size of malloc buffer allocation", "body": "<p>You should first decide how much memory you're going to allocate, then keep track of it in a constant or a variable.</p>\n\n<pre><code>const size_t sz = 5 * sizeof(int);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476906597, "post_id": 40140290, "comment_id": 67550537, "body": "Nice Answer :)."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 5, "last_activity_date": 1476906464, "creation_date": 1476906464, "answer_id": 40140290, "question_id": 40140104, "link": "https://stackoverflow.com/questions/40140104/how-to-utilize-sizeof-to-return-the-size-of-malloc-buffer-allocation/40140290#40140290", "title": "How to utilize sizeof() to return the size of malloc buffer allocation", "body": "<p><code>sizeof(d)</code> gives the size of the pointer, <code>d</code>.    A value of <code>8</code> is consistent with a 64-bit host system.</p>\n\n<p>This is distinct from the allocated size of whatever <code>d</code> points at.</p>\n\n<p>Since <code>malloc()</code> allocates at run time (the length to be allocated is specified when the program is run) and <code>sizeof</code> is a compile-time operator, it is not possible to use <code>sizeof</code> to obtain the length.</p>\n\n<p>You need to track the size manually, in a separate variable.</p>\n\n<pre><code>  size_t allocated_size = 5*sizeof int;\n  int *d = malloc(allocated_size);\n  printf(\"%d\", (int) allocated_size);\n</code></pre>\n\n<p>It is more common to track the number of elements (i.e. take account of the type of <code>d</code>).</p>\n\n<pre><code>  size_t allocated_ints = 5;\n  int *d = malloc(allocated_ints * sizeof (*d));\n  printf(\"%d\", (int) allocated_ints);   // prints number of `int`\n</code></pre>\n\n<p><code>size_t</code> is defined in <code>&lt;stdlib.h&gt;</code> (among others).   In C99 and later, the format specifier for printing a <code>size_t</code> is <code>%zu</code> (rather than converting to <code>int</code> and using <code>%d</code> as you have done).</p>\n"}], "owner": {"reputation": 25, "user_id": 6792153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acd937759f868ce0299b25c460295902?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6792153/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1534, "favorite_count": 1, "closed_date": 1476909426, "accepted_answer_id": 40140156, "answer_count": 5, "score": -1, "last_activity_date": 1476906464, "creation_date": 1476905774, "question_id": 40140104, "link": "https://stackoverflow.com/questions/40140104/how-to-utilize-sizeof-to-return-the-size-of-malloc-buffer-allocation", "closed_reason": "Duplicate", "title": "How to utilize sizeof() to return the size of malloc buffer allocation", "body": "<p>If I allocate:</p>\n\n<pre><code>int *d =  malloc(5* sizeof(int));\nprintf(\"%d\", (int) sizeof(d));\n</code></pre>\n\n<p>I get a value of 8 instead 5. I know <code>sizeof()</code> is not meant to return the length in this case but I wonder if there is a workaround for that since I want to avoid tracking the size manually ( by parameter passing).</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1476905819, "post_id": 40140054, "comment_id": 67550075, "body": "<code>sizeof(buffer)</code> does not do what you expect; use your <code>size</code> variable there.  <code>**(all_lines+i) = *buffer;</code> copies just one <code>char</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1476906340, "post_id": 40140054, "comment_id": 67550380, "body": "There is a lot of boundary condition errors. Try to stick to this pattern: <code>while (read_it(the_data) == ok) { process_it(the_data); }</code>. Avoid <code>do ... while</code>, it is rarely appropriate. If you have a line reading loop nested in a file reading loop, make the former a function."}], "answers": [{"comments": [{"owner": {"reputation": 3127, "user_id": 3729695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dzB5u.jpg?s=128&g=1", "display_name": "sertsedat", "link": "https://stackoverflow.com/users/3729695/sertsedat"}, "edited": false, "score": 0, "creation_date": 1476906159, "post_id": 40140132, "comment_id": 67550280, "body": "definitely.. I changed the code like you said and it prints the first line right. but now I can&#39;t print the second line, I wonder why?"}, {"owner": {"reputation": 3127, "user_id": 3729695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dzB5u.jpg?s=128&g=1", "display_name": "sertsedat", "link": "https://stackoverflow.com/users/3729695/sertsedat"}, "edited": false, "score": 0, "creation_date": 1476907083, "post_id": 40140132, "comment_id": 67550797, "body": "the third problem was the line I&#39;m freeing buffer as it is actually points the last line. I need to free after I finish my work. All good I can roll on! thanks"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1476906423, "last_edit_date": 1476906423, "creation_date": 1476905899, "answer_id": 40140132, "question_id": 40140054, "link": "https://stackoverflow.com/questions/40140054/how-to-print-char/40140132#40140132", "title": "How to print char **", "body": "<p><strong>Problem 1</strong></p>\n\n<p>A problem is in the line:</p>\n\n<pre><code>        **(all_lines+i) = *buffer;\n</code></pre>\n\n<p>That copies just a single character from <code>buffer</code>. As a consequence, none of the strings in <code>all_lines</code> is null terminated.</p>\n\n<p>You should replace the lines:</p>\n\n<pre><code>        *(all_lines+i) = (char*)malloc(sizeof(buffer));\n        **(all_lines+i) = *buffer;\n</code></pre>\n\n<p>by</p>\n\n<pre><code>        all_lines[i] = buffer;\n</code></pre>\n\n<p><strong>Problem 2</strong></p>\n\n<p>The next problem I see is in the line:</p>\n\n<pre><code>        all_lines = (char**)realloc(all_lines, sizeof(char*) * i);\n</code></pre>\n\n<p>In the first iteration of the loop, <code>i</code> is 1. Hence, that line is the same as:</p>\n\n<pre><code>        all_lines = (char**)realloc(all_lines, sizeof(char*));\n</code></pre>\n\n<p>which is not what you want. You want </p>\n\n<pre><code>        all_lines = (char**)realloc(all_lines, sizeof(char*) * 2);\n</code></pre>\n\n<p>since you will be using <code>all_lines[1]</code> in the next iteration. That lines needs to be:</p>\n\n<pre><code>        all_lines = (char**)realloc(all_lines, sizeof(char*) * (i+1));\n</code></pre>\n"}], "owner": {"reputation": 3127, "user_id": 3729695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dzB5u.jpg?s=128&g=1", "display_name": "sertsedat", "link": "https://stackoverflow.com/users/3729695/sertsedat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "accepted_answer_id": 40140132, "answer_count": 1, "score": 0, "last_activity_date": 1615755565, "creation_date": 1476905596, "last_edit_date": 1615755565, "question_id": 40140054, "link": "https://stackoverflow.com/questions/40140054/how-to-print-char", "title": "How to print char **", "body": "<p>I have a method that read the file and assign the lines to char **. But when I try to print its first element it prints random characters. What may be wrong?</p>\n<pre><code>int main()\n{\n     char **lines_from_file = read_from_file(file_name);\n     print_first_line(lines_from_file);\n     return 0;\n}\n\nvoid print_first_line(char **command_lines)\n{\n    printf(&quot;%s&quot;, command_lines[0]);\n}\n\nchar** read_from_file(char *file_name)\n{\n    int size;\n    int c;\n    char *buffer;\n    char** all_lines= (char**)malloc(sizeof(char*));\n\n    FILE *f = fopen(file_name, &quot;r&quot;);\n    if(f)\n    {\n        int i=0;\n        do   // read all lines in file\n        {\n            size = 0;\n            buffer = (char *)malloc(size+1);\n            do  // read one line\n            {\n                c = fgetc(f);\n                if(c != EOF) buffer[size++] = (char)c;\n                buffer = (char*)realloc(buffer, size+1);\n            }\n            while(c != EOF &amp;&amp; c != '\\n');\n                \n            *(all_lines+i) = (char*)malloc(sizeof(buffer));\n            **(all_lines+i) = *buffer;\n            i++;\n            all_lines = (char**)realloc(all_lines, sizeof(char*) * i);\n\n        }\n        while(c != EOF);\n        fclose(f);\n    }\n    free(buffer);\n    return all_lines;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "casting"], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 0, "last_activity_date": 1476904113, "creation_date": 1476904113, "answer_id": 40139627, "question_id": 40139591, "link": "https://stackoverflow.com/questions/40139591/pointer-type-casting-to-different-data-type/40139627#40139627", "title": "Pointer type casting to different data type", "body": "<p>In the line:</p>\n\n<pre><code>g = *&amp;i;\n</code></pre>\n\n<p>the operators <code>*</code> and <code>&amp;</code> cancel each other out, so the result is as if the code was:</p>\n\n<pre><code>g = i;\n</code></pre>\n\n<hr>\n\n<p>The line:</p>\n\n<pre><code>float g = *(float*) &amp;i;\n</code></pre>\n\n<p>causes undefined behavior because the types int and float are not compatible. </p>\n\n<p>The result you're seeing is caused by undefined behavior, although in your case the behavior is relatively benign. What happens is that the bits of variable of type int are reinterpreted as if it were of type float.</p>\n\n<p>Casting trough a pointer is not the correct way to interpret bits of a different type.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7044151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1288722131161393/picture?type=large", "display_name": "Neelanjan Akuli", "link": "https://stackoverflow.com/users/7044151/neelanjan-akuli"}, "edited": false, "score": 0, "creation_date": 1476904545, "post_id": 40139634, "comment_id": 67549365, "body": "what is &quot;reinterpreting an integer pointer to a float pointer&quot; and how is it different from &quot;assignment of an int into a float&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1476904736, "post_id": 40139634, "comment_id": 67549451, "body": "<code>int</code> to <code>float</code> assignment can lose significance if the <code>int</code> value is &gt;= 2**24."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476904887, "post_id": 40139634, "comment_id": 67549543, "body": "edited with more details. @WeatherVane okay (I understand 24 better than 16)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476904934, "post_id": 40139634, "comment_id": 67549568, "body": "I edited comment, originally said 16 bit because there isn&#39;t AFAIK a 24-bit <code>int</code> type."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476904999, "post_id": 40139634, "comment_id": 67549591, "body": "you mean: mantissa+sign is on 24 bits, exponent is on 8 bits: loss of precision makes sense."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476905065, "post_id": 40139634, "comment_id": 67549635, "body": "Mantissa is 23 explicit bits, the 24th bit is implied (always 1 due to normalisation except when the value is 0)."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1476904795, "last_edit_date": 1476904795, "creation_date": 1476904136, "answer_id": 40139634, "question_id": 40139591, "link": "https://stackoverflow.com/questions/40139591/pointer-type-casting-to-different-data-type/40139634#40139634", "title": "Pointer type casting to different data type", "body": "<p><code>g = *&amp;i</code> is the same as <code>g = i</code> and is assignment of an int into a float. The compiler performs a conversion through the <code>=</code> operator:</p>\n\n<ol>\n<li>Load integer, 2. convert as floating point format, 3. store in float. Works great beside the rounding problems.</li>\n</ol>\n\n<p>The other construction is reinterpreting an integer pointer to a float pointer. Since data formats are different for floats (float is generally using some bits for mantissa and some bits for exponent) and for ints (ints are just serialized to memory 8-bit by 8-bit), the compiler just copies the data from source to destination without any extra conversion and you don't get what you want.</p>\n"}], "owner": {"reputation": 3, "user_id": 7044151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1288722131161393/picture?type=large", "display_name": "Neelanjan Akuli", "link": "https://stackoverflow.com/users/7044151/neelanjan-akuli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 40139634, "answer_count": 2, "score": 0, "last_activity_date": 1476904795, "creation_date": 1476903971, "question_id": 40139591, "link": "https://stackoverflow.com/questions/40139591/pointer-type-casting-to-different-data-type", "title": "Pointer type casting to different data type", "body": "<p>what does <code>(float*)</code> specially do in case of g. If I write <code>g = *&amp;i;</code>  then the ouptut is normal i.e. g=f, but if  <code>g = *(float*)&amp;i;</code> then why is g=0.0000??? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\nint i = 37;\nint *p;\np = &amp;i;\nfloat f = i;\nprintf(\"%d\\n\", i);\nprintf(\"%d\\n\", p);\nprintf(\"%d\\n\", *p);\nfloat g = *(float*) &amp;i;\nprintf(\"i = %d   f = %f   g = %f\", i, f, g);\n}\n</code></pre>\n"}, {"tags": ["c", "file", "document", "fgetc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1476904414, "post_id": 40139500, "comment_id": 67549285, "body": "Do you know the <a href=\"https://msdn.microsoft.com/en-us/library/c37dh6kf.aspx\" rel=\"nofollow noreferrer\"><code>fgets</code> function</a>? You can control a loop like this: <code>while(fgets(brst, sizeof brst, student) != NULL) { &#47;&#47;... process }</code>"}, {"owner": {"reputation": 21, "user_id": 7024749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1083539338428258/picture?type=large", "display_name": "DoktorD96", "link": "https://stackoverflow.com/users/7024749/doktord96"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476904940, "post_id": 40139500, "comment_id": 67549570, "body": "**while(fgets(brst, sizeof brst, student) != NULL) ** I used this as a rule, and now it printed every second line??"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476905350, "post_id": 40139500, "comment_id": 67549797, "body": "That is probably because your loop still contains its original char-by-char <code>fgetc</code>."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1476905594, "post_id": 40139769, "comment_id": 67549948, "body": "I am sorry, but <a href=\"https://msdn.microsoft.com/en-us/library/xssktc6e.aspx\" rel=\"nofollow noreferrer\"><code>feof</code></a> does <b><i>not</i></b> check for an end of file condition. It is one if the most misused functions ever. Please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>."}], "tags": [], "owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "is_accepted": false, "score": 0, "last_activity_date": 1476904572, "creation_date": 1476904572, "answer_id": 40139769, "question_id": 40139500, "link": "https://stackoverflow.com/questions/40139500/reading-information-from-a-file-in-c-language/40139769#40139769", "title": "Reading information from a file in C language", "body": "<p>Use feof() to check for an eof condition.\nYou are correctly reading the file line-by-line, but use fgets(), not fgetc() - and the cast is not needed.\nThen use sscanf() to assign the line data to variables (or some \"safe\" form of it).</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1476905475, "post_id": 40139866, "comment_id": 67549871, "body": "But it is horrible way to go."}, {"owner": {"reputation": 1893, "user_id": 3831435, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/829983118/picture?type=large", "display_name": "Luke Dupin", "link": "https://stackoverflow.com/users/3831435/luke-dupin"}, "edited": false, "score": 0, "creation_date": 1476905795, "post_id": 40139866, "comment_id": 67550063, "body": "Weather, why is it horrible?  The code communicates the intentions clearly and is contained nicely."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1476906211, "post_id": 40139866, "comment_id": 67550298, "body": "I ran your code, and if the last line in the text file contains no <code>newline</code> ending, as it might not, the line is not displayed. Usually, one uses the <code>while(fgets(...) != NULL)</code> idiom without any <code>feof</code> malarky."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476907238, "post_id": 40139866, "comment_id": 67550884, "body": "<code>printf(&quot;%s\\n&quot;, brst);</code> relies on the last call to <code>fgets( brst, sizeof(brst), student)</code> to have <i>not</i> messed up <code>brst</code> and that <code>fgetc()</code> works at least one.  That is not specified behavior.  Use the return value from <code>fgets()</code> rather than <code>feof()</code>  to detect when to finish the loop and do not rely on  data in <code>brst</code> after that failed call.  Code needs a modification."}, {"owner": {"reputation": 1893, "user_id": 3831435, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/829983118/picture?type=large", "display_name": "Luke Dupin", "link": "https://stackoverflow.com/users/3831435/luke-dupin"}, "edited": false, "score": 0, "creation_date": 1476916249, "post_id": 40139866, "comment_id": 67555061, "body": "Checking the fgets return value is important and I agree with that, I was in a hurry so I didn&#39;t add those.  I however disagree with only using the return value of fgets().  One of the embedded systems I worked on had an implementations of fgets() that return NULL to mean waiting on data, not end of file.  feof() always means end of file, thus why I use that."}], "tags": [], "owner": {"reputation": 1893, "user_id": 3831435, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/829983118/picture?type=large", "display_name": "Luke Dupin", "link": "https://stackoverflow.com/users/3831435/luke-dupin"}, "is_accepted": true, "score": 0, "last_activity_date": 1476916481, "last_edit_date": 1476916481, "creation_date": 1476904887, "answer_id": 40139866, "question_id": 40139500, "link": "https://stackoverflow.com/questions/40139500/reading-information-from-a-file-in-c-language/40139866#40139866", "title": "Reading information from a file in C language", "body": "<p>Try this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\nint _tmain(int argc, _TCHAR* Argo[]){\nFILE *student;\nchar brst[255];\nchar* result = NULL;\n\n  //Ensure file open works, if it doesn't quit\nif ((student = fopen(\"student.txt\", \"r\")) == NULL)\n{\n  printf(\"Failed to load file\\n\");\n  return 1;\n}\n\n  //Read in the file\nfor ( (result = fgets( brst, sizeof(brst), student)); \n      !feof(student); \n      (result = fgets( brst, sizeof(brst), student)) )\n{\n  if ( result == NULL ) break; //I've worked on embedded systems where this actually ment waiting on data, not EOF, so a 'continue' would go here instead of break in that case\n  printf(\"%s\\n\", brst);\n}\nfclose( student );\nreturn 0;\n}\n</code></pre>\n\n<p>feof() is only true after you've read past the end of the file.  Using a for with two identical reads, and feof() on the conditional is a simple way to ensure you read the file as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1476908932, "post_id": 40140587, "comment_id": 67551894, "body": "@DoktorD96 please notice that chux has not put any <code>\\n</code> newline in the first <code>printf</code> statement within the loop. This is because <code>fgets</code> adds any <code>newline</code> it finds, at the end of the input string. If you are storing data you will not want any <code>newline</code> present and an easy way to remove it is with <code>brst [ strcspn(brst, &quot;\\r\\n&quot;) ] = 0;</code>"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1476907619, "last_edit_date": 1495540441, "creation_date": 1476907619, "answer_id": 40140587, "question_id": 40139500, "link": "https://stackoverflow.com/questions/40139500/reading-information-from-a-file-in-c-language/40140587#40140587", "title": "Reading information from a file in C language", "body": "<p>OP's code is close but needs to use <code>fgets()</code> rather than <code>fgetc()</code> and use the return value of <code>fgets()</code> to detect when to quit, it will be <code>NULL</code> <a href=\"https://stackoverflow.com/questions/40139500/reading-information-from-a-file-in-c-language/40140587#comment67549285_40139500\">@Weather Vane</a>.  Also add a line counter.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  FILE *student = fopen(\"student.txt\", \"r\");\n  unsigned line_count = 0;\n  if (student) {\n    char brst[255];\n\n    //  fgetc(brst, 255, (FILE*)student);\n    while (fgets(brst, sizeof brst, student)) {\n      line_count++;\n      printf(\"%u %s\", line_count, brst);\n    }\n    fclose(student);\n  }\n  printf(\"Line Count %u\\n\", line_count);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7024749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1083539338428258/picture?type=large", "display_name": "DoktorD96", "link": "https://stackoverflow.com/users/7024749/doktord96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 40139866, "answer_count": 3, "score": 0, "last_activity_date": 1476916481, "creation_date": 1476903591, "last_edit_date": 1476907869, "question_id": 40139500, "link": "https://stackoverflow.com/questions/40139500/reading-information-from-a-file-in-c-language", "title": "Reading information from a file in C language", "body": "<p>So I have the txt file from which I need to read the number of students written in that file, and because every student is in separate line, it means that I need to read the number of lines in that document. So I need to:</p>\n\n<ol>\n<li><p>Print all lines from that document</p></li>\n<li><p>Write the number of lines from that document.</p></li>\n</ol>\n\n<p>So, I write this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n\nint _tmain(int argc, _TCHAR* Argo[]){\n\n    FILE *student;\n    char brst[255];\n\n    student = fopen(\"student.txt\", \"r\");\n\n    while(what kind of condition to put here?)\n    {\n        fgetc(brst, 255, (FILE*)student);\n        printf(\"%s\\n\", brst);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Ok, I understand that I can use the same loop for printing and calculating the number of lines, but I can't find any working rule to end the loop. Every rule I tried caused an endless loop. I tried <code>brst != EOF</code>, <code>brst != \\0</code>.  So, it works fine and print all elements of the document fine, and then it start printing the last line of document without end. So any suggestions? I need to do this homework in C language, and I am using <code>VS 2012 C++</code> compiler.</p>\n"}, {"tags": ["c", "gcc", "increment", "c99"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1476902021, "post_id": 40139036, "comment_id": 67547874, "body": "Your compiler wouldn&#39;t produce different assembly for those at all. (We&#39;re considering i is a builtin type.)"}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1476902130, "post_id": 40139036, "comment_id": 67547956, "body": "@DeiDei I guess I should&#39;ve bolded the <b>no optimization</b> part. Also, I never said I&#39;m only asking for this when the value is not used. Not mentioning that I also didn&#39;t assert I only care about built-in types."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476902133, "post_id": 40139036, "comment_id": 67547959, "body": "Depends on where <code>tmp</code> was allocated. Incrementing doesn&#39;t affect that at all. Is <code>tmp</code> a reference?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476902304, "post_id": 40139036, "comment_id": 67548057, "body": "For built in types I believe the store is just reordered so it stores and then increments instead of increment and then store."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476902319, "post_id": 40139036, "comment_id": 67548068, "body": "Can anyone explain the downvote? I don&#39;t see what did I miss where writing this question..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476902371, "post_id": 40139036, "comment_id": 67548096, "body": "@Tom&#225;\u0161Zato It was mine. Your example is incomplete, and your question is unclear."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1476902489, "post_id": 40139036, "comment_id": 67548151, "body": "There is no well defined difference between &quot;optimization&quot; and &quot;no optimization&quot;. The C standard does not specify the machine code to be generated for a given C construct. It only specifies the behavior of that construct. If a compiler is able to implement the semantics of <code>i++</code> without creating a temporary, it&#39;s free to do so. If it does create a temporary, that temporary is not part of the semantics of the C construct."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476902937, "post_id": 40139036, "comment_id": 67548410, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I&#39;m sorry but if we only consider C language, even specific standard and specific compiler, I don&#39;t know what am I expected to clarify. I just wanted to know how it interally works and understand it a little. Sorry for distrupting the stream of gimme teh codes questions..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476903027, "post_id": 40139036, "comment_id": 67548461, "body": "@Tom&#225;\u0161Zato Start with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as usually required here."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476903175, "post_id": 40139036, "comment_id": 67548549, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Would you expect me to post five questions, each with slightly different (but exactly defined) use of <code>i++</code> operation?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476903257, "post_id": 40139036, "comment_id": 67548596, "body": "@Tom&#225;\u0161Zato I&#39;m expecting you to post <i>one clear question</i>, that&#39;s all."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1476903421, "post_id": 40139036, "comment_id": 67548683, "body": "Not every question tagged &quot;C&quot; has to be about quoting the C standard (or pointing out that no part covers this situation). For example, this question is also tagged &quot;gcc&quot; so it&#39;s possible to examine what some particular version of gcc does in this regard."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476903491, "post_id": 40139036, "comment_id": 67548716, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I&#39;m sorry, but I&#39;m afraid that I do not know what to edit to make the question clear enough. But all answers exactly reflect what I wanted to know. Maybe some of answerers would know how should I write my question more clearly?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476903705, "post_id": 40139036, "comment_id": 67548842, "body": "@Tom&#225;\u0161Zato Have a look at your question title. Why do you think there&#39;s any extra memory needs to be allocated for incrementing a value? That&#39;s most probably done with a single op on a register. At least implementation defined, as the accepted answer shows."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476904398, "post_id": 40139036, "comment_id": 67549276, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Now you&#39;re criticising that I didn&#39;t know that &quot;<i>it&#39;s most probably done with a single op on a register</i>&quot; as you say. You&#39;re criticising that there&#39;s some misconception in my question, but come on. If I didn&#39;t have misconceptions and holes in my knowledge, I wouldn&#39;t be asking questions now, would I?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1476905130, "post_id": 40139036, "comment_id": 67549667, "body": "@Tom&#225;\u0161Zato - perhaps the complaint is that your question makes an assumption (that extra memory is allocated), and then makes a further question based on that assumption. If the original assumption turns out to be (sometimes) false, as it does here, it makes the question harder to answer. Still I found it clear enough! If you wanted to make it clearer you could phrase it like &quot;How does the compiler implementation of pre vs post-increment of a primitive vary?&quot; or &quot;Is it always more efficient to pre-increment <i>primitive</i> values&quot;?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1476911031, "post_id": 40139036, "comment_id": 67552916, "body": "You could also clarify if <code>i</code> is a primitive (I assumed it was) or a more complex type. The answer is very different across the two cases!"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476902253, "post_id": 40139143, "comment_id": 67548021, "body": "I don&#39;t see what <code>tmp</code> actually is from the question!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476902358, "post_id": 40139143, "comment_id": 67548087, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I guess, this is the actual question - what this <code>tmp</code> is? I understand the question as an attempt of OP to understand what compiler is doing semantically."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1476902214, "creation_date": 1476902214, "answer_id": 40139143, "question_id": 40139036, "link": "https://stackoverflow.com/questions/40139036/how-does-c-compiler-handle-post-increment-i-memory-wise/40139143#40139143", "title": "How does C compiler handle post-increment (i++), memory wise?", "body": "<p>Semantically, it is an automatic variable, and it's place in memory is left to compiler.\nPractically, it depends on whether you are talking about built-in operator or user-defined operator, return type and your ABI.\nFor example, for built-in increment done on integer type, on X64 CPU, the return value of an integer is put in the register. So the variable does not occupy any space and at all.</p>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 4, "last_activity_date": 1476903272, "last_edit_date": 1476903272, "creation_date": 1476902401, "answer_id": 40139199, "question_id": 40139036, "link": "https://stackoverflow.com/questions/40139036/how-does-c-compiler-handle-post-increment-i-memory-wise/40139199#40139199", "title": "How does C compiler handle post-increment (i++), memory wise?", "body": "<p>For primitive types, prefix vs. postfix only affects the ordering of the increment step. Compare <code>printf(\"%u\", i++);</code> to <code>printf(\"%u\", ++i);</code>. The pseudo assembly for the former might be something like (assumes <code>i</code> is in a register already):</p>\n\n<pre><code>load \"%u\" to arg1register\nmove i to arg2register\ncall printf\nincrement i  // Could occur before call to printf if arg2register separate from i\n</code></pre>\n\n<p>while for the latter, it just reorders the increment step:</p>\n\n<pre><code>load \"%u\" to arg1register\nincrement i // Could occur at any point before this and after last use of i\nmove i to arg2register\ncall printf\n</code></pre>\n\n<p>In a <code>for</code> loop increment step, <em>even with optimization off</em>, <code>i++</code> and <code>++i</code> would be the same, <em>because the \"result\" is unused</em>; it doesn't need to be loaded, moved, etc., so it's just <code>increment i</code>.</p>\n\n<p>If it's not a primitive type, then it's calling the appropriate <code>++</code> overload, and it's up to the postfix <code>++</code> overload to make a copy (which would usually be stored on the stack, like any other variable) before incrementing in place and returning the copy. Even in a <code>for</code> loop increment step, it can't guarantee that postfix operation is equivalent to prefix, so barring extreme compiler optimizations (that may not be standard legal), <code>i++</code> for non-primitive types would have to call the postfix operator, creating and destroying a temporary unnecessarily.</p>\n\n<p>This is inefficient, which is why it's considered good practice to stick with prefix increment in C++ all the time; if your code changes from using <code>int</code> to, say, <code>mpz_class</code>, you don't want to end up making and destroying an <code>mpz_class</code> on every increment. Since prefix is harmless for primitives, and <em>much</em> better for user-defined types, just use prefix unless it would be much uglier to do so (and even then, only if it's a primitive).</p>\n"}, {"tags": [], "owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1476902613, "creation_date": 1476902613, "answer_id": 40139239, "question_id": 40139036, "link": "https://stackoverflow.com/questions/40139036/how-does-c-compiler-handle-post-increment-i-memory-wise/40139239#40139239", "title": "How does C compiler handle post-increment (i++), memory wise?", "body": "<p>No extra memory is required.  With ++i or i++ the value of i exists in memory, it is loaded into the processor, place into a register, a cpu instruction increments it (either addition or an increment instruction depending on the processor), the result ends up in a register, and then the result is saved to the same location in memory where i came from.</p>\n\n<p>The difference between ++i and i++ is really just sequence of processor instructions.  i++ will imply ensure that whatever else that the value of i is used for happens first, using the initial value, before the value is incremented.</p>\n\n<p>If the value is not being used elsewhere, there will be literally no difference in the resulting machine code.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476902782, "post_id": 40139255, "comment_id": 67548322, "body": "By not storing the return value of the increment this is a little misleading."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476903259, "post_id": 40139255, "comment_id": 67548598, "body": "Sure, but so is looking at the code without optimization. My point was to show that the compiler doesn&#39;t just uniformly translate the post-increment version into the version using a <code>tmp</code> variable on the stack. Even with optimizations off, it is smart enough to avoid it. I added a version where the value of the incremented expression is consumed, and commented on it as well."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476903602, "post_id": 40139255, "comment_id": 67548775, "body": "Thanks for taking the time to write all this, it&#39;s highly appreciated!"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1476903685, "post_id": 40139255, "comment_id": 67548835, "body": "What is RMW in &quot;a memory RMW instruction&quot;?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1476904837, "post_id": 40139255, "comment_id": 67549514, "body": "It is read-modify-write. An instruction like <code>add [rsp], 1</code> is an RMW instruction because it has both a memory source and destination. The CPU needs to read the value from memory, perform the &quot;add 1&quot; part in the ALU, then write the result back to memory. If any of the values (the initial value or the final value) are ever needed in nearby code, it&#39;s best to avoid an RMW instruction, since you&#39;ll end up reading the result back which causes a store-forwarding stall and is slower regardless. So you don&#39;t see a ton of RMW instructions generated by compilers, except for simple isolated code."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476904895, "post_id": 40139255, "comment_id": 67549546, "body": "@Tom&#225;\u0161Zato - no problem. I updated it with a look at what happens when you use optimization."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1476905258, "post_id": 40139255, "comment_id": 67549736, "body": "I disagree with &quot;there is no &quot;temporary space&quot; allocated in memory - only the assembly changes, and a register (eax here) is used for free...&quot;, using a register is in fact a kind of memory allocation; may be the word allocation seems too strong, but at least the register is where the value is stored and that answers the question."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1476905556, "post_id": 40139255, "comment_id": 67549922, "body": "@Jean-BaptisteYun&#232;s - we&#39;ll I&#39;m using the definition of &quot;memory&quot; that I think is commonly understood - the virtually addressable space generally stored in RAM, returned by <code>malloc</code> and so on. The distinction between registers and memory is very clear when you look at the hardware, although less clear when you look at C code, where the compiler may do magic. I was very clear that it uses an extra register and that may be slower in some cases (but not here)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1476905664, "post_id": 40139255, "comment_id": 67549988, "body": "Finally note that in plenty of cases there is no temporary at all! I constructed my example so that a temporary was in fact needed, but in a most complex function it&#39;s highly likely that the compiler just re-orders things and uses no temporary <i>space</i> at all, not even registers. For example, <code>foo(i++)</code> may compile to effectively <code>call foo; inc i</code> and <code>foo(++i)</code> to <code>inc i; call foo</code>."}], "tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": true, "score": 4, "last_activity_date": 1476904667, "last_edit_date": 1476904667, "creation_date": 1476902686, "answer_id": 40139255, "question_id": 40139036, "link": "https://stackoverflow.com/questions/40139036/how-does-c-compiler-handle-post-increment-i-memory-wise/40139255#40139255", "title": "How does C compiler handle post-increment (i++), memory wise?", "body": "<p>Your assumption that compilers always produce different results for <code>++i</code> and <code>i++</code> <strong>without optmization</strong> is false. Here's a look at pre and post increment <a href=\"https://godbolt.org/g/yKDrk1\" rel=\"nofollow\">on godbolt</a>, in gcc 6.2, no optimization:</p>\n\n<h3>The C Code</h3>\n\n<pre><code>int pre() {\n  int i = 0;\n  ++i;\n}\n\nint post() {\n  int i= 0;\n  i++;\n}\n</code></pre>\n\n<h3>The Assembly (x86-64)</h3>\n\n<pre><code>pre():\n        push    rbp\n        mov     rbp, rsp\n        mov     DWORD PTR [rbp-4], 0\n        add     DWORD PTR [rbp-4], 1\n        nop\n        pop     rbp\n        ret\n\npost():\n        push    rbp\n        mov     rbp, rsp\n        mov     DWORD PTR [rbp-4], 0\n        add     DWORD PTR [rbp-4], 1\n        nop\n        pop     rbp\n        ret\n</code></pre>\n\n<p>Note that the compiled code is byte-for-byte identical here for <code>i++</code> and <code>++i</code>. Both simply add 1 to the memory location reserved on the stack for <code>i</code>. No temporary is created or needed.</p>\n\n<p>You might complain that I'm not actually using the value of the incremented expression, so let's <a href=\"https://godbolt.org/g/YL0dpQ\" rel=\"nofollow\">look at something</a> that actually does use the value:</p>\n\n<h3>The C Code</h3>\n\n<pre><code>int pre(int i) {\n  return ++i;\n}\n\nint post(int i) {\n  return i++;\n}\n</code></pre>\n\n<h3>The Assembly (x86-64)</h3>\n\n<pre><code>pre(int):\n        push    rbp\n        mov     rbp, rsp\n        mov     DWORD PTR [rbp-4], edi\n        add     DWORD PTR [rbp-4], 1\n        mov     eax, DWORD PTR [rbp-4]\n        pop     rbp\n        ret\n\npost(int):\n        push    rbp\n        mov     rbp, rsp\n        mov     DWORD PTR [rbp-4], edi\n        mov     eax, DWORD PTR [rbp-4]\n        lea     edx, [rax+1]\n        mov     DWORD PTR [rbp-4], edx\n        pop     rbp\n        ret\n</code></pre>\n\n<p>Here, the assembly is different. The pre-increment version uses a memory RMW (read-modify-write) instruction to increment the variable, while the post-increment version increments the variable separately through <code>edx</code>. While looking at un-optimized code is always an exercise in futility, I'm quite sure the post-increment version is <em>faster</em> here, as the dependency chain is smaller due to no RMW instruction in the critical path and subsequent store forwarding stall.</p>\n\n<p>A key note is that even here there is no \"temporary space\" allocated in memory - only the assembly changes, and a register (<code>eax</code> here) is used for free as the resting place for the value of <code>i</code> before the post-increment.</p>\n\n<p>Of course, you shouldn't really read <em>anything</em> into unoptimized code. It isn't going to be used in practice and you can't really learn much about the efficiency of any construct by studying it, because the optimized code will vary wildly across different idioms.</p>\n\n<p>So finally, let's look at <a href=\"https://godbolt.org/g/K9i7QX\" rel=\"nofollow\">a realistic example</a> where we are using optimization, and <em>both</em> the value of the increment expression and the underlying variable is actually used (so neither value is optimized away). Here we take an <code>int &amp;</code> reference to i in each function so that the passed-in value is modified. We use -O2, although every other optimization level I tried produces identical results, other than <code>-Os</code>:</p>\n\n<h3>The C Code</h3>\n\n<pre><code>int pre(int&amp; i) {\n  return ++i;\n}\n\nint post(int&amp; i) {\n  return i++;\n}\n</code></pre>\n\n<h3>The Assembly (x86-64)</h3>\n\n<pre><code>pre(int&amp;):\n        mov     eax, DWORD PTR [rdi]\n        add     eax, 1\n        mov     DWORD PTR [rdi], eax\n        ret\n\npost(int&amp;):\n        mov     eax, DWORD PTR [rdi]\n        lea     edx, [rax+1]\n        mov     DWORD PTR [rdi], edx\n        ret \n</code></pre>\n\n<p>Both functions are almost exactly the same cost. They have the same number of instructions, and on modern Intel hardware produce the same number of uops (4 fused-domain) with the same cost. The functions take exactly the same number of instruction bytes<sup>1</sup>.</p>\n\n<p>The post-increment differs in that it uses a <code>lea</code> instruction to put its result in <code>edx</code>, so that <code>eax</code> remains un-incremented as the return value. The pre-increment version simply uses <code>eax</code> for everything. The use of <code>edx</code> has no direct cost here because it is a scratch register in x86-64, so there is no need to save its value. In a more complex code, the use of another register <em>could</em> increase register pressure, although it is fairly unlikely because the lifetime is very small and there are more opportunities for re-ordering.</p>\n\n<p>The post-increment version actually has a smaller dependency chain for the return value - assuming the caller uses the return value in <code>eax</code>, it will take 1 additional cycle for it to be ready (since the <code>add eax, 1</code> is part of the dependency chain). That's actually inherent in the pre-increment definition: <em>in one way, pre-increment is slower</em>, because the increment and subsequent use of the value must occur serially, while in the post-increment case they can occur in parallel, since the use of the value doesn't depend on the increment operation. Of course, this effect is very small - not usually more than a single cycle. The classic advice to use pre-increment probably still applies because for objects it can make a <em>big</em> difference. For primitives, not so much.</p>\n\n<hr>\n\n<p><sup>1</sup>Interestingly, the pre-increment version could have been implemented with <code>inc eax</code> rather than <code>add eax, 1</code>, which is probably as fast on modern hardware and saves a byte. It probably isn't because of the mostly obsolete advice to avoid <code>inc</code> and <code>dec</code> due to partial flag stalls. In fact, with <code>-Os</code> (optimize for size) gcc <em>does</em> use an <code>inc</code> here.</p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1565, "favorite_count": 1, "closed_date": 1478767647, "accepted_answer_id": 40139255, "answer_count": 4, "score": -2, "last_activity_date": 1476905218, "creation_date": 1476901856, "last_edit_date": 1476905218, "question_id": 40139036, "link": "https://stackoverflow.com/questions/40139036/how-does-c-compiler-handle-post-increment-i-memory-wise", "closed_reason": "Needs details or clarity", "title": "How does C compiler handle post-increment (i++), memory wise?", "body": "<p>I've been just explaining <code>i++</code> vs <code>++i</code> details to a friend. I was telling him how with <strong>no optimalization</strong>, <code>i++</code> in <code>for</code> loop essentially means making a copy of your <code>i</code> that is not used for anything. Since <code>i++</code> can be described with this pseudocode:</p>\n\n<pre><code>tmp = i;\ni = i + 1;\nreturn tmp;\n</code></pre>\n\n<p>Well, I noticed I just don't really know one thing: where is the memory for our <code>tmp</code> allocated? Does it increase the memory size required for whole procedure/function? (That is, is it on stack?)</p>\n\n<p>I suppose it is, but how to test that? <strong>If and only if it matters</strong> we're talking about C99 standard and GCC compiler. But I'd prefer broader answer to get some perspective on the matter.</p>\n"}, {"tags": ["c", "validation", "input", "cs50"], "comments": [{"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 2, "creation_date": 1476899434, "post_id": 40138287, "comment_id": 67546285, "body": "Show us what you&#39;ve done so far, don&#39;t just ask us to write code for you"}, {"owner": {"reputation": 17, "user_id": 6893928, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211087063349933/picture?type=large", "display_name": "Hamza Azam", "link": "https://stackoverflow.com/users/6893928/hamza-azam"}, "reply_to_user": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 1, "creation_date": 1476899616, "post_id": 40138287, "comment_id": 67546395, "body": "edited, now you can see my code :)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1476899977, "post_id": 40138287, "comment_id": 67546622, "body": "take a look at <code>strtol</code>. You can read the input as a string, use <code>strtol</code> to convert the string to an integer, and if there&#39;s any error during the conversion <code>strtol</code> will indicate it by setting errno: <a href=\"https://linux.die.net/man/3/strtol\" rel=\"nofollow noreferrer\">linux.die.net/man/3/strtol</a>"}, {"owner": {"reputation": 2512, "user_id": 5771617, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/fUXWF.jpg?s=128&g=1", "display_name": "lu5er", "link": "https://stackoverflow.com/users/5771617/lu5er"}, "edited": false, "score": 0, "creation_date": 1476900146, "post_id": 40138287, "comment_id": 67546723, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/28911745/how-to-stop-infinite-loop-when-character-is-pressed-in-place-of-\" title=\"how to stop infinite loop when character is pressed in place of \">stackoverflow.com/questions/28911745/&hellip;</a> Try it out."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1476902733, "post_id": 40138287, "comment_id": 67548293, "body": "<a href=\"https://stackoverflow.com/a/23080439/3386109\">This answer</a> may help."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6893928, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211087063349933/picture?type=large", "display_name": "Hamza Azam", "link": "https://stackoverflow.com/users/6893928/hamza-azam"}, "edited": false, "score": 0, "creation_date": 1476899741, "post_id": 40138361, "comment_id": 67546474, "body": "If you enter any char it runs infinite times. I want only positive integer value otherwise re prompt it !"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476900711, "post_id": 40138361, "comment_id": 67547053, "body": "SO is not a Tutorial Site, you should explain something to make it an Answer and not a Tutorial."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 17, "user_id": 6893928, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211087063349933/picture?type=large", "display_name": "Hamza Azam", "link": "https://stackoverflow.com/users/6893928/hamza-azam"}, "edited": false, "score": 0, "creation_date": 1476901316, "post_id": 40138361, "comment_id": 67547401, "body": "@HamzaAzam Probabli <a href=\"http://ideone.com/u5MOy6\" rel=\"nofollow noreferrer\">This is what you need</a>. Check the following <a href=\"http://stackoverflow.com/questions/32671751/c-getchar-doesnt-wait-for-input-conditional-loop-doesnt-int/32671910#32671910\">here</a> , <a href=\"http://stackoverflow.com/questions/34165592/scanf-skipped-after-reading-in-integer-in-c-in-while-loop/34165759#34165759\">Here</a> and <a href=\"http://stackoverflow.com/questions/31770861/validate-parameter-for-0-or-1/31772378#31772378\">Here</a>. Should answer to all your Questions."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476901600, "post_id": 40138361, "comment_id": 67547597, "body": "@Michi : Comments are not for posting answers and answers off-site are hardly helpful to the SO community. It will not show up in searches and cannot be voted or commented on."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1476902116, "post_id": 40138361, "comment_id": 67547944, "body": "<code>scanf(&quot;%i&quot;, min);</code> ==&gt;&gt; <code>scanf(&quot;%i&quot;, &amp;min);</code>"}], "tags": [], "owner": {"reputation": 95, "user_id": 4211401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d498fb59613110c0417c3c43a3b89d?s=128&d=identicon&r=PG", "display_name": "Joe Torres", "link": "https://stackoverflow.com/users/4211401/joe-torres"}, "is_accepted": false, "score": 0, "last_activity_date": 1476903224, "last_edit_date": 1476903224, "creation_date": 1476899530, "answer_id": 40138361, "question_id": 40138287, "link": "https://stackoverflow.com/questions/40138287/re-prompting-a-user-until-he-she-enters-a-positive-integer-value-greater-than-1/40138361#40138361", "title": "Re-prompting a user until he/she enters a positive integer value greater than 1", "body": "<pre><code>int min = 0;\ndo {\n   printf(\"Enter minutes: \");\n   scanf(\"%i\", &amp;min);\n} while(min &lt;= 0);\n//programs resumes after this.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476901491, "post_id": 40138881, "comment_id": 67547516, "body": "<code>main</code> signature should be at least <code>int main(void){}</code> or <code>int main(int argc, char* argv[]){}</code>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476901564, "post_id": 40138881, "comment_id": 67547565, "body": "The OP already explained in the Above Answer the problem <code>If you enter any char it runs infinite times.</code>. Your answer doesn&#39;t seems to fix this. More over the OP needs something like <a href=\"http://ideone.com/u5MOy6\" rel=\"nofollow noreferrer\">This</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476901772, "post_id": 40138881, "comment_id": 67547711, "body": "<code>while( getchar() != &#39;\\n&#39; ) { }</code> --&gt; infinite loop on EOF.  Although I doubt OP will close <code>stdin</code>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476901905, "post_id": 40138881, "comment_id": 67547807, "body": "@Michi : I merely copied the OPs framework - C11 makes that clear, C89 allows other implementation defined signatures, and I am will in to bet that any compiler will accept that.  It is valid in C++ of course."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476902176, "post_id": 40138881, "comment_id": 67547983, "body": "@Clifford The only standard is <code>C11</code> Why should we speak about OLD STANDARD?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476902185, "post_id": 40138881, "comment_id": 67547988, "body": "@Michi :  The infinite loop is resolved by the getchar() loop.  Yes it is possible for an EOF in environments supporting stdin redirection, but not likley for console input.  This does not seem to be the kind of dialogue suited to file redirection input, but is easily fixed if you desire.  Seems somewhat pedantic though."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476902515, "post_id": 40138881, "comment_id": 67548167, "body": "@Mich : The standard is the one applied by your compiler.  All that legacy code still needs to compile, it is hardly cost effective to rewrite code just because some committee made a decision that might break years of work. I work in embedded systems development; there are plenty of niche platform compilers that do not support  current standards and often have little need to do so.  Moreover I work primarily in C++ and have not used C extensively since 2000 so freely accept that I am out-of-date.  I don&#39;t think this discussion is particularly relevant."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1476902691, "post_id": 40138881, "comment_id": 67548266, "body": "Added the EOF check in any case."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476903170, "post_id": 40138881, "comment_id": 67548544, "body": "@Clifford Sir, yes you right, but here we are speaking about the language and not about the compiler and the standard is <code>C11</code>. All others are only old standards. That was my point."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1476903768, "post_id": 40138881, "comment_id": 67548885, "body": "@Michi : You are of course right - since your suggested signature is valid regardless of version of the standard, it should be preferred for the greatest portability..  I was wary of adding code to the OP&#39;s that was not explicitly part of the solution as it might be a distraction.  But we are already distracted."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1476903977, "post_id": 40138881, "comment_id": 67549021, "body": "... moreover, by the placement of variable declarations in the OP&#39;s original code I have assumed lowest common denominator C89."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476904017, "post_id": 40138881, "comment_id": 67549047, "body": "@Clifford I&#39;m not an Expert of the Language (maybe I will never be :D) But I like to stick with the Language and its main Standard. I up voted your Answer because does that what the OP needs."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1476904081, "last_edit_date": 1476904081, "creation_date": 1476901321, "answer_id": 40138881, "question_id": 40138287, "link": "https://stackoverflow.com/questions/40138287/re-prompting-a-user-until-he-she-enters-a-positive-integer-value-greater-than-1/40138881#40138881", "title": "Re-prompting a user until he/she enters a positive integer value greater than 1", "body": "<p>You don't need the first prompt outside the loop because you have already initialised length to zero, so the loop will prompt at least once.</p>\n\n<p>On most platforms other then Wndows, you need to flush stdout to show text not terminated with a newline.</p>\n\n<p><code>scanf</code> will return so long as a newline character is buffered and <code>%d</code> alone will not consume the newline, so you need to ensure that any remaining characters up to and including the newline are flushed to prevent an endless loop.</p>\n\n<p>It is good practice to check the return value from <code>scanf()</code> since it makes no guaranteed about not modifying its arguments even when a conversion fails.</p>\n\n<p>It is not clear why <code>min</code> is a variable here sine it is initialised but never re-assigned, but presumably that may be the case in the final program? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{   \n    int length = 0 ;\n    int min = 12 ;\n    int bottle = 0 ;\n\n    while( length &lt;= 0 )\n    {\n        int converted = 0 ;\n\n        printf( \"Enter length of his or her shower in minutes: \" ) ;\n        fflush( stdout ) ;\n        converted = scanf( \"%d\", &amp;length ) ;\n        if( converted != 1 )\n        {\n            length = 0 ;\n        }\n\n        while( (c = getchar()) != '\\n' &amp;&amp; c != EOF ) { } // flush line buffer\n    }\n\n    bottle = min * length ;\n    printf( \"%d\", bottle ) ;\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476901938, "post_id": 40139028, "comment_id": 67547824, "body": "I don&#39;t wanna be mean :D, but why <code>int main(int argc, char const *argv[])</code> If the program doesn&#39;t use those arg? Just asking. In my opinion should be <code>int main(void)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1476901974, "post_id": 40139028, "comment_id": 67547842, "body": "@Michi oh ok, it was just my standard test file, edited."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1476903192, "post_id": 40139028, "comment_id": 67548560, "body": "While it can be done with <code>scanf()</code> this method is generally far less problematic and probably simpler."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 6, "last_activity_date": 1476902020, "last_edit_date": 1476902020, "creation_date": 1476901827, "answer_id": 40139028, "question_id": 40138287, "link": "https://stackoverflow.com/questions/40138287/re-prompting-a-user-until-he-she-enters-a-positive-integer-value-greater-than-1/40139028#40139028", "title": "Re-prompting a user until he/she enters a positive integer value greater than 1", "body": "<p>You can solve this by reading a string first, and then extracting any number:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int length = 0;\n    char input[100];\n    while(length &lt;= 0) {\n        printf(\"Enter length: \");\n        fflush(stdout);\n        if(fgets(input, sizeof input, stdin) != NULL) {\n            if(sscanf(input, \"%d\", &amp;length) != 1) {\n                length = 0;\n            }\n        }\n    }\n\n    printf(\"length = %d\\n\", length);\n    return 0;\n}\n</code></pre>\n\n<p>Program session:</p>\n\n<pre><code>Enter length: 0\nEnter length: -1\nEnter length: abd3\nEnter length: 4\nlength = 4\n</code></pre>\n\n<p>Crucially, I always check the return value from <code>scanf</code>, the number of items successfully converted.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476902776, "post_id": 40139212, "comment_id": 67548318, "body": "@WeatherVane You right :D. But My Answer doesn&#39;t concentrate on that. I already said that is about inputs like <code>1f</code> or <code>f1</code>. And I hate to make my Answer a Tutorial as well :d."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476908463, "post_id": 40139212, "comment_id": 67551614, "body": "<code>(check = getchar()) != 0</code> is curious.  Why check against <code>0</code>?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476983933, "post_id": 40139212, "comment_id": 67590104, "body": "@chux same like <code>(check = getchar()) != &#39;\\0&#39;</code> or <code>(check = getchar()) != 1)</code>  or  <code>2</code>, <code>3</code>,<code>4</code>....<code>100</code>...<code>n</code>. I just use an extra check."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476984228, "post_id": 40139212, "comment_id": 67590293, "body": "I see code is doing an extra check, but <i>why</i> stop reading if a null character is encountered?  Looks counter-productive."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476984715, "post_id": 40139212, "comment_id": 67590574, "body": "@chux I used this Function together with others to read a file and there I had to check if a null character was encountered. Here is about reading Input from keyboard. Why should keep reading if the null character is present? How does even be possible? I know that <code>while((check = getchar()) != &#39;\\n&#39; &amp;&amp; check != EOF);</code> is fine here, more over I can remove <code>check</code> and use it like this <code>while((option = getchar()) != &#39;\\n&#39; &amp;&amp; option != EOF);</code>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476984882, "post_id": 40139212, "comment_id": 67590675, "body": "@chux Should I check <code>c != EOF</code> here ==&gt;&gt;  <code>if( (scanf(&quot;%d%c&quot;,&amp;check,&amp;c) == 0 || c != &#39;\\n&#39;) &amp;&amp; c != EOF )</code>. ?...I&#39;m asking because I already know that something is wrong, when the first check is <code>0</code> here <code>scanf(&quot;%d%c&quot;,&amp;option,&amp;c) == 0</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476992785, "post_id": 40139212, "comment_id": 67595377, "body": "C uses null character in special way.  That does not mean keyboards or re-direct input input <code>stdin</code> lack the ability to generate the null character.  On some keyboard Ctrl @ works.  For reading the rest of a <i>line</i>, read until <code>&#39;\\n&#39;</code> or EOF is returned form <code>fgetc()</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476993104, "post_id": 40139212, "comment_id": 67595552, "body": "With <code>scanf(&quot;%d%c&quot;,&amp;check,&amp;c)</code>, no need to check if <code>c == EOF</code>.  Check the return value of <code>scanf()</code>.  4 results possible.  2: number and following character found. 1: number and no more input available (or error).  0: input available but it is not a number.  EOF: end-of-file or error occurred.  Better to code <code>if((scanf(&quot;%d%*c&quot;,&amp;check)==1) Success()</code>.  Even better, uses <a href=\"http://stackoverflow.com/a/40139028/2410359\"><code>fgets()</code></a>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1513524273, "post_id": 40139212, "comment_id": 82677234, "body": "@WeatherVane I know it is a late edit, but I made some changes to the code to meat the OP requirements."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1513537255, "post_id": 40139212, "comment_id": 82681307, "body": "This answer rejects an input such as <code>42*</code>, which my solution does not."}], "tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": false, "score": 2, "last_activity_date": 1513523996, "last_edit_date": 1513523996, "creation_date": 1476902471, "answer_id": 40139212, "question_id": 40138287, "link": "https://stackoverflow.com/questions/40138287/re-prompting-a-user-until-he-she-enters-a-positive-integer-value-greater-than-1/40139212#40139212", "title": "Re-prompting a user until he/she enters a positive integer value greater than 1", "body": "<p>If you don't care about Inputs like <code>1f</code> then the Above Answers are ok For you, but if you do not want to accept this kind of Input, then the following approach does something like that:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint checkInput(void);\nint main(void){\n    int number = checkInput();\n\n    printf(\"\\nYour number is\\t%d\\n\",number);\n\n    return 0;\n}\n\nint checkInput(void){\n    int option,check;\n    char c;\n\n    do{\n        printf(\"Please type a number:\\t\");\n\n        if(scanf(\"%d%c\",&amp;option,&amp;c) == 0 || c != '\\n'){\n            while((check = getchar()) != 0 &amp;&amp; check != '\\n' &amp;&amp; check != EOF);\n            printf(\"\\tI sayed a Number please\\n\\n\");\n        }else{\n            if ( option &lt; 1){\n                printf(\"Wrong input!\\n\");\n            }else{\n                break;\n            }\n        }\n    }while(1);\n\n    return option;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Please type a number:   1f\n    I sayed a Number please\n\nPlease type a number:   f1\n    I sayed a Number please\n\nPlease type a number:   -1\n    Wrong input!\nPlease type a number:   1\n\nYour number is  1\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6893928, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211087063349933/picture?type=large", "display_name": "Hamza Azam", "link": "https://stackoverflow.com/users/6893928/hamza-azam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1939, "favorite_count": 0, "accepted_answer_id": 40139028, "answer_count": 4, "score": -2, "last_activity_date": 1513523996, "creation_date": 1476899309, "last_edit_date": 1476899594, "question_id": 40138287, "link": "https://stackoverflow.com/questions/40138287/re-prompting-a-user-until-he-she-enters-a-positive-integer-value-greater-than-1", "title": "Re-prompting a user until he/she enters a positive integer value greater than 1", "body": "<p>I'm solving CS50 (problemset 1) i.e water.c. It asks user to write a program that prompts the user for the length of his or her shower in minutes (as a positive integer) and then prints the equivalent number of bottles of water (as an integer). \n1 min of shower = 12 bottles consumed\nMAIN PROBLEM: The problem is that we have to ensure that the user inputs a positive number of minutes otherwise it keeps on re-prompting his back to input/scanf statement. As long as he enters he enters length&lt;=0, I can re-prompt him back using while(length&lt;=0) condition but as he enters a character i.e abc123 in input my code keeps on executing. Any solutions??  </p>\n\n<p>></p>\n\n<pre><code> #include &lt;stdio.h&gt;\n int main()\n {   int length=0;\n    int min=12;\n    int bottle=0;\n    printf(\"Enter length of his or her shower in minutes\");\n    scanf(\"%d\", &amp;length);\n    while (length &lt;= 0){\n    printf(\"Enter length of his or her shower in minutes\");\n    scanf(\"%d\", &amp;length);\n    }\n    bottle= (min*length);\n    printf(\"%d\", bottle);\n\n    return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "debugging", "pointers", "malloc", "codeblocks"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1476898559, "post_id": 40138005, "comment_id": 67545724, "body": "What do you think will happen in this line <code>checker_board[i][j+1] = ...</code> if <code>j=6</code> (and it will be)?"}, {"owner": {"reputation": 833, "user_id": 4405062, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6497cb6d90ad370a976cb7ae4762bfd?s=128&d=identicon&r=PG&f=1", "display_name": "The Cloud Guy", "link": "https://stackoverflow.com/users/4405062/the-cloud-guy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476899369, "post_id": 40138005, "comment_id": 67546236, "body": "The problem is somewhere in the print_board function. The rest of the code is working fine. I verified this fact by commenting the print_board function."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1476899406, "post_id": 40138005, "comment_id": 67546265, "body": "In this case you might want to understand the meaning of the term <i>undefined behavior</i>."}, {"owner": {"reputation": 833, "user_id": 4405062, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6497cb6d90ad370a976cb7ae4762bfd?s=128&d=identicon&r=PG&f=1", "display_name": "The Cloud Guy", "link": "https://stackoverflow.com/users/4405062/the-cloud-guy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476899697, "post_id": 40138005, "comment_id": 67546450, "body": "So far what I understood is that I am facing issue with the check_board pointer for which I allocate memory rather than assigning a piece to it. Like Checker_board[0][0] pointer"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476899755, "post_id": 40138005, "comment_id": 67546483, "body": "So you don&#39;t see a problem with the code I&#39;ve pointed out?? And I think it&#39;s not the only one.."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1476901132, "post_id": 40138005, "comment_id": 67547269, "body": "why all the dynamic memory allocation? You don&#39;t need anything to persist once <code>main</code> returns and you know how much memory you want at compile time."}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1476908770, "post_id": 40138005, "comment_id": 67551797, "body": "@AbhishekKothari in the print_board() function, the variable &#39;checker_board[i][j]-&gt;symbols&#39; is not initialized = 0xcdcdcdcd under Visual C++ in debug mode."}], "answers": [{"tags": [], "owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "is_accepted": false, "score": 0, "last_activity_date": 1476910489, "creation_date": 1476910489, "answer_id": 40141357, "question_id": 40138005, "link": "https://stackoverflow.com/questions/40138005/code-works-fine-in-debug-mode-but-fails-in-normal-run/40141357#40141357", "title": "Code works fine in debug mode but fails in normal run", "body": "<p>When looking the source code and using also the debugger, I have confirm the problem:\n1- In the print_board(), the following test-if check a value which is not used '\\'r':</p>\n\n<pre><code>if(checker_board[i][j]-&gt;king != '\\r')\n</code></pre>\n\n<p>2- In the initialize_board(), all the malloc() are not initialized at least for the 'king' parameter:</p>\n\n<pre><code>void initialize_board(struct Checker_piece* checker_board[boardheight][boardwidth],\n                      struct Checker_piece* player1,struct Checker_piece* player2)\n{\n    int i, j;\n    for(i = 0; i &lt; 3; i++) {\n        for(j = 0; j &lt;= 7; j = j+2) {\n            if(i == 0 || i % 2 == 0) {\n                checker_board[i][j+1] = player1;\n                checker_board[i][j] = malloc(sizeof (struct Checker_piece));\n                // init at least the king to '\\r'\n                checker_board[i][j]-&gt;king = '\\r';\n            } else {\n                checker_board[i][j] = player1;\n                checker_board[i][j+1] = malloc(sizeof (struct Checker_piece));\n                checker_board[i][j+1]-&gt;king = '\\r';\n            }\n            player1++;\n        }\n    }\n    for(; i &lt; 5; i++){\n        for(j = 0; j &lt; 8; j++){\n            checker_board[i][j] = malloc(sizeof (struct Checker_piece));\n            checker_board[i][j]-&gt;king = '\\r';\n        }\n    }\n    for(i = 5; i &lt; 8; i++){\n        for(j = 0; j &lt;= 7; j = j+2){\n            if(i == 0 || i % 2 == 0){\n                checker_board[i][j+1] = player2;\n                checker_board[i][j] = malloc(sizeof (struct Checker_piece));\n                checker_board[i][j]-&gt;king = '\\r';\n            } else {\n                checker_board[i][j] = player2;\n                checker_board[i][j+1] = malloc(sizeof (struct Checker_piece));\n                checker_board[i][j+1]-&gt;king = '\\r';\n            }\n            player2++;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 833, "user_id": 4405062, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6497cb6d90ad370a976cb7ae4762bfd?s=128&d=identicon&r=PG&f=1", "display_name": "The Cloud Guy", "link": "https://stackoverflow.com/users/4405062/the-cloud-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1476910489, "creation_date": 1476898426, "last_edit_date": 1476899258, "question_id": 40138005, "link": "https://stackoverflow.com/questions/40138005/code-works-fine-in-debug-mode-but-fails-in-normal-run", "title": "Code works fine in debug mode but fails in normal run", "body": "<p>This used to happen frequently with me when I use pointers. Today I have one code with similar issue. When I run the below code in debug mode, the code executes perfectly fine and exits normally in Code Blocks 13.12 </p>\n\n<p>When I try to run it in normal mode, it seems to be getting a segmentation fault and thus result in code termination. Code basically breaks during the execution of print_board function. But I am not sure why this happens.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define boardheight 8\n#define boardwidth 8\nstruct Player_symbols{\n    char symbol;\n    char king_symbol;\n};\n\nstruct Checker_piece{\n    char king;\n    int on_board;\n    int num_moves;\n    int player;\n    struct Player_symbols* symbols;\n};\n\nint pieces_count[2] = {12,12};\nstruct Checker_piece* player_1_pieces;\nstruct Checker_piece* player_2_pieces;\n\nvoid initialize_player_pieces(struct Checker_piece* player_pieces, struct Player_symbols* player_symbols, int player_num);\nvoid initialize_board(struct Checker_piece* checker_board[boardheight][boardwidth],struct Checker_piece* player1,struct Checker_piece* player2);\nvoid print_board(struct Checker_piece* checker_board[boardheight][boardwidth]);\nint move_piece(struct Checker_piece* checker_board[boardheight][boardwidth], int x,int y,int player);\nvoid continue_jumping(struct Checker_piece* checker_board[boardheight][boardwidth],int* y,int* x,int player);\nint generate_destination(int x, int *dest_x, int *dest_y, int *dest_y_jump,int dest_y2,int dest_y2_jump,int move_flags,int player);\n\nint main()\n{\n    struct Checker_piece*  checker_board[boardheight][boardwidth];\n    //declare and initialize the Checker_piece structures by allocating memory dynamically using a dummy structure to determine its size\n    player_1_pieces = malloc(12*sizeof (struct Checker_piece));\n    player_2_pieces = malloc(12*sizeof (struct Checker_piece));\n    struct Player_symbols *player_1_symbols,*player_2_symbols;\n\n    player_1_symbols = malloc(sizeof (struct Player_symbols));\n    player_2_symbols = malloc(sizeof (struct Player_symbols));\n\n    //initialize the player symbols\n    player_1_symbols-&gt;symbol = 'o';\n    player_1_symbols-&gt;king_symbol = 'O';\n    player_2_symbols-&gt;symbol = 'x';\n    player_2_symbols-&gt;king_symbol = 'X';\n\n    initialize_player_pieces(player_1_pieces,player_1_symbols,1);\n    initialize_player_pieces(player_2_pieces,player_2_symbols,2);\n    initialize_board(checker_board,player_1_pieces,player_2_pieces);\n    print_board(checker_board);\n    return 0;\n}\n\nvoid initialize_player_pieces(struct Checker_piece* player_pieces, struct Player_symbols* player_symbols, int player_num){\n    int i;\n    for (i = 0; i &lt; 12; i++, player_pieces++ ) {\n        player_pieces-&gt;king='N';\n        player_pieces-&gt;num_moves=0;\n        player_pieces-&gt;on_board=1;\n        player_pieces-&gt;player=player_num;\n        player_pieces-&gt;symbols= player_symbols;\n    }\n}\n\nvoid initialize_board(struct Checker_piece* checker_board[boardheight][boardwidth],\n                      struct Checker_piece* player1,struct Checker_piece* player2)\n{\n    int i, j;\n    for(i = 0; i &lt; 3; i++) {\n        for(j = 0; j &lt;= 7; j = j+2) {\n            if(i == 0 || i % 2 == 0) {\n                checker_board[i][j+1] = player1;\n                checker_board[i][j] = malloc(sizeof (struct Checker_piece));\n            } else {\n                checker_board[i][j] = player1;\n                checker_board[i][j+1] = malloc(sizeof (struct Checker_piece));\n            }\n            player1++;\n        }\n    }\n    for(; i &lt; 5; i++){\n        for(j = 0; j &lt; 8; j++){\n            checker_board[i][j] = malloc(sizeof (struct Checker_piece));\n        }\n    }\n    for(i = 5; i &lt; 8; i++){\n        for(j = 0; j &lt;= 7; j = j+2){\n            if(i == 0 || i % 2 == 0){\n                checker_board[i][j+1] = player2;\n                checker_board[i][j] = malloc(sizeof (struct Checker_piece));\n            } else {\n                checker_board[i][j] = player2;\n                checker_board[i][j+1] = malloc(sizeof (struct Checker_piece));\n            }\n            player2++;\n        }\n    }\n}\nvoid print_board(struct Checker_piece* checker_board[boardheight][boardwidth]){\n    int i = 0,j = 0;\n    printf(\"\\n   1   2   3   4   5   6   7   8\\n\");\n    printf(\" |---|---|---|---|---|---|---|---|\\n\");\n\n    for(i = 0; i &lt; 8; i++) {\n        printf(\"%d|\",(i + 1));\n        for(j = 0; j &lt; 8; j++) {\n                if(checker_board[i][j]-&gt;king != '\\r')\n                    printf(\" %c |\",checker_board[i][j]-&gt;symbols-&gt;symbol);\n                else\n                    printf(\"   |\");\n        }\n        printf(\"\\n\");\n        printf(\" |---|---|---|---|---|---|---|---|\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1476898702, "post_id": 40137998, "comment_id": 67545807, "body": "<code>pthread_mutex_lock</code> is a blocking call, so if a thread (or threads) arrives here and the mutex is locked, it will block (wait) until it can acquire the mutex. This requires the thread that owns the mutex to unlock it first. There is a <code>pthread_mutex_trylock</code>(<a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutex_lock.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/00969539&zwnj;&#8203;9/functions/&hellip;</a>) that is non-blocking. Also, you must initialize your mutex before you can use it."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1476898749, "creation_date": 1476898749, "answer_id": 40138110, "question_id": 40137998, "link": "https://stackoverflow.com/questions/40137998/do-each-one-of-these-threads-wait-until-the-mutex-is-unlocked-to-perform-a-funct/40138110#40138110", "title": "Do each one of these threads wait until the mutex is unlocked to perform a function?", "body": "<p>From the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutex_lock.html\" rel=\"nofollow\">POSIX documentation</a>:</p>\n\n<blockquote>\n  <p>The mutex object referenced by mutex shall be locked by a call to\n  pthread_mutex_lock() that returns zero or [EOWNERDEAD]. <strong>If the mutex\n  is already locked by another thread, the calling thread shall block\n  until the mutex becomes available.</strong> This operation shall return with\n  the mutex object referenced by mutex in the locked state with the\n  calling thread as its owner.</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<p>So, yes the thread \"waits\" for the mutex to become available (unless an error occurs). When <code>pthread_mutex_lock()</code> returns, the calling thread has acquired the lock. But it might return with errors as well. That's why you should check the return value.</p>\n"}, {"comments": [{"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1476915319, "post_id": 40139137, "comment_id": 67554723, "body": "Thanks for fixing it. This is actually an example provided by my professor! I had no idea it wasn&#39;t good code."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 1, "last_activity_date": 1476902202, "creation_date": 1476902202, "answer_id": 40139137, "question_id": 40137998, "link": "https://stackoverflow.com/questions/40137998/do-each-one-of-these-threads-wait-until-the-mutex-is-unlocked-to-perform-a-funct/40139137#40139137", "title": "Do each one of these threads wait until the mutex is unlocked to perform a function?", "body": "<p>Yes, threads in general wait for the mutex to become available, but not yours.  I assume the reason you're asking this question is your threads are all ignoring the mutex.  The reason they are is in <code>main()</code> you forgot to call:</p>\n\n<pre><code>pthread_mutex_init(&amp;count_mutex, NULL);\n</code></pre>\n\n<p>And worse than that, you forgot to check the return value of:</p>\n\n<pre><code>pthread_mutex_lock(&amp;count_mutex);\n</code></pre>\n\n<p>which is spitting out error code 22 due to the uninitialized mutex!</p>\n\n<p>Below is my rework of your code to address the above, fix other errors (you launched one more thread than you joined, etc.), plus some style tweaks:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n\n#define SIZE 50\n\nchar sentence[2000];\nint ind = 0;\n\npthread_mutex_t count_mutex;\n\nvoid increment_ind()\n{\n    ind = ind + 1;\n}\n\nchar convertUppercase(char character)\n{\n    // Converts lowercase to uppercase\n    if (character &gt;= 'a' &amp;&amp; character &lt;= 'z')\n    {\n        character -= ' ';\n    }\n\n    return character;\n}\n\nvoid printSentence()\n{\n    // prints the converted sentence\n    printf(\"The new sentence is [%d]: %s\\n\", ind, sentence);\n}\n\nvoid *convertMessage(void *pointer)\n{\n    if (pthread_mutex_lock(&amp;count_mutex) == 0)\n    {\n        // Function that each threads initiates its execution\n        if (ind % 2 == 1)\n        {\n            sentence[ind] = convertUppercase(sentence[ind]);\n        }\n\n        printSentence();\n\n        increment_ind();\n\n        (void) pthread_mutex_unlock(&amp;count_mutex);\n    }\n    else\n    {\n        /* handle the error! */\n    }\n\n    return NULL;\n}\n\nint main()\n{\n    char *p, buffer[SIZE];\n    pthread_t threads[SIZE]; // define up to 50 threads\n\n    (void) pthread_mutex_init(&amp;count_mutex, NULL);\n\n    printf(\"Please enter a phrase (less than 50 characters): \");\n\n    if (fgets(buffer, sizeof(buffer), stdin) == NULL)\n    {\n        /* print an error message to stderr */\n        return 1;\n    }\n\n    if ((p = strchr(buffer, '\\n')) != NULL)\n    {\n        *p = '\\0';\n    }\n\n    (void) strcpy(sentence, buffer); // copy local string to global string\n\n    printf(\"The original sentence is: %s\\n\", sentence);\n\n    // create one thread for each character in the input string\n    for (int i = 0; i &lt; strlen(buffer); i++)\n    {\n        (void) pthread_create(&amp;threads[i], NULL, convertMessage, NULL);\n    }\n\n    // we wait until all threads finish execution\n    for (int i = 0; i &lt; strlen(buffer); i++)\n    {\n        (void) pthread_join(threads[i], NULL);\n    }\n\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 40139137, "answer_count": 2, "score": -1, "last_activity_date": 1476923808, "creation_date": 1476898395, "last_edit_date": 1476923808, "question_id": 40137998, "link": "https://stackoverflow.com/questions/40137998/do-each-one-of-these-threads-wait-until-the-mutex-is-unlocked-to-perform-a-funct", "title": "Do each one of these threads wait until the mutex is unlocked to perform a function?", "body": "<p>Below is a mutex lock program from my systems class. It creates a new thread for each letter in an input string and then converts every other letter to upper case. \nMy question is, do threads in c actually \"wait\" for the mutex to unlock before performing a function? Or do they just fail the operation if the method is locked?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n\n#define SIZE 50\n\nchar sentence[2000];\nint  ind = 0;\n\npthread_mutex_t count_mutex;\n\nvoid\nincrement_ind()\n{\n    ind = ind + 1;    \n}\n\nchar convertUppercase(char lower)\n{\n    //Converts lowercase un uppercase\n    if ((lower &gt; 96) &amp;&amp; (lower &lt; 123))\n        return (lower - 32);\n    else\n        return lower;\n}\n\nvoid printChar()\n{\n    //prints the converted sentence\n    printf(\"The new sentence is [%d]: \\t%c\\n\", ind, sentence[ind]);\n    increment_ind();\n}\n\nvoid *convertMessage(void *ptr)\n{\n    pthread_mutex_lock(&amp;count_mutex);   \n\n    // Function that each threads initiates its execution\n    char aux;\n\n    if (ind % 2)\n        sentence[ind] = convertUppercase(sentence[ind]);\n\n    printChar();\n    pthread_mutex_unlock(&amp;count_mutex);\n    return 0;\n}\n\nint main()\n{\n    int i;\n    char buffer[SIZE];\n    char *p;\n    pthread_t ts[SIZE]; // define up to 50 threads\n\n    printf(\"Please enter a phrase (less than 50 characters): \");\n\n    if (fgets(buffer, sizeof(buffer), stdin) != NULL_\n        if ((p = strchr(buffer, '\\n')) != NULL)\n            *p = '\\0';\n\n    strcpy(sentence, buffer);\n    printf(\"The original sentence is: \\t %s\\n\", sentence);\n\n    // create one thread for each character on the input word\n    for(i = 0; i &lt; strlen(buffer) + 1; ++i)\n        pthread_create(&amp;ts[i], NULL, convertMessage, NULL);\n\n    // we wait until all threads finish execution\n    for(i = 0; i &lt; strlen(buffer); i++)\n        pthread_join(ts[i], NULL);\n\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "linux-device-driver"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1476897459, "post_id": 40137669, "comment_id": 67545085, "body": "The <code>echo</code> command as written would also produce a newline, which your C program does not output. (It outputs a null terminator instead.) Otherwise, it seems fine, apart from omitting the part that closes the file descriptor, and omitting the error checking."}, {"owner": {"reputation": 3314, "user_id": 5714445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7ee135cc6418c933211c8cab3ee8a63?s=128&d=identicon&r=PG&f=1", "display_name": "R. S. Nikhil Krishna", "link": "https://stackoverflow.com/users/5714445/r-s-nikhil-krishna"}, "edited": false, "score": 2, "creation_date": 1476897639, "post_id": 40137669, "comment_id": 67545184, "body": "You can directly use system calling <code>system(&quot;echo 1=150 &gt; &#47;dev&#47;mydevice&quot;)</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1476898858, "post_id": 40137669, "comment_id": 67545903, "body": "assuming the device knows what to do with the char string, it would be much faster (and much more informative) to just run your code rather than asking us."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 3314, "user_id": 5714445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7ee135cc6418c933211c8cab3ee8a63?s=128&d=identicon&r=PG&f=1", "display_name": "R. S. Nikhil Krishna", "link": "https://stackoverflow.com/users/5714445/r-s-nikhil-krishna"}, "edited": false, "score": 1, "creation_date": 1476899709, "post_id": 40137669, "comment_id": 67546459, "body": "@R.S.NikhilKrishna: Directly using the file I/O facilities is much better than using <code>system</code> here. Using <code>system</code> just means you have to go through the expense of one or more process launches that take several orders of magnitude longer than the nanoseconds to low microseconds worth of work involved, and ultimately do the same work themselves."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1476906363, "post_id": 40137669, "comment_id": 67550397, "body": "Please post the solution you found as a proper answer, not inside the question itself."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 7043515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70caa0301c884f24c4d0746cedd71101?s=128&d=identicon&r=PG&f=1", "display_name": "iicud", "link": "https://stackoverflow.com/users/7043515/iicud"}, "is_accepted": false, "score": 0, "last_activity_date": 1477095130, "creation_date": 1477095130, "answer_id": 40187015, "question_id": 40137669, "link": "https://stackoverflow.com/questions/40137669/use-convert-linux-shell-command-echo-1-200-dev-mydevice-into-c-programm/40187015#40187015", "title": "Use/convert Linux shell command &quot;echo 1=200 &gt; /dev/mydevice&quot; into c programm", "body": "<p>Sorry I missed the \"Answer-Button\". I already put the answer as an edit to the question.</p>\n"}], "owner": {"reputation": 19, "user_id": 7043515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70caa0301c884f24c4d0746cedd71101?s=128&d=identicon&r=PG&f=1", "display_name": "iicud", "link": "https://stackoverflow.com/users/7043515/iicud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477095130, "creation_date": 1476897165, "last_edit_date": 1476898879, "question_id": 40137669, "link": "https://stackoverflow.com/questions/40137669/use-convert-linux-shell-command-echo-1-200-dev-mydevice-into-c-programm", "title": "Use/convert Linux shell command &quot;echo 1=200 &gt; /dev/mydevice&quot; into c programm", "body": "<p>I'd like to use following Shell command in my c programm:</p>\n\n<pre><code>echo 1=150 &gt; /dev/mydevice\n</code></pre>\n\n<p>If I'm right the syntax for echo is:</p>\n\n<pre><code>echo [option(s)] [string(s)]\n</code></pre>\n\n<p>So I came up with the following c code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt; \n#include &lt;string.h&gt;\nint main()\n{\n    int fd = open(\"/dev/mydevice\", O_RDWR);\n    write(fd, \"1=150\", 6);\n    return 0;\n}\n</code></pre>\n\n<p>Is it even possible that way? Can you spot out the error(s)?</p>\n\n<p>Is there a good option do debug a device write?</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Thanks a million!!!</p>\n\n<p>It was the Newline caracter. Now I was able to work out two solutions:</p>\n\n<p>1)</p>\n\n<pre><code> int main()\n    {\n        int fd = open(\"/dev/mydevice\", O_RDWR);\n        write(fd, \"1=150\\n\", 6);\n        return 0;\n    }\n</code></pre>\n\n<p>2)</p>\n\n<pre><code>int main()\n{\n    system(\"echo 1=150 &gt; /dev/mydevice\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1476897623, "post_id": 40137709, "comment_id": 67545174, "body": "To be more specific, the <code>printf</code> format specifiers <b>do not convert argument types</b>. They require an argument whose type matches the specifier, and convert it to a character string presentation for output."}], "tags": [], "owner": {"reputation": 212, "user_id": 6881791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b48ea546905ef3c14ffc721d54f7eec?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Imbs", "link": "https://stackoverflow.com/users/6881791/xavier-imbs"}, "is_accepted": false, "score": 2, "last_activity_date": 1476897316, "creation_date": 1476897316, "answer_id": 40137709, "question_id": 40137668, "link": "https://stackoverflow.com/questions/40137668/let-int8-t-num-1-why-does-printfu-num-overflow-to-t-max32-instead-of-t/40137709#40137709", "title": "Let int8_t num = -1. Why does printf(&quot;%u&quot;, num) overflow to T_MAX32 instead of T_MAX8?", "body": "<p>Your program behaviour is not defined.</p>\n\n<p>%u cannot be used as a format specifier for int8_t since it's a signed type and %u is for unsigned types.</p>\n\n<p>Use %d instead, and rely on the C standard guaranteed automatic promotion of num to an int type.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1476898023, "last_edit_date": 1476898023, "creation_date": 1476897723, "answer_id": 40137821, "question_id": 40137668, "link": "https://stackoverflow.com/questions/40137668/let-int8-t-num-1-why-does-printfu-num-overflow-to-t-max32-instead-of-t/40137821#40137821", "title": "Let int8_t num = -1. Why does printf(&quot;%u&quot;, num) overflow to T_MAX32 instead of T_MAX8?", "body": "<p>To print an <code>int8_t</code>, the C standard provids the format specifier macro <code>PRIi8</code> from <code>&lt;inttypes.h&gt;</code>.</p>\n\n<pre><code>printf(\"%\" PRIi8, num);\n</code></pre>\n\n<p>Although, <code>%d</code> is fine to use to print an <code>int8_t</code> due to C's <em>default argument promotions</em>, you can simply use it for <em>all</em> signed types. You can see the format specifiers for other fixed width types in <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/inttypes.h.html\" rel=\"nofollow\">POSIX documentation</a> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1476899002, "creation_date": 1476899002, "answer_id": 40138193, "question_id": 40137668, "link": "https://stackoverflow.com/questions/40137668/let-int8-t-num-1-why-does-printfu-num-overflow-to-t-max32-instead-of-t/40138193#40138193", "title": "Let int8_t num = -1. Why does printf(&quot;%u&quot;, num) overflow to T_MAX32 instead of T_MAX8?", "body": "<p>As others have mentioned, using the incorrect format specifier for <code>printf</code> is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.  The behavior you experienced cannot be depended on to be consistent between different compilers or even different builds of the same compiler.</p>\n\n<p>That being said, here's is what most likely happened.</p>\n\n<p>Any argument to <code>printf</code> after the first is of an unspecified type.  So when <code>num</code> is passed to it, it can't do an exact type check.  What ends up happening is that the value of <code>num</code> is promoted to type <code>int</code>.</p>\n\n<p>From section 6.3.1.1 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">C standard</a>:</p>\n\n<blockquote>\n  <p><strong>2</strong> The following may be used in an expression wherever an <code>int</code> or <code>unsigned int</code> may be used: </p>\n  \n  <p>\u2014  An object  or  expression  with  an  integer  type\n  (other  than <code>int</code> or <code>unsigned int</code>) whose  integer  conversion  rank  is\n  less  than  or  equal  to  the  rank  of <code>int</code> and <code>unsigned int</code>. </p>\n  \n  <p>\u2014  A bit-field of type <code>_Bool</code>, <code>int</code>, <code>signed int</code>, or <code>unsigned int</code>. </p>\n  \n  <p><strong>If  an <code>int</code>\n  can  represent  all  values  of  the  original  type  (as  restricted \n  by  the  width,  for  a bit-field),  the  value  is  converted  to  an\n  <code>int</code>;</strong> otherwise,  it  is  converted  to  an <code>unsigned int</code>. These  are \n  called  the <em>integer promotions</em>.  All  other  types  are  unchanged  by\n  the integer promotions.</p>\n</blockquote>\n\n<p>Because <code>num</code> was being used in a context where an <code>int</code> could be used, its value in the function call was promoted to <code>int</code>.</p>\n\n<p>Assuming a 32-bit <code>int</code> and 2's compliment representation of negative numbers, the orginal binary representation <code>11111111</code> is converted to <code>11111111 11111111 11111111 11111111</code>.  If printed with the <code>%u</code> format specifier, it assumes this representation is unsigned so it prints <code>4294967295</code>.</p>\n\n<p>Had you used the <code>%d</code> format specifier, which expects a signed value, it would have printed <code>-1</code>.</p>\n\n<p>To reiterate however, what you are seeing is undefined behavior.  Other machines / compilers / optimization settings might yield different results.</p>\n"}], "owner": {"reputation": 11, "user_id": 3289881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54069acaa590b39608364c579c4587fb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/3289881/duncan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1476899002, "creation_date": 1476897155, "last_edit_date": 1476897357, "question_id": 40137668, "link": "https://stackoverflow.com/questions/40137668/let-int8-t-num-1-why-does-printfu-num-overflow-to-t-max32-instead-of-t", "title": "Let int8_t num = -1. Why does printf(&quot;%u&quot;, num) overflow to T_MAX32 instead of T_MAX8?", "body": "<p><code>int8_t</code> is an 8-bit signed integer. Therefore, its value is anywhere in the range [-128...127]. </p>\n\n<pre><code>int8_t num = -1;\nprintf(\"%u\",num);\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>4294967295</p>\n</blockquote>\n\n<p>Could someone give me a hint? </p>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 6, "creation_date": 1476895052, "post_id": 40137052, "comment_id": 67543762, "body": "<i>&quot;What is the correct way to do this?&quot;</i> -- using <code>std::vector</code> and <code>std::string</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1476895057, "post_id": 40137052, "comment_id": 67543768, "body": "Are you using C or C++?  If you are using C++ <code>std::vector&lt;std::string&gt;</code> is the preferred method."}, {"owner": {"reputation": 2790, "user_id": 5137782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b8bQ8.jpg?s=128&g=1", "display_name": "8protons", "link": "https://stackoverflow.com/users/5137782/8protons"}, "edited": false, "score": 4, "creation_date": 1476895121, "post_id": 40137052, "comment_id": 67543805, "body": "The first step in &quot;the correct way to do this&quot; is to start by specifying which language you are using; C is not the same language as C++. Also, please include the libraries/headers that you&#39;re using."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1476895326, "post_id": 40137052, "comment_id": 67543921, "body": "<code>char**</code> is not the same as <code>char[][]</code>, and even then <code>sampleFunction(int **max**, char list[][**max**]){</code> Array sizes must be constant and known at compilation time in order for the compiler to get the indexing arithmetic right. there is no way <code>max</code> can meet these requirements because you can always call the function with a different value."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1476895570, "post_id": 40137052, "comment_id": 67544070, "body": "@user4581301 variable size arrays <i>are</i> supported in C (from C99)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1476895710, "post_id": 40137052, "comment_id": 67544150, "body": "I stand corrected. The use of <code>malloc</code> pushes this question further in the direction of C than C++."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1476896074, "creation_date": 1476896074, "answer_id": 40137363, "question_id": 40137052, "link": "https://stackoverflow.com/questions/40137052/passing-a-dynamically-allocated-2d-character-array-to-a-function/40137363#40137363", "title": "Passing a dynamically allocated 2d character array to a function", "body": "<p>Arrays are not pointers, and pointers are not arrays.</p>\n\n<p>The first parameter type says that <code>list</code> is a pointer to an array of <code>char</code>.<br>\n<code>cArray</code> isn't; it's a pointer to <code>char*</code>. </p>\n\n<p>The second says that <code>list</code> is a pointer to an array of <code>char*</code>, which is even further from <code>cArray</code>.</p>\n\n<p>You need to pass the correct type, <code>char**</code>, and both dimensions:</p>\n\n<pre><code>void sampleFunction(int max_rows, int max_columns, char** list){\n    for (int i = 0; i &lt; max_rows; i++)\n        for (int j = 0; j &lt; max_columns; j++)\n            list[i][j] = 0;\n}\n\nsampleFunction(10, 25, cArray);\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3283146, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8f5c0378b13506380f29d14013f93015?s=128&d=identicon&r=PG&f=1", "display_name": "user3283146", "link": "https://stackoverflow.com/users/3283146/user3283146"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 40137363, "answer_count": 1, "score": -5, "last_activity_date": 1476896074, "creation_date": 1476894991, "question_id": 40137052, "link": "https://stackoverflow.com/questions/40137052/passing-a-dynamically-allocated-2d-character-array-to-a-function", "title": "Passing a dynamically allocated 2d character array to a function", "body": "<p>Here is how the array is allocated.</p>\n\n<pre><code>char** cArray =  malloc(10 * sizeof(char *)); \n\nint i;\nfor(i =0; i&lt; 10; i++) { \n  cArray[i] = malloc(25 * sizeof(char));\n}\n</code></pre>\n\n<p>How to pass into function with this signature:</p>\n\n<pre><code>sampleFunction(int max, char list[][max]){\n  //Do something\n};\n</code></pre>\n\n<p>Tried:</p>\n\n<pre><code>sampleFunction(25, cArray);\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>expected 'char (*)[(sizetype)(max)]' but argument is of type 'char **'\n</code></pre>\n\n<p>I have also tried: </p>\n\n<pre><code>sampleFunction(int max, char* list[][max]){\n  //Do something\n};\n\nsampleFunction(25, &amp;cArray);\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>expected 'char * (*)[(sizetype)(max)]' but argument is of type 'char ***'\n</code></pre>\n\n<p>I have also tried: </p>\n\n<pre><code>sampleFunction(int max, char* list[][max]){\n  //Do something\n};\n\nsampleFunction(25, cArray);\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>expected 'char * (*)[(sizetype)(max)]' but argument is of type 'char **'\n</code></pre>\n\n<p>What is the correct way to do this?</p>\n"}, {"tags": ["c", "mpfr"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1476894901, "post_id": 40136973, "comment_id": 67543688, "body": "<code>my_fct</code> is different than <code>myfct</code>."}, {"owner": {"reputation": 79, "user_id": 4257651, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34a5bf4c4bf4e66774bff77d23520c3b?s=128&d=identicon&r=PG&f=1", "display_name": "wolfgunner", "link": "https://stackoverflow.com/users/4257651/wolfgunner"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1476900618, "post_id": 40136973, "comment_id": 67546995, "body": "it&#39;s just a typing error"}], "answers": [{"tags": [], "owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "is_accepted": false, "score": 0, "last_activity_date": 1476896052, "creation_date": 1476896052, "answer_id": 40137359, "question_id": 40136973, "link": "https://stackoverflow.com/questions/40136973/error-declared-as-function-returning-an-array-in-c-mpfr-libary/40137359#40137359", "title": "error : declared as function returning an array in c (mpfr libary)", "body": "<p><code>mpfr_t</code>, just like any other array type, <a href=\"http://c0x.coding-guidelines.com/6.7.5.3.html\" rel=\"nofollow\">cannot be used</a> as a return value type; see #1592.</p>\n\n<p>To return a <code>mpfr_t</code> value, please follow the convention that all MPFR functions use, and return it through a function parameter.</p>\n\n<p>There is an another error in your code: <code>mpfr_get()</code> should return <code>int</code> (as per the convention; haven`t actually found such function in MPFR docs), not a <code>mpfr_t</code>, see above.</p>\n"}, {"tags": [], "owner": {"reputation": 2300, "user_id": 3782797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uA8JS.jpg?s=128&g=1", "display_name": "vinc17", "link": "https://stackoverflow.com/users/3782797/vinc17"}, "is_accepted": true, "score": 1, "last_activity_date": 1476923784, "creation_date": 1476923784, "answer_id": 40143670, "question_id": 40136973, "link": "https://stackoverflow.com/questions/40136973/error-declared-as-function-returning-an-array-in-c-mpfr-libary/40143670#40143670", "title": "error : declared as function returning an array in c (mpfr libary)", "body": "<p>Like GMP types, <code>mpfr_t</code> is an array of size 1 (the element is a structure, but you don't really need to know that). If you decide to write a function that returns a MPFR number, you have 2 possibilities (among others):</p>\n\n<ol>\n<li>The caller allocates and inits the <code>mpfr_t</code> with some given precision. In this case, the <code>mpfr_t</code> should be put as an argument of the function, and this is a pointer to this array that is actually passed (according to the rules of the C language). Basically, this can be seen as passing the variable <a href=\"https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_reference\" rel=\"nofollow\">by reference</a>. MPFR functions use this method.</li>\n<li>The caller doesn't allocate anything. The prototype of the function should be such that the function returns a pointer <code>mpfr_ptr</code> to the structure. So, this function will allocate the <code>mpfr_t</code> typically with <code>malloc</code> (so that the memory is not freed when the function returns), then init the structure with <code>mpfr_init2</code>. The precision may be chosen by this function or passed as an argument.</li>\n</ol>\n\n<p>Note: your program have various typos, but I suppose that this is not the point of this question.</p>\n"}], "owner": {"reputation": 79, "user_id": 4257651, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34a5bf4c4bf4e66774bff77d23520c3b?s=128&d=identicon&r=PG&f=1", "display_name": "wolfgunner", "link": "https://stackoverflow.com/users/4257651/wolfgunner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "accepted_answer_id": 40143670, "answer_count": 2, "score": 2, "last_activity_date": 1476923784, "creation_date": 1476894685, "question_id": 40136973, "link": "https://stackoverflow.com/questions/40136973/error-declared-as-function-returning-an-array-in-c-mpfr-libary", "title": "error : declared as function returning an array in c (mpfr libary)", "body": "<p>I'm beginner with mpfr, I wrote this program to make a specific calculation and get it like you see,but I don't know why this error appear, this is the most important my code:</p>\n\n<pre><code>mpfr_t  myfct(int n)\n\n{\n   /......./\n        return mpfr_get(result,MPFR_RNDN);\n\n}\n\nint main(void)\n{\n\n    mpfr_t U;\n    mpfr_set_default_prec (53); \n\n    mpfr_set_emin (-1073);\n    mpfr_set_emax (1024);\n\n    n=10;\n    mpfr_init2(U,24);\n    mpfr_get(U,my_fct(n),MPFR_RNDN);\n    mpfr_printf (\"result: %.40Rg\\n\", U);\n\n    mpfr_clear(U);\n\n    return 0;\n}\n</code></pre>\n\n<p>What's the matter ??</p>\n"}, {"tags": ["c", "ftp", "wininet"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476894775, "post_id": 40136955, "comment_id": 67543630, "body": "What happens if you download the file using a regular FTP client? Does it download the updated version or the old (cached) version?"}, {"owner": {"reputation": 76, "user_id": 6894826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ad481929ebd2d3502d40f40cfbbfa8?s=128&d=identicon&r=PG&f=1", "display_name": "Rafih_m", "link": "https://stackoverflow.com/users/6894826/rafih-m"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476895121, "post_id": 40136955, "comment_id": 67543806, "body": "if i use ftp client it downloads the updated file. im testing this program by creating local ftp server(using filezilla)."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476895302, "post_id": 40136955, "comment_id": 67543911, "body": "It looks like you need either the <code>INTERNET_FLAG_RELOAD</code> flag or the <code>INTERNET_FLAG_RESYNCHRONIZE</code> flag. Just OR it with your <code>FTP_TRANSFER_TYPE_BINARY</code> flag in your call to <code>FtpGetFile</code>."}, {"owner": {"reputation": 76, "user_id": 6894826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ad481929ebd2d3502d40f40cfbbfa8?s=128&d=identicon&r=PG&f=1", "display_name": "Rafih_m", "link": "https://stackoverflow.com/users/6894826/rafih-m"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476895801, "post_id": 40136955, "comment_id": 67544194, "body": "tried all above solutions but still the same problem."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476896167, "post_id": 40136955, "comment_id": 67544393, "body": "It looks like you have the <i>fFailIfExists</i> and <i>dwFlagsAndAttributes</i> parameters of <code>FtpGetFile</code> in the wrong order."}, {"owner": {"reputation": 76, "user_id": 6894826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ad481929ebd2d3502d40f40cfbbfa8?s=128&d=identicon&r=PG&f=1", "display_name": "Rafih_m", "link": "https://stackoverflow.com/users/6894826/rafih-m"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476897015, "post_id": 40136955, "comment_id": 67544844, "body": "sorry, i didnt notce the mistake, but the problem still persists."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476897186, "post_id": 40136955, "comment_id": 67544935, "body": "Sorry, I&#39;m out of suggestions."}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1476902519, "post_id": 40136955, "comment_id": 67548170, "body": "Show us FileZilla Server log for download using your code and using the regular FTP client."}, {"owner": {"reputation": 76, "user_id": 6894826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ad481929ebd2d3502d40f40cfbbfa8?s=128&d=identicon&r=PG&f=1", "display_name": "Rafih_m", "link": "https://stackoverflow.com/users/6894826/rafih-m"}, "edited": false, "score": 0, "creation_date": 1476982835, "post_id": 40136955, "comment_id": 67589552, "body": "i have updated the question,"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1477032637, "post_id": 40136955, "comment_id": 67608147, "body": "Log files, not screenshots of log, please. Also the logs seems strange. Why are there two connections in the &quot;my program&quot; log? Are you sure both belong to the connection by your program?"}], "owner": {"reputation": 76, "user_id": 6894826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ad481929ebd2d3502d40f40cfbbfa8?s=128&d=identicon&r=PG&f=1", "display_name": "Rafih_m", "link": "https://stackoverflow.com/users/6894826/rafih-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1476982778, "creation_date": 1476894618, "last_edit_date": 1476982778, "question_id": 40136955, "link": "https://stackoverflow.com/questions/40136955/ftpgetfile-not-downloading-updated-file", "title": "FtpGetFile not downloading updated file", "body": "<p>I have written below code to download the file from FTP server in a specified,\nthe problem is whenever i modify the file in the FTP server the programming is not downloading the modified the file, its still downloading the old file,\ni think its because of caching, i have googled but did not get the answer \ni using gcc compiler in windows with wininet.</p>\n\n<pre><code>using namespace std;\nchar USER_NAME[100]=\"test\",\n    PASSWORD[100]=\"test\",\n    HOST_NAME[100]=\"localhost\";\n\nint main()\n{\n\n    while(1){\n            int t=0;\n            int z=0;\n         HINTERNET hint,hftp;\n        z=DeleteFile(\"aaa.txt\");\n        cout&lt;&lt;\"file status=\"&lt;&lt;z&lt;&lt;endl;\n        Sleep(5000);\n        hint = InternetOpen(\"FTP\",INTERNET_OPEN_TYPE_PRECONFIG,0,0,INTERNET_FLAG_ASYNC);\n        hftp = InternetConnect(hint,\"localhost\",INTERNET_DEFAULT_FTP_PORT,USER_NAME,PASSWORD,INTERNET_SERVICE_FTP,INTERNET_FLAG_PASSIVE,0);\n        t=FtpGetFile(hftp,\"/config/config.txt\",\"aaa.txt\",FALSE,FILE_ATTRIBUTE_NORMAL,FTP_TRANSFER_TYPE_BINARY,0);\n        printf(\"//t value=:%d\\n\",t);\n        InternetCloseHandle(hftp);\n        InternetCloseHandle(hint);\n        Sleep(20000);\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cUQmZ.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/cUQmZ.png\" alt=\"here is the screenshot of server log for my program\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/d0yN6.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/d0yN6.png\" alt=\"screenshot of server log for filezilla ftp client.\"></a></p>\n\n<p>i downloaded file thrice in both the cases.</p>\n"}, {"tags": ["c", "arrays", "file-io"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1476894588, "post_id": 40136902, "comment_id": 67543528, "body": "How do you call the function? Can you perhaps try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476895093, "post_id": 40136902, "comment_id": 67543792, "body": "Triple <code>***</code> is not a really good idea especially if you are a beginner."}, {"owner": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 0, "creation_date": 1476895925, "post_id": 40136902, "comment_id": 67544254, "body": "I understand that, I&#39;d have preferred the array, but the function signature has been handed to me."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476897778, "post_id": 40136902, "comment_id": 67545263, "body": "BTW: the <code>arr = malloc(x * sizeof(int));</code> in your <code>for</code> loop is bogous. You are allocating <code>x</code> memory portions and you all store them in <code>arr</code> thet&#39;s pretty pointless."}, {"owner": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476903185, "post_id": 40136902, "comment_id": 67548556, "body": "@MichaelWalz: Isn&#39;t it that the first malloc allocates <code>x</code> bytes of data and then at each index of <code>arr</code> we allocate <code>x</code> bytes of int. Then we can access them using the usual a[i][j] notation?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476924306, "post_id": 40136902, "comment_id": 67557306, "body": "Inside the <code>i</code> loops, <code>arr</code> should be <code>arr[i]</code>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1476952804, "post_id": 40136902, "comment_id": 67568024, "body": "@AnkitKulshrestha-- I cleaned up the code in my answer a bit and added some code to free allocated memory."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 0, "creation_date": 1476918610, "post_id": 40142193, "comment_id": 67555823, "body": "It&#39;s such a well defined answer. However, I didn&#39;t understand what you said when you found that I was assigning the same value to one index x times. I&#39;m a little rusty in my pointer skills in C, so please bear with me. Otherwise, I completely got what you said."}, {"owner": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 0, "creation_date": 1476919110, "post_id": 40142193, "comment_id": 67555967, "body": "Also, I&#39;m getting a segmentation fault. I know it&#39;s not because of your code, because I was getting segfaults with fread earlier as well."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 1, "creation_date": 1476919189, "post_id": 40142193, "comment_id": 67555990, "body": "I added a reference to the lines in question and a few comments about the unfortunate allocations :)"}, {"owner": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 0, "creation_date": 1476920246, "post_id": 40142193, "comment_id": 67556294, "body": "Ah I get it. Do you have any idea why fread might be segfaulting?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 1, "creation_date": 1476920523, "post_id": 40142193, "comment_id": 67556381, "body": "I added an edit to my answer about the test file I created. Look at it, and see what you think. It might be that your binary file is structured differently than mine. I assumed a sequence of 26 <code>int</code>s for a 5X5 matrix. You might try commenting out the call to <code>free2darray()</code> to see if that silences the segfault."}, {"owner": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 0, "creation_date": 1476928696, "post_id": 40142193, "comment_id": 67558231, "body": "Ach! I got it. So what  I was doing was reading a value into a pointer address. Your edit makes it correct. Thanks for going the extra mile with the test though! Much appreciated."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "edited": false, "score": 0, "creation_date": 1476928785, "post_id": 40142193, "comment_id": 67558256, "body": "Glad to hear that things worked out! Consider accepting my answer if it was helpful for you :)"}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 2, "last_activity_date": 1476952485, "last_edit_date": 1476952485, "creation_date": 1476914311, "answer_id": 40142193, "question_id": 40136902, "link": "https://stackoverflow.com/questions/40136902/how-to-use-a-2d-array-as-an-output-parameter-in-a-function-in-c/40142193#40142193", "title": "How to use a 2D array as an output parameter in a function in C", "body": "<p>You were close. If you read my answer a few minutes ago, you might have noticed that my solution returned a pointer to the dynamic array. Then I saw in the comments to your question that the function prototype was a given, so I have revised my answer.</p>\n\n<p>All you need to do in <code>main()</code> is declare a pointer to <code>int</code> to store the size of the matrix, and a pointer to a pointer to <code>int</code>, which will be passed to the function <code>read_graph()</code>. Although it wasn't strictly necessary, as a matter of good style I went ahead and initialized this pointer (<code>arr</code>) to NULL. I included a few lines here to display the contents of the new array.</p>\n\n<p>You need to free the allocated memory before exiting. This was one of the main problems that you had in the original code: you were freeing the memory at the end of the call to <code>read_graph()</code>. You need to wait until you don't need the array contents any more before you free these allocations.</p>\n\n<p>The other problem that I found was that when you allocated memory for the individual rows of the dynamic array, you forgot to index <code>arr</code>, so you <code>malloc</code>ed memory and assigned the address to the same pointer <code>x</code> times. This is your loop that repeatedly reassigns memory to <code>arr</code> (and is a memory leak because the references to previous allocations are lost):</p>\n\n<pre><code>for (i = 0; i &lt; x; ++i) {\n    arr = malloc(x*sizeof(int));\n}\n</code></pre>\n\n<p>The pointer <code>A</code> that is passed into the function is used to receive the results of calls to <code>malloc()</code>, so that the allocated memory is visible from the calling function. This changes some of your assignments a bit, since you had originally declared a pointer inside of <code>read_graph()</code> for this purpose. I also changed the loop that reads values into the array so that it reads in one value at a time-- it looks like you were trying to read in <code>x</code> at a time.</p>\n\n<p>You don't really need the <code>fseek()</code> since the file pointer is already in position, so I removed that line. I also added a check to make sure that the data file closes properly. I made up a test data file, and everything seems to work. I also changed your <code>size_t</code> variables to <code>int</code>s. I did this because there were comparisons of <code>int</code> values with <code>size_t</code> values in the loops that were generating compiler warnings. The code still works fine, but no sense ignoring warnings. I would have changed everything to <code>size_t</code>, but you read the size of the matrix from your file, and that is an <code>int</code> in your code. If you can change your file format a bit, the size of the matrix could be stored as a <code>size_t</code> value. Here is the revised code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid read_graph(char *filename, int *n, int ***A);\nvoid free2darray(int ***A, int n);\n\nint main(void)\n{\n    int x;\n    int **arr = NULL;\n    int i, j;\n\n    read_graph(\"test.dat\", &amp;x, &amp;arr); \n\n    for (i = 0; i &lt; x; i++) {\n        for (j = 0; j &lt; x; j++)\n            printf(\"%d \", arr[i][j]);\n        putchar('\\n');\n    }\n\n    /* Free allocated memory */\n    free2darray(&amp;arr, x); \n\n    return 0;\n}\n\nvoid read_graph(char *filename, int *n, int ***A)\n{\n    FILE *fin;\n    int i;\n    int x;\n\n    fin  = fopen(filename, \"rb\");\n    if (fin == 0) {\n        printf(\"Error opening file\\n\");\n        exit(1);\n    } else {\n        fread(&amp;x, sizeof(int), 1, fin);\n        printf(\"Read size of matrix %d\\n\",x);\n        *n = x;\n\n        *A = malloc(x*sizeof(int *));\n        if (*A == NULL) {\n            printf(\"Not enough space.\\n\");\n        }\n        for (i = 0; i &lt; x; ++i) {\n            (*A)[i] = malloc(x*sizeof(int));\n        }\n        for (i = 0; i &lt; x; ++i)\n            for (int j = 0; j &lt; x; ++j)\n                fread(&amp;(*A)[i][j], sizeof(int), 1, fin);\n    }\n\n    if (fclose(fin) != 0)\n        fprintf(stderr, \"Unable to close file\\n\");\n}\n\nvoid free2darray(int ***A, int n)\n{\n    for (int i = 0; i &lt; n; i++)\n        free((*A)[i]);\n    free(*A);\n}\n</code></pre>\n\n<h1>Edit</h1>\n\n<p>I had to create a test file, so I added some code for this purpose that is not shown above. It reads a text file and creates a binary file that the program can use. The resulting binary file is just a sequence of <code>int</code>s. I just put the code at the beginning of <code>main()</code>, and created a file called \"testdat.txt\" in the same directory as \"a.out\". My text file contained a 5 on the first line, and then 25 integers, one on every line:</p>\n\n<pre><code>5\n1\n2\n3\n4\n5\n....\n</code></pre>\n\n<p>And here is the code:</p>\n\n<pre><code>/* Code to create a datafile from a text file */\n\nFILE *fpin, *fpout;\nchar nstr[100];\nint num_out;\n\nfpin = fopen(\"testdat.txt\", \"r\");\nfpout = fopen(\"test.dat\", \"wb\");\nwhile (fgets(nstr, 100, fpin) != NULL) {\n    num_out = atoi(nstr);\n    fwrite(&amp;num_out, sizeof(int), 1, fpout);\n}\nfclose(fpin);\nfclose(fpout);\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4972681, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-OL1sascP34o/AAAAAAAAAAI/AAAAAAAABr0/y2YTD7xFgpU/photo.jpg?sz=128", "display_name": "Ankit Kulshrestha", "link": "https://stackoverflow.com/users/4972681/ankit-kulshrestha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 40142193, "answer_count": 1, "score": 0, "last_activity_date": 1476952485, "creation_date": 1476894423, "last_edit_date": 1476895888, "question_id": 40136902, "link": "https://stackoverflow.com/questions/40136902/how-to-use-a-2d-array-as-an-output-parameter-in-a-function-in-c", "title": "How to use a 2D array as an output parameter in a function in C", "body": "<p>I'm writing a program to compute the shortest path between two points on a graph using Floyd's algorithm. I'm required to write to a binary file and then read from it and print the graph. It is here that my problem lies, since my function signature has to be of the form: <code>void read_graph(char *filename, int *n, int ***A)</code>. </p>\n\n<p>I've written the following:</p>\n\n<pre><code>void read_graph(char *filename, int *n, int ***A)\n{\n    FILE *fin;\n    size_t i;\n    int x;\n    int **arr;\n\n    fin  = fopen(filename, \"rb\");\n    if (fin == 0) {\n        printf(\"Error opening file\\n\");\n        exit(1);\n    } else {\n        fread(&amp;x, sizeof(int), 1, fin);\n        printf(\"Read size of matrix %d\\n\",x);\n        *n = x;\n        fseek(fin, sizeof(int)+1, SEEK_SET);\n        arr = malloc(x*sizeof(int *));\n        if (arr == NULL) {\n            printf(\"Not enough space.\\n\");\n        }\n        for (i = 0; i &lt; x; ++i) {\n            arr = malloc(x*sizeof(int));\n        }\n        for (i = 0;  i &lt; x; ++i) {\n            fread(arr,sizeof(int), x, fin);\n        }\n\n        //  ***A = **arr;    \n    }\n    fclose(fin);\n    free2darray(*A, x);\n}\n</code></pre>\n\n<p>The <code>free2darray</code> is a utility function to free the memory. My problem is that this function works if I allocate a 2d array before calling this. However, it is required that this function returns a 2d array to <code>***A</code> and not the other way round. If you could tell me what I'm doing wrong, it would be super helpful. Also criticism on the code style are welcome.</p>\n\n<p>EDIT: Here's how I'm calling the function currently:</p>\n\n<pre><code>int **arr;\n   int x;\n   size_t i;\n   arr = malloc(5*sizeof(int*));\n   if (arr == NULL) {\n     printf(\"Cannot allocated memory for array\\n\");\n     exit(1);\n   }\n   for (i = 0; i &lt; 5; i++) {\n     arr[i] = malloc(5*sizeof(int));\n   }\n   read_graph(\"test.dat\", &amp;x, &amp;arr); \n</code></pre>\n\n<p>5 is just a test size. The <code>test.dat</code> was previously written by populating a 5*5 array with random values. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "pointers", "codeblocks"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476894543, "post_id": 40136872, "comment_id": 67543499, "body": "<code>sizeof dummy_symbol</code> and <code>sizeof dummy</code> is not what you think it is."}, {"owner": {"reputation": 102, "user_id": 6654303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sgEmOtp4RZw/AAAAAAAAAAI/AAAAAAAAAM8/rMSGxd7goJw/photo.jpg?sz=128", "display_name": "Henrique Mois&#233;s", "link": "https://stackoverflow.com/users/6654303/henrique-mois%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1476894598, "post_id": 40136872, "comment_id": 67543536, "body": "I would say that it has nothing to do with Codeblocks. My guess would be an index out of bound, i.e., a position that surpasses the size of the array."}], "answers": [{"comments": [{"owner": {"reputation": 833, "user_id": 4405062, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6497cb6d90ad370a976cb7ae4762bfd?s=128&d=identicon&r=PG&f=1", "display_name": "The Cloud Guy", "link": "https://stackoverflow.com/users/4405062/the-cloud-guy"}, "edited": false, "score": 0, "creation_date": 1476895170, "post_id": 40136976, "comment_id": 67543839, "body": "Could you suggest how to declare array of struct for checker_board?"}, {"owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "reply_to_user": {"reputation": 833, "user_id": 4405062, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6497cb6d90ad370a976cb7ae4762bfd?s=128&d=identicon&r=PG&f=1", "display_name": "The Cloud Guy", "link": "https://stackoverflow.com/users/4405062/the-cloud-guy"}, "edited": false, "score": 0, "creation_date": 1476899449, "post_id": 40136976, "comment_id": 67546299, "body": "To declare an array of <code>struct</code>, just take the <code>*</code> out."}], "tags": [], "owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "is_accepted": true, "score": 2, "last_activity_date": 1476894692, "creation_date": 1476894692, "answer_id": 40136976, "question_id": 40136872, "link": "https://stackoverflow.com/questions/40136872/pointers-based-code-giving-segmentation-fault-in-codeblocks/40136976#40136976", "title": "Pointers based code giving Segmentation fault in CodeBlocks", "body": "<p>Your <code>check_board</code> is declared as an array of <em>pointers</em> when it <em>should</em> be an array of <code>struct</code>. Likewise for <code>dummy</code> and <code>dummy_symbol</code> (which you don't even need, by the way).</p>\n\n<p>If you want to <code>malloc</code> a symbol, then <code>malloc</code> a symbol, not a pointer to a symbol.  But you don't even need to <code>malloc</code> those: just declare stack-based variables:</p>\n\n<pre><code>struct Player_symbols player_1_symbols; // no pointer, no malloc needed\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 7006980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb1942fa35710f42149c523927a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi", "link": "https://stackoverflow.com/users/7006980/ayushi"}, "is_accepted": false, "score": 1, "last_activity_date": 1476898054, "creation_date": 1476898054, "answer_id": 40137901, "question_id": 40136872, "link": "https://stackoverflow.com/questions/40136872/pointers-based-code-giving-segmentation-fault-in-codeblocks/40137901#40137901", "title": "Pointers based code giving Segmentation fault in CodeBlocks", "body": "<p>I suggest you this slight change in your code.\nAs you are using structure then allocate memory dynamically to the structure instead of pointer to the variable. </p>\n\n<pre><code>struct Checker_piece* checker_board[boardheight][boardwidth];\n\n\n\n struct Checker_piece* dummy;\n    struct Player_symbols* dummy_symbol;\n\n    player_1_pieces = (Checker_piece *)malloc(12*sizeof(Checker_piece));\n    player_2_pieces = (Checker_piece *)malloc(12*sizeof(Checker_piece));\n    struct Player_symbols *player_1_symbols,*player_2_symbols;\n\n    player_1_symbols = (Player_symbols *)malloc(sizeof(Player_symbols));\n    player_2_symbols = (Player_symbols *)malloc(sizeof(Player_symbols));\n</code></pre>\n\n<p>PS-You don't need to type cast malloc if you are programmimg in C.</p>\n"}], "owner": {"reputation": 833, "user_id": 4405062, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6497cb6d90ad370a976cb7ae4762bfd?s=128&d=identicon&r=PG&f=1", "display_name": "The Cloud Guy", "link": "https://stackoverflow.com/users/4405062/the-cloud-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 40136976, "answer_count": 2, "score": 1, "last_activity_date": 1476898054, "creation_date": 1476894297, "question_id": 40136872, "link": "https://stackoverflow.com/questions/40136872/pointers-based-code-giving-segmentation-fault-in-codeblocks", "title": "Pointers based code giving Segmentation fault in CodeBlocks", "body": "<p>This is my code. I keep getting a segmentation fault at the end of code. All the things running fine but the segmentation fault comes at the end.</p>\n\n<p>I am trying to prepare checkers game and the first step is to initialize each piece with a symbol. This code tries to do the same.</p>\n\n<p>CodeBlocks version : 13.12\nWindows 7</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define boardheight 8\n#define boardwidth 8\nstruct Player_symbols{\n    char symbol;\n    char king_symbol;\n};\n\nstruct Checker_piece{\n    char king;\n    int on_board;\n    int num_moves;\n    int player;\n    struct Player_symbols* symbols;\n};\n\nint pieces_count[2] = {12,12};\nstruct Checker_piece* player_1_pieces;\nstruct Checker_piece* player_2_pieces;\n\nvoid initialize_player_pieces(struct Checker_piece* player_pieces, struct Player_symbols* player_symbols, int player_num);\nvoid initialize_board(struct Checker_piece* checker_board[boardheight][boardwidth],struct Checker_piece* player1,struct Checker_piece* player2);\nvoid print_board(struct Checker_piece* checker_board[boardheight][boardwidth]);\nint move_piece(struct Checker_piece* checker_board[boardheight][boardwidth], int x,int y,int player);\nvoid continue_jumping(struct Checker_piece* checker_board[boardheight][boardwidth],int* y,int* x,int player);\nint generate_destination(int x, int *dest_x, int *dest_y, int *dest_y_jump,int dest_y2,int dest_y2_jump,int move_flags,int player);\n\nint main()\n{\n\n    struct Checker_piece* checker_board[boardheight][boardwidth];\n    struct Checker_piece* dummy;\n    struct Player_symbols* dummy_symbol;\n    //declare and initialize the Checker_piece structures by allocating memory dynamically using a dummy structure to determine its size\n    player_1_pieces = malloc(12*sizeof dummy);\n    player_2_pieces = malloc(12*sizeof dummy);\n    struct Player_symbols *player_1_symbols,*player_2_symbols;\n\n    player_1_symbols = malloc(sizeof dummy_symbol);\n    player_2_symbols = malloc(sizeof dummy_symbol);\n\n    //initialize the player symbols\n    player_1_symbols-&gt;symbol = 'o';\n    player_1_symbols-&gt;king_symbol = 'O';\n    player_2_symbols-&gt;symbol = 'x';\n    player_2_symbols-&gt;king_symbol = 'X';\n\n    initialize_player_pieces(player_1_pieces,player_1_symbols,1);\n    initialize_player_pieces(player_2_pieces,player_2_symbols,2);\n\n    printf(\"Done\");\n    return 0;\n}\n\nvoid initialize_player_pieces(struct Checker_piece* player_pieces, struct Player_symbols* player_symbols, int player_num){\n    int i;\n    for (i=0; i&lt;12; i++, player_pieces++ ) {\n        player_pieces-&gt;king='N';\n        player_pieces-&gt;num_moves=0;\n        player_pieces-&gt;on_board=1;\n        player_pieces-&gt;player=player_num;\n        player_pieces-&gt;symbols= player_symbols;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476894068, "post_id": 40136762, "comment_id": 67543224, "body": "Please format/indent your code first.. Just like in the samples in your C textbook. And please <a href=\"http://stackoverflow.com/help/how-to-ask.\">read this</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476894147, "post_id": 40136762, "comment_id": 67543277, "body": "Well, what&#39;s wrong with it, we don&#39;t know, please edit your question and state clearly 1. yout input, 2. the actual output, 3. the expected output."}, {"owner": {"reputation": 102, "user_id": 6654303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sgEmOtp4RZw/AAAAAAAAAAI/AAAAAAAAAM8/rMSGxd7goJw/photo.jpg?sz=128", "display_name": "Henrique Mois&#233;s", "link": "https://stackoverflow.com/users/6654303/henrique-mois%c3%a9s"}, "edited": false, "score": 1, "creation_date": 1476894303, "post_id": 40136762, "comment_id": 67543375, "body": "Does the program returns a compilation error or an incorrect result? You should be more specific when you asking &quot;Whats wrong with this?&quot;."}, {"owner": {"reputation": 7, "user_id": 7042907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dde343d3927343062cc18ddfb5d79b?s=128&d=identicon&r=PG&f=1", "display_name": "John95", "link": "https://stackoverflow.com/users/7042907/john95"}, "reply_to_user": {"reputation": 102, "user_id": 6654303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sgEmOtp4RZw/AAAAAAAAAAI/AAAAAAAAAM8/rMSGxd7goJw/photo.jpg?sz=128", "display_name": "Henrique Mois&#233;s", "link": "https://stackoverflow.com/users/6654303/henrique-mois%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1476894553, "post_id": 40136762, "comment_id": 67543505, "body": "@HenriqueMois&#233;s I can&#39;t get the result! Sorry, I&#39;m new to stackoverflow"}, {"owner": {"reputation": 102, "user_id": 6654303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sgEmOtp4RZw/AAAAAAAAAAI/AAAAAAAAAM8/rMSGxd7goJw/photo.jpg?sz=128", "display_name": "Henrique Mois&#233;s", "link": "https://stackoverflow.com/users/6654303/henrique-mois%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1476894761, "post_id": 40136762, "comment_id": 67543619, "body": "Ok, no prob :)  So I&#39;m assuming you have a compilation error. Did you followed the link provided by @Jack Miller. I think he answered correctly."}, {"owner": {"reputation": 7, "user_id": 7042907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dde343d3927343062cc18ddfb5d79b?s=128&d=identicon&r=PG&f=1", "display_name": "John95", "link": "https://stackoverflow.com/users/7042907/john95"}, "edited": false, "score": 0, "creation_date": 1476894909, "post_id": 40136762, "comment_id": 67543691, "body": "nope I didnt get that! what is return type?"}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476894169, "post_id": 40136807, "comment_id": 67543291, "body": "That&#39;s a comment, not answer."}, {"owner": {"reputation": 7, "user_id": 7042907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dde343d3927343062cc18ddfb5d79b?s=128&d=identicon&r=PG&f=1", "display_name": "John95", "link": "https://stackoverflow.com/users/7042907/john95"}, "edited": false, "score": 0, "creation_date": 1476894295, "post_id": 40136807, "comment_id": 67543371, "body": "Sorry, I didnt get that! what is return type?"}, {"owner": {"reputation": 315, "user_id": 4559600, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e77acd25b24679fbfeb6b4d4302fa422?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Miller", "link": "https://stackoverflow.com/users/4559600/jack-miller"}, "edited": false, "score": 0, "creation_date": 1476895140, "post_id": 40136807, "comment_id": 67543821, "body": "Return Type \u2212 A function may return a value. The return_type is the data type of the value the function returns. Some functions perform the desired operations without returning a value. In this case, the return_type is the keyword void."}, {"owner": {"reputation": 315, "user_id": 4559600, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e77acd25b24679fbfeb6b4d4302fa422?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Miller", "link": "https://stackoverflow.com/users/4559600/jack-miller"}, "edited": false, "score": 1, "creation_date": 1476895156, "post_id": 40136807, "comment_id": 67543825, "body": "Read the given link to learn about functions and return types"}], "tags": [], "owner": {"reputation": 315, "user_id": 4559600, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e77acd25b24679fbfeb6b4d4302fa422?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Miller", "link": "https://stackoverflow.com/users/4559600/jack-miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1476894126, "creation_date": 1476894126, "answer_id": 40136807, "question_id": 40136762, "link": "https://stackoverflow.com/questions/40136762/probl-in-using-functions-in-c/40136807#40136807", "title": "probl in using functions in c", "body": "<p>Functions in c require a return type:</p>\n\n<pre><code>return_type function_name( parameter list ) {\n  body of the function\n}\n</code></pre>\n\n<p>if you are outputting an int do:</p>\n\n<pre><code>    int function( int a ) {\n    return a;\n}\n</code></pre>\n\n<p>see : <a href=\"https://www.tutorialspoint.com/cprogramming/c_functions.htm\" rel=\"nofollow\">https://www.tutorialspoint.com/cprogramming/c_functions.htm</a></p>\n\n<p>for more help</p>\n"}, {"tags": [], "owner": {"reputation": 237, "user_id": 7029382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf33e81dcf9fed9b81b352ed53ca79?s=128&d=identicon&r=PG&f=1", "display_name": "VihangaAW", "link": "https://stackoverflow.com/users/7029382/vihangaaw"}, "is_accepted": true, "score": -1, "last_activity_date": 1476894246, "creation_date": 1476894246, "answer_id": 40136852, "question_id": 40136762, "link": "https://stackoverflow.com/questions/40136762/probl-in-using-functions-in-c/40136852#40136852", "title": "probl in using functions in c", "body": "<p>Shoud be</p>\n\n<pre><code> int function1(int a)\n float function2(float b, float c)\n</code></pre>\n\n<p>also</p>\n\n<pre><code> main(){\n float p,q;\n int r;\n printf(\"Input 2 float numbers\\n\");\n scanf(\"%f %f\",&amp;p,&amp;q);\n printf(\"Input a integer number\\n\");\n scanf(\"%d\",&amp;r);\n printf(\"%f\\n\",function2(p,q));\n printf(\" : %d\\n\",function1(r));\n return 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7042907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dde343d3927343062cc18ddfb5d79b?s=128&d=identicon&r=PG&f=1", "display_name": "John95", "link": "https://stackoverflow.com/users/7042907/john95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 40136852, "answer_count": 2, "score": -3, "last_activity_date": 1476967121, "creation_date": 1476893969, "last_edit_date": 1476967121, "question_id": 40136762, "link": "https://stackoverflow.com/questions/40136762/probl-in-using-functions-in-c", "title": "probl in using functions in c", "body": "<p>I want to display an integer output (<code>function1</code>) and a float output (<code>function2</code>).</p>\n\n<p><code>function1</code>: input an integer number, if the number is odd display odd, else display even.</p>\n\n<p><code>function2</code>: input two float numbers, multiply them by 4 and add them and display the answer.</p>\n\n<p>Whats wrong with this?   </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nfunction1(int a)\n{ \n  if(a%2!=0)\n  {printf(\"odd number\");}\n  else\n  {printf(\"even number\");}\n\n  return a;\n}\n\nfunction2(float b, float c)\n{\n  float d;\n  b=b*4;\n  c=c*4;\n  d=b+c;\n\n  return d;\n}\n\nmain()\n{\n  float p,q;\n  int r;\n\n  printf(\"Input 2 float numbers\\n\");\n  scanf(\"%f %f\",&amp;p,&amp;q);\n  printf(\"Input a integer number\\n\");\n  scanf(\"%d\",&amp;r);\n  printf(\"%f\\n\",function2());\n  printf(\" : %d\\n\",function1());\n\n  return 0;      \n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "segmentation-fault", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1476894830, "last_edit_date": 1476894830, "creation_date": 1476893897, "answer_id": 40136745, "question_id": 40136660, "link": "https://stackoverflow.com/questions/40136660/how-to-tell-what-is-causing-seg-fault-when-using-pthread-create/40136745#40136745", "title": "How to tell what is causing seg fault when using pthread_create?", "body": "<p>The segfault is very likely because of passing uninitialized thread ID to <code>pthread_create()</code>. The array <code>lizard</code> isn't initialized. </p>\n\n<p>Instead use an array:</p>\n\n<pre><code>  pthread_t lizard[NUM_LIZARDS]; // LK\n\n  ...\n\n  // LK\n  for(i = 0; i &lt; NUM_LIZARDS; i++) {\n    pthread_create(&amp;lizard[i], NULL, lizardThread, (void *)(&amp;i));\n  }\n</code></pre>\n\n<p>Also, note that there's <a href=\"https://docs.oracle.com/cd/E19205-01/820-0619/geojs/index.html\" rel=\"nofollow\"><em>data race</a></em> since you pass <code>&amp;i</code> to all threads. Instead you can use an array to fix the data race.</p>\n\n<pre><code>  int arr[NUM_LIZARDS];\n  for(i = 0; i &lt; NUM_LIZARDS; i++) {\n    arr[i] = i;\n    pthread_create(&amp;lizard[i], NULL, lizardThread, &amp;arr[i]);\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1512544332, "last_edit_date": 1512544332, "creation_date": 1476894075, "answer_id": 40136791, "question_id": 40136660, "link": "https://stackoverflow.com/questions/40136660/how-to-tell-what-is-causing-seg-fault-when-using-pthread-create/40136791#40136791", "title": "How to tell what is causing seg fault when using pthread_create?", "body": "<p>You have the principle right, that you should pass a pointer to a <code>pthread_t</code> as the first argument to the <code>pthread_create</code> function.</p>\n\n<p>The problem is that the pointers must actually <em>point</em> to something.</p>\n\n<p>Normally when creating a single thread, you use a single <code>pthread_t</code> variable (not a pointer!) and uses the address-of operator when calling <code>pthread_create</code>. Like</p>\n\n<pre><code>pthread_t thread;  // Creates a normal non-pointer variable\npthread_create(&amp;thread, ...);  // Pass the address of the variable, as a pointer to it\n</code></pre>\n\n<p>For your program you should do the same, pass pointers to actual <code>pthread_t</code> instances using the <code>&amp;</code> operator. For this you first need to change the <code>lizard</code> array to not be an array of pointers:</p>\n\n<pre><code>pthread_t lizard[NUM_LIZARDS]; // LK\n</code></pre>\n\n<p>Then use the address-of operator when creating the threads:</p>\n\n<pre><code>pthread_create(&amp;lizard[i], NULL, lizardThread, (void *)(&amp;i));\n</code></pre>\n\n<p>By using the address-of operator <code>&amp;</code> like this is <em>emulating</em> something called \"call by reference\".</p>\n\n<hr>\n\n<p>There is however another problem in your code, that is much more subtle.</p>\n\n<p>Because you pass a pointer to the loop variable <code>i</code> when the thread function actually starts the loop might have iterated a couple of times which means the value of <code>i</code> will not be correct when you dereference the pointer in the thread function. This is known as a <em>data race</em> or <em>race condition</em>.</p>\n\n<p>The solution to this is to actually <em>not</em> pass a pointer, but the integer value itself. You do this by casting it to an <code>intptr_t</code> (which is big enough to hold both integers and pointers) and casting that to a pointer:</p>\n\n<pre><code>pthread_create(&amp;lizard[i], NULL, lizardThread, (void *) (intptr_t) i);\n</code></pre>\n\n<p>The <code>intptr_t</code> type is part of <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">the fixed-width integer types</a> introduced in the C99 standard.</p>\n\n<p>To use it you need to cast it back in the thread function:</p>\n\n<pre><code>int num = (int) (intptr_t) param;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4488564, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BO82U.jpg?s=128&g=1", "display_name": "HotShot51015", "link": "https://stackoverflow.com/users/4488564/hotshot51015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1124, "favorite_count": 0, "accepted_answer_id": 40136745, "answer_count": 2, "score": 0, "last_activity_date": 1512544332, "creation_date": 1476893581, "question_id": 40136660, "link": "https://stackoverflow.com/questions/40136660/how-to-tell-what-is-causing-seg-fault-when-using-pthread-create", "title": "How to tell what is causing seg fault when using pthread_create?", "body": "<p>I'm having trouble finding the cause of this seg fault when calling pthread_create... </p>\n\n<p>GDB is giving me <code>Program received signal SIGSEGV, Segmentation fault.\n0x00007ffff7bc741d in pthread_create@@GLIBC_2.2.5 () from /lib64/libpthread.so.0</code></p>\n\n<p>I'll include the part of the code that calls it and the part of the code which includes the function the threads are calling.</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n  /*\n   * Declare local variables\n   */\n  int i, j; // LK\n  pthread_t *cat[NUM_CATS]; // LK\n  pthread_t *lizard[NUM_LIZARDS]; // LK\n\n\n  /*\n   * Check for the debugging flag (-d)\n   */\n  debug = 0;\n  if (argc &gt; 1)\n    if (strncmp(argv[1], \"-d\", 2) == 0)\n      debug = 1;\n\n\n  /*\n   * Initialize variables\n   */\n  numCrossingSago2MonkeyGrass = 0;\n  numCrossingMonkeyGrass2Sago = 0;\n  running = 1;\n\n\n  /*\n   * Initialize random number generator\n   */\n  srandom( (unsigned int)time(NULL) );\n\n\n  /*\n   * Initialize locks and/or semaphores\n   */\n\n  sem_init(&amp;driveway, 0, 20); // LK\n\n  /*\n   * Create NUM_LIZARDS lizard threads\n   */\n\n  // LK\n  for(i = 0; i &lt; NUM_LIZARDS; i++) {\n    pthread_create(lizard[i], NULL, lizardThread, (void *)(&amp;i));\n  }\n</code></pre>\n\n<p>And the function called by pthread_create...</p>\n\n<pre><code>void * lizardThread( void * param )\n{\n  int num = *(int*)param;\n\n  if (debug)\n    {\n      printf(\"[%2d] lizard is alive\\n\", num);\n      fflush(stdout);\n    }\n\n  while(running)\n    {\n\n      lizard_sleep(num); // LK\n      sago_2_monkeyGrass_is_safe(num); // LK\n      cross_sago_2_monkeyGrass(num); // LK\n      lizard_eat(num); // LK\n      monkeyGrass_2_sago_is_safe(num); // LK\n      cross_monkeyGrass_2_sago(num); // LK\n\n    }\n\n  pthread_exit(NULL);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "lua"], "comments": [{"owner": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "edited": false, "score": 1, "creation_date": 1476895080, "post_id": 40136301, "comment_id": 67543787, "body": "Its on the stack. Please read the <a href=\"http://www.lua.org/manual/5.3/manual.html#4\" rel=\"nofollow noreferrer\">manual</a> as the stack is fundamental to how the C API works. <a href=\"http://www.lua.org/pil/24.html\" rel=\"nofollow noreferrer\">Programming in Lua</a> has usage examples."}], "answers": [{"tags": [], "owner": {"reputation": 14477, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "is_accepted": true, "score": 1, "last_activity_date": 1476905170, "last_edit_date": 1592644375, "creation_date": 1476905170, "answer_id": 40139943, "question_id": 40136301, "link": "https://stackoverflow.com/questions/40136301/table-as-parameter-in-c-function-called-from-lua/40139943#40139943", "title": "Table as parameter in C function called from Lua", "body": "<p>Arguments to a <code>CFunction</code> are pressed onto the virtual stack in the order that they are provided, and it is simply up to you to do the error checking required before you operate on these values.</p>\n<h2><a href=\"http://www.lua.org/manual/5.3/manual.html#lua_CFunction\" rel=\"nofollow noreferrer\">Lua 5.3 Manual \u00a74.8 - <code>lua_CFunction</code></a>:</h2>\n<blockquote>\n<p>In order to communicate properly with Lua, a C function must use the following protocol, which defines the way parameters and results are passed: a C function receives its arguments from Lua in its stack in direct order (the first argument is pushed first).</p>\n<p>[ ... ]</p>\n<p>The first argument (if any) is at index 1 and its last argument is at index <code>lua_gettop(L)</code>. To return values to Lua, a C function just pushes them onto the stack, in direct order (the first result is pushed first), and returns the number of results</p>\n</blockquote>\n<p>An example of exhaustively checking the number of elements in a table, with an arbitrary first argument.</p>\n<pre><code>int count (lua_State *L) {\n    luaL_checktype(L, 2, LUA_TTABLE);\n\n    puts(lua_tostring(L, 1));\n    \n    size_t ec = 0;\n    \n    lua_pushnil(L);\n    \n    while (lua_next(L, 2)) {\n        lua_pop(L, 1);\n        ec++;\n    }\n    \n    lua_pushinteger(L, (lua_Integer) ec);\n    return 1;\n}\n</code></pre>\n<p>After registering the function for use in Lua:</p>\n<pre><code>count('foo', { 'a', 'b', 'c' }) -- 3\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7043200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c15a477476b4aa824c1cd6709280e7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/7043200/michael-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 40139943, "answer_count": 1, "score": 1, "last_activity_date": 1476905539, "creation_date": 1476892435, "last_edit_date": 1476905539, "question_id": 40136301, "link": "https://stackoverflow.com/questions/40136301/table-as-parameter-in-c-function-called-from-lua", "title": "Table as parameter in C function called from Lua", "body": "<p>I'm dealing with Lua for a longer time but there is one point I can't achieve.\nIn a C function which is called from Lua I'm able to read a global Lua table using the table name like this:</p>\n\n<p><strong>C:</strong></p>\n\n<pre><code>    // get table\n    lua_getglobal(L, \"tableName\");\n    if (!lua_istable(L, -1))                \n       break;            \n\n    // count entries in table\n    ULONG numEntries = 0; \n    lua_pushnil(L);\n    while(lua_next(L,-2))\n    {\n        numEntries++;\n        lua_pop(L, 1);\n    }\n</code></pre>\n\n<p>but if I have a lua function which calls a C function like this:</p>\n\n<p><strong>Lua:</strong></p>\n\n<pre><code>   luaTable = { }\n   luaTable.Param1 = Value1 \n   luaCallC(\"This is a Text\", luaTable)\n</code></pre>\n\n<p>How do I access the table argument?</p>\n\n<p><strong>C:</strong></p>\n\n<pre><code>    // get table\n    // ???\n\n    // count entries in table\n    ULONG numEntries = 0; \n    lua_pushnil(L);\n    while(lua_next(L,-2))\n    {\n        numEntries++;\n        lua_pop(L, 1);\n    }\n</code></pre>\n"}, {"tags": ["c", "fork", "wait"], "comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1476895581, "post_id": 40136119, "comment_id": 67544075, "body": "Have you tried to code this yourself? What exactly are you having trouble with?"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1476893515, "last_edit_date": 1476893515, "creation_date": 1476893153, "answer_id": 40136535, "question_id": 40136119, "link": "https://stackoverflow.com/questions/40136119/fork-child-chain/40136535#40136535", "title": "Fork() Child Chain", "body": "<p>Your example code uses the return value of <code>fork()</code> to distinguish between parent and child.  It continues to iterate in the parent (supposing that <code>fork()</code> does not report an error), and it <code>exit()</code>s without iterating (after emitting some output) in the child.  This is perfectly routine.</p>\n\n<p>What you propose to do is not very much different; what you describe mainly just swaps the roles of parent and child.  Indeed, you have a simpler job, because each parent only needs to <code>wait()</code> for one child.  It can do that either inside the loop or outside, provided only that if the last child <code>wait()</code>s then it should expect the call indicate an error on account of that child not having any children of its own.  If the parent does not <code>exit()</code> or <code>return</code> from inside the loop, however, then it does need to break out instead of iterating further.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1476895543, "post_id": 40137046, "comment_id": 67544056, "body": "Certainly one could implement the desired behavior recursively, but any recursive algorithm can transformed into an iterative one (without change in observable behavior), and <i>vice versa</i>.  Therefore, whether the solution is iterative or recursive seems a red herring."}, {"owner": {"reputation": 324, "user_id": 6950051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoXcJ.png?s=128&g=1", "display_name": "Oskar Skog", "link": "https://stackoverflow.com/users/6950051/oskar-skog"}, "edited": false, "score": 1, "creation_date": 1476898080, "post_id": 40137046, "comment_id": 67545454, "body": "Well, in a more realistic program, if children are created as a chain, calling functions is probably more natural than looping, because each process will have a meaningful and different purpose."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 2, "last_activity_date": 1476894966, "creation_date": 1476894966, "answer_id": 40137046, "question_id": 40136119, "link": "https://stackoverflow.com/questions/40136119/fork-child-chain/40137046#40137046", "title": "Fork() Child Chain", "body": "<p>This task is the same as converting an iterative solution to a recursive solution. The first step is to remove the <code>for</code> loop. And then modify the child code so that each child:</p>\n\n<ol>\n<li>prints its message</li>\n<li>updates a count variable, and if the count is less than the max</li>\n<li>forks a new child</li>\n<li>waits for its child</li>\n</ol>\n\n<p>The key is that each child gets a copy of its parent's variables, so if a child updates a count variable, and then forks, the new child will see the updated count.</p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 3917820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d06e07252c080264e0f44b35bf770b6?s=128&d=identicon&r=PG&f=1", "display_name": "shamba", "link": "https://stackoverflow.com/users/3917820/shamba"}, "is_accepted": true, "score": 1, "last_activity_date": 1476911801, "creation_date": 1476911801, "answer_id": 40141668, "question_id": 40136119, "link": "https://stackoverflow.com/questions/40136119/fork-child-chain/40141668#40141668", "title": "Fork() Child Chain", "body": "<p>First, the term \"thread\" you used is inappropriate in this situation.\nFork means \"creating process\" not \"threads\".</p>\n\n<p>You can use a recursive solution but you have to remember that each process creating a process should wait for the return status in order to avoid Zombie Process. Without using any shared variable between process you can use a single variable counter that gets incremented for each forking. But once the counter variable reached the max value, the \"youngest\" process, i mean the last process created should exit, and one by one other process will exit.</p>\n\n<p>Here is a simple code that works fine:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#define NUM_PROCESS 5\n\nint counter = 0;\n\nvoid child_func() \n{\n    pid_t pid;\n\n    if (counter &lt; NUM_PROCESS) {\n\n        counter++;\n\n        pid = fork();\n\n        if (pid &lt; 0) {\n\n            printf(\"fork failed counter = %d\\n\", counter);\n\n        }\n        else if (pid == 0) {\n\n            printf(\"Hello world ! Greetings from pid %ld\\n\", (long)getpid());\n\n            if (counter == NUM_PROCESS) {\n                exit(0);\n            }\n            else {\n                child_func();\n            }\n        }\n        else {\n\n            long var  = pid;\n\n            wait(&amp;pid);\n\n            printf(\"My pid is %ld and i am the parent of %ld child, i exit\\n\", (long)getpid(), var);\n\n            exit(0);\n        }   \n    }\n}\n\nint main(void) \n{\n\n    pid_t pid;\n\n    pid = fork();\n\n    if (pid &lt; 0) {\n\n        printf(\"Fork failed %d\\n\", counter);\n\n        return -1;\n    }\n\n    if (pid == 0) {\n\n        child_func();\n    }\n    else {\n\n        wait(&amp;pid);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yKndK.jpg\" rel=\"nofollow\">See output</a></p>\n"}], "owner": {"reputation": 507, "user_id": 4517714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1814758297/picture?type=large", "display_name": "Zakery Alexander Fyke", "link": "https://stackoverflow.com/users/4517714/zakery-alexander-fyke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1316, "favorite_count": 0, "accepted_answer_id": 40141668, "answer_count": 3, "score": 2, "last_activity_date": 1476911801, "creation_date": 1476891978, "last_edit_date": 1476895438, "question_id": 40136119, "link": "https://stackoverflow.com/questions/40136119/fork-child-chain", "title": "Fork() Child Chain", "body": "<p>I have the following code, which creates the defined number of child threads using <code>fork()</code>:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\n#define NUM_THREADS     4\n\nint main()\n{\n        int i;\n        pid_t pid;\n        for(i = 0; i &lt; NUM_THREADS; i++){ //Do this equal to the number of threads\n            pid = fork();//Use this to avoid multiple forking\n\n            if(pid == 0){ //If it's a child process\n                    printf(\"Hello World! Greetings from PID: %ld! :D\\n\", (long)getpid()); //getpid returns the pid of the process\n                    exit(0); //Exit the process\n            }else if(pid == -1){\n                    printf(\"Oh no! Could not fork! :( Exiting!\\n\");\n                    return 0;\n            }\n    }\n    int status;\n    for(i = 0; i &lt; NUM_THREADS; i++){\n            wait(&amp;status);//wait until all the children processes have finished.\n    }\n    printf(\"All done! I am the parent process! My PID is: %ld if you were curious! \\n\", (long)getpid());\n\n    return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>This was provided to us as an example. \nIts output is like:</p>\n\n<blockquote>\n  <p>Hello World! Greetings from PID: 118358! :D<br>\n  Hello World! Greetings from PID: 118359! :D<br>\n  Hello World! Greetings from PID: 118360! :D<br>\n  Hello World! Greetings from PID: 118362! :D</p>\n</blockquote>\n\n<p>What I'd like to do, instead of having 1 parent process with many children, is to have the parent create a child process, which creates a child process, and so on for the defined number of threads.  How can I do that?</p>\n"}, {"tags": ["c", "char", "int", "pipe", "fifo"], "comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1476891590, "post_id": 40135943, "comment_id": 67541610, "body": "I suspect it&#39;s not really woring fine as long as you call<code>write(fd, &quot;3+4&quot;, sizeof(&quot;3+4&quot;));</code> instead of <code>write( ...., strlen( &quot;3+4&quot; ) );</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476891628, "post_id": 40135943, "comment_id": 67541628, "body": "Please format/indent your code."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1476891633, "post_id": 40135943, "comment_id": 67541635, "body": "and show us what yu have tries so far to parse the message you have received"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476891735, "post_id": 40135943, "comment_id": 67541700, "body": "Elaborate your question. It&#39;s not clear what you want, maybe <a href=\"http://en.cppreference.com/w/c/string/byte/atoi\" rel=\"nofollow noreferrer\"><code>atol</code></a> is what you need ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1476891804, "post_id": 40135943, "comment_id": 67541756, "body": "@IngoLeonhardt, on the contrary, using <code>sizeof()</code> in that case has the advantage of including the space for the null terminator in the count, which may (sometimes) be exactly what is wanted.  In particular, note that string literals represent <i>arrays</i>, not pointers, so <code>sizeof()</code> does report on the number of elements.  It should not be problematic here."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1476891972, "post_id": 40135943, "comment_id": 67541870, "body": "@JohnBollinger you&#39;re right of course. Nevertheless I somehow suspect that when the constant was replaced by an array or a pointer, the sizeof would stlill be there"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1476892158, "post_id": 40135943, "comment_id": 67541984, "body": "The reading and wring of the string from/to the file appears to have nothing to do with OP&#39;s goal which is effectively: How to parse <code>&quot;3+4&quot;</code> into <code>7</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1476892286, "post_id": 40135943, "comment_id": 67542070, "body": "@Dictatorboy, you seem to be asking how to parse the input as an expression, and then to evaluate the resulting expression.  Such a question is far too broad for SO.  If you meant to ask something more specific, then this would be a good time to edit your question."}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1476892971, "creation_date": 1476892971, "answer_id": 40136469, "question_id": 40135943, "link": "https://stackoverflow.com/questions/40135943/how-can-i-add-two-numbers-from-a-char-in-c/40136469#40136469", "title": "How can I add two numbers from a char in C?", "body": "<p>if this is just about adding 2 numbers (ass opposed to a general purpose calculator) why not just send \"3,4\"</p>\n\n<p>Now split the string at the \",\". Hint - use strchr</p>\n\n<p>Now convert the two substrings to integers. Hint use atol</p>\n\n<p>Now add them. Hint use <code>+</code></p>\n"}, {"tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 0, "last_activity_date": 1476893752, "creation_date": 1476893752, "answer_id": 40136703, "question_id": 40135943, "link": "https://stackoverflow.com/questions/40135943/how-can-i-add-two-numbers-from-a-char-in-c/40136703#40136703", "title": "How can I add two numbers from a char in C?", "body": "<p>You have to parse the string to get the arithmetic expressions. As the commenters already said: such a question is a bit too broad here because there are a lot of ways to do so, depending on how complex the expressions can get. For a simple addition/subtraction of two positive integers--not more than <code>s1 + s2</code> or <code>s1 - s2</code>, no negations or anything else--you can use this <em>very</em> simple example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n// ALL CHECKS OMMITTED!\n\n#define ADD 1\n#define SUB 2\n\nint parse(char *s)\n{\n  int op1 = 0, op2 = 0, res = 0, operator= 0, next = 0;\n  for (;;) {\n    switch (*s) {\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '8':\n      case '9':\n        // may over/underflow, check!\n        if (next == 0) {\n          op1 *= 10;\n          op1 += *s - '0';\n        } else if (next == 1) {\n          op2 *= 10;\n          op2 += *s - '0';\n        }\n        break;\n      case '+':\n        operator = ADD;\n        next = 1;\n        break;\n      case '-':\n        operator = SUB;\n        next = 1;\n        break;\n      case '\\0':\n        // may over/underflow, check!\n        if (operator == ADD) {\n          res = op1 + op2;\n        } else if (operator == SUB) {\n          res = op1 - op2;\n        }\n        break;\n      default:\n        // just ignore everything else for now\n        break;\n    }\n    if(*s == '\\0'){\n      break;\n    }\n    s++;\n  }\n  return res;\n}\n\nint main()\n{\n  char *s = \"3 + 4\";\n  printf(\"%s = %d\\n\",s, parse(s));\n  s = \"3 - 4\";\n  printf(\"%s = %d\\n\",s, parse(s));\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>And although it <em>is</em> very simple and of not much use it is already quite complex. You can extend it--to some extend--but you'll reach a limit quite quickly.</p>\n\n<p>If you have nothing more than a line of arithmetic operations you might take some time to look up things like e.g.: \"parse infix expressions\" or similar here and elsewhere. The first hit at Google is the Wikipedia page about the <a href=\"https://en.wikipedia.org/wiki/Shunting-yard_algorithm\" rel=\"nofollow\">Shunting-Yard algorithm</a> which should give you a good start. It is quite interesting stuff but nothing for just half an evening to learn.</p>\n"}], "owner": {"reputation": 45, "user_id": 4468148, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/pAKJx.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4468148/rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1476893752, "creation_date": 1476891472, "last_edit_date": 1476892552, "question_id": 40135943, "link": "https://stackoverflow.com/questions/40135943/how-can-i-add-two-numbers-from-a-char-in-c", "title": "How can I add two numbers from a char in C?", "body": "<p>I'm using two files one that is sending and the other is receiving a char using pipes and it's working fine but I want to know how after I receive the message I want to convert that char in integers and add or subtract based on what is on the char. </p>\n\n<p>Basically how can I parse \"3+4\" into 7?</p>\n\n<p>Here is my write.c</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\nint fd;\nchar * myfifo = \"/tmp/myfifo\";\n\n/* crear FIFO  */\nmkfifo(myfifo, 0666);\n\n/* escribir al FIFO */\nfd = open(myfifo, O_WRONLY);\nwrite(fd, \"3+4\", sizeof(\"3+4\"));\nclose(fd);\n\n/* remover FIFO */\nunlink(myfifo);\n\nreturn 0;\n}\n</code></pre>\n\n<p>And this is my read.c</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\n#define MAX_BUF 1024\n\nint main()\n{\nint fd;\nchar * myfifo = \"/tmp/myfifo\";\nchar buf[MAX_BUF];\n\n/* open, read, and display the message from the FIFO */\nfd = open(myfifo, O_RDONLY);\nread(fd, buf, MAX_BUF);\nprintf(\"Received: %s\\n\", buf);\nclose(fd);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "return-type", "assignment-operator"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1476890300, "post_id": 40135485, "comment_id": 67540767, "body": "it depends on the type. the <code>operator=</code> of some class <code>Foo</code> has little to nothing in common with the <code>operator=</code> of some other type <code>Bar</code>"}, {"owner": {"reputation": 12976, "user_id": 1758762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Nt89f.jpg?s=128&g=1", "display_name": "Leo Chapiro", "link": "https://stackoverflow.com/users/1758762/leo-chapiro"}, "edited": false, "score": 4, "creation_date": 1476890351, "post_id": 40135485, "comment_id": 67540794, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15292892/what-is-return-type-of-assignment-operator\">what is return type of assignment operator?</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1476890435, "post_id": 40135485, "comment_id": 67540850, "body": "it is <code>C</code> or <code>C++</code>? They both are different languages. My answer below is for C."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1476890737, "post_id": 40135485, "comment_id": 67541041, "body": "Why not include some more languages?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1476890342, "creation_date": 1476890342, "answer_id": 40135539, "question_id": 40135485, "link": "https://stackoverflow.com/questions/40135485/whats-the-return-type-of-assignment-operator/40135539#40135539", "title": "whats the return type of assignment operator?", "body": "<p>Quoting <code>C11</code>, chapter \u00a76.5.16, <em>Assignment operators</em> (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>[...] An\n  assignment expression has the <strong>value of the left operand after the assignment</strong>, but is not\n  an lvalue. The <strong>type of an assignment expression is the type the left operand would have\n  after lvalue conversion</strong>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1476897337, "post_id": 40135573, "comment_id": 67545023, "body": "I&#39;m a fan of the <code>void</code> return type for the user-defined assignment operator. +1"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1476890816, "last_edit_date": 1476890816, "creation_date": 1476890455, "answer_id": 40135573, "question_id": 40135485, "link": "https://stackoverflow.com/questions/40135485/whats-the-return-type-of-assignment-operator/40135573#40135573", "title": "whats the return type of assignment operator?", "body": "<p><strong>In C++</strong>:</p>\n\n<p>The built-in assignment operator returns a reference, or more precisely, an assignment expression is an lvalue.</p>\n\n<p>Returning a reference is also required for an item in a standard collection.</p>\n\n<p>Apart from that you can define an assignment operator for a class type, with any return type you want, including <code>void</code> (which otherwise IMHO would have been preferable).</p>\n\n<p><strong>In C</strong>:<br>\nIn C there are no user defined assignment operators, and an assignment expression is an rvalue. I.e., in C you can't do <code>(a = b) = c</code> that you can do in C++. Which IMHO is an advantage.</p>\n"}], "owner": {"reputation": 1, "user_id": 7043102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7aed8011e9247e357b01a837306cc0?s=128&d=identicon&r=PG&f=1", "display_name": "codingninja", "link": "https://stackoverflow.com/users/7043102/codingninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476894290, "creation_date": 1476890205, "last_edit_date": 1476894290, "question_id": 40135485, "link": "https://stackoverflow.com/questions/40135485/whats-the-return-type-of-assignment-operator", "title": "whats the return type of assignment operator?", "body": "<p>I know it returns whatever is on left side. So in case of character assignment we would get a character and in case of int assignment we would get a int type.</p>\n\n<p>Isn't there a fix datatype of assignment operator?</p>\n"}, {"tags": ["c", "freeform"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 16, "creation_date": 1476890266, "post_id": 40135392, "comment_id": 67540742, "body": "What motivated this post?"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 3, "creation_date": 1476898477, "post_id": 40135392, "comment_id": 67545672, "body": "This question and the one that inspired it are almost exactly the same, no?  How is this not a duplicate?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 10, "creation_date": 1476898572, "post_id": 40135392, "comment_id": 67545732, "body": "@TavianBarnes Discoverability. The other question is not discoverable when searching for this kind of issue. It could be edited that way, but that would require changing a little to much, making it a whole different question IMO."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 4, "creation_date": 1476901761, "post_id": 40135392, "comment_id": 67547699, "body": "@TavianBarnes: The original question was asking for the error. This question is asking why the compiler seems (to the OP at least) to be misreporting the location of the error."}, {"owner": {"reputation": 31019, "user_id": 2230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a905a92a336eaea1b936c100ec49e229?s=128&d=identicon&r=PG", "display_name": "Euro Micelli", "link": "https://stackoverflow.com/users/2230/euro-micelli"}, "edited": false, "score": 84, "creation_date": 1476929743, "post_id": 40135392, "comment_id": 67558446, "body": "Point to ponder: if a compiler could systematically detect missing semi-colons, the <i>language</i> wouldn&#39;t need semi-colons to begin with."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 5, "creation_date": 1476960940, "post_id": 40135392, "comment_id": 67573668, "body": "The compilers job is to report the error. It&#39;s your job to figure out what to change to fix the error."}, {"owner": {"reputation": 6669, "user_id": 486504, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XWsKp.png?s=128&g=1", "display_name": "user", "link": "https://stackoverflow.com/users/486504/user"}, "reply_to_user": {"reputation": 31019, "user_id": 2230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a905a92a336eaea1b936c100ec49e229?s=128&d=identicon&r=PG", "display_name": "Euro Micelli", "link": "https://stackoverflow.com/users/2230/euro-micelli"}, "edited": false, "score": 0, "creation_date": 1476965074, "post_id": 40135392, "comment_id": 67576704, "body": "@EuroMicelli Oh, you mean like T-SQL? Though even there, I believe omitting semicolons is <i>deprecated</i>."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "reply_to_user": {"reputation": 31019, "user_id": 2230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a905a92a336eaea1b936c100ec49e229?s=128&d=identicon&r=PG", "display_name": "Euro Micelli", "link": "https://stackoverflow.com/users/2230/euro-micelli"}, "edited": false, "score": 3, "creation_date": 1476973492, "post_id": 40135392, "comment_id": 67583037, "body": "@EuroMicelli JavaScript is an instructive example of why you should not even try..."}, {"owner": {"reputation": 68611, "user_id": 53897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG", "display_name": "Thorbj&#248;rn Ravn Andersen", "link": "https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"}, "edited": false, "score": 1, "creation_date": 1476974372, "post_id": 40135392, "comment_id": 67583799, "body": "Why can <i>you</i> say that the semicolon is missing?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 68611, "user_id": 53897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG", "display_name": "Thorbj&#248;rn Ravn Andersen", "link": "https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"}, "edited": false, "score": 0, "creation_date": 1476974877, "post_id": 40135392, "comment_id": 67584168, "body": "@Thorbj&#248;rnRavnAndersen I can say it&#39;s missing because I can see the <i>context</i>, something humans are very good at seeing but computers and compilers are very bad at."}, {"owner": {"reputation": 68611, "user_id": 53897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG", "display_name": "Thorbj&#248;rn Ravn Andersen", "link": "https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"}, "edited": false, "score": 1, "creation_date": 1476975235, "post_id": 40135392, "comment_id": 67584464, "body": "@Someprogrammerdude in this particular case you can see what was most likely <i>intended</i> which is not necessarily (you for all purposes debug the program in your mind9.  I invite you to examine programs in IOCCC, for instance <a href=\"http://www.ioccc.org/1986/wall/wall.c\" rel=\"nofollow noreferrer\">ioccc.org/1986/wall/wall.c</a>, to see how C programs may look like."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 68611, "user_id": 53897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG", "display_name": "Thorbj&#248;rn Ravn Andersen", "link": "https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"}, "edited": false, "score": 0, "creation_date": 1476975645, "post_id": 40135392, "comment_id": 67584783, "body": "@Thorbj&#248;rnRavnAndersen Well <i>deliberate</i> obfuscation of course makes detecting context hard. Even unintended obfuscation does it, from e.g. beginners writing code before they learned about indentation and such. The free form of C can be both a blessing and a curse. And yes, I&#39;ve seen plenty of IOCCC entries, sometimes wondering how such code could be both so beautiful and ugly at the same time. :) What I&#39;m trying to say that it&#39;s <i>usually</i> easier for us humans to see context and such problems than for the compiler."}, {"owner": {"reputation": 68611, "user_id": 53897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG", "display_name": "Thorbj&#248;rn Ravn Andersen", "link": "https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"}, "edited": false, "score": 1, "creation_date": 1476977228, "post_id": 40135392, "comment_id": 67586031, "body": "And this is why language design is hard.  C is portable assembler designed around 1970.    Question is if any newer languages are easier to write bug-free programs in?  Haskell?"}, {"owner": {"reputation": 2927, "user_id": 1850091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBgK9.png?s=128&g=1", "display_name": "Gustavo Rodrigues", "link": "https://stackoverflow.com/users/1850091/gustavo-rodrigues"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1476984981, "post_id": 40135392, "comment_id": 67590743, "body": "@JaredSmith JavaScript is a example of a language that don&#39;t needs semi-colons, as whitespace is relevant for it: <code>a = () =&gt; {return a}</code> and <code>a = () =&gt; {return \\n a}</code>. Using <code>return \\n a;</code> will not fix that error, it will be still interpreted as <code>return; \\n a;</code>."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "reply_to_user": {"reputation": 2927, "user_id": 1850091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBgK9.png?s=128&g=1", "display_name": "Gustavo Rodrigues", "link": "https://stackoverflow.com/users/1850091/gustavo-rodrigues"}, "edited": false, "score": 0, "creation_date": 1476985976, "post_id": 40135392, "comment_id": 67591355, "body": "@GustavoRodrigues my point was that ASI <i>sounds</i> like a good idea: &quot;we&#39;ll just have the parser insert one any time it encounters what would otherwise be a syntax error&quot; so that if someone forgets one NBD. The problem is that (as you point out) semi-colons can change program <i>meaning</i>. A perhaps better example would be an IIFE with no terminating semi-colon on the preceding line being treated as a double invocation on the last expression of that line."}, {"owner": {"reputation": 5668, "user_id": 712526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG", "display_name": "jpaugh", "link": "https://stackoverflow.com/users/712526/jpaugh"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1477019290, "post_id": 40135392, "comment_id": 67603757, "body": "@JaredSmith Simultaneously, Python is an example of doing it well; but JavaScript&#39;s real problem is having so many corner cases in its syntax. Even [Visual]Basic manages to get this right. (Not to mention Haskell, which has optional semi-colons, and is less restrictive than Python on whitespace placement.)"}, {"owner": {"reputation": 9334, "user_id": 619616, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3c3a7dd76a7a5b95144437a00eb12a0f?s=128&d=identicon&r=PG", "display_name": "Buksy", "link": "https://stackoverflow.com/users/619616/buksy"}, "edited": false, "score": 2, "creation_date": 1477463786, "post_id": 40135392, "comment_id": 67772114, "body": "I bet If I asked such a question, I would be downvoted for asking obvious things ..."}, {"owner": {"reputation": 4590, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "reply_to_user": {"reputation": 9334, "user_id": 619616, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3c3a7dd76a7a5b95144437a00eb12a0f?s=128&d=identicon&r=PG", "display_name": "Buksy", "link": "https://stackoverflow.com/users/619616/buksy"}, "edited": false, "score": 0, "creation_date": 1477485897, "post_id": 40135392, "comment_id": 67785631, "body": "@Buksy Definitely! He is getting &gt;70 up votes? What is going on? Just because of his reputation?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 9334, "user_id": 619616, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3c3a7dd76a7a5b95144437a00eb12a0f?s=128&d=identicon&r=PG", "display_name": "Buksy", "link": "https://stackoverflow.com/users/619616/buksy"}, "edited": false, "score": 0, "creation_date": 1477486712, "post_id": 40135392, "comment_id": 67786225, "body": "@Buksy It&#39;s not the question alone, but the package with the question and its answer (for which I don&#39;t get any reputation). And as stated in my question and earlier comments there&#39;s really no (discoverable) similar question. Furthermore, the number of views this have had since I posted the question/answer pair is way higher than any of the two linked questions, meaning this is something many people actually search for and would not have found otherwise. You would have gotten the same treatment if you written it."}, {"owner": {"reputation": 4590, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1477495821, "post_id": 40135392, "comment_id": 67793060, "body": "This question was in the weekly newsletter - this is the <b>only</b> one reason why it has so many views."}, {"owner": {"reputation": 915, "user_id": 1740850, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/xyz2n.jpg?s=128&g=1", "display_name": "ejectamenta", "link": "https://stackoverflow.com/users/1740850/ejectamenta"}, "edited": false, "score": 0, "creation_date": 1490110520, "post_id": 40135392, "comment_id": 72960565, "body": "The compiler should be clever (and friendly) enough to check the previous line for a missing semi colon in the case of the subsequent line being in error, it should then report this in the error message imho. For example &quot;error: invalid operands to binary, by the way did you happen to miss a semi colon on line 11?&quot;"}, {"owner": {"reputation": 915, "user_id": 1740850, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/xyz2n.jpg?s=128&g=1", "display_name": "ejectamenta", "link": "https://stackoverflow.com/users/1740850/ejectamenta"}, "edited": false, "score": 0, "creation_date": 1490110928, "post_id": 40135392, "comment_id": 72960875, "body": "Actually sometimes the compiler does, eg. Error C2143 syntax error: missing &#39;;&#39; before &#39;}&#39; <a href=\"https://msdn.microsoft.com/query/dev14.query?appId=Dev14IDEF1&amp;l=EN-US&amp;k=k(C2143)&amp;rd=true\" rel=\"nofollow noreferrer\">msdn.microsoft.com/query/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 16, "creation_date": 1476913361, "post_id": 40135393, "comment_id": 67553978, "body": "In C++, <code>temp = *a * a = *b</code> <i>could</i> be a valid expression if <code>operator*</code> were overloaded.  (The question is tagged as \u201cC\u201d, though.)"}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 13, "creation_date": 1476917573, "post_id": 40135393, "comment_id": 67555513, "body": "@dan04: If someone actually did that... NOPE!"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 2, "creation_date": 1476964310, "post_id": 40135393, "comment_id": 67576164, "body": "+1 for the advice about (a) starting with the first reported error; and (b) looking backwards from where the error is reported. You know you&#39;re a <i>real</i> programmer when you automatically look on the line before where an error is reported :-)"}, {"owner": {"reputation": 214, "user_id": 1620102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F87s2.png?s=128&g=1", "display_name": "Tin Wizard", "link": "https://stackoverflow.com/users/1620102/tin-wizard"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1477005530, "post_id": 40135393, "comment_id": 67600707, "body": "@TripeHound ESPECIALLY when there are a very large number of errors, or lines that previously compiled are throwing errors..."}, {"owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1477037769, "post_id": 40135393, "comment_id": 67610893, "body": "In C++ you can overload almost anything but it really isn&#39;t a good idea to do so on the standard things unless you can be sure that it will not blow up a library or confuse some poor developer in the future."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "reply_to_user": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1477707165, "post_id": 40135393, "comment_id": 67887832, "body": "@dan04 Even overloaded <code>*</code> keeps its precedence, and <code>*a * a</code> is not an lvalue..."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486652308, "post_id": 40135393, "comment_id": 71446053, "body": "I&#39;d argue, that the compiler didn&#39;t report an unrelated error, or that the developer would have to backtrack, or guess. Remember, the error message was <i>&quot;invalid operands to binary *&quot;</i>. The compiler marked the * operator, and since it is a <b>binary</b> operator, you know that you have to look to the left of the operator. There is no guessing involved here, really."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1535965438, "post_id": 40135393, "comment_id": 91242582, "body": "Interesting that the post doesn&#39;t show your updated user name. That&#39;s probably a bug."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1535965649, "post_id": 40135393, "comment_id": 91242698, "body": "@StoryTeller Might be, you should probably ask about it on meta. :)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1535965696, "post_id": 40135393, "comment_id": 91242733, "body": "As is usually the case with meta, someone already asked - <a href=\"https://meta.stackoverflow.com/questions/266663/community-wiki-posts-dont-show-change-in-username\" title=\"community wiki posts dont show change in username\">meta.stackoverflow.com/questions/266663/&hellip;</a>"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 222, "last_activity_date": 1476953787, "last_edit_date": 1476953787, "creation_date": 1476889949, "answer_id": 40135393, "question_id": 40135392, "link": "https://stackoverflow.com/questions/40135392/why-doesnt-the-compiler-report-a-missing-semicolon/40135393#40135393", "title": "Why doesn&#39;t the compiler report a missing semicolon?", "body": "<p>C is a <em>free-form</em> language. That means you could format it in many ways and it will still be a legal program.</p>\n\n<p>For example a statement like</p>\n\n<pre><code>a = b * c;\n</code></pre>\n\n<p>could be written like</p>\n\n<pre><code>a=b*c;\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>a\n=\nb\n*\nc\n;\n</code></pre>\n\n<p>So when the compiler see the lines</p>\n\n<pre><code>temp = *a\n*a = *b;\n</code></pre>\n\n<p>it thinks it means</p>\n\n<pre><code>temp = *a * a = *b;\n</code></pre>\n\n<p>That is of course not a valid expression and the compiler will complain about that instead of the missing semicolon. The reason it's not valid is because <code>a</code> is a pointer to a structure, so <code>*a * a</code> is trying to multiply a structure instance (<code>*a</code>) with a pointer to a structure (<code>a</code>).</p>\n\n<p>While the compiler can't detect the missing semicolon, it also reports the totally unrelated error on the wrong line. This is important to notice because no matter how much you look at the line where the error is reported, there is no error there. Sometimes problems like this will need you to look at <em>previous</em> lines to see if they are okay and without errors.</p>\n\n<p>Sometimes you even have to look in another file to find the error. For example if a header file is defining a structure the last it does in the header file, and the semicolon terminating the structure is missing, then the error will not be in the header file but in the file that includes the header file.</p>\n\n<p>And sometimes it gets even worse: if you include two (or more) header files, and the first one contains an incomplete declaration, most probably the syntax error will be indicated in the second header file.</p>\n\n<hr>\n\n<p>Related to this is the concept of <em>follow-up</em> errors. Some errors, typically due to missing semicolons actually, are reported as <em>multiple</em> errors. This is why it's important to start from the top when fixing errors, as fixing the first error might make multiple errors disappear.</p>\n\n<p>This of course can lead to fixing one error at a time and frequent recompiles which can be cumbersome with large projects. Recognizing such follow-up errors is something that comes with experience though, and after seeing them a few times it's easier to dig out the real errors and fix more than one error per recompile.</p>\n"}, {"tags": [], "owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "is_accepted": false, "score": 30, "last_activity_date": 1476965139, "last_edit_date": 1476965139, "creation_date": 1476911634, "answer_id": 40141633, "question_id": 40135392, "link": "https://stackoverflow.com/questions/40135392/why-doesnt-the-compiler-report-a-missing-semicolon/40141633#40141633", "title": "Why doesn&#39;t the compiler report a missing semicolon?", "body": "<blockquote>\n  <p>Why doesn't the compiler detect the missing semicolon?</p>\n</blockquote>\n\n<p>There are three things to remember.</p>\n\n<ol>\n<li>Line endings in C are just ordinary whitespace. </li>\n<li><code>*</code> in C can be both a unary and a binary operator. As a unary operator it means \"dereference\", as a binary operator it means \"multiply\".</li>\n<li>The difference between unary and binary operators is determined from the context in which they are seen.</li>\n</ol>\n\n<p>The result of these two facts is when we parse.</p>\n\n<pre><code> temp = *a    /* Oops, missing a semicolon here... */\n *a = *b;\n</code></pre>\n\n<p>The first and last <code>*</code> are interpreted as unary but the second <code>*</code> is interpreted as binary. From a syntax perspective, this looks OK.</p>\n\n<p>It is only after parsing when the compiler tries to interpret the operators in the context of their operand types that an error is seen. </p>\n"}, {"comments": [{"owner": {"reputation": 6886, "user_id": 272708, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5cf904a50bb9106a1f177a0a81a405b?s=128&d=identicon&r=PG", "display_name": "dascandy", "link": "https://stackoverflow.com/users/272708/dascandy"}, "edited": false, "score": 3, "creation_date": 1476953799, "post_id": 40148484, "comment_id": 67568719, "body": "The dereference takes priority, so it&#39;s (contents of address a) times (pointer to a). You can tell, because the compile error says &quot;invalid operands to binary * (have &#39;struct S&#39; and &#39;struct S *&#39;)&quot; which are those two types."}, {"owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1477039868, "post_id": 40148484, "comment_id": 67612043, "body": "I code pre C99, so no bools :-) But you do make a good point (+1), although order of assignment wasn&#39;t really the point of my answer"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1477420971, "post_id": 40148484, "comment_id": 67757025, "body": "But in this case, <code>y</code> isn&#39;t even a variable, it&#39;s the expression <code>*a *a</code>, and you can&#39;t assign to the result of a multiplication."}, {"owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1504269128, "post_id": 40148484, "comment_id": 78960916, "body": "@Barmar indeed but the compiler doesn&#39;t get that far, it has already decided that the operands to the &quot;binary *&quot; are invalid before it looks at the assignment operator."}], "tags": [], "owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1476949817, "creation_date": 1476949817, "answer_id": 40148484, "question_id": 40135392, "link": "https://stackoverflow.com/questions/40135392/why-doesnt-the-compiler-report-a-missing-semicolon/40148484#40148484", "title": "Why doesn&#39;t the compiler report a missing semicolon?", "body": "<p>Some good answers above, but I will elaborate.</p>\n\n<pre><code>temp = *a *a = *b;\n</code></pre>\n\n<p>This is actually a case of <code>x = y = z;</code> where both <code>x</code> and <code>y</code> are assigned the value of <code>z</code>.</p>\n\n<p>What you are saying is <code>the contents of address (a times a) become equal to the contents of b, as does temp</code>.</p>\n\n<p>In short, <code>*a *a = &lt;any integer value&gt;</code> is a valid statement.  As previously pointed out, the first <code>*</code> dereferences a pointer, while the second multiplies two values.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 3, "last_activity_date": 1476976568, "creation_date": 1476976568, "answer_id": 40158368, "question_id": 40135392, "link": "https://stackoverflow.com/questions/40135392/why-doesnt-the-compiler-report-a-missing-semicolon/40158368#40158368", "title": "Why doesn&#39;t the compiler report a missing semicolon?", "body": "<p>Most compilers parse source files in order, and report the line where they discover that something was wrong.  The first 12 lines of your C program could be the start of a valid (error-free) C program.  The first 13 lines of your program cannot.  Some compilers will note the location of things they encounter which are not errors in and of themselves, and in most cases won't trigger errors later in the code, but might not be valid in combination with something else.  For example:</p>\n\n<pre><code>int foo;\n...\nfloat foo;\n</code></pre>\n\n<p>The declaration <code>int foo;</code> by itself would be perfectly fine.  Likewise the declaration <code>float foo;</code>.  Some compilers may record the line number where the first declaration appeared, and associate an informational message with that line, to help the programmer identify cases where the earlier definition is actually the erroneous one.  Compilers may also keep the line numbers associated with something like a <code>do</code>, which can be reported if the associated <code>while</code> does not appear in the right place.  For cases where the likely location of the problem would be immediately preceding the line where the error is discovered, however, compilers generally don't bother adding an extra report for the position.</p>\n"}, {"comments": [{"owner": {"reputation": 2444, "user_id": 3197387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ec27435a4e7d85c8eb8b5e4799abc7?s=128&d=identicon&r=PG&f=1", "display_name": "Sisir", "link": "https://stackoverflow.com/users/3197387/sisir"}, "edited": false, "score": 0, "creation_date": 1617819051, "post_id": 65136598, "comment_id": 118416375, "body": "nice analogy for the current problem"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1607045530, "last_edit_date": 1607045530, "creation_date": 1607044866, "answer_id": 65136598, "question_id": 40135392, "link": "https://stackoverflow.com/questions/40135392/why-doesnt-the-compiler-report-a-missing-semicolon/65136598#65136598", "title": "Why doesn&#39;t the compiler report a missing semicolon?", "body": "<p>There's a Polish movie titled &quot;Nic \u015amiesznego&quot; (&quot;Nothing Funny&quot;). Here's an excerpt of relevant dialogue <a href=\"https://youtu.be/PuNOdgsjAuU\" rel=\"nofollow noreferrer\">from a scene</a> that shows <strong>exactly why</strong> the compiler developers may be a bit shy to proclaim such missing semicolons with reckless abandon.</p>\n<p><strong>Director:</strong> What do you mean &quot;this one&quot;?! Are you saying that this object is in my field of view? Point it out with your finger, because I want to believe I'm dreaming.</p>\n<p><strong>Adam:</strong> This, right here (points).</p>\n<p><strong>Director:</strong> This? What is this?!</p>\n<p><strong>Adam:</strong> What do you mean? It's a forest.</p>\n<p><strong>Director:</strong> Can you tell me why the bloody hell would I need a forest?</p>\n<p><strong>Adam:</strong> How come &quot;bloody hell&quot;? Here, in the screenplay, it says a forest, it says...</p>\n<p><strong>Director:</strong> In the screenplay? Find it in this screenplay for me.</p>\n<p><strong>Adam:</strong> Here: (reads) &quot;When they came upon the crest of the road, in front of them appeared a forest&quot;</p>\n<p><strong>Director:</strong> Flip the page.</p>\n<p><strong>Adam:</strong> Oh crap...</p>\n<p><strong>Director:</strong> Read it for me.</p>\n<p><strong>Adam:</strong> in front of them appeared a forest... of headstones.</p>\n<p>See, it's not generally possible to tell in advance that you really meant a forest and not a forest of headstones.</p>\n"}], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12487, "favorite_count": 9, "accepted_answer_id": 40135393, "answer_count": 5, "score": 118, "last_activity_date": 1607045530, "creation_date": 1476889949, "last_edit_date": 1553425307, "question_id": 40135392, "link": "https://stackoverflow.com/questions/40135392/why-doesnt-the-compiler-report-a-missing-semicolon", "title": "Why doesn&#39;t the compiler report a missing semicolon?", "body": "<p>I have this simple program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct S\n{\n    int i;\n};\n\nvoid swap(struct S *a, struct S *b)\n{\n    struct S temp;\n    temp = *a    /* Oops, missing a semicolon here... */\n    *a = *b;\n    *b = temp;\n}\n\nint main(void)\n{\n    struct S a = { 1 };\n    struct S b = { 2 };\n\n    swap(&amp;a, &amp;b);\n}\n</code></pre>\n\n<p>As seen <a href=\"http://ideone.com/jaNv9B\" rel=\"noreferrer\">on e.g. ideone.com</a> this gives an error:</p>\n\n<blockquote>\n<pre><code>prog.c: In function 'swap':\nprog.c:12:5: error: invalid operands to binary * (have 'struct S' and 'struct S *')\n     *a = *b;\n     ^\n</code></pre>\n</blockquote>\n\n<p>Why doesn't the compiler detect the missing semicolon?</p>\n\n<hr>\n\n<p>Note: This question and its answer is motivated by <a href=\"https://stackoverflow.com/q/40134786\">this question</a>. While there are <a href=\"https://stackoverflow.com/q/7071168\">other questions</a> similar to this, I didn't find anything mentioning the free-form capacity of the C language which is what is causing this and related errors.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1476889709, "post_id": 40135236, "comment_id": 67540345, "body": "With an array with a size, Yes, you can passing it to the function as a <code>int *</code>"}, {"owner": {"reputation": 1207, "user_id": 1687909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642495040a8d403a6c573a42fa9354?s=128&d=identicon&r=PG&f=1", "display_name": "Mogzol", "link": "https://stackoverflow.com/users/1687909/mogzol"}, "edited": false, "score": 1, "creation_date": 1476889899, "post_id": 40135236, "comment_id": 67540489, "body": "You have to pass it as a parameter, because what would happen if secondFunction was called from somewhere else? It wouldn&#39;t work, so it would be dangerous (not to mention make code very hard to read) if you were able to access variables from the calling function."}], "answers": [{"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 4, "last_activity_date": 1476889809, "creation_date": 1476889809, "answer_id": 40135348, "question_id": 40135236, "link": "https://stackoverflow.com/questions/40135236/can-an-inner-function-use-variables-defined-in-the-parent-function/40135348#40135348", "title": "can an inner function use variables defined in the parent function?", "body": "<p>There is no inner function here (nor there is in C). What you have is a function that calls another one; and no you can't access in the callee something that was defined in the caller except if you pass it explicitly as a parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 2512, "user_id": 5771617, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/fUXWF.jpg?s=128&g=1", "display_name": "lu5er", "link": "https://stackoverflow.com/users/5771617/lu5er"}, "is_accepted": false, "score": 1, "last_activity_date": 1476889910, "creation_date": 1476889910, "answer_id": 40135374, "question_id": 40135236, "link": "https://stackoverflow.com/questions/40135236/can-an-inner-function-use-variables-defined-in-the-parent-function/40135374#40135374", "title": "can an inner function use variables defined in the parent function?", "body": "<p>Any variable declared in the inner block shadows the outer variable declaration.</p>\n\n<pre><code>{\nint a = 6;\n  {\n    int a = 9;\n    // won't affect the outer declaration\n  }\n// value of a = 6 here\n}\n</code></pre>\n\n<p>But as you are asking there cannot be any inner function in C. Only we can have inner blocks defined within braces.</p>\n"}, {"tags": [], "owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "is_accepted": false, "score": 2, "last_activity_date": 1476889948, "creation_date": 1476889948, "answer_id": 40135391, "question_id": 40135236, "link": "https://stackoverflow.com/questions/40135236/can-an-inner-function-use-variables-defined-in-the-parent-function/40135391#40135391", "title": "can an inner function use variables defined in the parent function?", "body": "<p>Technically speaking, it is actually possible to misuse local variables to access the stack frame of a parent function, yes. But this is a very, very ugly solution, set aside platform-dependent. So just pass it as a parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 6, "last_activity_date": 1476890083, "creation_date": 1476890083, "answer_id": 40135440, "question_id": 40135236, "link": "https://stackoverflow.com/questions/40135236/can-an-inner-function-use-variables-defined-in-the-parent-function/40135440#40135440", "title": "can an inner function use variables defined in the parent function?", "body": "<blockquote>\n  <p>Can a variable be used in an inner function if it was defined in the outer function?</p>\n</blockquote>\n\n<p>C does not have nested functions, which is the only sense in which the \"inner\" and \"outer\" designations would make sense.  When one function calls another, as in your example, it is the <em>call</em> that is \"inside\" the first function, not the called function.</p>\n\n<p>In any event, variables declared at block scope, such as in your example, are visible only within the remainder of the lexical extent of the declaring block.  They are not visible in the body of a function called from within that block -- not even if it is the same function, called recursively.</p>\n\n<blockquote>\n  <p>or should i modify the inner loop to take a third parameter which would be the array?</p>\n</blockquote>\n\n<p>The most natural implementation would be, yes, to give the function a third parameter by which to provide (a pointer to the first element of) the array to that function.</p>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 2, "last_activity_date": 1476890236, "creation_date": 1476890236, "answer_id": 40135498, "question_id": 40135236, "link": "https://stackoverflow.com/questions/40135236/can-an-inner-function-use-variables-defined-in-the-parent-function/40135498#40135498", "title": "can an inner function use variables defined in the parent function?", "body": "<p>Interpreting what you need, you can use pointers to do that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid test ( int *pointer, size_t size)\n{\n    for (size_t i=0; i&lt;size; i++)\n    {\n        printf(\"array[%zu] = %d\\n\", i, *pointer++);\n    }\n}\n\nint main(void) {\n\n    int array[] = { 1, 2, 3, 4, 5};\n\n    test(array, sizeof(array)/sizeof(array[0]));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6829310, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1cdca95bf2fb59e73ff1c38270f21c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Abeer", "link": "https://stackoverflow.com/users/6829310/abeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 40135440, "answer_count": 5, "score": 2, "last_activity_date": 1476890236, "creation_date": 1476889599, "question_id": 40135236, "link": "https://stackoverflow.com/questions/40135236/can-an-inner-function-use-variables-defined-in-the-parent-function", "title": "can an inner function use variables defined in the parent function?", "body": "<p>Can a variable be used in an inner function if it was defined in the outer function? or should i modify the inner loop to take a third parameter which would be the array?</p>\n\n<p>Example of the code i'm asking about?</p>\n\n<pre><code>perm_rec1 ( int nr_value , int N)\n{\n    int array[];\n    secondFunction(int nr_value, int N)\n}\n</code></pre>\n\n<p>The inner function:</p>\n\n<pre><code>secondFunction (int nr_value, int N)\n{\n    int temp = array; //is This possible? Or third parameter?\n\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "makefile"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1476889353, "post_id": 40135086, "comment_id": 67540023, "body": "Please just paste your code here (using the code formatting) instead of attaching screenshots. No-one else can save, compile and execute your screenshots!"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 6, "creation_date": 1476889612, "post_id": 40135086, "comment_id": 67540270, "body": "BTW, you&#39;re running Microsoft make rather than gnu make, so make sure you&#39;re looking at the right documentation. Or run gnu make and see if it&#39;s error is more helpful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1476898326, "post_id": 40135086, "comment_id": 67545599, "body": "one possibility is the <code>make</code> is not using the correct <code>make.exe</code>. Suggest examine your PATH environment variable or better, use the full path when invoking <code>make</code>.   Another possibility is  the <code>make</code> is not using the desired shell when running.  This can be corrected by having the first statement in the makefile be:  <code>shell=shellpath&#47;name</code>"}], "owner": {"reputation": 158, "user_id": 6277619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GVJ50.jpg?s=128&g=1", "display_name": "Vincent_Bryan", "link": "https://stackoverflow.com/users/6277619/vincent-bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 559, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476889931, "creation_date": 1476889257, "last_edit_date": 1476889931, "question_id": 40135086, "link": "https://stackoverflow.com/questions/40135086/fail-to-generate-exe-using-makefile", "title": "Fail to generate .exe using makefile", "body": "<p>I write a simple C program like this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    printf(\"Hello World!\\n\");\n}\n</code></pre>\n\n<p>And I also write a makefile:</p>\n\n<pre><code>test: main.o\n    gcc -o test main.o\n\nmain.o:main.c\n    gcc -c -o main.o main.c\n</code></pre>\n\n<p>And they are in the same file:\n<a href=\"https://i.stack.imgur.com/Awxku.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/Awxku.png\" alt=\"enter image description here\"></a>\nBut here comes an error when I try to use make:\n<a href=\"https://i.stack.imgur.com/VQO05.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/VQO05.png\" alt=\"enter image description here\"></a>\nThen I try in this way and it works:\n<a href=\"https://i.stack.imgur.com/H2XVp.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/H2XVp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why can't I generate test.exe using make?Is there anything wrong with the makefile?I'm new and any advice will help^_^</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1476889188, "post_id": 40135027, "comment_id": 67539911, "body": "Without even looking at your code, I can almost certainly conclude that this is a <i>floating point issue.</i>  See <a href=\"http://stackoverflow.com/questions/21895756/why-are-floating-point-numbers-inaccurate\">Why are floating point numbers inaccurate?</a>"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1476889244, "post_id": 40135027, "comment_id": 67539957, "body": "Welcome to the joys of floating point inaccuracy.  It&#39;s going to bug the rest of your working life if you become a developer.  Here&#39;s something to read:  <a href=\"http://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples\" title=\"floating point inaccuracy examples\">stackoverflow.com/questions/2100490/&hellip;</a>"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1476889268, "post_id": 40135027, "comment_id": 67539969, "body": "This doesn&#39;t appear to be a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a>. Replacing your code with one of those would make confirming that Robert Harvey is almost certainly right much faster."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1476889321, "post_id": 40135027, "comment_id": 67539999, "body": "The <code>double</code> type is incapable of representing the number 2.99, instead, you get something closer to 2.9900000000000002131628207.  The same is true for the other decimals.  (The computer is binary.)"}, {"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 0, "creation_date": 1476889411, "post_id": 40135027, "comment_id": 67540076, "body": "<i>&quot;the result appeared to be 0.00001 instead of the value as assigned (299.9 or 349.99 or 999.99)&quot;</i> \u2013 dang, that&#39;s a <i>really</i> big floating point inaccuracy."}, {"owner": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "edited": false, "score": 0, "creation_date": 1476889424, "post_id": 40135027, "comment_id": 67540094, "body": "Thank you, guys! I&#39;m trying to read it right now. This may help me somehow."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1476889557, "post_id": 40135027, "comment_id": 67540225, "body": "There are several layers of bugs in this code - fixing one only reveals more problems..."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 2, "creation_date": 1476889663, "post_id": 40135027, "comment_id": 67540312, "body": "I mean, uninitialized pointers, pointer type mismatch etc. This code should crash, but is too buggy to do so;) Turn on compiler warnings and read them."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476891901, "post_id": 40135027, "comment_id": 67541817, "body": "&quot;result appeared to be 0.00001&quot;  --&gt; Not possible for output to be <code>&quot;0.00001&quot;</code>. Post the <i>exact</i> textual output of <code>printf(&quot;The cost of this item is %fl\\n&quot;, costPtr);</code>  Hint: Are you getting <code>&quot;0.000000l&quot;</code>?  Look closely at the format."}, {"owner": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "edited": false, "score": 0, "creation_date": 1476892143, "post_id": 40135027, "comment_id": 67541975, "body": "I started from the scratch and made it worked. Thanks everyone for suggestion and help :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1476895600, "post_id": 40135027, "comment_id": 67544092, "body": "@RobertHarvey That&#39;s why a reasonable person looks at the question rather than just the title."}, {"owner": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "edited": false, "score": 0, "creation_date": 1477011999, "post_id": 40135027, "comment_id": 67602110, "body": "I asked my teacher and she pointed out that it was because I wrote &quot;C&quot; instead of &#39;C&#39;... I fixed it and it worked ^^!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "edited": false, "score": 1, "creation_date": 1476889528, "post_id": 40135125, "comment_id": 67540196, "body": "I tried this method, yet it crashed, unfortunately."}, {"owner": {"reputation": 30181, "user_id": 209629, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3784fe19d5c3d40d66ba91788f9bf007?s=128&d=identicon&r=PG", "display_name": "vz0", "link": "https://stackoverflow.com/users/209629/vz0"}, "reply_to_user": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "edited": false, "score": 0, "creation_date": 1476889767, "post_id": 40135125, "comment_id": 67540395, "body": "@user6866732 Edited my answer"}, {"owner": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "edited": false, "score": 0, "creation_date": 1476892179, "post_id": 40135125, "comment_id": 67541992, "body": "Thank you for your suggestion :)"}], "tags": [], "owner": {"reputation": 30181, "user_id": 209629, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3784fe19d5c3d40d66ba91788f9bf007?s=128&d=identicon&r=PG", "display_name": "vz0", "link": "https://stackoverflow.com/users/209629/vz0"}, "is_accepted": false, "score": 2, "last_activity_date": 1476889732, "last_edit_date": 1476889732, "creation_date": 1476889330, "answer_id": 40135125, "question_id": 40135027, "link": "https://stackoverflow.com/questions/40135027/the-result-appeared-to-be-0-00001-instead-of-the-value-i-assigned-why/40135125#40135125", "title": "The result appeared to be 0.00001 instead of the value I assigned. Why?", "body": "<p>Your program, is malformed and with Undefined Behaviour, because you are calling to to <code>SetCost</code> with a <code>double**</code> on a <code>double*</code> argument.</p>\n\n<p>You should better declare the <code>cost</code> variable as a normal <code>double</code> in <code>main</code>:</p>\n\n<pre><code>int main()\n{\n    // ...\n    double cost;\n    // ...\n    SetCost(selection, &amp;cost);\n    printf(\"The cost of this item is %fl\\n\", cost);\n    // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "edited": false, "score": 0, "creation_date": 1476892196, "post_id": 40135246, "comment_id": 67542004, "body": "Thank you so much for your help :)"}], "tags": [], "owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "is_accepted": false, "score": 0, "last_activity_date": 1476889610, "creation_date": 1476889610, "answer_id": 40135246, "question_id": 40135027, "link": "https://stackoverflow.com/questions/40135027/the-result-appeared-to-be-0-00001-instead-of-the-value-i-assigned-why/40135246#40135246", "title": "The result appeared to be 0.00001 instead of the value I assigned. Why?", "body": "<p>In <code>main</code>, declare <code>double cost</code> and pass <code>&amp;cost</code> to <code>SetCost</code>. Then print <code>cost</code>. There are problems here that your compiler could have caught if warnings were enabled. For example, you're passing a <code>double **</code> to <code>SetCost</code> when it's looking for a <code>double *</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 6866732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e04df3487bdfde880dad72132da8aa6d?s=128&d=identicon&r=PG&f=1", "display_name": "user6866732", "link": "https://stackoverflow.com/users/6866732/user6866732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "closed_date": 1476896332, "answer_count": 2, "score": 0, "last_activity_date": 1476889732, "creation_date": 1476889095, "question_id": 40135027, "link": "https://stackoverflow.com/questions/40135027/the-result-appeared-to-be-0-00001-instead-of-the-value-i-assigned-why", "closed_reason": "Not suitable for this site", "title": "The result appeared to be 0.00001 instead of the value I assigned. Why?", "body": "<p>Down here is a part of my current code (still incomplete). I was trying to assign the amount of cost to *costPtr. But after assigning it, I test the result in the main function to see if I got the right value for my choice, the result appeared to be 0.00001 instead of the value as assigned (299.9 or 349.99 or 999.99). What's wrong? I couldn't find the answer.</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid DisplayApps(char *selectionPtr);\nvoid SetCost(char selection, double *costPtr);\n//void PaymentOptions(double *depositPtr, double cost);\n//int Compare(double deposit, double choiceCost);\n//void Pay(double *depositPtr, double choiceCost);\n//void GetChanged(double *depositPtr, double choiceCost);\n//void DoItAgain(char *quitPtr);\n\nint main()\n{\n    char selection;\n    char *selectionPtr;\n    //double choiceCost;\n    double *costPtr;\n    //double *depositPtr;\n    //char *quitPtr;\n\n    printf(\"Welcome to the App Store\\n\");\n    printf(\"***************************\\n\\n\");\n    DisplayApps(&amp;selectionPtr);\n    selection = selectionPtr;\n    printf(\"Your choice %c\\n\", selection);\n    SetCost(selection, &amp;costPtr);\n    printf(\"The cost of this item is %fl\\n\", costPtr);\n\n    return 0;\n}\n\nvoid DisplayApps(char *selectionPtr)\n{\n    printf(\"-------------------------\\n\");\n    printf(\"HERE ARE THE SLECTIONS\\n\");\n    printf(\"C -- Clown Punching             $299.99\\n\");\n    printf(\"V -- Virtual Snow Globe         $349.99\\n\");\n    printf(\"R -- Remote PC                  $999.99\\n\");\n    printf(\"G -- Grocery List Helper        $2.99\\n\");\n    printf(\"M -- Mobile Cam Viewer          $89.99\\n\");\n    printf(\"\\n\");\n\n    printf(\"Please enter a selection: \", *selectionPtr);\n    scanf(\" %c\", &amp;*selectionPtr);\n\n}\n\nvoid SetCost(char selection, double *costPtr)\n{\n    double c = 299.99;\n    double v = 349.99;\n    double r = 999.99;\n    double g = 2.99;\n    double m = 89.99;\n    if (selection == \"C\" || selection == \"c\")\n    {\n        *costPtr = c;\n    }\n    else if (selection == \"V\" || selection == \"v\")\n    {\n        *costPtr = v;\n    }\n    else if (selection == \"R\" || selection == \"r\")\n    {\n        *costPtr = r;\n    }\n    else if (selection == \"G\" || selection == \"g\")\n    {\n        *costPtr = g;\n    }\n    else if (selection == \"M\" || selection == \"m\")\n    {\n        *costPtr = m;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop", "floating-point"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1476889364, "post_id": 40134984, "comment_id": 67540035, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}, {"owner": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1476917395, "post_id": 40134984, "comment_id": 67555459, "body": "I think the problem needs clarification. Are the decrements supposed to be in double arithmetic or in real number arithmetic?"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1476889688, "last_edit_date": 1476889688, "creation_date": 1476889305, "answer_id": 40135105, "question_id": 40134984, "link": "https://stackoverflow.com/questions/40134984/looping-over-a-range-of-floats-in-c/40135105#40135105", "title": "Looping over a range of floats in C", "body": "<p>Using a <code>double</code> as a counter in a <code>for</code> loop requires very careful consideration. In many instances it's best avoided.</p>\n\n<p>I'm sure you know that not all numbers that are exact in decimal are also exact in binary floating point. In fact, for IEEE754 floating point, only dyadic rationals are. So 0.5 is, but 0.4, 0.3, 0.2, and 0.1 are not.</p>\n\n<p>The closest IEEE754 floating point <code>double</code> to 0.2 is actually the slightly larger <code>0.200000000000000011102230246251565404236316680908203125</code>.</p>\n\n<p>In your case a repeated subtraction of this from 0.9 eventually causes a number whose first significant figure is <code>a</code> to become a number whose first significant figure is <code>a - 3</code>: your bug then manifests itself.</p>\n\n<p>The simple remedy is to work in integers, decement by 1 each time, and scale your output using <code>step</code>.</p>\n"}], "owner": {"reputation": 372, "user_id": 1751578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bbb7862a2b58e758448b737c243b57ba?s=128&d=identicon&r=PG", "display_name": "Pavithran Iyer", "link": "https://stackoverflow.com/users/1751578/pavithran-iyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 1, "accepted_answer_id": 40135105, "answer_count": 1, "score": 3, "last_activity_date": 1476889688, "creation_date": 1476888996, "last_edit_date": 1592644375, "question_id": 40134984, "link": "https://stackoverflow.com/questions/40134984/looping-over-a-range-of-floats-in-c", "title": "Looping over a range of floats in C", "body": "<p>I am trying to write a program in C to accomplish the following task.</p>\n<blockquote>\n<p>Input: Three double-precision numbers, a, b, and c.</p>\n<p>Output: All the numbers from b to a, that can be reached by decrements of c.</p>\n</blockquote>\n<p>Here is a simple program (filename: range.c).</p>\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    double high, low, step, var;\n    printf(&quot;Enter the &lt;lower limit&gt; &lt;upperlimit&gt; &lt;step&gt;\\n&gt;&gt;&quot;);\n    scanf(&quot;%lf %lf %lf&quot;, &amp;low, &amp;high, &amp;step);\n    printf(&quot;Number in the requested range\\n&quot;);\n    for (var = high; var &gt;= low; var -= step)\n        printf(&quot;%g\\n&quot;, var);\n    return 0;\n}\n</code></pre>\n<p>However, the for loop behaves rather bizarrely for some inputs. For instance, the following.</p>\n<pre><code>10-236-49-81:stackoverflow pavithran$ ./range.o \nEnter the &lt;lower limit&gt; &lt;upperlimit&gt; &lt;step&gt;\n&gt;&gt;0.1 0.9 0.2\nNumber in the requested range\n0.9\n0.7\n0.5\n0.3\n10-236-49-81:stackoverflow pavithran$ \n</code></pre>\n<p>I cannot figure out why the loop quits at var = 0.1. While for another input, it behaves as expected.</p>\n<pre><code>10-236-49-81:stackoverflow pavithran$ ./range.o \nEnter the &lt;lower limit&gt; &lt;upperlimit&gt; &lt;step&gt;\n&gt;&gt;0.1 0.5 0.1\nNumber in the requested range\n0.5\n0.4\n0.3\n0.2\n0.1\n10-236-49-81:stackoverflow pavithran$ \n</code></pre>\n<p>Had the weird behaviour in the first situation got something to do with numeric precision?</p>\n<p>How can I ensure that the range will always contain floor((high - low)/step) + 1 numbers?</p>\n<p>I have tried an alternate method of looping over floats, where I scale the loop variables to integers, and print the result of the loop variable divided by the scaling used. But there's perhaps a better way...</p>\n"}, {"tags": ["python", "c", "linux", "posix"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1476889072, "post_id": 40134953, "comment_id": 67539806, "body": "From the dupe: <i>however, if the file was moved or deleted since then, it may no longer be accurate</i>"}, {"owner": {"reputation": 559, "user_id": 1397014, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e22990b77e978f39ec138927a0f1125?s=128&d=identicon&r=PG", "display_name": "felipou", "link": "https://stackoverflow.com/users/1397014/felipou"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1476896063, "post_id": 40134953, "comment_id": 67544327, "body": "Also on the dupe: the answer by zneak supports the file being moved, but it only worked on Mac OS X when I tested it, and it&#39;s not available on Python (F_GETPATH is not defined on Python&#39;s fcntl)."}], "owner": {"reputation": 559, "user_id": 1397014, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e22990b77e978f39ec138927a0f1125?s=128&d=identicon&r=PG", "display_name": "felipou", "link": "https://stackoverflow.com/users/1397014/felipou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "closed_date": 1476889056, "answer_count": 0, "score": 1, "last_activity_date": 1476888923, "creation_date": 1476888923, "question_id": 40134953, "link": "https://stackoverflow.com/questions/40134953/how-can-i-get-the-new-name-of-a-renamed-file-given-its-file-descriptor-object", "closed_reason": "Duplicate", "title": "How can I get the new name of a renamed file given its file descriptor/object?", "body": "<p>When I open a file in Python with <code>f = open(\"filename.txt\")</code>, I can access the filename using the <code>name</code> property (<code>file_object.name</code>). However, if that file is moved to another path, the <code>name</code> property isn't updated.</p>\n\n<p>I can detect that the file has moved by opening the file again, calling stat and comparing the inode, but I couldn't find a way to get the new name of the original file. Is this possible? If not in Python, is there a way in C? Posix? Linux?</p>\n"}, {"tags": ["c", "linux", "pointers", "structure"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1476888732, "post_id": 40134786, "comment_id": 67539528, "body": "Sometimes errors are not on the line that gets reported, but on one of the previous lines. Take a look at the previous line and see if that looks okay. Like for example maybe not missing a semicolon?"}, {"owner": {"reputation": 6795, "user_id": 1366855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f4f015bc6c748fd2a4e7d700994c51e?s=128&d=identicon&r=PG", "display_name": "Ben Aaronson", "link": "https://stackoverflow.com/users/1366855/ben-aaronson"}, "edited": false, "score": 0, "creation_date": 1476968101, "post_id": 40134786, "comment_id": 67578767, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40135392/why-doesnt-compiler-report-missing-semicolon\">Why doesn&#39;t compiler report missing semicolon?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 9, "last_activity_date": 1476888843, "creation_date": 1476888843, "answer_id": 40134918, "question_id": 40134786, "link": "https://stackoverflow.com/questions/40134786/invalid-operands-to-binary-have-ab-aka-struct-a-and-ab-aka-struct-a/40134918#40134918", "title": "Invalid operands to binary * (have \u2018ab {aka struct a}\u2019 and \u2018ab * {aka struct a *}\u2019)", "body": "<p>There's a missing semicolon at the end of line 26 (the previous line).</p>\n\n<pre><code>tmp=*p\n</code></pre>\n\n<p>Due to this, the compiler considers the next line to be part of the same statement, meaning that the entire statement is interpreted as:</p>\n\n<pre><code>tmp=*p * p = *q;\n</code></pre>\n\n<p>The second <code>*</code> is seen as a multiply of two operands - <code>*p</code> and <code>p</code> - which is where the error message comes from:</p>\n\n<blockquote>\n  <p>invalid operands <strong>to binary *</strong> (have \u2018ab {aka \n   struct a}\u2019 and \u2018ab * {aka struct a *}\u2019)</p>\n</blockquote>\n\n<p>(Because <code>*p</code> is of type <code>ab</code>, and <code>p</code> is of type <code>ab *</code>).</p>\n"}], "owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1853, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1476982456, "creation_date": 1476888519, "last_edit_date": 1476982456, "question_id": 40134786, "link": "https://stackoverflow.com/questions/40134786/invalid-operands-to-binary-have-ab-aka-struct-a-and-ab-aka-struct-a", "title": "Invalid operands to binary * (have \u2018ab {aka struct a}\u2019 and \u2018ab * {aka struct a *}\u2019)", "body": "<p>I wrote a program to swap two structures in an array and my coding is as follows</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct a {\n    char *name;\n    int id;\n    char *department;\n    int num;\n};\ntypedef struct a ab;\n\nvoid swap(ab *, ab *);\n\nint main(int argc, char *argv[])\n{\n    ab array[2] = {{\"Saud\", 137, \"Electronics\", 500}, {\"Ebad\", 111, \"Telecom\", 570}};\n    printf(\"First student data:\\n%s\\t%d\\t%s\\t%d\", array[0].name, array[0].id,\n           array[0].department, array[0].num);\n\n    printf(\"\\nSecond Student Data\\n%s\\t%d\\t%s\\t%d\\n\", array[1].name, array[1].id,\n           array[1].department, array[1].num);\n\n    swap(&amp;array[0], &amp;array[1]);\n    // printf(\"\")\n    return 0;\n}\n\nvoid swap(ab *p, ab *q){\n    ab tmp;\n    tmp = *p\n    *p = *q;\n    *q = tmp;\n}\n</code></pre>\n\n<p>On compiling it it gives an error,</p>\n\n<blockquote>\n  <p>newproject.c: In function \u2018swap\u2019: <br/>\n  newproject.c:26:3: error: invalid operands to binary * (have \u2018ab {aka <br/>\n  struct a}\u2019 and \u2018ab * {aka struct a *}\u2019) <br/>\n  *p=*q;</p>\n</blockquote>\n\n<p>What is the mistake?</p>\n"}, {"tags": ["c", "xml", "libxml2"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 6177359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bd4b6c0682cc166480adac20ed271f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6177359/lucas"}, "is_accepted": true, "score": 5, "last_activity_date": 1476965019, "creation_date": 1476965019, "answer_id": 40153906, "question_id": 40134764, "link": "https://stackoverflow.com/questions/40134764/xml-get-an-array-of-string-from-text-cut-by-element/40153906#40153906", "title": "XML : Get an array of string from text cut by element", "body": "<p>I have found the solution, and I have to say I feel ashamed because it took me too much time to find it.</p>\n\n<p>It's simple, I take this exemple again :</p>\n\n<pre><code>&lt;option&gt;some text &lt;middletag /&gt;other text&lt;/option&gt;\n</code></pre>\n\n<p>With this you can have a <code>xmlnode *</code> on the <code>&lt;option&gt;</code> node. We can find the part <code>some text &lt;middletag /&gt;other text</code> with a loop on the list <code>xmlnode-&gt;children</code>. We just have to look for the nodes with the type <code>XML_TEXT_NODE</code> and get the content.</p>\n\n<p>Code :</p>\n\n<pre><code>xmlNode *node = option_node-&gt;children;\nfor (; node; node = node-&gt;next){\n    if (node-&gt;type == XML_TEXT_NODE) {\n        printf(\"%s\\n\", node-&gt;content);\n    }\n}\n</code></pre>\n\n<p>Result :</p>\n\n<pre><code>some text\nother text\n</code></pre>\n\n<p>Now, with malloc / realloc, we can save it in an array.</p>\n"}], "owner": {"reputation": 101, "user_id": 6177359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bd4b6c0682cc166480adac20ed271f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6177359/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 40153906, "answer_count": 1, "score": 2, "last_activity_date": 1476965019, "creation_date": 1476888462, "question_id": 40134764, "link": "https://stackoverflow.com/questions/40134764/xml-get-an-array-of-string-from-text-cut-by-element", "title": "XML : Get an array of string from text cut by element", "body": "<p>I need to get an array of string from a text in a node which is itself cut by an other element in a xml file. I work in C with the libxml2 library.</p>\n\n<p>Exemple :<br>\n<code>&lt;option&gt;some text &lt;middletag /&gt;other text&lt;/option&gt;</code></p>\n\n<p>I tried with <code>xmlNodeGetContent(xmlnode);</code> but I only get a string like <code>\"some text other text\"</code>.</p>\n\n<p>The question is : Is it possible to get an array of string which, with this exemple, would be <code>{\"some text \", \"other text\"}</code>?</p>\n"}, {"tags": ["c", "arrays", "terminal", "printf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476888486, "post_id": 40134732, "comment_id": 67539354, "body": "Are you using any <code>tab</code>s in your code or just spaces? What is the font in your terminal?"}, {"owner": {"reputation": 51, "user_id": 6244137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kqQs7.jpg?s=128&g=1", "display_name": "Dominic Baker", "link": "https://stackoverflow.com/users/6244137/dominic-baker"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476888537, "post_id": 40134732, "comment_id": 67539401, "body": "I use tabs and it is going to be printed in stars in terminal, I am trying to create a program that will print out anything that is input into the terminal in stars"}, {"owner": {"reputation": 6743, "user_id": 6919895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qqkN_JOgCvM/AAAAAAAAAAI/AAAAAAAAABE/m4r_i_2yiy8/photo.jpg?sz=128", "display_name": "Treycos", "link": "https://stackoverflow.com/users/6919895/treycos"}, "edited": false, "score": 0, "creation_date": 1476888567, "post_id": 40134732, "comment_id": 67539413, "body": "Damn, i made a similar pogram to spam those &quot;press ctrl + f to see the message&quot; on youtube, but in c++..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476888625, "post_id": 40134732, "comment_id": 67539456, "body": "Tabs might have a different width in your editor and your terminal. And by font I mean the <i>font</i> your terminal is using to print the stars."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476888647, "post_id": 40134732, "comment_id": 67539474, "body": "You need to print a <code>newline</code> after each row of stars."}, {"owner": {"reputation": 51, "user_id": 6244137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kqQs7.jpg?s=128&g=1", "display_name": "Dominic Baker", "link": "https://stackoverflow.com/users/6244137/dominic-baker"}, "edited": false, "score": 0, "creation_date": 1476888786, "post_id": 40134732, "comment_id": 67539576, "body": "within my printf i have used spaces not tabs sorry if that is what you mean"}, {"owner": {"reputation": 51, "user_id": 6244137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kqQs7.jpg?s=128&g=1", "display_name": "Dominic Baker", "link": "https://stackoverflow.com/users/6244137/dominic-baker"}, "edited": false, "score": 0, "creation_date": 1476888954, "post_id": 40134732, "comment_id": 67539708, "body": "I have tried using /n in print that doesn&#39;t work the objective is to be able to input something such as &quot;hey world&quot; and it be printed in terminal as ****"}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1476890022, "post_id": 40134732, "comment_id": 67540567, "body": "@dominicbaker In the main part of the code <code>printf(&quot;%c&quot;, alfabetlow[rows][col][chars]);</code> the variable &#39;<b>chars</b>&#39; is not initialised."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6244137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kqQs7.jpg?s=128&g=1", "display_name": "Dominic Baker", "link": "https://stackoverflow.com/users/6244137/dominic-baker"}, "edited": false, "score": 0, "creation_date": 1476889737, "post_id": 40135108, "comment_id": 67540370, "body": "you life saver!"}], "tags": [], "owner": {"reputation": 36, "user_id": 7043078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baaf024fb2703067f2b04ad318e491d7?s=128&d=identicon&r=PG", "display_name": "Kopacz", "link": "https://stackoverflow.com/users/7043078/kopacz"}, "is_accepted": true, "score": 2, "last_activity_date": 1476889307, "creation_date": 1476889307, "answer_id": 40135108, "question_id": 40134732, "link": "https://stackoverflow.com/questions/40134732/why-wont-the-output-in-terminal-line-up-side-by-side/40135108#40135108", "title": "why wont the output in terminal line up side by side", "body": "<p>You're missing newline after every printed row. Here's how it should look like:</p>\n\n<pre><code>for(int col = 0; col &lt;= 6; col++)\n{\n  for(int row = 0; row &lt;= 25; row++)\n  {\n    for(int chars = 0; chars &lt;= 4; chars++)\n    {\n      printf(\"%c\", alfabetlow[row][col][chars] );\n    }\n    printf(\" \"); // You may also add a space between characters.\n  }\n  printf(\"\\n\"); // New line after each row\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 7042992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0fae914f4f25e2cd618edba5f4a4844?s=128&d=identicon&r=PG&f=1", "display_name": "Vikram Baliga", "link": "https://stackoverflow.com/users/7042992/vikram-baliga"}, "is_accepted": false, "score": 1, "last_activity_date": 1476896331, "last_edit_date": 1476896331, "creation_date": 1476889355, "answer_id": 40135132, "question_id": 40134732, "link": "https://stackoverflow.com/questions/40134732/why-wont-the-output-in-terminal-line-up-side-by-side/40135132#40135132", "title": "why wont the output in terminal line up side by side", "body": "<p>problem was in:\n1. position of the indexing variables.\n2. not using a '\\n' after printing stars of a line.</p>\n\n<p>this migt be helpful</p>\n\n<pre><code>chars =0; // 0=a, 1=b, 2=c, ..... 25=z\n\nfor(col = 0; col &lt;= 6; col++){\n\nfor(rows = 0; rows &lt;= 4; rows++){\n\n    printf(\"%c\", alfabetlow[chars][col][rows]);\n    }\n    printf(\"\\n\");\n\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6244137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kqQs7.jpg?s=128&g=1", "display_name": "Dominic Baker", "link": "https://stackoverflow.com/users/6244137/dominic-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 40135108, "answer_count": 2, "score": 0, "last_activity_date": 1476896331, "creation_date": 1476888347, "question_id": 40134732, "link": "https://stackoverflow.com/questions/40134732/why-wont-the-output-in-terminal-line-up-side-by-side", "title": "why wont the output in terminal line up side by side", "body": "<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint rows;\nint col;\nint chars;\nint callLetter;\nint characters;\nint counter;\n\n\nchar userinput[100];\n\nchar alfabetlow[26][7][5] = {{\"     \",\"     \",\" *** \",\"    *\",\" ****\",\"*   *\",\" *** \"},//lower case a\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case b \n\n                         {\"     \",\"     \",\" *** \",\"*   *\",\"*    \",\"*   *\",\" *** \"},//lower case c\n\n                         {\"    *\",\"    *\",\"    *\",\" ****\",\"*   *\",\"*   *\",\" *** \"},//lower case d\n\n                         {\"     \",\"     \",\" *** \",\"*   *\",\"*****\",\"*    \",\" *** \"},//lower case e\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case f\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case g\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case h\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case i\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case j\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case k\n\n                         {\"*    \",\"*    \",\"*    \",\"**** \",\"*   *\",\"*   *\",\" *** \"},//lower case l\n\n                         {\"*    \",\"*    \",\"**** \",\"* * *\",\"* * *\",\"* * *\",\"* * *\"},//lower case m\n\n                         {\"     \",\"     \",\"**** \",\"*   *\",\"*   *\",\"*   *\",\"*   *\"},//lower case n\n\n                         {\"     \",\"     \",\" *** \",\"*   *\",\"*   *\",\"*   *\",\" *** \"},//lower case o\n\n                         {\"     \",\"     \",\"**** \",\"*   *\",\"**** \",\"*    \",\"*    \"},//lower case q\n\n                         {\"     \",\"     \",\" ****\",\"*   *\",\" ****\",\"    *\",\"    *\"},//lower case q\n\n                         {\"     \",\"     \",\"* ** \",\"*   *\",\"*    \",\"*    \",\"*    \"},//lower case r\n\n                         {\"     \",\"     \",\" *** \",\"*    \",\" *** \",\"    *\",\" *** \"},//lower case s\n\n                         {\" *   \",\" *   \",\"*****\",\" *   \",\" *   \",\" *  *\",\"  ** \"},//lower case t\n\n                         {\"     \",\"     \",\"*   *\",\"*   *\",\"*   *\",\"*   *\",\" ****\"},//lower case u\n\n                         {\"     \",\"     \",\"*   *\",\"*   *\",\" * * \",\" * * \",\"  *  \"},//lower case v\n\n                         {\"     \",\"     \",\"*   *\",\"*   *\",\"* * *\",\"* * *\",\" * * \"},//lower case w\n\n                         {\"     \",\"     \",\"*   *\",\" * * \",\"  *  \",\" * * \",\"*   *\"},//lower case x\n\n                         {\"     \",\"     \",\"*   *\",\" * * \",\"  *  \",\" *   \",\"*    \"},//lower case y\n\n                         {\"     \",\"     \",\"*****\",\"   * \",\"  *  \",\" *   \",\"*****\"},//lower case z\n                      };\n</code></pre>\n\n<p>/*\"   *               *         **        *                        **                                              *<br>\n      *               *        *  *       *                         *                                              *<br>\n <strong>*  *      *</strong>      *  <strong>*   *     **** *       *     *   *  *    *   ****  ****   *</strong>  ****   **** * **   <strong>*  ***** *   * *   * *   * *   * *   * *****<br>\n    * ****  *   *  **** *   * ***** *   * ****              * *     *   * * * *   * *   * *   * *   * *   * *      *    *   * *   * *   *  * *   * *     *<br>\n **** *   * *     *   * *****  *     **** *   *   *     *   **      *   * * * *   * *   * ****   **** *      *</strong>   *    *   *  * *  * * *   *     *     *<br>\n*   * *   * *   * *   * *      *        * *   *   *     *   **      *   * * * *   * *   * *         * *         *  *  * *   *  * *  * * *  * *   *     *<br>\n <strong>*   <em></strong>   <strong></em>   <em></strong>   <strong></em>   *     *</strong>  *   *  <strong>*  **    *  *   *</strong>  * * * *   *  <strong>*  *       **  *      *</strong>    **   ****   *    * *  * * * *     ***** \n*/</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n\nwhile(characters != EOF &amp;&amp; characters != '\\n'){\n    characters = getchar();\n    userinput[counter] = characters;\n    counter++;\n    }\n\n\nfor(col = 0; col &lt;= 25; col++){\n\n\nfor(rows = 0; rows &lt;= 6; rows++){\n        printf(\"%c\", alfabetlow[rows][col][chars]);\n    }   \n}\n\n\n/*//prints down over\nfor(col = 0; col &lt;= 6; col++){\n    for(row = 0; row &lt;= 25; row++){\n        for(chars = 0; chars &lt;= 4; chars++){\n            printf(\"%c\", alfabetlow[row][col][chars] );\n            }\n        printf(\"\");\n    }\n    printf(\" \");\n\n}*/\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>why when i run in terminal will my code not write the alphabet side by side instead it rights down over</strong></p>\n"}, {"tags": ["c++", "c", "qt", "qlineedit", "qfiledialog"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1476888479, "post_id": 40134680, "comment_id": 67539348, "body": "you already get the filename returned. just set it as the text of a line edit. and you can check before if this text is empty or not."}, {"owner": {"reputation": 241, "user_id": 6830324, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/198815f44f02c47247166609db58738a?s=128&d=identicon&r=PG&f=1", "display_name": "Meugiwara", "link": "https://stackoverflow.com/users/6830324/meugiwara"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1476890731, "post_id": 40134680, "comment_id": 67541036, "body": "@Hayt, I added just under the QFileDialog <code>lined0.setText(QString(file));</code> and lined0 is the first QLineEdit but nothing append."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7043108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f66c906b7c1738531c863b0ffe35b?s=128&d=identicon&r=PG&f=1", "display_name": "shirny", "link": "https://stackoverflow.com/users/7043108/shirny"}, "edited": false, "score": 0, "creation_date": 1476893925, "post_id": 40136648, "comment_id": 67543147, "body": "Or you can name the filename as a global variable,QFileDialog can open a path,and then assign this path to the filename,QLineEdit also use this global variable"}], "tags": [], "owner": {"reputation": 1, "user_id": 7043108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f66c906b7c1738531c863b0ffe35b?s=128&d=identicon&r=PG&f=1", "display_name": "shirny", "link": "https://stackoverflow.com/users/7043108/shirny"}, "is_accepted": false, "score": 0, "last_activity_date": 1476893547, "creation_date": 1476893547, "answer_id": 40136648, "question_id": 40134680, "link": "https://stackoverflow.com/questions/40134680/in-qt-how-to-add-a-file-with-a-qfiledialog-in-a-qlineedit/40136648#40136648", "title": "In Qt how to add a file with a QFileDialog in a QLineEdit", "body": "<p>Maybe you can try to emit the address of filename in one window and then receive this address in the second window by slot function</p>\n"}], "owner": {"reputation": 241, "user_id": 6830324, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/198815f44f02c47247166609db58738a?s=128&d=identicon&r=PG&f=1", "display_name": "Meugiwara", "link": "https://stackoverflow.com/users/6830324/meugiwara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 578, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476893547, "creation_date": 1476888216, "last_edit_date": 1476890770, "question_id": 40134680, "link": "https://stackoverflow.com/questions/40134680/in-qt-how-to-add-a-file-with-a-qfiledialog-in-a-qlineedit", "title": "In Qt how to add a file with a QFileDialog in a QLineEdit", "body": "<p>I have one window which has a button named \"...\" which open an other window which has also a button named \"...\" which open a QFileDialog. Next to the button of the second window, there are 10 QLineEdit to get 10 files. With the QFileDialog, I can't take a mp3 file and put his name in the first QLineEdit. How can I do ? And if the first QLineEdit is already took, how can I put the name of a mp3 file in the second QLineEdit ?</p>\n\n<p>The file \"main.h\" has just the include of Qt. Here is my code and I tried many solutions without success :</p>\n\n<pre><code>#include \"main.h\"\n\nint     main(int argc, char **argv)\n{\nQApplication    program(argc, argv);\n/* ******************** First Window ******************** */\nQWidget         window;\nQVBoxLayout     layout;\n\nwindow.setWindowTitle(\"Programme\");\nwindow.setWindowIcon(QIcon(\":/Images/Images/Bouclier.png\"));\nwindow.setFixedSize(450, 400);\n\n    QHBoxLayout     layouttop;\n            QLabel          labeltop(\"Nom du programme :\");\n            QLineEdit       lineedittop;\n\n                layouttop.addWidget(&amp;labeltop);\n                layouttop.addWidget(&amp;lineedittop);\n\n    QHBoxLayout     layoutmiddle;\n            QPushButton     buttonnext;\n            QPushButton     buttonprevious;\n            QPushButton     buttonetc(\"...\");\n            QLineEdit       line0;\n            QLineEdit       line1;\n            QLineEdit       line2;\n            QLineEdit       line3;\n            QLineEdit       line4;\n            QLineEdit       line5;\n            QLineEdit       line6;\n            QLineEdit       line7;\n            QLineEdit       line8;\n            QLineEdit       line9;\n\n        QVBoxLayout     layoutleft;\n\n                layoutleft.addWidget(&amp;buttonnext);\n                buttonnext.setIcon(QIcon(\":/Images/Images/Haut.png\"));\n                layoutleft.addWidget(&amp;buttonprevious);\n                buttonprevious.setIcon(QIcon(\":/Images/Images/Bas.png\"));\n\n        QVBoxLayout     layoutcenter;\n\n                layoutcenter.addWidget(&amp;line0);\n                layoutcenter.addWidget(&amp;line1);\n                layoutcenter.addWidget(&amp;line2);\n                layoutcenter.addWidget(&amp;line3);\n                layoutcenter.addWidget(&amp;line4);\n                layoutcenter.addWidget(&amp;line5);\n                layoutcenter.addWidget(&amp;line6);\n                layoutcenter.addWidget(&amp;line7);\n                layoutcenter.addWidget(&amp;line8);\n                layoutcenter.addWidget(&amp;line9);\n\n                line0.setReadOnly(true);\n                line1.setReadOnly(true);\n                line2.setReadOnly(true);\n                line3.setReadOnly(true);\n                line4.setReadOnly(true);\n                line5.setReadOnly(true);\n                line6.setReadOnly(true);\n                line7.setReadOnly(true);\n                line8.setReadOnly(true);\n                line9.setReadOnly(true);\n\n        QVBoxLayout     layoutright;\n\n                layoutright.addWidget(&amp;buttonetc);\n\n                layoutmiddle.addLayout(&amp;layoutleft);\n                layoutmiddle.addLayout(&amp;layoutcenter);\n                layoutmiddle.addLayout(&amp;layoutright);\n\n    QHBoxLayout     layoutbottom;\n            QPushButton     buttonapply(\"Apply\");\n            QPushButton     buttoncancel(\"Cancel\");\n\n                layoutbottom.addWidget(&amp;buttonapply);\n                layoutbottom.addWidget(&amp;buttoncancel);\n\nlayout.addLayout(&amp;layouttop);\nlayout.addLayout(&amp;layoutmiddle);\nlayout.addLayout(&amp;layoutbottom);\nwindow.setLayout(&amp;layout);\nwindow.show();\n/* ******************** First Window ******************** */\n/* ******************** Second Window ******************** */\nQWidget         windowed;\nQVBoxLayout     layouted;\n\nwindowed.setWindowTitle(\"Session\");\nwindowed.setWindowIcon(QIcon(\":/Images/Images/Bouclier.png\"));\nwindowed.setFixedSize(450, 400);\n\n    QHBoxLayout     layouttoped;\n            QLabel          labeltoped(\"Nom de la session :\");\n            QLineEdit       lineedittoped;\n\n                layouttoped.addWidget(&amp;labeltoped);\n                layouttoped.addWidget(&amp;lineedittoped);\n\n    QHBoxLayout     layoutmiddled;\n            QPushButton     buttonnexted;\n            QPushButton     buttonprevioused;\n            QPushButton     buttonetced(\"...\");\n            QString         file;\n            QLineEdit       lined0;\n            QLineEdit       lined1;\n            QLineEdit       lined2;\n            QLineEdit       lined3;\n            QLineEdit       lined4;\n            QLineEdit       lined5;\n            QLineEdit       lined6;\n            QLineEdit       lined7;\n            QLineEdit       lined8;\n            QLineEdit       lined9;\n            QComboBox       box;\n            QLabel          label(\"Dur\u00e9e :\");\n\n        QVBoxLayout     layoutlefted;\n\n                layoutlefted.addWidget(&amp;buttonnexted);\n                buttonnexted.setIcon(QIcon(\":/Images/Images/Haut.png\"));\n                layoutlefted.addWidget(&amp;buttonprevioused);\n                buttonprevioused.setIcon(QIcon(\":/Images/Images/Bas.png\"));\n\n        QVBoxLayout     layoutcentered;\n\n                layoutcentered.addWidget(&amp;lined0);\n                layoutcentered.addWidget(&amp;lined1);\n                layoutcentered.addWidget(&amp;lined2);\n                layoutcentered.addWidget(&amp;lined3);\n                layoutcentered.addWidget(&amp;lined4);\n                layoutcentered.addWidget(&amp;lined5);\n                layoutcentered.addWidget(&amp;lined6);\n                layoutcentered.addWidget(&amp;lined7);\n                layoutcentered.addWidget(&amp;lined8);\n                layoutcentered.addWidget(&amp;lined9);\n\n                lined0.setReadOnly(true);\n                lined1.setReadOnly(true);\n                lined2.setReadOnly(true);\n                lined3.setReadOnly(true);\n                lined4.setReadOnly(true);\n                lined5.setReadOnly(true);\n                lined6.setReadOnly(true);\n                lined7.setReadOnly(true);\n                lined8.setReadOnly(true);\n                lined9.setReadOnly(true);\n\n        QVBoxLayout     layoutrighted;\n\n                layoutrighted.addWidget(&amp;buttonetced);\n\n        QVBoxLayout     layoutmore;\n\n            QHBoxLayout     layoutmored;\n\n                layoutmored.addWidget(&amp;label);\n                layoutmored.addWidget(&amp;box);\n\n                box.addItem(\"30\");\n                box.addItem(\"60\");\n\n                layoutmore.addLayout(&amp;layoutmored);\n\n                layoutmiddled.addLayout(&amp;layoutlefted);\n                layoutmiddled.addLayout(&amp;layoutcentered);\n                layoutmiddled.addLayout(&amp;layoutrighted);\n                layoutmiddled.addLayout(&amp;layoutmore);\n\n    QHBoxLayout     layoutbottomed;\n        QPushButton     buttonapplyed(\"Apply\");\n        QPushButton     buttoncanceled(\"Cancel\");\n\n                layoutbottomed.addWidget(&amp;buttonapplyed);\n                layoutbottomed.addWidget(&amp;buttoncanceled);\n\nlayouted.addLayout(&amp;layouttoped);\nlayouted.addLayout(&amp;layoutmiddled);\nlayouted.addLayout(&amp;layoutbottomed);\nwindowed.setLayout(&amp;layouted);\n/* ******************** Second Window ******************** */\n/* ******************** Actions First Window ******************** */\nQObject::connect(&amp;buttonetc, &amp;QPushButton::clicked, &amp;windowed, &amp;QWidget::show);\n/* ******************** Actions First Window ******************** */\n/* ******************** Actions Second Window ******************** */\nQObject::connect(&amp;buttonetced, &amp;QPushButton::clicked, [&amp;windowed, &amp;file] {file = QFileDialog::getOpenFileName(&amp;windowed, QObject::tr(\"S\u00e9lectionner un fichier son ...\"), \"C:/\", QObject::tr(\"Audio (*.mp3)\"));});\nlined0.setText(Qstring(file));\n/* ******************** Actions Second Window ******************** */\n\nreturn program.exec();\n}\n</code></pre>\n"}, {"tags": ["android", "c", "android-ndk", "java-native-interface", "imei"], "answers": [{"comments": [{"owner": {"reputation": 2957, "user_id": 365229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nee94.png?s=128&g=1", "display_name": "Behrouz.M", "link": "https://stackoverflow.com/users/365229/behrouz-m"}, "reply_to_user": {"reputation": 1981, "user_id": 2439755, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/91c51ba9e0725260d811f6f407483fe5?s=128&d=identicon&r=PG&f=1", "display_name": "user755", "link": "https://stackoverflow.com/users/2439755/user755"}, "edited": false, "score": 0, "creation_date": 1605334556, "post_id": 40743506, "comment_id": 114624204, "body": "@BB755 there is no known way to read IMEI and MAC address in android 10 and above"}], "tags": [], "owner": {"reputation": 2957, "user_id": 365229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nee94.png?s=128&g=1", "display_name": "Behrouz.M", "link": "https://stackoverflow.com/users/365229/behrouz-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1479822396, "last_edit_date": 1495540416, "creation_date": 1479822396, "answer_id": 40743506, "question_id": 40134288, "link": "https://stackoverflow.com/questions/40134288/android-get-imei-in-cc-c-for-ndk-jni/40743506#40743506", "title": "android get imei in cc/c++ for ndk/JNI", "body": "<p>check <a href=\"http://www.clearevo.com/blog/programming/2012/11/26/android_ndk_get_imei_natively.html\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://stackoverflow.com/a/11643923/365229\">this</a> </p>\n\n<pre><code>#include &lt;sys/system_properties.h&gt;\n\n    //returns the string length of the value.\n    int ir = __system_property_get(\"ro.gsm.imei\", imei_start);           \n\n      if(ir &gt; 0)\n    {\n      imei_start[15]=0;//strz end      \n      printf(\"method1 got imei %s len %d\\r\\n\",imei_start,strlen(imei_start));\n      strcpy(g_imei,imei_start);\n    }\n      else\n    {\n      printf(\"method1 imei failed - trying method2\\r\\n\");\n      //old dumpsys imei getter\n      char* res = exec_get_out(\"dumpsys iphonesubinfo\");  \n      const char* imei_start_match = \"ID = \";\n      int imei_start_match_len = strlen(imei_start_match);\n      char* imei_start = strstr(res,imei_start_match);\n      if(imei_start &amp;&amp; strlen(imei_start)&gt;=15+imei_start_match_len)\n        {\n          imei_start += imei_start_match_len;\n          imei_start[15] = 0;\n          printf(\"method2 IMEI [%s] len %d\\r\\n\",imei_start,strlen(imei_start));\n          strcpy(g_imei,imei_start);\n        }\n    }      \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7042851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582fabd167373c6852df35f2a6aefb0c?s=128&d=identicon&r=PG&f=1", "display_name": "sakdoss", "link": "https://stackoverflow.com/users/7042851/sakdoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3214, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1524206647, "creation_date": 1476887305, "last_edit_date": 1476892546, "question_id": 40134288, "link": "https://stackoverflow.com/questions/40134288/android-get-imei-in-cc-c-for-ndk-jni", "title": "android get imei in cc/c++ for ndk/JNI", "body": "<p>I would try to get the <code>imei</code> of a device in C/C++ (using ndk) and retrieve the result with JNI.</p>\n\n<pre><code>const char *res = exec_get_out(\"service call iphonesubinfo 3\");\n</code></pre>\n\n<p>Works in shell, but does not in my application </p>\n\n<p>I have the <code>READ_PHONE_STATE</code> permission set in the Manifest.  This is targeted for Marshmallow Android (and I have accepted permission in settings)</p>\n\n<p>Is there any other solution that would work or is it not possible without a JNI environment?</p>\n"}, {"tags": ["c", "arrays", "random"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1476887456, "post_id": 40134234, "comment_id": 67538543, "body": "Aside: note that <code>for (i=0; i&lt;=NRAND; i++)</code> actually creates <i><code>NRAND+1</code></i> random values."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1476887726, "post_id": 40134234, "comment_id": 67538744, "body": "What&#39;s is <code>random</code>? I know about <code>rand</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476887755, "post_id": 40134234, "comment_id": 67538773, "body": "If you want to ensure that <code>Xdrand &lt; 1</code> the you can divide by <code>(RAND_MAX + 1)</code> instead of by <code>RAND_MAX</code>, then you don&#39;t encounter the problem of skipping the functionality of any loop iteration."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476887933, "post_id": 40134234, "comment_id": 67538907, "body": "Not related to your problem, but you really should check if  <code>fopen</code> returns <code>NULL</code> and abort your program if yes."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1476888229, "post_id": 40134234, "comment_id": 67539160, "body": "You need an array <code>int count[200] = {0};</code> to store the current count for each bin."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476888335, "post_id": 40134234, "comment_id": 67539241, "body": "How exactly do you want to sort and distribute the values into the bins? Could edit your question and add a small example with some values and where these values should be put ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7042833"}, "edited": false, "score": 0, "creation_date": 1476890118, "post_id": 40134234, "comment_id": 67540627, "body": "Michael Walz, I&#39;d like to sort by order. So the first bin would contain all the values from 0 to (4/200), the next from (4/200) to (8/200), and so on across the entire interval."}], "owner": {"user_type": "does_not_exist", "display_name": "user7042833"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476887875, "creation_date": 1476887178, "last_edit_date": 1476887875, "question_id": 40134234, "link": "https://stackoverflow.com/questions/40134234/trying-to-accumulate-and-sort-random-numbers-into-bins", "title": "Trying to accumulate and sort random numbers into bins", "body": "<p>I've create a list of random values in C, using the code below.</p>\n\n<p>I need to sort these values into 200 bins distributed over the interval from 0 to 4, then write information about the bins to a file, though right now I'm only concerned with the former.</p>\n\n<p>How can I write a loop that dynamically creates bins on the interval and sorts the output from the random number generator into them?</p>\n\n<pre><code>int main(){\n#define NRAND 20000\n\nint i, j;\ndouble X, fX, Y, bin[200][100];\n\ndouble Xdrand = (double) random()/(double) RAND_MAX;\nFILE *fp;\nfp = fopen(\"exp_rand.dat\", \"w+\");\n\nfor (i = 0; i &lt;= NRAND; i++)  //creates NRAND random values\n{\n    if (Xdrand != 1)          //ensures value is not 1, scales random value to interval\n    {\n        Xdrand = (double)random() / (double)RAND_MAX;\n        X = Xdrand * 4;\n        Y = Xdrand * 2;\n        fX = 1/(exp(X));\n\n        if (Y &lt;= fX)\n        {\n            X = Y;\n            return;\n        }\n    }       \n}\n</code></pre>\n"}, {"tags": ["c", "libraries", "amqp", "azure-eventhub"], "comments": [{"owner": {"reputation": 36251, "user_id": 311712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ea76T.jpg?s=128&g=1", "display_name": "David Brabant", "link": "https://stackoverflow.com/users/311712/david-brabant"}, "edited": false, "score": 1, "creation_date": 1476886754, "post_id": 40133998, "comment_id": 67537898, "body": "Where is your code?"}, {"owner": {"reputation": 63, "user_id": 7042812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f6cf86ff676392540d88fc168299c77e?s=128&d=identicon&r=PG&f=1", "display_name": "user7042812", "link": "https://stackoverflow.com/users/7042812/user7042812"}, "reply_to_user": {"reputation": 36251, "user_id": 311712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ea76T.jpg?s=128&g=1", "display_name": "David Brabant", "link": "https://stackoverflow.com/users/311712/david-brabant"}, "edited": false, "score": 0, "creation_date": 1476952372, "post_id": 40133998, "comment_id": 67567738, "body": "I got this sending application working on 2 PC-s. One Platform is Windows 8.1 the other one is Windows 10. And both platforms that this app is not working on are Windows Server 2012 R2. Can there be any correlation between these two ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1476970740, "post_id": 40133998, "comment_id": 67580691, "body": "@user7042812,  We cannot be sure, since you did not post your code, however, a server should be running server code and a client should be running client code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1476971012, "post_id": 40133998, "comment_id": 67580922, "body": "could it be the server your referencing does not have the associated sub projects installed?  namely these projects:  <code>azure-uamqp-c</code> and <code>azure-c-shared-utility</code>"}, {"owner": {"reputation": 63, "user_id": 7042812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f6cf86ff676392540d88fc168299c77e?s=128&d=identicon&r=PG&f=1", "display_name": "user7042812", "link": "https://stackoverflow.com/users/7042812/user7042812"}, "edited": false, "score": 0, "creation_date": 1476971087, "post_id": 40133998, "comment_id": 67580971, "body": "This is problem that is resulting from this one, i have code there and more concrete problem <a href=\"http://stackoverflow.com/questions/40154570/initializesecuritycontext-schannel-not-changing-buffertype\" title=\"initializesecuritycontext schannel not changing buffertype\">stackoverflow.com/questions/40154570/&hellip;</a>"}], "owner": {"reputation": 63, "user_id": 7042812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f6cf86ff676392540d88fc168299c77e?s=128&d=identicon&r=PG&f=1", "display_name": "user7042812", "link": "https://stackoverflow.com/users/7042812/user7042812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477088293, "creation_date": 1476886686, "last_edit_date": 1477088293, "question_id": 40133998, "link": "https://stackoverflow.com/questions/40133998/amqp-stuck-waiting-for-ack", "title": "AMQP Stuck waiting for ACK", "body": "<p>I am using <a href=\"https://github.com/Azure/azure-event-hubs/tree/master/c\" rel=\"nofollow\">https://github.com/Azure/azure-event-hubs/tree/master/c</a> library which uses AMQP 1.0 protocol.</p>\n\n<p>When I send the first message to event hub via send project it gets stuck waiting for ACK. </p>\n\n<p>On my home PC it works fine. </p>\n\n<p>On my other PCs, even on Azure Virtual Machine - which is Windows Server 2012, it just waits for ACK in infinite loop. </p>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1476885598, "post_id": 40133487, "comment_id": 67536938, "body": "You don&#39;t get <i>random</i> numbers, but you get <i>indeterminate</i> numbers."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1476885612, "post_id": 40133487, "comment_id": 67536949, "body": "The simple  answer - No"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1476886061, "post_id": 40133487, "comment_id": 67537315, "body": "Curious - <i>always the last element 0</i>.    How many times is <i>always</i> ?"}, {"owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476886226, "post_id": 40133487, "comment_id": 67537457, "body": "@ryyker I get <b>always</b> last element 0, no matter if I run this code 10 or 10000 times, no matter if the array has size 5 or 5000"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1476886340, "post_id": 40133487, "comment_id": 67537560, "body": "Due to the automatic storage of your array, probably, the code before the function where the code is placed, leave that 0 into the stack."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1476886868, "post_id": 40133487, "comment_id": 67537989, "body": "@Tom don&#39;t waste anymore time on this, or step through the assymbly code with a debugger if you want to know what exactly happens in your case."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476887267, "post_id": 40133487, "comment_id": 67538370, "body": "I would be curious to know what would happen if you completely closed your environment between compiles.  I have observed behaviors where something that should be randomly changing does not change between compiles. But closing Code::Blocks, which also uses GCC compiler, (i.e., dumping it from memory) then re-opening, I see that the value changes from what it was during the compilers previous life."}, {"owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476889325, "post_id": 40133487, "comment_id": 67540005, "body": "@ryyker I have completely closed my environtment and then tried building, rebuilding, closing again, rebuilding but still the same result :) I&#39;am also using Code::Blocks."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476895458, "post_id": 40133487, "comment_id": 67543996, "body": "@Tom - I am not sure if the question&#39;s <i>duplicate</i> status prevents it, but selecting one of the answers as <i>Accepted</i> is always appreciated."}, {"owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "edited": false, "score": 0, "creation_date": 1476902720, "post_id": 40133487, "comment_id": 67548289, "body": "@rykker Yes I know and I will do it, but I have not decided yet which one ;)"}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476885746, "post_id": 40133547, "comment_id": 67537059, "body": "Hmmm.  <i>...So, you can&#39;t access them...</i>.  Should that be <i>...you should not access them...</i>?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1476885815, "post_id": 40133547, "comment_id": 67537122, "body": "Strictly speaking <i>you must not access them</i> is the most accurate ;-)"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1476885627, "creation_date": 1476885627, "answer_id": 40133547, "question_id": 40133487, "link": "https://stackoverflow.com/questions/40133487/does-c-always-initialize-the-last-element-in-char-array-to-zero/40133547#40133547", "title": "Does C always initialize the last element in char array to zero?", "body": "<p>No. There's no such thing guaranteed by the C standard for local variables.</p>\n\n<p>The values of the uninitialized array has <em>indeterminate values</em>. So, you can't access them and since you do, your code has <em>undefined behaviour</em>.</p>\n\n<p>But the variables with static storage duration such as global variables, <code>static</code> qualified variables etc are initialized with zero.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1476885639, "creation_date": 1476885639, "answer_id": 40133555, "question_id": 40133487, "link": "https://stackoverflow.com/questions/40133487/does-c-always-initialize-the-last-element-in-char-array-to-zero/40133555#40133555", "title": "Does C always initialize the last element in char array to zero?", "body": "<p>The contents of a variable (and by extension, the elements of an array) that do not have static storage duration (globals, <code>static</code> locals) are undefined.</p>\n\n<p>The fact that the last element in the array happens to be 0 essentially <em>is</em> random.</p>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476886283, "post_id": 40133613, "comment_id": 67537506, "body": "OP includes statement: <i>I get always the last element 0</i>.  If this is an accurate observation (as opposed to an exaggeration) then <i>by chance</i> may not be accurate."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476886490, "post_id": 40133613, "comment_id": 67537682, "body": "@ryyker It is by chance. I can show example how to get value other than 0. (Has to fill the stack before calling such function.) And the question is &quot;Does C always initialize...&quot;, not &quot;is this in my case&quot;."}, {"owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "edited": false, "score": 0, "creation_date": 1476886922, "post_id": 40133613, "comment_id": 67538046, "body": "@i486 I would be grateful to see this example, can you show it please?"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "edited": false, "score": 1, "creation_date": 1476887134, "post_id": 40133613, "comment_id": 67538234, "body": "@Tom Try example in the answer above."}, {"owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "edited": false, "score": 0, "creation_date": 1476887504, "post_id": 40133613, "comment_id": 67538585, "body": "@i486 You have right, now I don&#39;t get 0 anymore, Thanks!"}], "tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 3, "last_activity_date": 1476908887, "last_edit_date": 1476908887, "creation_date": 1476885788, "answer_id": 40133613, "question_id": 40133487, "link": "https://stackoverflow.com/questions/40133487/does-c-always-initialize-the-last-element-in-char-array-to-zero/40133613#40133613", "title": "Does C always initialize the last element in char array to zero?", "body": "<p>Last element is zero in string constants like <code>\"Test\"</code> or <code>char array[] = \"Test\";</code>. In your example last value is zero by chance.</p>\n\n<p>Try this:</p>\n\n<pre><code>void f1() // prepare non-zero stack\n{\n  char array[40];\n\n  memset( array, 32, sizeof array ); \n}\n\nvoid f2() // your array\n{\n  char array[6];\n  int i;\n  for ( i = 0; i &lt; 6; ++i )\n    printf(\"%i \", array[i]);\n}\n\nint main()\n{\n  f1();\n  f2();\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "closed_date": 1476887244, "accepted_answer_id": 40133547, "answer_count": 3, "score": 3, "last_activity_date": 1476908887, "creation_date": 1476885471, "last_edit_date": 1476903212, "question_id": 40133487, "link": "https://stackoverflow.com/questions/40133487/does-c-always-initialize-the-last-element-in-char-array-to-zero", "closed_reason": "Duplicate", "title": "Does C always initialize the last element in char array to zero?", "body": "<p>By running this code</p>\n\n<pre><code>char array[6];\nint i;\nfor ( i = 0; i &lt; 6; ++i )\n    printf(\"%i \", array[i]);\n</code></pre>\n\n<p>Possible output:</p>\n\n<pre><code>64 0 -64 77 67 0\n</code></pre>\n\n<p>I get <strong>always</strong> the last element 0, although I was expecting random value. It is compiler dependent? I'm using gcc.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476885271, "post_id": 40133350, "comment_id": 67536654, "body": "Please format your code properly. Proper formatting is no <i>&quot;its not important, I can do this later&quot;</i> thing!!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476886125, "post_id": 40133350, "comment_id": 67537365, "body": "And format the question text as well. It is difficult to read. An the title, it is not meaningful."}, {"owner": {"reputation": 4600, "user_id": 770230, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2a6a5d05eef9086348dbbd089e974d71?s=128&d=identicon&r=PG", "display_name": "Dan Bechard", "link": "https://stackoverflow.com/users/770230/dan-bechard"}, "edited": false, "score": 0, "creation_date": 1476886885, "post_id": 40133350, "comment_id": 67538004, "body": "Are you required to use arrays? A <code>deque</code> (i.e. double-ended queue) seems like a much better data structure for this problem. <a href=\"http://www.cplusplus.com/reference/deque/deque/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/deque/deque</a>"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1476887261, "post_id": 40133350, "comment_id": 67538362, "body": "You declared <code>long long int a[3]</code> and then attempted to put values into 4 positions of <code>a</code> (which you did incorrectly as you &#39;forgot&#39; the <code>&amp;</code>.    So, my suggestion is that you step through this in a debugger before you post it here.  One more thing - you use the array position variable <code>i</code> all over the place, but you seldom update it (that&#39;s your second hint about abject failure of this program)"}, {"owner": {"reputation": 13, "user_id": 7001128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883d05d99b5e94180953eea49946ba87?s=128&d=identicon&r=PG&f=1", "display_name": "shanon4", "link": "https://stackoverflow.com/users/7001128/shanon4"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1476893293, "post_id": 40133350, "comment_id": 67542770, "body": "could you tell me more about updating i @KevinDTimm"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1476897974, "post_id": 40133350, "comment_id": 67545396, "body": "After you step through your program in a debugger and describe the errors that you found with <code>i</code> and then ask the question again I can attempt to help"}], "answers": [{"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": true, "score": 2, "last_activity_date": 1476886794, "creation_date": 1476886794, "answer_id": 40134047, "question_id": 40133350, "link": "https://stackoverflow.com/questions/40133350/could-someone-tell-me-what-is-wrong-with-this/40134047#40134047", "title": "could someone tell me what is wrong with this?", "body": "<p>Your <code>swap()</code> function has multiple issues:</p>\n\n<p>1: It calls itself with <code>return swap(a,b);</code> in the last line of the function. This will result in infinite recursion and a stack overflow.</p>\n\n<p>2: You need to declare the return type of the function. If it takes two <code>long long</code> parameters and returns nothing, then it should be declared as follows:</p>\n\n<pre><code>void swap(long long a, long long b);\n</code></pre>\n\n<p>3: As written, the function will have no effect anyway. You need to pass <em>pointers</em> to these variables if you want to change their values:</p>\n\n<pre><code>long long swap(long long *a, long long *b);\n</code></pre>\n\n<p>4: To pass pointers to this function, prefix the parameters with <code>&amp;</code> as follows:</p>\n\n<pre><code>swap(&amp;b[0],&amp;b[2]);   /* NOT: swap(b[0],b[2]); */\n</code></pre>\n\n<p>5: The order of operations in the <code>swap()</code> function is also wrong. You start by irretrievably losing the value of <code>a</code> instead of storing it so that it can be assigned to <code>b</code>. Try this instead:</p>\n\n<pre><code>void swap(long long *a, long long *b) {\n    long long temp;\n    temp = *a;\n    *a = *b;\n    *b = temp;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>NOTE:</strong> Please learn how to format your code properly. Also, always compile your development code with warnings enabled (e.g., add <code>-Wall -pedantic</code> to the command line). Doing so would have drawn your attention to most if not all of these problems without having to ask here.</p>\n"}], "owner": {"reputation": 13, "user_id": 7001128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883d05d99b5e94180953eea49946ba87?s=128&d=identicon&r=PG&f=1", "display_name": "shanon4", "link": "https://stackoverflow.com/users/7001128/shanon4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 40134047, "answer_count": 1, "score": -2, "last_activity_date": 1476893333, "creation_date": 1476885076, "last_edit_date": 1476893333, "question_id": 40133350, "link": "https://stackoverflow.com/questions/40133350/could-someone-tell-me-what-is-wrong-with-this", "title": "could someone tell me what is wrong with this?", "body": "<p>Question: wow, you are given two things:</p>\n\n<p>The calling order in which all the processes are called.\nThe ideal order in which all the processes should have been executed.\nNow, let us demonstrate this by an example. Let's say that there are 3 processes, the calling order of the processes is: 3 - 2 - 1. The ideal order is: 1 - 3 - 2, i.e., process number 3 will only be executed after process number 1 has been completed; process number 2 will only be executed after process number 3 has been executed.</p>\n\n<ol>\n<li><p>Iteration #1:\nSince the ideal order has process #1 to be executed firstly, the calling ordered is changed, i.e., the first element has to be pushed to the last place. Changing the position of the element takes 1 unit of time. The new calling order is: 2 - 1 - 3. Time taken in step #1: 1.</p></li>\n<li><p>Iteration #2: Since the ideal order has process #1 to be executed firstly, the calling ordered has to be changed again, i.e., the first element has to be pushed to the last place. The new calling order is: 1 - 3 - 2. Time taken in step #2: 1.</p></li>\n<li><p>Iteration #3: Since the first element of the calling order is same as the ideal order, that process will be executed. And it will be thus popped out. Time taken in step #3: 1.</p></li>\n<li><p>Iteration #4: Since the new first element of the calling order is same as the ideal order, that process will be executed. Time taken in step #4: 1.</p></li>\n<li><p>Iteration #5: Since the last element of the calling order is same as the ideal order, that process will be executed. Time taken in step #5: 1.</p></li>\n</ol>\n\n<p>Total time taken: 5 units.\nS: Executing a process takes 1 unit of time. Changing the position takes 1 unit of time.</p>\n\n<p><strong>Input format:</strong>\nThe first line a number N, denoting the number of processes. The second line contains the calling order of the processes. The third line contains the ideal order of the processes.</p>\n\n<p><strong>Output format:</strong>\nPrint the total time taken for the entire queue of processes to be executed.</p>\n\n<p>Constraints: 1&lt;=N&lt;=100</p>\n\n<p>SAMPLE INPUT </p>\n\n<pre><code>3\n3 2 1\n1 3 2\n</code></pre>\n\n<p>SAMPLE OUTPUT </p>\n\n<pre><code>5\n</code></pre>\n\n<p>The first method that came to me was to declare a variable and increase it by one after every swap plus 2, but then if we take an array of size 3, there are only two possibilities. Hence I printed those out, and yes guys this is a problem from an online judge, there was no syntax error, but in the site it tells that there was some problem in declaration, I have no clue what to do I am new to programming and can someone suggest a new method which is applicable for arrays of bigger sizes. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nswap(a,b);\nlong long int a,b;\n\nint main(void) {\n  long long int n,i;\n  long long int a[3],b[3];\n  scanf(\"%d\",&amp;n);\n\n  for(i=0;i&lt;=2;i++)\n  {\n    scanf(\"%d\",a[i]);\n  }\n\n  for(i=0;i&lt;=2;i++)\n  {\n    scanf(\"%d\",&amp;b[i]);\n  }\n\n  if(a[i]=b[i])\n  {\n    printf(\"2\");\n  }\n\n  while(a[i]!=b[i])\n  {\n    swap(b[0],b[2]);\n    swap(b[0],b[1]);\n    {\n      if(a[i]=b[i])\n      printf(\"5\");\n    }\n  }\n\n  return 0;\n}\n\nswap(a,b){\n  long long int temp;\n  a=temp;\n  b=a;\n  temp=b;\n  return swap(a,b);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "clang"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476884942, "post_id": 40133185, "comment_id": 67536346, "body": "<i><a href=\"http://stackoverflow.com/a/32292725/645128\">Optimizations off for CLANG, GCC example here</a></i>.  But this alone may not force the  compiler to do what you want."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476885408, "post_id": 40133185, "comment_id": 67536770, "body": "... Also, these <i><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Simple-Constraints.html#Simple-Constraints\" rel=\"nofollow noreferrer\">constraint keywords</a></i> may help."}, {"owner": {"reputation": 1063, "user_id": 450589, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9986c72663cbc410581696a225c9afd?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro Braione", "link": "https://stackoverflow.com/users/450589/pietro-braione"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476888244, "post_id": 40133185, "comment_id": 67539171, "body": "To make things harder, turning off optimizations might not be an option."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1476888346, "post_id": 40133185, "comment_id": 67539255, "body": "If you want to control the assembly code of your function, or part of it, then the natural solution is to write the code in (inline) assembly in the first place."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1476889615, "creation_date": 1476889615, "answer_id": 40135257, "question_id": 40133185, "link": "https://stackoverflow.com/questions/40133185/is-there-a-way-to-tell-gcc-clang-to-put-some-block-of-code-together/40135257#40135257", "title": "Is there a way to tell gcc/clang to put some block of code together?", "body": "<p>I suspect that this is really an X-Y problem, but inasmuch as you seem disinclined to discuss the reasons for wanting to do what you say, I'll respond to the question you actually asked.</p>\n\n<p>You complain that writing the code in assembly would \"defeat the purpose of using a high-level language\", but that's in fact exactly what you are trying to do anyway.  If you care about details of the assembly code for your function, then you should write in assembly.  If you write in a higher-level compiled language then you are thereby saying that you're ok with the compiler choosing machine code details. In any event, other than disabling optimization (which anyway is not 100% guaranteed to do what you want), GCC and clang do not offer any way to exert the kind of control you describe over code generation from C source.</p>\n\n<p>You do not necessarily need to write the whole function in assembly, however, and you certainly don't need to give up on C for the parts that do not require such fine control.  GCC / clang support <em>inline assembly</em>, with which you can write just those parts you care specially about in assembly.  To the best of my knowledge, you can rely on inline assembly to be treated as a black box -- not subject to any optimization, and not reordered with respect to surrounding code.</p>\n"}], "owner": {"reputation": 1063, "user_id": 450589, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9986c72663cbc410581696a225c9afd?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro Braione", "link": "https://stackoverflow.com/users/450589/pietro-braione"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1476889615, "creation_date": 1476884697, "question_id": 40133185, "link": "https://stackoverflow.com/questions/40133185/is-there-a-way-to-tell-gcc-clang-to-put-some-block-of-code-together", "title": "Is there a way to tell gcc/clang to put some block of code together?", "body": "<p>For some ugly reasons I will not discuss here I need to have some control on how my C compiler (gcc / clang) puts together the generated assembly for a function. Let us say that I have a block of code inside a function <code>f</code>, marked by a pair of labels <code>start</code> and <code>stop</code>:</p>\n\n<pre><code>void f() {\n  ...\nstart:\n   x = 0;\n   y = -1;\n   return;\nstop:\n  ...\n}\n</code></pre>\n\n<p>I would like that the assembly generated for the above block were a contiguous sequence of instructions, as the C instructions are. But C compilers may choose to optimize, e.g., by sharing the assembly code for a same instruction if this is repeated many times in the source program. In the above example, if there were many other places in <code>f</code> where <code>y = -1; return</code>, it might be the case that the compiler decides to generate only one sequence of assembly instruction for this pair of C statements, and emit a jump instruction to it any time it finds a <code>y = -1; return</code>. Is there a way to prevent this other than enclosing the statements in a function (that would be very troublesome in my use case) or programming in assembly (that would defeat the purpose of using a high-level language when it is possible)? Or am I completely without hope?</p>\n"}, {"tags": ["c", "struct", "function-pointers", "undefined-reference", "atmelstudio"], "comments": [{"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1476884750, "post_id": 40133112, "comment_id": 67536177, "body": "use a debugger, get a dump, backtrace and all that, and have a look at what <code>BMM050_MDELAY_DATA_TYPE</code> actually is."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1476884892, "post_id": 40133112, "comment_id": 67536298, "body": "None of the code you&#39;ve shown has any mention of <code>_read</code> and <code>_write</code> (only <code>bus_read</code> or <code>i2c_read</code> etc.). What makes you think the linker is complaining about this code?"}, {"owner": {"reputation": 63, "user_id": 6868910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1205211399500830/picture?type=large", "display_name": "NitrogenAir", "link": "https://stackoverflow.com/users/6868910/nitrogenair"}, "edited": false, "score": 0, "creation_date": 1476885077, "post_id": 40133112, "comment_id": 67536489, "body": "I commented those the two lines where I try to assign functions and errors disappear.  <code>BMM050_MDELAY_DATA_TYPE</code> is a <code>uint_32t</code> and for some reason doing bmm050.delay_msec = delay_cycles_ms works fine"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1476885593, "post_id": 40133112, "comment_id": 67536932, "body": "For the love of obfuscation, use <code>typedef</code> and not icky macros!"}, {"owner": {"reputation": 63, "user_id": 6868910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1205211399500830/picture?type=large", "display_name": "NitrogenAir", "link": "https://stackoverflow.com/users/6868910/nitrogenair"}, "edited": false, "score": 0, "creation_date": 1476885868, "post_id": 40133112, "comment_id": 67537171, "body": "You have a great point, but this comes from fully written driver which I would prefer not to change. I tried rewriting it using <code>typedef</code>, however, as they use these macros everywhere in the code I would need to change it everywhere as well..."}, {"owner": {"reputation": 63, "user_id": 6868910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1205211399500830/picture?type=large", "display_name": "NitrogenAir", "link": "https://stackoverflow.com/users/6868910/nitrogenair"}, "edited": false, "score": 0, "creation_date": 1476886757, "post_id": 40133112, "comment_id": 67537901, "body": "Whilst looking online I found that many people associate this problem to linker. Is there a chance that is the case?"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1476887077, "post_id": 40133112, "comment_id": 67538187, "body": "As far as I can see, to be complaining about <code>_read</code> (instead of, say, <code>bus_read</code>) then either there&#39;s a cut-and-paste error in the code you&#39;re showing (e.g. the 2nd macro definition has a trailing <code>re</code>) or some other macro-stuff is kicking in (you haven&#39;t got <code>i2c</code> defined as an empty string somewhere? ... stray spaces in your assignment statements?)."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1476890589, "post_id": 40133112, "comment_id": 67540945, "body": "Please cut and paste the full &quot;ld&quot; and &quot;undefined&quot; error messages verbatim into the question (as code)."}, {"owner": {"reputation": 63, "user_id": 6868910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1205211399500830/picture?type=large", "display_name": "NitrogenAir", "link": "https://stackoverflow.com/users/6868910/nitrogenair"}, "edited": false, "score": 0, "creation_date": 1476981516, "post_id": 40133112, "comment_id": 67588753, "body": "Please find it added."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1476983506, "post_id": 40133112, "comment_id": 67589880, "body": "Your error messages and the snippets of code you posted here seem completely unrelated."}], "answers": [{"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 1, "last_activity_date": 1476988313, "last_edit_date": 1495540839, "creation_date": 1476983627, "answer_id": 40160568, "question_id": 40133112, "link": "https://stackoverflow.com/questions/40133112/function-pointer-in-struct-not-working/40160568#40160568", "title": "Function pointer in struct not working?", "body": "<p>I am guessing that your <code>i2c_write</code> and <code>i2c_read</code> functions call <code>printf</code>, <code>write</code>, <code>putc</code>, <code>puts</code>, or a similar function.  Yes?  </p>\n\n<p>The errors you are seeing are the wrappers <code>_write_r</code> and <code>_read_r</code> trying to invoke the underlying <code>write</code> and <code>read</code> functions, and not being able to find them.  See, e.g., <a href=\"http://www.billgatliff.com/newlib.html\" rel=\"nofollow noreferrer\">this discussion (sec. 6.4)</a> of implementation of these functions in <a href=\"https://sourceware.org/newlib/\" rel=\"nofollow noreferrer\">the newlib C library</a>.  </p>\n\n<p>The errors disappear when you comment out the <code>bmm050.bus_write = i2c_write</code> and <code>bmm050.bus_read = i2c_read</code> lines because nothing else in your code calls <code>read</code> or <code>write</code>.  If you don't reference <code>i2c_read</code> in your code, such as when those lines are commented out, the linker can remove <code>i2c_read</code> from the compiled object file.  Without <code>i2c_read</code>, there is no need for <code>_read_r</code> or <code>read</code>, so you don't get the linker errors.</p>\n\n<p><strong>So what to do?</strong></p>\n\n<p>A few options, in the order I would try them.</p>\n\n<ol>\n<li>Call your board-support-package (BSP) vendor if you have a support contract.</li>\n<li>Search through the Atmel Studio source/libraries to see if they provide a <code>_read</code> or <code>_write</code> implementation for your particular hardware.  If Atmel Studio includes a BSP for your board, that may include the functions.  (I don't have Atmel Studio myself, and probably wouldn't have the same BSP even if I did, so I can't tell you more specifically than that where to look.)\n\n<ul>\n<li><strong>Note</strong> that those functions may be called <code>read()</code> and <code>write()</code> (without the leading underscore) if they are written in C.  C compilers generally <a href=\"https://stackoverflow.com/a/2628384/2877364\">add a leading underscore to exported names</a>.  </li>\n</ul></li>\n<li>Modify your <code>i2c_read</code> and <code>i2c_write</code> so they access the device's I2C registers directly.  If you can eliminate calls the C library's I/O routines from those functions, you will no longer need <code>_read</code> or <code>_write</code>.</li>\n<li>If you can't find an existing implementation or eliminate the need for one, look online for implementations.  For example, <a href=\"http://www.mikrocontroller.net/topic/351044#3903058\" rel=\"nofollow noreferrer\">this blog post</a> (in German) includes a sample implementation of <code>_write</code>.  That, plus the links below it in the thread, may help you (even if you don't speak German).  </li>\n<li>Finally, if necessary, roll your own <code>_read</code> and <code>_write</code> that will do some meaningful input and output on your particular target.  I gather that's I2C, but you might at some point want that to be UART, LCD, seven-segment display, Nixie, or something else &mdash; write whatever I/O routines you wish!  Note that this basically involves the same type of work as #3, but in a different context.</li>\n</ol>\n\n<p>See also: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/13237079/2877364\">this answer</a>, which relates to a similar situation on a different platform</li>\n<li><a href=\"http://www.openhardware.net/Embedded_ARM/NewLib_Stubs/\" rel=\"nofollow noreferrer\">this discussion</a> of implementing your own OS (effectively) in order for <code>_write_r</code> to have something to talk to!</li>\n</ul>\n"}], "owner": {"reputation": 63, "user_id": 6868910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1205211399500830/picture?type=large", "display_name": "NitrogenAir", "link": "https://stackoverflow.com/users/6868910/nitrogenair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476988313, "creation_date": 1476884521, "last_edit_date": 1476982947, "question_id": 40133112, "link": "https://stackoverflow.com/questions/40133112/function-pointer-in-struct-not-working", "title": "Function pointer in struct not working?", "body": "<p>I have a driver and code that works on IAR but does not work for Atmel Studio 7.  I get an error <code>ld returned 1 exit status</code> and <code>undefined reference to '_read'</code> (or <code>_write</code>) when I try to assign a function to a pointer inside a struct.  </p>\n\n<p>In the driver that I need to use there are two pointers defined as follows:</p>\n\n<pre><code>#define BMM050_WR_FUNC_PTR \\\n    s8 (*bus_write)(u8, u8, \\\n    u8 *, u8)\n\n#define BMM050_RD_FUNC_PTR \\\n    s8 (*bus_read)(u8, u8, \\\n    u8 *, u8)re\n</code></pre>\n\n<p>In the file they have a struct defined as follows:</p>\n\n<pre><code>struct bmm050_t {\n    u8 company_id;/**&lt;mag chip id*/\n    u8 dev_addr;/**&lt;mag device address*/\n\n    BMM050_WR_FUNC_PTR;/**&lt; bus write function pointer*/\n    BMM050_RD_FUNC_PTR;/**&lt; bus read function pointer*/\n    void (*delay_msec)(BMM050_MDELAY_DATA_TYPE);/**&lt; delay function pointer*/\n\n    s8 dig_x1;/**&lt; trim x1 data */\n    s8 dig_y1;/**&lt; trim y1 data */\n\n    s8 dig_x2;/**&lt; trim x2 data */\n    s8 dig_y2;/**&lt; trim y2 data */\n\n    u16 dig_z1;/**&lt; trim z1 data */\n    s16 dig_z2;/**&lt; trim z2 data */\n    s16 dig_z3;/**&lt; trim z3 data */\n    s16 dig_z4;/**&lt; trim z4 data */\n\n    u8 dig_xy1;/**&lt; trim xy1 data */\n    s8 dig_xy2;/**&lt; trim xy2 data */\n\n    u16 dig_xyz1;/**&lt; trim xyz1 data */\n};\n</code></pre>\n\n<p>In my application I try to do:</p>\n\n<pre><code>bmm050.bus_write = i2c_write;\nbmm050.bus_read = i2c_read;\n</code></pre>\n\n<p>My functions are defined as:</p>\n\n<pre><code>int8_t i2c_write(uint8_t dev_addr, uint8_t reg_addr, uint8_t *reg_data, uint8_t count);\n\nint8_t i2c_read(uint8_t dev_addr, uint8_t reg_addr, uint8_t *reg_data, uint8_t count);\n</code></pre>\n\n<p>EDIT: I am attaching the error code as asked:</p>\n\n<pre><code>c:/program files (x86)/atmel/studio/7.0/toolchain/arm/arm-gnu-toolchain/bin/../lib/gcc/arm-none-eabi/5.3.1/../../../../arm-none-eabi/lib/armv6-m\\libc.a(lib_a-writer.o): In function `_write_r':\nC:\\Users\\aba\\Documents\\Atmel Studio\\7.0\\Project1\\Project1\\Debug\\writer.c(1,1): error: undefined reference to `_write'\nc:/program files (x86)/atmel/studio/7.0/toolchain/arm/arm-gnu-toolchain/bin/../lib/gcc/arm-none-eabi/5.3.1/../../../../arm-none-eabi/lib/armv6-m\\libc.a(lib_a-readr.o): In function `_read_r':\nC:\\Users\\aba\\Documents\\Atmel Studio\\7.0\\Project1\\Project1\\Debug\\readr.c(1,1): error: undefined reference to `_read'\ncollect2.exe(0,0): error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c", "sqlite", "uri"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476883474, "post_id": 40132421, "comment_id": 67535206, "body": "Try <code>&quot;file:&#47;&#47;path-to-db&#47;fuel_transaction_1.db&quot;;</code> (double <code>&#47;</code>after <code>file:</code>. But does <code>sqlite3_open</code> accept an URI instead of a plain filename ? The doc doesn&#39;t say so."}, {"owner": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476884270, "post_id": 40132421, "comment_id": 67535808, "body": "Thanks for your comment. but It didn&#39;t work too."}], "answers": [{"comments": [{"owner": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "edited": false, "score": 0, "creation_date": 1476884289, "post_id": 40132767, "comment_id": 67535815, "body": "Thanks for your reply. actually I don&#39;t know where and how should I add <code>SQLITE_USE_URI=1</code>."}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "reply_to_user": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "edited": false, "score": 0, "creation_date": 1476884608, "post_id": 40132767, "comment_id": 67536073, "body": "You use SQLITE_USE_URI=1 if you compile SQLITE yourself otherwise you can change this setting at runtime with this command: sqlite3_config(SQLITE_CONFIG_URI,1)"}, {"owner": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "edited": false, "score": 0, "creation_date": 1476885211, "post_id": 40132767, "comment_id": 67536596, "body": "@Marco, I also tried adding <code>sqlite3_config(SQLITE_CONFIG_URI,1)</code>; , but still the output is <code>Can&#39;t open database: unable to open database file</code>"}, {"owner": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476885323, "post_id": 40132767, "comment_id": 67536699, "body": "@MichaelWalz: tnx for the comment. I don&#39;t know where I should write the uri in <code>sqlite3_open_v2(dbname, &amp;db, SQLITE_USE_URI=1, NULL);</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "edited": false, "score": 1, "creation_date": 1476885520, "post_id": 40132767, "comment_id": 67536864, "body": "@mOna The <a href=\"https://www.sqlite.org/c3ref/open.html\" rel=\"nofollow noreferrer\"><code>documentation</code></a> is clear enough, isn&#39;t it ?`"}, {"owner": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476886078, "post_id": 40132767, "comment_id": 67537330, "body": "@MichaelWalz: no, honestly I read the documentation even before I post my question, but still didn&#39;t understand it well :| I tried <code>sqlite3_open_v2(uri, &amp;db, SQLITE_USE_URI=1, NULL);</code> instead of <code>sqlite3_open</code> in my code, but now I get this error: <code>error: \u2018SQLITE_USE_URI\u2019 undeclared (first use in this function)</code>"}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1476886199, "post_id": 40132767, "comment_id": 67537425, "body": "rc = sqlite3_open_v2(uri, &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE | SQLITE_OPEN_URI, NULL);"}], "tags": [], "owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "is_accepted": false, "score": 1, "last_activity_date": 1476946043, "last_edit_date": 1476946043, "creation_date": 1476883603, "answer_id": 40132767, "question_id": 40132421, "link": "https://stackoverflow.com/questions/40132421/sqlite3-open-does-not-recognize-uri-filename-in-c/40132767#40132767", "title": "sqlite3_open does not recognize URI Filename in C", "body": "<p><strong>In short:</strong> if you want to have URI support you have to compile your sqlite with SQLITE_USE_URI=1 or use this line to open your DB. </p>\n\n<pre><code>rc = sqlite3_open_v2(uri, &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE | SQLITE_OPEN_URI, NULL);\n</code></pre>\n\n<p>From <a href=\"http://www.sqlite.org/uri.html#backwards_compatibility\" rel=\"nofollow\">SQLite documentation</a>:</p>\n\n<blockquote>\n  <p>Backwards Compatibility</p>\n  \n  <p>In order to maintain full backwards compatibility for legacy applications, the URI filename capability is disabled by default. URI filenames can be enabled or disabled using the SQLITE_USE_URI=1 or SQLITE_USE_URI=0 compile-time options. The compile-time setting for URI filenames can be changed at start-time using the sqlite3_config(SQLITE_CONFIG_URI,1) or sqlite3_config(SQLITE_CONFIG_URI,0) configuration calls. Regardless of the compile-time or start-time settings, URI filenames can be enabled for individual database connections by including the SQLITE_OPEN_URI bit in the set of bits passed as the F parameter to sqlite3_open_v2(N,P,F,V).</p>\n  \n  <p>If URI filenames are recognized when the database connection is originally opened, then URI filenames will also be recognized on ATTACH statements. Similarly, if URI filenames are not recognized when the database connection is first opened, they will not be recognized by ATTACH.</p>\n  \n  <p>Since SQLite always interprets any filename that does not begin with \"<code>file:</code>\" as an ordinary filename regardless of the URI setting, and because it is very unusual to have an actual file begin with \"<code>file:</code>\", it is safe for most applications to enable URI processing even if URI filenames are not currently being used. </p>\n</blockquote>\n\n<p>try this code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sqlite3.h&gt;\n#include \"litereplica.h\"\n\nint main(int argc, char* argv[])\n{\n   sqlite3 *db;\n   char *zErrMsg = 0;\n   int rc;\n   char *uri =\"file:/path-to-db/fuel_transaction_1.db\";\n\n   rc = sqlite3_open_v2(uri, &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE | SQLITE_OPEN_URI, NULL);\n\n   //rc = sqlite3_open(uri, &amp;db);\n\n   if( rc ){\n      fprintf(stderr, \"Can't open database: %s\\n\", sqlite3_errmsg(db));\n      return(0);\n   }else{\n      fprintf(stderr, \"Opened database successfully\\n\");\n   }   \n   sqlite3_close(db);\n}\n</code></pre>\n"}], "owner": {"reputation": 1877, "user_id": 2312801, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/nsH53.jpg?s=128&g=1", "display_name": "mOna", "link": "https://stackoverflow.com/users/2312801/mona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476946043, "creation_date": 1476882780, "question_id": 40132421, "link": "https://stackoverflow.com/questions/40132421/sqlite3-open-does-not-recognize-uri-filename-in-c", "title": "sqlite3_open does not recognize URI Filename in C", "body": "<p>I wrote this sample C code to open the database:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sqlite3.h&gt;\n#include \"litereplica.h\"\n\nint main(int argc, char* argv[])\n{\n   sqlite3 *db;\n   char *zErrMsg = 0;\n   int rc;\n   char *uri =\"file:/path-to-db/fuel_transaction_1.db\";\n   rc = sqlite3_open(uri, &amp;db);\n\n   if( rc ){\n      fprintf(stderr, \"Can't open database: %s\\n\", sqlite3_errmsg(db));\n      return(0);\n   }else{\n      fprintf(stderr, \"Opened database successfully\\n\");\n   }   \n   sqlite3_close(db);\n}\n</code></pre>\n\n<p>When I compile and run this code, the output is <code>Can't open database: unable to open database file</code>.\nI changed the <code>char *uri =\"file:/path-to-db/fuel_transaction_1.db\";</code> to this : <code>char *uri =\"/path-to-db/fuel_transaction_1.db\";</code> and it opened the database.</p>\n\n<p>Could someone let me know why it does not recognize URI filename?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "driver", "kernel-module"], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1476885090, "creation_date": 1476885090, "answer_id": 40133358, "question_id": 40132397, "link": "https://stackoverflow.com/questions/40132397/linux-character-device-modules-why-do-we-need-both-owner-and-mod-inc-use-count/40133358#40133358", "title": "Linux Character Device Modules: Why do we need both *owner and MOD_INC_USE_COUNT?", "body": "<p>Incrementing module's usage counter requires module's structure to be in use.</p>\n\n<p>Macro <code>MOD_INC_USE_COUNT</code> indirectly uses <code>THIS_MODULE</code> pointer, which corresponds to the <strong>currently compiled</strong> module. In other words, for increment module's usage counter with this macro, you need to call it from the <strong>module's code</strong>.</p>\n\n<p>From the other side, file operations are issued from <em>outside of the module</em> (in Virtual FileSystem layer, VFS). So prevention of the module's unloading should be performed <strong>outside of the module</strong>, otherwise race conditions are unavoidable [Think about calling <code>.open</code> function from outside of the module and module's unloading at the same time]. That is why <code>.owner</code> field is needed.</p>\n\n<hr>\n\n<p>Modern kernel doesn't have macro <code>MOD_INC_USE_COUNT</code>. Instead, it defines function</p>\n\n<pre><code>void __module_get(struct module* mod);\n</code></pre>\n\n<p>which <em>directly</em> accepts module parameter.</p>\n"}], "owner": {"reputation": 1263, "user_id": 3243080, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/444aed7d2fb823ac86b8c325e62359c7?s=128&d=identicon&r=PG&f=1", "display_name": "Dean Leitersdorf", "link": "https://stackoverflow.com/users/3243080/dean-leitersdorf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "accepted_answer_id": 40133358, "answer_count": 1, "score": 1, "last_activity_date": 1476885090, "creation_date": 1476882713, "question_id": 40132397, "link": "https://stackoverflow.com/questions/40132397/linux-character-device-modules-why-do-we-need-both-owner-and-mod-inc-use-count", "title": "Linux Character Device Modules: Why do we need both *owner and MOD_INC_USE_COUNT?", "body": "<p>I am currently studying character device modules (drivers) and I am bewildered as to why there is both a use count and a *owner (in the file operations struct).</p>\n\n<p>As can be seen in the following link, the file operations struct is:</p>\n\n<pre><code>struct file_operations {\n       struct module *owner;\n       loff_t (*llseek) (struct file *, loff_t, int);\n       ssize_t (*read) (struct file *, char *, size_t, loff_t *);\n       ssize_t (*write) (struct file *, const char *, size_t, loff_t *);\n       int (*readdir) (struct file *, void *, filldir_t);\n       unsigned int (*poll) (struct file *, struct poll_table_struct *);\n       int (*ioctl) (struct inode *, struct file *, unsigned int, unsigned long);\n       int (*mmap) (struct file *, struct vm_area_struct *);\n       int (*open) (struct inode *, struct file *);\n       int (*flush) (struct file *);\n       int (*release) (struct inode *, struct file *);\n       int (*fsync) (struct file *, struct dentry *, int datasync);\n       int (*fasync) (int, struct file *, int);\n       int (*lock) (struct file *, int, struct file_lock *);\n         ssize_t (*readv) (struct file *, const struct iovec *, unsigned long,\n          loff_t *);\n         ssize_t (*writev) (struct file *, const struct iovec *, unsigned long,\n          loff_t *);\n    };\n</code></pre>\n\n<p><a href=\"http://www.tldp.org/LDP/lkmpg/2.4/html/c577.htm\" rel=\"nofollow\">http://www.tldp.org/LDP/lkmpg/2.4/html/c577.htm</a></p>\n\n<p>As we were taught in class, the *owner is used to ensure that the module isn't unloaded if there is a device still using it.\nHowever, further down the article in the link above, they describe that this is accomplished through the use of macros such as MOD_INC_USE_COUNT.</p>\n\n<p>Therefore, my question is: why do we need both? Do the macros use the pointer in order to access this counter?</p>\n"}, {"tags": ["c", "obfuscation"], "comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 6, "creation_date": 1476882232, "post_id": 40132087, "comment_id": 67534312, "body": "Organise your codebase such that the parts which your collaborators should not need to modify can be presented to them in compiled and linkable form, leaving only the parts to be modified available in source form.  Would that suffice ?"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 6928473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/54PG1.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/6928473/mat"}, "is_accepted": false, "score": 0, "last_activity_date": 1476883724, "last_edit_date": 1476883724, "creation_date": 1476882989, "answer_id": 40132497, "question_id": 40132087, "link": "https://stackoverflow.com/questions/40132087/partial-obfuscation-c-code/40132497#40132497", "title": "Partial Obfuscation C code", "body": "<p>If the functionalities you mentioned, are in form of functions you can provide function pointer type definitions in your header, and let the user register their own functions. You should also add a Register_Func() function to your header.\nThis function modifies the static pointers to these functions. </p>\n\n<p>in your header:</p>\n\n<pre><code>typedef void (*myfunc_p)(int);\n\nvoid Register_Func(myfunc_p F);\n</code></pre>\n\n<p>Then in your code:</p>\n\n<pre><code>static myfunc_p   Modified_Function;\n\nvoid Register_Func(myfunc_p F)\n{\n  Modified_Function=F;\n}\n</code></pre>\n\n<p>Then you can only share a DLL, along with your header. And they can register their customized code.</p>\n"}, {"tags": [], "owner": {"reputation": 543, "user_id": 5799892, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/549c8d3e3f2bb3041f24177a5fcdb031?s=128&d=identicon&r=PG&f=1", "display_name": "cdcdcd", "link": "https://stackoverflow.com/users/5799892/cdcdcd"}, "is_accepted": false, "score": 0, "last_activity_date": 1476884773, "last_edit_date": 1476884773, "creation_date": 1476884411, "answer_id": 40133055, "question_id": 40132087, "link": "https://stackoverflow.com/questions/40132087/partial-obfuscation-c-code/40133055#40133055", "title": "Partial Obfuscation C code", "body": "<p>It depends how messy it gets. I'd just create an API that expose the functionalities they need and provide them with the source code they want to modify as a separate library. This way they'll only see the prototypes (and you can obfuscate these with dummy parameters) and any source code examples. That way, for the most part, supply them the .dlls or .so files for them to build against. If they keep asking for more code it might be time to openly refuse.</p>\n\n<p>BTW, if this is a collaboration then you don't have to give them anything but if they've commission you to do some work they may have rights to access all your code if it hasn't been stipulated otherwise. So check your agreement you mightn't have a choice.</p>\n\n<p>In truth if you're using something like C (and a code base of say less than 10,000 lines) it doesn't take much to disassemble code and reverse/back engineer. A good assembly programmer wont have much problems here. Compiling with optimisation will make it slightly more difficult.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 5900100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62431f84dea78661421977c68eb41086?s=128&d=identicon&r=PG&f=1", "display_name": "NikBomb", "link": "https://stackoverflow.com/users/5900100/nikbomb"}, "is_accepted": false, "score": 0, "last_activity_date": 1476892736, "creation_date": 1476892736, "answer_id": 40136397, "question_id": 40132087, "link": "https://stackoverflow.com/questions/40132087/partial-obfuscation-c-code/40136397#40136397", "title": "Partial Obfuscation C code", "body": "<p>Since we will all be working with VS, I deleted the source code and added the obj files. It is working.</p>\n"}], "owner": {"reputation": 3, "user_id": 5900100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62431f84dea78661421977c68eb41086?s=128&d=identicon&r=PG&f=1", "display_name": "NikBomb", "link": "https://stackoverflow.com/users/5900100/nikbomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1476892736, "creation_date": 1476881920, "question_id": 40132087, "link": "https://stackoverflow.com/questions/40132087/partial-obfuscation-c-code", "title": "Partial Obfuscation C code", "body": "<p>I have a big project to share, with several files and linked libraries. My collaborators will need to modify some specific functionalities. Is there any way I can partially obfuscate the non development-needed  areas of the code?</p>\n"}, {"tags": ["c++", "c", "sockets"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1476884421, "post_id": 40131862, "comment_id": 67535913, "body": "How are you calling <code>udp_server::udp_server</code> and <code>server::sendto</code>?"}, {"owner": {"reputation": 45, "user_id": 5434565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4bb8a66d4f1548d62067ad05f50bc2?s=128&d=identicon&r=PG", "display_name": "victor_crimea", "link": "https://stackoverflow.com/users/5434565/victor-crimea"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1476884908, "post_id": 40131862, "comment_id": 67536311, "body": "<code>this-&gt;server = make_unique&lt;udp_server&gt;(&#39;localhost&#39;, localControlPort);</code> and then <code>this-&gt;server-&gt;sendto(this-&gt;remoteHost, this-&gt;controlPort, (const char *)(buffer), static_cast&lt;size_t&gt;(length));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5434565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4bb8a66d4f1548d62067ad05f50bc2?s=128&d=identicon&r=PG", "display_name": "victor_crimea", "link": "https://stackoverflow.com/users/5434565/victor-crimea"}, "edited": false, "score": 0, "creation_date": 1476885693, "post_id": 40133357, "comment_id": 67537017, "body": "Rigth. In a deep debugging I decided to change arguments to hardcoded values. Just to be sure."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1476885086, "creation_date": 1476885086, "answer_id": 40133357, "question_id": 40131862, "link": "https://stackoverflow.com/questions/40131862/udp-server-sending-data-to-specific-client-until-any-recvfrom/40133357#40133357", "title": "udp server sending data to specific client until any recvfrom", "body": "<p>This error can occur if you bind to <code>localhost</code> and attempt to send to a non-local IP.</p>\n\n<p>If you want to be able to send from any interface, you should bind to <code>0.0.0.0</code>.</p>\n\n<p>Also, in <code>udp_server::sendto</code>, you set <code>remote.sin_port</code> and <code>remote.sin_addr</code> to hardcoded values.  You probably want to use the <code>remoteHost</code> and <code>port</code> parameters here.</p>\n"}], "owner": {"reputation": 45, "user_id": 5434565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4bb8a66d4f1548d62067ad05f50bc2?s=128&d=identicon&r=PG", "display_name": "victor_crimea", "link": "https://stackoverflow.com/users/5434565/victor-crimea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 40133357, "answer_count": 1, "score": 3, "last_activity_date": 1476885859, "creation_date": 1476881381, "last_edit_date": 1476885859, "question_id": 40131862, "link": "https://stackoverflow.com/questions/40131862/udp-server-sending-data-to-specific-client-until-any-recvfrom", "title": "udp server sending data to specific client until any recvfrom", "body": "<p>I writing a library that should implement UDP-based protocol.\nI'm host A, remote is host B.\nI need to send message from host A, port 7011, to host B port 7011. Then Host B will answer to the host A, port 7011. Communication is async, so I need the udp which will listen for incoming messages, and also sometimes I need to send messages from the same port the server is binded to.</p>\n\n<p>Here is how i'm creating and binding socket:</p>\n\n<pre><code>udp_server::udp_server(const std::string &amp;localAddress, int localPort)\n    : f_port(localPort), f_addr(localAddress) {\n    char decimal_port[16];\n    snprintf(decimal_port, sizeof(decimal_port), \"%d\", f_port);\n    decimal_port[sizeof(decimal_port) / sizeof(decimal_port[0]) - 1] = '\\0';\n    struct addrinfo hints;\n    memset(&amp;hints, 0, sizeof(hints));\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_DGRAM;\n    hints.ai_protocol = IPPROTO_UDP;\n    int r(getaddrinfo(localAddress.c_str(), decimal_port, &amp;hints, &amp;f_addrinfo));\n    if (r != 0 || f_addrinfo == NULL) {\n        throw udp_client_server_runtime_error(\n            (\"invalid address or port for UDP socket: \\\"\" + localAddress + \":\" + decimal_port + \"\\\"\").c_str());\n    }\n    f_socket = socket(f_addrinfo-&gt;ai_family, SOCK_DGRAM | SOCK_CLOEXEC, IPPROTO_UDP);\n    if (f_socket == -1) {\n        freeaddrinfo(f_addrinfo);\n        throw udp_client_server_runtime_error(\n            (\"could not create UDP socket for: \\\"\" + localAddress + \":\" + decimal_port + \"\\\"\").c_str());\n    }\n    r = bind(f_socket, f_addrinfo-&gt;ai_addr, f_addrinfo-&gt;ai_addrlen);\n    if (r != 0) {\n        freeaddrinfo(f_addrinfo);\n        close(f_socket);\n        throw udp_client_server_runtime_error(\n            (\"could not bind UDP socket with: \\\"\" + localAddress + \":\" + decimal_port + \"\\\"\").c_str());\n    }\n} \n</code></pre>\n\n<p>And here I'm trying to send message:</p>\n\n<pre><code>ssize_t udp_server::sendto(std::string remoteHost, uint16_t port, const char *message, size_t messageLength) {\n    struct sockaddr_in remote;\n    remote.sin_family = AF_INET;\n    remote.sin_port = htons(7011);\n    remote.sin_addr.s_addr = ::inet_addr(\"10.8.0.6\");\n\n    socklen_t addrSize;\n    addrSize = sizeof(remote);\n\n    memset(remote.sin_zero, '\\0', sizeof(remote.sin_zero));\n    dout &lt;&lt; \"messageLength: \" &lt;&lt; messageLength &lt;&lt; std::endl;\n    return ::sendto(this-&gt;f_socket, message, messageLength, 0, (struct sockaddr *)&amp;remote, addrSize);\n}\n</code></pre>\n\n<p>But ::sendto always returns -1. And errno is set to 22, which means invalid argument. What is the possible solutions? Maybe overall structure is bad.</p>\n\n<p>=== Solution ===\nI've bind my server to locahost :( \nShould be 0.0.0.0 or INADDR_ANY.</p>\n"}, {"tags": ["c", "encryption", "password-encryption"], "comments": [{"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1476881014, "post_id": 40131661, "comment_id": 67533340, "body": "See XTEA algorithm. It is very short. In addition it will be necessary to add CBC and Base64/uuencode to make get text output."}, {"owner": {"reputation": 1563, "user_id": 1311571, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b39a1d543cc5e64adfcebc9301850df2?s=128&d=identicon&r=PG", "display_name": "Peter Schneider", "link": "https://stackoverflow.com/users/1311571/peter-schneider"}, "edited": false, "score": 2, "creation_date": 1476881161, "post_id": 40131661, "comment_id": 67533468, "body": "Rule number one when doing encryption: Use a library. There are so many ways to do it wrong in ways you had never heard off, you will never get it really secure. Of course, this is not an issue if you only have low level security."}, {"owner": {"reputation": 23, "user_id": 828443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03fb4aed092ab2ae033c3a7d0529c585?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/828443/rahul"}, "edited": false, "score": 0, "creation_date": 1476944736, "post_id": 40131661, "comment_id": 67563171, "body": "Thank you for the reply. XTEA seems to be good option, since it can be compiled independently.   Any example of how to use this <a href=\"https://tls.mbed.org/api/xtea_8c_source.html\" rel=\"nofollow noreferrer\">tls.mbed.org/api/xtea_8c_source.html</a> in the current context of client server will be helpful.  I am still new on how to convert encrypted response to HEX and then send it back to Client (from Server).  Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 885, "user_id": 1565759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3dc17ae006a7794606b861d3d59bd5b0?s=128&d=identicon&r=PG", "display_name": "sonOfRa", "link": "https://stackoverflow.com/users/1565759/sonofra"}, "is_accepted": false, "score": 0, "last_activity_date": 1500483575, "creation_date": 1500483575, "answer_id": 45196726, "question_id": 40131661, "link": "https://stackoverflow.com/questions/40131661/how-to-encrypt-and-decrypt-char-in-c/45196726#45196726", "title": "How to Encrypt And Decrypt char[] in C?", "body": "<p>If you can at all relax the \"no external dependencies\" requirement, you should use <a href=\"https://github.com/jedisct1/libsodium\" rel=\"nofollow noreferrer\" title=\"libsodium\">libsodium</a>. I described how to do this in a bit of length here: <a href=\"https://stackoverflow.com/questions/7622617/simply-encrypt-a-string-in-c/45196460#45196460\">Simply encrypt a string in C</a>. For a chat program, you probably want option 3 (Public Key Encryption).</p>\n\n<p>The reason here is: You cannot reasonably expect to implement <em>any</em> of the currently strong encryption algorithms yourself in a way that is safe. Libsodium is a relatively small dependency which safely implements high level abstractions over algorithms that are currently considered fast and secure.</p>\n\n<p>Anything you do <em>short</em> of actual encryption algorithms is just obfuscation and is easily readable even for low-budget attackers. A shift (or caesar) cipher, for example, leaks information about patterns in the plain text. This is especially bad if your plain text is language: With just a few (maybe 100) words being sent and \"encrypted\", an attacker who can sniff the traffic will be able to decrypt all past and future communication by guessing the correct key.</p>\n"}], "owner": {"reputation": 23, "user_id": 828443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03fb4aed092ab2ae033c3a7d0529c585?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/828443/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500483575, "creation_date": 1476880800, "question_id": 40131661, "link": "https://stackoverflow.com/questions/40131661/how-to-encrypt-and-decrypt-char-in-c", "title": "How to Encrypt And Decrypt char[] in C?", "body": "<p>I have a simple C Program which is more like a \"Echo\" Server, for this i want to use encryption, with following requirement,</p>\n\n<ol>\n<li>From Client side after sending plain text to Server, Client will\n\"encrypt this string\" with \"predefined password\" and keep it ready</li>\n<li>Server will receive plain text, and encrypt this string using pre-defined\npassword and send it back </li>\n<li>Client will receive the encrypted text, compare it with encrypted text on it's side, and if both match, no error, else show error</li>\n</ol>\n\n<p>Been trying lot of options, but here are other requirements, which keeps failing, </p>\n\n<ol>\n<li>No external libs dependencies</li>\n<li>Encrypted text should be printable and be savable to file (HEX Is fine too)</li>\n<li>This code is run very frequently (like chat server). So needs to be as fast as possible, yet not too easy to guess.</li>\n</ol>\n\n<p>Can i please get some help on completing this code, with Encrypted text needs to be in plain ASCII (or HEX).</p>\n\n<p>Following is the sample of my existing code,</p>\n\n<p><strong>ON CLIENT SIDE</strong></p>\n\n<pre><code>char *randomAllowchar = \"abcdefghijklmnopqrstuvwxyz\";\nchar plainStrToServer[30];      \n\n// generating 20 char random string           \nfor (n = 0;n &lt; 20;n++) {  \n    key = rand() % 26;          \n    plainStrToServer[n] = randomAllowchar[key];\n}\n\n... other code to send this plainStrToServer to server side\n\n// Receiving response from server\nchar server_reply[200];\nif( recv(sock , server_reply , 200 , 0) &lt; 0){\n    ...\n}\n\n// comparing if server response matched with sent string\nif (strcmp(plainStrToServer,server_reply) != 0) { \n    // Error \n}\n</code></pre>\n\n<hr>\n\n<p><strong>ON SERVER SIDE</strong></p>\n\n<pre><code>char buffer[30];\nint rc1;\n\nwhile (1) { \n    rc1 = read(fd, buffer, sizeof(buffer));\n    // write back original received message back to client\n    write(fd , buf, strlen(buffer));    \n}\n</code></pre>\n"}, {"tags": ["c", "linux", "structure"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476880025, "post_id": 40131315, "comment_id": 67532586, "body": "Your code compiles fine here. How exactly do ou compile this code ? Are you sure the code you show here is the code you are actually compiling ?"}, {"owner": {"reputation": 1548, "user_id": 3082873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wT9Nk.jpg?s=128&g=1", "display_name": "cagdas", "link": "https://stackoverflow.com/users/3082873/cagdas"}, "edited": false, "score": 2, "creation_date": 1476880070, "post_id": 40131315, "comment_id": 67532618, "body": "need to share your makefile or the way you compile it. Nothing wrong with the code."}, {"owner": {"reputation": 1548, "user_id": 3082873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wT9Nk.jpg?s=128&g=1", "display_name": "cagdas", "link": "https://stackoverflow.com/users/3082873/cagdas"}, "edited": false, "score": 0, "creation_date": 1476880477, "post_id": 40131315, "comment_id": 67532931, "body": "if your main is int, need to return some int. Possibly you are compiling with a wrong compiler."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1476880582, "post_id": 40131315, "comment_id": 67533027, "body": "Don&#39;t know if it will help but... Have you read: <a href=\"http://stackoverflow.com/questions/20237490/error-in-makefile-multiple-definition-of-start\" title=\"error in makefile multiple definition of start\">stackoverflow.com/questions/20237490/&hellip;</a>"}, {"owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476881523, "post_id": 40131315, "comment_id": 67533746, "body": "on terminal first i write, gcc -o newproject newproject.c"}, {"owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476881548, "post_id": 40131315, "comment_id": 67533768, "body": "then to run it i wrote, gcc ./newproject"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476881954, "post_id": 40131315, "comment_id": 67534098, "body": "@SaudFarooqui please edit your question and make that clear <b>there</b>."}, {"owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476881961, "post_id": 40131315, "comment_id": 67534103, "body": "I found nothing of my point in the link given by you above, he asked about some makefile problem but i think my problem is looking same but it is different"}, {"owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476882087, "post_id": 40131315, "comment_id": 67534212, "body": "i have mentioned everything in the question my program.... my errors, i only want to know about how to fix these errors"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476882135, "post_id": 40131315, "comment_id": 67534251, "body": "@SaudFarooqui  no, in your question you didn&#39;t write how you compile the program and how you run it."}, {"owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476882158, "post_id": 40131315, "comment_id": 67534265, "body": "on terminal, to compile i wrote the command gcc -o newproject newproject.c"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476882218, "post_id": 40131315, "comment_id": 67534303, "body": "@SaudFarooqui yes I understgood now, but next time you ask a question here, put <b>all</b> relevant information into the question."}, {"owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476882262, "post_id": 40131315, "comment_id": 67534328, "body": "saud@saud-VirtualBox:~$ gcc -o newproject newproject.c saud@saud-VirtualBox:~$ gcc ./newproject I am compiling by the above commands"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476884040, "post_id": 40132150, "comment_id": 67535644, "body": "Thanks to pick the mistake"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "edited": false, "score": 0, "creation_date": 1476894445, "post_id": 40132150, "comment_id": 67543452, "body": "@SaudFarooqui - Please consider to accept the question if it solved your problem. That will help us all to see that the problem has been solved."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1533262236, "last_edit_date": 1533262236, "creation_date": 1476882073, "answer_id": 40132150, "question_id": 40131315, "link": "https://stackoverflow.com/questions/40131315/errors-occurring-on-running-c-program/40132150#40132150", "title": "Errors occurring on running C program", "body": "<p>To compile you need to write this:</p>\n\n<pre><code>gcc -o newproject newproject.c\n</code></pre>\n\n<p>this creates a file named <code>newproject</code> which you can run by writing this:</p>\n\n<pre><code>./newproject\n</code></pre>\n\n<p>It doesn't make any sense to write <code>gcc ./newproject</code> to <em>run</em> your program.</p>\n"}], "owner": {"reputation": 27, "user_id": 7035489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1832911976944644/picture?type=large", "display_name": "Saud Farooqui", "link": "https://stackoverflow.com/users/7035489/saud-farooqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1533263158, "creation_date": 1476879820, "last_edit_date": 1533263158, "question_id": 40131315, "link": "https://stackoverflow.com/questions/40131315/errors-occurring-on-running-c-program", "title": "Errors occurring on running C program", "body": "<p>I wrote a C program on Linux. When I compile the program, no errors occur, but when I run it, I receive a number of errors. My program is,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct a{\n char *name;\n int id;\n char *department;\n int num;\n} ab;\n\nint main()\n{\n ab array[2]={{\"Saud\",137,\"Electronics\",500},{\"Ebad\",111,\"Telecom\",570}};\n printf(\"First student data:\\n%s\\t%d\\t%s\\t%d\",array[0].name,array[0].id,\n     array[0].department,array[0].num);\n\n //ab swap(&amp;array[]);\n}\n</code></pre>\n\n<p>Errors are:</p>\n\n<pre><code>./newproject: In function `_fini':\n(.fini+0x0): multiple definition of `_fini'\n/usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/crti.o:(.fini+0x0): first defined here\n./newproject: In function `data_start':\n(.data+0x0): multiple definition of `__data_start'\n/usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/crt1.o:(.data+0x0): first defined here\n./newproject: In function `data_start':\n(.data+0x8): multiple definition of `__dso_handle'\n/usr/lib/gcc/x86_64-linux-gnu/5/crtbegin.o:(.data+0x0): first defined here\n./newproject:(.rodata+0x0): multiple definition of `_IO_stdin_used'\n/usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/crt1.o:(.rodata.cst4+0x0): first defined here\n./newproject: In function `_start':\n(.text+0x0): multiple definition of `_start'\n/usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/crt1.o:(.text+0x0): first defined here\n./newproject: In function `_init':\n(.init+0x0): multiple definition of `_init'\n/usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/crti.o:(.init+0x0): first defined here\n/usr/lib/gcc/x86_64-linux-gnu/5/crtend.o:(.tm_clone_table+0x0): multiple definition of `__TMC_END__'\n./newproject:(.data+0x10): first defined here\n/usr/bin/ld: error in ./newproject(.eh_frame); no .eh_frame_hdr table will be created.\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 331, "user_id": 3852932, "user_type": "registered", "profile_image": "https://graph.facebook.com/1193762162/picture?type=large", "display_name": "Alexie Dariciuc", "link": "https://stackoverflow.com/users/3852932/alexie-dariciuc"}, "edited": false, "score": 0, "creation_date": 1476880346, "post_id": 40131142, "comment_id": 67532835, "body": "Have you tried compiling with flag -std=gnu99 ?"}, {"owner": {"reputation": 4011, "user_id": 1788851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JBd9d.gif?s=128&g=1", "display_name": "Edouard Thiel", "link": "https://stackoverflow.com/users/1788851/edouard-thiel"}, "edited": false, "score": 1, "creation_date": 1476880535, "post_id": 40131142, "comment_id": 67532979, "body": "Also try with -std=c99 -D_GNU_SOURCE"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1476881791, "post_id": 40131142, "comment_id": 67533963, "body": "The GCC compiler running in &quot;GNU mode&quot; <code>-std=gnu90</code> (which is the default setting up to GCC version 5) dumps all manner of non-standard junk in standard libraries. This isn&#39;t allowed by the C standard, so when you tell it to compile the code as standard C, it removes the non-standard junk. Possibly, it removes a bit too much in this case. POSIX tends to collide with standard C here and there, might be why."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6182137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-iCQymWdmOLU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZ13mOv03YzmAz7Mvnq_rAc0YsVg/mo/photo.jpg?sz=128", "display_name": "Erik", "link": "https://stackoverflow.com/users/6182137/erik"}, "edited": false, "score": 0, "creation_date": 1476880181, "post_id": 40131345, "comment_id": 67532715, "body": "As I said I have both of those included. And why do I have to declare a prototype if I have both .h files included? Every other function in that program works. Only truncate is getting this error."}, {"owner": {"reputation": 25, "user_id": 6182137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-iCQymWdmOLU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZ13mOv03YzmAz7Mvnq_rAc0YsVg/mo/photo.jpg?sz=128", "display_name": "Erik", "link": "https://stackoverflow.com/users/6182137/erik"}, "edited": false, "score": 0, "creation_date": 1476880622, "post_id": 40131345, "comment_id": 67533060, "body": "Well It worked but I have no idea why... THanks a lot anyway"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 25, "user_id": 6182137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-iCQymWdmOLU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZ13mOv03YzmAz7Mvnq_rAc0YsVg/mo/photo.jpg?sz=128", "display_name": "Erik", "link": "https://stackoverflow.com/users/6182137/erik"}, "edited": false, "score": 1, "creation_date": 1476880850, "post_id": 40131345, "comment_id": 67533220, "body": "@Erik Post all of your code and maybe it&#39;d be possible to know why."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 25, "user_id": 6182137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-iCQymWdmOLU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZ13mOv03YzmAz7Mvnq_rAc0YsVg/mo/photo.jpg?sz=128", "display_name": "Erik", "link": "https://stackoverflow.com/users/6182137/erik"}, "edited": false, "score": 1, "creation_date": 1476881888, "post_id": 40131345, "comment_id": 67534047, "body": "@Erik The solution is not to write the prototypes yourself, that should never be necessary. You should probably just switch to <code>-std=gnu99</code> when using those libraries. Apparently something inside them collides with standard C."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1476882314, "post_id": 40131345, "comment_id": 67534361, "body": "I&#39;m slow today..."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": -1, "last_activity_date": 1476882291, "last_edit_date": 1592644375, "creation_date": 1476879903, "answer_id": 40131345, "question_id": 40131142, "link": "https://stackoverflow.com/questions/40131142/gcc-returns-error-implicit-declaration-of-function-truncate/40131345#40131345", "title": "GCC returns error - &#39;implicit declaration of function &#39;truncate&#39;&#39;", "body": "<p>You're getting that because <code>truncate()</code> is not declared with a prototype before you try to use it.</p>\n<p>Per <a href=\"http://man7.org/linux/man-pages/man2/truncate.2.html\" rel=\"nofollow noreferrer\">the man page</a>:</p>\n<blockquote>\n<p><strong>SYNOPSIS</strong></p>\n<pre><code>   #include &lt;unistd.h&gt;\n   #include &lt;sys/types.h&gt;\n\n   int truncate(const char *path, off_t length);\n   int ftruncate(int fd, off_t length);\n</code></pre>\n</blockquote>\n<p>While you need to <code>#include</code> both <code>unistd.h</code> and <code>sys/types.h</code>, it's not sufficient.  GCC/Linux also requires specific feature macro definitions:</p>\n<blockquote>\n<p>Feature Test Macro Requirements for glibc (see feature_test_macros(7)):</p>\n<pre><code>   truncate():\n       _XOPEN_SOURCE &gt;= 500\n           || /* Since glibc 2.12: */ _POSIX_C_SOURCE &gt;= 200809L\n           || /* Glibc versions &lt;= 2.19: */ _BSD_SOURCE\n\n   ftruncate():\n       _XOPEN_SOURCE &gt;= 500\n           || /* Since glibc 2.3.5: */ _POSIX_C_SOURCE &gt;= 200112L\n           || /* Glibc versions &lt;= 2.19: */ _BSD_SOURCE\n</code></pre>\n</blockquote>\n<p>Using <code>-std=c99</code> would be one way to get those.</p>\n"}], "owner": {"reputation": 25, "user_id": 6182137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-iCQymWdmOLU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZ13mOv03YzmAz7Mvnq_rAc0YsVg/mo/photo.jpg?sz=128", "display_name": "Erik", "link": "https://stackoverflow.com/users/6182137/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2170, "favorite_count": 0, "closed_date": 1476893621, "accepted_answer_id": 40131345, "answer_count": 1, "score": 0, "last_activity_date": 1476882291, "creation_date": 1476879299, "question_id": 40131142, "link": "https://stackoverflow.com/questions/40131142/gcc-returns-error-implicit-declaration-of-function-truncate", "closed_reason": "Duplicate", "title": "GCC returns error - &#39;implicit declaration of function &#39;truncate&#39;&#39;", "body": "<p>in my school project we are making a copy program with a couple of flags. I need to truncate an infile after copying. \nThis is the code for it:</p>\n\n<pre><code>int a_trunc(const char* infile, const char* size){\n    int s = strtol(size, NULL, 10);\n    truncate(infile, s);\n    return 0;\n}\n</code></pre>\n\n<p>GCC returns error: 'implicit declaration of function 'truncate''.</p>\n\n<p>I have sys/types.h and unistd.h included. </p>\n\n<p>I am compiling with flags:\n    -std=c99 -Wall -Werror</p>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["c", "asynchronous", "filesystems", "libuv"], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1479713535, "creation_date": 1479713535, "answer_id": 40714901, "question_id": 40130897, "link": "https://stackoverflow.com/questions/40130897/is-it-normal-to-call-uv-run-several-times/40714901#40714901", "title": "Is it normal to call uv_run several times?", "body": "<p>Set aside your example, <code>libuv</code> offers the opportunity to <em>run</em> the loop more than once.<br>\nSee the <a href=\"http://docs.libuv.org/en/v1.x/loop.html#c.uv_run\" rel=\"nofollow\">documentation</a> for further details.</p>\n\n<p>In particular, <code>uv_run</code> function accepts a parameter of type <code>uv_run_mode</code>.<br>\nPossible values are:</p>\n\n<ul>\n<li><p><code>UV_RUN_DEFAULT</code>: it doesn't stop unless you explicitly stop it and until there exists at least on referenced or active resource on the loop.</p></li>\n<li><p><code>UV_RUN_ONCE</code>: poll for I/O once and execute all the functions that are ready to be served. It has the drawback that it is blocking if there are no pending callbacks.</p></li>\n<li><p><code>UV_RUN_NOWAIT</code>: this is probably the one you are looking for, similar to the previous one, but it doesn't block if there are no pending callbacks.</p></li>\n</ul>\n\n<p>Note that with both <code>UV_RUN_ONCE</code> and <code>UV_RUN_NOWAIT</code> you'll have to  run the loop more than once.<br>\nReturn value usually indicates if there are some other pending callbacks. In this case, the loop must be run sooner or later in the future.  </p>\n\n<p>The last mode, <code>UV_RUN_NOWAIT</code>, is probably the one you are looking for.<br>\nAs an example, it can be used in scenarios where the client has its own loop and cannot block on the libuv's one.</p>\n\n<hr>\n\n<p>Is it normal to run the loop more than once?<br>\nWell, yes, but it mostly depends on your actual problem if it's right.<br>\nIt's hard to say from a 100 line snippet on SO.</p>\n"}], "owner": {"reputation": 1859, "user_id": 2157639, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/faaf63a16923788f63d2a2b68c8d3c6b?s=128&d=identicon&r=PG", "display_name": "Ivan  Ivanov", "link": "https://stackoverflow.com/users/2157639/ivan-ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479713535, "creation_date": 1476878570, "question_id": 40130897, "link": "https://stackoverflow.com/questions/40130897/is-it-normal-to-call-uv-run-several-times", "title": "Is it normal to call uv_run several times?", "body": "<p>I am new to <code>uvlib</code>. Is it normal to call <code>uv_run</code> twice if one wants to avoid blocking inside function? If not, then which instruments are available, except threads? Here I just open and close file.</p>\n\n<pre><code>#include &lt;uv.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;conio.h&gt;\n#ifdef _WIN32\n    #include &lt;conio.h&gt;\n    #include &lt;Windows.h&gt;\n    #define Sleep(x) Sleep(x)\n#else\n    #include &lt;unistd.h&gt;\n    #define Sleep(x) sleep(x)\n#endif\n\nuv_loop_t* loop;\n\nuv_fs_t open_req;\nuv_fs_t close_req;\n\nvoid open_cb(uv_fs_t*);\nvoid close_cb(uv_fs_t*);\n\nconst char *filename = \"C:/c/somedata.txt\";\n\nint main(int argc, char **argv) {\n    int r;\n\n    loop = uv_loop_new();\n\n    r = uv_fs_open(loop, &amp;open_req, filename, O_RDONLY, S_IREAD, open_cb);\n    if (r &lt; 0) {\n        printf(\"Error at opening file: %s\\n\", uv_strerror(r));\n    }\n    printf(\"in main now\\n\");\n    uv_run(loop, UV_RUN_DEFAULT);\n    uv_loop_close(loop);\n    return 0;\n}\n\nvoid open_cb(uv_fs_t* req) {\n    int result = req-&gt;result;\n\n    if (result &lt; 0) {\n        printf(\"Error at opening file: %s\\n\", uv_strerror(result));\n    } else {\n        printf(\"Successfully opened file.\\n\");\n    }\n    uv_fs_req_cleanup(req);\n    uv_fs_close(loop, &amp;close_req, result, close_cb);\n    uv_run(loop, UV_RUN_DEFAULT);\n    Sleep(5000);\n    printf(\"ok now\\n\");\n}\n\nvoid close_cb(uv_fs_t* req) {\n    int result = req-&gt;result;\n    printf(\"in close_cb now\\n\");\n\n    if (result &lt; 0) {\n        printf(\"Error at closing file: %s\\n\", uv_strerror(result));\n    } else {\n        printf(\"Successfully closed file.\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 1, "creation_date": 1476878285, "post_id": 40130727, "comment_id": 67531338, "body": "I think yes. There will be two copies of the string. See this question- <a href=\"http://stackoverflow.com/questions/38146826/returning-string-from-a-c-function\" title=\"returning string from a c function\">stackoverflow.com/questions/38146826/&hellip;</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1476878446, "post_id": 40130727, "comment_id": 67531453, "body": "<code>char arr[10] =  { &#39;H&#39;, &#39;a&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39;\\0&#39;}</code> and <code>char arr[10] = &quot;Hello&quot;;</code> are strictly the same thing."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476879157, "post_id": 40130727, "comment_id": 67531973, "body": "@MichaelWalz thank your for clarifying that and I got the answer to the first part of the question as well. Last question is does <code>&#39;a&#39;</code> use additional storage besides <code>a</code>?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1476879944, "post_id": 40130727, "comment_id": 67532532, "body": "<code>char a = &#39;a&#39;;</code> is the same thing as <code>char a; ...; a = &#39;a&#39;;</code>, so your thoughts are correct <code>&#39;a&#39;</code> is simply written to <code>a</code>."}], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "closed_date": 1476878405, "answer_count": 0, "score": 2, "last_activity_date": 1476878496, "creation_date": 1476878061, "last_edit_date": 1476878496, "question_id": 40130727, "link": "https://stackoverflow.com/questions/40130727/do-i-have-two-strings-in-my-memory-when-i-assign-a-string-literal-to-char-array", "closed_reason": "Duplicate", "title": "Do I have two strings in my memory, when I assign a string literal to char array", "body": "<p>This came up in another questions comment</p>\n\n<blockquote>\n  <p>String literals have static storage duration (see standard 6.4.5/6). \u2013 Jean-Baptiste Yun\u00e8s</p>\n</blockquote>\n\n<p>And I didn't want to hijack the comment section for this.\nSo the question is when I do this:</p>\n\n<p><code>char arr[10] = \"Hello\";</code></p>\n\n<p>Do I actually have two strings in my memory?\nOne at <code>arr</code> until my scope ends (auto duration)\nand one at the point where ever the literal was created until the program closes (static duration)</p>\n\n<p>Would this be equivalent to this:</p>\n\n<pre><code>char* str = \"Hello\";\nchar arr[10];\nmemcpy(arr,str,6);\n</code></pre>\n\n<p>If this is true, then I want to make sure what happens with\n<code>char a = 'a';</code></p>\n\n<p>Does this also have double allocation? I would have guessed <code>'a'</code> would be written directly to <code>a</code></p>\n\n<p>Resulting in my last question  would this be more memory efficient?</p>\n\n<p><code>char arr[10] =  { 'H', 'e', 'l', 'l', 'o', '\\0'}</code></p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1476878006, "post_id": 40130666, "comment_id": 67531127, "body": "try <code>char st[]=&quot;aaab&quot;;</code>"}, {"owner": {"reputation": 576, "user_id": 6648034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e100071b1105de5f4ca2e0ad4ddd2aee?s=128&d=identicon&r=PG&f=1", "display_name": "k_kaz", "link": "https://stackoverflow.com/users/6648034/k-kaz"}, "edited": false, "score": 0, "creation_date": 1476878125, "post_id": 40130666, "comment_id": 67531217, "body": "When you declare a pointer variable i.e use that ( * ) symbol, you also have to allocate the space that pointer points to. malloc(). If you don&#39;t and then use the pointer you are at undefined behavior territory"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 576, "user_id": 6648034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e100071b1105de5f4ca2e0ad4ddd2aee?s=128&d=identicon&r=PG&f=1", "display_name": "k_kaz", "link": "https://stackoverflow.com/users/6648034/k-kaz"}, "edited": false, "score": 0, "creation_date": 1476878373, "post_id": 40130666, "comment_id": 67531396, "body": "@k_kaz when I understood the comments here right: <a href=\"http://stackoverflow.com/questions/40129319/difference-between-0-and-0\" title=\"difference between 0 and 0\">stackoverflow.com/questions/40129319/difference-between-0-an&zwnj;&#8203;d-0</a> this would be legal"}, {"owner": {"reputation": 5664, "user_id": 680727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e84ed97f423d7dd974efd8a871c5861?s=128&d=identicon&r=PG", "display_name": "Aleksi Torhamo", "link": "https://stackoverflow.com/users/680727/aleksi-torhamo"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1476878725, "post_id": 40130666, "comment_id": 67531652, "body": "@KamiKaze: Assigning a string literal to a pointer is not a problem, but trying to modify a string literal is."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 5664, "user_id": 680727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e84ed97f423d7dd974efd8a871c5861?s=128&d=identicon&r=PG", "display_name": "Aleksi Torhamo", "link": "https://stackoverflow.com/users/680727/aleksi-torhamo"}, "edited": false, "score": 0, "creation_date": 1476878888, "post_id": 40130666, "comment_id": 67531769, "body": "@AleksiTorhamo True enough, but k_kaz didn&#39;t point that out. He was talking about the need to allocate it, which is wrong at this point the declaration process works. The modification is the problem as stated by usr."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 7042067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EbVjJh_aeqQ/AAAAAAAAAAI/AAAAAAAAAJQ/cM97r7b-B60/photo.jpg?sz=128", "display_name": "\u0110\u1ea1t Nguy\u1ec5n Th&#224;nh", "link": "https://stackoverflow.com/users/7042067/%c4%90%e1%ba%a1t-nguy%e1%bb%85n-th%c3%a0nh"}, "edited": false, "score": 0, "creation_date": 1476878216, "post_id": 40130713, "comment_id": 67531275, "body": "thank you mate, i though type a[] &amp; type* is same!"}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 1, "creation_date": 1476879360, "post_id": 40130713, "comment_id": 67532111, "body": "The difference is that <code>char *st = &quot;aaab&quot;</code> puts the <i>address</i> of the string literal in the pointer <code>st</code>, but <code>char st[] = &quot;aaab&quot;</code> actually copies the <i>contents</i> of the literal into the array&#39;s memory. The second form is equivalent to <code>char st[5]; st[0] = &#39;a&#39;; st[1] = &#39;a&#39;; st[2] = &#39;a&#39;; st[3] = &#39;b&#39;; st[4] = &#39;\\0&#39;;</code>"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1505277814, "last_edit_date": 1505277814, "creation_date": 1476878029, "answer_id": 40130713, "question_id": 40130666, "link": "https://stackoverflow.com/questions/40130666/c-error-about-pointer/40130713#40130713", "title": "C error about pointer", "body": "<p>This statement</p>\n\n<pre><code>  tp[0]='b';\n</code></pre>\n\n<p>results in <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behaviour</em></a> because <code>tp</code> points to a <em>string literal</em>. You are not allowed to modify a string literal in C.</p>\n\n<p>Instead you could use an array:</p>\n\n<pre><code> char st[] = \"aaab\";\n</code></pre>\n\n<p>which you'd be able to modify.</p>\n"}, {"comments": [{"owner": {"reputation": 1049, "user_id": 6633483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rWKTg.jpg?s=128&g=1", "display_name": "Vijay S B", "link": "https://stackoverflow.com/users/6633483/vijay-s-b"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1476878365, "post_id": 40130769, "comment_id": 67531392, "body": "Tell me whats wrong in above answer"}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 1, "creation_date": 1476879050, "post_id": 40130769, "comment_id": 67531889, "body": "&quot;st is a pointer variable but &quot;aaab&quot; is [a] string constant&quot;: while technically true, this assignment is perfectly allowed in C and what you said doesn&#39;t explain OP&#39;s problem. As for &quot;This statement indicates that st is [a] pointer constant&quot;, that&#39;s just not true; it declares <code>st</code> as array [5] of <code>char</code> and copies the contents of the string literal. usr&#39;s answer is correct."}, {"owner": {"reputation": 1049, "user_id": 6633483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rWKTg.jpg?s=128&g=1", "display_name": "Vijay S B", "link": "https://stackoverflow.com/users/6633483/vijay-s-b"}, "reply_to_user": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 0, "creation_date": 1476879417, "post_id": 40130769, "comment_id": 67532153, "body": "@trentcl changes incorporated"}], "tags": [], "owner": {"reputation": 1049, "user_id": 6633483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rWKTg.jpg?s=128&g=1", "display_name": "Vijay S B", "link": "https://stackoverflow.com/users/6633483/vijay-s-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1476879386, "last_edit_date": 1476879386, "creation_date": 1476878171, "answer_id": 40130769, "question_id": 40130666, "link": "https://stackoverflow.com/questions/40130666/c-error-about-pointer/40130769#40130769", "title": "C error about pointer", "body": "<pre><code>  char *st=\"aaab\";\n</code></pre>\n\n<p>This statement indicates that st is a pointer variable but \"aaab\" is string constant.</p>\n\n<p>Instead try</p>\n\n<pre><code>  char st[]=\"aaab\";\n</code></pre>\n\n<p>This statement indicates that it declares st as array [5] of char and copies the contents of the string literal. Here st is a constant pointer.   </p>\n"}], "owner": {"reputation": 155, "user_id": 7042067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EbVjJh_aeqQ/AAAAAAAAAAI/AAAAAAAAAJQ/cM97r7b-B60/photo.jpg?sz=128", "display_name": "\u0110\u1ea1t Nguy\u1ec5n Th&#224;nh", "link": "https://stackoverflow.com/users/7042067/%c4%90%e1%ba%a1t-nguy%e1%bb%85n-th%c3%a0nh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1476878738, "accepted_answer_id": 40130713, "answer_count": 2, "score": 0, "last_activity_date": 1505277814, "creation_date": 1476877876, "question_id": 40130666, "link": "https://stackoverflow.com/questions/40130666/c-error-about-pointer", "closed_reason": "Duplicate", "title": "C error about pointer", "body": "<p>Can anyone explain why this code not work, pls!! Thanks you so much!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid changer(char * tp)\n{\n    int i=0;\n    tp[0]='b';\n}\n\nint main(void)\n{\n    char *st=\"aaab\";\n    changer(st);\n    printf(\"%s\",st);\n}\n</code></pre>\n"}, {"tags": ["c", "tensorflow"], "comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1476912557, "post_id": 40130501, "comment_id": 67553621, "body": "Haven&#39;t experimented with C++ interface, but if it&#39;s similar to Python version, all 3 approaches are valid. The first approach allows for reuse of Session/Graph objects between threads so it&#39;s most memory efficient"}, {"owner": {"reputation": 3011, "user_id": 700535, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c416ea74347c6b5bd27f49aec309c48?s=128&d=identicon&r=PG", "display_name": "Min Lin", "link": "https://stackoverflow.com/users/700535/min-lin"}, "reply_to_user": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 1, "creation_date": 1476921304, "post_id": 40130501, "comment_id": 67556598, "body": "In many of the docs, it says session is thread safe, so multi threads can use the same session to achieve parallelism. I understand it as multiple sessions can run different part of the graph cocurrently. What if I use this mechanism just to calculate different data from different users? It means there are multiple copies of intermediate tensor attached to the graph?"}], "owner": {"reputation": 3011, "user_id": 700535, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c416ea74347c6b5bd27f49aec309c48?s=128&d=identicon&r=PG", "display_name": "Min Lin", "link": "https://stackoverflow.com/users/700535/min-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1476877423, "creation_date": 1476877423, "question_id": 40130501, "link": "https://stackoverflow.com/questions/40130501/tensorflow-c-api-multithreading-which-is-correct", "title": "Tensorflow C API Multithreading, which is correct", "body": "<p>Option 1:\n<code>TF_Graph* graph</code> and <code>TF_SessionWithGraph* session</code> is created in the main thread.\nmultiple threads call <code>TF_SessionRun</code> with graph and session from main thread and with thread local <code>TF_Tensor</code>.</p>\n\n<p>Option 2:\n<code>TF_Graph* graph</code> is initialized in the main thread.\nmultiple <code>TF_SessionWithGraph</code> is created in worker threads using the same graph initialized in the main thread. <code>TF_SessionRun</code> is called with graph from the main thread with thread local <code>TF_Tensor</code>.</p>\n\n<p>Option 3:\nBoth <code>TF_Graph</code> and <code>TF_SessionWithGraph</code> are thread local.</p>\n"}, {"tags": ["c", "gcc", "dynamic-linking", "shared-objects"], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 1677684, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9187c424c4d5fd30d0e222c9bb14f27f?s=128&d=identicon&r=PG", "display_name": "Delights", "link": "https://stackoverflow.com/users/1677684/delights"}, "is_accepted": false, "score": 0, "last_activity_date": 1476876426, "last_edit_date": 1495542805, "creation_date": 1476876426, "answer_id": 40130136, "question_id": 40130066, "link": "https://stackoverflow.com/questions/40130066/linking-shared-library-to-executable/40130136#40130136", "title": "Linking shared library to executable", "body": "<p>The whole point of a shared object is that it won't be linked statically to your executable, but rather sit in the memory and serve those who need it.</p>\n\n<p>Look at this thread:\n<a href=\"https://stackoverflow.com/questions/8538572/how-can-i-link-a-shared-object-in-c\">how can I link a shared object in C?</a></p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1476876956, "creation_date": 1476876956, "answer_id": 40130333, "question_id": 40130066, "link": "https://stackoverflow.com/questions/40130066/linking-shared-library-to-executable/40130333#40130333", "title": "Linking shared library to executable", "body": "<p>The answer is same to both of your questions. The shared libraries are not built into your executable (that's one of the main reasons why they came into existence in the first place!).\nWhen you run your app, the drynamic linker/loader <a href=\"http://man7.org/linux/man-pages/man8/ld.so.8.html\" rel=\"nofollow\"><code>ld.so</code></a> loads the necessary libraries.</p>\n\n<p>You can see the shared libraries needed by your application by running:</p>\n\n<pre><code>$ ldd ./app\n</code></pre>\n\n<p>on the command line.</p>\n\n<p>You may find this very useful to understand shared libraries on Linux: <a href=\"https://www.akkadia.org/drepper/dsohowto.pdf\" rel=\"nofollow\">how to write shared libraries</a></p>\n"}, {"tags": [], "owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "is_accepted": false, "score": 0, "last_activity_date": 1476878064, "last_edit_date": 1476878064, "creation_date": 1476877670, "answer_id": 40130591, "question_id": 40130066, "link": "https://stackoverflow.com/questions/40130066/linking-shared-library-to-executable/40130591#40130591", "title": "Linking shared library to executable", "body": "<p>It's impossible to statically link to a <code>.so</code> file: this file is missing information which is necessary for the linker to work. If you need to statically link to <code>libourown.so</code>, you have two options:</p>\n\n<ul>\n<li><p>generate the static version of the library, <code>libourown.a</code>, and link against that</p></li>\n<li><p>use a tool like <a href=\"http://statifier.sourceforge.net/\" rel=\"nofollow\">statifier</a> to embed <code>libourown.so</code> in your executable.</p></li>\n</ul>\n\n<p>Libc is linked to executables dynamically by default. You can link to it statically using <code>-static</code> option. It should be noted that statically linking to libc will do more harm than good, because other libraries your executable is using are likely to be linked agains libc <em>dynamically</em>, and linking to the same library twice leads to a disaster.</p>\n"}, {"comments": [{"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1476880448, "post_id": 40130822, "comment_id": 67532918, "body": "Does dynamic linker(<code>ld.so</code>) only get involved for loadtime linking to <code>app</code>? or additionally, Does System loader also get involved at loadtime to load shared objects? When I system loader, I mean the component of shell"}, {"owner": {"reputation": 437, "user_id": 7018835, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2309ee7ad6ccc069ed9145bb33078b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Anjaneyulu", "link": "https://stackoverflow.com/users/7018835/anjaneyulu"}, "reply_to_user": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1476880877, "post_id": 40130822, "comment_id": 67533240, "body": "Yes only during the load time linking occurs Along withe the copy of our executables all the associated shared libraries are also brought into the RAM as suggested above we can use ldd command on executable file to find shared library dependancies"}], "tags": [], "owner": {"reputation": 437, "user_id": 7018835, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2309ee7ad6ccc069ed9145bb33078b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Anjaneyulu", "link": "https://stackoverflow.com/users/7018835/anjaneyulu"}, "is_accepted": false, "score": 1, "last_activity_date": 1476878327, "creation_date": 1476878327, "answer_id": 40130822, "question_id": 40130066, "link": "https://stackoverflow.com/questions/40130066/linking-shared-library-to-executable/40130822#40130822", "title": "Linking shared library to executable", "body": "<p>To answer your \"Does libourown.so get linked to app at runtime , when f is called in app? or Does libourown.so gets linked to app at build time?\"</p>\n\n<p>Dynamic libraries are linked as soon as they are brought into ram. The same answer valid for both of your questions. This type of linking done is known as load time linking. </p>\n\n<p>Another method of doing it is to use the concept of run time linking. Using functions like dlopen(), dlsym()</p>\n"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6507, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1476878327, "creation_date": 1476876228, "question_id": 40130066, "link": "https://stackoverflow.com/questions/40130066/linking-shared-library-to-executable", "title": "Linking shared library to executable", "body": "<p><code>libourown.so</code> provides function <code>f</code> definition</p>\n\n<p>After execution of gcc command,</p>\n\n<p><code>gcc a.o libourown.so.1 -o app</code></p>\n\n<p>1)</p>\n\n<p>Does <code>libourown.so</code>  get linked to <code>app</code> at runtime , when <code>f</code> is called in <code>app</code>? or Does <code>libourown.so</code> gets linked to <code>app</code> at build time?</p>\n\n<p>2)</p>\n\n<p>Does <code>libc.so</code> get linked at runtime to <code>app</code>, after <code>printf</code> is called in <code>app</code> ? or Does <code>libc.so</code> gets linked to <code>app</code> at build time?</p>\n"}, {"tags": ["c", "visual-studio-2010", "stdout", "stdin"], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476875491, "post_id": 40129725, "comment_id": 67529244, "body": "thanks, but which files are open? How do I tell it, which file i want to pass and where do I want to get output?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476875757, "post_id": 40129725, "comment_id": 67529463, "body": "<code>&gt;</code> is used to redirect <code>stdout</code>, ie. the stdout output of the program goes to whatever file you put after it. And <code>&lt;</code> is used to redirect <code>stdin</code>, whatever the program reads comes from the file after it. (A bit extra: There&#39;s also the pipe <code>|</code>, which is used between two processes, and it acts like <code>&gt;</code> for the program on left side, and as <code>&lt;</code> for program on the right side.). From the program, you can&#39;t (easily) tell where the output goes or where the input comes in, you just read/write."}, {"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476875922, "post_id": 40129725, "comment_id": 67529592, "body": "Is there any way that I can provide my own source file and store the results into a destinationo file? I mean, what modification should I make so that it takes my source file ?"}, {"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476876166, "post_id": 40129725, "comment_id": 67529795, "body": "if I use  <code>FILE *pSRC = fopen(&quot;srcFile.pdf&quot;)</code> and <code>FILE *pDST = fopen(&quot;dstFile.pdf&quot;)</code> <code>ret = def(pSRC , pDST , Z_DEFAULT_COMPRESSION)</code>....it doesn&#39;t work"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476876382, "post_id": 40129725, "comment_id": 67529957, "body": "Does giving shell command <code>zpipe &lt; srcFile.pdf &gt; dstFile.pdf</code> work? Also &quot;it does not work&quot; is not very useful problem description..."}, {"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476876674, "post_id": 40129725, "comment_id": 67530181, "body": "I wrote <code>zpipe &lt; srcFile.pdf &gt; dstFile.pdf</code> as command argument in VS2010 and I got the error <code>&#217;nable to start program....Input or output cannot be redirected because the specified file is invalid</code>. Both the files <code>srcFile.pdf</code> and <code>dstFile.pdf</code> are present in the folder containing <code>.exe</code> file"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476877143, "post_id": 40129725, "comment_id": 67530529, "body": "@user2756695 if <code>dstFile.pdf</code> exists, then it may fail because of that, when the shell (CMD.EXE?) refuses to &quot;clobber&quot; the output file. This is generally configurable, but I don&#39;t remember the default for CMD.EXE or how to change it."}, {"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1476877308, "post_id": 40129725, "comment_id": 67530640, "body": "I deleted the <code>dstFile.pdf</code> but I still get the same error"}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 0, "last_activity_date": 1476875287, "creation_date": 1476875287, "answer_id": 40129725, "question_id": 40129538, "link": "https://stackoverflow.com/questions/40129538/use-of-stdin-and-stdout/40129725#40129725", "title": "Use of Stdin and Stdout", "body": "<p>When using <code>stdin</code> and <code>stdout</code>, file names are not passed. These files are already open when <code>main</code> is called, and the program can just read/write them. The parent process (usually the shell) then takes care of feeding the data to <code>stdin</code> and doing something with data from <code>stdout</code> of the program.</p>\n\n<p>In your example usage <code>zpipe &lt; sourcefile &gt; destinationfile</code>, the shell opens <em>sourcefile</em> for reading, and gives the open file to <em>zpipe</em>, and also creates <em>destinationfile</em> for writing, and writes to it whatever the program outputs to its <code>stdout</code>. The <em>zpipe</em> program does not get name of either file, it just gets the open file handles.</p>\n\n<p>Also, the <code>&lt; sourcefile</code> and <code>&gt; destinationfile</code> are not arguments to <em>zpipe</em>. Shell parses and handles them as described above, <em>zpipe</em> does not get them as arguments.</p>\n"}], "owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476880331, "creation_date": 1476874832, "last_edit_date": 1476880331, "question_id": 40129538, "link": "https://stackoverflow.com/questions/40129538/use-of-stdin-and-stdout", "title": "Use of Stdin and Stdout", "body": "<p>I have to use a sample code in which I have to provide the <strong>file source name</strong> and the <strong>destination file name</strong>. Then these name will be send to an another function as shown in the code below</p>\n\n<pre><code>    int def(FILE *source, FILE *dest, int level)\n    {\n        ----\n        -----\n\n        return Z_OK;\n    }\n\n\n\n    int main(int argc, char **argv)\n    {\n        int ret;\n\n        /* avoid end-of-line conversions */\n        SET_BINARY_MODE(stdin);\n        SET_BINARY_MODE(stdout);\n\n        // do compression if no arguments \n        if (argc == 1) \n        {\n            ret = def(stdin, stdout, Z_DEFAULT_COMPRESSION);\n            if (ret != Z_OK)\n            {\n                zerr(ret);\n                return ret;\n            }\n              // otherwise, report usage \n            else \n            {\n                fputs(\"zpipe usage: zpipe [-d] &lt; source &gt; dest\\n\", stderr);\n                return 1;\n            }\n        }\n\n        return 0;\n    }\n</code></pre>\n\n<p>I do not undertsnad, how <strong><em>stdin</em></strong> and <strong><em>stdout</em></strong> are passing the input and output file names. Furthermore, I am not able to provide the correct sequence of source and destination file names as the command arguments. Most of the time I get <code>zpipe usage: zpipe [-d] &lt; source &gt; dest</code>.</p>\n\n<p><strong>UPDATE:</strong> The complete sample code is present at <a href=\"http://www.zlib.net/zpipe.c\" rel=\"nofollow\"><strong>this link</strong></a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1476874748, "post_id": 40129494, "comment_id": 67528666, "body": "This is not C++ and it is not C#, so please do not tag either. If your code is only relevant to C, then only tag C."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "edited": false, "score": 0, "creation_date": 1476874749, "post_id": 40129494, "comment_id": 67528667, "body": "Don&#39;t spam tags... C++ , C# , and C are <b>not</b> the same language"}, {"owner": {"reputation": 602, "user_id": 2966573, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/91a7864b089a8b921224c346c5810e4b?s=128&d=identicon&r=PG&f=1", "display_name": "Paludan", "link": "https://stackoverflow.com/users/2966573/paludan"}, "edited": false, "score": 0, "creation_date": 1476876042, "post_id": 40129494, "comment_id": 67529696, "body": "You&#39;re not declaring min_name anywhere?"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1476876490, "post_id": 40129494, "comment_id": 67530045, "body": "You need to store the data in an array or arrays during the input stage so that you still have all of it during the output stage."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7041735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e74ae56445b7117904b5ab68bfc37648?s=128&d=identicon&r=PG&f=1", "display_name": "kein", "link": "https://stackoverflow.com/users/7041735/kein"}, "edited": false, "score": 0, "creation_date": 1476878882, "post_id": 40130155, "comment_id": 67531761, "body": "Thanks!!! although i didnt use the code, i got the main idea and able to finish my assignment!! thanksss alot"}, {"owner": {"reputation": 2512, "user_id": 5771617, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/fUXWF.jpg?s=128&g=1", "display_name": "lu5er", "link": "https://stackoverflow.com/users/5771617/lu5er"}, "reply_to_user": {"reputation": 19, "user_id": 7041735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e74ae56445b7117904b5ab68bfc37648?s=128&d=identicon&r=PG&f=1", "display_name": "kein", "link": "https://stackoverflow.com/users/7041735/kein"}, "edited": false, "score": 0, "creation_date": 1476879329, "post_id": 40130155, "comment_id": 67532091, "body": "you are welcome. :) If you think this solved the issue, can you mark it as solution?"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1476885974, "post_id": 40130155, "comment_id": 67537254, "body": "This is basically a good answer, but on principle I won&#39;t upvote any C answer which doesn&#39;t guard against buffer overflow. Your are not using <code>scanf</code> safely. OP also used in unsafely, but this error should be pointed out rather than replicated."}, {"owner": {"reputation": 2512, "user_id": 5771617, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/fUXWF.jpg?s=128&g=1", "display_name": "lu5er", "link": "https://stackoverflow.com/users/5771617/lu5er"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1476886584, "post_id": 40130155, "comment_id": 67537755, "body": "@JohnColeman :) Yes, you are right. Are you saying about the condition check that (n&lt;100) ?"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1476887742, "post_id": 40130155, "comment_id": 67538760, "body": "Yes, you are right that <code>n &lt;= 100</code> isn&#39;t checked, but the issue that jumped out at me is that <code>scanf(&quot;%s&quot;,name[i]);</code> would overflow the buffer if a user enters a very large string as a name. Such a string would be far larger than any actual name, but the <code>scanf</code> function itself (since you didn&#39;t specify any field width) will happily transfer as many characters as you feed it, and put them somewhere in memory, even if doing so either triggers a seg fault or overwrites other data."}, {"owner": {"reputation": 2512, "user_id": 5771617, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/fUXWF.jpg?s=128&g=1", "display_name": "lu5er", "link": "https://stackoverflow.com/users/5771617/lu5er"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1476888202, "post_id": 40130155, "comment_id": 67539142, "body": "@JohnColeman I guess fgets(name[i], 100, stdin) will do it, won&#39;t it?"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1476890043, "post_id": 40130155, "comment_id": 67540580, "body": "That will guard against the overflow, but will leave <code>\\n</code> with the string. These things are hard to get right (C is quite annoying that way). For non-production quality code, something like (untested) <code>names[i][strlen(names[i])-1] = &#39;\\0&#39;</code> should suffice. The point isn&#39;t to go out of the way to make a Stack Overflow answer bullet-proof, so much as to make beginners aware of the issue and to (hopefully) get them in the habit of guarding against buffer overflow."}, {"owner": {"reputation": 2512, "user_id": 5771617, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/fUXWF.jpg?s=128&g=1", "display_name": "lu5er", "link": "https://stackoverflow.com/users/5771617/lu5er"}, "edited": false, "score": 0, "creation_date": 1476890248, "post_id": 40130155, "comment_id": 67540722, "body": "Yes, you are so right. Even I have never thought about this. Just now I realized what a mistake I was making. Thanks a ton. Let me code and see, if I come up with a decent solution, I&#39;ll make an edit. :)"}], "tags": [], "owner": {"reputation": 2512, "user_id": 5771617, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/fUXWF.jpg?s=128&g=1", "display_name": "lu5er", "link": "https://stackoverflow.com/users/5771617/lu5er"}, "is_accepted": true, "score": 0, "last_activity_date": 1476878457, "last_edit_date": 1476878457, "creation_date": 1476876479, "answer_id": 40130155, "question_id": 40129494, "link": "https://stackoverflow.com/questions/40129494/printing-outputs-from-multiple-looping-input/40130155#40130155", "title": "Printing outputs from multiple looping input", "body": "<p>I think, what you want to do is first get number of students, then get their name and marks, finally compute avg, max, min etc, right?</p>\n\n<p>Best approach is using structures. Since you are new, what you can do is:</p>\n\n<ol>\n<li><p>Create a 2d array of chars:</p>\n\n<pre><code>char name[100][100], marks[100].\n</code></pre></li>\n<li><p>Get number of students in a variable <code>n</code>.</p></li>\n<li><p>Use a loop to get names and marks:</p>\n\n<pre><code>for(i=0;i &lt; n;i++){scanf(\"%s\",name[i]);}\nscanf(\"%d\",marks[i]);\n</code></pre></li>\n<li><p>Now you can print it using the same loop, change scanf to printf.</p></li>\n<li><p>For avg, max and min, iterate through marks, like:</p>\n\n<pre><code>marks = 0;\nfor(i=0;i&lt; n;i++){sum = sum + marks[i];}\nprintf(\"%d\",marks);\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 19, "user_id": 7041735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e74ae56445b7117904b5ab68bfc37648?s=128&d=identicon&r=PG&f=1", "display_name": "kein", "link": "https://stackoverflow.com/users/7041735/kein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 40130155, "answer_count": 1, "score": 2, "last_activity_date": 1476878457, "creation_date": 1476874711, "last_edit_date": 1476874936, "question_id": 40129494, "link": "https://stackoverflow.com/questions/40129494/printing-outputs-from-multiple-looping-input", "title": "Printing outputs from multiple looping input", "body": "<p>I'm sorry for the weird title but english isnt my first language so I don't know how to make it specific.\nI just learned coding for 2 weeks, so I'm a total newbie in this subject.</p>\n\n<p>So, let get started with my problem.</p>\n\n<p>this is what I'm supposed to program. <img src=\"https://i.stack.imgur.com/wsxbp.png\" alt=\"Correct Output\"></p>\n\n<p>But so far, this is what I can do. <img src=\"https://i.stack.imgur.com/lP9Gu.png\" alt=\"My Ouput\"></p>\n\n<p>and this is my code :</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt;\nint main() {\n\nfloat stud_total;\nfloat stud_score;\nchar stud_name[50];\nfloat stud_total_score = 0;\nchar max_name[50] = \"test\";\nfloat max_score = 55;\nfloat min_score = 50;\nfloat avg_score;\nchar temp_name[50] = \"dwdw\";\n\n//Start of Total Student between 2-10 looping\ndo {\n\n    printf(\"Input Total Student [2..10] : \");\n    scanf(\"%f\", &amp;stud_total);fflush(stdin);\n} while (stud_total &lt; 2 || stud_total&gt;10);\n//end of Total student looping\nprintf(\"\\n\");\n\n\n//Start Name &amp; Score Input Looping\nfor (int i = 1;i &lt;= stud_total;i++) {\n\n    do {\n        printf(\"Input Name for Student %d [3..50] : \", i);\n        scanf(\"%s\", stud_name);fflush(stdin);\n    } while (strlen(stud_name) &lt; 3 || strlen(stud_name) &gt; 50);\n\n    do {\n        printf(\"Input Score for Student %d [0..100] : \", i);\n        scanf(\"%f\", &amp;stud_score);fflush(stdin);\n    } while (stud_score &lt; 0 || stud_score&gt;100);\n\n    if (stud_score &lt; max_score) {\n        min_score = stud_score;\n        memset(min_name, '\\0', sizeof(min_name));\n        strcpy(stud_name, stud_name);\n        strcpy(min_name, stud_name);\n    }\n    else if (stud_score &gt;= min_score) {\n        max_score = stud_score;\n        memset(max_name, '\\0', sizeof(max_name));\n        strcpy(stud_name, stud_name);\n        strcpy(max_name, stud_name);\n    }\n\n    stud_total_score = stud_total_score + stud_score;\n\n    memset(temp_name, '\\0', sizeof(temp_name));\n    strcpy(stud_name, stud_name);\n    strcpy(temp_name, stud_name);\n}\n\n//Math part\navg_score = stud_total_score / stud_total;\n//END of Name &amp; Score Input Looping\n\n    //Start of Score Table\n\nfor (int k = 1;k &lt;= 50;++k) {\n    printf(\"-\");\n}\nprintf(\"\\n%-4s %-32s %3s\\n\", \"No.\", \"Nama\", \"Nilai\");\n\nfor (int k = 1;k &lt;= 50;++k) {\n    printf(\"-\");\n}\nfor (int j = 1;j &lt;= stud_total;++j) {\n    printf(\"\\n%-4d %-32s %3.2f\", j, temp_name, stud_score);\n}\n\n\n\n//END of Score Table \n\n\n\n\n//Start of conlusion\nprintf(\"\\n\");\nprintf(\"\\n\");\nprintf(\"Highest score is %.2f achieved by %s\\n\", max_score, max_name);\nprintf(\"Lowest score is %.2f obtained by %s \\n\", min_score, min_name);\nprintf(\"Student Average : %.2f\", avg_score);\n\n//end of conclusion\n\n\n\ngetchar();\ngetchar();\nreturn 0;}\n</code></pre>\n\n<p>My question is, how do I make the table so that the input from inside the looping can be printed after the looping?</p>\n\n<p>or if you have better idea please tell me.</p>\n\n<p>I've tried putting the table inside the loop but it doesn't help at all as you may already know. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1476874674, "post_id": 40129430, "comment_id": 67528599, "body": "The code has undefined behaviour."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1476874692, "post_id": 40129430, "comment_id": 67528620, "body": "Think about the size of a <code>char</code> and think about the sign bit."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1476877610, "post_id": 40129430, "comment_id": 67530860, "body": "It&#39;s impossible to reliably answer the question <i>&quot;why?&quot;</i>. Theoretically, you could end up <a href=\"https://randomascii.wordpress.com/2014/05/19/undefined-behavior-can-format-your-drive/\" rel=\"nofollow noreferrer\">formatting your hard drive</a>"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6640867, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/58686b170fb26788a02df0ebd4af7544?s=128&d=identicon&r=PG&f=1", "display_name": "TheNemesis584", "link": "https://stackoverflow.com/users/6640867/thenemesis584"}, "edited": false, "score": 0, "creation_date": 1476875071, "post_id": 40129511, "comment_id": 67528924, "body": "ahh, I see, didn&#39;t thought about that, thank you, this can solve many problems"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1476876025, "post_id": 40129511, "comment_id": 67529681, "body": "The answer does state it, but let me do so again to be super clear: DO NOT RELY on this behaviour."}], "tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": true, "score": 4, "last_activity_date": 1525427914, "last_edit_date": 1525427914, "creation_date": 1476874755, "answer_id": 40129511, "question_id": 40129430, "link": "https://stackoverflow.com/questions/40129430/can-someone-explaint-what-this-code-do/40129511#40129511", "title": "Can someone explaint what this code do?", "body": "<p>If you refer to the <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII</a> Encoding of characters, \nyou can see that the character <code>'0'</code> has the numerical value <code>48</code>.</p>\n\n<p>The <code>for</code>loop will continue as long <code>c</code> is positive. After every iteration it will be incremented by 1. <code>signed char</code> holds values from -128 to 127.\nIf 127 gets incremented you get undefined behaviour as stated in the C standard. So you should never do, except if you just play around. Possible things that can reasonably happen are:</p>\n\n<ul>\n<li>A wrap around to -128</li>\n<li>An infinite loop because the compiler thinks that a wrap around can not happen so he assumes <code>c&gt;0</code> is always true.</li>\n</ul>\n\n<p>There might be other things (its undefined), but in your case the wrap around happens and <code>c</code> is -128.</p>\n\n<p>If you change the relation to <code>c&lt;0</code> he the condition is <code>false</code>from the beginning and the loop will be skipped, giving you 48 as the answer.</p>\n"}], "owner": {"reputation": 57, "user_id": 6640867, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/58686b170fb26788a02df0ebd4af7544?s=128&d=identicon&r=PG&f=1", "display_name": "TheNemesis584", "link": "https://stackoverflow.com/users/6640867/thenemesis584"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 40129511, "answer_count": 1, "score": -1, "last_activity_date": 1525427914, "creation_date": 1476874578, "question_id": 40129430, "link": "https://stackoverflow.com/questions/40129430/can-someone-explaint-what-this-code-do", "title": "Can someone explaint what this code do?", "body": "<p>I'm trying to figure out what this code but no luck. I need some explanations</p>\n\n<pre><code>signed char c = '0';\nfor(; c &gt; 0; c++);\nprintf(\"%d\", c);\n</code></pre>\n\n<p>output is -128, when I change the sign to \"less then\" output is 48, why?</p>\n"}, {"tags": ["c", "null-character"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1476874546, "post_id": 40129319, "comment_id": 67528482, "body": "<code>char *pStr = &quot;\\0&quot;;</code> I guess this is not what you think it is. You declare a pointer and write something in it. That would be the address it points to. Do a <code>malloc</code> there and afterwards fill the allocated memory. Or you could just use an char array there."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 2, "creation_date": 1476874935, "post_id": 40129319, "comment_id": 67528812, "body": "@KamiKaze I guess <code>char *pStr = &quot;\\0&quot;;</code> is not what you think. It declares a pointer whose value is the <b>address of the string literal</b> that contains two nul bytes. No need to malloc to be correct."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1476875115, "post_id": 40129319, "comment_id": 67528961, "body": "@Jean-BaptisteYun&#232;s Mhh you got me thinking there. What is the lifetime of the memory in which the two nul bytes reside?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1476875575, "post_id": 40129319, "comment_id": 67529313, "body": "@KamiKaze String literals have static storage duration (see standard 6.4.5/6)."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 11, "last_activity_date": 1476874551, "creation_date": 1476874551, "answer_id": 40129418, "question_id": 40129319, "link": "https://stackoverflow.com/questions/40129319/difference-between-0-and-0/40129418#40129418", "title": "difference between &quot;\\0&quot; and &#39;\\0&#39;", "body": "<p>They are different.</p>\n\n<p><code>\"\\0\"</code> is a string literal which has two consecutive 0's and is roughly equivalent to:</p>\n\n<pre><code>const char a[2] = { '\\0', '\\0' };\n</code></pre>\n\n<p><code>'\\0'</code> is an <code>int</code> with value 0. You can always 0 wherever you need to use <code>'\\0'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 6, "last_activity_date": 1476874583, "creation_date": 1476874583, "answer_id": 40129432, "question_id": 40129319, "link": "https://stackoverflow.com/questions/40129319/difference-between-0-and-0/40129432#40129432", "title": "difference between &quot;\\0&quot; and &#39;\\0&#39;", "body": "<p><code>\\0</code> is the null terminator character.</p>\n\n<p><code>\"\\0\"</code> is the same as <code>{'\\0', '\\0'}</code>. It is a string written by a confused programmer who doesn't understand that string literals are always null terminated automatically. Correctly written code would have been <code>\"\"</code>.</p>\n\n<p>The line <code>if (str_temp=='\\0')</code> is nonsense, it should have been <code>if (str_temp==NULL)</code>. Now as it happens, <code>\\0</code> is equivalent to 0, which is a null pointer constant, so the code works, by luck.</p>\n\n<p>Taking <code>strlen</code> of a string where <code>\\0</code> is the first character isn't very meaningful. You will get string length zero.</p>\n"}, {"comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1476875005, "post_id": 40129446, "comment_id": 67528869, "body": "Don&#39;t forget to nit about the memory leak (overwrites reference to allocated memory in loop)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1476875811, "post_id": 40129446, "comment_id": 67529504, "body": "To not use <code>sizeof(char)</code> in malloc is a very subjective style opinion, I don&#39;t understand why people keep making that remark. People might be typing out the sizeof(char) explicitly so because they want to have a consistent coding style no matter the type and always call malloc as <code>malloc(n * sizeof(type))</code>. This adds the value of self-documenting code. To argue against that it&#39;s just like saying that we shouldn&#39;t write <code>char* ptr = malloc(n*sizeof(*ptr))</code> but rewrite that as <code>char* ptr = malloc(n)</code>, but only if the type is char."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1476875973, "post_id": 40129446, "comment_id": 67529632, "body": "It is not a silly way to create an empty string, as it just not create an empty string. It just creates a string literal that is not a string, see 6.4.5/6 note 78"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1476875987, "post_id": 40129446, "comment_id": 67529646, "body": "@Lundin To be fair, many if not most C programmers do not know that <code>sizeof(char)</code> is <i>defined</i> to be one."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476876108, "post_id": 40129446, "comment_id": 67529743, "body": "@Lundin Yeah, that&#39;s maybe a fair point. It&#39;s hard to know if snippets posted here are parts of large codebases with consistent coding styles. My assumption tends to be that most of the time, they&#39;re not. I think it&#39;s valuable to &quot;preach&quot; about this since it&#39;s still a bit unknown, and I dislike cargo culting."}, {"owner": {"reputation": 544, "user_id": 11180198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Mu1E.jpg?s=128&g=1", "display_name": "Chris Tang", "link": "https://stackoverflow.com/users/11180198/chris-tang"}, "edited": false, "score": 0, "creation_date": 1584339706, "post_id": 40129446, "comment_id": 107396618, "body": "I typed <code>strlen(&quot;\\0&quot;)</code> but got <code>0</code>; does it suggest <code>&quot;\\0&quot;</code> is an empty string?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 544, "user_id": 11180198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Mu1E.jpg?s=128&g=1", "display_name": "Chris Tang", "link": "https://stackoverflow.com/users/11180198/chris-tang"}, "edited": false, "score": 1, "creation_date": 1584436953, "post_id": 40129446, "comment_id": 107429250, "body": "@ChrisTang Yes, since <code>&#39;\\0&#39;</code> acts as the terminator, it is not counted. In memory <code>&quot;&quot;</code> will be a single <code>&#39;\\0&#39;</code>, when you include it explicitly it will be doubled but that doesn&#39;t matter from <code>strlen()</code>&#39;s point of view."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 11, "last_activity_date": 1476875361, "last_edit_date": 1476875361, "creation_date": 1476874611, "answer_id": 40129446, "question_id": 40129319, "link": "https://stackoverflow.com/questions/40129319/difference-between-0-and-0/40129446#40129446", "title": "difference between &quot;\\0&quot; and &#39;\\0&#39;", "body": "<p>Double quotes create string literals. So <code>\"\\0\"</code> is a string literal holding the single character <code>'\\0'</code>, plus a second one as the terminator. It's a silly way to write an empty string (<code>\"\"</code> is the idiomatic way).</p>\n\n<p>Single quotes are for character literals, so <code>'\\0'</code> is an <code>int</code>-sized value representing the character with the encoding value of 0.</p>\n\n<p>Nits in the code:</p>\n\n<ul>\n<li>Don't cast the return value of <code>malloc()</code> in C.</li>\n<li>Don't scale allocations by  <code>sizeof (char)</code>, that's always 1 so it adds no value.</li>\n<li>Pointers are not integers, you should compare against <code>NULL</code> typically.</li>\n<li>The entire structure of the code makes no sense, there's an allocation in a loop but the pointer is thrown away, leaking lots of memory.</li>\n</ul>\n"}], "owner": {"reputation": 105, "user_id": 4689113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd19c4ad448abe3f6ff40a5ef55e844?s=128&d=identicon&r=PG&f=1", "display_name": "Fermi", "link": "https://stackoverflow.com/users/4689113/fermi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3474, "favorite_count": 3, "accepted_answer_id": 40129446, "answer_count": 3, "score": 8, "last_activity_date": 1545663968, "creation_date": 1476874300, "last_edit_date": 1545663968, "question_id": 40129319, "link": "https://stackoverflow.com/questions/40129319/difference-between-0-and-0", "title": "difference between &quot;\\0&quot; and &#39;\\0&#39;", "body": "<p>I am trying to understand following piece of code, but I am confused between <code>\"\\0\"</code> and <code>'\\0'</code>.I know its silly but kindly help me out</p>\n\n<pre><code>   #define MAX_HISTORY 20\n\n   char *pStr = \"\\0\";\n   for(x=0;x&lt;MAX_HISTORY;x++){\n        str_temp = (char *)malloc((strlen(pStr)+1)*sizeof(char));\n        if (str_temp=='\\0'){\n            return 1;\n    }\n    memset(str_temp, '\\0', strlen(pStr) );\n    strcpy(str_temp, pStr);\n</code></pre>\n"}, {"tags": ["c", "image-processing", "labwindows", "cvi"], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 4803777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3dfbd1a4cfa333a7dc9bf465a3aec0?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4803777/raz"}, "is_accepted": true, "score": 1, "last_activity_date": 1480053560, "creation_date": 1480053560, "answer_id": 40798618, "question_id": 40129025, "link": "https://stackoverflow.com/questions/40129025/general-protection-error-when-using-ni-vision-imaqdetectlines-function/40798618#40798618", "title": "General Protection error when using NI VISION imaqDetectLines() function", "body": "<p>I found the problem.</p>\n\n<p>if you look at the function call:</p>\n\n<pre><code>aLm = imaqDetectLines(imageDestHdl, &amp;lineDesc, &amp;stCurveOptions\n                       ,&amp;stShapeDetectionOption, NULL, &amp;nLines);   \n</code></pre>\n\n<p>For the ROI parameter i passed NULL because i got this from The function panel help:</p>\n\n<blockquote>\n  <p>The region of interest applied to the image that specifies where circles can be detected. Set this parameter to NULL to search the entire image.</p>\n</blockquote>\n\n<p>But, apparently it is a known bug and it will be fixed, so in order to workaround this, just do the following:</p>\n\n<pre><code>ROI *roi;    \nimaqSetWindowROI (0, NULL);    \nroi = imaqGetWindowROI (0);  \n</code></pre>\n\n<p>And then send it to the function:</p>\n\n<pre><code>aLm = imaqDetectLines(imageDestHdl, &amp;lineDesc, &amp;stCurveOptions\n                       ,&amp;stShapeDetectionOption, roi, &amp;nLines);  \n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 4803777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3dfbd1a4cfa333a7dc9bf465a3aec0?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4803777/raz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 40798618, "answer_count": 1, "score": 0, "last_activity_date": 1480053560, "creation_date": 1476873529, "last_edit_date": 1478723949, "question_id": 40129025, "link": "https://stackoverflow.com/questions/40129025/general-protection-error-when-using-ni-vision-imaqdetectlines-function", "title": "General Protection error when using NI VISION imaqDetectLines() function", "body": "<p>I am using National Instruments Vision module in Labwindows\\CVI</p>\n\n<p>For some reason, when i use the func <code>imaqDetectLines()</code>, i get <code>FATAL RUN-TIME ERROR:   \"Angle tracker.c\", line 50, col 11, thread id 0x00002004:   The program has caused a 'General Protection' fault at 0x6C5AD446.\n</code></p>\n\n<p>This is my code:</p>\n\n<pre><code>#include \"nivision.h\"\n#include &lt;userint.h&gt;\n#include &lt;cvirte.h&gt;\n\nint main (int argc, char *argv[])\n{\n    int nLines;\n    ShapeDetectionOptions stShapeDetectionOption;\n    RangeFloat aAngleRanges[2]={{0,10.0},{10.0,20.0}};\n    CurveOptions stCurveOptions = {0};\n    LineMatch *aLm;\n    LineDescriptor lineDesc;\n    Image *imageHdl = NULL, *imageDestHdl = NULL;\n    char temp[1024] =\"\";\n\n    if (InitCVIRTE (0, argv, 0) == 0)\n        return -1;    /* out of memory */\n\n    imageHdl = imaqCreateImage (0/*U8*/,1); \n    imageDestHdl = imaqCreateImage (0/*U8*/,1); \n\n    strcpy(temp,\"C:\\\\CVI2013\\\\Projects\\\\Angel Tracker\\\\IMG\\\\CC01.bmp\");\n\n    imaqReadFile (imageHdl, temp, NULL, NULL);\n\n    imaqEdgeFilter (imageDestHdl, imageHdl, IMAQ_EDGE_SOBEL, NULL);\n\n    lineDesc.maxLength = 100;\n    lineDesc.minLength = 50;\n\n    stShapeDetectionOption.minMatchScore = 1;\n    stShapeDetectionOption.mode = 0;\n    stShapeDetectionOption.numAngleRanges = 1;\n    stShapeDetectionOption.angleRanges = aAngleRanges;\n    stShapeDetectionOption.scaleRange.minValue = 1;\n    stShapeDetectionOption.scaleRange.maxValue = 10;\n\n    stCurveOptions.extractionMode = 0;\n    stCurveOptions.threshold = 100;\n    stCurveOptions.filterSize = 1;\n    stCurveOptions.minLength = 100;\n    stCurveOptions.rowStepSize = 10;\n    stCurveOptions.columnStepSize = 10;\n    stCurveOptions.maxEndPointGap = 1000;\n    stCurveOptions.onlyClosed = TRUE;\n    stCurveOptions.subpixelAccuracy = TRUE;\n\n    aLm = imaqDetectLines(imageDestHdl, &amp;lineDesc, &amp;stCurveOptions\n                           ,&amp;stShapeDetectionOption, NULL, &amp;nLines);\n\n    return 0;\n}\n</code></pre>\n\n<p>what i am actually doing is:</p>\n\n<ol>\n<li><p>Open a BMP file</p></li>\n<li><p>Edge filltering it with <code>imaqEdgeFilter()</code> func using SOBEL</p></li>\n<li><p>Then i want to detect lines with <code>imaqDetectLines()</code> func</p></li>\n</ol>\n"}, {"tags": ["c", "gcc", "makefile", "compilation", "avr"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1476872381, "post_id": 40128462, "comment_id": 67526820, "body": "What is <code>One</code>, and where is it defined?"}, {"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1476872455, "post_id": 40128462, "comment_id": 67526867, "body": "<code>\u27ad grep -rn &quot;One&quot;  bb_system.h:25:extern struct bb_system One;  Sys_init.c:7:&#47;&#47;struct bb_system One;  Sys_init.c:23:\tBB_Struct_init(&amp;One);  Binary file Sys_init.o matches  BB_Timers.c:31:\tOne.sys_count++; &#47;&#47;this will provide the count for taks  BB_Timers.c:37:\treturn (One.sys_count++;);  Binary file BB_Timers.o matches</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1476872573, "post_id": 40128462, "comment_id": 67526953, "body": "So <code>One</code> is not actually <i>defined</i> anywhere, just declared and used? The only definition seems to be commented out."}, {"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1476872777, "post_id": 40128462, "comment_id": 67527089, "body": "It looks like I defined it here, right?  <code>bb_system.h:25:extern struct bb_system One;</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1476872898, "post_id": 40128462, "comment_id": 67527163, "body": "@BrocolliRob No, that&#39;s a <i>declaration</i>. In <code>Sys_init.c</code> on line 7 you have a <b><i>commented out</i></b> definition."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1476872919, "post_id": 40128462, "comment_id": 67527177, "body": "@BrocolliRob No, that&#39;s a declaration. You need a <i>definition</i>, which is when it will start to exist and actually take up memory. A definition cannot start with <code>extern</code>."}, {"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1476873227, "post_id": 40128462, "comment_id": 67527433, "body": "Thanks...That&#39;s it.  Do I have to worry about the order in which I call in <code>CSRC</code> for future debugging  Could that ever be the issue?"}], "answers": [{"tags": [], "owner": {"reputation": 1057, "user_id": 4153464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/D55Mz.jpg?s=128&g=1", "display_name": "Work of Artiz", "link": "https://stackoverflow.com/users/4153464/work-of-artiz"}, "is_accepted": true, "score": 1, "last_activity_date": 1476873278, "creation_date": 1476873278, "answer_id": 40128909, "question_id": 40128462, "link": "https://stackoverflow.com/questions/40128462/avr-gcc-makefile-linking-issue/40128909#40128909", "title": "AVR-GCC Makefile Linking Issue", "body": "<p>So summarizing the comments on the question:</p>\n\n<p>In <code>bb_system.h</code> on line 25 you put this statement: </p>\n\n<pre><code>extern struct bb_system One;\n</code></pre>\n\n<p>This means that somewhere in your compiled files there must be a variable called <code>One</code> of type <code>struct bb_system</code> </p>\n\n<p>And in <code>Sys_init.c</code> on line 7 you commented out the statement</p>\n\n<pre><code>// struct bb_system One;\n</code></pre>\n\n<p>Which it probably would have resolved to.</p>\n\n<p>Fix that line</p>\n"}], "owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 40128909, "answer_count": 1, "score": 0, "last_activity_date": 1476873278, "creation_date": 1476872156, "question_id": 40128462, "link": "https://stackoverflow.com/questions/40128462/avr-gcc-makefile-linking-issue", "title": "AVR-GCC Makefile Linking Issue", "body": "<p>I've got the following Makefile:</p>\n\n<pre><code># Name: Makefile\n# Author: &lt;insert your name here&gt;\n# Copyright: &lt;insert your copyright message here&gt;\n# License: &lt;insert your license reference here&gt;\n\n# DEVICE ....... The AVR device you compile for\n# CLOCK ........ Target AVR clock rate in Hertz\n# OBJECTS ...... The object files created from your source files. This list is\n#                usually the same as the list of source files with suffix \".o\".\n# PROGRAMMER ... Options to avrdude which define the hardware you use for\n#                uploading to the AVR and the interface where this hardware\n#                is connected.\n# FUSES ........ Parameters for avrdude to flash the fuses appropriately.\n\nCSRC       = main.c Sys_init.c BB_Timers.c SPI.c Radio_interface.c  \nDEVICE     = atmega328p \nMCU        = m328p \nCLOCK      = 800000\nPROGRAMMER = -c dragon_isp \nPORT       = -P usb \n#PROGRAMMER = -c /dev/buspirate \nOBJECTS    = main.o \nFUSES      = -U efuse:w:0xff:m -U lfuse:w:0xe2:m -U hfuse:w:0xde:m\nOBJECTS    = $(CSRC:.c=.o) $(ASRC:.s=.o)\n\n\n######################################################################\n######################################################################\n\n# Tune the lines below only if you know what you are doing:\n\nAVRDUDE = avrdude $(PROGRAMMER) $(PORT) -p $(DEVICE) -vv\nCOMPILE = avr-gcc -Wall -Os -DF_CPU=$(CLOCK) -mmcu=$(DEVICE) # symbolic targets:\nall:    main.hex\n\n.c.o:\n    $(COMPILE) -c $&lt; -o $@\n\n.S.o:\n    $(COMPILE) -x assembler-with-cpp -c $&lt; -o $@\n# \"-x assembler-with-cpp\" should not be necessary since this is the default\n# file type for the .S (with capital S) extension. However, upper case\n# characters are not always preserved on Windows. To ensure WinAVR\n# compatibility define the file type manually.\n\n.c.s:\n    $(COMPILE) -S $&lt; -o $@\n\nflash:  all\n    $(AVRDUDE) -U flash:w:main.hex:i\n\nfuse:\n    $(AVRDUDE) $(FUSES)\n\ninstall: flash fuse\n\n# if you use a bootloader, change the command below appropriately:\nload: all\n    bootloadHID main.hex\n\nclean:\n    rm -f main.hex main.elf $(OBJECTS)\n\n# file targets:\nmain.elf: $(OBJECTS)\n    $(COMPILE) -o main.elf $(OBJECTS)\n\nmain.hex: main.elf\n    rm -f main.hex\n    avr-objcopy -j .text -j .data -O ihex main.elf main.hex\n# If you have an EEPROM section, you must also create a hex file for the\n# EEPROM and add it to the \"flash\" target.\n\n# Targets for code debugging and analysis:\ndisasm: main.elf\n    avr-objdump -d main.elf\n\ncpp:\n    $(COMPILE) -E main.c\n</code></pre>\n\n<p>When I compile with <code>make</code>, I get the following error:</p>\n\n<pre><code>&gt;&gt; make    \navr-gcc -Wall -Os -DF_CPU=800000 -mmcu=atmega328p   -o main.elf main.o Sys_init.o BB_Timers.o SPI.o Radio_interface.o \n    Sys_init.o: In function `System_init':\n    Sys_init.c:(.text+0x0): undefined reference to `One'\n    Sys_init.c:(.text+0x2): undefined reference to `One'\n    BB_Timers.o: In function `__vector_14':\n    BB_Timers.c:(.text+0x2e): undefined reference to `One'\n    BB_Timers.c:(.text+0x30): undefined reference to `One'\n    collect2: error: ld returned 1 exit status\n    make: *** [Makefile:66: main.elf] Error 1\n</code></pre>\n\n<p>I've tried shuffling the <code>CSRC</code> order around, and that used to seem to make a difference, but not this time.  I feel like this is wrong though, because how would someone with many many source files handle this for, say, a big project?  There must be a better way.</p>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1476872287, "post_id": 40128453, "comment_id": 67526756, "body": "Use <code>valgrind</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476872419, "post_id": 40128453, "comment_id": 67526842, "body": "Use a debugger."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1476872932, "post_id": 40128453, "comment_id": 67527184, "body": "<code>struct node **createlist(void)</code> returning a pointer to pointer makes little sense here."}], "answers": [{"tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 0, "last_activity_date": 1476875850, "last_edit_date": 1476875850, "creation_date": 1476875473, "answer_id": 40129803, "question_id": 40128453, "link": "https://stackoverflow.com/questions/40128453/c-segmentation-fault-when-printing-single-linked-list-using-pointer-to-pointer-o/40129803#40129803", "title": "C segmentation fault when printing single linked list using pointer to pointer of first node(head node)", "body": "<p>Here, you assign <code>start</code> the address of a temporary, function-local object:</p>\n\n<pre><code>   start = &amp;tmp;\n</code></pre>\n\n<p>Later you return that address:</p>\n\n<pre><code>    return start;\n</code></pre>\n\n<p>From this point the returned pointer points to an object that no longer exists.</p>\n\n<p>It's not clear to me why you have declared <code>start</code> as a <code>struct node **</code>. You say that:</p>\n\n<blockquote>\n  <p>**start: is the HEAD NODE (FIRST NODE) pointer</p>\n</blockquote>\n\n<p>... but it's not. <code>**start</code> is a node, not a pointer. <code>*start</code> <em>could</em> be made to point at the first node. <code>start</code> is declared as a pointer to a pointer to a node.</p>\n\n<blockquote>\n  <p>instead of storing HEAD NODE(FIRST NODE) as *start, I want to store HEAD NODE pointer as **start</p>\n</blockquote>\n\n<p>You can't; as declared, it's not the right type. <code>**start</code> is a node, you can't store a node pointer in it. <code>*start</code> is a pointer to node, and <code>start</code> is a pointer to a pointer to a node.</p>\n\n<p>I really think <code>start</code> should be probably be declared as a <code>struct node *</code> and not a <code>struct node **</code>. You seem to misunderstand what the double-star means.</p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 7018835, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2309ee7ad6ccc069ed9145bb33078b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Anjaneyulu", "link": "https://stackoverflow.com/users/7018835/anjaneyulu"}, "is_accepted": false, "score": 0, "last_activity_date": 1476879627, "creation_date": 1476879627, "answer_id": 40131267, "question_id": 40128453, "link": "https://stackoverflow.com/questions/40128453/c-segmentation-fault-when-printing-single-linked-list-using-pointer-to-pointer-o/40131267#40131267", "title": "C segmentation fault when printing single linked list using pointer to pointer of first node(head node)", "body": "<p>The problem arises here\nWith the return of the function createlist() the stack frame of it is destroyed and even variable temp is also destroyed. So temp variable is no more and we have the address of first node of list is in temp so the value *start becomes zero in the main function and accessing elements there is always a segmentation fault.</p>\n\n<pre><code>    start = &amp;tmp;\n    printf(\"after assign start :%p\\n\", start);\n    printf(\"In create List :\\n\");\n    display();\n</code></pre>\n\n<p>To overcome this use a global head pointer to hold the address of first node or you can have the tmp variable as global .</p>\n"}], "owner": {"reputation": 185, "user_id": 6560656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7d4077a4b68277f2d1edb2b8e80edc54?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Kalyanam", "link": "https://stackoverflow.com/users/6560656/vijay-kalyanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1476879627, "creation_date": 1476872130, "last_edit_date": 1476874507, "question_id": 40128453, "link": "https://stackoverflow.com/questions/40128453/c-segmentation-fault-when-printing-single-linked-list-using-pointer-to-pointer-o", "title": "C segmentation fault when printing single linked list using pointer to pointer of first node(head node)", "body": "<p>Aim : Create a single linked list and print the list using HEAD POINTER (not the HEAD NODE).</p>\n\n<p><code>**start</code>:</p>\n\n<ul>\n<li><p>is the HEAD NODE (FIRST NODE) pointer</p></li>\n<li><p>instead of storing HEAD NODE(FIRST NODE) as <code>*start</code>, I want to store HEAD NODE pointer as <code>**start</code>.</p></li>\n</ul>\n\n<p>ALG:</p>\n\n<ol>\n<li>create list with five nodes (hard coded in my program).</li>\n<li>display them using pointer to HEAD NODE </li>\n</ol>\n\n<p>There is a significant HOLE in the code, which do not appear easily.\nCould anyone give your inputs on this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node {\n        int data;\n        struct node *link;\n}**start;\n\n\nvoid display(void) {\n        struct node *p;\n\n        if (!strart ) { printf(\"List is empty\\n\"); return; }\n        p = *start;\n        printf(\"List :\");\n        while(p != NULL) {\n                printf(\"-%d\", p-&gt;data);\n                p = p-&gt;link;\n        }\n        puts(\"\");\n}\n\nstruct node **createlist(void) {\n        int n;\n        struct node *p, *new, *tmp; \n\n        printf(\"enter no of elements to add\\n\");\n        //scanf(\"%d\", &amp;n);\n\n        p = NULL;\n        n=5;\n        while(n--) {\n                new = (struct node *) calloc(1, sizeof(struct node)); \n                new-&gt;data = n;\n                if (p) {\n                        p-&gt;link = new;\n                        p = new;\n                } else if (p == NULL) {\n                        p = tmp = new;\n                }\n        }\n        printf(\"before assign start :%p\\n\", start);\n        start = &amp;tmp;\n        printf(\"after assign start :%p\\n\", start);\n        printf(\"In create List :\\n\");\n        display();\n\n        return start; \n}\nint main() {\n\n        int ch;\n        do {\n                printf(\"1.CreateList 2.DisplayList\\n\");\n                //scanf(\"%d\", &amp;ch); //HARDCODED\n\n                switch(1) {\n                        printf(\"switch -&gt; start :%p\\n\", start);\n                        case 1 : start = createlist();\n                        printf(\"after create -&gt; start :%p\\n\", start);\n                        case 2 : printf(\"Disp:\\n\"); display(); break;\n                        default : printf(\"Invalid option\\n\");\n                }\n        } while(0);\n\n        return 0;\n}\n</code></pre>\n\n<p>Output of code:</p>\n\n<pre><code>root@CDrive:~/datastructures# ./a.out \n1.CreateList 2.DisplayList\nenter no of elements to add\nbefore assign start :(nil)\nafter assign start :0x7ffd13e64798\nIn create List :\nList :-4-3-2-1-0\nafter create -&gt; start :0x7ffd13e64798\nDisp:\nSegmentation fault (core dumped)\n</code></pre>\n"}, {"tags": ["c", "swift3", "unsafemutablepointer"], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 6303643, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YBsxGFoaNrM/AAAAAAAAAAI/AAAAAAAAAFI/y3OcW3A-rV8/photo.jpg?sz=128", "display_name": "Arshia", "link": "https://stackoverflow.com/users/6303643/arshia"}, "is_accepted": false, "score": 2, "last_activity_date": 1476890198, "creation_date": 1476890198, "answer_id": 40135482, "question_id": 40128275, "link": "https://stackoverflow.com/questions/40128275/swift-3-unsafemutablepointer-initialization-for-c-type-float/40135482#40135482", "title": "Swift 3 UnsafeMutablePointer initialization for C type float**", "body": "<p>Here is what I ended up doing and is working. It follows recommendations from <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0107-unsaferawpointer.md\" rel=\"nofollow\">new UnsafeMuTablePointer Reference</a> showing example programs on simple schemes. In summary, it is required to allocate <em>and</em> assign each slot starting from top-level!</p>\n\n<p>So in order to construct an <code>UnsafeMutablePointer&lt; UnsafeMutablePointer&lt;T&gt;&gt;</code> of size (size1, size2) (like a matrix), you can go ahead as follows using an intermediate vector here called <code>vectorBuf</code>:</p>\n\n<pre><code>    var vectorBuf : UnsafeMutablePointer&lt;T&gt;?\n    vectorBuf = UnsafeMutablePointer&lt;T&gt;.allocate(capacity: size2)\n    for index in 0...(size2) {     // had Int(channelCount)*\n        vectorBuf!.advanced(by: index).pointee = 0.0\n    }\n\n    /// This is where allocation and initialization happens:\n    bufferOut = UnsafeMutablePointer&lt; UnsafeMutablePointer&lt;T&gt;?&gt;.allocate(capacity: Int(size1))\n    for index in 0...Int(size1) {\n        bufferOut!.advanced(by: index).pointee = UnsafeMutablePointer&lt;T&gt;.allocate(capacity: (size2) )\n        bufferOut!.advanced(by: index).pointee?.assign(from: vectorBuf!, count: size2)\n    }\n</code></pre>\n\n<p>Hope this can be useful to others trying to use swift with signal processing calls in C/C++!</p>\n"}], "owner": {"reputation": 195, "user_id": 6303643, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YBsxGFoaNrM/AAAAAAAAAAI/AAAAAAAAAFI/y3OcW3A-rV8/photo.jpg?sz=128", "display_name": "Arshia", "link": "https://stackoverflow.com/users/6303643/arshia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3696, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476890198, "creation_date": 1476871672, "last_edit_date": 1476885467, "question_id": 40128275, "link": "https://stackoverflow.com/questions/40128275/swift-3-unsafemutablepointer-initialization-for-c-type-float", "title": "Swift 3 UnsafeMutablePointer initialization for C type float**", "body": "<p>Within Swift 3, I need to send data to a C object accepting <code>float **</code> input. </p>\n\n<p>In Swift 2, I used to declare a <code>UnsafeMutablePointer&lt; UnsafeMutablePointer&lt;Float32&gt;&gt;</code>, construct a swift Array (only for init!), and pass this to the pointer, and it worked:</p>\n\n<pre><code>    var bufferOut: UnsafeMutablePointer&lt; UnsafeMutablePointer&lt;Float32&gt;&gt;?\n    arrayOut = Array(repeating: Array(repeating: 0, count: Int(size1), count: Int(size2))\n    bufferOut = UnsafeMutablePointer&lt; UnsafeMutablePointer&lt;Float32&gt;&gt;(arrayOut)\n</code></pre>\n\n<p>This is all broken now in Swift 3!</p>\n\n<ul>\n<li>What is the most Swifty way to pass a C-Style <code>float**</code> and initialize it?</li>\n<li>What would be the best way to assign values in a <code>UnsafeMutablePointer&lt; UnsafeMutablePointer&lt;T&gt;&gt;</code>?</li>\n</ul>\n\n<p>Documentations say that for <code>T **</code> one should use <code>AutoreleasingUnsafeMutablePointer&lt;T&gt;</code> but I actually never managed to construct one!</p>\n\n<p>Note that I don't actually care for the Array in the above example! If I could just initialize the Pointer directly using known capacities, I would. </p>\n\n<p><strong>Note</strong>: The <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0107-unsaferawpointer.md#expected-use-cases\" rel=\"nofollow\">Expected use cases Section of UnsafeRawPointer</a> describes useful situations such C array and C Buffers, however translating such methods for the above construct is not evident!</p>\n"}, {"tags": ["c", "string", "printf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1476871602, "post_id": 40128214, "comment_id": 67526248, "body": "<code>printf(&quot;Type a string: &quot;, sizeof( s));</code>.. WTH is this?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1476871682, "post_id": 40128214, "comment_id": 67526318, "body": "Consider flushing the <code>stdout</code>....."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1476871714, "post_id": 40128214, "comment_id": 67526337, "body": "either <code>fflush()</code>,or, <code>stdout</code> being line buffered, use <code>\\n</code> at end of each format string."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1476872184, "post_id": 40128214, "comment_id": 67526682, "body": "Make sure the string you have input (that is, after <code>fgets</code>) does not contain a terminating newline character. That newline gets printed out by <code>printf</code>-s and mis-formats your results. :)"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1476872240, "post_id": 40128214, "comment_id": 67526725, "body": "Oh, and add a newline (<code>\\n</code>) at the end of each output formatting string; that will help you see what&#39;s going on."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1476875145, "post_id": 40128214, "comment_id": 67528981, "body": "Please read how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  The <code>upperCase()</code>, <code>lowerCase()</code>, and <code>splitString()</code> are all irrelevant - your problem is adequately demonstrated with just the <code>gets()</code>+<code>printf()</code>, and more likely to attract good, targeted answers were you to do so."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1476871883, "creation_date": 1476871883, "answer_id": 40128360, "question_id": 40128214, "link": "https://stackoverflow.com/questions/40128214/c-the-prints-dont-come-out-right-so-far-havent-been-able-to-figure-out-why/40128360#40128360", "title": "C. the prints don&#39;t come out right, so far haven&#39;t been able to figure out why", "body": "<p>The <code>fgets</code> function will read a newline and append it to the input string of there's room for it.</p>\n\n<p>You need to check if the last character in the string is <code>\\n</code> and if so set it to zero to trim it.</p>\n"}, {"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 1, "last_activity_date": 1476871916, "creation_date": 1476871916, "answer_id": 40128373, "question_id": 40128214, "link": "https://stackoverflow.com/questions/40128214/c-the-prints-dont-come-out-right-so-far-havent-been-able-to-figure-out-why/40128373#40128373", "title": "C. the prints don&#39;t come out right, so far haven&#39;t been able to figure out why", "body": "<p>You need to read the <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow\">documentation for <code>fgets()</code></a> (my emphasis):</p>\n\n<blockquote>\n  <p><code>fgets()</code> reads in at most one less than size characters from stream and stores them into the buffer pointed to by <code>s</code>. Reading stops after an <code>EOF</code> or a newline. <strong>If a newline is read, it is stored into the buffer.</strong> A terminating null byte (<code>'\\0'</code>) is stored after the last character in the buffer.</p>\n</blockquote>\n\n<p>Since you are typing in these lines with line break characters at the end, you need to remove them in your code.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1476871923, "creation_date": 1476871923, "answer_id": 40128375, "question_id": 40128214, "link": "https://stackoverflow.com/questions/40128214/c-the-prints-dont-come-out-right-so-far-havent-been-able-to-figure-out-why/40128375#40128375", "title": "C. the prints don&#39;t come out right, so far haven&#39;t been able to figure out why", "body": "<p>This is happening because <code>fgets</code> retains a <code>newline</code> at the end of the input string, and also because you do not printf a <code>newline</code> yourself. </p>\n\n<p>So the result, is that <code>newline</code> is being printed in the wrong place, splitting your message, and the <code>'</code> appears on the next line.</p>\n\n<p>An easy way to remove the <code>newline</code> from the entry is with</p>\n\n<pre><code>s [ strcspn(s, \"\\r\\n\") ] = 0;\n</code></pre>\n\n<p>but don't forget to add the <code>\\n</code> to the end of the <code>printf</code> formatting strings.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6870922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8jS2ejhwziU/AAAAAAAAAAI/AAAAAAAAIlI/pSfLnvXcbQo/photo.jpg?sz=128", "display_name": "Sone", "link": "https://stackoverflow.com/users/6870922/sone"}, "is_accepted": false, "score": 1, "last_activity_date": 1476872559, "creation_date": 1476872559, "answer_id": 40128626, "question_id": 40128214, "link": "https://stackoverflow.com/questions/40128214/c-the-prints-dont-come-out-right-so-far-havent-been-able-to-figure-out-why/40128626#40128626", "title": "C. the prints don&#39;t come out right, so far haven&#39;t been able to figure out why", "body": "<p>You have to put null terminator</p>\n\n<pre><code>void splitString(char s[]) {\n\nchar firstHalf[100] = { 0 };\nchar secndHalf[100] = { 0 };\n\n// u need to add null terminator '\\0' at the end of string\n// so u can add it in for loop or set i outside of loop\n\nfor (size_t i = 0; i &lt; strlen(s) / 2; i++){\n    firstHalf[i] = s[i];\n    **firstHalf[i+1] = '\\0';**\n}\n\nfor (size_t i = strlen(s) /2; i &lt; strlen(s); i++){\n    secndHalf[i - strlen(s) / 2] = s[i];\n    **secndHalf[i+1] = '\\0';**\n}\n\nprintf(\"The string split in two is '%s, - %s' \\n\", firstHalf, secndHalf);\n</code></pre>\n\n<p>}</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7019516, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c6be7fb9e217efd2fd605238460a4c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Gaute", "link": "https://stackoverflow.com/users/7019516/gaute"}, "edited": false, "score": 0, "creation_date": 1476874008, "post_id": 40128808, "comment_id": 67528045, "body": "It&#39;s just that the teacher wanted us to use fgets, as having a limit to a string written by a user could be dangerous. Not sure if I completely understood how it could be dangerous, but think it has something to do with this: <a href=\"http://stackoverflow.com/questions/2430303/disadvantages-of-scanf\" title=\"disadvantages of scanf\">stackoverflow.com/questions/2430303/disadvantages-of-scanf</a>"}, {"owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "reply_to_user": {"reputation": 3, "user_id": 7019516, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c6be7fb9e217efd2fd605238460a4c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Gaute", "link": "https://stackoverflow.com/users/7019516/gaute"}, "edited": false, "score": 0, "creation_date": 1476874962, "post_id": 40128808, "comment_id": 67528833, "body": "@Zuflus correct but to avoid buffer overflow i have given limit in the <code>scanf</code> that is <code>%200....</code> so it will be ok to use scanf."}], "tags": [], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1476876746, "last_edit_date": 1476876746, "creation_date": 1476873035, "answer_id": 40128808, "question_id": 40128214, "link": "https://stackoverflow.com/questions/40128214/c-the-prints-dont-come-out-right-so-far-havent-been-able-to-figure-out-why/40128808#40128808", "title": "C. the prints don&#39;t come out right, so far haven&#39;t been able to figure out why", "body": "<p>I thing use <code>scanf</code> with format specifier <code>%[^\\n]s</code> so you can skip the new line instated of <code>fgets</code> and add <code>\\n</code> in every <code>printf</code>. </p>\n\n<p>Complete working code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid splitString(char s[]) {\n\n    char firstHalf[100] = { 0 };\n    char secndHalf[100] = { 0 };\nint i;\n    for ( i = 0; i &lt; strlen(s) / 2; i++){\n        firstHalf[i] = s[i];\n    }\n\n    for ( i = strlen(s) /2; i &lt; strlen(s); i++){\n        secndHalf[i - strlen(s) / 2] = s[i];\n    }\n\n    printf(\"\\n The string split in two is '%s, - %s' \\n\", firstHalf, secndHalf);\n}\n\nvoid upperCase(char s[]){\n\n    //String in upper case\n    int i;\n    for (i = 0; i &lt; strlen(s); i++)\n    s[i] = toupper(s[i]);\n\n        printf(\"\\n The string in uppercase is '%s'\", s);\n}\n\nvoid lowerCase(char s[]){\n\n    //String in lower case\n    int i;\n    for ( i = 0; i &lt; strlen(s); i++)\n        s[i] = tolower(s[i]);\n\n        printf(\"\\n The string in lowercase is '%s'\", s);\n}\n\nint main() {\n\n    char s[200];\n    char splitS[200];\n\n    printf(\"Type a string: %ld\", sizeof( s));\n\n    if (scanf(\"%200[^\\n]s\", s)!= 0){  //fgets(s, sizeof(s), stdin) \n        printf(\"\\n The string is '%s'\", s);\n    }\n\n    strcpy(splitS, s);\n\n    upperCase(s);\n    lowerCase(s);\n    splitString(splitS);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<p>if you want use <code>fgets</code> only then find new line char in string and make it <code>NULL</code> and add new line char <code>'\\n'</code>  in every <code>printf</code> . </p>\n\n<p>Code need to change is:</p>\n\n<pre><code> if ( fgets(s, sizeof(s), stdin) != 0){   \n     int  i;\n     for(i = 0 ; i &lt; sizeof( s) ; i++ ){\n          if(s[i] == '\\n'){\n               s[i] = '\\0';     \n               break;\n          }\n      }\n    printf(\"\\n The string is '%s'\", s); \n }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7019516, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c6be7fb9e217efd2fd605238460a4c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Gaute", "link": "https://stackoverflow.com/users/7019516/gaute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1476876746, "creation_date": 1476871531, "last_edit_date": 1476876138, "question_id": 40128214, "link": "https://stackoverflow.com/questions/40128214/c-the-prints-dont-come-out-right-so-far-havent-been-able-to-figure-out-why", "title": "C. the prints don&#39;t come out right, so far haven&#39;t been able to figure out why", "body": "<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid splitString(char s[]) {\n\n    char firstHalf[100] = { 0 };\n    char secndHalf[100] = { 0 };\n\n    for (int i = 0; i &lt; strlen(s) / 2; i++){\n        firstHalf[i] = s[i];\n    }\n\n    for (int i = strlen(s) /2; i &lt; strlen(s); i++){\n        secndHalf[i - strlen(s) / 2] = s[i];\n    }\n\n    printf(\"The string split in two is '%s, - %s' \\n\", firstHalf, secndHalf);\n}\n\nvoid upperCase(char s[]){\n\n    //String in upper case\n    for (size_t i = 0; i &lt; strlen(s); i++)\n    s[i] = toupper(s[i]);\n\n        printf(\"The string in uppercase is '%s'\", s);\n}\n\nvoid lowerCase(char s[]){\n\n    //String in lower case\n    for (size_t i = 0; i &lt; strlen(s); i++)\n        s[i] = tolower(s[i]);\n\n        printf(\"The string in lowercase is '%s'\", s);\n}\n\nint main() {\n\n    char s[200];\n    char splitS[200];\n\n    printf(\"Type a string: \", sizeof( s));\n\n    if (fgets(s, sizeof(s), stdin) != 0){\n        printf(\"The string is '%s'\", s);\n    }\n\n    strcpy(splitS, s);\n\n    upperCase(s);\n    lowerCase(s);\n    splitString(splitS);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>The correct way it's supposed to print is like this:</strong></p>\n\n<blockquote>\n  <p>The string is 'Hello world'</p>\n  \n  <p>The string in uppercase is 'HELLO WORLD'</p>\n  \n  <p>The string in lowercase is 'hello world'</p>\n  \n  <p>The string split in two is 'Hello, - world'</p>\n</blockquote>\n\n<p><strong>But instead it prints like this:</strong></p>\n\n<blockquote>\n  <p>The string is 'Hello world</p>\n  \n  <p>'The string in uppercase is 'HELLO WORLD</p>\n  \n  <p>'The string in lowercase is 'hello world</p>\n  \n  <p>'The string split in two is 'Hello , - world</p>\n  \n  <p>'</p>\n</blockquote>\n"}, {"tags": ["c", "caching", "assembly", "disassembly", "prefetch"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1476872270, "post_id": 40128151, "comment_id": 67526743, "body": "Did you have a look at the documentation?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1476873086, "post_id": 40128151, "comment_id": 67527317, "body": "Intel Intrinsics Guide does not say anything about it. Nor Intel Intrinsics Refernce. Nor Intel Xeon Phi Instruction Set Reference (the disassembled code was compiled for KNC). As far as I know. I&#39;ve found only this remark in What every programmer should know about memory: <i>Programs can use the _mm_prefetch intrinsic on any pointer in the program. Most processors (certainly all x86 and x86-64 processors) ignore errors resulting from invalid pointers which make the life of the programmer significantly easier.</i>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1476873220, "post_id": 40128151, "comment_id": 67527427, "body": "Good points. Thank you for having a look before asking this question. Interesting that such an important detail remains undocumented!"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1476873506, "post_id": 40128151, "comment_id": 67527644, "body": "Maybe one note: Xeon Phi Instruction Set Reference does not list the page fault (PF) exception for <code>VPREFETCHx</code>. For generic programming with intrinsics, one should thus probably find an answer by checking instruction references for all possible architectures."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1476873395, "post_id": 40128905, "comment_id": 67527554, "body": "While creating out-of-bounds pointers is well-behaved on common architectures, it is likely that future compilers assume that if you compute a pointer, it is valid and the compiler can dereference it ahead of time / speculatively, thus leading to undefined behaviour if it is not valid."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1476873859, "post_id": 40128905, "comment_id": 67527931, "body": "@FUZxxl IA64 compilers already do that, but it&#39;s fine there. Still, it can&#39;t break like that <i>at least</i> in the case of using that pointer for prefetching otherwise it would just be broken."}, {"owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "edited": false, "score": 0, "creation_date": 1476918082, "post_id": 40128905, "comment_id": 67555651, "body": "UB? This is hardware, not a language standard."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1476945495, "post_id": 40128905, "comment_id": 67563629, "body": "It&#39;s a hack as well, <code>_mm_prefetch</code> is not a part of the C/C++ standards. I asked more about what CPU does, maybe the MWE in C was not  a good idea. Howerver, as you pointed out, even out of bounds pointers in C++ are UB according to the standard (except of a one-past-the-last special case)."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": true, "score": 4, "last_activity_date": 1476873269, "creation_date": 1476873269, "answer_id": 40128905, "question_id": 40128151, "link": "https://stackoverflow.com/questions/40128151/what-happens-if-an-invalid-address-is-prefetched/40128905#40128905", "title": "What happens if an invalid address is prefetched?", "body": "<p>First of all, the compiler doing it or you doing it are very different things in theory. Just because it looks equivalent doesn't make it so, the compiler is allowed to use any dirty hacks that work no matter whether they're expressible or defined in fully standard C.</p>\n\n<p>Of course prefetching doesn't generate signals*, it would be nearly useless if it did. It can be very slow for some invalid pointers though, depending on whether they trigger a TLB miss. So the compiler can safely use it, but it shouldn't indiscriminately use it for everything ever.</p>\n\n<p>Now using pointer arithmetic to create out of bounds pointers (except just past the end) is UB in theory, but when applied to a pointer it's the kind of UB that will mostly work anyway (with flat memory it's just an addition, the only way it could fail is if the compiler goes out of its way to detect it, and that means it would have to reason about dynamic sizes). Obviously the above case must be supported by compilers claiming to support SSE intrinsics otherwise you couldn't reasonably use prefetching, as demonstrated by this answer (and there's a bunch more extra guarantees they must make on top of the Standard).</p>\n\n<p>* from the manual:</p>\n\n<blockquote>\n  <p>The PREFETCHh instruction is merely a hint and does not affect program behavior.</p>\n</blockquote>\n\n<p>Signal would affect program behavior, so they cannot be generated.</p>\n"}], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 1, "accepted_answer_id": 40128905, "answer_count": 1, "score": 5, "last_activity_date": 1476873269, "creation_date": 1476871368, "last_edit_date": 1476872248, "question_id": 40128151, "link": "https://stackoverflow.com/questions/40128151/what-happens-if-an-invalid-address-is-prefetched", "title": "What happens if an invalid address is prefetched?", "body": "<p>Simple MWE:</p>\n\n<pre><code>int* ptr = (int*)malloc(64 * sizeof(int));\n_mm_prefetch((const char*)(ptr + 64), _MM_HINT_0);\n</code></pre>\n\n<ol>\n<li>Is this defined or undefined behavior?</li>\n<li>Can this raise a signal and abort the program run?</li>\n</ol>\n\n<p>I'm asking since I can see such prefetching in compiler generated code, where inside a loop prefetching is done without checking the address (stored in <code>rbx</code>):</p>\n\n<pre><code>400e73:       49 83 c5 40             add    r13,0x40\n400e77:       62 f1 f9 08 28 03       vmovapd zmm0,ZMMWORD PTR [rbx]\n400e7d:       4d 3b ec                cmp    r13,r12\n400e80:       62 d1 f9 08 eb 4d ff    vporq  zmm1,zmm0,ZMMWORD PTR [r13-0x40]\n400e87:       90                      nop\n400e88:       62 d1 78 08 29 4d ff    vmovaps ZMMWORD PTR [r13-0x40],zmm1\n400e8f:       72 03                   jb     400e94 &lt;main+0x244&gt;\n400e91:       49 89 c5                mov    r13,rax\n400e94:       62 f1 78 08 18 53 1d    vprefetch1 [rbx+0x740]\n400e9b:       ff c1                   inc    ecx\n400e9d:       62 f1 78 08 18 4b 02    vprefetch0 [rbx+0x80]\n400ea4:       48 83 c3 40             add    rbx,0x40\n400ea8:       81 f9 00 00 10 00       cmp    ecx,0x100000\n400eae:       72 c3                   jb     400e73 &lt;main+0x223&gt;\n</code></pre>\n"}, {"tags": ["c", "multithreading", "pthreads", "ncurses"], "comments": [{"owner": {"reputation": 1390, "user_id": 6804762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b41e265dcfe306ac9138ed4bca68c0ce?s=128&d=identicon&r=PG", "display_name": "xoxel", "link": "https://stackoverflow.com/users/6804762/xoxel"}, "edited": false, "score": 1, "creation_date": 1476871803, "post_id": 40128122, "comment_id": 67526398, "body": "For such games, ncurses is love, life and everything, but the only thing you can really do to learn ncurses is to read the docs. And ncurses is also oen of the simplest libs in c, so take a look at the docs, that will solve some of your problems :)"}, {"owner": {"reputation": 23, "user_id": 7016304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1175906342453985/picture?type=large", "display_name": "Anton Barinov", "link": "https://stackoverflow.com/users/7016304/anton-barinov"}, "reply_to_user": {"reputation": 1390, "user_id": 6804762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b41e265dcfe306ac9138ed4bca68c0ce?s=128&d=identicon&r=PG", "display_name": "xoxel", "link": "https://stackoverflow.com/users/6804762/xoxel"}, "edited": false, "score": 0, "creation_date": 1476871987, "post_id": 40128122, "comment_id": 67526543, "body": "thank you for the answer :) The thing that i really dont need it, it&#39;s just one assignment, and the main thing here is threads. So, i need to understand the working process of threads , not  the ncurses ))"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1476918681, "post_id": 40128122, "comment_id": 67555846, "body": "The only place <code>ncurses</code> appears in the incomplete example is in the declaration of <code>screen</code> (and making it work with mutexes is complicated)."}], "owner": {"reputation": 23, "user_id": 7016304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1175906342453985/picture?type=large", "display_name": "Anton Barinov", "link": "https://stackoverflow.com/users/7016304/anton-barinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476871303, "creation_date": 1476871303, "question_id": 40128122, "link": "https://stackoverflow.com/questions/40128122/implementation-of-threads-and-ncurses-together", "title": "Implementation of threads and ncurses together.", "body": "<p>I have a test programm from my programming course, it must to be a console game like a across the street. It's look like</p>\n\n<p>\u250c###################################################################\u2510</p>\n\n<pre><code>X        X                    X  X\n                                 X          X\n                 X            X\n                              X        XX\n       X                             X     X  X\n                        X  X           X    X\n X   X                   X  X            X\n           X         X\n               X                            X\n     X  X\n\n                      @\n</code></pre>\n\n<p>\u2514####################################################################\u2518</p>\n\n<p>@ - player (Froggy)</p>\n\n<p>X - cars that are moving</p>\n\n<p>I have never worked with ncurses and threads, and my task is to implement the parallel working of gechar() function, that take the input of moving direction from the user and move the player and ncruses functions ( they are already implement and working, i don't need to change something ).\nI also have declared global variables and structures. \nAs i understood, i need also to use mutex. I did it like this:</p>\n\n<pre><code>// Represents a specific screen positions by Cartesian coordinates\ntypedef struct{\nint x;\nint y;\n} Point;\n\n// Cars on the motorway are organized using a linked list\n// Every list element stores the car's coordinates and a pointer to the next car\ntypedef struct Car {\nPoint position;\nstruct Car* next;\n} Car;\n\n// List of cars on motorway (pointer to first list element)\nCar* motorway;\n\n// Position of froggy on screen\nPoint froggy;\n\n// Variables to represent current game state\nunsigned int error;\nunsigned int quit;\nunsigned int player_lost;\nunsigned int player_won;\nbool checker;\nbool first_frogy;\n\n// Other global variables\nWINDOW* screen;\nint old_cursor = 0;\nchar new_input;\npthread_mutex_t my_mutex;\n</code></pre>\n\n<p>Is it enough one mutex for all global variables and structures? Did i do it correctly?</p>\n\n<p>In main function i have while(), that call all functions in circle and i declared hier the new thread, that call my new catch_input() function. </p>\n\n<pre><code>status = pthread_create(&amp;thread, NULL, catch_input(), NULL);\nif (status != 0) {\n   printf(\"main error: can't create thread, status = %d\\n\", status);\n   exit(10);\n}\n\nmain(){\n...\nwhile(!quit &amp;&amp; !error &amp;&amp; !player_lost &amp;&amp; !player_won)\n{\n    moveFroggy(new_input);\n    moveCarsOnMotorway();\n    startCar((SCREEN_WIDTH - OUTER_BORDER));\n    drawScreen();\n    usleep(GAME_SPEED);\n}\n...\n}\n\nvoid* catch_input(){\nchar buf;\nwhile((buf = getchar())){\n    pthread_mutex_lock(&amp;my_mutex);\n    new_input = buf;\n    checker = true;\n    pthread_mutex_unlock(&amp;my_mutex);\n}\npthread_exit(NULL);\n}\n</code></pre>\n\n<p>The thread working correct and take all inputs ( i checked it with printw() ), but the graphical functions are not working. If i delete thread, the graphical functions working correctly and i can see the map with moving cars and the player on my screen. \nWhat can be a problem?\nThank you for the answers</p>\n"}, {"tags": ["c", "linux", "stack", "heap"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4858756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d88f37cacc425d12a120fb809293247d?s=128&d=identicon&r=PG&f=1", "display_name": "shim_mang", "link": "https://stackoverflow.com/users/4858756/shim-mang"}, "edited": false, "score": 0, "creation_date": 1476881194, "post_id": 40130347, "comment_id": 67533494, "body": "Aren&#39;t there any system call to find out the stack and heap size?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 193, "user_id": 4858756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d88f37cacc425d12a120fb809293247d?s=128&d=identicon&r=PG&f=1", "display_name": "shim_mang", "link": "https://stackoverflow.com/users/4858756/shim-mang"}, "edited": false, "score": 0, "creation_date": 1552114815, "post_id": 40130347, "comment_id": 96896831, "body": "@shim_mang The &quot;system call&quot;s used here are open(), read() and close() on /proc/PID/maps file."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 3, "last_activity_date": 1476876986, "last_edit_date": 1495540838, "creation_date": 1476876986, "answer_id": 40130347, "question_id": 40127980, "link": "https://stackoverflow.com/questions/40127980/get-the-size-of-heap-and-stack-per-process-in-linux/40130347#40130347", "title": "Get the size of heap and stack per process in Linux", "body": "<p>On Linux, you can read <code>/proc/[PID]/maps</code> and find <code>[heap]</code> and <code>[stack]</code> entries.</p>\n\n<p>But for the GLIBC heap implementations usually used on Linux, the \"heap\" consists of both memory obtained via <code>sbrk()</code> that shows up in the <code>/proc/[PID]/maps</code> file as <code>[heap]</code> <em>and</em> memory obtained via <code>mmap()</code> - see <a href=\"https://stackoverflow.com/questions/30542428/malloc-does-it-use-brk-or-mmap\">this quesiton</a>.  So the \"size\" of the heap is going to be very hard to determine with certainty.</p>\n\n<p>And the region labelled <code>[stack]</code> in the <code>maps</code> file is the stack for the main thread only.  Multithreaded processes will have multiple stacks, one for each thread.  And they will show up in the <code>maps</code> file as anonymous memory - maybe.  The application can control the memory used for a thread's stack via the use of <code>pthread_attr_setstack()</code> and set it to <em>any</em> memory the application might use.</p>\n"}, {"tags": [], "owner": {"reputation": 1049, "user_id": 6633483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rWKTg.jpg?s=128&g=1", "display_name": "Vijay S B", "link": "https://stackoverflow.com/users/6633483/vijay-s-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1476877051, "creation_date": 1476877051, "answer_id": 40130370, "question_id": 40127980, "link": "https://stackoverflow.com/questions/40127980/get-the-size-of-heap-and-stack-per-process-in-linux/40130370#40130370", "title": "Get the size of heap and stack per process in Linux", "body": "<p>You can get in the below file. You should be root user.</p>\n\n<pre><code>     /proc/&lt;pid&gt;/maps   \n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 4858756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d88f37cacc425d12a120fb809293247d?s=128&d=identicon&r=PG&f=1", "display_name": "shim_mang", "link": "https://stackoverflow.com/users/4858756/shim-mang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "accepted_answer_id": 40130347, "answer_count": 2, "score": 1, "last_activity_date": 1552103754, "creation_date": 1476870946, "last_edit_date": 1552103754, "question_id": 40127980, "link": "https://stackoverflow.com/questions/40127980/get-the-size-of-heap-and-stack-per-process-in-linux", "title": "Get the size of heap and stack per process in Linux", "body": "<p>I wanted to know the size of heap and stack per process in linux. Is there any way to find it?</p>\n\n<p>I found out that sbrk(0) will give me the end of heap. But how can I find the start of heap to get the heap size?</p>\n\n<p>Also on stack size is there any way to find the start of stack and current stack pointer address per process through any library calls or system calls?</p>\n"}, {"tags": ["c", "variables", "int", "max"], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 8, "last_activity_date": 1476870622, "creation_date": 1476870622, "answer_id": 40127866, "question_id": 40127828, "link": "https://stackoverflow.com/questions/40127828/how-can-i-write-a-program-to-find-maximum-value-of-integer-variable/40127866#40127866", "title": "How can I write a program to find maximum value of integer variable", "body": "<blockquote>\n  <p>As \u0131 know the maximum value of a integer variable is 2147483647</p>\n</blockquote>\n\n<p>That's a wrong assumption. The maximum value of an <code>int</code> can vary across systems. For example, on a 16-bit machine maximum value of <code>int</code> is not 2147483647.</p>\n\n<p>You don't need to find it yourself. There are pre-defined macros which you can use from <code>&lt;limits.h&gt;</code>. For example, <code>INT_MAX</code> represents the maximum value an <code>int</code> can hold.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7023473"}, "edited": false, "score": 0, "creation_date": 1476870984, "post_id": 40127874, "comment_id": 67525838, "body": "Okey it is kind of a homework but \u0131 cannot understand the homework but the answer is very explaining thanks for that."}, {"owner": {"reputation": 826, "user_id": 1850457, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/468bd8fa27de50de396bbc7193aaddd8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H", "link": "https://stackoverflow.com/users/1850457/peter-h"}, "edited": false, "score": 0, "creation_date": 1476871441, "post_id": 40127874, "comment_id": 67526143, "body": "@Kerrek You can find these programatically. The values returned should be specific to the environment and compiler used. See my example below."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 826, "user_id": 1850457, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/468bd8fa27de50de396bbc7193aaddd8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H", "link": "https://stackoverflow.com/users/1850457/peter-h"}, "edited": false, "score": 1, "creation_date": 1476874280, "post_id": 40127874, "comment_id": 67528274, "body": "@PeterH: Well, that&#39;s my answer, too. Whether you consider that &quot;finding&quot; is nitpicking, I suppose. I used &quot;finding&quot; in the sense of &quot;computing&quot;, rather than &quot;looking up&quot;. Reworded a bit."}, {"owner": {"reputation": 2139, "user_id": 2708971, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14372e0cd1f356805450309cc66d6705?s=128&d=identicon&r=PG", "display_name": "LauroSkr", "link": "https://stackoverflow.com/users/2708971/lauroskr"}, "edited": false, "score": 0, "creation_date": 1542655046, "post_id": 40127874, "comment_id": 93638164, "body": "@KerrekSb Check out this post computing the maximum value of int, might be interesting for you <a href=\"https://stackoverflow.com/questions/31897880/how-to-programmatically-determine-maximum-and-minimum-limit-of-int-data-in-c\" title=\"how to programmatically determine maximum and minimum limit of int data in c\">stackoverflow.com/questions/31897880/&hellip;</a>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 2139, "user_id": 2708971, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14372e0cd1f356805450309cc66d6705?s=128&d=identicon&r=PG", "display_name": "LauroSkr", "link": "https://stackoverflow.com/users/2708971/lauroskr"}, "edited": false, "score": 0, "creation_date": 1542670685, "post_id": 40127874, "comment_id": 93644349, "body": "@LauroSkr: Do you mean the question or the accepted answer? The code in the question has UB, and the answer, well, that basically just amount to <i>asserting</i> the value, right? I might as well just say <code>0x7FFFFFFF</code> and declare this the answer. It&#39;s not really a <i>computation</i>. How do you <i>know</i> it&#39;s the max?"}, {"owner": {"reputation": 1519, "user_id": 9373509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee85b2e77da0aaa34e30c9cf7749f2e1?s=128&d=identicon&r=PG&f=1", "display_name": "aafulei", "link": "https://stackoverflow.com/users/9373509/aafulei"}, "edited": false, "score": 0, "creation_date": 1577952421, "post_id": 40127874, "comment_id": 105288069, "body": "Hi @KerrekSB Thank you for your answer. I would like to upvote it. Could you please show the source to support your statement &quot;incrementing the largest integer has undefined behaviour&quot;?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1519, "user_id": 9373509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee85b2e77da0aaa34e30c9cf7749f2e1?s=128&d=identicon&r=PG&f=1", "display_name": "aafulei", "link": "https://stackoverflow.com/users/9373509/aafulei"}, "edited": false, "score": 0, "creation_date": 1578016014, "post_id": 40127874, "comment_id": 105312157, "body": "@aafulei: How about C11 6.5p5? The result (which for <code>+</code> is &quot;the sum&quot;) is not representable for its type."}, {"owner": {"reputation": 1519, "user_id": 9373509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee85b2e77da0aaa34e30c9cf7749f2e1?s=128&d=identicon&r=PG&f=1", "display_name": "aafulei", "link": "https://stackoverflow.com/users/9373509/aafulei"}, "edited": false, "score": 0, "creation_date": 1578023383, "post_id": 40127874, "comment_id": 105313366, "body": "@KerrekSB Thank you. That&#39;s what I am asking about. Answer upvoted. Quoting C11 (draft N1570) 6.5 (5) <code>If an exceptional condition occurs during the evaluation of an expression (that is, if the result  is  not  mathematically  de\ufb01ned  or  not  in  the  range  of  representable  values  for  its type), the behavior is unde\ufb01ned.</code>"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 7, "last_activity_date": 1476874295, "last_edit_date": 1476874295, "creation_date": 1476870647, "answer_id": 40127874, "question_id": 40127828, "link": "https://stackoverflow.com/questions/40127828/how-can-i-write-a-program-to-find-maximum-value-of-integer-variable/40127874#40127874", "title": "How can I write a program to find maximum value of integer variable", "body": "<p>You cannot <em>find</em> this value programatically by means of computation. There is no way to detect that you're \"at the end\", and incrementing the largest integer has undefined behaviour.</p>\n\n<p>That's why the largest and smallest values of integral types are made available <em>to you</em> by the standard library in the <a href=\"http://en.cppreference.com/w/c/types/limits\" rel=\"nofollow\"><code>&lt;limits.h&gt;</code></a> header. It is <em>your</em> responsibility to ensure that the results of operations fit into the desired types.</p>\n"}, {"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1476872208, "post_id": 40128155, "comment_id": 67526700, "body": "The question is not tagged with C++."}, {"owner": {"reputation": 826, "user_id": 1850457, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/468bd8fa27de50de396bbc7193aaddd8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H", "link": "https://stackoverflow.com/users/1850457/peter-h"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476872517, "post_id": 40128155, "comment_id": 67526912, "body": "@2501 .. Good Point. C Version provided"}], "tags": [], "owner": {"reputation": 826, "user_id": 1850457, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/468bd8fa27de50de396bbc7193aaddd8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H", "link": "https://stackoverflow.com/users/1850457/peter-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1476872636, "last_edit_date": 1476872636, "creation_date": 1476871377, "answer_id": 40128155, "question_id": 40127828, "link": "https://stackoverflow.com/questions/40127828/how-can-i-write-a-program-to-find-maximum-value-of-integer-variable/40128155#40128155", "title": "How can I write a program to find maximum value of integer variable", "body": "<p>The maximum and minimum values are defined in limits.\nYou can verify these using the following code.</p>\n\n<p>C Version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n\nint main()\n{\n    printf(\"Minimum Int value:%d\\n\", INT_MIN);\n    printf(\"Minimum Int value:%d\\n\", INT_MAX);\n    return 0;\n}\n</code></pre>\n\n<p>In C++</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    cout &lt;&lt; \"Minimum Int value:\" &lt;&lt; INT_MIN &lt;&lt; endl;\n    cout &lt;&lt; \"Maximum Int value:\" &lt;&lt; INT_MAX &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>An alternate (Non Visual Studio Version is below):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;limits.h&gt;\nusing namespace std;\nint main()\n{\n    std::cout &lt;&lt; \"Minimum Int value:\" &lt;&lt; INT_MIN &lt;&lt; endl;\n    std::cout &lt;&lt; \"Maximum Int value:\" &lt;&lt; INT_MAX &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The constant names E.G INT_MIN and INT_MAX can be found in the website below if you are interesting in the maximum values and minimum values of other data types.<br>\n<a href=\"http://www.cplusplus.com/reference/climits/\" rel=\"nofollow\">http://www.cplusplus.com/reference/climits/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12831196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91be2385d7d009d06db9d87214bd9d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/12831196/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1580715347, "last_edit_date": 1580715347, "creation_date": 1580714262, "answer_id": 60034692, "question_id": 40127828, "link": "https://stackoverflow.com/questions/40127828/how-can-i-write-a-program-to-find-maximum-value-of-integer-variable/60034692#60034692", "title": "How can I write a program to find maximum value of integer variable", "body": "<p>I know it is late, but if one has to calculate as an assignment, one can use <code>sizeof()</code> operator and this will give the number of bytes an integer holds.</p>\n\n<p><code>2^((number of bytes*8) - 1)</code> should give the max value of an integer.</p>\n\n<p>Of course <code>sizeof()</code>too is compile time just like <code>INT_MAX</code>. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7023473"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3187, "favorite_count": 0, "accepted_answer_id": 40127866, "answer_count": 4, "score": 2, "last_activity_date": 1580715347, "creation_date": 1476870520, "last_edit_date": 1477119509, "question_id": 40127828, "link": "https://stackoverflow.com/questions/40127828/how-can-i-write-a-program-to-find-maximum-value-of-integer-variable", "title": "How can I write a program to find maximum value of integer variable", "body": "<p>In C, how can I write a program to find the maximum value of an integer variable? \nAs far as I know the maximum value of an integer variable is 2147483647 but how can I represent this in a C program ?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 3, "creation_date": 1476869499, "post_id": 40127402, "comment_id": 67524664, "body": "<code>int *ptr = &amp;arr;</code> using ptr is undefined behavior. The same is true for <code>int (*ptr3)[5] = arr;</code> and <code>int (*ptr5)[5] = &amp;arr[0];</code> Just sayin."}, {"owner": {"reputation": 647, "user_id": 820800, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5cc442088681d55a565997ed002dc23f?s=128&d=identicon&r=PG", "display_name": "Ravi Chandra", "link": "https://stackoverflow.com/users/820800/ravi-chandra"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476869687, "post_id": 40127402, "comment_id": 67524818, "body": "Do you mean to say, it is not defined in the standard?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1476869711, "post_id": 40127402, "comment_id": 67524836, "body": "Compiling your program produces <a href=\"http://ideone.com/gWobeX\" rel=\"nofollow noreferrer\">lots of warnings</a>, which should be treated as errors."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1476869817, "post_id": 40127402, "comment_id": 67524916, "body": "@RaviChandra No, he means to say the results of listed operations cannot be predicted and are therefore undefined."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476869833, "post_id": 40127402, "comment_id": 67524929, "body": "Also please pick a single language."}, {"owner": {"reputation": 647, "user_id": 820800, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5cc442088681d55a565997ed002dc23f?s=128&d=identicon&r=PG", "display_name": "Ravi Chandra", "link": "https://stackoverflow.com/users/820800/ravi-chandra"}, "edited": false, "score": 0, "creation_date": 1476869936, "post_id": 40127402, "comment_id": 67525014, "body": "Here is the link to ideone <a href=\"http://ideone.com/1DzrU1\" rel=\"nofollow noreferrer\">ideone.com/1DzrU1</a>"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1476869999, "post_id": 40127402, "comment_id": 67525062, "body": "@RaviChandra undefined behavior means a very specific thing in C (and other language standards). In short it means that when you have undefined behavior in your program there is no way to predict any behavior of the program. It&#39;s simply not valid C anymore. The compiler is allowed to do anything."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1476870122, "post_id": 40127402, "comment_id": 67525163, "body": "@RaviChandra And this is what happens if you don&#39;t ignore warnings: <a href=\"https://ideone.com/bR2CFK\" rel=\"nofollow noreferrer\">ideone.com/bR2CFK</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1476870633, "last_edit_date": 1476870633, "creation_date": 1476869684, "answer_id": 40127542, "question_id": 40127402, "link": "https://stackoverflow.com/questions/40127402/automatic-type-casting-of-array-pointer/40127542#40127542", "title": "Automatic type casting of array pointer", "body": "<p>Well, no, <code>&amp;arr</code>, <code>arr</code>and <code>&amp;arr[0]</code> are not the same. To elaborate,</p>\n\n<ul>\n<li><p><code>&amp;arr</code> is the pointer to the array, the whole array. You can refer to the data type, for better understanding. <code>&amp;arr</code> is of type <code>int (*) [5]</code> here, i.e., the pointer to an array of 5 <code>int</code>s.</p></li>\n<li><p><code>arr</code> is the array name, which in <em>certain cases</em>, decay to the pointer to the first element of the array.</p></li>\n<li><code>&amp;arr[0]</code> is the address of the first element of the array, under all circumstances.</li>\n</ul>\n\n<p><strong><em>Suggestion:</em></strong> enable all compiler warnings and it should tell you where you are going wrong.</p>\n\n<p>So, according to the above understanding,</p>\n\n<pre><code> int *ptr = &amp;arr;\n</code></pre>\n\n<p>is wrong as they are not of compatible type. Same goes for</p>\n\n<pre><code>int (*ptr5)[5] = &amp;arr[0];\n</code></pre>\n\n<p>hence, any operation you try to perform with those variables (and their results, if any) are not defined.</p>\n"}, {"tags": [], "owner": {"reputation": 409, "user_id": 3415821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/698e7f6547b4565c18f25d9120ef4e48?s=128&d=identicon&r=PG&f=1", "display_name": "Hrishikesh Goyal", "link": "https://stackoverflow.com/users/3415821/hrishikesh-goyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1476869780, "creation_date": 1476869780, "answer_id": 40127569, "question_id": 40127402, "link": "https://stackoverflow.com/questions/40127402/automatic-type-casting-of-array-pointer/40127569#40127569", "title": "Automatic type casting of array pointer", "body": "<p>No, &amp;arr and  arr are not same in C as arr is pointer to first element of arr and &amp;arr is the pointer to arr itself. However arr and &amp;arr[0] are acts as same as they both point to first element of array(still they are not exactly same). In other way you can understand is <strong>arr and &amp;arr[0] point to a 4 byte location whereas &amp;arr point to 5x4 bytes location hence they are different.</strong></p>\n"}], "owner": {"reputation": 647, "user_id": 820800, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5cc442088681d55a565997ed002dc23f?s=128&d=identicon&r=PG", "display_name": "Ravi Chandra", "link": "https://stackoverflow.com/users/820800/ravi-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 2, "accepted_answer_id": 40127542, "answer_count": 2, "score": 2, "last_activity_date": 1476870633, "creation_date": 1476869349, "last_edit_date": 1495535550, "question_id": 40127402, "link": "https://stackoverflow.com/questions/40127402/automatic-type-casting-of-array-pointer", "title": "Automatic type casting of array pointer", "body": "<p>I am trying to understand pointers and arrays with the following program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int arr[] = {1, 2, 3, 4, 5};\n    int *ptr = &amp;arr;\n    int *ptr1 = arr;\n    int (*ptr2)[5] = &amp;arr;\n    int (*ptr3)[5] = arr;\n    int *ptr4 = &amp;arr[0];\n    int (*ptr5)[5] = &amp;arr[0]; \n    printf(\"%d %d %d %d %d %d\\n\",*(ptr+1), *(ptr1+1), *(ptr2+1), \n            *(ptr3+1), *(ptr4+1), *(ptr5+1));\n    return 0;\n}\n</code></pre>\n\n<p>In one of the previous questions, <a href=\"https://stackoverflow.com/questions/3842701/referring-to-arrays-as-pointers\">referring to arrays as pointers</a>, I read that <code>arr</code> is a pointer to the first element where as <code>&amp;arr</code> is a pointer to the entire array.</p>\n\n<p>If we do pointer arithmetic on <code>ptr</code> and <code>ptr1</code> as shown in the above program, they both yield the same results i.e both of them are pointers to integer because they are assigned to the variables of type <code>int *</code>.</p>\n\n<p>However I created a pointer to an array of 5 elements <code>ptr2</code> and assigned the value of &amp;arr. If I try to increment ptr2, it is incremented by 5 elements as expected. The behavior is similar in case of <code>ptr3</code>, <code>ptr4</code>, and <code>ptr5</code></p>\n\n<p>[Edit] When I do <code>int *ptr = &amp;arr</code> the pointer to the array is type casted to <code>int *</code> automatically? \nCan I assume that <code>&amp;arr, arr, &amp;arr[0]</code> expressions are actually same because they produce the same value? And the arithmetic on this value actually depends on the type of assigned variable?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1476868712, "post_id": 40127113, "comment_id": 67524109, "body": "You\u2019re modifying <code>imgpoint</code> at <code>imgpoint = strstr(\u2026);</code>. | Looks like you have no reason to <code>malloc</code> or <code>free</code> it at all, actually, or even declare it outside the loop unless you\u2019re stuck on C89 somehow."}, {"owner": {"reputation": 1250, "user_id": 6313992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766176ae92684010f7061da118223129?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Plaskota", "link": "https://stackoverflow.com/users/6313992/tomasz-plaskota"}, "edited": false, "score": 1, "creation_date": 1476868729, "post_id": 40127113, "comment_id": 67524126, "body": "Doing <code>imgpoint = strstr(line,&quot;data-cfsrc&quot;);</code> you assign to <code>imgpoint</code> stack memory"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476868818, "post_id": 40127113, "comment_id": 67524186, "body": "If you call <code>free</code> on a pointer that has not been returned by <code>malloc</code> (and that&#39;s what you are doing here), you get undefined behaviour."}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1476869202, "post_id": 40127113, "comment_id": 67524454, "body": "The variable &#39;imgpoint&#39; seems not necessary in your code. You can replace <code>imgpoint = strstr(line,&quot;data-cfsrc&quot;);strcpy(img,imgpoint);</code> by <code>strcpy(img,strstr(line,&quot;data-cfsrc&quot;));</code>."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1476868785, "creation_date": 1476868785, "answer_id": 40127171, "question_id": 40127113, "link": "https://stackoverflow.com/questions/40127113/c-why-does-returning-an-int-result-in-a-segmentation-fault/40127171#40127171", "title": "C - Why does returning an int result in a segmentation fault?", "body": "<p><a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow\"><code>free()</code></a> requires you to pass the same pointer that was returned by <code>malloc()</code> (or friends). But here, </p>\n\n<pre><code>imgpoint = strstr(line,\"data-cfsrc\");\n</code></pre>\n\n<p>you are reassigning it. Hence <em>undefined behaviour</em> when <code>free()</code> is called.</p>\n\n<p>From <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow\"><code>free()</code></a>:</p>\n\n<blockquote>\n  <p>The free() function frees the memory space pointed to by ptr, <strong>which\n         must have been returned by a previous call to malloc(), calloc(), or\n         realloc()</strong>.  Otherwise, or if free(ptr) has already been called\n         before, undefined behavior occurs.  If ptr is NULL, no operation is\n         performed.</p>\n</blockquote>\n\n<p>(emphasis added).</p>\n"}], "owner": {"reputation": 3, "user_id": 7041204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f609e9f516a51daadec2312017243ad?s=128&d=identicon&r=PG&f=1", "display_name": "Gerben Beukema", "link": "https://stackoverflow.com/users/7041204/gerben-beukema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1476868818, "accepted_answer_id": 40127171, "answer_count": 1, "score": 0, "last_activity_date": 1476870298, "creation_date": 1476868641, "last_edit_date": 1476870298, "question_id": 40127113, "link": "https://stackoverflow.com/questions/40127113/c-why-does-returning-an-int-result-in-a-segmentation-fault", "closed_reason": "Duplicate", "title": "C - Why does returning an int result in a segmentation fault?", "body": "<p>I'm working on a small private project that reads some links from an html-page source. I read the html file line by line and then check if that line contains \"data-cfsrc\", which always preceeds a link that I want to read. This works fine, until I try to free the pointer that points to where the keyword (\"data-cfsrc\") starts.</p>\n\n<p>I've tried freeing it on multiple points and it only works when I haven't done anything with it yet.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>            FILE *fp_w, *fp_r;\n            fp_r = fopen(\"page.html\",\"r\");\n            fp_w = fopen(\"bg_list.txt\",\"a\");\n            char line[1024],img[512],c;\n            //char *imgpoint = malloc(sizeof(char)*512);\n            char *imgpoint;\n            int i,imgcount = 0;\n\n            while(imgcount&lt;15){\n                    // read line\n                    i = 0;\n                    do{\n                            c = fgetc(fp_r);\n                            line[i] = c;\n                            i++;\n                    }while(c!='\\n');\n                    line[i] = '\\0';\n\n                    if(strstr(line,\"data-cfsrc\") != NULL){\n                            imgpoint = strstr(line,\"data-cfsrc\");\n                            strcpy(img,imgpoint);\n                            c = 0;\n                            for(i=0; c!=34; i++){\n                                    img[i] = img[i+12];\n                                    c = img[i+13];\n                            }\n                            img[i] = '\\0';\n                            fprintf(fp_w,\"%s\\n\",img);\n                            imgcount++;\n                            printf(\"imgcount = %d\\n\",imgcount);\n                    }\n            }\n            fclose(fp_r);\n            fclose(fp_w);\n            //free(imgpoint);\n\n            return 0;\n</code></pre>\n\n<p>EDIT: as mentioned, I removed the free() entirely, but now my program still results in a Segmentation fault when return is called.</p>\n\n<p>EDIT 2: completely ommitted the impoint pointer. Everything still works, but I still get a Segmentation fault on return.</p>\n"}, {"tags": ["c", "linux-kernel", "atomic", "compare-and-swap"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1476872883, "post_id": 40127017, "comment_id": 67527156, "body": "I&#39;m not sure why this was down-voted, or why they think it is opinion-based, but I think this is a good question. I, too see no alternative to <code>cmpxchg</code>."}, {"owner": {"reputation": 10275, "user_id": 1202136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9c7ff368c2bf18f714e8bdb6acf28c6a?s=128&d=identicon&r=PG", "display_name": "user1202136", "link": "https://stackoverflow.com/users/1202136/user1202136"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1476976160, "post_id": 40127017, "comment_id": 67585213, "body": "@Tsyvarev I was referring to good performance. The loop around <code>cmpxchg</code> feels to me that it defies the whole purpose of atomic operations and that the code behaves as if a spinlock was used."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3629375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a32a2791ae854cf9d440a139d6b33c?s=128&d=identicon&r=PG&f=1", "display_name": "Radon", "link": "https://stackoverflow.com/users/3629375/radon"}, "edited": false, "score": 0, "creation_date": 1476875612, "post_id": 40128541, "comment_id": 67529332, "body": "You can express min with addition/subtraction and bitwise operations. Take a look here: <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 93, "user_id": 3629375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a32a2791ae854cf9d440a139d6b33c?s=128&d=identicon&r=PG&f=1", "display_name": "Radon", "link": "https://stackoverflow.com/users/3629375/radon"}, "edited": false, "score": 0, "creation_date": 1476879176, "post_id": 40128541, "comment_id": 67531985, "body": "@Radon: Thanks for the point, you are right. Actually, such expressions are irrelevant for &quot;atomic&quot; case: it should be <i>single-instruction</i> expression for being atomic. I have fixed the answer, so it shouldn&#39;t be any misinterpretation."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": false, "score": 3, "last_activity_date": 1476878880, "last_edit_date": 1476878880, "creation_date": 1476872360, "answer_id": 40128541, "question_id": 40127017, "link": "https://stackoverflow.com/questions/40127017/how-to-implement-atomic-min/40128541#40128541", "title": "How to implement atomic_min?", "body": "<p><em>Atomic arithmetic instructions</em>, provided by architectures, are mostly limited with addition/substruction and bitwise operations. (At least, Linux kernel provides only those operations for arch-independent code).</p>\n\n<p>Because <code>min</code> cannot be expressed via <em>single</em> addition, substruction or bitwise operations, for implement \"atomic_min\" there is no other choice than using of <code>cmpxchg</code>.</p>\n"}], "owner": {"reputation": 10275, "user_id": 1202136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9c7ff368c2bf18f714e8bdb6acf28c6a?s=128&d=identicon&r=PG", "display_name": "user1202136", "link": "https://stackoverflow.com/users/1202136/user1202136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476878880, "creation_date": 1476868366, "last_edit_date": 1476869797, "question_id": 40127017, "link": "https://stackoverflow.com/questions/40127017/how-to-implement-atomic-min", "title": "How to implement atomic_min?", "body": "<p>I need to implement an <code>atomic_min</code> function, that is equivalent to:</p>\n\n<pre><code>static void atomic_min(u64 *ptr, u64 value)                                        \n{\n    enter critical section\n    *ptr = min(*ptr, value);\n    exit critical section                                                                               \n}\n</code></pre>\n\n<p>This could be implement it using <code>cmpxchg</code>:</p>\n\n<pre><code>static void atomic_min(u64 *ptr, u64 value)                                        \n{                                                                                \n    u64 old, new;                                                            \n    do {                                                                     \n        old = *ptr;                                                        \n        new = min(old, value);                                           \n    } while (cmpxchg(ptr, old, new) != old);\n}\n</code></pre>\n\n<p>which looks pretty inefficient to me. Is there a better way to implement <code>atomic_min</code>?</p>\n"}, {"tags": ["c", "input", "double", "scanf"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1476868087, "post_id": 40126821, "comment_id": 67523661, "body": "<i>Always</i> check the return value of <code>scanf</code> family functions. Also, please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, or you will only get useless guessing from others as a result."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1476868488, "post_id": 40126821, "comment_id": 67523950, "body": "What exactly is your input ? Remove the <code>\\n</code> from the <code>scanf</code> format specifier."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1476868857, "post_id": 40126821, "comment_id": 67524216, "body": "It works for me, though you have to type something else after the two input doubles due to the <code>\\n</code> in the <code>scanf</code> format string."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1476869112, "post_id": 40126821, "comment_id": 67524394, "body": "It works. Take a look <a href=\"http://ideone.com/bC2KbM\" rel=\"nofollow noreferrer\">here</a>"}], "owner": {"reputation": 35, "user_id": 4116671, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96983d7d9aeff67ae1a824577a85db4?s=128&d=identicon&r=PG&f=1", "display_name": "Kate", "link": "https://stackoverflow.com/users/4116671/kate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489963859, "creation_date": 1476867906, "last_edit_date": 1476868801, "question_id": 40126821, "link": "https://stackoverflow.com/questions/40126821/scanf-with-double-in-c-returns-0-00000", "title": "Scanf with double in C returns 0.00000", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n\ndouble a, b;\n\n    scanf(\"%lf %lf\\n\", &amp;a, &amp;b);\n    printf(\"%lf%lf\\n\", a, b);\n}\n</code></pre>\n\n<p>Why does it always return 0.0000 regardless of what I write?</p>\n"}, {"tags": ["c", "multithreading", "thread-safety"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476868149, "post_id": 40126747, "comment_id": 67523705, "body": "There is no data race here."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476868243, "post_id": 40126747, "comment_id": 67523770, "body": "So there is no interaction possible between <code>foo</code> and <code>bar</code>, right? At first sight I don&#39;t see any problems here."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476868420, "post_id": 40126747, "comment_id": 67523888, "body": "@MichaelWalz Good point. <code>foo</code> and <code>bar</code> share some buffer (it is part of the input parameters). But the buffers are allocated separately for the 2 threads, and <code>foo</code> and <code>bar</code> are never called at the same time <i>within the same thread</i>. (I am double checking)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476868471, "post_id": 40126747, "comment_id": 67523930, "body": "@Antonio Well then they don&#39;t share the buffer."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1476868501, "post_id": 40126747, "comment_id": 67523957, "body": "The code either has a bug, or you are holding unwarranted assumptions, or both."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476869781, "post_id": 40126747, "comment_id": 67524890, "body": "I don&#39;t understand what you are asking here... Function pointers, like any variables, may or may not be thread-safe. If they are written to by one thread while another thread uses the same variable, they need to be protected. As for whether the function called by a function pointer is thread-safe or not, that entirely depends on the implementation of that function. It has nothing to do with the function pointer itself."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476870357, "post_id": 40126747, "comment_id": 67525364, "body": "@Lundin Despite having a simple answer (there&#39;s no difference between a normal function call and a function call through its pointer), the question is very clear."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476870881, "post_id": 40126747, "comment_id": 67525762, "body": "@Antonio Perhaps it would be if you could clarify if the question is about thread safety of function pointers, or thread safety of functions called by function pointers."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476873735, "post_id": 40126747, "comment_id": 67527826, "body": "@Lundin I guess both are relevant, especially the second I would say"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476874256, "post_id": 40126747, "comment_id": 67528256, "body": "The thread callback functions themselves are called through function pointers..."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1476868261, "creation_date": 1476868261, "answer_id": 40126970, "question_id": 40126747, "link": "https://stackoverflow.com/questions/40126747/are-function-pointers-thread-safe/40126970#40126970", "title": "Are function pointers thread safe?", "body": "<p>Calling/using function pointer is no different to a using a function with respect to thread-safety.\nIn the example, you posted there's no thread-safety issues (under the conditions you have stated).</p>\n\n<p>Assuming you still have problems related to thread-safety, some suggestions:  </p>\n\n<ul>\n<li><p>Check if there's any data race in your code.  </p></li>\n<li><p>Check if there are any static variables involved through headers, library functions, third-party functions etc (I know you have said none but still it's possible you missed some).  </p></li>\n<li><p>Run your code under <a href=\"http://valgrind.org/docs/manual/hg-manual.html\" rel=\"nofollow\">Helgrind</a>.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1476876835, "post_id": 40129339, "comment_id": 67530307, "body": "Isn&#39;t it that the function according to my example is thread safe? (See also notes under it)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1476877288, "post_id": 40129339, "comment_id": 67530632, "body": "@Antonio The &quot;test&quot; function does nothing with shared resources so there is no reason why it would be unsafe. Whether that example is thread-safe or not only depends on if the two called functions are thread-safe."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1476874362, "creation_date": 1476874362, "answer_id": 40129339, "question_id": 40126747, "link": "https://stackoverflow.com/questions/40126747/are-function-pointers-thread-safe/40129339#40129339", "title": "Are function pointers thread safe?", "body": "<p>There is no difference between function pointers and regular variables in terms of thread-safety. If a variable is shared by several threads and at least on thread writes to the variable, you need to protect it.</p>\n\n<p>Where a function is called from has no relevance for that function's thread-safety. The only thing that matters is which thread that executes the function. If several threads call the same function, no matter how they do it, then that function needs to be thread-safe.</p>\n"}], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 40126970, "answer_count": 2, "score": 2, "last_activity_date": 1476874362, "creation_date": 1476867720, "last_edit_date": 1495541204, "question_id": 40126747, "link": "https://stackoverflow.com/questions/40126747/are-function-pointers-thread-safe", "title": "Are function pointers thread safe?", "body": "<p>(This follows <a href=\"https://stackoverflow.com/questions/40125761/are-static-inline-functions-thread-safe\">Are static inline functions thread safe?</a>)</p>\n\n<p>Scenario: I have written a big piece of code, running on 2 parallel threads, which are identical in term of code and just process different data. I am seeing non-deterministic results. If I disable one of the 2 threads, the results become deterministic. Within this code I am using some function pointers, and I would like to understand if they could be a possible cause of my problem.</p>\n\n<p>Are function pointers thread-safe in C? Said the other way around, if they have no static variable inside, but only some local variables and the input parameters, will a simultaneous call from the 2 threads cause unpredictable behaviour?</p>\n\n<p>Example code:</p>\n\n<pre><code>void foo(int param1, int* out);\nvoid bar(int param1, int* out);\n\ntypedef void (*fooBarFuncP_t)(int, int*);\n\nstatic inline fooBarFuncP_t getFooBar(int selection) {\n    switch (selection) {\n        case 0:\n            return &amp;foo;\n        case 1:\n        default:\n            return &amp;bar;\n    }\n}\n\nvoid test(int selection, int x, int* y) {\n    (*getFooBar(selection))(x,y);\n}\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li>In their implementation, <code>foo</code> and <code>bar</code> have only local, non static variables</li>\n<li><code>y</code> is allocated separately for the 2 threads by the caller of test</li>\n</ul>\n\n<p>Is this thread-safe? If not, what solutions exist for this problem?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1476866504, "post_id": 40126246, "comment_id": 67522638, "body": "Your test strings are local into function, not available outside the function scope."}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 1, "creation_date": 1476867182, "post_id": 40126246, "comment_id": 67523082, "body": "You&#39;d use <code>strdup</code> to assign test and test2 with your string"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7040879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aed67a8e9ac381913bb73a385ce930d?s=128&d=identicon&r=PG&f=1", "display_name": "aurel94100", "link": "https://stackoverflow.com/users/7040879/aurel94100"}, "edited": false, "score": 0, "creation_date": 1476868691, "post_id": 40126376, "comment_id": 67524090, "body": "Thank you very much. So the tab_string can&#39;t contain string initialize in create_tab_string ? Even if I use strdup ?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 41, "user_id": 7040879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aed67a8e9ac381913bb73a385ce930d?s=128&d=identicon&r=PG&f=1", "display_name": "aurel94100", "link": "https://stackoverflow.com/users/7040879/aurel94100"}, "edited": false, "score": 0, "creation_date": 1476868961, "post_id": 40126376, "comment_id": 67524281, "body": "You can use <code>strdup</code>, but it doubles the memory in this specific case with string literals. Can be useful in other scenarios."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1476867456, "last_edit_date": 1476867456, "creation_date": 1476866770, "answer_id": 40126376, "question_id": 40126246, "link": "https://stackoverflow.com/questions/40126246/array-of-string-in-c/40126376#40126376", "title": "Array of string in c", "body": "<p>Your function should be</p>\n\n<pre><code>void create_tab_string(char chaine[], char*** p_tab_string) {\n    char *test = \"Hey\";\n    char *test2= \"blabla\";\n\n    // Allocation\n    *p_tab_string = malloc(NB_STRING*sizeof(char*));\n\n    // Test\n    (*p_tab_string)[0] = test;\n    printf(\"%s \\n\", (*p_tab_string)[0]);\n\n    (*p_tab_string)[1] = test2;\n    printf(\"I have the second string \\n\");\n    printf(\"%s \\n\", (*p_tab_string)[1]);\n}\n</code></pre>\n\n<p>First of all address of your test c-strings (arrays) are local to function and not accessible outside.\nAs you can see I changed them to simple pointers to string literals, so the strings literals are accessible outside the function.</p>\n\n<p>Second thing are the way you are dereferencing your pointers. </p>\n\n<p>Using <code>*p_tab_string[1]</code> you are dereferencing the second item of <code>p_tab_string</code> that does not exists.</p>\n\n<p>Using <code>(*p_tab_string)[1]</code> you can dereference the second item of thing pointed by <code>*p_tab_string</code>, that is <code>tab_string</code> declare into <code>main</code></p>\n"}, {"tags": [], "owner": {"reputation": 3268, "user_id": 182634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5b602ab0bc363e3e990f2e904b671d?s=128&d=identicon&r=PG", "display_name": "eyalm", "link": "https://stackoverflow.com/users/182634/eyalm"}, "is_accepted": false, "score": 0, "last_activity_date": 1476867077, "creation_date": 1476867077, "answer_id": 40126486, "question_id": 40126246, "link": "https://stackoverflow.com/questions/40126246/array-of-string-in-c/40126486#40126486", "title": "Array of string in c", "body": "<p>You have a problem of operator precedence.</p>\n\n<p>You need to use:</p>\n\n<pre><code>(*p_tab_string)[1]\n</code></pre>\n\n<p>and not <code>*p_tab_string[1]</code>.</p>\n\n<p>Also, as written in the comments your test strings are local into function, not available outside the function scope. You need to either duplicate them or use pointers.</p>\n"}], "owner": {"reputation": 41, "user_id": 7040879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aed67a8e9ac381913bb73a385ce930d?s=128&d=identicon&r=PG&f=1", "display_name": "aurel94100", "link": "https://stackoverflow.com/users/7040879/aurel94100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1476867456, "creation_date": 1476866380, "question_id": 40126246, "link": "https://stackoverflow.com/questions/40126246/array-of-string-in-c", "title": "Array of string in c", "body": "<p>Okay so as you can see I have a problem. I am trying to create an array of string in C with a function called tab_string. If you try to run the following code you will see that I have a segfault with the test number two and I don't know why because the first test work. Thanks in advance</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define NB_STRING 2\n\nvoid create_tab_string(char chaine[], char*** p_tab_string) {\n    char test[] = \"Hey\";\n    char test2[] = \"blabla\";\n\n    // Allocation \n    *p_tab_string = (char **)(malloc(NB_STRING*sizeof(char*)));\n\n    // Test\n    *p_tab_string[0] = test;\n    printf(\"%s \\n\", *p_tab_string[0]);\n\n    // Test 2 ERROR ?????\n    *p_tab_string[1] = test2;\n    printf(\"I have the second string \\n\");\n    printf(\"%s \\n\", *p_tab_string[1]);  \n\n}\n\n\n\n\nint main() {\n    int i;\n    char string_test[] = \"I am a test\";\n    char **tab_string;\n    create_tab_string(string_test, &amp;tab_string);\n    for(i = 0; i &lt; NB_STRING; i++)\n        printf(\"%s \\n\", tab_string[i]);\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "runtime", "element", "offset"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1476865918, "post_id": 40126046, "comment_id": 67522222, "body": "<code>const int id_arr={ ID_A, ID_B, ID_C, };</code> .....?????"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1476866097, "post_id": 40126046, "comment_id": 67522333, "body": "If I&#39;m getting you: no you can&#39;t know the item index of a specific value into array with preprocesor"}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1476867760, "post_id": 40126280, "comment_id": 67523445, "body": "Some nitpicks: 1. There is no reason to avoid using <i>constants</i> which are global in C. 2. Your function is basically same that OP wrote, with different parameters. 3. Please don&#39;t use single word lines. If you need to emphasize something, use <i>italics</i> or <b>bold</b>."}], "tags": [], "owner": {"reputation": 6743, "user_id": 6919895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qqkN_JOgCvM/AAAAAAAAAAI/AAAAAAAAABE/m4r_i_2yiy8/photo.jpg?sz=128", "display_name": "Treycos", "link": "https://stackoverflow.com/users/6919895/treycos"}, "is_accepted": false, "score": 1, "last_activity_date": 1476867835, "last_edit_date": 1476867835, "creation_date": 1476866460, "answer_id": 40126280, "question_id": 40126046, "link": "https://stackoverflow.com/questions/40126046/in-c-how-to-find-an-offset-of-element-in-array/40126280#40126280", "title": "In C, how to find an offset of element in array", "body": "<p>Avoid using macros for that.<br>\nAnd you forgot to define <code>id_arr_num</code>.<br>\nNo, there is no way of knowing this index before runtime, and avoid using global values as much as possible.  </p>\n\n<p>This function will give you the index of the variable you're looking for:</p>\n\n<pre><code>int get_offset(id, arr, size){\n   for(i = 0;i &lt; size;++i)\n       if(id == arr[i]) return i;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 2, "last_activity_date": 1476867268, "creation_date": 1476867268, "answer_id": 40126555, "question_id": 40126046, "link": "https://stackoverflow.com/questions/40126046/in-c-how-to-find-an-offset-of-element-in-array/40126555#40126555", "title": "In C, how to find an offset of element in array", "body": "<p>Rather than using ID's directly, use indexes that themselves are offsets:</p>\n\n<pre><code>enum {\n    IDX_A,\n    IDX_B,\n    IDX_C,\n    IDX_COUNT\n};\nconst int id_arr={ 5, 7, 9 };\n/* Error checking to make sure enum and array have same number of elements (from assert.h) */\nstatic_assert((sizeof id_arr / sizeof *id_arr) == IDX_COUNT, \"Enum/array mismatch\");\n</code></pre>\n\n<p>Usage is simple:</p>\n\n<pre><code>id = id_arr[IDX_A];\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 1788782, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/35c336b7d58d4bd72449c759e0823295?s=128&d=identicon&r=PG", "display_name": "aaa SA", "link": "https://stackoverflow.com/users/1788782/aaa-sa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481186765, "creation_date": 1476865841, "last_edit_date": 1476865877, "question_id": 40126046, "link": "https://stackoverflow.com/questions/40126046/in-c-how-to-find-an-offset-of-element-in-array", "title": "In C, how to find an offset of element in array", "body": "<pre><code>#define ID_A 5\n#define ID_B 7\n#define ID_C 9\nconst int id_arr={ ID_A, ID_B, ID_C, };\n</code></pre>\n\n<p>I know if I need to know the offset of ID_C in id_arr,\nI can use a simple function like</p>\n\n<pre><code>int get_offset(id){\n   for(i=0;i&lt;id_arr_num;++i){\n       if(id==id_arr[i]) return i;\n   }\n}\n</code></pre>\n\n<p>But arr is const, \nso I can know offset of ID_C will be 2 before runtime,\nis any way to use macro or other way to know the offset before c runtime?</p>\n"}, {"tags": ["c", "malloc", "mmap"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1476867156, "post_id": 40126041, "comment_id": 67523063, "body": "Just a wild guess, if you use <code>4096</code> or <code>8192</code> or some other power of two instead of <code>SIZEOF(myStruct)</code>, does it work ?"}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 1, "creation_date": 1476867687, "post_id": 40126041, "comment_id": 67523388, "body": "I think the error is from your <code>SIZEOF()</code>. and you should add <code>MAP PRIVATE</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1476867838, "post_id": 40126041, "comment_id": 67523491, "body": "the <code>SIZEOF()</code>  is not correct  the actual item is spelled <code>sizeof()</code>  I.E. all lower case."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1476867935, "post_id": 40126041, "comment_id": 67523561, "body": "the first parameter to <code>mmap()</code> is an address pointer, not an integer,  Strongly suggest using <code>NULL</code> rather than <code>0</code>"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 4, "creation_date": 1476871828, "post_id": 40126041, "comment_id": 67526416, "body": "Please, <i>always</i> make a complete, compilable example - an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Always."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5394475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aac13ae85119c8615cb3491947bde2cf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kelly", "link": "https://stackoverflow.com/users/5394475/sean-kelly"}, "edited": false, "score": 0, "creation_date": 1476883032, "post_id": 40128502, "comment_id": 67534872, "body": "This was it, I misread the manual! I started with MAP_PRIVATE, moved to MAP_ANONYMOUS, needed both... Thanks a lot."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": true, "score": 7, "last_activity_date": 1476885262, "last_edit_date": 1495540845, "creation_date": 1476872269, "answer_id": 40128502, "question_id": 40126041, "link": "https://stackoverflow.com/questions/40126041/using-mmap-instead-of-malloc/40128502#40128502", "title": "Using mmap() instead of malloc()", "body": "<p>You need to specify MAP_PRIVATE in your flags.</p>\n\n<pre><code>myStruct * entry = (myStruct *)mmap(0, SIZEOF(myStruct),\n        PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);\n</code></pre>\n\n<p>From the <a href=\"https://linux.die.net/man/2/mmap\" rel=\"nofollow noreferrer\">manual page</a>:</p>\n\n<blockquote>\n  <p>The flags argument determines whether updates to the mapping are\n  visible to other processes mapping the same region, and whether\n  updates are carried through to the underlying file. This behavior is\n  determined by <strong>including exactly one</strong> of the following values in flags:</p>\n</blockquote>\n\n<p>You need exactly one of the flags MAP_PRIVATE or MAP_SHARED - but you didn't give either of them.</p>\n\n<p>A complete example:</p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n    int a;\n    int b;\n} myStruct;\n\nint main()\n{\n    myStruct * entry = (myStruct *)mmap(0, sizeof(myStruct),\n            PROT_READ|PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);\n\n    if (entry == MAP_FAILED) {\n        printf(\"Map failed.\\n\");\n    }\n    else {\n        entry-&gt;a = 4;\n        printf(\"Success: entry=%p, entry-&gt;a = %d\\n\", entry, entry-&gt;a);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>(The above, without <code>MAP_PRIVATE</code> of course, is a good example of what you might have provided as a an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. This makes it much easier for others to help you, since they can see exactly what you've done, and test their proposed solutions. You should always provide an MCVE).</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 3, "last_activity_date": 1476873013, "creation_date": 1476873013, "answer_id": 40128797, "question_id": 40126041, "link": "https://stackoverflow.com/questions/40126041/using-mmap-instead-of-malloc/40128797#40128797", "title": "Using mmap() instead of malloc()", "body": "<p>The man page for <code>mmap()</code> says that you must specify exactly one of <code>MAP_SHARED</code> and <code>MAP_PRIVATE</code> in the <code>flags</code> argument.  In your case, to act like <code>malloc()</code>, you'll want <code>MAP_PRIVATE</code>:</p>\n\n<pre><code>myStruct *entry = mmap(0, sizeof *entry,\n                       PROT_READ|PROT_WRITE,\n                       MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);\n</code></pre>\n\n<p>(I've also made this more idiomatic C by omitting the harmful cast and matching the <code>sizeof</code> to the actual variable rather than its type).</p>\n"}], "owner": {"reputation": 133, "user_id": 5394475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aac13ae85119c8615cb3491947bde2cf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kelly", "link": "https://stackoverflow.com/users/5394475/sean-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1850, "favorite_count": 2, "accepted_answer_id": 40128502, "answer_count": 2, "score": 7, "last_activity_date": 1476885262, "creation_date": 1476865819, "last_edit_date": 1476866961, "question_id": 40126041, "link": "https://stackoverflow.com/questions/40126041/using-mmap-instead-of-malloc", "title": "Using mmap() instead of malloc()", "body": "<p>I am trying to complete an exercise that is done with system calls and need to allocate memory for a struct *. My code is:</p>\n\n<pre><code>myStruct * entry = (myStruct *)mmap(0, SIZEOF(myStruct), PROT_READ|PROT_WRITE,\nMAP_ANONYMOUS, -1, 0);\n</code></pre>\n\n<p>To clarify, I cannot use <code>malloc()</code> but can use <code>mmap()</code>. I was having no issues with this on Windows in Netbeans, now however I'm compiling and running from command line on Ubuntu I am getting \"Segmentation Fault\" each time I try to access it.</p>\n\n<p>Is there a reason why it will work on one and not the other, and is <code>mmap()</code> a valid way of allocating memory in this fashion? My worry was I was going to be allocating big chunks of memory for each <code>mmap()</code> call initially, now I just cannot get it to run.</p>\n\n<p>Additionally, the error returned my mmap is 22 - Invalid Argument (I did some troubleshooting while writing the question so the error check isn't in the above code). Address is 0, the custom <code>SIZEOF()</code> function works in other mmap arguments, I am using <code>MAP_ANONYMOUS</code> so the <code>fd</code> and <code>offset</code>parameters must -1 and 0 respectively.</p>\n\n<p>Is there something wrong with the <code>PROT_READ|PROT_WRITE</code> sections?</p>\n"}, {"tags": ["c", "function", "overloading"], "comments": [{"owner": {"reputation": 11220, "user_id": 2609288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3634e5c231c72e362f00ae39b637734f?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/2609288/baldrick"}, "edited": false, "score": 0, "creation_date": 1476865904, "post_id": 40126026, "comment_id": 67522204, "body": "You can&#39;t do that in C. It doesn&#39;t do this I&#39;m afraid. You have to declare separate functions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1476866147, "post_id": 40126026, "comment_id": 67522368, "body": "You might be able to get away with <code>_Generic</code> in C11, though I haven&#39;t tried it for an array."}], "answers": [{"comments": [{"owner": {"reputation": 6483, "user_id": 87624, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d438b04fb3d55d8c79d3ef33f9d268d1?s=128&d=identicon&r=PG", "display_name": "nourdine", "link": "https://stackoverflow.com/users/87624/nourdine"}, "edited": false, "score": 0, "creation_date": 1476866299, "post_id": 40126164, "comment_id": 67522472, "body": "Wow... that is impressive."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1476866437, "last_edit_date": 1476866437, "creation_date": 1476866159, "answer_id": 40126164, "question_id": 40126026, "link": "https://stackoverflow.com/questions/40126026/does-some-form-of-function-overloading-exist-in-c/40126164#40126164", "title": "Does some form of function overloading exist in C?", "body": "<p>C11 introduced <a href=\"http://en.cppreference.com/w/c/language/generic\" rel=\"nofollow\">generic selections</a> to emulate overloading:</p>\n\n<pre><code>#define first(X)          \\\n    _Generic((X),         \\\n        int* : first_int, \\\n        char*: first_char \\\n    )(X)\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/3b6f3c6b506a8e0b\" rel=\"nofollow\">See it live on Coliru</a></p>\n"}], "owner": {"reputation": 6483, "user_id": 87624, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d438b04fb3d55d8c79d3ef33f9d268d1?s=128&d=identicon&r=PG", "display_name": "nourdine", "link": "https://stackoverflow.com/users/87624/nourdine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1476869251, "accepted_answer_id": 40126164, "answer_count": 1, "score": 0, "last_activity_date": 1476866437, "creation_date": 1476865780, "last_edit_date": 1476866347, "question_id": 40126026, "link": "https://stackoverflow.com/questions/40126026/does-some-form-of-function-overloading-exist-in-c", "closed_reason": "Duplicate", "title": "Does some form of function overloading exist in C?", "body": "<p>Let's assume I want to create a function <code>first</code> that returns the first element of an array in C. Obviously I want to create something that accounts for all types.</p>\n\n<p>I would start with this:</p>\n\n<pre><code>int first(int list[]) {\n   return list[0];\n}\n</code></pre>\n\n<p>Which works. Obviously...</p>\n\n<p>I would now like to do the same for <code>char</code></p>\n\n<pre><code>char first(char list[]) {\n   return list[0];\n}\n</code></pre>\n\n<p>Which does not compile as there is already a <code>first</code> function in the program.</p>\n\n<p>How do you C guys handle this kind of scenarios?</p>\n\n<p>Is one forced to go with different names?</p>\n\n<pre><code>int first_int(int list[]) {\n   return list[0];\n}\n\nchar first_char(char list[]) {\n   return list[0];\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "thread-safety"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1476865219, "post_id": 40125761, "comment_id": 67521764, "body": "Things that aren&#39;t thread safe are things that can change.   Code doesn&#39;t change (under normal circumstances), but variables often do."}], "answers": [{"comments": [{"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1476865406, "post_id": 40125796, "comment_id": 67521894, "body": "Results are different. I do write in the parameters, but they are address different for the 2 threads, or addresses of variables local to another function, so I guess it should be safe. Do you have a quick example of code that could lead to a data race?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1476865484, "post_id": 40125796, "comment_id": 67521951, "body": "&quot;Addresses of variables local to another function&quot;? Not a function that is the parent of threads, I hope? That&#39;d make the address the same in both threads, of course. But I&#39;m just blindly walking in the dark here, obviously."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1476865810, "post_id": 40125796, "comment_id": 67522145, "body": "@Antonio you may have race conditions which are triggered differently when you have inlined the code because if the code is inlin ed it maybe slightly faster and therefore race conditions may be triggered differently."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476866056, "post_id": 40125796, "comment_id": 67522298, "body": "@MichaelWalz I don&#39;t understand your statement. In my case, the threads share only the code, not the data, and I don&#39;t see which possible race could be triggered."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1476866294, "post_id": 40125796, "comment_id": 67522467, "body": "@Antonio OK, I misunderstood something. Disregard the comment."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1476865087, "creation_date": 1476865087, "answer_id": 40125796, "question_id": 40125761, "link": "https://stackoverflow.com/questions/40125761/are-static-inline-functions-thread-safe/40125796#40125796", "title": "Are static inline functions thread safe?", "body": "<p>No, that really should be fine.</p>\n\n<p>Whether or not a function is inline or not shouldn't affect this, since it's all just code anyway.</p>\n\n<p>Is the behaviour non-deterministic in terms of actual in-memory data (results), or \"just\" things like timing and ordering of events?</p>\n\n<p>Do you perhaps write to the parameters, accidentally creating a data race?</p>\n"}, {"tags": [], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1476865844, "last_edit_date": 1476865844, "creation_date": 1476865443, "answer_id": 40125913, "question_id": 40125761, "link": "https://stackoverflow.com/questions/40125761/are-static-inline-functions-thread-safe/40125913#40125913", "title": "Are static inline functions thread safe?", "body": "<blockquote>\n  <p>Are static inline functions thread-safe in C?</p>\n</blockquote>\n\n<p>Yes. Static inlined functions have no effect on thread safety. But if you are using Static variables then you have to be careful.</p>\n\n<blockquote>\n  <p>if they have no static variable inside, but only some local variables\n  and the input parameters, will a simultaneous call from the 2 threads\n  cause unpredictable behaviour?</p>\n</blockquote>\n\n<p>If you are using local variable then you will not have any issue.\nBecause every thread have it's own stack memory.</p>\n"}], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 40125796, "answer_count": 2, "score": 0, "last_activity_date": 1476865844, "creation_date": 1476864972, "question_id": 40125761, "link": "https://stackoverflow.com/questions/40125761/are-static-inline-functions-thread-safe", "title": "Are static inline functions thread safe?", "body": "<p>Scenario: I have written a big piece of code, running on 2 parallel threads, which are identical in term of code and just process different data. I am seeing non-deterministic results. If I disable one of the 2 threads, the results become deterministic. Within this code I am using some static inline functions (main reason: they are small functions that I need here and there, for which I simply duplicate the code in the translation units where they are needed), and I would like to understand if they could be a possible cause of my problem.</p>\n\n<p>Are static inline functions thread-safe in C? Said the other way around, if they have no static variable inside, but only some local variables and the input parameters, will a simultaneous call from the 2 threads cause unpredictable behaviour?</p>\n"}, {"tags": ["c", "gdb", "reverse", "next"], "comments": [{"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1476863443, "post_id": 40125154, "comment_id": 67520618, "body": "Seems like you ran into a known bug. Check <a href=\"https://sourceware.org/ml/gdb/2016-08/msg00025.html\" rel=\"nofollow noreferrer\">this discussion</a> for details and a couple of possible workarounds. From what I can see this bug has not been fixed yet."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7466391, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066205846728737/picture?type=large", "display_name": "Simo Ssimo", "link": "https://stackoverflow.com/users/7466391/simo-ssimo"}, "is_accepted": false, "score": 1, "last_activity_date": 1485299697, "creation_date": 1485299697, "answer_id": 41840692, "question_id": 40125154, "link": "https://stackoverflow.com/questions/40125154/target-record-full-in-gdb-makes-n-command-fail-on-printf-with-process-recor/41840692#41840692", "title": "&quot;target record-full&quot; in gdb makes &quot;n&quot; command fail on printf with &quot;Process record does not support instruction 0xc5 at address 0x7ffff7dee6e7&quot;?", "body": "<p>Actually for the simple case you have, a record-full should work if you add the parameter \"-static\" to your gcc compilation command. </p>\n"}, {"tags": [], "owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "is_accepted": true, "score": 3, "last_activity_date": 1504874904, "last_edit_date": 1504874904, "creation_date": 1504863588, "answer_id": 46113357, "question_id": 40125154, "link": "https://stackoverflow.com/questions/40125154/target-record-full-in-gdb-makes-n-command-fail-on-printf-with-process-recor/46113357#46113357", "title": "&quot;target record-full&quot; in gdb makes &quot;n&quot; command fail on printf with &quot;Process record does not support instruction 0xc5 at address 0x7ffff7dee6e7&quot;?", "body": "<p><strong>AVX is not supported as of GDB 7.11.1</strong></p>\n\n<p>The underlying problem seems to be that AVX instructions are not currently supported, but glibc uses them on Ubuntu 16.04 64-bit:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/43750603/gdb-reverse-debugging-avx2\">gdb reverse debugging avx2</a></li>\n<li><a href=\"https://sourceware.org/ml/gdb/2016-08/msg00028.html\" rel=\"nofollow noreferrer\">https://sourceware.org/ml/gdb/2016-08/msg00028.html</a></li>\n</ul>\n\n<p><code>rr</code> is an awesome working alternative: <a href=\"https://github.com/mozilla/rr\" rel=\"nofollow noreferrer\">https://github.com/mozilla/rr</a> Here is a minimal working example: <a href=\"https://stackoverflow.com/questions/3649468/setting-breakpoint-in-gdb-where-the-function-returns/46116927#46116927\">Setting breakpoint in GDB where the function returns</a></p>\n"}], "owner": {"reputation": 5623, "user_id": 6164172, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cfe3f1dd56fc9c05a01393d3c618d727?s=128&d=identicon&r=PG&f=1", "display_name": "Troskyvs", "link": "https://stackoverflow.com/users/6164172/troskyvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 2, "accepted_answer_id": 46113357, "answer_count": 2, "score": 3, "last_activity_date": 1504874904, "creation_date": 1476863107, "last_edit_date": 1504862543, "question_id": 40125154, "link": "https://stackoverflow.com/questions/40125154/target-record-full-in-gdb-makes-n-command-fail-on-printf-with-process-recor", "title": "&quot;target record-full&quot; in gdb makes &quot;n&quot; command fail on printf with &quot;Process record does not support instruction 0xc5 at address 0x7ffff7dee6e7&quot;?", "body": "<p>I was tring to use \"reverse-step\" and \"reverse-next\" command inside gdb. Stack overflow tells me that I should run \"target record-full\" in the execution context where I wish to \"rn\" and \"rs\". But some weird error happened:</p>\n\n<pre><code>  1 \n  2 #include&lt;stdio.h&gt;\n  3 int i=0;\n  4 void fa()\n  5 { \n  6   ++i;\n  7   printf(\"%d\\n\",i);\n  8   ++i;\n  9 }\n 10 int main(){\n 11   fa();\n 12   return 0;\n 13 } \n</code></pre>\n\n<p>I compile and run this program:</p>\n\n<pre><code>(gdb) b 4\nBreakpoint 1 at 0x40052a: file test02.c, line 4.\n(gdb) r\nStarting program: /home/Troskyvs/a.out \n\nBreakpoint 1, fa () at test02.c:6\n6     ++i;\n(gdb) target record-full\n(gdb) n\n7     printf(\"%d\\n\",i);\n(gdb) n                      # Error happens here!\nProcess record does not support instruction 0xc5 at address 0x7ffff7dee6e7.\nProcess record: failed to record execution log.\n\nProgram stopped.\n_dl_runtime_resolve_avx () at ../sysdeps/x86_64/dl-trampoline.h:81\n81  ../sysdeps/x86_64/dl-trampoline.h: No such file or directory.\n</code></pre>\n\n<p>Well if I don't run \"target record-full\", then the 2nd \"n\" will be OK and run to next line. I don't quite get the error information here. </p>\n\n<p>Is it related to \"target record-full\"? How can I conquor it?</p>\n\n<p>I tried another approach:</p>\n\n<pre><code>(gdb) set exec-direction reverse\n(gdb) n\n\nNo more reverse-execution history.\nfa () at test02.c:7\n7     printf(\"%d\\n\",i);\n(gdb) n\n\nNo more reverse-execution history.\nfa () at test02.c:7\n7     printf(\"%d\\n\",i);\n(gdb) n\n</code></pre>\n\n<p>Well, it doesn't work</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 7, "creation_date": 1476863148, "post_id": 40125139, "comment_id": 67520429, "body": "<code>FILE *fp = (&quot;Hello.txt&quot;,&quot;w&quot;);</code> -&gt; <code>FILE *fp = fopen(&quot;Hello.txt&quot;,&quot;w&quot;);</code> Didn&#39;t your compiler show at least warnings?"}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1476863252, "post_id": 40125139, "comment_id": 67520496, "body": "Before using the fprintf() function, did you check if the file has been successfully created ==&gt; fp != NULL ?"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1476863397, "post_id": 40125139, "comment_id": 67520585, "body": "Yes, missed that :-)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 2, "creation_date": 1476863400, "post_id": 40125139, "comment_id": 67520589, "body": "@J.Piquard, given that state of his code, that check will actually pass."}], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 3415821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/698e7f6547b4565c18f25d9120ef4e48?s=128&d=identicon&r=PG&f=1", "display_name": "Hrishikesh Goyal", "link": "https://stackoverflow.com/users/3415821/hrishikesh-goyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1476863349, "creation_date": 1476863349, "answer_id": 40125238, "question_id": 40125139, "link": "https://stackoverflow.com/questions/40125139/segmentation-fault-core-dumped/40125238#40125238", "title": "Segmentation Fault: Core Dumped", "body": "<p>yes. as Michael walz commented. you missed fopen</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n   FILE *fp = fopen(\"Hello.txt\",\"w\");\n   fprintf (fp, \"\\n Hello World\");\n   fclose(fp);\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3268, "user_id": 182634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5b602ab0bc363e3e990f2e904b671d?s=128&d=identicon&r=PG", "display_name": "eyalm", "link": "https://stackoverflow.com/users/182634/eyalm"}, "is_accepted": false, "score": 0, "last_activity_date": 1476866024, "creation_date": 1476866024, "answer_id": 40126114, "question_id": 40125139, "link": "https://stackoverflow.com/questions/40125139/segmentation-fault-core-dumped/40126114#40126114", "title": "Segmentation Fault: Core Dumped", "body": "<p>You are missing the fopen in your code.\nAlso, to avoid other problems, always check the return value of fopen. It will be NULL if anything went wrong opening the file (e.g. out of space, wrong permissions)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n\n    FILE *fp = fopen(\"Hello.txt\", \"w\");\n\n    if (fp==NULL)\n        return -1;\n\n    fprintf (fp, \"\\n Hello World\");\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1476926994, "creation_date": 1476926994, "answer_id": 40144042, "question_id": 40125139, "link": "https://stackoverflow.com/questions/40125139/segmentation-fault-core-dumped/40144042#40144042", "title": "Segmentation Fault: Core Dumped", "body": "<p>The line:</p>\n\n<pre><code>FILE *fp = (\"Hello.txt\",\"w\");\n</code></pre>\n\n<p>is clearly erroneous from an intent point of view in that you appear to have missed the step of telling the compiler what actual function you want to call. What you almost certainly wanted to do was:</p>\n\n<pre><code>FILE *fp = fopen(\"Hello.txt\", \"w\");\n</code></pre>\n\n<p>Any decent compiler should have warned you about this such as with the <code>gcc</code> warning:</p>\n\n<pre><code>FILE *fp = (\"Hello.txt\",\"w\");\n           ^\nwarning: initialization from incompatible pointer type\n</code></pre>\n\n<p>and I often compile with the <code>-Werror</code> flag so as to have the compiler treat warnings as errors, to catch precisely this sort of thing.</p>\n\n<hr>\n\n<p>You may actually be wondering why the compiler considers this just a warning but the truth is that it's perfectly valid code. The parentheses around an expression are valid which is why you can write either <code>x = 7</code> or <code>x = (7)</code>, or even <code>x = (((((7)))))</code>, and have it mean the same thing.</p>\n\n<p>What remains then is just the expression <em>within</em> the parentheses, and this uses the C comma operator. Basically, the expression <code>a, b</code> evaluates <code>a</code> (discarding the result) then evaluates <code>b</code> and uses that as the result of the expression.</p>\n\n<p>You can verify this behaviour with the following program, which outputs <code>w</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main (void) {\n   char *fp = (\"Hello.txt\", \"w\");\n   puts (fp);\n   return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>You may <em>think</em> you would have limited use for such a beast but I'll guarantee you use it far more often than you think, such as with:</p>\n\n<pre><code>for (i = 0, j = 0; i &lt; 100; i++, j += 2)\n    printf (\"%d x 2 = %d\\n\", i, j);\n</code></pre>\n\n<p>In situations like that, it's fine to throw away the result of the sub-expressions since you're simply relying on the <code>++</code> side effect of evaluation.</p>\n\n<hr>\n\n<p>In your case, the statement:</p>\n\n<pre><code>FILE *fp = (\"Hello.txt\",\"w\");\n</code></pre>\n\n<p>will evaluate <code>\"Hello.txt\"</code> and use <code>\"w\"</code> to assign to <code>fp</code> (hence the incompatible pointer warning).</p>\n\n<p>Then, when you attempt to <em>use</em> the address of <code>\"w\"</code> as if it was a valid <code>FILE</code> pointer, all bets are off.</p>\n\n<hr>\n\n<p>And, as a side note, you should generally check the return value of all functions that can fail if such a failure may later affect your program. It's unwise to assume that <code>fopen</code> (or <code>malloc</code>, or a host of other functions) will always work. For <code>fopen</code>, it's a matter of ensuring the returned value is not <code>NULL</code>.</p>\n"}], "owner": {"reputation": 151, "user_id": 7035794, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-L7dw2p82CmM/AAAAAAAAAAI/AAAAAAAAAB4/dxSdz6nLBdw/photo.jpg?sz=128", "display_name": "Anik Shahriar", "link": "https://stackoverflow.com/users/7035794/anik-shahriar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1476926994, "creation_date": 1476863077, "last_edit_date": 1476863173, "question_id": 40125139, "link": "https://stackoverflow.com/questions/40125139/segmentation-fault-core-dumped", "title": "Segmentation Fault: Core Dumped", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n   FILE *fp = (\"Hello.txt\",\"w\");\n   fprintf (fp, \"\\n Hello World\");\n   fclose(fp);\n   return 0;\n}\n</code></pre>\n\n<p>I am getting this message while running this program </p>\n\n<blockquote>\n  <p>\"Segmentation fault(core dumped)\".</p>\n</blockquote>\n\n<p>It would be very helpful if i get an idea about why this happens and how to fix it. I am currently using<br>\ncodeblocks in ubuntu. Thanks in advance :)</p>\n"}]