[{"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569453949, "post_id": 58107667, "comment_id": 102605831, "body": "<code>.import</code> is specific to the sqlite3 shell, like all .-commands."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569454040, "post_id": 58107667, "comment_id": 102605846, "body": "Use a csv parsing library (or write your own) and insert rows via a prepared statement."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569454701, "post_id": 58107667, "comment_id": 102605965, "body": "You could also do something with the <a href=\"https://www.sqlite.org/csv.html\" rel=\"nofollow noreferrer\">csv virtual table module</a> and <code>create table foo as select ...</code> or <code>insert into foo select ...</code>"}], "owner": {"user_type": "does_not_exist", "display_name": "user11954200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569453269, "creation_date": 1569453269, "question_id": 58107667, "link": "https://stackoverflow.com/questions/58107667/how-to-import-a-csv-file-in-sqlite-within-c", "title": "How to import a csv file in sqlite (within C)", "body": "<p>How would I do the the following in SQLite:</p>\n\n<pre><code>rc = sqlite3_exec(db, \".mode csv\", NULL, NULL, &amp;error_msg);\nrc = sqlite3_exec(db, \"import MyFile.csv MyTable\", NULL, NULL, &amp;error_msg);\n</code></pre>\n\n<p>When I do the above, I get the following error: </p>\n\n<blockquote>\n  <p>SQL error: near \"import\": syntax error</p>\n</blockquote>\n\n<p>Here are the docs for doing a <a href=\"https://sqlite.org/cli.html\" rel=\"nofollow noreferrer\">csv import</a>. </p>\n\n<p>If this can't be done from within <code>sqlite3_exec</code>, how could I do this? Would there be a way to pipe the command to the shell from within c?</p>\n"}, {"tags": ["c", "visual-studio", "openmp"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1569453719, "post_id": 58107662, "comment_id": 102605792, "body": "What&#39;s the error? A missing library? Or something else?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1569454024, "post_id": 58107662, "comment_id": 102605842, "body": "At first glance there isn&#39;t anything extra to install: omp.h includes vcomp.lib (vcompd for debug) via <code>#pragma comment(lib, &quot;vcomp&quot;)</code>, and I have versions of these libs for all platforms in my install. They&#39;re &lt;30K each so I&#39;d be surprised if this was a separate install option."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 1, "creation_date": 1569454100, "post_id": 58107662, "comment_id": 102605858, "body": "The documentation does say that <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/openmp-enable-openmp-2-0-support?view=vs-2019\" rel=\"nofollow noreferrer\">&quot;If /openmp isn&#39;t specified in a compilation, the compiler ignores OpenMP clauses and directives&quot;</a>. So without the support enabled in the project settings you won&#39;t see any difference, no."}, {"owner": {"reputation": 11, "user_id": 12060250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jncqGshH6g4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyS2_h-W9lT4yBpAXYBR1b_MA3aA/photo.jpg?sz=128", "display_name": "Lucas Silvestre", "link": "https://stackoverflow.com/users/12060250/lucas-silvestre"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1569454237, "post_id": 58107662, "comment_id": 102605896, "body": "Rup, Error MSB6006 &quot;CL.exe&quot; was terminated with code 2. And I don&#39;t even know what that exe is, and why code 2."}, {"owner": {"reputation": 11, "user_id": 12060250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jncqGshH6g4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyS2_h-W9lT4yBpAXYBR1b_MA3aA/photo.jpg?sz=128", "display_name": "Lucas Silvestre", "link": "https://stackoverflow.com/users/12060250/lucas-silvestre"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1569454443, "post_id": 58107662, "comment_id": 102605922, "body": "So after installing the VS, all I got do is enable the suport for openMp and include the &lt;omp.h&gt;, that&#39;s all? It should work?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1569454526, "post_id": 58107662, "comment_id": 102605940, "body": "I&#39;d guess so, but I don&#39;t have a working VS2019 install to hand to try it myself. 2 is normally ERROR_FILE_NOT_FOUND. There&#39;s no more detail here: it doesn&#39;t say what file wasn&#39;t found? If not, and if you want to investigate this yourself, you could use <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/procmon\" rel=\"nofollow noreferrer\">procmon</a> to look for the exact API call that gave the error."}], "owner": {"reputation": 11, "user_id": 12060250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jncqGshH6g4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyS2_h-W9lT4yBpAXYBR1b_MA3aA/photo.jpg?sz=128", "display_name": "Lucas Silvestre", "link": "https://stackoverflow.com/users/12060250/lucas-silvestre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 605, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1569453238, "creation_date": 1569453238, "question_id": 58107662, "link": "https://stackoverflow.com/questions/58107662/installing-open-mp-for-visual-studio-2019", "title": "Installing Open MP for Visual Studio 2019", "body": "<p>I have downloaded VS2019 and looks like the omp.h library is already installed, but when I run parallel code, it runs just as a normal program would. So I'm wondering if I have to install the openMp somehow, despite the fact the library is already in there.</p>\n\n<p>Also, when I enable the support for OpenMp(In the project settings), the whole code gets a compiling error, despite it runs ok when the setting is disabled.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1569453511, "post_id": 58107647, "comment_id": 102605747, "body": "Welcome to SO.  Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>,and <a href=\"https://stackoverflow.com/help/on-topic\">what topics to ask</a>.  You need to show some effort here."}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 1, "creation_date": 1569453542, "post_id": 58107647, "comment_id": 102605754, "body": "Have you tried brute forcing it? It&#39;s O(n choose k), but it&#39;s also the simplest way to start."}], "answers": [{"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 0, "last_activity_date": 1569453909, "creation_date": 1569453909, "answer_id": 58107724, "question_id": 58107647, "link": "https://stackoverflow.com/questions/58107647/a-function-that-returns-the-number-of-possibilities-in-an-array-of-integers/58107724#58107724", "title": "A function that returns the number of possibilities in an array of integers", "body": "<p>Use recursion. E.g. something vaguely like:</p>\n\n<pre><code>int findCount(int *array, int length, int N1, int N2) {\n   int count = 0;\n\n   if(N1 == 1) {\n       for(int i = 0; i &lt; length; i++) {\n           if(array[i] == N2) {\n               count++;\n           }\n       }\n   } else {\n       for(int i = 0; i &lt; length; i++) {\n           count += findCount(&amp;array[i+1], length-i-1, N1 - 1, N2 - array[i]);\n       }\n   }\n   return count;\n}\n</code></pre>\n\n<p>Note: If the array can't contain zeros or negative numbers you can improve this with an <code>if(array[i] &lt; N2) count += findCount(&amp;array[i+1], length-i-1, N1 - 1, N2 - array[i]);</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 12121957, "user_type": "registered", "profile_image": "https://graph.facebook.com/3158851387519167/picture?type=large", "display_name": "Abdullah Aly", "link": "https://stackoverflow.com/users/12121957/abdullah-aly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569453909, "creation_date": 1569453092, "question_id": 58107647, "link": "https://stackoverflow.com/questions/58107647/a-function-that-returns-the-number-of-possibilities-in-an-array-of-integers", "title": "A function that returns the number of possibilities in an array of integers", "body": "<p>The function takes an array of integers, it's lengths, and two integers N1 and N2\nit should return an integer describes how many ways you can sum N1 elements of the array to get a summation equals to N2.\nHow to implement this function?</p>\n"}, {"tags": ["c", "resize", "cs50"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1569450988, "post_id": 58107283, "comment_id": 102605285, "body": "Better to open bitmap files with <code>&quot;rb&quot;</code> and <code>&quot;wb&quot;</code>."}, {"owner": {"reputation": 9, "user_id": 12121832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5028bbb7f5484687f2ff0d13c7c981?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/12121832/mike"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569451135, "post_id": 58107283, "comment_id": 102605320, "body": "@chux - thank you for replying. the problem set provides you with the basic code from a copy function and I&#39;m required to edit that in such a way as to make it resize.  a lot of the base function - loading etc - has already been written in for me."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1569451192, "post_id": 58107283, "comment_id": 102605329, "body": "If you&#39;re scaling up by a constant factor, you need to not only write <code>n</code> output pixels for each input, but also <code>n</code> output lines for each input line.  A more flexible approach would be to read the whole input file into memory, then iterate over the output pixels instead--that would also make it easier to scale with interpolation as well rather than just duplicating pixels."}], "owner": {"reputation": 9, "user_id": 12121832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5028bbb7f5484687f2ff0d13c7c981?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/12121832/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569460034, "creation_date": 1569450131, "question_id": 58107283, "link": "https://stackoverflow.com/questions/58107283/problem-with-cs50-resize-less-only-resizes-horizontally", "title": "Problem with CS50 Resize (less) - only resizes horizontally", "body": "<p>I'm doing the CS50 course and have been stuck on this task for some weeks now.  I felt I'd had a little epiphany regarding the code, but have hit a stumbling block.  My code resizes the image size correctly, but only uses the top half of the image, so effectively just resizes sideways, leaving the bottom half blank.</p>\n\n<p>My code is below, any insights would be great!</p>\n\n<p>Thank you...</p>\n\n<pre><code>// Copies a BMP file\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"bmp.h\"\n\nint main(int argc, char *argv[])\n{\n    // ensure proper usage\n    if (argc != 4)\n    {\n        fprintf(stderr, \"Usage: ./resize n infile outfile\\n\");\n        return 1;\n    }\n\n    // extract resize factor, convert to float\n    float factor = atof(argv[1]);\n\n    // remember filenames\n    char *infile = argv[2];\n    char *outfile = argv[3];\n\n    // open input file\n    FILE *inptr = fopen(infile, \"r\");\n    if (inptr == NULL)\n    {\n        fprintf(stderr, \"Could not open %s.\\n\", infile);\n        return 2;\n    }\n\n    // open output file\n    FILE *outptr = fopen(outfile, \"w\");\n    if (outptr == NULL)\n    {\n        fclose(inptr);\n        fprintf(stderr, \"Could not create %s.\\n\", outfile);\n        return 3;\n    }\n\n    // read infile's BITMAPFILEHEADER\n    BITMAPFILEHEADER bf;\n    fread(&amp;bf, sizeof(BITMAPFILEHEADER), 1, inptr);\n\n    // read infile's BITMAPINFOHEADER\n    BITMAPINFOHEADER bi;\n    fread(&amp;bi, sizeof(BITMAPINFOHEADER), 1, inptr);\n\n    // ensure infile is (likely) a 24-bit uncompressed BMP 4.0\n    if (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 ||\n        bi.biBitCount != 24 || bi.biCompression != 0)\n    {\n        fclose(outptr);\n        fclose(inptr);\n        fprintf(stderr, \"Unsupported file format.\\n\");\n        return 4;\n    }\n\n    // determine padding for scanlines\n    int padding = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n\n    //convert sizes by input factor\n    int oldbiwidth = bi.biWidth;\n    int oldbiheight = bi.biHeight;\n    int oldpadding = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n    int oldbisizeimage = ((sizeof(RGBTRIPLE) * bi.biWidth) + padding) * abs(bi.biHeight);\n    int oldbfsize = bi.biSizeImage + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n\n    bi.biWidth *= factor; //convert to new image width\n    bi.biHeight *= factor; //convert to new image height\n    padding = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n    bi.biSizeImage = ((sizeof(RGBTRIPLE) * bi.biWidth) + padding) * abs(bi.biHeight); //convert to new file size in bytes, including pixels and padding\n    bf.bfSize = bi.biSizeImage + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER); //convert to new file size in bytes, including pixels, padding &amp; headers\n\n    // write outfile's BITMAPFILEHEADER\n    fwrite(&amp;bf, sizeof(BITMAPFILEHEADER), 1, outptr);\n\n    // write outfile's BITMAPINFOHEADER\n    fwrite(&amp;bi, sizeof(BITMAPINFOHEADER), 1, outptr);\n\n    // iterate over infile's scanlines\n    for (int i = 0, biHeight = abs(oldbiheight); i &lt; biHeight; i++)\n    {\n        // iterate over pixels in scanline\n        for (int j = 0; j &lt; oldbiwidth; j++)\n        {\n            // temporary storage\n            RGBTRIPLE triple;\n\n            // read RGB triple from infile\n            fread(&amp;triple, sizeof(RGBTRIPLE), 1, inptr);\n\n            for (int k = 0; k &lt; factor; k++)\n            {\n                // write RGB triple to outfile\n                fwrite(&amp;triple, sizeof(RGBTRIPLE), 1, outptr);\n            }\n        }\n\n        // skip over padding, if any\n        fseek(inptr, oldpadding, SEEK_CUR);\n\n        // then add it back (to demonstrate how)\n        for (int k = 0; k &lt; padding; k++)\n        {\n            fputc(0x00, outptr);\n        }\n    }\n\n    // close infile\n    fclose(inptr);\n\n    // close outfile\n    fclose(outptr);\n\n    // success\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "hidapi"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1569451868, "post_id": 58107281, "comment_id": 102605454, "body": "is <code>hidapi</code> a library you need to be linking against but are only including the header?"}], "answers": [{"tags": [], "owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "is_accepted": false, "score": 0, "last_activity_date": 1591560698, "creation_date": 1591560698, "answer_id": 62251051, "question_id": 58107281, "link": "https://stackoverflow.com/questions/58107281/how-to-use-the-hidapi-library-from-signal11/62251051#62251051", "title": "How to use the hidapi library from Signal11?", "body": "<p>A full compile command for a project using hidapi is like this:</p>\n\n<pre><code>gcc -o your_app your_app.c -lhidapi-hidraw\n</code></pre>\n\n<p>It's not enough to include  <code>#include \"hidapi.h\"</code> in the C-code, which does let <code>gcc</code> compile. You also need <code>-lhidapi-hidraw</code> to link with the library. I.e. compiling is in fact a 2 step process.</p>\n"}], "owner": {"reputation": 11, "user_id": 12121848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc5c2530ed681a4d7a9b7aba889843a3?s=128&d=identicon&r=PG&f=1", "display_name": "yodahekinsew", "link": "https://stackoverflow.com/users/12121848/yodahekinsew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1591560698, "creation_date": 1569450125, "last_edit_date": 1569451887, "question_id": 58107281, "link": "https://stackoverflow.com/questions/58107281/how-to-use-the-hidapi-library-from-signal11", "title": "How to use the hidapi library from Signal11?", "body": "<p>I installed the hidapi library from Signall11 on my windows10 pc (using minGW). But now I'm having some trouble actually getting it to work with gcc. I have some main.c file in which I include the hidapi.h file. My gcc command looks like</p>\n\n<pre><code>gcc main.c\n</code></pre>\n\n<p>I'm not sure where I'm going wrong because whenever I try to run this command I get an undefined reference error to some function that is defined in the hidapi.h file. </p>\n"}, {"tags": ["c", "shell", "signals"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1569443532, "post_id": 58106120, "comment_id": 102603093, "body": "The shell decides which job is foreground or background, it should put the process group ID in a variable and use that."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1569443756, "post_id": 58106120, "comment_id": 102603169, "body": "Why are you trying to do this? If you are trying to implement Ctrl+C, that&#39;s not the way to go. SIGINT is sent to the foreground process group by the terminal driver, not by the shell."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569445087, "post_id": 58106120, "comment_id": 102603634, "body": "<code>tcsetpgrp</code> is the way you tell the terminal driver which process group contains the foreground job. You also need to use <code>setpgid()</code> to make a child process a process group leader, so that it will be in a separate process group from the shell."}], "owner": {"reputation": 1, "user_id": 12121445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67b48e96ba0472ec628d1e4cf27c135?s=128&d=identicon&r=PG&f=1", "display_name": "uncreativeBacon", "link": "https://stackoverflow.com/users/12121445/uncreativebacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569443361, "creation_date": 1569443361, "question_id": 58106120, "link": "https://stackoverflow.com/questions/58106120/how-do-i-send-my-sigint-to-the-foreground-job-writing-own-shell", "title": "How do I send my SIGINT to the foreground job (writing own shell)?", "body": "<p>I know I have to use the kill(pid, signal) function. The problem is, that I don't know how to get the current foreground job. I tried tcgetpgrp but this logged me out of the PC (makes sense).\nWhat I'm asking for is if anyone knows a method for doing this.</p>\n"}, {"tags": ["c", "flex-lexer", "gnuwin32"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569455935, "post_id": 58105876, "comment_id": 102606164, "body": "You might find it useful to read through the short description of <a href=\"http://westes.github.io/flex/manual/Patterns.html\" rel=\"nofollow noreferrer\">Flex patterns</a> in which you will discover that <code>|</code> in <code>[a-z|A-Z]</code> only adds the character <code>|</code> to the set if possibilities, and that <code>^</code>  means that the pattern should match at the beginning of a line (but only if it appears at the beginning of the pattern). You&#39;ll also find an example of a rule set which matches keywords and identifiers in the <a href=\"http://westes.github.io/flex/manual/Simple-Examples.html\" rel=\"nofollow noreferrer\">examples section</a>."}, {"owner": {"reputation": 435, "user_id": 8096858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Til4o6KMPu8/AAAAAAAAAAI/AAAAAAAADIg/Y537_kPKpk0/photo.jpg?sz=128", "display_name": "sabertooth", "link": "https://stackoverflow.com/users/8096858/sabertooth"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569558429, "post_id": 58105876, "comment_id": 102643118, "body": "But in geeksforgeeks i read [^A-Z] means all other characters except upper case letter .."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569560008, "post_id": 58105876, "comment_id": 102643448, "body": "that&#39;s what <code>^</code> means when it&#39;s the first symbol in a <i>character class</i>. Please read the actual documentation for Flex, which I linked."}, {"owner": {"reputation": 435, "user_id": 8096858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Til4o6KMPu8/AAAAAAAAAAI/AAAAAAAADIg/Y537_kPKpk0/photo.jpg?sz=128", "display_name": "sabertooth", "link": "https://stackoverflow.com/users/8096858/sabertooth"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569563765, "post_id": 58105876, "comment_id": 102644392, "body": "yes but how to combined them together"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569564044, "post_id": 58105876, "comment_id": 102644494, "body": "Did you look at the example I linked?"}, {"owner": {"reputation": 435, "user_id": 8096858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Til4o6KMPu8/AAAAAAAAAAI/AAAAAAAADIg/Y537_kPKpk0/photo.jpg?sz=128", "display_name": "sabertooth", "link": "https://stackoverflow.com/users/8096858/sabertooth"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569974935, "post_id": 58105876, "comment_id": 102766464, "body": "Yes. If i could figure that out reading the doc i wouldn&#39;t have asked here. I solved it using a inner loop to check for keywords and was looking for a flex way to solve this. Anyway  thanks for you help \ud83d\ude00"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569975203, "post_id": 58105876, "comment_id": 102766508, "body": "scroll down to the end of the linked page. There&#39;s a flex file. Look at the two lines near the top of the last example. One has a pattern consisting of keywords. The next has the pattern <code>{ID}</code>, which is like your <code>variable</code>. The order of the lines is important. The page on how flex matches explains why."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1569975453, "post_id": 58105876, "comment_id": 102766559, "body": "As you will see in other flex examples, it is more common for each keyword to have its own rule because the keywords are syntactically significant. (The grammar for different keywords is different.) But the simple example on that page is stunningly similar to your question, so it seemed like additional details were not necessary."}, {"owner": {"reputation": 435, "user_id": 8096858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Til4o6KMPu8/AAAAAAAAAAI/AAAAAAAADIg/Y537_kPKpk0/photo.jpg?sz=128", "display_name": "sabertooth", "link": "https://stackoverflow.com/users/8096858/sabertooth"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1570077144, "post_id": 58105876, "comment_id": 102801564, "body": "in that example first checked for keyword then key. But I wanted to make a token which will automatically exclude keyword from key. Cause a normal variable declaration can be like <code>int x,a;</code> but someone can write <code>int a,int</code>; I wanted to make sure this wont fall in rule <code>{datatype}{space}({variable},{0,1})*;</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1570078138, "post_id": 58105876, "comment_id": 102801759, "body": "<code>{datatype}{space}({variable},{0,1})*;</code> is not a token; it&#39;s a syntactically complex stream which needs to be parsed. Normally that&#39;s done with yacc/bison or some other parser generator. You will indeed find that flex&#39;s tokenising model does not help you much for recognising things which are more complicated than tokens."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1570078257, "post_id": 58105876, "comment_id": 102801779, "body": "By the way, we would usually say that <code>{xyz}</code> is a macro, not a token. A &quot;token&quot; is what is matched by an entire flex rule."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1570078964, "post_id": 58105876, "comment_id": 102801918, "body": "I mention that mostly to explain why your original question was not really understood. But the only real answer, now that I (think) I know what you mean, is that that is not a good way to parse your input, so you might want to think about a more traditional style. Flex does not implement regular expression difference or intersection operators, nor does it implement lookahead assertions (which is how many regex libraries allow difference/intersect matches), nor any other feature which would slow down the matching algorithm."}], "answers": [{"comments": [{"owner": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "edited": false, "score": 0, "creation_date": 1570002467, "post_id": 58193764, "comment_id": 102772811, "body": "This is quite wrong. Rici showed your exactly how to do this in flex in his comment. It is the documentation."}, {"owner": {"reputation": 435, "user_id": 8096858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Til4o6KMPu8/AAAAAAAAAAI/AAAAAAAADIg/Y537_kPKpk0/photo.jpg?sz=128", "display_name": "sabertooth", "link": "https://stackoverflow.com/users/8096858/sabertooth"}, "reply_to_user": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "edited": false, "score": 0, "creation_date": 1570077352, "post_id": 58193764, "comment_id": 102801603, "body": "I wanted to make a token which will automatically exclude keyword. But in that example first checked for keyword and then id that doesn&#39;t solve my problem too."}], "tags": [], "owner": {"reputation": 435, "user_id": 8096858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Til4o6KMPu8/AAAAAAAAAAI/AAAAAAAADIg/Y537_kPKpk0/photo.jpg?sz=128", "display_name": "sabertooth", "link": "https://stackoverflow.com/users/8096858/sabertooth"}, "is_accepted": false, "score": -1, "last_activity_date": 1569975257, "creation_date": 1569975257, "answer_id": 58193764, "question_id": 58105876, "link": "https://stackoverflow.com/questions/58105876/how-to-exclude-a-token-expression-from-another-token-expression-in-gnuwin32-flex/58193764#58193764", "title": "How to exclude a token/expression from another token/expression in GnuWin32 Flex", "body": "<p>I couldn't find a flex way to solve this . So i ran a function to get words in a string and then checked them with keywords for match. </p>\n\n<pre><code>void getKeyword(char *yytext){\n        char temp[109];\n        for(int i=0;i&lt;strlen(yytext);i++){\n            for(int j=i+1;j&lt;=strlen(yytext);j++){\n                if(yytext[j]=='\\n' || yytext[j]==' ' || yytext[j]=='(' || yytext[j]==';'|| yytext[j]==','){\n//Terminator\n                    int id=0;\n                    int k=i;\n                    while(k&lt;j &amp;&amp; (yytext[k]==' '))k++; //removing back spaces\n                    int l=j-1;\n                    while(l&gt;=k &amp;&amp; (yytext[l]==' '))l--; // removing forward spaces\n                    for(;k&lt;=l;k++){\n                        temp[id++]=yytext[k]; //storing the word\n                    }\n                    temp[id]='\\0';\n\n                    if(isKeyword(temp)){ //checker function\n                        i=j-1;\n                        //Saving it to an char array\n                         memcpy(out[6][idx[6]++],temp,strlen(temp));\n                        break;\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>iskeyword function ::</p>\n\n<pre><code>int isKeyword(char *c){\n        if(!strcmp(\"return\",c) || !strcmp(\"include\",c) || !strcmp(\"define\",c) || !strcmp(\"int\",c)|| !strcmp(\"double\",c)|| !strcmp(\"char\",c)|| !strcmp(\"void\",c)|| !strcmp(\"if\",c)|| !strcmp(\"elif\",c)|| !strcmp(\"else\",c)|| !strcmp(\"loop\",c)|| !strcmp(\"while\",c) )\n            return 1;\n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 8096858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Til4o6KMPu8/AAAAAAAAAAI/AAAAAAAADIg/Y537_kPKpk0/photo.jpg?sz=128", "display_name": "sabertooth", "link": "https://stackoverflow.com/users/8096858/sabertooth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569975257, "creation_date": 1569442003, "last_edit_date": 1569446197, "question_id": 58105876, "link": "https://stackoverflow.com/questions/58105876/how-to-exclude-a-token-expression-from-another-token-expression-in-gnuwin32-flex", "title": "How to exclude a token/expression from another token/expression in GnuWin32 Flex", "body": "<p>I want to exclude some keywords from my variable token\nMy variable token is:</p>\n\n<pre><code>variable [a-z|A-Z]+[a-z|A-Z|0-9]*\n</code></pre>\n\n<p>and Keyword is:</p>\n\n<pre><code>Datatype \"int\"|\"double\"|\"char\"|\"void\"\nKEYWORD \"include\"|\"define\"|{Datatype}|\"return\"|\"if\"|\"else\"|\"elif\"|\"loop\"|\"while\"|\"run\"|\"new\"\n\n</code></pre>\n\n<p>I tried to use {variable}^{KEYWORD} , ^{KEYWORD}{variable} but it's not working</p>\n\n<p>I want to make variable token such a way that it cant generate anything from KEYWORD. How to do that..</p>\n"}, {"tags": ["c", "linux", "memory", "memory-management", "linux-kernel"], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 2762678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee48142c79e0272fef5875126ebe6912?s=128&d=identicon&r=PG&f=1", "display_name": "QnA", "link": "https://stackoverflow.com/users/2762678/qna"}, "edited": false, "score": 0, "creation_date": 1569445455, "post_id": 58105757, "comment_id": 102603747, "body": "thanks, I guess I understand how/why pfn_to_page() works, but do not understand why __phys_to_pfn() works the way it is - how can it be a continuous mapping if actual physical memory has holes?"}], "tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1569441494, "creation_date": 1569441494, "answer_id": 58105757, "question_id": 58105460, "link": "https://stackoverflow.com/questions/58105460/is-linux-sparsemem-memory-model-really-sparse/58105757#58105757", "title": "Is Linux SPARSEMEM memory model really sparse?", "body": "<p>There's a good summary of how <code>SPARSEMEM</code> works <a href=\"https://lwn.net/Articles/134804/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<blockquote>\n  <p>Sparsemem uses an array to provide different pfn_to_page()\n  translations for each SECTION_SIZE area of physical memory.  This is\n  what allows the mem_map[] to be chopped up.</p>\n</blockquote>\n"}], "owner": {"reputation": 667, "user_id": 2762678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee48142c79e0272fef5875126ebe6912?s=128&d=identicon&r=PG&f=1", "display_name": "QnA", "link": "https://stackoverflow.com/users/2762678/qna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569441494, "creation_date": 1569440295, "last_edit_date": 1569440715, "question_id": 58105460, "link": "https://stackoverflow.com/questions/58105460/is-linux-sparsemem-memory-model-really-sparse", "title": "Is Linux SPARSEMEM memory model really sparse?", "body": "<p>I am trying to understand how Linux <code>SPARSEMEM</code> memory model works. As I understand, when <code>SPARSEMEM_VMEMMAP</code> is set, there is a second mapping that 'glues' the  mem_maps from different (possibly disconnected) sections, such that mapping between <code>PFN</code> and <code>page</code> struct is continuous. So far so good.</p>\n\n<p>Question is, if physical memory does have holes, then mapping from <code>PFN/page</code> to physical address should require some customized mapping, rather than simple linear algebra, is that correct?</p>\n\n<p>But in the following code (kernel 5.3), it does seem simple math:</p>\n\n<pre><code>/include/asm-generic/memory_model.h\n#define __phys_to_pfn(paddr)    PHYS_PFN(paddr)\n/include/linux/pfn.h\n#define PFN_PHYS(x) ((phys_addr_t)(x) &lt;&lt; PAGE_SHIFT)\n/include/linux/types.h\ntypedef u64 phys_addr_t;\n</code></pre>\n\n<p>Does this mean the physical address space still needs to be continous and NO holes allowed? Or did I miss something here? thanks!</p>\n"}, {"tags": ["c", "sorting", "c-strings", "string-literals", "qsort"], "comments": [{"owner": {"reputation": 358, "user_id": 1149948, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49a9c5ca86812dbc680e1930a239bdd1?s=128&d=identicon&r=PG", "display_name": "muaz", "link": "https://stackoverflow.com/users/1149948/muaz"}, "edited": false, "score": 0, "creation_date": 1569440951, "post_id": 58105271, "comment_id": 102602032, "body": "Possible duplicate <a href=\"https://stackoverflow.com/questions/28396382/casting-a-const-void-to-a-const-char-in-c\" title=\"casting a const void to a const char in c\">stackoverflow.com/questions/28396382/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 9940188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fab55648698bdae0015bce0761121c4d?s=128&d=identicon&r=PG&f=1", "display_name": "musbur", "link": "https://stackoverflow.com/users/9940188/musbur"}, "edited": false, "score": 0, "creation_date": 1569441721, "post_id": 58105344, "comment_id": 102602378, "body": "I feel old and tired. Thank you."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 10, "last_activity_date": 1569440563, "last_edit_date": 1569440563, "creation_date": 1569439719, "answer_id": 58105344, "question_id": 58105271, "link": "https://stackoverflow.com/questions/58105271/weird-qsort-behavior-whats-wrong/58105344#58105344", "title": "Weird qsort behavior, what&#39;s wrong?", "body": "<p>Use in the comparison function the following return statement</p>\n\n<pre><code>return strcmp( *(const char ** )a, *(const char **)b );\n</code></pre>\n\n<p>The comparison function gets pointers to the array elements that in turn have a pointer type.</p>\n\n<p>Also pay attention to that with the unsigned variable <code>n</code> you should use the format conversion specifier <code>%u</code>.</p>\n\n<p>Here is your updated program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint by_name(const void *a, const void *b) {\n    return strcmp(*(const char **)a, *(const char **)b);\n}\nint main(void) {\n    char *months[] = {\n        \"January\",\n        \"Februar\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\"\n    };\n    unsigned n;\n\n    qsort(months, sizeof months / sizeof *months, sizeof *months,\n        by_name);\n    for (n = 0; n &lt; sizeof months / sizeof *months; ++n) {\n        printf(\"%u %p %s\\n\", n, months[n], months[n]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>0 0x56490a5b001a April\n1 0x56490a5b002e August\n2 0x56490a5b0050 December\n3 0x56490a5b000c Februar\n4 0x56490a5b0004 January\n5 0x56490a5b0029 July\n6 0x56490a5b0024 June\n7 0x56490a5b0014 March\n8 0x56490a5b0020 May\n9 0x56490a5b0047 November\n10 0x56490a5b003f October\n11 0x56490a5b0035 September\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 9940188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fab55648698bdae0015bce0761121c4d?s=128&d=identicon&r=PG&f=1", "display_name": "musbur", "link": "https://stackoverflow.com/users/9940188/musbur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58105344, "answer_count": 1, "score": 1, "last_activity_date": 1569440563, "creation_date": 1569439388, "last_edit_date": 1569440383, "question_id": 58105271, "link": "https://stackoverflow.com/questions/58105271/weird-qsort-behavior-whats-wrong", "title": "Weird qsort behavior, what&#39;s wrong?", "body": "<p>Why doesn't the code below sort the month names? Base address is correct, number of elements is correct, size of each element is correct, <code>cmp</code> function is correct. <code>gcc -W -Wall -ansi -pedantic</code> doesn't complain a peep.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint by_name(const void *a, const void *b) {\n    fprintf(stderr, \"%p %p\\n\", a, b);\n    return strcmp((const char *)a, (const char *)b);\n}\nint main(void) {\n    char *months[] = {\n        \"January\",\n        \"Februar\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\"\n    };\n    unsigned n;\n\n    qsort(months, sizeof months / sizeof *months, sizeof *months,\n        by_name);\n    for (n = 0; n &lt; sizeof months / sizeof *months; ++n) {\n        fprintf(stderr, \"%d %p %s\\n\", n, months[n], months[n]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I've added some code to see what qsort is actually doing, here's the result. We see that the addresses that qsort is passing to the compare function are completely different from where the array data actually is. What's wrong?</p>\n\n<p>I've used qsort many times, mostly to sort structs of all sorts, but never something as primitive as this (I need to decode some really stupid datetime strings).</p>\n\n<pre><code>0x1ffeffffb8 0x1ffeffffc0\n0x1ffeffffb0 0x1ffeffffb8\n0x1ffeffffd0 0x1ffeffffd8\n0x1ffeffffc8 0x1ffeffffd0\n0x1ffeffffb0 0x1ffeffffc8\n0x1ffeffffb8 0x1ffeffffc8\n0x1ffeffffc0 0x1ffeffffc8\n0x1ffeffffe8 0x1ffefffff0\n0x1ffeffffe0 0x1ffeffffe8\n0x1fff000000 0x1fff000008\n0x1ffefffff8 0x1fff000000\n0x1ffeffffe0 0x1ffefffff8\n0x1ffeffffe8 0x1ffefffff8\n0x1ffefffff0 0x1ffefffff8\n0x1ffeffffb0 0x1ffeffffe0\n0x1ffeffffb8 0x1ffeffffe0\n0x1ffeffffc0 0x1ffeffffe0\n0x1ffeffffc8 0x1ffeffffe0\n0x1ffeffffd0 0x1ffeffffe0\n0x1ffeffffd8 0x1ffeffffe0\n0 0x10a00b January\n1 0x10a013 Februar\n2 0x10a01b March\n3 0x10a021 April\n4 0x10a027 May\n5 0x10a02b June\n6 0x10a030 July\n7 0x10a035 August\n8 0x10a03c September\n9 0x10a046 October\n10 0x10a04e November\n11 0x10a057 December\n</code></pre>\n"}, {"tags": ["c", "shell", "unix", "mainframe", "zos"], "comments": [{"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1569437287, "post_id": 58104414, "comment_id": 102600554, "body": "You are having difficulty compiling a program we can&#39;t see on an unspecified machine with an unknown OS version and you&#39;d like some help? Please add your code and the missing details - thank you."}, {"owner": {"reputation": 1302, "user_id": 971650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4Kmg.jpg?s=128&g=1", "display_name": "zarchasmpgmr", "link": "https://stackoverflow.com/users/971650/zarchasmpgmr"}, "edited": false, "score": 0, "creation_date": 1569439159, "post_id": 58104414, "comment_id": 102601339, "body": "It also appears that the XL C/C++ compiler either is not installed properly at your site, or your RACF OMVS permissions and/or login shell script has invalid information. You should contact your systems programmer."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1569441119, "post_id": 58104414, "comment_id": 102602120, "body": "You say &quot;cc --version doesn&#39;t work&quot;. Do you get an error message when you type that command? What if you replace <code>cc</code> by <code>xlc</code>? A quick Google search indicates that <code>xlc -qversion</code> or <code>xlc -qversion=verbose</code> should work -- if <code>xlc</code> is installed."}, {"owner": {"reputation": 2882, "user_id": 6943197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbce82fcea72325bc7cc3f874b5cf3ab?s=128&d=identicon&r=PG", "display_name": "Hogstrom", "link": "https://stackoverflow.com/users/6943197/hogstrom"}, "edited": false, "score": 0, "creation_date": 1569500943, "post_id": 58104414, "comment_id": 102622692, "body": "A module is mentioned in the message.  Can you provide the entire message including the module that could not be loaded?"}, {"owner": {"reputation": 13, "user_id": 8518157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbc0f8d9a2517a9534beacca9f18a7a?s=128&d=identicon&r=PG", "display_name": "K_R", "link": "https://stackoverflow.com/users/8518157/k-r"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1570232475, "post_id": 58104414, "comment_id": 102860466, "body": "@KeithThompson: Yes, I do get a err: <code>-- is not a valid option</code>. Yes, it is installed: <code>z&#47;OS V2.3 XL C&#47;C++</code>."}, {"owner": {"reputation": 13, "user_id": 8518157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbc0f8d9a2517a9534beacca9f18a7a?s=128&d=identicon&r=PG", "display_name": "K_R", "link": "https://stackoverflow.com/users/8518157/k-r"}, "reply_to_user": {"reputation": 2882, "user_id": 6943197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbce82fcea72325bc7cc3f874b5cf3ab?s=128&d=identicon&r=PG", "display_name": "Hogstrom", "link": "https://stackoverflow.com/users/6943197/hogstrom"}, "edited": false, "score": 0, "creation_date": 1570232608, "post_id": 58104414, "comment_id": 102860487, "body": "@Hogstrom: Entire message is <code>Unable to load CCNEP. Compilation terminated.</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1570236625, "post_id": 58104414, "comment_id": 102861113, "body": "@KaziR What about <code>xlc -qversion</code>?"}, {"owner": {"reputation": 13, "user_id": 8518157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbc0f8d9a2517a9534beacca9f18a7a?s=128&d=identicon&r=PG", "display_name": "K_R", "link": "https://stackoverflow.com/users/8518157/k-r"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1570240437, "post_id": 58104414, "comment_id": 102861527, "body": "@KeithThompson: The output of <code>xlc -qversion</code> is &gt;&gt; <code>z&#47;OS V2.3 XL C&#47;C++</code>."}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 12121251, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDRRdwD19WhZSZE2xvp4dgsLxDR6APnRrLJ2mR2FQ=k-s128", "display_name": "Milos Lalovic", "link": "https://stackoverflow.com/users/12121251/milos-lalovic"}, "is_accepted": false, "score": 5, "last_activity_date": 1569506590, "last_edit_date": 1569506590, "creation_date": 1569440793, "answer_id": 58105579, "question_id": 58104414, "link": "https://stackoverflow.com/questions/58104414/compiling-c-programs-on-z-os-via-the-shell-in-unix-system-services-uss/58105579#58105579", "title": "Compiling C Programs On z/OS Via The Shell In Unix System Services (USS)", "body": "<p>The simplest way to compile a C program in USS on z/OS is by using the xlc utility. Here is an example with two command line options -v and -qphaseid that show the information about the version of the utility and the compiler components that were involved in the compile process:</p>\n\n<pre><code>xlc -v -c -qphaseid a.c\nFSUM0000I  Utility(xlc)                      Level(D170323.1712)\nexec: export(export,XL_CONFIG=/bin/../usr/lpp/cbclib/xlc/etc/xlc.cfg:xlc,NULL)\nexec: /usr/lpp/cbclib/xlc/exe/ccndrvr(/usr/lpp/cbclib/xlc/exe/ccndrvr,./,./a.c,*.c,CMDOPTS(DEFINE(errno=(*__errno())),NOTEST,-qoe,-qargparse,-qexecops,-qflag=i,-qhalt=16,-qnodebug,-qnolsearch,-qredir,-qlocale=POSIX,-qlongname,-qmaxmem=*,-qmemory,-qnestinc=255,-qnoexpmac,-qnoexportall,-qnogonumber,-qtarget=le,-qnolibansi,-qlist=/dev/fd1,-qnolist,-qnomargins,-qnooffset,-qnosequence,-qnoshowinc,-qsource=/dev/fd1,-qnosource,-qnoxref,-qterminal,-qnooptimize,-qplist=host,-qspill=128,-qstart,-qnoipa,DEFINE(_OPEN_DEFAULT=1),-qansialias,-qcpluscmt,-qlanglvl=extended,-qnoupconv,-qnoalias,-qnoaggregate,-qnoinfo,-qnoevents,-qrent,-qinline=auto:noreport:100:1000,-qnoinline),object(./a.o),-qphaseid,NOPPONLY,NULL)\nexec: export(export,STEPLIB=CBC.SCCNCMP:CEE.SCEERUN2:CEE.SCEERUN,NULL)\nexec: export(export,_C89_ACCEPTABLE_RC=4,NULL)\nCCN0000(I) Product(5650-ZOS) Phase(CCNEOPTP) Level(D190612.Z2R3)\nCCN0000(I) Product(5650-ZOS) Phase(CCNDRVR ) Level(D190612.Z2R3)\nCCN0000(I) Product(5650-ZOS) Phase(CCNEP   ) Level(D190612.Z2R3)\nCCN0000(I) Product(5650-ZOS) Phase(CCNETBY ) Level(D190612.Z2R3)\nCCN0000(I) Product(5650-ZOS) Phase(CCNECWI ) Level(D190612.Z2R3)\n</code></pre>\n\n<p>The XL C/C++ compiler is a priced feature on z/OS so your system may not have it installed. A properly installed compiler will have a valid configuration file in <strong>/bin/../usr/lpp/cbclib/xlc/etc/xlc.cfg</strong></p>\n\n<p>Perhaps a clarification is in order as it may not be obvious that there are two utilities in USS that invoke the XL C/C++ compiler.</p>\n\n<ol>\n<li><p>The c89 utility whose operation is controlled by a number of environment variables (most users would run into difficulties figuring out how to define the required environment variables)</p></li>\n<li><p>The xlc utility whose operation is controlled by a configuration file which is easier to setup. Most users will be fine with the default configuration file customized by a system programmer who installed the compiler, but if a more sophisticated user needs a different setup the configuration file can be copied into a private file and modified to satisfy the need. Once modified it can be used by including -F /path_to_modified_config_file option on the command line.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8518157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbc0f8d9a2517a9534beacca9f18a7a?s=128&d=identicon&r=PG", "display_name": "K_R", "link": "https://stackoverflow.com/users/8518157/k-r"}, "edited": false, "score": 0, "creation_date": 1570232713, "post_id": 58108214, "comment_id": 102860505, "body": "Your answer to Q1 is correct. I was able to SSH in &amp; use <code>cc</code> to compile my C program. I believe this worked because it utilized my Mac&#39;s CC bin."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1570236825, "post_id": 58108214, "comment_id": 102861142, "body": "No, if you&#39;re logged into the z/OS machine, <code>cc</code> will not invoke <code>cc</code> or <code>CC</code> on your Macintosh."}, {"owner": {"reputation": 13, "user_id": 8518157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbc0f8d9a2517a9534beacca9f18a7a?s=128&d=identicon&r=PG", "display_name": "K_R", "link": "https://stackoverflow.com/users/8518157/k-r"}, "edited": false, "score": 0, "creation_date": 1570240502, "post_id": 58108214, "comment_id": 102861533, "body": "Valid point. Then the critical Q is: Why does cc work when I SSH in but not when I TSO in?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 13, "user_id": 8518157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbc0f8d9a2517a9534beacca9f18a7a?s=128&d=identicon&r=PG", "display_name": "K_R", "link": "https://stackoverflow.com/users/8518157/k-r"}, "edited": false, "score": 0, "creation_date": 1570243782, "post_id": 58108214, "comment_id": 102861852, "body": "@KaziR: I don&#39;t know what TSO is, but check your <code>$PATH</code>. When you ssh in, what does <code>type cc</code> say? And <code>ls -l $(type -p cc)</code> ? <code>cc</code> may or may not be a symbolic link to <code>xlc</code>. <code>cc</code> may be in a directory that&#39;s in your <code>$PATH</code> when you SSH in, but not when you TSO in."}, {"owner": {"reputation": 541, "user_id": 2434779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4484f4fd96f6eb06c6fe152c0eeab197?s=128&d=identicon&r=PG", "display_name": "David Crayford", "link": "https://stackoverflow.com/users/2434779/david-crayford"}, "edited": false, "score": 1, "creation_date": 1570509616, "post_id": 58108214, "comment_id": 102926294, "body": "Note that the <code>declare</code> command is  a <code>bash</code> built-in and is not part of the standard shells shipped with z/OS."}], "tags": [], "owner": {"reputation": 2882, "user_id": 6943197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbce82fcea72325bc7cc3f874b5cf3ab?s=128&d=identicon&r=PG", "display_name": "Hogstrom", "link": "https://stackoverflow.com/users/6943197/hogstrom"}, "is_accepted": true, "score": 4, "last_activity_date": 1577226915, "last_edit_date": 1577226915, "creation_date": 1569459343, "answer_id": 58108214, "question_id": 58104414, "link": "https://stackoverflow.com/questions/58104414/compiling-c-programs-on-z-os-via-the-shell-in-unix-system-services-uss/58108214#58108214", "title": "Compiling C Programs On z/OS Via The Shell In Unix System Services (USS)", "body": "<p>I am running on z/OS 2.4.  </p>\n\n<p>One common issue is that the libraries that host the compiler are not accessible.  I have this setting in my shell environment:</p>\n\n<p><code>export STEPLIB=\"none:CEE.SCEERUN:CBC.SCLBDLL:CBC.ACCNCMP\"</code>  The last dataset hosts the module you indicate is not found.</p>\n\n<p>In addition, these here are some additional settings (Note: some of these libraries may be different on your system due to customization but these are the default libraries):</p>\n\n<pre><code>declare -x _C89_CLIB_PREFIX=\"CBC\"\ndeclare -x _C89_INCDIRS=\"/usr/include /usr/lpp/ioclib/include\"\ndeclare -x _C89_LIBDIRS=\"/lib /usr/lib\"\ndeclare -x _C89_PLIB_PREFIX=\"CEE\"\ndeclare -x _C89_SLIB_PREFIX=\"SYS1\"\ndeclare -x _C89_WORK_UNIT=\"SYSDA\"\ndeclare -x _CC_CLIB_PREFIX=\"CBC\"\ndeclare -x _CC_INCDIRS=\"/usr/include /usr/lpp/ioclib/include\"\ndeclare -x _CC_LIBDIRS=\"/lib /usr/lib\"\ndeclare -x _CC_PLIB_PREFIX=\"CEE\"\ndeclare -x _CC_SLIB_PREFIX=\"SYS1\"\ndeclare -x _CC_WORK_UNIT=\"SYSDA\"\ndeclare -x _CEE_RUNOPTS=\"FILETAG(AUTOCVT,AUTOTAG) POSIX(ON)\"\ndeclare -x _CXX_CLIB_PREFIX=\"CBC\"\ndeclare -x _CXX_INCDIRS=\"/usr/include /usr/lpp/ioclib/include\"\ndeclare -x _CXX_LIBDIRS=\"/lib /usr/lib\"\ndeclare -x _CXX_PLIB_PREFIX=\"CEE\"\ndeclare -x _CXX_SLIB_PREFIX=\"SYS1\"\ndeclare -x _CXX_WORK_UNIT=\"SYSDA\"\n</code></pre>\n\n<p><strong>In answer to Q1</strong> here is the simplest way:</p>\n\n<p>Below is the output from my shell session in USS:</p>\n\n<pre><code>IBMUSER:/u/ibmuser #&gt;cat t.c\n#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv) {\n  printf(\"hello world\\n\");\n  return(0);\n}\nIBMUSER:/u/ibmuser #&gt;cc t.c\nIBMUSER:/u/ibmuser #&gt;./a.out\nhello world\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8518157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbc0f8d9a2517a9534beacca9f18a7a?s=128&d=identicon&r=PG", "display_name": "K_R", "link": "https://stackoverflow.com/users/8518157/k-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "accepted_answer_id": 58108214, "answer_count": 2, "score": 1, "last_activity_date": 1577226915, "creation_date": 1569435641, "last_edit_date": 1570231755, "question_id": 58104414, "link": "https://stackoverflow.com/questions/58104414/compiling-c-programs-on-z-os-via-the-shell-in-unix-system-services-uss", "title": "Compiling C Programs On z/OS Via The Shell In Unix System Services (USS)", "body": "<p>I have a C file residing in the USS filesystem.  My C file is pretty basic. It contains logic to print \"Hello World\". I execute: <em>c89 [filename]</em>  </p>\n\n<p>I get a return code (<code>rc</code>) of <code>CCN0634(U)</code>. The same rc is thrown if I try the cc compiler. I Google the aforementioned <code>rc</code>. The IBM Knowledge Center tells me the following:</p>\n\n<p><code>Check that the compiler is installed correctly. Make sure there is enough memory in the region to fetch the module. You may need to specify the runtime option HEAP(,,,FREE,,) to prevent the compiler from running out of memory.</code></p>\n\n<p>The above explanation didn't make much sense. I Googled for some solutions. All of the search results led to compilation in batch using JCL. It was overwhelming as there were many different flavors.</p>\n\n<p><strong>Q1:</strong> What\u2019s the simplest way to compile a C program on the Unix Shell Services?</p>\n\n<p><strong>Q2:</strong> How do I check if a compiler is installed? cc --version doesn\u2019t work.</p>\n\n<h3>Expected Result</h3>\n\n<ul>\n<li>Compilation of my C program</li>\n</ul>\n\n<h3>Actual Result</h3>\n\n<ul>\n<li>My C program doesn't compile.</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1569435767, "post_id": 58104410, "comment_id": 102599917, "body": "You need to write a function that performs the correct operation depending on the inputs"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569436655, "post_id": 58104410, "comment_id": 102600290, "body": "<code>int z = a c[i] b ;</code> does not do what you think it is doing."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1569436848, "post_id": 58104410, "comment_id": 102600372, "body": "@DavidC.Rankin I guess we take that line as pseudocode for &quot;please fix me&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11788827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbe04a3767de1dad8cee6b5e546e5be?s=128&d=identicon&r=PG&f=1", "display_name": "khair", "link": "https://stackoverflow.com/users/11788827/khair"}, "edited": false, "score": 0, "creation_date": 1569435962, "post_id": 58104470, "comment_id": 102600015, "body": "I know i can do this ...but this is so lengthy .It will be helpful if  there is any other way to do so"}], "tags": [], "owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1569435834, "creation_date": 1569435834, "answer_id": 58104470, "question_id": 58104410, "link": "https://stackoverflow.com/questions/58104410/how-can-i-perform-operation-which-is-defined-in-a-character-array/58104470#58104470", "title": "how can I perform operation which is defined in a character array?", "body": "<p>What about something like this (in the loop)</p>\n\n<pre><code>if (c[i] == '+' )\n{\n// do the plus operation.\n}\nelse if ( c[i] == '-') \n{\n// do the minus operation.\n}\n/// ... same thing for the other operations.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569436924, "post_id": 58104579, "comment_id": 102600403, "body": "Magic error code is a bad idea (though I like the rest). Use a <code>default:</code> case and <code>exit {EXIT_FAILURE};</code> from there. Since the function returns <code>int</code>, returning some <code>int</code> as an error-code is a no-go. (but still worth the UV)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11050329"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569437093, "post_id": 58104579, "comment_id": 102600465, "body": "@David C. Rankin Yes, but the question was about the logic of operator definition. The topic of error code retrieval is great for discussion in this topic. And i select it&#39;s only exmpl ;)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569437265, "post_id": 58104579, "comment_id": 102600544, "body": "Agreed, that&#39;s why I overlooked it and still gave your answer the nod, but it does deserve a comment in light of the function return type. Ideally the operator checking of the array contents would be done before passing to the function to eliminate this sticky situation."}, {"owner": {"reputation": 1911, "user_id": 8928481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orscP.png?s=128&g=1", "display_name": "Biswapriyo", "link": "https://stackoverflow.com/users/8928481/biswapriyo"}, "edited": false, "score": 0, "creation_date": 1569437585, "post_id": 58104579, "comment_id": 102600671, "body": "<code>b</code> should not be zero."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11050329"}, "reply_to_user": {"reputation": 1911, "user_id": 8928481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orscP.png?s=128&g=1", "display_name": "Biswapriyo", "link": "https://stackoverflow.com/users/8928481/biswapriyo"}, "edited": false, "score": 0, "creation_date": 1569437762, "post_id": 58104579, "comment_id": 102600743, "body": "@Biswapriyo - fix it)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11050329"}, "is_accepted": false, "score": 2, "last_activity_date": 1569437728, "last_edit_date": 1569437728, "creation_date": 1569436294, "answer_id": 58104579, "question_id": 58104410, "link": "https://stackoverflow.com/questions/58104410/how-can-i-perform-operation-which-is-defined-in-a-character-array/58104579#58104579", "title": "how can I perform operation which is defined in a character array?", "body": "<p>The easiest way is to move logic to a separate function and  switch char to select action </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint errCode = -999876; // magic error code exmpl\n\nint useArithm(char c, int a, int b) {\n    switch (c) {\n        case '+' : {\n            return a + b;\n        }\n        break;\n        case '-' : {\n            return a - b;\n        }\n        break;\n        case '*' : {\n            return a * b;\n        }\n        break;\n        case '/' : {\n            if (b == 0) {\n                // bed b msg ;)\n                return errCode;\n            }\n            return a / b;\n        }\n        break;\n    }\n    return errCode;\n}\n\nint main() {\n    char *c = \"+-*/\" ;\n    int a = 10 , b = 5 ;\n    for (int i = 0; c[i]!='\\0'; i++) {\n        if (c[i] == '+' || c[i] == '-' || c[i] == '*' || c[i] == '/') {\n            int z = useArithm(c[i], a, b); \n            if (z == errCode) {\n                // error action\n            }\n            printf(\"%d \",z) ; \n        } else {\n            // error msg\n            break;\n        }\n\n    }\n   return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1569437050, "post_id": 58104690, "comment_id": 102600450, "body": "This question is tagged <code>[c]</code>. Please avoid <code>[c++]</code> answers. Perhaps a comparison of the C <code>switch</code> source code and C++ <code>map</code> source is prudent before commenting on &quot;bloat code&quot;."}, {"owner": {"reputation": 35, "user_id": 11788827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbe04a3767de1dad8cee6b5e546e5be?s=128&d=identicon&r=PG&f=1", "display_name": "khair", "link": "https://stackoverflow.com/users/11788827/khair"}, "edited": false, "score": 0, "creation_date": 1569437062, "post_id": 58104690, "comment_id": 102600454, "body": "yah i know about this .That&#39;s why I am confused is there anything in c also to easily do that !!"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1569437204, "post_id": 58104690, "comment_id": 102600516, "body": "My point was that to implement a map and an exception engine in C would be so much bloat code, not the comparison with the case statement."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569437355, "post_id": 58104690, "comment_id": 102600587, "body": "Yes, that is a valid point, it would look like the C++ source for <code>map</code> and the source for the exception handling."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1569437426, "post_id": 58104690, "comment_id": 102600614, "body": "No, it would be worse than that, as you get no object wrappers, so everything would need 5 mile long names, etc. This is why C++"}], "tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": -2, "last_activity_date": 1569437336, "last_edit_date": 1569437336, "creation_date": 1569436781, "answer_id": 58104690, "question_id": 58104410, "link": "https://stackoverflow.com/questions/58104410/how-can-i-perform-operation-which-is-defined-in-a-character-array/58104690#58104690", "title": "how can I perform operation which is defined in a character array?", "body": "<p>There is nothing built in. </p>\n\n<p>A case statement will be slightly briefer than the if/else logic, but not if you factor in the break statements.</p>\n\n<p>Another option would be a function map. In C++, something like (note this is uncompiled thought code):</p>\n\n<pre><code>typedef int (*binop)(int a,int b);\nstd::map&lt;char, binop&gt; operations\n{ { '+', [](int a, int b)-&gt;int { return a+b;} },\n  { '-', [](int a, int b)-&gt;int { return a-b;} }\n};\n\n...\n\nauto  op = operations[c[i]];\nif (op) return op(a,b);\n\n... or the more devilish:\n\noperations.insert(c[i], [](int a, int b)-&gt;int { throw NoOpException();}).first(a,b);\n</code></pre>\n\n<p>But to implement a map and populate it in C and declare all the little worker functions would be so much bloat code!</p>\n"}], "owner": {"reputation": 35, "user_id": 11788827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbe04a3767de1dad8cee6b5e546e5be?s=128&d=identicon&r=PG&f=1", "display_name": "khair", "link": "https://stackoverflow.com/users/11788827/khair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1569437728, "creation_date": 1569435616, "last_edit_date": 1569436918, "question_id": 58104410, "link": "https://stackoverflow.com/questions/58104410/how-can-i-perform-operation-which-is-defined-in-a-character-array", "title": "how can I perform operation which is defined in a character array?", "body": "<p>I have taken a character array of certain operators. Each time it gets an operator I want to perform the operation using that operator. How can I do that?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    char *c = \"+-*/\" ;\n    int a = 10 , b = 5 ;\n    for(int i = 0 ; c[i]!='\\0';i++){\n        int z = a c[i] b ; \n        printf(\"%d \",z) ; \n    }\n}\n</code></pre>\n\n<p>expected output : <code>15 5 50 2</code></p>\n"}, {"tags": ["c", "arrays", "matrix"], "comments": [{"owner": {"reputation": 3243, "user_id": 5454400, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/50623f5ea714bc6271f9c34b13b090ab?s=128&d=identicon&r=PG&f=1", "display_name": "peachykeen", "link": "https://stackoverflow.com/users/5454400/peachykeen"}, "edited": false, "score": 0, "creation_date": 1569435386, "post_id": 58104344, "comment_id": 102599767, "body": "Where is your program?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1569435409, "post_id": 58104344, "comment_id": 102599776, "body": "Welcome to Stack Overflow! It seems that you forgot to post your attempt into the question (your code)."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1569436163, "post_id": 58104344, "comment_id": 102600094, "body": "If you want to work with a 3&#215;3 array, why did you define an array with dimensions 2&#215;3&#215;2?"}, {"owner": {"reputation": 37, "user_id": 12116232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/741d5f29caebcd6b299aab959dc500d9?s=128&d=identicon&r=PG&f=1", "display_name": "DEZMO27", "link": "https://stackoverflow.com/users/12116232/dezmo27"}, "edited": false, "score": 0, "creation_date": 1569447815, "post_id": 58104344, "comment_id": 102604472, "body": "Thanks just realized that"}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1569435724, "creation_date": 1569435724, "answer_id": 58104449, "question_id": 58104344, "link": "https://stackoverflow.com/questions/58104344/how-to-create-a-program-that-reads-nine-integers-into-a-3x3-array/58104449#58104449", "title": "How to create a program that reads nine integers into a 3x3 array", "body": "<p>You want to use a 2D array (a matrix in other words), of dimension 3x3, so eventually what you need is something like this:</p>\n\n<pre><code>int arr[3][3];\n</code></pre>\n\n<p>which creates a 2D array with 3 rows and 3 columns. In your attempt, you used a 3 dimensional array, which is not what you want.</p>\n\n<p>I think you will understand the rest (which you already know from what I see from your good attempt) from my example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N 3\n#define M 3\n\nint main(void)\n{\n  int arr[N][M] = {0};\n\n  for(int i = 0; i &lt; N; i++)\n    for(int j = 0; j &lt; M; j++)\n      scanf(\"%d\", &amp;arr[i][j]);\n\n  for(int i = 0; i &lt; N; i++)\n  {\n    for(int j = 0; j &lt; M; j++)\n      printf(\"%d \", arr[i][j]);\n    printf(\"\\n\");\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>See it also <kbd><a href=\"https://wandbox.org/permlink/8fliGZeByii6GKNK\" rel=\"nofollow noreferrer\">live</a></kbd>.</p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 11379566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa71c1bd5dce42c41c0f804eddf4dbfa?s=128&d=identicon&r=PG&f=1", "display_name": "TCFP", "link": "https://stackoverflow.com/users/11379566/tcfp"}, "is_accepted": false, "score": 0, "last_activity_date": 1569436042, "creation_date": 1569436042, "answer_id": 58104528, "question_id": 58104344, "link": "https://stackoverflow.com/questions/58104344/how-to-create-a-program-that-reads-nine-integers-into-a-3x3-array/58104528#58104528", "title": "How to create a program that reads nine integers into a 3x3 array", "body": "<p>You're not following the dimensions of your array at all. You have a 3-dimensional array here, dimensions 2 x 3 x 2. Assuming it gets filled with 0's, to help visualize:</p>\n\n<pre><code>[\n  [\n    [0, 0],\n    [0, 0],\n    [0, 0]\n  ],\n  [\n    [0, 0],\n    [0, 0],\n    [0, 0]\n  ]\n]\n</code></pre>\n\n<p>Keep in mind an array is indexed <code>0</code> to <code>n-1</code>, where <code>n</code> is the size of the array.</p>\n\n<p>Your first for-loop iterates to 2, which is equal to the size of your outermost array. That will result in a segmentation fault.</p>\n\n<p>You should use a 2-dimensional array and <code>#define</code> your dimensions.</p>\n"}], "owner": {"reputation": 37, "user_id": 12116232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/741d5f29caebcd6b299aab959dc500d9?s=128&d=identicon&r=PG&f=1", "display_name": "DEZMO27", "link": "https://stackoverflow.com/users/12116232/dezmo27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1569436042, "creation_date": 1569435320, "last_edit_date": 1569435886, "question_id": 58104344, "link": "https://stackoverflow.com/questions/58104344/how-to-create-a-program-that-reads-nine-integers-into-a-3x3-array", "title": "How to create a program that reads nine integers into a 3x3 array", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  int test[2][3][2];\n  printf(\"Enter nine values: \\n\");\n  for (int i = 0; i &lt; 3; ++i)\n  {\n    for (int j = 0; j &lt; 3; ++j)\n    {\n      for (int k = 0; k &lt; 1; ++k)\n      {\n        scanf(\"%d\", &amp;test[i][j][k]);\n      }\n    }\n  }\n  // Printing values with proper index.\n  printf(\"\\nDisplaying values:\\n\");\n  for (int i = 0; i &lt; 2; ++i)\n  {\n    for (int j = 0; j &lt; 3; ++j)\n    {\n      for (int k = 0; k &lt; 2; ++k)\n      {\n     printf(\"test[%d][%d][%d] = %d\\n\", i, j, k, test[i][j][k]);\n      }\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Perhaps I am just doing this wrong but I am having trouble in understanding how to get my program to read only 9 integers an output a 3x3 array from the user. What am I doing wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "edited": false, "score": 0, "creation_date": 1569435047, "post_id": 58104242, "comment_id": 102599626, "body": "If you can get the Lat and Long for the airplane you can calculate the distance from the coastline using Haversine formula, if reached within proximity do your task with led."}, {"owner": {"reputation": 1, "user_id": 10947346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3feb0bd1c66169091537f4c4525b1dc?s=128&d=identicon&r=PG&f=1", "display_name": "sodeep", "link": "https://stackoverflow.com/users/10947346/sodeep"}, "reply_to_user": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "edited": false, "score": 0, "creation_date": 1569436123, "post_id": 58104242, "comment_id": 102600072, "body": "The final approach will be haversine formula, however, we just need a quick solve on this, since we do not have a cs major engineer at this point"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569436143, "post_id": 58104242, "comment_id": 102600082, "body": "How is the coastline described \u2014 do you have a set of (x, y) or (lat, long) coordinates, or something else."}, {"owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "edited": false, "score": 0, "creation_date": 1569436655, "post_id": 58104242, "comment_id": 102600291, "body": "I can give you a readymade solution, but it&#39;s in python, you can embed that in your C code, however, it is not easy. Here&#39;s a sample from python docs <code>from haversine import haversine, Unit  lyon = (45.7597, 4.8422) # (lat, lon) paris = (48.8567, 2.3508)</code>  haversine(lyon, paris) &gt;&gt; 392.2172595594006  # in kilometers"}, {"owner": {"reputation": 1, "user_id": 10947346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3feb0bd1c66169091537f4c4525b1dc?s=128&d=identicon&r=PG&f=1", "display_name": "sodeep", "link": "https://stackoverflow.com/users/10947346/sodeep"}, "edited": false, "score": 0, "creation_date": 1569437940, "post_id": 58104242, "comment_id": 102600810, "body": "sets of (lat, long), about 500 of them"}, {"owner": {"reputation": 1, "user_id": 10947346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3feb0bd1c66169091537f4c4525b1dc?s=128&d=identicon&r=PG&f=1", "display_name": "sodeep", "link": "https://stackoverflow.com/users/10947346/sodeep"}, "edited": false, "score": 0, "creation_date": 1569437991, "post_id": 58104242, "comment_id": 102600831, "body": "Thanks, I will take a look at it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10947346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3feb0bd1c66169091537f4c4525b1dc?s=128&d=identicon&r=PG&f=1", "display_name": "sodeep", "link": "https://stackoverflow.com/users/10947346/sodeep"}, "edited": false, "score": 0, "creation_date": 1569435897, "post_id": 58104272, "comment_id": 102599992, "body": "Hey Charles, I read it briefly. This is more sophisticated for this project and myself."}, {"owner": {"reputation": 1, "user_id": 10947346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3feb0bd1c66169091537f4c4525b1dc?s=128&d=identicon&r=PG&f=1", "display_name": "sodeep", "link": "https://stackoverflow.com/users/10947346/sodeep"}, "edited": false, "score": 0, "creation_date": 1569435938, "post_id": 58104272, "comment_id": 102600005, "body": "Tried to draw a simple line and do the centroid finding. Still thanks for your help!"}], "tags": [], "owner": {"reputation": 345, "user_id": 9540037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MboFr.jpg?s=128&g=1", "display_name": "CharlesRA", "link": "https://stackoverflow.com/users/9540037/charlesra"}, "is_accepted": false, "score": 0, "last_activity_date": 1569434965, "creation_date": 1569434965, "answer_id": 58104272, "question_id": 58104242, "link": "https://stackoverflow.com/questions/58104242/how-to-determine-if-a-point-is-within-boundary/58104272#58104272", "title": "How to determine if a point is within boundary?", "body": "<p>You can take a look at <a href=\"https://en.wikipedia.org/wiki/K-means_clustering\" rel=\"nofollow noreferrer\">K-means algorithm</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10947346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3feb0bd1c66169091537f4c4525b1dc?s=128&d=identicon&r=PG&f=1", "display_name": "sodeep", "link": "https://stackoverflow.com/users/10947346/sodeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1569434965, "creation_date": 1569434821, "question_id": 58104242, "link": "https://stackoverflow.com/questions/58104242/how-to-determine-if-a-point-is-within-boundary", "title": "How to determine if a point is within boundary?", "body": "<p>I'm on a geographic project: \nyou have a flight, within 10 miles of the coastline, the led on it will be triggered, otherwise remains.\nWe have generated 500 sets of coordinates, discrete numbers(longitude and latitude).</p>\n\n<p>My first thought was creating a grid, each block was 3 mile x 3 mile, all land part will be 1, otherwise 0. And we calculate the sum of the nearest 24 blocks, if it is larger than 1. It would not trigger.</p>\n\n<p>Then my manager suggest we can find the centroid of the polygon, then calculate the distance every time. \nCan anyone explain the algorithm here?</p>\n\n<p>Sorry have not touch any programming for long time, and I'm a mechanical engineering, manager supposed this should be something fun to work on. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1569434092, "post_id": 58103971, "comment_id": 102599238, "body": "Welcome to SO! What&#39;s the point in creating <code>i</code> and <code>j</code> and using <code>array[rows][columns];</code> (which is out of bounds)? Use <code>array[i][j];</code>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1569434558, "post_id": 58103971, "comment_id": 102599446, "body": "you will need to pass in an array as an argument, or initialize each <code>array</code> in each function. Any other errors aside, each cell of <code>array</code> is an indeterminate value, and so <code>sum</code> will be as well."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569435913, "post_id": 58103971, "comment_id": 102599996, "body": "The arrays are uninitialized; any sum is bogus."}], "answers": [{"tags": [], "owner": {"reputation": 277, "user_id": 10977963, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hPvYe0Frnx8/AAAAAAAAAAI/AAAAAAAAAPs/RyyolmfpBUA/photo.jpg?sz=128", "display_name": "Hunali", "link": "https://stackoverflow.com/users/10977963/hunali"}, "is_accepted": false, "score": 0, "last_activity_date": 1569452736, "creation_date": 1569452736, "answer_id": 58107609, "question_id": 58103971, "link": "https://stackoverflow.com/questions/58103971/adding-rows-and-columns-in-multidimensional-arrays-in-c/58107609#58107609", "title": "Adding rows and columns in MultiDimensional arrays in C", "body": "<p>You cannot use array[rows][columns] because rows and columns are not changing so you just add the same value over and over again. </p>\n\n<pre><code> for (i=0;i&lt;columns;i++) {\n       for (j=0;j&lt;rows;j++) {\n            scanf(\"%d\",&amp;a[i][j]);\n      }  \n    }\n          //COLUMNS//\n    for (i=0;i&lt;columns;i++) {\n        sum=0;\n       for (j=0;j&lt;rows;j++) {\n        sum+=a[i][j];\n      }  \n     printf (\"columns sum= %d\\n\",sum);\n\n    }\n             //ROWS//\n       for (j=0;j&lt;rows;j++) {\n        sum=0;\n       for (i=0;i&lt;columns;i++) {\n        sum+=a[i][j];\n       }  \n      printf (\"rows sum= %d\\n\",sum);\n    }\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12120749, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBoKjRkW9O458MnCofGcOHxBMvoWKSSV2J4kUmBGXM=k-s128", "display_name": "Harith Siddiqui", "link": "https://stackoverflow.com/users/12120749/harith-siddiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1569452736, "creation_date": 1569433648, "question_id": 58103971, "link": "https://stackoverflow.com/questions/58103971/adding-rows-and-columns-in-multidimensional-arrays-in-c", "title": "Adding rows and columns in MultiDimensional arrays in C", "body": "<p>So I have this lab that I cannot seem to figure out how to get the sum of each indivisual row, and column. Here's what I tried:</p>\n\n<pre><code>void columnSum(int rows,  int columns ){\nint sum=0;\nint array[rows][columns];\nfor (int j=0; j&lt;rows;++j) {\n    for (int i=0; i&lt;columns;++i){\n        sum+=array[rows][columns];\n    }\n    printf(\" %d\",sum);\n    sum=0;\n}\n\nvoid rowSum(int rows,  int columns){\nint array[rows][columns];\nint sum=0;\nfor (int i=0; i&lt;rows;++i) {\n    for (int j=0; j&lt;columns;++j){\n        sum+=array[rows][columns];\n    }\n    printf(\" %d\",sum);\n    sum=0;\n}\n</code></pre>\n\n<p>I don't have an array i the argument section because for some reason when I do, my program stops midway. Anyways, please let me know how to solve this part of the lab, and how to format the printing according to the sample run. Thank you!</p>\n"}, {"tags": ["c", "pointers", "segmentation-fault", "c-strings", "string-literals"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1569433496, "post_id": 58103890, "comment_id": 102598983, "body": "<a href=\"//stackoverflow.com/a/1704433\">What is the difference between char s&#91;&#93; and char *s?</a>"}, {"owner": {"reputation": 75, "user_id": 12055081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d621af875860b0712df8d451e2be01f9?s=128&d=identicon&r=PG&f=1", "display_name": "Kung Pao", "link": "https://stackoverflow.com/users/12055081/kung-pao"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1569433894, "post_id": 58103890, "comment_id": 102599144, "body": "Thanks Johnny for the help."}, {"owner": {"reputation": 366, "user_id": 10577318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc93415382d6c6fae2c364de090c6c76?s=128&d=identicon&r=PG&f=1", "display_name": "liamcomp", "link": "https://stackoverflow.com/users/10577318/liamcomp"}, "edited": false, "score": 1, "creation_date": 1569442974, "post_id": 58103890, "comment_id": 102602893, "body": "You have to allocate memory for the character array if you would like to modify it. <code>char arr[] = &quot;Hello World Tommy&quot;;</code> creates an array with the appropriate length as an auto and fills it with the specified characters, kind of like if you said <code>int nums[] = {1,3,7,8}</code>,  the other methods don&#39;t allocate any memory in a variable like an auto or a global or anything, they just are a pointer, the actual characters are stored somewhere else that you are not supposed to modify (could be in read only memory)"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1569505813, "last_edit_date": 1569505813, "creation_date": 1569433840, "answer_id": 58104009, "question_id": 58103890, "link": "https://stackoverflow.com/questions/58103890/when-trying-to-pass-a-string-directly-to-a-function-results-in-segmentation-erro/58104009#58104009", "title": "When trying to pass a string directly to a function results in Segmentation error", "body": "<p>Character literals are immutable in C. Any attempt to change a string literal results in undefined behavior.</p>\n\n<p>From the C Standard (6.4.5 String literals)</p>\n\n<blockquote>\n  <p>7 It is unspecified whether these arrays are distinct provided their\n  elements have the appropriate values. <strong>If the program attempts to\n  modify such an array, the behavior is undefined</strong></p>\n</blockquote>\n\n<p>These calls</p>\n\n<pre><code>printf(\"%s\",toLowerCase(\"Hello World Tommy\"));\n</code></pre>\n\n<p>and</p>\n\n<pre><code>char *arr = \"Hello World Tommy\";\n\nprintf(\"%s\",toLowerCase(arr));\n</code></pre>\n\n<p>pass pointers to the first characters of string literals to the function  <code>toLowerCase</code>. </p>\n\n<p>Pay attention to that in general this function definition</p>\n\n<pre><code>char * toLowerCase(char * str){\n\n    int i;\n    for(i = 0; i &lt; strlen(str); i++)\n    {\n        if((str[i] &gt;= 'A') &amp;&amp; (str[i] &lt;= 'Z'))\n        {\n            str[i] += 32;\n        }\n    }\n    return str;\n}\n</code></pre>\n\n<p>is invalid. For example the function will not work with characters using the table EBCDIC.</p>\n"}, {"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1569504953, "last_edit_date": 1569504953, "creation_date": 1569435134, "answer_id": 58104315, "question_id": 58103890, "link": "https://stackoverflow.com/questions/58103890/when-trying-to-pass-a-string-directly-to-a-function-results-in-segmentation-erro/58104315#58104315", "title": "When trying to pass a string directly to a function results in Segmentation error", "body": "<p>The real answer to your question is in the comments, (Summarized as <em>string literals are immutable</em>.)  In general, anytime the value passed into a function needs to change, it cannot be <em>immutable</em>, it cannot be <code>const</code> and the argument passed must be a pointer to (the address of) the variable intended to be changed.<br>\nThe comments and other answers make the reasons why it doesn't work clear.  So, one way to make it <em>work</em>  with both <code>string literals</code> and <code>char *str</code> (without changing the prototype.) is to do something like this:</p>\n\n<pre><code>char * toLowerCase(char * str);\n\nint main()\n{   \n    char *str = toLowerCase(\"Hello World Tommy\");\n    if(str)\n    {\n        printf(\"%s\", str);\n        free(str);\n    }\n\n    return 0;\n}\n\n//This method leaves the argument aloan, but creates\n//a changeable copy that is modified and returned.\n//But - The memory created here must be freed in the calling function!\nchar * toLowerCase(char * str){\n\n    int i, len;\n\n    len = strlen(str);\n    char *newstr = calloc(len + 1, 1);\n    strcpy(newstr, str);\n\n    for(i = 0; i &lt; len; i++)\n    {\n        if((newstr[i] &gt;= 'A') &amp;&amp; (newstr[i] &lt;= 'Z'))\n        {\n            newstr[i] += 32;\n        }\n    }\n    newstr[i] = 0;\n    return newstr;\n}\n</code></pre>\n\n<p>The upside is it works with both:  </p>\n\n<pre><code>char *str = \"this is a string literal\";\nchar str[] = {\"this is a mutable string\"};\n</code></pre>\n\n<p>The down side is the extra code, and dynamic memory allocation/freeing.</p>\n"}], "owner": {"reputation": 75, "user_id": 12055081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d621af875860b0712df8d451e2be01f9?s=128&d=identicon&r=PG&f=1", "display_name": "Kung Pao", "link": "https://stackoverflow.com/users/12055081/kung-pao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1569505980, "answer_count": 2, "score": 1, "last_activity_date": 1569505813, "creation_date": 1569433264, "last_edit_date": 1569434321, "question_id": 58103890, "link": "https://stackoverflow.com/questions/58103890/when-trying-to-pass-a-string-directly-to-a-function-results-in-segmentation-erro", "closed_reason": "Duplicate", "title": "When trying to pass a string directly to a function results in Segmentation error", "body": "<p>When trying to pass a string directly to a function results in Segmentation error whereas copying in an array and running it works fine. I am having hard time understanding this cause of segmentation fault. I looked up related questions on this forum but still hard to understand.</p>\n\n<p>I have written following code:</p>\n\n<p>This works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * toLowerCase(char * str);\n\nint main()\n{\n    char arr[] = \"Hello World Tommy\";\n\n    printf(\"%s\",toLowerCase(arr));\n\n    return 0;\n}\n\n\nchar * toLowerCase(char * str){\n\n    int i;\n    for(i = 0; i &lt; strlen(str); i++)\n    {\n        if((str[i] &gt;= 'A') &amp;&amp; (str[i] &lt;= 'Z'))\n        {\n            str[i] += 32;\n        }\n    }\n    return str;\n}\n</code></pre>\n\n<p>This does not and results in Segmentation fault:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * toLowerCase(char * str);\n\nint main()\n{   \n    printf(\"%s\",toLowerCase(\"Hello World Tommy\"));\n\n    return 0;\n}\n\n\nchar * toLowerCase(char * str){\n\n    int i;\n    for(i = 0; i &lt; strlen(str); i++)\n    {\n        if((str[i] &gt;= 'A') &amp;&amp; (str[i] &lt;= 'Z'))\n        {\n            str[i] += 32;\n        }\n    }\n    return str;\n}\n</code></pre>\n\n<p>Niether does this work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * toLowerCase(char * str);\n\nint main()\n{\n    char *arr = \"Hello World Tommy\";\n\n    printf(\"%s\",toLowerCase(arr));\n\n    return 0;\n}\n\n\nchar * toLowerCase(char * str){\n\n\n    int i;\n    for(i = 0; i &lt; strlen(str); i++)\n    {\n        if((str[i] &gt;= 'A') &amp;&amp; (str[i] &lt;= 'Z'))\n        {\n            str[i] += 32;\n        }\n    }\n    return str;\n}\n</code></pre>\n"}, {"tags": ["c", "valgrind"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1569432033, "post_id": 58103556, "comment_id": 102598389, "body": "Looks like your <code>temp</code> is not null-terminated?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1569432050, "post_id": 58103556, "comment_id": 102598395, "body": "Aside: <code>malloc(len * sizeof(work.first))</code> is incorrect for 2 reasons a) <code>sizeof(work.first)</code> is the size of a pointer. and b) off by 1, no room for any string terminator."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569432125, "post_id": 58103556, "comment_id": 102598416, "body": "Re the edit, the same fault with allocating memory for <code>work.second</code>."}, {"owner": {"reputation": 361, "user_id": 6880256, "user_type": "registered", "profile_image": "https://graph.facebook.com/678269352320173/picture?type=large", "display_name": "Kallzvx", "link": "https://stackoverflow.com/users/6880256/kallzvx"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569432301, "post_id": 58103556, "comment_id": 102598505, "body": "@WeatherVane Ops I have forgotten about that"}, {"owner": {"reputation": 361, "user_id": 6880256, "user_type": "registered", "profile_image": "https://graph.facebook.com/678269352320173/picture?type=large", "display_name": "Kallzvx", "link": "https://stackoverflow.com/users/6880256/kallzvx"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569432468, "post_id": 58103556, "comment_id": 102598569, "body": "@WeatherVane Yes after I added the terminator the error disappear, thanks!"}, {"owner": {"reputation": 361, "user_id": 6880256, "user_type": "registered", "profile_image": "https://graph.facebook.com/678269352320173/picture?type=large", "display_name": "Kallzvx", "link": "https://stackoverflow.com/users/6880256/kallzvx"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569432492, "post_id": 58103556, "comment_id": 102598578, "body": "@WeatherVane do you mind make it a answer so that i can accept it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569432881, "post_id": 58103556, "comment_id": 102598743, "body": "That&#39;s not really the answer though, just an aside, because you allocated <b>too much</b> memory by considering each element to be the size of a pointer. @EugeneSh. noticed you were not actually writing the terminator."}, {"owner": {"reputation": 361, "user_id": 6880256, "user_type": "registered", "profile_image": "https://graph.facebook.com/678269352320173/picture?type=large", "display_name": "Kallzvx", "link": "https://stackoverflow.com/users/6880256/kallzvx"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569433215, "post_id": 58103556, "comment_id": 102598881, "body": "@WeatherVane I see, thanks for the helps!!"}, {"owner": {"reputation": 361, "user_id": 6880256, "user_type": "registered", "profile_image": "https://graph.facebook.com/678269352320173/picture?type=large", "display_name": "Kallzvx", "link": "https://stackoverflow.com/users/6880256/kallzvx"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569433226, "post_id": 58103556, "comment_id": 102598884, "body": "@EugeneSh. Thanks for the help!"}], "owner": {"reputation": 361, "user_id": 6880256, "user_type": "registered", "profile_image": "https://graph.facebook.com/678269352320173/picture?type=large", "display_name": "Kallzvx", "link": "https://stackoverflow.com/users/6880256/kallzvx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569432242, "creation_date": 1569431865, "last_edit_date": 1569432242, "question_id": 58103556, "link": "https://stackoverflow.com/questions/58103556/conditional-jump-or-move-depends-on-uninitialised-values-but-i-think-i-do", "title": "Conditional jump or move depends on uninitialised value(s), but I think I do", "body": "<p>I am fixing a program which should properly title each word in a string, the input is given as <code>struct pair</code> which defined as:</p>\n\n<pre><code>// A struct to record pairs of strings\ntypedef struct pair {\n    char *first;  // the input string\n    char *second;  // the result string\n} pair;\n</code></pre>\n\n<p>and heres my fixed version of the method:</p>\n\n<pre><code>void process(pair work) {\n\n    int len = strlen(work.first);\n    char *temp = malloc(len * sizeof(work.first));  // LINE 22 IS HERE\n\n    // convert all words to lowercase\n    for (int i = 0; i &lt; len; i++) {\n        char c = work.first[i];\n        if (isupper(c)) {\n            temp[i] = tolower(c);\n        } else {\n            temp[i] = c;\n        }\n    }\n\n    // title each word\n    int last_space = 1;\n    for (int i = 0; i &lt; len; i++) {\n        if (last_space &amp;&amp; isalpha(temp[i])) {\n            temp[i] = toupper(temp[i]);\n        }\n        last_space = temp[i] == ' ';\n    }\n\n    strcpy(work.second, temp);   // LINE 44 IS HERE\n    free(temp);\n}\n</code></pre>\n\n<p>When I run <code>$ valgrind --track-origins=yes ./fixed hello</code>, I get:</p>\n\n<pre><code>==25973== Memcheck, a memory error detector\n==25973== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==25973== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==25973== Command: ./fixed hello\n==25973== \n==25973== Conditional jump or move depends on uninitialised value(s)\n==25973==    at 0x4C2BADB: strcpy (vg_replace_strmem.c:506)\n==25973==    by 0x400985: process (fixed.c:44)\n==25973==    by 0x400A13: main (fixed.c:59)\n==25973==  Uninitialised value was created by a heap allocation\n==25973==    at 0x4C28BE3: malloc (vg_replace_malloc.c:299)\n==25973==    by 0x400856: process (fixed.c:22)\n==25973==    by 0x400A13: main (fixed.c:59)\n==25973== \n\n...(other stuff which seems unrelated)\n\n==25973== For counts of detected and suppressed errors, rerun with: -v\n==25973== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>I do not understand why this happens, I have seem some other answer saying this error is usually due to I have not properly initialize my variable, but I have assign my variable in question <code>temp</code> in the loop.\n<br><br>\nupdate: my work is initialized and allocated memory here:</p>\n\n<pre><code>int main(int argc, char **argv) {\n    pair work;\n    work.first = argv[1];\n    work.second = malloc(strlen(work.first) * sizeof(work.first));\n    if (!work.second) {\n        fprintf(stderr, \"Failed to allocate memory\");\n        exit(-1);\n    }\n\n    process(work);\n\n    printf(\"%s becomes %s\\n\", work.first, work.second);\n    free(work.second);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "edited": false, "score": 0, "creation_date": 1569458446, "post_id": 58103333, "comment_id": 102606605, "body": "What do you expect to use? A x,y coordinate? Center of the screen? Other?"}, {"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "reply_to_user": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "edited": false, "score": 1, "creation_date": 1569508554, "post_id": 58103333, "comment_id": 102627328, "body": "I need exactly what MoveWindow does on Windows : <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-movewindow\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/api/winuser/&hellip;</a>   It uses desktop pixel coordinates. Multiple monitors are combined to single desktop space so they contained in single outline rectangle. MoveWindow uses coordinates in that box."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1571519156, "post_id": 58103333, "comment_id": 103270402, "body": "I would like to know if I am understanding right this. <b>1)</b> You have a screen where it\u2019s Resolution could be eg 1440/900. <b>2)</b> You need to know programmatically which screen size uses the monitor. <b>3)</b> Once that you know it programmatically, then you need to set your window based on its screen size to a fixed position. Do I understand it Right? If not, could you please provide more information about this?"}, {"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1571594943, "post_id": 58103333, "comment_id": 103284607, "body": "@Michi. First case: to be able to restore the window to the position user left it in previous session. Second case: I want dialog window to be aligned with its parent window. Both windows use decorations."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1571601094, "post_id": 58103333, "comment_id": 103286073, "body": "@c-smile Probably GSettings is what you need =&gt;&gt; <a href=\"https://developer.gnome.org/gio/stable/GSettings.html#GSettings.description\" rel=\"nofollow noreferrer\">developer.gnome.org/gio/stable/&hellip;</a>.  Read also about <a href=\"https://blog.gtk.org/2017/05/01/first-steps-with-gsettings/\" rel=\"nofollow noreferrer\">First Steps With GSettings</a>"}, {"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1571625204, "post_id": 58103333, "comment_id": 103290454, "body": "@Michi How GSettings will help me to implement <code>MoveWindow(wnd, frameBox)</code> ?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1571664183, "post_id": 58103333, "comment_id": 103305188, "body": "@c-smile you do not implement it with GSetting. You need that after the user uses your application and makes some changes to it, like in your case he move the window to a new position, after the user close the application and run it again, the position of the window should be there where the user left it before he Closed it.  If I am right (because this is what I understand what you ask) then GSetting should do the job."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1571666840, "post_id": 58103333, "comment_id": 103306595, "body": "<a href=\"https://wiki.gnome.org/HowDoI/SaveWindowState\" rel=\"nofollow noreferrer\">Please Read This</a>."}], "answers": [{"comments": [{"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 0, "creation_date": 1569719622, "post_id": 58120918, "comment_id": 102686612, "body": "Not so sure I understand how this is related to my question. How your code will help to define dimensions of window <b>frame</b> at startup?   Your code just moves frame to point 100, 40. But you can do that already and without need of handling realize event."}, {"owner": {"reputation": 746, "user_id": 12126234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10a7b87642cedea860405eebe2625b2?s=128&d=identicon&r=PG&f=1", "display_name": "lb90", "link": "https://stackoverflow.com/users/12126234/lb90"}, "reply_to_user": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 0, "creation_date": 1569766444, "post_id": 58120918, "comment_id": 102694773, "body": "Hi, I thought your question was about placing the window frame at a specific position (i.e. the X and Y arguments of MoveWindow) at startup. And yes, you can do that without connecting to the &quot;realize&quot; signal. You can just call gtk_window_move and then show the window. So you want to set a value for the whole window frame dimension (taking in account the window decorations)?"}, {"owner": {"reputation": 746, "user_id": 12126234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10a7b87642cedea860405eebe2625b2?s=128&d=identicon&r=PG&f=1", "display_name": "lb90", "link": "https://stackoverflow.com/users/12126234/lb90"}, "reply_to_user": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 0, "creation_date": 1569767202, "post_id": 58120918, "comment_id": 102694952, "body": "I don&#39;t think there is a way to set the whole frame dimension, only the client area dimension. As a workaround you can use CSD (Client Side Decoration) with a GtkHeaderBar. Then you can get the GtkHeaderBar allocated size and account for that when calling gtk_window_resize"}, {"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 0, "creation_date": 1569768091, "post_id": 58120918, "comment_id": 102695190, "body": "&quot;I don&#39;t think there is a way to set the whole frame dimension...&quot;  that is what I discovered too before asking.  For me lack of such basic UI function in GTK appeared so strange that I decided to ask to verify that I haven&#39;t missed anything...  set-window-frame-box-on-screen functionality is in any decent GUI OS environment but not GTK for some reasons. Strange."}], "tags": [], "owner": {"reputation": 746, "user_id": 12126234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10a7b87642cedea860405eebe2625b2?s=128&d=identicon&r=PG&f=1", "display_name": "lb90", "link": "https://stackoverflow.com/users/12126234/lb90"}, "is_accepted": false, "score": 1, "last_activity_date": 1569514525, "creation_date": 1569514525, "answer_id": 58120918, "question_id": 58103333, "link": "https://stackoverflow.com/questions/58103333/set-frame-position-of-decorated-gtkwindow-on-screen/58120918#58120918", "title": "Set frame position of decorated GtkWindow on screen", "body": "<p>Connect to the \"realize\" signal for the window (<em>important</em>: before calling gtk_widget_show). Then call gtk_window_move from the handler:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nvoid on_window_realize(GtkWidget *widget,\n                       gpointer user_data)\n{\n  GtkWindow *window = GTK_WINDOW(user_data);\n  gtk_window_move(window, 100, 40);\n}\n\nint main(int argc, char **argv) {\n  GtkWidget *window = NULL;\n\n  gtk_init(&amp;argc, &amp;argv);\n\n  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n  g_signal_connect(window,\n                   \"realize\",\n                   G_CALLBACK(on_window_realize),\n                   (gpointer)window);\n  g_signal_connect(window, \"destroy\", gtk_main_quit, NULL);\n  gtk_widget_show(window);\n\n  gtk_main();\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1569514525, "creation_date": 1569430890, "last_edit_date": 1569432101, "question_id": 58103333, "link": "https://stackoverflow.com/questions/58103333/set-frame-position-of-decorated-gtkwindow-on-screen", "title": "Set frame position of decorated GtkWindow on screen", "body": "<p>I have a task to restore window <strong>frame</strong> position on screen on program startup - so to define initial window position. </p>\n\n<p>Consider the following decorated GtkWindow instance on Linux:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2TVKc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2TVKc.png\" alt=\"enter image description here\"></a></p>\n\n<p>The window has two principal boxes: frame box and client box.</p>\n\n<p>And there are two GTK functions that allow to set size and position of the window on screen:</p>\n\n<p><a href=\"https://developer.gnome.org/gtk3/stable/GtkWindow.html#gtk-window-move\" rel=\"nofollow noreferrer\">gtk_window_move()</a> - sets window's <strong>frame</strong> box position on screen and </p>\n\n<p><a href=\"https://developer.gnome.org/gtk3/stable/GtkWindow.html#gtk-window-resize\" rel=\"nofollow noreferrer\">gtk_window_resize</a> - sets window's <strong>client</strong> box size.</p>\n\n<p>Question: </p>\n\n<p>Is there any way in GTK to define initial <strong>frame</strong> placement of the window?</p>\n\n<p>On Windows I can do that by calling <code>MoveWindow()</code> and on MacOS <code>NSWindow setFrame</code> method. But on GTK... Am I asking too much? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5818, "user_id": 978558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d023acf70b927cb813b48631195e346e?s=128&d=identicon&r=PG", "display_name": "fredrik", "link": "https://stackoverflow.com/users/978558/fredrik"}, "edited": false, "score": 0, "creation_date": 1569431122, "post_id": 58103295, "comment_id": 102597999, "body": "I&#39;d say you need to use a different algorithm, with a lower time complexity. Which algorithms have you tried?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1569431147, "post_id": 58103295, "comment_id": 102598008, "body": "Your&#39;re using an O(n^2) algorithm. There are much better algorithms for this; in fact, you can get it down to O(n)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569431337, "post_id": 58103295, "comment_id": 102598088, "body": "That&#39;s the point of the challenge: not just to find the answer, but to find the right algorithm."}, {"owner": {"reputation": 23, "user_id": 11158324, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-14LLVU8-EtY/AAAAAAAAAAI/AAAAAAAAABI/3aNWcr2Z2ps/photo.jpg?sz=128", "display_name": "Anand Yeole", "link": "https://stackoverflow.com/users/11158324/anand-yeole"}, "edited": false, "score": 0, "creation_date": 1569435068, "post_id": 58103295, "comment_id": 102599637, "body": "suggest me a bettter way by which i can find minimum swaps"}, {"owner": {"reputation": 23, "user_id": 11158324, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-14LLVU8-EtY/AAAAAAAAAAI/AAAAAAAAABI/3aNWcr2Z2ps/photo.jpg?sz=128", "display_name": "Anand Yeole", "link": "https://stackoverflow.com/users/11158324/anand-yeole"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1569437370, "post_id": 58103295, "comment_id": 102600593, "body": "@LeeDanielCrocker i want to find minimum swaps within limits if i use bubble sort then swap no increases suggest me a better algorithm"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1569440772, "post_id": 58103295, "comment_id": 102601922, "body": "As WV said, the point of the exercise is to learn how to choose the right algorithm. Google &quot;minimum swaps algorithm&quot; and learn."}], "owner": {"reputation": 23, "user_id": 11158324, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-14LLVU8-EtY/AAAAAAAAAAI/AAAAAAAAABI/3aNWcr2Z2ps/photo.jpg?sz=128", "display_name": "Anand Yeole", "link": "https://stackoverflow.com/users/11158324/anand-yeole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569430769, "creation_date": 1569430769, "question_id": 58103295, "link": "https://stackoverflow.com/questions/58103295/ways-in-which-code-can-be-optimize-to-run-in-timelimit", "title": "Ways in which code can be optimize to run in timelimit", "body": "<p>you are given an unsorted array we have to find minimum number of swaps required to sort an array in ascending order</p>\n\n<p>code written by me works but it is not optimized code.this problem is from hackerRank( <a href=\"https://www.hackerrank.com/challenges/minimum-swaps-2/problem?h_l=interview&amp;playlist_slugs%5B%5D=interview-preparation-kit&amp;playlist_slugs%5B%5D=arrays\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/minimum-swaps-2/problem?h_l=interview&amp;playlist_slugs%5B%5D=interview-preparation-kit&amp;playlist_slugs%5B%5D=arrays</a> ) it runs out timelimit when array size is like 100000</p>\n\n<pre><code>int main()\n{\n    int num;\n    int swap=0;\n    scanf(\"%d\",&amp;num);\n    int arr[num];\n    for(int i=0;i&lt;num;i++)\n    {\n        scanf(\"%d\",&amp;arr[i]);\n    }\n    for(int i=0;i&lt;num;i++)\n    {\n        if(arr[i]==i+1)\n        {}\n        else \n        {\n            for(int j=i;j&lt;num;j++)\n            {\n                if(i+1==arr[j])\n                {\n                    int temp=arr[i];\n                    arr[i]=arr[j];\n                    arr[j]=temp;\n                    swap++;\n                }\n            }\n        }\n    }\n    printf(\"%d\",swap);\n    return 0;\n}\n</code></pre>\n\n<p>it is the link for test case where it runs out of time\n<a href=\"https://hr-testcases-us-east-1.s3.amazonaws.com/70816/input10.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1569437814&amp;Signature=zGqla8NqSOENSPJNt%2BkokJBX%2Fmk%3D&amp;response-content-type=text%2Fplain\" rel=\"nofollow noreferrer\">https://hr-testcases-us-east-1.s3.amazonaws.com/70816/input10.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1569437814&amp;Signature=zGqla8NqSOENSPJNt%2BkokJBX%2Fmk%3D&amp;response-content-type=text%2Fplain</a>\nso provide ways to optimize code</p>\n"}, {"tags": ["c", "xcode", "macos", "gcc", "stdio"], "comments": [{"owner": {"reputation": 4633, "user_id": 11383441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fe326a8e47283a622c4dc9bf700992?s=128&d=identicon&r=PG&f=1", "display_name": "Kalana", "link": "https://stackoverflow.com/users/11383441/kalana"}, "edited": false, "score": 0, "creation_date": 1569430550, "post_id": 58103092, "comment_id": 102597722, "body": "use this <code>#include &lt;stdio.h&gt;</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569435130, "post_id": 58103092, "comment_id": 102599657, "body": "Check <a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/52530212#52530212\">Can&#39;t compile C program on a Mac after upgrade to Mojave</a> \u2014 it will likely help you."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569435781, "post_id": 58103092, "comment_id": 102599924, "body": "You seem to be using a &#39;real&#39; <code>gcc</code> (as opposed to the <code>gcc</code> from XCode which is actually <code>clang</code> in disguise (<code>&#47;usr&#47;bin&#47;gcc --version</code> likely produces <code>Apple clang version 11.0.0 (clang-1100.0.33.8) \u2014 Target: x86_64-apple-darwin18.7.0</code> or something similar (that&#39;s from XCode 11.0).  The error message is from &#39;real&#39; GCC.  It suggests that there is a problem in <code>&#47;usr&#47;include</code> \u2014 there are three files <code>_stdio.h</code> under <code>&#47;usr&#47;include</code> on my machine (in <code>&#47;usr&#47;include</code>, <code>&#47;usr&#47;include&#47;xlocale</code> and <code>&#47;usr&#47;include&#47;secure</code>) \u2014 and maybe the other question will help you."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 12016752, "user_type": "registered", "profile_image": "https://graph.facebook.com/1653255865/picture?type=large", "display_name": "Nico Battelli", "link": "https://stackoverflow.com/users/12016752/nico-battelli"}, "edited": false, "score": 1, "creation_date": 1569431171, "post_id": 58103242, "comment_id": 102598018, "body": "there is no &lt;_stdio.h&gt;"}], "tags": [], "owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "is_accepted": false, "score": 3, "last_activity_date": 1569431496, "last_edit_date": 1569431496, "creation_date": 1569430547, "answer_id": 58103242, "question_id": 58103092, "link": "https://stackoverflow.com/questions/58103092/stdio-h-no-such-file-or-directory/58103242#58103242", "title": "stdio.h: No such file or directory", "body": "<p>Rename <code>&lt;_stdio.h&gt;</code> to <code>&lt;stdio.h&gt;</code>.</p>\n\n<p>P.S. Here is an updated answer to the updated question:</p>\n\n<p>Try reinstalling Xcode using <code>xcode-select --install</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 10515711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CoO_xjEGEp0/AAAAAAAAAAI/AAAAAAAAADs/L8dKcLm1F3g/photo.jpg?sz=128", "display_name": "Chener Zhang", "link": "https://stackoverflow.com/users/10515711/chener-zhang"}, "is_accepted": false, "score": 3, "last_activity_date": 1573285714, "last_edit_date": 1573285714, "creation_date": 1573273581, "answer_id": 58776414, "question_id": 58103092, "link": "https://stackoverflow.com/questions/58103092/stdio-h-no-such-file-or-directory/58776414#58776414", "title": "stdio.h: No such file or directory", "body": "<p><strong>I actually have the same issue that you have;here is the step, follow it, it may help you</strong></p>\n\n<p><strong>choose 1:</strong> Copy and paste the following every time you open the terminal</p>\n\n<pre><code>export CPATH=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include\n</code></pre>\n\n<p><strong>choose 2:</strong>  If the choose 1 is working then:</p>\n\n<p><strong>Step-1:</strong> Paste the following code in terminal: </p>\n\n<pre><code>open /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include\n</code></pre>\n\n<p><strong>Step-2:</strong> Open a new terminal, paste the following code:</p>\n\n<pre><code>open /usr/local/lib/gcc/x86_64-apple-darwin18.5.0/8.3.0/include-fixed/\n</code></pre>\n\n<p><strong>Step-3:</strong> copy All file file from <strong>step-1</strong>, the direction(include) you have open -> paste in the <strong>step-2</strong>, the direction(include-fixed) you open </p>\n\n<p><strong>Step 4:</strong> When it asks you about whether to REPLACE the file or not, choose to replace. </p>\n"}], "owner": {"reputation": 51, "user_id": 12016752, "user_type": "registered", "profile_image": "https://graph.facebook.com/1653255865/picture?type=large", "display_name": "Nico Battelli", "link": "https://stackoverflow.com/users/12016752/nico-battelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1491, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1573285714, "creation_date": 1569429972, "last_edit_date": 1569435375, "question_id": 58103092, "link": "https://stackoverflow.com/questions/58103092/stdio-h-no-such-file-or-directory", "title": "stdio.h: No such file or directory", "body": "<p>I got the foll. error compiling a simple <code>ciao.c program</code></p>\n\n<pre><code> In file included from ciao.c:1:\n/usr/local/lib/gcc/x86_64-apple-darwin18.5.0/8.3.0/include-fixed/stdio.h:78:10: fatal error: _stdio.h: No such file or directory\n #include &lt;stdio.h&gt;\n          ^~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>I've already installed Xcode, command line tools and what you want, but nope.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    printf(\"Hello, World!\");\n    return 0;\n}\n</code></pre>\n\n<p>Could you help me please?</p>\n"}, {"tags": ["c", "unit-testing"], "answers": [{"comments": [{"owner": {"reputation": 1431, "user_id": 3946165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03c71d793fda399bdf1f198a52b2953?s=128&d=identicon&r=PG", "display_name": "mcarlin", "link": "https://stackoverflow.com/users/3946165/mcarlin"}, "edited": false, "score": 1, "creation_date": 1569430664, "post_id": 58103244, "comment_id": 102597778, "body": "If you could, accept your answer when you get a chance, thanks!"}, {"owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "reply_to_user": {"reputation": 1431, "user_id": 3946165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03c71d793fda399bdf1f198a52b2953?s=128&d=identicon&r=PG", "display_name": "mcarlin", "link": "https://stackoverflow.com/users/3946165/mcarlin"}, "edited": false, "score": 0, "creation_date": 1569430926, "post_id": 58103244, "comment_id": 102597914, "body": "I have to wait 2 days but will do!"}], "tags": [], "owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "is_accepted": true, "score": 1, "last_activity_date": 1569430552, "creation_date": 1569430552, "answer_id": 58103244, "question_id": 58103085, "link": "https://stackoverflow.com/questions/58103085/how-do-i-fake-a-c-function-that-takes-a-2d-array-as-input-with-fake-function-fra/58103244#58103244", "title": "How do I fake a C function that takes a 2D array as input with Fake Function Framework (FFF)?", "body": "<p>I figured it out. The proper typedef for the 2D array is:</p>\n\n<pre><code>typedef char (*FileNames)[MAX_FILENAME_SIZE];\n</code></pre>\n"}], "owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58103244, "answer_count": 1, "score": 0, "last_activity_date": 1569430552, "creation_date": 1569429952, "question_id": 58103085, "link": "https://stackoverflow.com/questions/58103085/how-do-i-fake-a-c-function-that-takes-a-2d-array-as-input-with-fake-function-fra", "title": "How do I fake a C function that takes a 2D array as input with Fake Function Framework (FFF)?", "body": "<p>I'm having trouble figuring out how to correctly setup the macro in FFF for faking a function that takes an array of strings. Trying to pass the 2D array seems illegal so I created a typedef to try and get around that. </p>\n\n<pre><code>/*Macro for faking the function*/\n#define getFilesInDir fake_getFilesInDir\nFAKE_VOID_FUNC7(fake_getFilesInDir, char*, FileNames, uint16_t, char*, char*, \nint32_t*, uint8_t)\n\n#define MAX_FILENAME_SIZE           400\ntypedef char FileNames[][MAX_FILENAME_SIZE];\n\n/*Declaration in another header file*/\nvoid getFilesInDir(char* dir, FileNames filesInDir, uint16_t maxNumFiles, char* includeString,\n               char* excludeString, int32_t* fileCnt, uint8_t recursive);\n\n\n/*Code under test*/\nchar fileNames[CFU_MAX_NUM_FILES][MAX_FILENAME_SIZE]; //Local variable\n//...\ngetFilesInDir(path, fileNames, CFU_MAX_NUM_FILES, (char*)cfgExt, NULL, &amp;fileCount, false);\n</code></pre>\n\n<p>This code gives me 2 errors. <strong>arg1_history: missing subscript</strong> and <strong>struct fake_getFilesInDir_Fake has an illegal zero-sized array</strong></p>\n\n<p>Any idea what I'm doing wrong?</p>\n"}, {"tags": ["c", "function", "recursion", "static-variables"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 1, "creation_date": 1569429768, "post_id": 58103013, "comment_id": 102597369, "body": "<code>static</code> local variables are only initialized once. That&#39;s one of the main points of them."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1569429785, "post_id": 58103013, "comment_id": 102597374, "body": "<i>&quot;the static variable &#39;r&#39; is re-assigned zero again&quot;</i> No it&#39;s not"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1569429898, "post_id": 58103013, "comment_id": 102597412, "body": "So if you want to reassign static variable <code>r</code>, you&#39;ll need to add an assignment expression to do so."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1569430044, "post_id": 58103013, "comment_id": 102597472, "body": "Don&#39;t confuse <code>static int r = 0</code> with an actual <i>assignment</i>. It&#39;s actually defining the initial value of the variable, nothing more."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1569430581, "post_id": 58103013, "comment_id": 102597737, "body": "If it helps, you can pretend that the <code>static int r=0;</code> declaration is placed outside the function and it will behave the same. Being inside the function only hides the variable from other functions. In both cases, it is only initialized once. (Without the <code>static</code> keyword, inside the function <code>r</code> would have <i>automatic</i> storage class, and <i>would</i> be initialized every time the function is called.)"}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1569431025, "post_id": 58103320, "comment_id": 102597955, "body": "Of course, in that case, there is not much point making the variable static. The only effect of the <code>static</code> would be to make the function not MT-safe."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1569431169, "post_id": 58103320, "comment_id": 102598017, "body": "@IanAbbott Yes indeed. It makes little sense to keep the variable marked as static. I didn&#39;t want to deviate from the original source too much as the author appeared to be confused on how static variables works."}], "tags": [], "owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1569430839, "creation_date": 1569430839, "answer_id": 58103320, "question_id": 58103013, "link": "https://stackoverflow.com/questions/58103013/why-does-this-function-return-integer-17-after-completing-its-recursive-run/58103320#58103320", "title": "Why does this function return integer 17 after completing its recursive run?", "body": "<p>Replace</p>\n\n<pre><code>static int r=0;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>static int r;\nr = 0;\n</code></pre>\n\n<p>Static variables are initialised only <strong>once</strong> before main. You have to explicitly re-initialise it to 0 each time you need to do it.</p>\n"}], "owner": {"reputation": 1, "user_id": 11662066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9916b493fcf90ff126884e38f2f95d3?s=128&d=identicon&r=PG", "display_name": "user11662066", "link": "https://stackoverflow.com/users/11662066/user11662066"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1569430839, "creation_date": 1569429702, "question_id": 58103013, "link": "https://stackoverflow.com/questions/58103013/why-does-this-function-return-integer-17-after-completing-its-recursive-run", "title": "Why does this function return integer 17 after completing its recursive run?", "body": "<p>According to me, the function should return 2 as answer, because every time the function is called recursively,the static variable 'r' is re-assigned zero again.\nNote: The passed argument in the function is 5.</p>\n\n<pre><code>int fun(int n){\nstatic int r=0;\n  if(n&lt;=0)return 0;\n  else if(n&gt;3){\n   r=n;\n   return fun(n-2)+2;\n}\n  else return fun(n-1)+r;\n}\n</code></pre>\n\n<p>The function actually returns 17 when 5 is passed to it.</p>\n"}, {"tags": ["c", "ram", "intel-fpga", "soc"], "answers": [{"tags": [], "owner": {"reputation": 831, "user_id": 3789324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pxqcq.jpg?s=128&g=1", "display_name": "auserdude", "link": "https://stackoverflow.com/users/3789324/auserdude"}, "is_accepted": false, "score": 1, "last_activity_date": 1576418384, "creation_date": 1576418384, "answer_id": 59344610, "question_id": 58102937, "link": "https://stackoverflow.com/questions/58102937/how-to-share-memory-of-sdram-between-hps-and-fpga-in-cyclone-v/59344610#59344610", "title": "How to share memory (of SDRAM) between HPS and FPGA in Cyclone-V?", "body": "<p>You should set bit 4 in L3 configuration register at 0xFF800000.</p>\n\n<p>This bit enables the Lightweight HPS to FPGA AXI bridge in the main user space. \nOnce this bit is set you can access the FPGA memory space through the bus.</p>\n\n<p>Notice that the Lightweight bus is mapped at 0xFF200000 in the HPS memory space.\nThis means your FPGA addresses shall be remapped on top of this address when accessed from the HPS.</p>\n\n<p>See the Cyclone V HPS address space information in the <a href=\"https://www.intel.com/content/dam/www/programmable/us/en/pdfs/literature/hb/cyclone-v/cv_54001.pdf\" rel=\"nofollow noreferrer\">Cyclone V Hard Processor System Technical Reference Manual</a>, chapter \"HPS Address Spaces\".</p>\n"}], "owner": {"reputation": 31, "user_id": 8224929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661f9be02f2efd7d796c27aa26e472e2?s=128&d=identicon&r=PG&f=1", "display_name": "Ram Chandra", "link": "https://stackoverflow.com/users/8224929/ram-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576418384, "creation_date": 1569429369, "question_id": 58102937, "link": "https://stackoverflow.com/questions/58102937/how-to-share-memory-of-sdram-between-hps-and-fpga-in-cyclone-v", "title": "How to share memory (of SDRAM) between HPS and FPGA in Cyclone-V?", "body": "<p>I want to share memory between HPS and FPGA in Cyclone-V. I instantiated \"sdram_slave\" interface in Qsys(Platform Designer) with avalon master and everything.I want to send the base_address of memory in SDRAM from HPS to FPGA, so that FPGA can read the same data. The problem I am facing is, HPS has 1GB SDRAM(i.e, 2^30 - 1073741824  address locations), but I got address of my memory far greater than that(something like -3196356160-2^32). How is it Possible? How can I send the correct base_address of the memory I want to share with FPGA which is in the range of 0 to 2^30?</p>\n\n<p>Here is my code,</p>\n\n<pre><code>#define soc_cv_av\n\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt; \n#include &lt;sys/mman.h&gt; \n#include \"hwlib.h\" \n#include \"socal/socal.h\"\n#include \"socal/hps.h\" \n#include \"socal/alt_gpio.h\"\n#include \"hps_0.h\"\n\n#define HW_REGS_BASE 0xFF200000\n#define HW_REGS_SPAN 0x00200000\nint fd;\n\nvoid* axi_lw_virtual_base;\n\nint main (){\n\n    if( (fd=open(\"/dev/mem\",(O_RDWR|O_SYNC)) ) == -1 ){\n        printf(\"Error Could not open file /dev/mem\\n\");\n        return 1;\n    }\n\n    axi_lw_virtual_base=mmap(NULL,HW_REGS_SPAN,(PROT_READ|PROT_WRITE),MAP_SHARED,fd,HW_REGS_BASE);\n    if(axi_lw_virtual_base == MAP_FAILED){\n        printf(\"AXI_LW Error Memory-Mapping Failed\\n\");\n        close(fd);\n        return 1;\n    }\n    //-------------------------------------------\n    volatile char arr[8192];\n    int i=0;\n    for(i=0; i&lt;8192; i++){\n        arr[i] = (char)(65+i%25);\n    }\n\n    void *arr_base = &amp;arr;\n    printf(\"%u\\n\", arr_base); // outputs something in range of 3196356160 &lt;--\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569429244, "post_id": 58102879, "comment_id": 102597139, "body": "The <code>while(p%i==0)</code> doesn&#39;t seem to be doing what you propose it to do. How about dividing this code to functions and testing theme one by one?"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 2, "creation_date": 1569429360, "post_id": 58102879, "comment_id": 102597186, "body": "At first glance what i guess is its because you need to do <code>sum=0</code> inside for loop."}, {"owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "edited": false, "score": 0, "creation_date": 1569429707, "post_id": 58102879, "comment_id": 102597345, "body": "It&#39;s a good idea to use a function, but I still can&#39;t figure out the problem in the while loop."}, {"owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "reply_to_user": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569429908, "post_id": 58102879, "comment_id": 102597413, "body": "@Mihir But I &#39;ve declared and defined it as a global variable."}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569430061, "post_id": 58102879, "comment_id": 102597479, "body": "@clockstream, sum is <code>not</code> a global variable. Also even if it was, your sums are independent for every number, so every time it needs to be started from 0."}, {"owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "reply_to_user": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569430336, "post_id": 58102879, "comment_id": 102597602, "body": "@Mihir I got it, sum shouldn&#39;t be global variable, to a new p it needs to be started from 0."}, {"owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "edited": false, "score": 0, "creation_date": 1569430417, "post_id": 58102879, "comment_id": 102597649, "body": "Thank you all very much."}, {"owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "edited": false, "score": 0, "creation_date": 1569430465, "post_id": 58102879, "comment_id": 102597674, "body": "I&#39;ll go to see if i can get the right answer."}, {"owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "reply_to_user": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569430659, "post_id": 58102879, "comment_id": 102597772, "body": "@Mihir still can&#39;t get the right answer. It even didn&#39;t give the output."}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1569430688, "post_id": 58102879, "comment_id": 102597792, "body": "@clockstream, I have retained your coding style and edited your code and posted an answer. I have added commenst whereever you made mistakes]"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "edited": false, "score": 0, "creation_date": 1569431306, "post_id": 58103239, "comment_id": 102598069, "body": "Thank you very much. It&#39;s right though there is something wrong with the output format. BTW, the function getchar() is my copy from others, but i&#39;ve forgot its function. somebody thinks it is necessary behind scanf"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "reply_to_user": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "edited": false, "score": 0, "creation_date": 1569431427, "post_id": 58103239, "comment_id": 102598138, "body": "@clockstream, most probably you mean your factors are displayed on newlines? To display them on single line, you need to change <code>printf(&quot;%d \\n&quot;,goal[i]);</code> to <code>printf(&quot;%d &quot;,goal[i]);</code>"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "reply_to_user": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "edited": false, "score": 0, "creation_date": 1569431569, "post_id": 58103239, "comment_id": 102598206, "body": "Most prolly you may have encountered those issues where there is a <code>\\n</code> in the buffer which doesn&#39;t let you take the input. Although, getchar() is just a workaround in that case. Also, it not the case here."}], "tags": [], "owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "is_accepted": true, "score": 1, "last_activity_date": 1569434982, "last_edit_date": 1569434982, "creation_date": 1569430527, "answer_id": 58103239, "question_id": 58102879, "link": "https://stackoverflow.com/questions/58102879/looking-for-the-sum-of-factors-equal-to-the-number-of-oneself/58103239#58103239", "title": "Looking for the sum of factors equal to the number of oneself", "body": "<p>Making the same a little clean,</p>\n\n<pre><code>int main()\n{\n    int N, factors_sum, factors_cnt, num, j;\n\n    scanf(\"%d\", &amp;N);\n\n    int *factors = malloc(sizeof(int) * N/2);\n\n    if (factors == NULL)\n    {\n        perror(\"malloc(2)\");\n        return 1;\n    }\n\n    for (num = 2 ; num &lt; N ; ++num)\n    {\n        factors_cnt = 0;\n        factors_sum = 0;\n        for (j = 1 ; j &lt;= num/2 ; ++j)\n            if (num % j == 0)\n                factors_sum += (factors[factors_cnt++] = j);\n\n        if (factors_sum == num)\n        {\n            printf(\"%d its factors are\", num);\n            for (j = 0 ; j &lt; factors_cnt ; ++j)\n                printf(\" %d\", factors[j]);\n            printf(\"\\n\");\n        }\n    }\n    free(factors);\n    return 0;\n}\n</code></pre>\n\n<p>Modifications retaining your code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define NUM 100\nint main()\n    {\n    int goal[NUM];//array for factors.\n    int sum=0;\n    int N;\n    scanf(\"%d\",&amp;N);\n    //getchar(); // I donno why you need this, better to remove it\n    for(int p=2;p&lt;N;p++)//1 and N are not included.\n    {\n        // sum is different for every number\n        // need to be set to 0 individually for every number\n        sum = 0; \n        int j=0;\n        for(int i=1;i&lt;p; i++) // i++ everytime\n        {\n            //get factors and put them into array.\n            if (p%i==0)\n            // changed while to if\n            // while would keep executing forever\n            {\n                goal[j]=i;\n                sum+=goal[j];\n                j++;\n            }\n        }\n        //judge the sum of factors and p the two values are equal.\n        if (sum==p)\n        {\n            printf(\"%d its factors are \",p);\n\n            for(int i=0;i&lt;j;i++)\n            {\n                // no need for while here\n                printf(\"%d \\n\",goal[i]);\n            }\n        }\n    }\n    return 0;\n\n}\n</code></pre>\n\n<p>I have made modifications in your code and corrected/commented where you have made mistakes.</p>\n"}], "owner": {"reputation": 101, "user_id": 10554956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab97426b3c379f010d9de26b83e59508?s=128&d=identicon&r=PG&f=1", "display_name": "youpen", "link": "https://stackoverflow.com/users/10554956/youpen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58103239, "answer_count": 1, "score": 0, "last_activity_date": 1569434982, "creation_date": 1569429134, "last_edit_date": 1569430753, "question_id": 58102879, "link": "https://stackoverflow.com/questions/58102879/looking-for-the-sum-of-factors-equal-to-the-number-of-oneself", "title": "Looking for the sum of factors equal to the number of oneself", "body": "<p>I'm trying to finish my homework, while there is something trapped me.</p>\n\n<p>Here the question:\nIn the range of N, output those numbers whose factors sum is equal to themselves according to the following format.</p>\n\n<p>Input:</p>\n\n<pre><code>1000\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>6 its factors are 1 2 3 \n28 its factors are 1 2 4 7 14 \n496 its factors are 1 2 4 8 16 31 62 124 248 \n</code></pre>\n\n<p>Here my code, please tell me why can't i get the right output. Appreciate it if \nyou can improve it for me.</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define NUM 100\nint main()\n    {\n    int goal[NUM];//array for factors.\n    int N;\n    scanf(\"%d\",&amp;N);\n    getchar();\n    for(int p=2;p&lt;N;p++)//1 and N are not included.\n     {\n        int j=0,sum=0;\n        for(int i=1;i&lt;p; )\n        {\n            //get factors and put them into array.\n            while(p%i==0)\n            {\n                goal[j]=i;\n                sum+=goal[j];\n                j++;\n                i++;\n            }\n        }\n        //judge the sum of factors and p the two values are equal.\n        if(sum==p)\n        {\n            printf(\"%d its factors are \",p);\n\n            for(int i=0;i&lt;j;i++)\n            {\n                while(i==j-1)\n                printf(\"%d \\n\",goal[i]);\n            }\n        }\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1569429004, "post_id": 58102796, "comment_id": 102597028, "body": "A stack overflow would presumably lead to a noisy error. That said, you should really post your <code>fact</code> implementation."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1569429007, "post_id": 58102796, "comment_id": 102597030, "body": "Without <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> I can only speculate (but with high confidence degree) that your <code>fact</code> is simply overflowing the integer."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1569429865, "post_id": 58102796, "comment_id": 102597397, "body": "Help us out - provide complete code we can try, provide expected output and actual output for an error example.  There are many more people that can help if you don&#39;t  require them to understand application to distinguish a right from a wrong answer.  Also the code for <code>fact()</code> is missing."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1569429930, "post_id": 58102796, "comment_id": 102597423, "body": "If <code>fact</code> returns an <code>int</code> or <code>long</code> you will eventually get an integer overflow either in the result of <code>fact</code> or when you multiply it with <code>(2*i+1)</code>. To debug this, split the calculation into smaller parts and print the intermediate results, especially the return value of <code>fact</code> and the result of <code>(2*i+1) * fact(i)</code>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569432031, "post_id": 58102796, "comment_id": 102598388, "body": "Have you tried running it in a debugger?  Using <code>printf()</code> debugging is a poor substitute."}], "answers": [{"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1569444116, "post_id": 58104127, "comment_id": 102603303, "body": "You might also consider using the C standard math library <code>lgamma()</code> or <code>tgamma()</code>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1569448907, "post_id": 58104127, "comment_id": 102604770, "body": "@LeeDanielCrocker : That would not have occurred to me; you should perhaps post an answer of your own - deserves more than a comment perhaps."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1569453322, "last_edit_date": 1569453322, "creation_date": 1569434347, "answer_id": 58104127, "question_id": 58102796, "link": "https://stackoverflow.com/questions/58102796/why-does-the-looping-statement-go-wrong-when-the-10th-loop-ends-in-a-c-program/58104127#58104127", "title": "Why does the looping statement go wrong when the 10th loop ends in a C program?", "body": "<p>You have asked about whether 10! is too big, but had you observed <code>i</code> at the point the value overflows, you will see that <code>i == 12</code>.  The expression for <code>temp</code> then is then:</p>\n\n<p>3<sup>25</sup> / 25 x 12!</p>\n\n<p>The sub expression 25 x 12!  has value 11975040000 which would require 34 bits if it is an integer expression which it will be if <code>fact()</code> is an integer function.  If it is a 32 bit integer function, it will overflow.</p>\n\n<p>If <code>fact()</code> is changed to a an unsigned 64 bit type, it gets further, but that is only good for 19! and the divisor sub-expression overflows at <code>i=18</code> (29 x 18!) before converging. </p>\n\n<p>It will converge for <code>i = 3</code> using the following factorial function implementation:</p>\n\n<pre><code>double fact(int n)\n{\n    if (n &gt;= 1)\n        return n * fact(n - 1);\n    else\n        return 1;\n}\n</code></pre>\n\n<p>With result 0.886207.  For arbitrarily large values of x you will need an arbitrary precision or \"bignum\" math library rather then built-in types.</p>\n\n<p>Inspired by Lee Crocker's comment I tried various expressions (tested at <a href=\"https://onlinegdb.com/ryBKEuFPH\" rel=\"nofollow noreferrer\">GDB Online</a>)</p>\n\n<p>1) Based on my <code>double fact( int )</code> and less your the extraneous parentheses ;</p>\n\n<pre><code>double e = (2*i)+1 ;\ntemp = pow(x,e) / (e * fact(i));\n</code></pre>\n\n<p>Results for x = 1 to 9:</p>\n\n<pre><code>x: 1.0  s(x): 0.746824                                                                                                                          \nx: 2.0  s(x): 0.882081                                                                                                                          \nx: 3.0  s(x): 0.886207                                                                                                                          \nx: 4.0  s(x): 0.886227                                                                                                                          \nx: 5.0  s(x): 0.886227                                                                                                                          \nx: 6.0  s(x): 0.889677                                                                                                                          \nx: 7.0  s(x): 2453.707036                                                                                                                       \nx: 8.0  s(x): 1055556860.115990                                                                                                                 \nx: 9.0  s(x): -nan \n</code></pre>\n\n<p>2) Using <code>tgamma()</code> :</p>\n\n<pre><code>temp = pow(x,e) / (e * tgamma(i+1)) ; \n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>x: 1.0  s(x): 0.746824                                                                                                                          \nx: 2.0  s(x): 0.882081                                                                                                                          \nx: 3.0  s(x): 0.886207                                                                                                                          \nx: 4.0  s(x): 0.886227                                                                                                                          \nx: 5.0  s(x): 0.886226                                                                                                                          \nx: 6.0  s(x): 0.882858                                                                                                                          \nx: 7.0  s(x): -83.077451                                                                                                                        \nx: 8.0  s(x): 3729162898.780624  \n</code></pre>\n\n<p>3) Using <code>lgamma()</code>:</p>\n\n<pre><code>temp = pow(x,e) / exp(log(e) + lgamma(i+1)) ;\n</code></pre>\n\n<p>Result : </p>\n\n<pre><code>x: 1.0  s(x): 0.746824                                                                                                                          \nx: 2.0  s(x): 0.882081                                                                                                                          \nx: 3.0  s(x): 0.886207                                                                                                                          \nx: 4.0  s(x): 0.886227                                                                                                                          \nx: 5.0  s(x): 0.886236                                                                                                                          \nx: 6.0  s(x): 1.904565                                                                                                                          \nx: 7.0  s(x): -322346.422518                                                                                                                    \nx: 8.0  s(x): 5416428382.734000                                                                                                                 \nx: 9.0  s(x): -nan       \n</code></pre>\n\n<p>The results differ for <code>x = 6.0</code>, but all versions break down at around there.  Which is better I am not clear - <code>fact()</code> I suspect.  The standard library functions offer no significant improvement is any.</p>\n\n<p>4) Added Lee's expression to test (if I've understood his answer correctly) :</p>\n\n<pre><code>temp = exp(e * log(x) - log(e) - lgamma(i+1)) ;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>x: 1.0  s(x): 0.746824\nx: 2.0  s(x): 0.882081\nx: 3.0  s(x): 0.886207\nx: 4.0  s(x): 0.886227\nx: 5.0  s(x): 0.886245\nx: 6.0  s(x): 2.892730\nx: 7.0  s(x): 96596.597282\nx: 8.0  s(x): -720878097610.696167\nx: 9.0  s(x): -18109761159507625984.000000\n</code></pre>\n\n<p>For reference, my test code:</p>\n\n<pre><code>double s( double x )\n{\n    double sx = x ;\n    double temp = 1.0 ;\n\n    for( int i = 1; temp &gt; 1e-6; i++ ) \n    {\n        double e = (2*i)+1 ;\n\n        // Uncomment one of the following:\n        //temp = pow(x,e) / (e * fact(i));\n        //temp = pow(x,e) / (e * tgamma(i+1)) ; \n        //temp = pow(x,e) / exp(log(e) + lgamma(i+1)) ;\n        //temp = exp(e * log(x) - log(e) - lgamma(i+1)) ;\n\n        sx += (i % 2) == 0 ? temp : -temp ;  \n    }\n\n    return sx ;\n}\n\nint main()\n{\n    for( double x = 1.0; x &lt; 10.0; x += 1.0 )\n    {\n        printf( \"x: %.1f  s(x): %lf\\n\", x, s(x) ) ;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569452775, "post_id": 58107346, "comment_id": 102605624, "body": "I have added tests to my answer and included your solution (as far as I understand it) - it appears to produce the poorest range of the expressions I  tested - may have got it wrong."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569455016, "post_id": 58107346, "comment_id": 102606020, "body": "Yes, this does start to blow up when x gets to 7+, but so do the others. I&#39;m not sure what this series is supposed to look like there."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569455494, "post_id": 58107346, "comment_id": 102606087, "body": "When x is 8.0, the values for <code>temp</code> when <code>i</code> is 60..70 get into 26 digits, way beyond the precision of double, so even after they settle down all the precision has been lost. None of the methods will help with that. Too bad I can&#39;t do the addition in log-space."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569481051, "post_id": 58107346, "comment_id": 102612198, "body": "Yes.  My point was not that it does not work for 3.0, but rather that it is useful for a smaller range than other solutions.  As it was suggested as an alternative to my fact() implementation, I had hoped it would be somehow superior.  It remains interesting, and an example of the care that must be taken with such things."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569481365, "post_id": 58107346, "comment_id": 102612366, "body": "It is not so much the 26 digit number that is the issue, all double precision values are precise to about 15 <i>significant</i> digits; it is rather the combination in the expression of both very large and very small values with different <i>magnitudes</i> of precision."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": true, "score": 0, "last_activity_date": 1569454416, "last_edit_date": 1569454416, "creation_date": 1569450628, "answer_id": 58107346, "question_id": 58102796, "link": "https://stackoverflow.com/questions/58102796/why-does-the-looping-statement-go-wrong-when-the-10th-loop-ends-in-a-c-program/58107346#58107346", "title": "Why does the looping statement go wrong when the 10th loop ends in a C program?", "body": "<p>Exponentials and factorials grow very quickly, and often overflow integer types and cause precision issues even with floating point types. Mathematicians often do calculations like these in logarithmic space. The C math library has the function lgamma(), for example, that calculates the natural logarithm of the gamma function (gamma(x) = fact(x-1)), to a precision that might be lost if you had to represent the whole factorial first and then take the log of it.</p>\n\n<p>So, assuming <code>double x</code> and <code>int n</code>, you can rewrite <code>pow(x,n) / (n * fact(n / 2))</code> as <code>exp(n * log(x) - log(n) - lgamma(1 + n / 2))</code>, and get reasonable results for large <code>n</code>.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nvoid series(double base) {\n    double x = base;\n    double sx = x, temp;\n    int i = 1;\n\n    do {\n        int e = 2 * i + 1;\n\n        temp = exp(e * log(x) - log(e) - lgamma(i+1));\n        if (1 == i%2) sx -= temp;                        \n        else sx += temp;\n\n        printf(\"%d %lf %lf\\n\", i, temp, sx); \n        i += 1;\n    } while (temp &gt; 1E-6);\n}\n\nint main(void) {\n    series(3.0);\n}\n</code></pre>\n\n<p>and the output:</p>\n\n<pre><code>1 9.000000 -6.000000\n2 24.300000 18.300000\n3 52.071429 -33.771429\n4 91.125000 57.353571\n5 134.202273 -76.848701\n6 170.333654 93.484953\n7 189.800357 -96.315405\n8 188.404766 92.089362\n9 168.572686 -76.483324\n10 137.266330 60.783006\n11 102.542831 -41.759826\n12 70.754554 28.994728\n13 45.355483 -16.360755\n14 27.146262 10.785507\n15 15.236934 -4.451427\n16 8.051335 3.599907\n17 4.018901 -0.418994\n18 1.900832 1.481838\n19 0.854220 0.627618\n20 0.365648 0.993266\n21 0.149418 0.843848\n22 0.058409 0.902257\n23 0.021883 0.880374\n24 0.007871 0.888245\n25 0.002723 0.885522\n26 0.000907 0.886429\n27 0.000291 0.886138\n28 0.000090 0.886228\n29 0.000027 0.886201\n30 0.000008 0.886209\n31 0.000002 0.886207\n32 0.000001 0.886207\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8132252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f638788cdbf51922200b4d90b4a75aee?s=128&d=identicon&r=PG&f=1", "display_name": "Fingolfin", "link": "https://stackoverflow.com/users/8132252/fingolfin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58107346, "answer_count": 2, "score": 0, "last_activity_date": 1569457268, "creation_date": 1569428783, "last_edit_date": 1569457268, "question_id": 58102796, "link": "https://stackoverflow.com/questions/58102796/why-does-the-looping-statement-go-wrong-when-the-10th-loop-ends-in-a-c-program", "title": "Why does the looping statement go wrong when the 10th loop ends in a C program?", "body": "<p>I'm trying to calculate the series'approximation, and I set accuracy as 1E-6.</p>\n\n<pre><code>int i=1;\n    float x;\n    scanf(\"%f\",&amp;x);\n    double sx = x,temp;\n    do{\n        temp = (pow(x,((2*i)+1)))/((2*i+1)*(fact(i))); //fact() is a function counting factorial\n        if((i+2)%2==1) sx-=temp;                        \n        else sx+=temp;\n        printf(\"%lf %lf\\n\",temp,sx); \n        i++;\n    }while(temp&gt;1E-6);\n    printf(\"%lf\",sx);\n</code></pre>\n\n<p>When the input is smaller than 2, I get expected output.But When the input comes to 3, there is a negative number. Is that because of stack overflow? But fact(10) isn't so big, is it? How I can get the right result? </p>\n\n<p><a href=\"https://i.stack.imgur.com/XtRxC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XtRxC.png\" alt=\"Series\"></a></p>\n"}, {"tags": ["c", "ibm-mq"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569485813, "post_id": 58103679, "comment_id": 102614572, "body": "Thx for your reply. I am not sure I am seeing RFH header. Received Message from MQ --&gt; RFH ^B \u2013"}, {"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569504471, "post_id": 58103679, "comment_id": 102624626, "body": "I just figured out that pmo.OriginalMsgHandle = hMsg <b>This line is causing RFH header</b> Though not sure how do i make it still pass message property without adding the RFH header"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "reply_to_user": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569505075, "post_id": 58103679, "comment_id": 102624986, "body": "What version of mq are you using on the receiver side?"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "reply_to_user": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569506021, "post_id": 58103679, "comment_id": 102625619, "body": "C++ classes can not use message properties, this is probably why it is converted to a RFH2."}, {"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569507220, "post_id": 58103679, "comment_id": 102626432, "body": "MQ 9 Though just found out that pmo.Version = MQPMO_VERSION_3; is causing it. It works fine with MQPMO_VERSION_2 but not sure if property will work with VERSION_2 or not."}, {"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569507311, "post_id": 58103679, "comment_id": 102626496, "body": "I think it is adding RFH header, not because of C++ in the receiver but because I am using VERSION_3 and message property."}, {"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569508515, "post_id": 58103679, "comment_id": 102627307, "body": "It seems that message properties will always have RFH header"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "reply_to_user": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569510057, "post_id": 58103679, "comment_id": 102628220, "body": "I think I mentioned it did not support message properties in the other question.  Can you please answer my question on that?"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "reply_to_user": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569510115, "post_id": 58103679, "comment_id": 102628262, "body": "The question was: Is there a difference in the content/payload of the messages are sent to server instance 1 and server instance 2?"}, {"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569514542, "post_id": 58103679, "comment_id": 102630409, "body": "no diff in content/payload. Though response is sent to different destination by each instance hence it is important to receive response by same instance that sent the request originally."}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "reply_to_user": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1569939925, "post_id": 58103679, "comment_id": 102753525, "body": "@VikasAgrawal  is the concern that you have two instances of a sending app (ex: sendapp1 and sendapp2) that get sent down stream to two instances of a responding app (ex: respondapp1 and respondapp2) and you want to ensure that the responses go back to the same sendapp instance that sent it? If that is the case then I think you can accomplish this in a much better way you may not be aware of.  I can explain it in my answer if that is the case."}], "tags": [], "owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "is_accepted": false, "score": 2, "last_activity_date": 1569447372, "last_edit_date": 1569447372, "creation_date": 1569432401, "answer_id": 58103679, "question_id": 58102246, "link": "https://stackoverflow.com/questions/58102246/how-to-send-mq-message-without-rfh-header-in-c/58103679#58103679", "title": "How to send MQ message without RFH header in C?", "body": "<p>The IBM MQ classes for JMS API and the XMS APIs (C++ and .NET) are the only APIs that default to sending a RFH2 header.</p>\n\n<p>The setting below that you mention is specific to the JMS API (there would be something similar or the same for XMS) and tells the API that the app receiving the message is not a JMS app so do not send the RFH2 header:</p>\n\n<pre><code>((com.ibm.mq.jms.MQQueue) queue).setTargetClient(JMSC.MQJMS_CLIENT_NONJMS_MQ);\n</code></pre>\n\n<hr>\n\n<p>If you are using the C API to send messages it will NOT have a RFH2 header so there is no setting to turn off what is not sent.</p>\n"}, {"tags": [], "owner": {"reputation": 6263, "user_id": 1431734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ex16s.gif?s=128&g=1", "display_name": "Roger", "link": "https://stackoverflow.com/users/1431734/roger"}, "is_accepted": false, "score": 0, "last_activity_date": 1569600227, "creation_date": 1569600227, "answer_id": 58138020, "question_id": 58102246, "link": "https://stackoverflow.com/questions/58102246/how-to-send-mq-message-without-rfh-header-in-c/58138020#58138020", "title": "How to send MQ message without RFH header in C?", "body": "<p>There are 2 ways for a C program to handle JMS (aka MQRFH2) messages.</p>\n\n<p>As you saw, the default behavior is for GMO <strong><em>Options</em></strong> field to have <em>MQGMO_PROPERTIES_AS_Q_DEF</em> and the queue's <strong><em>Property Control</em></strong> attribute to be set to <strong><em>Compatibility</em></strong>. Hence, when your application gets a message, it will have the MQRFH2 structure. </p>\n\n<p>If you changed the GMO <strong><em>Options</em></strong> field to have <em>MQGMO_PROPERTIES_IN_HANDLE</em> then when your application gets a message, it will receives just the message payload and all of the message properties will be available via the message handle.</p>\n\n<p>In the sample MQ programs included with IBM MQ, there is one called <strong><em>amqsbcg0.c</em></strong>.  There are 2 builds of it: amqsbcg (bindings mode) and amqsbcgc (client mode).</p>\n\n<p>It takes up to 3 parameters: QueueName, QMgrName and PropertyOptions</p>\n\n<p>(1) If you run it without any property options or property options set to 0 then it will set GMO Options field to have MQGMO_PROPERTIES_AS_Q_DEF.  Hence, if the message on the queue is a JMS message then the program will output an MQRFH2 structure.</p>\n\n<p>(2) If you run it with property options set to 1 then it will set GMO Options field to have MQGMO_PROPERTIES_IN_HANDLE.  Hence, if the message on the queue is a JMS message then then program will output the message properties followed by the message payload.</p>\n"}], "owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569600227, "creation_date": 1569426620, "last_edit_date": 1569507130, "question_id": 58102246, "link": "https://stackoverflow.com/questions/58102246/how-to-send-mq-message-without-rfh-header-in-c", "title": "How to send MQ message without RFH header in C?", "body": "<p>How to send MQ message without RFH header in C or in other words how do i send NonJMS MQ message using 'C' library interface?</p>\n\n<p>Basically, is there any 'C' equivalent of</p>\n\n<pre><code>((com.ibm.mq.jms.MQQueue) queue).setTargetClient(JMSC.MQJMS_CLIENT_NONJMS_MQ);\n</code></pre>\n\n<p>Following 'C' MQ calls I am making</p>\n\n<pre><code>MQCONNX(qmgrName, &amp;mqcno, &amp;hConn_, &amp;compCode, &amp;cReason);\nMQOPEN(hConn_, &amp;od, openOptions, &amp;hObj_, &amp;openCode, &amp;reason)\nMQCRTMH(hConn_, &amp;cmho, &amp;hMsg, &amp;createCode, &amp;reason)\nMQSETMP(hConn_, hMsg, &amp;smpo, &amp;prop, &amp;pd, MQTYPE_STRING, propVal.length(), propVal, &amp;compCode, &amp;reason);\npmo.Version = MQPMO_VERSION_3;\npmo.OriginalMsgHandle = hMsg;\nMQPUT(hConn_, hObj_, NULL, &amp;pmo, msg._theMessage.length(), buffer, &amp;compCode, &amp;reason);\nMQDLTMH(hConn_, &amp;hMsg, &amp;dmho, &amp;compCode, &amp;reason);\n</code></pre>\n\n<p>pmo.OriginalMsgHandle = hMsg <strong>//This line is causing RFH header</strong></p>\n\n<p>MQ Receiver is giving following output. I am using C++ MQ interface to receive the message because that's what existing code is doing and need to make sure that C generated msgs can be read by C++ receiver</p>\n\n<pre><code>2024489 - 2019-09-26 09:00:05.691154 Receiver: Received Message from MQ of size 490\n2024489 - 2019-09-26 09:00:05.691163 Receiver: Received Message from MQ --&gt; RFH ^B\n</code></pre>\n\n<pre><code>std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string (this=0x6ce7938,\n    __str=\"RFH \\002\\000\\000\\000P\\000\\000\\000\\\"\\002\\000\\000\\063\\003\\000\\000MQSTR   \\000\\000\\000\\000\\270\\004\\000\\000(\\000\\000\\000&lt;usr&gt;&lt;GROUP_ID&gt;1&lt;/GROUP_ID&gt;&lt;/usr&gt; corrId: \\\"CORR_ID\\\"\\nchannel: \\\"HIFI\\\"\\nemp\nIds {\\n    empId {\\n        type: \\\"CALLER_NO\\\"\\n        value: \\\"123456\"...)\n</code></pre>\n"}, {"tags": ["c", "linux", "system-calls"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 3, "creation_date": 1569426453, "post_id": 58102113, "comment_id": 102595914, "body": "You should <i>always</i> use <code>{  }</code> around blocks of statements (as after <code>if</code>, <code>else</code>, <code>while</code>, <code>for</code>, ...), even if the block only contains one statement. You will see why it is a good thing to get into that habit when looking at your code. (C does not consider <i>indentation</i> to be significant.) ;-)"}, {"owner": {"reputation": 1127, "user_id": 11993121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6d838d88ef60caa2eefd94e172026c?s=128&d=identicon&r=PG&f=1", "display_name": "nielsen", "link": "https://stackoverflow.com/users/11993121/nielsen"}, "edited": false, "score": 0, "creation_date": 1569426993, "post_id": 58102113, "comment_id": 102596154, "body": "The warning about <code>waitpid</code> is because you did not include the header file declaring that function. Try to add <code>#include &lt;sys&#47;wait.h&gt;</code> in the beginning."}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1569428096, "post_id": 58102113, "comment_id": 102596642, "body": "@DevSolar I very strongly disagree. Coding style is a judgement call. Increasing code clutter decreases readability, which decreases maintainability. If I just <code>return</code> immediately after a check in a <code>void</code>-returning function, I&#39;m not going to be using curly braces unless I&#39;m working at a company/on a project that requires it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12120026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mABTAlsLcyNaIPmPDqkZWwyXMBiesVWXQCe-n8z=k-s128", "display_name": "Robert Munroe", "link": "https://stackoverflow.com/users/12120026/robert-munroe"}, "edited": false, "score": 0, "creation_date": 1569437175, "post_id": 58102348, "comment_id": 102600503, "body": "This worked to remove the compiler error. However I don&#39;t understand why I can never seem to get the printf() statement to work. I have tried to add the printf() statement every other line of this code, and I never once got it to print. Any advice?"}, {"owner": {"reputation": 1655, "user_id": 6029128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qWL1c.jpg?s=128&g=1", "display_name": "ddon-90", "link": "https://stackoverflow.com/users/6029128/ddon-90"}, "reply_to_user": {"reputation": 11, "user_id": 12120026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mABTAlsLcyNaIPmPDqkZWwyXMBiesVWXQCe-n8z=k-s128", "display_name": "Robert Munroe", "link": "https://stackoverflow.com/users/12120026/robert-munroe"}, "edited": false, "score": 0, "creation_date": 1569504858, "post_id": 58102348, "comment_id": 102624846, "body": "@RobertMunroe That&#39;s strange because I can run the code and see the printf output."}], "tags": [], "owner": {"reputation": 1655, "user_id": 6029128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qWL1c.jpg?s=128&g=1", "display_name": "ddon-90", "link": "https://stackoverflow.com/users/6029128/ddon-90"}, "is_accepted": false, "score": 1, "last_activity_date": 1569433456, "last_edit_date": 1569433456, "creation_date": 1569427015, "answer_id": 58102348, "question_id": 58102113, "link": "https://stackoverflow.com/questions/58102113/printf-while-using-system-calls/58102348#58102348", "title": "Printf() while using system calls", "body": "<p>I can see few syntax mistakes and a missing header:</p>\n\n<pre><code>    #include &lt;unistd.h&gt;\n    #include &lt;stdio.h&gt;\n    #include &lt;sys/wait.h&gt;\n\n    int main(int argc, char* argv[]){\n\n             int processid = fork();\n             int status;\n             char* arguments[4];\n             arguments[0]=\"./countprimes\";\n             arguments[1]=\"10\";\n             arguments[2]=\"30\";\n             arguments[3]=NULL;\n\n             if(processid == 0) {\n                      execvp(\"./countprimes\",arguments);\n            } else {\n                      waitpid(processid, &amp;status, 0);\n                      printf(\"test1\");\n            } \n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12120026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mABTAlsLcyNaIPmPDqkZWwyXMBiesVWXQCe-n8z=k-s128", "display_name": "Robert Munroe", "link": "https://stackoverflow.com/users/12120026/robert-munroe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569433456, "creation_date": 1569426124, "last_edit_date": 1569432301, "question_id": 58102113, "link": "https://stackoverflow.com/questions/58102113/printf-while-using-system-calls", "title": "Printf() while using system calls", "body": "<p>The homework problem I am working is pretty simple, but I'm new to C so I may be getting stuck on syntax errors. What I am trying to do is call a program from a different program, assign a new process using <code>fork()</code>, and then wait on the child to finish using <code>waitpid()</code>. I am trying to A. get <code>waitpid()</code> to work, and B. get a simple test message to show after the child is finished.</p>\n\n<p>./countprimes is being ran remotely through ./countmaster. ./countprimes works fine, that just prints to the screen all of the primes from x to y. ./countmaster calls ./countprimes. </p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char* argv[]){\n\n         int processid = fork();\n         int status;\n         char* arguments[4];\n         arguments[0]=\"./countprimes\";\n         arguments[1]=\"10\";\n         arguments[2]=\"30\";\n         arguments[3]=NULL;\n\n         if(processid == 0)\n                  execvp(\"./countprimes\",arguments);\n         else\n                  waitpid(processid, &amp;status, 0);\n                  printf(\"test1\");\n}\n</code></pre>\n\n<p>I would expect to see:\n         count primes instance starting at 10 and ending at 29\n         count primes instance for 10 to 29 is 6\n         test1</p>\n\n<p>what I see instead is no test1 message. I also get a gcc warning: implicit declaration of function 'waitpid'; did you mean 'getpid'?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1569425277, "post_id": 58101836, "comment_id": 102595252, "body": "Please try to type the code without typos."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1569425356, "post_id": 58101836, "comment_id": 102595296, "body": "in the first example the structure tag is clearly <code>struct free_entry</code>. So why would you expect <code>static entry_list free_entry[32] = </code> to work <i>at all</i> ? if anything that should be <code>static struct free_entry entry_list[32] = </code>. For future reference, the best way to <i>not</i> introduce typos when typing in code is to <i>not type the code</i> in the first place. Copy/paste the <i>real</i> code from a <i>real</i> <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and it removes all doubt."}, {"owner": {"reputation": 39, "user_id": 9119575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbeb8006ad558018842440c926425591?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy", "link": "https://stackoverflow.com/users/9119575/tracy"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1569425683, "post_id": 58101836, "comment_id": 102595483, "body": "@WhozCraig eddited. What about the actual question now?"}, {"owner": {"reputation": 39, "user_id": 9119575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbeb8006ad558018842440c926425591?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy", "link": "https://stackoverflow.com/users/9119575/tracy"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1569425862, "post_id": 58101836, "comment_id": 102595589, "body": "@VladfromMoscow, no types now."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569426067, "post_id": 58101836, "comment_id": 102595694, "body": "Why do you think the first code, with just the <code>{HEAP_P, 64}</code> in the initializer, does not initialize the array element with index 0? Did the compiler give an error message? Did your program not behave correctly? Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates, possibly using output from the program, that the element with index 1 was initialized and the element with index 0 was not."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1569426086, "post_id": 58101836, "comment_id": 102595708, "body": "Aside: Is the <code>size</code> member supposed to be the size of the buffer pointed to by <code>ptr</code>? In the code posted above <code>ptr</code> is initialized to point to a 32-byte buffer, but <code>size</code> is initialized to 64 for some reason."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1569426111, "post_id": 58101836, "comment_id": 102595723, "body": "@Tracy Why are you rewriting the provided code instantly? I am sure the question shall be closed. Next time try to provide a minimal complete program without numerous typos."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9119575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbeb8006ad558018842440c926425591?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy", "link": "https://stackoverflow.com/users/9119575/tracy"}, "edited": false, "score": 0, "creation_date": 1569425952, "post_id": 58102045, "comment_id": 102595632, "body": "Tested. Nope. MSVC2015."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "reply_to_user": {"reputation": 39, "user_id": 9119575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbeb8006ad558018842440c926425591?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy", "link": "https://stackoverflow.com/users/9119575/tracy"}, "edited": false, "score": 2, "creation_date": 1569426430, "post_id": 58102045, "comment_id": 102595902, "body": "@Tracy What do you mean by &quot;Nope.&quot; That is not a helpful error description."}, {"owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "reply_to_user": {"reputation": 39, "user_id": 9119575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbeb8006ad558018842440c926425591?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy", "link": "https://stackoverflow.com/users/9119575/tracy"}, "edited": false, "score": 0, "creation_date": 1569426919, "post_id": 58102045, "comment_id": 102596122, "body": "@Tracy Then you&#39;ll need to give us the command you&#39;re using to compile. This code is compiling for me on both GCC v7.1.0 and MSVC v19.16.27031.1."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1569426357, "last_edit_date": 1569426357, "creation_date": 1569425878, "answer_id": 58102045, "question_id": 58101836, "link": "https://stackoverflow.com/questions/58101836/struct-initialization-in-c89/58102045#58102045", "title": "Struct initialization in C89", "body": "<p>This typedef is incorrect</p>\n\n<pre><code>typedef free_entry free_entry_t;\n</code></pre>\n\n<p>You have to write</p>\n\n<pre><code>typedef struct free_entry free_entry_t;\n</code></pre>\n\n<p>I think it is the reason of the error.</p>\n\n<p>This code is compiled successfully</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nstatic uint8_t HEAP_P[32];\n\nstruct free_entry\n{\n    uint8_t *ptr;\n    uint64_t size;  \n};\n\ntypedef struct free_entry free_entry_t;\n\nstatic free_entry_t free_list[32] = \n{\n    {HEAP_P, 64}, //i need to initialize 0-th element to: {ptr = HEAP_P, size = 32}\n};\n\nint main(void) \n{\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9119575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbeb8006ad558018842440c926425591?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy", "link": "https://stackoverflow.com/users/9119575/tracy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1569426357, "creation_date": 1569425144, "last_edit_date": 1569426054, "question_id": 58101836, "link": "https://stackoverflow.com/questions/58101836/struct-initialization-in-c89", "title": "Struct initialization in C89", "body": "<p>I can only initialize the second element of this array of structs. I can't use c99 features like <em>designated initializers</em>, so how do i initialize the 0-th element of this array of structs?</p>\n\n<pre><code>static uint8_t HEAP_P[32];\n\nstruct free_entry\n{\n    uint8_t *ptr;\n    uint64_t size;  \n};\n\ntypedef struct free_entry free_entry_t;\n\nstatic free_entry_t free_list[32] = \n{\n    {HEAP_P, 64}, //i need to initialize 0-th element to: {ptr = HEAP_P, size = 32}\n};\n</code></pre>\n\n<p>ERROR: free_entry is undefined.</p>\n\n<p>But when i do this:</p>\n\n<pre><code>static free_entry_t free_list[32] = \n    {\n        {0},\n        {HEAP_P, 64}, \n    };\n</code></pre>\n\n<p>then everything is working, except i need to initialize the 0-th element, not 1-th.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1569423390, "post_id": 58101250, "comment_id": 102594112, "body": "Are you asking how to access an array element?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569429434, "post_id": 58101250, "comment_id": 102597211, "body": "It is going to be slow progress in C programming if you have to ask fundamental questions about basic language syntax such as this.  Any C language reference will cover this."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569436172, "post_id": 58101250, "comment_id": 102600098, "body": "No one called &quot;Cliff&quot; around here - <i>that&#39;s</i> rude!  You are mistaking good advice for rudeness.  It was intended to help you avoid down-votes (not from me), and to point out the inefficiency of learning by posting questions on widely available information.   Not knowing a thing is fair enough, but judgement on the most appropriate method of filling that gap is critical - read a book or tutorial to start with.  SO would not prosper if it were filled with questions such at this."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 11604399, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eMCBZt4P1IE/AAAAAAAAAAI/AAAAAAAAMQs/ReqYyYuA5G8/photo.jpg?sz=128", "display_name": "Persike", "link": "https://stackoverflow.com/users/11604399/persike"}, "is_accepted": false, "score": 0, "last_activity_date": 1569423774, "creation_date": 1569423774, "answer_id": 58101425, "question_id": 58101250, "link": "https://stackoverflow.com/questions/58101250/how-to-read-byte-by-bye-in-an-array/58101425#58101425", "title": "how to read byte by bye in an array", "body": "<p>I'm not sure if I got your question. It seems that you have a buffer consisting of 64 elements and you want to access each of them in a loop. You can address such buffer like this:\nc[0],c[1],c[2].....c[63]</p>\n\n<p>For example:</p>\n\n<pre><code>for(uint8_t index = 0; index &lt; 64; index++)  {\n    if(c[index] == 0xFF) DoThis\n    else if(c[index] == 0xAA) DoThat\n    else if(c[index] == 0x00) DoWhatElse\n    .... }\n</code></pre>\n\n<p>You can also use a switch case instead of if's. Take a look: <a href=\"https://www.tutorialspoint.com/cprogramming/switch_statement_in_c.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cprogramming/switch_statement_in_c.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "is_accepted": false, "score": 0, "last_activity_date": 1569423790, "creation_date": 1569423790, "answer_id": 58101429, "question_id": 58101250, "link": "https://stackoverflow.com/questions/58101250/how-to-read-byte-by-bye-in-an-array/58101429#58101429", "title": "how to read byte by bye in an array", "body": "<p>If your elements are equivalent to <code>uint8</code>, then presumably <a href=\"https://doc.embedded-wizard.de/uint8-uint16-uint32-type?v=9.00\" rel=\"nofollow noreferrer\">each element <em>is</em> a byte</a>.</p>\n\n<pre><code>for(uint8_t i = 0; i &lt; size; ++i)\n{\n    if(0XAA == c[i])\n    {\n        foo();\n    }\n}\n</code></pre>\n\n<p>Once you've read all 64 bytes, your buffer <code>c</code> has been processed and you can fetch a new one, cleanup the old one, etc. You can directly compare the array elements with octal values because to the compiler, a number is a number and 0xAA is the same as 170. You don't have to treat it differently just because it's in octal notation.</p>\n"}], "owner": {"reputation": 1, "user_id": 11176533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d32bd7d245621b83d29b2f59c04bfd?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/11176533/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1569429486, "creation_date": 1569423239, "last_edit_date": 1569429486, "question_id": 58101250, "link": "https://stackoverflow.com/questions/58101250/how-to-read-byte-by-bye-in-an-array", "title": "how to read byte by bye in an array", "body": "<p>I have a buffer </p>\n\n<pre><code>uint8_t c[64] ={ 0xFF, 0xAA, 0x00} ;\n</code></pre>\n\n<p>I want to carry out a operation based on the byte value</p>\n\n<pre><code>for(uint8_t i=0; i&lt;size;i++)\n{\n    if(0XAA == ???)\n    {\n    }\n}\n</code></pre>\n\n<p>can anyone help me like how to read it byte by byte and perform the above.</p>\n"}, {"tags": ["c", "linux", "elf", "object-files", "symbol-table"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11611531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02d5fda41fb0bbfa1d8bcdcd9c6f010?s=128&d=identicon&r=PG&f=1", "display_name": "roger21", "link": "https://stackoverflow.com/users/11611531/roger21"}, "edited": false, "score": 0, "creation_date": 1569519154, "post_id": 58102426, "comment_id": 102632594, "body": "It is the same thing with a defined type such as:  &quot;typedef int bool&quot; ?"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "reply_to_user": {"reputation": 35, "user_id": 11611531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02d5fda41fb0bbfa1d8bcdcd9c6f010?s=128&d=identicon&r=PG&f=1", "display_name": "roger21", "link": "https://stackoverflow.com/users/11611531/roger21"}, "edited": false, "score": 0, "creation_date": 1569528456, "post_id": 58102426, "comment_id": 102636649, "body": "Sure. This type definition is only used in the including translation unit. A type definition as such never uses space in allocated sections, only the variables defined with this type."}], "tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": true, "score": 1, "last_activity_date": 1569427285, "creation_date": 1569427285, "answer_id": 58102426, "question_id": 58101174, "link": "https://stackoverflow.com/questions/58101174/c-prototype-function-object-file/58102426#58102426", "title": "C Prototype Function - object file", "body": "<p>BTW, you need to give the <code>float</code> array a name.</p>\n\n<p>If you compile the shown source as a C file an empty object file will be the result. No symbol will be stored.</p>\n\n<p>If you use the shown source as a header file included in another C file which <strong>does not</strong> call <code>tensor_trace()</code>, the object file will have no symbol stored for it.</p>\n\n<p>If you use the shown source as a header file included in another C file which <strong>does</strong> call <code>tensor_trace()</code>, the object file will have a symbol stored for it. At the place where the call is generated a reference to this symbol is placed. The linker will resolve this reference to the function which will have to be defined in another module.</p>\n\n<p>So to answer your question:</p>\n\n<blockquote>\n  <p>Is \"tensor_trace\" allocated somwhere?</p>\n</blockquote>\n\n<p>The machine code for <code>tensor_trace()</code> will be \"allocated\" in the module that defines it. The declaration does <strong>not</strong> allocate any space.</p>\n"}], "owner": {"reputation": 35, "user_id": 11611531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02d5fda41fb0bbfa1d8bcdcd9c6f010?s=128&d=identicon&r=PG&f=1", "display_name": "roger21", "link": "https://stackoverflow.com/users/11611531/roger21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58102426, "answer_count": 1, "score": 0, "last_activity_date": 1569427285, "creation_date": 1569422989, "question_id": 58101174, "link": "https://stackoverflow.com/questions/58101174/c-prototype-function-object-file", "title": "C Prototype Function - object file", "body": "<p>When compiling a c source file in Linux how a prototype function is treated? Is the symbol stored in the object file (formatted as ELF file) or a signature is stored to make reference to it when linking? \nFor example:</p>\n\n<pre><code>#define MAX 32\ntypedef struct{\n    float[3][3];\n}Tensor_t;\n\nfloat tensor_trace(Tensor_t* t);\n</code></pre>\n\n<p>Is \"tensor_trace\" allocated somwhere?</p>\n"}, {"tags": ["c", "linux", "gcc", "arm"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569422912, "post_id": 58100952, "comment_id": 102593819, "body": "Build Binutils, then GCC, then the GNU C Library, and build all your software and your kernel with the new toolchain."}, {"owner": {"reputation": 18122, "user_id": 476371, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1798dbdad64383304a00c178ad458830?s=128&d=identicon&r=PG", "display_name": "0xC0000022L", "link": "https://stackoverflow.com/users/476371/0xc0000022l"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569489940, "post_id": 58100952, "comment_id": 102616794, "body": "@JL2210 thanks, but that&#39;s pretty much the scenario I wanted to avoid (I also gave a rationale as to why)."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569495776, "post_id": 58100952, "comment_id": 102619899, "body": "I don&#39;t think the older kernels work with recent GCC."}, {"owner": {"reputation": 18122, "user_id": 476371, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1798dbdad64383304a00c178ad458830?s=128&d=identicon&r=PG", "display_name": "0xC0000022L", "link": "https://stackoverflow.com/users/476371/0xc0000022l"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569496028, "post_id": 58100952, "comment_id": 102620038, "body": "@JL2210 how so? Besides, the kernel I am attempting to build is 3.3.0 with some patches, so fairly old itself. Or did you mean the other way around? Indeed there was a header specific to major version 4 of GCC which I replaced by a newer one along with three (or so) others. But that took care of the issue that GCC 7 was &quot;too new&quot; for the old kernel ..."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1569496109, "post_id": 58100952, "comment_id": 102620099, "body": "Yeah, that&#39;s what I meant. I had some issues with this when trying to build even 3.18 for my Chromebook."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 2, "creation_date": 1569548943, "post_id": 58100952, "comment_id": 102641260, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=70128\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=70128</a>  I don&#39;t get this.  You are saying that 4.6.3 and 4.7.4 are generating the same code?  It is possible, but it sounds rather amazing to me. It is also possible to configure linux with early debug and trace where the issue occurs.  It seems more of a maintenance issue to make gcc generate some identical binary to an old compiler to me.  I do understand wanting to know why things differ."}, {"owner": {"reputation": 18122, "user_id": 476371, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1798dbdad64383304a00c178ad458830?s=128&d=identicon&r=PG", "display_name": "0xC0000022L", "link": "https://stackoverflow.com/users/476371/0xc0000022l"}, "reply_to_user": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1569659626, "post_id": 58100952, "comment_id": 102674595, "body": "@artlessnoise where are you taking that 4.7.4 version number from? One GCC is 4.6.3, the other 7.4.0 (Linaro). But thanks for that reference. Didn&#39;t even come up when I looked for issues related to <code>Tag_DIV_use</code> during my web search."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1569684708, "post_id": 58100952, "comment_id": 102679845, "body": "Then 7.4.0 is even worse!  I read your 4:7-4.0 incorrectly (and it seem a more rational goal to me; 4.6.3 to 4.7.4 maybe possible).  The kernel pushes the compiler limits and when a new compiler is released, there is often fixes in either the compiler or the kernel to handle the new compiler.  You can not just update the compiler version by ensuring options are correct alone.  In <i>arch/arm</i> run <code>git log --grep=&#39;gcc&#39; .</code> and you can see some of the changes.  You need back-ports of the gcc related changes when upgrading gcc.  Most changes are warning but at least 3-4 are boot or random crashes."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1569686075, "post_id": 58100952, "comment_id": 102680175, "body": "<code>git diff 208fae5c~1 208fae5c</code> and <code>git log 208fae5c</code> from mainline will give this idiv fix. There is some other issue with ip register use that I recall as well that might bite you. I think it was fixed in gcc though, so your Linaro gcc is probably taken care of that.  Your CPU doesn&#39;t have <code>idiv</code>, so you shouldn&#39;t be using this.  I don&#39;t know why you configured this way if you always have <b>ARM926EJ-S</b>?  Ie, <i>ARM_PATCH_IDIV</i> is false in your <code>.config</code>.  Maybe that is your answer to the <b>Tag_DIV_use</b>?"}, {"owner": {"reputation": 18122, "user_id": 476371, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1798dbdad64383304a00c178ad458830?s=128&d=identicon&r=PG", "display_name": "0xC0000022L", "link": "https://stackoverflow.com/users/476371/0xc0000022l"}, "reply_to_user": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1569697724, "post_id": 58100952, "comment_id": 102682867, "body": "@artlessnoise Thanks, I&#39;ll give that a try next week and let you know. Possible that this solves the problem alright. If so, then it&#39;ll turn out to be less of a compiler problem than a problem of the code being compiled. But likely still be educational. So you could <i>then</i> write it up as an answer. Btw, I already surmised that the <code>idiv</code>/<code>udiv</code> is the issue, I just didn&#39;t know how to tell the compiler to get rid of it (or why the compiler would generate &quot;faulty&quot; code when told about the CPU model)."}, {"owner": {"reputation": 18122, "user_id": 476371, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1798dbdad64383304a00c178ad458830?s=128&d=identicon&r=PG", "display_name": "0xC0000022L", "link": "https://stackoverflow.com/users/476371/0xc0000022l"}, "reply_to_user": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1569841566, "post_id": 58100952, "comment_id": 102714795, "body": "@artlessnoise I seem to be unlucky here. <a href=\"https://cateee.net/lkddb/web-lkddb/ARM_PATCH_IDIV.html\" rel=\"nofollow noreferrer\">ARM_PATCH_IDIV</a> has only been &quot;recently&quot; introduced (kernel 4.5), while I am still stuck with the 3.3 kernel. However, this has given me some hope and I have meanwhile been able to find the source tarballs, which I will link from my question."}], "owner": {"reputation": 18122, "user_id": 476371, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1798dbdad64383304a00c178ad458830?s=128&d=identicon&r=PG", "display_name": "0xC0000022L", "link": "https://stackoverflow.com/users/476371/0xc0000022l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1570054338, "creation_date": 1569422338, "last_edit_date": 1570054338, "question_id": 58100952, "link": "https://stackoverflow.com/questions/58100952/update-from-older-gcc-based-toolchain-for-which-no-source-code-is-available", "title": "Update from older GCC-based toolchain for which no source code is available", "body": "<p>Context: I am trying to update an ancient version of GCC to a newer one and there are only two or three puzzle pieces missing (it seems) to get it to work.</p>\n\n<p>The old toolchain is configured as follows:</p>\n\n<pre><code>$ /opt/arm-2012.03/bin/arm-none-linux-gnueabi-gcc -v\nUsing built-in specs.\nCOLLECT_GCC=/opt/arm-2012.03/bin/arm-none-linux-gnueabi-gcc\nCOLLECT_LTO_WRAPPER=/opt/arm-2012.03/bin/../libexec/gcc/arm-none-linux-gnueabi/4.6.3/lto-wrapper\nTarget: arm-none-linux-gnueabi\nConfigured with: /scratch/nsidwell/arm/linux/src/gcc-4.6-2012.03/configure --build=i686-pc-linux-gnu --host=i686-pc-linux-gnu --target=arm-none-linux-gnueabi --enable-threads --disable-libmudflap --disable-libssp --disable-libstdcxx-pch --enable-extra-sgxxlite-multilibs --with-arch=armv5te --with-gnu-as --with-gnu-ld --with-specs='%{save-temps: -fverbose-asm} %{funwind-tables|fno-unwind-tables|mabi=*|ffreestanding|nostdlib:;:-funwind-tables} -D__CS_SOURCERYGXX_MAJ__=2012 -D__CS_SOURCERYGXX_MIN__=3 -D__CS_SOURCERYGXX_REV__=57 %{O2:%{!fno-remove-local-statics: -fremove-local-statics}} %{O*:%{O|O0|O1|O2|Os:;:%{!fno-remove-local-statics: -fremove-local-statics}}}' --enable-languages=c,c++ --enable-shared --enable-lto --enable-symvers=gnu --enable-__cxa_atexit --with-pkgversion='Sourcery CodeBench Lite 2012.03-57' --with-bugurl=https://support.codesourcery.com/GNUToolchain/ --disable-nls --prefix=/opt/codesourcery --with-sysroot=/opt/codesourcery/arm-none-linux-gnueabi/libc --with-build-sysroot=/scratch/nsidwell/arm/linux/install/arm-none-linux-gnueabi/libc --with-gmp=/scratch/nsidwell/arm/linux/obj/host-libs-2012.03-57-arm-none-linux-gnueabi-i686-pc-linux-gnu/usr --with-mpfr=/scratch/nsidwell/arm/linux/obj/host-libs-2012.03-57-arm-none-linux-gnueabi-i686-pc-linux-gnu/usr --with-mpc=/scratch/nsidwell/arm/linux/obj/host-libs-2012.03-57-arm-none-linux-gnueabi-i686-pc-linux-gnu/usr --with-ppl=/scratch/nsidwell/arm/linux/obj/host-libs-2012.03-57-arm-none-linux-gnueabi-i686-pc-linux-gnu/usr --with-host-libstdcxx='-static-libgcc -Wl,-Bstatic,-lstdc++,-Bdynamic -lm' --with-cloog=/scratch/nsidwell/arm/linux/obj/host-libs-2012.03-57-arm-none-linux-gnueabi-i686-pc-linux-gnu/usr --with-libelf=/scratch/nsidwell/arm/linux/obj/host-libs-2012.03-57-arm-none-linux-gnueabi-i686-pc-linux-gnu/usr --disable-libgomp --enable-poison-system-directories --with-build-time-tools=/scratch/nsidwell/arm/linux/install/arm-none-linux-gnueabi/bin --with-build-time-tools=/scratch/nsidwell/arm/linux/install/arm-none-linux-gnueabi/bin\nThread model: posix\ngcc version 4.6.3 (Sourcery CodeBench Lite 2012.03-57)\n</code></pre>\n\n<p>The ultimate goal is to build a (Linux) kernel with the updated toolchain. For now I am attempting to get <code>arm-linux-gnueabi-gcc</code> (from the Ubuntu 18.04 package <code>gcc-arm-linux-gnueabi</code>, version <code>4:7.4.0-1ubuntu2.3</code>) to do my bidding.</p>\n\n<p>Trivial (hello world style) userland binaries built with that toolchain work like a charm. However, the kernel won't load and since the board for which this kernel is meant won't show a thing with the kernel built this way, I have no feedback as to what is wrong (as I would have with a <code>SIGILL</code> when running a userland binary containing \"incompatible stuff\". The (U-Boot) <code>mkimage</code> binary used is still the original one and its output is identical no matter whether I use the new or old toolchain to build <code>vmlinux</code>.</p>\n\n<p>Now, so far I ended up using the following two flags, which I determined were used by the old toolchain, but for which the new toolchain had different defaults:</p>\n\n<pre><code>-march=armv5te -mfix-cortex-m3-ldrd\n</code></pre>\n\n<p>The resulting <code>vmlinux</code> binary only differs in a handful of aspects and I think therein lies the problem that keeps the kernel from booting.</p>\n\n<p>By way of <code>gcc -v -E - &lt;/dev/null</code> for each toolchain, I was able to boil down the list of differences in flags passed as well. However, some of the flags literally seem to have changed and I was unable to find a list of flags with how to migrate to their newer counterparts ...</p>\n\n<p>Also it appears that the newer <code>readelf</code> packaged with <code>gcc-arm-linux-gnueabi</code> does not know of the flag 0x2 in <code>e_flags</code> (ELF header flags) which the older <code>readelf</code> calls \"has entry point\", difference:</p>\n\n<pre><code>-  Flags:                             0x5000002, has entry point, Version5 EABI\n+  Flags:                             0x5000002, Version5 EABI, &lt;unknown&gt;\n</code></pre>\n\n<p>I found no way of setting this flag, so far.</p>\n\n<p>When comparing the properties of the two resulting <code>vmlinux</code> files, the differences are somewhat bigger, but seem manageable:</p>\n\n<pre><code>$ diff &lt;(/opt/arm-2012.03/bin/arm-none-linux-gnueabi-readelf -hA ../vmlinux-gcc-4) &lt;(/opt/arm-2012.03/bin/arm-none-linux-gnueabi-readelf -hA ../vmlinux-gcc-7)\n--- /dev/fd/63  2019-09-25 16:25:22.056115611 +0200\n+++ /dev/fd/62  2019-09-25 16:25:22.056115611 +0200\n@@ -10,14 +10,14 @@\n   Version:                           0x1\n   Entry point address:               0xc0008000\n   Start of program headers:          52 (bytes into file)\n-  Start of section headers:          3446116 (bytes into file)\n-  Flags:                             0x5000002, has entry point, Version5 EABI\n+  Start of section headers:          4919528 (bytes into file)\n+  Flags:                             0x5000200, Version5 EABI, &lt;unknown&gt;\n   Size of this header:               52 (bytes)\n   Size of program headers:           32 (bytes)\n   Number of program headers:         3\n   Size of section headers:           40 (bytes)\n-  Number of section headers:         26\n-  Section header string table index: 23\n+  Number of section headers:         27\n+  Section header string table index: 26\n Attribute Section: aeabi\n File Attributes\n   Tag_CPU_name: \"5TE\"\n@@ -30,4 +30,3 @@\n   Tag_ABI_FP_number_model: IEEE 754\n   Tag_ABI_align_needed: 8-byte\n   Tag_ABI_enum_size: int\n-  Tag_DIV_use: Not allowed\n</code></pre>\n\n<p>The differences regarding the section headers are probably less relevant, if at all. But what stands out are the <code>e_flags</code> (picking the most readable output from the old and new <code>readelf</code>):</p>\n\n<pre><code>-  Flags:                             0x5000002, has entry point, Version5 EABI\n+  Flags:                             0x5000200, Version5 EABI, soft-float ABI\n</code></pre>\n\n<p>... and the file attributes:</p>\n\n<pre><code>-  Tag_DIV_use: Not allowed\n</code></pre>\n\n<p>The CPU I am targeting is this one (stripped for brevity):</p>\n\n<pre><code>Processor       : ARM926EJ-S rev 5 (v5l)\nFeatures        : swp half thumb fastmult edsp java\nCPU architecture: 5TEJ\nCPU variant     : 0x0\nCPU part        : 0x926\nCPU revision    : 5\nHardware        : DaVinci DA850/OMAP-L138/AM18x EVM\n</code></pre>\n\n<p>So evidently the (old) toolchain used was a generic one.</p>\n\n<p>For a comprehensive comparison of the outputs of <code>-Q --help=-target</code> for both toolchains with the newer one using <code>-march</code> and <code>-mcpu</code> to target the specific CPU model, i.e.:</p>\n\n<ul>\n<li><strong>old:</strong> <code>arm-none-linux-gnueabi-gcc -Q --help=target</code> versus</li>\n<li><strong>new:</strong> <code>arm-linux-gnueabi-gcc -march=armv5tej -mcpu=arm926ej-s -Q --help=target</code></li>\n</ul>\n\n<p>... see this \"table\":</p>\n\n<pre><code>Option                        old         new\n-falign-arrays                [disabled]  n/a\n-mabi=                        [empty]     aapcs-linux\n-mabort-on-noreturn           [disabled]  [disabled]\n-mandroid                     [disabled]  [disabled]\n-mapcs                        [disabled]  [disabled]\n-mapcs-float                  [disabled]  n/a\n-mapcs-frame                  [disabled]  [disabled]\n-mapcs-reentrant              [disabled]  [disabled]\n-mapcs-stack-check            [disabled]  [disabled]\n-march=                       armv5te     armv5tej\n-marm                         [enabled]   [enabled]\n-masm-syntax-unified          n/a         [disabled]\n-mbig-endian                  [disabled]  [disabled]\n-mbionic                      [disabled]  [disabled]\n-mcallee-super-interworking   [disabled]  [disabled]\n-mcaller-super-interworking   [disabled]  [disabled]\n-mcirrus-fix-invalid-insns    [disabled]  n/a\n-mcmse                        n/a         [disabled]\n-mcpu=                        [empty]     arm926ej-s\n-mfix-cortex-m3-ldrd          [enabled]   [disabled]\n-mflip-thumb                  n/a         [disabled]\n-mfloat-abi=                  [empty]     soft\n-mfp16-format=                [empty]     none\n-mfp=                         [empty]     n/a\n-mfpe                         [disabled]  n/a\n-mfpe=                        [empty]     n/a\n-mfpu=                        [empty]     vfp\n-mglibc                       [enabled]   [enabled]\n-mhard-float                  [disabled]  [empty]\n-mlittle-endian               [enabled]   [enabled]\n-mlong-calls                  [disabled]  [disabled]\n-mmusl                        n/a         [disabled]\n-mneon-for-64bits             n/a         [disabled]\n-mpic-data-is-text-relative   n/a         [enabled]\n-mpic-register=               [empty]     [empty]\n-mpoke-function-name          [disabled]  [disabled]\n-mprint-tune-info             n/a         [disabled]\n-mpure-code                   n/a         [disabled]\n-mrestrict-it                 n/a         [disabled]\n-msched-prolog                [enabled]   [enabled]\n-msingle-pic-base             [disabled]  [disabled]\n-mslow-flash-data             n/a         [empty]\n-msoft-float                  [disabled]  [empty]\n-mstructure-size-boundary=    [empty]     8\n-mthumb                       [disabled]  [disabled]\n-mthumb-interwork             [enabled]   [disabled]\n-mtls-dialect=                gnu         gnu\n-mtp=                         [empty]     soft\n-mtpcs-frame                  [disabled]  [disabled]\n-mtpcs-leaf-frame             [disabled]  [disabled]\n-mtune=                       [empty]     [default]\n-muclibc                      [disabled]  [disabled]\n-munaligned-access            [enabled]   [disabled]\n-mvectorize-with-neon-double  n/a         [disabled]\n-mvectorize-with-neon-quad    [disabled]  [enabled]\n-mword-relocations            [disabled]  [disabled]\n-mwords-little-endian         [disabled]  n/a\n</code></pre>\n\n<h2>Question</h2>\n\n<p>How can I coerce the modern (packaged) toolchain to</p>\n\n<ol>\n<li>set the <code>Tag_DIV_use: Not allowed</code> (== value 1) <em>file attribute</em> <strong>and</strong> make sure the compiler doesn't emit <code>sdiv</code> and <code>udiv</code> instructions?</li>\n<li>disable soft-float altogether and set the 0x2 ELF header flag (\"has entry point\")?</li>\n</ol>\n\n<p>NB: I am happy to pass additional linker or assembler command line options <em>or</em> to build another object file from some potential pseudo opcodes which I haven't found so far, but which yield what I need. <strong>What I would like to avoid is having to build a new toolchain</strong> (I <em>know</em> how to do it, I have done it - both with <code>crosstool</code>/<code>crosstool-ng</code> and manually -, but it can quickly become maintenance hell) specific to that ARM CPU. Our modern toolchains are outfitted to target several CPU models, so I'd be hard-pressed to accept an answer suggesting this. Especially since I could easily write my own GCC specs file to imbue the proper command line arguments as defaults in my build process.</p>\n\n<hr>\n\n<p>I've been partially successful with scouring the binutils source code and found the following line in the test suite for <code>gas</code>:</p>\n\n<pre><code>.eabi_attribute Tag_DIV_use, 1\n</code></pre>\n\n<p>And I was finally able to smuggle the <code>Tag_DIV_use</code> attribute into the object files. turned out that setting <code>.eabi_attribute</code> for <code>Tag_DIV_use</code> was indeed the way to convey to <code>ld</code> that I don't have support for these instructions. Unfortunately setting the attribute alone doesn't really seem keep the compiler from emitting these instructions.</p>\n\n<p>The problem was, however, that some <code>.S</code> (assembly) files also included said global header and so the syntax (<code>asm(\"...\")</code>) was incorrect <code>gas</code>' point of view. This could be fixed by checking for the define <code>__ASSEMBLY__</code> and either use the straight pseudo opcode <em>or</em> use the syntax acceptable to the C compiler.</p>\n\n<pre><code>#ifdef __ASSEMBLY__ /* from inside .S files */\n    .eabi_attribute Tag_DIV_use,1\n#else\n    asm(\".eabi_attribute Tag_DIV_use,1\");\n#endif\n</code></pre>\n\n<hr>\n\n<p>I was meanwhile able to find the source code (and the original download for the binary toolchain) created by CodeSourcery. Newer ones are also available:</p>\n\n<ul>\n<li><a href=\"https://sourcery.mentor.com/public/gnu_toolchain/arm-none-linux-gnueabi/arm-2012.03-57-arm-none-linux-gnueabi.src.tar.bz2\" rel=\"nofollow noreferrer\">arm-2012.03-57-arm-none-linux-gnueabi.src.tar.bz2</a></li>\n<li><a href=\"https://sourcery.mentor.com/public/gnu_toolchain/arm-none-linux-gnueabi/arm-2012.09-64-arm-none-linux-gnueabi.src.tar.bz2\" rel=\"nofollow noreferrer\">arm-2012.09-64-arm-none-linux-gnueabi.src.tar.bz2</a></li>\n<li><a href=\"https://sourcery.mentor.com/public/gnu_toolchain/arm-none-linux-gnueabi/arm-2013.05-24-arm-none-linux-gnueabi.src.tar.bz2\" rel=\"nofollow noreferrer\">arm-2013.05-24-arm-none-linux-gnueabi.src.tar.bz2</a></li>\n<li><a href=\"https://sourcery.mentor.com/public/gnu_toolchain/arm-none-linux-gnueabi/arm-2013.11-33-arm-none-linux-gnueabi.src.tar.bz2\" rel=\"nofollow noreferrer\">arm-2013.11-33-arm-none-linux-gnueabi.src.tar.bz2</a></li>\n<li><a href=\"https://sourcery.mentor.com/public/gnu_toolchain/arm-none-linux-gnueabi/arm-2014.05-29-arm-none-linux-gnueabi.src.tar.bz2\" rel=\"nofollow noreferrer\">arm-2014.05-29-arm-none-linux-gnueabi.src.tar.bz2</a></li>\n</ul>\n\n<p>... so that takes the pressure out of my endeavor. But I'd still like to be able to employ a modern (packaged) toolchain instead of some customized one.</p>\n"}, {"tags": ["c", "pointers", "gcc", "return-value", "rvalue"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1569420877, "post_id": 58100427, "comment_id": 102592601, "body": "The result of the expression <code>string[0] = &#39;\\0&#39;</code> is <code>&#39;\\0&#39;</code>. You can&#39;t take address of a value. Don&#39;t save lines."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1569420895, "post_id": 58100427, "comment_id": 102592616, "body": "Please don&#39;t merge the last two lines. Keep the code readable and sane. &quot;Code golfing&quot; has no place in professional programming."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569420898, "post_id": 58100427, "comment_id": 102592619, "body": "No, because the evaluation of <code>string[0] = &#39;\\0&#39;</code> is not stored at an address."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1569421340, "creation_date": 1569421340, "answer_id": 58100612, "question_id": 58100427, "link": "https://stackoverflow.com/questions/58100427/is-it-possible-to-get-the-address-of-a-variable-while-doing-mathematical-operati/58100612#58100612", "title": "Is it possible to get the address of a variable while doing mathematical operations with it in the same line", "body": "<p>If you want such a compound return statement  then just use the comma operator</p>\n\n<pre><code>return string[0] = '\\0', &amp;string[0];\n</code></pre>\n\n<p>Or (that is the same)</p>\n\n<pre><code>return string[0] = '\\0', string;\n</code></pre>\n\n<p>Or you can enclose the expression in parentheses.</p>\n\n<pre><code>return ( string[0] = '\\0', string );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1569422582, "post_id": 58100700, "comment_id": 102593638, "body": "Wow almost everyday I am amazed at C, today is no exception. Could you explain the last return statement(&quot;return &amp;(0&lt;:string:&gt;=0)&lt;:string:&gt;;&quot;) - I have never seen anything like this(it&#39;s kinda like inline if without half of the arguments)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569422913, "post_id": 58100700, "comment_id": 102593820, "body": "Ah.. these are the <a href=\"https://developerinsider.co/what-is-digraphs-trigraphs-and-tokens-c-cpp-programming-language/\" rel=\"nofollow noreferrer\">digraphs</a> got confused at first too.."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1569423028, "post_id": 58100700, "comment_id": 102593879, "body": "@HristoMitrev It&#39;s a purposely obfuscated line with the intention of writing silly code. <a href=\"https://godbolt.org/z/RjSBD3\" rel=\"nofollow noreferrer\">&quot;Solution&quot;</a>. Basically you have to be aware of <a href=\"https://stackoverflow.com/questions/381542/with-arrays-why-is-it-the-case-that-a5-5a\">this old trick</a>."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 3, "last_activity_date": 1569422223, "last_edit_date": 1569422223, "creation_date": 1569421556, "answer_id": 58100700, "question_id": 58100427, "link": "https://stackoverflow.com/questions/58100427/is-it-possible-to-get-the-address-of-a-variable-while-doing-mathematical-operati/58100700#58100700", "title": "Is it possible to get the address of a variable while doing mathematical operations with it in the same line", "body": "<blockquote>\n  <p>Everything works absolutely fine to this point</p>\n</blockquote>\n\n<p>Yep, code looks fine so far.</p>\n\n<blockquote>\n  <p>but then I wanted to merge the last two lines </p>\n</blockquote>\n\n<p>Why? That's pointless.</p>\n\n<blockquote>\n  <p>Then I got the error \"lvalue required as unary \u2018&amp;\u2019 operand\". I presume that's so because the compiler threats everithing within the brackets as a number</p>\n</blockquote>\n\n<p>No, it is because the compiler treates everything within the brackets as the result of the <code>=</code> operator. In order to take the address of something, it must be a <em>lvalue</em> - an addressable memory location where a variable is allocated. </p>\n\n<p>Some operators in C return a result which is a lvalue, some don't. The <code>=</code> operator does not. From the standard:</p>\n\n<blockquote>\n  <p>An assignment operator stores a value in the object designated by the left operand. An\n  assignment expression has the value of the left operand after the assignment, but is not\n  an lvalue.</p>\n</blockquote>\n\n<p>So you shouldn't do this. Keep the code as it was and don't change anything:</p>\n\n<pre><code>string[0] = '\\0';\nreturn string;\n</code></pre>\n\n<blockquote>\n  <p>...but still I'm eager to know if you can trick the compiler</p>\n</blockquote>\n\n<p>Eh, well C allows all manner of crazy stuff. But that doesn't mean that you should do it. Some examples of code you should not write:</p>\n\n<pre><code>// BAD, OBFUSCATED CODE, DON'T USE THESE\n\nreturn *string = '\\0', string;\n\nreturn &amp;string[*string = '\\0'];\n\nreturn &amp;(0&lt;:string:&gt;=0)&lt;:string:&gt;;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569423152, "post_id": 58101010, "comment_id": 102593958, "body": "OP&#39;s original code is still superior to this though :)"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569423547, "post_id": 58101010, "comment_id": 102594210, "body": "@Lundin The first (I&#39;d say zero) version of this answer started with: &quot;If you <i>really</i>, <i>really</i> want to merge...&quot; ;)"}], "tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1569422526, "creation_date": 1569422526, "answer_id": 58101010, "question_id": 58100427, "link": "https://stackoverflow.com/questions/58100427/is-it-possible-to-get-the-address-of-a-variable-while-doing-mathematical-operati/58101010#58101010", "title": "Is it possible to get the address of a variable while doing mathematical operations with it in the same line", "body": "<p>If you want to merge those two lines, consider writing a function with a meaningful name, instead of obfuscating your code (or try to somehow \"trick\" the compiler)</p>\n\n<pre><code>char *cleared(char *str)\n{\n    *str = '\\0';\n    return str;\n}\n</code></pre>\n\n<p>So that you could use it like</p>\n\n<pre><code>char *funct(/*...*/)\n{\n    static char string[30];\n    /*\n        do some manipulations and possibly return here\n    */\n    return cleared(string);\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58100700, "answer_count": 3, "score": 0, "last_activity_date": 1569422526, "creation_date": 1569420725, "last_edit_date": 1569421562, "question_id": 58100427, "link": "https://stackoverflow.com/questions/58100427/is-it-possible-to-get-the-address-of-a-variable-while-doing-mathematical-operati", "title": "Is it possible to get the address of a variable while doing mathematical operations with it in the same line", "body": "<p>I was implementing a C function to do manipulations of strings.</p>\n\n<p>At the end I had to return pointer to static string but before that the first element of the string had to be set to '\\0'</p>\n\n<pre><code>char *funct(...)\n{\n    static char string[30];\n    .\n    . //do some manipulations and possibly return here\n    .\n    string[0] = '\\0';\n    return string;\n}\n\n</code></pre>\n\n<p>Everything works absolutely fine to this point, but then I wanted to merge the last two lines :</p>\n\n<pre><code>char *funct(...)\n{\n    static char string[30];\n    .\n    . //do some manipulations and possibly return here\n    .\n    return &amp;(string[0] = '\\0');\n}\n\n</code></pre>\n\n<p>Then I got the error \"lvalue required as unary \u2018&amp;\u2019 operand\".\nI presume that's so because the compiler threats everithing within the brackets as a number, not a variable and as we all know you can't have address of just a number ( \"return &amp;('\\0');\" is wrong).</p>\n\n<p>My question is absolutely inessential but still I'm eager to know if you can trick the compiler(gcc in my case) to treat the content in the brackets as a variable and not a number</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1569420943, "post_id": 58100395, "comment_id": 102592641, "body": "Sounds like you are expected to use a <a href=\"https://en.cppreference.com/w/c/numeric/math/round\" rel=\"nofollow noreferrer\">rounding function</a>."}, {"owner": {"reputation": 191, "user_id": 7627464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mD7ok.jpg?s=128&g=1", "display_name": "Togtokh Khorchin", "link": "https://stackoverflow.com/users/7627464/togtokh-khorchin"}, "edited": false, "score": 1, "creation_date": 1569421232, "post_id": 58100395, "comment_id": 102592802, "body": "(int)(val+0.5f)"}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1569422127, "post_id": 58100543, "comment_id": 102593360, "body": "Please elaborate on the merits of this solution. Simply &quot;try this&quot; is not the greatest answer"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569422559, "post_id": 58100543, "comment_id": 102593620, "body": "The <code>(int)</code> in <code>final_grade = (int) round(final_grade);</code> has no effect. Presumably <code>final_grade</code> is a <code>double</code> or other floating-point type. Then <code>round</code> produces an integer value. <code>int</code> converts this to the <code>int</code> type but does not change the value (unless overflow) occurs, and then the assignment to <code>final_grade</code> converts it back to floating-point, again with no change in value."}, {"owner": {"reputation": 386, "user_id": 4444948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1xTM1ROEF10/AAAAAAAAAAI/AAAAAAAAGFQ/ak-2m7ixlfs/photo.jpg?sz=128", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/4444948/apurva-singh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569422830, "post_id": 58100543, "comment_id": 102593778, "body": "@EricPostpischil thanks for pointing out the blunder. Made changes"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569422947, "post_id": 58100543, "comment_id": 102593836, "body": "This code produces incorrect results. Suppose <code>exam_grade</code> is 31, <code>homework_grade</code> is 1, and IEEE-754 binary64 is in use. Then <code>(0.85*exam_grade) + (0.15*homework_grade)</code> produces 5.49999999999999911182158029987476766109466552734375, from which <code>round</code> produces 5, but the desired result is 6."}, {"owner": {"reputation": 386, "user_id": 4444948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1xTM1ROEF10/AAAAAAAAAAI/AAAAAAAAGFQ/ak-2m7ixlfs/photo.jpg?sz=128", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/4444948/apurva-singh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569423111, "post_id": 58100543, "comment_id": 102593931, "body": "@EricPostpischil in the question it has been mentioned that 82.49 should be rounded to 82 only. Which is the correct expected behavior of the round function."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569423224, "post_id": 58100543, "comment_id": 102594011, "body": "@ApurvaSingh: But the mathematical result using correct real-number arithmetic is <b>not</b> 5.49999999999999911182158029987476766109466552734375. It is 5.5, and that should be rounded to 6. This code has errors in the arithmetic before the rounding occurs."}, {"owner": {"reputation": 386, "user_id": 4444948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1xTM1ROEF10/AAAAAAAAAAI/AAAAAAAAGFQ/ak-2m7ixlfs/photo.jpg?sz=128", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/4444948/apurva-singh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569423529, "post_id": 58100543, "comment_id": 102594197, "body": "@EricPostpischil what should then be done? This is more of an error in the library itself rather than the code. But since I&#39;m not sure what to do here could you please suggest an alternative."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569423621, "post_id": 58100543, "comment_id": 102594267, "body": "@ApurvaSingh: It is not an error in the library; it is not an error in the <code>round</code> function. It is a hazard of using floating-point arithmetic. As my answer shows, correct results can easily be computed using integer arithmetic."}, {"owner": {"reputation": 49, "user_id": 6571886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c858b42a2d384c6632865e61a4de8fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Nabassoua", "link": "https://stackoverflow.com/users/6571886/mohamed-nabassoua"}, "edited": false, "score": 0, "creation_date": 1569434352, "post_id": 58100543, "comment_id": 102599363, "body": "@ApurvaSingh. Thanks. I just tried and it worked. But is there a way to make it work with casting without using the math.h library?"}, {"owner": {"reputation": 49, "user_id": 6571886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c858b42a2d384c6632865e61a4de8fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Nabassoua", "link": "https://stackoverflow.com/users/6571886/mohamed-nabassoua"}, "edited": false, "score": 0, "creation_date": 1569434586, "post_id": 58100543, "comment_id": 102599462, "body": "@ApurvaSingh. From the link that you attached it says the round function returns integer value less than the argument if decimal value is from \u201d.1 to .5\u2033. However, the exercise says that values with &quot;.5&quot; decimal are converted to the next int."}, {"owner": {"reputation": 386, "user_id": 4444948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1xTM1ROEF10/AAAAAAAAAAI/AAAAAAAAGFQ/ak-2m7ixlfs/photo.jpg?sz=128", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/4444948/apurva-singh"}, "reply_to_user": {"reputation": 49, "user_id": 6571886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c858b42a2d384c6632865e61a4de8fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Nabassoua", "link": "https://stackoverflow.com/users/6571886/mohamed-nabassoua"}, "edited": false, "score": 0, "creation_date": 1569435464, "post_id": 58100543, "comment_id": 102599803, "body": "@MohamedNabassoua as mentioned in the comments you can try out with Eric&#39;s answer. I don&#39;t think only casting would be sufficient."}], "tags": [], "owner": {"reputation": 386, "user_id": 4444948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1xTM1ROEF10/AAAAAAAAAAI/AAAAAAAAGFQ/ak-2m7ixlfs/photo.jpg?sz=128", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/4444948/apurva-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1569422744, "last_edit_date": 1569422744, "creation_date": 1569421113, "answer_id": 58100543, "question_id": 58100395, "link": "https://stackoverflow.com/questions/58100395/conditional-casting-of-variables-in-c/58100543#58100543", "title": "conditional casting of variables in C", "body": "<p>Try this:\nAssuming the final_grade variable is int.</p>\n\n<pre><code>#include &lt;math.h&gt;\nint final_grade = round((0.85*exam_grade) + (0.15*homework_grade));\n</code></pre>\n\n<p>A simple type cast will just remove the decimal part of the answer and then keep the integer part. \nBut round function rounds the part to the nearest floating-point and then you can convert it to an integer. \nfor more information see <a href=\"https://fresh2refresh.com/c-programming/c-arithmetic-functions/c-round-function/\" rel=\"nofollow noreferrer\">this.</a></p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569423017, "post_id": 58101012, "comment_id": 102593876, "body": "This code produces incorrect results. Suppose <code>exam_grade</code> is 31, <code>homework_grade</code> is 1, and IEEE-754 binary64 is in use. Then <code>(0.85*exam_grade) + (0.15*homework_grade)</code> produces 5.49999999999999911182158029987476766109466552734375, from which <code>round</code> produces 5, but the desired result is 6."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569489982, "post_id": 58101012, "comment_id": 102616812, "body": "Eric, I was aware of the borderline case but forgot about it. Your integer solution is best. Does the <code>round</code> function handle these borderline cases?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569494243, "post_id": 58101012, "comment_id": 102619119, "body": "There is nothing for <code>round</code> to do. When the value computed by the expression is 5.49999999999999911182158029987476766109466552734375, the proper result of rounding it to the nearest integer is 5. <code>round</code> cannot look at the value and determine anybody meant it to be 5.5 and somehow fix the error that occurred prior to <code>round</code> being called. You cannot get correct results from incorrect input."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1569422536, "creation_date": 1569422536, "answer_id": 58101012, "question_id": 58100395, "link": "https://stackoverflow.com/questions/58100395/conditional-casting-of-variables-in-c/58101012#58101012", "title": "conditional casting of variables in C", "body": "<p>The following performs the calculation, then rounds it and then converts it to int:</p>\n\n<pre><code>int final_grade = (0.85*exam_grade) + (0.15*homework_grade) + 0.5;\n</code></pre>\n\n<p>(The conversion to int is automatic because the lvalue is int.)</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 3, "last_activity_date": 1569423112, "creation_date": 1569423112, "answer_id": 58101214, "question_id": 58100395, "link": "https://stackoverflow.com/questions/58100395/conditional-casting-of-variables-in-c/58101214#58101214", "title": "conditional casting of variables in C", "body": "<p>To compute the result with integer arithmetic, let the percentage for the exam grade be <code>PE</code> (<em>e.g.</em>, 85) and the percentage for the homework grade be <code>PH</code>. Then the rounded score is:</p>\n\n<pre><code>(PE*exam_grade + PH*homework_grade + 50) / 100\n</code></pre>\n\n<p>Computing the result with floating-point arithmetic runs the risk that, due to errors in floating-point arithmetic, the fraction before rounding will be slightly below .5 even though the mathematical result computed with real-arithmetic would be exactly .5, and thus the result after rounding will be wrong.</p>\n"}], "owner": {"reputation": 49, "user_id": 6571886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c858b42a2d384c6632865e61a4de8fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Nabassoua", "link": "https://stackoverflow.com/users/6571886/mohamed-nabassoua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1569423112, "creation_date": 1569420635, "last_edit_date": 1569421603, "question_id": 58100395, "link": "https://stackoverflow.com/questions/58100395/conditional-casting-of-variables-in-c", "title": "conditional casting of variables in C", "body": "<p>I have the following expression where all variables are int (and the exercise asked that they must be int)</p>\n\n<pre><code>final_grade = (0.85*exam_grade) + (0.15*homework_grade);\n</code></pre>\n\n<p>In the expression above, values such as 82.499 should be converted to 82 and 82.5 should be converted to 83. </p>\n\n<p>I tried the approach below but I do not think that's the correct approach. Thanks for your help.</p>\n\n<pre><code>final_grade = (0.85*exam_grade) + (0.15*homework_grade);\nfinal_grade = (float)final_grade;\n</code></pre>\n"}, {"tags": ["c", "function", "compiler-errors"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1569420668, "post_id": 58100348, "comment_id": 102592462, "body": "C doesn&#39;t have default arguments"}, {"owner": {"reputation": 181, "user_id": 8598112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gg-gN2-mT-8olkhAPjq6VQqQkIRgWjwnwgMJ7-dFA=k-s128", "display_name": "Hamza Ince", "link": "https://stackoverflow.com/users/8598112/hamza-ince"}, "edited": false, "score": 0, "creation_date": 1569420810, "post_id": 58100348, "comment_id": 102592566, "body": "It&#39;s undefined behaviour"}], "owner": {"user_type": "does_not_exist", "display_name": "user12071753"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1569420911, "answer_count": 0, "score": -1, "last_activity_date": 1569420512, "creation_date": 1569420512, "question_id": 58100348, "link": "https://stackoverflow.com/questions/58100348/how-can-we-do-a-function-default-arguments-in-c-compiler-primarily-gnu-c-like-o", "closed_reason": "Duplicate", "title": "How can we do a function default arguments in C compiler, primarily GNU C like one in C++", "body": "<p>C++ provides a function default arguments capability, which is the declaration that the compiler automatically inserts if it's left off so that it has no any value in the function call.<br>\nNow how can we do exactly so in C compiler, primarily GNU C ?  </p>\n\n<p>Just want to avoid having a compile time error as the left-out argument value would be ignored and expected to become zero or void inside the function in its run time.   </p>\n\n<pre><code>int a (int b, int c){\na = 3*b + c;\n }\nprintf (\"%d\" , a(1));   // 3. compiled, run flawlessly\n</code></pre>\n\n<p>Thanks much before</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569418449, "post_id": 58099502, "comment_id": 102591087, "body": "In general, a computer can&#39;t do multiple things &quot;at once&quot; unless it has separate computing cores which can work in parallel. On the &quot;human level&quot; you can&#39;t see things at once as well. You see only things you focus your attention on."}, {"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 1, "creation_date": 1569418482, "post_id": 58099502, "comment_id": 102591109, "body": "Not sure to understand well your question, but since you like metaphors, takes it as a book rather than a container. When you are done reading a page, you move to next page. This doesn&#39;t destroy the pages that you don&#39;t see, you just changed page"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 1, "creation_date": 1569418524, "post_id": 58099502, "comment_id": 102591132, "body": "@Cid Some philosophers might argue with you on that :)"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569423219, "post_id": 58099502, "comment_id": 102594005, "body": "The OS does it for you."}], "answers": [{"tags": [], "owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "is_accepted": true, "score": 0, "last_activity_date": 1569418529, "creation_date": 1569418529, "answer_id": 58099682, "question_id": 58099502, "link": "https://stackoverflow.com/questions/58099502/how-does-this-code-list-all-items-from-a-folder/58099682#58099682", "title": "How does this code list all items from a folder?", "body": "<p>From the <code>readdir()</code> <a href=\"http://man7.org/linux/man-pages/man3/readdir.3.html\" rel=\"nofollow noreferrer\">linux man page entry</a>:</p>\n\n<blockquote>\n  <p>The readdir() function returns a pointer to a dirent structure\n         representing the next directory entry in the directory stream pointed\n         to by dirp.  It returns NULL on reaching the end of the directory\n         stream or if an error occurred.</p>\n</blockquote>\n\n<p>So the \"+1\" is inside <code>readdir()</code>. At this level nothing is really getting pushed down or up, but rather the directory listing is getting crawled and items examined one at a time.</p>\n"}, {"tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": false, "score": 0, "last_activity_date": 1569418582, "creation_date": 1569418582, "answer_id": 58099701, "question_id": 58099502, "link": "https://stackoverflow.com/questions/58099502/how-does-this-code-list-all-items-from-a-folder/58099701#58099701", "title": "How does this code list all items from a folder?", "body": "<p>You need to read the documentation for the function in order to understand what it is doing. In unix, assuming the man pages are installed:</p>\n\n<pre><code>man readdir\n</code></pre>\n\n<p>It will state something similar to:</p>\n\n<pre><code>The readdir() function returns a pointer to a dirent structure\nrepresenting the next directory entry in the directory stream pointed\nto by dirp.  It returns NULL on reaching the end of the directory\nstream or if an error occurred.\n</code></pre>\n\n<p>That is internally, each time it calls that function it is populating it with the next info from the dir listing, so is handling the increment of any counts or pointers for you.</p>\n\n<p>In terms of the 'seeing everything' at once. You are looing through each entry so handling one item at a time. </p>\n"}], "owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58099682, "answer_count": 2, "score": 1, "last_activity_date": 1569418582, "creation_date": 1569417932, "question_id": 58099502, "link": "https://stackoverflow.com/questions/58099502/how-does-this-code-list-all-items-from-a-folder", "title": "How does this code list all items from a folder?", "body": "<p>On the human level, when a human opens a container, as long as there is light and things are not hiding behind each other, the human can see everything at once.</p>\n\n<p>In the code below.. when the directory is opened, isn't there any light (info) ? doesn't it see everything at once ? </p>\n\n<p>It is reading 1 item, and because it has read it, that item automatically disappears ? what makes it disappear ? there is no \"<code>+1</code>\" being added to a \"<code>count</code>\"..</p>\n\n<p>and then it reads the next item as if it is the first item again. </p>\n\n<p>almost as if everything is stack on top of each other, and it can not see anything other than what is at the top, and soon as it reads the top one, the top item disappears and the next one is pushed to the top for it to read ?</p>\n\n<p>what is pushing it up ? </p>\n\n<pre><code>  DIR *d;\n  struct dirent *dir;\n\n  d = opendir(\"test/\");\n\n    while ((dir = readdir(d)) != NULL) {\n      fputs(dir-&gt;d_name, stdout);\n      fputs(\"\\n\", stdout);\n    }\n\n    closedir(d);\n</code></pre>\n"}, {"tags": ["c", "gcc", "inline", "inline-functions", "os161"], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1569423578, "creation_date": 1569423578, "answer_id": 58101355, "question_id": 58099159, "link": "https://stackoverflow.com/questions/58099159/what-is-the-meaning-of-file-static-out-of-line-global-out-of-line-and-no-out-of/58101355#58101355", "title": "What is the meaning of file-static out-of-line, global out-of-line and no out-of-line copy of function in inlining", "body": "<p>The \u201cnormal\u201d implementation of a function creates it as a subroutine in the assembly language or machine code generated by the compiler: It is a sequence of instructions that is called by other routines, and it returns when it is complete.</p>\n\n<p>Since calling a function and returning from it may have some overhead, a compiler may instead generate an <em>inline</em> implementation of the function. For example, with this code:</p>\n\n<pre><code>int square(int x) { return x*x; }\n...\nvoid foo(...)\n{\n    ...\n    y = square(x);\n}\n</code></pre>\n\n<p>the compiler could choose to compile <code>foo</code> as if it were:</p>\n\n<pre><code>void foo(...)\n{\n    ...\n    y = x*x;\n}\n</code></pre>\n\n<p>Thus, the compiler embeds the contents of the function inside the routine that called it. This is called an inline implementation.</p>\n\n<p>The comments you quote use <em>out-of-line</em> to refer to the normal implementation of a function as an actual subroutine. It is not a commonly used phrasing, but is not unusual either.</p>\n"}], "owner": {"reputation": 37, "user_id": 8660264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684ba3701233afd1a6adca017fe377b7?s=128&d=identicon&r=PG&f=1", "display_name": "Daksh Pratap Singh", "link": "https://stackoverflow.com/users/8660264/daksh-pratap-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58101355, "answer_count": 1, "score": 1, "last_activity_date": 1569423578, "creation_date": 1569416783, "question_id": 58099159, "link": "https://stackoverflow.com/questions/58099159/what-is-the-meaning-of-file-static-out-of-line-global-out-of-line-and-no-out-of", "title": "What is the meaning of file-static out-of-line, global out-of-line and no out-of-line copy of function in inlining", "body": "<p>I was reading the source code of OS/161 and encountered inline support code. I am not able to understand the comment provided. The comment is :- </p>\n\n<pre><code>/*                                                                                                                                                                                                          \n * Material for supporting inline functions.                                                                                                                                                                \n *                                                                                                                                                                                                          \n * A function marked inline can be handled by the compiler in three                                                                                                                                         \n * ways: in addition to possibly inlining into the code for other                                                                                                                                           \n * functions, the compiler can (1) generate a file-static out-of-line                                                                                                                                       \n * copy of the function, (2) generate a global out-of-line copy of the                                                                                                                                      \n * function, or (3) generate no out-of-line copy of the function.                                                                                                                                           \n *                                                                                                                                                                                                          \n * None of these alone is thoroughly satisfactory. Since an inline                                                                                                                                          \n * function may or may not be inlined at the compiler's discretion, if                                                                                                                                      \n * no out-of-line copy exists the build may fail at link time with                                                                                                                                          \n * undefined symbols. Meanwhile, if the compiler is told to generate a                                                                                                                                      \n * global out-of-line copy, it will generate one such copy for every                                                                                                                                        \n * source file where the inline definition is visible; since inline                                                                                                                                         \n * functions tend to appear in header files, this leads to multiply                                                                                                                                         \n * defined symbols and build failure. The file-static option isn't                                                                                                                                          \n * really an improvement, either: one tends to get compiler warnings                                                                                                                                        \n * about inline functions that haven't been used, which for any                                                                                                                                             \n * particular source file tends to be at least some of the ones that                                                                                                                                        \n * have been defined. Furthermore, this method leads to one                                                                                                                                                 \n * out-of-line copy of the inline function per source file that uses                                                                                                                                        \n * it, which not only wastes space but makes debugging painful.                                                                                                                                             \n */                                                                                                                                                                                                          \n\n</code></pre>\n\n<p>Please can anyone explain me what do they mean by file-static out-of-line, global out-of-line and no out-of-line copy of the function</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1569417345, "post_id": 58099053, "comment_id": 102590425, "body": "<code>&amp;p[i*5+5]</code> is outside allocation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569418406, "post_id": 58099053, "comment_id": 102591056, "body": "Still it is storing duplicate values"}, {"owner": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569419484, "post_id": 58099053, "comment_id": 102591709, "body": "Keep in mind that <code>malloc</code> is not setting memory to zero. Use <code>calloc</code> instead."}, {"owner": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569419670, "post_id": 58099053, "comment_id": 102591827, "body": "And why are you using both <code>getchar</code> and <code>scanf</code>?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569419699, "post_id": 58099053, "comment_id": 102591844, "body": "You probably want an array of pointers to strings instead of this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "reply_to_user": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569420133, "post_id": 58099053, "comment_id": 102592146, "body": "I am using getchar() so that it removes the &#39;\\n&#39; value from buffer @JUSHJUSH."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569420144, "post_id": 58099053, "comment_id": 102592155, "body": "@Lundin can you elaborate more please?"}, {"owner": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569420260, "post_id": 58099053, "comment_id": 102592230, "body": "@Pratik use <code>scanf(&quot; %c&quot;, ...)</code> to skip \\n (whitespace before character)"}, {"owner": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569420321, "post_id": 58099053, "comment_id": 102592276, "body": "Please, can you show <code>arr_display</code> function?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "reply_to_user": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569420363, "post_id": 58099053, "comment_id": 102592296, "body": "@JUSHJUSH Thank you very much. It helped :). Wait i will update question"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569420756, "post_id": 58099053, "comment_id": 102592530, "body": "@Pratik <code>char* array [n];</code> is much easier to work with and can be used in case the different strings have variable lengths."}, {"owner": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569420816, "post_id": 58099053, "comment_id": 102592569, "body": "@Pratik Your last output seems good, what do you expect?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569420897, "post_id": 58099053, "comment_id": 102592618, "body": "@Lundin i want to convert the input number to binary form later that is why i have used 2d char array and later i will compare each input and sort them according to number of one&#39;s. i don&#39;t know what ---char* array [n];--- means"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "reply_to_user": {"reputation": 377, "user_id": 9509046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDkMv.jpg?s=128&g=1", "display_name": "JUSHJUSH", "link": "https://stackoverflow.com/users/9509046/jushjush"}, "edited": false, "score": 0, "creation_date": 1569420962, "post_id": 58099053, "comment_id": 102592652, "body": "@JUSHJUSH I am making a Quine Mcclusky function simplifier as my 1st college project"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1569421502, "post_id": 58099053, "comment_id": 102592951, "body": "Welcome to Stack Overflow! Your code is incomplete; in particular, it seems to be missing a <code>main()</code> function and at least one <code>#include</code>. Please <a href=\"https://stackoverflow.com/posts/58099053/edit\">edit</a> your code so it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem (including any necessary inputs, but preferably not needing any), then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1569421616, "post_id": 58099053, "comment_id": 102593036, "body": "@TobySpeight Just call first function"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "edited": false, "score": 0, "creation_date": 1569419717, "post_id": 58100031, "comment_id": 102591856, "body": "I don&#39;t have to use getchar() then?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "edited": false, "score": 0, "creation_date": 1569419976, "post_id": 58100031, "comment_id": 102592033, "body": "i have posted the output when using calloc instead of malloc"}], "tags": [], "owner": {"reputation": 41, "user_id": 8604749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41a80832eab14dc4097202cc188ac78?s=128&d=identicon&r=PG&f=1", "display_name": "Neena", "link": "https://stackoverflow.com/users/8604749/neena"}, "is_accepted": false, "score": 0, "last_activity_date": 1569421661, "last_edit_date": 1569421661, "creation_date": 1569419546, "answer_id": 58100031, "question_id": 58099053, "link": "https://stackoverflow.com/questions/58099053/why-getchar-storing-duplicate-values-in-2d-array/58100031#58100031", "title": "why getchar() storing duplicate values in 2d array?", "body": "<p>Use calloc instead of malloc. So that memory will be initialized to zero.</p>\n\n<p>Please don't forget to update the allocation size (ie, 6) and the index calculation to same number. You have allocated 6, but used &amp;p[i*5+5].</p>\n\n<p>Pasted the two changes,</p>\n\n<pre><code>char *p=(char*)calloc(limit*6, sizeof(char)); \nscanf(\"%c\",&amp;p[i*6+5]);  \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12102022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569421661, "creation_date": 1569416457, "last_edit_date": 1569420585, "question_id": 58099053, "link": "https://stackoverflow.com/questions/58099053/why-getchar-storing-duplicate-values-in-2d-array", "title": "why getchar() storing duplicate values in 2d array?", "body": "<p>So basically i was trying to store a character at 6th position in every row and i have succeeded with it but i am getting same value stored twice in the desired location and its succeeding location.</p>\n\n<p>I don't know what is going wrong.</p>\n\n<ul>\n<li>I have tried using while ((getchar()) != '\\n');  &lt;-- Doesn't help </li>\n<li>Put getchar() before scanf</li>\n<li>And last , getchar() after scanf which atleast allows me to input value , the above two just prints empty array</li>\n</ul>\n\n<p>Edit 1\n- Changed columns from 5 to 6 as \"chux\" said prev values were resulting in outside allocation.\nEdit 2\n- Scroll down for working code and last error</p>\n\n<pre><code>    char *arr_input(int limit){\n        char *p=(char*)malloc(limit*6*sizeof(char)); // Edit 1\n        int i=0,j;\n        //while ((getchar()) != '\\n');\n        while(i&lt;limit){\n            getchar();\n            scanf(\"%c\",&amp;p[i*5+5]);    \n\n            i++;\n        }\n\n        arr_display(p,limit);\n        return p;\n    }\n</code></pre>\n\n<pre><code>Value at row 0 is = \nValue at row 0 is = \nValue at row 0 is = \nValue at row 0 is = \nValue at row 0 is = \nValue at row 0 is = 1\nValue at row 1 is = 1\nValue at row 1 is = \nValue at row 1 is = \nValue at row 1 is = \nValue at row 1 is = \nValue at row 1 is = 2\nValue at row 2 is = 2\nValue at row 2 is = \nValue at row 2 is = \nValue at row 2 is = \nValue at row 2 is = \nValue at row 2 is = 3\nInput Verified\n\n</code></pre>\n\n<p>Output when declaring using calloc()</p>\n\n<pre><code>Value at row 0 is = 0\nValue at row 0 is = \nValue at row 0 is = \nValue at row 0 is = \nValue at row 0 is = \nValue at row 0 is = 1\nValue at row 1 is = \nValue at row 1 is = 0\nValue at row 1 is = \nValue at row 1 is = \nValue at row 1 is = \nValue at row 1 is = 2\nValue at row 2 is = \nValue at row 2 is = \nValue at row 2 is = 0\nValue at row 2 is = \nValue at row 2 is = \nValue at row 2 is = 3\n</code></pre>\n\n<p>Working Code except the calloc() is not initializing 0 value so i did manually</p>\n\n<pre><code>    char *arr_input(int limit){\n        char *p=(char*)calloc(limit*6,sizeof(char));\n        int i=0;\n        while(i&lt;limit){\n            scanf(\" %c\",&amp;p[i*6+5]);             \n            i++;\n        }\n        zeroIn(p,limit);\n        arr_display(p,limit);\n        return p;\n    }\n    void *zeroIn(char *p ,int limit){\n        int i=0,j=0;\n        for(i=0;i&lt;limit;i++){\n            for(j=0;j&lt;5;j++)\n                p[i*6+j]='0';\n        }       \n            //arr_display(p,limit); \n    }\n    char *arr_display(char *disp,int size){\n        int i=0,j=0;\n        for (i = 0; i &lt;size ;i++)\n        {\n            for(j=0;j&lt;6;j++){\n         printf(\"Value at row %d is = %c\\n\",i,disp[i*6+j]);\n            }\n        }\n    }\n</code></pre>\n\n<pre><code>Value at row 0 is = 0\nValue at row 0 is = 0\nValue at row 0 is = 0\nValue at row 0 is = 0\nValue at row 0 is = 0\nValue at row 0 is = 1\nValue at row 1 is = 0\nValue at row 1 is = 0\nValue at row 1 is = 0\nValue at row 1 is = 0\nValue at row 1 is = 0\nValue at row 1 is = 2\nValue at row 2 is = 0\nValue at row 2 is = 0\nValue at row 2 is = 0\nValue at row 2 is = 0\nValue at row 2 is = 0\nValue at row 2 is = 3\n\n</code></pre>\n"}, {"tags": ["c", "arrays", "malloc", "c99", "realloc"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1569415081, "post_id": 58098545, "comment_id": 102588975, "body": "Run your code through valgrind.  If you&#39;re mismanaging memory, it will tell you where."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569415090, "post_id": 58098545, "comment_id": 102588981, "body": "Having <code>int can_c = 0;</code> followed by <code>candidates[can_c - 1]</code> makes me very wary."}, {"owner": {"reputation": 1, "user_id": 12118913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYknNueBZtWC3nJzPGYDX_F4hwM7tsW3Xehury=k-s128", "display_name": "Juliano David Hilario", "link": "https://stackoverflow.com/users/12118913/juliano-david-hilario"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1569415355, "post_id": 58098545, "comment_id": 102589178, "body": "I&#39;m sorry if my code is not pretty right now, I&#39;m more concerned with fixing this thing since the deadline is just around the corner. @dbush, I&#39;m will try to do that, is there any tips you could offer?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1569415536, "post_id": 58098545, "comment_id": 102589290, "body": "@JulianoDavidHilario If you run your program as <code>myprog arg1 arg2 ...</code> then you run it under valgrind as <code>valgrind myprog arg1 arg2 ...</code>.  The output includes things like reading uninitialized memory, reading/writing outside the bounds of malloc&#39;ed memory, and memory leaks."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569415848, "post_id": 58098545, "comment_id": 102589484, "body": "My comment isn&#39;t about being pretty, it&#39;s about undefined behavior. If <code>can_c</code> is equal to <code>0</code>, then <code>can_c - 1</code> will be <code>-1</code>. And while that can sometimes be a valid index, in your case it&#39;s <i>not</i> a valid index."}, {"owner": {"reputation": 1, "user_id": 12118913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYknNueBZtWC3nJzPGYDX_F4hwM7tsW3Xehury=k-s128", "display_name": "Juliano David Hilario", "link": "https://stackoverflow.com/users/12118913/juliano-david-hilario"}, "edited": false, "score": 0, "creation_date": 1569416095, "post_id": 58098545, "comment_id": 102589637, "body": "Oooh! I see! I see! Thank you!"}, {"owner": {"reputation": 1, "user_id": 12118913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYknNueBZtWC3nJzPGYDX_F4hwM7tsW3Xehury=k-s128", "display_name": "Juliano David Hilario", "link": "https://stackoverflow.com/users/12118913/juliano-david-hilario"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1569416128, "post_id": 58098545, "comment_id": 102589658, "body": "@dbush, I&#39;ve succesfully logged my program, I don&#39;t really know what to do much with the info, would it be appropriate to post it here?"}, {"owner": {"reputation": 1, "user_id": 12118913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYknNueBZtWC3nJzPGYDX_F4hwM7tsW3Xehury=k-s128", "display_name": "Juliano David Hilario", "link": "https://stackoverflow.com/users/12118913/juliano-david-hilario"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569416320, "post_id": 58098545, "comment_id": 102589785, "body": "@Someprogrammerdude WOAH! I fixed it! Thank you!!! It was because my malloc is out of bounds XD. it was -1"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1569416469, "post_id": 58098545, "comment_id": 102589881, "body": "Fine! Now that you are familiar with valgrind, go fix the program that works &quot;flawlessly&quot;. <code>:)</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1569417019, "post_id": 58098545, "comment_id": 102590235, "body": "Review <code>candidates[can_c - 1] = malloc(sizeof(struct candidate *));</code>  Consider <code>candidates[can_c - 1] = malloc(sizeof *(candidates[can_c - 1]));</code>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1569421591, "post_id": 58098545, "comment_id": 102593014, "body": "Welcome to Stack Overflow! Please <a href=\"https://stackoverflow.com/posts/58098545/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}, {"owner": {"reputation": 1, "user_id": 12118913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYknNueBZtWC3nJzPGYDX_F4hwM7tsW3Xehury=k-s128", "display_name": "Juliano David Hilario", "link": "https://stackoverflow.com/users/12118913/juliano-david-hilario"}, "edited": false, "score": 0, "creation_date": 1569426015, "post_id": 58098545, "comment_id": 102595660, "body": "Oh, I&#39;m sorry! I have fixed it already though, is still there a need for that?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12118913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYknNueBZtWC3nJzPGYDX_F4hwM7tsW3Xehury=k-s128", "display_name": "Juliano David Hilario", "link": "https://stackoverflow.com/users/12118913/juliano-david-hilario"}, "is_accepted": false, "score": 0, "last_activity_date": 1569420382, "creation_date": 1569420382, "answer_id": 58100306, "question_id": 58098545, "link": "https://stackoverflow.com/questions/58098545/realloc-invalid-old-size-on-struct-arrays/58100306#58100306", "title": "realloc() invalid old size on struct arrays", "body": "<p>The problem is not related to memory allocation at all! The problem occurs because I keep allocating candidates[-1], i had put <code>candidates[can_c - 1]</code> to <code>candidates[can_c]</code> memory. </p>\n\n<p>Thank you for everyone who helped! (and @someprogrammerdude for pointing it out)</p>\n"}], "owner": {"reputation": 1, "user_id": 12118913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYknNueBZtWC3nJzPGYDX_F4hwM7tsW3Xehury=k-s128", "display_name": "Juliano David Hilario", "link": "https://stackoverflow.com/users/12118913/juliano-david-hilario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569420382, "creation_date": 1569414944, "question_id": 58098545, "link": "https://stackoverflow.com/questions/58098545/realloc-invalid-old-size-on-struct-arrays", "title": "realloc() invalid old size on struct arrays", "body": "<p>I have been assigned to make a functioning student election program for our school defense (and probably for actual use ... ). However I've been stuck with a problem for a while now.</p>\n\n<p>My goal is to make a flexible array of structs, since I can't use an arbitrary limitation, also arrays have a 99-item limit for me (*see end of the post). I have used realloc() but it gives an abort() for invalid old size. BUT, I have tried testing a dynamic struct array in another program and it worked flawlessly. I can't figure out what's causing the other one to crash.</p>\n\n<p>My election program (i.e. the crashing one):</p>\n\n<p><em>NOTE: entr_cmd function just moves the cursor to the bottom of the screen and prints a text, and STREQL just see if two string matches, just a shortcut macro for strcmp</em></p>\n\n<pre><code>struct candidate {\n    long lrn;\n    char *name;\n    int grade;\n    char *section;\n    char *party;\n    char *position;\n}\n**candidates,\n// :: Temporary Array for storing all the candidates in the position to be voted in\n**candidates_cur;\nint can_c = 0;\n\n[...]\n\nint main() {\n[...]\n    candidates = malloc(2 * sizeof(struct candidate *));\n[...]\n            if(STREQL(command, \"c\")) {\n                        struct candidate *c;\n\n                        if(can_c &gt; 1) {\n                            struct candidate **tmp;\n                            tmp = (struct candidate**) realloc(candidates, (1 + can_c) * sizeof(struct candidate *));\n\n                            if(tmp != NULL) candidates = tmp;\n                        }\n\n                        candidates[can_c - 1] = malloc(sizeof(struct candidate *));\n                        c = candidates[can_c - 1];\n\n                        entr_cmd(\"Candidate's Name: \");\n                        // :: This recieves the input but replaced for testing\n                        c-&gt;name = malloc(4 * sizeof(char));\n                        strcpy(c-&gt;name, \"XXX\");\n\n                        can_c++;\n            }\n[...]\n</code></pre>\n\n<p>The test program that works flawlessly: </p>\n\n<p><em>this generates a random string of numbers for the members of the test struct</em></p>\n\n<pre><code>struct test {\n    char *name;\n    char *another;\n    int test;\n} **arr;\n\nint main() {\n    int r1;\n\n    arr = malloc(2 * sizeof(struct test *));\n\n    r1 = rand() % 45;\n    for(int i = 0; i &lt; r1; i++) {\n        int r2 = rand() % 22;\n\n        if(i &gt; 2) {\n            struct test **data;\n            data = (struct test**) realloc(arr, (2 + i) * sizeof(struct test*));\n\n            if(data != NULL) {\n                arr = data;\n            }\n        }\n\n        arr[i] = malloc(sizeof(struct test *));\n        struct test *t = arr[i];\n        t-&gt;name = malloc(r2 * sizeof(char));\n        t-&gt;another = malloc(r2 * sizeof(char));\n        t-&gt;test = r2;\n\n        for(int ii = 0; ii &lt; r2; ii++) {\n            t-&gt;name[ii] = (char) (rand() % 9) + '0';\n            t-&gt;another[ii] = (char) (rand() % 9) + '0';\n        }\n\n        printf(\"====[%u]====\\n%s\\n%s\\n%u\\n\", i, arr[i] -&gt; name, arr[i] -&gt; another, arr[i] -&gt; test);\n    }\n\n    for(int i = 0; i &lt; r1; i++) {\n        free(arr[i]-&gt;name);\n        free(arr[i]-&gt;another);\n        free(arr[i]);\n    }\n\n    free(arr);\n    getch();\n}\n</code></pre>\n\n<p>Any help would be appreciated as our teacher had put great expectation upon me and told me this was going to be easy <strong>easy</strong> but it's proving itself to be the opposite.</p>\n\n<p>Thank you for reading and have a nice day!!!</p>\n\n<p><em>extra non-sense: I'm in a course where we use TurboC++ regularly for programming, but it's pretty hard to do it there, so I instead used C99 with my neovim setup so I can have fast navigation and also most of the things in C99 can work in TurboC++. In other words, I can't really work with (recent standard) C++, if so, I think I would have probably done this more easily</em></p>\n"}, {"tags": ["c", "sockets", "multicast", "setsockopt", "recvfrom"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1569481002, "post_id": 58098389, "comment_id": 102612176, "body": "You are using a <a href=\"https://www.iana.org/assignments/multicast-addresses/multicast-addresses.xhtml\" rel=\"nofollow noreferrer\">reserved multicast address</a>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12118872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae6aaa65a0e9eb585e0d7f26052a8e1?s=128&d=identicon&r=PG&f=1", "display_name": "psk1993", "link": "https://stackoverflow.com/users/12118872/psk1993"}, "edited": false, "score": 0, "creation_date": 1569427388, "post_id": 58099783, "comment_id": 102596336, "body": "Aren&#39;t 127.0.0.0/8 block of  local addresses? I just assigned one to client and another to server. It is still not working with INADDR_ANY. I also tried it on mininet with mreq.imr_interface.s_addr as the mininet host ID, but still blank. (with INADDR_ANY, setsockopt on mininet shows setsocopt error: No Such Device)"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "reply_to_user": {"reputation": 33, "user_id": 12118872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae6aaa65a0e9eb585e0d7f26052a8e1?s=128&d=identicon&r=PG&f=1", "display_name": "psk1993", "link": "https://stackoverflow.com/users/12118872/psk1993"}, "edited": false, "score": 0, "creation_date": 1569478589, "post_id": 58099783, "comment_id": 102611134, "body": "I expanded the answer."}, {"owner": {"reputation": 33, "user_id": 12118872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae6aaa65a0e9eb585e0d7f26052a8e1?s=128&d=identicon&r=PG&f=1", "display_name": "psk1993", "link": "https://stackoverflow.com/users/12118872/psk1993"}, "edited": false, "score": 1, "creation_date": 1575205247, "post_id": 58099783, "comment_id": 104479968, "body": "Hi sorry. It did not initially, and I could not revisit this problem to do the strace to report the exact nature of the problem. I am sorry for leaving this hanging. If I get time, I will retry. I will however mark it as useful. Thanks."}], "tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 1, "last_activity_date": 1569478586, "last_edit_date": 1569478586, "creation_date": 1569418844, "answer_id": 58099783, "question_id": 58098389, "link": "https://stackoverflow.com/questions/58098389/why-is-udp-multicast-server-not-responding/58099783#58099783", "title": "Why is UDP Multicast Server not responding?", "body": "<p>It seems you chose a wrong <em>local IP address of interface</em> in the server (where did you get the \"127.0.0.2\" from?) - if I change</p>\n\n<pre><code>    mreq.imr_interface.s_addr = inet_addr(myIP);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    mreq.imr_interface.s_addr = INADDR_ANY;\n</code></pre>\n\n<p>the server starts receiving.</p>\n\n<blockquote>\n  <p>Aren't 127.0.0.0/8 block of local addresses?</p>\n</blockquote>\n\n<p>These are <em>loopback addresses</em> (see <a href=\"https://serverfault.com/questions/402938/what-is-the-rest-of-the-127-0-0-0-8-address-space-used-for\">What is the rest of the 127.0.0.0/8 address space used for?</a>). The comment <em>local IP address of interface</em> in the definition of <code>struct ip_mreq</code> may be a bit misleading, since it can remind one of <em>localhost</em>, but it actually means an IP address assigned to an interface of the local host seen from outside.</p>\n\n<blockquote>\n  <p>It is still not working with INADDR_ANY.</p>\n</blockquote>\n\n<p>As so often, <em>not working</em> is an insufficient problem description. You could gather more information e. g. by running the server with <code>strace -enetwork \u2026</code>. And I recommend to leave aside unnecessary complications like Mininet until the programs work on a pure network.</p>\n"}], "owner": {"reputation": 33, "user_id": 12118872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae6aaa65a0e9eb585e0d7f26052a8e1?s=128&d=identicon&r=PG&f=1", "display_name": "psk1993", "link": "https://stackoverflow.com/users/12118872/psk1993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1569505224, "creation_date": 1569414466, "last_edit_date": 1569505224, "question_id": 58098389, "link": "https://stackoverflow.com/questions/58098389/why-is-udp-multicast-server-not-responding", "title": "Why is UDP Multicast Server not responding?", "body": "<p>I am trying to implement basic UDP multicast client and server on Linux. The server, based on a message sent by the client, is supposed to reply with system parameters (kinda like SNMP). Right now, I am testing with a single server. After running client and server on different terminals, I send a 3 character request to the server, but it appears that server is not able to proceed, and just stays suspended there, waiting for client. The codes are given here:</p>\n\n<p>Client: </p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;  \n#include &lt;string.h&gt; \n#include &lt;sys/types.h&gt; \n#include &lt;arpa/inet.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;netinet/in.h&gt; \n#include &lt;unistd.h&gt; \n#include &lt;sys/time.h&gt;\n#include &lt;time.h&gt;\n\nchar* createheader(int , int , int , char , int );\n\n#define PORT 15002 \n#define MAXLINE 10000 \nchar* MULTICAST = \"224.0.0.3\";\nchar* myIP = \"127.0.0.1\";\n\n// Driver code \nint main(int argc, char *argv[]) \n{    \n    char buffer[10000];\n    char message[10000]; \n    char *msg;\n    int sockfd, n;\n    char c = '0';\n    int req1, req2, req3;\n\n    int ctr = 0;\n    int prev = 0, curr = 0;\n\n    char tp = 'Q';\n    int seq = 0, len;\n    int yes = 1;\n    short int resendflag = 0;\n    struct timeval time1, time2, tv={2,0}; // structures that can take time in seconds and micro seconds.\n\n    struct sockaddr_in servaddr;   \n    bzero(&amp;servaddr, sizeof(servaddr)); \n\n    servaddr.sin_addr.s_addr = inet_addr(MULTICAST); \n    servaddr.sin_port = htons(PORT); \n    servaddr.sin_family = AF_INET;\n\n    struct in_addr interface_addr;\n    interface_addr.s_addr = inet_addr(myIP);\n\n\n    // create datagram socket  \n    sockfd = socket(AF_INET, SOCK_DGRAM, 0);\n    setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, (int*) &amp;yes, sizeof(yes));\n\n       if (sockfd &lt; 0) {\n     perror(\"Error: socket\");\n     exit(1);\n   }\n\n    /*if(connect(sockfd, (struct sockaddr *)&amp;servaddr, sizeof(servaddr)) &lt; 0) \n        { \n            printf(\"\\n Error : Connect Failed \\n\"); \n            exit(0); \n        }*/\n\n    setsockopt(sockfd,SOL_SOCKET,SO_RCVTIMEO,(char *)&amp;tv,sizeof(struct timeval));\n\n    //u_char loop;\n    //setsockopt(sockfd, IPPROTO_IP, IP_MULTICAST_LOOP, &amp;loop, sizeof(loop));\n\n    //Create Tx Header\n\n    while(1)\n    {\n        prev = seq; \n        seq++;\n\n        printf(\"\\nEnter the 3 request characters, each followed by newline\\n\");\n        scanf(\"%d%d%d\", &amp;req1, &amp;req2, &amp;req3);    \n        msg = createheader(req1, req2, req3, tp, seq);\n\n\n        while(c!='\\0')\n        {\n            c = *(msg+ctr);\n            //puts(&amp;c);\n            message[ctr] = c;\n            ctr++;\n        }   \n        //printf(\"\\nsize of %d\",sizeof(c));\n        c = '0';\n        ctr = 0;\n\n        //msg = NULL; \n\n        // connect to server \n\n\n        // request to send datagram \n        // connect stores the peers IP and port\n\n        sendto(sockfd, message, sizeof(message), 0, (struct sockaddr*)&amp;servaddr, sizeof(servaddr)); \n        puts(message);\n        // waiting for response\n        n = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr*)&amp;servaddr, &amp;len);\n</code></pre>\n\n<p>Portion after this is specific to my application: may be ignored unless you want to test it out.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>        curr = buffer[4]-'0' + (buffer[5]-'0')*256 + (buffer[6]-'0')*65536 + (buffer[7]-'0')*65536*256;\n\n        if (prev == curr || n == -1)\n            {   \n                resendflag = 1;     \n                while(resendflag)\n                    {\n                        printf(\"No Response Recieved. Resending...\\n\");                       \n                        sendto(sockfd, message, strlen(message), 0, (struct sockaddr*)&amp;servaddr, sizeof(servaddr));\n                        n = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr*)NULL, NULL); \n                        curr = buffer[4]-'0' + (buffer[5]-'0')*256 + (buffer[6]-'0')*65536 + (buffer[7]-'0')*65536*256;\n\n                        if (prev == curr || n == -1)\n                            {\n                                resendflag = 1;\n                            }\n                        else\n                            {\n                                resendflag = 0;\n                                puts(buffer+12);\n                            }\n\n                        sleep(1);\n                     }\n            }\n        else\n            puts(buffer+12);\n\n        //tp = 'A';        \n        //msg = createheader(req1, req2, req3, tp, seq);\n        // close the descriptor\n\n    } \n    close(sockfd);\n} \n\nchar* createheader(int req1, int req2, int req3, char tp, int seq)\n{\n    static char msg1[1000];\n    int len;\n    //char req;\n    msg1[0] = 'A';\n    msg1[1] = tp;\n    msg1[3] = '0';\n    msg1[4] = seq%256+'0';\n    msg1[5] = (seq/256)%256+'0';\n    msg1[6] = (seq/65536)%256+'0';\n    msg1[7] = (seq/(65536*256))%256+'0';\n    msg1[8] = req1+'0';\n    msg1[9] = req2+'0';\n    msg1[10] = req3+'0';   \n    msg1[12] = '\\0';\n    len = strlen(msg1);\n\n    msg1[2] = len +'0';\n\n\n    return msg1;   \n\n}\n</code></pre>\n\n<p>And this is the server:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n#include &lt;string.h&gt; \n#include &lt;sys/types.h&gt; \n#include &lt;arpa/inet.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;netinet/in.h&gt; \n#include &lt;sys/time.h&gt;\n#include &lt;time.h&gt;\n\n#define PORT 15002 \n#define MAXLINE 10000\nchar* MULTICAST = \"224.0.0.3\";\nchar* myIP = \"127.0.0.2\";\n\nchar* createheader(int , int , int , char , int , int);\nchar* sysfunc(int , int , int); \n\n// Driver code \nint main(int argc, char *argv[]) \n{    \n    setbuf(stdout, NULL);\n    printf(\"lololol5\"); //Just some indicators to see the progress\n    char buffer[10000]; \n    char *message = \"Hello Client\";\n    char msg[10000];\n    char *msg1;\n    char tp = 'R';\n    int yes = 1; \n    int listenfd, len, l=0, seq = 0, req1, req2, req3, i, curr = 0, exc = 0;\n    const char* syscl= NULL;\n\n    int drop;\n    srand(time(NULL));\n\n    FILE* fp;\n\n    struct sockaddr_in servaddr, cliaddr; \n    bzero(&amp;servaddr, sizeof(servaddr)); \n    printf(\"lololol4\");  \n    // Create a UDP Socket \n    listenfd = socket(AF_INET, SOCK_DGRAM, 0);\n       if (listenfd &lt; 0) {\n     perror(\"socket\");\n     exit(1);\n   }\n\n    if (setsockopt(listenfd, SOL_SOCKET, SO_REUSEADDR, (int*)&amp;yes, sizeof(yes))&lt;0)\n        {\n            perror(\"socket\");\n            exit(1);\n        }\n\n    printf(\"lololol3\");\n\n    servaddr.sin_addr.s_addr = INADDR_ANY; \n    servaddr.sin_port = htons(PORT); \n    servaddr.sin_family = AF_INET;\n\n    char *ip = inet_ntoa(servaddr.sin_addr);\n    printf(\"\\nip is %s\\n\", ip); \n\n    // bind server address to socket descriptor \n    if (bind(listenfd, (struct sockaddr *) &amp;servaddr, sizeof(servaddr)) &lt; 0) {        \n         perror(\"bind\");\n     exit(1);\n      }\n\n     printf(\"lololol2\");   \n\n    struct ip_mreq mreq;\n    mreq.imr_multiaddr.s_addr = inet_addr(MULTICAST);\n    mreq.imr_interface.s_addr = inet_addr(myIP);\n\n    char *ip1 = inet_ntoa(mreq.imr_multiaddr);\n    printf(\"\\nmulip is %s\\n\", ip1); \n\n    if (setsockopt(listenfd, IPPROTO_IP, IP_ADD_MEMBERSHIP, (char*) &amp;mreq, sizeof(mreq)) &lt; 0)\n    {\n        perror(\"setsockopt\");\n        return 1;\n    } \n    while(1)\n    {   \n        //receive the datagram \n        len = sizeof(cliaddr);\n        int n = recvfrom(listenfd, (char*) buffer, sizeof(buffer), 0, (struct sockaddr*)&amp;cliaddr, &amp;len); //receive message from client \n</code></pre>\n\n<p>As before, application specific portion.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>printf(\"\\nHi\\n\"); \n        puts(buffer); //display message\n        printf(\"\\n\");\n        curr = buffer[4]-'0' + (buffer[5]-'0')*256 + (buffer[6]-'0')*65536 + (buffer[7]-'0')*65536*256;//acquire client seq. no\n\n        req1 = buffer[8]; req2 = buffer[9]; req3 = buffer[10];//extract request bytes      \n        syscl = sysfunc(req1-48, req2-48, req3-48); //Function call to get system corresponding system command string\n\n        l = 12; //After 12 bytes of header\n        puts(syscl);\n\n        if (strcmp(syscl, \"\\nInvalid Command...\\n\\0\"))\n            {\n                system(syscl); //The system call with the string gotten\n                fp = fopen(\"sysstat.txt\",\"r\"); //Open the file where system output is written    \n                while(!feof(fp))\n                    {\n                        msg[l] = fgetc(fp); //write file into an array\n                        l++;\n                    }\n                fclose(fp);\n                msg[l] = '\\0'; //Append string with end of text char\n\n            }\n        else\n            {\n                char c1 = '0';\n                while(c1 != '\\0')\n                    {\n                        c1 = *(syscl+l-12); //write file into an array\n                        //printf(\"\\n %c\", msg[l]);\n                        msg[l] = c1; \n                        l++;\n                    }\n            }\n\n\n\n        msg1 = createheader(req1, req2, req3, tp, curr, l); //Create Header  \n\n        for (i=0; i&lt;12; i++)\n           {\n                msg[i] = *(msg1+i);\n\n            }\n\n        drop = rand()%10+1; //to simulate dropped packets\n\n        if (drop &gt; 2) //Drop with a given prob (i.e (x-1)/10)\n        {\n            sendto(listenfd, &amp;msg, MAXLINE, 0,(struct sockaddr*)&amp;cliaddr, sizeof(cliaddr));\n            puts(msg);\n        }\n\n        l = 0; \n    }\n}\n\nchar* createheader(int req1, int req2, int req3, char tp, int seq, int len) //header\n{\n    static char msg1[10000];\n    //int len;\n    //char req;\n    msg1[0] = '$'; //Start Char\n    msg1[1] = tp; //Type of req.\n    //msg1[3] = '0';\n    msg1[4] = seq%256+'0'; //4-7: seq no in little endian\n    msg1[5] = (seq/256)%256+'0';\n    msg1[6] = (seq/65536)%256+'0';\n    msg1[7] = (seq/(65536*256))%256+'0';\n    msg1[8] = req1;\n    msg1[9] = req2;\n    msg1[10] = req3;   \n    msg1[11] = '0';//Reserved Byte, Also for alignment\n    //len = strlen(msg1);\n\n    msg1[2] = (len +'0')%256+'0'; //2-3:Length in lil' endian\n    msg1[3] = ((len+'0')/256)%256+'0';\n\n    return msg1;   \n\n}\n\nchar* sysfunc(int req1, int req2, int req3)\n{\n    static char syscl[100];\n    //printf(\"\\ncomm %d\\n\", req2);\n    //printf(\"\\ncomm %d\\n\", req3);\n\n    switch (req2)\n    {\n        case 1: //Hardware\n            {\n                switch (req3)\n                {\n                    case 1: strcpy(syscl, \"lscpu &gt; sysstat.txt\\0\"); //CPU\n                    break;\n\n                    case 2: strcpy(syscl, \"lsmem &gt; sysstat.txt\\0\"); //Memoru=y\n                    break;\n\n                    case 3: strcpy(syscl, \"lsblk &gt; sysstat.txt\\0\"); //HDDs\n                    break;\n\n                    case 4: strcpy(syscl, \"lspci &gt; sysstat.txt\\0\"); //PCI Add-Ons\n                    break;\n\n                    default: strcpy(syscl, \"\\nInvalid Command...\\n\\0\"); //Default\n                    break;\n                }\n\n            }\n        break;\n\n        case 2: //OS\n            {\n                 switch (req3)\n                {\n                    case 1: strcpy(syscl, \"hostname &gt; sysstat.txt\\0\");//Hostname\n                    break;\n\n                    case 2: strcpy(syscl, \"hostnamectl &gt; sysstat.txt\\0\");//OS and Kernel\n                    break;\n\n                    case 3: strcpy(syscl, \"uptime &gt; sysstat.txt\\0\");//Uptime\n                    break;\n\n                    default: strcpy(syscl, \"\\nInvalid Command...\\n\\0\");\n                    break;\n                }\n            }\n        break;\n\n        case 3: //Network\n            {\n                 switch (req3)\n                {\n                    case 1: strcpy(syscl, \"ip link show &gt; sysstat.txt\\0\");//Ifs\n                    break;\n\n                    case 2: strcpy(syscl, \"ifconfig | grep ether &gt; sysstat.txt\\0\");//Ethernet\n                    break;\n\n                    case 3: strcpy(syscl, \"ifconfig &gt; sysstat.txt\\0\");//IP\n                    break;\n\n                    case 4: strcpy(syscl, \"route -n &gt; sysstat.txt\\0\");//Routing Table\n                    break;\n\n                    default: strcpy(syscl, \"\\nInvalid Command...\\n\\0\");\n                    break;\n                }\n            }\n        break;\n\n        default: strcpy(syscl, \"\\nInvalid Command...\\n\\0\");\n        break;\n    }\n\n    return syscl;            \n}\n</code></pre>\n\n<p>Have been at it for 2 days. Unable to figure out where I went wrong. Since the server is showing no reaction, I am assuming there is something wrong in the initial portions (recvfrom on the server side) and therefore have split the code in such a way. Sorry if I have made some obvious noob mistakes.</p>\n"}, {"tags": ["c", "arrays", "loops", "for-loop"], "comments": [{"owner": {"reputation": 451, "user_id": 3811394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cda424634dbce919c5f536793e32e3?s=128&d=identicon&r=PG&f=1", "display_name": "Trickzter", "link": "https://stackoverflow.com/users/3811394/trickzter"}, "edited": false, "score": 2, "creation_date": 1569414280, "post_id": 58098247, "comment_id": 102588458, "body": "You should loop over your array in its bounds and check every value itself. If you found the value, break the loop and print the index-variable. Also <code>for (i = 0; i &lt; Number; i++)</code> is a dangerous statement if the user enters a number &gt; 50 since your <code>Array</code> only contains 50 Elements."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1569414300, "post_id": 58098247, "comment_id": 102588477, "body": "Can you explain what you expect this code to do:  <code>if(cont = Array[0]){     printf(&quot;the number you input is stored in array# %d&quot;, Array[1]);  }</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1569414338, "post_id": 58098247, "comment_id": 102588503, "body": "<code>cont = Array[0]</code> -&gt; <code>cont == Array[0]</code>. But there are most likely mor errors."}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1569414583, "post_id": 58098247, "comment_id": 102588654, "body": "@AlexLop. if the user input an equal value to the array it will print the code bellow, im kinda still newbie to programming."}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "reply_to_user": {"reputation": 451, "user_id": 3811394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cda424634dbce919c5f536793e32e3?s=128&d=identicon&r=PG&f=1", "display_name": "Trickzter", "link": "https://stackoverflow.com/users/3811394/trickzter"}, "edited": false, "score": 1, "creation_date": 1569415429, "post_id": 58098247, "comment_id": 102589227, "body": "@Trickzter thanks men you just save me :) &lt;3"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569414893, "post_id": 58098414, "comment_id": 102588856, "body": "thank you so much, but can you tell me what the codes look should be?"}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569415142, "post_id": 58098414, "comment_id": 102589020, "body": "@Seonix Just replace your &quot;if(cont = Array[0]){...&quot; with what I said &quot;for (int i = 0; i &lt; Number; ++i) {...&quot;"}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569415398, "post_id": 58098414, "comment_id": 102589204, "body": "okay thanks u just save my life :) still im noob at programming xD"}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569416615, "post_id": 58098414, "comment_id": 102589970, "body": "i have a second question to you, if my professor accepts the while loop can you send me the while loop youre talking about? btw how do make this thread answered? xD"}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 1, "creation_date": 1569416790, "post_id": 58098414, "comment_id": 102590104, "body": "@Seonix There are no while loops involved in the question or solution. I&#39;m not sure what you&#39;re talking about. See this answer <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569418330, "post_id": 58098414, "comment_id": 102591002, "body": "ops sorry it was not you, and thanks for the answer"}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569419527, "post_id": 58098414, "comment_id": 102591735, "body": "can i ask another question?"}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569419821, "post_id": 58098414, "comment_id": 102591931, "body": "@Seonix Sure you can. Create another question, make sure to follow the guidelines for a good question as outlined here <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> . Also make sure you have done your research (or put in some effort of your own) before asking."}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569420024, "post_id": 58098414, "comment_id": 102592067, "body": "if i want to do it like while the user inputs the same value its gonna run the code that you gave to me, who do i do that? does it involve another kind of loop like while loop? do while?"}, {"owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569420256, "post_id": 58098414, "comment_id": 102592227, "body": "okay thanks for the info im sure this is my last question. I&#39;m just little bit confused over looping sorry for bothering you so much. its okay if you ignore my question u got my point anyways :) &lt;3"}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "reply_to_user": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "edited": false, "score": 0, "creation_date": 1569420427, "post_id": 58098414, "comment_id": 102592334, "body": "@Seonix If what you&#39;re asking is How do I make sure the user inputs no duplicates, then you also need to check if the value is in array (use the same for loop I provided) just after the scanf call"}], "tags": [], "owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1569415215, "last_edit_date": 1569415215, "creation_date": 1569414545, "answer_id": 58098414, "question_id": 58098247, "link": "https://stackoverflow.com/questions/58098247/store-an-array-value-from-the-user-and-print-it-where-array-it-stored-using-onl/58098414#58098414", "title": "Store an array value from the user and print it where array it stored (using only array and forloop)", "body": "<p>You have a common bug in your program here:</p>\n\n<pre><code> if(cont = Array[0]){\n    printf(\"the number you input is stored in array# %d\", Array[1]);\n }\n</code></pre>\n\n<p>you are overwriting <code>cont</code> with <code>Array[0]</code>. What you meant to say is:</p>\n\n<pre><code> if(cont == Array[0]){\n    printf(\"the number you input is stored in array# %d\", Array[1]);\n }\n</code></pre>\n\n<p>Also, you shouldn't only check if the number (<code>cont</code>) matches the first entry in the array, but all entries, like such:</p>\n\n<pre><code>for (int i = 0; i &lt; Number; ++i) {\n     if(cont == Array[i]){\n        printf(\"the number you input is stored in array# %d\", i);\n        break;\n     }\n}\n</code></pre>\n\n<p>If the number is not found nothing is printed.</p>\n"}], "owner": {"reputation": 11, "user_id": 12118756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mACzhbLSlxkUfqXBpjoM8DY45Q0Tj7jff5MWx-SKQ=k-s128", "display_name": "Seonix", "link": "https://stackoverflow.com/users/12118756/seonix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58098414, "answer_count": 1, "score": 0, "last_activity_date": 1569415215, "creation_date": 1569414034, "last_edit_date": 1569414272, "question_id": 58098247, "link": "https://stackoverflow.com/questions/58098247/store-an-array-value-from-the-user-and-print-it-where-array-it-stored-using-onl", "title": "Store an array value from the user and print it where array it stored (using only array and forloop)", "body": "<p>I've made a program that asks how many elements should be input in an array so if the user inputs 3, it will ask for a value to store in thearray, and then the program asks for input again, \"input a number\".</p>\n\n<p>If the user inputs a value that is already stored in thearray, it should display for example \"the number you input is stored already in array\".</p>\n\n<hr>\n\n<p>My professor gives this task to us, and he said that we should only be using  array and for loop. I'm new to this computer programming currently studying Programming  1st year college. It would be great if someone could help me. </p>\n\n<pre><code>int main()\n{\n   int Array[50], i, Number;\n   int cont;\n\n  printf(\"\\nPlease Enter Number of elements in an array  :  \");\n  scanf(\"%d\", &amp;Number);\n\n  printf(\"\\nPlease Enter %d elements of an Array \\n\", Number);\n  for (i = 0; i &lt; Number; i++)\n   {\n     scanf(\"%d\", &amp;Array[i]);\n\n   }\n printf(\"ENTER NUMBER: \");\n scanf(\"%d\", &amp;cont);\n\n if(cont = Array[0]){\n    printf(\"the number you input is stored in array# %d\", Array[1]);\n }\n\n\n}\n</code></pre>\n\n<p>the expected output should belike this</p>\n\n<pre><code>Please Enter Number of elements in an array: 3\nPlease Enter 3 elements of an Array\n10\n20\n30\nENTER NUMBER:20\n\nthe number you input is stored in array# 1\n</code></pre>\n\n<p>But the output in my code is. </p>\n\n<pre><code>Please Enter Number of elements in an array: 3\nPlease Enter 3 elements of an Array\n10\n20\n30\nENTER NUMBER:20\n\nthe number you input is stored in array# 20\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "fgets", "visual-studio-2019", "gets"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1569412934, "post_id": 58097852, "comment_id": 102587664, "body": "Never <b><i>ever</i></b> use <code>gets</code>. It&#39;s a <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">dangerous</a> function that have even been removed from the C standard. Use e.g. <a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead (but be aware of its different semantics regarding the newline)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569412986, "post_id": 58097852, "comment_id": 102587696, "body": "Also calling <code>fflush</code> with an input-only stream (like <code>stdin</code>) is explicitly marked as undefined behavior in the C specification. Some systems add it as a non-portable extension, but try to avoid it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569413041, "post_id": 58097852, "comment_id": 102587721, "body": "As for your problem, think about what happens with the <code>Enter</code> key you press after the character input."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1569413318, "last_edit_date": 1569413318, "creation_date": 1569412970, "answer_id": 58097912, "question_id": 58097852, "link": "https://stackoverflow.com/questions/58097852/problem-with-using-gets-in-visual-studio/58097912#58097912", "title": "Problem with using gets() in visual studio", "body": "<p>The function gets is not a standard C function. It is unsafe. The problem with your code is that after entering an integer the new line character is still in the input biffer and a next call of gets reads an empty string until the new line character is encountered.</p>\n\n<p>Use instead the standard C function fgets.</p>\n\n<p>If for example the expression <code>nome[i]</code> has a character array type then you can write</p>\n\n<pre><code>fgets( nome[i], sizeof( nome[i] ), stdin );\n</code></pre>\n\n<p>and then you need to remove the new line character from the string that is read into the array. For example</p>\n\n<pre><code>nome[i][ strcspn( nome[i], \"\\n\" ) ] = '\\0';\n</code></pre>\n\n<p>Pay attention to that this call</p>\n\n<pre><code>fflush(stdin);\n</code></pre>\n\n<p>has undefined behavior. Remove it.</p>\n"}], "owner": {"reputation": 1, "user_id": 12109860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3d7688a46e0f0500cab2c790f2b70e?s=128&d=identicon&r=PG&f=1", "display_name": "Gonzy", "link": "https://stackoverflow.com/users/12109860/gonzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "closed_date": 1569413103, "answer_count": 1, "score": 0, "last_activity_date": 1569413335, "creation_date": 1569412779, "last_edit_date": 1569413335, "question_id": 58097852, "link": "https://stackoverflow.com/questions/58097852/problem-with-using-gets-in-visual-studio", "closed_reason": "Duplicate", "title": "Problem with using gets() in visual studio", "body": "<p>I'm doing a contact list, but I'm having problems with using gets() in visual studio. The code below is inside a switch statement.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    if (nome[i][0] == 0 &amp;&amp; numero[i] == 0){\n    printf(\"Nome:\\n\");\n    fflush(stdin);\n    gets(nome[i]);\n    printf(\"Numero:\\n\");\n    scanf(\"%d\", &amp;numero[i]);\n    }\n</code></pre>\n\n<p>The problem that I'm having is that the gets() is skipped, but if I put a scanf(\"%c\", &amp;c) before the gets() like this it works.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    if (nome[i][0] == 0 &amp;&amp; numero[i] == 0){\n    printf(\"Nome:\\n\");\n    fflush(stdin);\n    scanf(\"%c\", &amp;c);\n    gets(nome[i]);\n    printf(\"Numero:\\n\");\n    scanf(\"%d\", &amp;numero[i]);\n    }\n</code></pre>\n\n<p>Someone told me that the problem causing this is a known problem with the visual studio console and there is a fix, but I can't find anything related to it on the internet. If someone told me what to do to fix it it would be really helpfull. If I put the first code in another IDE it works.</p>\n"}, {"tags": ["c", "unique", "triplet"], "comments": [{"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 1, "creation_date": 1569408072, "post_id": 58096521, "comment_id": 102585154, "body": "Can you post some examples of triplets? Some expected inputs and expected outputs perhaps so that we understand exactly what you imply by triplets."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569408193, "post_id": 58096521, "comment_id": 102585226, "body": "Is there a problem with the code you show? Does it work? If it <i>does</i> work (very important point) then it seems like what you want is a code-review, and such should be posted on <a href=\"https://codereview.stackexchange.com/tour\">the Code Review SE site</a>. Otherwise, please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a> as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>, and edit your question to improve it."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1569408995, "post_id": 58096521, "comment_id": 102585625, "body": "<code>1+1+(s-2)==s</code> = <code>2+s-2</code> = <code>s</code> so this will always be true. Same for <code>(1+2+(s-3)==s</code>. May start with thinking HARD about your logic."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569409016, "post_id": 58096521, "comment_id": 102585641, "body": "By the way, <code>1+1+(s-2)</code> makes no sense as it will be equal to <code>s</code>. Which then makes the comparison against <code>s</code> make even less sense."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1569438775, "post_id": 58096521, "comment_id": 102601179, "body": "The value you are being asked for can be calculated directly. You shouldn&#39;t need any loops at all."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1569432452, "post_id": 58097029, "comment_id": 102598567, "body": "So, if I understand your code correctly, you are making triplets with k, i and j. If the sum of those triplets are equal to the input, than the &#39;triplet counter&#39; goes 1 up?"}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1569436377, "post_id": 58097029, "comment_id": 102600179, "body": "And is there any way to reduce the CPU-time?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1569439458, "post_id": 58097029, "comment_id": 102601456, "body": "Refer to my answer for a much faster implementation. :)"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1569447278, "post_id": 58097029, "comment_id": 102604308, "body": "@BramKoop Yes, that is how it works and yes, it&#39;s a lot to do to reduce the cpu time. :)"}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": true, "score": 0, "last_activity_date": 1569494790, "last_edit_date": 1569494790, "creation_date": 1569409786, "answer_id": 58097029, "question_id": 58096521, "link": "https://stackoverflow.com/questions/58096521/counting-triplets-for-1-n-10000/58097029#58097029", "title": "Counting triplets for 1&lt;=n&lt;=10000", "body": "<p>You could just do a simple brute force. It's very slow for large numbers, but very easy to implement.</p>\n\n<pre><code>int no_triplets=0;\nfor(int i=1; i&lt;n; i++)\n    for(int j=1; j&lt;n; j++)\n        for(int k=1; k&lt;n; k++)\n            if(i+j+k == n)\n                no_triplets++;\n\nprintf(\"%d\\n\", no_triplets);\n</code></pre>\n\n<p>There are many ways to improve this very simple algorithm. For instance, one of the simplest is to make the loops for <code>i</code>, <code>j</code> and <code>k</code> go to <code>n-2</code>, <code>n-i</code> and <code>n-(i+j)</code>  instead. While you're at it. Change the starting values for <code>j</code> and <code>k</code> to <code>i</code> and <code>j</code> respectively. You can also optimize by some basic math. For instance, given <code>i</code>, <code>j</code> and <code>n</code>, you can calculate <code>k</code> by <code>k=n-(i+j)</code>. From your question, it seems reasonable to assume that <code>i</code>, <code>j</code> and <code>k</code> should be greater than zero. So by using some math and the first optimization we can rewrite to this:</p>\n\n<pre><code>int no_triplets=0;\nfor(int i=1; i&lt;n-2; i++) {\n    for(int j=i; j&lt;n-i; j++) {\n        int k=n-(i+j);\n        if(k&gt;0)\n            no_triplets++;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 0, "last_activity_date": 1569439379, "creation_date": 1569439379, "answer_id": 58105266, "question_id": 58096521, "link": "https://stackoverflow.com/questions/58096521/counting-triplets-for-1-n-10000/58105266#58105266", "title": "Counting triplets for 1&lt;=n&lt;=10000", "body": "<p>What you are asking here is fundamentally a math problem, not a programming one. There is a simple closed-form representation for the value you are trying to calculate.</p>\n\n<p>Rather than trying to derive the formula directly, I've taken a shortcut and searched for the first few nontrivial values (1,1,2,3,4,5,7,8,10) in the <a href=\"https://oeis.org/\" rel=\"nofollow noreferrer\">Online Encyclopedia of Number Sequences</a> -- and I immediately found a hit in <a href=\"https://oeis.org/A001399\" rel=\"nofollow noreferrer\">A001399 \"a(n) = number of partitions of n into at most 3 parts\u2026\"</a>.</p>\n\n<p>Said Encyclopedia gives a closed-form representation for this sequence of <code>a(n) = round( (n+3)^2/12 )</code>. In C, after accounting for the offset on the sequence, this could simply be expressed as <code>i = n*n/12</code>.</p>\n"}], "owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 58097029, "answer_count": 2, "score": -2, "last_activity_date": 1569494790, "creation_date": 1569407941, "last_edit_date": 1569438532, "question_id": 58096521, "link": "https://stackoverflow.com/questions/58096521/counting-triplets-for-1-n-10000", "title": "Counting triplets for 1&lt;=n&lt;=10000", "body": "<p>For a given number, I have to output how many triplets there are that make this number. Also 1+1+8 = 8+1+1 = 1+8+1.</p>\n\n<p>The code below is provided by user Klutt. I tried it and indeed, it does work, except for large numbers.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int n;      /* to store the number */\nlong i=0;   /* counter (long, just to be sure) */\n\nscanf(\"%d\", &amp;n);\n\n/* makes triplets [a, b, c] and looks if the sum of those numbers is equal to the \n * given number.\n */\nfor(int a=1; a&lt;n; a++) {\n    for(int b=a; b&lt;n; b++) {\n        for(int c=b; c&lt;n; c++) {\n            if(a+b+c == n) {\n                i++;\n            };\n        };\n    };\n};\n</code></pre>\n\n<p>Because of the long CPU-time, I tried to change the variables to unsigned int's and unsigned long and changed the for-loop to other kinds of loops, to see of any of them had effect on the CPU-time. </p>\n\n<p>(I don't know anything on how to really affect this time. And my coding experience is also almost 0.)</p>\n\n<p>But when, for example, I insert a number above 1000, it takes more than 10 seconds to calculate an answer.</p>\n"}, {"tags": ["c", "fpga", "mmap", "intel-fpga"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11990986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea795c7abc8742dc0ec01bce3b5de714?s=128&d=identicon&r=PG&f=1", "display_name": "Jacko123", "link": "https://stackoverflow.com/users/11990986/jacko123"}, "edited": false, "score": 0, "creation_date": 1569517071, "post_id": 58096363, "comment_id": 102631629, "body": "Thank you i managed to get it working. using this <code>map = mmap(0, MAPPED_SIZE, PROT_READ|PROT_WRITE, MAP_SHARED, _fdmem, DDR_RAM_PHYS &amp; -PAGESIZE);   int volatile * const p = (int *) map;    *p = c;</code>"}, {"owner": {"reputation": 11, "user_id": 11990986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea795c7abc8742dc0ec01bce3b5de714?s=128&d=identicon&r=PG&f=1", "display_name": "Jacko123", "link": "https://stackoverflow.com/users/11990986/jacko123"}, "edited": false, "score": 0, "creation_date": 1569608569, "post_id": 58096363, "comment_id": 102665873, "body": "I was definitely getting confused. I am unfamiliar with the pages, how do you know how many pages are being used and can you specify the amount? I&#39;m relatively new to all this in case you haven&#39;t already realised :) @Brendan"}], "tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 3, "last_activity_date": 1569407372, "creation_date": 1569407372, "answer_id": 58096363, "question_id": 58096228, "link": "https://stackoverflow.com/questions/58096228/how-to-mmap-to-correct-address/58096363#58096363", "title": "How to mmap() to correct address", "body": "<p>I think you're confusing the physical address (0xff206000) with the virtual address (0xb6f31000). You don't care what the virtual address is, you just what the pages at the physical address 0xff206000 to be mapped to any virtual address you can use.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11990986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea795c7abc8742dc0ec01bce3b5de714?s=128&d=identicon&r=PG&f=1", "display_name": "Jacko123", "link": "https://stackoverflow.com/users/11990986/jacko123"}, "edited": false, "score": 0, "creation_date": 1569517141, "post_id": 58096461, "comment_id": 102631657, "body": "hi i did try it the way you suggested but it didnt work so i tried using this and it did work <code>map = mmap(0, MAPPED_SIZE, PROT_READ|PROT_WRITE, MAP_SHARED, _fdmem, DDR_RAM_PHYS &amp; -PAGESIZE); int volatile * const p = (int *) map; *p = c;</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 11990986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea795c7abc8742dc0ec01bce3b5de714?s=128&d=identicon&r=PG&f=1", "display_name": "Jacko123", "link": "https://stackoverflow.com/users/11990986/jacko123"}, "edited": false, "score": 0, "creation_date": 1569517717, "post_id": 58096461, "comment_id": 102631956, "body": "@Jacko123 There&#39;s no practical difference between what you show and what I suggested. What do you mean by &quot;didn&#39;t work&quot;?"}, {"owner": {"reputation": 11, "user_id": 11990986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea795c7abc8742dc0ec01bce3b5de714?s=128&d=identicon&r=PG&f=1", "display_name": "Jacko123", "link": "https://stackoverflow.com/users/11990986/jacko123"}, "edited": false, "score": 0, "creation_date": 1569608218, "post_id": 58096461, "comment_id": 102665737, "body": "My compiler threw up some error messages, i think because the munmap call expects me to use void?? not sure why its saying this  <code>$  In function &#39;main&#39;: error.c:56:9: warning: passing argument 1 of &#39;munmap&#39; discards &#39;volatile&#39; qualifier from pointer target type [enabled by default]          if (munmap(map,MAPPED_SIZE)==-1){          ^In file included from exmaplemmaaperror.c:10:0: \\gcc\\arm-linuxgnueabihf\\libc\\usr\\include\\sys\\mman.h:76:12: note: expected &#39;void *&#39; but argument is of type &#39;volatile int * const&#39;extern int munmap (void *__addr, size_t __len) __THROW;</code> @someprogrammerdude"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 11990986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea795c7abc8742dc0ec01bce3b5de714?s=128&d=identicon&r=PG&f=1", "display_name": "Jacko123", "link": "https://stackoverflow.com/users/11990986/jacko123"}, "edited": false, "score": 0, "creation_date": 1569609446, "post_id": 58096461, "comment_id": 102666213, "body": "@Jacko123 The <code>munmap</code> function want a plain non-qualified <code>void *</code> as argument. So just cast it as such."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1569407708, "creation_date": 1569407708, "answer_id": 58096461, "question_id": 58096228, "link": "https://stackoverflow.com/questions/58096228/how-to-mmap-to-correct-address/58096461#58096461", "title": "How to mmap() to correct address", "body": "<p>The offset argument to <code>mmap</code> is a byte offset into the file. The pointer that <code>mmap</code> returns is a pointer to that location in the file, which in your case is a pointer to the exact address you want to write the value to.</p>\n\n<p>So when you write the value, you write it to the exact location that <code>map</code> is pointing to:</p>\n\n<pre><code>int volatile * const map = (int volatile * const) mmap(...);\n*map = value;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11990986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea795c7abc8742dc0ec01bce3b5de714?s=128&d=identicon&r=PG&f=1", "display_name": "Jacko123", "link": "https://stackoverflow.com/users/11990986/jacko123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1569407708, "creation_date": 1569406937, "question_id": 58096228, "link": "https://stackoverflow.com/questions/58096228/how-to-mmap-to-correct-address", "title": "How to mmap() to correct address", "body": "<p>I am trying to write an integer (1114129) from my HPS on Cyclone V Altera FPGA from a PUTTY window to a 32bit PIO on the FPGA side via lightweight axis interface. I am using mmap() and cannot get it to map to the address i want it to which is 0xff206000, instead its mapping to the address 0xb6f31000. My code and result is shown below. </p>\n\n<pre><code>#include &lt;sys/stat.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt; \n#include &lt;sys/shm.h&gt; \n#include &lt;sys/mman.h&gt;\n#include &lt;sys/time.h&gt; \n#include &lt;math.h&gt; \n\n#define MAPPED_SIZE 4\n#define DDR_RAM_PHYS 0xff206000\n#define PAGESIZE 0x1000 \n//1114129\nint main(void)\n{\n        int _fdmem;\n        void *map;\n        int a;\n        int c = 1114129;\n        const char memDevice[] = \"/dev/mem\";\n        _fdmem = open( memDevice, O_RDWR | O_SYNC );\n\n        if (_fdmem &lt; 0){\n                printf(\"Failed to open the /dev/mem !\\n\");\n                return 0;\n        }\n        else{\n                printf(\"open /dev/mem successfully !\\n\");\n        }\n\n        a = sysconf(_SC_PAGESIZE);\n        printf(\"page %d\", a);\n        /* mmap() the opened /dev/mem */\n        map = mmap(0, MAPPED_SIZE, PROT_READ|PROT_WRITE, MAP_SHARED, _fdmem, DDR_RAM_PHYS &amp; -PAGESIZE);\n\n\n\n\n          if (map == MAP_FAILED) { perror(\"npheap_alloc()\"); exit(1); }\n\n\n        int volatile * const p = (int *) (map + (0xff206000 % PAGESIZE));\n        *p = c;\n\n\n        printf(\"value %p\", map);\n        printf(\"\\nThe memory address of variable var = ptr = %p\\n\", p);\n        printf(\"\\nIndirect access, variable var value = *ptr = %d\", *p);\n\n\n        /* unmap the area &amp; error checking */\n        if (munmap(map,MAPPED_SIZE)==-1){\n               perror(\"Error un-mmapping the file\");\n        }\n\n\n\n        /* close the character device */\n        close(_fdmem);\n}\n\n</code></pre>\n\n<pre><code>open /dev/mem successfully !\npage 4096value 0xb6f31000\nThe memory address of variable var = ptr = 0xb6f31000\n\nIndirect access, variable var value = *ptr = 1114129#\n</code></pre>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["c", "llvm", "llvm-ir"], "answers": [{"comments": [{"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1569418613, "post_id": 58099167, "comment_id": 102591191, "body": "The answer is correct, but might mention <a href=\"https://llvm.org/doxygen/classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814\" rel=\"nofollow noreferrer\">Instruction::getDebugLoc()</a>. BTW, the line that starts with !7 will have the file name. Or one can get it from the DebugLoc object, that&#39;s what the IR printer does."}, {"owner": {"reputation": 142, "user_id": 4049583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aa78c9fafca9ba637b702b947f767d96?s=128&d=identicon&r=PG&f=1", "display_name": "Nishit Shah", "link": "https://stackoverflow.com/users/4049583/nishit-shah"}, "edited": false, "score": 0, "creation_date": 1569418947, "post_id": 58099167, "comment_id": 102591394, "body": "Thanks Morten and arnt for your answer, I see that through I-&gt;getDebugLoc() we can get details about the line number of the variable but my concern is how to get all the lines where it is accessed?"}], "tags": [], "owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1569416814, "creation_date": 1569416814, "answer_id": 58099167, "question_id": 58096202, "link": "https://stackoverflow.com/questions/58096202/how-to-get-all-the-line-number-of-a-variable-from-source-code-given-llvm-ir/58099167#58099167", "title": "How to get all the line number of a variable from source code given LLVM IR?", "body": "<blockquote>\n  <p>I believe, from inspecting LLVM IR, getting the line number details\n  for any variable has something to do with accessing !dbg at the end of\n  instruction. But I don't know how to access this information.</p>\n</blockquote>\n\n<p>I believe you are correct in that assumption. As far as I can tell, all the information is there for you:</p>\n\n<p>The first instruction ends with <code>!dbg !12</code> (<code>store i32 0, i32* %i, align 4, !dbg !12</code>).</p>\n\n<p>Then you should find a line starting with <code>!12</code>. Hint, the debug info is usually at the bottom of the LLVM IR for the module.</p>\n\n<p>In your case it is: <code>!12 = !DILocation(line: 2, column: 6, scope: !7)</code> &lt;-- The interpretation here is: The instruction marked with <code>!12</code> comes from line 2 column 6 in the source file that generated this LLVM IR. The name of the source file should also be available (usually at the top of the LLVM IR).</p>\n\n<blockquote>\n  <p>Another doubt is if a pointer is used to store address of a variable,\n  how do we know for which variable it is storing address of ?</p>\n</blockquote>\n\n<p>You need to deduce that information yourself e.g. through data flow analysis. It's conceptually fairly simple though, since <a href=\"https://en.wikipedia.org/wiki/Static_single_assignment_form\" rel=\"nofollow noreferrer\">LLVM IR is in SSA form</a> already.</p>\n"}, {"tags": [], "owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "is_accepted": false, "score": 0, "last_activity_date": 1569419829, "last_edit_date": 1569419829, "creation_date": 1569419353, "answer_id": 58099959, "question_id": 58096202, "link": "https://stackoverflow.com/questions/58096202/how-to-get-all-the-line-number-of-a-variable-from-source-code-given-llvm-ir/58099959#58099959", "title": "How to get all the line number of a variable from source code given LLVM IR?", "body": "<p>Everything in LLVM is a Value, and some of the Values keep track of their users. 42 (a constant int) does not, but the Values you are interested in do keep track of their users. I have some code that processes the phi nodes that use a partciular Value; here are three lines that find those phi nodes:</p>\n\n<pre><code>for(auto u : someValue-&gt;users()) {\n  PHINode * phi = dyn_cast&lt;PHINode&gt;(u);\n  if(phi)\n    \u2026\n</code></pre>\n\n<p>Note that this only works in-module. If you have a global value (such as many functions) then uses from outside the module aren't tracked (such as most function calls).</p>\n"}], "owner": {"reputation": 142, "user_id": 4049583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aa78c9fafca9ba637b702b947f767d96?s=128&d=identicon&r=PG&f=1", "display_name": "Nishit Shah", "link": "https://stackoverflow.com/users/4049583/nishit-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1569693463, "creation_date": 1569406863, "last_edit_date": 1569693463, "question_id": 58096202, "link": "https://stackoverflow.com/questions/58096202/how-to-get-all-the-line-number-of-a-variable-from-source-code-given-llvm-ir", "title": "How to get all the line number of a variable from source code given LLVM IR?", "body": "<p>I am totally a newbie in LLVM. I wanted to know how we can get all the line numbers for a particular variable from source code given LLVM IR?</p>\n\n<p>For example (showing snippet of LLVM IR)</p>\n\n<pre><code>store i32 0, i32* %i, align 4, !dbg !12\n!12 = !DILocation(line: 2, column: 6, scope: !7)\n%4 = load i32*, i32** %ip, align 8, !dbg !30\n!30 = !DILocation(line: 7, column: 4, scope: !25)\n</code></pre>\n\n<p>I believe, from inspecting LLVM IR, getting the line number details for any variable has something to do with accessing <code>!dbg</code> at the end of instruction. But I don't know how to access those information.</p>\n\n<p>Another doubt is if a pointer is used to store address of a variable, how do we know for which variable it is storing address of?</p>\n"}, {"tags": ["c", "arrays", "char", "int"], "comments": [{"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1569407438, "post_id": 58095948, "comment_id": 102584814, "body": "it&#39;s not required, but a <code>char[]</code> could be considered a <code>string</code>, and consequentially, a <code>char[][]</code> is <code>string[]</code> aka an array of strings."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1569409141, "post_id": 58095948, "comment_id": 102585699, "body": "@Shark <i>a <code>char[][]</code> is <code>string[]</code> aka an array of strings</i>  No, just no.  Lose the CS50 <code>string</code> abomination. Permanently. Hiding a pointer behind a <code>typedef</code> is misleading - at best."}, {"owner": {"reputation": 1811, "user_id": 12062404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7672893c82da1651cc0a83bb1c54b623?s=128&d=identicon&r=PG&f=1", "display_name": "gst", "link": "https://stackoverflow.com/users/12062404/gst"}, "edited": false, "score": 0, "creation_date": 1569409993, "post_id": 58095948, "comment_id": 102586175, "body": "See this answer: <a href=\"https://stackoverflow.com/a/57765755/12062404\">stackoverflow.com/a/57765755/12062404</a> This question gets asked a lot. A simple web search would give you a number of links to C tutorials that would answer your question, see this for example: <a href=\"https://overiq.com/c-programming-101/array-of-strings-in-c/\" rel=\"nofollow noreferrer\">overiq.com/c-programming-101/array-of-strings-in-c</a>"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1569413651, "post_id": 58095948, "comment_id": 102588077, "body": "@AndrewHenle i agree, and never mentioned any <code>typedef</code>s in there, was just trying to explain that a string is a <code>char[]</code>, and that a <code>char[][]</code> is an array of such &quot;strings&quot;. and pointed out that a char array does not need two <code>[]</code>, but just one - but the purpose for which it is used, which is usually an array of strings - requires two."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569414266, "post_id": 58095948, "comment_id": 102588445, "body": "&quot;In a char array you are required to have 2 of []&quot; --&gt; No.  <code>char u[1][50];</code> is not a <code>char</code> array but an <a href=\"https://cdecl.org/?q=char+u%5B1%5D%5B50%5D%3B\" rel=\"nofollow noreferrer\">array 1 of array 50 of char</a>, a 2D array of <code>char</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 9, "last_activity_date": 1569406345, "creation_date": 1569406345, "answer_id": 58096032, "question_id": 58095948, "link": "https://stackoverflow.com/questions/58095948/why-does-a-char-array-require-two-of-but-an-int-array-requires-one/58096032#58096032", "title": "Why does a &quot;char array&quot; require two of &quot;[]&quot; but an &quot;int array&quot; requires one &quot;[]&quot;?", "body": "<p>You don't need two <code>[]</code>:</p>\n\n<pre><code>int main() {\n    char u[50];\n    strcpy(u, \"test\");\n    printf(\"%s \\n\", u);\n}\n</code></pre>\n\n<p>It's just that strings are represented by a pointer to a character, so passing one <code>char</code> doesn't work. You tried that anyway, and then you changed the definition of the string to a multidimensional <code>char</code> array. This is redundant and causes issues when you do this:</p>\n\n<pre><code>char u[1][50];\nstrcpy(u[1],\"test 2\");\n</code></pre>\n\n<p>which is undefined behavior as the first array index has to be <code>0</code>.</p>\n\n<p>Perhaps your confusion comes from the comparison with <code>int</code>. If you want to print one <code>char</code>, use the <code>%c</code> format specifier (and then pass a <code>char</code>, not a <code>char*</code>). If you do that, it will be just like the <code>int</code> example:</p>\n\n<pre><code>int main() {\n    char z[100];\n\n    z[0] = '1';\n    z[1] = '2';\n\n    printf(\"%c \\n\", z[1]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "is_accepted": true, "score": 2, "last_activity_date": 1569407899, "last_edit_date": 1569407899, "creation_date": 1569407342, "answer_id": 58096358, "question_id": 58095948, "link": "https://stackoverflow.com/questions/58095948/why-does-a-char-array-require-two-of-but-an-int-array-requires-one/58096358#58096358", "title": "Why does a &quot;char array&quot; require two of &quot;[]&quot; but an &quot;int array&quot; requires one &quot;[]&quot;?", "body": "<p>Arrays in C follow this notation:</p>\n\n<pre><code>type array_name[num_elements];\ntype array_name[num_rows][num_elements];\n...\n</code></pre>\n\n<p>So in your case you may want to have:</p>\n\n<pre><code>int z[100];\n</code></pre>\n\n<p>would be an array of 100 ints. To access any of them you use z[0] for the first int, z[1] for the second int, etc. till z[99].</p>\n\n<p>Similarly you may want to have an array of chars like such:</p>\n\n<pre><code>char u[50];\n</code></pre>\n\n<p>to access the first character you use u[0], etc.</p>\n\n<p>When it comes to multidimensional arrays, you may have:</p>\n\n<pre><code>char u[10][50];\n</code></pre>\n\n<p>which means you have 10 rows of 50 elements each. You can also call them strings, so 10 strings.</p>\n\n<p>To access the first string you use u[0]. The last string is at u[9].</p>\n\n<p>Now for each string you can access their elements like such: u[0][1] to access the second element of the first string.</p>\n\n<p>strcpy requires as its first argument a string. So if you have u[10][50], you can pass u[9], which would be last string. You should not pass u[9][2] which would be the third char from the last string.</p>\n\n<p>What you did is u[1][50], which means you so happen to have only 1 row in your list of strings. You still need to follow the same rules as for multidimensional arrays even though it is 1 string only. Normally you'd use u[50] and just pass u to strcpy</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1569407571, "last_edit_date": 1592644375, "creation_date": 1569407571, "answer_id": 58096416, "question_id": 58095948, "link": "https://stackoverflow.com/questions/58095948/why-does-a-char-array-require-two-of-but-an-int-array-requires-one/58096416#58096416", "title": "Why does a &quot;char array&quot; require two of &quot;[]&quot; but an &quot;int array&quot; requires one &quot;[]&quot;?", "body": "<blockquote>\n<p>Well then in such case..</p>\n<p>for the char array why are two of [] required ?</p>\n</blockquote>\n<p>It is not required...</p>\n<p>Your confusion seems to come from the way string (aka text strings) are handled in C.</p>\n<p>In C a string is a <strong>char array</strong> with the special requirement that a char in the array has the value NUL (aka <code>'\\0'</code>). That special char represents end-of-string.</p>\n<p>So in order to make an <strong>array of strings</strong>, you'll have to use &quot;two []&quot; - example:</p>\n<pre><code>char myStrings[10][101];\n</code></pre>\n<p>The variable <code>myStrings</code> can hold 10 strings and each of these can be up to 100 characters long (note: not 101 because you need one char for holding the special NUL character).</p>\n<p>If you just do:</p>\n<pre><code>char someCharArray[101];\n</code></pre>\n<p>you can use it to store <strong>one</strong> string (max len 100) <strong>or</strong> use it for storing 101 individual chars.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1569408638, "creation_date": 1569408638, "answer_id": 58096731, "question_id": 58095948, "link": "https://stackoverflow.com/questions/58095948/why-does-a-char-array-require-two-of-but-an-int-array-requires-one/58096731#58096731", "title": "Why does a &quot;char array&quot; require two of &quot;[]&quot; but an &quot;int array&quot; requires one &quot;[]&quot;?", "body": "<p>You\u2019re using <code>u</code> to store an array<sup>1</sup> of <em>strings</em>, where each string can be up to 49 characters in length.  </p>\n\n<p>C doesn\u2019t have an actual string type - in C, a string is a sequence of character values including a 0-valued terminator.  Strings are stored as arrays of character type (<code>char</code> for ASCII, EBCDIC, or UTF-8 character encodings, <code>wchar_t</code> for \"wide\" encodings).  So to store an array of <em>strings</em>, you need a 2D array of character type (or a 1D array of pointers to character type, where each element stores the address of another array, but we won\u2019t get into that here).</p>\n\n<p>So,</p>\n\n<pre><code>char name[51];\n</code></pre>\n\n<p>can store a <em>single</em> string up to 50 characters long (with an extra element for the 0 terminator):</p>\n\n<pre><code>printf( \"Gimme a name: \" );\nscanf( \"%s\", name );\n</code></pre>\n\n<p>Compare that to</p>\n\n<pre><code>char names[10][51];\n</code></pre>\n\n<p>which can store up to 10 strings, each of which can be up to 50 characters in length:</p>\n\n<pre><code>for ( size_t i = 0; i &lt; 10; i++ )\n{\n  printf( \"Gimme a string: \");\n  scanf( \"%s\", names[i] );\n}\n</code></pre>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>Actually, your declaration for <code>u</code> only allows for a single array element - <code>strcpy(u[1], \u201ctest 2\u201d);</code> is attempting to copy the string to the memory following <code>u</code>, which results in undefined behavior.\n</ol>\n\n<p></sup></p>\n"}, {"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1569417310, "last_edit_date": 1569417310, "creation_date": 1569412934, "answer_id": 58097896, "question_id": 58095948, "link": "https://stackoverflow.com/questions/58095948/why-does-a-char-array-require-two-of-but-an-int-array-requires-one/58097896#58097896", "title": "Why does a &quot;char array&quot; require two of &quot;[]&quot; but an &quot;int array&quot; requires one &quot;[]&quot;?", "body": "<blockquote>\n  <p>...Regardless of the answer to that question..<br>\n  Why isn't there 2 of [] ?</p>\n</blockquote>\n\n<p>Semantics may be affecting your understanding of arrays and their indexing requirements.  <code>C</code> has arrays for <code>int</code> and <code>char</code>, each requiring a single set of <code>[]</code> to define.  There is a special kind of <code>char</code> array in <code>C</code> commonly referred to as a <code>C String</code>, which is just a regular <code>char</code> array with the last character being the null terminator: <code>\\0</code>.  An array of <code>C strings</code> does commonly use two sets of brackets: <code>[][]</code>.\nThe rules for representing a <code>char</code> array are the same as those for representing an <code>int</code> array.  both can be described as a collection of values stored in a contiguous set of memory locations.  To illustrate, example arrays of <code>int</code>, <code>char</code> and a <code>C string</code> follow:</p>\n\n<pre><code>int  numarr[]   = {99,104,97,114,32,97,114,114,97,121,0};\nchar chararr1[] = {'c','h','a','r',' ','a','r','r','a','y','\\0'};\nchar chararr2[] = {99,104,97,114,32,97,114,114,97,121,0};\nchar string[]   = {\"char array\"}; \n</code></pre>\n\n<p>The array values in each of the 4 examples above are identical.  In most implementations, the <code>int</code> array is stored in a contiguous set 4 byte memory locations, while each of the <code>char</code> arrays are stored in a contiguous set of 1 byte memory locations. The three <code>char</code> arrays, if used in <code>printf()</code> would result in the same <em>string</em> output, as each is an array of <code>char</code> terminated with a null value.</p>\n\n<pre><code>printf(\"%s\\n%s\\n%s\\n\", chararr1, chararr2, string);\n</code></pre>\n\n<blockquote>\n  <p>char array<br>\n  char array<br>\n  char array  </p>\n</blockquote>\n\n<p>More about the special <code>char</code> array - <em>C string</em>, and arrays of <em>C string</em></p>\n\n<pre><code>char string[] = {\"this is a string\"}; \n</code></pre>\n\n<p>A <em>C string</em> is defined an a null terminated array of <code>char</code>:  The content de-marked between <code>^</code> is <code>string</code> defined above.  Note the null termination. </p>\n\n<pre><code>|t|h|i|s| |i|s| |a| |s|t|r|i|n|g|\\0|?|?|\n^                                  ^\n</code></pre>\n\n<p>A contiguous set of C strings, or <em>array of C strings</em> however can be represented by using two set of square brackets:</p>\n\n<pre><code>char strings[2][20] = {\"first string\", \"second string\"};\n</code></pre>\n\n<p>This array of string would look like this in memory:  </p>\n\n<pre><code>|f|i|r|s|t| |s|t|r|i|n|g|\\0|s|e|c|o|n|d| |s|t|r|i|n|g|\\0|?|?|?|\n|       |           |      |\n[0]     |           |      [1]   1st index used to access full string\n        [0][4]='t'  [0][10]='n'  2nd index used to access array elements  \n</code></pre>\n\n<p>While each string can be accessed by using the first index, </p>\n\n<pre><code>eg. strings[0] = \"first string\" and strings[1] = \"second string\"\n</code></pre>\n\n<p>each character of each string can be accessed using the first and second index</p>\n\n<pre><code>eg. strings[0][0] == 'f'  and strings[1][0] == 's'\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 58096358, "answer_count": 5, "score": 0, "last_activity_date": 1569417310, "creation_date": 1569406025, "last_edit_date": 1569416396, "question_id": 58095948, "link": "https://stackoverflow.com/questions/58095948/why-does-a-char-array-require-two-of-but-an-int-array-requires-one", "title": "Why does a &quot;char array&quot; require two of &quot;[]&quot; but an &quot;int array&quot; requires one &quot;[]&quot;?", "body": "<p>In a <code>char</code> array, you are required to have 2 of <code>[]</code>. One of them is for storing the <strong>array index number</strong> and the other one is for storing the <strong>value</strong> for that index:</p>\n\n<pre><code>char u[1][50];\n\nstrcpy(u[0],\"test\");\nstrcpy(u[1],\"test 2\");\n\nprintf(\"%s \\n\",u[1]);\n</code></pre>\n\n<p>But, in an <code>int</code> array you just need one <code>[]</code>.</p>\n\n<p>Is it for the <strong>array index number</strong> or is it for the <strong>value</strong>?</p>\n\n<p>Regardless of the answer to that question \u2026 Why isn't there 2 of <code>[]</code>?</p>\n\n<pre><code>int z[100];\n\nz[0] = 1;\nz[1] = 2;\n\nprintf(\"%d \\n\",z[1]);\n</code></pre>\n\n<p>Why must there be \"full accountability\" for the <code>char</code> array but, for the <code>int</code> array, there does not need to be \"full accountability\"?</p>\n\n<p>Why are there 2 standards?</p>\n\n<p>Maybe you do not need \"full accountability\" for arrays?<br>\nMaybe the array's index number is considered default, organic and free stuff?</p>\n\n<p>Well then in such case, for the <code>char</code> array, why are two of <code>[]</code> required?</p>\n"}, {"tags": ["c", "unit-testing", "cmock", "ceedling"], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 1, "last_activity_date": 1569429000, "creation_date": 1569429000, "answer_id": 58102851, "question_id": 58095755, "link": "https://stackoverflow.com/questions/58095755/general-unit-testing-possible-to-mock-self-functions-ceedling-cmock/58102851#58102851", "title": "General unit-testing: possible to mock self functions? (ceedling/CMock)", "body": "<p>No, you can't mock functions that are called from the same compilation unit. Most compilers will not put a reference to the symbol of the called function but a direct (relocatable) address or offset into the generated machine code. They even can optimize the call away if possible.</p>\n\n<p>You can cut the source files into smaller files which will be also a ton of work. You could try to automate this by a script.</p>\n\n<p>Apparently the project to test has a bad software design. ;-)</p>\n"}], "owner": {"reputation": 11, "user_id": 11047798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67352c7fb754c6bf3e10a0c4659b7f?s=128&d=identicon&r=PG&f=1", "display_name": "T.B.", "link": "https://stackoverflow.com/users/11047798/t-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569429000, "creation_date": 1569405316, "question_id": 58095755, "link": "https://stackoverflow.com/questions/58095755/general-unit-testing-possible-to-mock-self-functions-ceedling-cmock", "title": "General unit-testing: possible to mock self functions? (ceedling/CMock)", "body": "<p>Is it principally possible to mock the functions of a file to be tested?</p>\n\n<p>E.g. I want to test the file self_test.c consisting of those functions:</p>\n\n<pre><code>#include \"self_test.h\"\n\nuint8_t function_1(uint8_t argument)\n{\n    return function_2(argument);\n}\n\nuint8_t function_2(uint8_t argument)\n{\n    return (argument+1);\n}\n</code></pre>\n\n<p>with the test file principally looking like this:</p>\n\n<pre><code>#include \"mock_self_test.h\"\n\nvoid test_function_1(void)\n{\n    uint8_t input_value = 8;\n    stest_function_2_ExpectAndReturn(input_value, 10);\n    uint8_t output_value = function_1(input_value);\n    TEST_ASSERT_EQUAL_UINT8(10, output_value);\n}\n</code></pre>\n\n<p>and for completion the self_test.h file:</p>\n\n<pre><code>uint8_t function_1(uint8_t argument);\nuint8_t function_2(uint8_t argument);\n</code></pre>\n\n<p>When I do this, the compiler returns: \"error: Function function_1. Called more times than expected.\"</p>\n\n<p>I suppose this is bad practice and may not work, but as my function_2 is rather large this could save me a ton of work since I can test function_1 idependently of function_2.\nAnd I am working on legacy code, so rewriting everything with a better testing interface is unfortunately not an option.</p>\n\n<p>Ceedling output:</p>\n\n<pre><code>[==========] Running 1 tests from 1 test cases.\n[----------] Global test environment set-up.\n[----------] 1 tests from test_self_test.c\n[ RUN      ] test_self_test.c.test_function_1\ntest_self_test.c(22): error: Function function_1.  Called more times than expected.\n Actual:   FALSE\n Expected: TRUE\n[  FAILED  ] test_self_test.c.test_function_1 (0 ms)\n[----------] 1 tests from test_self_test.c (0 ms total)\n</code></pre>\n"}, {"tags": ["c", "optimization", "c-preprocessor", "flags"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569404061, "post_id": 58095371, "comment_id": 102582978, "body": "Why do you need this? What problem is this supposed to solve?"}, {"owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569654745, "post_id": 58095371, "comment_id": 102673793, "body": "I am trying to make the code dependent on the set optimization level. This is the problem I am trying to solve. Doing release/ debug defines wont do for my case. But as mentioned in the linked question, it seems like its not possible"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569664572, "post_id": 58095371, "comment_id": 102675425, "body": "I&#39;m not trying to be sarcastic or anything, but &quot;trying to make the code dependent on the set optimization level&quot; is pretty obvious. But that&#39;s the <i>solution</i> you want, and not the actual underlying problem. Please read or refresh about the <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a> as your question is one (asking about a solution to an (for us) unknown problem)."}, {"owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569683349, "post_id": 58095371, "comment_id": 102679512, "body": "A 3rd party software is changing the optimization flags for the project, because its bugged. I need to adjust to that. That is the underlying problem."}], "owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1569404081, "answer_count": 0, "score": 2, "last_activity_date": 1569403897, "creation_date": 1569403897, "question_id": 58095371, "link": "https://stackoverflow.com/questions/58095371/find-out-the-optimization-level-in-preprocessor", "closed_reason": "Duplicate", "title": "Find out the optimization level in preprocessor", "body": "<p>Is there a way in C language to figure out with what compilation flag the program is being compiled? For example (pseudo code):</p>\n\n<pre><code>#ifdef -O0\n// some code for no optimization\n#elsif -O1\n// other code for better optimization, etc.\n#endif\n</code></pre>\n"}, {"tags": ["c", "sum", "digits"], "comments": [{"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1569402521, "post_id": 58094737, "comment_id": 102582117, "body": "What do you mean, you are not allowed to use arrays? Could you specify this?"}, {"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "reply_to_user": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1569402794, "post_id": 58094737, "comment_id": 102582293, "body": "I&#39;m not allowed to use arrays in any way in my code. For example: storing every single digit in an array is not allowed."}, {"owner": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "edited": false, "score": 0, "creation_date": 1569403766, "post_id": 58094737, "comment_id": 102582800, "body": "If you want to use the scanf %d solution, then you can use a %10 and /10 based loop. If you don&#39;t want to stick to that, then a streaming parser on the string representation consuming one character a time might be even simpler."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1569403220, "post_id": 58095064, "comment_id": 102582522, "body": "Thanks for the clear explanation! I understand it now!"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "edited": false, "score": 0, "creation_date": 1569403355, "post_id": 58095064, "comment_id": 102582591, "body": "I&#39;ve added a little to my answer."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1569405238, "last_edit_date": 1569405238, "creation_date": 1569402901, "answer_id": 58095064, "question_id": 58094737, "link": "https://stackoverflow.com/questions/58094737/output-a-number-with-specified-length-and-sum/58095064#58095064", "title": "Output a number with specified length and sum", "body": "<p>Let's call the sum of digits S and the specified length L.</p>\n\n<p>First, we need to check if there's a solution. The minimum number of digits we need will depend on how many times 9 divides into S.</p>\n\n<ol>\n<li>Find how times 9 divides into S. Let's call this Q.</li>\n<li>Find the remainder of the aforementioned division. Let's call this R.</li>\n<li>If R is 0,\n\n<ol>\n<li>If the L is less than Q,\n\n<ol>\n<li>No solution.</li>\n</ol></li>\n</ol></li>\n<li>Else,\n\n<ol>\n<li>If the L is less than Q+1,\n\n<ol>\n<li>No solution.</li>\n</ol></li>\n</ol></li>\n</ol>\n\n<p>Now, we can produce the output.</p>\n\n<ol>\n<li>Output Q <code>9</code>s.</li>\n<li>If R isn't 0,\n\n<ol>\n<li>Output R.</li>\n<li>Output L-Q-1 <code>0</code>.</li>\n</ol></li>\n<li>Else\n\n<ol>\n<li>Output L-Q <code>0</code>.</li>\n</ol></li>\n</ol>\n\n<p>or</p>\n\n<ol>\n<li>Output Q <code>9</code>s.</li>\n<li>Set Z to L-Q.</li>\n<li>If R isn't 0,\n\n<ol>\n<li>Output R.</li>\n<li>Decrement Z.</li>\n</ol></li>\n<li>Output Z <code>0</code>.</li>\n</ol>\n\n<hr>\n\n<p>There are other approaches. You could avoid checking the inputs first by building the output in a buffer &mdash;or even in an <code>int</code>&mdash; but I used one that's easy to visualize and follows the often-required convention of validating before calculating.</p>\n\n<p>Division can be done as a loop, and this gives you the basis for the alternate approaches I mentioned.</p>\n\n<pre><code>unsigned R = S;\nunsigned Q = 0;\nwhile (R &gt; 9) {\n   R -= 9;\n   ++Q;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1569403043, "creation_date": 1569403043, "answer_id": 58095110, "question_id": 58094737, "link": "https://stackoverflow.com/questions/58094737/output-a-number-with-specified-length-and-sum/58095110#58095110", "title": "Output a number with specified length and sum", "body": "<p>I am giving a hint here and not the entire solution.</p>\n\n<ul>\n<li>Understand that there can be many correct answers for given sum of digits and length.</li>\n<li>The algorithm used is to output 9 always until the sum of digits remaining is less than 9. </li>\n</ul>\n\n<p>An algorithm is below.</p>\n\n<ul>\n<li>If the sum of digits > len *9 --> output Not possible --> end</li>\n<li>Loop through the digits.  \n\n<ul>\n<li>If sum_digits >= 9, --> output character 9,  --> hint use <code>printf (\"9\");</code> \n\n<ul>\n<li>decrement sum_digits by 9.</li>\n</ul></li>\n<li>else output character (sum_digits) --> use <code>printf (\"%c\",sum_digits+'0');</code>\n\n<ul>\n<li>set sum_digits to 0.</li>\n</ul></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 57, "user_id": 12092018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1369948536492938/picture?type=large", "display_name": "Bram Koop", "link": "https://stackoverflow.com/users/12092018/bram-koop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 58095064, "answer_count": 2, "score": 0, "last_activity_date": 1569405238, "creation_date": 1569401792, "question_id": 58094737, "link": "https://stackoverflow.com/questions/58094737/output-a-number-with-specified-length-and-sum", "title": "Output a number with specified length and sum", "body": "<p>I have to make a program in C, which accepts to integers, sumOfDig and lengthOfNum. sumOfDig equals the sum of the digits and lengthOfNum equals the length of the number. \nI am not allowed to use arrays or the math.lib</p>\n\n<p>1 \u2264 sumOfDig \u2264 81 and 1 \u2264 lengthOfNum \u2264 9</p>\n\n<p>I tried to write a while loop, but I can't think of a way that can build a number and subtract the last added number from the sum of the numbers.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int lengthOfNum;     /* stores the length of the number       */\n    int sumOfDig;        /* stores the sum of the digits          */\n    int ans;             /* stores the answer                     */\n\n    scanf(\"%d\", &amp;sumOfDig);     /* scans the sum of the digits    */\n    scanf(\"%d\", &amp;lengthOfNum);  /* scans the length of the number */\n\n    ans=0;     /* initializes ans */\n\n    /* adds a number to ans, and removes it from sumOfDig */\n    while(sumOfDig!=0 &amp;&amp; lengthOfNum!=0) {\n        /*???*/\n\n        lengthOfNum--;\n    };\n\n    printf(\"%d\\n\", ans);     /* prints the outcome */\n\n    return 0;\n}\n</code></pre>\n\n<p>The following should be the input and outcome:</p>\n\n<p>In: 20 2     Out: Not possible</p>\n\n<p>In: 20 3     Out: 992 (since the length is 3 and 9+9+2=20)</p>\n\n<p>In: 50 8     Out: 99999500 (since the length is 8 and 9+9+9+9+9+5+0+0=50)</p>\n"}, {"tags": ["c", "linux", "linker-errors"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569401709, "post_id": 58094604, "comment_id": 102581673, "body": "I&#39;m sure there&#39;s duplicates which is why I comment instead of answer: The problem is that the GNU linker wants libraries listed <i>after</i> object files on the command line. For example, if object file <code>A.o</code> depend on library <code>B</code>, then <code>A.o</code> must be listed before <code>-lB</code> on the command line, i.e. doing <code>cc A.o -lB</code> instead of <code>cc -lB A.o</code>. The project you&#39;re building uses the wrong order, with the libraries listed before the object files that depend on the libraries."}, {"owner": {"reputation": 27, "user_id": 11840850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157473811007920/picture?type=large", "display_name": "Ang Hock Leong", "link": "https://stackoverflow.com/users/11840850/ang-hock-leong"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569404842, "post_id": 58094604, "comment_id": 102583418, "body": "@Someprogrammerdude, can you edit the Makefile to fix it? I need more time to digest it. Thank you."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569405393, "post_id": 58094604, "comment_id": 102583736, "body": "Yes the makefile needs to be edited, or the script or program creating the makefile. But I suggest you report it as a bug to the project maintainers so they fix it upstream."}, {"owner": {"reputation": 27, "user_id": 11840850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157473811007920/picture?type=large", "display_name": "Ang Hock Leong", "link": "https://stackoverflow.com/users/11840850/ang-hock-leong"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569461114, "post_id": 58094604, "comment_id": 102607044, "body": "@Someprogrammerdude, I have fetch back to  the project maintainers and they will analyze and take action soon. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11840850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157473811007920/picture?type=large", "display_name": "Ang Hock Leong", "link": "https://stackoverflow.com/users/11840850/ang-hock-leong"}, "edited": false, "score": 0, "creation_date": 1569461011, "post_id": 58096221, "comment_id": 102607025, "body": "Hi @iww, it work. Thank you very much."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 1, "last_activity_date": 1569406916, "creation_date": 1569406916, "answer_id": 58096221, "question_id": 58094604, "link": "https://stackoverflow.com/questions/58094604/azsmb-source-sode-compilation-error-on-linux/58096221#58096221", "title": "AzSmb source sode compilation error on Linux?", "body": "<blockquote>\n<pre><code>cc -lstdc++ -ldl -lrt -lpthread SmbDemo.o ../SmbLibrary/SmbServer.a -o SmbDemo\n</code></pre>\n</blockquote>\n\n<p>Libraries need to be listed last. You must fix the makefile to use the command line like:</p>\n\n<pre><code>cc -o SmbDemo SmbDemo.o ../SmbLibrary/SmbServer.a -lstdc++ -ldl -lrt -lpthread\n</code></pre>\n\n<p>Also, you should <em>not</em> be adding the <code>-lstdc++</code> manually. Instead you should use the C++ compiler (<code>CC</code>, not <code>cc</code>), and the C++ compiler will add it for you.</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/q/45135/608639\">Why does the order in which libraries are linked sometimes cause errors in GCC?</a></p>\n"}], "owner": {"reputation": 27, "user_id": 11840850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157473811007920/picture?type=large", "display_name": "Ang Hock Leong", "link": "https://stackoverflow.com/users/11840850/ang-hock-leong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1569443143, "answer_count": 1, "score": -1, "last_activity_date": 1569407087, "creation_date": 1569401334, "last_edit_date": 1569407087, "question_id": 58094604, "link": "https://stackoverflow.com/questions/58094604/azsmb-source-sode-compilation-error-on-linux", "closed_reason": "Duplicate", "title": "AzSmb source sode compilation error on Linux?", "body": "<p>OS : Ubuntu 16.04 32 bit</p>\n\n<p>I am download \"C++ Source Code Version 2.07\" for azsmb at <a href=\"http://members.inode.at/anton.zechner/az/\" rel=\"nofollow noreferrer\">http://members.inode.at/anton.zechner/az/</a> .</p>\n\n<p>I follow the AzSmb/SmbDemoLinux/Readme.htm instruction to make SmbDemoLinux project.</p>\n\n<p>================\nSmbDemo for Linux    </p>\n\n<p>Introduction\nThe SmpDemo is written for the Linux OS. To run the demo you must do following steps: </p>\n\n<pre><code>1. Change to the ./SmbDemoLinux/ directory.\n\n2. Compile the demo with make.\n...\n</code></pre>\n\n<p>I have the error in below:</p>\n\n<blockquote>\n  <p>ubuntu@ubuntu-AngHL:~/FluDrive/AzSmb_2.07/AzSmb/SmbDemoLinux$ make\n  make -C ../SmbLibrary make[1]: Entering directory\n  '/home/ubuntu/FluDrive/AzSmb_2.07/AzSmb/SmbLibrary' make[1]: Nothing\n  to be done for 'all'. make[1]: Leaving directory\n  '/home/ubuntu/FluDrive/AzSmb_2.07/AzSmb/SmbLibrary' cc -lstdc++\n  -ldl  -lrt -lpthread SmbDemo.o ../SmbLibrary/SmbServer.a -o SmbDemo ../SmbLibrary/SmbServer.a(SystemLinux.o): In function\n  <code>SysThreadStart':\n  /home/ubuntu/FluDrive/AzSmb/AzSmb/SmbLibrary/../SmbServer/System/SystemLinux.cpp:2574:\n  undefined reference to</code>pthread_attr_setstacksize'\n  /home/ubuntu/FluDrive/AzSmb/AzSmb/SmbLibrary/../SmbServer/System/SystemLinux.cpp:2575:\n  undefined reference to <code>pthread_create'\n  /home/ubuntu/FluDrive/AzSmb/AzSmb/SmbLibrary/../SmbServer/System/SystemLinux.cpp:2582:\n  undefined reference to</code>pthread_detach'\n  ../SmbLibrary/SmbServer.a(SystemLinux.o): In function\n  <code>SysSemaphoreCreateEx':\n  /home/ubuntu/FluDrive/AzSmb/AzSmb/SmbLibrary/../SmbServer/System/SystemLinux.cpp:2183:\n  undefined reference to</code>pthread_condattr_setclock'\n  ../SmbLibrary/SmbServer.a(SystemLinux.o): In function <code>SysSleep':\n  /home/ubuntu/FluDrive/AzSmb/AzSmb/SmbLibrary/../SmbServer/System/SystemLinux.cpp:2483:\n  undefined reference to</code>pthread_condattr_setclock'\n  ../SmbLibrary/SmbServer.a(SocketUtility.o): In function\n  <code>SysSleep(unsigned int)':\n  /home/ubuntu/FluDrive/AzSmb/AzSmb/SmbLibrary/../SmbServer/System/SocketUtility.cpp:990:\n  undefined reference to</code>pthread_condattr_setclock'\n  /home/ubuntu/FluDrive/AzSmb/AzSmb/SmbLibrary/../SmbServer/System/SocketUtility.cpp:1001:\n  undefined reference to `pthread_condattr_setclock' collect2: error: ld\n  returned 1 exit status Makefile:20: recipe for target 'SmbDemo' failed\n  make: *** [SmbDemo] Error 1</p>\n</blockquote>\n\n<p>Questions:\n1. May I know how to fix the error?</p>\n\n<p>Tried:\n1. Include #include  did not help.</p>\n\n<pre><code>    File : AzSmb/SmbServer/System/SystemLinux.cpp\n</code></pre>\n\n<p>pthread_attr_init(&amp;iAttr);\n        pthread_attr_setstacksize(&amp;iAttr,dwStackSize);  //compile error is here\n    if( pthread_create(&amp;iThreadId,&amp;iAttr,SysThreadBegin,pThread))\n        {\n        free(pThread);\n        return 0;\n        }</p>\n\n<p>It should pass compilation but now fail.</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 14754, "user_id": 1827600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KHa84.png?s=128&g=1", "display_name": "suspectus", "link": "https://stackoverflow.com/users/1827600/suspectus"}, "edited": false, "score": 0, "creation_date": 1569400765, "post_id": 58094407, "comment_id": 102581102, "body": "please format your code, thanks"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569400819, "post_id": 58094407, "comment_id": 102581137, "body": "From <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread\" rel=\"nofollow noreferrer\">the documentation</a>: <i>A thread in an executable that calls the C run-time library (CRT) should use the _beginthreadex and _endthreadex functions for thread management rather than CreateThread and ExitThread;</i> I&#39;d start with changing to that. And then look into joining a thread when it ends."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1569401002, "post_id": 58094407, "comment_id": 102581232, "body": "When <code>main</code> returns, your program terminates."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569401148, "post_id": 58094407, "comment_id": 102581320, "body": "Please note that printf isn&#39;t necessarily thread safe, and both main() and the thread end up calling it simultaneously. Before calling a library function from a thread, you need to establish if it is thread-safe or not."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569401234, "post_id": 58094407, "comment_id": 102581375, "body": "@Lundin - Visual C++ runtime is thread safe.  As for overlapping <code>printf</code> statements - that might be a different matter with regards to what shows up on the screen."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1569401263, "post_id": 58094407, "comment_id": 102581397, "body": "In addition to all the other comments: Try to add <code>Sleep(1000);</code> right before <code>return 0;</code>, maybe the process terminates before the thread has a chance to run."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1569401313, "post_id": 58094407, "comment_id": 102581427, "body": "@selbie Nobody mentioned neither Visual Studio nor C++."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569401390, "post_id": 58094407, "comment_id": 102581473, "body": "@Shawn Actually read what it says. The bug you refer to is some very old crap in the MSVC CRT which was fixed some 15-20 years ago. It does not apply to other compilers. In addition, where exactly does the thread in the question call the CRT?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569401403, "post_id": 58094407, "comment_id": 102581484, "body": "@Lundin - fair enough, but he&#39;s clearly doing Windows programming. I don&#39;t know of a single compiler for Windows without a thread safe runtime."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1569401489, "post_id": 58094407, "comment_id": 102581542, "body": "@selbie Early Windows compilers were very unsafe in this regard. Modern Windows compilers should hopefully be thread safe. Regardless, there is very little reason to use stdio.h in a Windows program."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1569401589, "post_id": 58094407, "comment_id": 102581594, "body": "@Lundin Bug? I don&#39;t mention any bugs (Or specific compilers); I&#39;m just quoting what the docs say you should be doing. And <code>printf()</code> is a CRT function."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569401880, "post_id": 58094407, "comment_id": 102581756, "body": "@Shawn It&#39;s a very old bug in MSVC - specifically, a bug in MFC. I guess they haven&#39;t updated MSDN in 20 years. And MSDN assumes that you are using VC."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 43, "user_id": 11764728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbd3c387fb737b30946f11925b11faa?s=128&d=identicon&r=PG&f=1", "display_name": "KALYAN", "link": "https://stackoverflow.com/users/11764728/kalyan"}, "edited": false, "score": 0, "creation_date": 1569401616, "post_id": 58094497, "comment_id": 102581614, "body": "@KALYAN The key with threading is never to close them, but let them gracefully close by themselves. In Win API programming this is usually done by having the thread repeatedly poll a Windows event with <code>WaitForSingleObject</code>. Upon shut-down, the caller will set the event, then wait for the thread to finish."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569401672, "post_id": 58094497, "comment_id": 102581648, "body": "There&#39;s an API called TerminateThread which is probably what you are getting it.  However, that&#39;s a terrible, terrible practice to kill a thread because it will leak memory and other resources.  Possibly OK on shutdown.  But the best practice is to have a way in which your program signals the worker thread to shutdown gracefully before the main program exits - Exactly what Lundin said."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 4, "last_activity_date": 1569401305, "last_edit_date": 1569401305, "creation_date": 1569400998, "answer_id": 58094497, "question_id": 58094407, "link": "https://stackoverflow.com/questions/58094407/how-to-create-a-thread-in-c-program/58094497#58094497", "title": "How to create a thread in C program", "body": "<p>Your program is likely exiting before the thread you created in main has a chance to finish. Hence, the thread never had a chance to finish and print the result.</p>\n\n<p>Prior to the <code>CloseHandle</code> call, add a <code>WaitForSingleObject</code> call. This will force the code in main to wait for the thread to complete.</p>\n\n<pre><code>    printf(\"I wait\\n\");\n    WaitForSingleObject(THread_handle, INFINITE);\n\n    printf(\"I close\\n\");\n    CloseHandle(THread_handle);\n\n\n    return 0; \n}\n</code></pre>\n\n<p>Further, make sure you flush the output in your thread as well.  <code>printf</code> needs an end-of-line char.</p>\n\n<p>Instead of this in <code>ThreadFunc</code> :</p>\n\n<pre><code>printf(\"%d\",c);\n</code></pre>\n\n<p>Change it to this:</p>\n\n<pre><code>printf(\"%d\\n\",c);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11764728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbd3c387fb737b30946f11925b11faa?s=128&d=identicon&r=PG&f=1", "display_name": "KALYAN", "link": "https://stackoverflow.com/users/11764728/kalyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58094497, "answer_count": 1, "score": 0, "last_activity_date": 1569401368, "creation_date": 1569400648, "last_edit_date": 1569401368, "question_id": 58094407, "link": "https://stackoverflow.com/questions/58094407/how-to-create-a-thread-in-c-program", "title": "How to create a thread in C program", "body": "<p>I am tryin to create a thread using CreateThread() function and execute simple addition function in that thread. I wrote some code . But the thread is not being initiated any way.</p>\n\n<p>Can you please help me in correcting the code </p>\n\n<p>I have gone through MSDN for createthread function</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;windows.h&gt;\n#include &lt;tlhelp32.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;strsafe.h&gt;\n\nDWORD WINAPI ThreadFunc(LPVOID lpParam){\n     int a=1;\n     int b=2; \n     int c;\n     c = a+b;\n     printf(\"%d\",c);\n     return 0;\n}\n\nint main(void) \n{\n    DWORD myThreadId;\n    HANDLE THread_handle;\n    printf(\"\\n I am here inmain\");\n    THread_handle = CreateThread(NULL,0, ThreadFunc, NULL,0,&amp;myThreadId);\n    if (THread_handle == NULL) \n    {\n        printf(TEXT(\"CreateThread\"));\n        //ExitProcess(3)\n     }\n    printf(\"I close\\n\");\n    CloseHandle(THread_handle);\n    return 0; \n}\n\n</code></pre>\n"}, {"tags": ["c", "struct", "strtok"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1569395654, "post_id": 58092956, "comment_id": 102578508, "body": "How is this related to C#? Please don&#39;t spam with unrelated tags."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1569395739, "post_id": 58092956, "comment_id": 102578543, "body": "Also please don&#39;t show images of text, copy-paste the text <i>as text</i> instead."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1569395791, "post_id": 58092956, "comment_id": 102578562, "body": "What&#39;s <code>token</code>? What&#39;s <code>buffer</code>, <code>search</code>, <code>count</code>, <code>student</code>, <code>j</code> and <code>M</code>? Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1569395811, "post_id": 58092956, "comment_id": 102578572, "body": "Finally about what you seem to be asking about... It seems that you don&#39;t do any bounds checking of your array. If you go out of bounds of an array you will get <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. Or possibly you don&#39;t initialize the elements you <i>think</i> you&#39;re initializing. Please use a debugger to step through the code, statement by statement, while monitoring variables and their values. That&#39;s how one usually solves problems like this."}], "owner": {"reputation": 61, "user_id": 10356764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcc0f22174bb3fcc5f10a6ed5244382?s=128&d=identicon&r=PG&f=1", "display_name": "smallzZz8", "link": "https://stackoverflow.com/users/10356764/smallzzz8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569395767, "creation_date": 1569395543, "last_edit_date": 1569395767, "question_id": 58092956, "link": "https://stackoverflow.com/questions/58092956/array-of-structs-returning-random-values", "title": "Array of structs returning random values?", "body": "<p>Okay so I am having a weird issue which I still cannot solve and I am beginning to go crazy. I am trying to call variables from a struct, but it is giving me random values back. I am currently calling my structs with </p>\n\n<pre><code>printf(\"%s %i %i %i %i\\n\", student[0].lastName, student[0].assignmentScore, student[0].quizScore[0], student[0].quizScore[1], student[0].finalExamScore);\nprintf(\"%s %i %i %i %i\\n\", student[1].lastName, student[1].assignmentScore, student[1].quizScore[0], student[1].quizScore[1], student[1].finalExamScore);\nprintf(\"%s %i %i %i %i\\n\", student[2].lastName, student[2].assignmentScore, student[2].quizScore[0], student[2].quizScore[1], student[2].finalExamScore);\n</code></pre>\n\n<p>but I am getting this back\n<img src=\"https://i.gyazo.com/b59e8de20efca3e7ca2c36b50dcbb2d1.png\" alt=\"output\"></p>\n\n<p>The output that I am looking for is <img src=\"https://i.gyazo.com/4ab1fd804e34c2e51960ea1af8900d1c.png\" alt=\"output\"></p>\n\n<p>but if I change my struct declaration from </p>\n\n<pre><code>struct student student[100];\n</code></pre>\n\n<p>to</p>\n\n<pre><code>struct student student[3];\n</code></pre>\n\n<p>I get these random values back The output that I am looking for is <img src=\"https://i.gyazo.com/bf81be6f6a9ee14e56c1b8dd5254fc1d.png\" alt=\"output\"> </p>\n\n<p>I am also only using 2 students so 3 should be enough. Am I not declaring the array struct right?</p>\n\n<p>This is how I am assigning my structs </p>\n\n<pre><code>token = strtok(buffer, search);\n    N = atoi(token);\n    int dividerCount = 1;\n    int quizCounter = 0;\n    printf(\"'%s'\\n\", token);\n    while(token){\n\n        if(count == 0){\n            token = strtok(NULL,search);\n            M = atoi(token);\n            printf(\"'%s'\\n\", token);\n        }\n\n        if(count &gt;= 1){\n            for(j = 0; j &lt; (N * (3 + M)); j++){\n                int divider = M + 3;\n                if (dividerCount == 1){\n                    token = strtok(NULL, search);\n                    strcpy(student[count - 1].lastName, token);\n                    printf(\"'%s'\\n\", token);\n                } else if(dividerCount == 2){\n                    token = strtok(NULL, search);\n                    student[count - 1].assignmentScore = atoi(token);\n                    printf(\"'%s'\\n\", token);\n                } else if(M + 3){\n                    token = strtok(NULL, search);\n                    student[count - 1].finalExamScore = atoi(token);\n                    printf(\"'%s'\\n\", token);\n                } else {\n                    token = strtok(NULL, search);\n                    printf(\"'%i'\\n\", atoi(token));\n                    student[count - 1].quizScore[quizCounter] = token;\n                    quizCounter++;\n                }\n\n                dividerCount++;\n            }\n            if(token)\n                break;\n\n        }\n        count++;\n    }\n</code></pre>\n"}, {"tags": ["c", "mingw-w64", "size-t"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1569393738, "post_id": 58092437, "comment_id": 102577593, "body": "There&#39;s really nothing that states that it <i>must</i> be a 64-bit unsigned integer type, only that is must be unsigned. The size is implementation defined. So please explain why you need <code>size_t</code> to be a 64-bit value? What is the real problem you need to solve?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569394139, "post_id": 58092437, "comment_id": 102577773, "body": "By the way, you did include the compiler-provided <code>&lt;stdint.h&gt;</code> header file for the <code>SIZE_MAX</code> macro? And is it a 32- or 64-bit installation of Windows 10?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569394740, "post_id": 58092437, "comment_id": 102578061, "body": "The reason is probably that the compiler must be able to implement <code>ptrdiff_t</code> on 64 bit types. Possible duplicate: <a href=\"https://stackoverflow.com/questions/42574890/why-is-the-maximum-size-of-an-array-too-large\">Why is the maximum size of an array \u201ctoo large\u201d?</a>."}, {"owner": {"reputation": 85, "user_id": 876633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a1613756d7a13a9b4907c0dac6c86f?s=128&d=identicon&r=PG", "display_name": "Pradeep Pillai", "link": "https://stackoverflow.com/users/876633/pradeep-pillai"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569395235, "post_id": 58092437, "comment_id": 102578297, "body": "@Someprogrammerdude I am learning C language and was curious to check out the statement given in one of the books that &#39;size_t&#39; can return a max value of 2^64 - 1 on 64 bit systems. Yes, I have included <code>&lt;stdint.h&gt;</code> and it is a 64 bit installation of Windows 10"}, {"owner": {"reputation": 85, "user_id": 876633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a1613756d7a13a9b4907c0dac6c86f?s=128&d=identicon&r=PG", "display_name": "Pradeep Pillai", "link": "https://stackoverflow.com/users/876633/pradeep-pillai"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1569395324, "post_id": 58092437, "comment_id": 102578335, "body": "@Jabberwocky <code>sizeof(size_t)</code> returned 4 and <code>SIZE_MAX</code> returned 4294967295 which is 2^32 -1."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569395618, "post_id": 58092437, "comment_id": 102578489, "body": "Then <i>how</i> do you build? What flags and options do you give when building? Are you sure you&#39;re using the correct compiler? If you run <code>gcc --version</code> does it tell you the correct version? And do you have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your test program that you can show us? Please edit your question to include all of this and all you just told us in the comments."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569395726, "post_id": 58092437, "comment_id": 102578540, "body": "I&#39;m not on the latest MSVC but <b><i>it</i></b> is 64-bit code but generates code with 32-bit pointers and a maximum approx 1.9 Gb memory available. It&#39;s impossible to allocate more (total of static + dynamic), even though the system has 8 Gb in total."}, {"owner": {"reputation": 85, "user_id": 876633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a1613756d7a13a9b4907c0dac6c86f?s=128&d=identicon&r=PG", "display_name": "Pradeep Pillai", "link": "https://stackoverflow.com/users/876633/pradeep-pillai"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1569396922, "post_id": 58092437, "comment_id": 102579118, "body": "@Someprogrammerdude Original question edited with all details"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1569397298, "post_id": 58092437, "comment_id": 102579317, "body": "There are two problems with the code you show, both being that you have mismatching format specifiers and types (which leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>). First of all, to print a <code>size_t</code> value you need to use the <code>&quot;%zu&quot;</code> format specifier. The <code>z</code> prefix to say it&#39;s a <code>size_t</code> and the <code>u</code> because it&#39;s an unsigned value. The second mismatch is that <code>SIZE_MAX</code> might be to large for the <code>int</code> format <code>&quot;%u&quot;</code>. You should use <code>PRIu64</code> format to be sure that it can be printed, and cast it to an unsigned 64-bit type (like <code>unsigned long long</code>)."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1569397367, "post_id": 58092437, "comment_id": 102579351, "body": "Maybe related: <a href=\"https://superuser.com/questions/238112/what-is-the-difference-between-i686-and-x86-64\" title=\"what is the difference between i686 and x86 64\">superuser.com/questions/238112/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569414501, "post_id": 58092437, "comment_id": 102588600, "body": "@PradeepPillai Do not edit question as &quot;Solved&quot;.  Instead review <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>.  Post rolled back."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1569414898, "post_id": 58092437, "comment_id": 102588860, "body": "@Someprogrammerdude &quot;use PRIu64 format to be sure that it can be printed, and cast it to an unsigned 64-bit type (like unsigned long long)&quot; is not the best suggestion.  Using <code>PRIu64</code>  with <code>(uint64_t)</code>, <code>&quot;%llu&quot;</code> with <code>(unsigned long long)</code> would be better.  <code>(unsigned long long)</code> today is commonly 64-bit, but may be larger."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 876633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a1613756d7a13a9b4907c0dac6c86f?s=128&d=identicon&r=PG", "display_name": "Pradeep Pillai", "link": "https://stackoverflow.com/users/876633/pradeep-pillai"}, "edited": false, "score": 0, "creation_date": 1569404116, "post_id": 58093472, "comment_id": 102583009, "body": "Ok. The problem was caused as the compiler was 32 bit. I changed it to 64 bit and issue is resolved. Thanks."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 5, "last_activity_date": 1569845650, "last_edit_date": 1569845650, "creation_date": 1569397203, "answer_id": 58093472, "question_id": 58092437, "link": "https://stackoverflow.com/questions/58092437/maximum-size-of-size-t-on-windows-10-mingw-w64-compiler/58093472#58093472", "title": "Maximum size of size_t on Windows 10/ mingw-w64 compiler", "body": "<p>When checking <code>gcc --version</code> you state that you get</p>\n\n<pre><code>gcc.exe (i686-posix-dwarf-rev0, Built by MinGW-W64 project) 8.1.0\n</code></pre>\n\n<p>The important part of the output is this: <code>i686-posix-dwarf-rev0</code>, more specifically the <code>i686</code> part.</p>\n\n<p>This tells us that GCC is built as a 32-bit application (i686 is a 32-bit system), and will default to creating 32-bit executables.</p>\n\n<p>To build a 64-bit executable you need to add the <code>-m64</code> flag.</p>\n"}], "owner": {"reputation": 85, "user_id": 876633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a1613756d7a13a9b4907c0dac6c86f?s=128&d=identicon&r=PG", "display_name": "Pradeep Pillai", "link": "https://stackoverflow.com/users/876633/pradeep-pillai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 58093472, "answer_count": 1, "score": 1, "last_activity_date": 1569845650, "creation_date": 1569393452, "last_edit_date": 1569414405, "question_id": 58092437, "link": "https://stackoverflow.com/questions/58092437/maximum-size-of-size-t-on-windows-10-mingw-w64-compiler", "title": "Maximum size of size_t on Windows 10/ mingw-w64 compiler", "body": "<p>I am using mingw-w64 compiler (gcc 8.1.0) on Windows 10 (64 bit installation). My expectation is to get the maximum value of <code>size_t</code> equal to (2^64 - 1). But my programs always return the value of <code>SIZE_MAX</code> as (2^32 - 1 only). What could be the reason? How can i achieve the a maximum value of (2^64 - 1) in my C programs?</p>\n\n<p>I am learning C language and wanted to check out the statement made in the book that on modern computers max size of <code>size_t</code> can be (2^64 - 1). The piece of code I tried for checking this is as below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(){\n    printf(\"%d\\n\", sizeof(size_t));\n    printf(\"%zu\\n\", SIZE_MAX); \n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>4\n4294967295\n</code></pre>\n\n<p>I am using only one flag <code>-std=c11</code> during compiling and <code>gcc --version</code> returns:</p>\n\n<pre><code>gcc.exe (i686-posix-dwarf-rev0, Built by MinGW-W64 project) 8.1.0\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1569392792, "post_id": 58092022, "comment_id": 102577169, "body": "You need to study the difference between static storage and heap. There should be no heap in your AVR program and there is no heap allocation in this source. Furthermore, doing what you are attempting as a way to reduce stack use is nonsense. Instead you should focus on what actually kills all the memory on the MCU, starting by throwing stdio.h into the garbage where it belongs."}], "answers": [{"tags": [], "owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "is_accepted": false, "score": 5, "last_activity_date": 1569391774, "creation_date": 1569391774, "answer_id": 58092080, "question_id": 58092022, "link": "https://stackoverflow.com/questions/58092022/passing-a-pointer-to-a-function-and-change-the-address-it-points-to/58092080#58092080", "title": "Passing a pointer to a function and change the address it points to", "body": "<p>You pass a pointer to the location you want to write to. Compare with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar hello[18] = \"Hello cruel world\";\nchar* myfunc2() {\n        return hello;\n}\nvoid myfunc(char **mypointer) {\n        *mypointer = myfunc2();\n}\nint main(){\n        char *testPointer;\n        printf(\"hello: %p\\n\", &amp;hello);\n        printf(\"test: %p\\n\", &amp;testPointer);\n        myfunc(&amp;testPointer);\n        printf(\"test: %p\\n\", &amp;testPointer);\n        printf(\"test value: %s\\n\", testPointer);\n        return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "is_accepted": true, "score": 2, "last_activity_date": 1569391906, "creation_date": 1569391906, "answer_id": 58092106, "question_id": 58092022, "link": "https://stackoverflow.com/questions/58092022/passing-a-pointer-to-a-function-and-change-the-address-it-points-to/58092106#58092106", "title": "Passing a pointer to a function and change the address it points to", "body": "<p>You need to pass double pointer.</p>\n\n<p>In general, if you want to change value of something in some other function, you need to pass address of that variable to the other function. Going by this, you are trying to change address stored in a variable, so you need to pass address of the pointer variable.</p>\n\n<pre><code>void myfunc(char **mypointer) { //Get address of a pointer variable\n        if(NULL != mypointer ) //Check if variable is NULL\n            *mypointer = myfunc2(); //Otherwise, update the pointer value\n}\n</code></pre>\n\n<p>Call the function with address of the pointer variable:</p>\n\n<pre><code>myfunc(&amp;testPointer);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1451, "user_id": 6552776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UiuKq.jpg?s=128&g=1", "display_name": "csabinho", "link": "https://stackoverflow.com/users/6552776/csabinho"}, "edited": false, "score": 0, "creation_date": 1569640871, "post_id": 58092209, "comment_id": 102672017, "body": "I guess it&#39;s just some test code to play around with pointers!"}], "tags": [], "owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "is_accepted": false, "score": 1, "last_activity_date": 1569392490, "creation_date": 1569392490, "answer_id": 58092209, "question_id": 58092022, "link": "https://stackoverflow.com/questions/58092022/passing-a-pointer-to-a-function-and-change-the-address-it-points-to/58092209#58092209", "title": "Passing a pointer to a function and change the address it points to", "body": "<p>I didn't really understand what you want to do but anyway, about your code there are 2 problems: </p>\n\n<p>1) you pass function parameter by value. it should be passed by reference</p>\n\n<p>2) you print the address of the variables by <code>&amp;hello</code>: it means the address where the pointer is stored and not the address it points to (ie. the value of the variable <code>hello</code>).</p>\n\n<p>You should do something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar hello[18] = \"Hello cruel world\";\nchar* myfunc2() {\n        return hello;\n}\nvoid myfunc(char **mypointer) {\n        *mypointer = myfunc2();\n}\nint main(){\n        char *testPointer;\n        printf(\"hello: %p\\n\", hello);\n        printf(\"test: %p\\n\", testPointer);\n        myfunc(&amp;testPointer);\n        printf(\"test: %p\\n\", testPointer);\n        printf(\"test value: %s\\n\", testPointer);\n        return 0;\n}\n</code></pre>\n\n<p>and the output is:</p>\n\n<pre><code>hello: 0x601040                                                                                                             \ntest: (nil)                                                                                                                 \ntest: 0x601040                                                                                                              \ntest value: Hello cruel world\n</code></pre>\n\n<p>Note that the first time you print the value of the pointer <code>test</code>it is the null pointer. It is NOT the address where the variable <code>test</code>is stored.</p>\n\n<p>But again, I don't see what this code is supposed to do...</p>\n"}], "owner": {"reputation": 1638, "user_id": 867162, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e18bdb9969c6853df85c7943d7e5cf4?s=128&d=identicon&r=PG", "display_name": "Dolf Andringa", "link": "https://stackoverflow.com/users/867162/dolf-andringa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1569392853, "accepted_answer_id": 58092106, "answer_count": 3, "score": 2, "last_activity_date": 1569392490, "creation_date": 1569391457, "question_id": 58092022, "link": "https://stackoverflow.com/questions/58092022/passing-a-pointer-to-a-function-and-change-the-address-it-points-to", "closed_reason": "Duplicate", "title": "Passing a pointer to a function and change the address it points to", "body": "<p>For an embedded piece of code (avr-gcc) I am trying to reduce stack memory usage. So what I want to do is create a pointer, pass it to a function, and in the function, change the address the pointer points to, to the address of a heap allocated variable. This way, there would be no stack memory allocated inside <code>main()</code> for the <code>testPointer</code>.</p>\n\n<p>I am trying it with the following code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar hello[18] = \"Hello cruel world\";\nchar* myfunc2() {\n        return hello;\n}\nvoid myfunc(char *mypointer) {\n        mypointer = myfunc2();\n}\nint main(){\n        char *testPointer;\n        printf(\"hello: %p\\n\", &amp;hello);\n        printf(\"test: %p\\n\", &amp;testPointer);\n        myfunc(testPointer);\n        printf(\"test: %p\\n\", &amp;testPointer);\n        printf(\"test value: %s\\n\", testPointer);\n        return 0;\n}\n</code></pre>\n\n<p>but the testPointer address doesn't get reassigned. Of course in the real world use-case <code>myfunc2</code> wouldn't be as simple, but it <em>is</em> returning a pointer to a heap allocated character array.</p>\n\n<p>Output:</p>\n\n<pre><code>hello: 0x404030\ntest: 0x7ffe48724d38\ntest: 0x7ffe48724d38\ntest value: (null)\n</code></pre>\n"}, {"tags": ["python", "c", "protocol-buffers", "proto"], "comments": [{"owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "edited": false, "score": 0, "creation_date": 1569438918, "post_id": 58091999, "comment_id": 102601235, "body": "Have you looked into the various protobuf libraries for C?"}], "answers": [{"tags": [], "owner": {"reputation": 337, "user_id": 5860334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7a21.png?s=128&g=1", "display_name": "JayEye", "link": "https://stackoverflow.com/users/5860334/jayeye"}, "is_accepted": false, "score": 0, "last_activity_date": 1569394462, "creation_date": 1569394462, "answer_id": 58092680, "question_id": 58091999, "link": "https://stackoverflow.com/questions/58091999/script-to-parse-a-proto-file-and-generate-plain-c-structures/58092680#58092680", "title": "Script to parse a proto file and generate Plain C Structures", "body": "<p>The short answer is, you can't do it in a way that makes sense. Your best bet, other than manually creating the corresponding C structs, is to write a short program that takes the outputs of the protobuf compiler and uses reflection to derive the field names and types, and then generates C source from them. Then, of course, you'll have to figure out how to do serialization/deserialization from C, but that's another show.</p>\n"}], "owner": {"reputation": 387, "user_id": 544808, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bcb2af5ea959902ffe87831794955b14?s=128&d=identicon&r=PG", "display_name": "googytech", "link": "https://stackoverflow.com/users/544808/googytech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1569394462, "creation_date": 1569391353, "question_id": 58091999, "link": "https://stackoverflow.com/questions/58091999/script-to-parse-a-proto-file-and-generate-plain-c-structures", "title": "Script to parse a proto file and generate Plain C Structures", "body": "<p>I am trying to parse available proto files in a directory and create corresponding plain old C structures. All the current libraries are creating C++ classes, which is not supported in my repo (Very outdated repo :) )Is there any library which can used for this purpose. </p>\n\n<p>For eg. \n<a href=\"https://github.com/protocolbuffers/protobuf/blob/master/examples/addressbook.proto\" rel=\"nofollow noreferrer\">address.proto</a></p>\n\n<p>This proto file should be parsed and should be able to create a structure like the following. A sample extract.</p>\n\n<pre><code>struct PhoneNumber_s {\n    char number[15]\n    PhoneType type;\n} PhoneNumber_t;\n\nenum PhoneType {\n   MOBILE = 0;\n    HOME = 1;\n    WORK = 2;\n}\n</code></pre>\n\n<p>Generating the code might be straight forward based on type. But parser (python or any other lang) is the essential piece of information that is required.</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c", "sockets", "raw-sockets", "recvfrom"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1569394384, "post_id": 58091846, "comment_id": 102577896, "body": "Don&#39;t call <code>perror()</code> unless there <i>was</i> an error, e.g. at <code>setsockopt()</code>, and <i>do</i> call it if there was, e.g. at <code>socket()</code> and <code>recvfrom()</code>. <i>Was</i> there an error? And what was the value in <code>trcv</code> returned by <code>getsockopt()</code>?"}, {"owner": {"reputation": 31, "user_id": 12116875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCtpJEXczxJv99gvI4uQ7fap8960Mcx6j6bQIqf8-g=k-s128", "display_name": "vidhiya lakshmi", "link": "https://stackoverflow.com/users/12116875/vidhiya-lakshmi"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1569413358, "post_id": 58091846, "comment_id": 102587899, "body": "i changed the perror() as mentioned. Only if setsockopt() is returning value &lt; 0, perror() is added. trcv was returning correct value. Both seconds and usec were holding the correct value. Just that it was not taking any effect"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1569457217, "post_id": 58091846, "comment_id": 102606399, "body": "Rather than using <code>SO_RCVTIMEO</code> at all, you can use <code>select()</code>/<code>(e)poll()</code> with a timeout to wait for data to arrive before then calling <code>recv&#47;from()</code> to read it"}, {"owner": {"reputation": 31, "user_id": 12116875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCtpJEXczxJv99gvI4uQ7fap8960Mcx6j6bQIqf8-g=k-s128", "display_name": "vidhiya lakshmi", "link": "https://stackoverflow.com/users/12116875/vidhiya-lakshmi"}, "edited": false, "score": 0, "creation_date": 1569491628, "post_id": 58091846, "comment_id": 102617756, "body": "Hi Remy Lebeau, I tried the below code. In this attempt, no data was received even when other side pumps the data.  struct pollfd fd;   int ret;      fd.fd = sock_r; // your socket handler    fd.events = POLLIN;   ret = poll(&amp;fd, 1, 1000); // 1 second for timeout   switch (ret) {       case -1:          printf(&quot;ret value for poll : -1&quot;);          break;       case 0: \t\t  printf(&quot;ret value for poll : 0&quot;);           break;       default:           recv_len = recv(sock_r,buffer,buflen, 0 ); // get your data           break;   }"}], "owner": {"reputation": 31, "user_id": 12116875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCtpJEXczxJv99gvI4uQ7fap8960Mcx6j6bQIqf8-g=k-s128", "display_name": "vidhiya lakshmi", "link": "https://stackoverflow.com/users/12116875/vidhiya-lakshmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1583184032, "creation_date": 1569390432, "last_edit_date": 1583184032, "question_id": 58091846, "link": "https://stackoverflow.com/questions/58091846/so-rcvtimeo-timeout-value-is-not-taking-effect-in-recv-from-api", "title": "SO_RCVTIMEO timeout value is not taking effect in recv_from API", "body": "<p>I tried to use SO_RCVTIMEO option to timeout when there is no data in recvfrom API. But this is not taking effect, and the code is stuck when there is no data from the source.</p>\n\n<p>I even tried using recv instead of recvfrom. Still the same issue.</p>\n\n<p>Please let me know if anything is missing in my code.</p>\n\n<pre><code>int sock_r=socket(AF_PACKET,SOCK_RAW,htons(ETH_P_ALL)); \nif(sock_r&lt;0)\n{\n    printf(\"open_raw_socket(): error in opening the socket\");\n    return -1;\n}\n\nstruct timeval tv;\ntv.tv_sec = 1;\ntv.tv_usec =  0;\nint ret = setsockopt(sock_r, SOL_SOCKET, SO_RCVTIMEO, &amp;tv, sizeof(tv));\nperror(\"error: \");\n\nsocklen_t ntrcv, ntsnd; \nstruct timeval trcv;   \nntrcv = sizeof(struct timeval); \nif (getsockopt(sock_r, SOL_SOCKET, SO_RCVTIMEO, &amp;trcv, &amp;ntrcv) &lt; 0) \n{\n    perror(\"2\");\n    TF_MSG(\"error\");\n}  \n\nwhile(1)\n{\n    saddr_len=sizeof saddr;\n    recv_len = recvfrom(sock_r,buffer,buflen,0,&amp;saddr,(socklen_t *)&amp;saddr_len);\n\n\n    if(recv_len&lt;=0)\n    {\n        printf(\"error in reading recvfrom function\");\n        return 0;\n    }\n.....\n</code></pre>\n"}, {"tags": ["c", "pointer-conversion"], "comments": [{"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 0, "creation_date": 1569390420, "post_id": 58091816, "comment_id": 102576270, "body": "<i>creates a character named *Pile that gives the value of the address at PileInts</i> not a character, pointer to character. This is a cast of (not really) the pointer on <code>int</code> to the pointer on <code>char</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 0, "creation_date": 1569391188, "post_id": 58091816, "comment_id": 102576552, "body": "@user3365922 -- hmm, what do you mean by (not really)? That is exactly what it does. On access <code>PileInts</code> is converted to a pointer to the first element, it is the cast to <code>char *</code> and the address assigned to <code>Pile</code> (no violation of C Standard 6.5(p6) because it is allowed in 6.5(p7). See <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5p6\" rel=\"nofollow noreferrer\">C11 Standard - 6.5 Expressions</a>)"}, {"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569391430, "post_id": 58091816, "comment_id": 102576651, "body": "@DavidC.Rankin I meant that <code>int*</code> and <code>int[N]</code> are not exactly the same, isn&#39;t it?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569391644, "post_id": 58091816, "comment_id": 102576739, "body": "Okay, gotcha, I was a bit confused at first. So <code>int*</code> being a <i>pointer to</i> <code>int</code> and the <code>[...]</code> acting as a dereference making the type <code>int</code>. You are correct, so if <code>p</code> is a pointer, then <code>p[N]</code> is the same as <code>*(p + N)</code> which is type <code>int</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "edited": false, "score": 0, "creation_date": 1569390839, "post_id": 58091877, "comment_id": 102576404, "body": "what am I able to do with Pile? I didn&#39;t really understand the purpose of pointers very well."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1569391232, "post_id": 58091877, "comment_id": 102576571, "body": "@4386427: Also it would be good if you can show the example code, with the address printed so that OP can know 1 byte address increments"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569391446, "post_id": 58091877, "comment_id": 102576659, "body": "@kevinmarks (<b>type is King!</b>) It controls pointer arithmetic. So say you use <code>int *p = PileInts;</code> and then advance the pointer <code>p</code> by one (<code>p = p + 1;</code>) since the pointer it type <code>int</code>, <code>p + 1</code> advances 4-bytes in memory to the next <code>int</code>. By casting to <code>char *</code>, the type of <code>Pile</code> is pointer to <code>char</code>. So if you advance <code>Pile</code>, e.g (<code>Pile = Pile + 1;</code>), now <code>Pile</code> points to the next <b>byte</b> in <code>PileInt</code>, not the next <code>int</code>."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 1, "creation_date": 1569391583, "post_id": 58091877, "comment_id": 102576710, "body": "@Inian Added example that prints the address as well"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "edited": false, "score": 0, "creation_date": 1569391749, "post_id": 58091877, "comment_id": 102576779, "body": "thanks a lot. I am getting it a little more now. I do have another question. I have this array organized as a 64x64 box, with a value in every location. How would I check to see if values are the same in some rows vertically?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569391941, "post_id": 58091877, "comment_id": 102576842, "body": "@DavidC.Rankin thanks a lot. this information is very helpful. in my code, would there be any reason to cast Pile to a char since I already made it a char on the left side?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1569391953, "post_id": 58091877, "comment_id": 102576845, "body": "@kevinmarks I&#39;m not sure what you mean by 64x64. The result of 64x64 is 4096 but your array is only 1024 ints. Anyway, if you need 64x64 why not do: <code>int box[64][64];</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "edited": false, "score": 0, "creation_date": 1569392039, "post_id": 58091877, "comment_id": 102576874, "body": "@4386427 that&#39;s what I am wondering. I&#39;ve got no clue why I would have a 1x1024 int array if I will be searching through a 64x64 box."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569392109, "post_id": 58091877, "comment_id": 102576895, "body": "@kevinmarks As you iterate across your rows <code>x</code> and columns <code>y</code> (beginning at the second row and ending at last), you can check if value at <code>[x][y-1]</code> equals value at <code>[x][y]</code>. If it does, the value at that index is the same as the one above vertically. As to you second question, always compile with <b>warnings enabled</b> <code>-Wall -Wextra -pedantic</code> for gcc/clang or <code>&#47;W3</code> for VS (and don&#39;t accept code until it compiles without warning) -- without the cast -- you will receive a warning (you probably will by default)."}, {"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 0, "creation_date": 1569392228, "post_id": 58091877, "comment_id": 102576940, "body": "why <code>(void*)Pile</code>, not just <code>Pile</code> at <code>printf</code>?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569392356, "post_id": 58091877, "comment_id": 102577001, "body": "Because the C standard requires it and specifically states a mismatch between the conversion specifier <code>&quot;%p&quot;</code> (which requires type <code>void *</code>) and the argument (type <code>char *</code>) invokes <i>Undefined Behavior</i> -- Bad Juju... <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.1p9\" rel=\"nofollow noreferrer\">C11 Standard - 7.21.6.1 The fprintf function(p9)</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569392402, "post_id": 58091877, "comment_id": 102577021, "body": "@DavidC.Rankin That&#39;s the thing. If I had a 64x64 array I could do just that, but I only have a 1x1024 array and have no idea how to check that. In the writeup it says that every 8 bits is a color."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 0, "creation_date": 1569392473, "post_id": 58091877, "comment_id": 102577048, "body": "@user3365922 Because <code>%p</code> requires a <code>void*</code> so <code>Pile</code> must be cast&#39;ed into <code>void*</code> before printing. If you don&#39;t, it will be undefined behavior according to the C standard. In the real world, it will however work fine even without the cast on most systems. But to be sure: do the cast"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1569392630, "post_id": 58091877, "comment_id": 102577107, "body": "@kevinmarks I guess you have some assignment... It seems to be some &quot;dirty&quot; trick thing. On many systems <code>int</code> is 4 chars. So 1024 ints is 4096 chars which again is 64x64 chars. So it seems the idea is to use the 1024 ints as if it is 64x64 chars. Very ugly IMO."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569392664, "post_id": 58091877, "comment_id": 102577125, "body": "@kevinmarks - I&#39;ll comment back under the original question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "edited": false, "score": 0, "creation_date": 1569393245, "post_id": 58091877, "comment_id": 102577375, "body": "@4386427 use 1024 ints as if it were 64x64 chars, could you expand a little more on that? I think that is exactly what I am supposed to be doing but I cannot figure out how to think of a 1x1024 int array as a 64x64 array of chars"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1569393479, "post_id": 58091877, "comment_id": 102577476, "body": "@kevinmarks Well, <code>*(Pile + 64*row + column)</code> will do that, i.e. read/write the char in position <code>(row, column)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "edited": false, "score": 0, "creation_date": 1569394435, "post_id": 58091877, "comment_id": 102577921, "body": "@4386427 thanks, that was exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 3, "last_activity_date": 1569391525, "last_edit_date": 1569391525, "creation_date": 1569390600, "answer_id": 58091877, "question_id": 58091816, "link": "https://stackoverflow.com/questions/58091816/address-location-and-value-at-address-location-in-c/58091877#58091877", "title": "Address location and value at address location in C", "body": "<p>The line</p>\n\n<pre><code>int PileInts[1024];\n</code></pre>\n\n<p>creates an array object that consists of 1024 integers. The object can be accessed using the variable name <code>PileInts</code></p>\n\n<p>The line</p>\n\n<pre><code>char *Pile = (char *)PileInts;\n</code></pre>\n\n<p>creates a <strong>char pointer</strong> object and makes it point to the first char of the array object. The char pointer object is accessed using the variable name <code>Pile</code>.</p>\n\n<p>The char pointer <code>Pile</code> can be used for accessing the individual bytes of <code>PileInts</code>. Example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int PileInts[1024];\n    char *Pile = (char *)PileInts;\n\n    PileInts[0] = 1;\n    PileInts[1] = 2;\n\n    // Print the bytes/chars of the first two ints of PileInts\n    for (unsigned i= 0; i &lt; (2 * sizeof PileInts[0]); ++i)\n    {\n        printf(\"0x%02x\\n\", *Pile); // Print what Pile points to\n        ++Pile;                    // Increment Pile so it points to the next byte/char\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Possible output:</p>\n\n<pre><code>0x01\n0x00\n0x00\n0x00\n0x02\n0x00\n0x00\n0x00\n</code></pre>\n\n<p>Note: The output may differ from system to system due to different endianess and/or integer size.</p>\n\n<p>If you want to see the value of <code>Pile</code>, i.e. the address it points to, you can change the code like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int PileInts[1024];\n    char *Pile = (char *)PileInts;\n\n    PileInts[0] = 1;\n    PileInts[1] = 2;\n\n    for (unsigned i= 0; i &lt; (2 * sizeof PileInts[0]); ++i)\n    {\n        printf(\"Pile points to addresss %p where the value 0x%02x is stored\\n\", \n               (void*)Pile, *Pile);\n        ++Pile;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Possible output:</p>\n\n<pre><code>Pile points to addresss 0x7ffe5860b8e0 where the value 0x01 is stored\nPile points to addresss 0x7ffe5860b8e1 where the value 0x00 is stored\nPile points to addresss 0x7ffe5860b8e2 where the value 0x00 is stored\nPile points to addresss 0x7ffe5860b8e3 where the value 0x00 is stored\nPile points to addresss 0x7ffe5860b8e4 where the value 0x02 is stored\nPile points to addresss 0x7ffe5860b8e5 where the value 0x00 is stored\nPile points to addresss 0x7ffe5860b8e6 where the value 0x00 is stored\nPile points to addresss 0x7ffe5860b8e7 where the value 0x00 is stored\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1569394258, "creation_date": 1569394258, "answer_id": 58092636, "question_id": 58091816, "link": "https://stackoverflow.com/questions/58091816/address-location-and-value-at-address-location-in-c/58092636#58092636", "title": "Address location and value at address location in C", "body": "<blockquote>\n  <p>line creates a character named <code>*Pile</code> that gives the value of the address at PileInts</p>\n</blockquote>\n\n<p>No. It creates a pointer to character <code>char*</code> named <code>Pile</code>, which points to the lowest byte in the first <code>int</code> in an array of <code>int</code>-</p>\n\n<blockquote>\n  <p>Could I get a deeper explanation?</p>\n</blockquote>\n\n<p>The code gives a pointer which can be used to access individual bytes of the first <code>int</code> in the array, and from there, individual bytes of the next adjacent <code>int</code>, until the end of the array. </p>\n\n<p>This is possible because when an array name is used in an expression, it \"decays\" into a pointer to the first element of that array. Making <code>PileInts</code>, when used in an array, equivalent to type <code>int*</code>.</p>\n\n<p>Converting from <code>int*</code> to <code>char*</code> is valid but fishy C. Some things to be aware of:</p>\n\n<ul>\n<li><p>First of all, <code>uint8_t*</code> should be used whenever one seeks to access raw data values. The <code>char</code> type is highly problematic since it has implementation-defined signedness - it should not be used for anything else but for characters and strings. <a href=\"https://stackoverflow.com/questions/2054939/is-char-signed-or-unsigned-by-default\">Is char signed or unsigned by default?</a></p></li>\n<li><p>This pointer will point at the <em>lowest address</em> of the first <code>int</code>. Which bytes this corresponds to is CPU-specific, namely it depends on <em>endianess</em> of the CPU. Using bitwise shift operators instead of pointers would have remove this CPU dependency, so depending on what you want to do with this pointer, it may or may not be the right tool for the task.</p></li>\n</ul>\n\n<p>As for the pointer conversion itself, it is fine as per C17 6.3.2.3/7:</p>\n\n<blockquote>\n  <p>A pointer to an object type may be converted to a pointer to a different object type. If the\n  resulting pointer is not correctly aligned for the referenced type, the behavior is\n  undefined. Otherwise, when converted back again, the result shall compare equal to the\n  original pointer. </p>\n</blockquote>\n\n<p>Meaning that something like <code>(int*) ((char*)PileInts + 1)</code> would be an undefined behavior bug, because the <code>int*</code> will be misaligned.</p>\n\n<p>The same paragraph in the standard continues:</p>\n\n<blockquote>\n  <p>When a pointer to an object is converted to a pointer to a character type,\n  the result points to the lowest addressed byte of the object. Successive increments of the result, up to the size of the object, yield pointers to the remaining bytes of the object.</p>\n</blockquote>\n\n<p>This is the rule allowing us to iterate over any data type by using a character pointer (or preferably the equivalent <code>uint8_t*</code>). The same is <em>not</em> true for any other pointer type, we could for example <em>not</em> use a <code>short*</code> to do the same, thinking we iterate over 16 bit words.</p>\n\n<p>There's also another rule preventing us from using any other pointer type, namely the rule regulating the compiler's internal type system and how different pointers may be an alias of each other. Informally known as <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">the strict aliasing rule</a>. This rule too has an exception for character types only. Meaning we <em>can't</em> do this:</p>\n\n<pre><code>int PileInts[1024];\nchar *Pile = (char *)PileInts;\nshort* sptr = (short*)Pile; // very questionable cast but not a bug yet\nprintf(\"%h\", *sptr); // bug, data is accessed as wrong type, strict aliasing violation\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12116614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1569394350, "creation_date": 1569390282, "last_edit_date": 1569394350, "question_id": 58091816, "link": "https://stackoverflow.com/questions/58091816/address-location-and-value-at-address-location-in-c", "title": "Address location and value at address location in C", "body": "<pre><code>int PileInts[1024];\nchar *Pile = (char *)PileInts;\n</code></pre>\n\n<p>What do these two lines of code do? I am thinking that the <code>char *Pile = (char *)PileInts;</code> line creates a character named <code>*Pile</code> that gives the value of the address at <code>PileInts</code>. Am I right? Could I get a deeper explanation?</p>\n"}, {"tags": ["c", "node.js", "ffi", "node-ffi"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11758292"}, "edited": false, "score": 0, "creation_date": 1571727612, "post_id": 58428128, "comment_id": 103326343, "body": "Hi @rezga, Thank you so much for your answer, actually I moved on to the next task, so after this task I will come back to this and check."}], "tags": [], "owner": {"reputation": 132, "user_id": 3053999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ICBLF.png?s=128&g=1", "display_name": "Rezga", "link": "https://stackoverflow.com/users/3053999/rezga"}, "is_accepted": false, "score": 0, "last_activity_date": 1571300864, "creation_date": 1571300864, "answer_id": 58428128, "question_id": 58091811, "link": "https://stackoverflow.com/questions/58091811/c-function-passes-function-as-a-parameter-how-to-wrap-this-function-using-node/58428128#58428128", "title": "C function passes function as a parameter, How to wrap this function using node-ffi?", "body": "<p>I think what you are looking for is <a href=\"https://github.com/node-ffi/node-ffi/wiki/Node-FFI-Tutorial\" rel=\"nofollow noreferrer\">ffi.Callback()</a> which basically returns a pointer that can be passed to a C function:\nsolution for your problem would look like something like this (example.js):</p>\n\n<pre><code>const intPin = 40;\nconst state = 0;\nconst lib = require('./c_functions');\n\nconst abc = () =&gt; {\n    console.log(\"state: \",state);\n    state++;\n}\n\nconst pointerToMyFunction = ffi.Callback('void', [], abc);\n\n//now pass pointer of abc() to attachInterrupt function\nlib.c_functions.attachInterrupt(intPin,pointerToMyFunction);\n</code></pre>\n\n<p><code>ffi.Callback</code> accepts return type, argument types and javascript function as parameters and return pointer to this function. I passed empty array as second parameter because <code>abc()</code> doesn't accept anything. you can see more examples in the link above.</p>\n\n<p>(also try to use <code>const</code> and <code>let</code> instead of <code>var</code> :d)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11758292"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571300864, "creation_date": 1569390255, "question_id": 58091811, "link": "https://stackoverflow.com/questions/58091811/c-function-passes-function-as-a-parameter-how-to-wrap-this-function-using-node", "title": "C function passes function as a parameter, How to wrap this function using node-ffi?", "body": "<p>I am trying to wrap c code using node-ffi. But one c function calls a function in a parameter, I searched on the web but I didn't get any proper way to wrap the same function using node-ffi.</p>\n\n<p>Here is what I tried before(snippet),</p>\n\n<p>example.js</p>\n\n<pre><code>var intPin = 40;\nvar state = 0;\nvar lib = require('./c_functions');\nlib.c_functions.attachInterrupt(intPin,abc); //attachInterrupt is a c function and **Problem 1**\n\nfunction abc(){\n    console.log(\"state: \",state);\n    state++;\n}\n</code></pre>\n\n<p>c_functions.js //file accesses library and exports functions</p>\n\n<pre><code>var ffi = require('ffi');     //requires to use node-ffi functionalities\nvar ref = require('ref');     //reference to integer type\nvar int = ref.types.int;\nvar voidtype = ref.types.void;\nvar objPtr = ref.refType(voidType);  //void pointer\n\nvar c_functions = ffi.Library('/usr/local/lib/lib.so.0.5.0', {  //accessing so file\n    \"attachInterrupt\":[voidtype, [int,objPtr]] // **Problem 2**\n});\n/**\n *  @breif Definitions for Pin modes\n */\nvar INPUT = 0;\nvar OUTPUT = 1;\n/**\n *  @breif Definitions for pin values\n */\n\nvar LOW = 0;\nvar HIGH = 1;\n\nmodule.exports = {c_functions , HIGH, LOW, INPUT, OUTPUT}; //exporting functions\n\n</code></pre>\n\n<p>So I am having 2 problems,</p>\n\n<p><strong>1. Problem 2(In code) -</strong> What should be the type of 2nd argument of attachInterrupt function ?</p>\n\n<p><strong>2. Problem 1(In code) -</strong> How to call the function which is passed as a parameter ?</p>\n\n<p>Please help ! Thanks.</p>\n"}, {"tags": ["java", "c++", "c", "java-native-interface", "unsatisfiedlinkerror"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1569391861, "post_id": 58091679, "comment_id": 102576819, "body": "Does the dll contain the symbol Java is looking for? Check with [dependency explorer] (<a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependencywalker.com</a>)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1569398269, "post_id": 58091679, "comment_id": 102579802, "body": "Dd you generate those JNI function signatures with the <code>javah</code> tool? or the new option of <code>javac</code> from whenever it was introduced? Or did you originate them by hand? and if so why?"}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "is_accepted": true, "score": 2, "last_activity_date": 1569397928, "creation_date": 1569397928, "answer_id": 58093691, "question_id": 58091679, "link": "https://stackoverflow.com/questions/58091679/c-jni-unsatisfiedlinkerror/58093691#58093691", "title": "C++ JNI UnsatisfiedLinkError", "body": "<p>Your Java class name and method name contain underscores, which goes against the naming convention.</p>\n\n<p>If you insist on keeping them, you need to change the name of your C++ function to <code>Java_Java_1List_init_1list</code>. Note the <code>1</code>s before <code>List</code> and <code>list</code>, which tells the linker to interpret the preceeding underscore as a literal underscore character instead of a naming separator.</p>\n"}], "owner": {"reputation": 83, "user_id": 12110245, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ufbubn2Lq_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdCT4GOF_gDhBwjij76ZXTyPrdxjQ/photo.jpg?sz=128", "display_name": "cam6577", "link": "https://stackoverflow.com/users/12110245/cam6577"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 58093691, "answer_count": 1, "score": 2, "last_activity_date": 1569397928, "creation_date": 1569389257, "last_edit_date": 1569389987, "question_id": 58091679, "link": "https://stackoverflow.com/questions/58091679/c-jni-unsatisfiedlinkerror", "title": "C++ JNI UnsatisfiedLinkError", "body": "<p>I am trying to make a native list in c++ and use it in java, I am fairly sure everything is declared right but I am getting a link error</p>\n\n<p>Java Exception:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: Java_List.init_list(Ljava/lang/Object;)J\n        at Java_List.init_list(Native Method)\n        at Java_List.main(Java_List.java:13)\n</code></pre>\n\n<p>Java source</p>\n\n<pre><code>public class Java_List\n{\n    static\n    {\n        System.loadLibrary(\"JAVA_JNI_FTC\");\n    }\n\n    public native long init_list(Object a);\n\n    public static void main(String[] args)\n    {\n        Java_List list = new Java_List();\n        System.out.println(list.init_list(list));\n    }\n\n}\n</code></pre>\n\n<p>header file</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include \"List.h\"\n#include &lt;new&gt;\n\n#ifndef _Included_JAVA_LIST\n#define _Included_JAVA_LIST\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n    /*\n     * Class:     HelloJNI\n     * Method:    sayHello\n     * Signature: ()V\n     */\n    JNIEXPORT jlong JNICALL Java_Java_List_init_list(JNIEnv *, jobject, jobject);\n    JNIEXPORT jobject JNICALL Java_Java_List_list_get(JNIEnv *env, jobject thisObj, jint index, jlong list);\n\n#ifdef __cplusplus\n}\n#endif\n\ntypedef struct Java_List Java_List;\n\nstruct Java_List\n{\n    void *list;\n    jclass type;\n};\n\nvoid init_Java_List(Java_List *jList, jclass type);\njobject java_list_get(Java_List *jList, int index);\n#endif\n</code></pre>\n\n<p>C ++ source</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include \"Java_List.h\"  \n#include \"pch.h\"\n\n\nextern \"C\"\n{\n    JNIEXPORT jlong JNICALL Java_Java_List_init_list(JNIEnv *env, jobject thisObj, jobject classType)\n    {\n        jclass type = env-&gt;GetObjectClass(classType);\n        Java_List *list = (Java_List *)malloc(sizeof(Java_List));\n        init_Java_List(list, type);\n        return (jlong)list;\n    }\n\n    JNIEXPORT jobject JNICALL Java_Java_List_list_get(JNIEnv *env, jobject thisObj, jint index, jlong list)\n    {\n        return java_list_get((Java_List *)list, (int)index);\n    }\n}\n/* jni api*/\nvoid init_Java_List(Java_List *jList, jclass type)\n{\n    jList-&gt;list = malloc(sizeof(List&lt;jobject&gt;));\n    new (jList-&gt;list) List&lt;jobject&gt;();\n    jList-&gt;type = type;\n}\n\njobject java_list_get(Java_List *jList, int index)\n{\n    List&lt;jobject&gt; *list = (List&lt;jobject&gt; *) jList-&gt;list;\n    return *(list-&gt;get(index));\n}\n</code></pre>\n\n<p>I am using visual studio for this project, the project builds multiple files not just the dll, I dont know if this the issue. \n<a href=\"https://i.stack.imgur.com/VMVSN.png\" rel=\"nofollow noreferrer\">Files</a></p>\n"}, {"tags": ["c", "arrays", "pointers", "c-strings"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1569388882, "post_id": 58091602, "comment_id": 102575778, "body": "Don&#39;t use uninitialized variables. In particular, do not dereference uninitialized pointers."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1569388908, "post_id": 58091602, "comment_id": 102575786, "body": "<code>pipeArr</code> is not an array, it is a pointer."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569389765, "post_id": 58091627, "comment_id": 102576056, "body": "But in particular an attempt to modify an address in memory at some location over which his program no right to access or modify <code>:)</code>"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1569388912, "creation_date": 1569388912, "answer_id": 58091627, "question_id": 58091602, "link": "https://stackoverflow.com/questions/58091602/seg-fault-core-dumped-when-assigning-char-to-empty-array/58091627#58091627", "title": "Seg fault core dumped when assigning char** to empty array", "body": "<p>You never assigned any value to <code>pipeArr</code>, so it's a pointer to nothing in particular. So when you do <code>pipeArr[i] = ...</code> you are modifying the <code>i</code>'th element of nothing of particular.</p>\n"}], "owner": {"reputation": 278, "user_id": 11128573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a3f4624370782818d8cff64a6aebdf?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmi", "link": "https://stackoverflow.com/users/11128573/meowmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58091627, "answer_count": 1, "score": -1, "last_activity_date": 1569388912, "creation_date": 1569388774, "question_id": 58091602, "link": "https://stackoverflow.com/questions/58091602/seg-fault-core-dumped-when-assigning-char-to-empty-array", "title": "Seg fault core dumped when assigning char** to empty array", "body": "<p>Here is my code: the line pipeArr[i] = commands leads to a seg fault core dumped.</p>\n\n<pre><code>char ***pipeArr;\nfor (int i = 0; i &lt; numPipes; i++) {\n    char** commands = /* a function that returns char** */\n    pipeArr[i] = commands;\n}\n</code></pre>\n\n<p>Why does assigning a char** array to the index of an unassigned char*** array lead to a seg fault? Is there any way I can prevent this?  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 429, "user_id": 11940163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fd03e0a47aa014dfd25c7063607192?s=128&d=identicon&r=PG&f=1", "display_name": "bigdataolddriver", "link": "https://stackoverflow.com/users/11940163/bigdataolddriver"}, "edited": false, "score": 0, "creation_date": 1569388408, "post_id": 58091459, "comment_id": 102575649, "body": "sneaky way: reverse loop direction, from num down to 1. both i and j"}, {"owner": {"reputation": 21, "user_id": 12090631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hxB0nAoaWt8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdRH2otTjBU5tdoF0A714Dba4VPHA/photo.jpg?sz=128", "display_name": "Hass Sugma", "link": "https://stackoverflow.com/users/12090631/hass-sugma"}, "reply_to_user": {"reputation": 429, "user_id": 11940163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fd03e0a47aa014dfd25c7063607192?s=128&d=identicon&r=PG&f=1", "display_name": "bigdataolddriver", "link": "https://stackoverflow.com/users/11940163/bigdataolddriver"}, "edited": false, "score": 0, "creation_date": 1569388556, "post_id": 58091459, "comment_id": 102575685, "body": "as in <code>for (i =0; num &gt; 1; i--)</code>?"}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1569388633, "post_id": 58091459, "comment_id": 102575712, "body": "It would make your question clearer if you give the value of the parameters like <code>id</code>."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 1, "creation_date": 1569388961, "post_id": 58091459, "comment_id": 102575801, "body": "What exactly do you mean by <code>first one</code>. Is it the first occurence in the array. e.g. if array is <code>{4,5,5,4}</code> do you print <code>4</code>?"}, {"owner": {"reputation": 21, "user_id": 12090631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hxB0nAoaWt8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdRH2otTjBU5tdoF0A714Dba4VPHA/photo.jpg?sz=128", "display_name": "Hass Sugma", "link": "https://stackoverflow.com/users/12090631/hass-sugma"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1569389025, "post_id": 58091459, "comment_id": 102575816, "body": "Yes @RishikeshRaje, sorry for not being clear, but that is what i want"}, {"owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "edited": false, "score": 0, "creation_date": 1569389051, "post_id": 58091459, "comment_id": 102575823, "body": "A reverse loop should work fine, but maybe the problem is hiding in your data. Use <code>printf(&quot;%d %d %d\\n&quot;, max_freq, i, id[i]);</code> in your <code>if(max_freq&lt;freq)</code> so you may see what happen when the max is updated."}, {"owner": {"reputation": 21, "user_id": 12090631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hxB0nAoaWt8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdRH2otTjBU5tdoF0A714Dba4VPHA/photo.jpg?sz=128", "display_name": "Hass Sugma", "link": "https://stackoverflow.com/users/12090631/hass-sugma"}, "reply_to_user": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "edited": false, "score": 0, "creation_date": 1569389196, "post_id": 58091459, "comment_id": 102575867, "body": "@AugustinLopez I will give that a try. How would I initialise a reverse loop? I&#39;m not 100% sure as I have not done it before"}, {"owner": {"reputation": 328, "user_id": 11979706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f60d5f1bab317984fe56dae07757bf?s=128&d=identicon&r=PG&f=1", "display_name": "AugustinLopez", "link": "https://stackoverflow.com/users/11979706/augustinlopez"}, "edited": false, "score": 0, "creation_date": 1569390472, "post_id": 58091459, "comment_id": 102576283, "body": "<code>for(int i = 0; i &lt; num -1; i++)</code> become <code>for(int i = num - 1; i &gt;= 0; i--);</code>. I don&#39;t use <code>for</code> often (I am more of a <code>while</code> person): use <code>printf</code> to verify  that the max and min value of <code>i</code> are iterated over."}, {"owner": {"reputation": 305, "user_id": 7642367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PGRHn.jpg?s=128&g=1", "display_name": "Kyy13", "link": "https://stackoverflow.com/users/7642367/kyy13"}, "edited": false, "score": 0, "creation_date": 1569392582, "post_id": 58091459, "comment_id": 102577086, "body": "you can fix your code with one character. change max_freq&lt;freq to max_freq&lt;=freq. this will allow the new ids (that are also max) to replace the lower ids."}], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 10425982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271a60304280f1a5a91713a02d6d52da?s=128&d=identicon&r=PG&f=1", "display_name": "amar2108", "link": "https://stackoverflow.com/users/10425982/amar2108"}, "is_accepted": false, "score": 0, "last_activity_date": 1569389891, "last_edit_date": 1569389891, "creation_date": 1569389572, "answer_id": 58091716, "question_id": 58091459, "link": "https://stackoverflow.com/questions/58091459/how-tor-print-the-first-occurrence-if-there-are-more-than-1-max-values/58091716#58091716", "title": "How tor print the first occurrence if there are more than 1 max values?", "body": "<p>Insert another condition if frequency is same as max frequency and in that condition check if the max_index is less than the index, if less than print.</p>\n\n<pre><code>\nelse if (max_freq == freq){\n    if(max_index &gt; index)\n        max_index = index\n}\n\n</code></pre>\n\n<p>I think this should give the first occurrence.</p>\n"}, {"tags": [], "owner": {"reputation": 305, "user_id": 7642367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PGRHn.jpg?s=128&g=1", "display_name": "Kyy13", "link": "https://stackoverflow.com/users/7642367/kyy13"}, "is_accepted": false, "score": 0, "last_activity_date": 1569389962, "last_edit_date": 1569389962, "creation_date": 1569389612, "answer_id": 58091723, "question_id": 58091459, "link": "https://stackoverflow.com/questions/58091459/how-tor-print-the-first-occurrence-if-there-are-more-than-1-max-values/58091723#58091723", "title": "How tor print the first occurrence if there are more than 1 max values?", "body": "<p>Instead of checking for (max_freq lessthan freq), allow it to replace the id also when (max_freq==freq)... This will allow new values with the same freq to replace the previous maximum.</p>\n\n<pre><code>if(max_freq&lt;=freq){\n     max_index = i;\n     max_freq = freq;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12090631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hxB0nAoaWt8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdRH2otTjBU5tdoF0A714Dba4VPHA/photo.jpg?sz=128", "display_name": "Hass Sugma", "link": "https://stackoverflow.com/users/12090631/hass-sugma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569389962, "creation_date": 1569387784, "question_id": 58091459, "link": "https://stackoverflow.com/questions/58091459/how-tor-print-the-first-occurrence-if-there-are-more-than-1-max-values", "title": "How tor print the first occurrence if there are more than 1 max values?", "body": "<p>So I have to write some code that reads from a file and outputs certain parts of it.</p>\n\n<p>For one part of it, I have to read some values and print out the one that occurs the most.</p>\n\n<p>My problem is that if there are more than 1 values that occur a maximum amount of times (e.g. 5 and 4 both occur 2 times), my code is printing the latter value.</p>\n\n<p>I want to print the first one (in this example, that would be 5). How do I do that?</p>\n\n<p>Here is my code so far;</p>\n\n<pre><code>    int find_max(int id[], char poi_names[][51], int num){\n     int max_index = 0;\n     int max_freq = 1;\n     for(int i = 0; i &lt; num -1; i++){\n         int freq = 1;\n         for(int j = 0; j &lt; num; j++){\n             if(id[i] == id[j]){\n                 freq ++;\n             }\n         }\n         if(max_freq&lt;freq){\n             max_index = i;\n             max_freq = freq;\n         }\n     }\n     return max_index;\n }\n</code></pre>\n"}, {"tags": ["c", "file", "hex"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1569387000, "post_id": 58091135, "comment_id": 102575289, "body": "Do you mean to ask: &quot;How to print bytes in char array to file as hexadecimal text?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10267541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f30596e2bde8b33cf756804bb693c7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Hernandez", "link": "https://stackoverflow.com/users/10267541/alexis-hernandez"}, "edited": false, "score": 0, "creation_date": 1569386204, "post_id": 58091214, "comment_id": 102575115, "body": "but what happen when Msg have variable length?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 23, "user_id": 10267541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f30596e2bde8b33cf756804bb693c7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Hernandez", "link": "https://stackoverflow.com/users/10267541/alexis-hernandez"}, "edited": false, "score": 0, "creation_date": 1569386710, "post_id": 58091214, "comment_id": 102575218, "body": "@Alexis, I&#39;ve given a better way to do it for variable length buffers."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 3, "last_activity_date": 1569386847, "last_edit_date": 1569386847, "creation_date": 1569386143, "answer_id": 58091214, "question_id": 58091135, "link": "https://stackoverflow.com/questions/58091135/write-hex-into-a-file-not-as-ascii-in-c/58091214#58091214", "title": "Write Hex into a file (not as ASCII) in C", "body": "<p>The line:</p>\n\n<pre><code>fprintf(LOG_FILE, \"%d OUT %x\", Timestamp, Msg);\n</code></pre>\n\n<p>will decay <code>Msg</code> to a pointer (address of the <code>0x3f</code>) and then print <em>that</em> out.</p>\n\n<p>What you need to do is to output each element as a two-digit hex value, something like:</p>\n\n<pre><code>fprintf(LOG_FILE, \"%d OUT %02x%02x%02x%02x\\n\", Timestamp, Msg[0], Msg[1], Msg[2], Msg[3]);\n</code></pre>\n\n<p>In addition, they should probably be specified as <code>unsigned char</code> so they don't sign-extend when passing to <code>fprintf</code>. Otherwise, you'd have to do something ugly like:</p>\n\n<pre><code>fprintf(LOG_FILE, \"%d OUT %02x%02x%02x%02x\\n\", Timestamp, (unsigned)(Msg[0]), \n    (unsigned)(Msg[1]), (unsigned)(Msg[2]), (unsigned)(Msg[3]));\n</code></pre>\n\n<hr>\n\n<p>If you wanted a more general solution, you could put together a function to do it, something like:</p>\n\n<pre><code>void LogHex(FILE *fh, int tstamp, char *preamble, unsigned char *mem, size_t sz) {\n    fprintf(fh, \"%d %s\", tstamp, preamble);\n    for (size_t i = 0; i &lt; sz; ++i) {\n        fprintf(fh, \"%02x\", mem[i]);\n    }\n    fprintf(fh, \"\\n\");\n}\n:\nLogHex(LOG_FILE, Timestamp, \"OUT \", Msg, sizeof(Msg));\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10267541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f30596e2bde8b33cf756804bb693c7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Hernandez", "link": "https://stackoverflow.com/users/10267541/alexis-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58091214, "answer_count": 1, "score": 0, "last_activity_date": 1569414988, "creation_date": 1569385531, "last_edit_date": 1569414988, "question_id": 58091135, "link": "https://stackoverflow.com/questions/58091135/write-hex-into-a-file-not-as-ascii-in-c", "title": "Write Hex into a file (not as ASCII) in C", "body": "<p>I'm trying to write a file with hex values representation in C</p>\n\n<p>something like this: </p>\n\n<pre><code>char Msg[4] = {0x3f, 0x2a, 0x01, 0x52};\n</code></pre>\n\n<p>the output that I'm looking for into the file is like this: \"3f2a0152\"</p>\n\n<p>I was using <code>fprintf</code> to append some text before the hex representation, but I was not able to write it successfully</p>\n\n<pre><code>FILE *LOG_FILE= fopen(\"./Hex.log\", \"a\");\nfprinf(LOG_FILE, \"%d OUT %x\", Timestamp, Msg);\nfclose(LOG_FILE);\n</code></pre>\n\n<p>Any advise? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569386371, "post_id": 58091021, "comment_id": 102575157, "body": "This is not C <code>number = (&quot;%d&quot; &gt;= 0);</code>, at least not any meaningful C."}, {"owner": {"reputation": 274, "user_id": 11643854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UgDE.jpg?s=128&g=1", "display_name": "arvind", "link": "https://stackoverflow.com/users/11643854/arvind"}, "edited": false, "score": 1, "creation_date": 1569386494, "post_id": 58091021, "comment_id": 102575174, "body": "Also your number is positive and you&#39;re incrementing it so, <code>while ( number &gt;= 0 )</code> doesnt make any sense"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 274, "user_id": 11643854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UgDE.jpg?s=128&g=1", "display_name": "arvind", "link": "https://stackoverflow.com/users/11643854/arvind"}, "edited": false, "score": 1, "creation_date": 1569387200, "post_id": 58091021, "comment_id": 102575324, "body": "@arvind If you also make an answer from your comment, the two answers could peacefully live together and both be appreciated. I did not want to use your good input in mine."}, {"owner": {"reputation": 274, "user_id": 11643854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UgDE.jpg?s=128&g=1", "display_name": "arvind", "link": "https://stackoverflow.com/users/11643854/arvind"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569387543, "post_id": 58091021, "comment_id": 102575410, "body": "@Yunnosch Its alright, im fine as long as OP is getting answers"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 274, "user_id": 11643854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UgDE.jpg?s=128&g=1", "display_name": "arvind", "link": "https://stackoverflow.com/users/11643854/arvind"}, "edited": false, "score": 1, "creation_date": 1569388165, "post_id": 58091021, "comment_id": 102575580, "body": "@arvind Thanks, I quote you now, to make sure it does not get lost. There is however still room for a second answer elaborating on a solution proposal, instead of only pointing out the problem. I only added the very first hint on what you spotted. Go on, harvest some well-earned reputation. (But, in my opinion, better refrain from giving a complete solution.)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1569389992, "post_id": 58091021, "comment_id": 102576132, "body": "If you read <code>number</code> input by the user and then loop from <code>number</code> while the loop variable is <code>&gt;= 0</code> that provides a descending output, and what if you then loop in the ascending direction?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12116600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wUE9_Gm5SlU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-z8-YxbmPT_dv5MrxCgAAh02nJA/photo.jpg?sz=128", "display_name": "Natalie M. ", "link": "https://stackoverflow.com/users/12116600/natalie-m"}, "edited": false, "score": 0, "creation_date": 1569443622, "post_id": 58091265, "comment_id": 102603124, "body": "Hello everyone, thank you so much for all of the feedback! I greatly appreciate it. I actually went to my professors office hours today and he was able to explain where I was going wrong and why, so I no longer need assistance with this problem. Thank you anyway!"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 11, "user_id": 12116600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wUE9_Gm5SlU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-z8-YxbmPT_dv5MrxCgAAh02nJA/photo.jpg?sz=128", "display_name": "Natalie M. ", "link": "https://stackoverflow.com/users/12116600/natalie-m"}, "edited": false, "score": 0, "creation_date": 1569443939, "post_id": 58091265, "comment_id": 102603237, "body": "Please create an answer with what your teacher explained. I would be interested. I would especially be interested whether they contradict this answer."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 2, "last_activity_date": 1569388343, "last_edit_date": 1569388343, "creation_date": 1569386499, "answer_id": 58091265, "question_id": 58091021, "link": "https://stackoverflow.com/questions/58091021/how-can-i-print-from-whatever-user-input-integer-to-0-and-then-back-to-the-int/58091265#58091265", "title": "How can I print from (whatever user input integer) to 0 and then back to the integer without using recursion? (Computing class assignment)", "body": "<p>This is not C </p>\n\n<pre><code>number = (\"%d\" &gt;= 0);\n</code></pre>\n\n<p>At least not any meaningful C.</p>\n\n<p>Replace it by the actual input-reading a few lines later,</p>\n\n<pre><code>scanf(\"%d\", &amp;number);\n</code></pre>\n\n<p>So that you have a meaningful <code>number</code> for the calls to the functions.</p>\n\n<p>That should solve you immediate blocking point.<br>\nThen have a look at the hint at your next problem, provided as a comment by arvind:<br>\n\"Also your number is positive and you're incrementing it so, <code>while ( number &gt;= 0 )</code> doesn't make any sense.\" You probably want something including <code>(current_number &lt;= number)</code>.<br>\nThen for a recursion solutin use <code>if</code> instead of <code>while</code>.<br>\nThen to get you started on a non-recursive solution, actually change within the loop body the variable you are testing inside the loop condition;<br>\notherwise you have a guaranteed endless loop killing your programs functionality.</p>\n\n<p>(<em>I intentionally do not give a complete solution, according to the compromise described here, <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">How do I ask and answer homework questions?</a> The asker-side of which OP has well honored in my opinon.</em>)</p>\n"}], "owner": {"reputation": 11, "user_id": 12116600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wUE9_Gm5SlU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-z8-YxbmPT_dv5MrxCgAAh02nJA/photo.jpg?sz=128", "display_name": "Natalie M. ", "link": "https://stackoverflow.com/users/12116600/natalie-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569388343, "creation_date": 1569384567, "question_id": 58091021, "link": "https://stackoverflow.com/questions/58091021/how-can-i-print-from-whatever-user-input-integer-to-0-and-then-back-to-the-int", "title": "How can I print from (whatever user input integer) to 0 and then back to the integer without using recursion? (Computing class assignment)", "body": "<p>My professor wants use to ONLY use while loops and call 2 different functions, which I have done. I am really stuck on how to tweak this so that if I put in, say, 16, that it will list 16 to 0 on separate lines, as well as 0 to 16 again on separate lines. I can do this with recursion very well for some reason, but without being able to do that, I am lost on how to make this work. \nMy computing class is learning with C language, so that is what my code is written in.We are also not required to validate input and are under the assumption that the user is entering valid input (a positive integer). Any tips are well appreciated! Thank you. </p>\n\n<hr>\n\n<pre><code>          #include &lt;stdio.h&gt;\n\n       void loop_down_to_zero(int number);\n       void loop_up_to_int(int number);\n\n      int main(int argc, char* argv[])\n    {\n      printf(\"please enter a positive integer:\");\n      int number;\n      number = (\"%d\" &gt;= 0);\n      loop_down_to_zero(number);\n      loop_up_to_int(number);\n      scanf(\"%d\", &amp;number);\n      printf(\"****\\n\");\n\n      return 0;\n    }\n\n     void loop_down_to_zero(int number)\n     {\n      while ( number &gt; 0 )\n     {\n        loop_down_to_zero(number - 1);\n        printf(\"\\n%d\", number-1);\n\n     }\n\n     }\n\n    void loop_up_to_int(int number)\n   {\n    while ( number &gt;= 0 )\n   {\n      loop_up_to_int(number+ 1);\n      printf(\"%d\\n\", number+1);\n    } \n     return;\n     }\n</code></pre>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569377968, "post_id": 58090267, "comment_id": 102573540, "body": "<a href=\"https://stackoverflow.com/questions/1711631/improve-insert-per-second-performance-of-sqlite\" title=\"improve insert per second performance of sqlite\">stackoverflow.com/questions/1711631/&hellip;</a> is old but good."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "edited": false, "score": 0, "creation_date": 1569378237, "post_id": 58090318, "comment_id": 102573583, "body": "I see. How would I actually format/create that string though (the first one) in C in order to do the insert?"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1569378719, "post_id": 58090318, "comment_id": 102573675, "body": "@TagC198 I am not a C person, but I tried to give some code which might work with my suggested answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "edited": false, "score": 0, "creation_date": 1569382678, "post_id": 58090318, "comment_id": 102574393, "body": "I tried this approach but unfortunately it didn&#39;t give me any speed-up over the single insert. The best chunk size I was able to get was ~100, whereas larger chunks (500, 1000, 10k, etc.) made things even slower."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1569382927, "post_id": 58090318, "comment_id": 102574454, "body": "OK, honestly 3.39 seconds to insert 1 million records already sounds pretty fast to me.  The advice I gave you is one suggestion you might receive here.  In fact, many programming languages offer batch insert APIs for this purpose."}], "tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 0, "last_activity_date": 1569378766, "last_edit_date": 1569378766, "creation_date": 1569378009, "answer_id": 58090318, "question_id": 58090267, "link": "https://stackoverflow.com/questions/58090267/bulk-insert-performance-in-sqlite/58090318#58090318", "title": "Bulk insert performance in SQLite", "body": "<p>Appreciate that with your current approach, inserting 1 million rows would require executing 1 million separate round trip inserts to SQLite.  Instead, you could try using one of the following two approaches.  For more recent versions of SQLite:</p>\n\n<pre><code>INSERT INTO myTable (id, format, size)\nVALUES\n    (%d, '%s', %d),\n    (%d, '%s', %d),\n    (%d, '%s', %d),\n    ... (more rows)\n</code></pre>\n\n<p>For earlier versions of SQLite, you may use an <code>INSERT INTO ... SELECT</code> construct:</p>\n\n<pre><code>INSERT INTO myTable (id, format, size)\nSELECT %d, '%s', %d UNION ALL\nSELECT %d, '%s', %d UNION ALL\n... (more rows)\n</code></pre>\n\n<p>The basic idea here is that you can try just making a <em>single</em> insert call to SQLite with all of your data, instead of inserting one row at a time.</p>\n\n<p>Not a C person, but here is how you might build the insert string from your C code:</p>\n\n<pre><code>const int MAX_BUF = 1000;  // make this as large as is needed\nchar* sql_buffer = malloc(MAX_BUF * sizeof(char));\nint length = 0;\nlength += snprintf(sql_buffer+length, MAX_BUF-length, \"INSERT INTO myTable (id, format, size) VALUES\");\nfor (int i=0; item=row[i]; i++) {\n    length += snprintf(sql_buffer+length, MAX_BUF-length, \" (%d, '%s', %d)\", item.id, item.format, item.size);\n}\n\nrc = sqlite3_exec(db, sql_buffer, NULL, NULL, NULL);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58090318, "answer_count": 1, "score": 1, "last_activity_date": 1569378766, "creation_date": 1569377574, "question_id": 58090267, "link": "https://stackoverflow.com/questions/58090267/bulk-insert-performance-in-sqlite", "title": "Bulk insert performance in SQLite", "body": "<p>As a sort of exercise, I'm seeing how fast I can insert bulk records into SQLite. The data set is about 50MB and contains 1M rows. Here is what I currently have:</p>\n\n<pre><code>sqlite3 *db;\nint rc = sqlite3_open(\"MyDB.db\", &amp;db);\nsqlite3_exec(db, \"BEGIN TRANSACTION\", NULL, NULL, NULL);\nchar* sql_buffer = malloc(200 * sizeof(char));\nfor (int i=0; item=row[i]; i ++) {\n    snprintf(sql_buffer, 200, \"insert into myTable (id, format, size) VALUES (%d, '%s', %d)\", item.id, item.format, item.size);\n    rc = sqlite3_exec(db, sql_buffer, NULL, NULL, NULL);\n}\nsqlite3_exec(db, \"COMMIT TRANSACTION\", NULL, NULL, NULL);\n</code></pre>\n\n<p>Doing the above 1M inserts, it takes <code>3.39s</code>. About 90% of that time is the SQLite inserts and 10% is the <code>snprintf</code> function. I tried the following to see if it would increase speed:</p>\n\n<ul>\n<li>Doing inserts after every 10K, 50K, 100K, instead of at the end (1M)</li>\n<li>Writing to memory instead of a file.</li>\n<li>Changing various pragmas, for example: <code>PRAGMA cache_size = 400000; PRAGMA synchronous = OFF; PRAGMA journal_mode = OFF;</code>...</li>\n</ul>\n\n<p>None of those seemed to have more than any effect of more than a <code>0.1s</code> difference or so.</p>\n\n<p>Are there any further ways that I could increase the insert speed here? If we assume the file is \"parsed\" and cannot just be loaded directly from something like a csv file, could it theoretically be possible to insert 1M rows in under 1s? If not, what is the limitation in doing something like that?</p>\n"}, {"tags": ["c", "makefile", "math.h"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1569377687, "post_id": 58090091, "comment_id": 102573485, "body": "In particular, see <a href=\"https://stackoverflow.com/a/24675715\">this answer</a>."}, {"owner": {"reputation": 124, "user_id": 10076956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5BsZMv-fe18/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2p4alkYStXegIEfnmmaHjIOlZOA/mo/photo.jpg?sz=128", "display_name": "Van Teo Le", "link": "https://stackoverflow.com/users/10076956/van-teo-le"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569398430, "post_id": 58090091, "comment_id": 102579882, "body": "I get it now, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 10076956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5BsZMv-fe18/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2p4alkYStXegIEfnmmaHjIOlZOA/mo/photo.jpg?sz=128", "display_name": "Van Teo Le", "link": "https://stackoverflow.com/users/10076956/van-teo-le"}, "edited": false, "score": 0, "creation_date": 1569398410, "post_id": 58090179, "comment_id": 102579874, "body": "Yes, it solved my problem,however,i have already add -lm once when i compiled stats.c into stats.o, and after that i put stats.o into build/libYOURLIBRARY.a, doesn&#39;t that linker count?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 124, "user_id": 10076956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5BsZMv-fe18/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2p4alkYStXegIEfnmmaHjIOlZOA/mo/photo.jpg?sz=128", "display_name": "Van Teo Le", "link": "https://stackoverflow.com/users/10076956/van-teo-le"}, "edited": false, "score": 0, "creation_date": 1569398970, "post_id": 58090179, "comment_id": 102580170, "body": "@Van: no. The act of archiving objects into a library is just that. It takes object files (which have unresolved references) and puts them in a library (still with unresolved references). It&#39;s when you try to <i>combine</i> objects (from compiling C files, objects that have already been compiled or objects that have already been compiled and put into an archive lib) into an executable form that you need to resolve all references. When compiling, you don&#39;t need the lib, you only need the headers - the libs probably aren&#39;t even used."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 124, "user_id": 10076956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5BsZMv-fe18/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2p4alkYStXegIEfnmmaHjIOlZOA/mo/photo.jpg?sz=128", "display_name": "Van Teo Le", "link": "https://stackoverflow.com/users/10076956/van-teo-le"}, "edited": false, "score": 0, "creation_date": 1569399278, "post_id": 58090179, "comment_id": 102580321, "body": "You have to remember that what you <i>run</i> (such as <code>gcc</code>) is usually a front end that invokes pre-processors, compilers, assemblers, library managers, linkers and so on (either as separate processes or as stages). Even if you do specify <code>-lm</code> to the front end, it probably won&#39;t be used for anything other than the linking stage."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 3, "last_activity_date": 1569376958, "last_edit_date": 1569376958, "creation_date": 1569376616, "answer_id": 58090179, "question_id": 58090091, "link": "https://stackoverflow.com/questions/58090091/undefined-reference-to-a-function-which-has-already-been-linked/58090179#58090179", "title": "undefined reference to a function, which has already been linked", "body": "<p>Some linkers tend to be fairly simple beasts. When they encounter a <code>-lsomething</code> on the command line, they use it to satisfy any <em>currently</em> unresolved symbols.</p>\n\n<p>Introducing a new unresolved symbol (such as with your <code>build/libYOURLIBRARY.a</code>) may <em>not</em> cause it to back up and try the previously-mentioned libraries again.</p>\n\n<p>In your particular case, it'll probably be fixed by just moving <code>-lm</code> to <em>after</em> your archive file:</p>\n\n<pre><code>cc -g -O2 -Wall -Wextra -Isrc -rdynamic  -fPIC  reporter.c build/libYOURLIBRARY.a -lm -o reporter\n</code></pre>\n\n<p>That way, the unresolved symbol is known when you start looking at the math library, and it will therefore resolve it.</p>\n"}], "owner": {"reputation": 124, "user_id": 10076956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5BsZMv-fe18/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2p4alkYStXegIEfnmmaHjIOlZOA/mo/photo.jpg?sz=128", "display_name": "Van Teo Le", "link": "https://stackoverflow.com/users/10076956/van-teo-le"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1569402985, "accepted_answer_id": 58090179, "answer_count": 1, "score": 1, "last_activity_date": 1569376958, "creation_date": 1569375813, "last_edit_date": 1569376545, "question_id": 58090091, "link": "https://stackoverflow.com/questions/58090091/undefined-reference-to-a-function-which-has-already-been-linked", "closed_reason": "Duplicate", "title": "undefined reference to a function, which has already been linked", "body": "<p>I am making a C program called reporter, here is the include:</p>\n\n<pre><code>#include &lt;lcthw/dbg.h&gt;\n#include &lt;lcthw/stats.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n</code></pre>\n\n<p>This is where the problem happened:</p>\n\n<pre><code>Stats_dump(stats);\n</code></pre>\n\n<p><code>Stats_dump</code> in Stats.c(implementation file):</p>\n\n<pre><code>void Stats_dump(Stats *st){\nfprintf(stderr,\"sum : %f, sumsq %f, n: %ld,min:%f, max: %f,mean: %f, stddev: %f\",\n    st-&gt;sum,st-&gt;sumsq,st-&gt;n,st-&gt;min,st-&gt;max,Stats_mean(st),Stats_stddev(st));}\n</code></pre>\n\n<p>which lead to the error in Stats_stddev in Stats.h:</p>\n\n<pre><code>static inline double Stats_stddev(Stats *st){\nreturn sqrt((st-&gt;sumsq-st-&gt;sum*st-&gt;sum/st-&gt;n)/(st-&gt;n-1)); // potential error?\n}\n</code></pre>\n\n<p>When I run this line in makefile(build/libYOURLIBRARY.a is where I store self-made lib like stats) :</p>\n\n<pre><code>cc -g -O2 -Wall -Wextra -Isrc -rdynamic  -fPIC  reporter.c -lm  build/libYOURLIBRARY.a -o reporter\n</code></pre>\n\n<p>However, it returns:</p>\n\n<pre><code>build/libYOURLIBRARY.a(stats.o): In function `Stats_stddev':\n/media/thang/DATA/gay/liblcthw/src/lcthw/stats.h:17: undefined reference to `sqrt'\n</code></pre>\n\n<p>I have included math.h in every single file, and also add -lm to every line of makefile, but to no avail.</p>\n\n<p>What might have caused this issue, and how to solve this?</p>\n"}, {"tags": ["c", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": true, "score": 0, "last_activity_date": 1569376105, "creation_date": 1569376105, "answer_id": 58090120, "question_id": 58090015, "link": "https://stackoverflow.com/questions/58090015/sqlite3-exec-with-and-without-explicit-transaction/58090120#58090120", "title": "sqlite3_exec with and without explicit transaction", "body": "<p>Because if you don't do <code>BEGIN...COMMIT</code> there is an implicit one after every statement (<code>COMMIT</code> is a one-liner that turns it back to commit at end of statement).</p>\n\n<p>Once having done so, you're bound by the disk write time which is going to be 10s of milliseconds per row (less if SSD but still a lot more than it can do with not committing after every row). You don't want that.</p>\n\n<p>Batch your inserts. About 10,000 rows per transaction is write for typical hardware these days.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11954200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 58090120, "answer_count": 1, "score": -1, "last_activity_date": 1569376105, "creation_date": 1569375180, "question_id": 58090015, "link": "https://stackoverflow.com/questions/58090015/sqlite3-exec-with-and-without-explicit-transaction", "title": "sqlite3_exec with and without explicit transaction", "body": "<p>With the following code:</p>\n\n<pre><code>sqlite3_exec(db, \"BEGIN TRANSACTION\", NULL, NULL, NULL);\nfor (int i=0; (row=rows[i]).id != NULL; i ++) {\n    if (i == 100000) break;\n    asprintf(&amp;query, \"insert into Sales1M (id, date, instance_id, territory_id, code, price, currency_code_id, price_in_usd)\"\n                     \"values ('%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s');\",\n                      row.id, row.date, row.instance_id, row.territory_id, row.code, row.price, row.currency_code_id, row.price_in_usd);\n    rc = sqlite3_exec(db, query, NULL, NULL, &amp;error_msg);\n}\nsqlite3_exec(db, \"COMMIT TRANSACTION\", NULL, NULL, NULL);\n</code></pre>\n\n<blockquote>\n  <p>InsertSQL: 0.384135s to do the 100K inserts.</p>\n</blockquote>\n\n<p>However, if I remove the <code>BEGIN TRANSACTION...</code>, the inserts are almost 100x slower:</p>\n\n<blockquote>\n  <p>InsertSQL: 4.592789 to do the 100K inserts.</p>\n</blockquote>\n\n<p>Why is this so?</p>\n\n<p>Does SQLite automatically do a <code>BEGIN...COMMIT</code> as a wrapper around the <code>sqlite3_exec</code> command if there isn't a pending <code>TRANSACTION</code> already in place? Or, why does it take so long without explicitly doing the begin/commit in the transaction?</p>\n"}, {"tags": ["c", "postgresql"], "comments": [{"owner": {"reputation": 23, "user_id": 12076752, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sKrsAONmNb4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4RYQHLlWuUHmg8E7ANArOME6J5A/photo.jpg?sz=128", "display_name": "Yessica Brinkmann", "link": "https://stackoverflow.com/users/12076752/yessica-brinkmann"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569384731, "post_id": 58090012, "comment_id": 102574783, "body": "It is a function of the stringinfo.c library"}], "answers": [{"tags": [], "owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "is_accepted": true, "score": 0, "last_activity_date": 1569385221, "creation_date": 1569385221, "answer_id": 58091094, "question_id": 58090012, "link": "https://stackoverflow.com/questions/58090012/about-appendstringinfo-in-c-i-do-not-know-how-it-works/58091094#58091094", "title": "About appendStringInfo in C - I do not know how it works", "body": "<p>That is a trivial error:</p>\n\n<p>Your format string <code>\"attname=%s\"</code> has only a single placeholder (<code>%s</code>), but you supply two arguments. Only the first one will get used.</p>\n\n<p>Perhaps you mean something like:</p>\n\n<pre><code>appendStringInfo(&amp;cols,\n                 \"%s attname=%s\",\n                 (i&gt;0 ? \"OR\" : \"\"),\n                 idxcd-&gt;varattnombres[i]\n);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12076752, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sKrsAONmNb4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4RYQHLlWuUHmg8E7ANArOME6J5A/photo.jpg?sz=128", "display_name": "Yessica Brinkmann", "link": "https://stackoverflow.com/users/12076752/yessica-brinkmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58091094, "answer_count": 1, "score": 1, "last_activity_date": 1569445496, "creation_date": 1569375158, "last_edit_date": 1569385050, "question_id": 58090012, "link": "https://stackoverflow.com/questions/58090012/about-appendstringinfo-in-c-i-do-not-know-how-it-works", "title": "About appendStringInfo in C - I do not know how it works", "body": "<p>I am trying to use <code>appendStringInfo</code> in PostgreSQL server code. In this case it should add a column name, but it appears empty.</p>\n\n<p>When printing</p>\n\n<pre><code>elog (INFO, \"value:%s\", idxcd-&gt;varattnames[i]);\n</code></pre>\n\n<p>the corresponding value appears to me.</p>\n\n<pre><code>for (i = 0; i &lt; idxcd-&gt;ncols; ++i)\n{\n    appendStringInfo( &amp;cols, \"attname=%s\", (i&gt;0?\"OR\":\"\"), idxcd-&gt;varattnombres[i]);\n    elog(INFO,\"indice:%d\", i);\n    elog(INFO,\"valor:%s\", idxcd-&gt;varattnombres[i]);\n    elog(INFO,\"cols:%s\", cols.data);\n}/* foreach col in varattno*/\n</code></pre>\n"}, {"tags": ["c", "windows", "debugging"], "comments": [{"owner": {"reputation": 240, "user_id": 1901265, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/022417fb9ca8a9dff80be8fa0c64b141?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/1901265/bob"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1569375623, "post_id": 58089954, "comment_id": 102573111, "body": "@Ken White You are right, I will fix the post."}, {"owner": {"reputation": 428, "user_id": 1418663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ef9e8cf2739567a75dbd94e6eb124a?s=128&d=identicon&r=PG", "display_name": "Christian B", "link": "https://stackoverflow.com/users/1418663/christian-b"}, "edited": false, "score": 1, "creation_date": 1569444622, "post_id": 58089954, "comment_id": 102603463, "body": "Note that you can also open executables from Visual Studio directly -- under &quot;Open Project&quot; you can choose &quot;Exe files&quot; in the filetype dropdown."}], "answers": [{"tags": [], "owner": {"reputation": 240, "user_id": 1901265, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/022417fb9ca8a9dff80be8fa0c64b141?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/1901265/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1569378811, "creation_date": 1569378811, "answer_id": 58090403, "question_id": 58089954, "link": "https://stackoverflow.com/questions/58089954/how-to-run-the-visual-studio-debugger-from-the-command-line/58090403#58090403", "title": "How to run the Visual Studio Debugger from the command line?", "body": "<p>I added these two flags to my link line:<br>\n    /Od /Zi<br>\nNow the command:<br>\n    deven /debugexe<br>\nis working.</p>\n"}], "owner": {"reputation": 240, "user_id": 1901265, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/022417fb9ca8a9dff80be8fa0c64b141?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/1901265/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 58090403, "answer_count": 1, "score": 0, "last_activity_date": 1569442574, "creation_date": 1569374594, "last_edit_date": 1569442574, "question_id": 58089954, "link": "https://stackoverflow.com/questions/58089954/how-to-run-the-visual-studio-debugger-from-the-command-line", "title": "How to run the Visual Studio Debugger from the command line?", "body": "<p>I have built a C program (I downloaded the source code from the web) using the Microsoft Visual Stdio compiler. I am using the 2017 version of the Visual Studio . The code was compiled using make and running the compiler on the command line. Among the compiler flags used were:  /Od /Zi</p>\n\n<p>I now want to use the Microsoft Visual Studio Debugger to step through my program. I do not know how to do this. I normally run the debugger from the development studio but I am not using the development stdio on this code. I am thinking if I knew the name of the executable I can then run the debugger from the command line. I do not however.</p>\n\n<p>I am now thinking the following will start the debugger:\n      devenv /debugexe </p>\n\n<p>When I run it, I am not getting symbols. It says that it does not have a PDB file.</p>\n\n<p>Thanks,<br>\nBob</p>\n"}, {"tags": ["c", "arrays", "copy"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1569374328, "post_id": 58089878, "comment_id": 102572911, "body": "You could do it with three <code>for</code> loops. The outer loop counts the letters (3), the middle loop counts the new height (2), and the inner loop counts the width (3)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569376838, "post_id": 58089878, "comment_id": 102573321, "body": "You can do it in one loop, but I would not recommend it: <code>void DoIt(size_t R, size_t C, size_t H, size_t W, int D[R*H][C*W], const int S[R][C]) { size_t size = sizeof S[0][0]; char *d = (char *) D; const char *s = (const char *) S; for (size_t i = 0; i &lt; R*H*C*W * size; ++i) { size_t b = i % size; size_t c = i&#47;size % (W*C) &#47; W; size_t r = i &#47; (size*W*C*H); d[i] = s[(r*C + c)*size + b]; } }</code>. <code>R</code> and <code>C</code> are the source dimensions, <code>H</code> and <code>W</code> are the replications factors for height and width, <code>D</code> is the destination array, and <code>S</code> is the source array."}, {"owner": {"reputation": 1, "user_id": 12116151, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCm3D1cHgiI3L2XSjuqVsjRx_2VS4nUC3ehTXXM=k-s128", "display_name": "Roland Chin", "link": "https://stackoverflow.com/users/12116151/roland-chin"}, "edited": false, "score": 0, "creation_date": 1569377117, "post_id": 58089878, "comment_id": 102573373, "body": "thanks both of you guys, I managed to do it with the 3 for loops"}], "owner": {"reputation": 1, "user_id": 12116151, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCm3D1cHgiI3L2XSjuqVsjRx_2VS4nUC3ehTXXM=k-s128", "display_name": "Roland Chin", "link": "https://stackoverflow.com/users/12116151/roland-chin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569373833, "creation_date": 1569373833, "question_id": 58089878, "link": "https://stackoverflow.com/questions/58089878/how-to-duplicate-an-array-vertically-and-horizontally-in-c", "title": "How to duplicate an array vertically and horizontally in C?", "body": "<p>Say I have a 3x1 vertical array consisting of these 3 letters:</p>\n\n<ul>\n<li><p>a</p></li>\n<li><p>b</p></li>\n<li><p>c</p></li>\n</ul>\n\n<p>Given a new height per row (2) and width (3), I would like to create a new array that looks like the following:</p>\n\n<ul>\n<li><p>a a a</p></li>\n<li><p>a a a</p></li>\n<li><p>b b b</p></li>\n<li><p>b b b</p></li>\n<li><p>c c c</p></li>\n<li><p>c c c</p></li>\n</ul>\n\n<p>I'm thinking of using a double for loop, with the rows going from 0 to height times the number of variables, and the width going from 0 to width, but I'm not sure how to keep track of how many rows I already have for each letter.</p>\n"}, {"tags": ["c", "clang", "c89", "storage-class-specifier", "register-keyword"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569375324, "post_id": 58089849, "comment_id": 102573070, "body": "Why are you using <code>-std=c89</code>?"}, {"owner": {"reputation": 63, "user_id": 8099651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ae097cc19ab4be09cb76ba6ec734a2?s=128&d=identicon&r=PG&f=1", "display_name": "MMX", "link": "https://stackoverflow.com/users/8099651/mmx"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569382712, "post_id": 58089849, "comment_id": 102574408, "body": "@EricPostpischil It is just my curiosity. I want to know old C even though I know that some of them are deprecated or removed, or there are better ways."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1569375124, "last_edit_date": 1569375124, "creation_date": 1569374118, "answer_id": 58089898, "question_id": 58089849, "link": "https://stackoverflow.com/questions/58089849/why-register-array-names-can-be-assigned-to-pointer-variables-without-compiler-e/58089898#58089898", "title": "Why register array names can be assigned to pointer variables without compiler error?", "body": "<p>This is a bug in the Clang compiler. \n<a href=\"https://godbolt.org/z/HKm3v6\" rel=\"nofollow noreferrer\">GCC shows an error on both lines.</a></p>\n\n<p>In discussing the automatic conversion of \u201carray of <em>type</em>\u201d to \u201cpointer to <em>type</em>\u201d, C 2018 6.3.2.1 says:</p>\n\n<blockquote>\n  <p>\u2026 If the array object has register storage class, the behavior is undefined.</p>\n</blockquote>\n\n<p>Further, C 2018 footnote 124 says:</p>\n\n<blockquote>\n  <p>\u2026 the address of any part of an object declared with storage-class specifier <code>register</code> cannot be computed, either explicitly (by use of the unary <code>&amp;</code> operator as discussed in 6.5.3.2) or implicitly (by converting an array name to a pointer as discussed in 6.3.2.1)\u2026</p>\n</blockquote>\n\n<p>Obviously, <code>p = array;</code> converts <code>array</code> to a pointer, as discussed in 6.3.2.1, but this footnote (which is non-normative but tells us the intent in this case quite explicitly) says the value for that pointer cannot be computed.</p>\n\n<p>Since the behavior is not defined by the C standard, a C implementation could define it as an extension. However, the inconsistent behavior between <code>array</code> and <code>&amp;array[0]</code> suggests this is not a deliberate extension by Clang but is a mistake.</p>\n"}], "owner": {"reputation": 63, "user_id": 8099651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ae097cc19ab4be09cb76ba6ec734a2?s=128&d=identicon&r=PG&f=1", "display_name": "MMX", "link": "https://stackoverflow.com/users/8099651/mmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58089898, "answer_count": 1, "score": 3, "last_activity_date": 1569375124, "creation_date": 1569373556, "last_edit_date": 1569374081, "question_id": 58089849, "link": "https://stackoverflow.com/questions/58089849/why-register-array-names-can-be-assigned-to-pointer-variables-without-compiler-e", "title": "Why register array names can be assigned to pointer variables without compiler error?", "body": "<p>I have a question about <code>register</code> keyword in C.</p>\n\n<p>I found that <code>register</code> array name(e.g. <code>array</code>) can be assigned to pointer variable while <code>&amp;array[0]</code> cannot be.</p>\n\n<p>Can you explain why array name can be assigned to pointer? Or, if someone already explained it, please let me know links so that I can take a look to get the answer. Thank you.</p>\n\n<p><strong>Here is what I tried:</strong></p>\n\n<p>I read <a href=\"https://en.cppreference.com/w/c/language/storage_duration\" rel=\"nofollow noreferrer\">cppreference</a> which explains <code>register</code> keyword and it says: </p>\n\n<blockquote>\n  <p>register arrays are not convertible to pointers.</p>\n</blockquote>\n\n<p>Also, I read C89 draft which says:</p>\n\n<blockquote>\n  <p>The implementation may treat any register declaration simply as an auto declaration. However, <strong>whether or not addressable storage is actually used, the address of any part of an object declared with storage-class specifier register may not be computed</strong>, either explicitly (by use of the unary &amp; operator as discussed in 3.3.3.2) or <strong>implicitly (by converting an array name to a pointer as discussed in 3.2.2.1).</strong> Thus the only operator that can be applied to an array declared with storage-class specifier register is sizeof.</p>\n</blockquote>\n\n<p>This looks like I can't assign register array name to pointer to get its address.</p>\n\n<p>Moreover, to find the answer, I searched here and found this question: \n<a href=\"https://stackoverflow.com/questions/1256246/address-of-register-variable\">Address of register variable</a>. There are good answers, however, still I couldn't find the answer what I wanted.</p>\n\n<p>Here is the code which I tested. I compiled this code through <strong>Clang</strong> with flag <code>-std=c89</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>register int array[10];\nint* p;\n\np = array;     // Compiled without warning or error\np = &amp;array[0]; // Compiled with error which I expected\n</code></pre>\n\n<p>I expected both <code>p = array;</code> and <code>p = &amp;array[0];</code> caused compiled error, but only <code>p = &amp;array[0];</code> made a compile error.</p>\n"}, {"tags": ["c", "keyword"], "answers": [{"tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": true, "score": 4, "last_activity_date": 1569376884, "last_edit_date": 1569376884, "creation_date": 1569376338, "answer_id": 58090153, "question_id": 58089644, "link": "https://stackoverflow.com/questions/58089644/support-and-use-of-the-fortran-keyword-in-c/58090153#58090153", "title": "Support and use of the `fortran` keyword in C", "body": "<p>The BC4.5 compiler for DOS/Win16 supports said keyword. It changes the calling convention of the function to FORTRAN's calling convention. Use looks like this:</p>\n\n<pre><code>extern fortran int FUNCTION(int *a, int *b, int *c);\n</code></pre>\n\n<p>(variables are passed by reference in FORTRAN).</p>\n\n<p>You can also export a function to be called from FORTRAN like so:</p>\n\n<pre><code>fortran int FUNCTION2(int *a, int *b, int *c)\n{\n    /* your code here */\n}\n</code></pre>\n\n<p>I actually used it to call into QBX (BASIC), which uses almost exactly the same calling convention. The <code>pascal</code> keyword was better for this purpose; otherwise arguments come in backwards.</p>\n"}], "owner": {"reputation": 1082, "user_id": 7171141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bae7d2c038134a93ef6e2bc5ec860754?s=128&d=identicon&r=PG&f=1", "display_name": "Orion", "link": "https://stackoverflow.com/users/7171141/orion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 3, "accepted_answer_id": 58090153, "answer_count": 1, "score": 9, "last_activity_date": 1569376884, "creation_date": 1569371220, "last_edit_date": 1569374276, "question_id": 58089644, "link": "https://stackoverflow.com/questions/58089644/support-and-use-of-the-fortran-keyword-in-c", "title": "Support and use of the `fortran` keyword in C", "body": "<p>Defined in the C standard is an optionally-supported keyword <code>fortran</code></p>\n\n<p>C99 language standard, section J.5.9:</p>\n\n<blockquote>\n  <p>The <code>fortran</code> function specifier may be used in  a  function  declaration  to  indicate  that calls suitable for FORTRAN should be generated, or that a different representation for the external name is to be generated.</p>\n</blockquote>\n\n<p>This section remains unchanged in the C11 standard.</p>\n\n<p>Nowhere else in either standard says anything else about this keyword. This section references section 6.7.4, Function Specifiers, which is what it seems to be, but the only one is <code>inline</code>, and the language involved tailors to that, and how one might use <code>fortran</code> isn't apparent.</p>\n\n<p>The keyword <em>is</em> contained in the \"Common Extensions\" section (!), so universal support is not expected, and indeed, it is not present: my copy of GCC 7.2.0 doesn't recognize it.</p>\n\n<p>Since I can't seem to use it,<br/>\na) How would one use the <code>fortran</code> keyword in C code?<br/>\nb) What compilers support/supported this keyword?</p>\n"}, {"tags": ["c", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1569371952, "creation_date": 1569371952, "answer_id": 58089708, "question_id": 58089599, "link": "https://stackoverflow.com/questions/58089599/understanding-sqlite3-step-and-why-it-takes-time-between-iterations/58089708#58089708", "title": "Understanding sqlite3_step and why it &quot;takes time&quot; between iterations", "body": "<p><code>sqlite3_prepare()</code> compiles the statement into sqlite's <a href=\"https://www.sqlite.org/opcode.html\" rel=\"noreferrer\">internal bytecode</a>. <code>sqlite3_step()</code> evaluates that bytecode up to the point where a row is returned or there are no more rows. The next call resumes evaluating at that point; it doesn't always calculate all result rows all at once, but often just one at a time. <code>sqlite3_step()</code> can take different times depending on how much work has to be done to get the next row (like processing groups of different sizes), if pages have to be fetched from disc instead of being present in the page cache, etc.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58089708, "answer_count": 1, "score": 1, "last_activity_date": 1569816891, "creation_date": 1569370751, "last_edit_date": 1569816891, "question_id": 58089599, "link": "https://stackoverflow.com/questions/58089599/understanding-sqlite3-step-and-why-it-takes-time-between-iterations", "title": "Understanding sqlite3_step and why it &quot;takes time&quot; between iterations", "body": "<p>I'm wondering why sometimes the query results return quite quick and other times it seems to take a while between the <code>sqlite3_step()</code> calls. For example:</p>\n\n<pre><code>rc = sqlite3_prepare_v2(db, \"SELECT * FROM mytable m GROUP BY field1, field2, field3, field4, field5 LIMIT 500\", -1, &amp;stmt, NULL);\nwhile ((rc = sqlite3_step(stmt)) == SQLITE_ROW);\n</code></pre>\n\n<p>Each <code>sqlite3_step</code> takes about the same time when I view the print  statements, and the fetch statements add up to take about <code>6.5s</code></p>\n\n<p>And then with a normal, fast unaggregated query, <code>sqlite3_step</code> is almost instant:</p>\n\n<pre><code>rc = sqlite3_prepare(db, \"SELECT * FROM mytable LIMIT 500\", -1, &amp;stmt, NULL);\n</code></pre>\n\n<p>In the above query, everything takes under <code>0.1s</code> to query and retrieve.</p>\n\n<p>I understand why the query itself would be much slower, but it seems like <code>sqlite3_stmt</code> is not really \"doing anything\" and all the SQL-ing work goes into the <code>sqlite3_step</code> and is spread out within each step. A few questions from this:</p>\n\n<ul>\n<li>Why aren't the resultset fetched once, and successive steps returned instantly (for a small queryset, such as the above where there are  less than 1K records)?</li>\n<li>What exactly is <code>sqlite3_prepare</code> doing? Does it touch the actual file (or in-memory) data, or is merely just \"setting up\" for the query to run?</li>\n<li>What is SQLite doing between each <code>sqlite3_step</code> that it is taking additional time between steps (if the query has already been 'executed')?</li>\n</ul>\n\n<p>The documentation of this method is listed <a href=\"https://www.sqlite.org/c3ref/step.html\" rel=\"nofollow noreferrer\">here</a>, but it doesn't say much about what it actually does other than saying what return codes it might give. From the docs:</p>\n\n<blockquote>\n  <p>This routine is used to evaluate a prepared statement that has been previously created by the sqlite3_prepare() interface. The statement is evaluated up to the point where the first row of results are available. To advance to the second row of results, invoke sqlite3_step() again. Continue invoking sqlite3_step() until the statement is complete. Statements that do not return results (ex: INSERT, UPDATE, or DELETE statements) run to completion on a single call to sqlite3_step().</p>\n</blockquote>\n\n<p>What does \"to completion\" mean in this case? Does it basically just do a <code>LIMIT 1</code> and the user needs to call it again to do an <code>OFFSET 1</code>, or what does that mean exactly?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 4, "creation_date": 1569371033, "post_id": 58089584, "comment_id": 102572401, "body": "Hint: <code>TOTAL_ELEMENTS</code> is of unsigned type. What happens if you compare a signed value <code>d</code> with an unsigned value <code>TOTAL_ELEMENTS - 2</code>? You can also try an experiment: <code>if (d &lt;= (int)TOTAL_ELEMENTS - 2)</code>."}, {"owner": {"reputation": 2892, "user_id": 391691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCKhh.jpg?s=128&g=1", "display_name": "Simson", "link": "https://stackoverflow.com/users/391691/simson"}, "edited": false, "score": 0, "creation_date": 1569371137, "post_id": 58089584, "comment_id": 102572414, "body": "Try to narrow down your possibilities. Use parentheses if in doubt of operation priorities. First try to assign d=0 and have it print x as 23 then slowly work back towards your goal."}], "answers": [{"comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1569372420, "post_id": 58089669, "comment_id": 102572618, "body": "Or test what is used:  <code>if (d + 1 &lt; TOTAL_ELEMENTS)</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569377451, "post_id": 58089669, "comment_id": 102573439, "body": "The crucial &quot;left operand is converted from <code>int</code> to <code>size_t</code>&quot; skips over a subtle point:  <code>size_t</code> certainly has a greater or equal rank to <code>int</code>.  It is <i>not</i> specified in C to be so - but is so in OP&#39;s case.  I have never come across an implementation where <code>SIZE_MAX &lt; INT_MAX</code> and doubt we ever will.  Still UV."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1569371867, "last_edit_date": 1569371867, "creation_date": 1569371519, "answer_id": 58089669, "question_id": 58089584, "link": "https://stackoverflow.com/questions/58089584/how-i-find-un-subtle-bug/58089669#58089669", "title": "how I find un subtle bug", "body": "<p>This is due to the <strong>usual arithmetic conversions</strong>.</p>\n\n<p>When the operands of a operator involve both a signed integer and an unsigned integer, and the unsigned type is at least as large as the signed type, the signed value is converted to an unsigned value.  When the signed value is negative, it gets converted to a large positive value.</p>\n\n<p>The rules for integer conversions are spelled out in section 6.3.1.8p1 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p>If both operands have the same type, then no further conversion is\n  needed.</p>\n  \n  <p>Otherwise, if both operands have signed integer types or both have\n  unsigned integer  types,  the  operand  with  the  type  of  lesser \n  integer  conversion  rank  is converted to the type of the operand\n  with greater rank.</p>\n  \n  <p>Otherwise,  if  the  operand  that  has  unsigned  integer  type  has \n  rank  greater  or equal  to  the  rank  of  the  type  of  the  other \n  operand,  then  the  operand  with signed  integer  type  is \n  converted  to  the  type  of  the  operand  with  unsigned integer\n  type.</p>\n  \n  <p>Otherwise, if the type of the operand with signed integer type can\n  represent all of the values of the type of the operand with unsigned\n  integer type, then the  operand  with  unsigned  integer  type  is \n  converted  to  the  type  of  the operand with signed integer type.</p>\n  \n  <p>Otherwise,   both   operands   are   converted   to   the   unsigned<br>\n  integer   type corresponding to the type of the operand with signed\n  integer type</p>\n</blockquote>\n\n<p>In this expression:</p>\n\n<pre><code>(d &lt;= TOTAL_ELEMENTS - 2)\n</code></pre>\n\n<p>Which expands to:</p>\n\n<pre><code>(d &lt;= (sizeof(array) / sizeof(array[0])) - 2)\n</code></pre>\n\n<p>The <code>sizeof</code> operator evaluates to a value of type <code>size_t</code> which is unsigned.  So the types of the operands look like this:</p>\n\n<pre><code>(int &lt;= ((size_t / size_t) - int)\n</code></pre>\n\n<p>Both operands of the <code>/</code> operator are of type <code>size_t</code> so the result of that operation is of type <code>size_t</code>.  Then the right operand of <code>-</code> is converted to type <code>size_t</code>.  Since the value 2 fits in that type the value doesn't change.  </p>\n\n<p>Now we have the <code>&lt;=</code> operator with an <code>int</code> on one size and a <code>size_t</code> on the other.  The left operand is converted from <code>int</code> to <code>size_t</code>, however the value -1 doesn't fit in that type so it is converted.  The converted value is actually the largest possible value for a <code>size_t</code> which is therefore greater than the value on the right side, making the result of <code>&lt;=</code> false.</p>\n\n<p>To fix this, you'll want to cast the unsigned value on the right to signed to prevent the left side from being converted:</p>\n\n<pre><code>if (d &lt;= (int)(TOTAL_ELEMENTS - 2))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9587193, "user_type": "registered", "profile_image": "https://graph.facebook.com/1983637975218972/picture?type=large", "display_name": "Tu\u1ea5n B&#249;i", "link": "https://stackoverflow.com/users/9587193/tu%e1%ba%a5n-b%c3%b9i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569371867, "creation_date": 1569370583, "question_id": 58089584, "link": "https://stackoverflow.com/questions/58089584/how-i-find-un-subtle-bug", "title": "how I find un subtle bug", "body": "<p>I don't understand why the variable have value of 0, it should be 23?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n\nint array[] = {23, 34, 12, 17, 204, 99, 16};\n#define TOTAL_ELEMENTS (sizeof(array) / sizeof(array[0]))\nint main(){\n    int d = -1, x = 0;\n    if (d &lt;= TOTAL_ELEMENTS - 2)\n        x = array[d + 1];\n    printf(\"x= %d \\n\", x);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["sql", "c", "database", "sqlite"], "comments": [{"owner": {"reputation": 10667, "user_id": 4259761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yDRx2.png?s=128&g=1", "display_name": "openwonk", "link": "https://stackoverflow.com/users/4259761/openwonk"}, "edited": false, "score": 0, "creation_date": 1569371805, "post_id": 58089504, "comment_id": 102572524, "body": "Stating the obvious, it seems your app has a lot of overhead to it."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569372202, "post_id": 58089504, "comment_id": 102572590, "body": "Does db browser measure just the time spent executing the query, or include time spent rendering and displaying the results too? If as seems likely it&#39;s the latter case, the two aren&#39;t really equivalent.... Comparing the time to cut down a tree vs the time to turn it into lumber on top of that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11954200"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569372330, "post_id": 58089504, "comment_id": 102572605, "body": "@Shawn I would assume it&#39;s both, but the results are only 520 rows, and it takes almost just as long if I reduce it to two rows or so, so I don&#39;t think (though I may be wrong?) the display itself should take too long with this particular query."}, {"owner": {"reputation": 3502, "user_id": 1261752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OjAfn.png?s=128&g=1", "display_name": "C Perkins", "link": "https://stackoverflow.com/users/1261752/c-perkins"}, "edited": false, "score": 0, "creation_date": 1569389226, "post_id": 58089504, "comment_id": 102575883, "body": "@Shared  This just probably indicates that the extra time spent in DB Browser is not proportional to the number of rows because the other UI preparation, analysis of the SQL prior to execution, preparing data structures for retrieval of data, etc., are not dependent upon number of rows.  Shawn&#39;s point is simply that DB Browser is doing many more things than simply retrieving the raw data.  Test a different sqlite manager/browser software and/or a different host language for comparison."}], "owner": {"user_type": "does_not_exist", "display_name": "user11954200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569371684, "creation_date": 1569369772, "last_edit_date": 1569371684, "question_id": 58089504, "link": "https://stackoverflow.com/questions/58089504/difference-in-sqlite-query-times", "title": "Difference in SQLite query times", "body": "<p>When I run query from within C and in \"DB Brownser for SQLite\" I get wildly different query times. Here is an example:</p>\n\n<pre><code>sqlite3 *db;\nint rc = sqlite3_open(\"New.db\", &amp;db);\n\n// Execute\nclock_t t0 = clock();\nsqlite3_stmt *stmt;\nrc = sqlite3_prepare(db, \"SELECT * FROM Sales1M s1 join Sales1M s2 on (s1.id=s2.id) GROUP BY s1.territory_id, s2.code\", -1, &amp;stmt, NULL);\nclock_t t1 = clock();\n\n// Fetch\nint rownum=1;\nwhile ((rc = sqlite3_step(stmt)) == SQLITE_ROW) {\n    // printf(\"Row: %d | Code: %s | TerritoryID: %s\\n\", rownum, sqlite3_column_text(stmt, 4), sqlite3_column_text(stmt, 3));\n    rownum++;\n}\nclock_t t2 = clock();\n\nprintf(\"ExecuteSQL: %.6f | FetchSQL: %.6f\\n\" ...&lt;some other info&gt;);\n</code></pre>\n\n<blockquote>\n  <p>ExecuteSQL: 0.000451 | FetchSQL: 6.510507 (520 rows returned)</p>\n</blockquote>\n\n<p>And in the client (DB Browser) that exact same query takes 35s. Here's a visual comparison:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3qpUf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3qpUf.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've run the query multiple times in each and every time it takes about the same time. What accounts for the drastic difference in these two identical queries?</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569364671, "post_id": 58088909, "comment_id": 102571154, "body": "Any tutorial suggesting that you use that callback to <code>sqlite3_exec()</code> instead of prepared statements is bad and should be ignored."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569364771, "post_id": 58088909, "comment_id": 102571184, "body": "@Shawn why do you say that, out of curiosity?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1569365014, "post_id": 58088909, "comment_id": 102571257, "body": "It causes unnecessary data conversion because everything is turned into a string - if you&#39;re storing integers or reals, that&#39;s silly, and if you&#39;re using blobs, it&#39;s really bad. It&#39;s a pain to get the resulting rows back to the caller to process there. It can make code harder to read by having to jump to another function to see what you do with the results, and most importantly, it means you can&#39;t bind values to parameters in a query, opening yourself up to sql injection, errors from badly quoted strings, etc."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1569365029, "post_id": 58088909, "comment_id": 102571261, "body": "<code>sqlite3_exec()</code> is best for DDL statements that don&#39;t return any values or depend on user-supplied data - creating tables, etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569436176, "post_id": 58088909, "comment_id": 102600101, "body": "@Shawn do you want to go ahead and put in an answer with your above two comments and I&#39;ll accept it?"}], "owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569369825, "creation_date": 1569364288, "last_edit_date": 1569369825, "question_id": 58088909, "link": "https://stackoverflow.com/questions/58088909/fetching-data-with-sqlite", "title": "Fetching data with sqlite", "body": "<p>I have been trying to use the SQLite tutorial <a href=\"http://www.tutorialspoint.com/sqlite/sqlite_c_cpp.htm\" rel=\"nofollow noreferrer\">here</a> to learn how to use SQLite in C. I was having trouble figuring out exactly how to use it, as it only mentions the <code>sqlite3_exec</code>, which seems incredibly un-intuitive to use for basic querying (it uses a callback for everything). Then I came across this answer, <a href=\"https://stackoverflow.com/a/31168999/11954200\">https://stackoverflow.com/a/31168999/11954200</a>, which addresses this same issue and suggests using the various four sqlite statements that are essentially merged into the <code>sqlite3_exec</code> shorthand form. Here is my understanding so far:</p>\n\n<pre><code>// Query to get the rows\n\n// Part1 -- Prepare the query: cursor.execute()\n// http://www.sqlite.org/c3ref/prepare.html\nsqlite3_stmt *stmt; // this is the prepared statement that the sqlite3_prepare writes to\nrc = sqlite3_prepare(db, \"SELECT * FROM mytable LIMIT 20\", -1, &amp;stmt, NULL);\nif (rc != SQLITE_OK) {\n    printf(\"error: %s\", sqlite3_errmsg(db));\n    return 0;\n}\n\n\n// Part2 -- equivalent of cursor.fetchone()\n// http://www.sqlite.org/c3ref/step.html\nint rownum=1;\nwhile ((rc = sqlite3_step(stmt)) == SQLITE_ROW) {\n\n    // Part3 -- reference the values from the row\n    // http://www.sqlite.org/c3ref/column_blob.html\n    int id                       = sqlite3_column_int(stmt, 0);\n    const unsigned char * date   = sqlite3_column_text(stmt, 1);\n    printf(\"Row: %d | ID: %d | Date: %s\\n\", rownum, id, date);\n    rownum++;\n}\n\n// Part4 -- equivalent of cursor.close()\n// http://www.sqlite.org/c3ref/finalize.html\nsqlite3_finalize(stmt);\n</code></pre>\n\n<p>In other words, in higher language parlance:</p>\n\n<ul>\n<li><code>sqlite3_prepare(...)</code> works like <code>cursor.execute(...)</code></li>\n<li><code>sqlite3_step(...)</code> works like <code>cursor.fetchone(...)</code></li>\n<li><code>sqlite3_finalize(...)</code> works like <code>cursor.close(...)</code>;</li>\n</ul>\n\n<p>Is this an accurate assessment of how these statements work in sqlite? Would the <code>sqlite3_exec</code> ever be used when fetching results?</p>\n"}, {"tags": ["c", "assembly", "x86", "arm"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1569362340, "post_id": 58088643, "comment_id": 102570574, "body": "Yes, most compilers have builtins.  There are some headers that try to portably expose efficient versions across compilers, e.g. <code>be16toh()</code> on systems that have that function."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1569362366, "post_id": 58088643, "comment_id": 102570578, "body": "<code>ntohs</code> and <code>htons</code> functions be of use to you?"}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569362453, "post_id": 58088643, "comment_id": 102570598, "body": "Regarding <code>ntohs</code> and <code>htons</code>, In this case no. I&#39;m trying to avoid the memcpy that&#39;d be required for proper aligned access, which is a prerequisite of those functions/macros.  There&#39;s also a pedantic corner of the internet which argues use of those functions/macros is wrong in the majority of cases when dealing with network packets."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569362641, "post_id": 58088643, "comment_id": 102570649, "body": "Same issue with <code>be16toh()</code> unless it&#39;s guaranteed to produce aligned accesses. This is why the question is explicit about the input being a  byte array for the &#39;from network&#39; solution, and a byte array for the output of the &#39;to network&#39; solution."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1569362830, "post_id": 58088643, "comment_id": 102570693, "body": "Those functions do not take pointers, they don&#39;t produce any accesses themselves. It&#39;s your job to load and store the input and output which is where alignment comes into play."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569362856, "post_id": 58088643, "comment_id": 102570701, "body": "Which involves a memcpy which as I stated, I&#39;m trying to avoid."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1569362939, "post_id": 58088643, "comment_id": 102570728, "body": "No it does not necessarily involve memcpy - you do not need to copy the whole array, you just need to load and store the items one by one. Also, that&#39;s no fault of the functions."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 1, "creation_date": 1569363193, "post_id": 58088643, "comment_id": 102570779, "body": "Ha, quite. Fixed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569363428, "post_id": 58088643, "comment_id": 102570849, "body": "Note: <code>return (a[0] &lt;&lt; 8) | a[1];</code> potentially is technically UB on 16-bit <code>int</code> machines.  <code>return ((unsigned) a[0] &lt;&lt; 8) | a[1];</code> is better."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1569363438, "post_id": 58088643, "comment_id": 102570854, "body": "@Jester could you provide some example code that&#39;s architecture agnostic, I&#39;m not sure I understand what you mean there."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569363550, "post_id": 58088643, "comment_id": 102570882, "body": "@chux Could you explain why it&#39;s UB, not doubting, just interested to know."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569363630, "post_id": 58088643, "comment_id": 102570909, "body": "<code>128 &lt;&lt; 8</code> shifts into the sign bit: &quot;The result of E1 &lt;&lt; E2 is .... If E1 has a signed type and nonnegative value, and E1  2^E2 is representable in the result type, then that is the resulting value; otherwise, the behavior is undefined&quot;"}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569364023, "post_id": 58088643, "comment_id": 102571016, "body": "But isn&#39;t E1 an unsigned type in this instance being uint8_t?"}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569364828, "post_id": 58088643, "comment_id": 102571197, "body": "Ugh, integer promotion is something I can never remember the rules for.   I&#39;d say <code>return ((uint16_t)a[0] &lt;&lt; 8) | a[1];</code> was actually the correct code, but the current code does work as posted."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1569365987, "post_id": 58088643, "comment_id": 102571471, "body": "I think I misunderstood your problem, I thought you had a massive array of values to byte swap but apparently your array is only the size of a single item. Anyway, for the <code>get_xx</code> versions both gcc and clang seem to recognize the intent and optimize it to unaligned load and appropriate byte swapping if available on the architecture."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1569366261, "post_id": 58088643, "comment_id": 102571541, "body": "That also holds for the <code>put_xx</code> except for 32 bit ARM gcc for which I couldn&#39;t make it work."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1569366655, "post_id": 58088643, "comment_id": 102571633, "body": "However <code>val = htonl(val); memcpy(a, &amp;val, 4);</code> does work there as well. It produces a <code>rev</code> + <code>str</code> pair."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569382069, "post_id": 58088643, "comment_id": 102574278, "body": "@ArranCudbard-Bell &quot; but the current code does work as posted.&quot; --&gt; if your tests only include a 32-bit <code>int&#47;unsigned</code>, then yes it works.  Even with 16-bit <code>int</code>, your code may &quot;work&quot;, yet still rely on UB."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569382392, "post_id": 58088643, "comment_id": 102574334, "body": "@ArranCudbard-Bell Answers to Q1 &amp; Q2 are both yes.  &quot;And looking to be efficient&quot; is a worthy goal, yet true efficiency comes with looking at the larger picture, not this narrow micro-optimization goal.  To really get speed performance, post your best true code with a timing assessment and ask for how to improve its speed."}], "answers": [{"comments": [{"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569363381, "post_id": 58088780, "comment_id": 102570837, "body": "AFAIK, you can&#39;t use unions to parse network packets like that.  On systems where unaligned accesses are fatal, you&#39;ll kill your program.  Happy to be proved wrong."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 1, "creation_date": 1569363514, "post_id": 58088780, "comment_id": 102570875, "body": "and this isn&#39;t a duplicate of the question you posted."}, {"owner": {"reputation": 421, "user_id": 11846953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621bad401ba87fcbdcd7a49dd67ee3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Bayko", "link": "https://stackoverflow.com/users/11846953/john-bayko"}, "reply_to_user": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569363593, "post_id": 58088780, "comment_id": 102570894, "body": "I think the compiler would re-align things, but that would slow things down, so I see your point. I can&#39;t think of any modern CPUs that handle non-aligned integers, they all assume that you can manage to get the data aligned into memory somehow first."}, {"owner": {"reputation": 421, "user_id": 11846953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621bad401ba87fcbdcd7a49dd67ee3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Bayko", "link": "https://stackoverflow.com/users/11846953/john-bayko"}, "reply_to_user": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569363630, "post_id": 58088780, "comment_id": 102570908, "body": "I thought the answers to the question might give you some ideas."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569363863, "post_id": 58088780, "comment_id": 102570967, "body": "Note that <code>htonl()</code> is not a C standard function.  If it takes an <code>int&#47;unsigned&#47;uin32_t&#47;uint16_t&#47;...</code> is implementation defined.  I&#39;d expect most implementations to takes some unsigned argument, yet the width can vary.  <code>htonl32()</code> and the like are more predictable."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569363887, "post_id": 58088780, "comment_id": 102570974, "body": "Unfortunately even modern compilers aren&#39;t that smart.  There&#39;s only a limited subset of operations/builtin functions which guarantee aligned accesses, of which <code>memcpy</code> is one.  That&#39;s why casting a union over a buffer containing a network packet to extract fields at fixed offsets, if those fields are &gt; 8bits is bad practice if you&#39;re targeting an unknown architecture."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1569364169, "post_id": 58088780, "comment_id": 102571051, "body": "@chux <code>htonl()</code> is defined by POSIX to take a 32 bit unsigned int."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569364241, "post_id": 58088780, "comment_id": 102571067, "body": "@Shawn Limiting ourselves to POSIX is not clearly required here."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1569364388, "post_id": 58088780, "comment_id": 102571097, "body": "@chux The only non-POSIX conforming OS anyone is likely to use is Windows, and Winsock also specifies that it works with unsigned 32 bit ints. Pretending it might work with a different size of integer is pretty silly these days."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569364812, "post_id": 58088780, "comment_id": 102571190, "body": "@Shawn Billions of processors/year are embedded ones.  Large number of those do not have any OS.  C is designed to be highly portable across old and new/novel  architectures.  <code>htonl()</code> inheritable implies <code>host-to-network-long</code> yet many <code>long</code> are now 64-bit.  OP is looking for high portability given the &quot;big, little, mixed&quot;.  <a href=\"https://linux.die.net/man/3/htobe16\" rel=\"nofollow noreferrer\">htobe16(3) - Linux man page</a> are a better less ambiguous function set design."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1569365285, "post_id": 58088780, "comment_id": 102571306, "body": "@chux Name an embedded system that provides a <code>htonl()</code> that doesn&#39;t work on 32 bit values. I&#39;ll be honestly very surprised if such a thing exists in modern times. Plus does OP say anything about working in an embedded environment? (I used to feel the same way about <code>htonl()</code> until it was pointed out to me that it&#39;s standardized to 32 bit values. At that point, why be pedantic when you can be practical?)"}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569365883, "post_id": 58088780, "comment_id": 102571447, "body": "The issue with <code>htonl()</code> is more about needing to copy the bytes to an intermediary location, so it&#39;s more to do with the efficiency that the portability."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569366902, "post_id": 58088780, "comment_id": 102571688, "body": "@Shawn Using <code>htonl()</code> and friends  1) lack a 64-bit version. 2) lack a clear naming to wider types.  3) refer to network order rather than clearly &quot;big endian&quot; and explicitly requested by OP. OP did not mention an OS in the question either.  Using <code>htobeNN()</code> is not a pedantic concern, but a clear future thinking approach as many newer functions tend to use <code>NN</code> especially anything in communication.  There is a good practical reason why *nix rolled these out for clarity."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569366928, "post_id": 58088780, "comment_id": 102571696, "body": "@Shawn Give you the option for last word, else we should move this to chat."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569367486, "post_id": 58088780, "comment_id": 102571801, "body": "@ArranCudbard-Bell: you can use <code>memcpy</code> to express an unaligned load into an object.  It will optimize away on machines that support unaligned loads, but unfortunately can compile horribly (an actual call to the libc function) on ISAs like MIPS.  In GNU C, you can use <code>typedef int unaligned_int __attribute((aligned(1)))</code> or something; see <a href=\"//stackoverflow.com/a/57676035\">Why does glibc&#39;s strlen need to be so complicated to run quickly?</a>.  So only non-GNU-compatible compilers would need the memcpy fallback."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569370068, "post_id": 58088780, "comment_id": 102572241, "body": "@Shawn: \u201cYou cannot show me a platform this does not work on, so I will assume it works\u201d is not a valid engineering process. It makes things blow up and fall down. Engineering proceeds by constructing proper designs from given specifications, not from hopes that not only are there no counterexamples at hand now but that none exist at all and will not exist in the future. Knowingly designing out of specification is malpractice."}, {"owner": {"reputation": 421, "user_id": 11846953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621bad401ba87fcbdcd7a49dd67ee3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Bayko", "link": "https://stackoverflow.com/users/11846953/john-bayko"}, "edited": false, "score": 0, "creation_date": 1569454182, "post_id": 58088780, "comment_id": 102605880, "body": "&quot;That&#39;s why casting a union over a buffer containing a network packet to extract fields at fixed offsets, if those fields are &gt; 8bits is bad practice&quot; - I&#39;d consider casting in general to be bad practice, so it didn&#39;t occur to me you&#39;d think of doing that."}, {"owner": {"reputation": 421, "user_id": 11846953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621bad401ba87fcbdcd7a49dd67ee3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Bayko", "link": "https://stackoverflow.com/users/11846953/john-bayko"}, "edited": false, "score": 0, "creation_date": 1569454213, "post_id": 58088780, "comment_id": 102605888, "body": "I take it you can&#39;t control how the input data is aligned. I suppose the best you could do in that case is split your integer in two, based on the lower 4 bits of the address - extract the top 1-3 bytes of one, lower 3-1 bytes of the other, mask, shift, and combine the resulting integers into the one you want. I don&#39;t know how much time you&#39;d save over the complexity of something like that, but that&#39;s up to you to decide."}], "tags": [], "owner": {"reputation": 421, "user_id": 11846953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621bad401ba87fcbdcd7a49dd67ee3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Bayko", "link": "https://stackoverflow.com/users/11846953/john-bayko"}, "is_accepted": false, "score": 0, "last_activity_date": 1569363248, "creation_date": 1569363248, "answer_id": 58088780, "question_id": 58088643, "link": "https://stackoverflow.com/questions/58088643/efficient-big-endian-byte-array-to-native-integer-conversion-in-c/58088780#58088780", "title": "Efficient big endian byte array to native integer conversion in C", "body": "<p>As far as the C side, I think this has been asked before. I found this with a quick search:\n<a href=\"https://stackoverflow.com/questions/19275955/convert-little-endian-to-big-endian/19276193\">Convert Little Endian to Big Endian</a></p>\n\n<p>You can use htonl(), htons(), and related, which will convert to and from a known big-endian format. You can also use a union to extract the individual bytes from an int or long, etc., as in:</p>\n\n<pre><code>union extract_byte_val {\n    long long_val;\n    uint8_t bytes_val[sizeof(long)];\n}\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>long x = 128;\nunion extract_byte_val eb;\neb.long_val = htonl(x);\n</code></pre>\n\n<p>eb.bytes_val is now {0, 0, 0, 128}, since eb.long_val is bug-endian.</p>\n"}, {"comments": [{"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569363598, "post_id": 58088817, "comment_id": 102570897, "body": "Unfortunately that only works for big to little endian conversion."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569364044, "post_id": 58088817, "comment_id": 102571019, "body": "(and vice versa)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "edited": false, "score": 0, "creation_date": 1569367312, "post_id": 58088817, "comment_id": 102571762, "body": "@ArranCudbard-Bell: You can detect whether your implementation is big or little endian using portable C (which should optimize away):  access the bytes of a <code>const uint16_t testval = 0x0001</code>.  But I wouldn&#39;t count on optimizers turning this C back into a <code>bswap</code> or <code>movbe</code> instruction.  If you care about performance across compilers, you may need to use intrinsics."}], "tags": [], "owner": {"reputation": 345, "user_id": 9540037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MboFr.jpg?s=128&g=1", "display_name": "CharlesRA", "link": "https://stackoverflow.com/users/9540037/charlesra"}, "is_accepted": false, "score": 0, "last_activity_date": 1569363522, "creation_date": 1569363522, "answer_id": 58088817, "question_id": 58088643, "link": "https://stackoverflow.com/questions/58088643/efficient-big-endian-byte-array-to-native-integer-conversion-in-c/58088817#58088817", "title": "Efficient big endian byte array to native integer conversion in C", "body": "<p>I think you can do it like that</p>\n\n<pre><code>int swap_int(unsigned char *byte) {\nunsigned char temp;\n\ntemp = byte[3];\nbyte[3] = byte[0];\nbyte[0] = temp;\ntemp = byte[2];\nbyte[2] = byte[1];\nbyte[1] = temp;}\n</code></pre>\n"}], "owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "closed_date": 1569409671, "answer_count": 2, "score": 0, "last_activity_date": 1569364952, "creation_date": 1569362222, "last_edit_date": 1569364952, "question_id": 58088643, "link": "https://stackoverflow.com/questions/58088643/efficient-big-endian-byte-array-to-native-integer-conversion-in-c", "closed_reason": "Duplicate", "title": "Efficient big endian byte array to native integer conversion in C", "body": "<p>1) Are there any compiler builtins, or assembly instructions for x86, ARM or another architecture that will take a big endian byte array (2 bytes -> uint16_t, 4 bytes -> uint32_t, 8 bytes -> uint64_t) and convert it to an unsigned integer of native endianness (big, little, mixed) .</p>\n\n<p>2) Are there also any builtins or instructions to perform the inverse conversion (integer to big endian byte array).</p>\n\n<p>Naive native C functions would be:</p>\n\n<pre><code>static inline void put_be16(uint8_t a[static sizeof(uint16_t)], uint16_t val)\n{\n    a[0] = (val &gt;&gt; 8) &amp; 0xff;\n    a[1] = val &amp; 0xff;\n}\n\nstatic inline uint16_t get_be16(uint8_t const a[static sizeof(uint16_t)])\n{\n    return (a[0] &lt;&lt; 8) | a[1];\n}\n</code></pre>\n\n<p>These are for reading unsigned integers from inbound network packets, and encoding unsigned integers for use in outbound network packets.</p>\n\n<p>Solutions must prevent, or mitigate unaligned memory accesses.</p>\n\n<p>Edit: And looking to be efficient, so something that operates directly on the input/output buffer is what I'm really looking for.</p>\n"}, {"tags": ["c", "malloc", "strcat"], "comments": [{"owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 2, "creation_date": 1569362300, "post_id": 58088575, "comment_id": 102570561, "body": "The first argument of <code>strcat()</code> is the destination, but you&#39;ve given it a read-only character array of size 1. What is the intended behavior?"}, {"owner": {"reputation": 59, "user_id": 10634651, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k417wacNqZo/AAAAAAAAAAI/AAAAAAAAAA4/Lgi_EjTtS-U/photo.jpg?sz=128", "display_name": "C&#237;cero Augusto", "link": "https://stackoverflow.com/users/10634651/c%c3%adcero-augusto"}, "reply_to_user": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1569362971, "post_id": 58088575, "comment_id": 102570732, "body": "I can&#39;t believe I&#39;ve done this KKKKKKKKKKKKKKKKKKKKKKK thanks for the comment, helped a lot"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1569364442, "post_id": 58088575, "comment_id": 102571111, "body": "You don&#39;t <i>need</i> to use <code>malloc()</code>: you can allocate a char array of enough size, if you know &#39;enough&#39; in advance."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569365902, "post_id": 58088575, "comment_id": 102571448, "body": "You&#39;re better off using <code>fprintf()</code> here... <code>fprintf(novo_arquivo, &quot;\\&quot;%s\\&quot;\\n&quot;, string);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "is_accepted": true, "score": 2, "last_activity_date": 1569363254, "last_edit_date": 1569363254, "creation_date": 1569362813, "answer_id": 58088716, "question_id": 58088575, "link": "https://stackoverflow.com/questions/58088575/how-to-use-malloc-when-calling-strcat/58088716#58088716", "title": "How to use malloc when calling strcat()?", "body": "<p>A rough example of using <code>strcat()</code> with dynamic memory might look something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;  // for printf\n#include &lt;string.h&gt; // for strcat\n#include &lt;stdlib.h&gt; // for calloc\n\nint main()\n{\n    char* novo_arquivo = \"example_string\";\n    // size + 3 to account for two quotes and a null terminator\n    char* concat_string = calloc(strlen(novo_arquivo) + 3, sizeof(*concat_string));\n    strcat(concat_string, \"\\\"\");\n    strcat(concat_string, novo_arquivo);\n    strcat(concat_string, \"\\\"\");\n    // write concat_string to a file...\n    printf(\"%s\", concat_string);\n    free(concat_string);\n}\n</code></pre>\n\n<p>You're declaring <code>concat_string</code> on the heap instead of the stack, so you'll need to free it when you're finished using it, or you'll create a memory leak.</p>\n"}], "owner": {"reputation": 59, "user_id": 10634651, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k417wacNqZo/AAAAAAAAAAI/AAAAAAAAAA4/Lgi_EjTtS-U/photo.jpg?sz=128", "display_name": "C&#237;cero Augusto", "link": "https://stackoverflow.com/users/10634651/c%c3%adcero-augusto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58088716, "answer_count": 1, "score": 0, "last_activity_date": 1569364499, "creation_date": 1569361805, "last_edit_date": 1569364499, "question_id": 58088575, "link": "https://stackoverflow.com/questions/58088575/how-to-use-malloc-when-calling-strcat", "title": "How to use malloc when calling strcat()?", "body": "<p>I'm coding a small program to copy text information from a file, edit and save it to another one. When I try to execute the instruction</p>\n\n<pre><code>a=fputs( strcat( \"\\\"\", strcat(string, \"\\\",\\n\")), novo_arquivo);\n</code></pre>\n\n<p>it gives me the segmentation fault core dumped error. Researching, I found out that I must use malloc to allocate memory, but I don't know how this code should be written.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1569359935, "post_id": 58088256, "comment_id": 102569911, "body": "<code>encrypt</code> is a single integer.  How do you expect to store four integers into a slot design to fit a single integer?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1569361255, "post_id": 58088256, "comment_id": 102570274, "body": "you should use an <i>array</i>."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10534537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763337c6a6dd8c2e741bfe028e9c3f32?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Keffel", "link": "https://stackoverflow.com/users/10534537/cole-keffel"}, "edited": false, "score": 0, "creation_date": 1569368788, "post_id": 58088418, "comment_id": 102571997, "body": "Yeah, that solved it. Thank you for the help!"}], "tags": [], "owner": {"reputation": 56, "user_id": 10781232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bx1dcuGRADw/AAAAAAAAAAI/AAAAAAAAAAc/nJj4nN9fB2I/photo.jpg?sz=128", "display_name": "Mo&#39;men Ahmed", "link": "https://stackoverflow.com/users/10781232/momen-ahmed"}, "is_accepted": true, "score": 0, "last_activity_date": 1569360800, "creation_date": 1569360800, "answer_id": 58088418, "question_id": 58088256, "link": "https://stackoverflow.com/questions/58088256/beginner-encryption-program/58088418#58088418", "title": "Beginner encryption program", "body": "<p>You can't assign multiple values to the same variable, the mistake is in this line:</p>\n\n<pre><code>encrypt = (a += 7) % 10, (b +=7) % 10, (c +=7) % 10, (d +=7) % 10;\n</code></pre>\n\n<p>You should create another four variables for the encrypted values, like that:</p>\n\n<pre><code>int a, b, c, d, encrypt_a, encrypt_b, encrypt_c, encrypt_d;\nprintf(\"Enter integer 1:\\n\");\nscanf(\"%d\", &amp;a);\nprintf(\"Enter integer 2:\\n\");\nscanf(\"%d\", &amp;b);\nprintf(\"Enter integer 3:\\n\");\nscanf(\"%d\", &amp;c);\nprintf(\"Enter integer 4:\\n\");\nscanf(\"%d\", &amp;d);\n\nencrypt_a = (a += 7) % 10;\nencrypt_b = (b += 7) % 10;\nencrypt_c = (c += 7) % 10;\nencrypt_d = (d += 7) % 10;\n\nprintf(\"The encrypted value is: %d%d%d%d\\n\", encrypt_a, encrypt_b, encrypt_c, encrypt_d);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10534537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763337c6a6dd8c2e741bfe028e9c3f32?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Keffel", "link": "https://stackoverflow.com/users/10534537/cole-keffel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1569361207, "accepted_answer_id": 58088418, "answer_count": 1, "score": -2, "last_activity_date": 1569360800, "creation_date": 1569359798, "question_id": 58088256, "link": "https://stackoverflow.com/questions/58088256/beginner-encryption-program", "closed_reason": "Duplicate", "title": "Beginner encryption program", "body": "<p>Been trying to get the encryption to perform the operation and store the value for each of the 4 variables, and then print each of these 4 separate variables. Where am I going wrong? encrypt only wants to work on one of the calculations.</p>\n\n<pre><code>int main(void) {\n\n  int a, b, c, d, encrypt;\n\n  printf(\"Enter integer 1:\\n\");\n  scanf(\"%d\", &amp;a);\n  printf(\"Enter integer 2:\\n\");\n  scanf(\"%d\", &amp;b);\n  printf(\"Enter integer 3:\\n\");\n  scanf(\"%d\", &amp;c);\n  printf(\"Enter integer 4:\\n\");\n  scanf(\"%d\", &amp;d);\n\n  encrypt = (a += 7) % 10, (b +=7) % 10, (c +=7) % 10, (d +=7) % 10;\n\n  printf(\"The encrypted value is: %d%d%d%d\\n\", encrypt);\n  //scanf(\"%d\", &amp;encrypt);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27, "user_id": 9494899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1781636941881190/picture?type=large", "display_name": "J.J. Hays", "link": "https://stackoverflow.com/users/9494899/j-j-hays"}, "edited": false, "score": 0, "creation_date": 1569360205, "post_id": 58088254, "comment_id": 102569976, "body": "That is what I was thinking, but I&#39;m still a bit lost.  this is what I was given: &quot;\u2022\tIf the average score is 90% or more, the grade is A. \u2022\tIf the average score is 70% or more and less than 90%, check the third score.  If the third score is more than 90%, the grade is A; otherwise the grade is B. \u2022\tIf the average score is 50% or more and less than 70%, check the average of the second and third scores.  If the average of the two is greater than 70%, the grade is C; otherwise the grade is D. \u2022\tIf the average score is less than 50% then the grade is F.&quot;"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1569360245, "post_id": 58088254, "comment_id": 102569988, "body": "Post sample values for test1, test2, test3 which you expect to return C."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1569360279, "post_id": 58088254, "comment_id": 102569997, "body": "In that case, did you try stepping through the code with a debugger?"}, {"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 0, "creation_date": 1569360324, "post_id": 58088254, "comment_id": 102570006, "body": "A side note - you don&#39;t need the &quot;&amp;&amp; testAverage &lt;&quot; parts, they will always be true otherwise you wouldn&#39;t get to that check."}, {"owner": {"reputation": 27, "user_id": 9494899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1781636941881190/picture?type=large", "display_name": "J.J. Hays", "link": "https://stackoverflow.com/users/9494899/j-j-hays"}, "edited": false, "score": 0, "creation_date": 1569360326, "post_id": 58088254, "comment_id": 102570007, "body": "If the sample values were 70, 71, and 70, it should return C. However it always returns B. But, if I type 60, 61, and 60 I return value D; so at least that branch is right."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1569360356, "post_id": 58088254, "comment_id": 102570016, "body": "You can add <code>printf( &quot;testAverage = %lf, second3rdAverage = %lf\\n&quot;, testAverage, second3rdAverage );</code> after their calculation for diagnostic."}, {"owner": {"reputation": 27, "user_id": 9494899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1781636941881190/picture?type=large", "display_name": "J.J. Hays", "link": "https://stackoverflow.com/users/9494899/j-j-hays"}, "edited": false, "score": 0, "creation_date": 1569360463, "post_id": 58088254, "comment_id": 102570043, "body": "With sample values 70, 71, and 70; second3rdAverage = 70.5, so I would think it should return value C."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1569360530, "post_id": 58088254, "comment_id": 102570064, "body": "@J.J.Hays With 70, 71, 70 the value of <code>testAverage</code> is 70.3333 and you cannot pass <code>testAverage &lt; 70</code> condition."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1569360557, "post_id": 58088254, "comment_id": 102570071, "body": "@J.J.Hays &quot;<i>With sample values 70, 71, and 70; second3rdAverage = 70.5, so I would think it should return value C.</i>&quot; But, what is the value of <code>testAverage</code>? Since, the value of it drives the outer <code>if</code>s."}, {"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 1, "creation_date": 1569360682, "post_id": 58088254, "comment_id": 102570110, "body": "try with 50 70 and 75, it should give the C"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1569360692, "post_id": 58088254, "comment_id": 102570113, "body": "You only use <code>second3rdAverage</code> when <code>testAverage</code> is between 50 and 70. It doesn&#39;t matter when <code>testAverage = 70.333</code>"}, {"owner": {"reputation": 27, "user_id": 9494899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1781636941881190/picture?type=large", "display_name": "J.J. Hays", "link": "https://stackoverflow.com/users/9494899/j-j-hays"}, "reply_to_user": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1569360851, "post_id": 58088254, "comment_id": 102570160, "body": "The value of testAverage is 70.3333, as @i486 said this would not pass. I have edited the code and can now get value &quot;C&quot; for test scores 30, 70, and 70. However, this doesn&#39;t really make sense as if you had 3 test scores of 30 70 and 70, the grade average would be a D and not a C. Perhaps the instructions for the assignment are confusing, or I am confused. Not sure which at this point."}, {"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 0, "creation_date": 1569360861, "post_id": 58088254, "comment_id": 102570165, "body": "You should have an &quot;else&quot; before the &quot;if (testAverage &lt;= 50)&quot; otherwise you set userGrade twice when testAverage == 50."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569456968, "post_id": 58088254, "comment_id": 102606359, "body": "OT:  nothing in the header file: <code>math.h</code> is being used by the OPs program.  It is a very poor programming practice to include header files those contents are not being used."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9494899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1781636941881190/picture?type=large", "display_name": "J.J. Hays", "link": "https://stackoverflow.com/users/9494899/j-j-hays"}, "edited": false, "score": 0, "creation_date": 1569362402, "post_id": 58088529, "comment_id": 102570590, "body": "Yes, this was the error. I thought I was wrong, but it turned out I was right. Solved, thanks for the clarification."}], "tags": [], "owner": {"reputation": 124, "user_id": 3257135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e7465a49172ad9999cec25450837cd0?s=128&d=identicon&r=PG&f=1", "display_name": "cnh003", "link": "https://stackoverflow.com/users/3257135/cnh003"}, "is_accepted": true, "score": 2, "last_activity_date": 1569361496, "creation_date": 1569361496, "answer_id": 58088529, "question_id": 58088254, "link": "https://stackoverflow.com/questions/58088254/c-grading-program-not-returning-c-for-grading-program/58088529#58088529", "title": "C Grading Program: Not Returning &#39;C&#39; for Grading Program", "body": "<p>Your algorithm is correct. The task you indicated in the comments</p>\n\n<blockquote>\n  <ul>\n  <li>If the average score is 90% or more, the grade is A.</li>\n  <li>If the average score is 70% or more and less than 90%, check the third score.\n  \n  <ul>\n  <li>If the third score is more than 90%, the grade is A; otherwise the grade is B.</li>\n  </ul></li>\n  <li>If the average score is 50% or more and less than 70%, check the average of the second and third scores.\n  \n  <ul>\n  <li>If the average of the two is greater than 70%, the grade is C; otherwise the grade is D.</li>\n  </ul></li>\n  <li>If the average score is less than 50% then the grade is F.</li>\n  </ul>\n</blockquote>\n\n<p>means, that a C is only awarded if your overall score is below 70%. I guess, your assumption was, that the task at hand has something to do with real grading - which is not the case.</p>\n"}], "owner": {"reputation": 27, "user_id": 9494899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1781636941881190/picture?type=large", "display_name": "J.J. Hays", "link": "https://stackoverflow.com/users/9494899/j-j-hays"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58088529, "answer_count": 1, "score": 0, "last_activity_date": 1569361496, "creation_date": 1569359791, "last_edit_date": 1569360555, "question_id": 58088254, "link": "https://stackoverflow.com/questions/58088254/c-grading-program-not-returning-c-for-grading-program", "title": "C Grading Program: Not Returning &#39;C&#39; for Grading Program", "body": "<p>I am unsure what's wrong with my program at the moment. I can get correct values for A, B, D, F; but it does not return value C when the grade is between 70 and 80.</p>\n\n<p>I understand that I went around this program a weird way, that is due to how the professor has set up the assignment. I was able to get C with simple if statements. I believe the problem has to do with how my else (userGrade B) is set up. </p>\n\n<pre><code>/* Jon Hays\n   Assignment 3B Due 9/25/19\n   \"Grade Calculator\"\n   This program calculates the average grade (%)\n   out of three test scores and converts it to a character\n   (A, B, C, D, F)*/\n\n#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    double test1;\n    double test2;\n    double test3;\n    char userGrade;\n\n    printf(\"Please input three test scores:\");\n    scanf(\"%lf %lf %lf\", &amp;test1, &amp;test2, &amp;test3);\n\n    double testAverage = (test1 + test2 + test3) / 3;\n    double second3rdAverage = (test2 + test3) / 2;\n\n    if (testAverage &gt;= 90)\n        userGrade = 'A';\n    else if (testAverage &gt;= 70 &amp;&amp; testAverage &lt; 90)\n    {\n        if (test3 &gt; 90) \n            userGrade = 'A';\n        else \n            userGrade = 'B';\n    }\n    else if (testAverage &gt;= 50 &amp;&amp; testAverage &lt; 70)\n    {\n        if (second3rdAverage &gt;= 70)\n            userGrade = 'C';\n        else\n            userGrade = 'D';\n    }\n    if (testAverage &lt;= 50)\n        userGrade = 'F';\n\n    printf(\"%c\", userGrade);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1569359220, "post_id": 58088136, "comment_id": 102569696, "body": "<code>*matrix[k,l]</code> -&gt; <code>matrix[k][l]</code>. Bonus: <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">Comma operator</a>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1569359278, "post_id": 58088136, "comment_id": 102569709, "body": "@EugeneSh. Don&#39;t forget the star at the beginning of the &quot;before&quot; to make it clear it doesn&#39;t belong in the &quot;after&quot;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1569359324, "post_id": 58088136, "comment_id": 102569732, "body": "@ChristianGibbons You are right"}, {"owner": {"reputation": 412, "user_id": 11634312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c038cd121c406e2c98b5e4d415d95ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Kipr", "link": "https://stackoverflow.com/users/11634312/kipr"}, "edited": false, "score": 0, "creation_date": 1569359468, "post_id": 58088136, "comment_id": 102569770, "body": "Thanks a lot guys"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1569359586, "post_id": 58088136, "comment_id": 102569807, "body": "Note that <code>*matrix[k,l]</code> is the same as <code>matrix[l][0]</code>, which is why each output row you printed was <code>0 1 2 3 4</code> - the value of the 0th elements of the individual rows. (OK, not quite, but the explanation is a bit much for a comment...)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1569359643, "post_id": 58088136, "comment_id": 102569820, "body": "@AndrewHenle Maybe this question deserves an answer after all..."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569359717, "post_id": 58088136, "comment_id": 102569842, "body": "@EugeneSh. Go ahead.  I&#39;m not sure I could explain it in a way that&#39;s easily understood."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1569359784, "post_id": 58088136, "comment_id": 102569867, "body": "Not me, got to AFK.. Anyway already VTCed as typo :)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1569359869, "post_id": 58088136, "comment_id": 102569894, "body": "Well, this is related:  <a href=\"https://stackoverflow.com/questions/1083488/dereferencing-pointer-to-integer-array\" title=\"dereferencing pointer to integer array\">stackoverflow.com/questions/1083488/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 412, "user_id": 11634312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c038cd121c406e2c98b5e4d415d95ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Kipr", "link": "https://stackoverflow.com/users/11634312/kipr"}, "edited": false, "score": 0, "creation_date": 1569400974, "post_id": 58088365, "comment_id": 102581219, "body": "Indeed, I was confused by the fact that no warning was coming from the compiler about the comma syntax (that is valid in some languages). I thought it was some kind of Pythonic copy error and that the first row was replicated throughout the whole matrix. Thanks"}], "tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": true, "score": 0, "last_activity_date": 1569360471, "creation_date": 1569360471, "answer_id": 58088365, "question_id": 58088136, "link": "https://stackoverflow.com/questions/58088136/matrix-contamination-in-c/58088365#58088365", "title": "Matrix contamination in C", "body": "<p>What you meant to do was <code>matrix[k][l]</code> to address the row and column of the matrix.</p>\n\n<p>Instead, what you have, <code>*matrix[k,l]</code>.  What is happening here is the comma operator is being used in the expression to index the array.  The result of the expression is equal to that of the right-side of the comma operator, so effectively what you have is <code>*matrix[l]</code>.  <code>matrix[l]</code>, using only one index for a two dimensional array, points you to the <code>l</code>th row of the array, so it is essentially of type <code>int[5]</code>.  Then when you dereference it with the asterisk, you are grabbing the contents of the first element of that row.</p>\n"}], "owner": {"reputation": 412, "user_id": 11634312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c038cd121c406e2c98b5e4d415d95ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Kipr", "link": "https://stackoverflow.com/users/11634312/kipr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1569362290, "accepted_answer_id": 58088365, "answer_count": 1, "score": 0, "last_activity_date": 1569360471, "creation_date": 1569359121, "question_id": 58088136, "link": "https://stackoverflow.com/questions/58088136/matrix-contamination-in-c", "closed_reason": "Not suitable for this site", "title": "Matrix contamination in C", "body": "<p>I am new to C and I don't understand why I am not able to easily populate a 2d array.</p>\n\n<p>Here is my code: one function populates the matrix and the other displays it.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint matrix[5][5];\nint size = 5;\n\nvoid fill_matrix() {\n    for(int k=0; k&lt;size; k++) {\n        for(int l=0; l&lt;size; l++) {\n            matrix[k][l] = k + l;\n        }\n    }\n}\n\nvoid print_matrix() {\n    for(int k=0; k&lt;size; k++) {\n        for(int l=0; l&lt;size; l++) {\n            printf(\"%d \", *matrix[k,l]);\n        }\n        printf(\"\\n\");\n    }\n}\n\nint main() {\n    fill_matrix();\n    print_matrix();\n}\n</code></pre>\n\n<p>And the result is this</p>\n\n<pre><code>0 1 2 3 4 \n0 1 2 3 4 \n0 1 2 3 4 \n0 1 2 3 4 \n0 1 2 3 4 \n</code></pre>\n\n<p>Instead of this</p>\n\n<pre><code>0 1 2 3 4 \n1 2 3 4 5 \n2 3 4 5 6 \n3 4 5 6 7 \n4 5 6 7 8 \n</code></pre>\n\n<p>I know that the answer is probably extremely simple, but I was't able to find a solution after few hours so here I am.</p>\n"}, {"tags": ["c", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 5, "last_activity_date": 1569358311, "creation_date": 1569358311, "answer_id": 58087967, "question_id": 58087929, "link": "https://stackoverflow.com/questions/58087929/incompatible-pointer-types-passing-void-void-to-parameter-of-type-void/58087967#58087967", "title": "incompatible pointer types passing &#39;void (void *) to parameter of type &#39;void *", "body": "<p><code>pthread_create()</code> expects a pointer to a function that takes a <code>void*</code> as input and returns a <code>void*</code> as output, but your function returns a <code>void</code> instead.  You just need to add a <code>*</code> to the return type, and add a <code>return</code> statement, eg:</p>\n\n<pre><code>void* function1(void *s) {\n    start = *(int *)s;\n    return NULL; // &lt;-- or whatever you want\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 7218537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f80eda6fd135d9b15246e8e2bee4b4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Aishwarya Radhakrishnan", "link": "https://stackoverflow.com/users/7218537/aishwarya-radhakrishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1484, "favorite_count": 0, "accepted_answer_id": 58087967, "answer_count": 1, "score": 0, "last_activity_date": 1569369864, "creation_date": 1569358121, "last_edit_date": 1569369864, "question_id": 58087929, "link": "https://stackoverflow.com/questions/58087929/incompatible-pointer-types-passing-void-void-to-parameter-of-type-void", "title": "incompatible pointer types passing &#39;void (void *) to parameter of type &#39;void *", "body": "<p>I have created pthread as follows:</p>\n\n<pre><code>void function1(void *s) {\nstart = (*(int *)s ;\n}\n\npthread_t threads[numthreads];\nint ids[numthreads];\nfor (i = 0; i &lt; numthreads; i++) {\n    ids[i] = i;\n    int * p = &amp;ids[i] ;\n    pthread_create(&amp;threads[i], NULL, function1, (void *)p);\n}\n\n</code></pre>\n\n<p>But this is giving me error:</p>\n\n<pre><code>&gt;&gt; mpicc -o hprogram hprogram.c\nwarning: incompatible pointer types passing 'void (void *)' to\n      parameter of type 'void * _Nullable (* _Nonnull)(void * _Nullable)'\n      [-Wincompatible-pointer-types]\n                        pthread_create(&amp;threads[i], NULL, function1, (void *)...\n                                                          ^~~~~~~~~~\n/usr/include/pthread.h:328:31: note: passing argument to parameter here\n                void * _Nullable (* _Nonnull)(void * _Nullable),\n                                            ^\n1 warning generated.\n\n\n</code></pre>\n\n<p>This is an mpi program and im creating a hybrid mpi using pthreads.</p>\n"}, {"tags": ["c++", "c", "wrapper"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1569356556, "post_id": 58087588, "comment_id": 102568729, "body": "How would the C API expose <code>A</code> in the first place?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1569357002, "post_id": 58087588, "comment_id": 102568895, "body": "If you have <code>A</code>, <code>B</code> and <code>C</code> as structs and then have some function like <code>void B_DoSomething(struct A *param1)</code> and <code>struct A C_SetSomething(int value)</code>. Is this what you want?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1569357688, "post_id": 58087588, "comment_id": 102569152, "body": "The C language doesn&#39;t have accessibility in its structures (e.g. <code>public</code> or <code>private</code>).  Also, if you want functions inside C structures, you&#39;ll have to use function pointers."}, {"owner": {"reputation": 1138, "user_id": 4221945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd64e16069e10f662f0eb2629f262f6?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique Lorre", "link": "https://stackoverflow.com/users/4221945/dominique-lorre"}, "edited": false, "score": 0, "creation_date": 1569360216, "post_id": 58087588, "comment_id": 102569980, "body": "It&#39;s doable because there are compilers that convert from C++ to C. They use the object as parameter, for example object.DoSomething(param) becomes  DoSomething(object, param);, each method is renamed according to its signature (the type of its arguments and return value)"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1569357969, "creation_date": 1569357969, "answer_id": 58087899, "question_id": 58087588, "link": "https://stackoverflow.com/questions/58087588/how-to-wrap-c-class-method-having-a-parameter-or-returning-an-instance-of-anot/58087899#58087899", "title": "How to wrap C++ class method having a parameter or returning an instance of another C++ class in C?", "body": "<p>I suggest converting <code>struct B</code> and <code>struct C</code> into functions, since they have no members:  </p>\n\n<pre><code>void B_DoSomething(A * p_param)\n{\n  //...\n}\n\nA C_SetSomething(int value)\n{\n  A variable;\n  variable.value = value;\n  return variable;\n}\n</code></pre>\n\n<p>As a reminder, you should prefer to pass structures by pointer in the C language.  Otherwise the compiler will generate copies (except when the compiler can optimize).</p>\n"}, {"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1569359626, "last_edit_date": 1569359626, "creation_date": 1569358968, "answer_id": 58088111, "question_id": 58087588, "link": "https://stackoverflow.com/questions/58087588/how-to-wrap-c-class-method-having-a-parameter-or-returning-an-instance-of-anot/58088111#58088111", "title": "How to wrap C++ class method having a parameter or returning an instance of another C++ class in C?", "body": "<p>In almost all cases, you <em>cannot</em>.</p>\n\n<p>Only if the <code>struct</code> is a POD, which means that it is a trivial &amp; standard-layout type and that has no non-static members that are non-POD themselves.</p>\n\n<p>This means, basically, that you can only use structs that are blobs of data without extra behavior and that C \"understands\" equally as C++.</p>\n\n<p>The reason is simple: C has no idea of C++ semantics. For instance, if your class has a destructor, who is going to run it? Or, if your class runs some code when copied, how can C know about it?</p>\n\n<p>You have two options:</p>\n\n<ul>\n<li><p>Share only those types. If you are unsure whether something is a POD or not, assert it (in C++):</p>\n\n<pre><code>static_assert(std::is_pod_v&lt;T&gt;);\n</code></pre></li>\n<li><p>Keep your classes, but pass opaque pointers to C. Since you are passing just pointers, C won't do anything with them.</p></li>\n</ul>\n\n<p>Note that your example classes <code>B</code> and <code>C</code> are <em>not</em> PODs, so you cannot do it for those.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 6736299, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207157222592949/picture?type=large", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/6736299/ladislav"}, "edited": false, "score": 0, "creation_date": 1569394585, "post_id": 58089023, "comment_id": 102577993, "body": "Thank you @Thomas ! This is what I want."}], "tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1569439505, "last_edit_date": 1569439505, "creation_date": 1569365244, "answer_id": 58089023, "question_id": 58087588, "link": "https://stackoverflow.com/questions/58087588/how-to-wrap-c-class-method-having-a-parameter-or-returning-an-instance-of-anot/58089023#58089023", "title": "How to wrap C++ class method having a parameter or returning an instance of another C++ class in C?", "body": "<p>The generic way is to create a wrapper for each C++ class and a method to generate pointers to those wrappers and another to delete them.</p>\n\n<pre><code>extern \"C\" {\n\nstruct WA{\n    void* self;\n};\n\nstruct WA* new_A( int p1 ){\n    WA* wa = new WA;\n    wa-&gt;self = new A( p1 );\n    return wa; \n}\n\nvoid delete_A( WA* wa ){\n    delete static_cast&lt;A*&gt;( wa-&gt;self );\n    delete wa;\n}\n\n}\n</code></pre>\n\n<p>Then you transform each method of each class into a function taking a pointer the struct as the first argument. <code>A::getValue</code> becomes</p>\n\n<pre><code>int A_getValue( WA* wa) {\n    return static_cast&lt;A*&gt;( wa-&gt;self )-&gt;getValue();\n}\n</code></pre>\n\n<p>Instances can be passed in via pointer, so <code>B::DoSomething</code> becomes</p>\n\n<pre><code>void B_DoSomething( WB *wb, WA *param1){\n    static_cast&lt;B*&gt;( wb-&gt;self )-&gt;DoSomething( *static_cast&lt;A*&gt;( param1-&gt;self ) );\n}\n</code></pre>\n\n<p>Likewise you can return instances by pointer. <code>C::SetSomething</code> then becomes</p>\n\n<pre><code>struct WA* C_SetSomething( WC* wc, int value ){\n    A a = static_cast&lt;C*&gt;( wc-&gt;self )-&gt;SetSomething( value );\n    return new_A( a.getValue() );\n}\n</code></pre>\n\n<p>You will need to be very careful with your memory management in the C code. See working example <a href=\"http://coliru.stacked-crooked.com/a/07a6cb797c596530\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 125, "user_id": 6736299, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207157222592949/picture?type=large", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/6736299/ladislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 58089023, "answer_count": 3, "score": 4, "last_activity_date": 1569439505, "creation_date": 1569356452, "last_edit_date": 1569359607, "question_id": 58087588, "link": "https://stackoverflow.com/questions/58087588/how-to-wrap-c-class-method-having-a-parameter-or-returning-an-instance-of-anot", "title": "How to wrap C++ class method having a parameter or returning an instance of another C++ class in C?", "body": "<p>I have a C++ class <code>A</code> having methods while some of them using an instance of another C++ class <code>B</code> as parameter and some are returning an instance of another C++ class <code>C</code>. How to correctly wrap in C language the class <code>A</code> and all of its methods?</p>\n\n<p>I don't think that my question is a duplicate, since all the existing examples are showing C wrapper (header and source) for a simple C++ class with methods having parameters or return values of simple data type, like <code>int</code>, <code>char*</code>, etc.</p>\n\n<pre><code>class A {\n  public:\n    A(int param1);\n    int getValue();\n  private:\n    int value;\n}\n\n// method B::DoSomething() has a parameter of type (class) \"A\"\nclass B {\n  public:\n    void DoSomething(A param1);\n}\n\n// method C::SetSomething() returns an instance of class \"A\"\nclass C {\n  public:\n    A SetSomething(int value);\n}\n</code></pre>\n\n<p>I know how to write C-language wrapper for class <code>A</code> and its method: using the <code>extern \"C\" { ... }</code> construct.</p>\n\n<p>But how to do it for classes <code>B</code> and <code>C</code> and their methods?</p>\n"}, {"tags": ["c", "timer", "embedded", "stm8"], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1569359149, "creation_date": 1569359149, "answer_id": 58088141, "question_id": 58087436, "link": "https://stackoverflow.com/questions/58087436/i-need-to-know-why-my-interrupts-are-not-working-here/58088141#58088141", "title": "I need to know why my interrupts are not working here", "body": "<ul>\n<li><p>You are using magic numbers for the bit masks instead of defined constants, so the code is pretty damn hard to read for you and me both. Change this so that the code ends up like for example </p>\n\n<p><code>TIM1_SR1 &amp;= ~TIM1_SR1_UIF;</code></p></li>\n<li><p>Since this is a 8 bit MCU it is also absolutely essential that you <code>u</code> suffix all integer contants, or they will be of type signed <code>int</code>, which you don't want.</p>\n\n<p>For example this code <code>TIM1_SR1 &amp;= ~(0x01);</code> is equivalent to <code>TIM1_SR1 &amp;= -2</code>. Very easy to write accidental subtle bugs this way. I recommend studying <a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">Implicit type promotion rules</a>. </p>\n\n<p>It is highly recommended to disassemble every ISR you write to see what machine code you actually end up with, and single step it through the debugger while watching the register as well. This particular register seems to ignore having 1 written to it, so you could probably just do <code>TIM1_SR = TIM1_SR1_UIF;</code>. Incorrectly cleared timer flags inside ISRs is one of the most common bugs in embedded systems.</p></li>\n<li><p>Quoting the manual:</p>\n\n<blockquote>\n  <p>UIF: Update interrupt flag<br>\n  \u2013 At overflow or underflow if UDIS = 0 in the TIM1_CR1 register<br>\n  \u2013 When CNT is re-initialized by software using the UG bit in TIM1_EGR register, if URS = 0 and UDIS = 0 in the TIM1_CR1 register.<br>\n  \u2013 When CNT is re-initialized by a trigger event (refer to the TIM1_SMCR register description), if URS = 0 and UDIS = 0 in the TIM1_CR1 register</p>\n</blockquote>\n\n<p>Your code doesn't appear to do any of this, so it is pretty safe to assume the timer counter isn't reset.</p></li>\n<li><p>Another problem is that <code>count</code> must be declared as <code>volatile</code> or otherwise the compiler might optimize out this code completely:</p>\n\n<pre><code>if (count == 1000)\n{\n    PE_ODR ^= 0x80;\n    count = 0;\n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 11985924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f41864a00bdb61af62fd75142e6ddb5?s=128&d=identicon&r=PG&f=1", "display_name": "Viswa5095", "link": "https://stackoverflow.com/users/11985924/viswa5095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569405845, "creation_date": 1569355517, "last_edit_date": 1569405845, "question_id": 58087436, "link": "https://stackoverflow.com/questions/58087436/i-need-to-know-why-my-interrupts-are-not-working-here", "title": "I need to know why my interrupts are not working here", "body": "<p>I am using stm8l - discovery and i have created a code for toggling a led for every 1 second using timer (TIM1) but this is not working properly. I am missing something here in my configuration</p>\n\n<p>I could enter the interrupt function for the first time but after that it does not enter the interrupt function. Someone please look into and help me out</p>\n\n<pre><code>enter code here\n#include &lt;iostm8l.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"defs.h\"\n\nunsigned int count = 0;\n\n@svlreg @interrupt void TIM1(void)\n{\ncount += 1;\nTIM1_SR1 &amp;= ~(0x01);\n}\n\nmain()\n{\nCLK_DIVR = 0x00; // Set the frequency to 16Mhz\nCLK_PCKENR2 = 0x02; // clock for timer1\nPC_DDR = 0x80; // direction output for led\nPC_CR1 = 0x80; // fast push pull mode\nPE_DDR = 0x80; // direction output for led\nPE_CR1 = 0x80; // fast push pull mode\nTIM1_PSCRH = 0x3e; //to create a frequency for 1000 hz\nTIM1_PSCRL = 0x80; // so prescalar is 16000\nTIM1_CR1 = 0x01;\nTIM1_IER = 0x01;\n_asm(\"rim\\n\");\nwhile(1)\n{\n\n    if (count == 1000)\n    {\n        PE_ODR ^= 0x80;\n        count = 0;\n    }\n}\n}\n</code></pre>\n\n<p>The interrupt enters only one time but after that it does not enter. So variable \"count\" remains at value 1</p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1569354631, "post_id": 58087251, "comment_id": 102568099, "body": "You need to initialize the RNG with <code>srand()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1569355371, "post_id": 58087331, "comment_id": 102568347, "body": "Note that <code>srand(time(NULL));</code> can be a very bad way to seed <code>rand()</code> for any process that&#39;s expected to be started rapidly more than once - multiple processes will wind up with the same &quot;random&quot; data from <code>rand()</code>."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1569354895, "creation_date": 1569354895, "answer_id": 58087331, "question_id": 58087251, "link": "https://stackoverflow.com/questions/58087251/need-help-implementing-total-random-characters-in-c/58087331#58087331", "title": "Need help implementing total random characters in C", "body": "<p>Just add</p>\n\n<pre><code>srand(time(NULL));\n</code></pre>\n\n<p>after</p>\n\n<pre><code>int main()\n{\n</code></pre>\n\n<p>That will initialize the random generate with a new seed every time you run the program. In this way, you'll get a new random sequence every time.</p>\n"}], "owner": {"reputation": 21, "user_id": 12115269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c980cba7424ca98a1e7cccd22ee14d8e?s=128&d=identicon&r=PG&f=1", "display_name": "dantheDude", "link": "https://stackoverflow.com/users/12115269/danthedude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1569356926, "answer_count": 1, "score": 0, "last_activity_date": 1569354895, "creation_date": 1569354504, "question_id": 58087251, "link": "https://stackoverflow.com/questions/58087251/need-help-implementing-total-random-characters-in-c", "closed_reason": "Duplicate", "title": "Need help implementing total random characters in C", "body": "<p>I am creating a program that prints out 1000 random occurrences of the letters \"H\" and \"T\" and my code implements rand()%2 but as i can see from running this program (code below) that its not completely random (the letters are random but always the same with every execution). I want to establish a more effective way by implementing RANDMAX to make every case of the program running completely random, how would I be able to do this? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n  int i=1,n;\n  char ch ;\n    for( i = 1; i &lt;= 1000 ; i ++ )\n    {\n     n = rand()%2;\n     if(n==0)\n       ch = 'T';\n     else\n       ch = 'H';\n       putchar(ch);\n     }\n      return 0;\n  }\n</code></pre>\n"}, {"tags": ["c", "c11", "thread-local-storage", "thread-specific-storage"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1569354934, "post_id": 58087228, "comment_id": 102568204, "body": "Given both concepts are largely lifted in their entirety from POSIX/pthreads, I suspect the answer is basically the same as <a href=\"https://stackoverflow.com/q/21015738/364696\">Thread Specific Data vs Thread Local Storage</a>."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1569354941, "post_id": 58087228, "comment_id": 102568207, "body": "Need OS tag to proceed"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 1, "creation_date": 1569355028, "post_id": 58087228, "comment_id": 102568247, "body": "@Joshua: The internals might differ by OS, but the API is part of the C11 standard. The OS shouldn&#39;t matter for which approach makes sense for the purposes of features."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1569355090, "post_id": 58087228, "comment_id": 102568266, "body": "@ShadowRanger: The answers on your proposed potential duplicate say otherwise (signal handlers)."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1569355671, "post_id": 58087228, "comment_id": 102568429, "body": "@Joshua: Signal handler functions have similar limitations regarding <code>malloc</code> and the like on all OSes. The old question isn&#39;t a duplicate since most of the answers are commenting on portability (which should be identical, assuming C11 with threading support; the thread feature is all or none), but the gist of it (<code>thread_local</code> is more convenient/reliable/lightweight, TSS is slightly more flexible since it can be dynamically created at runtime) remains similar."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1569358869, "post_id": 58087228, "comment_id": 102569559, "body": "When you use thread_local then the compiler will take care of the tss_create/get/set calls for you.  But they have to provide the backdoor as well, the standard doesn&#39;t deal with dynamically loadable modules for example.  The odds that you <i>have</i> to use the backdoor ought to be low in a compiler that survived the Darwin selection."}], "answers": [{"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": true, "score": 2, "last_activity_date": 1569357645, "creation_date": 1569357645, "answer_id": 58087826, "question_id": 58087228, "link": "https://stackoverflow.com/questions/58087228/difference-between-thread-local-storage-and-thread-specific-storage/58087826#58087826", "title": "Difference between &quot;thread local storage&quot; and &quot;thread specific storage&quot;", "body": "<p>Functionally, the important difference is the establishment of a destructor. In your example this is <code>free</code>, but in fact it could be any function with the right signature.</p>\n\n<p>So this gives the possibility for a callback at the end of any thread for doing any kind of cleanup.</p>\n"}], "owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 58087826, "answer_count": 1, "score": 3, "last_activity_date": 1569357969, "creation_date": 1569354342, "last_edit_date": 1569357969, "question_id": 58087228, "link": "https://stackoverflow.com/questions/58087228/difference-between-thread-local-storage-and-thread-specific-storage", "title": "Difference between &quot;thread local storage&quot; and &quot;thread specific storage&quot;", "body": "<p>What is the difference between declaring a thread-local variable using the dedicated keyword:</p>\n\n<pre><code>_Thread_local int var;\n</code></pre>\n\n<p>And using the specific <code>tss_</code> set of functions:</p>\n\n<pre><code>tss_t key;\ntss_create(&amp;key, free);\ntss_set(key, malloc(sizeof(int)));\nint* pVar = tss_get(key);\n</code></pre>\n\n<p>From what I understand, the <code>_Thread_local</code> keyword declares a variable with thread storage duration, while the <code>tss_</code> set of functions return a key to the calling thread. This key can then be used to access some global heap memory which can be allocated as needed, and that pointer will only be available to that thread, am I right?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1569354039, "post_id": 58087140, "comment_id": 102567921, "body": "You need to declare <code>char result[30][4]</code> to allow room for the trailing null in <code>&quot;Yes&quot;</code>"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1569354043, "post_id": 58087140, "comment_id": 102567924, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips on debugging your code."}, {"owner": {"reputation": 38, "user_id": 6389970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca89cc60babdd7ddf0f9153b1fdfd1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Harish Rajora", "link": "https://stackoverflow.com/users/6389970/harish-rajora"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569354235, "post_id": 58087140, "comment_id": 102567986, "body": "I would be happy to know if there is a way to reduce the time complexity of this code in any way? @bar"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569355762, "post_id": 58087140, "comment_id": 102568455, "body": "For that we need to know what the problem is, which you said is not important."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569447280, "post_id": 58087140, "comment_id": 102604309, "body": "regarding; <code>strcpy(result[i], &quot;Yes&quot;);</code>  This takes 4 characters, 3 for the word &#39;Yes&#39; and 1 for the terminating NUL character"}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 11010317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99058d7a96627e745cd50fc03fd27e05?s=128&d=identicon&r=PG&f=1", "display_name": "zhf061", "link": "https://stackoverflow.com/users/11010317/zhf061"}, "is_accepted": false, "score": 1, "last_activity_date": 1569381557, "last_edit_date": 1592644375, "creation_date": 1569381557, "answer_id": 58090699, "question_id": 58087140, "link": "https://stackoverflow.com/questions/58087140/more-output-than-desired-in-an-array-of-string/58090699#58090699", "title": "More output than desired in an array of string", "body": "<p>Add a <code>\\n</code> when you <code>printf</code> a <code>result[i]</code>, then you'll find that you actually output 2 strings. For example\uff0c if you first <code>strcpy(result[0], &quot;Yes&quot;)</code> and then <code>strcpy(result[0], &quot;No&quot;)</code>, you'll get the outputs like this:</p>\n<blockquote>\n<p>YesNo</p>\n<p>No</p>\n</blockquote>\n<p>In fact, the storage of <code>result</code> is as follows:</p>\n<blockquote>\n<p>result[0]: ['Y']['e']['s']</p>\n<p>result[1]: ['N']['o']['\\0']</p>\n</blockquote>\n<p>You get &quot;YesNo&quot; when you output <code>result[0]</code>, since a two-dimensional array is stored contiguously in the memory and a string ends with <code>\\0</code>.</p>\n<p>As another example, if you <code>strcpy(result[0], &quot;Hello&quot;)</code>, then when you output <code>result[0]</code>, you'll get</p>\n<blockquote>\n<p>Hello</p>\n</blockquote>\n<p>and when you output <code>result[1]</code>, you'll get</p>\n<blockquote>\n<p>lo</p>\n</blockquote>\n<p>Since the storage in <code>result</code> is as follows:</p>\n<blockquote>\n<p>result[0]: ['H']['e']['l']</p>\n<p>result[1]: ['l']['o']['\\0']</p>\n</blockquote>\n"}], "owner": {"reputation": 38, "user_id": 6389970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca89cc60babdd7ddf0f9153b1fdfd1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Harish Rajora", "link": "https://stackoverflow.com/users/6389970/harish-rajora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569381557, "creation_date": 1569353912, "question_id": 58087140, "link": "https://stackoverflow.com/questions/58087140/more-output-than-desired-in-an-array-of-string", "title": "More output than desired in an array of string", "body": "<p>I am trying to solve a problem. You can ignore the problem in the code. My doubt is that if I am taking the value of t as 2, still the array outputs 3 strings although I am running the loop only t times for output.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main(void){\n  int t;\n  int i;\n  int j;\n  int n;\n  int c;\n  int temp;\n  char result[30][3];\n  int flag;\n  scanf(\"%d\", &amp;t);\n  for(i = 0; i &lt; t; i++){\n    flag = 0;\n    scanf(\"%d\", &amp;n);\n    scanf(\"%d\", &amp;c);\n    for(j = 0; j &lt; n; j++){\n      scanf(\"%d\", &amp;temp);\n      if(c &gt; temp){\n      c = c - temp;\n    } else{\n      flag = 1;\n    }\n    }\n    if(flag == 0){\n      strcpy(result[i], \"Yes\");\n    } else{\n      strcpy(result[i], \"No\");\n    }\n  }\n\n  for(i = 0; i &lt; t; i++){\n    printf(\"%s\", result[i]);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "file", "graph", "buffer", "dot"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1569354154, "post_id": 58087123, "comment_id": 102567958, "body": "If <code>fget()</code> returns a string that&#39;s equal to <code>&quot;\\n&quot;</code> then you read an empty line."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569354445, "post_id": 58087123, "comment_id": 102568046, "body": "@Barmar is correct. The alternative is to <code>getc</code> then if the next char isn&#39;t another newline, put it back with <code>ungetc</code>."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1575935817, "last_edit_date": 1575935817, "creation_date": 1569383892, "answer_id": 58090960, "question_id": 58087123, "link": "https://stackoverflow.com/questions/58087123/how-to-identify-a-double-n-n-with-fgets-read-fread/58090960#58090960", "title": "How to identify a double \\n\\n with fgets/read/fread", "body": "<blockquote>\n  <p>How to identify a double \\n\\n ...</p>\n</blockquote>\n\n<p>The prior line ended with a <code>'\\n'</code>.  With <code>fgets()</code>, test if <code>buffer[0] == '\\n'</code> to see if a line begins and ends with a <code>'\\n'</code> to detect the consecutive  <code>'\\n'</code>.</p>\n\n<pre><code>  ...\n  puts(\"Lecture du buffer 1\");\n\n  //fgets(buffer, sizeof(buffer),f);\n  //n = atoi(buffer);\n  //g-&gt;n += 1;\n\n  while (fgets(buffer, sizeof buffer, f) &amp;&amp; buffer[0] != '\\n') {\n    // parse `buffer` for a vertex\n  }\n\n  while (fgets(buffer, sizeof buffer, f)) {\n    // parse `buffer` for an edge\n  }\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>My dot file contains 2 blocs separated with a double \\n:</p>\n</blockquote>\n\n<p>The below looks like <strong>3</strong> <code>'\\n'</code> in a row.  The first of the 3 ends the <code>\"8;\\n\"</code> line.</p>\n\n<pre><code>7;\\n\n8;\\n\n\\n\n\\n\n0 -- 1;\\n\n0 -- 4;\\n\n</code></pre>\n\n<p>In that case a little more work is needed.  Perhaps</p>\n\n<pre><code>  while (fgets(buffer, sizeof buffer, f) &amp;&amp; buffer[0] != '\\n') {\n    // parse `buffer` for a vertex\n  }\n\n  // Here code consumes 0 or more lines that are only `\"\\n\"`\n  // Could use a counter to limit\n  int ch;\n  while ((c = fgetc(f)) == '\\n');\n  ungetc(ch, f);\n\n  while (fgets(buffer, sizeof buffer, f)) {\n    // parse `buffer` for an edge\n  }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9215168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c869978211e2a64f37c9dd4203999368?s=128&d=identicon&r=PG", "display_name": "NoobZik", "link": "https://stackoverflow.com/users/9215168/noobzik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58090960, "answer_count": 1, "score": 1, "last_activity_date": 1575935817, "creation_date": 1569353832, "question_id": 58087123, "link": "https://stackoverflow.com/questions/58087123/how-to-identify-a-double-n-n-with-fgets-read-fread", "title": "How to identify a double \\n\\n with fgets/read/fread", "body": "<p>I have a dot file, which i need to parse it into a graph structure using C.</p>\n\n<p>My dot file contains 2 blocs seperated with a double \\n:</p>\n\n<ul>\n<li><p>the one is verticle</p></li>\n<li><p>the other one is edges</p></li>\n</ul>\n\n<p>I have tried with fgets since it reads until \\n is met. It is helpfull to count the number of verticles but not whats comes after it. I don't have any idea of how i can do it</p>\n\n<p>Right now I have a function like this (not complete)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int graphe_charger_dot(graphe *g, char *nom_fichier) {\n  FILE * f;\n  int n;\n  if ((f = fopen(nom_fichier, \"r\")) == 0) {\n    puts(nom_fichier);\n    puts(\"Erreur d'ouverture du fichier\");\n    return -1;\n  }\n\n  char buffer[500];\n\n  fgets(buffer, sizeof(buffer),f);\n;\n  if (strcmp(buffer, \"graph {\\n\") != 0) {\n    puts(\"Erreur de compatibilit\u00e9 de fichier\");\n    puts(nom_fichier);\n    return -1;\n  }\n  puts(\"Fichier ouvert et compatible\");\n  puts(\"Lecture du buffer 1\");\n\n  // reads the first verticles. the atoi is just here to test if i can convert an char to integer even with a non integer right after it. \n  fgets(buffer, sizeof(buffer),f);\n  n = atoi(buffer);\n  g-&gt;n += 1;\n\n  return 0;\n}\n\n</code></pre>\n\n<p>My dot file</p>\n\n<pre><code>graph {\n  0;\n  1;\n  2;\n  3;\n  4;\n  5;\n  6;\n  7;\n  8;\n\n\n  0 -- 1;\n  0 -- 4;\n  0 -- 5;\n  0 -- 6;\n  0 -- 8;\n  1 -- 2;\n  1 -- 3;\n  1 -- 4;\n  1 -- 5;\n  2 -- 3;\n  2 -- 4;\n  2 -- 5;\n  2 -- 8;\n  3 -- 7;\n  5 -- 7;\n  5 -- 8;\n  6 -- 8;\n  7 -- 8;\n}\n</code></pre>\n\n<p>and the structure of the graph</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct s_graphe {\n  int n;                /* number of verticles */\n  int m;                /* number of edges */\n  int adj[GRAPHE_ORDRE_MAX][GRAPHE_ORDRE_MAX];\n  /* Adjacency matrix of the graph */\n};\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1569353923, "post_id": 58087102, "comment_id": 102567884, "body": "The difference isn&#39;t between <code>char *</code> and <code>int *</code>, the difference is between <code>&quot;1&quot;</code> and <code>1</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569353927, "post_id": 58087102, "comment_id": 102567887, "body": "Note that <code>char *a;  a = &quot;1&quot;;</code> sets <code>a</code> to the <i>address</i> of the string literal <code>&quot;1&quot;</code>."}, {"owner": {"reputation": 591, "user_id": 4054546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aa1f3e1fc65e8b2e8d67f34689fd81?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4054546/shawn"}, "edited": false, "score": 0, "creation_date": 1569354005, "post_id": 58087102, "comment_id": 102567910, "body": "The main difference that I immediately think of is pointer arithmetic and array indexing.  <code>((char*)a)[5]</code> will be a different location than <code>((int*)a)[5]</code>"}, {"owner": {"reputation": 5074, "user_id": 717636, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2553f159b71c61146a40302185a6e97?s=128&d=identicon&r=PG", "display_name": "Idr", "link": "https://stackoverflow.com/users/717636/idr"}, "edited": false, "score": 0, "creation_date": 1569354160, "post_id": 58087102, "comment_id": 102567963, "body": "so the difference is that the string literal &quot;1&quot; is itself a reference, while the integer literal 1 is a value. There are probably more exact ways to phrase this."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1569354666, "post_id": 58087102, "comment_id": 102568112, "body": "For completeness, also consider <code>&#39;a&#39;</code> - a single character, which works like your int, <code>char s[]=&quot;hello&quot;</code> a string in an array, <code>int a[] = {1,2,3,4}</code> which both behave the same with their respective pointers."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569356259, "post_id": 58087102, "comment_id": 102568615, "body": "A more accurate portrayal of the situation would be <code>char *a; a = &#39;1&#39;; int *i; i = 1;</code>."}, {"owner": {"reputation": 5074, "user_id": 717636, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2553f159b71c61146a40302185a6e97?s=128&d=identicon&r=PG", "display_name": "Idr", "link": "https://stackoverflow.com/users/717636/idr"}, "edited": false, "score": 0, "creation_date": 1569362775, "post_id": 58087102, "comment_id": 102570681, "body": "why the downvotes?"}], "answers": [{"tags": [], "owner": {"reputation": 57179, "user_id": 65070, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oK3oC.jpg?s=128&g=1", "display_name": "Eric Petroelje", "link": "https://stackoverflow.com/users/65070/eric-petroelje"}, "is_accepted": false, "score": 0, "last_activity_date": 1569354142, "creation_date": 1569354142, "answer_id": 58087187, "question_id": 58087102, "link": "https://stackoverflow.com/questions/58087102/different-semantics-between-char-and-int/58087187#58087187", "title": "Different semantics between `char *` and `int *`", "body": "<p>The gist of it:</p>\n\n<p>The data type of <code>\"1\"</code> is <code>char*</code>.  So you are assigning a <code>char*</code> to a <code>char*</code> variable.</p>\n\n<p>The data type of <code>1</code> is <code>int</code>.  So you are assigning an <code>int</code> to an <code>int*</code> variable which won't work since the types don't match.</p>\n"}, {"comments": [{"owner": {"reputation": 593, "user_id": 9658875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841f55a02830a8f0655c07654401670f?s=128&d=identicon&r=PG&f=1", "display_name": "GermanNerd", "link": "https://stackoverflow.com/users/9658875/germannerd"}, "edited": false, "score": 0, "creation_date": 1569414390, "post_id": 58087423, "comment_id": 102588531, "body": "While your example is good, it also is a bit of a trap to newcomers. Why? Because it is legal only in this constellation; if you had <code>char value = 4;</code> you would violate the strict aliasing rule on the third line. Maybe you want to expand your answer in that respect."}], "tags": [], "owner": {"reputation": 591, "user_id": 4054546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aa1f3e1fc65e8b2e8d67f34689fd81?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4054546/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1569355421, "creation_date": 1569355421, "answer_id": 58087423, "question_id": 58087102, "link": "https://stackoverflow.com/questions/58087102/different-semantics-between-char-and-int/58087423#58087423", "title": "Different semantics between `char *` and `int *`", "body": "<p>The second example won't compile because you have -Werror on, and you're attempting to assign an integer to a pointer without a cast, which is normally just a warning.  The same would happen if you did <code>char* a; a='a';</code> because you'd be attempting to assigning a char to char*.</p>\n\n<p>In terms of different semantics between pointer types - what is stored in the memory as the pointer, it's likely not going to be different, but the pointer type will affect compilation.  Mainly when it comes to pointer arithmetic, array indexing, and using pointers to aggregate (struct) types and functions.</p>\n\n<p>Things start acting differently when you start using pointer arithmetic/array indexing.  For example:</p>\n\n<pre><code>int value = 4\nchar *charp = &amp;value;\nint* intp = &amp;value;\n</code></pre>\n\n<p>These will both be valid pointers.  You'll also see different behaviors during compilation if you're working with function pointers, which you can use function call syntax with, and struct pointers, where you can access members of the referenced structure with the <code>-&gt;</code> operator.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1569356130, "creation_date": 1569356130, "answer_id": 58087542, "question_id": 58087102, "link": "https://stackoverflow.com/questions/58087102/different-semantics-between-char-and-int/58087542#58087542", "title": "Different semantics between `char *` and `int *`", "body": "<p>You're dealing with a difference between array, pointer, and scalar semantics.</p>\n\n<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.</p>\n\n<p>The string literal <code>\"1\"</code> is an <em>array</em> expression of type <code>char [2]</code>.  In this context, it \"decays\" to an expression of type <code>char *</code>, and the value of the expression is the address of the first character of the string.  So you're assigning like to like:</p>\n\n<pre><code> a = \"l\"; // char * = char *\n</code></pre>\n\n<p>This doesn't happen with the integer variant.  The literal <code>1</code> has type <code>int</code>, but you're trying to assign that <code>int</code> value to an <code>int *</code> object:</p>\n\n<pre><code>a = 1; // int * = int \n</code></pre>\n\n<p>which should trigger a diagnostic.  You can only assign an <code>int *</code> value to an <code>int *</code> object - you would need to explicitly cast the <code>1</code>:</p>\n\n<pre><code>a = (int *) 1; \n</code></pre>\n\n<p>which will suppress the diagnostic, but <code>1</code> is very likely <em>not</em> a valid memory address on your platform, and attempting to use it will cause problems.  </p>\n"}], "owner": {"reputation": 5074, "user_id": 717636, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2553f159b71c61146a40302185a6e97?s=128&d=identicon&r=PG", "display_name": "Idr", "link": "https://stackoverflow.com/users/717636/idr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1569356130, "creation_date": 1569353743, "question_id": 58087102, "link": "https://stackoverflow.com/questions/58087102/different-semantics-between-char-and-int", "title": "Different semantics between `char *` and `int *`", "body": "<p>I want to know why declaring and assigning a <code>char *</code> versus an <code>int *</code> in C have different semantics.</p>\n\n<p>All of the following code is compiled with <code>clang</code> using the flags <code>-Wall -Werror -std=gnu99 --pedantic</code>.\nI am trying to understand whether the difference is something that just <em>is</em>, or whether there's some bigger difference between <code>int *</code> and <code>char *</code> that I have yet to realize.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// this will compile\nint main(int argc, const char *argv[]) {\n    char *a;\n    a = \"1\";\n\n    printf(\"a: %s\\n\", a);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>// this will not compile. It's a parallel construction, substituting char for int\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, const char *argv[]) {\n    int *a;\n    a = 1;\n\n    printf(\"a: %d\\n\", a);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>// but this will compile\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, const char *argv[]) {\n    int *a;\n    int b = 1;\n    a = &amp;b;\n\n    printf(\"a: %d\\n\", *a);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "error-handling", "computer-science"], "comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 1, "creation_date": 1569355369, "post_id": 58086975, "comment_id": 102568346, "body": "Welcome to Stack Overflow Hardik. A tip from an old C programmer, to you keep on your wallet, <i>Always check your pointers!</i> Opening a file may fail and if don&#39;t check it for NULL you will get in trouble when you try to use it"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569438460, "post_id": 58086975, "comment_id": 102601049, "body": "if the names in the .csv are not all exactly 19 characters long, then the reading of the values into an array will become out-of-step with the names."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569438642, "post_id": 58086975, "comment_id": 102601128, "body": "the loop that is placing the names into an array will also have the spaces and commas from the .csv file.  Probably not what you want"}, {"owner": {"reputation": 1, "user_id": 10519950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377ced62f1a59058a9080327c5d1e2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Patel", "link": "https://stackoverflow.com/users/10519950/hardik-patel"}, "edited": false, "score": 0, "creation_date": 1569443864, "post_id": 58086975, "comment_id": 102603206, "body": "They are not the same size. What would i put instead of 19 then."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569445367, "post_id": 58086975, "comment_id": 102603724, "body": "suggest using <code>fgets()</code> to read a whole line from the .csv file into a large buffer in memory, then use <code>strtok()</code>  to separate each word.  Then use <code>strcpy()</code> to copy a word to the next available position in your array of words.  Suggest the &#39;delimiters&#39; to use in the call to <code>strtok()</code> to be &quot;,&quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569445537, "post_id": 58086975, "comment_id": 102603773, "body": "Suggest your array of words be an array of struct, where the struct contains { char word[20]; }  and <code>realloc()</code> each time you need more room for more words"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 12115298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4b71de452814b9ce105b547b808408?s=128&d=identicon&r=PG&f=1", "display_name": "ro-friday", "link": "https://stackoverflow.com/users/12115298/ro-friday"}, "is_accepted": false, "score": 4, "last_activity_date": 1569354874, "creation_date": 1569354874, "answer_id": 58087326, "question_id": 58086975, "link": "https://stackoverflow.com/questions/58086975/im-trying-to-open-a-csv-file-and-read-it-as-strings-in-an-array-in-c-programmin/58087326#58087326", "title": "Im trying to open a .csv file and read it as strings in an array in C programming", "body": "<p>It's possible that <code>*fp</code> is NULL due to an error on reading file.\nIf <code>*fp</code> is NULL, fgets return a segmentation fault.\nHave you tried putting:</p>\n\n<pre><code>if(fp == NULL) {\n    perror(\"Error opening file\");\n    return(-1);\n}\n</code></pre>\n\n<p>before the while loop?\nBye.</p>\n"}], "owner": {"reputation": 1, "user_id": 10519950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377ced62f1a59058a9080327c5d1e2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Patel", "link": "https://stackoverflow.com/users/10519950/hardik-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569354874, "creation_date": 1569353038, "question_id": 58086975, "link": "https://stackoverflow.com/questions/58086975/im-trying-to-open-a-csv-file-and-read-it-as-strings-in-an-array-in-c-programmin", "title": "Im trying to open a .csv file and read it as strings in an array in C programming", "body": "<p>I am trying to read a .csv files which has a list of names in there. I have to read it as a string and put it into an array and then use insertion sort to sort the array. I am running into an error that says: Segmentation fault (core dumped)</p>\n\n<pre><code>\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define MAXSTRINGS 5000\nint main(){\n    char N[20];\n        int i = 0;\n        int z = 0;\n        FILE *fp;\n        fp = fopen(\"NameList.csv\", \"r\");\n        while(fgets(N, 20, fp)!=NULL){\n                z++;\n        }\n    char strings[MAXSTRINGS][20];\n        rewind(fp);\n        for(i=0;i&lt;z &amp;&amp; i &lt; MAXSTRINGS;i++){\n                fgets(N, 20, fp);\n                strcpy(strings[i], N);\n                printf(\"%N\", N);\n        }\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569353234, "post_id": 58086969, "comment_id": 102567604, "body": "You have re-used the variable name <code>argv</code> so that in its scope it is shadowing the function argument <code>argv</code>. Please don&#39;t do that. Also, what happens when there is no <code>&#39;;&#39;</code> present? I suggest the use of library function <code>strchr()</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569353533, "post_id": 58086969, "comment_id": 102567736, "body": "<code>*(argv[1][])</code> is invalid syntax, you can&#39;t have an empty array subscript."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569353596, "post_id": 58086969, "comment_id": 102567760, "body": "Your loop doesn&#39;t split the string. It just searches for the first <code>;</code>."}, {"owner": {"reputation": 916, "user_id": 1162792, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wjGqP.png?s=128&g=1", "display_name": "Rodrigo.C", "link": "https://stackoverflow.com/users/1162792/rodrigo-c"}, "edited": false, "score": 0, "creation_date": 1569353650, "post_id": 58086969, "comment_id": 102567780, "body": "what&#39;s the reason you can&#39;t use strtok? can you elaborate on your question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11239824"}, "edited": false, "score": 0, "creation_date": 1569353835, "post_id": 58086969, "comment_id": 102567857, "body": "I cannot use string.h library. To split the string I am trying to run nested for loop and then getting the difference, then storing it. I think I have an idea on how to do but i cannot implement it"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1569354216, "post_id": 58086969, "comment_id": 102567980, "body": "<code>string.h</code> is not a library.  It is a header."}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1569359840, "post_id": 58086969, "comment_id": 102569885, "body": "If you want fast, preprocess your code with <code>re2c</code>."}], "answers": [{"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 0, "last_activity_date": 1569356133, "last_edit_date": 1569356133, "creation_date": 1569354284, "answer_id": 58087218, "question_id": 58086969, "link": "https://stackoverflow.com/questions/58086969/split-string-by-semicolon-without-strtok/58087218#58087218", "title": "split string by semicolon without strtok", "body": "<p>I think you want something like: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint\nmain(int argc, char **argv)\n{\n        char *str, *start;\n        str = malloc( argc &gt; 1 ? strlen(argv[1]) : 50 );\n        strcpy( str, argc &gt; 1 ? argv[1] : \"1 + 2; 3+4\" );\n        /* Error checking omitted for brevity */\n        do {\n                for( start = str; *str &amp;&amp; *str != ';'; str++ )\n                        ;\n                if(*str == ';')\n                        *str++ = '\\0';\n                printf(\"%s\\n\", start);\n        } while( *str );\n}\n</code></pre>\n\n<p>Given your stated preference to avoid any functions from the standard library that are declared in string.h, perhaps you prefer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nsize_t len( const char *c ) {\n        size_t s = 0;\n        while( *c++ )\n                s+=1;\n        return s;\n}\nint\nmain(int argc, char **argv)\n{\n        char *str, *start;\n        const char *target = argc &gt; 1 ? argv[1] : \"1 + 2; 3 + 4\";\n        start = str = malloc( len(target) + 1);\n        /* Error checking omitted for brevity */\n        while( (*str++ = *target++) != '\\0')\n                ;\n        str = start;\n        do {\n                for( start = str; *str &amp;&amp; *str != ';'; str++ )\n                        ;\n                if(*str == ';')\n                        *str++ = '\\0';\n                printf(\"token: %s\\n\", start);\n        } while( *str );\n        return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11239824"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569356133, "creation_date": 1569353025, "last_edit_date": 1569354112, "question_id": 58086969, "link": "https://stackoverflow.com/questions/58086969/split-string-by-semicolon-without-strtok", "title": "split string by semicolon without strtok", "body": "<p>I am using C for this. I have been trying to split the string using semi colon as a delimiter. Using command line argument I will pass a string such as, \"1 + 2; 3 + 4\" I want to get out put as\n1 + 2\n3 + 4\nI cannot use strtok for this.</p>\n\n<p>I have tried to run a for loop through the string but it is not working.</p>\n\n<pre><code> for (int i = 0; argv[1][i] != ';';i++)\n    {\n        char* argv;\n        printf(\"\\n%s\", *(argv[1][]));\n    }\n</code></pre>\n\n<p>THIS IS EDITED PART</p>\n\n<pre><code>for (int i = 0; argv[1][i] != ';' || argv[1][i] != '\\0'; i++)\n    {\n        for (int j = 0; argv[1][j]; j++)\n        {\n            char string = argv[1][i] - argv[1][j];\n\n            printf(\"\\n%s\", string);\n        }\n\n    }\n</code></pre>\n\n<p>WHEN I TRY TO RUN THIS HAPPEN</p>\n\n<pre><code>./check \"1 + 2; 3 + 4\"\nnumber of arguments: 2\n1 + 2; 3 + 4\n(null)\n</code></pre>\n\n<p>why i am getting null here?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1569354564, "post_id": 58086961, "comment_id": 102568082, "body": "What else is your computer doing while this program is running? If you examine the definition of time_t, or even search using a popular search engine for <b>c time_t</b> what data type is it? Then figure out when the next second will have elapsed after you start your program, so it then exits."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1569355318, "post_id": 58086961, "comment_id": 102568335, "body": "You are not going to. First, each loop will not run for the same amount of time for the reason explained in Andrew Henle&#39;s answer. Second, even if the amount of time is the same, the number of iterations will not be because of CPU power management, cache activity, network interrupts, and a number of other unpredictable things."}], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 2, "last_activity_date": 1569355186, "last_edit_date": 1569355186, "creation_date": 1569354593, "answer_id": 58087268, "question_id": 58086961, "link": "https://stackoverflow.com/questions/58086961/running-loop-for-fixed-time-counter-returns-different-number-on-every-run/58087268#58087268", "title": "Running loop for fixed time: Counter returns different number on every run", "body": "<p>On a POSIX system <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/time.html\" rel=\"nofollow noreferrer\"> the <code>time()</code> function</a> returns time measured in seconds:</p>\n\n<blockquote>\n  <p>The <code>time()</code> function shall return the value of time in seconds since the Epoch.</p>\n</blockquote>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/time-time32-time64?view=vs-2019\" rel=\"nofollow noreferrer\">Windows is similar</a>:</p>\n\n<blockquote>\n  <p>Returns the time as seconds elapsed since midnight, January 1, 1970, or -1 in the case of an error.</p>\n</blockquote>\n\n<p>The first call to <code>time()</code> in your process happens at effectively a random moment <strong>within</strong> a single second, and then your loop runs until the return value from <code>time()</code> changes.</p>\n\n<p>As such, your loop will run some random length of time between some very small fraction of one second all the way to about a full second.  The very first call to <code>time()</code> in your loop can return a value that causes your loop to end, or your loop may run for about a full second.  Or any length of time in between.</p>\n\n<p>That's assuming nothing else is running on your computer.  That can and will also change your results.</p>\n"}], "owner": {"reputation": 99, "user_id": 11965228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159628274d1fd8243dd04163952a8ca6?s=128&d=identicon&r=PG&f=1", "display_name": "perplex", "link": "https://stackoverflow.com/users/11965228/perplex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569355186, "creation_date": 1569352988, "last_edit_date": 1592644375, "question_id": 58086961, "link": "https://stackoverflow.com/questions/58086961/running-loop-for-fixed-time-counter-returns-different-number-on-every-run", "title": "Running loop for fixed time: Counter returns different number on every run", "body": "<p>I'm trying to run a loop for a particular period of time. During that period set a counter variable and increment it by 1. The goal is to see what is the final value of the counter variable during the run. I'm hoping to get the same counter value for the same running period. Seems like it is not the case. When I'm running the same loop with the same duration, the counter variable is returning a different number every time. I'm borrowing this code from <a href=\"https://stackoverflow.com/questions/21181162/how-do-i-stop-a-while-loop-after-a-certain-time-in-c\">isayme</a>.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n   time_t endwait;\n   time_t start = time(NULL);\n   time_t seconds = 1; // end loop after this time has elapsed\n   endwait = start + seconds;\n   int counter =0;\n   while (1){\n        if (start &lt; endwait){\n           counter=counter+1;\n           start = time(NULL);\n        }\n        else\n           break;\n   }\nprintf(&quot;Counter Value: %d&quot;, counter);\nreturn 0;\n}\n</code></pre>\n<p>output on different run:</p>\n<blockquote>\n<p>Counter Value: 99742750</p>\n<p>Counter Value: 30134682</p>\n<p>Counter Value: 30596672</p>\n</blockquote>\n<p>So, my question is</p>\n<ol>\n<li><p>How can I get the same counter variable for a fixed loop-time?</p>\n</li>\n<li><p>I was trying to set the variable <strong>seconds</strong> less than 1, but it yields 0. So, How can I set this time in fractions?</p>\n</li>\n</ol>\n<p>Thank you in advance.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 3, "creation_date": 1569352214, "post_id": 58086775, "comment_id": 102567192, "body": "According to <a href=\"https://linux.die.net/man/3/getch\" rel=\"nofollow noreferrer\"><code>getch(3)</code> man page</a>, you need the <code>&lt;curses.h&gt;</code> header and <code>ncurses</code> library. You should use the <code>-lncurses</code> linker option. It is not clear if your used it. Please show your compile and link commands."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 2, "creation_date": 1569353077, "post_id": 58086775, "comment_id": 102567555, "body": "<code>conio</code> is specific to older Microsoft systems (DOS and Windows) - it&#39;s not appropriate for Linux.  You just need <code>ncurses</code>."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 6567890, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/e27a30b399982655663b8483e0c21c70?s=128&d=identicon&r=PG&f=1", "display_name": "Osama X&#228;w&#227;&#241;z", "link": "https://stackoverflow.com/users/6567890/osama-x%c3%a4w%c3%a3%c3%b1z"}, "edited": false, "score": 0, "creation_date": 1569428376, "post_id": 58093219, "comment_id": 102596751, "body": "the above given code is working as expected, but here is one thing i want to take input from user and at the same time i want to listen for arrow keys, that if the up arrow key is pressed or down just like the linux shell, but when i try to take input in the while loop it is getting messed up."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 0, "last_activity_date": 1569396377, "creation_date": 1569396377, "answer_id": 58093219, "question_id": 58086775, "link": "https://stackoverflow.com/questions/58086775/how-to-listen-for-arrow-key-press-in-c/58093219#58093219", "title": "How to listen for arrow key press in C", "body": "<p>Here is a code to read pressed character in a loop and display their code:</p>\n\n<pre><code>/* we use curses library */\n#include &lt;curses.h&gt;\n\nint main(void)\n{\n    /* curses initialization */\n    initscr();\n\n    /* enable pressing arrow key to generate KEY_xxx codes */\n    keypad(stdscr, TRUE);\n\n    /* make getch wait sometime before returning ERR when no key is pressed */\n    timeout(100);\n\n    /* do not display pressed key */\n    noecho();\n    while (1)\n    {\n        /* read last pressed key */\n        int ch = getch();\n\n        /* if no key was waiting, ignore */\n        if (ERR == ch)\n            continue;\n\n        /* if UP is pressed... */\n        if (KEY_UP == ch)\n        {\n            /* ...do something with that key */\n            /* and wait next key pressed */ \n            continue;\n        }\n\n\n        /* if Q is pressed, exit the loop */   \n        if ('q' == ch)\n            break;\n\n        /* else, display the key code */ \n        mvprintw(2,2,\"code get: 0x%x\\n\", ch);\n\n        /* and some refresh can be useful*/ \n        refresh();\n    }\n\n    /* before quitting, disable curses mode */\n    endwin();\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Compile with curses library:</p>\n\n<pre><code>gcc -Wall main.c -lcurses -ocurses-test\n</code></pre>\n\n<p>That's all.</p>\n"}], "owner": {"reputation": 327, "user_id": 6567890, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/e27a30b399982655663b8483e0c21c70?s=128&d=identicon&r=PG&f=1", "display_name": "Osama X&#228;w&#227;&#241;z", "link": "https://stackoverflow.com/users/6567890/osama-x%c3%a4w%c3%a3%c3%b1z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569396377, "creation_date": 1569352109, "question_id": 58086775, "link": "https://stackoverflow.com/questions/58086775/how-to-listen-for-arrow-key-press-in-c", "title": "How to listen for arrow key press in C", "body": "<p>I am trying to listen for the up and down arrow keys, i have tried using <strong>conio.h</strong> by installing it manually  but it doesn't work either i am getting an error. I am using Kali Linux.</p>\n\n<p>My Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;curses.h&gt;\nint main() {\n\nint ch = getch();\n\nreturn 0;\n}\n</code></pre>\n\n<p>Erorr:</p>\n\n<blockquote>\n  <p>/usr/bin/ld: /tmp/cckPLPKN.o: in function <code>main': test.c:(.text+0x9):\n  undefined reference to</code>getch' collect2: error: ld returned 1 exit\n  status</p>\n</blockquote>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1569352431, "post_id": 58086752, "comment_id": 102567298, "body": "Does your compiler show any error (or warning) when you build the project?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1569352466, "post_id": 58086752, "comment_id": 102567305, "body": "Long story short, because Microsoft has some ill-advised thoughts on how to program in C."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1569352950, "post_id": 58086752, "comment_id": 102567515, "body": "Note: they are <b>not</b> the same. <code>scanf_s</code> requires a size parameter for every format specifier of type <code>%c</code> and <code>%s</code> and <code>%[]</code>. So <code>scanf_s</code> is <b>not</b> a direct &quot;safe&quot; replacement for <code>scanf</code>."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1569352963, "post_id": 58086752, "comment_id": 102567522, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16883037/remove-secure-warnings-crt-secure-no-warnings-from-projects-by-default-in-vis\">Remove secure warnings (_CRT_SECURE_NO_WARNINGS) from projects by default in Visual Studio</a>"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1569353663, "post_id": 58086752, "comment_id": 102567784, "body": "The #define needs to go <i>before</i> the #include to have any effect.  The kind of bug you have in this program is highly exploitable, it permits writing an arbitrary memory location.  Fix the call, pass &amp;i.  Don&#39;t try running it until all build errors are solved."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569359297, "post_id": 58086752, "comment_id": 102569717, "body": "Better to define <code>_CRT_SECURE_NO_WARNINGS</code> in as a command line option to apply to all source files globally without modifying the source.  In Visual Studio you can apply the setting in the project pre-processor settings."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569359842, "post_id": 58086752, "comment_id": 102569886, "body": "Your <code>scanf_s()</code> call is incorrect in any case:  <code>scanf_s(&quot;%d&quot;, &amp;i);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569448199, "post_id": 58086752, "comment_id": 102604580, "body": "This: <code>#define _CRT_SECURE_NO_WARNINGS</code> should be before any <code>#include</code> statements.  This is because that <code>#define</code> statement changes certain definitions/warnings in the header files"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1569448275, "post_id": 58086752, "comment_id": 102604600, "body": "There are two valid signatures for <code>main()</code>  (regardless of what visual studio allows)  They are: <code>int main( void )</code> and <code>int main( int argc, char *argv[] )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "edited": false, "score": 0, "creation_date": 1569359151, "post_id": 58086948, "comment_id": 102569665, "body": "There is a real problem in the code. Simply hiding the warning is not a really good idea in this case."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "edited": false, "score": 0, "creation_date": 1569359517, "post_id": 58086948, "comment_id": 102569790, "body": "@g_bor : The code is certainly broken, but this warning is not related to that.  It is not so unreasonable in this case - it is a <code>#warning</code> directive generated by Microsoft&#39;s header not a compiler warning.  Moreover there are legitimate reasons for using the unsafe-but-portable standard library functions over Microsoft&#39;s proprietary alternatives."}, {"owner": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "edited": false, "score": 0, "creation_date": 1569359822, "post_id": 58086948, "comment_id": 102569880, "body": "The problem in the code is that the parameter of the scanf for the int is specified without &amp;. That is not safe. You are perfectly right in that there should not be any problem with using scanf correctly, and I also believe that giving a warning is not nice."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "edited": false, "score": 2, "creation_date": 1569360406, "post_id": 58086948, "comment_id": 102570029, "body": "@g_bor : That is indeed a problem in the code shown, but that is not what the question is about and <code>_CRT_SECURE_NO_WARNINGS</code> will not hide any warnings related to that (<a href=\"https://devblogs.microsoft.com/cppblog/format-specifiers-checking/\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/cppblog/format-specifiers-checking</a>).  <code>_CRT_SECURE_NO_WARNINGS</code> is simply about using the Microsoft <code>_s</code> suffixed variants of I/O functions over the standard functions."}, {"owner": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "edited": false, "score": 0, "creation_date": 1569391510, "post_id": 58086948, "comment_id": 102576682, "body": "Ok, Clifford has a point here. I will do my best to correct this."}], "tags": [], "owner": {"reputation": 9, "user_id": 11599275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HtnEyoblIq8/AAAAAAAAAAI/AAAAAAAAE8M/S6lkjvEatPU/photo.jpg?sz=128", "display_name": "Thomas Konstantin", "link": "https://stackoverflow.com/users/11599275/thomas-konstantin"}, "is_accepted": false, "score": -1, "last_activity_date": 1569352923, "creation_date": 1569352923, "answer_id": 58086948, "question_id": 58086752, "link": "https://stackoverflow.com/questions/58086752/why-did-i-have-to-use-scanf-s-instead-of-just-scanf-when-making-a-basic-code-usi/58086948#58086948", "title": "Why did I have to use scanf_s instead of just scanf when making a basic code using visual studio 2019", "body": "<p>To solve this problem all you need to do is to go to the Debug tab and go to\n\"project_name\" properties -> c/c++ ->preprocessor ->and add _CRT_SECURE_NO_WARNINGS  to the end of the preprocessor defenitons box </p>\n"}], "owner": {"reputation": 3, "user_id": 10676498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cMPGj.jpg?s=128&g=1", "display_name": "Martinho Tavares", "link": "https://stackoverflow.com/users/10676498/martinho-tavares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 490, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569352923, "creation_date": 1569352007, "question_id": 58086752, "link": "https://stackoverflow.com/questions/58086752/why-did-i-have-to-use-scanf-s-instead-of-just-scanf-when-making-a-basic-code-usi", "title": "Why did I have to use scanf_s instead of just scanf when making a basic code using visual studio 2019", "body": "<p>I've used scanf several times and suddenly it started giving me an error and to use</p>\n\n<p>I'm new to coding, and it confuses me as to why I have to switch functions for no reason even though they do the same. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define _CRT_SECURE_NO_WARNINGS \nvoid main()\n{\n    int i;\n    printf(\"Digite um numero inteiro\");\n    scanf_s(\"%d\", i);\n    printf(\"%8d\", i);\n\n\n\n}\n</code></pre>\n\n<p>VIsual Studio is also giving me an error whenever I run the code about being \"Unable able to start the program\" saying it couldn't find the file in \":C\\Users\\mart\\source\\repos\\project\\Debug\\project.exe\".</p>\n"}, {"tags": ["c", "arrays", "for-loop"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1569352240, "post_id": 58086735, "comment_id": 102567203, "body": "Is the question &quot;solve my homework&quot;?"}, {"owner": {"reputation": 11, "user_id": 12115098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094733fa68e183f4b0461f2f578357aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aesto", "link": "https://stackoverflow.com/users/12115098/aesto"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569352322, "post_id": 58086735, "comment_id": 102567241, "body": "Yes, well I actually need help with it. you dont have to give me answers but maybe some hints."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1569352351, "post_id": 58086735, "comment_id": 102567255, "body": "But you haven&#39;t asked anything. What are you stuck at?"}, {"owner": {"reputation": 11, "user_id": 12115098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094733fa68e183f4b0461f2f578357aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aesto", "link": "https://stackoverflow.com/users/12115098/aesto"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569352466, "post_id": 58086735, "comment_id": 102567306, "body": "Well, that is my bad. Sorry!  The thing im stuck at is how do  I make a for loop thats working with bits. so lets say     for(n = 0; n &lt; 8; n++) how do  I make the loop go form 000 to 001 to 010. Sorry English isnt my main language"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569352775, "post_id": 58086735, "comment_id": 102567446, "body": "Notice that the last character is alternating every <code>n</code>. The second one is alternating every two <code>n</code>s. The first one - every four <code>n</code>s..."}, {"owner": {"reputation": 11, "user_id": 12115098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094733fa68e183f4b0461f2f578357aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aesto", "link": "https://stackoverflow.com/users/12115098/aesto"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569352838, "post_id": 58086735, "comment_id": 102567469, "body": "So I need to make 3 loops? one for the first bit, one for the second and one for the third?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1569352946, "post_id": 58086735, "comment_id": 102567514, "body": "No, you can use the modulus operator <code>%</code> - think what it will give for <code>n % 2</code>, <code>n % 4</code> and such. There are other methods - you can work with bits of <code>n</code> directly by shifting (<code>&lt;&lt;</code>, <code>&gt;&gt;</code>) and masking. But it is too broad for the question."}, {"owner": {"reputation": 11, "user_id": 12115098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094733fa68e183f4b0461f2f578357aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aesto", "link": "https://stackoverflow.com/users/12115098/aesto"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569353414, "post_id": 58086735, "comment_id": 102567675, "body": "Oh ofcourse, I could work with the modulos, But what have the arrays to do with it, since  you can get the same output without the arrays right? for example   if(n % 4 == 0){ printf (&quot;1&quot;} else printf &quot;0&quot;"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569366366, "post_id": 58086735, "comment_id": 102571566, "body": "@EugeneSh. : the question is more interesting than that.  You have to do it within the constraints of the given code and the indicated insertion point.  It serves no purpose other than to make you think, and demonstrate in this case an understanding of the binary increment operation at the bit-level."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1569366775, "post_id": 58086735, "comment_id": 102571663, "body": "Is that really how the code was provided - it is much easier to see what is going on if you use consistent and conventional indentation.  Fixed it for you."}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1569366575, "last_edit_date": 1569366575, "creation_date": 1569362471, "answer_id": 58088677, "question_id": 58086735, "link": "https://stackoverflow.com/questions/58086735/bits-and-arrays-in-c-new-to-programming/58088677#58088677", "title": "bits and arrays in C - New to programming", "body": "<p>While there are many ways of generating a binary sequence, here the task appears to have been deliberately complicated (or made interesting) by the constraint that you modify code only at the location indicated and the initialisation of each successive string with the content of the previous one.</p>\n\n<p>The arrays serve no purpose other than to make you think - it is a purely academic exercise, not a practical application.  Each string is initialised with the content of the previous string (which the code you must add will have modified), the intent of the exercise is that you perform a binary \"add 1\" at each iteration.  </p>\n\n<p>To do that, starting from the LSB (<code>rij[n][2]</code>), if the digit is <code>ZERO</code> you set it to ONE, then move to the next <code>n</code>, else you set it to ZERO, and \"carry\" one, repeating the above process for the next most significant bit in the string <code>n</code>.</p>\n\n<p>You can do that in a loop from the LSB (2) index to the MSB (0) index, and exiting the loop (<code>break</code>) when you set any bit to <code>ONE</code>.  </p>\n\n<p>Or for just three digits you can unroll-the loop thus:</p>\n\n<pre><code>if( rij[n][2] == ZERO )\n{\n    rij[n][2] = ONE ;\n}\nelse\n{\n    rij[n][2] = ZERO ;\n    if( ...  // test next bit [1] - enough of a hint I think.\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12115098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094733fa68e183f4b0461f2f578357aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aesto", "link": "https://stackoverflow.com/users/12115098/aesto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569366711, "creation_date": 1569351964, "last_edit_date": 1569366711, "question_id": 58086735, "link": "https://stackoverflow.com/questions/58086735/bits-and-arrays-in-c-new-to-programming", "title": "bits and arrays in C - New to programming", "body": "<p>I have a given code from school, I need this as my output:\nDigital Binair\n0   is    000,\n1  is   001,\n2  is     010,\n3  is     011,\n4  is     100,\n5  is    101,\n6 is    110,\n7  is    111\n (3 bits)</p>\n\n<pre><code> I need to work with for loops, this is the given code:\n\n\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define ZERO '0'\n#define ONE '1'\n\nint main(void) \n{\n    char rij[8][4];\n    int n, m;\n\n    strcpy( rij[0], \"000\" );\n    printf( \"%s\\n\", rij[0] );\n\n    for ( n=1; n&lt;8; n++ ) \n    {\n        strcpy( rij[n], rij[n-1] );\n        printf( \"%s\\n\", rij[n] );\n\n        // *ONLY ABLE TO TYPE IN HERE !!!! THE REST IS GIVEN !!!!*\n    }\n\n    for( n=0; n&lt;8; n++ ) \n    {\n        printf( \"%i %s\\n\", n, rij[n] );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm stuck at is how do I make a for loop that is working with bits. So lets say <code>for(n = 0; n &lt; 8; n++)</code> how do I make the loop go form <code>000</code> to <code>001</code> to <code>010</code>.</p>\n"}, {"tags": ["c", "loops", "for-loop", "while-loop", "roman-numerals"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1569351709, "post_id": 58086671, "comment_id": 102566996, "body": "Why the blocks around loops? And it can be definitely reduced to two loops or so to illustrate the question and ease on the readers."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1569351901, "post_id": 58086671, "comment_id": 102567078, "body": "The interface is much cleaner if you take the value to be converted as an argument rather than reading it from stdin."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1569352033, "post_id": 58086671, "comment_id": 102567129, "body": "That is <code>num = strtol(argv[1], NULL, 0);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": true, "score": 1, "last_activity_date": 1569357403, "creation_date": 1569357403, "answer_id": 58087782, "question_id": 58086671, "link": "https://stackoverflow.com/questions/58086671/why-cant-i-swap-out-the-variable-of-the-for-loop-with-a-random-letter/58087782#58087782", "title": "Why can&#39;t I swap out the variable of the for loop with a random letter?", "body": "<p>First, you calculate the quantity of each different letter in the output. Then you have a while loop running with <code>n</code> decreasing to 0, i.e. the body of the loop runs <code>n</code> times. Inside the loop, you have a series of for loops, one for each different letter. If you leave out the for loops that use <code>n</code>, you're doing this:</p>\n\n<ul>\n<li>Calculate the number of each letter in the output: <code>m</code>, <code>d</code>, <code>c</code>, etc. as well as <code>n</code> which is the total number of letters (in additive notation).</li>\n<li>Repeat <code>n</code> times:\n\n<ul>\n<li>Print <code>M</code>, <code>m</code> times.</li>\n<li>Print <code>D</code>, <code>d</code> times.</li>\n<li>etc.</li>\n</ul></li>\n</ul>\n\n<p>The result is that without the inner loops that modify <code>n</code>, you're printing the result many times over.</p>\n\n<p>A correct algorithm for printing roman numerals in additive notation (4 is <code>IIII</code>, etc.) is:</p>\n\n<ul>\n<li>Calculate <code>m</code>, <code>d</code>, <code>c</code>, etc.</li>\n<li>Print <code>M</code>, <code>m</code> times.</li>\n<li>Print <code>D</code>, <code>d</code> times.</li>\n<li>etc.</li>\n</ul>\n\n<p>Without the for loops that modify <code>n</code>, you're repeating the correct algorithm <code>n</code> times:</p>\n\n<pre><code>while (n &gt; 0) {\n    \u2026 /* code that doesn't modify n and prints the desired output */\n    n--;\n}\n</code></pre>\n\n<p>With the for loops that modify <code>n</code>, you're setting <code>n</code> to 0 inside the body of the while loop, so <code>n--</code> at the end of the loop body sets <code>n</code> to -1, and the while loop terminates after the first iteration.</p>\n\n<pre><code>while (n &gt; 0) {\n    \u2026 /* some code */\n    for (n = 1; n &gt; 0; n--) {\n        \u2026 /* more core */\n    }\n    /* On exit of this for loop, the value of n is 0. */\n    \u2026 /* more code that doesn't modify n */\n    n--;\n}\n</code></pre>\n\n<p>The fix is simple: remove the while loop, since you always want to execute its body exactly once. Remove the calculation of the total number of letters to print: it isn't needed. Your for loops using <code>n</code> execute their body exactly once, too, so they're useless as well. This is the result (I've made the indentation uniform and removed useless braces, but otherwise I didn't seek to improve the program):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int num, m, c, d, l, x, v, i, cm, cd;\n    printf(\"Enter Number: \");\n    scanf(\"%d\", &amp;num);\n    m = num / 1000;\n    d = (num % 1000) / 500;\n    c = (num % 500) / 100;\n    l = (num % 100) / 50;\n    x = (num % 50) / 10;\n    v = (num % 10) / 5;\n    i = (num % 5);\n    for (m; m &gt; 0; m--)\n    {\n        printf(\"M\");\n    }\n    if (num%1000&gt;=900)\n    {\n        printf(\"CM\");\n        d = d - 1;\n        c = c - 4;\n        num = num - 900;\n    }\n    for (d; d &gt; 0; d--)\n        printf(\"D\");\n    if (num % 500 &gt;= 400)\n    {\n        printf(\"CD\");\n        c = c - 4;\n    }\n    for (c; c &gt; 0; c--)\n        printf(\"C\");\n    for (l; l &gt; 0; l--)\n        printf(\"L\");\n    for (x; x &gt; 0; x--)\n        printf(\"X\");\n    for (v; v &gt; 0; v--)\n        printf(\"V\");\n    for (i; i &gt; 0; i--)\n        printf(\"I\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 12097232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oD3h34PIbLc/AAAAAAAAAAI/AAAAAAAAABU/9ZprHA2M2So/photo.jpg?sz=128", "display_name": "Chinguun Erdenebadrakh", "link": "https://stackoverflow.com/users/12097232/chinguun-erdenebadrakh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58087782, "answer_count": 1, "score": 1, "last_activity_date": 1569357403, "creation_date": 1569351656, "question_id": 58086671, "link": "https://stackoverflow.com/questions/58086671/why-cant-i-swap-out-the-variable-of-the-for-loop-with-a-random-letter", "title": "Why can&#39;t I swap out the variable of the for loop with a random letter?", "body": "<p>I was writing an integer to roman numeral converter. This time, a proper one.</p>\n\n<p>Trying to solve the problem of printing the 900s, 90s and 9s; I wrote a for loop (lasts only one loop since it's purpose was to prevent printing CMCMCMCM instead of CM) inside the while loop. But for the variable of the for loop, I used the same \"n\" as the \"n\" in the while loop without noticing. </p>\n\n<p>Ran it, worked fine; then noticed the supposed error. Swapped it out with \"A\", inserted \"A\" into int cd, cl,..... list. AAAaaand the result was the jumble of completely off the rail numbers.</p>\n\n<p>I don't understand how the code can work properly with a reused loop variable, but can't work with a new one.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int num, m, c, d, l, x, v, i, n, cm, cd;\n    printf(\"Enter Number: \");\n    scanf_s(\"%d\", &amp;num);\n        m = num / 1000;\n        d = (num % 1000) / 500;\n        c = (num % 500) / 100;\n        l = (num % 100) / 50;\n        x = (num % 50) / 10;\n        v = (num % 10) / 5;\n        i = (num % 5);\n        n = m + d + c + l + x + v + i;\n        while (n &gt; 0)\n        {\n            {\n                for (m; m &gt; 0; m--)\n                {\n                    printf(\"M\");\n                }\n            }\n            {\n                for (n=1; n&gt;0; n--)\n                {\n                    if (num%1000&gt;=900)\n                    {\n                        printf(\"CM\");\n                        d = d - 1;\n                        c = c - 4;\n                        num = num - 900;\n                    }\n                }\n            }\n            {\n                for (d; d &gt; 0; d--)\n                    printf(\"D\");\n            }\n            {\n                for (n = 1; n &gt; 0; n--)\n                {\n                    if (num % 500 &gt;= 400)\n                    {\n                        printf(\"CD\");\n                        c = c - 4;\n                    }\n                }\n\n            }\n            {\n                for (c; c &gt; 0; c--)\n                    printf(\"C\");\n            }\n            {\n                for (l; l &gt; 0; l--)\n                    printf(\"L\");\n            }\n            {\n                for (x; x &gt; 0; x--)\n                    printf(\"X\");\n            }\n            {\n                for (v; v &gt; 0; v--)\n                    printf(\"V\");\n            }\n            {\n                for (i; i &gt; 0; i--)\n                    printf(\"I\");\n            }\n            n--;\n        }\n        return 0;\n}\n\n</code></pre>\n\n<p>Keep in mind, the for loops for the 900, 400 and so on are not completed as I noticed this after writing the 900 single loop.</p>\n"}, {"tags": ["c", "stdout"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1569347221, "post_id": 58085696, "comment_id": 102565179, "body": "You can redirect <code>stdout</code> to <code>&#47;dev&#47;null</code> before you call the function, then restore it after the function returns."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1569347259, "post_id": 58085696, "comment_id": 102565194, "body": "Are you sure it&#39;s writing to stdout, not stderr?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1569347293, "post_id": 58085696, "comment_id": 102565207, "body": "Have you looked at the documentation of the function to see if there is already a solution built into the function?"}, {"owner": {"reputation": 13369, "user_id": 1579327, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2672419fe5e9e6d5ce4d03c2e7aae7a2?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/1579327/paolo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569347363, "post_id": 58085696, "comment_id": 102565232, "body": "@Barmar yes, I&#39;m sure the function writes to <code>stdout</code>. Could you give me a hint on how redirect <code>stdout</code> inside the program?"}], "owner": {"reputation": 13369, "user_id": 1579327, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2672419fe5e9e6d5ce4d03c2e7aae7a2?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/1579327/paolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1569347472, "answer_count": 0, "score": 0, "last_activity_date": 1569347127, "creation_date": 1569347127, "question_id": 58085696, "link": "https://stackoverflow.com/questions/58085696/prevent-called-function-to-print-output", "closed_reason": "Duplicate", "title": "Prevent called function to print output", "body": "<p>In my program I call a function that sometimes write to <code>stdout</code> some \"notices\" or \"warnings\".</p>\n\n<p>Since I don't need that output and furthermore it mixes with the output my program produces I want to get rid of the \"notices\" from the verbose function.</p>\n\n<p>The function is not part of my code. Instead it's part of a OS' dynamic library (I can't edit the function).</p>\n\n<p>Is there there any way to suppress output from that function?</p>\n\n<p>Or can I suppress output before the function call and restore it after the call?</p>\n"}, {"tags": ["c", "struct", "segmentation-fault", "text-files"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1569346183, "post_id": 58085406, "comment_id": 102564752, "body": "<code>char gender[2]</code> is quite short. If a word is bigger (like it seems to be the case here) it will crash your app. Always use a limited scan specifier in those cases."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569346385, "post_id": 58085406, "comment_id": 102564834, "body": "The fragment <code>if(c != EOF){             goto details;         }         details:</code> is weird; it will go to the label <code>details:</code> whether or not EOF is detected."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1569347359, "post_id": 58085406, "comment_id": 102565229, "body": "Your input data has 6 fields per line.  You are trying to read 7.  And apparently attempting to put the string &quot;abcde&quot; into add.gender which only has space for a string of length 1."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1569346314, "creation_date": 1569346314, "answer_id": 58085516, "question_id": 58085406, "link": "https://stackoverflow.com/questions/58085406/why-fscanf-is-giving-segmentation-fault-while-reading-the-data-into-a-text-file/58085516#58085516", "title": "Why fscanf is giving segmentation fault while reading the data into a text file?", "body": "<p>You're not setting <code>c</code> correctly when you write:</p>\n\n<pre><code>while(c = fscanf(q,\"%d %s %s %d %s %s %llu%[^\\n]\",&amp;add.acc_no,add.password,add.name,&amp;add.age,add.gender,add.address,&amp;add.phone) == 7)\n</code></pre>\n\n<p>This is setting <code>c</code> to the result of the <code>==</code> comparison, because <code>==</code> has higher precedence than <code>=</code>.</p>\n\n<p>Also, you don't need <code>[^\\n]</code> at the end of the format string. <code>%d</code> at the beginning will skip over any whitespace, including the newline at the end of the previous line.</p>\n\n<p>It should be:</p>\n\n<pre><code>while((c = fscanf(q,\"%d %s %s %d %s %s %llu\",&amp;add.acc_no,add.password,add.name,&amp;add.age,add.gender,add.address,&amp;add.phone)) == 7)\n</code></pre>\n\n<p>I'm not sure what you intend with</p>\n\n<pre><code>        if(c != EOF){\n            goto details;\n        }\n        details:\n</code></pre>\n\n<p>Since <code>details:</code> is immediately after the <code>if</code> statement, you go there whether or not the condition succeeds.</p>\n\n<p>You should get out of the habit of using <code>goto</code>, it's generally considered poor programming style. Put the code that should run when the condition is true inside the <code>if</code>. You can use <code>continue</code> and <code>break</code> to restart and end a loop.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 11342806, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BrlnypRZoSw/AAAAAAAAAAI/AAAAAAAAAcM/uvtLTp6Zayk/photo.jpg?sz=128", "display_name": "Asfiya Shaikh", "link": "https://stackoverflow.com/users/11342806/asfiya-shaikh"}, "edited": false, "score": 1, "creation_date": 1569348422, "post_id": 58085530, "comment_id": 102565648, "body": "It helped. Thank you!!"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 2, "last_activity_date": 1569346751, "last_edit_date": 1569346751, "creation_date": 1569346358, "answer_id": 58085530, "question_id": 58085406, "link": "https://stackoverflow.com/questions/58085406/why-fscanf-is-giving-segmentation-fault-while-reading-the-data-into-a-text-file/58085530#58085530", "title": "Why fscanf is giving segmentation fault while reading the data into a text file?", "body": "<h2><a href=\"https://stackoverflow.com/questions/3517726/what-is-wrong-with-using-goto\">Remove <code>goto</code></a>.</h2>\n\n<p>Refactor this part of your code please.</p>\n\n<hr>\n\n<p>About your arrays, which await to store a string - did you take in account the string NULL terminator, that also needs a cell of the array to be stored? </p>\n\n<p>In any case, I see <code>gender</code> has a size of 2, but your input suggests that it needs more.</p>\n\n<p>Your input has 7 tokens:</p>\n\n<blockquote>\n  <p>1 dior Asfiya 20 abcde 12345</p>\n</blockquote>\n\n<p>that means that <code>gender</code> will <strong>overflow, invoking Undefined Behavior (UB)</strong>, since you will attempt to store a 4-character length string into an array of size 2. That might explain the crash.</p>\n\n<p>You would have seen it by your check for 7 values, but there is also another problem in your code, as you can read in the next section.</p>\n\n<p>You probably meant:</p>\n\n<blockquote>\n  <p>1 dior Asfiya 20 abcde f 12345</p>\n</blockquote>\n\n<hr>\n\n<p>Change this:</p>\n\n<pre><code>while(c = fscanf(q,\"%d %s %s %d %s %s %llu%[^\\n]\",&amp;add.acc_no,add.password,add.name,&amp;add.age,add.gender,add.address,&amp;add.phone) == 7)\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>while((c = fscanf(q,\"%d %s %s %d %s %s %llu%[^\\n]\",&amp;add.acc_no,add.password,add.name,&amp;add.age,add.gender,add.address,&amp;add.phone)) == 7)\n</code></pre>\n\n<p>since, because of <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operators priority</a>, the comparison happens <em>before</em> the assignment, which is not what you want. You want first to assign to your variable, and then compare, so use parentheses to specify the desired priority.</p>\n"}], "owner": {"reputation": 87, "user_id": 11342806, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BrlnypRZoSw/AAAAAAAAAAI/AAAAAAAAAcM/uvtLTp6Zayk/photo.jpg?sz=128", "display_name": "Asfiya Shaikh", "link": "https://stackoverflow.com/users/11342806/asfiya-shaikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58085530, "answer_count": 2, "score": 1, "last_activity_date": 1569346751, "creation_date": 1569345910, "question_id": 58085406, "link": "https://stackoverflow.com/questions/58085406/why-fscanf-is-giving-segmentation-fault-while-reading-the-data-into-a-text-file", "title": "Why fscanf is giving segmentation fault while reading the data into a text file?", "body": "<p>I am trying to read data from a text file with some data in it.</p>\n\n<hr>\n\n<p>My text file:</p>\n\n<pre><code>1 dior Asfiya 20 abcde 12345\n2 abde Sabah 17 saar 5757657\n</code></pre>\n\n<hr>\n\n<p>My code:</p>\n\n<pre><code>typedef long long int ulong;\nstruct Customer\n{\n    char name[25];\n    int acc_no;\n    int age;\n    char gender[2];\n    char address[60];\n    ulong phone;\n    char password[10];\n\n\n};\nstruct Customer add,check;\n\nint new_acc()\n{\n        int c;\n        FILE *p;\n        FILE *q;\n        p = fopen(\"test.txt\",\"a\");\n        q = fopen(\"test.txt\",\"r\");\n        if(p == NULL)\n        {\n            puts(\"Could't open file\\n\");\n            return(-1);\n        }\n        if(q == NULL)\n        {\n            puts(\"Couldn't open file\\n\");\n            return(-1);\n        }\n        account_no:\n        printf(\"\\nAdd record\");\n        printf(\"\\nEnter account number: \");\n        scanf(\"%d\",&amp;check.acc_no);\n        while(c = fscanf(q,\"%d %s %s %d %s %s %llu%[^\\n]\",&amp;add.acc_no,add.password,add.name,&amp;add.age,add.gender,add.address,&amp;add.phone) == 7)\n        {\n            if(check.acc_no==add.acc_no)\n            {\n                printf(\"\\nAccount no. already in use!\");\n                goto account_no;\n            }\n        }\n        if(c != EOF){\n            goto details;\n        }\n        details:\n        add.acc_no = check.acc_no;\n        printf(\"\\nEnter password: \");\n        scanf(\"%s\",add.password);\n        printf(\"\\nFull Name: \");\n        scanf(\"%s\",add.name);\n        printf(\"\\nEnter your age: \");\n        scanf(\"%d\",&amp;add.age);\n        printf(\"\\nEnter your gender: \");\n        scanf(\" %c\",&amp;add.gender);\n        printf(\"\\nEnter address: \");\n        scanf(\"%s\",add.address);\n        printf(\"\\nEnter phone number: \");\n        scanf(\"%llu\",&amp;add.phone);\n        fprintf(p,\"%d %s %s %d %s %s %lld\\n\",add.acc_no,add.password,add.name,add.age,add.gender,add.address,add.phone);\n        fclose(p);\n        fclose(q);\n\n}\n</code></pre>\n\n<p>While debugging the code it gives segmentation fault when the <strong>while</strong> loop starts. It worked perfectly fine before adding the first line of data into the file. I am not able to figure out why is this happening.</p>\n"}, {"tags": ["c", "macos"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569346702, "post_id": 58085311, "comment_id": 102564963, "body": "You are probably running into some variant of the trouble diagnosed in <a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/52530212#52530212\">Can&#39;t compile C program on a Mac after upgrade to Mojave</a>.  It isn&#39;t clear that it is identical because you still have a file to look at.  There was an update to XCode (v11.0) released a day or two ago \u2014 for macOS Catalina and iOS 13, etc \u2014 that may have auto-installed and made some changes.  For me, that went smoothly, but YMMV and maybe the answer is in that Q&amp;A."}, {"owner": {"reputation": 17, "user_id": 10446590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74ab1aeb273899b0a5b1f41c080af487?s=128&d=identicon&r=PG&f=1", "display_name": "happy coding", "link": "https://stackoverflow.com/users/10446590/happy-coding"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569488798, "post_id": 58085311, "comment_id": 102616131, "body": "thank you .  I found the wrong reason . i made soft link  link xcode/include to /usr/local/include"}], "owner": {"reputation": 17, "user_id": 10446590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74ab1aeb273899b0a5b1f41c080af487?s=128&d=identicon&r=PG&f=1", "display_name": "happy coding", "link": "https://stackoverflow.com/users/10446590/happy-coding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 896, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1611788194, "creation_date": 1569345480, "last_edit_date": 1569361113, "question_id": 58085311, "link": "https://stackoverflow.com/questions/58085311/stdio-fatal-error-ctermid-h-file-not-found", "title": "stdio fatal error : &#39;_ctermid.h&#39; file not found", "body": "<pre><code>include&lt;stdio.h&gt;\n</code></pre>\n\n<p>and when i used gcc to complie , this came out :</p>\n\n<p>/usr/local/include/stdio.h:205:10: fatal error: '_ctermid.h' file not found</p>\n\n<p>Something went wrong today . It used to complie a few days ago</p>\n\n<p>here is the source code of stdio.h on my mac</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>...............\n\n/* Additional functionality provided by:\n * POSIX.1-1988\n */\n\n#if __DARWIN_C_LEVEL &gt;= 198808L\n#define L_ctermid   1024    /* size for ctermid(); PATH_MAX */\n\n__BEGIN_DECLS\n#include &lt;_ctermid.h&gt;  // here is the stdio.h:205:10\n\n#if defined(_DARWIN_UNLIMITED_STREAMS) || defined(_DARWIN_C_SOURCE)\nFILE    *fdopen(int, const char *) __DARWIN_ALIAS_STARTING(__MAC_10_6, __IPHONE_3_2, __DARWIN_EXTSN(fdopen));\n#else /* !_DARWIN_UNLIMITED_STREAMS &amp;&amp; !_DARWIN_C_SOURCE */\nFILE    *fdopen(int, const char *) __DARWIN_ALIAS_STARTING(__MAC_10_6, __IPHONE_2_0, __DARWIN_ALIAS(fdopen));\n#endif /* (DARWIN_UNLIMITED_STREAMS || _DARWIN_C_SOURCE) */\nint  fileno(FILE *);\n__END_DECLS\n#endif /* __DARWIN_C_LEVEL &gt;= 198808L */\n\n..................\n</code></pre>\n"}, {"tags": ["c", "arrays", "memory", "emulation", "paging"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569344505, "post_id": 58084876, "comment_id": 102564034, "body": "What do you mean by &quot;implement this paging&quot;? You have only mentioned sizes and arrays. That is not what I would describe as paging."}, {"owner": {"reputation": 46, "user_id": 10053326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0290d61510737012e0c23315a9452935?s=128&d=identicon&r=PG&f=1", "display_name": "Kozova1", "link": "https://stackoverflow.com/users/10053326/kozova1"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569344894, "post_id": 58084876, "comment_id": 102564199, "body": "I have 2 arrays and I need to &quot;mount&quot; a page (16KiB) of an array inside another one basically."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1569344993, "post_id": 58084876, "comment_id": 102564230, "body": "The simplest will be to do the memcpy. It may seem like a waste for a powerful pentium processor, but I&#39;m sure it will be fast enough."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1569345149, "post_id": 58084876, "comment_id": 102564284, "body": "There are mechanisms to implement virtualisation maps in both unix and windows, but you may find that you can&#39;t get the granularity. Generally these mechanisms have been designed around paging in portions of files, but they can be equally used to map in-memory objects."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569350249, "post_id": 58084876, "comment_id": 102566360, "body": "Please show how your code would look like if the &quot;mounting&quot; were implemented successfully. I.e. how would code use the feature. Maybe it can then be deduced what you mean by mounting."}, {"owner": {"reputation": 46, "user_id": 10053326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0290d61510737012e0c23315a9452935?s=128&d=identicon&r=PG&f=1", "display_name": "Kozova1", "link": "https://stackoverflow.com/users/10053326/kozova1"}, "edited": false, "score": 0, "creation_date": 1569507200, "post_id": 58084876, "comment_id": 102626407, "body": "By &quot;mounting&quot; I mean something like the linux command mount, but for an array and inside another one. But anyways, I saved the Flash EEPROM to a file and then used mmap to map it to implement this &quot;mounting&quot; or paging or however you wanna call this"}], "owner": {"reputation": 46, "user_id": 10053326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0290d61510737012e0c23315a9452935?s=128&d=identicon&r=PG&f=1", "display_name": "Kozova1", "link": "https://stackoverflow.com/users/10053326/kozova1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1569343590, "creation_date": 1569343590, "question_id": 58084876, "link": "https://stackoverflow.com/questions/58084876/how-to-implement-paging-of-array-inside-another-array", "title": "How to implement paging of array inside another array", "body": "<p>I'm writing an emulator for the <a href=\"https://www.nxp.com/docs/en/data-sheet/MC9S12DP256.pdf\" rel=\"nofollow noreferrer\">mc9s12dp256</a> which has the flash EEPROM memory (256KiB in size), which is divided into small pages 16KiB in size and loaded into the normal memory at offset 0x83FC from the start of the memory.</p>\n\n<p>I emulate the normal memory as an array of uint8_t of size 65536 and the flash EEPROM memory as an array of uint8_t and size 262144.</p>\n\n<p>My question is: How can I implement this paging, preferably without copying the entire page between the EEPROM memory array and the normal memory array, and if there is any way to \"mount\" it on there?</p>\n"}, {"tags": ["c", "ubuntu", "compilation"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1569343706, "post_id": 58084871, "comment_id": 102563673, "body": "Are you writing <code>flag</code> in front of <code>gcc</code>? Remove it. It&#39;s just plain wrong."}, {"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1569343843, "post_id": 58084871, "comment_id": 102563734, "body": "I did that by mistake."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1569343868, "post_id": 58084871, "comment_id": 102563747, "body": "Well, it&#39;s impossible to say why your code does not compile without code and error messages."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1569344006, "post_id": 58084871, "comment_id": 102563816, "body": "The reason has probably something to do with <code>c11</code> but if you do not provide more info it&#39;s impossible to say."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1569344270, "post_id": 58084871, "comment_id": 102563943, "body": "<code>-pipe</code> just avoids using files for temporary storage - is that required for local use, or for compilation by some online tool? It might make sense if they don&#39;t want their server cluttered with temporary files. All these options are <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.2.0/gcc/Invoking-GCC.html#Invoking-GCC\" rel=\"nofollow noreferrer\">documented</a>"}, {"owner": {"reputation": 113, "user_id": 1169205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f6b30e68d1620bbafd5c113b708886?s=128&d=identicon&r=PG", "display_name": "JimmyG", "link": "https://stackoverflow.com/users/1169205/jimmyg"}, "edited": false, "score": 0, "creation_date": 1569344549, "post_id": 58084871, "comment_id": 102564051, "body": "Start taking the flags out one by one.  When you find the offending flag, read the documentation and figure out what it&#39;s failing on.  Also, you name your file <code>filename.C</code>, don&#39;t forget that unix (Ubuntu) is case-sensitive and will balk if you use <code>filename.c</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1569344589, "post_id": 58084871, "comment_id": 102564073, "body": "Try deleting the <code>&lt;&gt;</code>. I guess it is only meant to mean &quot;insert your own file name here&quot;. I .e. replace <code>&lt;filename&gt;</code> with <code>filename.C</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569344720, "post_id": 58084871, "comment_id": 102564129, "body": "If the file is <code>filename.C</code>, there&#39;s a possibility that the file contains C++ code rather than C code \u2014 or that GCC assumes it contains C++ code when it is actually C code \u2014 and that it doesn&#39;t like what it sees because it is the other language.  File names on Ubuntu are case-sensitive: <code>filename.c</code> and <code>filename.C</code> are different files, and normally represent code in different languages (lower-case <code>c</code> for C code; upper-case <code>C</code> for C++ code).  (See the GCC documentation for <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.2.0/gcc/Overall-Options.html#Overall-Options\" rel=\"nofollow noreferrer\">Overall options</a>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1569345107, "post_id": 58084871, "comment_id": 102564271, "body": "Your question should include the exact text of the error message you get when you try to compile with <code>gcc -pipe -O2 -std=c11 &lt;filename&gt; -lm</code> or other explanation of what you mean by \u201cmy code is not compiling\u201d."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1569345201, "post_id": 58084871, "comment_id": 102564309, "body": "As I said. Include the error message and stop forcing people to guess what&#39;s wrong."}, {"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "edited": false, "score": 0, "creation_date": 1569345278, "post_id": 58084871, "comment_id": 102564342, "body": "I am getting a warning which says -std=c11 valid for C/obj C but not for C++"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1569345442, "post_id": 58084871, "comment_id": 102564413, "body": "Type the command <code>which gcc</code> and post the output"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1569345596, "post_id": 58084871, "comment_id": 102564479, "body": "Also, edit the question and add the <i>complete and exact</i> error message"}, {"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "edited": false, "score": 0, "creation_date": 1569345623, "post_id": 58084871, "comment_id": 102564497, "body": "output: /usr/bin/gcc"}, {"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "edited": false, "score": 0, "creation_date": 1569345640, "post_id": 58084871, "comment_id": 102564508, "body": "yes please wait"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1569346284, "post_id": 58084871, "comment_id": 102564788, "body": "That&#39;s not the error message you mentioned earlier?"}, {"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "edited": false, "score": 0, "creation_date": 1569346329, "post_id": 58084871, "comment_id": 102564804, "body": "lrwxrwxrwx 1 root root 5 May 20 21:38 /usr/bin/gcc -&gt; gcc-7"}, {"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "edited": false, "score": 0, "creation_date": 1569346408, "post_id": 58084871, "comment_id": 102564846, "body": "it changed after I changed the filename from C to c because someone said C is for C++"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1569346810, "post_id": 58084871, "comment_id": 102565003, "body": "Please don&#39;t alter your question after you get answers. That invalidates old answers. If you have a new problem, post a new question, but SO is not for changing your question iteratively until your code works."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": -1, "last_activity_date": 1569345112, "creation_date": 1569345112, "answer_id": 58085215, "question_id": 58084871, "link": "https://stackoverflow.com/questions/58084871/what-are-compiler-flags-forwhy-wont-my-code-compile/58085215#58085215", "title": "What are compiler flags for?Why won&#39;t my code compile?", "body": "<p>By \"&lt;filename&gt;\" they mean to substitute in the name of the file you want to compile. Including the literal string \"&lt;filename&gt;\" will not work.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "edited": false, "score": 0, "creation_date": 1569346471, "post_id": 58085424, "comment_id": 102564868, "body": "Yes I changed it."}, {"owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "edited": false, "score": 0, "creation_date": 1569347081, "post_id": 58085424, "comment_id": 102565117, "body": "I fixed it.Thanks."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": true, "score": 1, "last_activity_date": 1569345957, "creation_date": 1569345957, "answer_id": 58085424, "question_id": 58084871, "link": "https://stackoverflow.com/questions/58084871/what-are-compiler-flags-forwhy-wont-my-code-compile/58085424#58085424", "title": "What are compiler flags for?Why won&#39;t my code compile?", "body": "<p>The reason is the file ending. A capital C is interpreted as a C++ file. The solution is to just rename the file like this:</p>\n\n<pre><code>mv filename.C filename.c\n</code></pre>\n\n<blockquote>\n  <p>My question is if my code compiles when I do <code>gcc filename.C</code> why isn't it compiling when I do <code>gcc -pipe -O2 -std=c11 &lt;filename&gt; -lm</code></p>\n</blockquote>\n\n<p>See above. But there are some situations where it would not solve everything. While C11 gives some extensions to previous versions, it's not 100% backwards compatible.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10777793, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MVIB_6YLj4s/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hNhuN2R_5bURZ9z2BGpqlifzpKqg/mo/photo.jpg?sz=128", "display_name": "medmik", "link": "https://stackoverflow.com/users/10777793/medmik"}, "is_accepted": false, "score": 0, "last_activity_date": 1569351625, "creation_date": 1569351625, "answer_id": 58086660, "question_id": 58084871, "link": "https://stackoverflow.com/questions/58084871/what-are-compiler-flags-forwhy-wont-my-code-compile/58086660#58086660", "title": "What are compiler flags for?Why won&#39;t my code compile?", "body": "<p><code>-std=c11</code> is a correct option \nhowever you need at least <code>gcc 4.7</code> or higher to have this option</p>\n"}], "owner": {"reputation": 39, "user_id": 4888272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sd6IE.png?s=128&g=1", "display_name": "Matix", "link": "https://stackoverflow.com/users/4888272/matix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2858, "favorite_count": 0, "accepted_answer_id": 58085424, "answer_count": 3, "score": -1, "last_activity_date": 1569351625, "creation_date": 1569343583, "last_edit_date": 1569347570, "question_id": 58084871, "link": "https://stackoverflow.com/questions/58084871/what-are-compiler-flags-forwhy-wont-my-code-compile", "title": "What are compiler flags for?Why won&#39;t my code compile?", "body": "<p>I wrote a code in C in Ubuntu which checks for balanced brackets in the input given.I compiled it using gcc compiler and I am getting the correct output.This is actually a part of an online course and they are asking me to use the compiler flag </p>\n\n<pre><code>gcc -pipe -O2 -std=c11 filename -lm\n</code></pre>\n\n<p>I don't think I understand what I am supposed to do so I tried compiling using this flag and my code is not compiling. My question is if my code compiles when I do </p>\n\n<pre><code>gcc filename.c\n</code></pre>\n\n<p>why isn't it compiling when I do </p>\n\n<pre><code>gcc -pipe -O2 -std=c11 filename -lm\n</code></pre>\n\n<p>The error message I am getting is :</p>\n\n<pre><code>cc1plus: warning: command line option \u2018-std=c11\u2019 is valid for C/ObjC but not for C++\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct", "mapping"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1569342655, "post_id": 58084591, "comment_id": 102563204, "body": "It&#39;s a perfect approach."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569342704, "post_id": 58084591, "comment_id": 102563231, "body": "Don&#39;t forget that array indexes start at 0, so you need to use <code>arr[code-1]</code> if <code>code</code> goes from <code>1</code>."}, {"owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569348584, "post_id": 58084591, "comment_id": 102565721, "body": "Codes start at 1 and I initialised my arr[0] as &quot;&quot;. So it takes care of it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569352027, "post_id": 58084591, "comment_id": 102567126, "body": "But you declared it <code>arr[100]</code>, so the last index is <code>99</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1569352100, "post_id": 58084591, "comment_id": 102567158, "body": "You can declare it <code>const char *arr[] = {...}</code>, then it will automatically calculate the size from the number of initializers."}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1569342825, "creation_date": 1569342825, "answer_id": 58084683, "question_id": 58084591, "link": "https://stackoverflow.com/questions/58084591/is-an-initialised-2d-array-fine-for-mapping-consecutive-integers-to-strings-in-c/58084683#58084683", "title": "Is an initialised 2d array fine for mapping consecutive integers to strings in C?", "body": "<p>Suppose the array has error messages. Then a common approach is to define constants fo each error and print the message associated with it, for example:</p>\n\n<pre><code>#define ERR_NONE 0\n#define ERR_NOMEM 1\n#define ERR_BADNUM 2\n// etc\n</code></pre>\n\n<p>and define the array as:</p>\n\n<pre><code>const char *msgs[] = {\n    \"No error\",\n    \"Out of memory\",\n    \"Bad number\",\n    // etc\n};\n</code></pre>\n\n<p>and have a function to print the message, for example:</p>\n\n<pre><code>void printmsg(int code)\n{\n    printf(\"%s\\n\",msgs[code]);\n}\n</code></pre>\n\n<p>which can be called as</p>\n\n<pre><code>    printmsg(ERR_NOMEM);\n</code></pre>\n\n<p>For modularity, the <code>#define</code>s can be in e.g. <code>errors.h</code>, together with the prototype of <code>printmsg</code>, and the array can be in <code>errors.c</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "edited": false, "score": 0, "creation_date": 1569348347, "post_id": 58084717, "comment_id": 102565620, "body": "I might add 1 or 2 codes in the future but it will only be me handling this part of the code. So I might just stick to the initialised array."}], "tags": [], "owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "is_accepted": false, "score": 1, "last_activity_date": 1569342962, "creation_date": 1569342962, "answer_id": 58084717, "question_id": 58084591, "link": "https://stackoverflow.com/questions/58084591/is-an-initialised-2d-array-fine-for-mapping-consecutive-integers-to-strings-in-c/58084717#58084717", "title": "Is an initialised 2d array fine for mapping consecutive integers to strings in C?", "body": "<p>The only problem with your approach is that the codes can never change. You can't add intermediate codes without changing the entire code. But it should work. Also the first code should be zero or you'll have to either pad the array or shift the codes when accessing.</p>\n\n<p>Essentially what you have is an immutable hash table.</p>\n\n<pre><code>#define BASE_CODE 5\n#define CODE_BLUE 5\n#define CODE_GREEN 6\n\nconst char *responses[] = {'blue', 'green'};\nprintf(\"%s\\n\", responses[code - BASE_CODE]);\n</code></pre>\n\n<p>If you want to be able to change the codes (add, remove, insert codes in the middle of the sequence, verify if a code was properly referenced), then you should stick with the first approach, but add a hash function so you don't need to loop sequentially over the array.</p>\n"}, {"comments": [{"owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "edited": false, "score": 0, "creation_date": 1569348508, "post_id": 58084758, "comment_id": 102565685, "body": "There will be no gaps in the codes and they are predefined and wont be dynamic. I might need to add a couple of codes later but and I think I can manage the changes."}], "tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": true, "score": 2, "last_activity_date": 1569343146, "creation_date": 1569343146, "answer_id": 58084758, "question_id": 58084591, "link": "https://stackoverflow.com/questions/58084591/is-an-initialised-2d-array-fine-for-mapping-consecutive-integers-to-strings-in-c/58084758#58084758", "title": "Is an initialised 2d array fine for mapping consecutive integers to strings in C?", "body": "<p>Using a direct indexed array is a commonly used approach that works fine if the data never (rarely) changes, and there are not too many gaps, because you spend a record for every gap. At some point the management or the storage cost of the gaps may become an issue.</p>\n\n<p>If you need to cope with more dynamic compile-time updates to the data then the next best thing is a sorted array. If you can guarantee that your entries are always in order but perhaps there are gaps, or new entries added to the end, then you can binary chop your ordered array to quickly find the entry you want. You may want to do a start-up pass that checks the array is correctly ordered, but you only have to do that once.</p>\n\n<p>If you need to worry about runtime updates, then you seriously need to consider higher-level container abstractions such as mapping trees or hashmaps.</p>\n"}], "owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58084758, "answer_count": 3, "score": 0, "last_activity_date": 1569343146, "creation_date": 1569342427, "question_id": 58084591, "link": "https://stackoverflow.com/questions/58084591/is-an-initialised-2d-array-fine-for-mapping-consecutive-integers-to-strings-in-c", "title": "Is an initialised 2d array fine for mapping consecutive integers to strings in C?", "body": "<p>I have to map consecutive integer codes from 1 to 100 to strings in C. Normally, for a mapping of number to string, I would have something like this:</p>\n\n<pre><code>#define code1   1\n#define code2   2\n.\n.\n#define code100 100\n\nstruct map \n   {\n     int code;\n     char *msg;\n   }objs[100];\n</code></pre>\n\n<p>I would then loop over the objs and if the number matches, I would use the corresponding string of the obj array. Since I know that the numbers to be mapped are consecutive, I can just do this:</p>\n\n<pre><code>const char *arr[100] = { \"abc\", \"def\", ....... \"100th msg\"};\n</code></pre>\n\n<p>I can then forget the looping and just print arr[code]. Is this a bad approach? The only disadvantage I see is that when somebody else adds a code in the middle, they have to be careful about it. The advantage is obviously that I don't need to loop over the struct array. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 562, "user_id": 9319285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WcTj0.jpg?s=128&g=1", "display_name": "Jschriemer", "link": "https://stackoverflow.com/users/9319285/jschriemer"}, "edited": false, "score": 0, "creation_date": 1569342403, "post_id": 58084555, "comment_id": 102563086, "body": "What have you tried so far?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1569342440, "post_id": 58084555, "comment_id": 102563102, "body": "<code>int main(){}</code> then fill in the bit between <code>{</code> and <code>}</code>."}, {"owner": {"reputation": 1, "user_id": 8178642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eb1859f6533ad0b1c49cfca54282cc?s=128&d=identicon&r=PG&f=1", "display_name": "ABDUL TK", "link": "https://stackoverflow.com/users/8178642/abdul-tk"}, "edited": false, "score": 0, "creation_date": 1569342657, "post_id": 58084555, "comment_id": 102563206, "body": "Can u please provide me with the full answer"}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 3, "creation_date": 1569343086, "post_id": 58084555, "comment_id": 102563390, "body": "Not a chance. SO is for answers, not code request."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 11599275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HtnEyoblIq8/AAAAAAAAAAI/AAAAAAAAE8M/S6lkjvEatPU/photo.jpg?sz=128", "display_name": "Thomas Konstantin", "link": "https://stackoverflow.com/users/11599275/thomas-konstantin"}, "is_accepted": false, "score": 0, "last_activity_date": 1569353391, "creation_date": 1569353391, "answer_id": 58087037, "question_id": 58084555, "link": "https://stackoverflow.com/questions/58084555/c-program-that-reads-and-stores-a-series-of-integers/58087037#58087037", "title": "C Program that reads and Stores a series of integers", "body": "<pre><code>void main() {\n    int N,i,sum=0,temp;\n    printf(\"Please enter value of N\\n\");\n    scanf_s(\"%d\", &amp;N);\n    int *arr = (int*)malloc(sizeof(int)*N);\n    for (i = 0; i &lt; N; i++) {\n        printf(\"Please %d value of array \\n\",i+1);\n        scanf_s(\"%d\", &amp;temp);\n        arr[i] = temp;\n        sum += temp;\n    }\n    printf(\"Sum Of N Elemetes In Array Is %d\", sum);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8178642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eb1859f6533ad0b1c49cfca54282cc?s=128&d=identicon&r=PG&f=1", "display_name": "ABDUL TK", "link": "https://stackoverflow.com/users/8178642/abdul-tk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1569353391, "creation_date": 1569342301, "question_id": 58084555, "link": "https://stackoverflow.com/questions/58084555/c-program-that-reads-and-stores-a-series-of-integers", "title": "C Program that reads and Stores a series of integers", "body": "<p>How do I write a program that reads and stores a series of integer, first ask for N,then read the value into an array, and calculate the sum of the first N values?</p>\n"}]