[{"tags": ["c", "syntax"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1575504543, "post_id": 59186246, "comment_id": 104592911, "body": "Take care when doing this with pointer variables.  <code>int* a, b, c;</code> is a pointer and 2 ints, whereas <code>int *a, *b, *c;</code> is 3 pointers."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 12482789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99a957a7cb8bf720282b2ed61005767?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi breeder", "link": "https://stackoverflow.com/users/12482789/kiwi-breeder"}, "edited": false, "score": 0, "creation_date": 1575503870, "post_id": 59186261, "comment_id": 104592729, "body": "Thanks for your quick reply. Could you elaborate more on how exactly I should parse this? eg why exactly did <code>cli_sockfd</code> and <code>client_games_started[3]</code> get initialized like that when it&#39;s on the rhs?"}, {"owner": {"reputation": 153, "user_id": 12482789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99a957a7cb8bf720282b2ed61005767?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi breeder", "link": "https://stackoverflow.com/users/12482789/kiwi-breeder"}, "edited": false, "score": 1, "creation_date": 1575504105, "post_id": 59186261, "comment_id": 104592796, "body": "Oh nvm, I see. I was parsing it wrong. The syntax is essentially <code>int a,(b=c),d,e;</code>"}, {"owner": {"reputation": 602, "user_id": 12342718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvS6W.jpg?s=128&g=1", "display_name": "Bktero", "link": "https://stackoverflow.com/users/12342718/bktero"}, "edited": false, "score": 0, "creation_date": 1575505362, "post_id": 59186261, "comment_id": 104593105, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operator_precedence</a> : note that comma operator has lowest priority of all operators. See also <a href=\"https://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/&hellip;</a>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 602, "user_id": 12342718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvS6W.jpg?s=128&g=1", "display_name": "Bktero", "link": "https://stackoverflow.com/users/12342718/bktero"}, "edited": false, "score": 1, "creation_date": 1575505632, "post_id": 59186261, "comment_id": 104593168, "body": "@Bktero Except operator precedence doesn&#39;t apply, because neither the <code>=</code> nor the <code>,</code> are used as operators here. The comma <code>,</code> separates declarators in a declaration, and the <code>=</code> introduces the initializer which is an optional part of one declarator."}], "tags": [], "owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "is_accepted": true, "score": 5, "last_activity_date": 1575503606, "creation_date": 1575503606, "answer_id": 59186261, "question_id": 59186246, "link": "https://stackoverflow.com/questions/59186246/c-what-does-this-comma-separated-declaration-mean/59186261#59186261", "title": "C - What does this comma separated declaration mean", "body": "<pre><code>int master_sockfd, client_sockfds[3] = {0}, cli_sockfd, client_games_started[3];\n</code></pre>\n\n<p>is identical to:</p>\n\n<pre><code>int master_sockfd;\nint client_sockfds[3] = {0};\nint cli_sockfd;\nint client_games_started[3];\n</code></pre>\n\n<ul>\n<li><code>master_sockfd</code> and <code>cli_sockfd</code> are integers</li>\n<li><code>client_sockfds</code> is an array of 3 integers, all initialized to zero</li>\n<li><code>client_games_started</code> is an array of 3 integers</li>\n</ul>\n"}], "owner": {"reputation": 153, "user_id": 12482789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99a957a7cb8bf720282b2ed61005767?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi breeder", "link": "https://stackoverflow.com/users/12482789/kiwi-breeder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59186261, "answer_count": 1, "score": 1, "last_activity_date": 1575519673, "creation_date": 1575503509, "last_edit_date": 1575519673, "question_id": 59186246, "link": "https://stackoverflow.com/questions/59186246/c-what-does-this-comma-separated-declaration-mean", "title": "C - What does this comma separated declaration mean", "body": "<p>Apologies for the silly question, but I don't know how to find a reference for this. I found some code for a TCP server and this line is confusing me:</p>\n\n<p><code>int master_sockfd, client_sockfds[3] = {0}, cli_sockfd, client_games_started[3];</code></p>\n\n<p>None of the variables above have been initialized beforehand so it looks like it's being declared here. Can someone help me understand what this is saying? If I recall correctly <code>{0}</code> sets <code>int</code> to 0 but I can't understand it in this context. I'm also very confused on how there looks to be two declarations with three assignments. And yes, everything compiled without errors/warnings. Thanks!</p>\n"}, {"tags": ["c", "fgets", "strcmp"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 2, "creation_date": 1575503202, "post_id": 59186179, "comment_id": 104592564, "body": "Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? What are the relevant contents of the file (if it&#39;s being read correctly, just omit it and hardcode the contents)? I&#39;d like to be able to run this and see the issue. Also, best to show output as text rather than a screenshot. Thanks."}, {"owner": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "edited": false, "score": 0, "creation_date": 1575504527, "post_id": 59186179, "comment_id": 104592908, "body": "Are you shure that pass readed from file contains &#39;\\r&#39; or &#39;\\n&#39; at the end? If not, and the pass length is 20, you will write the trailing &#39;\\0&#39; over the buffer boundary."}], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 5791141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68cd2ee477fc0cf910e7400935670c3?s=128&d=identicon&r=PG&f=1", "display_name": "foreverska", "link": "https://stackoverflow.com/users/5791141/foreverska"}, "is_accepted": false, "score": 2, "last_activity_date": 1575504072, "creation_date": 1575504072, "answer_id": 59186315, "question_id": 59186179, "link": "https://stackoverflow.com/questions/59186179/strcmp-doesnt-work-on-same-strings-with-same-length/59186315#59186315", "title": "Strcmp doesn&#39;t work on same strings with same length", "body": "<p>How do you know it's not comparing correctly?  If it's by the printed statement you appear to have forgotten the newline character which means it probably won't be flushed to the screen without another print.</p>\n"}, {"tags": [], "owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "is_accepted": true, "score": 3, "last_activity_date": 1575504156, "creation_date": 1575504156, "answer_id": 59186324, "question_id": 59186179, "link": "https://stackoverflow.com/questions/59186179/strcmp-doesnt-work-on-same-strings-with-same-length/59186324#59186324", "title": "Strcmp doesn&#39;t work on same strings with same length", "body": "<p>If you add a <code>\\n</code> to the last <code>printf</code> you'll see it works fine.</p>\n\n<p>Your program is just exiting before it's flushed the stdout buffer.</p>\n"}], "owner": {"reputation": 101, "user_id": 9603817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CyCX2.jpg?s=128&g=1", "display_name": "Claudiu Scurtu", "link": "https://stackoverflow.com/users/9603817/claudiu-scurtu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59186324, "answer_count": 2, "score": 0, "last_activity_date": 1575504465, "creation_date": 1575502970, "last_edit_date": 1575504465, "question_id": 59186179, "link": "https://stackoverflow.com/questions/59186179/strcmp-doesnt-work-on-same-strings-with-same-length", "title": "Strcmp doesn&#39;t work on same strings with same length", "body": "<p>So, I have this code, where password is a string obtained by breaking into tokens a bigger string, and  pass obtained from a text file. I even used strcspn so i can remove '\\n' from pass.</p>\n\n<pre><code>    if (ok == 1){\n\n        char buffer[20];\n        snprintf(buffer, sizeof(buffer), \"%s.txt\", username);\n\n        chdir(\"./passwords\") ;\n\n        FILE *userf;\n        userf = fopen(buffer,\"r\");\n        if(userf == NULL){\n            perror(\"Eroare la fopen\");\n            exit(1);\n        } else\n            printf(\"Am deschis fisierul cu parola\\n\");\n\n        char pass[20];\n\n        if(fgets(pass, sizeof(pass), userf) == NULL){\n\n            perror(\"Eroare la fgets\");\n            exit(1);\n        } \n        pass [ strcspn(pass, \"\\r\\n\") ] = '\\0'; \n        printf(\"%s\\n%s\\n\",password, pass);\n        printf(\"%i %i\\n\",strlen(password), strlen(pass));\n\n        if(strcmp(password, pass) == 0){\n            printf(\"Connected\");\n        }\n    }\n</code></pre>\n\n<p>As you can see from the terminal it prints out the same string with the same length but strcmp for some reason doesn't return 0.I'm really confused.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8qzRr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8qzRr.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "string", "substring"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 12407006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDdN1_4sVdV_UwYwoiu4fvU1GqzhcBqZfM7ICrbPg=k-s128", "display_name": "Caio Pardal", "link": "https://stackoverflow.com/users/12407006/caio-pardal"}, "edited": false, "score": 1, "creation_date": 1575504073, "post_id": 59186254, "comment_id": 104592789, "body": "Thanks for your help! I&#39;ll change the name too :)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1575504994, "post_id": 59186254, "comment_id": 104593013, "body": "Hmmm... isn&#39;t <code>putchar(str[j]);</code> used to print a single character without calling a variadic function and providing a conversion-specifier? (your second approach is right on point)"}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 2, "last_activity_date": 1575505081, "last_edit_date": 1575505081, "creation_date": 1575503537, "answer_id": 59186254, "question_id": 59186172, "link": "https://stackoverflow.com/questions/59186172/program-to-print-all-substrings-of-a-given-string/59186254#59186254", "title": "Program to print all substrings of a given string", "body": "<p>The logic seems basically fine, but the formatting doesn't make much sense as this prints the digit values for each character and adds a newline for each print call. If you print the characters directly using <code>%c</code> formatting and only print a newline once you've emitted a full substring you'll have a more sensible result.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid subString(char *str, int n)\n{ \n    for (int len = 1; len &lt;= n; len++)\n    {     \n        for (int i = 0; i &lt;= n - len; i++)  \n        { \n            for (int j = i; j &lt;= i + len - 1; j++) \n            {\n                putchar(str[j]);\n            }\n\n            puts(\"\");\n        } \n    } \n} \n\nint main()  \n{ \n    char str[] = \"abc\";\n    subString(str, strlen(str)); \n    return 0; \n} \n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>a\nb\nc\nab\nbc\nabc\n</code></pre>\n\n<p>A little nitpick: I'd suggest calling this function <code>printSubStrings</code> since it produces a <a href=\"https://en.wikipedia.org/wiki/Side_effect_(computer_science)\" rel=\"nofollow noreferrer\">side effect</a>. The name <code>subString</code> doesn't seem to match the contract particularly well.</p>\n\n<p>You can also use the <code>\"%.*s\"</code> format to extract the substring chunk you want instead of the innermost loop:</p>\n\n<pre><code>void print_substrings(char *str, int n)\n{ \n    for (int len = 1; len &lt;= n; len++)\n    {     \n        for (int i = 0; i &lt;= n - len; i++)  \n        {\n            printf(\"%.*s\\n\", len, str + i);\n        }\n    } \n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1257, "user_id": 3995126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jcLzh.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/3995126/kelvin"}, "edited": false, "score": 0, "creation_date": 1599485106, "post_id": 63775946, "comment_id": 112781211, "body": "It is always good to add some explanation to answer"}], "tags": [], "owner": {"reputation": 1, "user_id": 8798419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c78cb32b957eb9054c9c8228dc9af6c?s=128&d=identicon&r=PG", "display_name": "ani4aniket", "link": "https://stackoverflow.com/users/8798419/ani4aniket"}, "is_accepted": false, "score": 0, "last_activity_date": 1599475201, "creation_date": 1599475201, "answer_id": 63775946, "question_id": 59186172, "link": "https://stackoverflow.com/questions/59186172/program-to-print-all-substrings-of-a-given-string/63775946#63775946", "title": "Program to print all substrings of a given string", "body": "<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint main()\n{\n    ios_base::sync_with_stdio(0); cin.tie(0); cout.tie(0);    \n    string str;\n    cin &gt;&gt; str;\n\n    for (int i = 0; i &lt; str.size(); i++) {\n        for (int len = 1 ; len &lt;= str.size() - i; len++)\n        {\n            cout &lt;&lt; str.substr(i, len) &lt;&lt; endl; // prints substring from starting index i till length len\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n<p>Input:</p>\n<pre><code>abcd\n</code></pre>\n<p>Output:</p>\n<pre><code>a\nab\nabc\nabcd\nb\nbc\nbcd\nc\ncd\nd\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 12407006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDdN1_4sVdV_UwYwoiu4fvU1GqzhcBqZfM7ICrbPg=k-s128", "display_name": "Caio Pardal", "link": "https://stackoverflow.com/users/12407006/caio-pardal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 59186254, "answer_count": 2, "score": 2, "last_activity_date": 1599475201, "creation_date": 1575502906, "last_edit_date": 1575503885, "question_id": 59186172, "link": "https://stackoverflow.com/questions/59186172/program-to-print-all-substrings-of-a-given-string", "title": "Program to print all substrings of a given string", "body": "<p>I am having trouble creating an algorithm that prints all substrings of a given string. This is my implementation now:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n// Function to print all sub strings \nvoid subString(char str[], int n)  \n{ \n    // Pick starting point \n    for (int len = 1; len &lt;= n; len++)  \n    {     \n        // Pick ending point \n        for (int i = 0; i &lt;= n - len; i++)  \n        { \n            //  Print characters from current \n            // starting point to current ending \n            // point.   \n            int j = i + len - 1;             \n            for (int k = i; k &lt;= j; k++) {\n                char data[n];\n                sprintf(data, \"%d\", str[k]);\n                printf(\"%s\\n\", data);\n            }\n        } \n    } \n} \n\n// Driver program to test above function \nint main()  \n{ \n    char str[] = \"abc\"; \n    subString(str, strlen(str)); \n    return 0; \n} \n</code></pre>\n\n<p>My code is not converting integers to strings. Could someone help me figure out what's wrong?</p>\n"}, {"tags": ["c", "sorting", "structure"], "answers": [{"comments": [{"owner": {"reputation": 538, "user_id": 11594030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DuGVdA7wZII/AAAAAAAAAAI/AAAAAAAAAAg/qppjoCgDM5E/photo.jpg?sz=128", "display_name": "Aayush Neupane", "link": "https://stackoverflow.com/users/11594030/aayush-neupane"}, "edited": false, "score": 0, "creation_date": 1575514589, "post_id": 59186145, "comment_id": 104594967, "body": "i cant belive i did that silly mistake ,though checked that more than 20 times before posting  it here"}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "reply_to_user": {"reputation": 538, "user_id": 11594030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DuGVdA7wZII/AAAAAAAAAAI/AAAAAAAAAAg/qppjoCgDM5E/photo.jpg?sz=128", "display_name": "Aayush Neupane", "link": "https://stackoverflow.com/users/11594030/aayush-neupane"}, "edited": false, "score": 0, "creation_date": 1575517562, "post_id": 59186145, "comment_id": 104595637, "body": "Learn to use a debugger. Single stepping through this code would have shown you the problem immediately."}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 2, "last_activity_date": 1575502646, "creation_date": 1575502646, "answer_id": 59186145, "question_id": 59186079, "link": "https://stackoverflow.com/questions/59186079/sorting-structures-with-name-not-working-in-c/59186145#59186145", "title": "sorting structures with name not working in C", "body": "<p>Your swap in the innner loop is wrong. You overwrite <code>newStudent[i]</code> with its original value instead of swapping. It should look like:</p>\n\n<pre><code>            temp1=newStudent[i];\n            newStudent[i]=newStudent[j];\n            newStudent[j]=temp1;\n</code></pre>\n"}], "owner": {"reputation": 538, "user_id": 11594030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DuGVdA7wZII/AAAAAAAAAAI/AAAAAAAAAAg/qppjoCgDM5E/photo.jpg?sz=128", "display_name": "Aayush Neupane", "link": "https://stackoverflow.com/users/11594030/aayush-neupane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 59186145, "answer_count": 1, "score": 0, "last_activity_date": 1575514156, "creation_date": 1575502157, "last_edit_date": 1575514156, "question_id": 59186079, "link": "https://stackoverflow.com/questions/59186079/sorting-structures-with-name-not-working-in-c", "title": "sorting structures with name not working in C", "body": "<pre><code>for(int i=0;i&lt;numberOfStudents;i++){\n        for(int j=i+1;j&lt;numberOfStudents;j++){\n            if (strcmp(newStudent[i].name,newStudent[j].name)&gt;0){\n\n                temp1=newStudent[i];\n                newStudent[i]=newStudent[j];\n                newStudent[j]=temp1;\n\n\n            }\n\n\n        }\n    }\n</code></pre>\n\n<p>when i try to run this code every thing goes fine but newStudent reamain same unaltered or unsorted.</p>\n\n<p>where <code>struct Student* newStudent = retrieve(filename, numberOfStudents);</code></p>\n\n<p>also retrive function definition is</p>\n\n<pre><code>struct Student* retrieve(const char* filename, int numberOfStudents) {\n\n    static struct Student temp[25];\n    FILE* fp;\n    fp = fopen(filename, \"r\");\n    if(fp==NULL){\n        printf(\"error occured while reading from the file\\n\");\n    }\n    for (int i = 0; i &lt; numberOfStudents; i++) {\n        fread(&amp;temp[i], sizeof(struct Student), 1, fp);\n    }\n    fclose(fp);\n    return temp;\n}\n</code></pre>\n\n<p>i cant find mistake code. Program shows no error only problem is that output is not sorted</p>\n"}, {"tags": ["c", "file"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12303289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965bdd413da4e195ad4b71df06ac932e?s=128&d=identicon&r=PG&f=1", "display_name": "yeebyeeb", "link": "https://stackoverflow.com/users/12303289/yeebyeeb"}, "edited": false, "score": 0, "creation_date": 1575503169, "post_id": 59185969, "comment_id": 104592553, "body": "Thank you very much. This is indeed a good solution. Is it possible to get the same result while opening and closing the file in the function?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 29, "user_id": 12303289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965bdd413da4e195ad4b71df06ac932e?s=128&d=identicon&r=PG&f=1", "display_name": "yeebyeeb", "link": "https://stackoverflow.com/users/12303289/yeebyeeb"}, "edited": false, "score": 0, "creation_date": 1575503250, "post_id": 59185969, "comment_id": 104592577, "body": "Sure, look into <code>fseek</code>. But it&#39;s really inefficient to open/close the file each time."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": false, "score": 1, "last_activity_date": 1575503283, "last_edit_date": 1575503283, "creation_date": 1575501483, "answer_id": 59185969, "question_id": 59185882, "link": "https://stackoverflow.com/questions/59185882/learning-to-process-files-trying-to-think-of-a-method-for-maintaining-file-poin/59185969#59185969", "title": "Learning to process files. Trying to think of a method for maintaining file pointer position", "body": "<p><code>FILE</code> already tracks position for you; you don't need to do it yourself. The problem is that you keep <em>re-opening</em> the file, which resets the location back to the beginning of the file each time.</p>\n\n<p>Open it once, read multiple times, then close it. Make your function take a <code>FILE *</code> parameter.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct Individual\n{\n    char LastName[30];\n    char gender;\n    unsigned int age;\n};\nint function(FILE *cfPtr, struct Individual *person)\n{\n    fscanf(cfPtr, \"%10s %c %3d\", &amp;person-&gt;LastName, &amp;person-&gt;gender, &amp;person-&gt;age);\n    // TODO: Check for failure\n    // TODO: Return appropriate value\n}\nint main(void)\n{\n    struct Individual person[3];\n    FILE *cfPtr;\n\n    cfPtr = fopen(\"C:\\\\Users\\\\Nick\\\\Desktop\\\\myfile\",\"r\");\n    // TODO: Check for failure \n\n    function(cfPtr, &amp;person[0]);\n    function(cfPtr, &amp;person[1]);\n\n    fclose(cfPtr);\n\n    printf(\"%s %c %d\", person[0].LastName, person[0].gender, person[0].age);\n    printf(\"%s %c %d\", person[1].LastName, person[1].gender, person[1].age);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 12303289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965bdd413da4e195ad4b71df06ac932e?s=128&d=identicon&r=PG&f=1", "display_name": "yeebyeeb", "link": "https://stackoverflow.com/users/12303289/yeebyeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575503283, "creation_date": 1575500871, "last_edit_date": 1575501627, "question_id": 59185882, "link": "https://stackoverflow.com/questions/59185882/learning-to-process-files-trying-to-think-of-a-method-for-maintaining-file-poin", "title": "Learning to process files. Trying to think of a method for maintaining file pointer position", "body": "<p>I am working on a program to store data from a text file within a structure. The goal is to perform the file processing completely within the function outside of the main. The function opens and closes the file, and when it is called by the main function it is to populate the particular structure array element is supposed to be performed upon. The test file I am using is just a text file containing 3 lines: </p>\n\n<p>Gates M 60</p>\n\n<p>Jobs M 55</p>\n\n<p>Jane F 45</p>\n\n<p>These should be populated into an array of structures when called by the function. However, when I call the function it only populates the same first line to all array elements, I believe because the file pointer resets everytime I call the function. How can I remedy this? My code is below!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct Individual\n{\n    char LastName[30];\n    char gender;\n    unsigned int age;\n};\nint function(struct Individual *person)\n{\n    FILE *cfPtr;\n    char holder[100]; \n    cfPtr = fopen(\"C:\\\\Users\\\\Nick\\\\Desktop\\\\myfile\",\"r\");\n    fscanf(cfPtr, \"%10s %c %3d\", &amp;person-&gt;LastName, &amp;person-&gt;gender, &amp;person-&gt;age);\n    fclose(cfPtr);\n}\nint main(void)\n{\n    struct Individual person[3];\n    function(&amp;person[0]);\n    function(&amp;person[1]);\n    printf(\"%s %c %d\", person[0].LastName, person[0].gender, person[0].age);\n    printf(\"%s %c %d\", person[1].LastName, person[1].gender, person[1].age);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "pthreads", "locking", "semaphore"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1575501029, "post_id": 59185854, "comment_id": 104591955, "body": "I&#39;m not really sure what you&#39;re asking, but why not use a barrier? Block until <code>n</code> threads are in the &quot;room&quot; (i.e. call the barrier fn), then release when capacity is reached and reset the barrier. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575503385, "post_id": 59185854, "comment_id": 104592610, "body": "Your question has me confused.  Your statement of preferred action says 3 students entered, 3 students exited.  However, you stated that 4 students must enter.  Then why 4 students entered then 4 students exited, you say that is wrong.  Please clarify"}, {"owner": {"reputation": 21, "user_id": 8885678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42ff9120be240bd207f5cba453d42339?s=128&d=identicon&r=PG&f=1", "display_name": "EMRE B\u0130NNAZ", "link": "https://stackoverflow.com/users/8885678/emre-b%c4%b0nnaz"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575504004, "post_id": 59185854, "comment_id": 104592767, "body": "@user3629249 sorry I accidentally deleted it."}], "owner": {"reputation": 21, "user_id": 8885678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42ff9120be240bd207f5cba453d42339?s=128&d=identicon&r=PG&f=1", "display_name": "EMRE B\u0130NNAZ", "link": "https://stackoverflow.com/users/8885678/emre-b%c4%b0nnaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575504032, "creation_date": 1575500667, "last_edit_date": 1575504032, "question_id": 59185854, "link": "https://stackoverflow.com/questions/59185854/how-do-i-vacate-the-room-correctly-with-semaphores-in-c", "title": "How do I vacate the room correctly with semaphores in c?", "body": "<p>Firstly I have a room for 4 student.Students come the room one by one and when they come room keeper makes some announce.For example when first student comes to room keeper says :\n\"Last 3 student for room.\"\nIn addition that students can not exit one by one.They must go out together.\nIn this point I get confused.I can not overcome it.Here is my code :</p>\n\n<pre><code>pthread_mutex_lock(&amp;lock);\n    sem_wait(&amp;rooms[roomNumber]); // it decreases the capacity of room.\n    sem_getvalue(&amp;rooms[roomNumber],&amp;stuCountInRoom); //stuCountInRoom =4 (initial value)\n    printf(\"Student %d began work in the %d.room.\\n\",stuNumber,(roomNumber+1));\n     if(stuCountInRoom!=0)\n          printf(\"  %d. Keeper said :'The last %d student.Let's get up !'\\n\",roomNumber+1,(stuCountInRoom));\n\n\n    pthread_mutex_unlock(&amp;lock);\n    sleep(5);\n    sem_post(&amp;rooms[roomNumber]);\n    printf(\"%d.student has left the %d.room\\n\",stuNumber,roomNumber+1);\n\n// sem_init(&amp;rooms[roomNumber],0,4);\n\n/*\nI want to see  output like that :\n\n\"n.student began work in the 1.room\n    Keeper said :'The last 3 student.Let's get up !\nx.student began work in the 1.room\n     Keeper said :'The last 2 student.Let's get up !\ny.student began work in the 1.room\n     Keeper said :'The last 1 student.Let's get up !\nz.student began work in the 1.room\nn.student has left the 1.room   \nx.student has left the 1.room\ny.student has left the 1.room\nz.student has left the 1.room\n\nBut sometimes I can not reach true value of stuCountInRoom.\nFor example I got output as like: \n\n\"n.student began work in the 1.room\n    Keeper said :'The last 2 student.Let's get up !\nx.student began work in the 1.room\n     Keeper said :'The last 1 student.Let's get up !\ny.student began work in the 1.room\n     Keeper said :'The last 1 student.Let's get up !\nz.student began work in the 1.room\nn.student has left the 1.room   \nx.student has left the 1.room\ny.student has left the 1.room\nz.student has left the 1.room */\n</code></pre>\n\n<p>How can I solve these question  ? Thanks your advices.\nRememberly there is one room in question.</p>\n"}, {"tags": ["c", "malloc", "heap-memory"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575500535, "post_id": 59185775, "comment_id": 104591851, "body": "The parameter <code>size</code> can be uninitialized. That&#39;s very strange allocation. Isn&#39;t <code>sizeof(addr[i])</code> typo? And those <code>size+(0x8-size%0x8)%0x8</code> and <code>size&#47;8</code> look really strange."}, {"owner": {"reputation": 11, "user_id": 9932076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e911c7e42c55f44e1c3655cc23059c06?s=128&d=identicon&r=PG&f=1", "display_name": "magnolia04", "link": "https://stackoverflow.com/users/9932076/magnolia04"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575502285, "post_id": 59185775, "comment_id": 104592302, "body": "Good catch on &quot;size&quot;, I fixed that by creating local_size variable. Thanks. size/8 is because I know size comes as multiple of 8. valgrind continues to report sameerrors though."}, {"owner": {"reputation": 11, "user_id": 9932076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e911c7e42c55f44e1c3655cc23059c06?s=128&d=identicon&r=PG&f=1", "display_name": "magnolia04", "link": "https://stackoverflow.com/users/9932076/magnolia04"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575502639, "post_id": 59185775, "comment_id": 104592422, "body": "So some more info: When I call the function, its being used for a fairly large array. ~/C-Prog/cs250_malloc/ $ ./aMalloc2 1024 Evaluating a Virtualized Heap of 1 KBs... numIterations: 1000 In vmalloc:: s: 32600 ns: 4075   i.e. size/8 = 4075. Is that a too big heap allocation I am doing? any suggestions??"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575503805, "post_id": 59185775, "comment_id": 104592716, "body": "OT: regarding: <code>addr = (addrs_t*)malloc(sizeof(addrs_t)*(size&#47;8));</code>  in C, the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code.  Also, strongly suggest using <code>calloc()</code> so easy to pass each allocation to <code>free()</code> before exiting the program."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575503924, "post_id": 59185775, "comment_id": 104592743, "body": "regarding: <code>if (addr==NULL) { printf(&quot;Null malloc addr: VMalloc\\n&quot;); }</code>  When the prior call to <code>malloc()</code> fails, the code must not try to use the returned value, so before the closing brace &#39;}&#39; should be inserted the statement: <code>exit( EXIT_FAILURE );</code>  Note both <code>exit()</code> and <code>EXIT_FAILURE</code> are exposed via the header file: <code>stdlib.h</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575504114, "post_id": 59185775, "comment_id": 104592801, "body": "OT: regarding: <code>printf(&quot;VMalloc Couldnt allocate mem\\n&quot;);</code> and <code>printf(&quot;Null malloc addr: VMalloc\\n&quot;)</code>  Error messages should be output to <code>stderr</code>, not <code>stdout</code>  And when the error is from a C library function, should also output to <code>stderr</code> the text reason the system thinks the error occurred.  the function: <code>perror()</code> is made for this purpose"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1575507630, "post_id": 59185775, "comment_id": 104593597, "body": "The last line of the valgrind report indicates your <code>vMem_part2</code> function, which calls <code>VPut</code>, seems to be the source of the uninitialized variable.  <a href=\"https://stackoverflow.com/posts/59185775/edit\">Edit</a> your question to include that function (and <code>VPut</code> as well), and indicate which line is line 226."}], "owner": {"reputation": 11, "user_id": 9932076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e911c7e42c55f44e1c3655cc23059c06?s=128&d=identicon&r=PG&f=1", "display_name": "magnolia04", "link": "https://stackoverflow.com/users/9932076/magnolia04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575521269, "creation_date": 1575500201, "last_edit_date": 1592644375, "question_id": 59185775, "link": "https://stackoverflow.com/questions/59185775/valgrind-errors-regarding-malloc-what-do-they-mean", "title": "valgrind errors regarding malloc: what do they mean?", "body": "<p>I get this Error and I am not sure what it means.</p>\n<pre><code>Evaluating a Virtualized Heap of 1 KBs...\nnumIterations: 1000\n\n==17272== Conditional jump or move depends on uninitialised value(s)\n==17272==    at 0x4C2FABC: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==17272==    by 0x108DCF: VMalloc (aMalloc_part2.c:157)\n==17272==    by 0x108EE5: VPut (aMalloc_part2.c:182)\n==17272==    by 0x109095: vMem_part2 (aMalloc_part2.c:240)\n==17272==    by 0x10935B: main (aMalloc_part2.c:283)\n==17272==  Uninitialised value was created by a stack allocation\n==17272==    at 0x108FD2: vMem_part2 (aMalloc_part2.c:226)\n</code></pre>\n<h3>This is my Relevant code:</h3>\n<pre><code>enter code here\n    // VMalloc\naddrs_t* VMalloc (size_t size) {\n    //get initial value before allignment\n    addrs_t* addr;\n    int initial_size = size;\n    size = (size+(0x8-size%0x8)%0x8);\n    int i=0;\n    //printf(&quot;In vmalloc\\n&quot;);\n    addr = (addrs_t*)malloc(sizeof(addrs_t)*(size/8));\n    if (addr==NULL) { printf(&quot;Null malloc addr: VMalloc\\n&quot;); }\n    i=0;\n    while(i&lt;size/8) {\n        addr[i]=(addrs_t)malloc(sizeof(addr[i])*8);\n        if (addr[i]==NULL) {\n            printf(&quot;VMalloc Couldnt allocate mem\\n&quot;);\n        }\n        i=i+1;\n    }\n    return addr;\n}\n</code></pre>\n<p><code>addr_t *addr</code> is a pointer to pointer. (<code>typedef addr_t char*</code>)</p>\n<p><strong>This is the part that calls VMalloc.</strong></p>\n<pre><code>for (i = 0; i &lt; numIterations; i++) {\n        addr1 = PUT(s, n+1);\n</code></pre>\n<h3>Function PUT looks like this:</h3>\n<p>There is aliasing using def so it may call PUT&lt;-&gt;VPut. They are same.</p>\n<pre><code>addrs_t* PUT (any_t data, size_t size) {\n    addrs_t* rtnVal = VMalloc (size);\n    for (int i=0;rtnVal[i]!=NULL;i++) {\n        memmove(rtnVal[i],data, 8); // copies byte of data\n    }\n    return rtnVal;\n}\n</code></pre>\n"}, {"tags": ["c", "syntax", "typedef"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1575497814, "post_id": 59185324, "comment_id": 104591046, "body": "I would say an almost definite &quot;no&quot;.. but let&#39;s see if I am wrong on that."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1575498712, "post_id": 59185324, "comment_id": 104591309, "body": "If it were allowed, it&#39;d still be unusable for functions with parameters, as there&#39;d be no way to name them for use in the function body..."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575498821, "post_id": 59185324, "comment_id": 104591349, "body": "The declaration of <code>void my_sig_catcher(int sig, SigCatcher *func)</code> is not compatible with the declaration <code>SigCatcher my_sig_catcher</code> or <code>void my_sig_catcher(int)</code>, I guess that <code>, SigCatcher *func</code> is just a typo."}], "answers": [{"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1575498414, "creation_date": 1575498414, "answer_id": 59185513, "question_id": 59185324, "link": "https://stackoverflow.com/questions/59185324/is-it-possible-to-use-a-typedef-for-function-definition/59185513#59185513", "title": "Is it possible to use a typedef for function DEFINITION?", "body": "<p>It's not possible. It's not possible, because the language grammar disallows it. The C standard even explicitly states, that it has the intent of disallowing such function definitions in <a href=\"https://port70.net/~nsz/c/c11/n1570.html#note162\" rel=\"nofollow noreferrer\">footnote 162</a> mentioned in <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.9.1p2\" rel=\"nofollow noreferrer\">6.9.1p2</a>. I copied the footnote below in the hopes it will clears things up:</p>\n\n<pre><code>162) The intent is that the type category in a function definition cannot be inherited from a typedef: \n\n      typedef int F(void);                          //   type F is ''function with no parameters\n                                                    //                  returning int''\n      F f, g;                                       //   f and g both have type compatible with F\n      F f { /* ... */ }                             //   WRONG: syntax/constraint error\n      F g() { /* ... */ }                           //   WRONG: declares that g returns a function\n      int f(void) { /* ... */ }                     //   RIGHT: f has type compatible with F\n      int g() { /* ... */ }                         //   RIGHT: g has type compatible with F\n      F *e(void) { /* ... */ }                      //   e returns a pointer to a function\n      F *((e))(void) { /* ... */ }                  //   same: parentheses irrelevant\n      int (*fp)(void);                              //   fp points to a function that has type F\n      F *Fp;                                        //   Fp points to a function that has type F\n</code></pre>\n\n<p>What's interesting, it's allowed for function declarations. So the following is possible:</p>\n\n<pre><code>SigCatcher my_sig_catcher;\n</code></pre>\n\n<p>But the definition has to be:</p>\n\n<pre><code>void SigCatcher(int some_name) { /*...*/ }\n</code></pre>\n"}], "owner": {"reputation": 1812, "user_id": 1714490, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DPfJX.png?s=128&g=1", "display_name": "ZioByte", "link": "https://stackoverflow.com/users/1714490/ziobyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59185513, "answer_count": 1, "score": 1, "last_activity_date": 1575530069, "creation_date": 1575497314, "last_edit_date": 1575530069, "question_id": 59185324, "link": "https://stackoverflow.com/questions/59185324/is-it-possible-to-use-a-typedef-for-function-definition", "title": "Is it possible to use a typedef for function DEFINITION?", "body": "<p>I am routinely using <code>typedef</code>s for type and function <em>declaration</em>.</p>\n\n<p>Question is: is it possible to <em>define</em> a function having a previously declared type (i.e.: signature)?</p>\n\n<p>I mean: given the well known declaration:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void (*signal(int sig, void (*func)(int)))(int);\n</code></pre>\n\n<p>or, better, it's (clearer) equivalent:</p>\n\n<pre><code>typedef void SigCatcher(int);\nSigCatcher *signal(int sig, SigCatcher *func);\n</code></pre>\n\n<p>how is it possible to define a <code>SigCatcher</code> function?</p>\n\n<p>of course I can define:</p>\n\n<pre><code>void my_sig_catcher(int sig, SigCatcher *func) {\n    ...\n}\n</code></pre>\n\n<p>but that doesn't make evident this is really a <code>SigCatcher</code>.\nWhat I would like is something like:</p>\n\n<pre><code>SigCatcher my_sig_catcher {\n    ...\n}\n</code></pre>\n\n<p>but this is not a valid construct.</p>\n\n<p>Is there some (not too contrived) way to achieve this?</p>\n"}, {"tags": ["c", "struct", "linked-list", "buffer", "binaryfiles"], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1575509643, "creation_date": 1575509643, "answer_id": 59186956, "question_id": 59185174, "link": "https://stackoverflow.com/questions/59185174/one-last-undesirable-node-on-single-linked-list/59186956#59186956", "title": "One Last Undesirable Node on Single Linked-list", "body": "<p>You're allocating the node for the next line of data (<code>proximoAluno</code>) <em>before</em> you know if you need it (at the end of the loop).</p>\n\n<p>You should only allocate the node after you know you have a line of data to store, at the start of the loop.  Be sure to handle the first line properly.</p>\n\n<pre><code>  alunoInicial = NULL;\n  proximoAluno = NULL;\n  while (fgets(buffer, (COMPRIMENTO_MAXIMO_DO_BUFFER + 1), arquivoBinario) != NULL)\n  {\n\n    /* Verificacao de erro no arquivo do tipo binario. */\n\n    if (teste == verdadeiro)  /* if (teste)*/\n    {\n      fclose(arquivoBinario);\n      return NULL;  /* 0 */\n    } /* if */\n\n\n    /* */\n\n    if (alunoInicial == NULL) {\n        alunoInicial = malloc(sizeof(tipoMediasAlunos));\n        proximoAluno = alunoInicial;\n    } else {\n        proximoAluno-&gt;proximo = malloc(sizeof(tipoMediasAlunos));\n        proximoAluno = proximoAluno-&gt;proximo;\n    }\n    proximoAluno-&gt;proximo = NULL;\n\n    strcpy(proximoAluno-&gt;dre, buffer);\n    fgets(buffer, (COMPRIMENTO_DA_MEDIA + 1), arquivoBinario);\n    proximoAluno-&gt;media = strtof(buffer, &amp;validacao);\n\n\n    /* */\n\n  } /* while */\n</code></pre>\n\n<p>Note that the pointer returned from <code>malloc</code> does not need to be cast, and the <code>proximo</code> pointer of each allocated node is set to NULL.</p>\n"}], "owner": {"reputation": 21, "user_id": 6876220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351ff6b0bc8f28f96f8c674ea1a9222?s=128&d=identicon&r=PG&f=1", "display_name": "luizflleitao", "link": "https://stackoverflow.com/users/6876220/luizflleitao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575516243, "creation_date": 1575496501, "last_edit_date": 1575516243, "question_id": 59185174, "link": "https://stackoverflow.com/questions/59185174/one-last-undesirable-node-on-single-linked-list", "title": "One Last Undesirable Node on Single Linked-list", "body": "<p>I am trying to get the data from the file  and put it on a single linked-list. However, my function is creating one last undesirable node. I guess that is a problem with the buffer, but I don't know how to get rid of it. Can anybody tell me why I have this extra node?</p>\n\n<pre><code>/* notas.h */\n\n#ifndef _PROVA06_  /* Inicio da diretiva do pre-processador. */\n#define _PROVA06_  \"@(#)notas.h $Revision$\"\n\n/* Definicao das macros. */\n\n#define COMPRIMENTO_DA_MEDIA                    4\n#define COMPRIMENTO_DO_DRE                      9\n#define COMPRIMENTO_MAXIMO_DO_BUFFER            9\n#define EOS                                    '\\0'\n\n/* Codigos de retorno. */\n\n#define OK                                          0\n#define NUMERO_DE_ARGUMENTOS_INVALIDO               1\n\n/* Definicao do tipo enumerado boolean. */\n\ntypedef enum\n{\n  falso = 0,\n  verdadeiro = 1\n} boolean;\n\n/* Definicao do tipo estruturado tipoMediasAlunos a partir da estrutura \nestruturaMediasAlunos. */\n\ntypedef struct estruturaMediasAlunos\n{\n  char dre[COMPRIMENTO_DO_DRE + 1];  /* 9 + 1 */\n  float media;\n  struct estruturaMediasAlunos *proximo;\n} tipoMediasAlunos;\n\n/* Prototipo da funcao ObterMediasAlunos. */\n\ntipoMediasAlunos *\nObterMediasAlunos(char *);\n\n#endif\n</code></pre>\n\n<p>Notas.c</p>\n\n<pre><code>/* notas.c */\n\n/* Inclusao dos arquivos de cabecalho da biblioteca padrao do sistema. */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n/* Inclusao do arquivo de cabecalho personalizado para a prova. */\n\n#include \"notas.h\"\n\n/* Implementacao da funcao ObterMediasAlunos. */\n\ntipoMediasAlunos *\nObterMediasAlunos(char *nomeArquivoBinario)\n{\n\n  /* Utilizacao de variaveis locais dentro da funcao ObterMediasAlunos. */\n\n  FILE *arquivoBinario;\n  char buffer[COMPRIMENTO_MAXIMO_DO_BUFFER];\n  boolean teste = falso;\n  tipoMediasAlunos *alunoInicial, *proximoAluno;\n  char *validacao;\n\n  /* */\n\n  alunoInicial = (tipoMediasAlunos *) malloc(sizeof(tipoMediasAlunos));\n\n  /* Verificacao da existencia de argumento nulo. */\n\n  if (!nomeArquivoBinario)\n    return NULL;  /* 0 */\n\n  /* Verificacao da existencia de argumento vazio. */\n\n  if (*nomeArquivoBinario == EOS)\n    return NULL;  /* 0 */\n\n  /* */\n\n  proximoAluno = alunoInicial;\n\n  /* Abertura para leitura do arquivo do tipo binario. */\n\n  arquivoBinario = fopen(nomeArquivoBinario, \"rb\");\n\n  /* Verificacao de erro na abertura para leitura do arquivo do tipo binario. */\n\n  if (!arquivoBinario)\n    return NULL;  /* 0 */\n\n  /* Varredura pelo arquivo do tipo binario. */\n\n  while (fgets(buffer, (COMPRIMENTO_MAXIMO_DO_BUFFER + 1), arquivoBinario) != NULL)\n  {\n\n    /* Verificacao de erro no arquivo do tipo binario. */\n\n    if (teste == verdadeiro)  /* if (teste)*/\n    {\n      fclose(arquivoBinario);\n      return NULL;  /* 0 */\n    } /* if */\n\n\n    /* */\n\n    strcpy(proximoAluno-&gt;dre, buffer);\n    fgets(buffer, (COMPRIMENTO_DA_MEDIA + 1), arquivoBinario);\n    proximoAluno-&gt;media = strtof(buffer, &amp;validacao);\n\n\n    /* */\n\n    proximoAluno-&gt;proximo = (tipoMediasAlunos *) \n    malloc(sizeof(tipoMediasAlunos));\n    proximoAluno = proximoAluno-&gt;proximo;\n\n  } /* while */\n\n  /* */\n\n  proximoAluno-&gt;proximo = NULL;\n  proximoAluno = alunoInicial;\n\n  /* */\n\n  while (proximoAluno-&gt;proximo != NULL)\n  {\n    printf(\"%s\\n\", proximoAluno-&gt;dre);\n    printf(\"%.1f\\n\\n\", proximoAluno-&gt;media);\n    proximoAluno = proximoAluno-&gt;proximo;\n  } /* while */\n\n  /* */\n\n  if (ferror(arquivoBinario))\n  {\n    fclose(arquivoBinario);\n    return NULL;  /* 0 */\n  } /* if */\n\n  /* */\n\n  if (fclose(arquivoBinario) != 0)\n    return NULL;  /* 0 */\n\n  return alunoInicial;\n\n} /* ObterMediasAlunos */\n</code></pre>\n\n<p>testeMedia.c</p>\n\n<pre><code>/* testeMedia.c */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"notas.h\"\n\n/* */\n\n#define NUMERO_DE_ARGUMENTOS                    2\n\n\n\n\n\n/* */\n\nint\nmain (int argc, char **argv)\n{\n\n  /* */\n\n  printf(\"\\n\\n\\n\");\n\n  /* */\n\n  (*ObterMediasAlunos)(*(argv + 1));\n\n\n  /* */\n\n  /* printf(\"\\n\\n\\n\\n\"); */\n\n\n\n  return OK;  /* */\n\n} /* main */\n</code></pre>\n\n<p>Compile and link</p>\n\n<pre><code>UBUNTU 00 --&gt; gcc -Wall -std=c11 -c notas.c\nUBUNTU 00 --&gt; gcc -Wall -std=c11 -c testeMedia.c \nUBUNTU 00 --&gt; gcc -Wall -std=c11 -o testeMedia notas.o testeMedia.o\n</code></pre>\n\n<p>output</p>\n\n<pre><code>UBUNTU 01 --&gt; ./testeMedia medias_finais_binario\n\n\n\n111239451\n3.7\n\n113277049\n2.7\n\n115092005\n1.9\n\n\n0.0\n\nUBUNTU 01 --&gt;\n</code></pre>\n\n<p>medias_finais_binario</p>\n\n<pre><code>11123945103.711327704902.711509200501.9^@\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1575495614, "post_id": 59185009, "comment_id": 104590394, "body": "run it on paper step by step"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1575495624, "post_id": 59185009, "comment_id": 104590395, "body": "@Ballen Abdullah There is an infinite loop.:) The output will be data 1data 2"}, {"owner": {"reputation": 25, "user_id": 12262248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDqWNAAIhJZCKXwlTgG7LS77GqpT0z_WYWCDtdwkQ=k-s128", "display_name": "Ballen Abdullah", "link": "https://stackoverflow.com/users/12262248/ballen-abdullah"}, "edited": false, "score": 0, "creation_date": 1575495864, "post_id": 59185009, "comment_id": 104590463, "body": "I ran it in a compiler and it prints nothing. I thought it would be data 1data 2 as well, but that wasn&#39;t the case. I don&#39;t know why it prints absolutely nothing. Shouldn&#39;t it at least print data 1?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1575495958, "post_id": 59185009, "comment_id": 104590497, "body": "I would think <code>data 1data 2</code>, but it might be stuck in the output buffer."}, {"owner": {"reputation": 2138, "user_id": 1919896, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7da069e9930c3bdcc9b7af581c0de4eb?s=128&d=identicon&r=PG", "display_name": "Icarus3", "link": "https://stackoverflow.com/users/1919896/icarus3"}, "edited": false, "score": 1, "creation_date": 1575496052, "post_id": 59185009, "comment_id": 104590529, "body": "After printf, try fflush(stdout); see what happens.."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575496072, "post_id": 59185009, "comment_id": 104590539, "body": "After the printf line, add <code>fflush(stdout);</code> to make sure that it is actually printed before the program continues. That way, you can be sure not to have any buffering issues."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1575496085, "post_id": 59185009, "comment_id": 104590541, "body": "Put a <code>\\n</code> at the end of the format string, or an <code>fflush(stdout)</code> after the <code>printf</code> if you want to see the output. Otherwise, the output ends up in the output buffer, and stays there because the code goes into an infinite loop."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1575496304, "post_id": 59185009, "comment_id": 104590606, "body": "If you put at <code>++c;</code> right before the <code>continue;</code>, it will fix the infinite loop. Then the flush is pretty much moot, since the output buffer will be flushed when the program ends. I get <code>data 1data 2data 4data 5</code>."}], "answers": [{"tags": [], "owner": {"reputation": 130, "user_id": 12047322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e4f4b7da77bc5228b1736df9ec85fc?s=128&d=identicon&r=PG&f=1", "display_name": "Devon", "link": "https://stackoverflow.com/users/12047322/devon"}, "is_accepted": false, "score": 1, "last_activity_date": 1575496463, "last_edit_date": 1575496463, "creation_date": 1575496334, "answer_id": 59185150, "question_id": 59185009, "link": "https://stackoverflow.com/questions/59185009/i-would-like-to-know-the-reason-for-the-terminal-output-for-this-code-in-an-exam/59185150#59185150", "title": "I would like to know the reason for the terminal output for this code in an exam question for C", "body": "<p>Once <code>c == 2</code> is true, then you will stay in the loop and keep hitting the if statement. So you'll never increment once <code>c</code> is set to 2.</p>\n\n<pre><code>int c = 2;\nif(c == 2) {\n    continue;\n}\nprintf(\"%d\", c); // this will never get hit once c is 2 since continue will \n//make the program jump to the next iteration of the loop.\n//Also by not flushing after the print, you aren't clearing the buffer and are then not accepting the next print.\n</code></pre>\n\n<p>You don't need to <code>fflush(stdout)</code> if the infinite loop is fixed though.</p>\n"}, {"tags": [], "owner": {"reputation": 318, "user_id": 11942119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec26748e8c53969f0d2e7d6c819af0cf?s=128&d=identicon&r=PG", "display_name": "fugiefire", "link": "https://stackoverflow.com/users/11942119/fugiefire"}, "is_accepted": true, "score": 1, "last_activity_date": 1575496476, "creation_date": 1575496476, "answer_id": 59185171, "question_id": 59185009, "link": "https://stackoverflow.com/questions/59185009/i-would-like-to-know-the-reason-for-the-terminal-output-for-this-code-in-an-exam/59185171#59185171", "title": "I would like to know the reason for the terminal output for this code in an exam question for C", "body": "<p>There are some buffering issues. If you add <code>fflush(stdout)</code> after the <code>printf</code>, you get <code>data 1data 2</code>. It doesn't go further than data2 because once <code>c</code> is equal to 2, it will keep hitting the if case and skipping the increment. Try the following and you will get <code>data 1data 2</code>:</p>\n\n<pre><code>int c = 0;\n\nwhile (c &lt; 5)\n{\n    if (c == 2)\n    {\n        continue;\n    }\n    printf (\"data %d\", ++c);\n    fflush(stdout);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "is_accepted": false, "score": 2, "last_activity_date": 1575496627, "creation_date": 1575496627, "answer_id": 59185199, "question_id": 59185009, "link": "https://stackoverflow.com/questions/59185009/i-would-like-to-know-the-reason-for-the-terminal-output-for-this-code-in-an-exam/59185199#59185199", "title": "I would like to know the reason for the terminal output for this code in an exam question for C", "body": "<p>By default, on POSIX systems, <code>stdout</code> is a buffered stream which will only flush when it hits a line feed or when it's explicitly asked to flush using <code>fflush(stdout);</code></p>\n\n<p>Add <code>fflush(stdout);</code> after the <code>printf()</code> call and then your program should output:</p>\n\n<pre><code>data 1data 2\n</code></pre>\n\n<p>After that, your program will be stuck in an infinite loop, because the condition in your <code>while</code> statement will always be evaluated to <code>true</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 12262248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDqWNAAIhJZCKXwlTgG7LS77GqpT0z_WYWCDtdwkQ=k-s128", "display_name": "Ballen Abdullah", "link": "https://stackoverflow.com/users/12262248/ballen-abdullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59185171, "answer_count": 3, "score": 1, "last_activity_date": 1575496627, "creation_date": 1575495482, "last_edit_date": 1575495893, "question_id": 59185009, "link": "https://stackoverflow.com/questions/59185009/i-would-like-to-know-the-reason-for-the-terminal-output-for-this-code-in-an-exam", "title": "I would like to know the reason for the terminal output for this code in an exam question for C", "body": "<p>The code is taken from an exam question which I did not know the answer for:</p>\n\n<pre><code>int c = 0;\n\nwhile (c &lt; 5)\n{\n    if (c == 2)\n    {\n        continue;\n    }\n\n    printf (\"data %d\", ++c);\n}\n</code></pre>\n\n<p>I know that it prints nothing, but I would like to know why?</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c", "struct", "warnings"], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 0, "last_activity_date": 1575528894, "creation_date": 1575528894, "answer_id": 59189769, "question_id": 59184989, "link": "https://stackoverflow.com/questions/59184989/beginner-c-confusing-me-with-warnings/59189769#59189769", "title": "*Beginner *C confusing me with Warnings", "body": "<p><code>scanf()</code> needs a <em>pointer</em> to the space (that is, the variable) where the scanned value will be stored. But your call hands over the <em>value</em> of <code>la[i].preis</code> which is a <code>float</code> that is cast automatically into a <code>double</code>.</p>\n\n<p>Change your code to give the address of <code>la[i].preis</code> to <code>scanf()</code> by using the <code>&amp;</code> operator like this:</p>\n\n<pre><code>scanf(\"%f\", &amp;la[i].preis);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12393512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHXS2.png?s=128&g=1", "display_name": "Domenic", "link": "https://stackoverflow.com/users/12393512/domenic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575528894, "creation_date": 1575495409, "question_id": 59184989, "link": "https://stackoverflow.com/questions/59184989/beginner-c-confusing-me-with-warnings", "title": "*Beginner *C confusing me with Warnings", "body": "<p>so I declared a float named price and when I try to compile it I get a waring that it would be a double, can someone tell me why C think that this is a double ?</p>\n\n<p>B3N2.c:37: warning: format specifies type 'float *' but the argument has type 'double' [-Wformat]\n                                        scanf(\"%f\", la[i].preis);</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n\n    struct Lager {\n        char artikel[200];\n        int anzahl;\n        float preis;\n    }  la[200];\n\n\n    printf(\"Wilkommen bei Lagerverwaltung 97\\n\\n\\nWas m\u00f6chten sie tun ?\\n\");\n\n    int exit = 0;\n    int x,v;\n    int f = 1;\n    int i =  0;\n\n    char ques;\n    int end;\n    do {\n        printf(\"\\n(1)Artikel hinzuf\u00fcgen\\n(2)Artikel entnehmen.\\n(3)Eintrag suchen.\\n(4)Lager ausgeben.\\n(5)Exit\\n\");\n        scanf(\"%x\",&amp;x);\n\n        switch (x) {\n            case 1://add\n                do {\n                    printf(\"\\nGebe den namen des Produkts an:  \");\n                    scanf(\"%s\", la[i].artikel);\n\n                    printf(\"\\nAnzahl der verf\u00fcgbaren Produkte:  \");\n                    scanf(\"%i\", &amp;la[i].anzahl);\n\n                    printf(\"\\ngib den preis des artikels an:  \");\n                    scanf(\"%f\", la[i].preis);\n\n                    printf(\"\\n\\nWeiteres Produkt hinzuf\u00fcgen ? (J/N)\");\n                    scanf(\"%s\", &amp;ques);\n\n                    switch (ques) {\n                        case 'J':\n                            v++;\n                            f++;\n                            break;\n                        case 'N':\n                            end = 1;\n                            v = 0;\n                            break;\n                        default:\n                            printf(\"Falsche Eingabe\\n\");\n                            break;\n                    }\n                } while (end != 1);\n                if (v &gt;= 2) {\n                    printf(\"Produkt wurde Erfolgreich hinzugef\u00fcgt\\n\\n\");\n                }else {\n                    printf(\"Produkte wurden Erfolgreich hinzugef\u00fcgt\\n\\n\");\n                }\n                break;\n\n</code></pre>\n\n<p>sorry for the dumb question but I tryed to fix it and now i'm totally Overwhelmed</p>\n"}, {"tags": ["c++", "c", "compiler-construction", "elf"], "comments": [{"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 2, "creation_date": 1575511272, "post_id": 59184882, "comment_id": 104594352, "body": "Generally, if the address is (or VMA+LMA are) zero, that means you have an ELF file that has not yet been linked and hence no addresses are assigned yet. The object file must be read by a linker, which will assign addresses. If the linker is a dynamic linker, it will assign them based on whatever&#39;s running right now. If it is a static linker, it will build a loadable image with pre-assigned addresses."}, {"owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "reply_to_user": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575559834, "post_id": 59184882, "comment_id": 104614749, "body": "I ma pretty sure its the final linked file.  There is a map generated along with it, but i feel as though there is still some stuff missing because even the map only shows offsets and no full addresses where the SRAM base address is present; as well as other memory base addresses."}, {"owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "reply_to_user": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575562414, "post_id": 59184882, "comment_id": 104616243, "body": "I stand corrected.  The map file does show ORIGIN + size for each section.  I wonder why the origin doesnt seem to be available as physical address in the elf.  Should it be or do i need to dig through elf headers to determine the origin for each section?"}, {"owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "reply_to_user": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575563678, "post_id": 59184882, "comment_id": 104616953, "body": "Torek - You were spot on!  Thank you.  The linker generates a relocatable object file with the extention .elf.  This file then runs through the linker a second time where a second core&#39;s relocatable object is also included.  They are fully linked and packaged in to a multi-core archive file which the debugger uses to load memory.  I opened the .mca with 7-zip and extracted the image file which had the addressed filled in. A+"}, {"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575566573, "post_id": 59184882, "comment_id": 104618391, "body": "Ah, you have one of those two-pass linkage setups for some reason. (I have no idea what the reason is on your system, but there probably is one. :-) )"}], "owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575495688, "creation_date": 1575494776, "last_edit_date": 1575495688, "question_id": 59184882, "link": "https://stackoverflow.com/questions/59184882/how-does-one-determine-the-physical-load-address-of-various-elf-file-sections", "title": "How does one determine the physical load address of various ELF file sections?", "body": "<p>When I objdump an ELF file emitted from GHS Multi, the physical address fields for each section is set to 0; however, section file offsets are available, but those offsets do not correspond to the memory region addresses from the linker directive file so alone, offset is not sufficient; as they appear to be file offset only. </p>\n\n<p>Question: How does one compute the physical load address for each section?  </p>\n\n<p>My idea is to read through the ELF file and determine the load address for each of the 90 sections and then check to see what memory range the address falls within. In this manner, I can tally memory usage for each memory region; internal sram, external sram, flash, dataflash, etc.</p>\n\n<p>Is the idea flawed? Is there something else I am missing?</p>\n\n<p>No virtual addressing is used.  It is a simple executable intended for a 32-bit micro-controller.  We are running an RTOS on a Renesas RH850. There is no MMU or MPU active. The program entry point is hooked directly to the processor reset vector; exception: We use a small boot loader in production but jump directly from the boot loader to the start address of the image.</p>\n\n<p>I wish I could share the map file or ELF, but unfortunately, it is not mine to share. I can, however, share the output of <code>readelf</code>.</p>\n\n<p>There are 92 section headers, starting at offset 0xa2d6b0:</p>\n\n<pre><code>Section Headers:\n  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al\n  [ 0]                   NULL            00000000 000000 000000 00      0   0  0\n  [ 1] /DISCARD/         PROGBITS        00000000 000000 000000 00      0   0  0\n  [ 2] .text             PROGBITS        00000000 000040 0c596a 00  AX  0   0  2\n  [ 3] .data             PROGBITS        00000000 0c59b0 0038b8 00  WA  0   0  8\n  [ 4] .bss              NOBITS          00000000 000000 0033b0 00  WA  0   0  8\n  [ 5] .entry_section    PROGBITS        00000000 0c9268 0000e8 00  AX  0   0  2\n  [ 6] .vectorTableCOde  PROGBITS        00000000 0c9350 000004 00  AX  0   0  2\n  [ 7] .rela.text        RELA            00000000 0c9354 0a4b14 0c     89   2  4\n  [ 8] .rela.entry_secti RELA            00000000 16de68 000108 0c     89   5  4\n  [ 9] .rela.vectorTable RELA            00000000 16df70 00000c 0c     89   6  4\n  [10] .rodata           PROGBITS        00000000 16df7c 135928 00   A  0   0  4\n  [11] .note.renesas     NOTE            00000000 2a38a4 000050 00      0   0  4\n  [12] .bss_sram         NOBITS          00000000 000000 07acd0 00  WA  0   0  8\n  [13] .rbss             NOBITS          00000000 000000 00b5dc 00  WA  0   0  8\n  [14] .rela.data        RELA            00000000 2a38f4 002124 0c     89   3  4\n  [15] .rela.rodata      RELA            00000000 2a5a18 00d41c 0c     89  10  4\n  [16] .rela.ghsinfo     RELA            00000000 2b2e34 000774 0c     89  88  4\n  [17] .slbss            NOBITS          00000000 000000 003534 00  WA  0   0  8\n  [18] .applicationInfo  PROGBITS        00000000 2b35a8 000040 00   A  0   0  4\n  [19] .applicationEnd   PROGBITS        00000000 2b35e8 000014 00   A  0   0  4\n  [20] .R_FDL_Text       PROGBITS        00000000 2b35fc 0016ea 00  AX  0   0  2\n  [21] .rela.R_FDL_Text  RELA            00000000 2b4ce8 001278 0c     89  20  4\n  [22] .R_FDL_Const      PROGBITS        00000000 2b5f60 000014 00   A  0   0  4\n  [23] .R_FDL_Data       NOBITS          00000000 000000 000064 00  WA  0   0  4\n  [24] .OS_CONST         PROGBITS        00000000 2b5f80 0002b4 00   A  0   0 16\n  [25] .rela.OS_CONST    RELA            00000000 2b6234 000624 0c     89  24  4\n  [26] .OS_CODE          PROGBITS        00000000 2b6858 0114c0 00  AX  0   0  4\n  [27] .rela.OS_CODE     RELA            00000000 2c7d18 0094b0 0c     89  26  4\n  [28] .OS_CORE0_CONST   PROGBITS        00000000 2d11c8 002af0 00   A  0   0  8\n  [29] .OS_CORE0_VAR_NOI NOBITS          00000000 000000 001604 00  WA  0   0  8\n  [30] .rela.OS_CORE0_CO RELA            00000000 2d3cb8 0040bc 0c     89  28  4\n  [31] .OS_STACK_BLETASK NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [32] .OS_STACK_BSWTASK NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [33] .OS_STACK_CANCM_T NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [34] .OS_STACK_CANCOM_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [35] .OS_STACK_CLITASK NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [36] .OS_STACK_CPUMONI NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [37] .OS_STACK_CHIMEAP NOBITS          00000000 000000 001388 00  WA  0   0  4\n  [38] .OS_STACK_CHIMEDR NOBITS          00000000 000000 000fa0 00  WA  0   0  4\n  [39] .OS_STACK_DIRANAB NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [40] .OS_STACK_DIRANAD NOBITS          00000000 000000 000320 00  WA  0   0  4\n  [41] .OS_STACK_EXTAMPT NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [42] .OS_STACK_HWTIMER NOBITS          00000000 000000 000320 00  WA  0   0  4\n  [43] .OS_STACK_IPC2TAS NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [44] .OS_STACK_IPCMPTA NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [45] .OS_STACK_IDLETAS NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [46] .OS_STACK_IPCGATE NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [47] .OS_STACK_KEYTASK NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [48] .OS_STACK_LOGGERT NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [49] .OS_STACK_MODULEM NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [50] .OS_STACK_NVMTASK NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [51] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [52] .OS_STACK_OSCORE_ NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [53] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [54] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [55] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [56] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [57] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [58] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [59] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [60] .OS_STACK_OSCORE_ NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [61] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [62] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [63] .OS_STACK_POLLING NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [64] .OS_STACK_PWRAMPT NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [65] .OS_STACK_RTCTASK NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [66] .OS_STACK_TESTSIM NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [67] .OS_STACK_TIMERTA NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [68] .OS_STACK_VEHCFG3 NOBITS          00000000 000000 000960 00  WA  0   0  4\n  [69] .OS_STACK_VEHCFG4 NOBITS          00000000 000000 000320 00  WA  0   0  4\n  [70] .OS_STACK_VEHCFG5 NOBITS          00000000 000000 0004b0 00  WA  0   0  4\n  [71] .OS_STACK_VIDEOIN NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [72] .OS_STACK_HWPWRCT NOBITS          00000000 000000 0005dc 00  WA  0   0  4\n  [73] .OS_STACK_SENSORT NOBITS          00000000 000000 000514 00  WA  0   0  4\n  [74] .OS_STACK_STARTUP NOBITS          00000000 000000 0008fc 00  WA  0   0  4\n  [75] .OS_STACK_SYSCTRL NOBITS          00000000 000000 000dac 00  WA  0   0  4\n  [76] .OS_STACK_VEHCFG1 NOBITS          00000000 000000 0005dc 00  WA  0   0  4\n  [77] .OS_STACK_VEHCFG2 NOBITS          00000000 000000 0005dc 00  WA  0   0  4\n  [78] .OS_EXCVEC_CORE0_ PROGBITS        00000000 2d7d80 0001fc 00  AX  0   0 512\n  [79] .OS_INTVEC_CORE0_ PROGBITS        00000000 2d7f80 000800 00  AX  0   0 512\n  [80] .rela.OS_EXCVEC_C RELA            00000000 2d8780 000180 0c     89  78  4\n  [81] .rela.OS_INTVEC_C RELA            00000000 2d8900 001800 0c     89  79  4\n  [82] .OS_VAR_NOCACHE_N NOBITS          00000000 000000 00000c 00  WA  0   0  4\n  [83] .OS_CORESTATUS_CO NOBITS          00000000 000000 000014 00  WA  0   0  4\n  [84] .OS_BARRIER_CORE0 NOBITS          00000000 000000 000008 00  WA  0   0  4\n  [85] .bootstrap        PROGBITS        00000000 2da100 000040 00  AX  0   0  2\n  [86] .rela.bootstrap   RELA            00000000 2da140 000018 0c     89  85  4\n  [87] .gstackfix        PROGBITS        00000000 000000 000000 00      0   0  4\n  [88] .ghsinfo          NOTE            00000000 2da158 000480 00      0   0  1\n  [89] .symtab           SYMTAB          00000000 2da5d8 261080 10     90 110134  4\n  [90] .strtab           STRTAB          00000000 53b658 4f173c 00      0   0  1\n  [91] .shstrtab         STRTAB          00000000 a2cd94 00091c 00      0   0  1\nKey to Flags:\n  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),\n  L (link order), O (extra OS processing required), G (group), T (TLS),\n  C (compressed), x (unknown), o (OS specific), E (exclude),\n  p (processor specific)\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "memory", "allocation"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 2, "creation_date": 1575493704, "post_id": 59184633, "comment_id": 104589760, "body": "array indexing is identical to pointer arithmetic:  a[b] = *(a+b) = *(b+a) = b[a]   Have a look at this <a href=\"https://stackoverflow.com/questions/381542/with-arrays-why-is-it-the-case-that-a5-5a\" title=\"with arrays why is it the case that a5 5a\">stackoverflow.com/questions/381542/&hellip;</a>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575494856, "post_id": 59184633, "comment_id": 104590127, "body": "Yes, you can use a pointer as if it were an array, but <i>only if the pointer points to valid memory</i>.  If it doesn&#39;t (as in your <code>int* ptr;</code> example), bad things happen. Please see <a href=\"https://stackoverflow.com/questions/37087286/c-program-crashes-when-adding-an-extra-int/37087465#37087465\">this answer</a> to a similar question."}, {"owner": {"reputation": 114, "user_id": 12374737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79d03d854faff0335fd33b88f7e8ca0?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Hellmers", "link": "https://stackoverflow.com/users/12374737/robin-hellmers"}, "edited": false, "score": 0, "creation_date": 1575540466, "post_id": 59184633, "comment_id": 104604028, "body": "Yes Jerry, my fault of not being consistent."}], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 12374737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79d03d854faff0335fd33b88f7e8ca0?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Hellmers", "link": "https://stackoverflow.com/users/12374737/robin-hellmers"}, "edited": false, "score": 0, "creation_date": 1575540724, "post_id": 59184773, "comment_id": 104604157, "body": "Then if I initialize an integer <code>int myint = 5</code>, then a pointer to that integer address <code>int* ptr = &amp;myint</code> and lastly start using <code>ptr</code> as an array by <code>ptr[1] = 6</code>, <code>ptr[2] = 7</code>. Then I would guess that only the first address to the value <code>5</code> would be valid and the next two values might result in memory corruption or segmentation fault?"}, {"owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "reply_to_user": {"reputation": 114, "user_id": 12374737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79d03d854faff0335fd33b88f7e8ca0?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Hellmers", "link": "https://stackoverflow.com/users/12374737/robin-hellmers"}, "edited": false, "score": 0, "creation_date": 1575552683, "post_id": 59184773, "comment_id": 104610734, "body": "@robin Correct, ptr[0] would be safe, but ptr[1], ptr[2] etc. would be unsafe. I will update the answer to clarify that."}], "tags": [], "owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "is_accepted": true, "score": 0, "last_activity_date": 1575857589, "last_edit_date": 1575857589, "creation_date": 1575494125, "answer_id": 59184773, "question_id": 59184633, "link": "https://stackoverflow.com/questions/59184633/c-declaring-a-pointer-and-then-use-it-as-an-array-memory-allocation/59184773#59184773", "title": "C: Declaring a pointer and then use it as an array, memory allocation", "body": "<p>No, your example is not safe.</p>\n\n<p>Your <code>ptr</code> variable is not explicitly initialized.</p>\n\n<p>If <code>ptr</code> is a local variable, it will be initialized to a undefined (i.e. random) value. Thus, <code>*ptr = 5</code> will write the value 5 to a random memory location. This will cause either a memory corruption or (more likely) a segmentation fault. See the following example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int *ptr;    /* Local variables are not intitialized and contain a random value */\n    printf(\"ptr contains address %p\\n\", ptr);   /* Prints a random value */\n    ptr[0] = 123;  /* BAD: On macOS causes memory corruption */\n    return 0;\n}\n</code></pre>\n\n<p>See also note [1] below.</p>\n\n<p>If <code>ptr</code> is a global variable, it will be initialized to zero. This <code>*ptr = 5</code> will write the value 5 to virtual address 0, which most likely will cause a segmentation fault.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint *ptr;  /* Global variables are initialized to zero */\n\nint main(void)\n{\n    printf(\"ptr contains address %p\\n\", ptr);  /* Prints 0x0 */\n    ptr[0] = 123;  /* BAD: On macOS causes \"Segmentation fault: 11\" */\n    return 0;\n}\n</code></pre>\n\n<p>The same is true for static variables:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    static int *ptr;    /* Static variable are initialized to zero */\n    printf(\"ptr contains address %p\\n\", ptr);   /* Prints 0x0 */\n    ptr[0] = 123;  /* BAD: On macOS causes \"Segmentation fault: 11\" */\n    return 0;\n}\n</code></pre>\n\n<p>If you want to use a pointer that does not point to an array, you should explicitly allocate the memory, for example by calling <code>malloc</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int *ptr;    /* Local variables are not intitialized and contain a random value */\n\n/* Explicitly allocate enough memory to store one int value */\n    ptr = malloc(sizeof(int));\n    if (!ptr) {            \n        fprintf(stderr, \"Out of memory\");\n        exit(1);\n    }\n    printf(\"ptr contains address %p\\n\", ptr);   /* Prints a random value \"on the heap\" */\n\n    *ptr = 111;  /* OK */\n    printf(\"*ptr contains value %d\\n\", *ptr);   /* OK, 111 */\n    printf(\"ptr[0] contains value %d\\n\", ptr[0]);   /* OK, 111 */\n\n    ptr[0] = 222;  /* OK */\n    printf(\"*ptr contains value %d\\n\", *ptr);   /* OK, 222 */\n    printf(\"ptr[0] contains value %d\\n\", ptr[0]);   /* OK, 222 */\n\n    /* Must explicitly free memory after you are done with it, otherwise you have a memory leak */\n    free(ptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>If you make a pointer point to an int, it is safe to read from or write to the de-referenced pointer either using <code>*p</code> or <code>p[0]</code> (which are essentially the same thing), but <code>p[1]</code> is not safe:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int foo = 111;\n    int bar = 222;\n    int *ptr = &amp;bar;\n\n    printf(\"Address of ptr %p\\n\", &amp;ptr);   /* An address on the stack */\n                                        /* Some random value */\n                                        /* Note: this is the address OF the ptr variable, */\n                                        /*       and not the address stored IN ptr */\n\n    printf(\"Address of bar %p\\n\", &amp;bar);   /* An address on the stack */\n                                        /* Exact difference with ptr depends on compiler etc. */\n                                        /* On macOS: 12 bytes after address of ptr */\n\n    printf(\"Address of foo %p\\n\", &amp;foo);   /* An address on the stack */\n                                        /* Exact difference with bar depends on compiler etc. */\n                                        /* On macOS: 4 bytes after address of bar */\n\n    printf(\"foo contains value %d\\n\", foo);   /* 111 */\n    printf(\"bar contains value %d\\n\", bar);   /* 222 */\n    printf(\"ptr contains address %p\\n\", ptr);   /* The same as address of bar above */\n\n    ptr[0] = 333;  /* Perfectly safe, changes the value of bar */\n\n    printf(\"bar contains value %d\\n\", bar);  /* 333 */\n\n    ptr[1] = 444;  /* BAD technically the behavior is undefined */\n                /* But most likely will change the value of foo */\n                /* Because most likely foo is stored after bar on the stack */\n\n    printf(\"foo contains value %d\\n\", foo);  /* On macOS: 444 */\n\n    return 0;\n}\n</code></pre>\n\n<p>Note [1]: Accidentally \"buffer overflows\" are a very common problem in C programs, particularly when dealing with strings. This is one of the most common mistakes for novice C programmers. See below for an example. Many viruses exploit such bugs to craft a special string to force a very carefully controlled overflow which causes the function return address (which is also stored on the stack) to be overwritten. When the function returns, instead of returning to the calling function, it returns to some address carefully chosen by the attacker. This allows the attacker to execute some code of her choosing. I think I am not exaggerating when I say that a very large fraction of viruses work in this way. So, be careful and pay very close attention to your memory management!!! See <a href=\"https://developer.apple.com/library/archive/documentation/Security/Conceptual/SecureCodingGuide/Articles/BufferOverflows.html\" rel=\"nofollow noreferrer\">https://developer.apple.com/library/archive/documentation/Security/Conceptual/SecureCodingGuide/Articles/BufferOverflows.html</a> for more details.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    int foo = 111;\n    char str[5];\n\n    printf(\"foo contains value %d\\n\", foo);   /* 111 */\n\n    strcpy(str, \"12345678\");  /* BAD: Overflow! Writing 9 bytes into a 5 byte string */\n                            /* (9 not 8, because of the terminating 0 byte ) */\n                            /* Modern operating systems / compilers / processors catch this */\n                            /* On my macOS, I get \"Abort trap 6\" */\n\n    /* Technically, behavior is undefined */\n    /* In practice, foo is overwritten */\n\n    printf(\"foo contains value %d\\n\", foo);   /* With older operating systems / compilers / */\n                                            /* processors this would show a changed value */\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 495, "user_id": 5791141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68cd2ee477fc0cf910e7400935670c3?s=128&d=identicon&r=PG&f=1", "display_name": "foreverska", "link": "https://stackoverflow.com/users/5791141/foreverska"}, "is_accepted": false, "score": 0, "last_activity_date": 1575494140, "creation_date": 1575494140, "answer_id": 59184778, "question_id": 59184633, "link": "https://stackoverflow.com/questions/59184633/c-declaring-a-pointer-and-then-use-it-as-an-array-memory-allocation/59184778#59184778", "title": "C: Declaring a pointer and then use it as an array, memory allocation", "body": "<p>When you declare a local variable it is initialized with a random value that was in the stack.  So when you say <code>int *x</code>; the value of that <code>int*</code> is essentially random.  The problem of using the pointer in this state is you don't know where it's pointing.  Is it valid memory?  Is it pointing to memory you don't want to overwrite?</p>\n\n<p>You must initialize a pointer with <strong><em>some</em></strong> value before using it if you expect it to work reliably.  This can be an array on the stack or a memory location reserved by malloc.</p>\n"}], "owner": {"reputation": 114, "user_id": 12374737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79d03d854faff0335fd33b88f7e8ca0?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Hellmers", "link": "https://stackoverflow.com/users/12374737/robin-hellmers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 59184773, "answer_count": 2, "score": 0, "last_activity_date": 1575857589, "creation_date": 1575493274, "question_id": 59184633, "link": "https://stackoverflow.com/questions/59184633/c-declaring-a-pointer-and-then-use-it-as-an-array-memory-allocation", "title": "C: Declaring a pointer and then use it as an array, memory allocation", "body": "<p>When discussing pointers and arrays, the explanations often tell that initializing an array and then initializing a pointer to the same memory location does make you able to use that pointer in the same way as the first array:</p>\n\n<pre><code>int myIntArray[3] = {5, 6, 7};\nint* ptr = myIntArray; // ptr[2] = myIntArray[2] = 7\n</code></pre>\n\n<p>I understand that this works as the allocation of memory on the stack is done with the first initialization <code>int myIntArray[3]</code>. But if one creates a pointer, it does not allocate potential memory for an array.</p>\n\n<p>Thereby is my question, is it safe to create a pointer and use it as an array directly or might some other memory used be overwritten or such?</p>\n\n<pre><code>int* ptr;\n*ptr = 5;\n*(ptr+1) = 6;\n*(ptr+2) = 7;\n</code></pre>\n\n<p>My guess is that if the address <code>(ptr+2)</code> would contain some previously allocated memory, such as an earlier initialized variable, the computer would reallocate <code>ptr</code> and <code>(ptr+1)</code> to some place were <code>(ptr+2)</code> is not used since before.</p>\n"}, {"tags": ["c", "arrays", "string", "variables"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1575502871, "post_id": 59184615, "comment_id": 104592484, "body": "Using a float is both overkill and error-prone. Those &quot;special functions&quot; you want to avoid for whatever reason get the digits of an integer with a simple %10. Given an integer x, x%10 is its rightmost digit. Then divide it by 10 (x /= 10) to strip that digit, and get the next, etc."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "edited": false, "score": 0, "creation_date": 1575494158, "post_id": 59184715, "comment_id": 104589902, "body": "is it possible to do without functions like sprintf and log ?"}, {"owner": {"reputation": 1894, "user_id": 3980558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ve9D.jpg?s=128&g=1", "display_name": "Eyal Golan", "link": "https://stackoverflow.com/users/3980558/eyal-golan"}, "edited": false, "score": 0, "creation_date": 1575494397, "post_id": 59184715, "comment_id": 104589984, "body": "Yes, you can use the function I suggested in my answer. Instead of using log10, you can write a loop that divids the number by 10 and counts how many times the loop ran until the number became 0"}, {"owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "edited": false, "score": 0, "creation_date": 1575494879, "post_id": 59184715, "comment_id": 104590138, "body": "But how do I isolate all the counted numbers into a its own index in an char array?"}, {"owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "edited": false, "score": 0, "creation_date": 1575495081, "post_id": 59184715, "comment_id": 104590224, "body": "I should not use any library functions is my problem"}, {"owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "edited": false, "score": 0, "creation_date": 1575496613, "post_id": 59184715, "comment_id": 104590699, "body": "I thought of an solution. Do you think it is correct?"}, {"owner": {"reputation": 512, "user_id": 12357035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XT9DZ.png?s=128&g=1", "display_name": "Sourav Kannantha B", "link": "https://stackoverflow.com/users/12357035/sourav-kannantha-b"}, "reply_to_user": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "edited": false, "score": 0, "creation_date": 1616933047, "post_id": 59184715, "comment_id": 118152068, "body": "@D&#225;vidSlota I think your program doesn&#39;t work. The result will be an empty string. There are few logical bugs that causing it."}], "tags": [], "owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "is_accepted": false, "score": 1, "last_activity_date": 1575493784, "creation_date": 1575493784, "answer_id": 59184715, "question_id": 59184615, "link": "https://stackoverflow.com/questions/59184615/can-you-put-int-variable-into-string-in-c/59184715#59184715", "title": "Can you put int variable into string in c?", "body": "<p>Use <code>sprintf(buffer, \"%d\", i);</code></p>\n\n<p>Make sure that <code>buffer</code> is long enough to contain any possible number-string <em>and the terminating <code>\\0</code> byte.</em></p>\n\n<p><code>sprintf</code> accepts everything that <code>printf</code> does, but sends its output to a string buffer instead of STDOUT.</p>\n"}, {"tags": [], "owner": {"reputation": 512, "user_id": 12357035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XT9DZ.png?s=128&g=1", "display_name": "Sourav Kannantha B", "link": "https://stackoverflow.com/users/12357035/sourav-kannantha-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1616934016, "creation_date": 1616934016, "answer_id": 66841368, "question_id": 59184615, "link": "https://stackoverflow.com/questions/59184615/can-you-put-int-variable-into-string-in-c/66841368#66841368", "title": "Can you put int variable into string in c?", "body": "<p>If you really don't want to use sprintf, then here is a sample code snippet for you.</p>\n<pre><code>    #define BASE 10\n    #define MAXLEN 10\n    int val = 153;\n    char valstr[MAXLEN];\n\n    //Reverse the int\n    int valcpy = val;\n    int valrev = 0;\n    while(valcpy) {\n        valrev *= BASE;\n        valrev += valcpy % BASE;\n        valcpy /= BASE;\n    }\n\n    //Convert to string\n    int i = 0;\n    while(valrev) {\n        valstr[i] = valrev % BASE + '0';\n        valrev /= BASE;\n        i++;\n    }\n    valstr[i] = '\\0';\n\n    printf(&quot;%d = %s&quot;, val, valstr); //prints 153 = 153\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1616934016, "creation_date": 1575493179, "last_edit_date": 1575496540, "question_id": 59184615, "link": "https://stackoverflow.com/questions/59184615/can-you-put-int-variable-into-string-in-c", "title": "Can you put int variable into string in c?", "body": "<p>Can you put an integer from a variable, for example:</p>\n\n<pre><code>int i=17;\nchar array[]= i;\n</code></pre>\n\n<p>and now i want to have</p>\n\n<pre><code>array[3]= {1,7,\\0}\n</code></pre>\n\n<p>I know it doesn't work this way but i dont know how to do it without some special functions, which i dont want to use. Thank you for your help.</p>\n\n<p>this is what i came up with:</p>\n\n<pre><code>char array[];\n    int counter = 172; //the number i want to put into string\n    int i= 0;\n    int p=0;\n    float c = counter;\n    int k=0, g=0, h=0;\n\n    while(counter !=0){\n        counter = counter /10;\n        c= c/10;    \n        p++;\n    }\n    while(p !=0){\n        c=c*10;\n        k=c;\n        h= k-g;\n        g=k*10;\n        array[i] = h;\n        i++;\n        p--;\n    }\n    array[i]= '\\0';\n</code></pre>\n"}, {"tags": ["c", "operating-system", "semaphore", "producer-consumer"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1575504853, "post_id": 59184599, "comment_id": 104592980, "body": "An unbounded P-C queue needs only two semaphores, (or one and a mutex)."}], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 5791141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68cd2ee477fc0cf910e7400935670c3?s=128&d=identicon&r=PG&f=1", "display_name": "foreverska", "link": "https://stackoverflow.com/users/5791141/foreverska"}, "is_accepted": true, "score": 1, "last_activity_date": 1575495797, "creation_date": 1575495797, "answer_id": 59185064, "question_id": 59184599, "link": "https://stackoverflow.com/questions/59184599/is-there-a-way-to-do-the-producer-consumer-problem-with-2-semaphores/59185064#59185064", "title": "Is there a way to do the producer-consumer problem with 2 semaphores?", "body": "<p>The only way to avoid the the mutex is if all operations inside the semaphore are atomic (can be rare).  The mutex is there to make sure the dangerous bits happen one at a time and without being interrupted.</p>\n\n<p>Imagine if you had two threads attempting to do something that depended on each other.</p>\n\n<pre><code>Thread 1:  Add 3 to the ordered list\nThread 2:  Add 4 to the ordered list\nList:  { 1, 2, 5, 7}\n</code></pre>\n\n<p>Thread 2 needs to see where thread 1 sticks his number before inserting his own.  Therefore we use a mutex to make sure only one thread at a time tries to insert their number into the list.</p>\n\n<p>The way it is written in your example (and others online) might make one believe the whole process needs to be inside the mutex.  If you did this only one thread would be able to work at a time!  In actuality you would do stuff that doesn't depend on other threads outside of the mutex but inside the semaphore (say generating a random number) and only guard the insertion of the number into the list.</p>\n\n<pre><code>semaphore(x)\nlong_expensive_computation\nmutex(y)\norder_critical_stuff\nrelease(y)\nrelease(x)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9345005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cg2LN4EYCqw/AAAAAAAAAAI/AAAAAAAAAgE/5y5o7Az18vc/photo.jpg?sz=128", "display_name": "DesperateCoder", "link": "https://stackoverflow.com/users/9345005/desperatecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 59185064, "answer_count": 1, "score": 0, "last_activity_date": 1575495797, "creation_date": 1575493078, "question_id": 59184599, "link": "https://stackoverflow.com/questions/59184599/is-there-a-way-to-do-the-producer-consumer-problem-with-2-semaphores", "title": "Is there a way to do the producer-consumer problem with 2 semaphores?", "body": "<p>This is the solution using 3 semaphores. Wondering if there's a way to do with fewer and if not, why not?</p>\n\n<pre><code>   sem_t full; // # of filled slots\n   sem_t empty; // # of empty slots\n   sem_t mutex; // mutual exclusion\n\n   sem_init(&amp;full, 0, 0);\n   sem_init(&amp;empty, 0, N);\n   sem_init(&amp;mutex, 0, 1);\n\n   Producer(){\n      sem_down(empty);\n      sem_down(&amp;mutex);\n      // fill a slot\n      sem_up(&amp;mutex);\n      sem_up(full);\n   }\n\n   Consumer() {\n      sem_down(full);\n      sem_down(&amp;mutex);\n      // empty a slot\n      sem_up(&amp;mutex);\n      sem_up(empty);\n   }\n</code></pre>\n"}, {"tags": ["c", "fork", "wait", "execve"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1575493761, "post_id": 59184584, "comment_id": 104589785, "body": "Turn on your compiler warnings: <code>warning: result of comparison of constant 18 with boolean expression is always false [-Wtautological-constant-out-of-range-compare]             if (WIFSIGNALED(status) == SIGTSTP)</code>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1575493806, "post_id": 59184584, "comment_id": 104589798, "body": "You are using WIFSIGNALED incorrectly, and therefore never sending SIGCONT."}, {"owner": {"reputation": 3, "user_id": 12115571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b8ef7d836aa2bce9681da62a9fc83f?s=128&d=identicon&r=PG&f=1", "display_name": "oboualla", "link": "https://stackoverflow.com/users/12115571/oboualla"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1575494449, "post_id": 59184584, "comment_id": 104589997, "body": "solved, but printf never put &quot;\\nsuspended\\n&quot; this mean wait is still waiting child to end."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12115571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b8ef7d836aa2bce9681da62a9fc83f?s=128&d=identicon&r=PG&f=1", "display_name": "oboualla", "link": "https://stackoverflow.com/users/12115571/oboualla"}, "edited": false, "score": 0, "creation_date": 1575504905, "post_id": 59186029, "comment_id": 104592989, "body": "your answer was very helpful it solved my problem, thanks for sharing this information."}], "tags": [], "owner": {"reputation": 2875, "user_id": 1934800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd418bfddb2f7d81dc1d9ba06c203cc7?s=128&d=identicon&r=PG", "display_name": "TrentP", "link": "https://stackoverflow.com/users/1934800/trentp"}, "is_accepted": true, "score": 0, "last_activity_date": 1575501881, "creation_date": 1575501881, "answer_id": 59186029, "question_id": 59184584, "link": "https://stackoverflow.com/questions/59184584/how-i-can-suspend-child-process-and-reset-it/59186029#59186029", "title": "how i can suspend child process and reset it", "body": "<p>You need to use <code>waitpid()</code> rather than <code>wait()</code>.  Using <code>wait()</code> will wait for a child process to be <strong>terminated</strong>, which means the processes must have exited, for example from SIGKILL or SIGSEGV.  You are trying to wait for the process to be <strong>stopped</strong>, which is not the same thing.  Stopping a process just pauses it and it allows it to be continued later.  It doesn't exit.</p>\n\n<p>You need to use the <code>WUNTRACED</code> flag with <code>waitpid()</code> to wait for a child processes to be terminated <em>or stopped</em>.  Such as <code>waitpid(child_pid, &amp;status, WUNTRACED)</code> or <code>waitpid(-1, &amp;status, WUNTRACED)</code>.</p>\n\n<p>There is another flaw related to this.  <code>WIFSIGNALLED()</code> and <code>WTERMSIG()</code> also apply only to a processing which was terminated by a signal.  You should instead use <code>WIFSTOPPED()</code> and <code>WSTOPSIG()</code> to detect if the child was stopped.</p>\n\n<p>Also note:</p>\n\n<ul>\n<li><code>SIGSTOP</code> can also stop a processes.</li>\n<li>You may receive a <code>SIGTSTP</code> anytime after the signal handler is set, which could be before <code>child_pid</code> is assigned a value.</li>\n<li><code>wait()</code> and friends can return -1 with <code>errno</code> set to <code>EINTR</code> if your processes is interrupted by a signal.</li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 12115571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b8ef7d836aa2bce9681da62a9fc83f?s=128&d=identicon&r=PG&f=1", "display_name": "oboualla", "link": "https://stackoverflow.com/users/12115571/oboualla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 59186029, "answer_count": 1, "score": 0, "last_activity_date": 1576072221, "creation_date": 1575492989, "last_edit_date": 1576072221, "question_id": 59184584, "link": "https://stackoverflow.com/questions/59184584/how-i-can-suspend-child-process-and-reset-it", "title": "how i can suspend child process and reset it", "body": "<p>I am creating a child process with fork in my shell, and assigned this child process to execute a cmd, for example : \"ls -lR /\", with 'execve()' like u see in my code, when i receive SIGTSTP, i want to stop this child process with <code>kill(child_process, SIGTSTP)</code>, and when you type \"fg\" command i have to reset this child runing with <code>kill(child_process, SIGCONT)</code>, problem is <code>wait(&amp;status)</code> after i receive SIGTSTP never return is still waiting child to end,\n-- so how i can do that ??</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint child_pid;\nint parn_pid;\n\nvoid    func1(int sig)\n{\n    kill(child_pid, SIGTSTP);\n}\n\nint main()\n{\n    int sig;\n    int status;\n    char *argv[] = {\"ls\", \"-lR\", \"/\", NULL};\n\n    signal(SIGTSTP, func1);\n    child_pid = fork();\n    if (child_pid == 0)\n    {\n        child_pid = getpid();\n        execve(\"/bin/ls\", argv, NULL);\n        exit (1);\n    }\n    else\n    {\n        parn_pid = getpid();\n        waitpid(child_pid, &amp;status, WUNTRACED);\n        printf(\"\\nsuspended\\n\");\n        if (WIFSTOPPED(status))\n        {\n            sleep(2);\n            kill(child_pid, SIGCONT);\n            wait(&amp;status);\n        }\n    }\n    return (0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1575491653, "post_id": 59184245, "comment_id": 104588981, "body": "<code>x=x+y;</code> Did you mean <code>*x = *x + y;</code>?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 5, "creation_date": 1575491704, "post_id": 59184245, "comment_id": 104588995, "body": "<i>Doesn&#39;t the address of g get changed in the function?</i>  No, the pointer <code>x</code> gets changed, and that pointer is local to <code>add</code> function."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1575491729, "post_id": 59184245, "comment_id": 104589005, "body": "Inside the <code>add</code> function, you&#39;re adding <code>y</code> to the address of <code>x</code>, which is passed in by value, so only the local copy of that address changes. The function can change the <i>value</i> at that address if it wants, but it can&#39;t change the address (unless you pass it the address of another variable with an <code>int **</code>)."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575491788, "post_id": 59184245, "comment_id": 104589038, "body": "The line <code>float add(int *x, int y)</code> was added by an edit from someone else than the OP. I doubt that this line is correct. It doesn&#39;t make sense to me."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575491867, "post_id": 59184245, "comment_id": 104589063, "body": "Not my edit, but the compiler would complain about <code>double</code> passed to <code>int</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1575492105, "post_id": 59184245, "comment_id": 104589145, "body": "Aside: print an address with <code>printf(&quot;%p\\n&quot;, (void*)&amp;g);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1575493094, "post_id": 59184469, "comment_id": 104589548, "body": "It depends on whether you are trying to edit the value of an <code>int *</code>, or edit the value of an <code>int</code>.  in this function, <code>void SumOfInts(int *a, int b);&#47;&#47;adds value of b to a</code>  called like this:  <code>int a = 12;  SumOfInts(&amp;a, 10);</code> will work perfectly to change the value of <code>a</code> to <code>22</code>."}, {"owner": {"reputation": 495, "user_id": 5791141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68cd2ee477fc0cf910e7400935670c3?s=128&d=identicon&r=PG&f=1", "display_name": "foreverska", "link": "https://stackoverflow.com/users/5791141/foreverska"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1575493415, "post_id": 59184469, "comment_id": 104589659, "body": "That is correct.  As originally written it&#39;s unclear what exactly is happening.  The author expresses surprise that the address of g is not changed.  I am addressing under what conditions the address may be changed.  There is no way in the original edit the address of g might be changed.  It does however look like a common mistake which is to forget to deference a double pointer when changing the address of a variable."}], "tags": [], "owner": {"reputation": 495, "user_id": 5791141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68cd2ee477fc0cf910e7400935670c3?s=128&d=identicon&r=PG&f=1", "display_name": "foreverska", "link": "https://stackoverflow.com/users/5791141/foreverska"}, "is_accepted": false, "score": 0, "last_activity_date": 1575493474, "last_edit_date": 1575493474, "creation_date": 1575492417, "answer_id": 59184469, "question_id": 59184245, "link": "https://stackoverflow.com/questions/59184245/can-someone-explain-this-little-piece-of-code-in-c/59184469#59184469", "title": "Can someone explain this little piece of code in C?", "body": "<p>You cannot change the address of a variable with a single pointer (ie int *x).  As suggested in comments this may not have been your intention so sorry if you know this.</p>\n\n<p>To change the address you must use a double pointer, you must deference it once to get the address and to access the value you must deference it twice.</p>\n\n<pre><code>void func(int **x)\n{\n    int value = **x;\n    uintptr_t address = *x;\n\n    *x = address + sizeof(int);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1575557366, "last_edit_date": 1575557366, "creation_date": 1575494861, "answer_id": 59184900, "question_id": 59184245, "link": "https://stackoverflow.com/questions/59184245/can-someone-explain-this-little-piece-of-code-in-c/59184900#59184900", "title": "Can someone explain this little piece of code in C?", "body": "<p><em>...but why is the second output the same?</em>  </p>\n\n<p>Because your original code:</p>\n\n<pre><code>float add(int *x, int y)\n{\n    static float s = 100.f;\n    s=s+y;\n    x=x+y; // changing the pointer\n    return s;\n}\n</code></pre>\n\n<p>Does not change the value pointed to by the address of x.<br>\nChange the code as shown to allow the value to be updated:</p>\n\n<pre><code>float add(int *x, int y)\n{\n    static float s = 100.f;\n    s=s+y;\n    *x=*x+y; //changing the value pointed to by the pointer\n             //(i.e., the value exposed via the de-referenced pointer is \n             //modified to a new value.)\n    return s;\n}\n</code></pre>\n\n<p>Given:  </p>\n\n<pre><code> int g=25;\n ...\n add(&amp;g,35.2);\n</code></pre>\n\n<p>Results after change:  </p>\n\n<blockquote>\n  <p>25<br>\n  81feb8<br>\n  81feb8<br>\n  60  </p>\n</blockquote>\n\n<p>Note:  Because the type of the 2nd argument: <code>float add(int *x, int y)</code><br>\n       is <code>int</code>, <code>35.2</code> is truncated to <code>30</code>, resulting the in the sum being<br>\n       <code>60</code> instead of <code>60.2</code></p>\n"}], "owner": {"reputation": 33, "user_id": 12464576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCJj3qjluaK5NtzT7ZnPjaw-l43D7T-hmkaTHFQoQ=k-s128", "display_name": "Randiir", "link": "https://stackoverflow.com/users/12464576/randiir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 59184900, "answer_count": 2, "score": -1, "last_activity_date": 1575557366, "creation_date": 1575491474, "last_edit_date": 1575491734, "question_id": 59184245, "link": "https://stackoverflow.com/questions/59184245/can-someone-explain-this-little-piece-of-code-in-c", "title": "Can someone explain this little piece of code in C?", "body": "<p>The output is :</p>\n\n<pre><code>25\n28ff1c\n28ff1c\n25\n</code></pre>\n\n<p>I don't understand why. The first value and address are understandable, but why is the second output the same? Doesn't the address of g get changed in the function?</p>\n\n<pre><code>float add(int *x, int y)\n{\n    static float s = 100.f;\n    s=s+y;\n    x=x+y;\n    return s;\n}\n\n\n\nint main()\n{\n\n    int g=25;\n    printf(\"%d\\n\",g);\n    printf(\"%x\\n\",&amp;g);\n\n    add(&amp;g,35.2);\n\n    printf(\"%x\\n\",&amp;g);\n    printf(\"%d\\n\",g);\n\nreturn 0;\n} \n</code></pre>\n"}, {"tags": ["c", "loops", "while-loop"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575490017, "post_id": 59183871, "comment_id": 104588288, "body": "&quot;number guessing thing&quot; doesn&#39;t tell us precisely what the program is supposed to do. Details matter in programming. We need exact descriptions. Please provide exact input, expected output and actual output."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1575490186, "post_id": 59183871, "comment_id": 104588347, "body": "Looks like you are using <code>while</code> in many places where you should be using <code>if</code>. The best advice to you is to run your program in a debugger and step thru it to better understand what the code is doing. And format your code better with consistent indentation - that is actually very important not just for code readability but to be able to check the structure of your logic is correct or not."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1575491061, "post_id": 59183871, "comment_id": 104588736, "body": "If you apply consistent indentation to your program you will likely get a completely new insight into its inner working."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12474074, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCyVSygI1vZ_2Ev8vE1yQGMdpwNS7b1HmOXxrc6JNQ=k-s128", "display_name": "Earnest", "link": "https://stackoverflow.com/users/12474074/earnest"}, "edited": false, "score": 1, "creation_date": 1575492512, "post_id": 59184180, "comment_id": 104589323, "body": "Thank you @foreverska, I fixed it!"}], "tags": [], "owner": {"reputation": 495, "user_id": 5791141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68cd2ee477fc0cf910e7400935670c3?s=128&d=identicon&r=PG&f=1", "display_name": "foreverska", "link": "https://stackoverflow.com/users/5791141/foreverska"}, "is_accepted": true, "score": 1, "last_activity_date": 1575491799, "last_edit_date": 1575491799, "creation_date": 1575491191, "answer_id": 59184180, "question_id": 59183871, "link": "https://stackoverflow.com/questions/59183871/c-programming-while-loop-only-works-in-a-specific-order/59184180#59184180", "title": "(C programming) while loop only works in a specific order", "body": "<p>What you may be running into is you enter a number and then it gets stuck in an \"inner\" loop scanning and checking and failing an inner condition instead of all of them.</p>\n\n<p>I'm not sure if you have yet to discover if/else if/else but this is normally how you might check conditional statements.  I will write this in pseudo code to give you a chance to write it yourself in C.</p>\n\n<pre><code>number = 0\nprint \"Enter a number\"\nwhile number != 69\n    number = get number\n    if number == 666\n        print \"What are you...\"\n    else if number == 420\n        print \"lol close...\"\n    else if number == 69\n        print \"haha nice...\"\n    else\n        print \"hmmm...\"\n</code></pre>\n\n<p>For extra fun check out switch statements.</p>\n"}], "owner": {"reputation": 3, "user_id": 12474074, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCyVSygI1vZ_2Ev8vE1yQGMdpwNS7b1HmOXxrc6JNQ=k-s128", "display_name": "Earnest", "link": "https://stackoverflow.com/users/12474074/earnest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59184180, "answer_count": 1, "score": 0, "last_activity_date": 1575491799, "creation_date": 1575489733, "question_id": 59183871, "link": "https://stackoverflow.com/questions/59183871/c-programming-while-loop-only-works-in-a-specific-order", "title": "(C programming) while loop only works in a specific order", "body": "<p>I'm writing a silly code as a joke, sort of a number guessing thing. I thought it was fine until I realized the correct things would only print if I put in the numbers in a specific order. I'm a bit of a beginner, so I'm not sure why it's only printing correctly if I type in the numbers in an order. Is this a condition of while loops in general? Is there a way I can fix this so that it doesn't matter what order the numbers go in? Any insight would be greatly appreciated. </p>\n\n<p>Here is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\nint number;\n\nint main()\n{\n    printf(\"Enter a number!\\n\");\n    scanf(\"%d\", &amp;number);\n\n    while ((number != 69) &amp;&amp; (number != 420))\n    {\n        printf(\"hmmm, not the number i was looking for... Enter another number!\\n\");\n        scanf(\"%d\", &amp;number);\n\n        while (number == 666)\n        {\n            printf(\"what are you, emo? try again!\\n\");\n            scanf(\"%d\", &amp;number);\n        while (number == 420)\n        {\n            printf(\"lol close, try the other Funny Number\\n\");\n            scanf(\"%d\", &amp;number);\n\n        while ((number != 69) &amp;&amp; (number != 420))\n        {\n            printf(\"hmmm, not the number i was looking for... Enter another number!\\n\");\n            scanf(\"%d\", &amp;number);\n        }\n            while (number == 69)\n            {\n                printf(\"haha nice\\n\");\n                return 0;\n    }\n        }\n    }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1575503098, "post_id": 59183810, "comment_id": 104592536, "body": "Since <code>arr</code> is <code>char **</code>, <code>arr[i]</code> is a <code>char *</code>. It <i>is</i> a dereferenced pointer, but since it was pointing to other pointers, it&#39;s also an address (of some <code>char</code>)."}, {"owner": {"reputation": 131, "user_id": 10664697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTRhK.jpg?s=128&g=1", "display_name": "S.Sot", "link": "https://stackoverflow.com/users/10664697/s-sot"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1575538699, "post_id": 59183810, "comment_id": 104603064, "body": "OK, so <code>*(arr + i) = *(&amp;i) = i</code>, but <code>**(arr + i) = *(*(arr + i)) = *(i)</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1575565708, "post_id": 59183810, "comment_id": 104617964, "body": "I haven&#39;t the faintest idea what you&#39;re trying to say here. No, there is no sense in which <code>*(arr + i)</code> = <code>*(&amp;i)</code>. <code>*(arr + i)</code> is another way to write <code>arr[i]</code>, that is, the <code>i</code>th element of array <code>arr</code>, or the contents of the block of memory <code>i</code> elements beyond the starting address of <code>arr</code>."}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 2, "last_activity_date": 1575489802, "creation_date": 1575489802, "answer_id": 59183887, "question_id": 59183810, "link": "https://stackoverflow.com/questions/59183810/pointing-to-a-double-pointer/59183887#59183887", "title": "Pointing to a double pointer", "body": "<p>This syntax is valid because <code>arr[i]</code> is literally <em>the exact same</em> as <code>*(arr + i)</code>. This is also an example without using array subscript syntax, BTW.</p>\n\n<blockquote>\n  <p>...why is <code>arr[i]</code> considered an address and not a dereferenced pointer?</p>\n</blockquote>\n\n<p>Yes, <code>arr[i]</code> <em>is</em> a dereferenced pointer, as discussed above. It's also an address because when you dereference a pointer to a pointer (<code>char **arr</code>), you get a pointer - an address.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1575490414, "last_edit_date": 1575490414, "creation_date": 1575489999, "answer_id": 59183924, "question_id": 59183810, "link": "https://stackoverflow.com/questions/59183810/pointing-to-a-double-pointer/59183924#59183924", "title": "Pointing to a double pointer", "body": "<p>Here you are</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    char *s = \"Hello\";\n\n    printf( \"%p -&gt; %s\\n\", ( void * )s, s );\n\n    char **t = &amp;s;\n\n    printf( \"%p -&gt; %p -&gt;  %s\\n\", ( void * )t, ( void * )*t, *t );\n    printf( \"%p -&gt; %p -&gt;  %s\\n\", ( void * )t, ( void * )t[0], *t );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>0x55a06f99c004 -&gt; Hello\n0x7ffc051a83d8 -&gt; 0x55a06f99c004 -&gt;  Hello\n0x7ffc051a83d8 -&gt; 0x55a06f99c004 -&gt;  Hello\n</code></pre>\n\n<p>That is the pointer <code>s</code> points to the first character of the string literal <code>\"Hello\"</code>.</p>\n\n<p>The pointer <code>t</code> points to the pointer <code>s</code> that in turn points to the first character of the string literal <code>\"Hello\"</code>.</p>\n\n<p>For example if you have a declaration like this</p>\n\n<pre><code>char *s = \"Hello\";\n</code></pre>\n\n<p>then the both expression <code>s[0]</code> and <code>*s</code> have the type <code>char</code> and yield the first character of the string literal that is <code>'H'</code>.</p>\n\n<p>Another example. If you have an array of integers</p>\n\n<pre><code>int a[] = { 1, 2, 3, 4, 5 };\n</code></pre>\n\n<p>then the number of its elements can be calculated either like</p>\n\n<pre><code>sizeof( a ) / sizeof( a[0] )\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>sizeof( a ) / sizeof( *a )\n</code></pre>\n\n<p>[Though you may even write like</p>\n\n<pre><code>sizeof( a ) / sizeof( a[1000] )\n</code></pre>\n\n<p>because the used expression is not evaluated. It is important only the size of an object of the type int. SO you could also write</p>\n\n<pre><code>sizeof( a ) / sizeof( int )\n</code></pre>\n\n<p>-end note]</p>\n"}], "owner": {"reputation": 131, "user_id": 10664697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTRhK.jpg?s=128&g=1", "display_name": "S.Sot", "link": "https://stackoverflow.com/users/10664697/s-sot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 59183924, "answer_count": 2, "score": 1, "last_activity_date": 1575490414, "creation_date": 1575489517, "question_id": 59183810, "link": "https://stackoverflow.com/questions/59183810/pointing-to-a-double-pointer", "title": "Pointing to a double pointer", "body": "<p>I am writing a function which takes a double pointer as a parameter. I noticed that expressions like this <code>char *tmp = arr[i];</code> work, where <code>arr</code> is a <code>char **arr</code> pointer. The whole function looks like this :</p>\n\n<pre><code>void string_sort(char** arr,const int len,int (*cmp_func)(const char* a, const char* b))\n{\n    for (int i = 0; i &lt; len; ++i)\n    {\n        for (int j = i + 1; j &lt; len; ++j)\n        {\n            if(cmp_func(arr[i], arr[j]) &gt; 0)\n            {\n                char *tmp = arr[i];\n                arr[i] = arr[j];\n                arr[j] = tmp;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>My question is - why is <code>arr[i]</code> considered an address and not a dereferenced pointer? (I understand that a double pointer \"points\" to another pointer's address, but I don't understand why this syntax is valid). Can you give an example of an equivalent expression without an array-like syntax? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 5, "creation_date": 1575488327, "post_id": 59183498, "comment_id": 104587596, "body": "So you are asking how to write your own version of <a href=\"https://en.cppreference.com/w/c/string/byte/strstr\" rel=\"nofollow noreferrer\"><code>strstr()</code></a>?"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 2, "creation_date": 1575488471, "post_id": 59183498, "comment_id": 104587659, "body": "Would also have to write your own <code>getchar()</code> and <code>printf()</code> if you do not want to use #include&#39;s."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1575489375, "post_id": 59183498, "comment_id": 104588042, "body": "The same way you would write any other piece of code. First work out the algorithm and then turn that into code. So which part exactly are you stuck on? Have you worked out an algorithm? You&#39;ll get better help if you are more specific about what you don&#39;t understand."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 1, "creation_date": 1575490421, "post_id": 59183498, "comment_id": 104588447, "body": "Put attention to edge cases - what happen to &#39;c&#39; when you get EOF on the first getchar ? (it will remain uninitialized)."}], "owner": {"reputation": 5, "user_id": 12221437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d10485bf54c4cce91a30fe885a7d7d?s=128&d=identicon&r=PG&f=1", "display_name": "kostuyk21", "link": "https://stackoverflow.com/users/12221437/kostuyk21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575489927, "creation_date": 1575488235, "last_edit_date": 1575489927, "question_id": 59183498, "link": "https://stackoverflow.com/questions/59183498/how-can-i-implement-function-without-using-string-h", "title": "How can I implement function without using &lt;string.h&gt;?", "body": "<p>I have a piece of code which is searching in file pattern and then write this line. How can I rewrite this code without using library  #include  ? Thanks for comments</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint get_line(char *line, int max);\n\nint main(int argc, char *argv[])\n{\n    char line[10000];\n    int found = 0;       \n    while (get_line(line, 10000) &gt; 0)\n    if (strstr(line, argv[1]) != NULL)\n    {\n        printf(\"%s\", line); \n        found++;\n    }\n    else\n    {\n        return 1;\n    }\n    return found;\n}\n\nint get_line(char s[], int lim)\n{\n    int i;\n    int c;\n    for (i = 0; i &lt; lim - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != '\\n'; ++i)\n    {\n        s[i] = c;\n    }\n\n    if (c == '\\n')\n    {\n        s[i] = c;\n        ++i;\n    }\n    s[i] = '\\0';\n    return i;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1575487257, "post_id": 59183250, "comment_id": 104587180, "body": "Undefined behavior means <i>anything</i> can happen."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 1, "creation_date": 1575487261, "post_id": 59183250, "comment_id": 104587182, "body": "That&#39;s undefined behavior (different results on different platforms, and even during different executions on the same platform). What is actually a very well-defined behavior in this case (and not for a justifiable reason), is the fact that in a few seconds people are going to start downvoting your question for violating the sacred rule &quot;shalt not do, say or imply anything that could potentially lead to undefined behavior&quot;."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 1, "creation_date": 1575487268, "post_id": 59183250, "comment_id": 104587183, "body": "this is called buffer overflow :) welcome in C programming"}, {"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1575487310, "post_id": 59183250, "comment_id": 104587205, "body": "C does not enforce array/boundary limits like other languages do, so it&#39;s really up to the programmer to get these things right. This kind of thing happens <i>all the time</i> and requires a fair amount of diligence."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1575487607, "post_id": 59183250, "comment_id": 104587314, "body": "<i>&quot;without any errors from compiller&quot;</i> - that&#39;s because your compiler doesn&#39;t care whether your compiled code invokes undefined behavior or not: <i>you didn&#39;t care, it won&#39;t either.</i>."}, {"owner": {"reputation": 616, "user_id": 1930495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pirg4.jpg?s=128&g=1", "display_name": "Michele Dorigatti", "link": "https://stackoverflow.com/users/1930495/michele-dorigatti"}, "edited": false, "score": 1, "creation_date": 1575488086, "post_id": 59183250, "comment_id": 104587509, "body": "Serhii, can you substitute &quot;chapters&quot; with &quot;characters&quot;? A chapter is a section in a book."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 616, "user_id": 1930495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pirg4.jpg?s=128&g=1", "display_name": "Michele Dorigatti", "link": "https://stackoverflow.com/users/1930495/michele-dorigatti"}, "edited": false, "score": 0, "creation_date": 1575488775, "post_id": 59183250, "comment_id": 104587778, "body": "@MicheleDorigatti - You are also able to edit spelling or word choice in an original post if you choose."}, {"owner": {"reputation": 1272, "user_id": 2119164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENTVR.jpg?s=128&g=1", "display_name": "Serhii Polishchuk", "link": "https://stackoverflow.com/users/2119164/serhii-polishchuk"}, "reply_to_user": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1575489002, "post_id": 59183250, "comment_id": 104587876, "body": "Thanks to @SteveFriedl it is already edited. Thanks all of you guys, you are amazing community, I&#39;m happy to be among you. My main language is php, and I have never problem like this before."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575489190, "post_id": 59183250, "comment_id": 104587960, "body": "This is a FAQ ... where&#39;s the duplicate."}, {"owner": {"reputation": 1272, "user_id": 2119164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENTVR.jpg?s=128&g=1", "display_name": "Serhii Polishchuk", "link": "https://stackoverflow.com/users/2119164/serhii-polishchuk"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575489637, "post_id": 59183250, "comment_id": 104588140, "body": "@WeatherVane Did not found any similar question while posting my own."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575490285, "post_id": 59183250, "comment_id": 104588384, "body": "Here is: <a href=\"https://stackoverflow.com/questions/34521292/c-off-by-one-error-but-no-segmentation-fault\">Off by one error, but no segmentation fault?</a> and there are others to be found."}], "answers": [{"comments": [{"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 2, "creation_date": 1575488109, "post_id": 59183316, "comment_id": 104587520, "body": "@ryyker you can answer &quot;And how I can get cutted string?&quot;: <code>snprintf</code> or <code>%15s</code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1575489238, "post_id": 59183316, "comment_id": 104587982, "body": "@LegendofPedro - Thank you.  I did incorporate your suggestion!"}, {"owner": {"reputation": 1272, "user_id": 2119164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENTVR.jpg?s=128&g=1", "display_name": "Serhii Polishchuk", "link": "https://stackoverflow.com/users/2119164/serhii-polishchuk"}, "edited": false, "score": 0, "creation_date": 1575489762, "post_id": 59183316, "comment_id": 104588187, "body": "<code>Your code has broken no syntax rules</code> - but it easy to check, why gcc doesn&#39;t do that? Maybe there is some special flags for compiler to check this issue?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1575489827, "post_id": 59183316, "comment_id": 104588215, "body": "Try setting including <code>-Wall</code> in your <a href=\"https://gcc.gnu.org/onlinedocs/gcc-8.3.0/gcc/Option-Index.html#Option-Index\" rel=\"nofollow noreferrer\">command line options</a> to include all errors and warnings."}, {"owner": {"reputation": 1272, "user_id": 2119164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENTVR.jpg?s=128&g=1", "display_name": "Serhii Polishchuk", "link": "https://stackoverflow.com/users/2119164/serhii-polishchuk"}, "edited": false, "score": 0, "creation_date": 1575490149, "post_id": 59183316, "comment_id": 104588334, "body": "<code>gcc -Wall -o main main.c</code> doesn&#39;t show me any additional warnings"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 1272, "user_id": 2119164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENTVR.jpg?s=128&g=1", "display_name": "Serhii Polishchuk", "link": "https://stackoverflow.com/users/2119164/serhii-polishchuk"}, "edited": false, "score": 0, "creation_date": 1575492077, "post_id": 59183316, "comment_id": 104589129, "body": "@SerhiiPolishchuk -  I just tried on my gcc (in Code::Blocks, on Windows) and it produced the warning: <code>C:\\...\\main.c|8|warning: passing argument 1 of &#39;sprintf&#39; from incompatible pointer type [-Wincompatible-pointer-types]|</code>.  What version of gcc are you using?  (I am using 7.5)"}, {"owner": {"reputation": 1272, "user_id": 2119164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENTVR.jpg?s=128&g=1", "display_name": "Serhii Polishchuk", "link": "https://stackoverflow.com/users/2119164/serhii-polishchuk"}, "edited": false, "score": 0, "creation_date": 1575529921, "post_id": 59183316, "comment_id": 104599262, "body": "@ryyker gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0, but it doesn&#39;t matter anymore, because I have learned a lot about undefined behavior and buffer overflow. Thanks a lot!"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1575489867, "last_edit_date": 1575489867, "creation_date": 1575487337, "answer_id": 59183316, "question_id": 59183250, "link": "https://stackoverflow.com/questions/59183250/set-more-characters-than-declared-without-any-warning/59183316#59183316", "title": "Set more characters than declared without any warning", "body": "<p><em>I can put in it much more characters without any errors from compiller...</em>  </p>\n\n<p>Your code has broken no syntax rules (except as noted in example below), so the compiler has no reason to complain.  However this:</p>\n\n<pre><code>char l1[16];\n\n    //sprintf(&amp;l1, \"%s\", \"Hello AKIT!!!!!!!!!!!!!!!!\");  // &amp; is wrong  l1 is already a pointer\n                                                         // and should have resulted in \n                                                         // incompatible pointer type warning.\n\n    sprintf(l1, \"%s\", \"Hello AKIT!!!!!!!!!!!!!!!!\");  \n</code></pre>\n\n<p>...Is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  This means that sometimes your program will appear to work, but at any time, it may cease to work. As written, you are overwriting the buffer.  But a C program will only complain at run-time, and then only if the memory you are writing to (and not owned by you) is owned by another process.  Then a run-time fault will occur.   </p>\n\n<p>Methods to prevent the buffer overflow problem (other than careful programming.) include learning about and using <em><a href=\"https://www.geeksforgeeks.org/snprintf-c-library/\" rel=\"nofollow noreferrer\">snsprintf()</a></em>.  There is also a <em><a href=\"https://stackoverflow.com/a/2933404/645128\">length limiting format specifier</a></em> that can be used with <code>sprintf()</code>.</p>\n"}], "owner": {"reputation": 1272, "user_id": 2119164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENTVR.jpg?s=128&g=1", "display_name": "Serhii Polishchuk", "link": "https://stackoverflow.com/users/2119164/serhii-polishchuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59183316, "answer_count": 1, "score": 2, "last_activity_date": 1575489867, "creation_date": 1575487067, "last_edit_date": 1575488159, "question_id": 59183250, "link": "https://stackoverflow.com/questions/59183250/set-more-characters-than-declared-without-any-warning", "title": "Set more characters than declared without any warning", "body": "<p>I've reproduced it with simple example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    char l1[16];\n\n    sprintf(&amp;l1, \"%s\", \"Hello AKIT!!!!!!!!!!!!!!!!\");\n    printf(l1);\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Even my var is declared as 16 characters length, I can put in it much more characters without any errors from compiler, and it even works.\nI'm expected that string will be cuted up to 16 characters but not. Why? And how I can get cutted string?</p>\n"}, {"tags": ["c", "linux", "shell", "ubuntu"], "comments": [{"owner": {"reputation": 848, "user_id": 3933883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sBdJR.jpg?s=128&g=1", "display_name": "Jake Lishman", "link": "https://stackoverflow.com/users/3933883/jake-lishman"}, "edited": false, "score": 1, "creation_date": 1575487073, "post_id": 59183183, "comment_id": 104587122, "body": "You probably find that any commands whose sole purpose is to move around files or output things to <code>stdout</code> or <code>stderr</code> will work fine, but ones which change the state of the environment won&#39;t.  A forked process gets a copy of the parent&#39;s environment, and from then on can&#39;t affect the parent&#39;s environment - see <a href=\"https://stackoverflow.com/questions/9360679/can-the-child-process-affect-parent-process-environment\" title=\"can the child process affect parent process environment\">stackoverflow.com/questions/9360679/&hellip;</a>, for example."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1575487558, "post_id": 59183183, "comment_id": 104587293, "body": "Your parent process must perform the <code>cd</code>. You cannot <code>cd</code> in the child shell because it does not change the path in the parent shell. See, for example, <a href=\"https://stackoverflow.com/q/3740504/608639\">Why doesn&#39;t the cd command work in my shell program?</a>, <a href=\"https://stackoverflow.com/q/43749628/608639\">How can I implement cd command in my own shell in C?</a>, <a href=\"https://stackoverflow.com/q/26928907/608639\">How to implement your own cd command in your own shell</a>, <a href=\"https://stackoverflow.com/q/255414/608639\">Why doesn&#39;t \u201ccd\u201d work in a shell script?</a>, etc."}, {"owner": {"reputation": 11, "user_id": 12344916, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBVVABM0n1pgHVGqeT7u9r-KbBp2GoMelTH-8cW=k-s128", "display_name": "Stelios Spector", "link": "https://stackoverflow.com/users/12344916/stelios-spector"}, "edited": false, "score": 0, "creation_date": 1575490447, "post_id": 59183183, "comment_id": 104588456, "body": "Also im not permited from using fuctions that create a new shell for running commands (like  /bin/sh) and the fuction system(). So im guesing running cd commands is out of option."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12344916, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBVVABM0n1pgHVGqeT7u9r-KbBp2GoMelTH-8cW=k-s128", "display_name": "Stelios Spector", "link": "https://stackoverflow.com/users/12344916/stelios-spector"}, "edited": false, "score": 0, "creation_date": 1575487128, "post_id": 59183225, "comment_id": 104587144, "body": "Can you explain a little bit more? Thank you."}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "reply_to_user": {"reputation": 11, "user_id": 12344916, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBVVABM0n1pgHVGqeT7u9r-KbBp2GoMelTH-8cW=k-s128", "display_name": "Stelios Spector", "link": "https://stackoverflow.com/users/12344916/stelios-spector"}, "edited": false, "score": 0, "creation_date": 1575489164, "post_id": 59183225, "comment_id": 104587951, "body": "@SteliosSpector, slightly expanded.  See also the duplicates pointed by jww.  If that&#39;s not enough, you can ask another question explaining what you don&#39;t understand with those pointers."}], "tags": [], "owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1575489100, "last_edit_date": 1575489100, "creation_date": 1575486975, "answer_id": 59183225, "question_id": 59183183, "link": "https://stackoverflow.com/questions/59183183/cd-command-does-not-work-in-my-custom-shell/59183225#59183225", "title": "&quot;cd&quot; command does not work in my custom shell", "body": "<p><code>cd</code> must be implemented as a builtin as the current working directory is a property of the process.  Thus you <code>cd</code> command has to change the state of the shell something that a subprocess can't do.  There are other things like the handling of environment variables which must be handled so.</p>\n"}], "owner": {"reputation": 11, "user_id": 12344916, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBVVABM0n1pgHVGqeT7u9r-KbBp2GoMelTH-8cW=k-s128", "display_name": "Stelios Spector", "link": "https://stackoverflow.com/users/12344916/stelios-spector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "closed_date": 1575488936, "answer_count": 1, "score": 0, "last_activity_date": 1575489100, "creation_date": 1575486800, "last_edit_date": 1575487521, "question_id": 59183183, "link": "https://stackoverflow.com/questions/59183183/cd-command-does-not-work-in-my-custom-shell", "closed_reason": "Duplicate", "title": "&quot;cd&quot; command does not work in my custom shell", "body": "<p>Im having a problem with <code>cd</code> command. Everything else seems to work, like compiling and running a program, and <code>ls</code>. I run <code>ls</code>, <code>ls -1</code> and works just fine. When I run <code>cd</code> or <code>cd Desktop</code> nothing happens.</p>\n\n<p>I'm creating a fork and then executing a process. I exit with <code>exit</code> or pressing <kbd>CTRL</kbd>+<kbd>D</kbd>.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n\n#define SIZE 255\n\nvoid printPrompt(){\n\n    printf(\"\\nuser@shell &gt; \");   //print prompt\n\n}\n\nvoid readPrompt(char string[],int *check){   //read prompt line from user\n\n    if( (scanf(\" %[^\\n]\",string)==EOF) ){\n        //printf(\"\\nTEST\\n\");\n        *check=0;\n    }\n    printf(\"\\n\");\n}\n\nvoid RunSimple(char line[]){    //creating a fork and running a program with exe fuction. \n\n    char **args=malloc(8 * sizeof(char *));\n    char *parsed;\n    int i=0,pid;\n\n    parsed = strtok(line,\" \");\n\n    while (parsed != NULL) {\n        args[i] = parsed;\n        i++;\n\n        parsed = strtok(NULL,\" \");\n    }\n\n    pid = fork();\n\n    if(pid == 0){\n        execvp (args[0],args);\n    }\n\n    waitpid(pid,NULL,0);\n}\n\nint main(int argc, char **argv){\n\n    char line[SIZE];\n    int check=1;\n\n    while(1){\n\n        printPrompt();\n        readPrompt(line,&amp;check);\n\n        if( (!strcmp(line,\"exit\")) || (check==0) ){\n            break;\n        }\n\n        RunSimple(line);\n    }\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "visual-studio", "gcc"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1575487357, "post_id": 59183149, "comment_id": 104587231, "body": "as far as I can see it should work. Are you sure you are running this task?"}, {"owner": {"reputation": 41, "user_id": 2230129, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/691556f91f0358720db6c3fa2e640ed4?s=128&d=identicon&r=PG", "display_name": "synthesis", "link": "https://stackoverflow.com/users/2230129/synthesis"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1575487684, "post_id": 59183149, "comment_id": 104587341, "body": "Yes, I ran it using F1 then typing &quot;Run Code&quot;. The output above includes the &quot;Missing argument&quot; message, which means the code was executed and ended up following the if (argc &lt; 3) branch."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1575487801, "post_id": 59183149, "comment_id": 104587386, "body": "terminal &gt; run task ... then select this task, aka &quot;gcc build and debug active file&quot;"}, {"owner": {"reputation": 41, "user_id": 2230129, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/691556f91f0358720db6c3fa2e640ed4?s=128&d=identicon&r=PG", "display_name": "synthesis", "link": "https://stackoverflow.com/users/2230129/synthesis"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1575488393, "post_id": 59183149, "comment_id": 104587625, "body": "&quot;gcc build and debug active file&quot; does not appear in my list. The closest match that appears is &quot;gcc build active file&quot;."}], "owner": {"reputation": 41, "user_id": 2230129, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/691556f91f0358720db6c3fa2e640ed4?s=128&d=identicon&r=PG", "display_name": "synthesis", "link": "https://stackoverflow.com/users/2230129/synthesis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575486627, "creation_date": 1575486627, "question_id": 59183149, "link": "https://stackoverflow.com/questions/59183149/visual-studio-code-arguments-not-passed-to-c-command-line-application", "title": "Visual Studio Code: arguments not passed to C command line application", "body": "<p>I have started using Visual Studio Code on Kali Linux 2019.4. I am compiling C code using the Code Runner extension. I am experiencing an issue where arguments passed to the application via \"args\": [\"String1\", \"String2\"] in launch.json, are not getting passed to the application as is indicated in the below output:</p>\n\n<p>Output:</p>\n\n<pre><code>[Running] cd \"/home/user/Desktop/test/\" &amp;&amp; gcc test.c -o test &amp;&amp; \"/home/user/Desktop/test/\"test\nLength of argv is: 1\nArg 1 is: /home/user/Desktop/test/test\nArg 2 is: (null)\nArg 3 is: GJS_DEBUG_TOPICS=JS ERROR;JS LOG\nMissing argument\n\n[Done] exited with code=1 in 1.166 seconds\n</code></pre>\n\n<p>What could be the reason that the arguments are not getting passed? I have included the C code and launch.json contents below:</p>\n\n<p>C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv)\n{\n    printf(\"Length of argv is: %d\\n\", argc);\n    printf(\"Arg 1 is: %s\\n\", argv[0]);\n    printf(\"Arg 2 is: %s\\n\", argv[1]);\n    printf(\"Arg 3 is: %s\\n\", argv[2]);\n\n    if (argc &lt; 3)\n    {\n        printf(\"Missing argument\\n\");\n        exit(1);\n    }\n\n    printf(\"Arg 1 is %s\\n\", argv[1]);\n    printf(\"Arg 2 is %s\\n\", argv[2]);\n\n    return 0;\n}\n</code></pre>\n\n<p>launch.json:</p>\n\n<pre><code>    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"gcc build and debug active file\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            \"program\": \"${fileDirname}/${fileBasenameNoExtension}\",\n            \"args\": [\"String1\",\"String2\"],\n            \"stopAtEntry\": false,\n            \"cwd\": \"${workspaceFolder}\",\n            \"environment\": [],\n            \"externalConsole\": false,\n            \"MIMode\": \"gdb\",\n            \"setupCommands\": [\n                {\n                    \"description\": \"Enable pretty-printing for gdb\",\n                    \"text\": \"-enable-pretty-printing\",\n                    \"ignoreFailures\": true\n                }\n            ],\n            \"preLaunchTask\": \"gcc build active file\",\n            \"miDebuggerPath\": \"/usr/bin/gdb\"\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "malloc", "realloc"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1575486025, "post_id": 59182974, "comment_id": 104586728, "body": "You can&#39;t. Use an index number as reference, relative to the start of the array instead of a pointer."}, {"owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "edited": false, "score": 0, "creation_date": 1575486122, "post_id": 59182974, "comment_id": 104586763, "body": "you need to strdup the string when you store it your structure, or strcpy it when you manually allocate memory for it (as you did, although you should allocate the right amount of memory according to the string length, instead of a fixed number of 10 bytes)"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1575488592, "last_edit_date": 1575488592, "creation_date": 1575487159, "answer_id": 59183277, "question_id": 59182974, "link": "https://stackoverflow.com/questions/59182974/pointer-points-to-wrong-direction-after-reallocating-memory/59183277#59183277", "title": "Pointer points to wrong direction after reallocating memory", "body": "<p>These statements</p>\n\n<pre><code>newBakeType-&gt;name=malloc(10* sizeof(char));\n\nnewBakeType-&gt;name=str;\n</code></pre>\n\n<p>result in a memory leak.</p>\n\n<p>At first the pointer <code>newBakeType-&gt;name</code> points to the allocated memory and then it is overwritten by the value of the pointer str.</p>\n\n<p>You should use either the standard C function strcpy or strncpy as for example</p>\n\n<pre><code>strcpy( newBakeType-&gt;name, str );\n</code></pre>\n\n<p>But before this call you have to allocate memory of a correct size like</p>\n\n<pre><code>newBakeType-&gt;name = malloc( strlen( str ) + 1 );\n</code></pre>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\ntypedef struct BakeryType {\n    char *name;\n} BakeType;\n\nBakeType *bakeTypeList=NULL;\nint baketypelistcounter=0;\n\n\nBakeType* addBakeType( const char *str ){\n    BakeType *newBakeType = NULL;\n\n    BakeType *tmp = realloc(bakeTypeList, ( baketypelistcounter + 1 ) * sizeof (BakeType));\n\n    if ( tmp != NULL )\n    {\n        baketypelistcounter++;\n        bakeTypeList = tmp;\n\n        newBakeType = bakeTypeList + baketypelistcounter - 1;\n\n        newBakeType-&gt;name=malloc( strlen( str ) + 1 );\n\n        if ( newBakeType-&gt;name != NULL )\n        {\n            strcpy( newBakeType-&gt;name, str );\n        }\n\n    }\n\n    return newBakeType;\n}\n\nint main(void) \n{\n    BakeType  *lastBakeType =  addBakeType( \"A\" );\n\n    puts( lastBakeType-&gt;name );\n\n    lastBakeType =  addBakeType( \"B\" );\n\n    puts( lastBakeType-&gt;name );\n\n    for ( const BakeType *current = bakeTypeList; \n          current != bakeTypeList + baketypelistcounter;\n          ++current )\n    {\n        puts( current-&gt;name );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>A\nB\nA\nB\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "is_accepted": true, "score": 0, "last_activity_date": 1575488400, "creation_date": 1575488400, "answer_id": 59183529, "question_id": 59182974, "link": "https://stackoverflow.com/questions/59182974/pointer-points-to-wrong-direction-after-reallocating-memory/59183529#59183529", "title": "Pointer points to wrong direction after reallocating memory", "body": "<p>You can't do it like that. When you realloc and make the memory block larger, the memory block may need to be moved if there is another memory block behind it, preventing it from growing.</p>\n\n<p>Your options to avoid this are:</p>\n\n<ol>\n<li><p><code>malloc()</code> each BakeType separately. So instead of the list being of actual BakeTypes, it will be of pointers-to-BakeType. Then only the array holding the pointers will be moved. Note that there is an overhead to a <code>malloc()</code>ed block. So if your BakeType really is just a <code>char*</code>, just get rid of <code>BakeType</code> and return the <code>char*</code> directly. If you expect more fields, it's probably fine.</p></li>\n<li><p>Instead of returning a <code>BakeType*</code>, return <code>baketypelistcounter -1</code>, i.e. the index, and use <code>bakeTypeList[theIndex]</code> instead to get a pointer when you actually need it. This of course only works if you only expect to add to the list and never remove, because if you remove a lower index, all higher ones will change.</p></li>\n</ol>\n\n<p>And as others have mentioned, your assignment to name is wrong. It <code>malloc()</code>s 10 bytes, then overwrites the pointer with the address of the string constant. A correct version of your code would be:</p>\n\n<pre><code>int strByteCount = strlen(str) + 1;\nnewBakeType-&gt;name = malloc(strByteCount * sizeof(char));\nmemcpy(newBakeType-&gt;name, str, strByteCount);\n</code></pre>\n\n<p>Or shorter</p>\n\n<pre><code>newBakeType-&gt;name = strdup(str);\n</code></pre>\n\n<p>as strings in C are just <code>malloc()</code>ed memory blocks, so your variable contains only the address of the memory block. So assigning one string to the other does not copy one string to the other, but rather just references the other string.</p>\n"}], "owner": {"reputation": 25, "user_id": 9950768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cb93fd85e60c43f41aa5e493d68c4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vasyl Martyniv", "link": "https://stackoverflow.com/users/9950768/vasyl-martyniv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59183529, "answer_count": 2, "score": 0, "last_activity_date": 1575488592, "creation_date": 1575485892, "question_id": 59182974, "link": "https://stackoverflow.com/questions/59182974/pointer-points-to-wrong-direction-after-reallocating-memory", "title": "Pointer points to wrong direction after reallocating memory", "body": "<p>After calling <code>addBakeType()</code> first time it it properly adds new BakeType object pointer to array, but after calling it for second time it seems to change adress of array during <code>realloc()</code> so pointers that point to previous element in array are getting messed up and point to wrong memory. Any ideas how to handle it?</p>\n\n<pre><code>typedef struct BakeryType {\n    char *name;\n} BakeType;\n\nBakeType *bakeTypeList=NULL;\nint baketypelistcounter=0;\n\n\nBakeType* addBakeType(char *str){\n    baketypelistcounter++;\n    bakeTypeList = realloc(bakeTypeList, baketypelistcounter * sizeof (BakeType));\n    BakeType *newBakeType = bakeTypeList + baketypelistcounter - 1;\n    newBakeType-&gt;name=malloc(10* sizeof(char));\n\n    newBakeType-&gt;name=str;\n    return newBakeType;\n}\n\n</code></pre>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575484738, "post_id": 59182688, "comment_id": 104586227, "body": "Yes.  You can&#39;t store more than 32 bits&#39; worth of information in a 32-bit int.  But why are you asking?  Why are you trying to &quot;convert <code>void *</code> to <code>int</code>&quot;?  And are you trying to convert the pointer, or the data that it points to?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1575484765, "post_id": 59182688, "comment_id": 104586239, "body": "You are type-casting the address stored in <code>info</code> to an int rather than the data stored in that address.  The correct data-type for casting the address stored in a <code>void *</code> into a signed integral type, however, is <code>intptr_t</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575484948, "post_id": 59182688, "comment_id": 104586311, "body": "Did someone tell you that <code>void *</code> was a &quot;generic&quot; type in C?  That could &quot;hold&quot; any type of data?  That&#39;s not quite true.  <code>void *</code> is a generic <i>pointer</i> type, that can <i>point to</i> any type of data."}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1575485736, "last_edit_date": 1575485736, "creation_date": 1575485393, "answer_id": 59182871, "question_id": 59182688, "link": "https://stackoverflow.com/questions/59182688/how-to-convert-void-to-int-without-losing-information-in-c/59182871#59182871", "title": "How to convert void * to int without losing information (in c)?", "body": "<ol>\n<li>Passing the pointer tho the int variable</li>\n</ol>\n\n<pre><code>int func(void* info)\n{\n   int num = *(int *)info;\n   // or \n   memcpy(&amp;num, info, sizeof(num));\n}\n\n\n//And usage\n\nint x = 6;\nfunc(&amp;x);\n</code></pre>\n\n<p>If the size of the integer is not larger than the size of the pointer most of the implementations will convert int to pointer and back. It is IMO UB but the implementations I know will compile and execute it the way you think</p>\n"}, {"tags": [], "owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "is_accepted": false, "score": 0, "last_activity_date": 1575485715, "creation_date": 1575485715, "answer_id": 59182933, "question_id": 59182688, "link": "https://stackoverflow.com/questions/59182688/how-to-convert-void-to-int-without-losing-information-in-c/59182933#59182933", "title": "How to convert void * to int without losing information (in c)?", "body": "<p><code>void*</code> is sometimes used to pass a pointer to a value of \"any type\" to a function.</p>\n\n<p>You will also need another parameter to describe what the void* actually points to, so that you can cast it to the correct pointer type.</p>\n\n<p>The following example illustrates the concept:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef enum {\n    what_int,\n    what_float,\n    what_string\n} what_t;\n\nvoid print_it(what_t what, void *value)\n{\n    switch (what) {\n        case what_int:\n            printf(\"It is an int: %d\\n\", * (int*) value);\n            break;\n        case what_float:\n            printf(\"It is a float: %f\\n\", * (float*) value);\n            break;\n        case what_string:\n            printf(\"It is a string: %s\\n\", (char*) value);\n            break;\n        default:\n            printf(\"I don't understand what it is\\n\");\n    }\n}\n\nint main()\n{\n    int i = 5;\n    print_it(what_int, &amp;i);\n\n    float f = 3.1415;\n    print_it(what_float, &amp;f);\n\n    char *s = \"Hello world\";\n    print_it(what_string, s);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output of this program is:</p>\n\n<pre><code>It is an int: 5\nIt is a float: 3.141500\nIt is a string: Hello world\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12376597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2727677840792643/picture?type=large", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/12376597/sabrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575485736, "creation_date": 1575484562, "question_id": 59182688, "link": "https://stackoverflow.com/questions/59182688/how-to-convert-void-to-int-without-losing-information-in-c", "title": "How to convert void * to int without losing information (in c)?", "body": "<p>If void* holds a variable amount of information, isn't possible that simply storing it in an integer would loose information? Shouldn't the information be stored in several integers (aka int*)?</p>\n\n<p>ex:</p>\n\n<pre><code>int func(void* info){\nint num = (int)info;\nreturn num;\n}\n</code></pre>\n\n<p>if info = Absdfsdfskewlrew.... , wouldn't num not be able to correctly hold this information?</p>\n"}, {"tags": ["c", "pointers", "struct"], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 0, "last_activity_date": 1575484642, "creation_date": 1575484642, "answer_id": 59182709, "question_id": 59182632, "link": "https://stackoverflow.com/questions/59182632/why-is-a-pointer-getting-set-to-nil-when-passed-to-a-function/59182709#59182709", "title": "Why is a pointer getting set to (nil) when passed to a function?", "body": "<p>Here</p>\n\n<pre><code>printf(\"queue pointer in test: %p\\n\", &amp;cond.queue);\n</code></pre>\n\n<p>you print the <em>address</em> of <code>cond.queue</code> (the &amp;-operator works on the whole construct, you probably meant to do: <code>(&amp;cond)-&gt;queue</code>, which is the same as <code>cond.queue</code>.</p>\n\n<p>And here you print the <em>content</em>:</p>\n\n<pre><code>printf(\"queue pointer in green_cond_signal: %p\\n\", cond-&gt;queue);\n</code></pre>\n\n<p>which was already a <code>NULL</code> pointer before calling.\nUse</p>\n\n<pre><code>printf(\"queue pointer in test: %p\\n\", cond.queue);\n</code></pre>\n\n<p>to get a meaningful result.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1575484787, "creation_date": 1575484787, "answer_id": 59182740, "question_id": 59182632, "link": "https://stackoverflow.com/questions/59182632/why-is-a-pointer-getting-set-to-nil-when-passed-to-a-function/59182740#59182740", "title": "Why is a pointer getting set to (nil) when passed to a function?", "body": "<p>You pass the the address of a <code>green_cond_t</code> to <code>green_cond_init</code>, but then you overwrite the value of the pointer you passed in:</p>\n\n<pre><code>cond = (green_cond_t *) malloc(sizeof(green_cond_t));\n</code></pre>\n\n<p>This means you're initializing a dynamically allocated structure, not the global one.  So when the function returns, the global <code>cond</code> still contains a NULL pointer from its implicit initialization.</p>\n\n<p>Remove the above <code>malloc</code> call from <code>green_cond_init</code> and the global <code>cond</code> will be properly initialized.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11486515"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59182740, "answer_count": 2, "score": 0, "last_activity_date": 1575484787, "creation_date": 1575484320, "question_id": 59182632, "link": "https://stackoverflow.com/questions/59182632/why-is-a-pointer-getting-set-to-nil-when-passed-to-a-function", "title": "Why is a pointer getting set to (nil) when passed to a function?", "body": "<p>I'm encountering segmentation faults while trying to get a thread hander simulator working in C. I define the following structures:</p>\n\n<pre><code>typedef struct queue_t {\n    struct green_t *front, *rear;\n} queue_t;\n\ntypedef struct green_cond_t {\n    struct queue_t *queue;\n} green_cond_t;\n</code></pre>\n\n<p>in green.o i have functions for a green condition (most importantly showing how I initialize a <code>green_cond_t</code> struct):</p>\n\n<pre><code>void green_cond_init(green_cond_t *cond) {\n    cond = (green_cond_t *) malloc(sizeof(green_cond_t));\n    cond-&gt;queue = (queue_t *) malloc(sizeof(queue_t));\n    cond-&gt;queue-&gt;front = cond-&gt;queue-&gt;rear = NULL;\n}\n\nvoid green_cond_wait(green_cond_t *cond) {\n    green_t *susp = running;\n    enqueue(cond-&gt;queue, susp);\n    running = dequeue(ready);\n    swapcontext(susp-&gt;context, running-&gt;context);\n}\n\nvoid green_cond_signal(green_cond_t *cond) {\n    //check pointer reference\n    printf(\"queue pointer in green_cond_signal: %p\\n\", cond-&gt;queue);\n    if (dequeue(cond-&gt;queue) == NULL) return; //assuming segfault happens here...\n    green_t *init = dequeue(cond-&gt;queue);\n    enqueue(ready, init);\n}\n</code></pre>\n\n<p>in test.c:</p>\n\n<pre><code>int flag = 0;\ngreen_cond_t cond;\n\nvoid * test(void *arg) {\n    int id = *(int *) arg;\n    int loop = 4;\n    while (loop &gt; 0) {\n        if (flag == id) {\n            printf(\"thread %d: %d\\n\", id, loop);\n            loop--;\n            flag = (id + 1) % 2;\n            //check pointer reference\n            printf(\"queue pointer in test: %p\\n\", &amp;cond.queue);\n            green_cond_signal(&amp;cond);\n        } else {\n            green_cond_wait(&amp;cond);\n        }\n    }\n}\n\nint main() {\n    green_cond_init(&amp;cond);\n\n    green_t g0, g1;\n    int a0 = 0;\n    int a1 = 1;\n\n    green_create(&amp;g0, test, &amp;a0);\n    green_create(&amp;g1, test, &amp;a1);\n\n    green_join(&amp;g0, NULL);\n    green_join(&amp;g1, NULL);\n    printf(\"done\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>the output from running test.c:</p>\n\n<pre><code>thread 0: 4\nqueue pointer in test: 0x5620b9f8c450\nqueue pointer in green_cond_signal: (nil)\nSegmentation fault (core dumped)\n</code></pre>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x000055555555499f in dequeue ()\n(gdb) back\n#0  0x000055555555499f in dequeue ()\n#1  0x0000555555554d5c in green_cond_signal ()\n#2  0x0000555555554e22 in test ()\n#3  0x0000555555554b04 in green_thread ()\n#4  0x00007ffff7a3c6b0 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#5  0x0000000000000000 in ?? ()\n</code></pre>\n\n<p>for some reason the <code>cond.queue</code> pointer is being set to nil on calling <code>green_cond_signal()</code> the first time and I just can't understand why. What am I doing wrong?</p>\n"}, {"tags": ["c", "header", "msp432"], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 5791141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68cd2ee477fc0cf910e7400935670c3?s=128&d=identicon&r=PG&f=1", "display_name": "foreverska", "link": "https://stackoverflow.com/users/5791141/foreverska"}, "is_accepted": false, "score": 0, "last_activity_date": 1575489650, "creation_date": 1575489650, "answer_id": 59183855, "question_id": 59182400, "link": "https://stackoverflow.com/questions/59182400/how-can-i-use-an-older-versions-ccs-header-file/59183855#59183855", "title": "How can I use an older version&#39;s CCS header file?", "body": "<p>You could throw it into the CCS cloud editor likely.  Make a new project for your device and copy and paste the code there.  It's generally pretty proficient at finding headers.</p>\n\n<p>The basic cycle for stuff like this on the local editor is:</p>\n\n<ul>\n<li>Make sure the development files for the device is installed</li>\n<li>Figure out where those files are hiding</li>\n<li>Dig through files until you find the header</li>\n<li>Go into properties of your project and under compiler options add the folder</li>\n</ul>\n\n<p>What may also help is to make sure you have the MSP432 stuff installed, import it's blinky led example project and see what it's include options are.  Or even just modify that newly imported project with this code.</p>\n\n<p>Sorry this isn't a step by step. I'm not on my computer with CCS right now.</p>\n"}], "owner": {"reputation": 1, "user_id": 10119723, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x3qQYz7MsoA/AAAAAAAAAAI/AAAAAAAAI7A/cMmeXOYFEmo/photo.jpg?sz=128", "display_name": "Baker Herrin", "link": "https://stackoverflow.com/users/10119723/baker-herrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575489650, "creation_date": 1575483266, "last_edit_date": 1575483373, "question_id": 59182400, "link": "https://stackoverflow.com/questions/59182400/how-can-i-use-an-older-versions-ccs-header-file", "title": "How can I use an older version&#39;s CCS header file?", "body": "<p>I am trying to include \"msp.h\" in a CCS v9 project in order to run code in a book I am reading. Here's an example code snippet:</p>\n\n<pre><code> * This program toggles green LED for 0.5 second ON and 0.5 second OFF.\n * The green LED is connected to P2.1.\n * The LEDs are high active (a '1' turns ON the LED).\n *\n * Tested with Keil 5.20 and MSP432 Device Family Pack V2.2.0\n * on XMS432P401R Rev C.\n */\n\n#include \"msp.h\"\n\nvoid delayMs(int n);\n\nint main(void) {\n    P2-&gt;SEL1 &amp;= ~2;         /* configure P2.1 as simple I/O */\n    P2-&gt;SEL0 &amp;= ~2;\n    P2-&gt;DIR |= 2;           /* P2.1 set as output pin */\n\n    while (1) {\n        P2-&gt;OUT |= 2;       /* turn on P2.1 green LED */\n        delayMs(500);\n        P2-&gt;OUT &amp;= ~2;      /* turn off P2.1 green LED */\n        delayMs(500);\n    }\n}\n\n/* delay milliseconds when system clock is at 3 MHz for Rev C MCU */\nvoid delayMs(int n) {\n    int i, j;\n\n    for (j = 0; j &lt; n; j++)\n        for (i = 750; i &gt; 0; i--);      /* Delay 1 ms*/\n}\n</code></pre>\n\n<p>It appears that it needs the msp.h include file to run, but I haven't been able to find the specific header file anywhere in the resource explorer when searching through the msp432 libraries. Any info on how to get this to compile would be great!</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1575482812, "post_id": 59182221, "comment_id": 104585335, "body": "The overall design of this code does not look good at all. But anyway: you need to check if  <code>fopen</code> fails."}, {"owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1575483424, "post_id": 59182221, "comment_id": 104585652, "body": "it does open becouse if I put the fputc() outside of the if(){} it puts it in the file instead of the first letter of the text. Could you also tell me how to improve the design?"}], "answers": [{"comments": [{"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575483752, "post_id": 59182468, "comment_id": 104585802, "body": "Just as an explanation of why <code>if(ch== &#39;A&#39; || &#39;a&#39;)</code> is wrong: The right side of the logical OR expression will always evaluate to true, because it is always non-zero, so that the whole expression will always evaluate to true, irrespective of the value of <code>ch</code>."}, {"owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "edited": false, "score": 0, "creation_date": 1575484107, "post_id": 59182468, "comment_id": 104585960, "body": "i fixed it thank you. I dont know why I didint reliase that I worked with || multiple times. Anyway it still replaces just the 1st letter. I guess im not sure how replacing files actually works"}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1575484225, "post_id": 59182468, "comment_id": 104586022, "body": "To REPLACE the complete file, modify the 2nd open to fopen(..., &quot;w&quot;). Also, the first should be fopen(..., &quot;r&quot;).. Remember to make backup of your data before running the program !"}, {"owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "edited": false, "score": 0, "creation_date": 1575484255, "post_id": 59182468, "comment_id": 104586033, "body": "I can use array and I would be very interested in how"}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1575484799, "post_id": 59182468, "comment_id": 104586251, "body": "See Alternate solution, based on array. There are library functions (e.g., strcasestr), which can make help solve this problem. Not sure if those can be used."}], "tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": true, "score": 3, "last_activity_date": 1575484852, "last_edit_date": 1575484852, "creation_date": 1575483602, "answer_id": 59182468, "question_id": 59182221, "link": "https://stackoverflow.com/questions/59182221/why-cant-i-rewrite-a-txt-file-in-c-language/59182468#59182468", "title": "Why cant I rewrite a .txt file in C language?", "body": "<p>The coding need some fixes. In particular</p>\n\n<ul>\n<li>The construct <code>if(ch== 'A' || 'a'){</code> is incorrect. You want to use <code>if (ch == 'A' || ch == 'a'))</code></li>\n<li>Always check for fopen for NULL</li>\n<li>Modify 1st fopen to \"r\" mode, modify 2nd fopen to \"w\" mode.</li>\n</ul>\n\n<p>From coding point of view, you might want to change the logic to reduce the level of nesting.</p>\n\n<pre><code>   while ( ch != EOF ) {\n      ch = fgetc(fp);\n      if(ch != 'A' &amp;&amp; ch != 'a') continue ;\n      ch = fgets(fp) ;\n      if ( ch !- 'N' &amp;&amp; ch != 'n' ) continue ;\n      ...\n      counter++ ;\n   } ;\n</code></pre>\n\n<p>You indicated that the problem must be solved using a small set of the standard functions. Not clear, if you are allowed to use array. If you do, you can get more elegant solutions.</p>\n"}, {"comments": [{"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575485617, "post_id": 59182721, "comment_id": 104586579, "body": "Just as a sidenote: According to the text of the question, <code>tolower()</code> is not allowed. However, I see no clean way to not use this function, except by implementing the function yourself using ASCII table arithmetic."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 1, "creation_date": 1575486135, "post_id": 59182721, "comment_id": 104586770, "body": "This solution actually contains a bug in that it won&#39;t find a match in the string &quot;anananas&quot;. However, since the text of the question disallows usage of the function <code>ungetc()</code> and the guaranteed size of the pushback buffer is only 1 byte, I see no clean way to fix this bug, except by implementing a pushback buffer yourself or by using an intermediate buffer."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "reply_to_user": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 1, "creation_date": 1575489522, "post_id": 59182721, "comment_id": 104588096, "body": "For the question of partial match - especially with a pattern like &#39;ananas&#39;- I think that whoever gave the assignment wanted the students to think about this issue by themselves. I suggest leaving it to the OP to try to address this weakness, and to qualify for extra score/grade."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 1, "creation_date": 1575489674, "post_id": 59182721, "comment_id": 104588156, "body": "It is possible to remove the code duplication <code>ch = fgetc(fp)</code>, by changing the for loop to an infinite for loop <code>for (;;)</code> and writing <code>ch = fgetc(fp); if ( ch == EOF) break;</code> at the start of the loop. I personally prefer to remove the code duplication, but some people prefer a bit of code duplication if that means that the infinite loop and <code>break</code> can be omitted."}], "tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1575488582, "last_edit_date": 1575488582, "creation_date": 1575484695, "answer_id": 59182721, "question_id": 59182221, "link": "https://stackoverflow.com/questions/59182221/why-cant-i-rewrite-a-txt-file-in-c-language/59182721#59182721", "title": "Why cant I rewrite a .txt file in C language?", "body": "<p>Alternative Solution using arrays, sticking to single character IO.</p>\n\n<p>The pattern can be set as a string (char array). With 'p' pointing to the next character to match.</p>\n\n<pre><code>   char pattern = \"ananas\" ;\n\n   int p = 0;\n   for ( char ch = fgetc(fp) ; ch != EOF ; ch = fgetc(fp)) {\n       if ( isupper(ch) ) ch = tolower(ch) ;\n       if ( ch != pattern[p] ) {\n           p = 0 ;\n           continue ;\n       } ;\n       p++;\n       if ( pattern[p] == '\\0' ) {\n           // Complete Match\n           counter++ ;\n           p = 0 ;\n       } ;\n   } ;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12481410, "user_type": "registered", "profile_image": "https://graph.facebook.com/2858201957537465/picture?type=large", "display_name": "D&#225;vid Slota", "link": "https://stackoverflow.com/users/12481410/d%c3%a1vid-slota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59182468, "answer_count": 2, "score": 1, "last_activity_date": 1575497373, "creation_date": 1575482575, "last_edit_date": 1575497373, "question_id": 59182221, "link": "https://stackoverflow.com/questions/59182221/why-cant-i-rewrite-a-txt-file-in-c-language", "title": "Why cant I rewrite a .txt file in C language?", "body": "<p>I am trying to do this exercise in C that requires me to replace contents of a .txt file with a number that is representing how many times a certain char sequence can be found in a file. </p>\n\n<p>The sequence is hello. Caps doesnt matter.</p>\n\n<p>text1.txt --> grow in clusters hanging from the top of the plant. Almost all modern edible seedless BANANAS comvated bananas are Musa acuminata, Musa balbisianaX paadisiaca, depending on their genomic constitution.</p>\n\n<p>text2.txt --> In the past, there was a hoax that some countries wanted to ban ananas (also known as pineaause it was less delicious than bananas but fortunately, this ot true.</p>\n\n<p>So with the first file, the code should rewrite it to 5 (ananas occures 5 times). In the second file there should be 2.</p>\n\n<p>But when I run the program no files change.</p>\n"}, {"tags": ["c", "loops", "rectangles"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575482419, "post_id": 59182136, "comment_id": 104585129, "body": "You can&#39;t remove it, but you can make it conditional. But another possible reason for failing is that <code>rows</code> is the inner loop, when it should be the outer one."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575482669, "post_id": 59182136, "comment_id": 104585258, "body": "I would argue that printing the <code>&quot;\\n&quot;</code> at the end of each line (as you have done) is more correct."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575482824, "post_id": 59182136, "comment_id": 104585338, "body": "...when I enter 4 rows and 7 columns, I don&#39;t get that picture. I get a tall thin one. Looking at your console, you entered 7 rows and 4 columns ;)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575482905, "post_id": 59182136, "comment_id": 104585382, "body": "The names of your <code>rows</code> and <code>columns</code> variables are confusing though. I would have made <code>rows</code> the number of lines and <code>columns</code> the number of characters on each line. (Or perhaps the names are correct and your interpretation of the desired shape is incorrect.)"}, {"owner": {"reputation": 1, "user_id": 11937283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf666923e5374c0329b4eac33afc4ca?s=128&d=identicon&r=PG&f=1", "display_name": "Majd", "link": "https://stackoverflow.com/users/11937283/majd"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575484182, "post_id": 59182136, "comment_id": 104585999, "body": "@WeatherVane how i can make it conditional ? and about the rows , no its correct , when u enter 4 rows and 7 columns  u get a tall one , it doesn&#39;t matter as i got the output that i needed , now i need to solve the problem that the printf(&quot;\\n&quot;) must not be in the last , what ur suggestion ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575484313, "post_id": 59182136, "comment_id": 104586055, "body": "Well, what was the specification for entering the rows and columns? Which comes first? You don&#39;t mention that. What does the <b>bot</b> enter for rows and columns? As for the conditional, which &quot;row&quot; do you want to skip the newline? Make that the condition, but first get the rows/columns right."}, {"owner": {"reputation": 1, "user_id": 11937283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf666923e5374c0329b4eac33afc4ca?s=128&d=identicon&r=PG&f=1", "display_name": "Majd", "link": "https://stackoverflow.com/users/11937283/majd"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575484549, "post_id": 59182136, "comment_id": 104586142, "body": "@WeatherVane will in the question its asked to get value of x first then y , where it is x for length and y for width  so rows for x and y for columns"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575484660, "post_id": 59182136, "comment_id": 104586194, "body": "So it&#39;s the variable names which are confusing. So <code>if(column != XXX) ...</code>"}, {"owner": {"reputation": 1, "user_id": 11937283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf666923e5374c0329b4eac33afc4ca?s=128&d=identicon&r=PG&f=1", "display_name": "Majd", "link": "https://stackoverflow.com/users/11937283/majd"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575485143, "post_id": 59182136, "comment_id": 104586384, "body": "@WeatherVane well how i can change my program so it will be correct as they ask ? i need x for length and y for width , if simply replace the rows and columns with x and y it will be correct ? becuase if i do the opposite and type 7 for x and 4 for y i dont get the output they asking for.."}], "owner": {"reputation": 1, "user_id": 11937283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf666923e5374c0329b4eac33afc4ca?s=128&d=identicon&r=PG&f=1", "display_name": "Majd", "link": "https://stackoverflow.com/users/11937283/majd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575482215, "creation_date": 1575482215, "question_id": 59182136, "link": "https://stackoverflow.com/questions/59182136/a-program-in-c-thats-prints-rectangle-with-x-and-y-of-pattern", "title": "A program in c thats prints rectangle with x and y of * pattern", "body": "<p>i am trying to make a program that prints rectangle of x and y of * , lets say i have x= 7 , y = 4 , so it will print:</p>\n\n<p><a href=\"https://i.stack.imgur.com/75J2p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/75J2p.png\" alt=\"enter image description here\"></a></p>\n\n<p>when i check that code  with the bot that checks if my code is correct(for school homework) , it give me that my code is incorrect although i have the same output , after i asked some of my classmates and the teachers it turned out  that  the last line of the code must be the line where it is printf(\"\") and not printf(\"\\n\") (the bot thinks that the last line of code where it is printf(\"\\n\") some kind of error or something) , so how i can get the same result with my current code but , wheres  the last line of code is printf(\"<em>\") and not printf(\"\\n\") ?  i need my last line of code to be printf(\"</em>\") and not printf(\"\\n\") and still get the same result , any suggestions ? basically i cant just remove the last printf(\"\\n\") because it will change the output , so i need to put it in somewhere else with an if statement or something so it will give me the same results </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define _CRT_SECURE_NO_WARNINGS\n\n\nint main() {\n    int i, j, rows, columns;\n    scanf_s(\"%d\", &amp;rows);\n    scanf_s(\"%d\", &amp;columns);\n    for (i = 1; i &lt;= columns; i++)\n    {\n        for (j = 1; j &lt;= rows; j++)\n        {   \n            if(i == 1 || i == columns || j == 1 || j == rows)\n                printf(\"*\");\n            else\n                printf(\" \");\n        }\n        printf(\"\\n\");\n\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1575482287, "post_id": 59182117, "comment_id": 104585065, "body": "This isn&#39;t the cause of your crash, but note that you always only write values to the first student in the array."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 3, "creation_date": 1575482421, "post_id": 59182117, "comment_id": 104585135, "body": "you haven&#39;t allocated memory for name/surname variables inside of struct"}, {"owner": {"reputation": 25, "user_id": 12448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547b1a613e8a70a2e4cfde1105a38000?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny", "link": "https://stackoverflow.com/users/12448318/johnny"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1575482762, "post_id": 59182117, "comment_id": 104585310, "body": "@I\u0142yaBursov But as far as I know, the way I&#39;ve done this, the system allocates the needed memory as the user types in the characters. For example, if I write int *ptr=john  the program will automatically allocate memory for 5 characters including the \\0."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 3, "creation_date": 1575482794, "post_id": 59182117, "comment_id": 104585326, "body": "@Giannis <code>the system allocates the needed memory as the user types in the characters</code> this is false."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1575482796, "post_id": 59182117, "comment_id": 104585327, "body": "@Giannis type is pointer, so it will allocate only 4 bytes for pointer, system does not know how many symbols you will store in it"}, {"owner": {"reputation": 25, "user_id": 12448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547b1a613e8a70a2e4cfde1105a38000?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny", "link": "https://stackoverflow.com/users/12448318/johnny"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1575482945, "post_id": 59182117, "comment_id": 104585405, "body": "@PatrickRoberts My book says that this way the word is stored somewhere in the memory and the pointer points to the first character of the word."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1575483001, "post_id": 59182117, "comment_id": 104585436, "body": "@Giannis your program must explicitly allocate the memory that <code>scanf()</code> writes to. <code>scanf()</code> does not allocate memory."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1575483007, "post_id": 59182117, "comment_id": 104585438, "body": "@Giannis book is correct, word will be stored somewhere in memory, but this memory is allocated by you"}, {"owner": {"reputation": 25, "user_id": 12448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547b1a613e8a70a2e4cfde1105a38000?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny", "link": "https://stackoverflow.com/users/12448318/johnny"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1575483127, "post_id": 59182117, "comment_id": 104585509, "body": "@I\u0142yaBursov so in this case how to i allocate that memory?"}, {"owner": {"reputation": 25, "user_id": 12448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547b1a613e8a70a2e4cfde1105a38000?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny", "link": "https://stackoverflow.com/users/12448318/johnny"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1575483823, "post_id": 59182117, "comment_id": 104585834, "body": "@PatrickRoberts and how do i do that?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1575485205, "post_id": 59182117, "comment_id": 104586415, "body": "@Giannis it should be something like <code>a[i].name = malloc(MAX_NAME);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1575526758, "post_id": 59188185, "comment_id": 104598145, "body": "This code works for some loosely defined value of &quot;works&quot;. <code>fgets</code> stores the newline character in the buffer. Do you know anyone named <code>John\\n</code>? It also reads one character less than the size of each <code>char</code> array allows, for no reason at all. And why an array of pointers?!"}], "tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": false, "score": 1, "last_activity_date": 1575519377, "creation_date": 1575519377, "answer_id": 59188185, "question_id": 59182117, "link": "https://stackoverflow.com/questions/59182117/structures-and-arrays-in-c/59188185#59188185", "title": "Structures and arrays in C", "body": "<p>This code works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct student\n    {\n        char name[30];\n        char surname[30];\n        float average;\n    };\n\n    void inputs(struct student *a, int size);\n\n\nint main()\n{\n    int size;\n    int i=0; // we need i\n    char string[100];\n\n    printf(\"Enter the number of students: \");\n    // scanf can be tricky lets use fgets\n    fgets( string , 99 , stdin );\n        size= atoi(string);\n\n    struct student **data; // array of struct\n\n    // get memory for the pointers to pointer\n    data=(struct student **) calloc( size , sizeof(char *));\n    // now each struct need space\n    for( i=0 ; i&lt;size ; i++)\n    {\n    data[i] = malloc(sizeof(struct student));\n    if(data[i]==NULL) {\n        printf(\"Cannot allocate memory. The program will now terminate.\");\n        return -1;\n    }// end if\n    }// end for loop\n\n    // input each student\n    for( i=0 ; i&lt;size ; i++)\n    inputs (data[i], i );\n\n    return 0;\n}\n\nvoid inputs(struct student *a, int num)\n{\n    int j=0;\n    char string[100];\n\n    // scanf can be tricky lets use fgets\n    printf(\"Enter the name of the student number %d: \", num+1);\n    fgets(a-&gt;name, 29, stdin);\n    printf(\"Enter the surname of the student number %d: \", num+1);\n    fgets( a-&gt;surname , 29, stdin);\n    printf(\"Enter the average grade of the student number %d: \", num+1);\n    fgets( string , 99, stdin);\n    a-&gt;average=atof(string);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547b1a613e8a70a2e4cfde1105a38000?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny", "link": "https://stackoverflow.com/users/12448318/johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575519377, "creation_date": 1575482129, "question_id": 59182117, "link": "https://stackoverflow.com/questions/59182117/structures-and-arrays-in-c", "title": "Structures and arrays in C", "body": "<p>I must create a program focusing on the use of structures.</p>\n\n<p>The program will ask the user to enter the number of students for whom he will later add specific information (name, surname, average grade). </p>\n\n<p>For some reason, when I start the the program, I enter the number of students i want, after that I enter the info of the first student and then the program terminates.</p>\n\n<p>Here's what I've tried.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct student\n    {\n        char *name;\n        char *surname;\n        float *average;\n    };\n\n    void inputs(struct student *a, int size);\n\n\nint main()\n{\n    int size;\n\n    printf(\"Enter the number of students: \");\n    scanf(\"%d\", &amp;size);\n\n    struct student *data;\n    data = (struct student *)malloc(size*sizeof(struct student));\n    if(data==NULL) {\n        printf(\"Cannot allocate memory. The program will now terminate.\");\n        return -1;\n    }\n\n    inputs (data, size);\n\n    return 0;\n}\n\nvoid inputs(struct student *a, int size)\n{\n    int j=0;\n    int i;\n    for(i=0; i&lt;size; i++) {\n        printf(\"Enter the name of the student number %d: \", j+1);\n        scanf(\"%s\", a-&gt;name);\n        printf(\"Enter the surname of the student number %d: \", j+1);\n        scanf(\"%s\", a-&gt;surname);\n        printf(\"Enter the average grade of the student number %d: \", j+1);\n        scanf(\"%f\", a-&gt;average);\n        j++;\n        a++;\n        }\n}\n\n\n</code></pre>\n"}, {"tags": ["c", "embedded", "clock", "internals"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575532747, "post_id": 59181607, "comment_id": 104600348, "body": "Getting <i>anything</i> out on ports on these parts is quite painful, you have to wade through their obscure mux tables. The &quot;magic number&quot; you give to PMUX have to correspond to the correct &quot;magic letter&quot; in the mux table. From what I can tell, GCLK_IO is magic letter H, but you seem to be using magic letter G?"}], "owner": {"reputation": 21, "user_id": 12481262, "user_type": "registered", "profile_image": "https://graph.facebook.com/2880898748634751/picture?type=large", "display_name": "Davon Henry", "link": "https://stackoverflow.com/users/12481262/davon-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575531735, "creation_date": 1575480163, "last_edit_date": 1575531735, "question_id": 59181607, "link": "https://stackoverflow.com/questions/59181607/atsamd51g19-help-setting-up-digital-output-with-clock-source", "title": "ATSAMD51G19 Help setting up Digital output with clock source", "body": "<p>I cant seem to get my head round configuring the internal clock as an output.</p>\n\n<p>I'm looking to output a 32MHz clock on PA22 or Digital Pin 1 on the adafruit metro M4 Express.</p>\n\n<p>here is my code </p>\n\n<pre><code>void setup()\n{   \n\n    GCLK-&gt;GENCTRL[7].reg = GCLK_GENCTRL_OE |              // Enable the GCLK output\n                           GCLK_GENCTRL_IDC |            // Set the duty cycle to 50/50 HIGH/LOW\n                           GCLK_GENCTRL_GENEN |\n                           GCLK_GENCTRL_SRC_DFLL;           \n\n    while(GCLK-&gt;SYNCBUSY.bit.GENCTRL7);          \n\n    PORT-&gt;Group[g_APinDescription[1].ulPort].PINCFG[g_APinDescription[1].ulPin].bit.PMUXEN = 1;\n\n    PORT-&gt;Group[g_APinDescription[1].ulPort].PMUX[g_APinDescription[1].ulPin &gt;&gt; 1].reg |= PORT_PMUX_PMUXO(1);\n}\n</code></pre>\n\n<p>any help much appreciated</p>\n"}, {"tags": ["c", "list", "recursion", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 163, "user_id": 12313191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDelPS5VpuVOfMYXPwWBTLBvilRRWDWFzYm4WiPJA=k-s128", "display_name": "Yoni Melki", "link": "https://stackoverflow.com/users/12313191/yoni-melki"}, "edited": false, "score": 0, "creation_date": 1575480651, "post_id": 59181564, "comment_id": 104584197, "body": "Hey man :), we can\u2019t give you the answer (you won\u2019t learn like this). Try to do some code and bring us what you did and what are the errors. It will be better for you for learning"}, {"owner": {"reputation": 1, "user_id": 12481223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e87e9e2c0e61c67515fdc2c4c1c648f?s=128&d=identicon&r=PG&f=1", "display_name": "AlexDerFerri", "link": "https://stackoverflow.com/users/12481223/alexderferri"}, "reply_to_user": {"reputation": 163, "user_id": 12313191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDelPS5VpuVOfMYXPwWBTLBvilRRWDWFzYm4WiPJA=k-s128", "display_name": "Yoni Melki", "link": "https://stackoverflow.com/users/12313191/yoni-melki"}, "edited": false, "score": 0, "creation_date": 1575481755, "post_id": 59181564, "comment_id": 104584785, "body": "Yes, I know but I&#39;ve been struggling with the code for hours and thought a help would clear my head definitely ahaha. :)"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1575482362, "last_edit_date": 1575482362, "creation_date": 1575480527, "answer_id": 59181716, "question_id": 59181564, "link": "https://stackoverflow.com/questions/59181564/delete-a-node-which-is-multiple-of-a-given-number-with-recursion-c-programming/59181716#59181716", "title": "Delete a Node which is multiple of a given number with recursion [C programming]", "body": "<p>The function can look very simple</p>\n\n<pre><code>void deleteMultipleOfNNodes( Node **head, int n )\n{\n    Node *tmp = *head;\n\n    if ( tmp != NULL )\n    {\n        tmp-&gt;data % n == 0 ? ( *head ) = ( *head )-&gt;next, free( tmp ) \n                           : ( void )(  head = &amp;( *head )-&gt;next );\n        deleteMultipleOfNNodes( head, n );\n    }\n}\n</code></pre>\n\n<p>Pay attention to that this function</p>\n\n<pre><code>bool isMultipleOf(int value, int n) {\n    // While the value is greater than zero, keep on subtracting the number\n    while (value &gt; 0) { \n        value -= n; \n    }\n\n    return (value == 0);\n\n}\n</code></pre>\n\n<p>is invalid in general case because either value or n can be negative.</p>\n\n<p>So define the function like</p>\n\n<pre><code>bool isMultipleOf( int value, int n ) \n{\n    return value % n == 0;\n}\n</code></pre>\n\n<p>In this case the function above can be rewritten like</p>\n\n<pre><code>void deleteMultipleOfNNodes( Node **head, int n )\n{\n    Node *tmp = *head;\n\n    if ( tmp != NULL )\n    {\n        isMultipleOf( tmp-&gt;data, n ) ? ( *head ) = ( *head )-&gt;next, free( tmp ) \n                                     : ( void )(  head = &amp;( *head )-&gt;next );\n        deleteMultipleOfNNodes( head, n );\n    }\n}\n</code></pre>\n\n<p>The function <code>addToHead</code> is too complicated. It can be written the following way</p>\n\n<pre><code>bool addToHead(Node **head, int value) \n{\n    Node *newNode = malloc( sizeof( Node ) );\n    bool success = newNode != NULL;\n\n    if ( success )\n    {\n        newNode -&gt; data = value;\n        newNode -&gt; next = *head;\n        *head = newNode;\n    }\n\n    return success;\n}\n</code></pre>\n\n<p>Here is a demonstrative program. It contains only those functions that are required to demonstrate the recursive function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\ntypedef struct node {\n    int data;\n    struct node *next; \n\n} Node;\n\nbool addToHead(Node **head, int value) \n{\n    Node *newNode = malloc( sizeof( Node ) );\n    bool success = newNode != NULL;\n\n    if ( success )\n    {\n        newNode -&gt; data = value;\n        newNode -&gt; next = *head;\n        *head = newNode;\n    }\n\n    return success;\n}\n\nbool isMultipleOf( int value, int n ) \n{\n    return value % n == 0;\n}\n\nvoid deleteMultipleOfNNodes( Node **head, int n )\n{\n    Node *tmp = *head;\n\n    if ( tmp != NULL )\n    {\n        isMultipleOf( tmp-&gt;data, n ) ? ( *head ) = ( *head )-&gt;next, free( tmp ) \n                                     : ( void )(  head = &amp;( *head )-&gt;next );\n        deleteMultipleOfNNodes( head, n );\n    }\n}\n\nvoid printList( const Node *head )\n{\n    for ( ; head != NULL; head = head-&gt;next )\n    {\n        printf( \"%d --&gt; \", head-&gt;data );\n    }\n\n    puts( \"NULL\" );\n}\n\nint main(void) \n{\n    Node *head = NULL;\n    const int N = 10;\n\n    for ( int i = N; i != 0; i-- )\n    {\n        addToHead( &amp;head, i );\n    }\n\n    printList( head );\n\n    deleteMultipleOfNNodes( &amp;head, 2 );\n\n    printList( head );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>1 --&gt; 2 --&gt; 3 --&gt; 4 --&gt; 5 --&gt; 6 --&gt; 7 --&gt; 8 --&gt; 9 --&gt; 10 --&gt; NULL\n1 --&gt; 3 --&gt; 5 --&gt; 7 --&gt; 9 --&gt; NULL\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12481223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e87e9e2c0e61c67515fdc2c4c1c648f?s=128&d=identicon&r=PG&f=1", "display_name": "AlexDerFerri", "link": "https://stackoverflow.com/users/12481223/alexderferri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575482362, "creation_date": 1575480024, "last_edit_date": 1575480590, "question_id": 59181564, "link": "https://stackoverflow.com/questions/59181564/delete-a-node-which-is-multiple-of-a-given-number-with-recursion-c-programming", "title": "Delete a Node which is multiple of a given number with recursion [C programming]", "body": "<p>I'm finding troubles trying to implement a function, this is what the program should do:\nThe user must first input an integer number (this number is not added to the list).\nThen, I have to write a function which deletes recursively all the nodes in the list that are multiple of the input number.</p>\n\n<p>This is my current code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define true 1 \n#define false 0\n#define bool int\n\ntypedef struct node {\n    int data;\n    struct node *next; \n\n} Node;\n\nvoid addToHead(Node **head, int value);\nvoid printList(Node *head);\nbool isMultipleOf(int value, int n);\nvoid deleteMultipleOfNNodes(Node **head, int n);\n\n\nint main() {\n    // Create head \n    Node *head = NULL;\n\n    int loop = true;\n    int input;\n\n    // The value whose multiples must be deleted from the list\n    int n;\n    scanf(\"%d\", &amp;n);\n\n    while (loop) {\n        scanf(\"%d\", &amp;input);\n\n        // End loop - print list\n        if (input &lt; 0) {\n            deleteMultipleOfNNodes(&amp;head, n);\n            printList(head);\n            loop = false;\n        } else {\n        // Add value to the head\n            addToHead(&amp;head, input);\n        }\n\n    }\n    return 0;\n}\n\n\nvoid addToHead(Node **head, int value) {\n    Node *temp;\n\n    if (*head != NULL) { \n        // Create new node\n        Node *newNode = (Node*) malloc(sizeof(Node));\n        // Set new node data\n        newNode -&gt; data = value;\n        // New node links to the head\n        newNode -&gt; next = *head;\n        // New node is now the head of the list\n        *head = newNode;\n\n    } else {\n        // Create head\n        *head = (Node*) malloc(sizeof(Node));\n        // Set head data\n        (*head) -&gt; data = value;\n        // Head links to NULL\n        (*head) -&gt; next = NULL;\n\n    }\n}\n\nvoid printList(Node *head) {\n    Node *temp = head;\n    while (temp != NULL) {\n        if (temp -&gt; next != NULL) {\n            printf(\"%d -&gt; \", temp-&gt;data);\n        } else {\n            printf(\"%d -&gt; NULL\", temp -&gt; data);\n        }\n        temp = temp-&gt;next; \n    }\n\n}\n\nbool isMultipleOf(int value, int n) {\n    // While the value is greater than zero, keep on subtracting the number\n    while (value &gt; 0) { \n        value -= n; \n    }\n\n    return (value == 0);\n\n}\n\nvoid deleteMultipleOfNNodes(Node **head, int n) {\n     // ========= CODE ================\n}\n</code></pre>\n\n<p>Thank you in advance for your help!</p>\n"}, {"tags": ["c++", "c", "linker", "embedded", "objcopy"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1575480718, "post_id": 59181464, "comment_id": 104584228, "body": "Since you&#39;ve tagged it [c] and [c++], it&#39;s worth mentioning that you could create your own tool. It sounds like a reasonably simple task to convert an SREC file with varying lengths into an SREC file with fixed lengths."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1575480980, "post_id": 59181464, "comment_id": 104584390, "body": "@user253751 I did it already &quot;by hand&quot; and I thought about writing a small python script and if until next week I find now better solution, I am going to do this. But I thougt maybe there are possible other users who came across the same problem"}, {"owner": {"reputation": 119, "user_id": 7458049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1588840764489336/picture?type=large", "display_name": "0x6261627564", "link": "https://stackoverflow.com/users/7458049/0x6261627564"}, "edited": false, "score": 2, "creation_date": 1575492347, "post_id": 59181464, "comment_id": 104589247, "body": "If you come from automotive world you can use the Vector HexView or WindRiver ddump as an alternative 3rd party, both can be used to generate SREC with fixed length."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1575492605, "post_id": 59181464, "comment_id": 104589363, "body": "Probably worth seeing if there&#39;s some combination of options to srec_cat which could do this, either by itself or with modifications to fill out the end of a line.  Going through an intermediate flat binary stage could also be an option - start with a block of &quot;erased&quot;, <code>dd</code> a partial binary over it, re-encode to hex."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1575534809, "post_id": 59181464, "comment_id": 104601254, "body": "Writing such a program yourself is indeed not rocket science. Read the file and write a new one simultaneously. Store all data in RAM until you have enough to write a fixed length to the new file. Recalculate address and checksum. Repeat until done. Leave S0 and S9 as they were. Couple of hours of work, at most."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 4079728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af401958b184b726aeeb94fec448fb6f?s=128&d=identicon&r=PG&f=1", "display_name": "Ummer K K", "link": "https://stackoverflow.com/users/4079728/ummer-k-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1576141317, "creation_date": 1576141317, "answer_id": 59300955, "question_id": 59181464, "link": "https://stackoverflow.com/questions/59181464/create-motorola-s-record-with-fixed-size-length/59300955#59300955", "title": "Create motorola s-record with fixed size length", "body": "<p>You can try the srec_cat utility to do this. Following is an example command.</p>\n\n<p>\"srec_cat long.srec \u2212o short.s19 \u2212line-length=46\"</p>\n"}], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576141317, "creation_date": 1575479723, "question_id": 59181464, "link": "https://stackoverflow.com/questions/59181464/create-motorola-s-record-with-fixed-size-length", "title": "Create motorola s-record with fixed size length", "body": "<p>Because I have to use a third-party bootloader which cannot handle varying lengths of lines in an SREC file, I need a way to instrument <code>objcopy</code> to create a SREC file, where every <code>S1</code> line has the same lengths (if no info from ELF file is provided, it should be filled with <code>FF</code>).</p>\n\n<p>We can assume that the address increments are consistent, so we do not jump higher in addresses than our specified line length. So we do not need to create in-between lines with all <code>FF</code> e.g.</p>\n\n<p>I found out about <code>--srec-len</code> but this only sets the maximum length size.<br>\nI would need something that sets a fixed length size, is there something I can use? </p>\n\n<p>A possible solution would be also to transform the earlier generated SREC file from objcopy with a (third-party) tool</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1575479657, "post_id": 59181397, "comment_id": 104583689, "body": "Try not to use minuscule buffers, use a safer default like <code>char input[255]</code>. Also pass this buffer length into <code>scanf</code> if you&#39;re using that to be sure you don&#39;t overflow it by accident: <code>scanf(&quot;%255s&quot;, &amp;input)</code>."}, {"owner": {"reputation": 827, "user_id": 8524732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uzdr.jpg?s=128&g=1", "display_name": "xDrago", "link": "https://stackoverflow.com/users/8524732/xdrago"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1575479883, "post_id": 59181397, "comment_id": 104583794, "body": "Thanks but when using this I still have the same issue and i had to remove the <code>&amp;</code> in front of input to make it work."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1575480175, "post_id": 59181397, "comment_id": 104583941, "body": "<code>input</code> won&#39;t contain any spaces for <code>strtok</code> to find! The <code>%s</code> specifier stops scanning at the first whitespace character. Use <code>fgets</code> to input a line of text."}, {"owner": {"reputation": 827, "user_id": 8524732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uzdr.jpg?s=128&g=1", "display_name": "xDrago", "link": "https://stackoverflow.com/users/8524732/xdrago"}, "edited": false, "score": 0, "creation_date": 1575480674, "post_id": 59181397, "comment_id": 104584208, "body": "Sorry I am too new to this. How to use fgets to read from console?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575480757, "post_id": 59181397, "comment_id": 104584252, "body": "By using <code>stdin</code> as the file stream."}, {"owner": {"reputation": 492, "user_id": 11943877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f69b67cf13b3b83add3f3f2b56b176?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/11943877/sergey"}, "edited": false, "score": 0, "creation_date": 1575480837, "post_id": 59181397, "comment_id": 104584306, "body": "There are three issues here: 1. inappropriate use of scanf() 2. inappropriate use of strtok() 3. The choice of these two functions is not the best for your task. Please specify what do you need. 1. Explanation of scanf() usage. 2. Explanation of strtok() usage. 3. A sample code that can solve your task."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575480881, "post_id": 59181397, "comment_id": 104584329, "body": "Note that <code>idx = sscanf(input, &quot;%s %d&quot;, str, &amp;idx);</code> won&#39;t work for 2 reasons: a) you filtered off the part of the input string that contained those values and b) the value scanned into <code>idx</code> will get overwritten by the assignment <code>idx = sscanf(...);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 827, "user_id": 8524732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uzdr.jpg?s=128&g=1", "display_name": "xDrago", "link": "https://stackoverflow.com/users/8524732/xdrago"}, "edited": false, "score": 0, "creation_date": 1575486764, "post_id": 59181843, "comment_id": 104586993, "body": "I tried it but it seems that my variable <code>input</code> does not include the space nor the number like Weather Vane mentioned in comments above."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "reply_to_user": {"reputation": 827, "user_id": 8524732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uzdr.jpg?s=128&g=1", "display_name": "xDrago", "link": "https://stackoverflow.com/users/8524732/xdrago"}, "edited": false, "score": 0, "creation_date": 1575489040, "post_id": 59181843, "comment_id": 104587895, "body": "I&#39;ve expanded on the fgets/scanf, following xdrago comments."}], "tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1575488957, "last_edit_date": 1575488957, "creation_date": 1575481008, "answer_id": 59181843, "question_id": 59181397, "link": "https://stackoverflow.com/questions/59181397/c-read-multiple-words-arguments-with-space-from-console/59181843#59181843", "title": "C read multiple words/arguments with space from console", "body": "<p>You have few choices, and you want to choose one and not mix them up. </p>\n\n<p>For reading the input, consider using the fgets. Much safer, with fewer exceptions to deal with. I've listed the equivalent sscanf, but it's much harder to use. They will both bring in a complete line to 'input'. Notice that the fgets will also include the trailing new line.</p>\n\n<pre><code>   // make buffer large enough.\nchar input[255] ;\n\nif ( fgets(input, sizeof(input), stdin) != NULL ) {\n   ...\n}\n\n// OR\nif ( sscanf(\"%19[^\\n]\", input) = 1 ) {\n} ;\n</code></pre>\n\n<p>For parsing: few options to parse the input` string.</p>\n\n<p>Between the option, I would vote for the sscanf, as it provides the most validation and protection against bad input, overflow, etc. The strcmp(strtok(...)) can easily result in SEGV errors, when strtok returns NULL.</p>\n\n<p>Using sscanf</p>\n\n<pre><code>  if ( sscanf(input, \"inspect %d\", &amp;idx) ==1 ) {\n     ... Show Element idx\n  } ;\n</code></pre>\n\n<p>Using strtok/strcmp</p>\n\n<pre><code>  if ( strcmp(strtok(input, \" \"), \"inspect\") == 0 ) {\n      if ( sscanf(\"%d\", strtok(NULL, \" \"), &amp;idx) == 1 ) {\n          .. Show element idx\n      } ;\n  } ;\n</code></pre>\n\n<p>Using strtol</p>\n\n<pre><code>  if ( strcmp(strtok(input, \" \"), \"inspect\") == 0 ) {\n      char *stptr = strtok(input, \" \"), *endptr = NULL ;\n      idx = strtol(stptr, &amp;endptr, 10) ;\n      if ( endptr != stptr ) {\n          .. Show element idx\n      } ;\n  } ;\n</code></pre>\n"}], "owner": {"reputation": 827, "user_id": 8524732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uzdr.jpg?s=128&g=1", "display_name": "xDrago", "link": "https://stackoverflow.com/users/8524732/xdrago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575488957, "creation_date": 1575479492, "question_id": 59181397, "link": "https://stackoverflow.com/questions/59181397/c-read-multiple-words-arguments-with-space-from-console", "title": "C read multiple words/arguments with space from console", "body": "<p>Hi I am new to C and I want the user to type something like <code>inspect 2</code> to show a value of an array at position 2 in that example.</p>\n\n<p>I cant get it to work </p>\n\n<pre><code>    char input[20];\n    scanf(\"%s\", input);\n\n    if (strcmp(strtok(input, \" \"), \"inspect\") == 0) {\n     char str[20];\n     int idx;\n     printf(\"input was %s\", input);\n     idx = sscanf(input, \"%s %d\", str, &amp;idx);\n   }\n</code></pre>\n\n<p>it always prints <code>input was inspect</code> but the following space and number are not read?\nWhat would be the right way to check if the user typed \"inspect\" and get the index he typed afterwards like I am trying to do?</p>\n\n<p>thank you </p>\n"}, {"tags": ["c", "loops", "switch-statement", "repeat"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1575480233, "post_id": 59181386, "comment_id": 104583972, "body": "Add a flag <code>valid</code>, which you will set in your <code>switch</code> statement. Then <code>while(!valid)....</code>"}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 1, "creation_date": 1575481122, "post_id": 59181386, "comment_id": 104584460, "body": "Side comment - consider moving some of the logic into functions. It will make the code easier to read/maintain, and will get you a better grade!"}], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 7121964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0689a0b7bf63ed7220f2a10bb7673d9?s=128&d=identicon&r=PG&f=1", "display_name": "Rom&#225;n", "link": "https://stackoverflow.com/users/7121964/rom%c3%a1n"}, "is_accepted": true, "score": 0, "last_activity_date": 1575482450, "creation_date": 1575482450, "answer_id": 59182191, "question_id": 59181386, "link": "https://stackoverflow.com/questions/59181386/how-can-i-repeat-a-switch-statement-in-c/59182191#59182191", "title": "How can i repeat a switch statement in C?", "body": "<p>The solution is to actually add a variable/flag indicating if you actually received a correct statement. If you receive <code>1 2 or 3</code> simply turn that flag to <code>1</code>, and in the while statement put simply: <code>while(!flag)</code>.\nSo the code would be:</p>\n\n<pre><code>int flag=1;\nwhile(flag){\nswitch(difficulty){\n   case 1:{\n        f=15;\n        flag=0;\n        break;\n   }\n   case 2:{\n        f=10;\n        flag=0;\n        break;\n   }\n   case 3:{\n        f=5;\n        flag=0;\n        break;\n   }\n   default: printf(\"Invalid value\\n\");\n }\n}\n</code></pre>\n\n<p>Remember to always set the flag to 1.\nPS: A flag can be set with an int variable that changes between 0 and 1, depending on what you want to represent.</p>\n\n<p>Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 0, "last_activity_date": 1575489652, "creation_date": 1575489652, "answer_id": 59183856, "question_id": 59181386, "link": "https://stackoverflow.com/questions/59181386/how-can-i-repeat-a-switch-statement-in-c/59183856#59183856", "title": "How can i repeat a switch statement in C?", "body": "<p>Another way is to write a method to validate the input:</p>\n\n<pre><code>int validateInput( int difficulty ) {\n    switch(difficulty){\n    case 1:{\n        return 15;\n    case 2:\n        return 10;\n    '''\n    default: \n        // write error message here\n        return -1;\n    }\n}\n</code></pre>\n\n<p>Then in main:</p>\n\n<pre><code>   int f = -1;\n   ...\n   while ( f &lt; 0 ) {\n      // read \"difficulty\" here\n      ...\n      f = validateInput( difficulty ) ;\n  }\n</code></pre>\n\n<p>Also include a special value of difficulty to allow the user to give up (avoiding an infinite loop).</p>\n"}], "owner": {"reputation": 27, "user_id": 12480922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Jd8h.png?s=128&g=1", "display_name": "Federico Amato", "link": "https://stackoverflow.com/users/12480922/federico-amato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 59182191, "answer_count": 2, "score": 1, "last_activity_date": 1575489652, "creation_date": 1575479457, "question_id": 59181386, "link": "https://stackoverflow.com/questions/59181386/how-can-i-repeat-a-switch-statement-in-c", "title": "How can i repeat a switch statement in C?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(void){\n int a;\n int attempt;\n int answer;\n int f;\n int difficulty;\n int end;\n\n printf(\"GUESS THE NUMBER\\n\");\n printf(\"guess the number chosen on a scale of 1 to 100\\n\");\n printf(\"\\n\");\n\ndo{\n srand(time(NULL));\n a=rand()%100+1;\n attempt=1;\n\n printf(\"Choose Difficulty\\n\");\n printf(\"1.Easy   2.Normal   3.Hard\\n\");\n scanf(\"%d\", &amp;difficulty);\n\n switch(difficulty){\n   case 1:{\n        f=15;\n        break;\n   }\n   case 2:{\n        f=10;\n        break;\n   }\n   case 3:{\n        f=5;\n        break;\n   }\n   default: printf(\"Invalid value\\n\");\n }\n\n printf(\"\\n\");\n printf(\"You have %d attempts to guess the chosen number\\n\",f)\n printf(\"At each attempt you will be given a clue\\n\")\n\nwhile(attempt&lt;=f){\n int remaining=f-attempt;\n printf(\"\\nattempt number %d:\\n\",attempt);\n scanf(\"%d\",&amp;answer);\n\n if(answer&gt;a){\n    if((difficulty=1)){\n       if(answer-a&lt;=5){\n           printf(\"The value entered is slightly bigger\\n\");\n           attempt++;\n       }\n       else if(answer-a&gt;5&amp;&amp;answer-a&lt;=10{\n           printf(\"The value entered is bigger\\n\");\n           attempt++;\n       }\n       else if(answer-a&gt;10){\n           printf(\"The value entered is much bigger\\n\");\n           attempt++;\n       }\n    }\n }\n else if((answer&lt;a){\n    if((difficulty=1)){\n       if(a-answer&lt;=5){\n           printf(\"The value entered is slightly smaller\\n\");\n           attempt++;\n       }\n       else if(a-answer&gt;5&amp;&amp;answer-a&lt;=10{\n           printf(\"The value entered is smaller\\n\");\n           attempt++;\n       }\n       else if(a-answer&gt;10){\n           printf(\"The value entered is much smaller\\n\");\n           attempt++;\n       }\n    }\n }\n else if((answer=a)){\n    printf(\"GUESSED\\n\");\n    printf(\"attempts made: %d\\n\",attempt);\n    printf(\"remaining attempts: %d\\n,remaining);\n    printf(\"Do you want to play again? 1=Yes  0=No\\n\");\n    scanf(\"%d\",&amp;end);\n    break;\n }\n\n }\n printf(\"\\nGame Over\\n\");\n printf(\"the number chosen was %d\\n\",a);\n printf(\"Do you want to try again? 1=Yes  0=No\\n\");\n scanf(\"%d\",&amp;end);\n}\nwhile((end==1));\nreturn 0;\n}\n</code></pre>\n\n<p>This is currently my program, I want to create a loop in the switch so it repeats every time an incorrect value is entered. How can I do?\nBy incorrect value I mean anything entered that is not 1,2 or 3.\nAlso if there are other errors in the program please let me note. I apologize if I used unclear English.</p>\n"}, {"tags": ["c++", "c", "pointers", "while-loop"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575479544, "post_id": 59181383, "comment_id": 104583633, "body": "<code>while(predicate) body</code>, in the first the body isn&#39;t given.  In the second, the body is <code>;</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575479909, "post_id": 59181383, "comment_id": 104583799, "body": "This is an apples-and-oranges comparison.  Statement 2 is useless and does nothing.  Statement 1 is incomplete, so we can&#39;t say what it does."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1575479946, "post_id": 59181383, "comment_id": 104583815, "body": "@SRIKANTH Provide a minimal complete program that demonstrates the difference."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1575481658, "post_id": 59181383, "comment_id": 104584731, "body": "<code>str</code> doesn&#39;t seem to be defined anywhere."}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575486516, "post_id": 59181383, "comment_id": 104586897, "body": "Updated with runnable code and results"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575489472, "post_id": 59181383, "comment_id": 104588083, "body": "@SRI I&#39;ve tried to clarify the issue with your code in an edit to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575482084, "post_id": 59181460, "comment_id": 104584954, "body": "I have verified the next statement is executing only once."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575483272, "post_id": 59181460, "comment_id": 104585581, "body": "Then in the case you verified it only looped once. This is what the language does, that <code>if</code> and <code>else</code> in your updated example code is for every loop. See this runnable example <a href=\"https://rextester.com/EVS72895\" rel=\"nofollow noreferrer\">rextester.com/EVS72895</a>"}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575486220, "post_id": 59181460, "comment_id": 104586795, "body": "I got the point, but something is not correct in my code. if or else block is executing only once. Updated the runnable code and results. I am clueless."}], "tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 0, "last_activity_date": 1575479721, "creation_date": 1575479721, "answer_id": 59181460, "question_id": 59181383, "link": "https://stackoverflow.com/questions/59181383/pointer-decrement-inside-while-loop-with-semicolon-vs-without-semicolon/59181460#59181460", "title": "pointer decrement inside while loop with semicolon vs without semicolon", "body": "<blockquote>\n  <p><code>while(p2 != src &amp;&amp; --p2 != dest)</code></p>\n</blockquote>\n\n<p>Without the terminating semicolon, the loop is executing the next statement on <em>each iteration</em>. With the semicolon, the next statement will only be executed <em>once</em> when the loop ends. The exact difference will depend on what that statement is.</p>\n\n<pre><code>int x = 5, int y = 0;\nwhile (x--)\n++y;\n</code></pre>\n\n<p>Without the semicolon, <code>++y</code> happens on each iteration (x = 5, 4, 3, 2, 1) so y = 5. Add the semicolon and it only happens after the loop completes, giving y = 1.</p>\n\n<p>Note that if <code>++y</code> is on the same line or not, indented or not, has no relevance to C or C++.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575542939, "post_id": 59181519, "comment_id": 104605377, "body": "Thanks!. I got the point. But, as per the behavior of while loop, If the length is x (x &gt; 3) then the if-else block should be executed (x-3) times. But what ever is the length, the if-else block is being executed only once. could you please explain ?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575549754, "post_id": 59181519, "comment_id": 104609004, "body": "@SRI please reread the second half of my answer again. Your while loop condition depends on <code>--p2 != dst</code>, but the very first time the condition is run, that is false. So your if-else is never once run (the loop is never entered)."}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575611167, "post_id": 59181519, "comment_id": 104632386, "body": "Thank you, but &lt;the very first time the condition is run, that is false&gt;, This happens only when the size is 4, If the size is greater than 4, lets assume the size to be 7 then the condition holds true for 3 iterations and then on the fourth iteration the condition becomes false. Hence if-else block should be executed for 3 times. But this is not happening. In the question, I have added memory lay out when the size is 7."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575648158, "post_id": 59181519, "comment_id": 104648972, "body": "@SRI &quot;<i>lets assume the size to be 7 then the condition holds true for 3 iterations</i>&quot; nope. The condition, <code>p2 != src &amp;&amp;  --p2 != dest</code> is true the <i>first</i> time you enter the loop, but then you run <code>while(size--) { *(--p1) = *(--p2); }</code> which decrements <code>p2</code>, <code>size</code> times. I&#39;m going to be honest with you here, this code is a mess. You have a nested loop for some reason, and that strange loop up top. I&#39;d strongly suggest starting over here. Or if this is a class project, seeking help from your professor."}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575656740, "post_id": 59181519, "comment_id": 104652551, "body": "Thanks a lot!, I have finally understood the whole mess I have created. Once again thank you."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1575489454, "last_edit_date": 1575489454, "creation_date": 1575479864, "answer_id": 59181519, "question_id": 59181383, "link": "https://stackoverflow.com/questions/59181383/pointer-decrement-inside-while-loop-with-semicolon-vs-without-semicolon/59181519#59181519", "title": "pointer decrement inside while loop with semicolon vs without semicolon", "body": "<p>With a <code>while</code> (or <code>for</code> or <code>if</code>), you have two options for the body. You can either use curly braces for a multi-statement body:</p>\n\n<pre><code>while(condition) {\n    multi;\n    statement;\n    body;\n}\n</code></pre>\n\n<p>Or you can leave off the curly braces and the next statement will be considered the body of the loop. This can be nice with good formatting for short bodies:</p>\n\n<pre><code>if(condition)\n    return thing;\n</code></pre>\n\n<p>But it can also be confusing with bad formatting:</p>\n\n<pre><code>if(condition)\n    thing += thing2;\n    return thing;\n</code></pre>\n\n<p>Only that first statement (<code>thing += thing2</code>) is actually in the body of the <code>if</code> there. The <code>return</code> will get run every time regardless.</p>\n\n<p>A semicolon by itself is the null statement. It is a full statement in its own right, but it does nothing. So</p>\n\n<pre><code>while(condition);\n</code></pre>\n\n<p>Is the same as</p>\n\n<pre><code>while(condition) {\n    ;\n}\n</code></pre>\n\n<p>Your other example without the semicolon will pull the next statement found in the code and use it as the body of the loop.</p>\n\n<hr>\n\n<p>In response to your update, let's take a look at the memory of your string through a run of the function with input \"abcd\":</p>\n\n<pre><code>        src--+ dst-+\n             |     |\n             v     v\n            ++-----+----------------+\n            |0|1|2|3|4|5|6|7|8| ... |\n            +-----------------------+\ndest[15] -&gt; |a|b|c|d|0|0|0|0|0| ... |\n            +-----------------------+\n</code></pre>\n\n<p>Note that <code>size</code> here is 4, so when you do <code>char *p2 = (char *)src;</code> and <code>p2 += size;</code>, your pointers look like:</p>\n\n<pre><code>       p2+--+\n            |\nsrc+-+ dst++|\n     |     ||\n     v     vv\n    ++-----+----------------+\n    |0|1|2|3|4|5|6|7|8| ... |\n    +-----------------------+\n    |a|b|c|d|0|0|0|0|0| ... |\n    +-----------------------+\n</code></pre>\n\n<p>And then you do:</p>\n\n<pre><code>while(p2 != src &amp;&amp;  --p2 != dst)\n</code></pre>\n\n<p>Well guess what, <code>--p2</code> is exactly <code>dst</code>! So your loop ends without ever once getting run and you just return <code>dst</code>, which is a pointer to the last character in the string.</p>\n\n<p>This is one of the many problems with trying to copy a string within itself. Your source and destination are overlapping!</p>\n"}], "owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1575481664, "answer_count": 2, "score": -5, "last_activity_date": 1575611775, "creation_date": 1575479452, "last_edit_date": 1575611775, "question_id": 59181383, "link": "https://stackoverflow.com/questions/59181383/pointer-decrement-inside-while-loop-with-semicolon-vs-without-semicolon", "closed_reason": "Needs details or clarity", "title": "pointer decrement inside while loop with semicolon vs without semicolon", "body": "<pre><code>void* My_memmove(void *dest, const void *src, size_t size)\n{\n    char *p1 = (char *)dest;\n    char *p2 = (char *)src;\n\n    if(NULL == p1 || NULL == p2)\n    {\n        return NULL;\n    }\n    p2 += size;\n\n    while(p2 != src &amp;&amp;  --p2 != dest)\n    if(p2 != src)\n    {\n        printf(\"inside IF \\n\");\n        p1 += size;\n        p2  = (char *)src + size;\n\n        while(size--)\n        {\n            *(--p1) = *(--p2);\n        }\n    }\n    else\n    {\n        printf(\"inside ELSE \\n\");\n        while(size--)\n        {\n            *(p1++) = *(p2++);\n        }\n    }\n\n    return dest;\n}\n\nint main(void)\n{\n   char dest[15];\n   memset(dest, 0, 15);\n\n   printf(\"Enter the string : \");\n   scanf(\"%s\", dest);\n\n    My_memmove(dest+3, dest, strlen(dest));\n    printf(\"dest+3 : %s \\n\", dest+3);\n\n    return (0);\n}\n</code></pre>\n\n<p>Could you please explain what is happening when there is no semicolon after while(p2 != src &amp;&amp;  --p2 != dest)\nBecause the above program works for all the inputs expect for the input of size 4</p>\n\n<p>RESULTS:</p>\n\n<p>Enter the string : 12</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 12</p>\n\n<p>Enter the string : 123</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 123</p>\n\n<p>Enter the string : 1234</p>\n\n<p>dest+3 : 4</p>\n\n<p>Enter the string : 12345</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 12345</p>\n\n<p>Enter the string : 123456</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 123456</p>\n\n<p>Memory layout after p2+size when the size is 7</p>\n\n<pre><code>                      p2+--+\n                           | \n        src+-+ dst++       |\n             |     |       |\n             v     v       v\n            ++-----+-------+--------+\n            |0|1|2|3|4|5|6|7|8| ... |\n            +-----------------------+\ndest[15] -&gt; |a|b|c|d|e|f|g|0|0| ... |\n            +-----------------------+\n</code></pre>\n"}, {"tags": ["c", "opengl", "glut", "opengl-compat"], "comments": [{"owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1575486056, "post_id": 59181028, "comment_id": 104586741, "body": "There is one <code>glPopMatrix();</code> missing at the end of <code>myDisplay</code>. (the opposite of <code>glPushMatrix(); &#47;&#47; Origin</code>)"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 2, "creation_date": 1575491135, "post_id": 59181028, "comment_id": 104588781, "body": "&quot;<i>Can you tell me about gluLookAt?</i>&quot; sounds more like you need a tutorial than an answer to a specific question. This type of questions is considered too broad for StackOverflow."}], "answers": [{"tags": [], "owner": {"reputation": 1002, "user_id": 5655391, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-P-RL6avfQ8Y/AAAAAAAAAAI/AAAAAAAAABI/-NvgDi6KMls/photo.jpg?sz=128", "display_name": "Paltoquet", "link": "https://stackoverflow.com/users/5655391/paltoquet"}, "is_accepted": false, "score": 0, "last_activity_date": 1575530681, "creation_date": 1575530681, "answer_id": 59190142, "question_id": 59181028, "link": "https://stackoverflow.com/questions/59181028/opengl-viewpoint-transformation-how-to-glulookat/59190142#59190142", "title": "Opengl viewpoint transformation how to gluLookAt", "body": "<p>I don't know what you mean by polar coordinates, normally it's for 2D. maybe you mean Spherical coordinates. </p>\n\n<p>The method would be quite identical:</p>\n\n<p>Assuming your sun is at the origin of the world (which it currently does)</p>\n\n<p><strong>You have 2 methods</strong> </p>\n\n<p>Assuming Theta is the angle you want your camera to orbit around the sun\nand Phi is some \"pitching\" around your xAxis frame (you may or may not want it).</p>\n\n<p><strong>1) Compute the x,y,z position of your camera using the basic formula:</strong>\n<a href=\"https://en.wikipedia.org/wiki/Spherical_coordinate_system\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Spherical_coordinate_system</a></p>\n\n<p>Spherical Coordinates:</p>\n\n<pre><code>// r is the distance to the sun\ncam_axis_x = r * sin(theta) * cos(phi);\ncam_axis_y = r * r * cos(theta);\ncam_axis_z = r * sin(theta) * sin(phi);\n</code></pre>\n\n<p>\"Polar coordinates\":</p>\n\n<pre><code>cam_axis_x = r * sin(theta);\ncam_axis_z = r * cos(theta);\n</code></pre>\n\n<p>then apply the translation as you did before</p>\n\n<pre><code>glMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\nglTranslatef(cam_axis_x, cam_axis_y, cam_axis_z);\n</code></pre>\n\n<p><strong>2) Apply a rotation on your camera after translating it to its original position:</strong></p>\n\n<pre><code>glMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\nglTranslatef(cam_axis_x, cam_axis_y, cam_axis_z);\nglRotatef(0, theta, phi);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9380895, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jqAgxBWUzTA/AAAAAAAAAAI/AAAAAAAAABI/5md6GqUh_Y8/photo.jpg?sz=128", "display_name": "DongHyeun Lee", "link": "https://stackoverflow.com/users/9380895/donghyeun-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575530681, "creation_date": 1575478294, "last_edit_date": 1575486082, "question_id": 59181028, "link": "https://stackoverflow.com/questions/59181028/opengl-viewpoint-transformation-how-to-glulookat", "title": "Opengl viewpoint transformation how to gluLookAt", "body": "<p>I would like to use the polar coordinates to manipulate the upper, lower, left, and right camera points with my keyboard.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;glut.h&gt;\n\nGLint TopLeftX, TopLeftY, BottomRightX, BottomRightY ;\n\nstatic int HourOfDay = 0;\nstatic int DayOfYear = 10;\n\nvoid init(void) {\n    glClearColor(0.0, 0.0, 0.0, 0.0);\n}\n\n\nvoid myDisplay(void) {\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glPushMatrix(); // Origin\n\n    glClear(GL_DEPTH_BUFFER_BIT);\n\n    /* Sun */\n    glColor3f(1.0, 1.0, 0.0);\n    glutSolidSphere(1.0, 20, 10);\n\n\n    /* Mercury */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear, 0.0, 0.0, 1.0);\n    glTranslatef(3.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.87, 0.53, 0.25);\n    glutSolidSphere(0.3, 10, 2);\n    glPopMatrix();\n\n    /* Venus */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear + 195, 0.0, 0.0, 1.0);\n    glTranslatef(5.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.99, 0.91, 0.66);\n    glutSolidSphere(0.5, 10, 2);\n    glPopMatrix();\n\n    /* Earth */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear + 80, 0.0, 0.0, 1.0);\n    glTranslatef(7.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.47, 0.82, 0.98);\n    glutSolidSphere(0.5, 10, 2);\n\n    /* Earth's Moon 1*/\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear, 0.0, 0.0, 1.0);\n    glTranslatef(0.7, 0.0, 0.0);\n    glColor3f(0.89, 0.93, 0.95);\n    glutSolidSphere(0.1, 5, 5);\n    glPopMatrix();\n\n    glPopMatrix();\n\n    /* Mars */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear + 275, 0.0, 0.0, 1.0);\n    glTranslatef(9.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.84, 0.16, 0.15);\n    glutSolidSphere(0.35, 10, 2);\n    glPopMatrix();\n\n    /* Jupiter */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear + 33, 0.0, 0.0, 1.0);\n    glTranslatef(11.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.93, 0.64, 0.27);\n    glutSolidSphere(1.0, 10, 2);\n    glPopMatrix();\n\n    /* Saturn */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear + 180, 0.0, 0.0, 1.0);\n    glTranslatef(15.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.92, 0.82, 0.45);\n    glutSolidSphere(0.9, 10, 2);\n    glPopMatrix();\n\n    /* Uranus */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear + 90, 0.0, 0.0, 1.0);\n    glTranslatef(17.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.64, 0.84, 0.78);\n    glutSolidSphere(0.8, 10, 2);\n    glPopMatrix();\n\n    /* Neptune */\n    glPushMatrix();\n    glRotatef((GLfloat)DayOfYear + 150, 0.0, 0.0, 1.0);\n    glTranslatef(20.0, 0.0, 0.0);\n    glRotatef((GLfloat)HourOfDay, 0.0, 0.0, 1.0);\n    glColor3f(0.29, 0.74, 0.95);\n    glutSolidSphere(0.25, 10, 2);\n    glPopMatrix();\n\n    glutSwapBuffers();\n\n    // Animation State\n    DayOfYear = (DayOfYear + 1) % 360;\n    HourOfDay = (HourOfDay + 5) % 360;\n}\n\nvoid Timer(int iUnused) {\n    glutPostRedisplay();\n    glutTimerFunc(30, Timer, 0);\n}\n\nstatic float cam_axis_x = 0.0;\nstatic float cam_axis_y = 0.0;\nstatic float cam_axis_z = -50.0;\n\nvoid reshape(int w, int h) {\n    glViewport(0, 0, (GLsizei)w, (GLsizei)h);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(45.0, (GLfloat)w / (GLfloat)h, 1.0, 90.0);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    glTranslatef(cam_axis_x, cam_axis_y, cam_axis_z);\n}\n\n/*void reshape(int w, int h) {\n    glViewport(0, 0, (GLsizei)w, (GLsizei)h);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(45.0, (GLsizei)w / (GLsizei)h, 0.0, 90.0);\n}*/\n\nvoid keyboard(unsigned char key, int x, int y) {\n    switch (key) {\n    case 'q': // Esc\n        exit(0);\n        break;\n    case '75': // left\n        break;\n    case '77': // right\n        break;\n    case '72': // up\n        break;\n    case '80': // down\n        break;\n    }\n}\n\nvoid MyMouseClick(GLint Button, GLint State, GLint X, GLint Y) {\n    if (Button == GLUT_LEFT_BUTTON &amp;&amp; State == GLUT_DOWN) {\n        TopLeftX = X;\n        TopLeftY = Y;\n    }\n}\n\nvoid MyMouseMove(GLint X, GLint Y) {\n    BottomRightX = X;\n    BottomRightY = Y;\n    glutPostRedisplay();\n}\n\nint main(int argc, char** argv) {\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);\n    glutInitWindowSize(500, 500);\n    glutInitWindowPosition(100, 100);\n    glutCreateWindow(argv[0]);\n    init();\n    glutDisplayFunc(myDisplay);\n    glutReshapeFunc(reshape);\n    Timer(0);\n    glutKeyboardFunc(keyboard);\n    glutMouseFunc(MyMouseClick);\n    glutMotionFunc(MyMouseMove);\n\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n\n<p>I want to move the camera around the sun</p>\n\n<p>Can you tell me about <code>gluLookAt</code>?</p>\n"}, {"tags": ["c", "mpi", "transpose", "termination"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575478233, "post_id": 59180678, "comment_id": 104582873, "body": "Should <code>A = (double **) calloc(Nx*Ny, sizeof(double));</code> be using <code>sizeof (double*)</code>? Or better, <code>sizeof(*A)</code>? And, you don&#39;t seem to have allocated any memory for each row. You have allocated enough memory for a 2D array and expect the compiler to magically resolve <code>A[i][j]</code>, when it doesn&#39;t know the row size."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575478759, "post_id": 59180678, "comment_id": 104583189, "body": "Also this line <code>for(j=0;j&lt;Ny;j++) = A[i][j] = 2*(my_rank*Nx+i) + j;</code> does not compile."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575479063, "post_id": 59180678, "comment_id": 104583355, "body": "Going back to the first comment, I would expect to see <code>A = calloc(Ny, sizeof(double*)); for(int y=0; y&lt;Ny; y++) A[y] = calloc(Nx, sizeof(double));</code>"}, {"owner": {"reputation": 1, "user_id": 12480973, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215630755382292/picture?type=large", "display_name": "Narges Rokni", "link": "https://stackoverflow.com/users/12480973/narges-rokni"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575479334, "post_id": 59180678, "comment_id": 104583525, "body": "Dear friend, I just tried your first suggestion for changing argument of sizeof, but the error is still the same. can you please give me more detailed suggestion for your second idea about memory of each row? I&#39;m not good in C programming. that will be helpful if you write me down what exactly I can change or add and then try it. Thank you in advance"}, {"owner": {"reputation": 1, "user_id": 12480973, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215630755382292/picture?type=large", "display_name": "Narges Rokni", "link": "https://stackoverflow.com/users/12480973/narges-rokni"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575479481, "post_id": 59180678, "comment_id": 104583605, "body": "yes your&#39;re right about the line of for(j=0;j&lt;Ny;j++) = A[i][j] = 2*(my_rank*Nx+i) + j; actually I made a mistake when I was pasting this line here. even without extra &quot;=&quot; , still I have the same error"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575479728, "post_id": 59180678, "comment_id": 104583721, "body": "What about my 3rd comment (which will also apply to <code>B</code>)? Without allocating a pointer to each row, <code>A[i][j]</code> won&#39;t work, because <code>A[i]</code> is <code>NULL</code>."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1575508432, "post_id": 59180678, "comment_id": 104593777, "body": "you declare <code>A</code> as a (jagged) 2D array, but you allocate it as a 1D array. You will find several questions on SO related to allocating 2D arrays in contiguous memory. Or you can simply use modern C and declare <code>double A[Nx][Ny];</code>"}, {"owner": {"reputation": 1, "user_id": 12480973, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215630755382292/picture?type=large", "display_name": "Narges Rokni", "link": "https://stackoverflow.com/users/12480973/narges-rokni"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1575551162, "post_id": 59180678, "comment_id": 104609831, "body": "@Gilles Gouaillardet oooh now I&#39;ve got the poiiint, I defined A as Nx*Ny dimension but I tried to fill it linearly! Thank you, I will change it and we will see"}], "owner": {"reputation": 1, "user_id": 12480973, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215630755382292/picture?type=large", "display_name": "Narges Rokni", "link": "https://stackoverflow.com/users/12480973/narges-rokni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575488445, "creation_date": 1575477252, "last_edit_date": 1575488445, "question_id": 59180678, "link": "https://stackoverflow.com/questions/59180678/mpi-bad-termination-of-one-of-application-processes-code11", "title": "MPI &quot;Bad Termination of one of Application Processes, Code:11&quot;", "body": "<p>Actually I have a problem which has made me crazy and still I'm not to resolve it even after surfing the net and applying many suggestive changes. If someone can help, I really appreciate.</p>\n\n<p>I have a program for matrix transposition in C language and I have to parallelize it by MPI. The compilation is successful but when I run it, I get : </p>\n\n<blockquote>\n  <p>Bad Termination error, code 11.</p>\n</blockquote>\n\n<p>I paste the code below for you to be able to see and then I write for you also the command which I'm using to compile and run on cluster:</p>\n\n<p>code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mpi.h&gt;\n\n#define DIM 128 // global A[DIM], B[DIM]\n\nint main(int argc, char **argv)\n {\n  int ncpus, my_rank, i, j, iblock;\n  int Nx, Ny; // Nx=DIM/ncpus, Ny=DIM, local array: A[Nx][Ny], B[Nx][Ny]\n  double **A, **B, *Ctmp, *Dtmp;\n\n  MPI_Init(&amp;argc, &amp;argv);\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;ncpus);\n\n  if(DIM%ncpus != 0) { // make sure DIM can be divided by ncpus\n    if(my_rank==0)\n      printf(\"ERROR: DIM cannot be divided by ncpus!\\n\");\n    MPI_Finalize();\n    return -1;\n  }\n\n  Nx = DIM/ncpus;\n  Ny = DIM;\n\n  // allocate memory\n  A = (double **) calloc(Nx*Ny, sizeof(double));\n  B = (double **) calloc(Nx*Ny, sizeof(double));\n  Ctmp = (double *) calloc(Nx*Ny, sizeof(double));\n  Dtmp = (double *) calloc(Nx*Ny, sizeof(double));\n\n  for(i=0;i&lt;Nx;i++)\n    for(j=0;j&lt;Ny;j++) = A[i][j] = 2*(my_rank*Nx+i) + j;\n\n  // divide A into blocks --&gt; Ctmp; A[i][iblock*Nx+j] \uf0e0 Ctmp[iblock][i][j]\n  for(i=0;i&lt;Nx;i++) \n    for(iblock=0;iblock&lt;ncpus;iblock++)\n      for(j=0;j&lt;Nx;j++)\n        Ctmp[iblock*Nx*Nx+i*Nx+j] = A[i][iblock*Nx+j];\n\n  // local transpose of A --&gt; Dtmp; Ctmp[iblock][i][j] \uf0e0 Dtmp[iblock][j][i]\n  for(iblock=0;iblock&lt;ncpus;iblock++)\n    for(i=0;i&lt;Nx;i++)\n      for(j=0;j&lt;Nx;j++)\n        Dtmp[iblock*Nx*Nx+i*Nx+j] = Ctmp[iblock*Nx*Nx+j*Nx+i];\n\n  // All-to-all comm --&gt; Ctmp\n  MPI_Alltoall(Dtmp, Nx*Nx, MPI_DOUBLE, Ctmp, Nx*Nx, MPI_DOUBLE,\n              MPI_COMM_WORLD);\n\n  // merge blocks --&gt; B; Ctmp[iblock][i][j] \uf0e0 B[i][iblock*Nx+j]\n  for(i=0;i&lt;Nx;i++)\n    for(iblock=0;iblock&lt;ncpus;iblock++)\n      for(j=0;j&lt;Nx;j++)\n        B[i][iblock*Nx+j] = Ctmp[iblock*Nx*Nx+i*Nx+j];\n\n  // clean up\n  free(A);\n  free(B);\n  free(Ctmp);\n  free(Dtmp);\n\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>command for compiling:</p>\n\n<pre><code>mpiicc MatrixTransposeMPI.c\n</code></pre>\n\n<p>where <code>MatrixTransposeMPI.c</code> is the name of my program</p>\n\n<p>command for running:</p>\n\n<pre><code>mpirun -np 4 ./a.out\n</code></pre>\n\n<p>where <code>./a.out</code> is the name of output made by compilation command</p>\n"}, {"tags": ["c", "arrays", "printf"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1575476041, "post_id": 59180232, "comment_id": 104581585, "body": "Are <code>printf</code> and <code>scanf</code> really so long that you feel the need to abbreviate them with preprocessor macros?"}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1575476118, "post_id": 59180232, "comment_id": 104581641, "body": "I suggest you enlist the help of a good TA.  We&#39;re not set up for extended tutoring here."}, {"owner": {"reputation": 3, "user_id": 12480836, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U034YvePbfw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxQik1UIoMRbGP1PNojH4GOLpVvQ/photo.jpg?sz=128", "display_name": "Dyrd Kmp", "link": "https://stackoverflow.com/users/12480836/dyrd-kmp"}, "edited": false, "score": 0, "creation_date": 1575476226, "post_id": 59180232, "comment_id": 104581689, "body": "Yes we&#39;re tasked to do a program with all of the C language syntax, and the code above was my attempt to make <b>a program that can input 10 student&#39;s name</b>. I don&#39;t know if it&#39;s a correct approach, but my friend told me that I could just make many variables (name1-name10), but the problem is we also need to get the middle name and the last name."}, {"owner": {"reputation": 3, "user_id": 12480836, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U034YvePbfw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxQik1UIoMRbGP1PNojH4GOLpVvQ/photo.jpg?sz=128", "display_name": "Dyrd Kmp", "link": "https://stackoverflow.com/users/12480836/dyrd-kmp"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1575476313, "post_id": 59180232, "comment_id": 104581739, "body": "@fred idk our teacher did it first lmao"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1575476409, "post_id": 59180232, "comment_id": 104581797, "body": "Between that and &quot;tasked to do a program with all of the C language syntax&quot; I&#39;m having serious doubts about your teacher."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1575479292, "post_id": 59180232, "comment_id": 104583511, "body": "Well, although not illegal <code>goto</code> statements used in this way are not typical.  It leads to spaghetti code.  And using <i>all of the C language syntax</i> is a pretty big order.  I am pretty sure there has never been a <code>C</code> program to date that has ever used <i>all</i> of the syntax available to the <code>C</code> language :)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1575481830, "post_id": 59180232, "comment_id": 104584823, "body": "You need to be more specific about &quot;showing an error&quot; - which error, and with what input? Please <a href=\"https://stackoverflow.com/posts/59180232/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"tags": [], "owner": {"reputation": 1082, "user_id": 9091276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/05cFn.png?s=128&g=1", "display_name": "Frontear", "link": "https://stackoverflow.com/users/9091276/frontear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575476370, "creation_date": 1575476370, "answer_id": 59180406, "question_id": 59180232, "link": "https://stackoverflow.com/questions/59180232/output-a-two-dimensional-array-using-basic-c-language/59180406#59180406", "title": "Output a two dimensional array using basic C language", "body": "<p>Outputting a 2 dimensional array is a simple task, you can think of it as an array within an array. All you need to do is iterate on both arrays, and print in whatever fashion you prefer.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int array[4][2] = { // 4 arrays, each has 2 elements\n        { 1, 2 }, // array[0]\n        { 3, 4 }, // array[1]\n        { 5, 6 }, // array[2]\n        { 7, 8 }, // array[3]\n    };\n\n    for (int i = 0; i &lt; 4; ++i) { // iterate on the 4 arrays we have\n        for (int j = 0; j &lt; 2; ++j) { // iterate on each element of those arrays\n            printf(\"%d\", array[i][j]); // print out that element\n        }\n    }\n}\n</code></pre>\n\n<p>Now, think about how you can incorporate this into your program.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12480836, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U034YvePbfw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxQik1UIoMRbGP1PNojH4GOLpVvQ/photo.jpg?sz=128", "display_name": "Dyrd Kmp", "link": "https://stackoverflow.com/users/12480836/dyrd-kmp"}, "edited": false, "score": 0, "creation_date": 1575534109, "post_id": 59180910, "comment_id": 104600931, "body": "thanks for the help!!! i got to made one w/ struct as you mentioned and everything is okay now. thank you so much.  <code>struct studentname     {         char fname[50];         char mname[50];         char lname[50];     } student[10];</code>  sorry if i derived your work, i honestly cannot use the fgets for our program"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3, "user_id": 12480836, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U034YvePbfw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxQik1UIoMRbGP1PNojH4GOLpVvQ/photo.jpg?sz=128", "display_name": "Dyrd Kmp", "link": "https://stackoverflow.com/users/12480836/dyrd-kmp"}, "edited": false, "score": 0, "creation_date": 1575554713, "post_id": 59180910, "comment_id": 104611818, "body": "@DyrdKmp - No problem, This code is freely offered!  Is it your teacher that insists in not using <code>fgets()</code>?"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1575479389, "last_edit_date": 1575479389, "creation_date": 1575477934, "answer_id": 59180910, "question_id": 59180232, "link": "https://stackoverflow.com/questions/59180232/output-a-two-dimensional-array-using-basic-c-language/59180910#59180910", "title": "Output a two dimensional array using basic C language", "body": "<p><em>but I just don't know how to store them....</em>  </p>\n\n<p>Use an array of struct:</p>\n\n<pre><code>#define MAX_NAMES 10 //per your stated maximum\n\ntypedef struct {\n  char first[80];\n  char middle[80];\n  char last[80];\n}NAMES;\n\nNAMES names[MAX_NAMES] = {0};//a container with space for 10 first, middle and last names\n</code></pre>\n\n<p>And a very simple way to input student names via a main function:</p>\n\n<pre><code>int main(void)\n{\n    int i;\n\n    for(i=0;i&lt;MAX_NAMES;i++)\n    {\n        printf(\"Enter the First name of student %d\\n\", i+1);\n        fgets(names[i].first, sizeof(names[i].first), stdin);\n        printf(\"Enter the Middle name of student %d\\n\", i+1);\n        fgets(names[i].middle, sizeof(names[i].middle), stdin);\n        printf(\"Enter the Last name of student %d\\n\", i+1);\n        fgets(names[i].last, sizeof(names[i].last), stdin);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12480836, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U034YvePbfw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxQik1UIoMRbGP1PNojH4GOLpVvQ/photo.jpg?sz=128", "display_name": "Dyrd Kmp", "link": "https://stackoverflow.com/users/12480836/dyrd-kmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1575482744, "accepted_answer_id": 59180910, "answer_count": 2, "score": 0, "last_activity_date": 1575479389, "creation_date": 1575475745, "question_id": 59180232, "link": "https://stackoverflow.com/questions/59180232/output-a-two-dimensional-array-using-basic-c-language", "closed_reason": "Not suitable for this site", "title": "Output a two dimensional array using basic C language", "body": "<p>I'm trying to make a program that can input 10 student's name, but I just don't know how to store them. I did the code below and I really think that there is no mistake, it is just a draft on how I would use the inputting of names. We are only allowed to use C language for this.</p>\n\n<p>This is how I want my output to be:</p>\n\n<pre><code>List:\narr[0][50]=jason\narr[1][50]=jade\n.\n.\n.\narr[10][50]=mark\n</code></pre>\n\n<p>But it just keeps showing an error, I can only run it before it shows the first equal.</p>\n\n<p>Below is my code. Please pardon my syntax I am seriously new to coding.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define pf printf\n#define sf scanf\n\n#define ENTER 13\n#define TAB 9\n#define BKSP 8\n\nmain()\n{\n    char g7nameinput[0][50];\n    char g7fname[10][50], g7mname[10][50], g7lname[10][50];\n    char ch, choice;\n    int incname, incnamelist=0, i, max=50;\n\n    createstudent:\n    pf(\"\\n\\nInput first name: \");\n    incname=0;\n    while(1)\n    {\n        ch=getch();\n\n        if(ch==ENTER)\n        {\n            g7nameinput[0][incname]='\\0';\n            break;\n        }\n        else if(ch==BKSP)\n        {\n            if(incname&gt;0)\n            {\n                incname--;\n                pf(\"\\b \\b\");\n            }\n        }\n        else if(ch==TAB)\n        {\n            continue;\n        }\n        else\n        {\n            g7nameinput[0][incname]=ch;\n            incname++;\n            pf(\"%c\",ch);\n        }\n    }\n    pf(\"\\nFirst Name inputted is %s\",g7nameinput);\n    pf(\"\\n\\nInputted correct? [Y/N]: \");\n    sf(\"%c\",&amp;choice);\n\n    if((choice=='Y')||(choice=='y'))\n    {\n        g7fname[incnamelist][50] = g7nameinput;\n        incnamelist++;\n\n        pf(\"\\n\\nList:\");\n        for(i=0;i&lt;incnamelist;i++)\n        {\n            pf(\"\\narr[%d][%d]=%s\",i,max,g7fname[i][50]);\n        }\n\n        goto createstudent;\n    }\n    else\n    {\n        goto createstudent;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1575475538, "post_id": 59180047, "comment_id": 104581270, "body": "Typo? <code>OBJ_DIR</code> should be defined as: <code>OBJ_DIR = .&#47;obj</code> (without final <code>&#47;</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 3, "user_id": 12480812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBjBWBzE2FmfyZDNYEJfmoDMBSAZZGuZyHLm-GlAQ=k-s128", "display_name": "jtu", "link": "https://stackoverflow.com/users/12480812/jtu"}, "edited": false, "score": 0, "creation_date": 1575536642, "post_id": 59180238, "comment_id": 104602042, "body": "So you can <a href=\"https://stackoverflow.com/help/accepted-answer\">accept</a> the answer"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 0, "last_activity_date": 1575475776, "creation_date": 1575475776, "answer_id": 59180238, "question_id": 59180047, "link": "https://stackoverflow.com/questions/59180047/how-to-get-makefile-to-put-obj-files-in-separate-directory/59180238#59180238", "title": "How to get Makefile to put obj files in separate directory?", "body": "<p>When <code>$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c</code> is resolved, it expand to </p>\n\n<pre><code>./obj//%.o: ./src//%.c\n</code></pre>\n\n<p>You have an extra <code>/</code></p>\n\n<p>Just change your <code>OBJ_DIR</code> and <code>SRC_DIR</code> definitions:</p>\n\n<pre><code>SRC_DIR = ./src\nOBJ_DIR = ./obj\n</code></pre>\n\n<hr>\n\n<p>You can also simplify your <code>Makefile</code> this way:</p>\n\n<pre><code>CFILES = $(wildcard $(SRC_DIR)/*.c)\nOBJS   = $(CFILES:$(SRC_DIR)/%.c=$(OBJ_DIR)/%.o)\n</code></pre>\n\n<p>Files are still stored in <code>CFILES</code>, but the list of <code>OBJS</code> files is now automatic.</p>\n"}], "owner": {"reputation": 3, "user_id": 12480812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBjBWBzE2FmfyZDNYEJfmoDMBSAZZGuZyHLm-GlAQ=k-s128", "display_name": "jtu", "link": "https://stackoverflow.com/users/12480812/jtu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59180238, "answer_count": 1, "score": 0, "last_activity_date": 1575475776, "creation_date": 1575475173, "question_id": 59180047, "link": "https://stackoverflow.com/questions/59180047/how-to-get-makefile-to-put-obj-files-in-separate-directory", "title": "How to get Makefile to put obj files in separate directory?", "body": "<p>If my Makefile looks like this:</p>\n\n<pre><code>.PHONY: clean build all\n\n# compilation settings\nCC = gcc\nCFLAGS = -I$(INCLUDE_DIR) -Wall -Wextra -Werror -pedantic -std=gnu99 -pedantic -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition -g\n\n# directory paths\nINCLUDE_DIR = ./include/\nSRC_DIR = ./src/\nOBJ_DIR = ./obj/\n\n# file lists\nCFILES = $(wildcard ./src/*.c)\nOBJS = ./obj/hashtable.o ./obj/infoRetrieval.o ./obj/sort.o ./obj/search.o\n\n# binary\nBIN = search\n\n$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c\n    $(CC) $(CFLAGS) -o $@ -c $&lt;\n\n$(BIN): $(OBJS)\n    $(CC) -o $@ $(OBJS)\n\nclean:\n    rm -f $(OBJS) $(BIN) *~\n</code></pre>\n\n<p>And the structure of my project directory looks like this:</p>\n\n<pre><code>.\n|-- Makefile\n|-- README.md\n|-- include\n|   |-- hashtable.h\n|   |-- infoRetrieval.h\n|   `-- sort.h\n|-- obj\n`-- src\n    |-- hashtable.c\n    |-- infoRetrieval.c\n    |-- p5docs\n    |   |-- D1.txt\n    |   |-- D2.txt\n    |   `-- D3.txt\n    |-- search.c\n    `-- sort.c\n</code></pre>\n\n<p>Why am I getting this error message?</p>\n\n<pre><code>make: *** No rule to make target `obj/hashtable.o', needed by `search'.  Stop.\n</code></pre>\n\n<p>My goal is to have my project compile such that header, source, and object files are all in their own directories for organizational purposes.</p>\n"}, {"tags": ["c", "compiler-errors", "char", "switch-statement", "warnings"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1575474767, "post_id": 59179883, "comment_id": 104580796, "body": "Use single quotes. But you have some more issues around, such as array of zero size, string with no space for <code>\\0</code>, <code>fflush(stdin)</code> and such..."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575474891, "post_id": 59179883, "comment_id": 104580887, "body": "You&#39;re not using letters (characters).  You&#39;re using strings."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1575474966, "post_id": 59179883, "comment_id": 104580932, "body": "BTW: <code>incompatible pointer to integer conversion passing</code>: this warning is should almost always be considered as an error."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1575474975, "post_id": 59179883, "comment_id": 104580935, "body": "Your compiler should have warned you. Listen to that, and if you don&#39;t see anything, turn up the error reporting."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575475058, "post_id": 59179883, "comment_id": 104580991, "body": "<code>char xx[0];</code> is wrong.  (You can&#39;t have an array of 0 things -- what would it mean?)  <code>scanf(&quot;%c&quot;, xx);</code> is wrong.  (Well, it matches your wrong declaration of <code>xx</code>, sort of, but it&#39;s not what you want.)  If you want <code>xx</code> to be a character, then declare it as one: <code>char xx</code>.  And then when you use it in your <code>switch</code> statement, the case labels must be characters, too: <code>&#39;Y&#39;</code>, <code>&#39;N&#39;</code>."}, {"owner": {"reputation": 23, "user_id": 12393512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHXS2.png?s=128&g=1", "display_name": "Domenic", "link": "https://stackoverflow.com/users/12393512/domenic"}, "edited": false, "score": 0, "creation_date": 1575476149, "post_id": 59179883, "comment_id": 104581657, "body": "when i del [0] and just do char xx; I got &quot;Terminated due to signal: SEGMENTATION FAULT (11)&quot; and 3 new warnings  warning: incompatible integer to pointer conversion passing &#39;char&#39; to parameter of type &#39;const char *&#39;; take the address with &amp; [-Wint-conversion]  warning: incompatible pointer to integer conversion passing &#39;char [1]&#39; to parameter of type &#39;char&#39;"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575480103, "post_id": 59179883, "comment_id": 104583909, "body": "@DomenicWolf I understand.  But the way to fix those errors is not to randomly change things until the warnings go away.  You have to <i>understand</i> what the warnings mean.  Your other problem is that you are using <code>scanf</code>, which despite its popularity is nearly impossible to use correctly.  You want <code>scanf(&quot;%c&quot;, &amp;xx)</code>.  That <code>&amp;</code> is super important."}], "answers": [{"tags": [], "owner": {"reputation": 699, "user_id": 7562074, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mYiplUjiang/AAAAAAAAAAI/AAAAAAAAASg/IuJhDArg780/photo.jpg?sz=128", "display_name": "Roy Avidan", "link": "https://stackoverflow.com/users/7562074/roy-avidan"}, "is_accepted": true, "score": 0, "last_activity_date": 1575479727, "creation_date": 1575479727, "answer_id": 59181466, "question_id": 59179883, "link": "https://stackoverflow.com/questions/59179883/using-letters-in-a-switch-statement/59181466#59181466", "title": "using letters in a Switch statement", "body": "<p>First of all, if you want to read a letter into <code>xx</code> don't use an array, and <strong>definitly</strong> not an array of size 0.</p>\n\n<p>Second, your <code>switch</code> receive an <code>char[]</code> instead of a <code>char</code>.</p>\n\n<p>Next, in the <code>case</code>s use chars instead of strings.</p>\n\n<p>Moreover, according to the information in the question, <code>sucheZeichen</code> gets a <code>char</code> as a second parameter (or an <code>int</code>) so the same problem with <code>xx</code> as an array apply for <code>imya</code> as well.</p>\n\n<p>Also, I added <code>\\n</code> to the <code>scanf</code> so it won't read the newline character.</p>\n\n<p>Your code should like like:</p>\n\n<pre><code>int main() {\n\n    char name[200];\n\n    printf(\"Please tell me your name:\");\n    fflush(stdin);\n    scanf(\"%s\", name);\n    printf(\"%s has %i letters\\n\", name, langeZeichne(name));\n\n    // frage\n\n    int end = 0;\n    char xx;\n\n    char imya;\n\n    do {\n        fflush(stdin);\n        printf(\"would you like to count a letter in %s (Y / N)?\\n\", name);\n        scanf(\"%c\\n\", &amp;xx);\n\n        switch (xx) {\n            case 'Y':\n                printf(\"Please enter a letter\\n\");\n                scanf(\"%c\\n\", &amp;imya);\n                sucheZeichen(name, imya);\n                break;\n            case 'N':\n                printf(\"Have a nice Day!\");\n                end = 0;\n                break;\n            default:\n                printf(\"Wrong input\\n\");\n                break;\n\n        }\n    }while (end==0);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12393512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHXS2.png?s=128&g=1", "display_name": "Domenic", "link": "https://stackoverflow.com/users/12393512/domenic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59181466, "answer_count": 1, "score": -1, "last_activity_date": 1575479727, "creation_date": 1575474717, "question_id": 59179883, "link": "https://stackoverflow.com/questions/59179883/using-letters-in-a-switch-statement", "title": "using letters in a Switch statement", "body": "<p>I try to use Y and N in a switch statement but when I try to compile it I got an error what say \"  error: statement requires expression of integer type ('char [0]' invalid)\n                switch (xx) {\n\"</p>\n\n<p>i also got a warning \"  warning: incompatible pointer to integer conversion passing 'char [1]' to parameter of type 'char' [-Wint-conversion]\n                                sucheZeichen(name, imya); \"</p>\n\n<pre><code>int main() {\n\nchar name[200];\n\nprintf(\"Please tell me your name:\");\nfflush(stdin);\nscanf(\"%s\", name);\nprintf(\"%s has %i letters\\n\", name, langeZeichne(name));\n\n// frage\n\nint end = 0;\nchar xx[0];\n\nchar imya[1];\n\ndo {\n    fflush(stdin);\n    printf(\"would you like to count a letter in %s (Y / N)?\\n\", name);\n    scanf(\"%c\", xx);\n\n    switch (xx) {\n        case \"Y\":\n            printf(\"Please enter a letter\\n\");\n            scanf(\"%s\", imya);\n            sucheZeichen(name, imya);\n            break;\n        case \"N\":\n            printf(\"Have a nice Day!\");\n            end = 0;\n            break;\n        default:\n            printf(\"Wrong input\\n\");\n            break;\n\n    }\n}while (end==0);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "c", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 2, "creation_date": 1575474780, "post_id": 59179672, "comment_id": 104580804, "body": "Well, you have 3 <b>separate problems</b>: 1. Extract parameters passed to <code>cmake</code>. 2. Combine that parameters into the string like <code>OPT1=ON OPT3=ON</code>. 3. Pass resulted string to the C program as a macro. Which problem you have already solved and which you cannot?"}, {"owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1575475548, "post_id": 59179672, "comment_id": 104581278, "body": "@Tsyvarev None yet, I was hoping someone already had the same requirements ;-) Your right though, this can be broken down into smaller steps - number 2 and 3 seem to be quite straightforward. However I didn&#39;t find a way to list all CMake options so far..."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1575476867, "post_id": 59179672, "comment_id": 104582089, "body": "&quot;I didn&#39;t find a way to list all CMake options so far.&quot; - It seems there is not easy way for doing this. See e.g. <a href=\"https://stackoverflow.com/questions/10205986/how-to-capture-cmake-command-line-arguments\">this question</a> or <a href=\"https://stackoverflow.com/questions/30870975/cmake-get-the-used-commandline-flags-d\">that one</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": false, "score": 1, "last_activity_date": 1575476563, "creation_date": 1575476563, "answer_id": 59180451, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59180451#59180451", "title": "Get cmake options from program", "body": "<p>I don't know if it is possible to find out if an option has been specified explicitly or not.</p>\n\n<p>The proposed solution will show all option values as specified in a CMake string variable. It consists of 3 steps:</p>\n\n<ul>\n<li>Combine the option values to a string in <code>CMakeLists.txt</code></li>\n<li>Let CMake generate a source file with placeholder substitution.</li>\n<li>Compile and link your program with the generated file.</li>\n</ul>\n\n<p>In <code>CMakeLists.txt</code> add e.g.</p>\n\n<pre><code>set(BUILD_OPTIONS \"OPT1=${OPT1} OPT2=${OPT2} OPT3=${OPT3}\")\n\nconfigure_file(${CMAKE_CURRENT_SOURCE_DIR}/build_options.c.in ${CMAKE_CURRENT_BINARY_DIR}/build_options.c @ONLY)\n</code></pre>\n\n<p>Manually created files:</p>\n\n<p><code>build_options.c.in</code></p>\n\n<pre><code>#include \"build_options.h\"\n\nconst char *BUILD_OPTIONS = \"@BUILD_OPTIONS@\";\n</code></pre>\n\n<p><code>build_options.h</code></p>\n\n<pre><code>#ifndef BUILD_OPTIONS_H_\n#define BUILD_OPTIONS_H_\n\nextern const char *BUILD_OPTIONS;\n\n#endif /* BUILD_OPTIONS_H_ */\n</code></pre>\n\n<p><code>CMake</code> will generate <code>build_options.c</code></p>\n\n<pre><code>#include \"build_options.h\"\n\nconst char *BUILD_OPTIONS = \"OPT1=ON OPT2=OFF OPT3=ON\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 5310544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Gv9DnOaW1s/AAAAAAAAAAI/AAAAAAAAEgA/E67WwOkt5QQ/photo.jpg?sz=128", "display_name": "\u013dubom&#237;r Carik", "link": "https://stackoverflow.com/users/5310544/%c4%bdubom%c3%adr-carik"}, "is_accepted": false, "score": 0, "last_activity_date": 1575496638, "creation_date": 1575496638, "answer_id": 59185203, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59185203#59185203", "title": "Get cmake options from program", "body": "<p>It is possible to use <a href=\"https://cmake.org/cmake/help/latest/command/configure_file.html\" rel=\"nofollow noreferrer\">configure_file</a> command with 'cmakedefine' feaure. This is capable to generate something very similar what autotools do i.e. config.h with all enabled/disabled features.\nThe final string may be concatenated from particular sub-string depending if CMake option defined.</p>\n"}, {"tags": [], "owner": {"reputation": 300, "user_id": 11743870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gztw1.png?s=128&g=1", "display_name": "Tal Avraham", "link": "https://stackoverflow.com/users/11743870/tal-avraham"}, "is_accepted": false, "score": 0, "last_activity_date": 1575885231, "creation_date": 1575885231, "answer_id": 59246312, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59246312#59246312", "title": "Get cmake options from program", "body": "<p>Well, if the program itself was compiled using the CMakeLists.txt file, you could write something along these lines:</p>\n\n<pre><code>option (OPT1 \u201coption 1\u201d OFF)\noption (OPT2 \u201coption 2\u201d OFF)\n\nif (OPT1)\n    add_definitions (-DOPT1_ENABLED)\nendif(OPT1)\n\nif (OPT2)\n    add_definitions (-DOPT2_ENABLED)\nendif(OPT2)\n</code></pre>\n\n<p>Then in your program:</p>\n\n<pre><code>int main(void)\n{\n    std::cout &lt;&lt; \u201cBuild options: \u201c;\n#ifdef OPT1_ENABLED\n    std::cout &lt;&lt; \u201cOPT1=ON \u201d;\n#else\n    std::cout &lt;&lt; \u201cOPT1=OFF \u201d;\n#endif /* OPT1 */\n\n#ifdef OPT2_ENABLED\n    std::cout &lt;&lt; \u201cOPT2=ON \u201d;\n#else\n    std::cout &lt;&lt; \u201cOPT2=OFF \u201d;\n#endif /* OPT2 */\n\n    std::cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "is_accepted": false, "score": 0, "last_activity_date": 1575996763, "creation_date": 1575996763, "answer_id": 59272063, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59272063#59272063", "title": "Get cmake options from program", "body": "<p>Finally I'm using the following approach, maybe someone fill find that useful. Instead of <code>option()</code> function I'm using custom <code>feature_option()</code>:</p>\n\n<pre><code>include(cmake/options.cmake)\n\nfeature_option(OPT1 \"option 1\" OFF)\nfeature_option(OPT2 \"option 2\" OFF)\nfeature_option(OPT3 \"option 3\" OFF)\n</code></pre>\n\n<p>which defines the option and also stores it on a list. Then it can be passed to the compiler via <code>ENABLED_FEATURES</code> define:</p>\n\n<pre><code>get_feature_list(feature_list)\nmessage(STATUS \"Enabled features: ${feature_list}\")\ntarget_compile_definitions(target PUBLIC \"-DENABLED_FEATURES=\\\"${feature_list}\\\"\")\n</code></pre>\n\n<p>Those functions are defined in separate <code>options.cmake</code> file, so they can be used in project consiting of multiple modules:</p>\n\n<pre><code>function(feature_option option_variable help_string) # optional argument: default_value\n    option(${option_variable} ${help_string} ${ARGN})\n    get_property(FEATURE_VARIABLE_LIST GLOBAL PROPERTY FEATURE_VARIABLE_LIST)\n    set_property(GLOBAL PROPERTY FEATURE_VARIABLE_LIST ${FEATURE_VARIABLE_LIST} ${option_variable})\nendfunction()\n\nfunction(get_feature_list output_variable)\n    get_property(FEATURE_VARIABLE_LIST GLOBAL PROPERTY FEATURE_VARIABLE_LIST)\n    foreach(option_variable ${FEATURE_VARIABLE_LIST})\n        set(option_value \"${${option_variable}}\")\n        if(${option_value})\n            if(feature_list)\n                set(feature_list \"${feature_list},${option_variable}\")\n            else()\n                set(feature_list \"${option_variable}\")\n            endif()\n        endif()\n    endforeach()\n    set(${output_variable} ${feature_list} PARENT_SCOPE)\nendfunction()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "is_accepted": false, "score": 0, "last_activity_date": 1576073000, "creation_date": 1576073000, "answer_id": 59287504, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59287504#59287504", "title": "Get cmake options from program", "body": "<p>It is possible to pass a list of all defines to a program in a single string using generator expressions:</p>\n\n<pre><code>target_compile_options(target PRIVATE \"-DENABLED_FEATURES=\\\"$&lt;JOIN:$&lt;TARGET_PROPERTY:COMPILE_DEFINITIONS&gt;,$&lt;COMMA&gt;&gt;\\\"\")\n</code></pre>\n\n<p>Using <code>target_compile_options</code> instead of <code>target_compile_definitions</code>, as the latter would cause infinite recursion.</p>\n\n<p>In CMake 3.15 and newer it is possible to use <code>REMOVE_DUPLICATES</code> generator, if a single define may appear several times on a command line.</p>\n"}], "owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1576073000, "creation_date": 1575474113, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program", "title": "Get cmake options from program", "body": "<p>How can I get CMake options used for building from within a program?</p>\n\n<p>E.g. I would like to use this:</p>\n\n<pre><code>int main()\n{\n    std::cout &lt;&lt; \"Build options: \" &lt;&lt; BUILD_OPTIONS &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><code>BUILD_OPTIONS</code> would contain a string with all options passed to <code>cmake</code>, like:</p>\n\n<pre><code>cmake -DOPT1 -DOPT3\n</code></pre>\n\n<p>with <code>CMakeLists.txt</code> defined as follows:</p>\n\n<pre><code>option(OPT1 \"option 1\" OFF)\noption(OPT2 \"option 2\" OFF)\noption(OPT3 \"option 3\" OFF)\n</code></pre>\n\n<p>The desired output of such program:</p>\n\n<pre><code>Build options: OPT1=ON OPT3=ON\n</code></pre>\n\n<p>(<code>OPT2</code> skipped, as it is not defined explicitly and equal to default value)</p>\n"}, {"tags": ["c++", "c", "libraries"], "comments": [{"owner": {"reputation": 95, "user_id": 10908150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMy_o6BDHsg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbvC7fdOOLBG86NfTRoJkC76dfXvw/mo/photo.jpg?sz=128", "display_name": "Urquhart", "link": "https://stackoverflow.com/users/10908150/urquhart"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1575474074, "post_id": 59179542, "comment_id": 104580327, "body": "That only shows include paths, not library paths. However, a similiar method to show library paths would only list all candidates, not the actual resolution."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1575474143, "post_id": 59179542, "comment_id": 104580374, "body": "<code>ldd foo</code> shows the runtime resolution of the library, if that helps you."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1575474183, "post_id": 59179542, "comment_id": 104580410, "body": "If linking using <code>g++</code> you might want to try <code>-Wl,--verbose</code> ."}], "answers": [{"tags": [], "owner": {"reputation": 330, "user_id": 3930873, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000174128456/picture?type=large", "display_name": "Mike Seeds", "link": "https://stackoverflow.com/users/3930873/mike-seeds"}, "is_accepted": false, "score": 1, "last_activity_date": 1575477117, "last_edit_date": 1575477117, "creation_date": 1575476174, "answer_id": 59180358, "question_id": 59179542, "link": "https://stackoverflow.com/questions/59179542/show-path-of-library-that-ld-found-through-l/59180358#59180358", "title": "Show path of library that ld found through -l", "body": "<p>ELF files do not include an absolute path to the shared library. That is the job of the dynamic linker. You can confirm this by running. strings executable | grep libname. The shared library can be anywhere on the linker search path. </p>\n\n<p>readelf -d executable </p>\n\n<p>To test the behaviour of the dynamic loader use ldd (List Dynamic Dependencies)</p>\n\n<p>Example below with /bin/bash</p>\n\n<blockquote>\n  <p>ldd /bin/bash</p>\n  \n  <p>libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6</p>\n</blockquote>\n\n<p>You may also want to follow symlinks</p>\n\n<blockquote>\n  <p>ls -al /lib/x86_64-linux-gnu/libc.so.6</p>\n  \n  <p>lrwxrwxrwx 1 root root 12 Feb  5  2019 /lib/x86_64-linux-gnu/libc.so.6 -> libc-2.23.so</p>\n</blockquote>\n"}], "owner": {"reputation": 95, "user_id": 10908150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMy_o6BDHsg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbvC7fdOOLBG86NfTRoJkC76dfXvw/mo/photo.jpg?sz=128", "display_name": "Urquhart", "link": "https://stackoverflow.com/users/10908150/urquhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "closed_date": 1575512162, "answer_count": 1, "score": 0, "last_activity_date": 1575477117, "creation_date": 1575473701, "question_id": 59179542, "link": "https://stackoverflow.com/questions/59179542/show-path-of-library-that-ld-found-through-l", "closed_reason": "Duplicate", "title": "Show path of library that ld found through -l", "body": "<p>Is it possible to make g++/ld show the absolute path of the library, that a -l option has been resolved to?\nIn my case I am trying to link the lrs library through -llrs and I suspect that it resolves to /usr/lib/liblrs.so but I want to be sure.</p>\n"}, {"tags": ["c", "string", "reverse"], "comments": [{"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1575472786, "post_id": 59179184, "comment_id": 104579592, "body": "When reversing, keep characters in another array until you find a blank space. Then, reverse again that string in the second array to get the word in order"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1575473398, "post_id": 59179184, "comment_id": 104579915, "body": "Hint: <a href=\"https://stackoverflow.com/questions/9210528/split-string-with-delimiters-in-c\">link</a>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1575475297, "post_id": 59179184, "comment_id": 104581137, "body": "Lots of answers. Just for fun, here&#39;s mine: <a href=\"https://ideone.com/aE5MHU\" rel=\"nofollow noreferrer\">ideone.com/aE5MHU</a>."}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 8136052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9fd3682b1367b3a0139b5d2a6f2d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Chopin", "link": "https://stackoverflow.com/users/8136052/chopin"}, "is_accepted": false, "score": 0, "last_activity_date": 1575473520, "last_edit_date": 1575473520, "creation_date": 1575472833, "answer_id": 59179269, "question_id": 59179184, "link": "https://stackoverflow.com/questions/59179184/how-can-i-reverse-each-word-in-a-string/59179269#59179269", "title": "How can I reverse each word in a string?", "body": "<p>Your function reversepPrint reverse a string.</p>\n\n<p>Since you want to reverse by word, you have to parse your string in order to apply your function reversepPrint on each word. For doing so, you can use the space character as a delimiter.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6652930"}, "edited": false, "score": 0, "creation_date": 1575473688, "post_id": 59179461, "comment_id": 104580084, "body": "But my Problem is I cannot use String.h as a library."}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "edited": false, "score": 0, "creation_date": 1575473717, "post_id": 59179461, "comment_id": 104580103, "body": "I did not use it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6652930"}, "edited": false, "score": 0, "creation_date": 1575474233, "post_id": 59179461, "comment_id": 104580444, "body": "Where do i get reverse_n() function?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1575474819, "post_id": 59179461, "comment_id": 104580832, "body": "@SimonMayrhofer it is at the top of the code snippet."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6652930"}, "edited": false, "score": 0, "creation_date": 1575478360, "post_id": 59179461, "comment_id": 104582938, "body": "How can i put all in one function, because i have to put it in one function. And the last Question is how can i keep uppercase and lowercase so to say when i have Simon and i want to reverse it to Nomis!"}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": true, "score": 0, "last_activity_date": 1575473441, "creation_date": 1575473441, "answer_id": 59179461, "question_id": 59179184, "link": "https://stackoverflow.com/questions/59179184/how-can-i-reverse-each-word-in-a-string/59179461#59179461", "title": "How can I reverse each word in a string?", "body": "<p>What I would do is the following:</p>\n\n<ol>\n<li>Create a function that reverse only <code>n</code> char of a string</li>\n<li>Use that to reverse words of the original array. </li>\n<li>Words can be easily identified because are blocks of non-null and non-space chars.</li>\n</ol>\n\n<p>Something like the following should work (note that I did not test the code) and produces the following output: <code>nomiS tbeil !azziP</code></p>\n\n<pre><code>//this is basically your original function\nchar * reverse_n( char *name, const int  len )\n{\n    char *normal = name, *reverse = name+len;\n\n    if ( normal &lt; reverse )\n    {\n        for ( ; normal &lt; --reverse; ++normal  )\n        {\n            char c = *normal;\n            *normal = *reverse;\n            *reverse  = c;\n        }\n    }\n\n    return name;\n}\n\nchar * my_reverse( char *nname)\n{\n    char* name=nname;\n    while(*name)\n    {\n        char* next = name;\n        int l = 0;\n        //find the next word and its length\n        while(*next &amp;&amp; *next!=' '){\n            next++;\n            l++;\n        }\n        //reverse it\n        reverse_n(name, l);\n        name=next;\n        //skip the space\n        if(*name)\n            name++;\n    }\n    return nname;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1575475690, "post_id": 59179817, "comment_id": 104581370, "body": "What happens when you use it on a string that has a really long word?  There appears to be a hard limit of 100 chars per word, with no checking for overflow."}, {"owner": {"reputation": 11, "user_id": 7026470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jkErr.jpg?s=128&g=1", "display_name": "Amir Ali", "link": "https://stackoverflow.com/users/7026470/amir-ali"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1575477500, "post_id": 59179817, "comment_id": 104582439, "body": "Well, we can modify that a bit which would cater that. In most cases, during learning phase keeping a fixed length would be sufficient enough."}], "tags": [], "owner": {"reputation": 11, "user_id": 7026470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jkErr.jpg?s=128&g=1", "display_name": "Amir Ali", "link": "https://stackoverflow.com/users/7026470/amir-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1575474502, "creation_date": 1575474502, "answer_id": 59179817, "question_id": 59179184, "link": "https://stackoverflow.com/questions/59179184/how-can-i-reverse-each-word-in-a-string/59179817#59179817", "title": "How can I reverse each word in a string?", "body": "<p>Here's my little effort to the logic without using the <strong>string.h</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar * reversepPrint( char *name )\n{\n\n    char *normal = name, *reverse = name;\n\n    while ( *reverse ) ++reverse;\n\n    if ( normal &lt; reverse )\n    {\n        for ( ; normal &lt; --reverse; ++normal  )\n        {\n            char c = *normal;\n            *normal = *reverse;\n            *reverse  = c;\n        }\n    }\n\n    return name;\n}\n\nint main( void ) \n{\n    char s[] = \"Simon liebt Pizza!\";\n    int i;\n    int num_of_spaces = 0;\n\n    int length = 0;\n\n    char *temp = &amp;s;\n\n    while(*temp!='\\0'){\n        temp++;\n    }\n    length = temp - s;\n\n\n    for (i = 0; i&lt;length; i++)\n    {\n\n        if (s[i]==' ')\n        {\n            num_of_spaces++;\n        }\n    }\n\n    char x[num_of_spaces+1][100];\n    i = 0;\n    int index = 0,index1 = 0, k = 0;\n    for(i = 0; i &lt; length; i++)\n    {\n        if(s[i]!=' ')\n        {\n            x[k][index] = s[index1];\n            index++;\n\n        }else{\n\n            x[k][index] = '\\0';\n            index = 0;\n            k++;\n\n        }\n        index1++;\n    }\n\n    i = 0;\n    for(i = 0; i&lt;=num_of_spaces; i++)\n    {\n        printf(\"%s\\n\",reversepPrint(x[i]));\n    }\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>This is what the code does</p>\n\n<ul>\n<li>Given any string it will find its length without using <strong>strlen</strong></li>\n<li>Then, the code will find the total numbers of strings (Spaces between them)</li>\n<li>After that, I am creating a 2d-array with the dimension [strings][100] (each string with length 100)</li>\n<li>Copying the content separately to each string</li>\n<li>then looping over the 2d array and calling the method. </li>\n</ul>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6652930"}, "edited": false, "score": 0, "creation_date": 1575477744, "post_id": 59180101, "comment_id": 104582580, "body": "How can i put all together in one function i tested it but i cannot put reverSubstring function into the reversePrint(); function"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1575478012, "post_id": 59180101, "comment_id": 104582720, "body": "Why do you want it all in one function?  That&#39;s less reusable, and harder to understand!  You <i>can</i> do it, but remember that here, <code>reverse_substring()</code> gets <i>copies</i> of its arguments (and modifies those copies), so you&#39;d need to manually make copies if you inline it into <code>reverse_words()</code>.  I.e. <code>char *left = start, *right = end;</code>"}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 3, "last_activity_date": 1575475760, "last_edit_date": 1592644375, "creation_date": 1575475332, "answer_id": 59180101, "question_id": 59179184, "link": "https://stackoverflow.com/questions/59179184/how-can-i-reverse-each-word-in-a-string/59180101#59180101", "title": "How can I reverse each word in a string?", "body": "<p>We need to decompose into two problems.  We already have most of the solution to one problem (reversing a string); we just need to make it work with a substring.  We do this mainly by removing the code that finds the end of the string:</p>\n<pre><code>/* reverse substring [left, right) in-place */\nvoid reverseSubstring(char *left, char *right)\n{\n    while (left &lt; --right) {\n        char c = *right;\n        *right = *left;\n        *left++ = c;\n    }\n}\n</code></pre>\n<p>The other half of the problem is finding the boundaries between words.  We can use <code>isspace()</code> to position start and end pointers in the right places, and call our <code>reverseSubstring</code> with them:</p>\n<pre><code>#include &lt;ctype.h&gt;\nchar *reversepPrint(char *const name)\n{\n    char *start = name;\n    char *end;\n\n    while (*start) {\n        while (*start &amp;&amp; isspace(*start)) {\n            ++start;\n        }\n        end = start;\n        while (*end &amp;&amp; !isspace(*end)) {\n            ++end;\n        }\n        reverseSubstring(start, end);\n        start = end;\n    }\n\n    return name;\n}\n</code></pre>\n<p>If you're also prohibited from using <code>&lt;ctype.h&gt;</code>, it isn't hard to write a simple <code>isspace()</code> of your own for this function.</p>\n<hr />\n<h1>Full program</h1>\n<pre><code>/* reverse substring [left, right) in-place */\nvoid reverse_substring(char *left, char *right)\n{\n    while (left &lt; --right) {\n        char c = *right;\n        *right = *left;\n        *left++ = c;\n    }\n}\n    \n#include &lt;ctype.h&gt;\n/* reverse individual words in string */\n/* word boundaries determined by isspace() */\nchar *reverse_words(char *const name)\n{\n    for (char *start = name, *end;  *start;  start = end) {\n        while (*start &amp;&amp; isspace(*start)) { ++start; }\n        end = start;\n        while (*end &amp;&amp; !isspace(*end)) { ++end; }\n        reverse_substring(start, end);\n    }\n\n    return name;\n}\n\n#include &lt;stdio.h&gt;\nint main(void)\n{\n    char s[] = &quot;Simon liebt Pizza!&quot;;\n    printf(&quot;%s&quot;, reverse_words(s));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1575477304, "post_id": 59180296, "comment_id": 104582321, "body": "But the desired and expected output is <code>&quot;i ekil gnimmargorp&quot;</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 12474310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBOMnaTCCmrwUmQJW8KKJYn0dpjrasy0A-OgePqVQ=k-s128", "display_name": "nani", "link": "https://stackoverflow.com/users/12474310/nani"}, "is_accepted": false, "score": -2, "last_activity_date": 1575479924, "last_edit_date": 1575479924, "creation_date": 1575475979, "answer_id": 59180296, "question_id": 59179184, "link": "https://stackoverflow.com/questions/59179184/how-can-i-reverse-each-word-in-a-string/59180296#59180296", "title": "How can I reverse each word in a string?", "body": "<p>try this logic instead,reverse the individual words of string one by one, for example if the string is \"i like programming\" after reversing the individual words the string should be \"i ekil gnimmargorp\".</p>\n\n<p>i hope this code snippet helps</p>\n\n<pre><code>void reverse(char* begin, char* end) \n{ \n    char temp; \n    while (begin &lt; end) { \n        temp = *begin; \n        *begin++ = *end; \n        *end-- = temp; \n    } \n} \n\n// Function to reverse words \nvoid reverseWords(char* s) \n{ \n    char* begin = s; \n\n    char* temp = s;  \n    while (*temp) { \n        temp++; \n        if (*temp == '\\0') { \n            reverse(begin, temp - 1); \n        } \n        else if (*temp == ' ') { \n            reverse(begin, temp - 1); \n            begin = temp + 1; \n        } \n    } \n} \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6652930"}, "edited": false, "score": 0, "creation_date": 1575538679, "post_id": 59181642, "comment_id": 104603053, "body": "How can i chage the upper and lower case so the first letter of a word is always uppercase and the all the others lowercase. I cannot reach the goal i tried many ideas."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6652930"}, "edited": false, "score": 0, "creation_date": 1575541115, "post_id": 59181642, "comment_id": 104604367, "body": "how can i find the first Charakter in the Word So that the result is Nomis Tbeil Azzip!"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575542950, "post_id": 59181642, "comment_id": 104605386, "body": "@SimonMayrhofer That can be done in a separate function. It probably needs a different rule to determine the start and end of a &quot;word&quot; (for example, using any non-alphabetic character as a word separator)."}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 0, "last_activity_date": 1575480282, "creation_date": 1575480282, "answer_id": 59181642, "question_id": 59179184, "link": "https://stackoverflow.com/questions/59179184/how-can-i-reverse-each-word-in-a-string/59181642#59181642", "title": "How can I reverse each word in a string?", "body": "<p>Here is a version using some nested loops:</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n\nchar * reversepPrint( char *name )\n{\n    char *s = name;\n\n    while (*s)\n    {\n        char *t = s;\n\n        /* Find end of non-space character sequence. */\n        while (*t &amp;&amp; *t == (unsigned char)*t &amp;&amp; !isspace(*t))\n        {\n            t++;\n        }\n        if (t - s &gt; 1)\n        {\n            /* Got a non-space character sequence of length &gt; 1. */\n            char *e = t;\n\n            /* Reverse the non-space character sequence. */\n            do\n            {\n                char tmp = *s;\n\n                *s++ = *--e;\n                *e = tmp;\n            } while (s &lt; e);\n\n            /* Start past non-space characters for next iteration. */\n            s = t;\n        }\n        else\n        {\n            /* Skip space or singleton non-space. */\n            s++;\n        }\n    }\n\n    return name;\n}\n</code></pre>\n\n<p>The variable <code>s</code> is used to advance through the <code>name</code> string in each iteration of the outer <code>while</code> loop. The variable <code>t</code> is initialized to <code>s</code> in each iteration of the outer loop and is then advanced past any non-space characters by the inner <code>while (*t &amp;&amp; ...)</code> loop. After advancing <code>t</code> past the any non-space characters, the length of the sequence of non-space characters is <code>t - s</code>. (If <code>*s</code> is a space character then this length will be 0.) If this length is greater than 1, it uses the inner <code>do { ... } while</code> loop to reverse the sequence of non-space characters, and then assigns <code>s = t</code> ready for the next iteration of the outer loop. Otherwise, <code>*s</code> is either a space character or a singleton non-space character, so <code>s</code> is advanced by one character for the next iteration of the outer loop.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6652930"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 59179461, "answer_count": 6, "score": 0, "last_activity_date": 1575480282, "creation_date": 1575472591, "last_edit_date": 1575474672, "question_id": 59179184, "link": "https://stackoverflow.com/questions/59179184/how-can-i-reverse-each-word-in-a-string", "title": "How can I reverse each word in a string?", "body": "<p>I'm constrained to not use anything from <code>&lt;string.h&gt;</code>.</p>\n\n<p>I want to reverse each word in the passed string.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar * reversepPrint( char *name )\n{\n    char *normal = name, *reverse = name;\n\n    while ( *reverse ) ++reverse;\n\n    if ( normal &lt; reverse )\n    {\n        for ( ; normal &lt; --reverse; ++normal  )\n        {\n            char c = *normal;\n            *normal = *reverse;\n            *reverse  = c;\n        }\n    }\n\n    return name;\n}\n\nint main( void ) \n{\n    char s[] = \"Simon liebt Pizza!\";\n\n    printf(\"%s\", reversepPrint(s));\n\n    return 0;\n}\n</code></pre>\n\n<p>My code is reversing the whole string, but I want individual words to be reversed - so the result for this example would be <code>\"nomiS tbeil !azziP\"</code>.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1575472144, "post_id": 59179029, "comment_id": 104579263, "body": "Instead of <code>*ptr1=a;</code> try <code>ptr1=&amp;a;</code>, and the same for <code>ptr2</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575472386, "post_id": 59179029, "comment_id": 104579396, "body": "Are you trying to swap the values of <code>main</code>&#39;s variables <code>a</code> and <code>b</code>?"}, {"owner": {"reputation": 21, "user_id": 11603308, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172698052847439/picture?type=large", "display_name": "Wensui Li", "link": "https://stackoverflow.com/users/11603308/wensui-li"}, "edited": false, "score": 0, "creation_date": 1575473050, "post_id": 59179029, "comment_id": 104579736, "body": "Actually, I d like to figure out in the pointer swap method, are the pointers swapped or just the value stored in the pointer swapped"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1575472148, "creation_date": 1575472148, "answer_id": 59179053, "question_id": 59179029, "link": "https://stackoverflow.com/questions/59179029/which-pointer-statement-should-i-correct-to-avoid-segmentation-fault/59179053#59179053", "title": "which pointer statement should i correct to avoid segmentation fault", "body": "<p><code>*ptr1 = a;</code> and <code>*ptr2 = b;</code> are your errors, and really you should check that the return value of <code>scanf</code> is 2 to indicate that both variables were set to something.</p>\n\n<p>Neither <code>ptr1</code> nor <code>ptr2</code> point to anything when the deferences are attempted, so the behaviour on dereferencing them is undefined. A core dump is a manifestation of that undefined behaviour.</p>\n\n<p>Did you want <code>ptr1 = &amp;a;</code> and <code>ptr2 = &amp;b;</code>? Or call more simply with</p>\n\n<pre><code>swap(&amp;a, &amp;b);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1575472219, "creation_date": 1575472219, "answer_id": 59179068, "question_id": 59179029, "link": "https://stackoverflow.com/questions/59179029/which-pointer-statement-should-i-correct-to-avoid-segmentation-fault/59179068#59179068", "title": "which pointer statement should i correct to avoid segmentation fault", "body": "<p>The mistake you did here is doing:</p>\n\n<pre><code>*ptr1=a;\n*ptr2=b;\n</code></pre>\n\n<p>you're trying to dereference unitialized pointers, pointing to indeterminate memory location, which are invalid. This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p>You need to ensure that the pointers are pointing to valid memory location before you can dereference them.</p>\n\n<p>In your case, it looks like you want the pointers to point to the variables, so changing the code to be</p>\n\n<pre><code>ptr1 = &amp;a;\nptr2 = &amp;b;\n</code></pre>\n\n<p>should do.</p>\n"}], "owner": {"reputation": 21, "user_id": 11603308, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172698052847439/picture?type=large", "display_name": "Wensui Li", "link": "https://stackoverflow.com/users/11603308/wensui-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1575472219, "creation_date": 1575472067, "question_id": 59179029, "link": "https://stackoverflow.com/questions/59179029/which-pointer-statement-should-i-correct-to-avoid-segmentation-fault", "title": "which pointer statement should i correct to avoid segmentation fault", "body": "<p>here is my code, when i execute it, it says \"Segmentation fault (core dumped)\". what kind of mistakes did I do? </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\n  void swap(int *p1,int *p2);\n  int a,b, *ptr1,*ptr2;\n\n  scanf(\"%d %d\",&amp;a,&amp;b);\n  *ptr1=a;\n  *ptr2=b;\n  swap(ptr1,ptr2);\n}\n\nvoid swap(int *a,int *b)\n{\n int t;\n t=*a;\n *a=*b;\n *b=t;\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "output"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1575471496, "post_id": 59178856, "comment_id": 104578884, "body": "Every time you call it, it returns back to where it was called. After it calls itself, it returns to itself. Is that surprising?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1575471500, "post_id": 59178856, "comment_id": 104578886, "body": "Can you explain <i>why</i> you think your output is correct?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575471652, "post_id": 59178856, "comment_id": 104578980, "body": "Each call except the base case (<code>n == 0 || n == 1</code>) will print <i>both</i> &quot;called with&quot; and &quot;returning&quot;."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575471686, "post_id": 59178856, "comment_id": 104578999, "body": "And if you learn how to use a debugger to step through your code statement by statement, and stepping into the recursive calls, might help you understand better what&#39;s happening."}, {"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575472241, "post_id": 59178856, "comment_id": 104579319, "body": "@Someprogrammerdude I understand how recursion work, i am asking how does the returning line work. first time the function takes the integer input it will call itself and do the math so when 4 is called <code>val=4*3*2*1</code> now the <code>printf</code> part in the function should print only after the calculation is done or I mean after the <code>factorial(n-1)</code> comes to an end. why does is return 2 then 6 then the final value."}, {"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575472504, "post_id": 59178856, "comment_id": 104579461, "body": "@user253751 i didn&#39;t ask about how recursion work."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1575472906, "post_id": 59178856, "comment_id": 104579659, "body": "There is an explanation of <a href=\"https://stackoverflow.com/a/34698301/645128\">how recursion unwinds here.</a> and <a href=\"https://stackoverflow.com/a/23137820/645128\">here</a>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575472953, "post_id": 59178856, "comment_id": 104579687, "body": "If you understand how recursion works then you should know why it is printing the intermediate results."}, {"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575473259, "post_id": 59178856, "comment_id": 104579837, "body": "Okay, thanks @user253751"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1575473104, "last_edit_date": 1575473104, "creation_date": 1575472641, "answer_id": 59179206, "question_id": 59178856, "link": "https://stackoverflow.com/questions/59178856/output-of-recursive-function-in-c/59179206#59179206", "title": "output of recursive function in c", "body": "<p>If we take your example of <code>factorial(4)</code> then it goes something like this:</p>\n\n<pre>\nfactorial(4)\n    print \"called with par = 4\"\n    val = 4 * factorial(3)\n        print \"called with par = 3\"\n        val = 3 * factorial(2)\n            print \"called with par = 2\"\n            val = 2 * factorial(1)\n                print \"called with par = 1\"\n                return 1\n            print \"returning 2\"  // 2 * 1 = 2\n            return 2\n        print \"returning 6\"  // 3 * 2 = 6\n        return 6\n    print \"returning 24\"  // 4 * 6 = 24\n    return 24\n</pre>\n\n<p>Each call where <code>n &gt; 1</code> (and unfortunately where <code>n &lt; 0</code>) will print both <code>\"called with...\"</code> <em>and</em> <code>\"returning...\"</code>.</p>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575473104, "creation_date": 1575471386, "question_id": 59178856, "link": "https://stackoverflow.com/questions/59178856/output-of-recursive-function-in-c", "title": "output of recursive function in c", "body": "<p>I was trying to figure out the output of a simple recursive function that calculate the factorial of a given number inside a function in c. I am confused about the order of execution of \nthis <code>printf</code> line <code>printf(\"returning %d\\n\", val);</code></p>\n\n<p>I expected the output of this code to be :</p>\n\n<pre><code>called with par = 4\ncalled with par = 3\ncalled with par = 2\ncalled with par = 1\nreturning 24\n24\n</code></pre>\n\n<p>But the output is:</p>\n\n<pre><code>called with par = 4\ncalled with par = 3\ncalled with par = 2\ncalled with par = 1\nreturning 2\nreturning 6\nreturning 24\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>int factorial(int n);\nint main(void)\n{\n\nprintf(\"%d\",factorial(4));\n\n}\n\n\nint factorial(int n)\n{\n    int val;\n    if ((n == 0) || (n == 1)) \n    {\n        printf(\"called with par = %d\\n\", n);\n        return 1;\n    }\n\n    else \n    {\n        printf(\"called with par = %d\\n\", n);\n        val = n * factorial(n - 1);\n        printf(\"returning %d\\n\", val);\n        return val;\n    }\n}\n\n</code></pre>\n"}, {"tags": ["c", "arrays", "segmentation-fault", "structure", "realloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1575470880, "post_id": 59178683, "comment_id": 104578507, "body": "You seem to have posted more code than what would be reasonable for your issue. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and how to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>; providing a MRE helps users answer your question and future users relate to your issue.  <a href=\"http://idownvotedbecau.se/nomcve/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/nomcve</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575470999, "post_id": 59178683, "comment_id": 104578567, "body": "You can&#39;t have zero size arrays in C. Is this some gcc dialect? Also for the love of obfuscation, get rid of those macros. Use real functions if needed."}, {"owner": {"reputation": 25, "user_id": 9950768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cb93fd85e60c43f41aa5e493d68c4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vasyl Martyniv", "link": "https://stackoverflow.com/users/9950768/vasyl-martyniv"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575471369, "post_id": 59178683, "comment_id": 104578796, "body": "@Lundin it compiled and ran without warnings with zero sized arrays, i`ve suspected that i cant do that but compiler said nothing so i let it be. If i change array size to 1 problem persists. Ok, will remake macros to function, thanks."}, {"owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575472724, "post_id": 59178683, "comment_id": 104579560, "body": "@Lundin You can have zero-element arrays in C. Try it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "edited": false, "score": 0, "creation_date": 1575474355, "post_id": 59178683, "comment_id": 104580511, "body": "@WillisBlackburn No you can&#39;t, period. Try it yourself with a <i>C language compliant compiler</i>. <a href=\"https://godbolt.org/z/W4JFcV\" rel=\"nofollow noreferrer\">godbolt.org/z/W4JFcV</a>"}, {"owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "edited": false, "score": 0, "creation_date": 1575477169, "post_id": 59178683, "comment_id": 104582246, "body": "Yes, if you specify <code>-pedantic-errors</code>, you&#39;ll get an error. But with default options, compiles just fine with both gcc and clang."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9950768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cb93fd85e60c43f41aa5e493d68c4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vasyl Martyniv", "link": "https://stackoverflow.com/users/9950768/vasyl-martyniv"}, "edited": false, "score": 0, "creation_date": 1575471836, "post_id": 59178801, "comment_id": 104579091, "body": "Removed assigning, and problem persists. I think that it fails inside realloc because i somehow messed up with setting its size, but i cant fugure out how."}, {"owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "reply_to_user": {"reputation": 25, "user_id": 9950768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cb93fd85e60c43f41aa5e493d68c4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vasyl Martyniv", "link": "https://stackoverflow.com/users/9950768/vasyl-martyniv"}, "edited": false, "score": 0, "creation_date": 1575471910, "post_id": 59178801, "comment_id": 104579133, "body": "I updated the answer. This code should work. Let me know if you have any questions."}, {"owner": {"reputation": 25, "user_id": 9950768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cb93fd85e60c43f41aa5e493d68c4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vasyl Martyniv", "link": "https://stackoverflow.com/users/9950768/vasyl-martyniv"}, "edited": false, "score": 0, "creation_date": 1575474056, "post_id": 59178801, "comment_id": 104580312, "body": "why cant i scan name to this new element like this: <code>scanf(&quot;%s&quot;,newBakery-&gt;name);</code> ? It also throws segmentation fault"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575474642, "post_id": 59178801, "comment_id": 104580707, "body": "&quot;sizeof(bakeryList) / sizeof(Bakery) will evaluate to zero because you defined bakeryList as a zero-element array.&quot; This isn&#39;t correct, because the C standard doesn&#39;t mention what will happen if you define a &quot;zero size array&quot;. Rather, it explicitly says that an array cannot have size zero, constraint violation of C11 6.7.6.2/1 &quot;... [ and ] may delimit an expression... If the expression is a constant expression, it shall have a value greater than zero.&quot; So what the OP&#39;s code will do is anyone&#39;s guess. Probably it is using GNU C non-standard extensions or such."}, {"owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575477642, "post_id": 59178801, "comment_id": 104582525, "body": "@Lundin With default options both gcc and clang compile a zero-element array and report <code>sizeof</code> as zero, exactly what you&#39;d expect. Look, I&#39;m not saying a zero-element array is useful, but it&#39;s pretty obvious that <code>sizeof</code> zero-element array is zero."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575482439, "post_id": 59178801, "comment_id": 104585144, "body": "@WillisBlackburn And neither of those compilers are set in C standard mode by default. What the not-C language does isn&#39;t particularly relevant, particularly not when teaching beginners."}, {"owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "edited": false, "score": 0, "creation_date": 1575482529, "post_id": 59178801, "comment_id": 104585187, "body": "I take note of your belief that gcc and clang by default compile a language that is not C. :-)"}], "tags": [], "owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "is_accepted": true, "score": 1, "last_activity_date": 1575471877, "last_edit_date": 1575471877, "creation_date": 1575471223, "answer_id": 59178801, "question_id": 59178683, "link": "https://stackoverflow.com/questions/59178683/segmentation-fault-on-reallocating-of-memory/59178801#59178801", "title": "Segmentation fault on reallocating of memory", "body": "<p><code>bakeryList</code> is a zero-element array of pointers to <code>Bakery</code>. It has room for zero pointers.</p>\n\n<p>Yet later you set the first element of this array (<code>*bakeryList</code> which is the same as <code>bakeryList[0]</code>) to whatever comes back from <code>realloc</code>. So you're overwriting something, and it probably goes downhill from there.</p>\n\n<p>I think you want <code>bakeryList</code> to just be a pointer to <code>Bakery</code>. That's how dynamically-allocated arrays work in C: you define a pointer to the first element and use pointer math (e.g., <code>bakeryList[5]</code> or <code>*(bakeryList + 5)</code>) to access other elements.</p>\n\n<p>Another issue is your use of <code>sizeof(bakeryList)</code>. <code>sizeof</code> is an operator that's evaluated by the compiler. It doesn't change at runtime. <code>sizeof(bakeryList) / sizeof(Bakery)</code> will evaluate to zero because you defined <code>bakeryList</code> as a zero-element array. You need another variable to keep track of how many elements are actually in the array at runtime.</p>\n\n<p>Something like this would work:</p>\n\n<pre><code>int bakeryCount = 0;\nBakery *bakeryList = NULL;\n\nvoid addBakery() {\n    // Add one to the array.\n    bakeryCount++;\n    bakeryList = realloc(bakeryList, bakeryCount * sizeof (Bakery));\n    // Create a pointer to the new element at the end of the array.\n    Bakery *newBakery = bakeryList + bakeryCount - 1;\n    // Set all the fields. Note that they will probably contain\n    // garbage so you should set them all.\n    newBakery-&gt;name = ...\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9950768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cb93fd85e60c43f41aa5e493d68c4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vasyl Martyniv", "link": "https://stackoverflow.com/users/9950768/vasyl-martyniv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 59178801, "answer_count": 1, "score": 0, "last_activity_date": 1575471877, "creation_date": 1575470836, "last_edit_date": 1575471081, "question_id": 59178683, "link": "https://stackoverflow.com/questions/59178683/segmentation-fault-on-reallocating-of-memory", "title": "Segmentation fault on reallocating of memory", "body": "<p>I need to make a program for bakery managment, I've done structures and three pointer arrays that must contain pointers for object of these structures. But i can't make function to add new bakery because it needs dynamic memory allocating. I've tried to do this but it throws <strong><code>Segmentation Fault</code></strong> on realloc. I would be grateful for any advice how to properly reallocate memory for these arrays to add element. Also feel free to make comments about other errors in the code, I'm just learning.</p>\n\n<pre><code>typedef struct BakeryType {\n    char *name;\n} BakeType;\n\ntypedef struct Bakerys {\n    char *name;\n    BakeType *type;\n    char *photo;\n    float weight;\n    int portions;\n    float price;\n    char *description;\n} Bakery;\n\nBakery *bakeryList[0];\nBakeType *bakeTypeList[0];\n\nvoid addBakery() {\n    Bakery new;\n    *bakeryList = realloc(*bakeryList, (sizeof(bakeryList)/ sizeof(Bakery))+ 1);//Segmentation Fault\n    bakeryList[sizeof(bakeryList)/sizeof(Bakery)]=&amp;new;\n}\n\n\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "element", "find-occurrences"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1575470677, "post_id": 59178578, "comment_id": 104578398, "body": "What is the problem? Have you attempted to write the <code>countElement</code> function?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1575470942, "post_id": 59178578, "comment_id": 104578545, "body": "One major problem you have is in the line <code>printf(&quot;The number %d occurs %d times.\\n&quot;, elementCount, countElement);</code> - where the last argument, as you have it, will be the <i>address</i> of the <code>countElement</code> function. To get the function&#39;s returned value, you need to specify the function with arguments, like this: <code>countElement(numbers, 10, elementCount)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 12480417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d13124e4341a8c5e11e18a6bbb4d44?s=128&d=identicon&r=PG&f=1", "display_name": "ConfusedChicken4", "link": "https://stackoverflow.com/users/12480417/confusedchicken4"}, "edited": false, "score": 0, "creation_date": 1575471544, "post_id": 59178686, "comment_id": 104578918, "body": "The code runs when I added the things you said to the &quot;countElement&quot; function, and i changed the &quot;printf&quot;. But now each time I enter a value it just returns that the number occurs 10 times even tho it don&#39;t. Any suggestions? Thanks btw for the first part."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 12480417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d13124e4341a8c5e11e18a6bbb4d44?s=128&d=identicon&r=PG&f=1", "display_name": "ConfusedChicken4", "link": "https://stackoverflow.com/users/12480417/confusedchicken4"}, "edited": false, "score": 0, "creation_date": 1575471750, "post_id": 59178686, "comment_id": 104579040, "body": "@ConfusedChicken4 Check whether in this statement if ( inputArray[i] == elementCount ) ++count; you are using the assignment operator instead of the comparison operator as in the original statement."}, {"owner": {"reputation": 41, "user_id": 12480417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d13124e4341a8c5e11e18a6bbb4d44?s=128&d=identicon&r=PG&f=1", "display_name": "ConfusedChicken4", "link": "https://stackoverflow.com/users/12480417/confusedchicken4"}, "edited": false, "score": 0, "creation_date": 1575472361, "post_id": 59178686, "comment_id": 104579387, "body": "How do you mean? (started programming 3 weeks ago and learned about functions today) this is currently how it looks in my code &quot;if (inputArray[i] == elementCount)&quot;"}, {"owner": {"reputation": 41, "user_id": 12480417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d13124e4341a8c5e11e18a6bbb4d44?s=128&d=identicon&r=PG&f=1", "display_name": "ConfusedChicken4", "link": "https://stackoverflow.com/users/12480417/confusedchicken4"}, "edited": false, "score": 0, "creation_date": 1575472504, "post_id": 59178686, "comment_id": 104579460, "body": "Nvm found the problem. I did not have a &quot;return count;&quot; at the end of the function. Thanks for the help"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1575471377, "last_edit_date": 1575471377, "creation_date": 1575470847, "answer_id": 59178686, "question_id": 59178578, "link": "https://stackoverflow.com/questions/59178578/c-function-that-counts-the-number-of-occurrences-of-an-element-in-a-randomized/59178686#59178686", "title": "C - Function that counts the number of occurrences of an element in a randomized array", "body": "<p>It is simple</p>\n\n<pre><code>int countElement(int inputArray[], int arraySize, int elementCount)\n{\n    int count = 0l\n\n    for ( int i = 0; i &lt; arraySize; i++ )\n    {\n        if ( inputArray[i] == elementCount ) ++count; \n    }\n\n    return count;\n}\n</code></pre>\n\n<p>The function can be called like</p>\n\n<pre><code>printf(\"The number %d occurs %d times.\\n\", elementCount, \n                                           countElement( numbers, 10, elementCount ) );\n</code></pre>\n\n<p>Though it would be more correctly to declare the function like</p>\n\n<pre><code> size_t countElement( const int inputArray[], size_t arraySize, int elementCount );\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12480417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d13124e4341a8c5e11e18a6bbb4d44?s=128&d=identicon&r=PG&f=1", "display_name": "ConfusedChicken4", "link": "https://stackoverflow.com/users/12480417/confusedchicken4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 59178686, "answer_count": 1, "score": 1, "last_activity_date": 1575471377, "creation_date": 1575470507, "question_id": 59178578, "link": "https://stackoverflow.com/questions/59178578/c-function-that-counts-the-number-of-occurrences-of-an-element-in-a-randomized", "title": "C - Function that counts the number of occurrences of an element in a randomized array", "body": "<p>I'm kinda new to programming overall and are currently programming in C, and I'm currently working on a program that first randomizes 10 numbers that are put into an array and prints them out on the screen, and then let the user enter an integer and the program should then check the array and print out how many times the user entered integer occurs in the array, and this is where I'm having trouble.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n#include &lt;time.h&gt;\n\n//  Function to initialize random numbers.\nint Random()                                                            \n{\n    srand(time(NULL));                                                  //  To initialize the random number generator.\n    return 0;                                                           //  Really only the important part from the function, that it returns something.\n}\n\n// Generates randome values for the array.\nvoid setRandomNumber(int inputArray[], int arraySize)                   \n{\n    int i;\n    Random();                                                           //  Calls the \"Random\" function. \n    for(i = 0; i &lt; arraySize; i++)                                      //  Conditions for when/how many times to run the loop.\n        inputArray[i] = (rand() % 10) + 1;                              //  What values the array will get, random numbers between 1 and 10.\n}\n\n// Function to count the occurrances of an element.\nint countElement(int inputArray[], int arraySize, int elementCount)\n{\n\n}\n\nint main(void)\n{\n    int numbers[10];                                                    \n    int loop;\n    int run = 1;\n    int elementCount = 1;\n    setRandomNumber(numbers, 10);                                       //  Calls the \"setRandomNumber\" fucntion to set random values to the floats in the array. \n    countElement(numbers, 10, elementCount);\n\n    for (loop = 0; loop &lt; 10; loop++)                                   //  Prints out the already randomized values of the array \"numbers\"\n        printf(\"Number: %d\\n\", numbers[loop]);\n\n    printf(\"\\nWhat to search for: \");\n    scanf_s(\"%d\", &amp;elementCount);                                       //  Takes user input on what number to check.\n    printf(\"The number %d occurs %d times.\\n\", elementCount, countElement);\n\n    return 0;\n\n\n}\n</code></pre>\n\n<p>We are required to use functions and the functionheader must look like this <code>int countElement(int inputArray[], int arraySize, int elementCount)</code> and in this case it's the <code>countElement</code> function that I'm having trouble with. </p>\n"}, {"tags": ["c", "double", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575469387, "post_id": 59178140, "comment_id": 104577572, "body": "When you use <code>scanf</code> you use <code>x[i]</code> and <code>y[i]</code>, but for <code>printf</code> you use <code>*(x + j)</code> and <code>*(y + j)</code>... Why this inconsistency? Pick one way and stick with it (I recommend array-indexing with e.g. <code>x[j]</code> and <code>y[j]</code>)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575469509, "post_id": 59178140, "comment_id": 104577657, "body": "Also note that in C you <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t have to cast the result of <code>malloc</code> and its siblings (like <code>calloc</code>)</a>."}, {"owner": {"reputation": 1, "user_id": 12430372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f447b14f912a2efa0f31587ce1b943?s=128&d=identicon&r=PG&f=1", "display_name": "Sotireus98", "link": "https://stackoverflow.com/users/12430372/sotireus98"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575469935, "post_id": 59178140, "comment_id": 104577934, "body": "I am learn pointers and I wanted to using differents ways to access  it."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1575469357, "last_edit_date": 1575469357, "creation_date": 1575469284, "answer_id": 59178173, "question_id": 59178140, "link": "https://stackoverflow.com/questions/59178140/why-does-data-not-save-into-pointer-array/59178173#59178173", "title": "Why does data not save into pointer array?", "body": "<p>You have mismatch in the conversion specifier (<code>%d</code> - matching an integer and expecting the argument as pointer to integer) with the type of the argument (pointer to a <code>double</code>). This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p>So, instead of</p>\n\n<pre><code>    scanf(\"%d\", &amp;x[i]);\n    scanf(\"%d\", &amp;y[i]);\n</code></pre>\n\n<p>you should use</p>\n\n<pre><code>    scanf(\"%lf\", &amp;x[i]);\n    scanf(\"%lf\", &amp;y[i]);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12430372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f447b14f912a2efa0f31587ce1b943?s=128&d=identicon&r=PG&f=1", "display_name": "Sotireus98", "link": "https://stackoverflow.com/users/12430372/sotireus98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575469499, "creation_date": 1575469169, "last_edit_date": 1575469499, "question_id": 59178140, "link": "https://stackoverflow.com/questions/59178140/why-does-data-not-save-into-pointer-array", "title": "Why does data not save into pointer array?", "body": "<p>I have a C code and wanna save data x and y but only I get a zero values into this pointer array</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(){\n    int n;\n    //Ingreso el numero de puntos\n    printf(\"Numeros de puntos: \");\n    scanf(\"%i\", &amp;n);\n    //Asignacion de memoria para los puntos x y y\n    double *x= (double*) calloc(n,sizeof(*x));\n    double *y= (double*) calloc(n,sizeof(*y));\n    //Ingreso de datos \n    printf(\"Ingrese los puntos x,y: \");\n    for(int i = 0 ; i &lt; n ; i++){\n        scanf(\"%d\", &amp;x[i]);\n        scanf(\"%d\", &amp;y[i]);\n    }\n    for(int j = 0 ; j &lt; n ; j++){\n        printf(\"\\n%.3f, %.3f\", *(x+j),*(y+j));\n    }\n    //Libero memoria de x y y\n    free(x);\n    free(y);\n    return 0;\n\n}\n</code></pre>\n\n<p>When I print anything with n numbers I get this n output (number of points equals 2)</p>\n\n<pre><code>0.000, 0.000\n0.000, 0.000\n</code></pre>\n"}, {"tags": ["c", "arrays", "array-indexing"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 6, "creation_date": 1575468088, "post_id": 59177749, "comment_id": 104576728, "body": "<i>&quot;I thought it was the 1st index of the number, so 0,&quot;</i> You&#39;re right. It&#39;s the <code>char</code> <code>&#39;0&#39;</code>, and if you look at an <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII table</a>, you&#39;ll find that its value (as an integer) is <code>48</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1575468135, "post_id": 59177749, "comment_id": 104576756, "body": "<code>&#39;0&#39;</code> is 0x30 or 48 in ASCII"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1575468139, "post_id": 59177749, "comment_id": 104576761, "body": "<code>a[b]</code> is syntactical sugar for *(a+b) in c."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1575468410, "post_id": 59177749, "comment_id": 104576936, "body": "It does the same thing as <code>1[&quot;20&quot;]</code>. :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575469211, "post_id": 59177749, "comment_id": 104577446, "body": "@IanAbbott Or <code>true &lt;: &quot;\\62\\60&quot; ??)??&#39; false</code>"}], "answers": [{"comments": [{"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575468591, "post_id": 59177796, "comment_id": 104577077, "body": "The fun question would be <b>What&#39;s the value of &quot;20&quot;[2]?</b> :-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575468644, "post_id": 59177796, "comment_id": 104577108, "body": "@BobJarvis-ReinstateMonica The fun answer would be &quot;Pizza in 30 minutes...prepaid!!&quot; :)"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575468691, "post_id": 59177796, "comment_id": 104577136, "body": "Not if it means I&#39;d have to be at work late in order to get the &quot;free&quot; pizza. :-("}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1575469089, "post_id": 59177796, "comment_id": 104577370, "body": "Why is that a <i>fun</i> question? <code>&quot;20&quot;</code> is an array with 3 elements, so <code>&quot;20&quot;[2]</code> returns the last element."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1575469927, "post_id": 59177796, "comment_id": 104577927, "body": "@thebusybee - it&#39;s &quot;fun&quot; because it returns something you can&#39;t see. It&#39;s the kind of trick question interviewers (seem to) love."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1575470012, "post_id": 59177796, "comment_id": 104577985, "body": "and, many would miss the fact that the array length is actually 3."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1575471507, "post_id": 59177796, "comment_id": 104578894, "body": "Well, actually I <i>can</i> see it. ;-) It depends on <i>how</i> you try to see it: &quot;%d&quot; prints a &quot;0&quot;, redirected output of &quot;%c&quot; and loaded in Notepad++ shows <code>NUL</code>, and so on... But you&#39;re right in so far that most beginners have difficulties to make it visible."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1575468468, "last_edit_date": 1575468468, "creation_date": 1575468134, "answer_id": 59177796, "question_id": 59177749, "link": "https://stackoverflow.com/questions/59177749/what-does-201-do/59177796#59177796", "title": "What does &quot;20&quot;[1] do?", "body": "<p>It's not a function, it's just indexing an array.</p>\n\n<p><code>\"20\"</code> here is a character array, and we're taking the value at index 1 - which is <code>'0'</code> - the character <code>'0'</code>.</p>\n\n<p>This is the same as</p>\n\n<pre><code>char chArr[] = \"20\";       // using a variable to hold the array \nprintf (\"%d\", chArr[1]);   // use indexing on the variable, decimal value 48\nprintf (\"%c\", chArr[1]);   // same as above, will print character representation, 0\n</code></pre>\n\n<p>The decimal value of <code>'0'</code> is <code>48</code>, according to <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII encoding</a>, the most common encoding around these days.</p>\n"}, {"tags": [], "owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1575468531, "creation_date": 1575468531, "answer_id": 59177937, "question_id": 59177749, "link": "https://stackoverflow.com/questions/59177749/what-does-201-do/59177937#59177937", "title": "What does &quot;20&quot;[1] do?", "body": "<p>Well, depending on your point of view it's either <code>'0'</code>, 48, or 0x30.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n  {\n  printf(\"'%c' %d 0x%X\\n\", \"20\"[1], \"20\"[1], \"20\"[1]);\n\n  return 0;\n  }\n</code></pre>\n\n<p>The above prints</p>\n\n<pre><code>'0' 48 0x30\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1575469649, "last_edit_date": 1575469649, "creation_date": 1575468836, "answer_id": 59178045, "question_id": 59177749, "link": "https://stackoverflow.com/questions/59177749/what-does-201-do/59178045#59178045", "title": "What does &quot;20&quot;[1] do?", "body": "<p>In this subscripting expression</p>\n\n<pre><code>\"20\"[1]\n</code></pre>\n\n<p>\"20\" is a string literal that has the type <code>char[3]</code>. Used in expressions the literal is converted to pointer to its first element.</p>\n\n<p>So this expression</p>\n\n<pre><code>\"20\"[1]\n</code></pre>\n\n<p>yields the second element of the string literal that is <code>'0'</code>.</p>\n\n<p>You can imagine this record like</p>\n\n<pre><code>char *p = \"20\";\n\nchar c = p[1];\n</code></pre>\n\n<p><code>48</code> is the ASCII value of the character <code>'0'</code>.</p>\n\n<p>A more exotic record can look like</p>\n\n<pre><code>1[\"20\"]\n</code></pre>\n\n<p>that is equivalent to the previous record.</p>\n\n<p>From the C Standard (6.5.2.1 Array subscripting)</p>\n\n<blockquote>\n  <p>2 A post\ufb01x expression followed by an expression in square brackets []\n  is a subscripted designation of an element of an array object. The\n  de\ufb01nition of the subscript operator [] is that E1[E2] is identical to\n  (*((E1)+(E2))). Because of the conversion rules that apply to the\n  binary + operator, if E1 is an array object (equivalently, a pointer\n  to the initial element of an array object) and E2 is an integer,\n  E1[E2] designates the E2-th element of E1 (counting from zero).</p>\n</blockquote>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    printf( \"\\\"20\\\"[1] == '%c' and its ASCII value is %d\\n\", \"20\"[1], \"20\"[1] );\n    printf( \"1[\\\"20\\\"] == '%c' and its ASCII value is %d\\n\", 1[\"20\"], 1[\"20\"] );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>\"20\"[1] == '0' and its ASCII value is 48\n1[\"20\"] == '0' and its ASCII value is 48\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 6895054, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9086ab69036f268867e7c5044e72315d?s=128&d=identicon&r=PG&f=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/6895054/drax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 59177796, "answer_count": 3, "score": 2, "last_activity_date": 1575469649, "creation_date": 1575468000, "last_edit_date": 1575468928, "question_id": 59177749, "link": "https://stackoverflow.com/questions/59177749/what-does-201-do", "title": "What does &quot;20&quot;[1] do?", "body": "<p>In a test exam, we were told to find the value of some expressions.</p>\n\n<p>All but 1 were clear, which was <code>\"20\"[1]</code>. I thought it was the 1st index of the number, so <code>0</code>, but testing with a computer it prints <code>48</code>. </p>\n\n<p>What exactly does that 'function' do?</p>\n"}, {"tags": ["c", "trigonometry", "curve"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1575466481, "post_id": 59177229, "comment_id": 104575766, "body": "Write the characters into a 2D buffer of, say 80 x 25 characters. Then print each line."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1575466489, "post_id": 59177229, "comment_id": 104575771, "body": "Yes, this is possible. Stack Overflow is not a &quot;write my code for me&quot; service."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1575466563, "post_id": 59177229, "comment_id": 104575812, "body": "You may find <a href=\"https://stackoverflow.com/q/47906401/645128\">one of the answers here</a> to be helpful."}, {"owner": {"reputation": 896, "user_id": 6659361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200d3e89398030d70445b9a3f071c385?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime B.", "link": "https://stackoverflow.com/users/6659361/maxime-b"}, "edited": false, "score": 1, "creation_date": 1575466590, "post_id": 59177229, "comment_id": 104575832, "body": "In your <code>else</code> you use two <code>for</code> each with a <code>\\n</code>. How is it supposed to be on the same line? How could you modify it to make it work?"}, {"owner": {"reputation": 23, "user_id": 11681584, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nDKleXcLxpI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyPKAgGluufvPFBZzPJFjVjnBWHQ/mo/photo.jpg?sz=128", "display_name": "firat", "link": "https://stackoverflow.com/users/11681584/firat"}, "edited": false, "score": 0, "creation_date": 1575468995, "post_id": 59177229, "comment_id": 104577316, "body": "I tried it by comparing the values of  indents and implying \\n according to this. Then the curve went crazy after some point. I posted this code as an example of the one which is closest to the output, which I should be getting at the end."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575570310, "post_id": 59177229, "comment_id": 104620081, "body": "OT: when compiling, always enable the warnings, then fix those warnings.  ( for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std=gnu11</code> )  Note: other compilers use different options to obtain the same results."}, {"owner": {"reputation": 23, "user_id": 11681584, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nDKleXcLxpI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyPKAgGluufvPFBZzPJFjVjnBWHQ/mo/photo.jpg?sz=128", "display_name": "firat", "link": "https://stackoverflow.com/users/11681584/firat"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575662364, "post_id": 59177229, "comment_id": 104654623, "body": "@user3629249 thanks for advice. But I need to do it with ISO C90 and need to compile with -Wall -ansi -pedantic. But I think to apply the math library I need to use -lm, is it right?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575689478, "post_id": 59177229, "comment_id": 104660589, "body": "@firat.  When performing the link step, the linker needs to be supplied with <code>-lm</code>.  The compile step doesn&#39;t care which libraries are involved.   Also, using the <code>-ansi</code> option is very problematic.  and in today&#39;s world, not desirable.  Many years ago, when C began to diverge from the ANSI standard, it was often used to force the ANSI standard for C.  That standard has not been updated (and in general should not be used)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575689580, "post_id": 59177229, "comment_id": 104660607, "body": "@firat. if need to use the C90 standard (not really a good idea) then replace: <code>-std=gnu11</code> with <code>-std=c90</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575690060, "post_id": 59177229, "comment_id": 104660657, "body": "I hope you realize that the definition of <code>M_PI</code> is defined in the header file: <code>math.h</code>.  it is slightly different than the value your using in the posted code."}, {"owner": {"reputation": 23, "user_id": 11681584, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nDKleXcLxpI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyPKAgGluufvPFBZzPJFjVjnBWHQ/mo/photo.jpg?sz=128", "display_name": "firat", "link": "https://stackoverflow.com/users/11681584/firat"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575748247, "post_id": 59177229, "comment_id": 104672413, "body": "@user3629249 Yeah it s not a good idea you are right but those are the terms of the assignment. If I don&#39;t define M_PI, it can&#39;t run it direct from the math.h"}], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 3, "last_activity_date": 1575466578, "creation_date": 1575466578, "answer_id": 59177311, "question_id": 59177229, "link": "https://stackoverflow.com/questions/59177229/drawing-simultaneously-sine-and-cosine-curves/59177311#59177311", "title": "Drawing simultaneously sine and cosine curves", "body": "<p>You can: create an empty line</p>\n\n<pre><code>char line[] = \"                          \";\n</code></pre>\n\n<p>set the characters at the appropriate places</p>\n\n<pre><code>line[c_indent] = 'x';\nline[s_indent] = '+';\n</code></pre>\n\n<p>and then output this line:</p>\n\n<pre><code>puts(line);\n</code></pre>\n\n<p>The case of both sine and cos in a single point is left to you as an exercise ;)</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1575466630, "creation_date": 1575466630, "answer_id": 59177329, "question_id": 59177229, "link": "https://stackoverflow.com/questions/59177229/drawing-simultaneously-sine-and-cosine-curves/59177329#59177329", "title": "Drawing simultaneously sine and cosine curves", "body": "<ul>\n<li>In the <code>else</code> statement, check which one that is larger of <code>s_indent</code> and <code>c_indent</code>.</li>\n<li>Copy these variables to two new variables <code>largest</code> and <code>smallest</code>.</li>\n<li>Iterate with for loop over <code>smallest</code> to print spaces, then print either + or x depending on which was smallest.</li>\n<li>Then iterate from <code>smallest</code> to <code>largest</code>, print spaces, then print either + or x depending on which was largest.</li>\n</ul>\n\n<p>An alternative, more elegant solution is to make a function <code>void printline (int n, char symbol)</code> then call it two times.</p>\n"}, {"tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1575472633, "creation_date": 1575472633, "answer_id": 59179203, "question_id": 59177229, "link": "https://stackoverflow.com/questions/59177229/drawing-simultaneously-sine-and-cosine-curves/59179203#59179203", "title": "Drawing simultaneously sine and cosine curves", "body": "<p>In the posted code, each symbol is printed in a separate line at the calculated position, but what you have to do is to determine the order of the symbols and print both in the same line.</p>\n\n<p>Consier using a simple function like</p>\n\n<pre><code>void print_after_n_spaces(int n, const char* str)\n{\n    while (n-- &gt; 0)\n        putchar(' ');\n    printf(\"%s\", str);\n}\n</code></pre>\n\n<p>Also, add another branch and calculate the <em>difference</em> between the two positions:</p>\n\n<pre><code>for(int x = -180; x &lt;= 180; x += 15)\n{\n    double angle = x / 180.0 * M_PI;\n    int s_pos = 10.5 + 10.0 * sin(angle);\n    int c_pos = 10.5 + 10.0 * cos(angle);\n    //          ^^^^ To \"round\" the values\n\n    if (c_pos &gt; s_pos)\n    {\n        print_after_n_spaces(s_pos, \"+\");\n        //                          ^^^                 Don't print the newline here\n        print_after_n_spaces(c_pos - s_pos - 1, \"x\\n\");\n        //                   ^^^^^^^^^^^^^^^^^          Difference between the positions\n    }\n    else if (c_pos &lt; s_pos) \n    {\n        // Here prints first the \"x\" (the cosine), then the \"+\"\n    }\n    else\n    {\n        // Here prints only \"*\"\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11681584, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nDKleXcLxpI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyPKAgGluufvPFBZzPJFjVjnBWHQ/mo/photo.jpg?sz=128", "display_name": "firat", "link": "https://stackoverflow.com/users/11681584/firat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 59179203, "answer_count": 3, "score": 1, "last_activity_date": 1575502456, "creation_date": 1575466309, "last_edit_date": 1575502456, "question_id": 59177229, "link": "https://stackoverflow.com/questions/59177229/drawing-simultaneously-sine-and-cosine-curves", "title": "Drawing simultaneously sine and cosine curves", "body": "<p>I'm trying to write a c program that draws sine and cosine curves simultaneously by using '+' for sine and 'x' for cosine and '*' when the values of sine and cosine are equal. Here is the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt; /* for  sin(x) */\n\n#define M_PI 3.14159265358979323846264338327950288\n\nint main() {\n  double x;\n  int s_indent;\n  int c_indent;\n  for(x = -180.0; x &lt;=180.0; x+=15.0) {\n    /*  compute  value  */\n    s_indent = 10 + 10* sin(x/180 * M_PI);\n    c_indent = 10 +  10* cos(x/180 * M_PI);\n\n\n    if(c_indent == s_indent){\n      for(;s_indent;--s_indent) putchar(' ');\n      printf(\"*\\n\");\n    }\n    else{\n      for(; s_indent; --s_indent) putchar(' ');\n      printf(\"+\\n\");\n\n      /* plot x at position */\n\n      for(; c_indent; --c_indent) putchar(' ');\n      printf(\"x\\n\");\n    }\n  }\n  return 0;\n}\n\n</code></pre>\n\n<p>but the problem with the code is that it produces the curves line by line. Like here:</p>\n\n<p><img src=\"https://i.stack.imgur.com/kCFcX.png\" alt=\"\"></p>\n\n<p>And I want to make it on the same line like this one here:</p>\n\n<p><img src=\"https://i.stack.imgur.com/lL0JK.png\" alt=\"\"></p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575469590, "post_id": 59176804, "comment_id": 104577716, "body": "It&#39;s not a weird problem, you are simply using <code>sizeof</code> incorrectly. Soon as you pass something through <code>void*</code> all information about the pointed-at type is lost to the compile. In addition, using <code>sizeof</code> on a pointer type gives the size of the <i>pointer</i> not the pointed-at data."}], "answers": [{"comments": [{"owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "edited": false, "score": 1, "creation_date": 1575465689, "post_id": 59176904, "comment_id": 104575314, "body": "instead of &#39;You allocate to much&#39; it shall be &#39;too much&#39;: double &#39;o&#39;  :-)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 6, "last_activity_date": 1575466180, "last_edit_date": 1575466180, "creation_date": 1575465260, "answer_id": 59176904, "question_id": 59176804, "link": "https://stackoverflow.com/questions/59176804/c-weird-memory-bug/59176904#59176904", "title": "C - weird memory bug", "body": "<p><code>sizeof</code> on a pointer returns the size of the <em>pointer</em>, not what it might point to. So the comparison <code>sizeof(item1) != sizeof(item2)</code> makes no sense as it will always be false.</p>\n\n<p>And this <code>sizeof</code> of a pointer problem is the root cause of your problem: You allocate too much memory and always copy the size of a pointer instead of the size of the data (which will lead to <em>undefined behavior</em> if the size of a pointer is different from the actual size of the data).</p>\n\n<p>You <em>have</em> the size of the data (in bytes) with the <code>size</code> argument. You need to use that for your allocation and copying:</p>\n\n<pre><code>temp_tab = malloc(size);\n\nmemcpy(temp_tab, item1, size);\nmemcpy(item1, item2, size);\nmemcpy(item2, temp_tab, size);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9786912, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074370539378602/picture?type=large", "display_name": "Stanis\u0142aw Zarycki", "link": "https://stackoverflow.com/users/9786912/stanis%c5%82aw-zarycki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 59176904, "answer_count": 1, "score": 1, "last_activity_date": 1575466180, "creation_date": 1575464928, "question_id": 59176804, "link": "https://stackoverflow.com/questions/59176804/c-weird-memory-bug", "title": "C - weird memory bug", "body": "<p>So I have this really weird problem. I have a Swap() function to swap 2 variables of any type:</p>\n\n<pre><code>int Swap(void *item1, void *item2, size_t size) {\n    void *temp_tab;\n\n    if (sizeof(item1) != sizeof(item2)) return 2;\n\n    temp_tab = malloc(sizeof(item1) * size);\n\n    if (NULL  == temp_tab) return 1;\n\n    memcpy(temp_tab, item1, sizeof(item1));\n    memcpy(item1, item2, sizeof(item2));\n    memcpy(item2, temp_tab, sizeof(temp_tab));\n\n    free(temp_tab);\n\n    return 0;\n}\n</code></pre>\n\n<p>And I'm using it in my main program like this:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    int a = 9;\n    int b = 5;\n    int c = 2;\n    int d = 6;\n    int result;\n\n    printf(\"A: %d\\nB: %d\\nC: %d\\nD: %d\\n\", a, b, c, d);\n\n    result = Swap(&amp;a, &amp;b, sizeof(int));\n    printf(\"%d\\n\", result);\n\n    printf(\"A: %d\\nB: %d\\nC: %d\\nD: %d\\n\", a, b, c, d);\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is the output:\nA: 5\nB: 9\nC: 5\nD: 6</p>\n\n<p>Somehow my Swap() function is accessing my c variable - I assume it has something to do with memory violation, but I have no clue how to deal with this. Any help would be very appreciated.</p>\n\n<p>PS: result = 0</p>\n"}, {"tags": ["c", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1575464157, "post_id": 59176521, "comment_id": 104574422, "body": "Where is the error message?  The cryptic text can be very helpful in pinpointing the problem cause."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575517785, "post_id": 59176521, "comment_id": 104595677, "body": "regarding: <code>t-&gt;node = &amp;node;</code> this is setting the <code>t-&gt;node</code> with the address of some local variable.  That local variable goes out-of-scope when the function exits.  I.E, it does not exist anymore"}], "answers": [{"comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1575464836, "post_id": 59176584, "comment_id": 104574805, "body": "I think you have not answered actual question.<code>(Do you have to use heap memory for linked lists, and if so why?)</code>."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1575464942, "post_id": 59176584, "comment_id": 104574878, "body": "@kiranBiradar Well, the question was: &quot;Do you have to use heap memory for linked lists, and if so why?&quot; and the response is: &quot;You are using objects with automatic storage out of their scope&quot; and &quot; have to allocate memory by using malloc() for your Node structure&quot;. How does this not answer the question?"}, {"owner": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "edited": false, "score": 0, "creation_date": 1575465003, "post_id": 59176584, "comment_id": 104574924, "body": "Thank you. Does this mean I have to change the <i>design</i> of this type of code? Meaning I can&#39;t have a function like add_node which mutates a struct. I must design it differently so that this memory can be later freed."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "edited": false, "score": 1, "creation_date": 1575465087, "post_id": 59176584, "comment_id": 104574977, "body": "@Matthew You can use the function add_node() as it is, you just have to make sure, that you free each memory block, before the <i>last</i> reference to it vanishes. I.e. you can iterate over the linked list and free each item."}, {"owner": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "edited": false, "score": 0, "creation_date": 1575465103, "post_id": 59176584, "comment_id": 104574987, "body": "@Ctx I&#39;m a little confused by what the scope is here. I can understand what you are saying that the new Node in add_node is scoped to add_node. But why isn&#39;t Thing created in make_thing scoped to make_thing?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "edited": false, "score": 1, "creation_date": 1575465162, "post_id": 59176584, "comment_id": 104575023, "body": "@Matthew Because you return the struct itself by value there, not a reference to it."}, {"owner": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "edited": false, "score": 0, "creation_date": 1575465225, "post_id": 59176584, "comment_id": 104575062, "body": "Ok, I think I understand a little bit better now. Thank you so much for your help."}, {"owner": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "edited": false, "score": 0, "creation_date": 1575474701, "post_id": 59176584, "comment_id": 104580747, "body": "@Ctx if you don&#39;t mind one more question, why is it the <code>sizeof *node</code> and not <code>sizeof Node</code> ?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "edited": false, "score": 1, "creation_date": 1575475107, "post_id": 59176584, "comment_id": 104581022, "body": "@Matthew <code>*node</code> has the type <code>Node</code>, so both values are equivalent. It is a matter of style, which to use. The way I chose has the advantage, that you can change the type in only one place (e.g. <code>Node</code> to <code>Node2</code>), in the latter case, two occurrences have to be replaced. But you are free to use the other version, of course"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 7, "last_activity_date": 1575464229, "creation_date": 1575464229, "answer_id": 59176584, "question_id": 59176521, "link": "https://stackoverflow.com/questions/59176521/segmentation-fault-accessing-struct-member/59176584#59176584", "title": "Segmentation fault accessing struct member", "body": "<p>You are using objects with automatic storage out of their scope:</p>\n\n<pre><code>Node node = {\n  .name = name,\n  .next = t-&gt;node\n};\n\nt-&gt;node = &amp;node;\n\nreturn t;\n</code></pre>\n\n<p>Here you leak the pointer <code>&amp;node</code>, which is invalid (out of scope) after the return, to the caller and use it here:</p>\n\n<pre><code> printf(\"First %s\\n\", t.node-&gt;name);\n</code></pre>\n\n<p>You have to allocate memory by using <code>malloc()</code> for your <code>Node</code> structure.</p>\n\n<p>Example:</p>\n\n<pre><code> Node *node = malloc(sizeof *node);\n node-&gt;name = name;\n node-&gt;next = t-&gt;node;\n t-&gt;node = node;\n\n return t;\n</code></pre>\n\n<p>You have to care about freeing the memory when it is no longer used to prevent memory leaks.</p>\n"}], "owner": {"reputation": 9633, "user_id": 550587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a21bbc68fb81529f7c3c9d99e92a280?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/550587/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 59176584, "answer_count": 1, "score": 1, "last_activity_date": 1575464854, "creation_date": 1575464004, "question_id": 59176521, "link": "https://stackoverflow.com/questions/59176521/segmentation-fault-accessing-struct-member", "title": "Segmentation fault accessing struct member", "body": "<p>I've been learning C and am having problems using linked lists. When looping over a pointer to a linked list I run into segmentation faults and I'm not sure why.</p>\n\n<p>Looking at similar questions the suggestion is to allocate the memory, but I find this answer confusing. Do you have to use heap memory for linked lists, and if so why?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct Node {\n  char *name;\n  struct Node *next;\n} Node;\n\ntypedef struct Thing {\n  Node *node;\n} Thing;\n\nThing make_thing()\n{\n  Thing t = {\n    .node = NULL\n  };\n  return t;\n}\n\nThing * add_node(Thing *t, char *name)\n{\n  Node node = {\n    .name = name,\n    .next = t-&gt;node\n  };\n\n  t-&gt;node = &amp;node;\n\n  return t;\n}\n\nvoid print_nodes(Thing *t)\n{\n  Node *n = t-&gt;node;\n\n  while(n != NULL) {\n    printf(\"Node: %s\\n\", n-&gt;name);\n    n = n-&gt;next;\n  }\n}\n\nint main()\n{\n  printf(\"Start\\n\");\n\n  Thing t = make_thing();\n  add_node(&amp;t, \"one\");\n\n  printf(\"First %s\\n\", t.node-&gt;name);\n\n  print_nodes(&amp;t);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1575463947, "post_id": 59176483, "comment_id": 104574300, "body": "<code>char test1[7] = &quot;BlaBlaB&quot;</code> there is no <code>&#39;\\0&#39;</code> character. In <code>char test2[8] = {&#39;B&#39;,&#39;l&#39;,&#39;a&#39;,&#39;B&#39;,&#39;l&#39;,&#39;a&#39;,&#39;B&#39;,&#39;l&#39;}</code> there is no <code>&#39;\\0</code> character either."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575464131, "post_id": 59176483, "comment_id": 104574411, "body": "For your <code>test2</code> array you explicitly fill all elements, but you don&#39;t set any of them to the null-terminator <code>&#39;\\0&#39;</code>. Now think about how your comparison <code>strg[length] != &#39;\\0&#39;</code> would work if there isn&#39;t a <code>&#39;\\0&#39;</code> in the array?"}, {"owner": {"reputation": 3, "user_id": 12479829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb7c1de4e523d641bb02a2d07eea372?s=128&d=identicon&r=PG&f=1", "display_name": "InterFelix", "link": "https://stackoverflow.com/users/12479829/interfelix"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575464680, "post_id": 59176483, "comment_id": 104574719, "body": "@KamilCuk okay, but why does this work with <code>test3[9] = &quot;BlaBlaBla&quot;</code> and <code>test4[6] = &quot;BlaBla&quot;</code> then?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575464764, "post_id": 59176483, "comment_id": 104574763, "body": "Anything can happen. You are reading outside of allowed memory, outside of an array, your program behavior is undefined. It may work. It may not work. <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">Undefined behavior</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1575464800, "post_id": 59176483, "comment_id": 104574785, "body": "This is not a &quot;weird bug&quot;, as neither <code>char test1[7] = &quot;BlaBlaB&quot;</code> nor <code>char test2[8] = {&#39;B&#39;,&#39;l&#39;,&#39;a&#39;,&#39;B&#39;,&#39;l&#39;,&#39;a&#39;,&#39;B&#39;,&#39;l&#39;}</code> will have a <code>&#39;\\0&#39;</code> terminator because you defined them so that they don&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12479829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb7c1de4e523d641bb02a2d07eea372?s=128&d=identicon&r=PG&f=1", "display_name": "InterFelix", "link": "https://stackoverflow.com/users/12479829/interfelix"}, "edited": false, "score": 0, "creation_date": 1575464585, "post_id": 59176508, "comment_id": 104574670, "body": "Yes, I would also rather use non-fixed arrays, but one of the test-cases I need to solve is <code>char test2[7] = &quot;BlaBlaB&quot;</code> or something similar, the actual string doesn&#39;t matter here. How can I implement proper treatment of this test case? How would I go about detecting the end of this array to be able to return it&#39;s correct size?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 3, "user_id": 12479829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb7c1de4e523d641bb02a2d07eea372?s=128&d=identicon&r=PG&f=1", "display_name": "InterFelix", "link": "https://stackoverflow.com/users/12479829/interfelix"}, "edited": false, "score": 0, "creation_date": 1575464752, "post_id": 59176508, "comment_id": 104574753, "body": "@InterFelix In C the only way to get the length of <code>test1</code> (or <code>test2</code> as you write in your comment) is to use the <code>sizeof</code> operator. But this get the size of the <i>whole</i> array, not the length of a null-terminated string (and it won&#39;t work on pointers). If you need to use a function to get the lengths of the strings you can&#39;t use arrays that doesn&#39;t contain the terminator. If you&#39;re required by your teacher to handle that specific case, then you have to tell him or her that it&#39;s impossible."}, {"owner": {"reputation": 3, "user_id": 12479829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb7c1de4e523d641bb02a2d07eea372?s=128&d=identicon&r=PG&f=1", "display_name": "InterFelix", "link": "https://stackoverflow.com/users/12479829/interfelix"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575464962, "post_id": 59176508, "comment_id": 104574887, "body": "@Someprogrammerdude but I still don&#39;t understand why it does work with the cases <code>test3[6] = &quot;BlaBla&quot;</code>, <code>test4[9] = &quot;BlaBlaBla&quot;</code> and everything below and above..."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 3, "user_id": 12479829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb7c1de4e523d641bb02a2d07eea372?s=128&d=identicon&r=PG&f=1", "display_name": "InterFelix", "link": "https://stackoverflow.com/users/12479829/interfelix"}, "edited": false, "score": 0, "creation_date": 1575465041, "post_id": 59176508, "comment_id": 104574947, "body": "@InterFelix <i>but I still don&#39;t understand why it does work with the cases <code>test3[6] = &quot;BlaBla&quot;</code>, <code>test4[9] = &quot;BlaBlaBla&quot;</code></i>  It <b>doesn&#39;t</b> &quot;work&quot;.  It just doesn&#39;t produce an observable error.  This time."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 3, "user_id": 12479829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb7c1de4e523d641bb02a2d07eea372?s=128&d=identicon&r=PG&f=1", "display_name": "InterFelix", "link": "https://stackoverflow.com/users/12479829/interfelix"}, "edited": false, "score": 0, "creation_date": 1575465460, "post_id": 59176508, "comment_id": 104575185, "body": "@InterFelix That&#39;s because going out of bounds of an array leads to <i>undefined behavior</i>. Sometimes it might seem to work (you&#39;re <i>lucky</i> that there just happens to be a terminator byte in the right position in memory), sometimes you get unexpected results, and sometimes you could summon <a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">nasal demons</a>."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 2, "last_activity_date": 1575466481, "last_edit_date": 1575466481, "creation_date": 1575463965, "answer_id": 59176508, "question_id": 59176483, "link": "https://stackoverflow.com/questions/59176483/weird-bug-with-specific-cases-when-implementing-a-getlength-function-for-char-ar/59176508#59176508", "title": "Weird bug with specific cases when implementing a getLength-Function for char-arrays", "body": "<p><code>getLength</code> is fine although I'd use a <code>size_t</code> type for the length if I were you.</p>\n\n<p><code>char test1[7] = \"BlaBlaB\"</code> doesn't provide room for the <code>NUL</code> terminator, you need char <code>test1[8]</code> or, better still, leave the number out and let the compiler work it out for you. The same can be said for <code>test2</code>, although in that case there's no implicit <code>NUL</code> terminator in the r-value so you'd need to add that in yourself if you become wedded to that extremely tedious syntax for a <code>char[]</code> type declaration.</p>\n\n<p><code>test3</code> is fine as you've provided ample room for <code>NUL</code>.</p>\n\n<p>The behavior on running past the end of the arrays <code>test1</code> and <code>test2</code> is <em>undefined</em>. That explains the weirdness. Sometimes the program behaviour could be consistent with your expectations. On other occasions though the compiler might eat your cat.</p>\n"}], "owner": {"reputation": 3, "user_id": 12479829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb7c1de4e523d641bb02a2d07eea372?s=128&d=identicon&r=PG&f=1", "display_name": "InterFelix", "link": "https://stackoverflow.com/users/12479829/interfelix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 59176508, "answer_count": 1, "score": 0, "last_activity_date": 1575472908, "creation_date": 1575463852, "last_edit_date": 1575472908, "question_id": 59176483, "link": "https://stackoverflow.com/questions/59176483/weird-bug-with-specific-cases-when-implementing-a-getlength-function-for-char-ar", "title": "Weird bug with specific cases when implementing a getLength-Function for char-arrays", "body": "<p>I have to implement a function that determines the length of a string without using library functions. \nMy function looks like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int getLength(char strg[]) {\n    int length = 0;\n\n    while(strg[length] != '\\0') {\n        length++;\n    }\n\n    return length;\n}\n</code></pre>\n\n<p>With the inputs</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char test1[7] = \"BlaBlaB\"\n</code></pre>\n\n<p>as well as </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char test2[8] = {'B','l','a','B','l','a','B','l'}\n</code></pre>\n\n<p>the function returns the values 11 and 12, which are of course wrong. </p>\n\n<p>However, with </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char test1[8] = \"BlaBlaB\"\n</code></pre>\n\n<p>or </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char test2[9] = {'B','l','a','B','l','a','B','l'}\n</code></pre>\n\n<p>the function returns the correct results.</p>\n\n<p>So to sum it up, only for the cases where the array is assigned as many elements as it is defined to be allowed to hold, and only when the number of elements is 7 or 8, this bug occurs. Also, it doesn't matter if I assign the value with String notation (<code>\"ab...\"</code>) or if I assign it in array notation (<code>{'a','b','.','.','.'}</code>). </p>\n\n<p>Does anyone have an explanation for this weird behaviour?</p>\n"}, {"tags": ["c", "windows", "serial-port"], "comments": [{"owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "edited": false, "score": 0, "creation_date": 1575463983, "post_id": 59176419, "comment_id": 104574322, "body": "What is your question? If the program is not working as expected, please describe what you expected to happen, what actually happened, and what you have tried to fix it (if anything). If you don&#39;t know how to do something, please describe what that something is."}, {"owner": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1575466017, "post_id": 59176419, "comment_id": 104575501, "body": "I must downvote, no proper error checking, also why dNoOFBytestoWrite is not set to one ????"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575466096, "post_id": 59176419, "comment_id": 104575541, "body": "Does it send 0xff across the serial port?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1575466109, "post_id": 59176419, "comment_id": 104575549, "body": "@user2120666 it is, it&#39;s set to <code>sizeof(lpBuffer)</code>"}, {"owner": {"reputation": 19, "user_id": 12283064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b547f723e47814c0722da9d51f1eeeb0?s=128&d=identicon&r=PG&f=1", "display_name": "dilinex", "link": "https://stackoverflow.com/users/12283064/dilinex"}, "edited": false, "score": 0, "creation_date": 1575468281, "post_id": 59176419, "comment_id": 104576851, "body": "Apologies I have included the full code and I have explained my problem in further detail"}, {"owner": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1575472293, "post_id": 59176419, "comment_id": 104579354, "body": "Maybe after edit you set this to the size of the buffer, but still I dont see proper error checking"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12283064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b547f723e47814c0722da9d51f1eeeb0?s=128&d=identicon&r=PG&f=1", "display_name": "dilinex", "link": "https://stackoverflow.com/users/12283064/dilinex"}, "edited": false, "score": 0, "creation_date": 1575468709, "post_id": 59176833, "comment_id": 104577149, "body": "Apologies I have included the full code and I have explained my problem in further detail"}], "tags": [], "owner": {"reputation": 152, "user_id": 12085479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d3eb7e4280007695d8639f2106dd36?s=128&d=identicon&r=PG", "display_name": "JerryTheGreek", "link": "https://stackoverflow.com/users/12085479/jerrythegreek"}, "is_accepted": false, "score": 2, "last_activity_date": 1575476955, "last_edit_date": 1575476955, "creation_date": 1575465032, "answer_id": 59176833, "question_id": 59176419, "link": "https://stackoverflow.com/questions/59176419/how-do-i-send-0xff-byte-across-a-serial-port-in-c/59176833#59176833", "title": "How do I send 0xff byte across a serial port in C?", "body": "<p>I'm not sure what you are doing before you use this code but I would suggest using Com0com, PortMon or Wire Shark to monitor your Com ports and your ethernet. It'll make your life easier. </p>\n\n<p>Also in your question you should tell us what the result of your code is so we can get a better idea of what's going on.</p>\n\n<p>The link <a href=\"https://www.xanthium.in/Serial-Port-Programming-using-Win32-API\" rel=\"nofollow noreferrer\">https://www.xanthium.in/Serial-Port-Programming-using-Win32-API</a>\nis identical to what you are trying to do.</p>\n\n<p>Are you sure that you are chosing the correct com port? </p>\n\n<p>Your code shows that you are trying to write to your serial port which is connected to another PC that is listening on a serial port. Are you sure that the other PC is listening with the same baud and control lines. (It may be set to some default.) You should first try using Terminal.exe on both PCs or something similar to see if you serial communication is working between both PCs. Next you should create an application that only sends to the com port and listen on the other PC with a terminal emulator to see if it reaches.</p>\n"}], "owner": {"reputation": 19, "user_id": 12283064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b547f723e47814c0722da9d51f1eeeb0?s=128&d=identicon&r=PG&f=1", "display_name": "dilinex", "link": "https://stackoverflow.com/users/12283064/dilinex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575476955, "creation_date": 1575463646, "last_edit_date": 1575468251, "question_id": 59176419, "link": "https://stackoverflow.com/questions/59176419/how-do-i-send-0xff-byte-across-a-serial-port-in-c", "title": "How do I send 0xff byte across a serial port in C?", "body": "<p>So I would like to send a 0xff byte across a serial cable which triggers a computer to send back data via an Ethernet cable . The code is as follows</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;windows.h&gt;\n#include&lt;winsock2.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\n#pragma comment(lib,\"ws2_32.lib\") //Winsock Library\n#define BUFLEN 4097 //Max length of buffer\n#define PORT 9090 //The port on which to listen for incoming data\n\nint main()\n{\n    BOOL Status;\n    HANDLE ComPort;\n    char str[20] = \"\\\\\\\\.\\\\COM\";\n    char input[4] = \"\";\n    printf(\"Enter COM port: \");\n    fgets(input,4,stdin);\n    input[strcspn(input, \"\\n\")] = 0;\n    strncat(str,input, 5);\n    ComPort = CreateFile((const char*)str,                //port name\n                      GENERIC_READ | GENERIC_WRITE, //Read/Write\n                      0,                            // No Sharing\n                      NULL,                         // No Security\n                      OPEN_EXISTING,// Open existing port only\n                      0,            // Non Overlapped I/O\n                      NULL);        // Null for Comm Devices\n\n  if (ComPort == INVALID_HANDLE_VALUE){\n      printf(\"\\nError in opening serial port\");\n      exit(EXIT_FAILURE);}\n  else{\n      printf(\"opening serial port successful\");\n  }\n    DCB dcbSerialParams = { 0 }; // Initializing DCB structure\n    dcbSerialParams.DCBlength = sizeof(dcbSerialParams);\n    Status = GetCommState(ComPort, &amp;dcbSerialParams);\n\n    dcbSerialParams.BaudRate = CBR_115200;  // Setting BaudRate = 115200\n    dcbSerialParams.ByteSize = 8;         // Setting ByteSize = 8\n    dcbSerialParams.StopBits = ONESTOPBIT;// Setting StopBits = 1\n    dcbSerialParams.Parity   = NOPARITY;  // Setting Parity = None\n\n    SetCommState(ComPort, &amp;dcbSerialParams);\n    COMMTIMEOUTS timeouts = { 0 };\n\n    timeouts.ReadIntervalTimeout         = MAXWORD; // in milliseconds\n    timeouts.ReadTotalTimeoutConstant    = 10000; // in milliseconds\n    timeouts.ReadTotalTimeoutMultiplier  = MAXWORD; // in milliseconds\n    timeouts.WriteTotalTimeoutConstant   = 0; // in milliseconds\n    timeouts.WriteTotalTimeoutMultiplier = 0; // in milliseconds\n\n    char lpBuffer[] = {255};\n    DWORD dNoOFBytestoWrite;         // No of bytes to write into the port\n    DWORD dNoOfBytesWritten;     // No of bytes written to the port\n    dNoOFBytestoWrite = sizeof(lpBuffer);\n\n    SOCKET s;\n    struct sockaddr_in server, si_other;\n    int slen , recv_len;\n    char buf[BUFLEN];\n    WSADATA wsa;\n\n    slen = sizeof(si_other) ;\n\n    //Initialise winsock\n    if (WSAStartup(MAKEWORD(2,2),&amp;wsa) != 0)\n    {\n        printf(\"Failed. Error Code : %d\",WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n    //Create a socket\n    if((s = socket(AF_INET , SOCK_DGRAM , 0 )) == INVALID_SOCKET)\n    {\n        printf(\"\\nCould not create socket : %d\" , WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n    //Prepare the sockaddr_in structure\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons( PORT );\n\n    //Bind\n    if( bind(s ,(struct sockaddr *)&amp;server , sizeof(server)) == SOCKET_ERROR)\n    {\n        printf(\"\\nBind failed with error code : %d\" , WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n    printf(\"\\nBinding successful\");\n    DWORD timeout = 0.2 * 1000;//0.2 second ethernet timeout\n    setsockopt(s, SOL_SOCKET, SO_RCVTIMEO, (const char*)&amp;timeout, sizeof timeout);\n\n    FILE * fPtr;\n    char filename[50] = \"fpgadat.bin\";\n    fPtr = fopen((const char*) filename, \"wb\");//Open file in wb (write) mode.\n\n    // fopen() return NULL if last operation was unsuccessful\n    if(fPtr == NULL)\n    {\n        // File not created hence exit\n        printf(\"Unable to create file.\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    while(1)\n    {\n        time_t start = time(NULL);\n        Status = WriteFile(ComPort,        // Handle to the Serial port\n                   lpBuffer,     // Data to be written to the port\n                   dNoOFBytestoWrite,  //No of bytes to write\n                   &amp;dNoOfBytesWritten, //Bytes written\n                   NULL);\n\n    if(Status == 0){\n        printf(\"\\nFailed to write to serial port\");\n        return 0;\n    }else{\n    printf(\"\\nData successfully written to serial port\");\n    }\n        printf(\"\\nWaiting for data from fpga...\");\n        fflush(stdout);\n\n        memset(buf,'\\0', BUFLEN);//clear the buffer by filling null, it might have previously received data\n        //try to receive some data, this is a blocking call\n        if ((recv_len = recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &amp;si_other, &amp;slen)) == SOCKET_ERROR)\n        {\n            printf(\"\\nEthernet connection time-out\");\n            break;\n\n        }\n\n    fwrite(buf , 1 , sizeof(buf) , fPtr );\n    printf(\"%.2f\\n\", (double)(time(NULL) - start));\n    }\n    //close file descriptors\n    fclose(fPtr);\n    CloseHandle(ComPort);\n    closesocket(s);\n    WSACleanup();\n\n}\n</code></pre>\n\n<p>I seem to always get a timeout error on the ethernet. I think it is because I am not sending the necessary 0xff byte to trigger the second computer to send back the data via ethernet. What could the issue be?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 2, "creation_date": 1575463774, "post_id": 59176374, "comment_id": 104574206, "body": "<code>operation = answer;</code> what did you expect this to do?"}, {"owner": {"reputation": 37, "user_id": 10738913, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I107lsiKp5I/AAAAAAAAAAI/AAAAAAAAAVI/MIHxqw2VGio/photo.jpg?sz=128", "display_name": "Lewis Roberts", "link": "https://stackoverflow.com/users/10738913/lewis-roberts"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1575463855, "post_id": 59176374, "comment_id": 104574254, "body": "I was hoping it would run the operation they inputted and then set the output as &quot;answer&quot;"}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1575463943, "post_id": 59176374, "comment_id": 104574298, "body": "Even if that did work (which of course it doesn&#39;t) you would at least have to swap the operands around. You&#39;re assigning an answer to an operation, which doesn&#39;t make logic sense."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575463951, "post_id": 59176374, "comment_id": 104574303, "body": "But you just input a string to <code>operation</code>, so trying to overwrite it with <i>anything</i> makes no sense."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575464000, "post_id": 59176374, "comment_id": 104574334, "body": "@LewisRoberts Logically, shouldn&#39;t that be <code>answer = operation;</code> (in pseudo code). Not that this will work in actual C code."}, {"owner": {"reputation": 37, "user_id": 10738913, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I107lsiKp5I/AAAAAAAAAAI/AAAAAAAAAVI/MIHxqw2VGio/photo.jpg?sz=128", "display_name": "Lewis Roberts", "link": "https://stackoverflow.com/users/10738913/lewis-roberts"}, "edited": false, "score": 0, "creation_date": 1575464034, "post_id": 59176374, "comment_id": 104574354, "body": "Ah yes, fair point even so, how could I then take the operation and use it? How can I take it so it is no longer a string but code?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1575464042, "post_id": 59176374, "comment_id": 104574360, "body": "What do you mean by <code>operation</code>?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575466059, "post_id": 59176374, "comment_id": 104575525, "body": "@LewisRoberts <code>=</code> doesn&#39;t &quot;run things.&quot; It just assigns one thing to another. The left is a string (actually a char array) and right is an int variable. So it tries to assign the value from an int variable to a char array. That is all it does. No magic."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10738913, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I107lsiKp5I/AAAAAAAAAAI/AAAAAAAAAVI/MIHxqw2VGio/photo.jpg?sz=128", "display_name": "Lewis Roberts", "link": "https://stackoverflow.com/users/10738913/lewis-roberts"}, "edited": false, "score": 0, "creation_date": 1575464245, "post_id": 59176560, "comment_id": 104574478, "body": "Ah ok, Thanks anyways I will change it up."}], "tags": [], "owner": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "is_accepted": false, "score": 2, "last_activity_date": 1575464126, "creation_date": 1575464126, "answer_id": 59176560, "question_id": 59176374, "link": "https://stackoverflow.com/questions/59176374/how-can-i-take-a-string-and-then-use-it-as-a-calculation/59176560#59176560", "title": "How can I take a string and then use it as a calculation?", "body": "<p>Short answer: you can't. C is a compiled language, and unlike interpreted languages it can't evaluate dynamically set strings as commands.</p>\n\n<p>What you can do is create some subset of allowed operations and evaluate them manually. Something like that:</p>\n\n<pre><code>if (operation[0] == 'i' and operation[1] == '=' and operation[2] == '=')\n{\n    answer = (i == atoi(&amp;operation[3]));\n} else if (...)\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "is_accepted": false, "score": 4, "last_activity_date": 1575464407, "creation_date": 1575464407, "answer_id": 59176632, "question_id": 59176374, "link": "https://stackoverflow.com/questions/59176374/how-can-i-take-a-string-and-then-use-it-as-a-calculation/59176632#59176632", "title": "How can I take a string and then use it as a calculation?", "body": "<p>If I understand you correctly, you want to allow the user to enter a string which contains a piece of C code. In your example the input string is <code>r = (i == 16)</code>.</p>\n\n<p>Then, you want to execute whatever piece of C code the user entered. If the entered C code contains any variables (<code>r</code> and <code>i</code> in your example) you want to use the values of actual variables in your program.</p>\n\n<p>Because C is a compiled language this is extremely difficult (I would say nearly impossible) to achieve. You would have to write a compiler to compile the entered C code to machine code. And even then, it would be extremely difficult to give the generated machine code access to the context (e.g. variables) in your running program.</p>\n\n<p>No offense intended, but that kind of exercise is well beyond the level you are at. If this comes from an assignment, this is not what your teacher wants you to do.</p>\n\n<p>PS 1: If the input is not an arbitrary piece of C code, but just an expression with a limited set of operators, the task becomes simpler.</p>\n\n<p>PS 2: In more dynamical languages such as Python, this is much much easier to achieve (look, for example, at the Python <code>eval</code> statement). If you have flexibility in the choice of your programming language, using something like Python could be a better approach.</p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 7121964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0689a0b7bf63ed7220f2a10bb7673d9?s=128&d=identicon&r=PG&f=1", "display_name": "Rom&#225;n", "link": "https://stackoverflow.com/users/7121964/rom%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1575465528, "creation_date": 1575465528, "answer_id": 59176997, "question_id": 59176374, "link": "https://stackoverflow.com/questions/59176374/how-can-i-take-a-string-and-then-use-it-as-a-calculation/59176997#59176997", "title": "How can I take a string and then use it as a calculation?", "body": "<p>As other users said, you could be programming previously accepted operation. And then, if you want to execute special commands, you could use the <code>exec</code> family inside created childs with <code>fork</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "is_accepted": false, "score": 0, "last_activity_date": 1575466507, "last_edit_date": 1575466507, "creation_date": 1575465645, "answer_id": 59177038, "question_id": 59176374, "link": "https://stackoverflow.com/questions/59176374/how-can-i-take-a-string-and-then-use-it-as-a-calculation/59177038#59177038", "title": "How can I take a string and then use it as a calculation?", "body": "<p>With this expression <code>operation = answer;</code> you are trying to assign an (uninitialised)  <code>int</code> value to a pointer to an <code>char</code> array.</p>\n\n<p>While this expression is completely invalid on its own, note that you always should initialize variables before using them in any way. Otherwise they have just a random \"garbarge\" value in it, which you use later in the program and can cause much more errors.</p>\n\n<p>That is what causing the error message you are pointing to.</p>\n\n<p>Beside this, your program has much more issues to concern about. </p>\n\n<p>What you want to do actually with this program?</p>\n\n<p>What is the purpose of <code>answer</code>? Why <code>answer</code> doesn\u00b4t get a value assignd to?</p>\n\n<p>And why do you want to assign no certain value of <code>answer</code> to the array?</p>\n\n<p>Furthermore,</p>\n\n<pre><code>    if (answer == 1)\n        printf(\"The operation you entered was true.\");\n    else\n        printf(\"The operation you entered was false.\");\n</code></pre>\n\n<p>is also crazy, because <code>answer</code> doesn\u00b4t get a value before, so you can\u00b4t make a condition with it.</p>\n"}], "owner": {"reputation": 37, "user_id": 10738913, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I107lsiKp5I/AAAAAAAAAAI/AAAAAAAAAVI/MIHxqw2VGio/photo.jpg?sz=128", "display_name": "Lewis Roberts", "link": "https://stackoverflow.com/users/10738913/lewis-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1575466507, "creation_date": 1575463509, "last_edit_date": 1575463633, "question_id": 59176374, "link": "https://stackoverflow.com/questions/59176374/how-can-i-take-a-string-and-then-use-it-as-a-calculation", "title": "How can I take a string and then use it as a calculation?", "body": "<p>Lets say they input <code>r = (i == 16)</code>, how can I take this and then run that for the output?</p>\n\n<p>This is the error I am getting.</p>\n\n<p><code>G:\\Code\\Tutorial 3\\main.c|104|error: assignment to expression with array type</code> </p>\n\n<hr>\n\n<p>Code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main()\n{\n    int answer;\n    char operation[20];\n    int i = 16;\n    int j = 32;\n    int k = 8;\n    bool r;\n    printf(\"Input an operation:\\n\");\n    fgets(operation, sizeof(operation), stdin);\n    operation = answer;\n    if (answer == 1)\n        printf(\"The operation you entered was true.\");\n    else\n        printf(\"The operation you entered was false.\");\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "assembly", "x86"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1575463421, "post_id": 59176320, "comment_id": 104574012, "body": "What operating system are you programming for?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1575463537, "post_id": 59176320, "comment_id": 104574073, "body": "Note that the calling convention is most likely wrong, too.  But I can&#39;t say for sure without knowing what operating system you are programming for."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1575465542, "post_id": 59176320, "comment_id": 104575234, "body": "@fuz: I don&#39;t think GCC has been ported to any x86-64 OS where the standard calling convention is stack args.  AFAIK the only 3 supported conventions are x86-64 SysV and Windows x64 fastcall and vectorcall (same but with <code>__m128</code> passed in XMM regs instead of by reference)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575466018, "post_id": 59176320, "comment_id": 104575503, "body": "@PeterCordes I really don&#39;t like making assumptions as doing so came back to bite me again and again.  It is OP&#39;s duty to provide sufficient information and until he provides enough details to give an unambiguous answer, I&#39;m not going to answer the question."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1575466206, "post_id": 59176320, "comment_id": 104575611, "body": "@fuz: sure, me neither, just saying that we can basically rule out the asm being correct :P"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1575466239, "post_id": 59176320, "comment_id": 104575625, "body": "@PeterCordes Indeed.  Isn&#39;t that exactly what I wrote in my original comment?  Btw, Go uses a stack-only calling convention on amd64, so there&#39;s that."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1575466470, "post_id": 59176320, "comment_id": 104575761, "body": "@fuz: you said &quot;most likely&quot; wrong.  I&#39;m saying &quot;certainly wrong&quot; or at least was trying to leave less room for doubt than your phrasing without making a 100% absolute claim (because yeah, being bitten by over-confident assumptions has happened to me, too).  But in this case I have a reason for believing it&#39;s impossible.  Good point about Go, though; this may be intended to be called from Go.  Also, I thought the leading underscore in 64-bit mode GCC is looking for would imply MacOS (not Linux or Windows), but this is using <code>-felf64</code> not <code>macho64</code>, so it might be something else."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575467125, "post_id": 59176320, "comment_id": 104576160, "body": "@PeterCordes It&#39;s probably macOS and OP has cobbled his example together from multiple tutorials for i386 (hence the calling convention) and amd64 Linux (hence the nasm invocation and lack of leading underscore).  However, without input from OP, I cannot say."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1575467494, "post_id": 59176320, "comment_id": 104576374, "body": "@fuz: Agreed, but I was thinking that MacOS GCC (which is actually clang) would complain if you fed it an ELF object file, before it got to the point of looking for symbols in it.  Maybe not, or maybe the build commands were copy-pasted from a tutorial instead of being the ones the OP actually ran, or IDK what."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575468328, "post_id": 59176320, "comment_id": 104576885, "body": "Apart from calling convention, in MASM I would make the function availble with <code>PUBLIC add_imm</code>."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575471067, "post_id": 59176320, "comment_id": 104578608, "body": "@PeterCordes gcc doesn&#39;t check the object file, the linker is what does that.  And if it&#39;s the GNU linker (which is weird for macOS) it uses the libbfd and thus doesn&#39;t really care about object file formats as long as the architectures match."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1575471131, "post_id": 59176320, "comment_id": 104578650, "body": "@WeatherVane: This is NASM; <code>GLOBAL add_imm</code> does that."}, {"owner": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "edited": false, "score": 0, "creation_date": 1575492307, "post_id": 59176320, "comment_id": 104589231, "body": "Yes, I am using macOS and the code has been copied from various tutorials. Thanks for your clarification in the comments. These are (I am using) the calling conventions I learned in university."}, {"owner": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "edited": false, "score": 0, "creation_date": 1575493115, "post_id": 59176320, "comment_id": 104589557, "body": "In addition gcc for macOs is indeed clang"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1575544702, "post_id": 59176320, "comment_id": 104606335, "body": "@Niclas Cool!  Now I can write an answer.  Make sure to always specify this in your question!  Would have saved me a lot of time waiting for a response from you."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1575560167, "post_id": 59176320, "comment_id": 104614937, "body": "MacOS <i>is</i> a Unix.  Moreso than Linux, you could argue, since it traces its heritage back to FreeBSD.  Linux is a re-implementation of Unix and is POSIX-compliant, but some people don&#39;t like to call it Unix.  Or did you mean a Unix like x86-64 Solaris or original FreeBSD, OpenBSD or NetBSD?"}, {"owner": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575633892, "post_id": 59176320, "comment_id": 104641889, "body": "@PeterCordes You are right. Thanks to all for helping."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "edited": false, "score": 0, "creation_date": 1575634128, "post_id": 59178591, "comment_id": 104642005, "body": "You are right about the rbp, rsp thing. Thank you! Unfortunately, the first part of your answer is not correct, since I made the mistake and used -f elf64 in macOS"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "edited": false, "score": 0, "creation_date": 1575634385, "post_id": 59178591, "comment_id": 104642142, "body": "@Niclas Which part is incorrect? I just tried this on macOS, just changing <code>-f elf64</code> to <code>-f macho64</code> and it works just fine. And if I use your original code, it doesn&#39;t work with <code>-f macho64</code> because it is missing the underscore and using an incorrect calling convention, just like I stated in my answer. Anyway, I have some macOS x86-64 assembly experiments here: <a href=\"https://github.com/arkku/asm-x64-macos/\" rel=\"nofollow noreferrer\">github.com/arkku/asm-x64-macos</a>"}, {"owner": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "edited": false, "score": 0, "creation_date": 1575639980, "post_id": 59178591, "comment_id": 104644738, "body": "ah ok, I have misunderstood you. I am sorry, you are 100% correct!"}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": false, "score": 1, "last_activity_date": 1575471362, "last_edit_date": 1575471362, "creation_date": 1575470533, "answer_id": 59178591, "question_id": 59176320, "link": "https://stackoverflow.com/questions/59176320/how-to-call-assembly-functions-from-c-on-x86-architecture/59178591#59178591", "title": "How to call Assembly Functions from C on x86 architecture?", "body": "<p>As hinted by the error message, the compiler expects to find the function with a leading underscore in the name, i.e., you need to also export <code>_add_imm</code> from your NASM code. I find it convenient to use a macro for this.</p>\n\n<p>The name will solve the compiler error, but your assembly code is also wrong, e.g., you are overwriting <code>rsp</code> with <code>rbp</code> when it should be the opposite, i.e., <code>mov rbp, rsp</code>. (Intel and AT&amp;T syntax have the order of operands reversed, maybe this is the source of confusion.)</p>\n\n<p>It is also extremely likely that your calling convention is wrong for C on an 64-bit x86 platform, i.e., the arguments should be in registers and not on the stack.</p>\n\n<pre><code>section .text\n\n%macro export_function 1\nglobal %1, _%1\n_%1:\n%endmacro\n\nexport_function add_imm\nadd_imm:\n    push rbp\n    mov rbp, rsp\n    mov rax, rdi  ; (calling convention assumed, check yours)\n    add rax, rsi\n    mov rsp, rbp\n    pop rbp\n    ret\n</code></pre>\n\n<p>(The <code>rsp</code> and <code>rbp</code> juggling is obviously not needed for this function to work, but corrected here since they were included in the original.)</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "edited": false, "score": 0, "creation_date": 1575633686, "post_id": 59198324, "comment_id": 104641789, "body": "This an awesome and knowledge-expanding answer. Thank you very much!"}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 1, "last_activity_date": 1575559576, "creation_date": 1575559576, "answer_id": 59198324, "question_id": 59176320, "link": "https://stackoverflow.com/questions/59176320/how-to-call-assembly-functions-from-c-on-x86-architecture/59198324#59198324", "title": "How to call Assembly Functions from C on x86 architecture?", "body": "<p>The key thing you need to do to write a function in assembly is to follow the ABI (application binary interface) of the platform you are programming for.  This document specifies:</p>\n\n<ul>\n<li>what the width of types in the C language (<code>int</code>, <code>long</code>, <code>float</code>, ...) and standard library are</li>\n<li>how structures are laid out in memory</li>\n<li>how functions are called (function call sequence), specifically\n\n<ul>\n<li>how arguments are passed to functions</li>\n<li>what registers need to be preserved by functions</li>\n<li>how the return value is returned to the caller</li>\n<li>how to actually call the function</li>\n</ul></li>\n<li>how C identifiers are translated (decorated/mangled) into symbols</li>\n<li>how to access static and thread-local variables and functions</li>\n<li>what memory model is used</li>\n</ul>\n\n<p>The ABI is different for each operating system and architecture and you should not make assumptions about it.  Most importantly, code examples for one operating system and architecture will most likely not work on another, even if they have the same operating system or architecture.  x86_64-linux is a different platform than x86_64-osx!</p>\n\n<p>For x86_64-osx, the relevant ABI document is the <a href=\"https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/LowLevelABI\" rel=\"nofollow noreferrer\">OS X ABI Function Call Guide</a> which refers to the <a href=\"https://www.uclibc.org/docs/psABI-x86_64.pdf\" rel=\"nofollow noreferrer\">x86_64 SysV ABI</a>.  The main difference is in how identifiers are decorated (with a leading underscore) and some details about shared objects which don't necessarily need to concern you right now.</p>\n\n<p>For particularly pesky details, it is usually a good idea to write some C code and then ask the compiler to generate assembly code with the <code>-S</code> option.  To do the same thing in assembly, just do whatever the compiler does.</p>\n\n<p>Having gotten that out of the way, here is what you need to do:</p>\n\n<ul>\n<li>decide on a name for your function; let's call it <code>foo</code></li>\n<li><p>declare the function as external with an appropriate type signature in the C source or header files you want to use it from</p>\n\n<pre><code>extern int foo(int, int);\n</code></pre></li>\n<li><p>referring to the ABI document, find the symbol corresponding to your function's identifier; for x86_64-osx, you need to prepend an underscore to the identifier to get the symbol (i.e. <code>_foo</code>)</p></li>\n<li><p>program your function in an assembly file using your favourite assembler.  Make sure to generate an object file of the correct type.  For x86_64-osx, the correct type is <code>macho64</code>, so you should assemble like this:</p>\n\n<pre><code>nasm -f macho64 foo.asm\n</code></pre></li>\n<li><p>make sure to obey the calling convention.  Refer to <a href=\"https://wiki.osdev.org/System_V_ABI\" rel=\"nofollow noreferrer\">this article</a> for a short introduction or read the ABI document linked above.  You should really read it.</p></li>\n<li>mark the symbol as global using a <code>global</code> directive</li>\n<li>finally, include the object file generated by <code>nasm</code> into the link</li>\n</ul>\n\n<p>Here's a summary of what you did wrong:</p>\n\n<ul>\n<li>you didn't use the correct symbol name as you forgot to decorate it with a leading underscore</li>\n<li>you didn't follow the calling convention correctly</li>\n<li>you generated an object file of incorrect type (<code>elf64</code> instead of <code>macho64</code>)</li>\n<li>you named your section incorrectly (refer to the nasm documention for what section names it accepts for macho64)</li>\n<li>you made some programming mistakes others pointed out that prevented your function from working anyway</li>\n</ul>\n"}], "owner": {"reputation": 117, "user_id": 12479791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80584bbcf8de52b43e1be90e2ff9e6?s=128&d=identicon&r=PG&f=1", "display_name": "Niclas", "link": "https://stackoverflow.com/users/12479791/niclas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 59198324, "answer_count": 2, "score": 1, "last_activity_date": 1591889178, "creation_date": 1575463372, "last_edit_date": 1591889178, "question_id": 59176320, "link": "https://stackoverflow.com/questions/59176320/how-to-call-assembly-functions-from-c-on-x86-architecture", "title": "How to call Assembly Functions from C on x86 architecture?", "body": "<p>Unfortunately, the internet is lacking a guide on how to implement the x86 Assembly into C programs. Also, noobies are wondering about the different syntaxes (IT&amp;T and Intel). </p>\n\n<p>Personally, I am not sure how to exactly do this, handling the different compilers/assemblers like NASM or GCC.</p>\n\n<p>I have created the following, highly sophisticated program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nextern int add_imm(int,int);\n\nint main(int argv, char** argc){\n  int a = 2;\n  int b = 3;\n  int c = add_imm(a,b);\n  printf(\"%d\", c);\n}\n</code></pre>\n\n<p>Together with this other highly sophisticated program:</p>\n\n<pre><code>SECTION .TEXT\n      GLOBAL add_imm\n\nadd_imm:\n    push rbp\n    mov rsp, rbp\n    mov rax, [rbp+24]\n    mov rbx, [rbp+16]\n    add rax, rbx\n    pop rbp\n    ret\n</code></pre>\n\n<p>Compiling that with: </p>\n\n<pre><code>nasm -f elf64 add_imm.S\ngcc main.c add_imm.o -o tes\n</code></pre>\n\n<p>Throws a compiler error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_add_imm\", referenced from:\n      _main in main-019ea6.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>So I thought it would be worthwhile if someone could create an explanation of how to really embed assembly language into C. \nWhat is important to consider? What are the general calling conventions?</p>\n\n<p>Note: I am using macOS, but I hope it will work on Linux as well.</p>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 6, "creation_date": 1575463438, "post_id": 59176317, "comment_id": 104574022, "body": "<code>pageID != PAGE_A || pageID != PAGE_B</code> is always true, I suggest <code>&amp;&amp;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1575463627, "creation_date": 1575463627, "answer_id": 59176408, "question_id": 59176317, "link": "https://stackoverflow.com/questions/59176317/or-operation-in-if-operation/59176408#59176408", "title": "OR Operation in if operation", "body": "<p>The logical OR operator <code>||</code> evaluates to true if <em>either</em> operand is true.  </p>\n\n<p>If <code>pageID</code> is 0, the first condition is false but the second is true so the whole expression evaluates to true.  Similarly, if <code>pageID</code> is 1, the first condition is true but the second is false so the whole expression evaluates to true.  If <code>pageID</code> is any other value, but conditions are true so the whole expression is true.</p>\n\n<p>What you want instead is the logical AND operator <code>&amp;&amp;</code>, which is only true if <em>both</em> operands evaluate to true.</p>\n\n<pre><code>if (pageID != PAGE_A &amp;&amp; pageID != PAGE_B) {\n</code></pre>\n\n<p>Reading this out, the condition will be true if both <code>pageID</code> is not 0 and <code>pageID</code> is not 1.</p>\n"}], "owner": {"reputation": 73, "user_id": 11611558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119a1ab92038eaebb8c8eedb4170ad52?s=128&d=identicon&r=PG&f=1", "display_name": "guenthernagel", "link": "https://stackoverflow.com/users/11611558/guenthernagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575463641, "creation_date": 1575463367, "last_edit_date": 1575463641, "question_id": 59176317, "link": "https://stackoverflow.com/questions/59176317/or-operation-in-if-operation", "title": "OR Operation in if operation", "body": "<p>I'm new in Native C Language but I didnt see an error.</p>\n\n<p>Im trying to use a if operation in that Case:</p>\n\n<pre><code>#define PAGE_A 0 \n#define PAGE_B 1\n\nint pageID = 0;\n\n\nif (pageID != PAGE_A || pageID != PAGE_B) {\n\n    //Do something\n}\n</code></pre>\n\n<p>But it dont work. If page ID = 0 or 1 it goes to \"do something\". If I just write:</p>\n\n<pre><code>if (pageID != PAGE_A) {\n\n    //Do something\n}\n</code></pre>\n\n<p>It works. If pageID = 1-x its goes to \"do something\" otherwise it dont... </p>\n"}, {"tags": ["c", "printf", "ansi-escape"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1575463256, "post_id": 59176225, "comment_id": 104573909, "body": "let me know my edit is proper one."}, {"owner": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 1, "creation_date": 1575463309, "post_id": 59176225, "comment_id": 104573948, "body": "Do you have a real case or just curious? Your example does not make much sence because it could be easily done by modifying order of <code>printf</code>s, and escape codes are generally neither portable nor easy to use."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1575463348, "post_id": 59176225, "comment_id": 104573971, "body": "The most portable way would be to use <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow noreferrer\">ncurses</a>."}, {"owner": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575463427, "post_id": 59176225, "comment_id": 104574018, "body": "This is just a simple example. I want to do something more complex but it should do the same."}, {"owner": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575463842, "post_id": 59176225, "comment_id": 104574245, "body": "It must work using printf as this should also work while printing text via UART from a micro controller. I can&#39;t use ncurses there."}, {"owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "edited": false, "score": 1, "creation_date": 1575465862, "post_id": 59176225, "comment_id": 104575412, "body": "I had hoped that ANSI insert line (&quot;\\033[3L&quot;) would do the trick, but I tried it and it doesn&#39;t work (at least not on macOS using the Terminal app)"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1575547327, "post_id": 59176225, "comment_id": 104607693, "body": "In light of additional comments, it seems that the real question is entirely different from this. I suggest asking another question with the actual problem, since multithreaded access to a single terminal is definitely not the question you asked here."}, {"owner": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1575549398, "post_id": 59176225, "comment_id": 104608829, "body": "The multi threading is no issue, everything is protected by semaphores. I just have to figure out how many lines I have to move around. I think @Arkku has solved it, I will mark it as solution when I solved my last few problems. Thanks a lot for your help."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575537412, "post_id": 59179362, "comment_id": 104602365, "body": "It works in this example, however I don&#39;t know how many lines will be inserted. I want to print some output at the end, so I have to get the cursor up after printing these special lines. I don&#39;t want to overwrite other lines, it would be just a nice feature. Thanks for your quick answer."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575544848, "post_id": 59179362, "comment_id": 104606411, "body": "@Icebear You don&#39;t have to know how many lines will be inserted: you can use this same technique to insert any number of lines at a time in any position as many times as you like. For example, to insert one line at a time, print one newline, move up to the position, insert the line, move back down, repeat as many times as you want."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575545100, "post_id": 59179362, "comment_id": 104606533, "body": "@Icebear Alternatively, instead of dynamically printing the empty lines, obtain the height of the terminal and fill one screen in the beginning, then move up to the top and operate within that space."}, {"owner": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575546697, "post_id": 59179362, "comment_id": 104607379, "body": "It is part of an embedded project. I want to print some lines generated by different threads independently from each other. Thread A has no way to find out how much Thread B has printed. I thought there might be something like an insertion mode."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575546908, "post_id": 59179362, "comment_id": 104607497, "body": "@Icebear You don&#39;t need to find out how much another thread has printed, just how many positions up you want to move from the current position. Move up by that much, insert, move down by the same amount. Or if you are thinking that each thread has an independent cursor where they can just insert without moving up, that was never going to work since the terminal is a shared resource\u2026 (Not to mention it would be an entirely different question, e.g., &quot;how to maintain independent cursor positions for multiple threads on the same terminal&quot;.)"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575547062, "post_id": 59179362, "comment_id": 104607569, "body": "@Icebear Meanwhile &quot;thread A has no way to find out how much thread B has printed&quot; is not true: you should mutex access to the terminal anyways, so if only one thread holds the terminal at a given time, they can also hold a shared variable that tracks the number of lines or cursor position or whatever."}, {"owner": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "edited": false, "score": 0, "creation_date": 1575549850, "post_id": 59179362, "comment_id": 104609057, "body": "The problem, I posted here is now solved. I have my embedded problem nearly solved. I use a RTOS that protects printf automatically."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": true, "score": 1, "last_activity_date": 1575545376, "last_edit_date": 1575545376, "creation_date": 1575473159, "answer_id": 59179362, "question_id": 59176225, "link": "https://stackoverflow.com/questions/59176225/c-printf-insert-line-above-printed-text/59179362#59179362", "title": "C printf: insert line above printed text", "body": "<p>Obviously this depends on what your terminal supports, but in case it supports the <code>\\033[&lt;count&gt;L</code> insertion, it should work as follows:</p>\n\n<pre><code>int main() {\n    const int up_lines = 3;\n    const int new_lines = 6;\n\n    for (int i = 0; i &lt; 5; ++i) {\n        printf(\"%d\\n\", i);\n    }\n\n    for (int i = 0; i &lt; new_lines; ++i) {\n        // make space for existing lines to move down\n        putchar('\\n');\n    }\n    // move up and insert the new (empty lines)\n    printf(\"\\033[%dA\\033[%dL\", up_lines + new_lines, new_lines);\n\n    for (int i = 0; i &lt; new_lines; ++i) {\n        printf(\"A%d\\n\", i);\n    }\n\n    // move back down below original lines\n    printf(\"\\033[%dB\", up_lines);\n\n    return 0;\n}\n</code></pre>\n\n<p>Basically you first make room for the original lines to move down by outputting a number of newlines equal or greater to the number of lines you mean to insert (this step becomes relevant when the terminal position is so near the bottom that the old lines would move off screen). Then you move up to the insertion position (which has now moved by the number of newlines you printed) and insert the number of lines with <code>\\033[&lt;count&gt;L</code>.</p>\n\n<p>edit: Obviously you can repeat this as many times as you like, i.e., you don't have to know in advance how many lines you will insert and where, as long as you move back down to the last line after every batch of inserts. For example, you could insert one line at a time by always printing just one newline at the bottom, then moving up to the insertion position (remembering to account for the one line you just added in between), inserting the line there, and moving back down to the bottom.</p>\n"}], "owner": {"reputation": 15, "user_id": 11840420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736ad1b5c5b54bb2144f5816b38f784?s=128&d=identicon&r=PG&f=1", "display_name": "Icebear", "link": "https://stackoverflow.com/users/11840420/icebear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 1, "accepted_answer_id": 59179362, "answer_count": 1, "score": 1, "last_activity_date": 1575548319, "creation_date": 1575462971, "last_edit_date": 1575548319, "question_id": 59176225, "link": "https://stackoverflow.com/questions/59176225/c-printf-insert-line-above-printed-text", "title": "C printf: insert line above printed text", "body": "<p>I want to print with printf above printed lines WITHOUT overwriting old ones. The code below prints </p>\n\n<pre><code>0\n1\nHallo\nA0\nA1\nA2\nA3\nA4\n</code></pre>\n\n<p>I want the output to be</p>\n\n<pre><code>0\n1\nHallo\nA0\nA1\nA2\nA3\nA4\n2\n3\n4\n</code></pre>\n\n<p>Is there a possibilty to do this with escape codes (like line up)?</p>\n\n<pre><code>#include \"stdio.h\" \n\n#define ANSI_LINE_UP                \"\\033[3A\"\n\n\nint main() {\n    for (int i = 0; i &lt; 5; i++) {\n        printf(\"%d\\n\", i);\n    }\n\n    printf(ANSI_LINE_UP \"Hallo\\n\");\n    for (int i = 0; i &lt; 5; i++) {\n        printf(\"A%d\\n\", i);\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I use Kubuntu 18.04, if this is relevant.</p>\n\n<p>To make it a bit clearer what I want:</p>\n\n<p>I want to have the output of some printf at the end, so it looks like this:</p>\n\n<p>printf(...)\n   printf(...)</p>\n\n<p>specialprintf(,,,)\n   specialprintf(,,,)</p>\n\n<p>Note: The order of all prints might be different while execution. I just need the normal ones first, then the special ones. If the special ones are in a different order, it is still fine.</p>\n\n<p>This is part of an embedded project. @Arkku solution is good, but I don't quite get it working as I want.</p>\n"}, {"tags": ["c", "linux", "multithreading", "sockets", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 6895840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAA5Q.jpg?s=128&g=1", "display_name": "Anteino", "link": "https://stackoverflow.com/users/6895840/anteino"}, "is_accepted": true, "score": 0, "last_activity_date": 1575465498, "creation_date": 1575465498, "answer_id": 59176982, "question_id": 59176017, "link": "https://stackoverflow.com/questions/59176017/save-threads-output-in-variable/59176982#59176982", "title": "Save threads output in variable", "body": "<p>You can pass an argument to the thread you're calling. If you need to pass several arguments, use one struct that contains all of them. If you pass by reference you can then afterwards get the result back after the thread completed.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/13131982/create-thread-passing-arguments/53859186\">this</a> post, first answer.</p>\n\n<p>In the struct you're passing you should include a bool <strong>executed</strong>, that way you can check in your main function if the thread has fully executed yet or not, so you don't extract a value that has nog been set yet.</p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 7121964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0689a0b7bf63ed7220f2a10bb7673d9?s=128&d=identicon&r=PG&f=1", "display_name": "Rom&#225;n", "link": "https://stackoverflow.com/users/7121964/rom%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1575466021, "creation_date": 1575466021, "answer_id": 59177137, "question_id": 59176017, "link": "https://stackoverflow.com/questions/59176017/save-threads-output-in-variable/59177137#59177137", "title": "Save threads output in variable", "body": "<p>If I understand correctly, you actually want to save the output of the thread, printing it on \"chat\" and not in \"server\" as you said. Try simply modifying the <code>stdout</code> to be that chat you are talking about. Check redirection with <code>dup</code> family.</p>\n"}], "owner": {"reputation": 61, "user_id": 12464517, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--Ro-_chsVPY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reevVEk3FQQ4qqoE-ZDIju6VzfAWQ/photo.jpg?sz=128", "display_name": "Kvikino", "link": "https://stackoverflow.com/users/12464517/kvikino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59176982, "answer_count": 2, "score": 0, "last_activity_date": 1575466021, "creation_date": 1575462256, "last_edit_date": 1575464488, "question_id": 59176017, "link": "https://stackoverflow.com/questions/59176017/save-threads-output-in-variable", "title": "Save threads output in variable", "body": "<p>I have simple client/server app. And i am using threads. \nThis is example of my thread.</p>\n\n<pre><code>void * thread2()\n\n    {   \n        val1 = 6*a*a;\n        val2 = a*a*a;\n\n            printf(\"va1 = %f \\n\", va1);\n            printf(\"val2 = %f \\n\", val2);\n    }\n</code></pre>\n\n<p>And this is how i am calling it in server</p>\n\n<pre><code>// LEVEL 3\n    if(level == 3){\n    int status;\n    pthread_t tid1,tid2,tid3,tid4;\n\n\n    pthread_create(&amp;tid1,NULL,thread1,NULL);\n    pthread_join(tid1,NULL);\n    pthread_create(&amp;tid2,NULL,thread2,NULL);\n    pthread_join(tid2,NULL);\n    pthread_create(&amp;tid3,NULL,thread3,NULL);\n    pthread_join(tid3,NULL);\n    pthread_create(&amp;tid4,NULL,thread4,NULL);\n    pthread_join(tid4,NULL);\n\n    level = 4;\n}\n</code></pre>\n\n<p>Problem is that everything is printed in server instead of chat and i dont know how to use it in <code>send()</code> function</p>\n\n<p>This is example of my <code>send()</code> function </p>\n\n<pre><code>s = send(newSocket, msg2, sizeof(msg2), 0);\n</code></pre>\n\n<p>Like how can i save output from threads in variable or something. I will be thankful for any help.</p>\n"}, {"tags": ["c", "text-files", "fgetc"], "comments": [{"owner": {"reputation": 19948, "user_id": 3150853, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qIPrg.jpg?s=128&g=1", "display_name": "Jayesh Bhoi", "link": "https://stackoverflow.com/users/3150853/jayesh-bhoi"}, "edited": false, "score": 1, "creation_date": 1575459973, "post_id": 59175208, "comment_id": 104572143, "body": "why not first convert char case to upper or lower and then check?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 4, "creation_date": 1575460705, "post_id": 59175208, "comment_id": 104572524, "body": "I would start by writing a function that reads a whole word a character at a time. Check if the word is special after you have read the whole word."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 3, "creation_date": 1575461067, "post_id": 59175208, "comment_id": 104572727, "body": "What does the title of this question have to do with the actual question? The question has nothing to do with <i>&quot;scrolling&quot;</i>."}, {"owner": {"reputation": 3, "user_id": 12479496, "user_type": "registered", "profile_image": "https://graph.facebook.com/3498015436937855/picture?type=large", "display_name": "Michal Buj\u0148&#225;k", "link": "https://stackoverflow.com/users/12479496/michal-buj%c5%88%c3%a1k"}, "edited": false, "score": 0, "creation_date": 1575465226, "post_id": 59175208, "comment_id": 104575063, "body": "Firstly, scrolling - I meant that I need to get back in the string in text file."}, {"owner": {"reputation": 3, "user_id": 12479496, "user_type": "registered", "profile_image": "https://graph.facebook.com/3498015436937855/picture?type=large", "display_name": "Michal Buj\u0148&#225;k", "link": "https://stackoverflow.com/users/12479496/michal-buj%c5%88%c3%a1k"}, "edited": false, "score": 0, "creation_date": 1575465316, "post_id": 59175208, "comment_id": 104575108, "body": "Secondly, I cant use any library functions - toupper, tolower + I have to print in output file the same word (StOp -&gt; StOp) from input file..."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 1, "creation_date": 1575466694, "post_id": 59175208, "comment_id": 104575887, "body": "You can write your own toupper and tolower functions if you know ASCII"}, {"owner": {"reputation": 3, "user_id": 12479496, "user_type": "registered", "profile_image": "https://graph.facebook.com/3498015436937855/picture?type=large", "display_name": "Michal Buj\u0148&#225;k", "link": "https://stackoverflow.com/users/12479496/michal-buj%c5%88%c3%a1k"}, "edited": false, "score": 0, "creation_date": 1575468030, "post_id": 59175208, "comment_id": 104576692, "body": "Yes, I can do this... but I need the SAME word write in output file. For example if in the input file is sentence &quot;Hello, STOp Kitty, hoW aRe yoU StOP&quot; I have to write in output file the same sentence..."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1575475263, "post_id": 59175208, "comment_id": 104581113, "body": "For input, implement a function that reads one word consisting of alphanumeric characters into a buffer. For output, implement <code>puts</code> (using <code>fputc</code> on successive indices of a string until you hit the <code>\\0</code> at the end). The case-insensitive comparison is trivial (e.g., <code>if ((buf[0] == &#39;s&#39; || buf[0] == &#39;S&#39;) &amp;&amp; (buf[1] == &#39;t&#39; || buf([1] == &#39;T&#39;) &amp;&amp; \u2026 &amp;&amp; buf[4] == &#39;\\0&#39;)</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12479496, "user_type": "registered", "profile_image": "https://graph.facebook.com/3498015436937855/picture?type=large", "display_name": "Michal Buj\u0148&#225;k", "link": "https://stackoverflow.com/users/12479496/michal-buj%c5%88%c3%a1k"}, "edited": false, "score": 0, "creation_date": 1575473751, "post_id": 59178042, "comment_id": 104580124, "body": "Thank you, your code is good and correct, but I cant use any library function. In your code you have fread, fseek, snprintf... I have to use only fgetc, fputc, fopen and fclose..."}, {"owner": {"reputation": 668, "user_id": 6895840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAA5Q.jpg?s=128&g=1", "display_name": "Anteino", "link": "https://stackoverflow.com/users/6895840/anteino"}, "reply_to_user": {"reputation": 3, "user_id": 12479496, "user_type": "registered", "profile_image": "https://graph.facebook.com/3498015436937855/picture?type=large", "display_name": "Michal Buj\u0148&#225;k", "link": "https://stackoverflow.com/users/12479496/michal-buj%c5%88%c3%a1k"}, "edited": false, "score": 0, "creation_date": 1575474726, "post_id": 59178042, "comment_id": 104580766, "body": "Yea well the printfs at the end were for me to verify if the output was correct. With just fopen, fclose and fgetc you can do the same stuff I did with fseek and fread, see the updated code."}], "tags": [], "owner": {"reputation": 668, "user_id": 6895840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAA5Q.jpg?s=128&g=1", "display_name": "Anteino", "link": "https://stackoverflow.com/users/6895840/anteino"}, "is_accepted": true, "score": 0, "last_activity_date": 1575474607, "last_edit_date": 1575474607, "creation_date": 1575468833, "answer_id": 59178042, "question_id": 59175208, "link": "https://stackoverflow.com/questions/59175208/scrolling-in-text-file-in-c/59178042#59178042", "title": "Scrolling in text file in C", "body": "<p>I faced the same problem once. Most of these problems you can solve by googling and stitching code snippets together.</p>\n\n<p>I changed the code I made back then a little for your purpose (since the job I was performing was slightly more complex than just ignoring case in the searchword). Note that it is important that you provide your search word (\"start\") in <strong>lower case</strong> in this piece of code. You could change it so that it also takes upper case search words but I'll leave that to you to figure out on your own.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint specialFind(char *buffer, const char *s, int startIndex, int endIndex);\n\nint specialFind(char *buffer, const char *s, int startIndex, int endIndex)\n{\n    int findIndex = 0;\n\n    int s_len = 0;\n    int signComp = 0;\n\n    while(s[s_len] != '\\0')\n    {\n        s_len++;\n    }\n\n    char msg[64];\n\n    for(int i = startIndex; i &lt; endIndex; i++)\n    {\n        if(buffer[i] &gt;= 65 &amp;&amp; buffer[i] &lt;= 90)\n        {\n            signComp = 32;\n        }\n        else\n        {\n            signComp = 0;\n        }\n        if(buffer[i] + signComp == s[findIndex])\n        {\n            findIndex++;\n        }\n        else\n        {\n            findIndex = 0;\n        }\n        if(findIndex == s_len)\n        {\n            return i - s_len + 1;\n        }\n    }\n    return -1;\n}\n\nint main()\n{\n    FILE *fileptr;\n\n    //  First opening and reading to determine file size\n    fileptr = fopen(\"textfile.txt\", \"r\");\n    int filelen = 0;\n    char c;\n    while(1)\n    {\n        c = fgetc(fileptr);\n        filelen++;\n        if(feof(fileptr))\n        {\n            break;\n        }\n    }\n    fclose(fileptr);\n\n    //  Now we're actually gonna read the file to the buffer\n    char buffer[filelen];\n    fileptr = fopen(\"textfile.txt\", \"r\");\n    int index = 0;\n    while(1)\n    {\n        buffer[index] = fgetc(fileptr);\n        index++;\n        if(feof(fileptr))\n        {\n            break;\n        }\n    }\n    fclose(fileptr);\n\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12479496, "user_type": "registered", "profile_image": "https://graph.facebook.com/3498015436937855/picture?type=large", "display_name": "Michal Buj\u0148&#225;k", "link": "https://stackoverflow.com/users/12479496/michal-buj%c5%88%c3%a1k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59178042, "answer_count": 1, "score": 0, "last_activity_date": 1575474607, "creation_date": 1575459660, "last_edit_date": 1575460809, "question_id": 59175208, "link": "https://stackoverflow.com/questions/59175208/scrolling-in-text-file-in-c", "title": "Scrolling in text file in C", "body": "<p>I have a problem with C language. I have to find and print every second word from input text file to output text file between words <code>START</code> and <code>STOP</code>. I make a function, which control if is next word in text file <code>STOP</code>. But if is in input text file word <code>SToP</code>, function <code>fgetc</code> move to T and check, that next letter is not O and break... But I need to get before word <code>SToP</code>. How can I do this? I cant use any library functions except for <code>fgetc</code>, <code>fputc</code>, <code>fopen</code> nad <code>fclose</code>.</p>\n\n<p>Here is code:</p>\n\n<pre><code>int search_STOP(int ch, FILE* in) { if(ch == 'S'){\n  ch = fgetc(in);\n  if(ch =='T'){\n    ch = fgetc(in);\n    if(ch == 'O'){       \n       ch = fgetc(in);\n       if(ch == 'P'){       \n             return 1;\n       }\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "sorting", "string-concatenation"], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1575459253, "creation_date": 1575459253, "answer_id": 59175092, "question_id": 59174691, "link": "https://stackoverflow.com/questions/59174691/alphabetically-arranged-to-not-alphabetical-in-c/59175092#59175092", "title": "Alphabetically arranged to not alphabetical in C", "body": "<p>It seems to me like you want to sort on the first letter only, and keep the relative ordering of the words in the input.</p>\n\n<p>One possible way to do it (just off the top of my head) could be to sort in multiple passes and using <em>indexes</em> instead.</p>\n\n<p>Once you have read the input you create an array of indexes for the <code>str1</code> array. It will start out ordered (i.e. <code>indexarray[0]</code> will be referencing <code>str1[0]</code> and therefore have the value <code>0</code>, etc.). Then you sort using this index array instead, swapping indexes in it (i.e. you swap <code>indexarray[i]</code> and <code>indexarray[j]</code>).</p>\n\n<p>When that's done you should have basically what you already have. But then you do <em>another</em> pass of sorting, this time sorting the index array itself, but not a full sort, only within a range where the first letter of the words are the same (i.e. <code>str1[indexarray[i]][0] == str1[indexarray[j]][0]</code>).</p>\n\n<hr>\n\n<p>Some example: Using the same input as in your question then <code>indexarray</code> would look like this</p>\n\n<pre>\nindexarray[0] == 0  // soda\nindexarray[1] == 1  // toast\nindexarray[2] == 2  // salt\nindexarray[3] == 3  // tea\n</pre>\n\n<p>After the first sorting pass it would look like</p>\n\n<pre>\nindexarray[0] == 2  // salt\nindexarray[1] == 0  // soda\nindexarray[2] == 3  // tea\nindexarray[3] == 1  // toast\n</pre>\n\n<p>Then after the second pass, where you do multiple partial sorts of the index array (each partial sort will sort only for a specific first letter of the word), then the array would look like</p>\n\n<pre>\nindexarray[0] == 0  // soda\nindexarray[1] == 2  // salt\nindexarray[2] == 1  // toast\nindexarray[3] == 3  // tea\n</pre>\n\n<hr>\n\n<p>Like I said, this is just of the top of my head, and I don't have any code (real or pseudo) to show, but hopefully it could be enough for some ideas.</p>\n"}], "owner": {"reputation": 35, "user_id": 12426865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acbb1f6068c25b246c5145cf5089f43?s=128&d=identicon&r=PG&f=1", "display_name": "iglot", "link": "https://stackoverflow.com/users/12426865/iglot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575463221, "creation_date": 1575457998, "last_edit_date": 1575463221, "question_id": 59174691, "link": "https://stackoverflow.com/questions/59174691/alphabetically-arranged-to-not-alphabetical-in-c", "title": "Alphabetically arranged to not alphabetical in C", "body": "<p>I have to make a program that would concatinate strings with same initials but the problem is if I input</p>\n\n<blockquote>\n  <p>example input: soda, toast, salt, tea</p>\n</blockquote>\n\n<p>the output would always be:</p>\n\n<blockquote>\n  <p>output: saltsoda, teatoast</p>\n</blockquote>\n\n<p>but the output that i want is:</p>\n\n<blockquote>\n  <p>sodasalt, toasttea</p>\n</blockquote>\n\n<p>How do i remain the function of my codes and the only change is not make it alphabetically arranged?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n    char str1[100][100], str[1000], temp[100];\n    int n, i, j;\n    char *ptr, *ptr1, letter;\n\n    printf(\"Enter how many arrays: \");\n    scanf(\"%d\", &amp;n);\n\n    for(i=0; i&lt;n; i++)\n    {\n        printf(\"Enter string %d: \", i+1);\n        scanf(\"%s\", &amp;str1[i]);\n    }\n\n    for(i=0; i&lt;n-1; i++)\n    {\n        for(j=i+1; j&lt;n; j++)\n        {\n            if(strcasecmp(str1[i], str1[j])&gt;0)\n            {\n                strcpy(temp, str1[i]);\n                strcpy(str1[i], str1[j]);\n                strcpy(str1[j], temp);\n            }\n        }\n    }\n\n    for(i=0; i&lt;n; i++)\n    {\n        if (i != 0)\n        {\n            if (tolower(str1[i][0]) != tolower(letter))\n            {\n                printf(\",\");\n            }\n        }\n        {\n            printf(\"%s\", str1[i]);\n            letter = str1[i][0];\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "io", "ubuntu-18.04", "tty"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575461022, "post_id": 59174675, "comment_id": 104572703, "body": "How are you running the program?"}, {"owner": {"reputation": 1, "user_id": 12479345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5nM8wNYwy0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRTOb8VyFDPV8uhoEnXHu0Ul1WKQ/mo/photo.jpg?sz=128", "display_name": "nick", "link": "https://stackoverflow.com/users/12479345/nick"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575462215, "post_id": 59174675, "comment_id": 104573380, "body": "Run level 5: <code>sudo .&#47;app</code> ; run level 3: <code>sudo xinit .&#47;app</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575462370, "post_id": 59174675, "comment_id": 104573462, "body": "So that&#39;s one thing that needs to be in the question: <i>you are using a different command to run the app.</i> Also, how do you know whether it blocks or doesn&#39;t block?"}, {"owner": {"reputation": 1, "user_id": 12479345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5nM8wNYwy0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRTOb8VyFDPV8uhoEnXHu0Ul1WKQ/mo/photo.jpg?sz=128", "display_name": "nick", "link": "https://stackoverflow.com/users/12479345/nick"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575463382, "post_id": 59174675, "comment_id": 104573985, "body": "<code>xinit</code> manually launches an X display server (since we are running in CLI mode under run level 3). Do you know whether that could interfere with I/O? Presumably <code>xinit</code> is called automatically when we launch under run level 5... We know the function doesn&#39;t block under run level 5 as the other application processes are running correctly, which is not the case under run level 3."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575465740, "post_id": 59174675, "comment_id": 104575345, "body": "So you see that other processes don&#39;t run, and you assume that therefore, reading from /dev/tty must be blocking?"}, {"owner": {"reputation": 1, "user_id": 12479345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5nM8wNYwy0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRTOb8VyFDPV8uhoEnXHu0Ul1WKQ/mo/photo.jpg?sz=128", "display_name": "nick", "link": "https://stackoverflow.com/users/12479345/nick"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575466330, "post_id": 59174675, "comment_id": 104575679, "body": "I mean that I can follow the execution of the application right up until <code>read(fd, buf, sizeof(buf));</code>, after which no more instructions are executed. Putting prints before/after this instruction proves as much, insofar as the first print is displayed, whereas the second is not. The app does not crash either."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12479345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5nM8wNYwy0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRTOb8VyFDPV8uhoEnXHu0Ul1WKQ/mo/photo.jpg?sz=128", "display_name": "nick", "link": "https://stackoverflow.com/users/12479345/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1575539130, "creation_date": 1575539130, "answer_id": 59192248, "question_id": 59174675, "link": "https://stackoverflow.com/questions/59174675/c-non-blocking-keyboard-input-blocks-on-run-level-3-linux/59192248#59192248", "title": "C non-blocking keyboard input blocks on run level 3 (Linux)", "body": "<p><strong>Update:</strong> Turns out if you intialise to the current tty device on runlevel 3, it does not work. Initialising to a specific tty device (in this case tty3) resolves the issue.</p>\n\n<p>Not really sure why this is the case (maybe the default tty on run level 3 is the X window?), would appreciate if someone could explain why this happens.</p>\n"}], "owner": {"reputation": 1, "user_id": 12479345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5nM8wNYwy0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRTOb8VyFDPV8uhoEnXHu0Ul1WKQ/mo/photo.jpg?sz=128", "display_name": "nick", "link": "https://stackoverflow.com/users/12479345/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 59192248, "answer_count": 1, "score": 0, "last_activity_date": 1575539130, "creation_date": 1575457940, "last_edit_date": 1575468774, "question_id": 59174675, "link": "https://stackoverflow.com/questions/59174675/c-non-blocking-keyboard-input-blocks-on-run-level-3-linux", "title": "C non-blocking keyboard input blocks on run level 3 (Linux)", "body": "<p>I have a piece of code that reads in the keyboard input (used for debugging purposes), implemented in C on Ubuntu 18.04. Since other processes have to run on the same thread, it is initialised as non-blocking.</p>\n\n<p>When I try to run my application on run level 3, it blocks when trying to read in a keyboard character. This behaviour does not occur when I run the application on run level 5.</p>\n\n<p>Does anyone have any answer as to why the behaviour is inconsistent between these two run levels?</p>\n\n<p>This is the code (not shown: where the read operation is called by the application's main loop):</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;unistd.h&gt;\n\n\nstatic int fd;\n\nint kbd_initModule()\n{\n    fd = open(\"/dev/tty\", O_NONBLOCK | O_NOCTTY);\n\n    if(fd &lt; 0)\n    {\n        ERROR(\"Unable to open keyboard: %d\", fd);\n        return fd;\n    }\n    else\n    {\n        return 0;\n    }\n}\n\nint kbd_deinitModule()\n{\n    close(fd);\n    return 0;\n}\n\nint kbd_getEvent()\n{\n    uint8_t buf[1];\n\n    int tmp = read(fd, buf, sizeof(buf));\n\n    if(tmp == -1)\n    {\n        ERROR(\"%s\", strerror(errno));\n        return -1;\n    }\n    else\n    {\n        return buf[0];\n    }\n}\n</code></pre>\n\n<p>I am available to answer any questions and provide additional details.</p>\n\n<p><strong>Additional details:</strong></p>\n\n<ul>\n<li>Launch app: run level 5: <code>sudo ./app</code> ; run level 3: <code>sudo xinit ./app</code> (there are GUI components in the app, so X server must be started on run level 3 - would be good if someone knew more about this).</li>\n</ul>\n"}, {"tags": ["c", "graphics", "3d", "raycasting"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1575456597, "post_id": 59174039, "comment_id": 104570431, "body": "Please put the smallest code that demonstrates the problem, in the question. I don&#39;t know what the problem is, but in this case I suspect you might find the problem while trying to make the code smaller."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1575479482, "post_id": 59174039, "comment_id": 104583606, "body": "what do you mean by <code>ability to render in 3D</code> ? something like this: <a href=\"https://stackoverflow.com/a/47251071/2521214\">2D Ray Casting with different height size</a> or this: <a href=\"https://stackoverflow.com/a/48092685/2521214\">3D Ray Casting</a> ?"}, {"owner": {"reputation": 49, "user_id": 11503635, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EIegzByyWCc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFYXJV7ziG2T_Esm9QPIUu-jMwWA/mo/photo.jpg?sz=128", "display_name": "Russell356", "link": "https://stackoverflow.com/users/11503635/russell356"}, "edited": false, "score": 0, "creation_date": 1575509900, "post_id": 59174039, "comment_id": 104594078, "body": "Rendering voxels (your second example)"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1575533906, "post_id": 59174039, "comment_id": 104600855, "body": "@Russell356 you need to debug ... so place a break point somewhere and trace your code ... for single ray check its direction and look at your variables values each step until first discrepancy to expected state happens ... Beware 3D voxel ray tracing is slow (especially on CPU SW rendering) and if you have some kind of FPS limiter/enforcer its possible you simply render not yet finished image ... one frame can take even several seconds to compute (depending on resolution of screen and map). Also check if you are looking at something and not facing bakwards to your map ..."}], "owner": {"reputation": 49, "user_id": 11503635, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EIegzByyWCc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFYXJV7ziG2T_Esm9QPIUu-jMwWA/mo/photo.jpg?sz=128", "display_name": "Russell356", "link": "https://stackoverflow.com/users/11503635/russell356"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575509878, "creation_date": 1575455963, "last_edit_date": 1575509878, "question_id": 59174039, "link": "https://stackoverflow.com/questions/59174039/3d-raycaster-rendering-wrong-wall-distance", "title": "3D raycaster rendering wrong wall distance", "body": "<p>I'm trying to write a raycaster based on this tutorial(<a href=\"https://lodev.org/cgtutor/raycasting.html\" rel=\"nofollow noreferrer\">https://lodev.org/cgtutor/raycasting.html</a>) , but with the ability to render in 3D with voxels. However, it doesn't produce any output. When I view the output, <code>side</code> is always 1, <code>sdist.z</code> can sometimes be infinity, and <code>pWallDist</code> is at an unusually high number. I may have made a mistake in the code, but after multiple checks I am unable to find it.</p>\n\n<p>Code: <a href=\"https://pastebin.com/3MxmzwYa\" rel=\"nofollow noreferrer\">https://pastebin.com/3MxmzwYa</a></p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1575453732, "post_id": 59173316, "comment_id": 104568801, "body": "What is <code>addpassenger</code>?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 3, "creation_date": 1575453811, "post_id": 59173316, "comment_id": 104568860, "body": "You are allocating <code>sizeof(char)*1</code> (which, BTW, is always 1, since <code>sizeof(char)</code> is 1 by definition) when your elements (in that dimension) are <code>char *</code>, so you should be allocating <code>sizeof(char *)</code>. Better yet, I suggest following the pattern <code>arr = malloc(sizeof(*arr) * count)</code>, so you don&#39;t have to repeat the type."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1575453836, "post_id": 59173316, "comment_id": 104568869, "body": "Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Then <a href=\"https://stackoverflow.com/posts/59173316/edit\">edit</a> your question and format your code correctly and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 21, "user_id": 10824119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37773c00c96dcb3447f101b2ec5ab8d?s=128&d=identicon&r=PG&f=1", "display_name": "asd dsa", "link": "https://stackoverflow.com/users/10824119/asd-dsa"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1575453858, "post_id": 59173316, "comment_id": 104568881, "body": "@Blaze sorry i write the functions name wrong i edited it"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1575453920, "post_id": 59173316, "comment_id": 104568913, "body": "There is no 2D array in the code!"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1575453921, "post_id": 59173316, "comment_id": 104568916, "body": "Also, strings in C have a terminating NUL (zero) byte, you need to add one to <code>strlen(str)</code> to allocate space for it."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575453952, "post_id": 59173316, "comment_id": 104568934, "body": "<code>seatedbus=realloc(seatedbus,sizeof(seatedbus)*busct);</code> Args are passed by value in C. That means <code>seatedbus</code> allocation there is not seen by the caller."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10824119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37773c00c96dcb3447f101b2ec5ab8d?s=128&d=identicon&r=PG&f=1", "display_name": "asd dsa", "link": "https://stackoverflow.com/users/10824119/asd-dsa"}, "edited": false, "score": 0, "creation_date": 1575454117, "post_id": 59173422, "comment_id": 104569019, "body": "what can i do the prevent this from happening"}, {"owner": {"reputation": 21, "user_id": 10824119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37773c00c96dcb3447f101b2ec5ab8d?s=128&d=identicon&r=PG&f=1", "display_name": "asd dsa", "link": "https://stackoverflow.com/users/10824119/asd-dsa"}, "edited": false, "score": 0, "creation_date": 1575454454, "post_id": 59173422, "comment_id": 104569235, "body": "using triple pointer will be a headache but thanks for the advice if there is nothing else i can do to make it work i guess i am becoming three-star programmer sadly."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1575453907, "creation_date": 1575453907, "answer_id": 59173422, "question_id": 59173316, "link": "https://stackoverflow.com/questions/59173316/arrays-elements-become-randoms-in-c/59173422#59173422", "title": "Array&#39;s elements become randoms in C", "body": "<p>Two problems:</p>\n\n<ol>\n<li><p>You forget that <code>strlen</code> doesn't count the string null-terminator. Which means </p>\n\n<pre><code>array[index]=malloc(sizeof(char)*strlen(item));\n</code></pre>\n\n<p>will allocate one byte to little, and that</p>\n\n<pre><code>strcpy(array[index],item);\n</code></pre>\n\n<p>will therefore write out of bounds leading to <em>undefined behavior</em>.</p></li>\n<li><p>You forget that arguments in C are passed <em>by value</em>, by copying the value into the functions local argument variable. So when you do e.g.</p>\n\n<pre><code>seatedbus=realloc(seatedbus,sizeof(seatedbus)*busct);\n</code></pre>\n\n<p>you only assign to the <em>local</em> <code>seatedbus</code> variable inside the <code>addpassenger</code> function. This assignment will not happen to the <code>seatedpassengerbus</code> variable in the <code>main</code> function.</p></li>\n</ol>\n\n<p>One possible way to solve the second problem is to <em>emulate</em> pass by reference, by using the address-of operator <code>&amp;</code> to pass a pointer to the variable <code>seatedpassengerbus</code>. That unfortunately means you will become a <a href=\"https://wiki.c2.com/?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three-star programmer</a> as the <code>addpassenger</code> function needs to be modified to use triple-pointers (which you need to dereference).</p>\n"}], "owner": {"reputation": 21, "user_id": 10824119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37773c00c96dcb3447f101b2ec5ab8d?s=128&d=identicon&r=PG&f=1", "display_name": "asd dsa", "link": "https://stackoverflow.com/users/10824119/asd-dsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59173422, "answer_count": 1, "score": -3, "last_activity_date": 1575454356, "creation_date": 1575453609, "last_edit_date": 1575454356, "question_id": 59173316, "link": "https://stackoverflow.com/questions/59173316/arrays-elements-become-randoms-in-c", "title": "Array&#39;s elements become randoms in C", "body": "<p>i have opened a 2d array in main and i am trying to add items to it in an another function. Information correct in the function but outside of the in the main its elements became random things.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void addpassenger(char** seatedbus,char** seatedeco,char** seatedstd,int busct,int ecoct,int stdct){\n\n    busct++;\n    seatedbus=realloc(seatedbus,sizeof(seatedbus)*busct);\n    addtoarray(seatedbus,\"bus\",busct-1);\n    ecoct++;\n    seatedeco=realloc(seatedeco,sizeof(seatedeco)*ecoct);\n    addtoarray(seatedeco,\"econ\",ecoct-1);\n}\n\nvoid addtoarray(char** array,char* item,int index){\n    array[index]=malloc(sizeof(char)*strlen(item));\n    strcpy(array[index],item);\n}\n\nint main() {\n    char** seatedpassengerbus=(char **)malloc(sizeof(char)*1);\n    char** seatedpassengereco=(char **)malloc(sizeof(char)*1);\n    char** seatedpassengerstd=(char **)malloc(sizeof(char)*1);\n    int busct=0;\n    int ecoct=0;\n    int stdct=0; \n    addpassenger(seatedpassengerbus,seatedpassengereco,seatedpassengerstd,busct,ecoct,stdct);\n    return 0;\n}\n</code></pre>\n\n<p>this is a basic structure of what i am doing since it is big assignment for my schoolwork i can't share every part of the code but these are generally where problem occurs, any idea why it is happening and how can \u0131 solve it? </p>\n"}, {"tags": ["c", "file", "sockets", "file-descriptor"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1575453265, "post_id": 59172993, "comment_id": 104568495, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1575453420, "post_id": 59172993, "comment_id": 104568590, "body": "This is a lot of code, but anyway this sounds like an out of range index for a local array, or a buffer overflow. Try to increase all array/buffer sizes by a factor 10 (like <code>char msg[100]</code> -&gt; <code>char msg[1000]</code>) etc. If the problem goes away you know what to do."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1575453540, "post_id": 59172993, "comment_id": 104568666, "body": "Also avoid constructs like <code>char foo[100]; ...bzero (foo, 100);</code>, but rather use <code>bzero (foo, sizeof foo);</code> this will avoid size mismatches if you change the size of the <code>foo</code> array."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1575455877, "post_id": 59172993, "comment_id": 104570040, "body": "If it happens in <code>read()</code> or <code>write()</code> and friends, a bad socket FD wont&#39; cause that. But a bad buffer address or length will."}, {"owner": {"reputation": 19, "user_id": 12464786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GWcjMwQVcTg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-feMTDXXQvR-Rb3hUBFfMxCDL0Q/photo.jpg?sz=128", "display_name": "Stefan Moisanu", "link": "https://stackoverflow.com/users/12464786/stefan-moisanu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1575456887, "post_id": 59172993, "comment_id": 104570587, "body": "@Jabberwocky I made your modifications and now I only get Bad file descriptor, no more <b><i>stack smashing</i></b>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1575457157, "post_id": 59172993, "comment_id": 104570730, "body": "Now you need to check where and why you got the original stack smashing. What I suggested it not a solution to the problem, it just helps to find the actual problem."}, {"owner": {"reputation": 19, "user_id": 12464786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GWcjMwQVcTg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-feMTDXXQvR-Rb3hUBFfMxCDL0Q/photo.jpg?sz=128", "display_name": "Stefan Moisanu", "link": "https://stackoverflow.com/users/12464786/stefan-moisanu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1575457637, "post_id": 59172993, "comment_id": 104570971, "body": "@Jabberwocky I found why I was getting stack smash and I solved it, but i now realize they were actually 2 independent errors, and I still get the bad file descriptor (the program doesn&#39;t stop at the first error, just returns errno, thats why the stack smash error appears as well)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1575463293, "post_id": 59172993, "comment_id": 104573938, "body": "<i>Why</i> does your program continue after an error? especially a fatal error like this. Poor coding."}, {"owner": {"reputation": 19, "user_id": 12464786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GWcjMwQVcTg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-feMTDXXQvR-Rb3hUBFfMxCDL0Q/photo.jpg?sz=128", "display_name": "Stefan Moisanu", "link": "https://stackoverflow.com/users/12464786/stefan-moisanu"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1575465552, "post_id": 59172993, "comment_id": 104575239, "body": "@user207421 I will treat errors properly at the end. I solved the stack error anyway so I&#39;m left only with the bad file descriptor."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 1, "creation_date": 1575472806, "post_id": 59172993, "comment_id": 104579607, "body": "You seem to assume that file descriptors are global, and you can simply use the fd opened by a process in another process. There are ways to pass a fd from one process to another -- but they&#39;re a bit more involved than just passing its fd number through a pipe ;-) (google for SCM_RIGHTS, there are example of its use in the ssh source code, etc)"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12464786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GWcjMwQVcTg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-feMTDXXQvR-Rb3hUBFfMxCDL0Q/photo.jpg?sz=128", "display_name": "Stefan Moisanu", "link": "https://stackoverflow.com/users/12464786/stefan-moisanu"}, "edited": false, "score": 0, "creation_date": 1575465652, "post_id": 59175261, "comment_id": 104575293, "body": "Thank you for your answer, regarding this error I already solved it thanks to @Jabberwocky. I still have the bad file descriptor problem."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1575459816, "creation_date": 1575459816, "answer_id": 59175261, "question_id": 59172993, "link": "https://stackoverflow.com/questions/59172993/getting-error-bad-file-descriptor-stack-smashing-detected-at-writing-in/59175261#59175261", "title": "Getting error: Bad file descriptor: ***stack smashing detected*** at writing in client socket, but socket descriptor is correct", "body": "<p>One obvious bug that smashes the stack:</p>\n\n<pre><code>char msgrasp[20]=\" \";\n...\nbzero(msgrasp,100);\n</code></pre>\n\n<p>Also don't use <code>bzero</code>, use standard C <code>memset</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 12464786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GWcjMwQVcTg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-feMTDXXQvR-Rb3hUBFfMxCDL0Q/photo.jpg?sz=128", "display_name": "Stefan Moisanu", "link": "https://stackoverflow.com/users/12464786/stefan-moisanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1575512098, "answer_count": 1, "score": 0, "last_activity_date": 1575459816, "creation_date": 1575452682, "last_edit_date": 1592644375, "question_id": 59172993, "link": "https://stackoverflow.com/questions/59172993/getting-error-bad-file-descriptor-stack-smashing-detected-at-writing-in", "closed_reason": "Not suitable for this site", "title": "Getting error: Bad file descriptor: ***stack smashing detected*** at writing in client socket, but socket descriptor is correct", "body": "<h3>Code Description</h3>\n<p>I have a concurrent server using select() that spawns a child for every 2 clients connected and gets their name. Parent reads the name from the client's socket and sends it to the child through a pipe ( every child gets its own pipe to communicate with parent, stored in struct child_fd[], along with file descriptors of its 2 clients) who writes back to client.</p>\n<h3>Error</h3>\n<p>On line <strong>297</strong> (I have highlighted it in code like this : ----- !!! LINE 297 !!! ----- )(<strong>145</strong> in Minimal Reproductive)in server code when I write back to client I get the bad file descriptor error. I never close any socket in my program, and also, I print that player2_fd (player_fd = 7) before writing and it is correct: I also printed it when the connection is made on line <strong>141</strong> (<em><strong>25</strong></em> in Minimal reproductive) with accept() and it' also 7.<br/>Moreover, even in the moment I send this descriptor from parent to child through pipe it is also 7.</p>\n<h3>Observation</h3>\n<p>The only difference between the first client and the second is that the first one's descriptor is given to fork child in the moment of forking( as it duplicates all variables) and the second one is sent through the pipe.</p>\n<h3>MINIMAL REPRODUCTIVE EXAMPLE SERVER CODE:</h3>\n<pre><code>\n\nint main ()\n{\n    \n\n    struct {\n        int player1_fd, player2_fd, pipe[2];\n\n    }child_fd[20];\n\n   // CODE FOR CONNECTION: listen(), bind()...\n\n    /* servim in mod concurent clientii... */\n    while (1)\n    {\n        if (select (nfds+1, &amp;readfds, NULL, NULL, NULL) &lt; 0)\n        {\n            perror (&quot;[server] Eroare la select().\\n&quot;);\n            return errno;\n        }\n        \n        if (FD_ISSET (sd, &amp;readfds)) {\n           \n            // ----- !!! LINE 25 !!! ------ //\n            \n            client = accept(sd, (struct sockaddr *) &amp;from, &amp;len);\n\n            /* eroare la acceptarea conexiunii de la un client */\n            if (client &lt; 0) {\n                perror(&quot;[server] Eroare la accept().\\n&quot;);\n                continue;\n            }\n\n            if (nfds &lt; client) /* ajusteaza valoarea maximului */\n                nfds = client;\n\n            /* includem in lista de descriptori activi si acest socket */\n            FD_SET (client, &amp;actfds);\n\n            printf(&quot;[server] S-a conectat clientul cu descriptorul %d, de la adresa %s.\\n&quot;, client, conv_addr(from));\n            fflush(stdout);\n            clientCounter++;\n\n            if (clientCounter % 2 == 1)       // if it's a player waiting for opponent\n            {\n                child_fd[nrOfChilds].player2_fd = -1;           // player2_fd is not known yet\n                child_fd[nrOfChilds].player1_fd = client;       // remember it's fd (need it in match handler child)\n\n\n                if (-1 == pipe(child_fd[nrOfChilds].pipe)) {\n                    perror(&quot;Error at creating pipe\\n&quot;);\n                    return errno;\n                }\n\n                if (-1 == (pid = fork())) {\n                    perror(&quot;Error at fork.\\n&quot;);\n                    return errno;\n                }\n                if (pid == 0) {     // [child that handles a chess match]\n                    /* child only needs it's own information from the struct so I will create local variables*/\n                    int p[] = {child_fd[nrOfChilds].pipe[0], child_fd[nrOfChilds].pipe[1]},\n                            player1_fd = child_fd[nrOfChilds].player1_fd,\n                            player2_fd = child_fd[nrOfChilds].player2_fd;\n                    int infoFromPipe;\n                    char msgrasp[20]=&quot; &quot;;\n                    printf(&quot;pipe: %d %d&quot;, p[0],p[1]);\n                    fflush(stdout);\n                    while(1)\n                    {\n                        if (-1 == read(p[0], &amp;infoFromPipe, sizeof(int)))\n                        {\n                            perror(&quot;Error at reading from pipe\\n&quot;);\n                            return errno;\n                        }\n                        printf(&quot;--%d--&quot;, infoFromPipe);\n                        fflush(stdout);\n                        if (infoFromPipe == 1) {      // means there is a fd for player2 coming\n\n                            if (-1 == read(p[0], &amp;player2_fd, sizeof(int)))\n                            {\n                                perror(&quot;Error at reading from pipe\\n&quot;);\n                                return errno;\n                            }\n                            printf(&quot;\\np2 fd:%d\\n&quot;, player2_fd);\n                            fflush(stdout);\n                        }\n\n                        else\n                        {       // both players connected\n\n                            int player;\n                            if (-1 == read(p[0], &amp;player, sizeof(int)))     // reading the player int\n                            {\n                                perror(&quot;Error at reading from pipe\\n&quot;);\n                                return errno;\n                            }\n                            printf(&quot;player:%d\\n&quot;,player);\n                            fflush(stdout);\n                            if ( player == 1){\n                                \n                                // EXACTLY THE SAME AS FOR PLAYER 2\n\n                                }\n\n                            }\n                            else{       //player 2\n                                int nameOrMove;\n                                if (-1 == read(p[0], &amp;nameOrMove, sizeof(int)))     // reading the name or move int\n                                {\n                                    perror(&quot;Error at reading from pipe\\n&quot;);\n                                    return errno;\n                                }\n                                printf(&quot;nameormove:%d\\n&quot;,nameOrMove);\n                                fflush(stdout);\n                                if (nameOrMove == 0) {         // name\n                                    int bytesRead, playerNameLen = 0;\n                                    char playerName[20],c;\n                                    bzero(playerName,20);\n\n                                    if( -1 == read(p[0], &amp;playerNameLen, sizeof(int)))\n                                    {\n                                        perror(&quot;Error at reading from pipe.\\n&quot;);\n                                        return errno;\n                                    }\n                                    if( -1 == read(p[0], playerName, playerNameLen))\n                                    {\n                                        perror(&quot;Error at reading from pipe.\\n&quot;);\n                                        return errno;\n                                    }\n\n                                    printf(&quot;Playername: %s\\n&quot;, playerName);\n                                    fflush(stdout);\n                                    //mesaj de raspuns pentru client\n\n                                    bzero(msgrasp,100);\n                                    strcat(msgrasp,&quot;Hello &quot;);\n                                    strcat(msgrasp,playerName);\n\n                                    printf(&quot;[server]Trimitem mesajul inapoi...%s\\n&quot;,msgrasp);\n                                    fflush(stdout);\n                                    printf(&quot;p2fd: %d\\n&quot;, player2_fd);\n                                    fflush(stdout);\n                                    \n                                    // ----- !!! LINE 145 !!! ----- //\n                                    if(-1 == write(player2_fd, msgrasp, sizeof(msgrasp)))\n                                    {\n                                        perror(&quot;Error at writing to player1&quot;);\n                                        return errno;\n                                    }\n                                    printf(&quot;Player name sent\\n&quot;);\n                                    fflush(stdout);\n\n                                }\n                            }\n\n                        }\n                    }\n\n\n\n                }\n                nrOfChilds++;\n\n            } else {     // if it's the second player to be assigned to a waiting player 1\n                if (pid &gt; 0) {\n                    \n                    int x = 1;\n                    if (-1 == write(child_fd[nrOfChilds-1].pipe[1], &amp;x, sizeof(int)))\n                    {\n                        perror(&quot;Error at writing in pipe\\n&quot;);\n                        return errno;\n                    }\n                    if (-1 == write(child_fd[nrOfChilds-1].pipe[1], &amp;client, sizeof(int)))       //sending player2 socket descriptor to it's child process handler\n                    {\n                        perror(&quot;Error at writing in pipe\\n&quot;);\n                        return errno;\n                    }\n                    child_fd[nrOfChilds-1].player2_fd = client;       //adding it to struct so the parent knows both players associated to each child process\n                }\n            }\n        }\n        /* vedem daca e pregatit vreun socket client pentru a trimite raspunsul */\n        if (pid &gt; 0) {\n            for (fd = 0; fd &lt;= nfds; fd++)    /* parcurgem multimea de descriptori */\n            {\n                /* este un socket de citire pregatit? */\n                if (fd != sd &amp;&amp; FD_ISSET (fd, &amp;readfds)) {\n\n                    for(int i = 0; i&lt; nrOfChilds; ++i){         // looking for the child process to whom the client is associated\n                        if ( fd == child_fd[i].player1_fd || fd == child_fd[i].player2_fd){\n\n                            // READING FROM CLIENT SOCKET, SENDING PLAYER NAME TO CHILD \n\n\n\n                            }\n                            FD_CLR(fd, &amp;actfds);\n\n                        }\n                    }\n                }\n            }\n        }\n        /* for */\n    }\n}               /* while */\n/* main */\n\n\n</code></pre>\n<h3>Server code:</h3>\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdbool.h&gt;\n\n/* portul folosit */\n\n#define PORT 2726\n\nextern int errno;       /* eroarea returnata de unele apeluri */\n\n/* functie de convertire a adresei IP a clientului in sir de caractere */\nchar * conv_addr (struct sockaddr_in address)\n{\n    static char str[25];\n    char port[7];\n\n    /* adresa IP a clientului */\n    strcpy (str, inet_ntoa (address.sin_addr));\n    /* portul utilizat de client */\n    bzero (port, 7);\n    sprintf (port, &quot;:%d&quot;, ntohs (address.sin_port));\n    strcat (str, port);\n    return (str);\n}\n\n/* programul */\nvoid sayHello(int);\nint main ()\n{\n    struct sockaddr_in server;  /* structurile pentru server si clienti */\n    struct sockaddr_in from;\n    fd_set readfds;     /* multimea descriptorilor de citire */\n    fd_set actfds;      /* multimea descriptorilor activi */\n    struct timeval tv;      /* structura de timp pentru select() */\n    int sd, client;     /* descriptori de socket */\n    int optval=1;           /* optiune folosita pentru setsockopt()*/\n    int fd, clientCounter = 0, nrOfChilds = 0, txt_fd;          // descriptor folosit pentru\n    pid_t pid = 1;             //parcurgerea listelor de descriptori\n    int nfds;           /* numarul maxim de descriptori */\n    int len;            /* lungimea structurii sockaddr_in */\n    bool waitingForOpponent;\n\n    struct {\n        int player1_fd, player2_fd, pipe[2];\n\n    }child_fd[20];\n\n    bzero(child_fd, sizeof(child_fd));\n    if(-1 == mkfifo(&quot;my_fifo&quot;, 0600) ) {\n        if (errno == EEXIST) {\n            printf(&quot;Using already existent fifo: \\&quot;my_fifo\\&quot; ...\\n&quot;);\n        } else {\n            perror(&quot;Error at creating \\&quot;my_fifo\\&quot; file.\\n&quot;);\n            exit(1);\n        }\n\n    }\n    /* creare socket */\n    if ((sd = socket (AF_INET, SOCK_STREAM, 0)) == -1)\n    {\n        perror (&quot;[server] Eroare la socket().\\n&quot;);\n        return errno;\n    }\n\n    /*setam pentru socket optiunea SO_REUSEADDR */\n    setsockopt(sd, SOL_SOCKET, SO_REUSEADDR,&amp;optval,sizeof(optval));\n\n    /* pregatim structurile de date */\n    bzero (&amp;server, sizeof (server));\n\n    /* umplem structura folosita de server */\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = htonl (INADDR_ANY);\n    server.sin_port = htons (PORT);\n\n    /* atasam socketul */\n    if (bind (sd, (struct sockaddr *) &amp;server, sizeof (struct sockaddr)) == -1)\n    {\n        perror (&quot;[server] Eroare la bind().\\n&quot;);\n        return errno;\n    }\n\n    /* punem serverul sa asculte daca vin clienti sa se conecteze */\n    if (listen (sd, 5) == -1)\n    {\n        perror (&quot;[server] Eroare la listen().\\n&quot;);\n        return errno;\n    }\n\n    /* completam multimea de descriptori de citire */\n    FD_ZERO (&amp;actfds);      /* initial, multimea este vida */\n    FD_SET (sd, &amp;actfds);       /* includem in multime socketul creat */\n\n    tv.tv_sec = 1;      /* se va astepta un timp de 1 sec. */\n    tv.tv_usec = 0;\n\n    /* valoarea maxima a descriptorilor folositi */\n    nfds = sd;\n\n    printf (&quot;[server] Asteptam la portul %d...\\n&quot;, PORT);\n    fflush (stdout);\n\n    /* servim in mod concurent clientii... */\n    while (1)\n    {\n        /* ajustam multimea descriptorilor activi (efectiv utilizati) */\n        bcopy ((char *) &amp;actfds, (char *) &amp;readfds, sizeof (readfds));\n\n        /* apelul select() */\n        if (select (nfds+1, &amp;readfds, NULL, NULL, NULL) &lt; 0)\n        {\n            perror (&quot;[server] Eroare la select().\\n&quot;);\n            return errno;\n        }\n        /* vedem daca e pregatit socketul pentru a-i accepta pe clienti */\n        if (FD_ISSET (sd, &amp;readfds)) {\n            /* pregatirea structurii client */\n            len = sizeof(from);\n            bzero(&amp;from, sizeof(from));\n\n            /* a venit un client, acceptam conexiunea */\n\n\n//  ----- !!! LINE 141 !!! -----\n\n \n            client = accept(sd, (struct sockaddr *) &amp;from, &amp;len);\n\n            /* eroare la acceptarea conexiunii de la un client */\n            if (client &lt; 0) {\n                perror(&quot;[server] Eroare la accept().\\n&quot;);\n                continue;\n            }\n\n            if (nfds &lt; client) /* ajusteaza valoarea maximului */\n                nfds = client;\n\n            /* includem in lista de descriptori activi si acest socket */\n            FD_SET (client, &amp;actfds);\n\n            printf(&quot;[server] S-a conectat clientul cu descriptorul %d, de la adresa %s.\\n&quot;, client, conv_addr(from));\n            fflush(stdout);\n            clientCounter++;\n\n            if (clientCounter % 2 == 1)       // if it's a player waiting for opponent\n            {\n                child_fd[nrOfChilds].player2_fd = -1;           // player2_fd is not known yet\n                child_fd[nrOfChilds].player1_fd = client;       // remember it's fd (need it in match handler child)\n\n\n                if (-1 == pipe(child_fd[nrOfChilds].pipe)) {\n                    perror(&quot;Error at creating pipe\\n&quot;);\n                    return errno;\n                }\n\n                if (-1 == (pid = fork())) {\n                    perror(&quot;Error at fork.\\n&quot;);\n                    return errno;\n                }\n                if (pid == 0) {     // [child that handles a chess match]\n                    /* child only needs it's own information from the struct so I will create local variables*/\n                    int p[] = {child_fd[nrOfChilds].pipe[0], child_fd[nrOfChilds].pipe[1]},\n                            player1_fd = child_fd[nrOfChilds].player1_fd,\n                            player2_fd = child_fd[nrOfChilds].player2_fd;\n                    int infoFromPipe;\n                    char msgrasp[20]=&quot; &quot;;\n                    printf(&quot;pipe: %d %d&quot;, p[0],p[1]);\n                    fflush(stdout);\n                    while(1)\n                    {\n                        if (-1 == read(p[0], &amp;infoFromPipe, sizeof(int)))\n                        {\n                            perror(&quot;Error at reading from pipe\\n&quot;);\n                            return errno;\n                        }\n                        printf(&quot;--%d--&quot;, infoFromPipe);\n                        fflush(stdout);\n                        if (infoFromPipe == 1) {      // means there is a fd for player2 coming\n\n                            if (-1 == read(p[0], &amp;player2_fd, sizeof(int)))\n                            {\n                                perror(&quot;Error at reading from pipe\\n&quot;);\n                                return errno;\n                            }\n                            printf(&quot;\\np2 fd:%d\\n&quot;, player2_fd);\n                            fflush(stdout);\n                        }\n\n                        else\n                        {       // both players connected\n\n                            int player;\n                            if (-1 == read(p[0], &amp;player, sizeof(int)))     // reading the player int\n                            {\n                                perror(&quot;Error at reading from pipe\\n&quot;);\n                                return errno;\n                            }\n                            printf(&quot;player:%d\\n&quot;,player);\n                            fflush(stdout);\n                            if ( player == 1){\n                                int nameOrMove;\n                                if (-1 == read(p[0], &amp;nameOrMove, sizeof(int)))     // reading the name or move int\n                                {\n                                    perror(&quot;Error at reading from pipe\\n&quot;);\n                                    return errno;\n                                }\n                                printf(&quot;nameormove:%d\\n&quot;,nameOrMove);\n                                fflush(stdout);\n                                if (nameOrMove == 0) {         // name\n                                    int bytesRead, playerNameLen = 0;\n                                    char playerName[20],c;\n                                    bzero(playerName,20);\n\n                                    if( -1 == read(p[0], &amp;playerNameLen, sizeof(int)))\n                                    {\n                                        perror(&quot;Error at reading from pipe.\\n&quot;);\n                                        return errno;\n                                    }\n                                    if( -1 == read(p[0], playerName, playerNameLen))\n                                    {\n                                        perror(&quot;Error at reading from pipe.\\n&quot;);\n                                        return errno;\n                                    }\n\n                                    printf(&quot;Playername: %s\\n&quot;, playerName);\n                                    fflush(stdout);\n                                    //mesaj de raspuns pentru client\n\n                                    bzero(msgrasp,100);\n                                    strcat(msgrasp,&quot;Hello &quot;);\n                                    strcat(msgrasp,playerName);\n\n                                    printf(&quot;[server]Trimitem mesajul inapoi...%s\\n&quot;,msgrasp);\n                                    fflush(stdout);\n                                    if(-1 == write(player1_fd, msgrasp, sizeof(msgrasp)))\n                                    {\n                                        perror(&quot;Error at writing to player1&quot;);\n                                        return errno;\n                                    }\n                                    printf(&quot;Player name sent\\n&quot;);\n                                    fflush(stdout);\n\n                                }\n\n                            }\n                            else{       //player 2\n                                int nameOrMove;\n                                if (-1 == read(p[0], &amp;nameOrMove, sizeof(int)))     // reading the name or move int\n                                {\n                                    perror(&quot;Error at reading from pipe\\n&quot;);\n                                    return errno;\n                                }\n                                printf(&quot;nameormove:%d\\n&quot;,nameOrMove);\n                                fflush(stdout);\n                                if (nameOrMove == 0) {         // name\n                                    int bytesRead, playerNameLen = 0;\n                                    char playerName[20],c;\n                                    bzero(playerName,20);\n\n                                    if( -1 == read(p[0], &amp;playerNameLen, sizeof(int)))\n                                    {\n                                        perror(&quot;Error at reading from pipe.\\n&quot;);\n                                        return errno;\n                                    }\n                                    if( -1 == read(p[0], playerName, playerNameLen))\n                                    {\n                                        perror(&quot;Error at reading from pipe.\\n&quot;);\n                                        return errno;\n                                    }\n\n                                    printf(&quot;Playername: %s\\n&quot;, playerName);\n                                    fflush(stdout);\n                                    //mesaj de raspuns pentru client\n\n                                    bzero(msgrasp,100);\n                                    strcat(msgrasp,&quot;Hello &quot;);\n                                    strcat(msgrasp,playerName);\n\n                                    printf(&quot;[server]Trimitem mesajul inapoi...%s\\n&quot;,msgrasp);\n                                    fflush(stdout);\n                                    printf(&quot;p2fd: %d\\n&quot;, player2_fd);\n                                    fflush(stdout);\n\n// ----- !!! LINE 297 !!! -----\n \n                                    if(-1 == write(player2_fd, msgrasp, sizeof(msgrasp)))\n                                    {\n                                        perror(&quot;Error at writing to player1&quot;);\n                                        return errno;\n                                    }\n                                    printf(&quot;Player name sent\\n&quot;);\n                                    fflush(stdout);\n\n                                }\n                            }\n\n                        }\n                    }\n\n\n\n                }\n                nrOfChilds++;\n\n            } else {     // if it's the second player to be assigned to a waiting player 1\n                if (pid &gt; 0) {\n                    /* All messages from parent to it's children processes will start with a char\n                     * that shows if it's information coming from an already connected player or the fd of a new connection:\n                     * '0' - old client\n                     * '1' - new client\n                     *      If the first char = '0', it will be followed by a char specifying from which player is the info coming from:\n                     *      '1' - player1\n                     *      '2' - player2\n                     *             The third char tells me if I'm getting the name of the player or a move:\n                     *             '0' - name\n                     *             '1' - move\n                     */\n                    int x = 1;\n                    if (-1 == write(child_fd[nrOfChilds-1].pipe[1], &amp;x, sizeof(int)))\n                    {\n                        perror(&quot;Error at writing in pipe\\n&quot;);\n                        return errno;\n                    }\n                    if (-1 == write(child_fd[nrOfChilds-1].pipe[1], &amp;client, sizeof(int)))       //sending player2 socket descriptor to it's child process handler\n                    {\n                        perror(&quot;Error at writing in pipe\\n&quot;);\n                        return errno;\n                    }\n                    child_fd[nrOfChilds-1].player2_fd = client;       //adding it to struct so the parent knows both players associated to each child process\n                }\n            }\n        }\n        /* vedem daca e pregatit vreun socket client pentru a trimite raspunsul */\n        if (pid &gt; 0) {\n            for (fd = 0; fd &lt;= nfds; fd++)    /* parcurgem multimea de descriptori */\n            {\n                /* este un socket de citire pregatit? */\n                if (fd != sd &amp;&amp; FD_ISSET (fd, &amp;readfds)) {\n\n                    for(int i = 0; i&lt; nrOfChilds; ++i){         // looking for the child process to whom the client is associated\n                        if ( fd == child_fd[i].player1_fd || fd == child_fd[i].player2_fd){\n\n                            char nameOrMove;\n                            if (-1 == read(fd, &amp;nameOrMove, sizeof(char)))     // reading the name or move char\n                            {\n                                perror(&quot;Error at reading from pipe\\n&quot;);\n                                return errno;\n                            }\n                            if (nameOrMove == '0') {       // name\n                                int bytesRead;\n                                char playerName[20];\n                                bytesRead = read (fd, playerName, sizeof (playerName));\n                                if (bytesRead &lt; 0)\n                                {\n                                    perror (&quot;Eroare la read() de la client.\\n&quot;);\n                                    return errno;\n                                }\n                                int x = 0;\n                                if ( -1 == write(child_fd[i].pipe[1], &amp;x, sizeof(int))){\n                                    perror(&quot;Error at writing in pipe\\n&quot;);\n                                    return errno;\n                                }\n                                x = (fd == child_fd[i].player1_fd) ? 1 : 2;\n                                if ( -1 == write(child_fd[i].pipe[1], &amp;x, sizeof(int))){\n                                    perror(&quot;Error at writing in pipe\\n&quot;);\n                                    return errno;\n                                }\n                                x = 0;\n                                if ( -1 == write(child_fd[i].pipe[1], &amp;x, sizeof(int))){\n                                    perror(&quot;Error at writing in pipe\\n&quot;);\n                                    return errno;\n                                }\n                                int playerNameLen = strlen(playerName);\n                                if ( -1 == write(child_fd[i].pipe[1], &amp;playerNameLen, sizeof(int))){\n                                    perror(&quot;Error at writing in pipe\\n&quot;);\n                                    return errno;\n                                }\n                                if ( -1 == write(child_fd[i].pipe[1], playerName, playerNameLen)){\n                                    perror(&quot;Error at writing in pipe\\n&quot;);\n                                    return errno;\n                                }\n\n\n\n                            }\n                            FD_CLR(fd, &amp;actfds);\n\n                        }\n                    }\n                }\n            }\n        }\n        /* for */\n    }\n}               /* while */\n/* main */\n\n\n</code></pre>\n"}, {"tags": ["c", "postgresql", "docker"], "answers": [{"comments": [{"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1575453269, "post_id": 59172889, "comment_id": 104568497, "body": "Please, have a look at my log from Docker shell. I run there <code>pg_config --libdir</code> and it returns <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu</code>"}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "reply_to_user": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1575453399, "post_id": 59172889, "comment_id": 104568580, "body": "Then you are calling the wrong <code>pg_config</code>. Try <code>&#47;usr&#47;lib&#47;postgresql&#47;11&#47;bin&#47;pg_config</code>."}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1575453437, "post_id": 59172889, "comment_id": 104568600, "body": "I will do simple <code>make install</code> and will report back. I think I also tried it this way and got other error messages, like <code>addme.control</code> is not found etc."}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1575453495, "post_id": 59172889, "comment_id": 104568643, "body": "I&#39;ve just tried <code>&#47;usr&#47;lib&#47;postgresql&#47;11&#47;bin&#47;pg_config</code> and it returned the same <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu</code>"}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 1, "creation_date": 1575453627, "post_id": 59172889, "comment_id": 104568723, "body": "Actually, I can provide the whole Dockerfile which totally reproduces all errors."}, {"owner": {"reputation": 2837, "user_id": 9926721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3uZyl-aeJ0M/AAAAAAAAAAI/AAAAAAAAACA/dTz1snmrSXQ/photo.jpg?sz=128", "display_name": "funnydman", "link": "https://stackoverflow.com/users/9926721/funnydman"}, "reply_to_user": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1575453717, "post_id": 59172889, "comment_id": 104568791, "body": "@Jacobian it would be helpfull."}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1575454546, "post_id": 59172889, "comment_id": 104569285, "body": "UPS! It started working with simple make install. Laurenz was right!"}, {"owner": {"reputation": 2837, "user_id": 9926721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3uZyl-aeJ0M/AAAAAAAAAAI/AAAAAAAAACA/dTz1snmrSXQ/photo.jpg?sz=128", "display_name": "funnydman", "link": "https://stackoverflow.com/users/9926721/funnydman"}, "edited": false, "score": 0, "creation_date": 1575457044, "post_id": 59172889, "comment_id": 104570672, "body": "@LaurenzAlbe In postgres 11 <code>pg_config --libdir</code> returns exactly <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu</code>, but the answer says that this is can not be the library directory."}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 0, "creation_date": 1575458329, "post_id": 59172889, "comment_id": 104571302, "body": "If that were true, <code>make install</code> would install the shared library there. Maybe there is more than one PostgreSQL v11 installed? Try to find all <code>pg_config</code>s on the machine. To make your life easier, have as few PostgreSQL installations as possible."}, {"owner": {"reputation": 2837, "user_id": 9926721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3uZyl-aeJ0M/AAAAAAAAAAI/AAAAAAAAACA/dTz1snmrSXQ/photo.jpg?sz=128", "display_name": "funnydman", "link": "https://stackoverflow.com/users/9926721/funnydman"}, "edited": false, "score": 0, "creation_date": 1575463808, "post_id": 59172889, "comment_id": 104574222, "body": "@LaurenzAlbe just to be sure, in the vanilla postgres container (based on official postgresql image) with <code>postgresql-server-dev-11</code> installed produces the same result as above."}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 0, "creation_date": 1575464489, "post_id": 59172889, "comment_id": 104574617, "body": "That may be so. Perhaps that PostgreSQL was configured to choose that library directory. Obviously you installed another PostgreSQL that had different ideas, and you were suffering from the confusion."}], "tags": [], "owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "is_accepted": true, "score": 1, "last_activity_date": 1575452371, "creation_date": 1575452371, "answer_id": 59172889, "question_id": 59172757, "link": "https://stackoverflow.com/questions/59172757/create-extension-for-postgres-11-results-in-could-not-access-file-libdir/59172889#59172889", "title": "Create extension for Postgres 11 results in &quot;could not access file $libdir/...&quot;", "body": "<p>You installed the shared library <code>addme.so</code> in the wrong place.</p>\n\n<p>It should be installed in the PostgreSQL library directory, not in <code>/usr/lib/x86_64-linux-gnu</code>. The PostgreSQL library directory can be found with</p>\n\n<pre><code>pg_config --libdir\n</code></pre>\n\n<p>and is probably <code>/usr/share/postgresql/11/lib</code>.</p>\n\n<p>To avoid problems like this, it is recommended that you use <code>make install</code> rather than manually copying files around.</p>\n"}], "owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 59172889, "answer_count": 1, "score": 2, "last_activity_date": 1575454293, "creation_date": 1575451919, "last_edit_date": 1575454293, "question_id": 59172757, "link": "https://stackoverflow.com/questions/59172757/create-extension-for-postgres-11-results-in-could-not-access-file-libdir", "title": "Create extension for Postgres 11 results in &quot;could not access file $libdir/...&quot;", "body": "<p>I try to follow <a href=\"https://dzone.com/articles/postgresql-simple-c-extension-development-for-a-no\" rel=\"nofollow noreferrer\">this</a> simple example. So, I created a folder addme with four files. Makerfile looks like:</p>\n\n<pre><code>MODULES = addme\nEXTENSION = addme\nDATA = addme--0.0.1.sql\nPG_CONFIG = pg_config\nPGXS := $(shell $(PG_CONFIG) --pgxs)\ninclude $(PGXS)\n</code></pre>\n\n<p>addme.control file looks as</p>\n\n<pre><code>comment = 'Simple number add function'\ndefault_version = '0.0.1'\nrelocatable = true\nmodule_pathname = '$libdir/addme'\n</code></pre>\n\n<p>addme.c is as simple as:</p>\n\n<pre><code>#include \"postgres.h\"\n\n#include \"fmgr.h\"\n\nPG_MODULE_MAGIC;\n\nPG_FUNCTION_INFO_V1(addme);\n\nDatum addme(PG_FUNCTION_ARGS)\n{\n    int32 arg1 = PG_GETARG_INT32(0);\n    int32 arg2 = PG_GETARG_INT32(1);\n    PG_RETURN_INT32(arg1 + arg2);\n}\n</code></pre>\n\n<p>And finally addme--0.0.1.sql looks like:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION\n\naddme(int, int) RETURNS int AS 'MODULE_PATHNAME','addme'\n\nLANGUAGE C STRICT;\n</code></pre>\n\n<p>Inside docker I install Postgres 11 and all necessary libraries and dependencies:</p>\n\n<pre><code>FROM ubuntu:latest\n....\n....\nRUN ... apt-get install -y postgresql-11 postgresql-client-11 postgresql-contrib-11\n</code></pre>\n\n<p><code>postgresql-server-dev-all</code> and <code>postgresql-common</code> are also installed. And PATH is set like so:</p>\n\n<pre><code>ENV PATH=\"/usr/lib/postgresql/11/bin:${PATH}\"\n</code></pre>\n\n<p>Besides, I compile <code>addme</code> extension like so:</p>\n\n<pre><code>RUN cd /usr/src/addme &amp;&amp; \\\nmake clean &amp;&amp; make PG_CONFIG=/usr/bin/pg_config &amp;&amp; make install PG_CONFIG=/usr/bin/pg_config &amp;&amp; \\\ncp ./addme.control /usr/share/postgresql/11/extension/addme.control &amp;&amp; \\\ncp ./addme--0.0.1.sql /usr/share/postgresql/11/extension/addme--0.0.1.sql &amp;&amp; \\\ncp ./addme.o /usr/lib/x86_64-linux-gnu/addme.o &amp;&amp; \\\ncp ./addme.so /usr/lib/x86_64-linux-gnu/addme.so \n</code></pre>\n\n<p>Everything looks good. I build and run the container, I see that Postgres is working and I can list its databases and so forth and so on. However, when I try to create extension <code>addme</code>, I get an error. This is a complete stacktrace from inside docker shell:</p>\n\n<pre><code>[root@localhost ~]# docker exec -it 7e9f9c331351 /bin/bash\nroot@7e9f9c331351:/# su postgres\npostgres@7e9f9c331351:/$ psql\npsql (11.6 (Ubuntu 11.6-1.pgdg18.04+1))\nType \"help\" for help.\n\npostgres=# \\c test\nYou are now connected to database \"test\" as user \"postgres\".\ntest=# create extension addme;\nERROR:  could not access file \"$libdir/addme\": No such file or directory\ntest=# \\q\npostgres@7e9f9c331351:/$ pg_config --libdir\n/usr/lib/x86_64-linux-gnu\npostgres@7e9f9c331351:/$ ls /usr/src/addme\naddme--0.0.1.sql  addme.bc  addme.c  addme.control  addme.o  addme.so  Makefile\npostgres@7e9f9c331351:/$ cd /usr/share/postgresql/11/extension/\npostgres@7e9f9c331351:/usr/share/postgresql/11/extension$ find . -name \"addme*\"\n./addme--0.0.1.sql\n./addme.control\n</code></pre>\n\n<p>As you can see, it can not find \"$libdir/addme\". But the catch is $libdir is <code>/usr/lib/x86_64-linux-gnu</code> and <code>addme.o</code> and <code>addme.so</code> are there. So, what is wrong with that and how can I fix it? Many thanks in advance!</p>\n\n<p>PS. This is my Dockerfile:</p>\n\n<pre><code>    FROM ubuntu:latest\n\nENV OS_LOCALE=\"en_US.UTF-8\" \\\n    DEBIAN_FRONTEND=noninteractive\nRUN apt-get update &amp;&amp; apt-get install -y locales &amp;&amp; locale-gen ${OS_LOCALE}\nENV LANG=${OS_LOCALE} \\\n    LANGUAGE=${OS_LOCALE} \\\n    LC_ALL=${OS_LOCALE} \\\n    PG_VERSION=11 \\\n    PG_USER=postgres \\\n    PG_HOME=/var/lib/postgresql \\\n    PG_RUN_DIR=/run/postgresql \\\n    PG_LOG_DIR=/var/log/postgresql \\\n    PATH=\"/usr/lib/postgresql/11/bin:${PATH}\"\n\nENV PG_CONF_DIR=\"/etc/postgresql/${PG_VERSION}/main\" \\\n    PG_BIN_DIR=\"/usr/lib/postgresql/${PG_VERSION}/bin\" \\\n    PG_DATA_DIR=\"${PG_HOME}/${PG_VERSION}/main\"\n\n# Install basic libraries\n\nRUN apt-get update &amp;&amp; \\\n    apt-get -y install gcc \\\n    libprotobuf-dev protobuf-compiler \\\n    git build-essential \\\n    wget checkinstall zlib1g-dev \\\n    make automake autoconf cmake\n\n# Install Postgresql\n\nRUN dpkg-reconfigure locales &amp;&amp; apt-get install -y sudo gnupg \\\n &amp;&amp; wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - \\\n &amp;&amp; echo 'deb http://apt.postgresql.org/pub/repos/apt/ bionic-pgdg main' &gt; /etc/apt/sources.list.d/pgdg.list \\\n &amp;&amp; apt-get update &amp;&amp; apt-get install -y postgresql-${PG_VERSION} postgresql-client-${PG_VERSION} postgresql-contrib-${PG_VERSION} lbzip2 \\\n # Cleaning\n &amp;&amp; apt-get purge -y --auto-remove gnupg \\\n &amp;&amp; rm -rf ${PG_HOME} \\\n &amp;&amp; rm -rf /var/lib/apt/lists/* \\\n &amp;&amp; touch /tmp/.EMPTY_DB\n\nCOPY entrypoint.sh /sbin/entrypoint.sh\nRUN chmod 755 /sbin/entrypoint.sh\n\n# Install Postgresql Rabbitmq extension\n\nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\\n    python-psycopg2 libpq-dev \\\n    postgresql-server-dev-all postgresql-common &amp;&amp; \\\n    mkdir /usr/src/addme\n\nCOPY ./addme /usr/src/addme\n\n#RUN cd /usr/src/addme &amp;&amp; \\\n#    make clean &amp;&amp; make PG_CONFIG=/usr/bin/pg_config &amp;&amp; make install PG_CONFIG=/usr/bin/pg_config &amp;&amp; \\\n#    cp ./addme.control /usr/share/postgresql/11/extension/addme.control &amp;&amp; \\\n#    cp ./addme--0.0.1.sql /usr/share/postgresql/11/extension/addme--0.0.1.sql &amp;&amp; \\\n#    cp ./addme.o /usr/lib/x86_64-linux-gnu/addme.o &amp;&amp; \\\n#    cp ./addme.so /usr/lib/x86_64-linux-gnu/addme.so \n\nRUN cd /usr/src/addme &amp;&amp; \\\n    make &amp;&amp; make install\n\nEXPOSE 5432/tcp\nVOLUME [\"${PG_HOME}\", \"${PG_RUN_DIR}\"]\nCMD [\"/sbin/entrypoint.sh\"]\n</code></pre>\n\n<p>It uses entrypoint.sh, which I've taken from <a href=\"https://github.com/romeOz/docker-postgresql/blob/master/11/entrypoint.sh\" rel=\"nofollow noreferrer\">here</a>. And I build and run Docker using docker-compose.yml:</p>\n\n<pre><code>version: '3.7'\nservices:\n  postgres_db:\n    build: ./Database\n    environment:\n      - DB_USER=test\n      - DB_NAME=test\n      - DB_PASS=test\n    restart: always\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - \"./postgres-data:/var/lib/postgresql\"\n</code></pre>\n\n<p>So, my folder structure eventually looks like so:</p>\n\n<ul>\n<li>docker-compose.yml</li>\n<li>Database\n\n<ul>\n<li>Dockerfile</li>\n<li>entrypoint.sh</li>\n<li>addme\n\n<ul>\n<li>addme--0.0.1.sql</li>\n<li>addme.c</li>\n<li>addme.control</li>\n<li>Makefile</li>\n</ul></li>\n</ul></li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1575449916, "post_id": 59172198, "comment_id": 104566673, "body": "How are the functions declared?"}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "edited": false, "score": 1, "creation_date": 1575450066, "post_id": 59172198, "comment_id": 104566749, "body": "How do you want to keep check for hich uart needs to be used here? Runtime or compile time?"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5410702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a5067fa1b7660167ea4883f140264b?s=128&d=identicon&r=PG&f=1", "display_name": "Mich", "link": "https://stackoverflow.com/users/5410702/mich"}, "edited": false, "score": 0, "creation_date": 1575454051, "post_id": 59172586, "comment_id": 104568981, "body": "If I write in a definition file uartPack.h : int (*SendDebugString)(char *s); If this file is called from other many files I have:  Error[e27]: Entry &quot;SendDebugString&quot; in module ... redefined in module ...."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 67, "user_id": 5410702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a5067fa1b7660167ea4883f140264b?s=128&d=identicon&r=PG&f=1", "display_name": "Mich", "link": "https://stackoverflow.com/users/5410702/mich"}, "edited": false, "score": 1, "creation_date": 1575454229, "post_id": 59172586, "comment_id": 104569090, "body": "@Mich you have to put <code>extern</code> in front of <code>int (*SendDebugString)(char *s);</code> in the <code>uartPack.h</code> file, and in the <code>uartPack.c</code> you put <code>int (*SendDebugString)(char *s);</code>  without the <code>extern</code> keyword."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 67, "user_id": 5410702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a5067fa1b7660167ea4883f140264b?s=128&d=identicon&r=PG&f=1", "display_name": "Mich", "link": "https://stackoverflow.com/users/5410702/mich"}, "edited": false, "score": 1, "creation_date": 1575471322, "post_id": 59172586, "comment_id": 104578771, "body": "@Mich If the function pointer is global, the same rules apply as for any other global variable (like an <code>int</code>): it must be defined in one source file, and declared in the header with <code>extern</code>."}], "tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": true, "score": 4, "last_activity_date": 1575451254, "creation_date": 1575451254, "answer_id": 59172586, "question_id": 59172198, "link": "https://stackoverflow.com/questions/59172198/function-pointer-instead-of-define/59172586#59172586", "title": "function pointer instead of #define", "body": "<p>Let say the function signature is <code>int sendString(char* s)</code>.\nYou can then write:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>\n// declare SendDebugString as a pointer to a function\n// accepting a string as argument and returning an int\nint (*SendDebugString)(char *s);\n\n// assign a function to SendDebugString\nSendDebugString = Uart1_SendDebugString;\n\n// call the function\nSendDebugString(\"hello world!\");\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5410702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a5067fa1b7660167ea4883f140264b?s=128&d=identicon&r=PG&f=1", "display_name": "Mich", "link": "https://stackoverflow.com/users/5410702/mich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1575451330, "accepted_answer_id": 59172586, "answer_count": 1, "score": 0, "last_activity_date": 1575451254, "creation_date": 1575449790, "last_edit_date": 1575450017, "question_id": 59172198, "link": "https://stackoverflow.com/questions/59172198/function-pointer-instead-of-define", "closed_reason": "Duplicate", "title": "function pointer instead of #define", "body": "<p>Up to now I use <code>#define</code> to map functions.</p>\n\n<p>Exemple: if I have 2 physical uarts, to map <code>SendDebugString</code> to the matching physical uart I use:</p>\n\n<pre><code>#define SendDebugString(s) Uart1_SendDebugString(s)   // map to uart 1\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#define SendDebugString(s) Uart2_SendDebugString(s)   // map to uart 2\n</code></pre>\n\n<p>How can I do the same using function pointers instead of <code>#define</code>?</p>\n"}, {"tags": ["c", "struct", "structure"], "comments": [{"owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "edited": false, "score": 3, "creation_date": 1575446433, "post_id": 59171308, "comment_id": 104565087, "body": "You need to pass the address of <code>cpy_struct</code> to <code>foo()</code> and update <code>cpy</code> in that function like <code>*cpy = &amp;test[2]</code>. In your case the value in <code>cpy</code> updated in the function is lost when <code>foo()</code> returns"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12090616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a055efda622fbfe70ee01900f184a988?s=128&d=identicon&r=PG&f=1", "display_name": "gbucchino", "link": "https://stackoverflow.com/users/12090616/gbucchino"}, "edited": false, "score": 0, "creation_date": 1575447608, "post_id": 59171420, "comment_id": 104565558, "body": "Thank you, but, when I would like the cpy_struct entry, I would like to modify <code>test[2].foo</code>, and in the 2nd case, isn&#39;t possible."}], "tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1575446615, "creation_date": 1575446615, "answer_id": 59171420, "question_id": 59171308, "link": "https://stackoverflow.com/questions/59171308/copy-struct-with-reference-in-c/59171420#59171420", "title": "Copy struct with reference in C", "body": "<p>For the 2nd case, you need to fix the order of assignment. Current code copies test[2] to cpy_struct, and then modifies it to 20. The output will be 20. Consider the following</p>\n\n<pre><code>struct foo_struct cpy_struct = {0};\n\ncpy_struct.foo = 20;\n\nfoo(test, &amp;cpy_struct);\n\nprintf(\"%d\\n\", cpy_struct.foo); /* Display 2 */\nprintf(\"%d\\n\", test[2].foo);    /* Display 2 */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": -1, "last_activity_date": 1575447302, "creation_date": 1575447302, "answer_id": 59171584, "question_id": 59171308, "link": "https://stackoverflow.com/questions/59171308/copy-struct-with-reference-in-c/59171584#59171584", "title": "Copy struct with reference in C", "body": "<p>In the first program you have to pass the pointer by reference. </p>\n\n<p>For example</p>\n\n<pre><code>static void foo(struct foo_struct *test, struct foo_struct **cpy){\n    int i;\n    for(i = 0; i &lt; 5; i++)\n        test[i].foo = i;    \n\n    *cpy = test + 2;\n}\n</code></pre>\n\n<p>and call the function like</p>\n\n<pre><code>foo(test, &amp;cpy_struct);\n</code></pre>\n\n<p>In this case the pointer <code>cpy_struct</code> in main will point to the third element of the array pointed to by test.</p>\n\n<p>In the second program you created a new object of the structure type and copied into it the object pointed to by <code>test + 2</code>. So as a result you have a separate object.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5846128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mCZR4MnovAU/AAAAAAAAAAI/AAAAAAAAATg/hW-YgK5soLk/photo.jpg?sz=128", "display_name": "Adam Hamidon", "link": "https://stackoverflow.com/users/5846128/adam-hamidon"}, "is_accepted": false, "score": 0, "last_activity_date": 1575447316, "creation_date": 1575447316, "answer_id": 59171586, "question_id": 59171308, "link": "https://stackoverflow.com/questions/59171308/copy-struct-with-reference-in-c/59171586#59171586", "title": "Copy struct with reference in C", "body": "<p>For your first case</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nstruct foo_struct{\n    int foo;\n    char *str;\n};\n\nstatic void foo(struct foo_struct *, struct foo_struct **);\nvoid main(void) {\n    int i;\n    struct foo_struct *test = malloc(sizeof(struct foo_struct) * 5);\n    struct foo_struct *cpy_struct = NULL;\n\n    foo(test, &amp;cpy_struct);\n\n    //cpy_struct-&gt;foo = 20;\n    printf(\"%d\\n\", cpy_struct-&gt;foo);\n\n    free(test);\n}\n\nstatic void foo(struct foo_struct *test, struct foo_struct **cpy){\n    int i;\n    for(i = 0; i &lt; 5; i++)\n        test[i].foo = i;    \n\n    *cpy = &amp;test[2];\n}\n</code></pre>\n\n<p>What you did is you assign the address of test[2] as the value of cpy_struct.\nWhat you need to do is to assign the address of test[2] to the address of cpy_struct.</p>\n\n<p>To do this, you have to make the argument of foo as pointer to pointer so that the when you assign something to *cpy, it assign to the address of cpy_struct, not its value.</p>\n\n<p>I've corrected the code, and tested it. The printf result is 2 since I comment out the assignment of cpy_struct->foo = 20;</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12090616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a055efda622fbfe70ee01900f184a988?s=128&d=identicon&r=PG&f=1", "display_name": "gbucchino", "link": "https://stackoverflow.com/users/12090616/gbucchino"}, "is_accepted": false, "score": 0, "last_activity_date": 1575448154, "creation_date": 1575448154, "answer_id": 59171802, "question_id": 59171308, "link": "https://stackoverflow.com/questions/59171308/copy-struct-with-reference-in-c/59171802#59171802", "title": "Copy struct with reference in C", "body": "<p>Thank you, I never used pointer to pointer... \nI'm trying and it's work with this code:</p>\n\n<pre><code>static void foo(struct foo_struct *, struct foo_struct **);\nvoid main(void) {\n    int i;\n    struct foo_struct *test = malloc(sizeof(struct foo_struct) * 5);\n    struct foo_struct *cpy_struct = NULL;\n\n    foo(test, &amp;cpy_struct);\n\n    cpy_struct-&gt;foo = 20;\n    printf(\"%d\\n\", cpy_struct-&gt;foo); /* Display 20 */\n    printf(\"%d\\n\", test[2].foo);     /* Display 20 */\n\n    free(test);\n}\n\nstatic void foo(struct foo_struct *test, struct foo_struct **cpy){\n    int i;\n    for(i = 0; i &lt; 5; i++)\n        test[i].foo = i;    \n\n    *cpy = &amp;test[2];\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12090616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a055efda622fbfe70ee01900f184a988?s=128&d=identicon&r=PG&f=1", "display_name": "gbucchino", "link": "https://stackoverflow.com/users/12090616/gbucchino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1575449421, "accepted_answer_id": 59171584, "answer_count": 4, "score": 1, "last_activity_date": 1575448431, "creation_date": 1575446112, "last_edit_date": 1575448431, "question_id": 59171308, "link": "https://stackoverflow.com/questions/59171308/copy-struct-with-reference-in-c", "closed_reason": "Duplicate", "title": "Copy struct with reference in C", "body": "<p>I would like to copy a structure from an another structure like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nstruct foo_struct{\n    int foo;\n    char *str;\n};\n\nstatic void foo(struct foo_struct *, struct foo_struct *);\nvoid main(void) {\n    int i;\n    struct foo_struct *test = malloc(sizeof(struct foo_struct) * 5);\n    struct foo_struct *cpy_struct = NULL;\n\n    foo(test, cpy_struct);\n\n    cpy_struct-&gt;foo = 20;\n    //printf(\"%d\\n\", cpy_struct.foo);\n\n    free(test);\n}\n\nstatic void foo(struct foo_struct *test, struct foo_struct *cpy){\n    int i;\n    for(i = 0; i &lt; 5; i++)\n        test[i].foo = i;    \n\n    cpy = &amp;test[2];\n}\n</code></pre>\n\n<p>But, when I modify this entry: <code>cpy_struct-&gt;foo = 20;</code>, I had a segmentation fault.</p>\n\n<p>When I didn't use the pointer in  <code>struct foo_struct cpy_struct</code>, I modify my entry, but not a original structure:</p>\n\n<pre><code>struct foo_struct cpy_struct = {0};\n\nfoo(test, &amp;cpy_struct);\n\ncpy_struct.foo = 20;\nprintf(\"%d\\n\", cpy_struct.foo); /* Display 20 */\nprintf(\"%d\\n\", test[2].foo);    /* Display 2 */\n\n/* ... */\n\nstatic void foo(struct foo_struct *test, struct foo_struct *cpy){\n    int i;\n    for(i = 0; i &lt; 5; i++)\n        test[i].foo = i;\n\n    *cpy = test[2];\n}\n</code></pre>\n\n<p>How can I copy this struct to update the value in specific structure ?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575443876, "post_id": 59170405, "comment_id": 104564018, "body": "Please indent your code properly! That&#39;s not readable."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1575442443, "creation_date": 1575442443, "answer_id": 59170448, "question_id": 59170405, "link": "https://stackoverflow.com/questions/59170405/c-programming-regarding-while-loops-to-prompt-user-question-again/59170448#59170448", "title": "C Programming - Regarding while loops to prompt user question again", "body": "<p>Two problems:</p>\n\n<ol>\n<li><p>The statement</p>\n\n<pre><code>while (do_again == 'Y');\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>while (do_again == 'Y')\n{\n    // Empty body\n}\n</code></pre>\n\n<p>The loop body is the single semicolon at the end of the line</p></li>\n<li><p>When you use the variable <code>do_again</code> it's <em>uninitialized</em>. It's value will be <em>indeterminate</em>. You need to initialize all variables before you use them.</p></li>\n</ol>\n\n<p>These two problems together means that either you have an infinite loop (if <code>do_again</code> just happens to be equal to <code>'Y'</code>), or no loop at all.</p>\n\n<hr>\n\n<p>There's also other problems in your code, for example</p>\n\n<pre><code>if (do_again !='Y' &amp;&amp; do_again !='N' )  \n    printf(\"Please try again\");\n    do_again = toupper(getchar());\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>if (do_again !='Y' &amp;&amp; do_again !='N' )  \n    printf(\"Please try again\");\ndo_again = toupper(getchar());\n</code></pre>\n\n<p>That is, only the <code>printf</code> call is inside the <code>if</code>, the assignment is always and unconditionally performed.</p>\n\n<p>You also lack error checking. What happens if, for example, one of the <code>scanf</code> calls fails one way or another?</p>\n"}], "owner": {"reputation": 1, "user_id": 9342347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55101f1701459ecbe7907cb081a22950?s=128&d=identicon&r=PG&f=1", "display_name": "Jisbon", "link": "https://stackoverflow.com/users/9342347/jisbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1575442443, "creation_date": 1575442246, "question_id": 59170405, "link": "https://stackoverflow.com/questions/59170405/c-programming-regarding-while-loops-to-prompt-user-question-again", "title": "C Programming - Regarding while loops to prompt user question again", "body": "<p>In this example, I am trying to code a program which let users solve qudratic equations. At the end, should if they press y/Y, they can restart the program. If they pressed n/N, the program will exit and if they press any other, the program should prompt them again for either a y/Y/N/n.</p>\n\n<p>Unfortunately, I can't seem to run this logic at the end properly. Any ideas why? Thanks</p>\n\n<pre><code>#include &lt;ctype.h&gt; //in order to use toupper\n#include &lt;stdio.h&gt; // * Solution of a*x*x + b*x + c = 0 *\n#include &lt;math.h&gt;\n\nint main(void)\n{\ndouble a, b, c, root1, root2;\nchar do_again;\nwhile (do_again == 'Y');\nprintf(\"Input the coefficient a =&gt; \");\nscanf(\"%lf\", &amp;a);\nprintf(\"Input the coefficient b =&gt; \");\nscanf(\"%lf\", &amp;b);\nprintf(\"Input the coefficient c =&gt; \");\nscanf(\"%lf\", &amp;c);\nif (a == 0)\n{\nprintf(\"You have entered a = 0.\\n\");\nprintf(\"Only one root: %8.3f\", -c/b);\n}\nelse \n{\n    root1 = (- b + sqrt(b*b-4*a*c))/(2*a);\n    root2 = (- b - sqrt(b*b-4*a*c))/(2*a);\n    printf(\"The first root is %8.3f\\n\", root1);\n    printf(\"The second root is %8.3f\\n\", root2);\n}\nprintf(\"Solve again (y/n)? \");\nfflush(stdin);\ndo_again = toupper(getchar());\nif (do_again !='Y' &amp;&amp; do_again !='N' )  \n    printf(\"Please try again\");\n    do_again = toupper(getchar());\n}\n</code></pre>\n"}, {"tags": ["c", "operating-system", "switch-statement", "pipe", "fork"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8994858, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XM_oGuzRja4/AAAAAAAAAAI/AAAAAAAAAEU/Mpd563HsqaU/photo.jpg?sz=128", "display_name": "Dark Apostle", "link": "https://stackoverflow.com/users/8994858/dark-apostle"}, "edited": false, "score": 0, "creation_date": 1575448575, "post_id": 59170444, "comment_id": 104566013, "body": "thanks I did what you suggested but the program still hangs when I put -1 in. It doesn&#39;t hang for the correct input, it sends and retrieves the messages correctly."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 85, "user_id": 8994858, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XM_oGuzRja4/AAAAAAAAAAI/AAAAAAAAAEU/Mpd563HsqaU/photo.jpg?sz=128", "display_name": "Dark Apostle", "link": "https://stackoverflow.com/users/8994858/dark-apostle"}, "edited": false, "score": 0, "creation_date": 1575448920, "post_id": 59170444, "comment_id": 104566160, "body": "Does <code>read</code> returns 0 or -1 repeatedly (infinite loop), or does <code>read</code> block (not all descriptors to the write end of the pipe are closed)?"}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1579863482, "last_edit_date": 1579863482, "creation_date": 1575442430, "answer_id": 59170444, "question_id": 59169954, "link": "https://stackoverflow.com/questions/59169954/c-program-using-pipes-hangs-when-trying-to-terminate/59170444#59170444", "title": "C program using pipes hangs when trying to terminate", "body": "<p>First, you need to start performing error checking. Check the man page of the calls you make. Add checks in your code to detect errors. When they return an error, use <code>perror</code> and <code>exit(EXIT_FAILURE);</code>.</p>\n\n<hr>\n\n<p>Second, you need to start paying attention to the values returned by <code>read</code> and <code>write</code> since they could be less than expected. These need to be called in a loop.</p>\n\n<p>For example, for <code>read</code>, you'd use the following:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;limits.h&gt;\n\n// Returns the number of bytes read.\n// EOF was reached if the number of bytes read is less than requested.\n// On error, returns -1 and sets errno.\nssize_t read_fixed_amount(int fd, char *buf, size_t size) {\n   if (size &gt; SSIZE_MAX) {\n      errno = EINVAL;\n      return -1;\n   }\n\n   ssize_t bytes_read = 0;\n   while (size &gt; 0) {\n      ssize_t rv = read(fd, buf, size); \n      if (rv &lt; 0)\n         return -1;\n      if (rv == 0)\n         return bytes_read;\n\n      size -= rv;\n      bytes_read += rv;\n      buf += rv;\n   }\n\n   return bytes_read;\n}\n</code></pre>\n\n<p>It would be used something like this:</p>\n\n<pre><code>ssize_t bytes_read = read_fixed_amount(fd, buf, size);\nif (bytes_read &lt; 0) {\n   perror(\"read\");\n   exit(EXIT_FAILURE);\n}\n\nif (bytes_read == 0) {\n   printf(\"EOF reached\\n\");\n   exit(EXIT_SUCCESS);\n}\n\nif (bytes_read != size) {\n   fprintf(stderr, \"read: Premature EOF.\\n\");\n   exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<hr>\n\n<p>Third, reading from the pipe will only return EOF once all file descriptors of the write end of the pipes have been closed.</p>\n\n<p>Right after the fork, the parent should do</p>\n\n<pre><code>close(p1[0]); \nclose(p2[0]);\n</code></pre>\n\n<p>Right after the fork, child 1 should do</p>\n\n<pre><code>close(p1[1]);\nclose(p2[0]);\nclose(p2[1]);\n</code></pre>\n\n<p>Right after the fork, child 2 should do</p>\n\n<pre><code>close(p1[0]); \nclose(p1[1]);\nclose(p2[1]);\n</code></pre>\n\n<hr>\n\n<p>Fourth, there's this monstrosity:</p>\n\n<pre><code>while (1) {\n   dup2(p1[0], STDIN_FILENO);\n   read(STDIN_FILENO, msgbuf, MSGSIZE); \n   ...\n   close(p1[0]); \n   close(p1[1]);\n}\n</code></pre>\n\n<p>Really? Infinite loop. Attempt to repeatedly make STDIN a dup of p1[0]. Duping of a closed descriptor.</p>\n\n<p>This should appear before the loop:</p>\n\n<pre><code>dup2(p1[0], STDIN_FILENO);\nclose(p1[0]);\n</code></pre>\n\n<p>Or you could skip those two call and simply read from <code>p1[0]</code> instead of <code>STDIN_FILENO</code>.</p>\n\n<p>As for the infinite loop, it goes back to the second point. Check the value returned by <code>read</code>.</p>\n\n<hr>\n\n<p>Fifth, you only wait for one child to finish, but there are two children to wait for. You need to call <code>wait</code> twice.</p>\n"}, {"tags": [], "owner": {"reputation": 2636, "user_id": 4635560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv67d.jpg?s=128&g=1", "display_name": "Manthan Tilva", "link": "https://stackoverflow.com/users/4635560/manthan-tilva"}, "is_accepted": false, "score": 0, "last_activity_date": 1575450936, "creation_date": 1575450936, "answer_id": 59172498, "question_id": 59169954, "link": "https://stackoverflow.com/questions/59169954/c-program-using-pipes-hangs-when-trying-to-terminate/59172498#59172498", "title": "C program using pipes hangs when trying to terminate", "body": "<p>You need to send some signal to your child process to inform then to terminate before waiting for them to exit. You should define some pre-defined message which means its time for child to terminate. Check below code. Here pre-defined message is <code>\"-1\"</code>. You should choose your own which doesn't conflict with your application's real data. </p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\n#define MSGSIZE 64\n\nchar msgbuf[MSGSIZE];\n\nint main() {\n  int p1[2];\n  int p2[2];\n  int nread;\n  int choice = 0;\n  pid_t child_a, child_b;\n  if (pipe(p1) == -1) {\n    printf(\"error in creating pipe\\n\");\n    exit(-1);\n  }\n\n  if (pipe(p2) == -1) {\n    printf(\"error in creating pipe\\n\");\n    exit(-1);\n  }\n\n  child_a = fork();\n  if (child_a == 0) {\n    while (1) {\n      dup2(p1[0], STDIN_FILENO);\n      read(STDIN_FILENO, msgbuf, MSGSIZE);\n      printf(\"%d receives message: %s\\n\", getpid(), msgbuf);\n      close(p1[0]);\n      close(p1[1]);\n      if (strcmp(msgbuf, \"-1\") == 0) { // check if time to end\n        break;\n      }\n    }\n  } else {\n    child_b = fork();\n    if (child_b == 0) {\n      while (1) {\n        dup2(p2[0], STDIN_FILENO);\n        read(STDIN_FILENO, msgbuf, MSGSIZE);\n        printf(\"%d receives message: %s\\n\", getpid(), msgbuf);\n        close(p2[0]);\n        close(p2[1]);\n        if (strcmp(msgbuf, \"-1\") == 0) {  // check if time to end\n          break;\n        }\n      }\n    } else {\n      while (1) {\n        printf(\"&lt;child_to_receive_msg&gt; &lt;message&gt;\\n\");\n        scanf(\"%d %s\", &amp;choice, msgbuf);\n        switch (choice) {\n        case 1:\n          usleep(250);\n          write(p1[1], msgbuf, MSGSIZE);\n          break;\n        case 2:\n          usleep(250);\n          write(p2[1], msgbuf, MSGSIZE);\n          break;\n        default:\n          printf(\"Process does not exist\\n\");\n          break;\n        case -1:\n          strcpy(msgbuf, \"-1\");\n          write(p1[1], msgbuf, MSGSIZE); // send message to end\n          close(p1[0]);\n          close(p2[0]);\n          printf(\"parent waiting\\n\");\n          wait(NULL);\n          exit(0);\n        }\n      }\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8994858, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XM_oGuzRja4/AAAAAAAAAAI/AAAAAAAAAEU/Mpd563HsqaU/photo.jpg?sz=128", "display_name": "Dark Apostle", "link": "https://stackoverflow.com/users/8994858/dark-apostle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1579863482, "creation_date": 1575440196, "last_edit_date": 1575456873, "question_id": 59169954, "link": "https://stackoverflow.com/questions/59169954/c-program-using-pipes-hangs-when-trying-to-terminate", "title": "C program using pipes hangs when trying to terminate", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;fcntl.h&gt;\n\n#define MSGSIZE 64\n\nchar msgbuf[MSGSIZE];\n\nint main() {\n  int p1[2];\n  int p2[2];\n  int nread;\n  int choice = 0;\n  pid_t child_a, child_b;\n  if (pipe(p1) == -1) {\n    printf(\"error in creating pipe\\n\");\n    exit(-1);\n  }\n\n  if (pipe(p2) == -1) {\n    printf(\"error in creating pipe\\n\");\n    exit(-1);\n  }\n\n  child_a = fork();\n  if (child_a == 0) {\n    while (1) {\n      dup2(p1[0], STDIN_FILENO);\n      read(STDIN_FILENO, msgbuf, MSGSIZE);\n      printf(\"%d receives message: %s\\n\", getpid(), msgbuf);\n      close(p1[0]);\n      close(p1[1]);\n    }\n  } else {\n    child_b = fork();\n    if (child_b == 0) {\n      while (1) {\n        dup2(p2[0], STDIN_FILENO);\n        read(STDIN_FILENO, msgbuf, MSGSIZE);\n        printf(\"%d receives message: %s\\n\", getpid(), msgbuf);\n        close(p2[0]);\n        close(p2[1]);\n      }\n    } else {\n      while (1) {\n        printf(\"&lt;child_to_receive_msg&gt; &lt;message&gt;\\n\");\n        scanf(\"%d %s\", &amp;choice, msgbuf);\n        switch (choice) {\n        case 1:\n          usleep(250);\n          write(p1[1], msgbuf, MSGSIZE);\n          break;\n        case 2:\n          usleep(250);\n          write(p2[1], msgbuf, MSGSIZE);\n          break;\n        default:\n          printf(\"Process does not exist\");\n          break;\n        case -1:\n          close(p1[0]);\n          close(p2[0]);\n          printf(\"parent waiting\");\n          wait(NULL);\n          exit(0);\n        }\n      }\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>In the above program I have a parent making two child processes belonging to that same parent. The user writes to the parent process which pipes the message to be read by either child 1 or child 2. It keeps doing this continuously unless the user inputs -1. </p>\n\n<p>The problem is that case in my switch statement doesn't get executed and instead the program hangs. I think I have my pipes closed at the correct places. </p>\n"}, {"tags": ["c", "openssl", "x509"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1575439677, "post_id": 59169715, "comment_id": 104562621, "body": "I feel you have not provided enough information, for instance we want to know the hex data you are printing and <code>X509</code> structure definition(Which I&#39;m not able to find online)."}, {"owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "edited": false, "score": 0, "creation_date": 1575442126, "post_id": 59169715, "comment_id": 104563371, "body": "Just an observation: in the server you are not accessing the data using the type-casted <code>certt</code>"}, {"owner": {"reputation": 3268, "user_id": 182634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5b602ab0bc363e3e990f2e904b671d?s=128&d=identicon&r=PG", "display_name": "eyalm", "link": "https://stackoverflow.com/users/182634/eyalm"}, "edited": false, "score": 0, "creation_date": 1575448323, "post_id": 59169715, "comment_id": 104565904, "body": "how do you no the program crashes because of the casting? It actually sounds unreasonable as there is no pointer de-referencing by the the cast itself."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1575448505, "post_id": 59169715, "comment_id": 104565978, "body": "<code>i2d_X509(certt, NULL);</code> likely de-references the data, so that&#39;s potentially a strict aliasing violation. Though I suspect the bug is rather related to alignment/padding. Impossible to say with the little information given."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1575450751, "post_id": 59169715, "comment_id": 104567108, "body": "Maybe is <code>get_cert</code> allowed to return NULL?"}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 1, "creation_date": 1575451349, "post_id": 59169715, "comment_id": 104567407, "body": "You cannot do this! The X509 structure is not directly serializable in this way. It contains pointers etc which will not serialize correctly like this. If you need to store it as a blob then you should convert it to DER first using i2d_x509(), and then when you read it back in again you need to use d2i_x509() to convert it back again. I have no idea why it works for you on the server. It should not."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "reply_to_user": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 0, "creation_date": 1575451662, "post_id": 59169715, "comment_id": 104567579, "body": "Hi @MattCaswell, I don&#39;t find in which include is defined the structure x509_st (<code>typedef struct x509_st X509;</code> is in ossl_typ,h).Do you know anything about where the structure definition is declared?"}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 0, "creation_date": 1575464949, "post_id": 59169715, "comment_id": 104574880, "body": "Assuming you are using OpenSSL 1.0.0 or later then the type is opaque. The definition is only held in OpenSSL internal header files which are not available to application authors. It&#39;s definition (including its size) could actually change from one OpenSSL patch release to the next. If you just want to look for curiosity, it is here: <a href=\"https://github.com/openssl/openssl/blob/cdb2763e7daeea87c61ea874ae820046d84dd016/include/crypto/x509.h#L158-L186\" rel=\"nofollow noreferrer\">github.com/openssl/openssl/blob/&hellip;</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 0, "creation_date": 1575467278, "post_id": 59169715, "comment_id": 104576261, "body": "@MattCaswell this should be an answer"}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1575479934, "post_id": 59169715, "comment_id": 104583806, "body": "I made my comment into an answer as suggested by @n.&#39;pronouns&#39;m."}], "answers": [{"tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": false, "score": 1, "last_activity_date": 1575479903, "creation_date": 1575479903, "answer_id": 59181534, "question_id": 59169715, "link": "https://stackoverflow.com/questions/59169715/segmentation-fault-whenever-i-try-to-cast-unsigned-char-to-a-x509/59181534#59181534", "title": "Segmentation Fault whenever i try to cast unsigned char* to a X509*", "body": "<p>You cannot do this! The X509 structure is not directly serializable in this way. It contains pointers etc which will not serialize correctly like this. If you need to store it as a blob then you should convert it to DER first using i2d_X509(), and then when you read it back in again you need to use d2i_X509() to convert it back again. I have no idea why it works for you on the server. It should not.</p>\n"}], "owner": {"reputation": 1, "user_id": 8616648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179b9858fa03430addd5d673b6e2d92b?s=128&d=identicon&r=PG&f=1", "display_name": "imaretard", "link": "https://stackoverflow.com/users/8616648/imaretard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1575483375, "answer_count": 1, "score": -1, "last_activity_date": 1575479903, "creation_date": 1575438816, "last_edit_date": 1575465895, "question_id": 59169715, "link": "https://stackoverflow.com/questions/59169715/segmentation-fault-whenever-i-try-to-cast-unsigned-char-to-a-x509", "closed_reason": "Not suitable for this site", "title": "Segmentation Fault whenever i try to cast unsigned char* to a X509*", "body": "<p>I'm trying to send a certificate over an ssl socket to a client. The certificate is stored in a database as a blob. </p>\n\n<p>Whenever i try to cast the unsigned char* pointer that receives the data to a X509* and access the X509, my client segfaults even tho the server does the same but it works just fine. I printed the data passed in hex and they match so im not sure what the issue.</p>\n\n<p>Server:</p>\n\n<pre><code>//returns the blob containing the cert from db.\nunsigned char *cert = get_cert(name);\nX509* certt = (X509 *) cert;\n//gets size of certificate to send over socket\nint cert_size = i2d_X509(certt, NULL);\n\n//prints cert common name and binary data as hex\nsetvbuf(stdout, NULL, _IONBF, 0);\nunsigned char *user = X509_NAME_oneline(X509_get_subject_name(certt), 0, 0);\nprintf(\"%s\\n\", user);\nfor (int i = 0; i &lt; cert_size; i++){\n    printf(\"%X\", cert[i]);\n}\n\n//sends cert size then the cert.\nchar message[64];\nsnprintf(message, 64, \"/cert %d\", cert_size);\nssl_block_write(ssl, serverfd, message, strlen(message));\nssl_block_write(ssl, serverfd, cert, cert_size);\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>//allocates enough memory to receive cert\nunsigned char *data = malloc(size);\nprintf(\"%d\\n\", ssl_block_read(ssl, serverfd, data, size));\n\nfor (int i = 0; i &lt; size; i++)\n    printf(\"%X\", data[i]);\n\nX509 *cert = (X509 *) data;\nunsigned char *user = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);\nprintf(\"%s\\n\", user);\n</code></pre>\n"}, {"tags": ["c", "openssl", "aes"], "comments": [{"owner": {"reputation": 731, "user_id": 1137142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78afc3d3f69e007c5d548a75f865a497?s=128&d=identicon&r=PG", "display_name": "matb", "link": "https://stackoverflow.com/users/1137142/matb"}, "edited": false, "score": 0, "creation_date": 1575439653, "post_id": 59169560, "comment_id": 104562615, "body": "Hi agang, it would be good if you could look at <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and make sure you could explain what you&#39;re trying to do. The code sample is good, but what about the input/output? What are you trying to achieve (at a high level)?"}, {"owner": {"reputation": 1, "user_id": 12477815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a14620720eabe0081a400bcd967eafe?s=128&d=identicon&r=PG&f=1", "display_name": "agang", "link": "https://stackoverflow.com/users/12477815/agang"}, "reply_to_user": {"reputation": 731, "user_id": 1137142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78afc3d3f69e007c5d548a75f865a497?s=128&d=identicon&r=PG", "display_name": "matb", "link": "https://stackoverflow.com/users/1137142/matb"}, "edited": false, "score": 0, "creation_date": 1575440598, "post_id": 59169560, "comment_id": 104562882, "body": "em\uff0ci use openssl&#39;s evp mode (using AES symmetric encryption),  Initialize the encrypted and decrypted EVP_CIPHER_CTX structure once,  When a piece of data is encrypted and then decrypted multiple times, the expected results cannot be obtained.why\uff1f"}], "owner": {"reputation": 1, "user_id": 12477815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a14620720eabe0081a400bcd967eafe?s=128&d=identicon&r=PG&f=1", "display_name": "agang", "link": "https://stackoverflow.com/users/12477815/agang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575440712, "creation_date": 1575437982, "last_edit_date": 1575440712, "question_id": 59169560, "link": "https://stackoverflow.com/questions/59169560/openssl-aes-evp-decrypted-multiple-times-the-expected-results-cannot-be-obtaine", "title": "openssl aes evp decrypted multiple times, the expected results cannot be obtained.why\uff1f", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\n#include &lt;openssl/ssl.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/err.h&gt;\n#include &lt;openssl/aes.h&gt;\n\nint en_evp_init(uint8_t* password, int len, EVP_CIPHER_CTX** pp_ctx)\n{\n    int ret               = 0;\n    unsigned char key[32] = {0};\n    unsigned char iv[16]  = {0};\n    const EVP_CIPHER* cip = NULL;\n\n    if(*pp_ctx != NULL)\n        EVP_CIPHER_CTX_free(*pp_ctx);\n\n    *pp_ctx = EVP_CIPHER_CTX_new();\n    if(*pp_ctx == NULL)\n        return -1;\n\n    EVP_CIPHER_CTX_init(*pp_ctx);\n\n    cip = EVP_get_cipherbyname(\"aes-256-cbc\");\n    if(cip == NULL)\n    {\n        printf(\"EVP_get_cipherbyname aes-256-cfb\\n\");\n        return -1;\n    }   \n    EVP_BytesToKey(cip, EVP_md5(), NULL, password, len, 1, key, iv);\n\n    EVP_CIPHER_CTX_set_padding(*pp_ctx, 0);\n\n    ret = EVP_CipherInit_ex(*pp_ctx, cip, NULL, key, iv, 1);\n    if(ret != 1)\n    {\n        printf(\"EVP_CipherInit_ex failed!\\n\");\n        return -1;\n    }   \n    return 0;\n}\n\nint de_evp_init(uint8_t* password, int len, EVP_CIPHER_CTX** pp_ctx)\n{\n    int ret               = 0;\n    unsigned char key[32] = {0};\n    unsigned char iv[16]  = {0};\n    const EVP_CIPHER* cip = NULL;\n\n    if(*pp_ctx != NULL)\n        EVP_CIPHER_CTX_free(*pp_ctx);\n\n    *pp_ctx = EVP_CIPHER_CTX_new();\n    if(*pp_ctx == NULL)\n        return -1;\n\n    EVP_CIPHER_CTX_init(*pp_ctx);\n\n    cip = EVP_get_cipherbyname(\"aes-256-cbc\");\n    if(cip == NULL)\n    {\n        printf(\"EVP_get_cipherbyname aes-256-cbc failed!\\n\");\n        return -1;\n    }   \n    EVP_BytesToKey(cip, EVP_md5(), NULL, password, len, 1, key, iv);\n\n    EVP_CIPHER_CTX_set_padding(*pp_ctx, 0);\n\n    ret = EVP_CipherInit_ex(*pp_ctx, cip, NULL, key, iv, 0);\n    if(ret != 1)\n    {\n        printf(\"EVP_CipherInit_ex de_evp_init failed!\\n\");\n        return -1;\n    }   \n    return 0;\n}\n\nint evp_crypto(uint8_t* in, int in_len, uint8_t* out, int* out_len, EVP_CIPHER_CTX* p_ctx)\n{\n    int ret = 0;\n    int en_len = 0;\n\n    ret = EVP_CipherUpdate(p_ctx, out, out_len, in, in_len);\n    if(ret != 1)\n        return -1;\n\n    en_len = *out_len;\n\n    EVP_CipherFinal_ex(p_ctx, out + en_len, out_len);\n\n    en_len += *out_len;\n\n    *out_len = en_len;\n\n    return 0;\n}\n\nint main(void)\n{\n    SSL_load_error_strings();\n    OpenSSL_add_ssl_algorithms();\n    SSLeay_add_ssl_algorithms();\n    SSL_library_init();\n\n    EVP_CIPHER_CTX* p_en_ctx = NULL;\n    EVP_CIPHER_CTX* p_de_ctx = NULL;\n\n    uint8_t pass[256] = {0};\n    uint8_t buffer[256 + 256] = {0};\n    int buffer_len = 0;\n\n    uint8_t en_buffer[256 + 256] = {0};\n    int en_buffer_len = 0;\n\n    uint8_t de_buffer[256 + 256] = {0};\n    int de_buffer_len = 0;\n\n\n    uint8_t en_copy_buffer[256 + 256] = {0};\n    int en_copy_buffer_len = 0;\n\n    //set password\n    memset(pass, '1', sizeof(pass));\n\n    //set ori buffer(plainttext)\n    memset(buffer, '1', 250);\n    buffer_len = 250;\n\n    if(-1 == en_evp_init(pass, sizeof(pass), &amp;p_en_ctx))\n    {\n        printf(\"en_evp_init en ctx failed!\\n\");\n        return -1;\n    }\n\n    if(-1 == evp_crypto(buffer, buffer_len, en_buffer, &amp;en_buffer_len, p_en_ctx))\n    {\n        printf(\"evp_crypto encrypt failed!\\n\");\n        return -1;\n    }\n\n    memcpy(en_copy_buffer, en_buffer, en_buffer_len);\n    en_copy_buffer_len = en_buffer_len;\n\n    printf(\"evp_crypto p_en_ctx success buffer len :%d en len: %d\\n\", buffer_len, en_buffer_len);\n\n    if(-1 == de_evp_init(pass, sizeof(pass), &amp;p_de_ctx))\n    {\n        printf(\"de_evp_init de ctx failed!\\n\");\n        return -1;\n    }\n\n    if(-1 == evp_crypto(en_buffer, en_buffer_len, de_buffer, &amp;de_buffer_len, p_de_ctx))\n    {\n        printf(\"evp_crypto encrypt failed!\\n\");\n        return -1;\n    }\n\n    printf(\"de_buffer : %s  de_buffer_len:%d\\n\", de_buffer, de_buffer_len);\n\n#if 0\n//second init\n    if(-1 == de_evp_init(pass, sizeof(pass), &amp;p_de_ctx))\n    {\n        printf(\"de_evp_init de ctx failed!\\n\");\n        return -1;\n    }\n#endif\n\n    memset(de_buffer, 0, sizeof(de_buffer));\n    de_buffer_len = 0;\n    if(-1 == evp_crypto(en_copy_buffer, en_copy_buffer_len, de_buffer, &amp;de_buffer_len, p_de_ctx))\n    {\n        printf(\"evp_crypto encrypt failed!\\n\");\n        return -1;\n    }\n\n    printf(\"de_buffer : %s  de_buffer_len:%d\\n\", de_buffer, de_buffer_len);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>no \"second init\" \noutput information</p>\n\n<pre><code>evp_crypto p_en_ctx success buffer len :250 en len: 256\nde_buffer : 1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111  de_buffer_len:250\nde_buffer : 1111111111-ArF\u0525K111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111  de_buffer_len:266\n</code></pre>\n\n<p>add \"second init\" \noutput information</p>\n\n<pre><code>evp_crypto p_en_ctx success buffer len :250 en len: 256\nde_buffer : 1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111  de_buffer_len:250\nde_buffer : 1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111  de_buffer_len:250\n</code></pre>\n\n<p>openssl version\nOpenSSL 1.0.2g  1 Mar 2016</p>\n\n<p>makefile\ngcc -Wall  -g -L/usr/lib/x86_64-linux-gnu/ evp.c -lssl -lcrypto</p>\n\n<ol>\n<li>Why the setting \"EVP_CIPHER_CTX_set_padding(*pp_ctx, 0);\" is invalid?</li>\n<li>Why the second decryption error?</li>\n<li>Why re-initializing dectx can be decrypted correctly, it needs to be initialized before each decryption?</li>\n</ol>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 119, "user_id": 7458049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1588840764489336/picture?type=large", "display_name": "0x6261627564", "link": "https://stackoverflow.com/users/7458049/0x6261627564"}, "edited": false, "score": 1, "creation_date": 1575439934, "post_id": 59169553, "comment_id": 104562695, "body": "<a href=\"https://stackoverflow.com/questions/1202687/how-do-i-get-a-specific-range-of-numbers-from-rand\" title=\"how do i get a specific range of numbers from rand\">stackoverflow.com/questions/1202687/&hellip;</a>"}, {"owner": {"reputation": 731, "user_id": 1137142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78afc3d3f69e007c5d548a75f865a497?s=128&d=identicon&r=PG", "display_name": "matb", "link": "https://stackoverflow.com/users/1137142/matb"}, "edited": false, "score": 2, "creation_date": 1575440302, "post_id": 59169553, "comment_id": 104562796, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/1202687/how-do-i-get-a-specific-range-of-numbers-from-rand\">How do I get a specific range of numbers from rand()?</a>"}, {"owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "edited": false, "score": 0, "creation_date": 1575442268, "post_id": 59169553, "comment_id": 104563422, "body": "Please do your own research before posting the question."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1575460163, "post_id": 59169553, "comment_id": 104572260, "body": "Are long sequences required? If so, you may need to generate each digit separately and store them in an array."}], "answers": [{"comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 2, "creation_date": 1575456108, "post_id": 59173554, "comment_id": 104570152, "body": "Your code specifies a max length while the question ask for a specific length. What is not specified is if the random number may start with the digit 0. If yes, your code is correct and <code>min=0</code>. Otherwise <code>min=max&#47;10</code>. You must not decrement <code>max</code>. It is an error in your code."}, {"owner": {"reputation": 99, "user_id": 8442737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uYucP.jpg?s=128&g=1", "display_name": "Saksham Chaudhary", "link": "https://stackoverflow.com/users/8442737/saksham-chaudhary"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1575568314, "post_id": 59173554, "comment_id": 104619212, "body": "You are correct @chmike, i have edited the post. Thank you so much for your valuable contribution."}], "tags": [], "owner": {"reputation": 99, "user_id": 8442737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uYucP.jpg?s=128&g=1", "display_name": "Saksham Chaudhary", "link": "https://stackoverflow.com/users/8442737/saksham-chaudhary"}, "is_accepted": true, "score": 0, "last_activity_date": 1575568092, "last_edit_date": 1575568092, "creation_date": 1575454318, "answer_id": 59173554, "question_id": 59169553, "link": "https://stackoverflow.com/questions/59169553/how-can-i-generate-a-random-number-with-a-specified-length-in-c-using-rand/59173554#59173554", "title": "How can I generate a random number with a specified length in c using rand()?", "body": "<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \n#include&lt;time.h&gt; \n\nint main(void) \n{ \n    int l,max=1,min=0;\n    printf(\"Please enter the length:  \"); \n    scanf(\"%d\",&amp;l); \n\n    srand(time(0)); \n    while(l&gt;0){\n        max*=10;\n        l--;\n    }\n    min=max/10;\n    printf(\" %d \", min + rand() % (max - min));\n\n    return 0; \n} \n</code></pre>\n\n<p>srand()is used to return different random value at every compilation.</p>\n\n<p>You can modify it for two inputs accordingly.</p>\n"}], "owner": {"reputation": 3, "user_id": 12477816, "user_type": "registered", "profile_image": "https://graph.facebook.com/2433050786806221/picture?type=large", "display_name": "Nemwi Mpfunya", "link": "https://stackoverflow.com/users/12477816/nemwi-mpfunya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "closed_date": 1575483422, "accepted_answer_id": 59173554, "answer_count": 1, "score": -3, "last_activity_date": 1575568092, "creation_date": 1575437925, "last_edit_date": 1575454518, "question_id": 59169553, "link": "https://stackoverflow.com/questions/59169553/how-can-i-generate-a-random-number-with-a-specified-length-in-c-using-rand", "closed_reason": "Needs details or clarity", "title": "How can I generate a random number with a specified length in c using rand()?", "body": "<p>How can I generate a random number with a specified length in c? I have to ask the user for a specified length for two sequences and based off of that responses I generate 2 random numbers of those lengths. </p>\n\n<pre><code>Please enter 2 max lengths for your sequences: 3 6\n\nSeq1:\n456\nseq2\n937123\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "sorting", "bubble-sort"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575434437, "post_id": 59168971, "comment_id": 104561265, "body": "printArray calls sortArray which calls printArray which calls sortArray, etc... Is that intentional?"}, {"owner": {"reputation": 13, "user_id": 12477600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfe0f8b6cc8b5900d688eed0f268a3f6?s=128&d=identicon&r=PG&f=1", "display_name": "gracie", "link": "https://stackoverflow.com/users/12477600/gracie"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575434999, "post_id": 59168971, "comment_id": 104561371, "body": "No, I didn&#39;t mean to do that, silly mistake. Thank you, it works great now!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12477600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfe0f8b6cc8b5900d688eed0f268a3f6?s=128&d=identicon&r=PG&f=1", "display_name": "gracie", "link": "https://stackoverflow.com/users/12477600/gracie"}, "edited": false, "score": 1, "creation_date": 1575434715, "post_id": 59169066, "comment_id": 104561322, "body": "Okay, that makes sense! Thank you!"}], "tags": [], "owner": {"reputation": 72, "user_id": 6607987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae20c2dde3d2d314a85dc856962ae73a?s=128&d=identicon&r=PG&f=1", "display_name": "DevMS", "link": "https://stackoverflow.com/users/6607987/devms"}, "is_accepted": true, "score": 2, "last_activity_date": 1575434908, "last_edit_date": 1575434908, "creation_date": 1575434504, "answer_id": 59169066, "question_id": 59168971, "link": "https://stackoverflow.com/questions/59168971/no-errors-or-warnings-but-my-code-output-is-an-endless-stream/59169066#59169066", "title": "No errors or warnings but my code output is an endless stream", "body": "<p>you are calling printArray forever now.\nhere is what your code do </p>\n\n<pre><code> main -&gt; printArray -&gt; sortArray \u2510\n              ^\n              \u2514------------------\u2518\n</code></pre>\n\n<p>to solve this problem. you just delete call printArray() in your sortArray method.</p>\n\n<pre><code>    //pass ordered list back to printArray \n    printArray (size,wordPtr);\n</code></pre>\n\n<p>this is wrong way to pass ordered list back to printArray\nthis is just call printArray() method again.</p>\n\n<p>in this code you don't need to pass any return because you are using pointer.</p>\n"}], "owner": {"reputation": 13, "user_id": 12477600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfe0f8b6cc8b5900d688eed0f268a3f6?s=128&d=identicon&r=PG&f=1", "display_name": "gracie", "link": "https://stackoverflow.com/users/12477600/gracie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59169066, "answer_count": 1, "score": 0, "last_activity_date": 1575434908, "creation_date": 1575433786, "question_id": 59168971, "link": "https://stackoverflow.com/questions/59168971/no-errors-or-warnings-but-my-code-output-is-an-endless-stream", "title": "No errors or warnings but my code output is an endless stream", "body": "<p>I am writing a program to sort an array of string pointers using a bubble sort.\nMy code so far doesn't have any errors or warnings, but when I run it the output keeps looping and looping.</p>\n\n<p>I think it may be a problem in my sorting but I'm not positive.</p>\n\n<p>here is my main:</p>\n\n<pre><code>int main(int argc,char**argv)\n{\n    int size =0;\n\n    //array of string pointers\n    char *wordPtr[] ={\"Eric\", \"Andrew\", \"Sean\", \"Daniel\"};\n\n    //size is the size of the string\n    size = (sizeof(wordPtr))/(sizeof(wordPtr[0]));\n\n    //call funtion to print list\n    printArray(size,wordPtr);\n\n}\n</code></pre>\n\n<p>I have a function for printing the list:</p>\n\n<pre><code>void printArray(int size,char**wordPtr)\n{\n\n    //call sortArray to sort the list\n    sortArray(size,wordPtr);\n\n    //print ordered list    \n    printf(\"Ordered List:\\n\");\n    printf(\"--------------\\n\");\n    printf(\"%s\\n\",wordPtr[0]);\n    printf(\"%s\\n\",wordPtr[1]);\n    printf(\"%s\\n\",wordPtr[2]);\n    printf(\"%s\\n\",wordPtr[3]);\n\n}\n</code></pre>\n\n<p>and my sort function which I suspect is the problem. I'm also not sure if I'm sorting the strings correctly. I get the feeling I'm just missing something silly but I can't seem to see it.</p>\n\n<pre><code>void sortArray(int size, char**wordPtr)\n{\n    char * temp = NULL;\n    int x = 3;\n    int j;\n    int i; \n\n    //sort list\n    for (j=0;j&lt;=x;j++)\n    {\n\n        for (i=0; i&lt; size-1; i++)\n        {\n\n            if (wordPtr[i][0] &gt; wordPtr[i+1][0])\n            {\n\n                temp = wordPtr[i];\n                wordPtr[i] = wordPtr[i+1];\n                wordPtr[i+1] = temp;\n            }\n\n        }\n    }\n\n    //pass ordered list back to printArray \n    printArray (size,wordPtr);\n\n}\n</code></pre>\n\n<p>Anything helps! </p>\n"}, {"tags": ["c", "memory-leaks", "runtime-error", "corruption", "double-free"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575432040, "post_id": 59168723, "comment_id": 104560723, "body": "If not already done so, suggest you run your program with <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> which is very good at finding many memory errors. The other thing to do is to wrap your <code>malloc</code> and <code>free</code> calls so that they output or log traces of allocated and freed addresses."}, {"owner": {"reputation": 47, "user_id": 12204172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ccb80ed970191c809e4987060a765d?s=128&d=identicon&r=PG&f=1", "display_name": "lunastellae", "link": "https://stackoverflow.com/users/12204172/lunastellae"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575432333, "post_id": 59168723, "comment_id": 104560792, "body": "Not sure if this helps, but if I comment out the free(q_curr) line, I get a segmentation error at line 141 which is <code>q_curr-&gt;prev-&gt;next = NULL;</code>"}, {"owner": {"reputation": 47, "user_id": 12204172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ccb80ed970191c809e4987060a765d?s=128&d=identicon&r=PG&f=1", "display_name": "lunastellae", "link": "https://stackoverflow.com/users/12204172/lunastellae"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575432430, "post_id": 59168723, "comment_id": 104560810, "body": "@kaylum this is my first time using C and I&#39;ve tried to use valgrind, but I just don&#39;t understand how to use it and I&#39;m on a bit of a time crunch unfortunately..."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1575432652, "post_id": 59168723, "comment_id": 104560873, "body": "Not related to your problem and I think this is the first time I&#39;ve said this to anyone - but you have way too many comments. You have a comment for almost every line of code in some places and that makes the code almost unreadable. Comments should be used appropriately and not for things which are self evident from the code itself (e.g. &quot;increase number of file requests by 1&quot;)."}, {"owner": {"reputation": 47, "user_id": 12204172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ccb80ed970191c809e4987060a765d?s=128&d=identicon&r=PG&f=1", "display_name": "lunastellae", "link": "https://stackoverflow.com/users/12204172/lunastellae"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575433000, "post_id": 59168723, "comment_id": 104560954, "body": "Okay, I will fix it. My main concern is getting my program to work at this point though."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1575436610, "post_id": 59168723, "comment_id": 104561791, "body": "I think you assume that having a pointer to something means it needs to be freed. And I think the <code>free(loc)</code> is incorrect. So you\u2019re freeing memory that\u2019s still being used. As for why removing all frees would segfault means there\u2019s some other issue at play here. Also there\u2019s memory leaks in some cases."}], "owner": {"reputation": 47, "user_id": 12204172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ccb80ed970191c809e4987060a765d?s=128&d=identicon&r=PG&f=1", "display_name": "lunastellae", "link": "https://stackoverflow.com/users/12204172/lunastellae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575431812, "creation_date": 1575431812, "question_id": 59168723, "link": "https://stackoverflow.com/questions/59168723/how-do-i-fix-this-double-free-or-corruption-fasttop-error-in-my-disk-schedulin", "title": "How do I fix this double free or corruption (fasttop) error in my disk scheduling simulation C program?", "body": "<p><strong>Context:</strong> I am currently working on an assignment where I am to simulate a shortest-seek-time-first disk scheduling algorithm for a disk with 800 tracks and 1-5 track requests per file request (am supposed to enter 1000 file requests). I am using a doubly-linked list to store them in a queue, then when I need to process (remove) another request, I am searching for the next request with shortest seek time, then moving it to the front of the queue and removing it. I have included the entire program for context.</p>\n\n<p>Anyways, I am getting the error \"double free or corruption (fasttop)\" error when trying to run the program, and I just cannot figure out what is causing the error nor how to fix it. I have tried a debugger and it claims the error happens on line 56 (which I just don't believe at all). I've tried removing my free()s, but then I get a segmentation error (or maybe I will get both anyways). The free()s are near the end of my RemoveFromList() function if that is helpful. Any help would be greatly appreciated. Thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;values.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdbool.h&gt;\n\n// linked list to represent the queue\nstruct Queue_Node{\n  int trackNumber; // track number of the track request in the queue\n  struct Queue_Node *next; // pointer to the next node in queue\n  struct Queue_Node *prev; // pointer to the previous node in queue\n};\n\nstruct Queue_Struct{\n  struct Queue_Node *q_head; // pointer to first node in queue\n  struct Queue_Node *q_tail; // pointer to last node in queue\n};\n\n// create the queue\nstruct Queue_Struct sstf;\n\n// function declarations\nint trackReqs(void);\nint numTrack(void);\nvoid AddToList(struct Queue_Struct *req_queue, int trackNum);\nint RemoveFromList(struct Queue_Struct *req_queue);\nvoid ProcessReqs(struct Queue_Struct *req_queue);\n\n// global variable declarations/initializations\nunsigned seed;\nint fileReqs;\nbool first = true;\nfloat diff;\nfloat totalHeadMove = 0;\nint currTrack = 0;\nint totalReqs = 0;\n\nvoid main(){\n  sstf.q_head = NULL; // initialize head of queue to null\n  sstf.q_tail = NULL; // initialize tail of queue to null\n  printf(\"Seed for the random number generator: \");\n  scanf(\"%d\", &amp;seed); // get user input as integer for seed for random number generation\n  srand(seed);\n  printf(\"Number of file requests: \");\n  scanf(\"%d\", &amp;fileReqs); // get user input as integer for number of file requests\n\n  // local variable declarations/initializations\n  int numFileReqs = 0;\n  float average;\n\n  do { // do this...\n    int numTrackReqs = trackReqs(); // call function to get a random number between 1 and 5 to represent the number of track requests for the current file request\n    for (int i = 0; i &lt; numTrackReqs; i++) { // for each track request for the current file request...\n      int trackNum = numTrack(); // call function to get a random number between 0 and 799 to represent the number of the track requested\n      AddToList(&amp;sstf, trackNum); // call function to add the track request to the queue\n      first = false;\n    }\n    int nextTrack = RemoveFromList(&amp;sstf); // call function to remove the next (first) track request from the queue (signifying that the disk head will be moved to that track) and have that track returned\n    diff = abs((float)nextTrack - (float)currTrack); // calculate the head movement for the current track request\n    totalHeadMove += diff; // add the head movement for the current track request to the total head movement\n    totalReqs++; // increase number of total track requests by 1\n    currTrack = nextTrack; // make the current track now the next track\n    numFileReqs++; // increase number of file requests by 1\n  } while(numFileReqs &lt;= fileReqs); // ...for each file request\n  ProcessReqs(&amp;sstf); // call function to remove the remaining track requests from the queue\n  average = totalHeadMove / (float) totalReqs; // calculate the average total head movement for each file request and print the result\n  printf(\"Average head movement: %5.2f\\n\", average);\n}\n\nint trackReqs(void){\n  int rand_num = (rand() % (5 - 1 + 1)) + 1; // generate random number from 1 to 5 representing number of track requests for the current file request\n  return rand_num;\n}\n\nint numTrack(void){\n  int rand_num = rand() % 800; // generate random number from 0 to 799 representing\n  return rand_num;\n}\n\nvoid AddToList(struct Queue_Struct *req_queue, int trackNum){\n\n  struct Queue_Node *newnode; // create new node to be inserted into the queue linked list\n  newnode = (struct Queue_Node *) malloc(sizeof(struct Queue_Node)); // create the required space for the node in the queue linked list\n  newnode-&gt;next = NULL; // initialize the next pointer of the newly created node to null (as it is being added to the end of the queue)\n  newnode-&gt;prev = req_queue-&gt;q_tail; // initialize the prev pointer of the newly created node to the node at the tail of the queue (as it is being inserted after the current last node)\n  newnode-&gt;trackNumber = trackNum; // insert given track number data into the new node\n\n  // if the queue is initially empty...\n  if(req_queue-&gt;q_tail == NULL){\n    req_queue-&gt;q_head = newnode; // set queue head pointer to the new node\n    req_queue-&gt;q_tail = newnode; // set queue tail pointer to the new node\n    return;\n  }\n  // if not, then...\n  req_queue-&gt;q_tail-&gt;next = newnode; // link new node to the end of the queue\n  req_queue-&gt;q_tail = newnode; // set queue tail pointer to the new node\n  return;\n}\n\nint RemoveFromList(struct Queue_Struct *req_queue){\n\n  struct Queue_Node *loc; // create a new temporary node to hold the first request from the queue to be removed\n  struct Queue_Node *q_curr; // create a new temporary node to represent the current node when traversing the queue\n  int first_req; // integer representing the track number of the first request in the queue\n  int req_index_count = 0; // integer representing the position in the queue of the current track request\n  int req_index = 0; // integer representing the position in the queue of the track with least difference from the current track\n  float track_diff = abs((float)currTrack - (float)req_queue-&gt;q_head-&gt;trackNumber); // float representing the difference between the track number of the current track request and the current lowest difference track number\n  float curr_diff; // float representing the difference between the current track in the trasversal of the queue and the current lowest difference track number\n\n  // if the queue is empty...\n  if(req_queue-&gt;q_head == NULL){\n    printf(\"***Error - Queue is Empty***\\n\"); // print error message\n    return(NULL); // return null as the track number for first request in the queue\n  }\n\n  // if there is only one request in the queue...\n  if(req_queue-&gt;q_head == req_queue-&gt;q_tail){\n    loc = req_queue-&gt;q_head; // store the first request in the queue in the temporary node\n    first_req = loc-&gt;trackNumber; // get the track number of the first request in the queue\n    req_queue-&gt;q_tail = NULL; // set queue tail pointer to null (empty queue)\n    req_queue-&gt;q_head = NULL; // set queue head pointer to null (empty queue)\n    return first_req; // return the track number of the first request in the queue\n  }\n\n  q_curr = req_queue-&gt;q_head-&gt;next; // initialize the current track request of the traversal to the second request in the queue (because req_index and track_diff are initialized to that of the head of the queue)\n  // if there are 2 or more requests in the queue, traverse the queue and...\n  while(q_curr != NULL){\n    req_index_count++; // increase index of queue by 1\n    curr_diff = abs((float)currTrack - (float)q_curr-&gt;trackNumber); // calculate the difference between the current current track and the current track of the traversal's track numbers\n    // if the current track of the traversal is closer to the current track than the previous closest...\n    if(curr_diff &lt; track_diff){\n      req_index = req_index_count; // store the current track of the traversal's index in the queue\n      track_diff = curr_diff; // store the difference between the current track of the traversal and the current track as the new shortest seek time\n    }\n    q_curr = q_curr-&gt;next; // the current track request is now the next track request in the queue\n  }\n\n  // if the track request needed to be moved to the head of the queue is at the tail of the queue...\n  if(req_index == req_index_count){\n    q_curr-&gt;prev-&gt;next = NULL; // remove this track request from current position in queue by linking the previous node to NULL\n    req_queue-&gt;q_tail = q_curr-&gt;prev; // remove this track request from current position in queue by setting the previous node as the queue's tail\n    req_queue-&gt;q_head-&gt;prev = q_curr; // link the head of the queue backward to the current track request\n    q_curr-&gt;next = req_queue-&gt;q_head; // link the current track request forward to the head of the queue\n    req_queue-&gt;q_head = q_curr; // set the current tracj request as the new head of the queue\n  }\n\n  // if the track request needed to be moved to the head of the queue is not already at the head of the queue and it is also not at the tail of the queue...\n  if(req_index != 0 &amp;&amp; req_index != req_index_count){\n    req_index_count = 0; // reset queue index counter\n    q_curr = req_queue-&gt;q_head-&gt;next; // reset current temporary node to the head of the queue\n    //travserse the queue and...\n    while(q_curr != NULL){\n      req_index_count++; // increase index of queue by 1\n      // if we have arrived at the track request we need to move to the front of the queue...\n      if(req_index == req_index_count){\n        q_curr-&gt;prev-&gt;next = q_curr-&gt;next; // remove this track request from current position in queue by linking the two nodes on either side forward\n        q_curr-&gt;next-&gt;prev = q_curr-&gt;prev; // remove this track request from current position in queue by linking the two nodes on either side backward\n        req_queue-&gt;q_head-&gt;prev = q_curr; // link the head of the queue backward to the current track request\n        q_curr-&gt;next = req_queue-&gt;q_head; // link the current track request forward to the head of the queue\n        req_queue-&gt;q_head = q_curr; // set the current track request as the new head of the queue\n        break;\n      }\n      q_curr = q_curr-&gt;next; // the current track request is now the next track request in the queue\n    }\n  }\n\n  loc = req_queue-&gt;q_head; // store the first request in the queue in the temporary node\n  first_req = loc-&gt;trackNumber; // get the track number of the first request in the queue\n  loc-&gt;next-&gt;prev = NULL; // set the previous node of the next track request to NULL as it will be the head of the queue\n  req_queue-&gt;q_head = loc-&gt;next; // set the next request in the queue now as the first request\n  free(loc); // free the temporary node holding head of queue\n  free(q_curr); // free the temporary node holding current track request during traversal of the queue\n  return first_req; // return the track number of the first request in the queue\n}\n\nvoid ProcessReqs(struct Queue_Struct *req_queue){\n\n  while(req_queue-&gt;q_head != NULL){ // while the queue is not empty...\n    int nextTrack = RemoveFromList(&amp;sstf); // call function to remove the next (first) track request from the queue (signifying that the disk head will be moved to that track) and have that track returned\n    diff = abs((float)nextTrack - (float)currTrack); // calculate the head movement for the current track request\n    totalHeadMove += diff; // add the head movement for the current track request to the total head movement\n    totalReqs++; // increase number of total track requests by 1\n    currTrack = nextTrack; // make the current track now the next track\n  }\n  return;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 357, "user_id": 4406954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b8cda217e3baf25c6f911ff6279be0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Montambault", "link": "https://stackoverflow.com/users/4406954/kevin-montambault"}, "edited": false, "score": 1, "creation_date": 1575430360, "post_id": 59168503, "comment_id": 104560408, "body": "You might want to look into Suffix Trees?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1575431526, "post_id": 59168503, "comment_id": 104560648, "body": "This question is too broad for Stackoverflow. There are many possible answers dependent on your exact requirements, how efficient the solution needs to be, what data structures you have already been taught or can be expected to know, etc. A simple solution would be to have a list that stores unique strings and the count of each string. Then read each string from the file, find it in the list and increment the count, if not found then create a new list entry and set count to 1. It&#39;s not a very efficient solution but it&#39;s a start and hopefully can lead you to better things."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1575440587, "post_id": 59168503, "comment_id": 104562877, "body": "It all depends on how you many words you will have and how long they are. There are over 250000 words in the Linux <code>words</code> list alone. A <i>ternary tree</i> is tailor made for prefix matching and a <i>ternary tree</i> that provides a <i>refcount</i> would allow you to simply add your words and then traverse the tree to find the maximum <i>refcount</i> and you are done. The implementation is non-trivial. Github has such a ternary search tree."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1575448966, "post_id": 59168503, "comment_id": 104566181, "body": "What do you call a string ? Is it a line from the text file ? Is it a word ? Is it a sentence ?"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1575440880, "post_id": 59169832, "comment_id": 104562969, "body": "Why not simply declare a <i>pointer-to-array</i>, e.g. <code>char (*word)[32];</code> then  you can have a single <code>malloc&#47;realloc</code> and add words as required. (good choice of <code>32</code> chars for your word - max word length in the unabridged non-medical dictionary is <code>29-chars</code>, so <code>32</code> is just right) Only nit above would be the lack of <code>if (!word[ndx]) { perror (&quot;malloc-word[ndx]&quot;); exit(EXIT_FAILURE); }</code> but as long as you mention that you must always validate EVERY allocation, the omission for brevity is fine."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1575441351, "post_id": 59169832, "comment_id": 104563129, "body": "I know the limitations of what you are doing is apparent to you and I, but for those just learning C, it may also help if you explain how you provide a fixed number of pointers in an array and then allocate a block of memory to hold each word and assign the starting address of each block to the pointers in sequence. But you do have a good basic approach that will point them in the right direction. Worthy of the UV."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1575446153, "post_id": 59169832, "comment_id": 104564961, "body": "The question is a about a string, not a word. It could be a substring of the input string where a substring is at least 2 characters. The question is not clear enough."}, {"owner": {"reputation": 168, "user_id": 776507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9b3b917419389ce8f4b731c7c4597?s=128&d=identicon&r=PG", "display_name": "Level 42", "link": "https://stackoverflow.com/users/776507/level-42"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1575475787, "post_id": 59169832, "comment_id": 104581426, "body": "Thanks @DavidRankin-ReinstateMonica, Yes, lots of limitations I touched in the introduction. Maybe I should add a comment at each caveat. chmike, agreed. &quot;a string&quot; if passed in is an easy task. &quot;a string&quot; if meaning any substring which may repeat in the sentence is a more complex undertaking.   My hope was that by seeing how &#39;word&#39; substrings can be counted, the OP could expand the notion to whatever &quot;a string&quot; means to him."}], "tags": [], "owner": {"reputation": 168, "user_id": 776507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9b3b917419389ce8f4b731c7c4597?s=128&d=identicon&r=PG", "display_name": "Level 42", "link": "https://stackoverflow.com/users/776507/level-42"}, "is_accepted": false, "score": 1, "last_activity_date": 1575440477, "last_edit_date": 1575440477, "creation_date": 1575439533, "answer_id": 59169832, "question_id": 59168503, "link": "https://stackoverflow.com/questions/59168503/how-to-get-string-most-appears-in-text-file-c/59169832#59169832", "title": "how to get string most appears in text file c", "body": "<p>This code logs most frequently used words, but be aware, it has limitations on the number of words it can process (without crashing,) and number of matches. Also note it does not handle tiebreakers. You can replace \"word\" with a substring is that's what you are after.\nNote: your original request to find \"a string\" is not useful because \"a string\" could be the entire string, entire string - 1 character, - 2 characters, etc. You need to resolve what you mean by \"a string\".\nHopefully, this code gives you a starting point.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n\nint main(void)\n{\n    char test[] = \"This question is too broad for Stackoverflow. There are many possible answers dependent on your exact requirements, how efficient the solution needs to be, what data structures you have already been taught or can be expected to know, etc. A simple solution would be to have a list that stores unique strings and the count of each string. Then read each string from the file, find it in the list and increment the count, if not found then create a new list entry and set count to 1. It's not a very efficient solution but it's a start and hopefully can lead you to better things.\";\n    char *word[256];\n    char most[32];\n    int times=0, ndx=0, ix,jx;\n    char* cp, *token;\n    char* delim = \"- . ;,\";\n    int distribution[256]={0};\n\n    cp = strlwr(test);  // lower case to normalize\n\n    // split text into words\n    token = strtok(test, delim); \n    while (token != NULL) { \n        word[ndx] = malloc (strlen(token)+1); \n        strcpy(word[ndx++],token);\n        token = strtok(NULL, delim); \n    } \n\n    // count how many times a word is used\n    for(ix=0; ix &lt; ndx-1; ix++)\n    {\n        for(jx=ix+1; jx &lt; ndx;jx++)\n            if (strcmp(word[ix], word[jx]) == 0)\n                distribution[ix]++;\n    }\n\n    // now find the most frequently used word\n    for(ix=0; ix &lt; ndx; ix++)\n    {\n        if (distribution[ix] &gt; times)\n        {\n            times++;\n            strcpy(most,word[ix]);\n        }\n    }\n\n    printf(\"most frequently used word was \\\"%s\\\", used %d times.\\n\", most, times);\n\n    return 0;\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<p>most frequently used word was \"a\", used 4 times.</p>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 10973714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fFjJ.jpg?s=128&g=1", "display_name": "heeat", "link": "https://stackoverflow.com/users/10973714/heeat"}, "is_accepted": false, "score": 0, "last_activity_date": 1575446182, "creation_date": 1575446182, "answer_id": 59171326, "question_id": 59168503, "link": "https://stackoverflow.com/questions/59168503/how-to-get-string-most-appears-in-text-file-c/59171326#59171326", "title": "how to get string most appears in text file c", "body": "<p>You could refer a book (PDF free) called <strong>C programming language by Kernighan and Ritchie</strong>, within the first chapter you will find programs regarding the <strong>Word count</strong> that could be your starting point find the count and how they are getting it and then add some code to detect the word which appears the most Good Luck !</p>\n"}], "owner": {"reputation": 51, "user_id": 12418376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174249272964395/picture?type=large", "display_name": "Felipe Cruz", "link": "https://stackoverflow.com/users/12418376/felipe-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1575447204, "answer_count": 2, "score": -2, "last_activity_date": 1575446182, "creation_date": 1575429798, "question_id": 59168503, "link": "https://stackoverflow.com/questions/59168503/how-to-get-string-most-appears-in-text-file-c", "closed_reason": "Needs more focus", "title": "how to get string most appears in text file c", "body": "<p>how do I get the string that appears most frequently in a text file in c?</p>\n\n<p>I need to create an algorithm that gets a string that has been cited more often in a text file and then writes it, but I have no idea where to start</p>\n"}, {"tags": ["c", "pointers", "string-literals"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1575433672, "post_id": 59168499, "comment_id": 104561077, "body": "Doing <code>p=r</code> makes <code>p</code> points to the stack since <code>r</code> was..."}, {"owner": {"reputation": 113, "user_id": 11559568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wIX5ITkRAgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfYNO-8tgnuf1mFxJH7TiekDItUQ/mo/photo.jpg?sz=128", "display_name": "S E", "link": "https://stackoverflow.com/users/11559568/s-e"}, "reply_to_user": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1575434400, "post_id": 59168499, "comment_id": 104561247, "body": "Sure, that&#39;s my problem. But what if I use q right away? For example, in main, I could do something like this: \t<code>char str[5]; strcpy(str,uutilityfun(&quot;xxx&quot;)); mem(&amp;str[0],10,&quot;str[0]&quot;);</code>   How dangerous is this? What is a good alternative? Using malloc?"}], "answers": [{"tags": [], "owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "is_accepted": false, "score": 0, "last_activity_date": 1575434422, "last_edit_date": 1575434422, "creation_date": 1575433571, "answer_id": 59168948, "question_id": 59168499, "link": "https://stackoverflow.com/questions/59168499/in-c-how-to-create-a-function-that-given-a-string-literal-as-a-parameter-retu/59168948#59168948", "title": "In C, how to create a function that, given a string literal as a parameter, returns a char*? (Without allocating new memory on the heap)", "body": "<p>You can define a public variable then fill and return it in function :</p>\n\n<pre><code>char *out;\n\nchar* utilityfun(char *s)\n{\n        if(*s=='&amp;')\n                return s+1; // this case works fine\n        else\n        {\n                // char r[strlen(s)+2];   // You cannot use of non-constant array length\n                char *r = (char*)malloc(strlen(s) + 2);\n                memset(r,'*',1);\n                strcpy(r+1,s);\n                strcpy(out, r);          // Instead of char* p=r; use of this\n                free(r);                 // Then free r\n                return out;\n        }\n}\n</code></pre>\n\n<p>In main function, allocate it to get the right size :</p>\n\n<pre><code>void main()\n{\n    char *input = \"xxx\";\n\n    out = (char*)malloc(strlen(input) + 1);\n\n    char* q=utilityfun(input);\n\n    printf(\"%p\\n\",q); \n    printf(\"%s\\n\",q);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1575436069, "post_id": 59169060, "comment_id": 104561645, "body": "isn&#39;t the <code>s[0] == &#39;*&#39;</code> test superfluous.... (besides, interesting idea!)"}, {"owner": {"reputation": 113, "user_id": 11559568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wIX5ITkRAgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfYNO-8tgnuf1mFxJH7TiekDItUQ/mo/photo.jpg?sz=128", "display_name": "S E", "link": "https://stackoverflow.com/users/11559568/s-e"}, "edited": false, "score": 0, "creation_date": 1575753195, "post_id": 59169060, "comment_id": 104673594, "body": "Great answer! It&#39;s exactly what I was looking for! Many many thanks Dietrich!"}, {"owner": {"reputation": 113, "user_id": 11559568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wIX5ITkRAgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfYNO-8tgnuf1mFxJH7TiekDItUQ/mo/photo.jpg?sz=128", "display_name": "S E", "link": "https://stackoverflow.com/users/11559568/s-e"}, "edited": false, "score": 0, "creation_date": 1575767208, "post_id": 59169060, "comment_id": 104676233, "body": "could an alternative solution be declaring a static array inside utilityfun_?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1575902992, "post_id": 59169060, "comment_id": 104712367, "body": "That has two problems: (1) the function would always return the same pointer, so if you call it twice, the second call will overwrite the first, and (2) the allocation size is fixed, so it won&#39;t work for longer strings."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 3, "last_activity_date": 1575434476, "creation_date": 1575434476, "answer_id": 59169060, "question_id": 59168499, "link": "https://stackoverflow.com/questions/59168499/in-c-how-to-create-a-function-that-given-a-string-literal-as-a-parameter-retu/59169060#59169060", "title": "In C, how to create a function that, given a string literal as a parameter, returns a char*? (Without allocating new memory on the heap)", "body": "<p>Given that it only needs to work with string literals\u2026 you can use a macro.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define utilityfun(x) utilityfun_(\"*\" x)\n\nchar *utilityfun_(char *s) {\n    if (s[0] == '*' &amp;&amp; s[1] == '&amp;') {\n        return s + 2;\n    }\n    return s;\n}\n\nint main(int argc, char **argv) {\n    char *a = utilityfun(\"eee\");\n    char *b = utilityfun(\"&amp;fff\");\n    // Prints \"a = *eee; b = fff;\\n\"\n    printf(\"a = %s; b = %s;\\n\", a, b);\n}\n</code></pre>\n\n<p>This is a pretty ugly hack but it doesn't allocate memory at runtime. It only works with string literals, because it uses string literal concatenation to avoid allocating\u2014in C, <code>\"abc\" \"def\"</code> becomes <code>\"abcdef\"</code>. This does not work with non-literals, e.g., <code>\"abc\" x</code> does not work.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 11559568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wIX5ITkRAgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfYNO-8tgnuf1mFxJH7TiekDItUQ/mo/photo.jpg?sz=128", "display_name": "S E", "link": "https://stackoverflow.com/users/11559568/s-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1575767789, "creation_date": 1575767789, "answer_id": 59231670, "question_id": 59168499, "link": "https://stackoverflow.com/questions/59168499/in-c-how-to-create-a-function-that-given-a-string-literal-as-a-parameter-retu/59231670#59231670", "title": "In C, how to create a function that, given a string literal as a parameter, returns a char*? (Without allocating new memory on the heap)", "body": "<p>I think Dietrich's solution is the best for my problem, but would this be an alternative solution? Are there major drawbacks to this approach?</p>\n\n<pre><code>{\n    static char arr[10];\n    strncpy(arr,s,9);\n    if(arr[0]=='&amp;')\n    {\n        return arr+1;\n    }\n    else\n    {\n        memcpy(&amp;arr[1],&amp;arr[0],strlen(s)+1);\n        arr[0]='*';\n        return arr;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 11559568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wIX5ITkRAgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfYNO-8tgnuf1mFxJH7TiekDItUQ/mo/photo.jpg?sz=128", "display_name": "S E", "link": "https://stackoverflow.com/users/11559568/s-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 59169060, "answer_count": 3, "score": 0, "last_activity_date": 1575767789, "creation_date": 1575429748, "last_edit_date": 1575432685, "question_id": 59168499, "link": "https://stackoverflow.com/questions/59168499/in-c-how-to-create-a-function-that-given-a-string-literal-as-a-parameter-retu", "title": "In C, how to create a function that, given a string literal as a parameter, returns a char*? (Without allocating new memory on the heap)", "body": "<p>Desired outcome:</p>\n\n<p><code>utilityfun(\"&amp;xxx\")</code> must return a pointer to \"xxx\".</p>\n\n<p><code>utilityfun(\"xxx\")</code> must return a pointer to \"*xxx\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nchar* utilityfun(char *s)\n{\n        if(*s=='&amp;')\n                return s+1; // this case works fine\n        else\n        {\n                char r[strlen(s)+2];\n                memset(r,'*',1);\n                strcpy(r+1,s);\n                char* p=r;\n                return p; // !!! p is local to this stack frame!\n        }\n}\n\n\nvoid main()\n{\n    char* q=utilityfun(\"xxx\");\n    printf(\"%p\\n\",q); \n    printf(\"%s\\n\",q); // *xxx  It seems to work if I use q right way, but...\n    utilityfun(\"eee\");\n    printf(\"%s\\n\",q); // *eee\n}\n\n</code></pre>\n\n<p>Allocating a new char array on the heap is the only way? </p>\n\n<p>My problem with that is: being <code>utilityfun</code> a utility function, I don't want to have to free memory outside of it each time I use it. Is there a way?</p>\n"}, {"tags": ["c", "binary-search-tree", "nodes"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1575428907, "post_id": 59168372, "comment_id": 104560109, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal verifiable example</a>. It is not productive to try and debug or explain incomplete code. We need an exact code example that we can run to see the problem for ourselves."}], "answers": [{"tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": true, "score": 0, "last_activity_date": 1575442966, "last_edit_date": 1575442966, "creation_date": 1575440972, "answer_id": 59170105, "question_id": 59168372, "link": "https://stackoverflow.com/questions/59168372/deleting-a-node-with-2-children-from-binary-search-tree/59170105#59170105", "title": "Deleting a node with 2 children from binary search tree", "body": "<p>There is a first problem with the traverse function. When you delete a node, you need to update the pointer to it. You don't keep track of it. </p>\n\n<p>Here are the traverse and delete functions using the pointer to node pointer strategy. As you see the code becomes simpler. </p>\n\n<p>In this code <code>pRoot</code> is a pointer to the root pointer. You can then update it's value. You can set it to NULL or to another node due to the deletion. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void traverse(node** pRoot, student data){\n   if(*pRoot != NULL) {\n      traverse(&amp;((*pRoot)-&gt;leftChild),data);\n      if(strcmp((*pRoot)-&gt;data.lastname,data.lastname) == 0)\n          delete(pRoot,data);\n      traverse(&amp;((*pRoot)-&gt;rightChild),data);\n}\n\n\nvoid delete(node* pRoot, student data)\n    if(*pRoot == NULL)\n        return;\n\n  node *temp = *pRoot;\n  if((*pRoot)-&gt;leftChild == NULL)\n      *pRoot = (*pRoot)-&gt;rightChild;\n  else if((*pRoot)-&gt;rightChild == NULL){\n      *pRoot = (*pRoot)-&gt;leftChild;\n  else {\n      // both children are not NULL :\n      // we replace *pRoot with the node with \n      // min ID detached from the rightChild.\n\n      // find node with min ID in right child\n      node **pNode = &amp;((*pRoot)-&gt;rightChild);\n      while((*pNode)-&gt;leftChild != NULL)\n          pNode = &amp;((*pNode)-&gt;leftChild);\n\n      // *pNode is the node with minID\n      // its left child is NULL, \n      // but its right child may not be NULL\n\n      // we detach the node with min ID\n      node *nNode = *pNode;\n      *pNode = nNode-&gt;rightChild;\n\n      //replace *pRoot with *nNode\n      nNode-&gt;rightChild = (*pRoot)-&gt;rightChild;\n      nNode-&gt;leftChild = (*pRoot)-&gt;leftChild;\n      *pRoot = nNode;\n  }\n  free(temp);\n}\n</code></pre>\n\n<p>Combining the above traverse and delete functions into one function, you get</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void delete(node** pRoot, student *data){\n   if(*pRoot == NULL)\n       return;\n   delete(&amp;((*pRoot)-&gt;leftChild), data);\n   detele(&amp;((*pRoot)-&gt;rightChild), data);\n   if(strcmp((*pRoot)-&gt;data.lastname,data-&gt;lastname) != 0)\n       return;\n\n   // we delete *pRoot\n\n   node *temp = *pRoot;\n   if((*pRoot)-&gt;leftChild == NULL)\n       *pRoot = (*pRoot)-&gt;rightChild;\n   else if((*pRoot)-&gt;rightChild == NULL){\n       *pRoot = (*pRoot)-&gt;leftChild;\n   else {\n       // both children are not NULL :\n       // we replace *pRoot with the node with \n       // min ID detached from the rightChild.\n\n       // find node with min ID in right child\n       node **pNode = &amp;((*pRoot)-&gt;rightChild);\n       while((*pNode)-&gt;leftChild != NULL)\n           pNode = &amp;((*pNode)-&gt;leftChild);\n\n       // *pNode is the node with minID\n       // its left child is NULL, \n       // but its right child may not be NULL\n\n       // we detach the node with min ID\n       node *nNode = *pNode;\n       *pNode = nNode-&gt;rightChild;\n\n       //replace *pRoot with *nNode\n       nNode-&gt;rightChild = (*pRoot)-&gt;rightChild;\n       nNode-&gt;leftChild = (*pRoot)-&gt;leftChild;\n       *pRoot = nNode;\n   }\n   free(temp);\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12341263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KS7yi.png?s=128&g=1", "display_name": "ivnln", "link": "https://stackoverflow.com/users/12341263/ivnln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1575483621, "accepted_answer_id": 59170105, "answer_count": 1, "score": 0, "last_activity_date": 1575442966, "creation_date": 1575428760, "question_id": 59168372, "link": "https://stackoverflow.com/questions/59168372/deleting-a-node-with-2-children-from-binary-search-tree", "closed_reason": "Not suitable for this site", "title": "Deleting a node with 2 children from binary search tree", "body": "<p>I'm working on a C program that scans and stores students' records in the following format  into a binary search tree. For the BST I've defined: </p>\n\n<pre><code>struct student\n   int id\n   char firstname[20]\n   char lastname[20]\n   float score\n   char zipcode[10]\n\nstruct node\n   struct student data\n   struct node* leftChild\n   struct node* rightChild\n</code></pre>\n\n<p>One of the functions of the program should be able to delete records from the tree. The program asks the user for the last name of the student that will be deleted. </p>\n\n<p>The following is the method to traverse the BST to find the target last name to be deleted: </p>\n\n<pre><code>void traverse(node* root, student data)\n   if(root != NULL)\n      traverse(root-&gt;leftChild,data)\n      if(strcmp(root-&gt;data.lastname,data.lastname) == 0)\n         root = delete(root,data)\n      traverse(root-&gt;rightChild,data)\n</code></pre>\n\n<p>Sample student structure passed to traverse function is:</p>\n\n<pre><code>struct student John\n   int id = 1000\n   char firstname = John\n   char lastname = Adams\n   float score = 90.00\n   char zipcode = 92121\n</code></pre>\n\n<p>The delete function I'm using along with the findmin because I'm aware that I need to find the minimum in the right sub-tree of the root (target node) in order to replace the target node with it: </p>\n\n<pre><code>struct node* findmin(struct node* root)\n    while(root-&gt;leftChild != NULL)\n      root = root-&gt;leftChild\n    return root\n\nstruct node* delete(node* root, student data)\n  if(root == NULL) // check if empty tree\n    return root\n\n  // traverse towards left if ID is less\n  else if(data.iD &lt; root-&gt;data.iD)\n    root-&gt;leftChild = delete(root-&gt;leftChild,data)\n\n  // towards right if greater than ID\n  else if(data.iD &gt; root-&gt;data.iD)\n    root-&gt;rightChild = delete(root-&gt;rightChild,data)\n\n  /* else would mean target last name found */\n  else\n    /* if found node has no child */\n    if(root-&gt;leftChild == NULL &amp;&amp; root-&gt;rightChild == NULL)\n      free(root)\n      root = NULL\n\n    // 1 child\n    else if(root-&gt;leftChild == NULL) // if left child is NULL\n      struct node* temp = root\n      root = root-&gt;rightChild\n      free(temp)\n      temp = NULL\n\n    else if(root-&gt;rightChild == NULL) // if right child is NULL\n      struct node* temp = root\n      root = root-&gt;leftChild\n      free(temp) \n      temp = NULL\n\n    // 2 children\n    else\n      struct node* temp = findmin(root-&gt;rightChild)\n      root-&gt;data = temp-&gt;data\n      root-&gt;rightChild = delete(root-&gt;rightChild,temp-&gt;data)\n\n  return root;\n</code></pre>\n\n<p>What I would expect to happen here is that <code>student John</code> will be passed into traverse along with the global root of BST and when printing the BST, <code>student John</code> will be deleted and no longer there. However, when I pass student containing a target last name, the name will still be existing in the tree. Furthermore, when I test my code and pass a record to delete, occasionally, the program will delete not the targeted node but the node with the greatest student ID (the node furthest right in the tree) and/or will greet me with a segmentation fault 11. Is there a flaw in the code I am not seeing? Let me know if you need me to provide any further information to help you help me.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 2, "creation_date": 1575428550, "post_id": 59168314, "comment_id": 104560043, "body": "There is no such operator as <code>=&lt;</code>.  Are you ignoring warnings and errors from your compiler?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575428550, "post_id": 59168314, "comment_id": 104560044, "body": "C or C++? Your code doesn&#39;t compile either way. Please show us your real code otherwise we can&#39;t effectively help."}, {"owner": {"reputation": 9, "user_id": 9030570, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964080020511558/picture?type=large", "display_name": "Jewel", "link": "https://stackoverflow.com/users/9030570/jewel"}, "edited": false, "score": 0, "creation_date": 1575429421, "post_id": 59168314, "comment_id": 104560212, "body": "The code is written in C."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575429427, "post_id": 59168314, "comment_id": 104560213, "body": "Save time, enable all compiler warnings.  Review. <code>scanf(&quot;%d %d&quot;,&amp;a,&amp;b);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 617, "user_id": 10714380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geEAE.jpg?s=128&g=1", "display_name": "whiskeyo", "link": "https://stackoverflow.com/users/10714380/whiskeyo"}, "reply_to_user": {"reputation": 9, "user_id": 9030570, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964080020511558/picture?type=large", "display_name": "Jewel", "link": "https://stackoverflow.com/users/9030570/jewel"}, "edited": false, "score": 0, "creation_date": 1575430218, "post_id": 59168489, "comment_id": 104560378, "body": "@Jewel if you find the answer helpful, you can &#39;tick&#39; it, so other people now that you do not need help with the problem anymore."}, {"owner": {"reputation": 9, "user_id": 9030570, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964080020511558/picture?type=large", "display_name": "Jewel", "link": "https://stackoverflow.com/users/9030570/jewel"}, "edited": false, "score": 0, "creation_date": 1575430443, "post_id": 59168489, "comment_id": 104560426, "body": "sir i have a problem also.i want to divide 10/-5=-2"}, {"owner": {"reputation": 617, "user_id": 10714380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geEAE.jpg?s=128&g=1", "display_name": "whiskeyo", "link": "https://stackoverflow.com/users/10714380/whiskeyo"}, "reply_to_user": {"reputation": 9, "user_id": 9030570, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964080020511558/picture?type=large", "display_name": "Jewel", "link": "https://stackoverflow.com/users/9030570/jewel"}, "edited": false, "score": 0, "creation_date": 1575430617, "post_id": 59168489, "comment_id": 104560470, "body": "You should allow <code>b</code> variable to be negative, thus you should change your if statement for checking <code>a</code> and <code>b</code> values just for checking <code>a</code> value: <code>if (a &lt;= 0 &amp;&amp; b != 0)</code>. Remember you cannot divide the number by 0."}], "tags": [], "owner": {"reputation": 617, "user_id": 10714380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geEAE.jpg?s=128&g=1", "display_name": "whiskeyo", "link": "https://stackoverflow.com/users/10714380/whiskeyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575430048, "last_edit_date": 1575430048, "creation_date": 1575429610, "answer_id": 59168489, "question_id": 59168314, "link": "https://stackoverflow.com/questions/59168314/how-can-i-avoid-negative-number-through-input-or-if-user-input-negative-number-t/59168489#59168489", "title": "How can i avoid negative number through input or if user input negative number the program gives bug result?", "body": "<p>There are two problems in your code: operators and handling input. </p>\n\n<p>If you want to check whether something is less/equal to something else you should use <code>&lt;=</code> or <code>&gt;=</code>, while you are using the <code>=&lt;</code> operator, which in (at least) C/C++ does not exist.</p>\n\n<p>When it comes to getting the input and your usage of <code>float</code> variables, you should use the same placeholder as in <code>printf</code>, which for <code>float</code> variables is <code>%f</code>. If you decided to change it to <code>int</code>, you would use <code>%d</code>, but then your result will be also <code>int</code>.</p>\n\n<p>Fixed code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int times = 0;\n    float a, b, result;\n\n    while (times &lt; 5)\n    {\n        printf(\"\\nEnter two numbers : \\n\");\n        scanf(\"%f %f\", &amp;a, &amp;b);\n        if(a &lt;= 0 || b &lt;= 0)\n        {\n            printf(\"INPUT ERROR\\n\");\n        }\n        else\n        {\n            if(a &gt;= b)\n            {\n                result = a / b;\n                printf(\"The result is = %.2f\\n\", result);\n            }\n            else\n            {\n                result = b / a;\n                printf(\"The result is = %.2f\\n\", result);\n            }\n        }\n        times++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Also a tip for compiling the code - use extra flags, which will always show you error, I really like using <code>-Wall -Wextra -Werror -pedantic</code>. They give information about \"questionable\" constructions (<code>-Wall</code>), enable even more flags which are not enabled by <code>-Wall</code> (<code>-Wextra</code>), change all warnings into errors (<code>-Werror</code>) and issue all the warnings demanded by ISO C (<code>-pedantic</code>).</p>\n"}], "owner": {"reputation": 9, "user_id": 9030570, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964080020511558/picture?type=large", "display_name": "Jewel", "link": "https://stackoverflow.com/users/9030570/jewel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 771, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575445555, "creation_date": 1575428268, "last_edit_date": 1575445555, "question_id": 59168314, "link": "https://stackoverflow.com/questions/59168314/how-can-i-avoid-negative-number-through-input-or-if-user-input-negative-number-t", "title": "How can i avoid negative number through input or if user input negative number the program gives bug result?", "body": "<blockquote>\n  <p>Everytime user gives input two values. The result should be ,result = (large number/ small number) always.\n  if user gives a negative and a positive value as a input then it produces a bug.\n  <a href=\"https://i.stack.imgur.com/rvRci.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rvRci.png\" alt=\"\"></a></p>\n</blockquote>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n\nint times=0;\nfloat a,b,result;\n\nwhile(times&lt;5)\n{\n    printf(\"\\nEnter two numbers : \\n\");\n    scanf(\"%d %d\",&amp;a,&amp;b);\n    if(a =&lt; 0 || b =&lt; 0)\n    {\n        printf(\"INPUT ERROR\\n\");\n    }\n    else\n    {\n        if(a&gt;=b)\n        {\n            result =a/b;\n            printf(\"The result is = %.2f\\n\",result);\n        }\n        else\n        {\n            result =b/a;\n            printf(\"The result is = %.2f\\n\",result);\n        }\n    }\n\n    times++;\n}\nreturn 0;\n}\n</code></pre>\n\n<p>how can i fix this problem.thanks in advance!!!!</p>\n"}, {"tags": ["c", "posix", "aio"], "answers": [{"comments": [{"owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "edited": false, "score": 0, "creation_date": 1575428164, "post_id": 59168237, "comment_id": 104559967, "body": "Thanks, thsutton! Is there any way to know why the identifier of the limit that I want to access is not accessible? Can it to be simply concluded that linux doesn&#39;t support _SC_AIO_MAX?"}, {"owner": {"reputation": 1280, "user_id": 156548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87294c02389a9ee0089a4eeed923b588?s=128&d=identicon&r=PG", "display_name": "thsutton", "link": "https://stackoverflow.com/users/156548/thsutton"}, "reply_to_user": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "edited": false, "score": 0, "creation_date": 1575435283, "post_id": 59168237, "comment_id": 104561444, "body": "@\u9673\u529b You check the source code (if you have access to it). You&#39;ve mentioned Linux, so I guess you are probably using glibc. Here&#39;s the implementation: <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=posix/sysconf.c;h=47afac96142f8f1df21f31e47d90bd74350999e4;hb=0a8262a1b269f8f1602933248e69dfb041aab7a2#l175\" rel=\"nofollow noreferrer\">sourceware.org/git/?p=glibc.git;a=blob;f=posix/&hellip;</a> As you can see, this version of glibc doesn&#39;t support that limit."}], "tags": [], "owner": {"reputation": 1280, "user_id": 156548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87294c02389a9ee0089a4eeed923b588?s=128&d=identicon&r=PG", "display_name": "thsutton", "link": "https://stackoverflow.com/users/156548/thsutton"}, "is_accepted": true, "score": 1, "last_activity_date": 1575427658, "creation_date": 1575427658, "answer_id": 59168237, "question_id": 59168164, "link": "https://stackoverflow.com/questions/59168164/why-sc-aio-max-is-well-defined-while-sysconf-sc-aio-max-return-1/59168237#59168237", "title": "Why _SC_AIO_MAX is well-defined while sysconf(_SC_AIO_MAX) return -1?", "body": "<p><code>_SC_AIO_MAX = 24</code> is not the value of the limit, it's the identifier of the limit that you would like to access.</p>\n\n<p><code>getconf(24) == -1</code> means either:</p>\n\n<ol>\n<li><p>There is an error (check <code>errno</code> to see if there was an error); or</p></li>\n<li><p>That the limit is indeterminate.</p></li>\n</ol>\n\n<p>Some documentation mentions that you should set <code>errno</code> to <code>0</code> before calling <code>getconf</code> to make sure you can tell the difference between these two cases.</p>\n\n<p>(2) might happen when functionality is available but has been disable, etc.</p>\n"}], "owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59168237, "answer_count": 1, "score": 0, "last_activity_date": 1575427658, "creation_date": 1575426965, "last_edit_date": 1575427400, "question_id": 59168164, "link": "https://stackoverflow.com/questions/59168164/why-sc-aio-max-is-well-defined-while-sysconf-sc-aio-max-return-1", "title": "Why _SC_AIO_MAX is well-defined while sysconf(_SC_AIO_MAX) return -1?", "body": "<p>Here is a simple demo:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;sys/stat.h&gt;\n#include &lt;aio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\nint main()\n{\n#ifdef _SC_AIO_MAX\n    printf(\"_SC_AIO_MAX is defined\\n\");\nif (sysconf(_SC_AIO_MAX) == -1)\n{\n    printf(\"unsupported\\n\");\n    printf(\"_SC_AIO_MAX = %d\\n\", _SC_AIO_MAX);\n    printf(\"sysconf(_SC_AIO_MAX) = %d\\n\", sysconf(_SC_AIO_MAX));\n}\n#else\n    printf(\"_SC_AIO_MAX is undefined\\n\");\n#endif\nreturn 0;\n}\n</code></pre>\n\n<p>output: </p>\n\n<blockquote>\n  <p>_SC_AIO_MAX is defined\n  unsupported\n  _SC_AIO_MAX = 24\n  sysconf(_SC_AIO_MAX) = -1</p>\n</blockquote>\n\n<p>live demo: <a href=\"https://wandbox.org/permlink/7GDzyvEUgRwMHX95\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/7GDzyvEUgRwMHX95</a></p>\n\n<p>As you can see, <code>_SC_AIO_MAX</code> is defined to be <code>24</code>, but <code>sysconf(_SC_AIO_MAX)</code> returns <code>-1</code>. \nAccording <code>man 3 sysconf</code></p>\n\n<pre><code>       *  If  name  corresponds  to a maximum or minimum limit, and that limit is indeterminate, -1 is re\u2010\n          turned and errno is not changed.  (To distinguish an indeterminate limit from an error, set  er\u2010\n          rno to zero before the call, and then check whether errno is nonzero when -1 is returned.)\n</code></pre>\n\n<p>But the limit has been defined to be <code>24</code>, why does sysconf still return <code>-1</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1575426968, "post_id": 59168122, "comment_id": 104559740, "body": "Basically in C accessing invalid memory (e.g beyond the bounds of an array) is undefined behaviour."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1575427075, "post_id": 59168122, "comment_id": 104559760, "body": "<code>[3][12]</code> and <code>[3][-4]</code> are out of bounds accesses, causing undefined behaviour. Even though the elements are contiguous in memory, the language rules limit subscripting of an array to elements of that array (which applies to the sub-array <code>table[3]</code>)"}, {"owner": {"reputation": 13, "user_id": 12421507, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAzi-yRfSQEdHMvGaKt8szSLKkFhNI3xHibNp-RFg=k-s128", "display_name": "Asher Manangan", "link": "https://stackoverflow.com/users/12421507/asher-manangan"}, "edited": false, "score": 0, "creation_date": 1575427100, "post_id": 59168122, "comment_id": 104559767, "body": "Then why does it shows concise results like 42 and 26, not just any other gibberish values?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1575427198, "post_id": 59168122, "comment_id": 104559785, "body": "42 and 26 are gibberish! Why do you think they are not? Could you have worked out it was 42 or 26 from theory alone? And try to add some more unrelated code or run it on a different machine and you may find the values are different. Or not. That&#39;s what <b>undefined</b> means."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1575427378, "post_id": 59168122, "comment_id": 104559821, "body": "<i>&quot;I want to know how does it happen?&quot;</i> - There is no language-supported reason why it happens. You lost that support as soon as you invoked <i>undefined behavior</i> by accessing <code>arr[3]</code> out of it&#39;s {0..9} happy place. Regarding &quot;why does it shows concise results&quot;. Concise in what context ? On your platform with your toolchain and runtime implementation, it <i>appears</i> to be concise to... something. You would be unwise to gamble that as conclusive universally. That is the epitome of confusing <i>observed</i> behavior with <i>defined</i> behavior. The latter will lead to the former; the reverse not so much."}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 6754741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62292b1f46b3caffe6d73a430086b4ea?s=128&d=identicon&r=PG&f=1", "display_name": "O Yahya", "link": "https://stackoverflow.com/users/6754741/o-yahya"}, "is_accepted": false, "score": 1, "last_activity_date": 1575430269, "last_edit_date": 1575430269, "creation_date": 1575428711, "answer_id": 59168363, "question_id": 59168122, "link": "https://stackoverflow.com/questions/59168122/why-is-the-out-of-values-in-this-array/59168363#59168363", "title": "Why is the out of values in this Array?", "body": "<p>This is called <strong>Undefined Behavior</strong></p>\n\n<p>Generally, when undefined behavior is encountered, anything might happen, the machine might crash, freeze,  do some really weird stuff, or even sometimes as in your case, work fine. This is because C  doesn't check out of bound errors and just let the machine do what it needs to do, and arrays consist of just values and their corresponding addresses which only utilize raw memory, so implementing bound checking mechanism is not possible.</p>\n"}], "owner": {"reputation": 13, "user_id": 12421507, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAzi-yRfSQEdHMvGaKt8szSLKkFhNI3xHibNp-RFg=k-s128", "display_name": "Asher Manangan", "link": "https://stackoverflow.com/users/12421507/asher-manangan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1575429529, "answer_count": 1, "score": -1, "last_activity_date": 1575442128, "creation_date": 1575426656, "last_edit_date": 1575442128, "question_id": 59168122, "link": "https://stackoverflow.com/questions/59168122/why-is-the-out-of-values-in-this-array", "closed_reason": "Duplicate", "title": "Why is the out of values in this Array?", "body": "<pre><code>/* C program illustrating how 2-dimensional arrays\n   are passed in C\n*/\n\n//Prototype\n#include &lt;stdio.h&gt;\nvoid printArray (int arr[][10]);\n\n\nint main () \n{\n  /* declare the 2-dimensional array */\n  int table [5][10];\n  int i, j;  /* loop indices */\n\n  /* initialize the array */\n  for (i = 0; i &lt; 5; i++)\n    for (j = 0; j &lt; 10; j++)\n      table[i][j] = 10*i + j;\n\n  printArray (table);\n\n  printf (\"table element [3][7]:  %d\\n\", table [3][7]);\n  printf (\"table element [3][12]:  %d\\n\", table [3][12]);\n  printf (\"table element [3][-4]:  %d\\n\", table [3][-4]);\n\n  return 0;\n}\n\n//Definition\nvoid printArray (int arr[][10])\n{\n  int a, b;\n  printf (\"The 2-dimensional array is:\\n\");\n  for (a = 0; a &lt; 5; a++)\n    {\n      for (b = 0; b &lt; 10; b++)\n        printf (\"%5d\", arr[a][b]);\n      printf (\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Why there is still values showing up in this arrays:</p>\n\n<pre><code>printf (\"table element [3][12]:  %d\\n\", table [3][12]);\nprintf (\"table element [3][-4]:  %d\\n\", table [3][-4]);\n</code></pre>\n\n<p>Output is 42 and 26 respectively.\nI want to know how does it happen? The array is only limited to [5][10] eh?</p>\n"}, {"tags": ["c", "struct", "opaque-pointers"], "comments": [{"owner": {"reputation": 168, "user_id": 776507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9b3b917419389ce8f4b731c7c4597?s=128&d=identicon&r=PG", "display_name": "Level 42", "link": "https://stackoverflow.com/users/776507/level-42"}, "edited": false, "score": 0, "creation_date": 1575425561, "post_id": 59167934, "comment_id": 104559369, "body": "Try #include &quot;a.h&quot; after the definition of struct a_s"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1575426117, "post_id": 59167934, "comment_id": 104559505, "body": "In <code>main()</code>, the name <code>a_t</code> is an opaque type.  You can only define pointers to opaque types."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1575426724, "post_id": 59167934, "comment_id": 104559682, "body": "The compiler cannot allocate storage for <code>a_t</code> without knowing how much storage to allocate (which depends on the struct definition)"}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1575426961, "post_id": 59168107, "comment_id": 104559737, "body": "For example, consider the <code>FILE</code> type, which is a struct. You call <code>fopen</code> to get a pointer to a <code>FILE</code> struct. Then you can call functions like <code>fread</code> and <code>fprintf</code> that take a <code>FILE *</code>. And finally, <code>fclose</code> to clean up. All that can be done without the caller knowing anything about what&#39;s in the <code>FILE</code> struct."}, {"owner": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1575427125, "post_id": 59168107, "comment_id": 104559773, "body": "Yes, I think I understand, thank you. Sort of like how closed source software has headers with definitions visible to the end users but source is in .o, .lib files etc..."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1575427230, "post_id": 59168107, "comment_id": 104559788, "body": "Exactly. By hiding the internals of the struct, the library maintainers don&#39;t have to worry about backwards compatibility when they want to change the struct, or add more features."}, {"owner": {"reputation": 685, "user_id": 2151287, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aea53781b823a637e50add15cb9aa111?s=128&d=identicon&r=PG", "display_name": "sundq", "link": "https://stackoverflow.com/users/2151287/sundq"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1575427526, "post_id": 59168107, "comment_id": 104559848, "body": "@user3386109 may be I understand, if you want to hide the struct define, The user can only define the pointer of the type, and you must implement a api that create the struct instance(by malloc)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 685, "user_id": 2151287, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aea53781b823a637e50add15cb9aa111?s=128&d=identicon&r=PG", "display_name": "sundq", "link": "https://stackoverflow.com/users/2151287/sundq"}, "edited": false, "score": 1, "creation_date": 1575427696, "post_id": 59168107, "comment_id": 104559883, "body": "@sundq That&#39;s right. You should also have a function that allows the user to <code>free</code> the structure."}], "tags": [], "owner": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "is_accepted": false, "score": 1, "last_activity_date": 1575428641, "last_edit_date": 1575428641, "creation_date": 1575426520, "answer_id": 59168107, "question_id": 59167934, "link": "https://stackoverflow.com/questions/59167934/how-to-use-struct-declare/59168107#59168107", "title": "How to use struct declare", "body": "<p>If you instantiate an object A a, the linker searches for the definition of A in order for the compiler to know how much memory it needs to allocate. It searches a.h and finds a typedef but no declaration, and so the error is saying that it doesn't know A's size.</p>\n\n<p>If the purpose of the program is to hide the declarations (and definitions) from the users, you will need to use A *a, as this says to the compiler \"there is a type A, and memory for it will be stored beginning at this memory location\" and so doesn't need any information about the size or layout of the data until runtime where memory should be dynamically allocated and freed. </p>\n\n<p>This approach allows the developers to expose an interface to users, without the users knowing any specifics on how data is structured and allowing the software to be updated and data structures modified all while keeping the outward facing headers the same (and keeping tests passing).</p>\n"}, {"comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575497413, "post_id": 59168251, "comment_id": 104590938, "body": "Not only would <code>a_t a;</code> need to be replaced, but so would <code>a.a =2;</code> You would also need to add appropriate getters and setters to the API too."}], "tags": [], "owner": {"reputation": 685, "user_id": 2151287, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aea53781b823a637e50add15cb9aa111?s=128&d=identicon&r=PG", "display_name": "sundq", "link": "https://stackoverflow.com/users/2151287/sundq"}, "is_accepted": false, "score": 1, "last_activity_date": 1575427795, "creation_date": 1575427795, "answer_id": 59168251, "question_id": 59167934, "link": "https://stackoverflow.com/questions/59167934/how-to-use-struct-declare/59168251#59168251", "title": "How to use struct declare", "body": "<p>if you want to hide the struct define, The user can only define the pointer of the type, and you must implement a api that create the struct instance(by malloc) and a api that release the struct instance(by free)</p>\n"}, {"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1575496068, "last_edit_date": 1575496068, "creation_date": 1575435550, "answer_id": 59169202, "question_id": 59167934, "link": "https://stackoverflow.com/questions/59167934/how-to-use-struct-declare/59169202#59169202", "title": "How to use struct declare", "body": "<p>You can't create an instance of a struct that hasn't been defined because the compiler doesn't know how much space to allocate for it.</p>\n\n<p>You can't access the members of struct that hasn't been defined because the compiler doesn't know their type.</p>\n\n<p>However, you can use a pointer to a struct that hasn't been defined. This allows one to do something as follows:</p>\n\n<p><code>foo.h</code>:</p>\n\n<pre><code>typedef struct Foo Foo\n\nFoo* Foo_new(int a, int b);\nvoid Foo_destroy(Foo* this);\nvoid Foo_set_a(Foo* this, int a);\nvoid Foo_set_b(Foo* this, int b);\nint Foo_get_a(Foo* this);\nint Foo_get_b(Foo* this);\n// ...\n</code></pre>\n\n<p><code>foo.c</code>:</p>\n\n<pre><code>#include \"a.h\"\n\nstruct Foo {\n   int a;\n   int b;\n};\n\nFoo* Foo_new(int a, int b) {\n   Foo* this = malloc(sizeof(Foo));\n   this-&gt;a = a;\n   this-&gt;b = b;\n   return this;\n}\n\nvoid Foo_destroy(Foo* this) { free(this); }\nvoid Foo_set_a(Foo* this, int a) { this-&gt;a = a; }\nvoid Foo_set_b(Foo* this, int b) { this-&gt;b = b; }\nint Foo_get_a(Foo* this) { return this-&gt;a; }\nint Foo_get_b(Foo* this) { return this-&gt;b; }\n// ...\n</code></pre>\n\n<p><code>main.c</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"foo.h\"\n\nint main(void) {\n   Foo* foo = Foo_new(3, 4);\n   Foo_set_a(foo, 5);\n   printf(\"%d %d\\n\",\n      Foo_get_a(foo),\n      Foo_get_b(foo),\n   );\n   Foo_destroy(foo);\n   return 0;\n}\n</code></pre>\n\n<p>You could even include the pointer in the typedef if you wanted a truly opaque type. Normally, that would be a bad practice, but it makes a certain amount in sense in this particular situation. See <a href=\"https://stackoverflow.com/a/750197/589924\">this</a> for more on this concept.</p>\n"}], "owner": {"reputation": 685, "user_id": 2151287, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aea53781b823a637e50add15cb9aa111?s=128&d=identicon&r=PG", "display_name": "sundq", "link": "https://stackoverflow.com/users/2151287/sundq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1594473112, "creation_date": 1575425024, "last_edit_date": 1594473112, "question_id": 59167934, "link": "https://stackoverflow.com/questions/59167934/how-to-use-struct-declare", "title": "How to use struct declare", "body": "<p>I want to hide the struct define, so I define struct in the source file, like this :</p>\n<pre><code>//a.c\n#include &quot;a.h&quot;\n\nstruct a_s\n{\n   int a;\n   int b;\n};\n\nint func(a_t *a)\n{\n   printf(&quot;%d\\n&quot;, a-&gt;a);\n   return 0;\n}\n\n\n</code></pre>\n<p>and I declare the struct in the header file, like this:</p>\n<pre><code>//a.h\n#ifndef TEST\n#define TEST\n#include &lt;stdio.h&gt;\n#include &lt;stddef.h&gt;\n\ntypedef struct a_s a_t;\n#endif\n</code></pre>\n<p>Then I use the struct <code>a_t</code> int main.c file, like this:</p>\n<pre><code>#include &quot;stddef.h&quot;\n#include &quot;a.h&quot;\n\nint main()\n{\n   a_t a;\n   a.a =2;\n   func(&amp;a);\n\n   return 0;\n\n}\n\n</code></pre>\n<p>But when I compile the main.c by <code>gcc -c main.c</code>, it failed by</p>\n<pre><code>main.c: In function \u2018main\u2019:\nmain.c:7:15: error: storage size of \u2018a\u2019 isn\u2019t known\n    struct a_s a;\n\n</code></pre>\n<p>Why is this failing?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575424484, "post_id": 59167869, "comment_id": 104559138, "body": "Why is this tagged <code>C++</code>?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1575424677, "post_id": 59167869, "comment_id": 104559171, "body": "What specifically are you &quot;not sure&quot; about? P.S. Parameters to two out of the three calls to <code>WordCount()</code> are obviously wrong."}, {"owner": {"reputation": 65, "user_id": 9887026, "user_type": "registered", "profile_image": "https://graph.facebook.com/1359959924148760/picture?type=large", "display_name": "Jung Jae Won", "link": "https://stackoverflow.com/users/9887026/jung-jae-won"}, "edited": false, "score": 0, "creation_date": 1575425587, "post_id": 59167869, "comment_id": 104559375, "body": "But the requirement of this project is to have 2 separate functions for punctuation and word counter. What other method do you suggest?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1575428151, "post_id": 59167869, "comment_id": 104559964, "body": "You misunderstood the comment. You have <code>sizeof(test2)</code> in all the <code>WordCount</code> calls which is clearly wrong."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1575428259, "post_id": 59167869, "comment_id": 104559985, "body": "As for your question overall - it is too broad. We can help you with specific problems but not such broad questions. You need to make an attempt, show the attempted code and ask a specific question about the code."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1575445247, "post_id": 59167869, "comment_id": 104564560, "body": "The API seems incorrect: the pointer should have type <code>const char *</code> and why pass the number of characters instead of relying on the null terminator. A simpler prototype would be <code>size_t PunctuationCount(const char *input);</code>. The problem statement is too vague: what is the definition of a <i>word</i> and what is the set of <i>punctuation</i> characters?"}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1575445051, "post_id": 59169385, "comment_id": 104564480, "body": "The loops test for the null terminator instead of the number of characters specified as <code>size</code>.  Instead of <code>isalpha((int) *input)</code> you should cast <code>char</code> values as <code>unsigned char</code> to avoid undefined behavior on negative <code>char</code> values: <code>isalpha((unsigned char)*input)</code>. Also digits should probably be handled as word characters: <code>WordCount(&quot;99 birds on a wire&quot;, 18)</code> should return <code>5</code>."}], "tags": [], "owner": {"reputation": 168, "user_id": 776507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9b3b917419389ce8f4b731c7c4597?s=128&d=identicon&r=PG", "display_name": "Level 42", "link": "https://stackoverflow.com/users/776507/level-42"}, "is_accepted": false, "score": 0, "last_activity_date": 1575436750, "creation_date": 1575436750, "answer_id": 59169385, "question_id": 59167869, "link": "https://stackoverflow.com/questions/59167869/c-word-counter-and-punctuation-counter/59169385#59169385", "title": "C word counter and punctuation counter", "body": "<p>Please note, this algo does not handle hyphenated words or contractions. (That's your job!)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint WordCount(char *input, int size)\n{\n    int inword=0;\n    int count=0;\n    for (;*input; input++)\n        if (isalpha((int) *input))\n        {   // does not handle hyphenated words or contractions\n            inword=1;\n        }\n        else\n        {\n            if (inword)\n            {\n                inword=0;\n                count++;\n            }\n        }\n\n    return count;\n}\n\nint PunctuationCount(char *input, int size)\n{\n    int count=0;\n    for (;*input; input++)\n        if (ispunct((int) *input))\n        {   // does not handle hyphenated words or contractions\n            count++;\n        }\n\n    return count;\n}\n\nint main(void)\n{\n    char test1[] = \"Hello, World!\";\n    char test2[] = \"She sell sea shell on a sea shore. The shells she sells are sea-shells. I'm sure? For if she sells sea-shells on the sea-shore, then I'm sure she sells sea-shore shells!\";\n    char test3[] = \"VISION 2020 embodies every SKKU student's dream, will, and destiny to make SKKU a global leading university. To successfully establish VISION 2020, SKKU will pursue 'The 5 Core Strategies' and '5 Divisional Strategies'. The Strategic Tasks for 5 Major Areas are the general tasks that influence SKKU's competitiveness.\";\n\n    printf(\"test1 has %d punctuations, %d words.\\n\", PunctuationCount(test1,sizeof(test1)/sizeof(char)), WordCount(test1,sizeof(test2)/sizeof(char)));\n    printf(\"test2 has %d punctuations, %d words.\\n\", PunctuationCount(test2,sizeof(test2)/sizeof(char)), WordCount(test2,sizeof(test2)/sizeof(char)));\n    printf(\"test3 has %d punctuations, %d words.\\n\", PunctuationCount(test3,sizeof(test3)/sizeof(char)), WordCount(test3,sizeof(test2)/sizeof(char)));\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1575444812, "post_id": 59170787, "comment_id": 104564383, "body": "The loops test for the null terminator instead of the number of characters specified as <code>size</code>. Furthermore, the <code>WordCount</code> should probably count the number of words, instead of the number of spaces. For example: <code>WordCount(&quot;Hello  World&quot;, 5)</code> should return <code>2</code>, not <code>3</code> and <code>WordCount(&quot;&quot;, 0)</code> should return <code>0</code>, not <code>1</code>."}, {"owner": {"reputation": 168, "user_id": 776507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9b3b917419389ce8f4b731c7c4597?s=128&d=identicon&r=PG", "display_name": "Level 42", "link": "https://stackoverflow.com/users/776507/level-42"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1575476360, "post_id": 59170787, "comment_id": 104581774, "body": "Hi @chqrlie, doesn&#39;t size (redundantly I might add,) just tell the routine the number of characters in the string? As such, implementations can just ignore it (if not complain about it.)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1575568006, "post_id": 59170787, "comment_id": 104619073, "body": "Indeed the size argument is redundant if it is meant to be the length of the string, and as you have noticed, the OP makes multiple mistakes in the posted code: the value passed for <code>WordCount</code> uses the wrong string and includes the null terminator. In your answer, you should either remove the argument and rely on the null terminator or use the length and make no assumption about the string length."}], "tags": [], "owner": {"reputation": 822, "user_id": 11333755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIwIM.jpg?s=128&g=1", "display_name": "Gopika BG", "link": "https://stackoverflow.com/users/11333755/gopika-bg"}, "is_accepted": true, "score": 0, "last_activity_date": 1575443967, "creation_date": 1575443967, "answer_id": 59170787, "question_id": 59167869, "link": "https://stackoverflow.com/questions/59167869/c-word-counter-and-punctuation-counter/59170787#59170787", "title": "C word counter and punctuation counter", "body": "<pre><code>int WordCount(char input[], int size)\n{\n    int count =0;\n    int i = 0;\n    while (input[i])\n    {\n        if(isspace(input[i])!=0) count++;\n        i++;\n    }\n    return count+1;\n}\nint PunctuationCount(char input[], int size)\n{\n    int count =0;\n    int i = 0;\n    while (input[i])\n    {\n        if(ispunct(input[i])!=0) count++;\n        i++;        \n    }\n    return count;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9887026, "user_type": "registered", "profile_image": "https://graph.facebook.com/1359959924148760/picture?type=large", "display_name": "Jung Jae Won", "link": "https://stackoverflow.com/users/9887026/jung-jae-won"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "closed_date": 1575483473, "accepted_answer_id": 59170787, "answer_count": 2, "score": -1, "last_activity_date": 1575443967, "creation_date": 1575424344, "last_edit_date": 1575424687, "question_id": 59167869, "link": "https://stackoverflow.com/questions/59167869/c-word-counter-and-punctuation-counter", "closed_reason": "Needs details or clarity", "title": "C word counter and punctuation counter", "body": "<p>I was able to program with such structure and also acknowledge that I have to use <code>ispunct()</code> and <code>isspace()</code> in order to count the  number of punctuation and words. But I am not sure how to program with such functions.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint WordCount(char *input, int size)\n{\n    //programming here//\n}\n\nint PunctuationCount(char *input, int size)\n{\n    //programming here//\n}\n\nint main(void)\n{\n    char test1[] = \"Hello, World!\";\n    char test2[] = \"She sell sea shell on a sea shore. The shells she sells are sea-shells. I'm sure? For if she sells sea-shells on the sea-shore, then I'm sure she sells sea-shore shells!\";\n    char test3[] = \"VISION 2020 embodies every SKKU student's dream, will, and destiny to make SKKU a global leading university. To successfully establish VISION 2020, SKKU will pursue 'The 5 Core Strategies' and '5 Divisional Strategies'. The Strategic Tasks for 5 Major Areas are the general tasks that influence SKKU's competitiveness.\";\n\n    printf(\"test1 has %d punctuations, %d words.\\n\", PunctuationCount(test1,sizeof(test1)/sizeof(char)), WordCount(test1,sizeof(test2)/sizeof(char)));\n    printf(\"test2 has %d punctuations, %d words.\\n\", PunctuationCount(test2,sizeof(test2)/sizeof(char)), WordCount(test2,sizeof(test2)/sizeof(char)));\n    printf(\"test3 has %d punctuations, %d words.\\n\", PunctuationCount(test3,sizeof(test3)/sizeof(char)), WordCount(test3,sizeof(test2)/sizeof(char)));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["html", "c", "user-input"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 12379114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d649502b1100f313ade93d43a7560e4?s=128&d=identicon&r=PG", "display_name": "Livia Seiler", "link": "https://stackoverflow.com/users/12379114/livia-seiler"}, "edited": false, "score": 0, "creation_date": 1575425797, "post_id": 59167866, "comment_id": 104559422, "body": "I updated the question, I hope this gives more information. Thank you!"}, {"owner": {"reputation": 114, "user_id": 5179163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155948596400232/picture?type=large", "display_name": "tkingston", "link": "https://stackoverflow.com/users/5179163/tkingston"}, "reply_to_user": {"reputation": 9, "user_id": 12379114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d649502b1100f313ade93d43a7560e4?s=128&d=identicon&r=PG", "display_name": "Livia Seiler", "link": "https://stackoverflow.com/users/12379114/livia-seiler"}, "edited": false, "score": 0, "creation_date": 1575426013, "post_id": 59167866, "comment_id": 104559481, "body": "Oh. Wait...are you running a web server with C?!?!"}, {"owner": {"reputation": 9, "user_id": 12379114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d649502b1100f313ade93d43a7560e4?s=128&d=identicon&r=PG", "display_name": "Livia Seiler", "link": "https://stackoverflow.com/users/12379114/livia-seiler"}, "edited": false, "score": 0, "creation_date": 1575426262, "post_id": 59167866, "comment_id": 104559546, "body": "I guess so. I&#39;m using an .html file to build my webpage with .c files to affect the .html file?"}], "tags": [], "owner": {"reputation": 114, "user_id": 5179163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155948596400232/picture?type=large", "display_name": "tkingston", "link": "https://stackoverflow.com/users/5179163/tkingston"}, "is_accepted": false, "score": 0, "last_activity_date": 1575424315, "creation_date": 1575424315, "answer_id": 59167866, "question_id": 59167789, "link": "https://stackoverflow.com/questions/59167789/how-do-i-get-the-users-input-from-a-html-file-to-a-c-file/59167866#59167866", "title": "How do I get the user&#39;s input from a .html file to a .c file?", "body": "<p>Might need a little bit more clarification on what exactly it is you're trying to achieve, but if you do actually want the HTML file to change based on the user's input, depending on whether you want that change to be permanent or based on the individual user, you have a couple of options:</p>\n\n<p>1) If you want the user's input to permanently change the HTML file, have it posted to another server-side page on your website (PHP for example) -- then take the user's input and you can use PHP to write actual changes to the HTML file stored on the server which is delivered to your end users. I would advise being <strong>very</strong> careful with this and make sure you sanitise the input properly to avoid security issues.</p>\n\n<p>2) Alternatively if you want the user's input to change the page they're viewing in some way in real-time and only for that user, you probably want to make use of JavaScript and set the innerHTML of elements based on the user's input.</p>\n\n<p>If you clarify a little more in the comments for this answer what exactly you're trying to achieve, I can give more specific help.</p>\n"}], "owner": {"reputation": 9, "user_id": 12379114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d649502b1100f313ade93d43a7560e4?s=128&d=identicon&r=PG", "display_name": "Livia Seiler", "link": "https://stackoverflow.com/users/12379114/livia-seiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575425770, "creation_date": 1575423700, "last_edit_date": 1575425770, "question_id": 59167789, "link": "https://stackoverflow.com/questions/59167789/how-do-i-get-the-users-input-from-a-html-file-to-a-c-file", "title": "How do I get the user&#39;s input from a .html file to a .c file?", "body": "<p>I'm trying to get the input from my html webpage, which has a text box and submit button. How can I get the user's input in a separate .c file, so that I can change what happens in my html file depending on the input? </p>\n\n<p>Here is the problem for my assignment: \nIf the player input the word NORTH, SOUTH, EAST, or WEST, the program will programmatically generate a webpage that hyperlinks to another room. Do printf() to the browser. </p>\n\n<p>You will need to do something like this: </p>\n\n<p>printf(\u201c&lt; a href=\\\u201d<a href=\"http://URL\" rel=\"nofollow noreferrer\">http://URL</a>\\\u201d>Press HERE to go North&lt; /a>\u201d); </p>\n\n<p>The above printf() will display on the browser a hyperlink. The player will simply click on the word Press HERE to go North with their mouse to cause the browser to change to another webpage. The HTML tag to link to another webpage is: </p>\n\n<p>&lt; a href=\u201dURL\u201d>TEXT TO CLICK&lt; /a>. </p>\n\n<p>You will need to do this for each direction: NORTH, SOUTH, EAST and WEST. If the player input the word GOLD, the program will programmatically generate a webpage that displays the amount of gold pieces the player currently owns and a hyperlink to return the player back to the current room.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 378, "user_id": 2620017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517078d0e5e19b98b4b8c7228da5aadf?s=128&d=identicon&r=PG", "display_name": "hko", "link": "https://stackoverflow.com/users/2620017/hko"}, "edited": false, "score": 1, "creation_date": 1575424639, "post_id": 59167757, "comment_id": 104559164, "body": "You are overwriting a1 before you use it. a1 = 1;"}, {"owner": {"reputation": 3, "user_id": 12476859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bafa84e5a644d15cc0401e0de49713b?s=128&d=identicon&r=PG&f=1", "display_name": "kars", "link": "https://stackoverflow.com/users/12476859/kars"}, "reply_to_user": {"reputation": 378, "user_id": 2620017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517078d0e5e19b98b4b8c7228da5aadf?s=128&d=identicon&r=PG", "display_name": "hko", "link": "https://stackoverflow.com/users/2620017/hko"}, "edited": false, "score": 0, "creation_date": 1575426691, "post_id": 59167757, "comment_id": 104559675, "body": "I edited the line out, but I&#39;m still receiving incorrect results: for the sample I gave the results are the same (since the value inputted into a1 is 1), while for 2x + 4y = 8 and 5x + y = -7 (the input therefore being 2 4 8 5 1 -7) it gives -0.95 and -2.24 with the line still present, and -0.911 and -2.24 without it. The correct results are -2 and 3."}, {"owner": {"reputation": 378, "user_id": 2620017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517078d0e5e19b98b4b8c7228da5aadf?s=128&d=identicon&r=PG", "display_name": "hko", "link": "https://stackoverflow.com/users/2620017/hko"}, "edited": false, "score": 0, "creation_date": 1575428664, "post_id": 59167757, "comment_id": 104560059, "body": "Did you try to add printf&#39;s after each step and see if the result is what you expect?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575432686, "post_id": 59167757, "comment_id": 104560880, "body": "Suggest <a href=\"https://en.wikipedia.org/wiki/System_of_linear_equations#Simple_nontrivial_example\" rel=\"nofollow noreferrer\">System of linear equations</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "is_accepted": true, "score": 0, "last_activity_date": 1575431439, "last_edit_date": 1575431439, "creation_date": 1575426617, "answer_id": 59168119, "question_id": 59167757, "link": "https://stackoverflow.com/questions/59167757/solving-a-pair-of-equations-in-c-program-giving-odd-results/59168119#59168119", "title": "Solving a pair of equations in C - program giving odd results", "body": "<p>There is something wrong in your's algorithm - it seems like some things are unnecesary divided by a1...</p>\n\n<p>This works ok:</p>\n\n<pre><code>void lin_jednacina2(float a1, float b1, float c1, float a2, float b2, float c2)\n{\n    float x, y;\n\n    float b11 = b1 / a1;\n    float c11 = c1 / a1;\n    float a21 = a2 / a1;\n\n    y = (c2 - a21 * c1) / (b2 - a21 * b1); \n    x = c11 - b11 * y;\n\n    printf(\"\\nThe values of x and y are %.2f and %.2f, respectively.\", x, y);\n    return;\n}\n</code></pre>\n\n<p>Of course, you should add some \"fuses\" (zero checks) to protect from dividing by 0.</p>\n"}], "owner": {"reputation": 3, "user_id": 12476859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bafa84e5a644d15cc0401e0de49713b?s=128&d=identicon&r=PG&f=1", "display_name": "kars", "link": "https://stackoverflow.com/users/12476859/kars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59168119, "answer_count": 1, "score": 0, "last_activity_date": 1575431439, "creation_date": 1575423419, "last_edit_date": 1575426653, "question_id": 59167757, "link": "https://stackoverflow.com/questions/59167757/solving-a-pair-of-equations-in-c-program-giving-odd-results", "title": "Solving a pair of equations in C - program giving odd results", "body": "<p>First of all, English is not my native language, so I'm not sure if I have the correct mathematical terms, and because of that I was unable to find any previous answers to this question, so apologies in advance if this is a duplicate.</p>\n\n<p>Anyway, I need to write a program in C that is meant to solve a pair of equations in the format of <code>a*x + b*y = c</code>, where x and y have the same value across both equations. The method I'm using consists of dividing all three values (a, b and c) in the first equation by a followed by moving <code>b*y</code> to the other side of the equation so I can get a equation that says <code>x = c - b*y</code>. Afterwards, I insert that value of x into the second equation and from there get the value of y, which I then insert back into the first one and get x.  </p>\n\n<p>However, my code is giving strange results - for example, the pair of equations x + 3y = 25 and 2x \u2212 5y = \u221227 (so, the input would be 1 3 25 2 -5 -27) gives the answers -206 and -77 instead of the correct answers of 4 and 7. </p>\n\n<p>I'm posting the entire code since it's fairly short (&lt;40 lines) and I have no idea where the problem is:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid lin_jednacina2(float a1, float b1, float c1, float a2, float b2, float c2)\n{\n    float x, y;\n\n    a1 = 1;\n    b1 = b1 / a1;\n    c1 /= a1;\n\n    b1 = -1 * b1;\n\n    b2 = b2 - a2 * b1;\n    c2 = c2 - a2 * c1;\n\n    y = c2 / b2;\n    x = c1 - b1 * y; \n\n    printf(\"\\nThe values of x and y are %.2f and %.2f, respectively.\", x, y);\n    return;\n}\nint main()\n{\n    float a1, b1, c1, a2, b2, c2;\n\n    printf(\"Please enter the values of a, b and c for the first equation, in the format of ax + by = c. \\n\");\n    scanf(\"%f %f %f\", &amp;a1, &amp;b1, &amp;c1);\n    printf(\"Please enter the values of a, b and c for the second equation, in the format of ax + by = c. \\n\");\n    scanf(\"%f %f %f\", &amp;a2, &amp;b2, &amp;c2);\n\n    lin_jednacina2(a1, b1, c1, a2, b2, c2);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc", "kernel", "c-preprocessor"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1575422876, "post_id": 59167603, "comment_id": 104558809, "body": "What does &quot;other than <code>#include</code>&quot; mean here? How else would macros get defined?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575423374, "post_id": 59167603, "comment_id": 104558904, "body": "there are several ways.  IMO: the easiest way is to write a <code>makefile</code> the does all the work for you"}, {"owner": {"reputation": 784, "user_id": 9182121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0QAX.jpg?s=128&g=1", "display_name": "henriquehbr", "link": "https://stackoverflow.com/users/9182121/henriquehbr"}, "edited": false, "score": 1, "creation_date": 1575424919, "post_id": 59167603, "comment_id": 104559221, "body": "I recommend asking it on <a href=\"https://unix.stackexchange.com\">unix.stackexchange.com</a>, it fits best to the question topic"}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1575454612, "post_id": 59167603, "comment_id": 104569328, "body": "Can you clarify the motivation/goal for this ? it might be possible to come up with a workaround of partial solution"}], "answers": [{"tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1575454545, "creation_date": 1575454545, "answer_id": 59173633, "question_id": 59167603, "link": "https://stackoverflow.com/questions/59167603/preprocess-the-linux-source-code-and-save-to-another-directory/59173633#59173633", "title": "Preprocess the Linux source code and save to another directory", "body": "<p>Short Answer: NO. It can not be done for a general case.</p>\n\n<p>Long Answer:\nMost of the pre-processing occurs via #include files. Keeping the #include (without expanding them) will prevent most #define, #ifdef, ... from working.</p>\n\n<p>Consider the simple case of <code>SEEK_END</code></p>\n\n<pre><code>file.c\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n...\n    fseek(fp, 0, SEEK_END) ;\n</code></pre>\n\n<p>Translation of SEEK_END to '2' will require reading, analyzing and expanding <code>stdio.h</code>, following many <code>#if</code>, etc. Also, it will require expanding any previously #included files, which might define symbol that will impact <code>stdio.h</code> - stdlib.h in this case.</p>\n"}], "owner": {"reputation": 11, "user_id": 12477025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8ae94aa0567d7468260b2ad32d2a08?s=128&d=identicon&r=PG&f=1", "display_name": "turbocoder", "link": "https://stackoverflow.com/users/12477025/turbocoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59173633, "answer_count": 1, "score": 0, "last_activity_date": 1575454545, "creation_date": 1575421821, "question_id": 59167603, "link": "https://stackoverflow.com/questions/59167603/preprocess-the-linux-source-code-and-save-to-another-directory", "title": "Preprocess the Linux source code and save to another directory", "body": "<p>Suppose I have the entire Linux source code in /tmp/linux-src. After menuconfig I want to do \"some kind of gcc -E\" where all the preprocessor macros other than #include are expanded so the <em>actual configured preprocessed</em> source code (for compilation) will be saved in /tmp/linux-src-to-compile - not in single file but rather keeping the whole tree structure leaving out the files that are not needed. Is this kind of trickery possible? Is it also possible when prepping for cross-compilation?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1575421166, "post_id": 59167475, "comment_id": 104558460, "body": "Is this for linux source code? I believe <code>struct ip_options</code> doesn&#39;t get outside of the kernel, so no one cares if the order of bitfields change. As for <code>struct iphdr</code> I guess the ip header is type aliased with this structure, so you have to manage your compiler to generate proper code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1575421272, "post_id": 59167475, "comment_id": 104558472, "body": "Endianness defines which order the bits are in, lowest to highest or highest to lowest. This impacts bitfields as well."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1575423558, "post_id": 59167475, "comment_id": 104558935, "body": "the order of the bit fields within a <code>byte</code> (or larger) depends on the implementation of the compiler.  For this reason, it is best to avoid bit fields when possible (for instance use <code>shifting</code> instead"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1575468535, "last_edit_date": 1575468535, "creation_date": 1575466658, "answer_id": 59177338, "question_id": 59167475, "link": "https://stackoverflow.com/questions/59167475/how-does-endianness-affect-bitfield-defintion-in-struct/59177338#59177338", "title": "how does endianness affect bitfield defintion in struct?", "body": "<p>C does not require byte endian-ness to dictate if <code>__u8 ihl:4</code> uses the 4 MSBits or 4 LSBits.</p>\n\n<blockquote>\n  <p>why should we care endianness and reverse order of ihl and version?</p>\n</blockquote>\n\n<p>Original author may want to overlay <code>struct iphdr</code> on a hardware address, play with <code>union</code> magic or achieve a certain serial communication order.</p>\n\n<p>The approach is not highly portable, but may have met the original limited needs.</p>\n\n<blockquote>\n  <p>if \"bit order\" is an issue, my question 2 is why another struct ip_options doesn't care about endianness?</p>\n</blockquote>\n\n<p>It is an inconstancy.</p>\n\n<p>It may not be relevant to cope with endian-ness past the header.  The header type <code>struct iphdr</code> may need a endian-agnostic coding, yet once those members are assigned,  remaining code interprets accordingly.  This could be the case if all but the header has the <code>#if defined(__LITTLE_ENDIAN_BITFIELD)</code>.  </p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/TIFF#Byte_order\" rel=\"nofollow noreferrer\">.tiff</a> did something like this.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575467860, "post_id": 59177533, "comment_id": 104576609, "body": "&quot;There&#39;s effectively no portable way to use bitfields in C&quot; --&gt; Is more like <i>no completely portable</i>, as some degree of potability is, in practice, possible - even if potholes remain.  Yet your large point is so true: &quot;all but completely unspecified&quot;."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1575467297, "creation_date": 1575467297, "answer_id": 59177533, "question_id": 59167475, "link": "https://stackoverflow.com/questions/59167475/how-does-endianness-affect-bitfield-defintion-in-struct/59177533#59177533", "title": "how does endianness affect bitfield defintion in struct?", "body": "<p>The C standard leaves bitfield implementation all but completely unspecified, so there's no way to tell.</p>\n\n<p>Per <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.7.2.1p11\" rel=\"nofollow noreferrer\"><strong>6.7.2.1 Structure and union specifiers</strong>, paragraph 11</a>:</p>\n\n<blockquote>\n  <p>An implementation may allocate any addressable storage unit large enough to hold a bit-field. If enough space remains, a bit-field that immediately follows another bit-field in a structure shall be packed into adjacent bits of the same unit. If insufficient space remains, whether a bit-field that does not fit is put into the next unit or overlaps adjacent units is implementation-defined. <strong>The order of allocation of bit-fields within a unit (high-order to low-order or low-order to high-order) is implementation-defined</strong>. The alignment of the addressable storage unit is unspecified.</p>\n</blockquote>\n\n<p>There's effectively no portable way to use bitfields in C.  The only thing specified is the \"if enough space remains\" part.  But even the size of whatever that space may be is completely up in the air, as  \"[a]n implementation may allocate any addressable storage unit large enough to hold a bit-field.\"</p>\n"}], "owner": {"reputation": 621, "user_id": 2221433, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/023734b78eb437e5b90e542b81d9383d?s=128&d=identicon&r=PG", "display_name": "codewarrior", "link": "https://stackoverflow.com/users/2221433/codewarrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575468535, "creation_date": 1575420592, "question_id": 59167475, "link": "https://stackoverflow.com/questions/59167475/how-does-endianness-affect-bitfield-defintion-in-struct", "title": "how does endianness affect bitfield defintion in struct?", "body": "<p>Use iphdr as first example:</p>\n\n<pre><code>struct iphdr {\n#if defined(__LITTLE_ENDIAN_BITFIELD)\n    __u8    ihl:4,\n            version:4;\n#elif defined (__BIG_ENDIAN_BITFIELD)\n    __u8    version:4,\n            ihl:4;\n#else\n#error  \"Please fix &lt;asm/byteorder.h&gt;\"\n#endif\n\n    /* other fields are emitted. */\n};\n</code></pre>\n\n<p>My question 1, as far as i know, endianness only affects when dealing with multi-bytes, in other words if there is only 1 byte, there is no \"bit order\" such a thing. In above definition, ihl+version= 8 bits = 1 byte, ihl and version reside in a byte, why should we care endianness and reverse order of ihl and version?</p>\n\n<p>if \"bit order\" is an issue, my question 2 is why another struct ip_options doesn't care about endianness?</p>\n\n<pre><code>struct ip_options {\n    __be32      faddr;\n    __be32      nexthop;\n    unsigned char   optlen;\n    unsigned char   srr;\n    unsigned char   rr;\n    unsigned char   ts;\n    unsigned char   is_strictroute:1,  // why this byte doesn't care endianness?\n                    srr_is_hit:1,\n                    is_changed:1,\n                    rr_needaddr:1,\n                    ts_needtime:1,\n                    ts_needaddr:1;\n    unsigned char   router_alert;\n    unsigned char   cipso;\n    unsigned char   __pad2;\n    unsigned char   __data[0];\n};\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "strcpy", "string.h"], "comments": [{"owner": {"reputation": 113, "user_id": 11559568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wIX5ITkRAgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfYNO-8tgnuf1mFxJH7TiekDItUQ/mo/photo.jpg?sz=128", "display_name": "S E", "link": "https://stackoverflow.com/users/11559568/s-e"}, "edited": false, "score": 0, "creation_date": 1575422161, "post_id": 59167388, "comment_id": 104558641, "body": "Indeed. Ptr gets written much lower in memory (closer to 0x00000000) then str[0]. Apparently in read-only memory (text segment). (str[0]) 0x7ffca0bae6ee: 6d 61 6d 6d 61 00 (*ptr) 0x5586fdab8a52: 70 61 70 61 00"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1575461275, "post_id": 59167388, "comment_id": 104572845, "body": "It is not true that <code>strcpy</code> requires an array as its first argument.  What <code>strcpy</code> requires is a pointer to <i>writable memory</i> which is <i>sufficiently large</i> to hold a copy of the string pointed to by its second argument."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1575461333, "post_id": 59167388, "comment_id": 104572880, "body": "To prove that <code>strcpy</code> does not require an array, try <code>char *mptr = malloc(10);  f(mptr);</code>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1575461435, "post_id": 59167388, "comment_id": 104572933, "body": "Also, <code>strcpy</code> does not &quot;infer it got passed a constant pointer&quot;.  It <i>tries</i> copying to the pointer you give it.  The segmentation fault happens because the CPU (and/or the MMU) detects that your program is attempting to write to read-only memory."}], "owner": {"reputation": 113, "user_id": 11559568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wIX5ITkRAgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfYNO-8tgnuf1mFxJH7TiekDItUQ/mo/photo.jpg?sz=128", "display_name": "S E", "link": "https://stackoverflow.com/users/11559568/s-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "closed_date": 1575420088, "answer_count": 0, "score": 0, "last_activity_date": 1575419662, "creation_date": 1575419662, "question_id": 59167388, "link": "https://stackoverflow.com/questions/59167388/why-does-strcpy-specifically-requires-an-array-as-first-argument-as-opposed-to", "closed_reason": "Duplicate", "title": "Why does strcpy specifically requires an array as first argument? (As opposed to a char* const ptr)", "body": "<p>Isn't an array basically a const pointer to char?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid f(char* s)\n{\n    strcpy(s,\"ciao\");\n}\n\nvoid main()\n{\n    char str[10]=\"mamma\";\n    char * const ptr=\"papa\";\n\n    f(str); // &lt;-- works as expected\n    printf(\"%s\\n\",str);\n\n    f(ptr); // &lt;-- gives Segmentation fault\n    printf(\"%s\\n\",str);\n\n}\n</code></pre>\n\n<p>How does strcpy recognize that I provide a pointer and not an array? </p>\n\n<p>I'm aware that strcpy needs enough space in the destination array, but given that this <code>char * strcpy ( char * destination, const char * source );</code> is the signature of strcpy, how can I infer that it needs an array as first argument? \nAlso, how can strcpy infer it got passed a constant pointer and not an array? </p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1575422209, "post_id": 59167361, "comment_id": 104558649, "body": "<code>x = malloc(...); x = somethingelse;</code> is a memory leak,  you forget about the malloc block and point your pointer at the somethingelse. Instead you probably want to copy the data from the original place into the heap storage"}, {"owner": {"reputation": 345, "user_id": 11042549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-udqcEy-M2l8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC-2rnozeBnfawya37GZi0pgQJ2A/mo/photo.jpg?sz=128", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/11042549/mohamed-moustafa"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1575422762, "post_id": 59167361, "comment_id": 104558776, "body": "@M.M edited code, can you please check it?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1575422848, "post_id": 59167361, "comment_id": 104558802, "body": "you still do the same problem with <code>heapStudents</code>. Also <code>float studentGrades[];</code> should be <code>float *studentGrades;</code> , for the way you are using it anyway"}, {"owner": {"reputation": 345, "user_id": 11042549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-udqcEy-M2l8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC-2rnozeBnfawya37GZi0pgQJ2A/mo/photo.jpg?sz=128", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/11042549/mohamed-moustafa"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1575424225, "post_id": 59167361, "comment_id": 104559072, "body": "@M.M yeah, sorry for that. I forgot to edit those. Is there a way to work with string array without deciding the max size in the struct?"}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 11042549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-udqcEy-M2l8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC-2rnozeBnfawya37GZi0pgQJ2A/mo/photo.jpg?sz=128", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/11042549/mohamed-moustafa"}, "edited": false, "score": 0, "creation_date": 1575425313, "post_id": 59167878, "comment_id": 104559305, "body": "What if there is more than a 100 students? Wont that cause issues? I edited my question code to use some the tips you provided. I kept the stack arrays mainly because they seem more convenient to use in case there are a large number of students (rather than assign student one by one to m1-&gt;studentNames). I also added a deleteModule function. I used float pointer as it seems more appropriate for storing unknown number of grades."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "reply_to_user": {"reputation": 345, "user_id": 11042549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-udqcEy-M2l8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC-2rnozeBnfawya37GZi0pgQJ2A/mo/photo.jpg?sz=128", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/11042549/mohamed-moustafa"}, "edited": false, "score": 0, "creation_date": 1575425475, "post_id": 59167878, "comment_id": 104559349, "body": "The point is to define <code>MAX_STUDENTS</code> to be greater than you would ever need. The solution is to avoid the stack and allocate everything dynamically (on the heap). You&#39;re unlikely to define a large number of students because they would be added one at a time (with a function?) from a file/stdin/etc rather than hardcoded into the program."}], "tags": [], "owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "is_accepted": false, "score": 1, "last_activity_date": 1575425353, "last_edit_date": 1575425353, "creation_date": 1575424445, "answer_id": 59167878, "question_id": 59167361, "link": "https://stackoverflow.com/questions/59167361/create-c-struct-representing-module-with-pointer-to-string-and-float-arrays/59167878#59167878", "title": "Create C struct representing module with pointer to string and float arrays", "body": "<p>Right off the bat:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>main.c: In function 'main':\nmain.c:32:14: warning: format '%f' expects argument of type 'double', but argument 2 has type 'float *' [-Wformat=]\n   32 |     printf(\"%f\\n\", m1-&gt;studentGrades);\n      |             ~^     ~~~~~~~~~~~~~~~~~\n      |              |       |\n      |              double  float *\nmain.c:32:14: warning: format '%f' expects argument of type 'double', but argument 2 has type 'float *' [-Wformat=]\n</code></pre>\n\n<p>So let's fix it to print the value. <code>printf(\"%f\\n\", *m1-&gt;studentGrades);</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Programming\n5\nAlan\n1.100000\n</code></pre>\n\n<p>That's better.</p>\n\n<hr>\n\n<pre class=\"lang-c prettyprint-override\"><code>char* heapStudents = malloc(sizeof(students));\nheapStudents = *students;\nm1 -&gt; studentNames = heapStudents;\n</code></pre>\n\n<p>That doesn't seem right. Let's see what's happening.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Breakpoint 2, main () at main.c:19\n19          char students[][20]  = {\"Alan\", \"Bob\", \"Charles\", \"James\", \"Peter\"};\n(gdb) s\n20          char* heapStudents = malloc(sizeof(students));\n(gdb) p students\n$5 = {\"Alan\", '\\000' &lt;repeats 15 times&gt;, \"Bob\", '\\000' &lt;repeats 16 times&gt;, \"Charles\", '\\000' &lt;repeats 12 times&gt;,\n  \"James\", '\\000' &lt;repeats 14 times&gt;, \"Peter\", '\\000' &lt;repeats 14 times&gt;}\n(gdb) x students\n0x22fdd0:       0x6e616c41\n(gdb) s\n21          heapStudents = *students;\n(gdb) s\n22          m1 -&gt; studentNames = heapStudents;\n(gdb) p *heapStudents\n$8 = 65 'A'\n(gdb) x heapStudents\n0x22fdd0:       0x6e616c41\n</code></pre>\n\n<p>You allocate an array of character arrays on the stack (at 0x6e616c41). Then you allocate the same amount of memory on the heap, and save the pointer to it as <code>*heapStudents</code>. Then you overwrite the pointer with the \"address\" equal to the value of the decayed pointer to the 0th element in the <code>students</code> character array, leaking the <code>malloc</code>'d memory in the process. Oops.</p>\n\n<p>Let's fix that.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>m1-&gt;studentNames = malloc(sizeof(students));\nmemcpy(m1-&gt;studentNames, &amp;students, sizeof(students));\n</code></pre>\n\n<p>Now we allocate the memory and assign the <code>*studentNames</code> pointer in the struct pointed to by <code>m1</code> to point to the address returned by <code>malloc</code>. Then we copy the stack array to the allocated memory on the heap. We haven't leaked any memory, because we can call <code>free(m1-&gt;studentNames)</code> later on.</p>\n\n<hr>\n\n<p>The same fix must be applied for <code>studentGrades</code>. But let's try something different; allocating memory on the heap without first allocating an array on the stack.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>m1-&gt;studentGrades = malloc(sizeof(float[5]));\nm1-&gt;studentGrades[0] = 1.1;\nm1-&gt;studentGrades[1] = 2.2;\nm1-&gt;studentGrades[2] = 3.3;\nm1-&gt;studentGrades[3] = 4.4;\nm1-&gt;studentGrades[4] = 5.5;\n</code></pre>\n\n<p>Notice that we can use array indexing with a <code>float* studentGrades</code> pointer.</p>\n\n<hr>\n\n<p>Onto the questions proper:</p>\n\n<blockquote>\n  <p>Is there a way to use a float array directly without knowing student number?</p>\n</blockquote>\n\n<p>Without knowing the maximum number of students, you can <code>#define MAX_STUDENTS 100</code> to initialise your arrays, then use <code>m1-&gt;studentNum</code> to iterate. Or, skip allocating on the stack and just use <code>malloc(m1-&gt;studentNum * sizeof(var))</code>/<code>calloc(m1-&gt;studentNum, sizeof(var));</code>.</p>\n\n<p>Alternatively, use <code>realloc</code> as and when required.</p>\n\n<blockquote>\n  <p>How to access second student name?</p>\n</blockquote>\n\n<p>Alter your struct definition so you have an array of pointers which point to character arrays. <code>char* studentNames[20];</code> to have 20 pointers then store your data in a location on the heap, and save the pointer in the array member of the struct:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>m1-&gt;studentNames[0] = strcpy(calloc(20, sizeof(char)), \"Alan\");\nm1-&gt;studentNames[1] = strcpy(calloc(20, sizeof(char)), \"Bob\");\nm1-&gt;studentNames[2] = strcpy(calloc(20, sizeof(char)), \"Charles\");\nm1-&gt;studentNames[3] = strcpy(calloc(20, sizeof(char)), \"James\");\nm1-&gt;studentNames[4] = strcpy(calloc(20, sizeof(char)), \"Peter\");\n</code></pre>\n\n<p>Use <code>printf(\"%s\\n\", m1-&gt;studentNames[1]);</code> to print \"Bob\". etc.</p>\n\n<p>Alternatively, use a double pointer in the struct and have it point to an array of pointers on the heap. This way to can dynamically allocate the memory above the 20-element limit.</p>\n\n<blockquote>\n  <p>How to properly set pointer to float array and access each member?</p>\n</blockquote>\n\n<p>If you have <code>float studentGrades[20];</code> in the struct, you can make a pointer like this</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>float *p = &amp;m1-&gt;studentGrades[0];\nprintf(\"%f %f\\n\", p[0], p[1]); // prints 1.100000 2.200000\n</code></pre>\n\n<hr>\n\n<p>Altogether:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct mS{\n    char name[50];\n    int studentNum;\n    char* studentNames[20];\n    float studentGrades[20];\n} moduleStruct;\n\nint main(void) {\n    moduleStruct *m1 = malloc(sizeof(moduleStruct));\n\n    strcpy(m1-&gt;name, \"Programming\");\n\n    m1-&gt;studentNum = 5;\n\n    //char students[][20]  = {\"Alan\", \"Bob\", \"Charles\", \"James\", \"Peter\"};\n    m1-&gt;studentNames[0] = strcpy(calloc(20, sizeof(char)), \"Alan\");\n    m1-&gt;studentNames[1] = strcpy(calloc(20, sizeof(char)), \"Bob\");\n    m1-&gt;studentNames[2] = strcpy(calloc(20, sizeof(char)), \"Charles\");\n    m1-&gt;studentNames[3] = strcpy(calloc(20, sizeof(char)), \"James\");\n    m1-&gt;studentNames[4] = strcpy(calloc(20, sizeof(char)), \"Peter\");\n\n    /*float grades[5] = {1.1, 2.2, 3.3, 4.4, 5.5};\n    m1-&gt;studentGrades = malloc(sizeof(grades));\n    memcpy(m1-&gt;studentGrades, &amp;grades, sizeof(grades));*/\n\n    //m1-&gt;studentGrades[0] = malloc(sizeof(float[5]));\n    m1-&gt;studentGrades[0] = 1.1;\n    m1-&gt;studentGrades[1] = 2.2;\n    m1-&gt;studentGrades[2] = 3.3;\n    m1-&gt;studentGrades[3] = 4.4;\n    m1-&gt;studentGrades[4] = 5.5;\n\n    printf(\"%s\\n\", m1-&gt;name);\n    printf(\"%d\\n\", m1-&gt;studentNum);\n    printf(\"%s\\n\", m1-&gt;studentNames[0]);\n    printf(\"%f\\n\", m1-&gt;studentGrades[0]);\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT</p>\n\n<blockquote>\n  <p>So I have 2 questions:</p>\n</blockquote>\n\n<p>(Questions 0 to 2 maybe, but I definately see 3!)</p>\n\n<blockquote>\n  <p>Is there a way to use a float array directly without knowing student number?</p>\n</blockquote>\n\n<p>See above.</p>\n\n<blockquote>\n  <p>How to improve this solution?</p>\n</blockquote>\n\n<p>Aside from removing the <code>implicit declaration of function 'deleteModule'</code>?\nSee below.</p>\n\n<blockquote>\n  <p>Is there a way where I dont have to pre-define max name size in studentNames?</p>\n</blockquote>\n\n<p>Have the struct contain a pointer to an array of pointers. <code>realloc</code> this array every time you add a student. Assign one of the pointers in the array to point at a <code>malloc</code>'d character array to store the student name.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct mS{\n    // ...\n    char **studentNames;\n}\n// ...\nchar str[] = \"Alan\";\nm1-&gt;studentNames = realloc(m1-&gt;studentNames, ++(m1-&gt;studentNum)*sizeof(*m1-&gt;studentNames);\nm1-&gt;studentNames[m1-&gt;studentNum-1] = strcpy(calloc(strlen(str)+1, sizeof(char)), str);\n</code></pre>\n\n<p>5 bytes are allocated to store the name, and the size of a pointer (probably 8B) is added onto <code>m1-&gt;studentNames</code>'s space to store the address of the name.</p>\n"}, {"tags": [], "owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "is_accepted": false, "score": 0, "last_activity_date": 1575426044, "creation_date": 1575426044, "answer_id": 59168058, "question_id": 59167361, "link": "https://stackoverflow.com/questions/59167361/create-c-struct-representing-module-with-pointer-to-string-and-float-arrays/59168058#59168058", "title": "Create C struct representing module with pointer to string and float arrays", "body": "<p>You would have 2 approach: </p>\n\n<ol>\n<li>either assume that module would have a maximum capacity ( quite realistic, but probably not what is desired for the exercise )</li>\n<li>Dynamically allocated arrays, in which you allocate as needed</li>\n</ol>\n\n<h1>Maximum (fixed) capacity</h1>\n\n<pre><code>#define moduleCapacity 200\n#define moduleMaxName 50\n\nstruct moduleStruct {\n    char name[moduleMaxName];\n    unsigned int studentsCount;\n    const char *studentsName[moduleCapacity];\n    float studentsGrade[moduleCapacity];\n};\n</code></pre>\n\n<pre><code>void populateModule(\n    struct moduleStruct *target,\n    const char *moduleName,\n    const unsigned int studentsCount,\n    const char* studentsName[],\n    const float studentsGrade[]) {\n\n    strncpy(target-&gt;name, moduleName, moduleMaxName);\n    target-&gt;studentsCount = studentsCount;\n    for(unsigned int i = 0; i &lt; studentsCount; ++i) {\n       if(i &gt;= moduleCapacity) return; // student over the limit are thrown away, sorry first come first served basis\n       target-&gt;studentsName[i] = studentsName[i];\n       target-&gt;studentsGrade[i] = studentsGrade[i];\n    }\n}\n\nvoid printModule(struct moduleStruct *input) {\n    printf(\"name : %s\\n\", input-&gt;name);\n    printf(\"students : %i\\n\", input-&gt;studentsCount);\n    for(unsigned int i = 0; i &lt; input-&gt;studentsCount; ++i) {\n        printf(\"%u %s %f\\n\", i+1, input-&gt;studentsName[i], input-&gt;studentsGrade[i]);\n    }\n}\n\nint main(int argc, char** argv) {\n    struct moduleStruct m1;\n    const char *names[] = {\"Alan\", \"Bob\", \"Charles\", \"James\", \"Peter\"};\n    const float grades[] = {1.1f, 2.2f, 3.3f, 4.4f, 5.5f};\n    populateModule(\n        &amp;m1,\n        \"Programming\",\n        5,\n        names,\n        grades\n    );\n    printModule(&amp;m1);\n}\n</code></pre>\n\n<h1>Dynamically allocated arrays</h1>\n\n<pre><code>#define moduleMaxName 50\n\nstruct moduleStruct {\n    char name[moduleMaxName];\n    unsigned int studentsCount;\n    const char **studentsName;\n    float *studentsGrade;\n};\n\n\nvoid populateModule(\n    struct moduleStruct *target,\n    const char *moduleName,\n    const unsigned int studentsCount,\n    const char* studentsName[],\n    const float studentsGrade[]) {\n\n    strncpy(target-&gt;name, moduleName, moduleMaxName);\n    target-&gt;studentsCount = studentsCount;\n    // we have the student count, we can allocate an array that is sized just for the class size\n    target-&gt;studentsName = calloc(target-&gt;studentsCount, sizeof(char*)); \n    target-&gt;studentsGrade = calloc(target-&gt;studentsCount, sizeof(float));\n    for(unsigned int i = 0; i &lt; studentsCount; ++i) {\n       target-&gt;studentsName[i] = studentsName[i];\n       target-&gt;studentsGrade[i] = studentsGrade[i];\n    }\n}\n\n// printModule &amp; main remain the same\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 11042549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-udqcEy-M2l8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC-2rnozeBnfawya37GZi0pgQJ2A/mo/photo.jpg?sz=128", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/11042549/mohamed-moustafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1575426372, "creation_date": 1575419500, "last_edit_date": 1575426372, "question_id": 59167361, "link": "https://stackoverflow.com/questions/59167361/create-c-struct-representing-module-with-pointer-to-string-and-float-arrays", "title": "Create C struct representing module with pointer to string and float arrays", "body": "<p>I am working on the following question:</p>\n\n<blockquote>\n  <p>Write \u2018C\u2019 code that defines a structured type called moduleStruct with\n  members that store the name of the module as a character array, the number of\n  students taking the module as an integer, the names of the students taking the\n  module as a pointer to an array of strings and the results for the students stored as an array of floats.</p>\n</blockquote>\n\n<p>I am unsure how to have a float array in the struct without knowing student number, so I just assumed they meant pointer to float array.</p>\n\n<p>This is what I made:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct mS{\n    char name[50];\n    int studentNum;\n    char (*studentNames)[50];\n    float *studentGrades;\n}moduleStruct;\n\nvoid deleteModule(moduleStruct* ms);\nvoid deleteModule(moduleStruct* ms){\n    free(ms-&gt;studentNames);\n    free(ms-&gt;studentGrades);\n    free(ms);\n}\n\nint main(int argc, char* argv[])\n{   moduleStruct* m1 = malloc(sizeof(moduleStruct));\n\n    strcpy(m1-&gt;name, \"Programming\");\n\n    m1 -&gt; studentNum = 5;\n\n    char students[][50]  = {\"Alan\", \"Bob\", \"Charles\", \"James\", \"Peter\"};\n    m1 -&gt; studentNames = malloc(sizeof(students));\n    memcpy(m1 -&gt; studentNames, &amp;students, sizeof(students));\n\n    float grades[5]= {1.1, 2.2, 3.3, 4.4, 5.5};\n    m1-&gt;studentGrades = malloc(sizeof(grades));\n    memcpy(m1-&gt;studentGrades, grades, sizeof(grades));\n\n    printf(\"%s\\n\", m1-&gt;name);\n    printf(\"%d\\n\", m1-&gt;studentNum);\n    printf(\"%s\\n\", m1-&gt;studentNames[2]);\n    printf(\"%f\\n\", m1-&gt;studentGrades[4]);\n\n    deleteModule(m1);\n\n    printf(\"%s\\n\", m1-&gt;name);\n    return 0;\n}\n</code></pre>\n\n<p>So I have 3 questions:</p>\n\n<ol>\n<li>Is there a way to use a float array directly without knowing student number?</li>\n<li>How to improve this solution?</li>\n<li>Is there a way where I dont have to pre-define max name size in studentNames?</li>\n</ol>\n"}, {"tags": ["c++", "c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1575419799, "post_id": 59167250, "comment_id": 104558193, "body": "If you&#39;re starting your program and immediately choosing 5, you&#39;re invoking undefined behavior as soon as you <code>tmp_card = q_deck-&gt;p_deck[0];</code> since you&#39;re not allocating any space for <code>p_deck</code>. I don&#39;t know what <code>q_deck-&gt;p_deck = {};</code> does.. perhaps set the pointer to a local empty array that goes out of scope when <code>table_creator</code> returns? Either way, that&#39;s not what you want. <code>p_deck</code> must point to valid memory that&#39;s dynamically allocated or to a <code>cards</code> structure that&#39;s in scope."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1575423908, "post_id": 59167250, "comment_id": 104559013, "body": "the operators <code>cin</code> and <code>cout</code> are ONLY found in the C++ language, The <code>namespace</code> is ONLY found in the C++ language.  So if your using those operators, then your writing C++, not C"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575424337, "post_id": 59167250, "comment_id": 104559100, "body": "regarding this kind of statement: <code>if (deck[i].suit == 0) {</code>  This is using a &#39;magic&#39; number.  This will be a problem when maintenance, editing, etc are performed.  Suggest: <code>if ( deck[i].suit == Diamonds ) {</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1575424558, "post_id": 59167250, "comment_id": 104559147, "body": "regarding: <code>typedef enum Power { Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King, Ace } Power_t;</code>  This will be a source of mis-understandings.  Suggest: <code>typedef enum Power { Two=2, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King, Ace } Power_t;</code>  Notice the initialization of the first entry to match the expected value.  BTW: it is typical for <code>enum</code> names and <code>typedef</code> names and <code>#define</code> names to be all caps so they are not mistaken for variables"}, {"owner": {"reputation": 15, "user_id": 12475031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eb8913e10d68f9116d9d9cfc028040?s=128&d=identicon&r=PG&f=1", "display_name": "Leszek", "link": "https://stackoverflow.com/users/12475031/leszek"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1575468044, "post_id": 59167250, "comment_id": 104576699, "body": "@yano I tried to fix this, just like You said, but i think i still dont get it. You mean to malloc some value for p_deck? Could You tell me, where and how? Your help would be great. Thanks."}, {"owner": {"reputation": 15, "user_id": 12475031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eb8913e10d68f9116d9d9cfc028040?s=128&d=identicon&r=PG&f=1", "display_name": "Leszek", "link": "https://stackoverflow.com/users/12475031/leszek"}, "edited": false, "score": 0, "creation_date": 1575468537, "post_id": 59167250, "comment_id": 104577038, "body": "q_deck-&gt;p_deck = {}; Was meant to make an empty table, where cards from players will be thrown."}, {"owner": {"reputation": 15, "user_id": 12475031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eb8913e10d68f9116d9d9cfc028040?s=128&d=identicon&r=PG&f=1", "display_name": "Leszek", "link": "https://stackoverflow.com/users/12475031/leszek"}, "edited": false, "score": 0, "creation_date": 1575488431, "post_id": 59167250, "comment_id": 104587637, "body": "Okay. Finally i got this. No need to answer :)"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 12475031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eb8913e10d68f9116d9d9cfc028040?s=128&d=identicon&r=PG&f=1", "display_name": "Leszek", "link": "https://stackoverflow.com/users/12475031/leszek"}, "edited": false, "score": 0, "creation_date": 1575560630, "post_id": 59193775, "comment_id": 104615180, "body": "Oh, thanks for advice. Unfortunately im working on c, not c++. Cin and cout, are the only things that i can use from c++ in my project. Could you help me how to implement something like those &quot;destructors&quot; above, but in C? Would be great :)"}], "tags": [], "owner": {"reputation": 300, "user_id": 3252344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ea9a3add13e20f918021c5cc8cbd4a5?s=128&d=identicon&r=PG&f=1", "display_name": "user3252344", "link": "https://stackoverflow.com/users/3252344/user3252344"}, "is_accepted": false, "score": 0, "last_activity_date": 1575543964, "creation_date": 1575543964, "answer_id": 59193775, "question_id": 59167250, "link": "https://stackoverflow.com/questions/59167250/visual-studio-exception-thrown-write-acces-violation-q-deck-p-deck-was-0x1101/59193775#59193775", "title": "Visual Studio Exception Thrown: write acces violation. q_deck-&gt;p_deck was 0x110112. C LANGUAGE", "body": "<p>Yano is right about the lack of memory assigned to p_deck. I'm kind of surprised the others are working at all (you don't seem to be allocating any space at all for cards here, instead you're just writing the card values into areas next to your pointer, which don't technically belong to your pointer and aren't guaranteed to stay the same).</p>\n\n<p>You can fix this by adding a constructor / destructor to your struct which handles assigning memory, since you're using C++.</p>\n\n<pre><code>typedef struct deck {\n    cards* p_deck;\n    int size;\n\n    //constructor\n    deck() : size(SIZE) //this sets the size to your size constant\n    { \n        p_deck = malloc(size * sizeof(*p_deck)); //this gives p_deck memory space\n    } \n\n    //destructor\n    ~deck()\n    {\n        if(p_deck) delete[] p_deck; //this clears up the memory assigned to p_deck\n        p_deck = nullptr;\n    }\n\n}deck; //edited so it matches the actual struct name\n\n</code></pre>\n\n<p>To use the constructor, when you create an object use <code>deck varName = deck();</code> instead of <code>deck varName;</code>.</p>\n\n<p>The destructor is automatically called when the object goes out of scope (at the end of main() or its local function). You can also call it manually if you want to release the memory for whatever reason (e.g. if you want to re-create a whole new deck) with <code>varName.~deck();</code></p>\n"}], "owner": {"reputation": 15, "user_id": 12475031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eb8913e10d68f9116d9d9cfc028040?s=128&d=identicon&r=PG&f=1", "display_name": "Leszek", "link": "https://stackoverflow.com/users/12475031/leszek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575543964, "creation_date": 1575418575, "question_id": 59167250, "link": "https://stackoverflow.com/questions/59167250/visual-studio-exception-thrown-write-acces-violation-q-deck-p-deck-was-0x1101", "title": "Visual Studio Exception Thrown: write acces violation. q_deck-&gt;p_deck was 0x110112. C LANGUAGE", "body": "<p>Im getting that weird error, and don't know what to do. I tried to find the solution, but couldn't find the one, working for me. It's card game, and the error shows when i'm trying to add card to my list, which is a deck of cards. Here's my entire code, to fully understand my idea. It is written in c, but i'm using cin / cout from c++, thats why i have \"using namespace std;\" Thank you for help :)</p>\n\n<pre><code>#define SIZE 52\n#define HALF_SIZE 26\n\nusing namespace std;\n\ntypedef enum Suit { Diamonds, Hearts, Spades, Clubs } Suit_t;\ntypedef enum Power { Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King, Ace } Power_t;\n\ntypedef struct card {\n    Suit_t suit;\n    Power_t power;\n}cards;\n\ntypedef struct deck {\n    cards* p_deck;\n    int size;\n}decks;\n\nvoid Deck_Creator(cards* deck) {\n    for (int i = 0; i &lt; SIZE; i++) {\n        deck[i].suit = (Suit)(i / 13);\n        deck[i].power = (Power)(i % 13);\n    }\n\n}\n\nvoid Display_Deck(cards* deck) {\n    for (int i = 0; i &lt; SIZE; i++) {\n\n        if (deck[i].suit == 0) {\n            cout &lt;&lt; \"Diamond \";\n        }\n        else if (deck[i].suit == 1) {\n            cout &lt;&lt; \"Heart \";\n        }\n        else if (deck[i].suit == 2) {\n            cout &lt;&lt; \"Spade \";\n        }\n        else {\n            cout &lt;&lt; \"Club \";\n        }\n        cout &lt;&lt; \" \" &lt;&lt; deck[i].power &lt;&lt; endl;\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid Deck_Shuffler(cards* deck) {\n    int changer = 0;               // Index of changed card\n    cards temp = {};             // Temporary holding place for changing\n    srand(time(NULL));            // Function to get random numbers with current time\n    for (int i = 0; i &lt; SIZE; i++) {\n        changer = rand() % SIZE;   // Generating random number from 0 to 51\n        temp = deck[i];\n        deck[i] = deck[changer];  // if changer = i\n        deck[changer] = temp;\n    }\n}\n\nvoid Deck1_Creator(cards* deck, cards* deck1, decks* q_deck1) {\n    for (int i = 0; i &lt; HALF_SIZE; i++) {\n        memcpy(&amp;deck1[i], &amp;deck[i], sizeof(cards));  // Copying content using memcpy function\n    }\n    q_deck1-&gt;p_deck = deck1;\n    q_deck1-&gt;size = HALF_SIZE;\n}\n\nvoid Deck2_Creator(cards* deck, cards* deck2, decks* q_deck2) {\n    int i = HALF_SIZE;\n    for (int i = 26; i &lt; SIZE; i++) {\n        deck2[i - HALF_SIZE] = deck[i];   // Simple copying struct array content into another array\n    }\n    q_deck2-&gt;p_deck = deck2;\n    q_deck2-&gt;size = HALF_SIZE;\n}\n\nvoid table_creator(decks* q_deck) {\n    q_deck-&gt;p_deck = {};\n    q_deck-&gt;size = 0;\n}\n\nvoid enqueue(decks* q_deck, cards card) {\n    // I TRIED THAT TOO\n    //int n;\n    //n = q_deck-&gt;size;\n    q_deck-&gt;p_deck[q_deck-&gt;size] = card;\n    q_deck-&gt;size++;\n}\n\ncards* dequeue(decks* q_deck) {\n    cards tmp_card;\n\n    tmp_card = q_deck-&gt;p_deck[0];\n    for (int i = 0; i &lt; q_deck-&gt;size - 1; i++) {\n        q_deck-&gt;p_deck[i] = q_deck-&gt;p_deck[i + 1];\n    }\n    q_deck-&gt;size--;\n\n    return &amp;tmp_card;\n}\n\nvoid disp_queue(decks* q_deck) {\n    for (int i = 0; i &lt; q_deck-&gt;size; i++) {\n        cout &lt;&lt; q_deck-&gt;p_deck[i].suit &lt;&lt;\" \";\n        cout &lt;&lt; q_deck-&gt;p_deck[i].power &lt;&lt; endl;\n    }\n}\n\nint main() {                   \n    cards deck[SIZE];\n    cards deck1[SIZE];\n    cards deck2[SIZE];\n    cards table1[HALF_SIZE];\n    cards table2[HALF_SIZE];\n    decks q_deck1;\n    decks q_deck2;\n    decks q_table1;\n    decks q_table2;\n    char choice;\n\n    table_creator(&amp;q_table1);\n    table_creator(&amp;q_table2);\n\n    for(; ;) {  //Never ending loop\n        cin &gt;&gt; choice;\n        switch (choice) {\n        case '1':\n            cout &lt;&lt; endl &lt;&lt; \"Unshuffled deck: \" &lt;&lt; endl;\n            Deck_Creator(deck);\n            Display_Deck(deck);\n            break;\n        case '2':\n            cout &lt;&lt; endl &lt;&lt; \"Shuffled deck: \" &lt;&lt; endl;\n            Deck_Shuffler(deck);\n            Display_Deck(deck);\n            break;\n        case '3':\n            cout &lt;&lt; endl &lt;&lt; \"Hand 1:\" &lt;&lt; endl;\n            Deck1_Creator(deck, deck1, &amp;q_deck1);\n            disp_queue(&amp;q_deck1);\n            break;\n        case '4':\n            cout &lt;&lt; endl &lt;&lt; \"Hand 2:\" &lt;&lt; endl;\n            Deck2_Creator(deck, deck2, &amp;q_deck2);\n            disp_queue(&amp;q_deck2);\n            break;\n        case '5':\n            cards tmp_card = *dequeue(&amp;q_deck1);\n            enqueue(&amp;q_table1, tmp_card);\n            tmp_card = *dequeue(&amp;q_deck2);\n            enqueue(&amp;q_table2, tmp_card);\n            disp_queue(&amp;q_table1);\n            disp_queue(&amp;q_table2);\n            break;\n        case '6':\n            disp_queue(&amp;q_deck1);\n            break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>ERROR Pops only when im pressing case 5 in my switch function. The rest works well. \nERROR Pops in this function:</p>\n\n<pre><code>cards* dequeue(decks* q_deck) {\n    cards tmp_card;\n\n    tmp_card = q_deck-&gt;p_deck[0];              // EXACTLY IN THIS LINE RED X OCCURS\n    for (int i = 0; i &lt; q_deck-&gt;size - 1; i++) {\n        q_deck-&gt;p_deck[i] = q_deck-&gt;p_deck[i + 1];\n    }\n    q_deck-&gt;size--;\n\n    return &amp;tmp_card;\n}\n</code></pre>\n\n<p>Please help me with understanding of this error, so that I will fully know why, and how this error works :(\nThank You for all your time, i know it's pretty long code. </p>\n"}, {"tags": ["c", "struct", "compiler-construction"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1575419672, "post_id": 59167249, "comment_id": 104558162, "body": "This is so close to <a href=\"https://stackoverflow.com/questions/57342141/does-this-implementation-of-offsetof-invoke-undefined-behavior\">offsetof implementation</a>. Why not use offsetof? <code>(uintptr_t)(void*)foo + offsetof(struct Foo, y)</code> ?"}, {"owner": {"reputation": 522, "user_id": 153612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba347a31bc66bb2654de01850e914021?s=128&d=identicon&r=PG", "display_name": "Ta Thanh Dinh", "link": "https://stackoverflow.com/users/153612/ta-thanh-dinh"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575419970, "post_id": 59167249, "comment_id": 104558229, "body": "Thank you, but I cannot because I&#39;m implementing a toy compiler for <code>C</code>. So I wonder if the data-layout of struct is defined somewhere."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 2, "creation_date": 1575420840, "post_id": 59167249, "comment_id": 104558403, "body": "Wouldn&#39;t it be up to your compiler to determine the (lack of) padding? I would think that would be standards compliant, but I can&#39;t quote anything."}], "answers": [{"comments": [{"owner": {"reputation": 11672, "user_id": 3840170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L9NB3.png?s=128&g=1", "display_name": "user3840170", "link": "https://stackoverflow.com/users/3840170/user3840170"}, "edited": false, "score": 3, "creation_date": 1575447846, "post_id": 59167735, "comment_id": 104565660, "body": "Also note that some architectures may fail to support direct unaligned memory accesses entirely; it&#39;s not necessarily just a matter of performance. Unless the asker carefully compiles memory accesses so that unaligned loads and stores perform correctly, padding may be necessary just for the code to run at all."}], "tags": [], "owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "is_accepted": true, "score": 3, "last_activity_date": 1575427191, "last_edit_date": 1575427191, "creation_date": 1575423163, "answer_id": 59167735, "question_id": 59167249, "link": "https://stackoverflow.com/questions/59167249/compute-address-of-struct-field-given-struct-address/59167735#59167735", "title": "Compute address of struct field given struct address", "body": "<p>As the compiler author, <em>you</em> get to choose the amount and size of any padding.</p>\n\n<p>The standard says that you must allocate the members \"sequentially\" (section 6.2.5, paragraph 20, p. 42) and that, except for bit-fields, they occupy bytes (6.2.6.1, pp. 44-45).  Not much else is required in most cases.</p>\n\n<p>(Edit: one other requirement is that the first member have offset zero.  See section 6.7.2.1, paragraph 15, p. 113.)</p>\n\n<p>ABIs may make their own more-stringent requirements.  In general, as a compiler writer, you probably <em>should not</em> insert \"unnecessary\" padding, but it's up to you to define \"unnecessary\" here.  If you support some form of \"packed\" keyword or attribute, use it to enable or disable padding inserted for clear performance gains (e.g., padding that aligns a 4-byte int on a 4-byte boundary).  If moving an int to a <em>cache</em> line boundary <em>might</em> improve performance, but might not, leave that to the user.</p>\n"}], "owner": {"reputation": 522, "user_id": 153612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba347a31bc66bb2654de01850e914021?s=128&d=identicon&r=PG", "display_name": "Ta Thanh Dinh", "link": "https://stackoverflow.com/users/153612/ta-thanh-dinh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 59167735, "answer_count": 1, "score": 2, "last_activity_date": 1575427191, "creation_date": 1575418571, "question_id": 59167249, "link": "https://stackoverflow.com/questions/59167249/compute-address-of-struct-field-given-struct-address", "title": "Compute address of struct field given struct address", "body": "<p>Given a packed (i.e. assume that there is no alignment) struct:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct Foo {\n  int x;\n  int y;\n};\n\nstruct Foo *foo;\n</code></pre>\n\n<p>Is it \"safe\" (i.e. it is defined somewhere in the standard) to translate <code>&amp;foo-&gt;y</code> as <code>foo + sizeof(int)</code> (i.e. the address of foo->y is equal to the address of foo added with size of <code>int</code>) ?</p>\n\n<p>I'm following the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf\" rel=\"nofollow noreferrer\">C11 standard</a> <code>6.2.6 Representations of types</code> but it says nothing about how fields are stored in a struct. </p>\n"}, {"tags": ["c", "linux", "opendir"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1575415794, "post_id": 59166885, "comment_id": 104557397, "body": "What did you want to happen instead? And what is the actual directory structure? In other words, what is wrong?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575415886, "post_id": 59166885, "comment_id": 104557416, "body": "You&#39;re overwriting memory, because you&#39;re not calling calling <code>malloc</code> with the right sizes (you&#39;re writing more than you&#39;ve allocated).  For example, <code>sizeof(cwd)</code> is giving you 4 (or maybe 8), not the length you want, which you can compute with <code>strlen(cwd)</code>.  (I suspect there are other similar issues; that&#39;s just the first one I confirmed.)"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1575415994, "post_id": 59166885, "comment_id": 104557439, "body": "<code>char *pathPrefix = malloc(sizeof(cwd) + sizeof(slash)+1);</code> does not allocate the amount of memory that you seem to think it does.  <code>sizeof(cwd)</code> is the size of a pointer, and is unrelated to the length of the string."}, {"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1575417255, "post_id": 59166885, "comment_id": 104557677, "body": "<code>pathPrefix = strcat(cwd,slash)</code> is actually <b>modifying</b> the buffer <code>cwd</code> is pointing to, and it&#39;s not at all clear this is allowed. Is there room in the buffer for that extra slash and trailing NUL ?  This would be allocated in the caller where we can&#39;t see it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7590869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4697fbf895258f84feadb15a4a879800?s=128&d=identicon&r=PG&f=1", "display_name": "juggy_crisp", "link": "https://stackoverflow.com/users/7590869/juggy-crisp"}, "edited": false, "score": 0, "creation_date": 1575492468, "post_id": 59167114, "comment_id": 104589303, "body": "Thank you! This helped a ton!"}], "tags": [], "owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "is_accepted": false, "score": 3, "last_activity_date": 1575418116, "last_edit_date": 1575418116, "creation_date": 1575417500, "answer_id": 59167114, "question_id": 59166885, "link": "https://stackoverflow.com/questions/59166885/why-does-opendir-change-the-file-path-string-passed-to-it/59167114#59167114", "title": "Why does opendir() change the file path string passed to it?", "body": "<p>This code is for sure wrong:</p>\n\n<pre><code>char *pathPrefix = malloc(sizeof(cwd) + sizeof(slash)+1);\npathPrefix = strcat(cwd,slash);\n</code></pre>\n\n<p>As noted by @Steve and @William, the <code>sizeof</code> are applying to the <em>pointer</em> instead of the character string, so it's allocating either 4 or 8 bytes each (plus one), and this is unlikely to be enough. <code>strlen(s)</code> counts the number of active characters in the string; you have to add +1 for the NUL byte yourself.</p>\n\n<p>But a bigger problem is the use of <code>strcat()</code>, which appends the second string <em>to the tail end of the first string</em>, modifying that first string. This is NOT creating a new joined string for you, filling it into the newly-allocated (too small) memory.</p>\n\n<p>This should behave better:</p>\n\n<pre><code>char *pathPrefix = malloc(strlen(cwd) + strlen(slash) + 1);\nstrcpy(pathPrefix, cwd);   // cwd goes to the start of the new buffer\nstrcat(pathPrefix, slash); // append the slash to the end of cwd\n</code></pre>\n\n<p>... then make similar changes in the rest of the code.</p>\n\n<p><strong>EDIT</strong>: When doing this kind of work, it's a good practice to <code>const</code> qualify any <code>char *</code> variables that you don't intend to modify (where the strings are readonly from your perspective). Doing this adds helpful documentation to your code, and the compiler will warn you of common mistakes.</p>\n\n<p>Example:</p>\n\n<pre><code>void printDir(const char *cwd)\n{\n  ...\n  const char *slash = \"/\";\n  const char *dot   = \".\";\n  const char *dotdot = \"..\";\n\n  ...\n</code></pre>\n\n<p>It's not legal to modify a string literal anyway, but had the <code>cwd</code> parameter been const-qualified, the compiler would have objected to <code>strcat(cwd, slash)</code> because it knows that the first parameter gets written to.</p>\n\n<p>This doesn't really change the behavior of the code, but it's a good habit to get into. <code>const</code> is your friend.</p>\n"}, {"tags": [], "owner": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "is_accepted": false, "score": 0, "last_activity_date": 1575418383, "creation_date": 1575418383, "answer_id": 59167217, "question_id": 59166885, "link": "https://stackoverflow.com/questions/59166885/why-does-opendir-change-the-file-path-string-passed-to-it/59167217#59167217", "title": "Why does opendir() change the file path string passed to it?", "body": "<p>There are some bugs related to string operations. Remember that str*() functions (strcat(), strcopy() etc.) put the result into buffer, which pointer is passed as the first argument.\nSo:</p>\n\n<p>1) About the code on beginning:</p>\n\n<pre><code>char *pathPrefix = malloc(sizeof(cwd) + sizeof(slash)+1);\npathPrefix = strcat(cwd, slash);\n</code></pre>\n\n<p>you should use mallocated buffer pointer as the first argument, of course you need to have the cwd copied here before strcat(). Below is proper code:</p>\n\n<pre><code>char *pathPrefix = malloc(sizeof(cwd) + sizeof(slash)+1);\nstrcpy(pathPrefix, cwd);\nstrcat(pathPrefix, slash);\n</code></pre>\n\n<p>2) Inside the first 'if' block in 'while' loop: you did it properly, but there is no need to assign 'tempFullPath' by value returned from 'strcpy()' - you already passed this pointer as the first argument, so the copying will be performed into this buffer.\nSo, replace the:</p>\n\n<pre><code>char *tempFullPath = malloc(sizeof(pathPrefix) + sizeof(temp) + 1);\ntempFullPath = strcpy(tempFullPath, cwd);\nstrcat(tempFullPath, temp);\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>char *tempFullPath = malloc(sizeof(pathPrefix) + sizeof(temp) + 1);\nstrcpy(tempFullPath, cwd);\nstrcat(tempFullPath, temp);\n</code></pre>\n\n<p>3) Do NOT forget about freeing memory allocated by \"malloc()' !!!! (every 'malloc()' must have corresponding 'free()').</p>\n"}], "owner": {"reputation": 11, "user_id": 7590869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4697fbf895258f84feadb15a4a879800?s=128&d=identicon&r=PG&f=1", "display_name": "juggy_crisp", "link": "https://stackoverflow.com/users/7590869/juggy-crisp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1575418383, "creation_date": 1575415539, "question_id": 59166885, "link": "https://stackoverflow.com/questions/59166885/why-does-opendir-change-the-file-path-string-passed-to-it", "title": "Why does opendir() change the file path string passed to it?", "body": "<p>I am trying to write a function given a current working directory will print all the contents of that directory as well as the contents in the sub directories in the cwd.</p>\n\n<pre><code>void printDir(char *cwd)\n{\n  printf(\"file path after printdir call: %s\\n\",cwd);\n  DIR *dirPtr = opendir(cwd);\n  struct dirent *dirEnt;\n\n  char *slash = \"/\";\n  char *dot = \".\";\n  char *dotdot = \"..\";\n  char *pathPrefix = malloc(sizeof(cwd) + sizeof(slash)+1);\n  pathPrefix = strcat(cwd,slash);\n\n  if (dirPtr != NULL)\n  {\n      while((dirEnt = readdir(dirPtr)) != NULL)\n      {\n          char *temp = dirEnt-&gt;d_name;\n          if (strcmp(temp,dot) != 0 &amp;&amp; strcmp(temp,dotdot) != 0)\n          {\n\n             char *tempFullPath = malloc(sizeof(pathPrefix) + sizeof(temp) + 1);\n             tempFullPath = strcpy(tempFullPath, cwd);\n             strcat(tempFullPath, temp);\n\n             printf(\"file path before we try to openthedir: %s\\n\",tempFullPath);\n             DIR *tempSubDirPtr = opendir(tempFullPath);\n\n             printf(\"filePath after we try to open this shit: %s\\n\",tempFullPath2);\n             if (tempSubDirPtr != NULL)\n             {\n                  printf(\"file path right before a recursive call: %s\\n\",tempFullPath);\n                  closedir(tempSubDirPtr);\n                  printDir(tempFullPath);\n           }\n           printf(\"%s\\n\",tempFullPath);\n        }\n    }\n}\nelse\n{\n</code></pre>\n\n<p>With the debugging printf()'s the console output is: </p>\n\n<pre><code>current working directory string after getcwd: /home/TTU/canorman/testUtil\nfile path after printdir call: /home/TTU/canorman/testUtil\nfile path before we try to openthedir: /home/TTU/canorman/testUtil/find.c\nfilePath after we try to open this shit: /home/TTU/canorman/testUtil/find.c\n/home/TTU/canorman/testUtil/find.c\nfile path before we try to openthedir: /home/TTU/canorman/testUtil/find2.c\nfilePath after we try to open this shit: /home/TTU/canorman/testUtil/find2.c\n/home/TTU/canorman/testUtil/find2.c\nfile path before we try to openthedir: /home/TTU/canorman/testUtil/find\nfilePath after we try to open this shit: /home/TTU/canorman/testUtil/find\n/home/TTU/canorman/testUtil/find\nfile path before we try to openthedir: /home/TTU/canorman/testUtil/testDir\nfilePath after we try to open this shit: /home/TTU/canorman/testUA\nfile path right before a recursive call: /home/TTU/canorman/testUA\nfile path after printdir call: /home/TTU/canorman/testUA\nCould not open specified working directory\n/home/TTU/canorman/testUA/\n</code></pre>\n\n<p>So as you can see in the last few lines of the output that the file string goes from </p>\n\n<pre><code>/home/TTU/canorman/testUtil/testDir\n</code></pre>\n\n<p>to </p>\n\n<pre><code>/home/TTU/canorman/testUA\n</code></pre>\n\n<p>I can't find anything in the opendir(3) man pages about this happening.\nAny ideas as to why this going on.</p>\n"}, {"tags": ["c", "file", "binary", "hex", "mips"], "owner": {"reputation": 11, "user_id": 11313361, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ks3B1-yrhBs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTcQBvGXvX-r_EoWnTbb2S0WT1TA/mo/photo.jpg?sz=128", "display_name": "Joshua Stoffey", "link": "https://stackoverflow.com/users/11313361/joshua-stoffey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575414751, "creation_date": 1575414751, "question_id": 59166775, "link": "https://stackoverflow.com/questions/59166775/turning-mips-instruction-into-binary-then-into-hexadecimal", "title": "Turning MIPS instruction into Binary, then into Hexadecimal", "body": "<p>For a class project I need to read in a file of at least for MIPS instructions like:</p>\n\n<pre><code>add $t0, $s1, $s4\naddi $t1, $a0, 7\n</code></pre>\n\n<p>and so on...(I can make the file whatever I want and I only need to worry about I and R format)\nmy problem is reading from the file and actually converting it to binary first, then binary to hexadecimal should'nt be hard.\nI'm just not sure how to correctly read in the instructions and turn it into binary. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAX 10\n#define SIZE 128\nstruct{\n        const char *name;\n        char *address;\n}registers[] = {{ \"zero\", \"00000\"},\n                { \"at\", \"00001\" },\n                { \"v0\", \"00010\" },\n                { \"v1\", \"00011\" },\n                { \"a0\", \"00100\" },\n                { \"a1\", \"00101\" },\n                { \"a2\", \"00110\" },\n                { \"a3\", \"00111\" },\n                { \"t0\", \"01000\" },\n                { \"t1\", \"01001\" },\n                { \"t2\", \"01010\" },\n                { \"t3\", \"01011\" },\n                { \"t4\", \"01100\" },\n                { \"t5\", \"01101\" },\n                { \"t6\", \"01110\" },\n                { \"t7\", \"01111\" },\n                { \"s0\", \"10000\" },\n                { \"s1\", \"10001\" },\n                { \"s2\", \"10010\" },\n                { \"s3\", \"10011\" },\n                { \"s4\", \"10100\" },\n                { \"s5\", \"10101\" },\n                { \"s6\", \"10110\" },\n                { \"s7\", \"10111\" },\n                { \"t8\", \"11000\" },\n                { \"t9\", \"11001\" },\n                { NULL, 0 } };\n\n\nstruct{\n        const char *name;\n        char *function;\n}rInst[] = {{ \"add\", \"100000\" },\n                { \"sub\", \"100001\" },\n                { \"and\", \"100100\" },\n                { \"or\",  \"100101\" },\n                { \"sll\", \"000000\" },\n                { \"slt\", \"101010\" },\n                { \"srl\", \"000010\" },\n                { \"jr\",  \"001000\" },\n                { NULL, 0 } };\n\nstruct {\n        const char *name;\n        char *function;\n} iInst[] = {{ \"lw\",   \"100011\" },\n                { \"sw\",   \"101011\" },\n                { \"andi\", \"001100\" },\n                { \"ori\",  \"001101\" },\n                { \"lui\",  \"001111\" },\n                { \"beq\",  \"000100\" },\n                { \"slti\", \"001010\" },\n                { \"addi\", \"001000\" },\n                { NULL, 0 } };\n\nstruct inst{\n        char opcode[MAX];\n        char register1[MAX];\n        char register2[MAX];\n        char register3[MAX];\n        int num;\n        struct inst *next;\n}*first, *current;\n\nint main(){\n         FILE *fp = fopen( \"/home/js0939/CompOrg/MIPSLab5.txt\", \"r\");\n         char *result[10][4];\n         char line[SIZE];\n         char *value;\n         if(fp == NULL){\n                 printf(\"Error.\");\n                 return 1;\n         }\n\n\n    int i=0;\n    int j=0;\n    int k=0;\n    int l=0;\n    char* func;\n    char* reg;\n\n    // loop through each entry in file\n    while(fgets(line, sizeof(line), fp)){\n        //retrieves instruction\n        value = strtok(line, \" \");\n        result[i][0] = strdup(value);\n        for (i = 0; rInst[i].name != NULL; i++) {\n                if (strcmp(value, rInst[i].name) == 0) {\n                        func = rInst[i].function;\n                        printf(\"%s \", func);\n                }\n        }\n\n        for (i = 0; iInst[i].name != NULL; i++) {\n                if (strcmp(value, iInst[i].name) == 0) {\n                        func = iInst[i].function;\n                        printf(\"%s \", func);\n                }\n        }\n\n        //retrieves first register\n        value = strtok(NULL, \" \");\n        result[i][1] = strdup(value);\n        printf(\"%s \", value);\n        for (i = 0; registers[i].name != NULL; i++){\n                if(strcmp(value, registers[i].address) == 0){\n                        reg = registers[i].address;\n                        printf(\"%s \", reg);\n                }\n        }\n\n        //retreives second register\n        value = strtok(NULL, \" \");\n    result[i][2] = strdup(value);\n        printf(\"%s \", value);\n        for (i = 0; registers[i].name != NULL; i++){\n                if(strcmp(value, registers[i].address) == 0){\n                        reg = registers[i].address;\n                        printf(\"%s \", reg);\n                }\n        }\n\n\n        //retreives third register\n        value = strtok(NULL, \" \\n\");\n        result[i][3] = strdup(value);\n        printf(\"%s \", value);\n        for (i = 0; registers[i].name != NULL; i++){\n                if(strcmp(value, registers[i].address) == 0){\n                        reg = registers[i].address;\n                        printf(\"%s \", reg);\n                }\n        }\n\n\n        //go to next line\n        printf(\"\\n\");\n        i++;\n    }\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "mpi", "openmpi", "hpc"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1575419849, "post_id": 59166650, "comment_id": 104558208, "body": "all the ranks must call <code>MPI_Bcast()</code> with the same <code>root</code> argument. When asking a question, please at least include your <code>mpirun</code> command line and a brief description of what is not working as expected."}, {"owner": {"reputation": 1, "user_id": 12476740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5715638f1f45ff14a743cf583e26974?s=128&d=identicon&r=PG", "display_name": "ICESpartan", "link": "https://stackoverflow.com/users/12476740/icespartan"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1575456163, "post_id": 59166650, "comment_id": 104570190, "body": "Sorry if the explanation was to undescriptive. The message passing from bcast is not passing the variable from the if statement as I would like. As I assign the Port variable as a start and then move on to randomly assigning a new rank to it each iteration."}], "owner": {"reputation": 1, "user_id": 12476740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5715638f1f45ff14a743cf583e26974?s=128&d=identicon&r=PG", "display_name": "ICESpartan", "link": "https://stackoverflow.com/users/12476740/icespartan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575414593, "creation_date": 1575413852, "last_edit_date": 1575414593, "question_id": 59166650, "link": "https://stackoverflow.com/questions/59166650/mpi-code-wont-sync-properly-possible-race-condition", "title": "Mpi code wont sync properly, Possible race condition?", "body": "<p>Hi I have been struggling with this piece of code for a while now. Its kinda messy but I will end up cleaning it so bear with me. The code is supposed to simulate the movement of a ship to start with but I cannot get it to work properly. Im using the collective function Broadcast in a loop but it only works for the first two iterations of the for loop Ill give an output from slurm along with the code. Thanks in advance.</p>\n\n<pre><code>Code\n\n#include &lt;stdio.h&gt;\n#include &lt;mpi.h&gt;\n#include &lt;stdlib.h&gt;\n#define SIZE 16\n#define UP 0\n#define DOWN 1\n#define LEFT 2\n#define RIGHT 3\n#define LAND 1\n#define SEA 0\n#define PORT 12\n\nstruct Cell {\n  int up;\n  int down;\n  int left;\n  int right;\n};\n\nstruct Boat {\n  int nextDir;\n  int currCell;\n  int amountFish;\n  int isFishing;\n};\n\nint randomDir(int rank){\n  srand(time(NULL)^rank);\n  return rand() % (3 + 1);\n}\n\nint main (int argc, char** argv) {\n  int numtasks, rank, source, dest, outbuf, i, tag=1;\n  int inbuf[4]={MPI_PROC_NULL,MPI_PROC_NULL, MPI_PROC_NULL,\n        MPI_PROC_NULL};\n  int nbrs[4];\n  int dims[2] = {5,5}, periods[2] = {1,1}, reorder=1;\n  int coords[2];\n  int enviromentType;\n  int arrBuffer[4];\n  struct Cell cells[dims[0]*dims[1]];\n  MPI_Comm cartcomm;\n\n  MPI_Request reqs[8];\n  MPI_Status stats[8];\n\n // starting with MPI program\n  MPI_Init(&amp;argc, &amp;argv);\n\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;numtasks);\n  MPI_Cart_create(MPI_COMM_WORLD, 2, dims, periods,reorder, &amp;cartcomm);\n\n  MPI_Comm_rank(cartcomm, &amp;rank);\n\n  MPI_Cart_coords(cartcomm, rank, 2, coords);\n\n  if(rank == PORT) enviromentType = LAND;\n  else enviromentType = SEA;\n\n  MPI_Cart_shift(cartcomm, 0, 1, &amp;nbrs[UP], &amp;nbrs[DOWN] );\n  MPI_Cart_shift(cartcomm, 1, 1, &amp;nbrs[LEFT], &amp;nbrs[RIGHT] );\n   // do some work with MPI communication operations...\n\n   outbuf = enviromentType;\n\n   for (i=0; i&lt;4;i++) {\n      dest=nbrs[i];\n      source=nbrs[i];\n      // perform non-blocking communication\n      MPI_Isend(&amp;outbuf, 1, MPI_INT, dest, tag, MPI_COMM_WORLD, &amp;reqs[i]);\n      MPI_Irecv(&amp;inbuf[i], 1, MPI_INT, source, tag, MPI_COMM_WORLD, &amp;reqs[i+4]); // 4 as a kind of offset\n    }\n\n    // wait for non-blocking communication to be completed for output\n    MPI_Waitall(8, reqs, stats);\n\n    struct Cell cell = {inbuf[UP], inbuf[DOWN], inbuf[LEFT], inbuf[RIGHT]};\n\n    cells[rank] = cell;\n    int buffArr[4];\n    int inArr[4];\n    source = PORT;\n    MPI_Request req[2];\n    MPI_Status stat[2];\n    //Simulate\n    struct Boat boat = {0, PORT, 0, 0};\n    for(int iter = 0; iter &lt; 3; iter++){\n      MPI_Barrier(MPI_COMM_WORLD);\n      if(rank == boat.currCell){\n        printf(\"Boat is at cell: %d\\n\", rank);\n        int nextDirection = randomDir(rank);\n        source = rank;\n        switch(nextDirection){\n          case UP:\n            boat.currCell = nbrs[UP];\n            break;\n          case DOWN:\n            boat.currCell = nbrs[DOWN];\n            break;\n          case LEFT:\n            boat.currCell = nbrs[LEFT];\n            break;\n          case RIGHT:\n            boat.currCell = nbrs[RIGHT];\n            break;\n        }\n\n        printf(\"Next direction %d leads to cell %d\\n\", nextDirection, boat.currCell);\n        buffArr[0] = boat.nextDir;\n        buffArr[1] = boat.currCell;\n        buffArr[2] = boat.amountFish;\n        buffArr[3] = boat.isFishing;\n        dest = buffArr[1];\n        source = rank;\n\n      }\n\n      MPI_Barrier(MPI_COMM_WORLD);\n      MPI_Bcast(&amp;buffArr, 4, MPI_INT, source, MPI_COMM_WORLD);\n      MPI_Barrier(MPI_COMM_WORLD);\n      boat.nextDir = buffArr[0];\n      boat.currCell = buffArr[1];\n      boat.amountFish = buffArr[2];\n      boat.isFishing = buffArr[3];\n      printf(\"Rank %d has currcell %d\\n\", rank,buffArr[1]);\n\n    }\n    MPI_Finalize();\n\n    return 0;\n  }\n\n</code></pre>\n\n<pre><code>Output:\nBoat is at cell: 12\nNext direction 0 leads to cell 7\nRank 20 has currcell 7\nRank 22 has currcell 7\nRank 12 has currcell 7\nRank 14 has currcell 7\nRank 16 has currcell 7\nRank 18 has currcell 7\nRank 6 has currcell 7\nRank 8 has currcell 7\nRank 10 has currcell 7\nRank 13 has currcell 7\nRank 17 has currcell 7\nRank 21 has currcell 7\nRank 23 has currcell 7\nRank 0 has currcell 7\nRank 1 has currcell 7\nRank 2 has currcell 7\nRank 3 has currcell 7\nRank 4 has currcell 7\nRank 5 has currcell 7\nRank 7 has currcell 7\nRank 9 has currcell 7\nRank 11 has currcell 7\nRank 15 has currcell 7\nRank 19 has currcell 7\nBoat is at cell: 7\nNext direction 1 leads to cell 12\nRank 24 has currcell 7\nRank 18 has currcell 7\nRank 6 has currcell 7\nRank 8 has currcell 7\nRank 10 has currcell 7\nRank 12 has currcell 7\nRank 14 has currcell 7\nRank 16 has currcell 7\nRank 22 has currcell 7\nRank 20 has currcell 7\nRank 23 has currcell 7\nRank 0 has currcell 7\nRank 1 has currcell 7\nRank 2 has currcell 7\nRank 3 has currcell 7\nRank 4 has currcell 7\nRank 7 has currcell 12\nRank 5 has currcell 7\nRank 19 has currcell 7\nRank 9 has currcell 7\nRank 11 has currcell 7\nRank 13 has currcell 7\nRank 15 has currcell 7\nRank 17 has currcell 7\nRank 21 has currcell 7\nRank 24 has currcell 7\nRank 23 has currcell 7\nRank 0 has currcell 7\nRank 1 has currcell 7\nRank 2 has currcell 7\nRank 3 has currcell 7\nRank 4 has currcell 7\nRank 7 has currcell 12\nRank 18 has currcell 7\nRank 5 has currcell 7\nRank 6 has currcell 7\nRank 19 has currcell 7\nRank 8 has currcell 7\nRank 10 has currcell 7\nRank 9 has currcell 7\nRank 12 has currcell 7\nRank 11 has currcell 7\nRank 14 has currcell 7\nRank 13 has currcell 7\nRank 16 has currcell 7\nRank 22 has currcell 7\nRank 17 has currcell 7\nRank 21 has currcell 7\nRank 20 has currcell 7\nRank 15 has currcell 7\nRank 24 has currcell 7\n\n</code></pre>\n"}, {"tags": ["c", "input", "text", "menu"], "comments": [{"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575414519, "post_id": 59166415, "comment_id": 104557105, "body": "Does option 4 always fail, even if you type it immediately after starting the program? If not, then the problem can likely be solved by changing <code>scanf(&quot;%c&quot;, &amp;option);</code> to <code>scanf(&quot; %c&quot;, &amp;option);</code> to remove any preceding whitespace. See <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">this question</a> for further information on removing whitespace with scanf."}, {"owner": {"reputation": 47, "user_id": 10979875, "user_type": "registered", "profile_image": "https://graph.facebook.com/2274068452614555/picture?type=large", "display_name": "Patryk Piwowarczyk", "link": "https://stackoverflow.com/users/10979875/patryk-piwowarczyk"}, "reply_to_user": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575414671, "post_id": 59166415, "comment_id": 104557139, "body": "Menu displays normally. Additionaly typing option 5 works just fine. Only after typing option 4 the default case is activated (instead of case no 4)"}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575414792, "post_id": 59166415, "comment_id": 104557164, "body": "When you type 4, are you sure that only the default case is activated? Or could it be that the proper case is activated and then the default case is activated immediately afterwards (due to it reading the newline character), without you pressing any further keys? Can you scroll back in the console window to see if anyting else was activated beforehand?"}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575415176, "post_id": 59166415, "comment_id": 104557251, "body": "Although I can&#39;t reproduce it with my Microsoft Visual Studio 2017 compiler, I suspect that your program is working as intended, except for scanf reading a newline character immediately afterwards, which causes the default case to be triggered immediately afterwards. You can also test if I am correct by changing the scanf line as I posted above (by adding a space character to the format string)."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575416070, "post_id": 59166415, "comment_id": 104557456, "body": "My guess that the reason why 5 works fine, but not 4, is that 5 causes a program exit, so that the newline character cannot trigger the default case immediately afterwards."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575416133, "post_id": 59166415, "comment_id": 104557465, "body": "Does pressing 1, 2 and 3 also trigger the default case?"}, {"owner": {"reputation": 47, "user_id": 10979875, "user_type": "registered", "profile_image": "https://graph.facebook.com/2274068452614555/picture?type=large", "display_name": "Patryk Piwowarczyk", "link": "https://stackoverflow.com/users/10979875/patryk-piwowarczyk"}, "reply_to_user": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575451806, "post_id": 59166415, "comment_id": 104567649, "body": "Pressing 1,2 and 3 also triggers the default case and you were right. Program indeed prints my file and then prints the menu once again. So maybe should I implement another menu on the end of the file printing function? right? Like one that would ask user to choose whether he wants to go back to the menu? Or is there any better way to do this?"}, {"owner": {"reputation": 47, "user_id": 10979875, "user_type": "registered", "profile_image": "https://graph.facebook.com/2274068452614555/picture?type=large", "display_name": "Patryk Piwowarczyk", "link": "https://stackoverflow.com/users/10979875/patryk-piwowarczyk"}, "reply_to_user": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575451978, "post_id": 59166415, "comment_id": 104567762, "body": "Also Thank you alot!!! I would never have noticed it!"}, {"owner": {"reputation": 47, "user_id": 10979875, "user_type": "registered", "profile_image": "https://graph.facebook.com/2274068452614555/picture?type=large", "display_name": "Patryk Piwowarczyk", "link": "https://stackoverflow.com/users/10979875/patryk-piwowarczyk"}, "reply_to_user": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575459650, "post_id": 59166415, "comment_id": 104571968, "body": "Sorry for repeating comments. I managed to get it to work. Thank you mate :)"}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575478788, "post_id": 59166415, "comment_id": 104583206, "body": "As I have already stated in my first comment, if my theory is correct, the proper solution to the problem is to simply add a space to the scanf format string, so that scanf discards all whitespace before reading the menu selection character. I have now formulated a proper answer to your question. If that answer is correct, please accept it. If not, please explain exactly how you were able to get it to work instead."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10979875, "user_type": "registered", "profile_image": "https://graph.facebook.com/2274068452614555/picture?type=large", "display_name": "Patryk Piwowarczyk", "link": "https://stackoverflow.com/users/10979875/patryk-piwowarczyk"}, "edited": false, "score": 0, "creation_date": 1575485205, "post_id": 59181125, "comment_id": 104586416, "body": "this was exactly the problem. I fixed it using  fflush(stdin); function. But your way of fixing it was also fine."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "reply_to_user": {"reputation": 47, "user_id": 10979875, "user_type": "registered", "profile_image": "https://graph.facebook.com/2274068452614555/picture?type=large", "display_name": "Patryk Piwowarczyk", "link": "https://stackoverflow.com/users/10979875/patryk-piwowarczyk"}, "edited": false, "score": 0, "creation_date": 1575487410, "post_id": 59181125, "comment_id": 104587251, "body": "@PatrykPiwowarczyk: As far as I know, calling <code>fflush(stdin)</code> has no effect on some platforms. See <a href=\"https://stackoverflow.com/questions/2979209/using-fflushstdin\">this question</a> for further information on why it should not be used. I suggest using my solution instead, which is the proper way to solve this problem."}], "tags": [], "owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "is_accepted": true, "score": 0, "last_activity_date": 1599751468, "last_edit_date": 1599751468, "creation_date": 1575478619, "answer_id": 59181125, "question_id": 59166415, "link": "https://stackoverflow.com/questions/59166415/function-that-reads-the-file-doesnt-work-interactive-menu-problem/59181125#59181125", "title": "Function that reads the file doesn&#39;t work. Interactive menu problem", "body": "<p>Based on your comments, I conclude the following:</p>\n<p>The problem was that <code>scanf</code> correctly wrote the digit into the variable <code>option</code> the first time it was called. However, the second time <code>scanf</code> was called, it immediately returned the newline character from the previous menu selection, instead of waiting for the user to enter another digit. Whenever <code>scanf</code> returned a newline, the default case was triggered.</p>\n<p>Therefore, the problem can be best solved by changing the <code>scanf</code> call to the following:</p>\n<p><code>scanf(&quot; %c&quot;, &amp;option);</code></p>\n<p>By adding a space to the start of the format string, you instruct <code>scanf</code> to discard all whitespace characters before reading the character. That way, you can insure that a newline will never be written into the <code>option</code> variable.</p>\n<p>The problem of <code>scanf</code> reading newline characters instead of discarding them has been discussed in more detail in <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">this question</a>.</p>\n"}], "owner": {"reputation": 47, "user_id": 10979875, "user_type": "registered", "profile_image": "https://graph.facebook.com/2274068452614555/picture?type=large", "display_name": "Patryk Piwowarczyk", "link": "https://stackoverflow.com/users/10979875/patryk-piwowarczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59181125, "answer_count": 1, "score": 2, "last_activity_date": 1599751468, "creation_date": 1575412443, "question_id": 59166415, "link": "https://stackoverflow.com/questions/59166415/function-that-reads-the-file-doesnt-work-interactive-menu-problem", "title": "Function that reads the file doesn&#39;t work. Interactive menu problem", "body": "<p>Im having some problems making my newly started project to work (also im a beginner).\nFor some reason option number 4 in my interactive menu doesn't work and just takes a default route (doesn't output whats inside a file (file directory is fine.).</p>\n\n<p>At this point i've read every forum searching for answer but couldn't modify my code in any way that would work. \nSo I decided to ask you for help.\nHere is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define kFileLocation \"/Users/patrykpiwowarczyk/Desktop/STUDIA/FoCP/Kodowanie/TestProjektSemestralnyAngielski/TestProjektSemestralnyAngielski/authors.txt\"\n\nvoid options();\nvoid start(void);\nvoid score(void);\nvoid optionz(void);\nvoid author(void);\n\nvoid pexit(void);\n\n    int main(void)\n    {\n        char ch;\n        int num;\n        char option;\n        while (1) {\n            printf(\"****Your English Learning Index Cards****\\n\\n\");\n            printf(\"Enter 1-5 of the following options: \\n\\n\");\n            options();\n            scanf(\"%c\", &amp;option);\n\n            switch (option) {\n                case '1':\n\n                    break;\n                case '2':\n\n                    break;\n                case '3':\n                    break;\n                case '4':\n                    author();\n                    break;\n                case '5':\n                    pexit();\n                    break;\n                default:\n                    printf(\"Please insert number ranging from 1-5 though... No cheating! \\n\\n\");\n                    printf(\"Press ENTER key to Continue\\n\");\n\n            }\n\n\n        }\n        return 0;\n    }\n\n    void options()\n    {\n        printf(\"1. Start Game \\n\");\n        printf(\"2. View Scoreboard \\n\");\n        printf(\"3. Options \\n\");\n        printf(\"4. Author \\n\");\n        printf(\"5. Exit \\n\\n\");\n    }\n\nvoid author()\n{\n\n    char c;\n    FILE *authorsFile;\n\n\n    if ((authorsFile = fopen(\"/Users/patrykpiwowarczyk/Desktop/STUDIA/FoCP/Kodowanie/TestProjektSemestralnyAngielski/TestProjektSemestralnyAngielski/authors.txt\",\"r\")) == NULL)\n    {\n        printf(\"FAILED to read the file, maybe check directory?\\n\");\n        exit(1);\n    }\n\n    while ((c = fgetc(authorsFile)) != EOF)\n    {\n\n        printf(\"%c\", c);\n    }\n\n    fclose(authorsFile);\n\n\n}\n\nvoid pexit()\n{\n\n    puts(\"Your progress has been saved, see you next time.\");\n    exit(0);\n}\n</code></pre>\n\n<p>if you could help me in any way I would appreciate it soo much..</p>\n\n<p>Greetings, Patryk Piwowarczyk.</p>\n\n<p>PS: the #define kFileLocation is a leftover from my other tries. Omit it.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1575412293, "post_id": 59166357, "comment_id": 104556495, "body": "What does &quot;just cant get this to work&quot; mean?  Please take some time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> also. FYI - dividing two integers is not going to return a double."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 3, "creation_date": 1575412402, "post_id": 59166357, "comment_id": 104556528, "body": "Any warnings of the C compiler? Did you try a debugger? Especially suspect is <code>niz[0]</code> as automatic variable."}, {"owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "edited": false, "score": 3, "creation_date": 1575412557, "post_id": 59166357, "comment_id": 104556585, "body": "the compiler produce 2 warning, have a look at those"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1575413415, "post_id": 59166357, "comment_id": 104556826, "body": "Wow, the warnings even tell you the line number where the problematic code was found -- and what the problem is <code>:)</code>"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1575413470, "post_id": 59166357, "comment_id": 104556838, "body": "@DavidRankin-ReinstateMonica - bah. Strong typing is for weak minds!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575413615, "post_id": 59166357, "comment_id": 104556887, "body": "Also, C requires that an array declaration have a size greater than <code>0</code> <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.6.2\" rel=\"nofollow noreferrer\">C11 Standard - 6.7.6.2 Array declarators(p1)</a> <i>&quot;...the [ and ] may delimit an expression or *. If they delimit an expression (which specifies the size of an array), the expression shall have an integer type. If the expression is a constant expression, it shall have a value greater than zero. ...&quot;</i> (@BobJarvis-ReinstateMonica ...chuckling <code>:)</code>"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1575413970, "post_id": 59166357, "comment_id": 104556977, "body": "Back In The Day (tm) we passed <b><i>everything</i></b> as <code>int</code>! And we liked it that way!! We loved it!!!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1575414665, "post_id": 59166357, "comment_id": 104557136, "body": "Even better -- we didn&#39;t even tell you what we were passing until we got into the function. Types in parameter lists in parenthesis -- bah..."}], "answers": [{"tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": false, "score": 0, "last_activity_date": 1575416255, "creation_date": 1575416255, "answer_id": 59166975, "question_id": 59166357, "link": "https://stackoverflow.com/questions/59166357/why-cant-i-get-this-simple-c-program-to-work/59166975#59166975", "title": "Why can&#39;t i get this simple C program to work?", "body": "<p>What about this, sorry it is in English , I don't speak Serbian.</p>\n\n<pre><code>#include \"stdlib.h\"\n#include \"string.h\"\n#include \"stdio.h\"\n\n#define MAX 41\n\nint check(unsigned int brElem)\n{\n\n    if (brElem &lt;= MAX){\n        return brElem;\n    }\n    else {\n        return 69;\n    }\n}\n\nvoid num_to_array(int *niz, unsigned int brElem)\n{\n    for (unsigned int i = 0; i &lt; brElem; ++i)\n    {\n        printf(\"niz[%u] = \", i);\n        scanf(\"%d\", &amp;niz[i]);\n    }\n\n}\n\ndouble average(int niz[0], unsigned int brElem)\n{\n    int j = 0;\n    for (unsigned int i = 0; i &lt; brElem; ++i)\n    {\n        j = j + niz[i];\n    }\n    return j/brElem;\n}\n\nint main()\n{\n    int n, m, j, niz[MAX];\n\n    printf(\"how many numbers ?\\n\");\n    scanf(\"%d\", &amp;n);              //unos broja elemenata niza\n    int brElem = check(n);\n\n    printf(\"enter numbers\\n\");    //unos elemenata niza\n    num_to_array(niz, brElem);\n\n    double arSredina = average(niz, brElem);\n    printf(\"aritmeticka sredina niza je \");\n    printf(\"%lf\", arSredina);\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12476650, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDe1cQirTNXl6L68lkR2P9F65iZlW9mfgOLHEfkDg=k-s128", "display_name": "rastko dragic", "link": "https://stackoverflow.com/users/12476650/rastko-dragic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575426909, "creation_date": 1575412220, "last_edit_date": 1575426909, "question_id": 59166357, "link": "https://stackoverflow.com/questions/59166357/why-cant-i-get-this-simple-c-program-to-work", "title": "Why can&#39;t i get this simple C program to work?", "body": "<p>I am making a simple console program that is supposed to enable the user to enter an array and the program is supposed to display the arithmetic average of all the numbers, but no matter what I try I just cant get this to work. Can anyone here point out why this isn't working?</p>\n\n<p>(This is in Serbian but you can probably see what is what.)</p>\n\n<p>Edit: I get these errors when I run this code:</p>\n\n<pre><code>||=== Build file: \"no target\" in \"no project\" (compiler: unknown) ===|\nF:\\rastko\\Documents\\Code\\C\\Test1\\main.c||In function 'main':|\nF:\\rastko\\Documents\\Code\\C\\Test1\\main.c|49|warning: passing argument 1 of 'UnesiElementeNiza' makes pointer from integer without a cast [-Wint-conversion]|\nF:\\rastko\\Documents\\Code\\C\\Test1\\main.c|19|note: expected 'int *' but argument is of type 'int'|\nF:\\rastko\\Documents\\Code\\C\\Test1\\main.c|51|warning: passing argument 1 of 'AritmetickaSredinaNiza' makes pointer from integer without a cast [-Wint-conversion]|\nF:\\rastko\\Documents\\Code\\C\\Test1\\main.c|29|note: expected 'unsigned int *' but argument is of type 'int'|\n||=== Build finished: 0 error(s), 2 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n\n<p>And then the program crashes. I do not know what this means and my English is not the best when it comes to technical talk because i am learning how to code in Serbian.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX 41\n\nint BrojElemenataNiza(unsigned int brElem)\n{\n\n    if (brElem &lt;= MAX){\n        return brElem;\n    }\n    else {\n        return 69;\n    }\n}\n\nvoid UnesiElementeNiza(int niz[0], unsigned int brElem)\n{\n    for (unsigned int i = 0; i &lt; brElem; ++i)\n    {\n        printf(\"niz[%u] = \", i);\n        scanf(\"%d\", &amp;niz[i]);\n    }\n\n}\n\ndouble AritmetickaSredinaNiza(int niz[0], unsigned int brElem)\n{\n    int j = 0;\n    for (unsigned int i = 0; i &lt; brElem; ++i)\n    {\n        j = j + niz[i];\n    }\n    return j/brElem;\n}\n\nint main()\n{\n    int n, m, j, niz[0];\n\n    printf(\"unesite broj elemenata niza\\n\");\n    scanf(\"%d\", &amp;n);                            //unos broja elemenata niza\n    int brElem = BrojElemenataNiza(n);\n\n    printf(\"unesite elemente niza\\n\");          //unos elemenata niza\n    UnesiElementeNiza(niz[brElem], brElem);\n\n    double arSredina = AritmetickaSredinaNiza(niz[0], brElem);\n    printf(\"aritmeticka sredina niza je \");\n    printf(\"%lf\", arSredina);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "file-io", "binary", "byte"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1575412536, "post_id": 59166345, "comment_id": 104556577, "body": "What are the contents of the file? Is it actually 32 bytes you&#39;re reading? Or is it &#39;0&#39; or &#39;1&#39; characters (possibly 256 of them, possibly not) that you&#39;re reading and converting into numbers?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1575412667, "post_id": 59166345, "comment_id": 104556615, "body": "I would suggest you ignore this for the moment. Write some simple code to read and write data to a file and see if you run into trouble. If so, ask for more specific help."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1575412876, "post_id": 59166345, "comment_id": 104556665, "body": "1 byte is the smallest addressable data type in C/C++. <code>char</code> is 1 byte in size. But 1 byte is not necessarily 8 bits, though that is the most common size used in most modern platforms. Check your compiler&#39;s <code>CHAR_BIT</code> macro in <code>&lt;climits&gt;</code> for the actual number of bits per byte. Or use a data type that is guaranteed to be 8 bits, like <code>uint8_t</code>"}, {"owner": {"reputation": 247, "user_id": 12281027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78dff388327cabe1b53e8db9541c3377?s=128&d=identicon&r=PG&f=1", "display_name": "Vivekanand V", "link": "https://stackoverflow.com/users/12281027/vivekanand-v"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1575412895, "post_id": 59166345, "comment_id": 104556671, "body": "@Kevin It is actual binary data from a file"}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1575412938, "creation_date": 1575412938, "answer_id": 59166498, "question_id": 59166345, "link": "https://stackoverflow.com/questions/59166345/can-i-be-sure-that-32-bytes-of-binary-data-read-from-a-file-is-equal-to-256-bits/59166498#59166498", "title": "Can I be sure that 32 bytes of binary data read from a file is equal to 256 bits?", "body": "<p>The CHAR_BIT macro (defined in climits) will tell you how many bits make up a byte in the execution environment. However I am not aware of any recent general-purpose hardware that uses bytes of other than 8 bits. Some specialized processors (such as for digital signal processing) may use other sizes. Also completely outdated equipment used a wide variety of sizes (the typical alternative to 8 bits being 9).</p>\n"}, {"comments": [{"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1575413540, "post_id": 59166512, "comment_id": 104556865, "body": "@Lebeau It&#39;s more complicated than that; see my edit."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1575414071, "post_id": 59166512, "comment_id": 104556998, "body": "I would use <code>(256+(CHAR_BIT-1))&#47;CHAR_BIT</code> instead. But point taken."}], "tags": [], "owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "is_accepted": false, "score": 0, "last_activity_date": 1575413498, "last_edit_date": 1575413498, "creation_date": 1575413028, "answer_id": 59166512, "question_id": 59166345, "link": "https://stackoverflow.com/questions/59166345/can-i-be-sure-that-32-bytes-of-binary-data-read-from-a-file-is-equal-to-256-bits/59166512#59166512", "title": "Can I be sure that 32 bytes of binary data read from a file is equal to 256 bits?", "body": "<h2>No</h2>\n\n<p>C++ allows a <code>char</code> to be any size a platform requires. However, the macro <code>CHAR_BIT</code> always has the number of bits in a <code>char</code>.</p>\n\n<p>So, to find out the number of bits in 32 bytes, you would use the formula <code>32*CHAR_BIT</code>. </p>\n\n<p>C++17 has introduced the new type <code>std::byte</code> that is not a character type and is always <code>CHAR_BIT</code> bits, as explained in the SO question <a href=\"https://stackoverflow.com/questions/43143318/stdbyte-on-odd-platforms\">std::byte on odd platforms</a> </p>\n\n<p>In order to find the number of bytes needed to hold 256 bits, you have a problem, because <code>CHAR_BIT</code> isn't always a divisor of 256. So, you have to decide what you want and use a more complicated formula. For example, <code>1+(255+CHAR_BIT)/CHAR_BIT</code> will give you the number of bytes needed to hold 256 contiguous bits.</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1575413654, "last_edit_date": 1575413654, "creation_date": 1575413232, "answer_id": 59166549, "question_id": 59166345, "link": "https://stackoverflow.com/questions/59166345/can-i-be-sure-that-32-bytes-of-binary-data-read-from-a-file-is-equal-to-256-bits/59166549#59166549", "title": "Can I be sure that 32 bytes of binary data read from a file is equal to 256 bits?", "body": "<p>Every routine in the C standard library that reads from a file or stream reads in units of bytes. Each byte read is a fixed number of bits; what is read from a file does not vary due to leading zeros or lack thereof in a byte. Some routines return a single character (which is a byte). Some routines put data read into a buffer and return a count of bytes read. Some routines, such as <code>scanf</code>, return a count of the number of items successfully converted. (You generally would not use these routines to read a fixed number of bytes.)</p>\n\n<p>The number of bits in a byte is set by the C implementation. It is reported in <code>CHAR_BIT</code>, defined in <code>&lt;limits.h&gt;</code>. It is eight in all common C implementations.</p>\n\n<p>Although the number of bits per byte does not vary, the number of bytes read from a stream can vary. If a stream is opened as a <em>text stream</em>, characters may be \u201cadded, altered, or deleted on input and output to conform to differing conventions for representing text in the host environment\u201d (C 2018 7.21.2 2). To avoid this, you should open a stream as a <em>binary stream</em>.</p>\n"}], "owner": {"reputation": 247, "user_id": 12281027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78dff388327cabe1b53e8db9541c3377?s=128&d=identicon&r=PG&f=1", "display_name": "Vivekanand V", "link": "https://stackoverflow.com/users/12281027/vivekanand-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 59166549, "answer_count": 3, "score": -2, "last_activity_date": 1575413654, "creation_date": 1575412102, "question_id": 59166345, "link": "https://stackoverflow.com/questions/59166345/can-i-be-sure-that-32-bytes-of-binary-data-read-from-a-file-is-equal-to-256-bits", "title": "Can I be sure that 32 bytes of binary data read from a file is equal to 256 bits?", "body": "<p>I want to read a file 32 bytes at a time using a C/C++ program, but I want to be sure that the data will be 256 bits. In essence I am worried about leading bits in the \"bytes\" that I read from the file being off ? Is that even a matter of concern ? \nExample : If I have a number say 2 represented in binary as 10 . This would be sufficient for me as a human.\nHow is that different as far a computer is concerned if it's written as: 00000010 to represent a char value of 1 byte ??? Would the leading zeros affect the bit count ? Does that in turn affect operations like XOR ?\nI've trouble understanding its effects ! Does that involve data loss ? I really do not know... !</p>\n\n<p>Every help to clear my misunderstanding will be appreciated !!!</p>\n"}, {"tags": ["c", "neural-network", "xor", "backpropagation"], "comments": [{"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1575412275, "post_id": 59166299, "comment_id": 104556488, "body": "Have you verified output of the matrix library against known input?"}, {"owner": {"reputation": 21, "user_id": 12476576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBJjIZq_OSnJ6T_SAIOKV_oM_Qd6LF2nBzcjalvUg=k-s128", "display_name": "Ewa&#235;l", "link": "https://stackoverflow.com/users/12476576/ewa%c3%abl"}, "reply_to_user": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1575412463, "post_id": 59166299, "comment_id": 104556550, "body": "@visibleman If you mean verifying that each function in my matrix library works well, yes I did. Thank&#39;s anyway for the idea!"}, {"owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "edited": false, "score": 0, "creation_date": 1575417068, "post_id": 59166299, "comment_id": 104557634, "body": "Compare with someone else&#39;s nn. Here is one : <a href=\"https://github.com/glouw/tinn\" rel=\"nofollow noreferrer\">github.com/glouw/tinn</a>"}, {"owner": {"reputation": 21, "user_id": 12476576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBJjIZq_OSnJ6T_SAIOKV_oM_Qd6LF2nBzcjalvUg=k-s128", "display_name": "Ewa&#235;l", "link": "https://stackoverflow.com/users/12476576/ewa%c3%abl"}, "reply_to_user": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "edited": false, "score": 0, "creation_date": 1575447153, "post_id": 59166299, "comment_id": 104565373, "body": "@BobRun Thank&#39;s for the example!"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12476576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBJjIZq_OSnJ6T_SAIOKV_oM_Qd6LF2nBzcjalvUg=k-s128", "display_name": "Ewa&#235;l", "link": "https://stackoverflow.com/users/12476576/ewa%c3%abl"}, "is_accepted": true, "score": 1, "last_activity_date": 1611873084, "last_edit_date": 1611873084, "creation_date": 1583595716, "answer_id": 60579283, "question_id": 59166299, "link": "https://stackoverflow.com/questions/59166299/xor-neural-network-seems-to-converge-around-0-5/60579283#60579283", "title": "XOR neural network seems to converge around 0.5", "body": "<p>I've managed to resolve my problem by adding layers in my network. Moreover, when I improved it in order to code an OCR, I added a learning rate to escape from local miminas which were partly the problem everytime my network was getting stuck.</p>\n"}], "owner": {"reputation": 21, "user_id": 12476576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBJjIZq_OSnJ6T_SAIOKV_oM_Qd6LF2nBzcjalvUg=k-s128", "display_name": "Ewa&#235;l", "link": "https://stackoverflow.com/users/12476576/ewa%c3%abl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 60579283, "answer_count": 1, "score": 0, "last_activity_date": 1611873084, "creation_date": 1575411862, "last_edit_date": 1575411978, "question_id": 59166299, "link": "https://stackoverflow.com/questions/59166299/xor-neural-network-seems-to-converge-around-0-5", "title": "XOR neural network seems to converge around 0.5", "body": "<p>I'm trying to code a XOR neural network for some weeks, but I always face the same problem. First of all you have to know that I spent <strong>hours and hours</strong> trying all I found on the net but nothing worked.</p>\n\n<p>After trying to do it using <em>3Blue1Brown</em> videos on the subject without success, I am now using this <a href=\"http://neuralnetworksanddeeplearning.com/chap2.html\" rel=\"nofollow noreferrer\">http://neuralnetworksanddeeplearning.com/chap2.html</a>. I coded a Matrix library \nwith all the necessary functions.</p>\n\n<p>My network does have 3 layers with: 2 input neurons, 2 hidden neurons, 1 output neuron.\nMoreover I have 2 biases pointing the hidden neurons, and one pointing the output neuron. I use the sigmoid function to have values between 0 and 1, and the quadratic cost function. Everytime I train the network (ie everytime I use backpropagation) I choose a random input with its corresponding output.</p>\n\n<p>The problem is, <strong>whatever how many times I train it</strong>, the output is never even close to 0 or 1 but always messing around 0.5, and my cost function is stuck around 0.14.</p>\n\n<p><strong>ANY HINT OR HELP IS APPRECIATED</strong> -- I really don't get where the problem is, I feel like I've tried everything. PS: Did not show any code here, <strong>if needed, don't hesitate to say it.</strong></p>\n"}, {"tags": ["c", "gcc", "stack", "clang"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 5, "creation_date": 1575411681, "post_id": 59166218, "comment_id": 104556260, "body": "&quot;I understand that in makefloat, the returned result is uninitialized if the control flow goes to the else part. &quot; - then just fix that bug. You have undefined behavior if you use uninitalized values; anything can happen."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1575411931, "post_id": 59166218, "comment_id": 104556363, "body": "(Also: really not a fan of typedef&#39;ing a pointer if it is not for an opaque type. <a href=\"https://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\" title=\"is it a good idea to typedef pointers\">stackoverflow.com/questions/750178/&hellip;</a>)"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 4, "creation_date": 1575412217, "post_id": 59166218, "comment_id": 104556465, "body": "Undefined behavior is undefined. Compile to assembly and examine that to see what the code does, just keep in mind that different compilation might produce assembly that does different thing (I mean, undefined behavior means just that: the standard C does not specify what the code should do, at all)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1575413124, "post_id": 59166218, "comment_id": 104556749, "body": "The compiler does things that would work if your program did not contain UB  , it cares nothing about what happens for UB programs"}], "owner": {"reputation": 23, "user_id": 4080767, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005055481993/picture?type=large", "display_name": "Lixun Zhang", "link": "https://stackoverflow.com/users/4080767/lixun-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1582735757, "creation_date": 1575411438, "last_edit_date": 1582735757, "question_id": 59166218, "link": "https://stackoverflow.com/questions/59166218/different-compiler-behaviors-for-uninitialized-data-on-the-stack", "title": "Different compiler behaviors for uninitialized data on the stack", "body": "<p>I have the following program to test the outcome of uninitialized pointers by different compilers</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct intNode\n{\n    int intval;\n    struct intNode* link;\n}* TOKEN;\n\nTOKEN talloc()\n{\n    TOKEN tok = (TOKEN)malloc(sizeof(struct intNode));\n    tok-&gt;intval = 0;\n    tok-&gt;link = NULL;\n    return tok;\n}\n\n\nTOKEN makefloat(TOKEN tok)\n{\n    TOKEN result;\n    if (tok-&gt;intval &gt; 10)\n        result = tok;\n    else\n    {\n        TOKEN result = talloc();\n        result-&gt;intval = -10;\n    }\n    return result;\n}\n\nvoid printexpr(TOKEN tok)\n{\n    printf(\"tok: %p, tok-&gt;link: %p\\n\", tok, tok-&gt;link);\n    if (tok != NULL)\n    {\n        printf(\"%d \", tok-&gt;intval);\n        while(tok-&gt;link != NULL)\n        {\n            tok = tok-&gt;link;\n            printf(\"-&gt; %d \", tok-&gt;intval);\n        }\n        printf(\"\\n\");\n    }\n    else\n        printf(\"Tok is NULL\\n\");\n}\n\n\nint main(int argc, char *argv[])\n{\n    TOKEN rhs, lhs;\n    rhs = talloc();\n    lhs = talloc();\n    printf(\"BEFORE Get the address of rhs: %p, lhs: %p\\n\", rhs, lhs);\n    lhs-&gt;intval = 1982;\n    rhs-&gt;intval = 5;\n    rhs = makefloat(rhs);\n    printf(\"AFTER Get the address of rhs: %p, lhs: %p\\n\", rhs, lhs);\n    lhs-&gt;link = rhs;\n    printexpr(lhs);\n\n    return 0;\n}\n</code></pre>\n\n<p>And my test platform is a Ubuntu 18.04 desktop. I tried to compile the program with gcc-5, gcc-6, gcc-7, gcc-8, gcc-9, and clang-9 and I got different outputs as follows:</p>\n\n<p>Result of gcc-5, gcc-6, gcc-7:</p>\n\n<pre><code>AFTER Get the address of rhs: 0x1, lhs: 0x5629d3959280\ntok: 0x5629d3959280, tok-&gt;link: 0x1\n1982 Segmentation fault (core dumped)\n</code></pre>\n\n<p>Every time I run the executable, the address of lhs (tok) is different, since it is malloc-ed. But the address of rhs (tok->link) is always 0x1. I find out the reason after some debugging, which is explained later.</p>\n\n<p>Result of gcc-8 and gcc-9:</p>\n\n<pre><code>AFTER Get the address of rhs: 0xc2, lhs: 0x557f7dbdf280\ntok: 0x557f7dbdf280, tok-&gt;link: 0xc2\n1982 Segmentation fault (core dumped)\n</code></pre>\n\n<p>The difference from the previous result is that now the address of rhs(tok->link) is always 0xc2. The reason is explained later.</p>\n\n<p>Result of clang-9 (with printf before calling printexpr in main):</p>\n\n<pre><code>AFTER Get the address of rhs: 0x7ffc10d6c418, lhs: 0x141d280\ntok: 0x141d280, tok-&gt;link: 0x7ffc10d6c418\n1982 -&gt; 282510568 Segmentation fault (core dumped)\n</code></pre>\n\n<p>Every time I run the executable, the addresses of both rhs and lhs are different. And because the address of rhs is a valid address (instead of 0xc2 or 0x1 in the previous cases), its intval also gets printed.</p>\n\n<p>However, if I remove the printf before calling printexpr in main, the result of clang-9 is as follows:</p>\n\n<pre><code>tok: 0x1a7c280, tok-&gt;link: 0xc2\n1982 Segmentation fault (core dumped)\n</code></pre>\n\n<p>I got the same result as for gcc-8 and gcc-9. (I tried to add printf's inside printexpr but it makes no difference; I also tried to add fflush(stdout) after printf's but it still makes no difference.)</p>\n\n<p>I find that gcc-x always gives consistent results whether there are printf's before calling printexpr or not.</p>\n\n<p><strong>My question 1:  Why does the output of clang-9 depend on printf? Or why it seems to be.</strong></p>\n\n<p><strong>My debugging findings:</strong>\nWhen I use gdb to debug the program, I find that the return value of makefloat is an uninitialized 8-byte data on the stack starting from $rbp-0x10. Here is the dump assembly of makefloat()</p>\n\n<pre><code>Dump of assembler code for function makefloat:\n   0x00005555555547b7 &lt;+0&gt;:     push   %rbp\n   0x00005555555547b8 &lt;+1&gt;:     mov    %rsp,%rbp\n   0x00005555555547bb &lt;+4&gt;:     sub    $0x20,%rsp\n   0x00005555555547bf &lt;+8&gt;:     mov    %rdi,-0x18(%rbp)\n   0x00005555555547c3 &lt;+12&gt;:    mov    -0x18(%rbp),%rax\n   0x00005555555547c7 &lt;+16&gt;:    mov    (%rax),%eax\n   0x00005555555547c9 &lt;+18&gt;:    cmp    $0xa,%eax\n   0x00005555555547cc &lt;+21&gt;:    jle    0x5555555547d8 &lt;makefloat+33&gt;\n   0x00005555555547ce &lt;+23&gt;:    mov    -0x18(%rbp),%rax\n   0x00005555555547d2 &lt;+27&gt;:    mov    %rax,-0x10(%rbp)\n   0x00005555555547d6 &lt;+31&gt;:    jmp    0x5555555547f0 &lt;makefloat+57&gt;\n   0x00005555555547d8 &lt;+33&gt;:    mov    $0x0,%eax\n   0x00005555555547dd &lt;+38&gt;:    callq  0x555555554785 &lt;talloc&gt;\n   0x00005555555547e2 &lt;+43&gt;:    mov    %rax,-0x8(%rbp)\n   0x00005555555547e6 &lt;+47&gt;:    mov    -0x8(%rbp),%rax\n   0x00005555555547ea &lt;+51&gt;:    movl   $0xfffffff6,(%rax)\n   0x00005555555547f0 &lt;+57&gt;:    mov    -0x10(%rbp),%rax   &lt;--- this is the return value of makefloat\n   0x00005555555547f4 &lt;+61&gt;:    leaveq \n   0x00005555555547f5 &lt;+62&gt;:    retq   \nEnd of assembler dump.\n</code></pre>\n\n<p>The address of the 8-byte data is always the same every time I run the program. Therefore, I try to see the value in this address at the beginning of _start() and I always get 0xc2.\nNote that this is true for all compilers.</p>\n\n<p>So, gcc-8 and gcc-9 generated code does not overwrite this address. However, gcc-5,6,7 overwrite the address with 0x1 somewhere between _start() and makefloat(). \nAfter some more debugging, I find that the devil is in frame_dummy() function, which is called in __libc_csu_init(), which is called in __libc_start_main().\nHere is the frame_dummy() function generated by gcc-8 and gcc-9:</p>\n\n<pre><code>Dump of assembler code for function frame_dummy:\n=&gt; 0x0000555555554780 &lt;+0&gt;: jmpq   0x555555554700 &lt;register_tm_clones&gt;\nEnd of assembler dump.\n</code></pre>\n\n<p>which jumps directly to register_tm_clones without pushing anything on the stack.\nHere is the result generated by gcc-5,6,7:</p>\n\n<pre><code>Dump of assembler code for function frame_dummy:\n   0x00005555555547a0 &lt;+0&gt;: push   %rbp\n   0x00005555555547a1 &lt;+1&gt;: mov    %rsp,%rbp\n   0x00005555555547a4 &lt;+4&gt;: pop    %rbp\n   0x00005555555547a5 &lt;+5&gt;: jmpq   0x555555554710 &lt;register_tm_clones&gt;\nEnd of assembler dump.\n</code></pre>\n\n<p>which pushes $rbp on the stack (and later pops out) before jumping to register_tm_clones. This happens to overwrite the 8-byte data on the stack, which will be used as the return value of makefloat. The pushed %rbp value in this case is 0x1.</p>\n\n<p>This explains the 0x1 value in the output of gcc-5,6,7. But it still does not explain my second question:</p>\n\n<p><strong>My question 2: Why the initial value in the 8-byte stack memory always 0xc2?</strong>\nI have a very shallow understanding of the linking and loading process of x86-64 executables. But I would like to read more. It is highly appreciated if anyone can tell me where to start to investigate.</p>\n"}]