[{"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 1, "creation_date": 1426118246, "post_id": 28999586, "comment_id": 46247129, "body": "Welcome to StackOverflow, but be prepared for a lot of critique if you tag a question both <b>c++</b> and <b>c</b>.  You really have to establish which language you are using, because they aren&#39;t 100% compatible...but moreover, the way of thinking about problems is quite different, with C++ being much more abstract and high-level.  <i>(For instance, in C++ your mistake here wouldn&#39;t happen because you&#39;d be using a string class that would allow you to use the equality operator a la <code>while (TryAgain == &quot;y&quot;)</code>, just for instance.)</i>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426118425, "post_id": 28999586, "comment_id": 46247168, "body": "Since you tagged this as C++, you should switch to using <code>std::string</code> for text strings instead of the problematic C-style (null terminated character sequence) string."}], "answers": [{"comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "reply_to_user": {"reputation": 57, "user_id": 2836816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f85b621d89feb8223924655190c2cd64?s=128&d=identicon&r=PG&f=1", "display_name": "user2836816", "link": "https://stackoverflow.com/users/2836816/user2836816"}, "edited": false, "score": 0, "creation_date": 1426118430, "post_id": 28999606, "comment_id": 46247169, "body": "@user2836816 There is an accept button to check a solution when it solves your problem...which is the general way of thanking people."}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 0, "creation_date": 1426118648, "post_id": 28999606, "comment_id": 46247236, "body": "@HostileFork I think OP is aware about the accept mark, since he already accepted another answer on another question and there is a 15 min grace period where OP has to wait until he can accept an answer"}, {"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "reply_to_user": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 0, "creation_date": 1426118696, "post_id": 28999606, "comment_id": 46247242, "body": "@Rizier123 Ah, the 15 minutes.  Forgot about that.  Thanks."}], "tags": [], "owner": {"reputation": 525, "user_id": 3293993, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39abf3159edc67accb4f5c64503d52be?s=128&d=identicon&r=PG&f=1", "display_name": "Jed Estep", "link": "https://stackoverflow.com/users/3293993/jed-estep"}, "is_accepted": false, "score": 5, "last_activity_date": 1426118075, "creation_date": 1426118075, "answer_id": 28999606, "question_id": 28999586, "link": "https://stackoverflow.com/questions/28999586/having-trouble-with-while-loops/28999606#28999606", "title": "Having trouble with while loops", "body": "<p><code>strcmp</code> returns 0 if its arguments are the same, so at the first iteration your while loop is checking <code>while(0)</code>. 0 is equivalent to <code>false</code> in boolean checks so the while loop is skipped. Try <code>while(!strcmp(TryAgain, \"y\"))</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 0, "creation_date": 1426118486, "post_id": 28999654, "comment_id": 46247186, "body": "Except for the fact that it doesn&#39;t work!  You can&#39;t use <code>==</code> for testing equality of C strings, as it just tests if the pointers are equal."}], "tags": [], "owner": {"reputation": 2280, "user_id": 4577493, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/--CF2KIHKIF8/AAAAAAAAAAI/AAAAAAAAADg/C-yjnAN1v7Y/photo.jpg?sz=128", "display_name": "Carlos Carrizales", "link": "https://stackoverflow.com/users/4577493/carlos-carrizales"}, "is_accepted": false, "score": 0, "last_activity_date": 1426120120, "last_edit_date": 1426120120, "creation_date": 1426118368, "answer_id": 28999654, "question_id": 28999586, "link": "https://stackoverflow.com/questions/28999586/having-trouble-with-while-loops/28999654#28999654", "title": "Having trouble with while loops", "body": "<p>I prefer to change it to a do-while</p>\n\n<pre><code>do {\n  printf(\"\\nWould you like to try another word? [y/n]\\n\");\n  scanf(\"%s\", TryAgain);\n} while (TryAgain==\"y\" || TryAgain==\"Y\");\n</code></pre>\n\n<p>the TryAgain must be boolean.\nsee ya</p>\n"}], "owner": {"reputation": 57, "user_id": 2836816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f85b621d89feb8223924655190c2cd64?s=128&d=identicon&r=PG&f=1", "display_name": "user2836816", "link": "https://stackoverflow.com/users/2836816/user2836816"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1426120230, "creation_date": 1426117961, "last_edit_date": 1426120230, "question_id": 28999586, "link": "https://stackoverflow.com/questions/28999586/having-trouble-with-while-loops", "title": "Having trouble with while loops", "body": "<p>I do not understand why nothing is showing up on the screen when I run this little program? Is the while loop even starting? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  char word[20]; \n  char TryAgain[20] = \"y\";\n  int WordLength = 0;\n\n  while (strcmp(TryAgain, \"y\"))\n  {\n    printf(\"\\t\\t\\t Word \\n\\n\");\n    printf(\"What is your word, bird?\\n\");\n    scanf(\"%s\", word);\n    getchar();\n\n    WordLength = strlen(word); \n\n    printf(\"Result: \"); \n    for (int i = 0; i &lt; WordLength; ++i)\n    {\n        printf(\"%c*\", word[i]);\n    }\n    printf(\"\\nWould you like to try another word? [y/n]\\n\");\n    scanf(\"%s\", TryAgain);\n  }\n\n  getchar();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "3d"], "answers": [{"comments": [{"owner": {"reputation": 1446, "user_id": 2464424, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9d81757c14f0f6e43348730fd49dd645?s=128&d=identicon&r=PG", "display_name": "user2464424", "link": "https://stackoverflow.com/users/2464424/user2464424"}, "edited": false, "score": 0, "creation_date": 1426183451, "post_id": 28999810, "comment_id": 46278399, "body": "Nice rewrite +1. I would like to see what other people have to say on the matter before accepting any answers for now tho."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 2, "last_activity_date": 1426119598, "last_edit_date": 1426119598, "creation_date": 1426119278, "answer_id": 28999810, "question_id": 28999577, "link": "https://stackoverflow.com/questions/28999577/fast-way-to-select-the-correct-face-of-a-cubemap/28999810#28999810", "title": "Fast way to select the correct face of a cubemap?", "body": "<p>Might not look like much, but the first three <code>if</code> statements eliminate all of the calls to <code>fabs</code> as well as replacing the inner <code>if</code> statements in the posted code. The final <code>if/else</code> takes a maximum of two compares/branches to determine the answer.</p>\n\n<pre><code>if ( point.x &lt; 0 ) {\n    x = -point.x;\n    fx = 1;\n} else {\n    x = point.x;\n    fx = 0;\n}\n\nif ( point.y &lt; 0 ) {\n    y = -point.y;\n    fy = 3;\n} else {\n    y = point.y;\n    fy = 2;\n}\n\nif ( point.z &lt; 0 ) {\n    z = -point.z;\n    fz = 5;\n} else {\n    z = point.z;\n    fz = 4;\n}\n\nif ( x &gt;= y ) {\n    if ( x &gt;= z ) { face = fx; } else { face = fz; }\n} else {\n    if ( y &gt;= z ) { face = fy; } else { face = fz; }\n}\n</code></pre>\n"}], "owner": {"reputation": 1446, "user_id": 2464424, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9d81757c14f0f6e43348730fd49dd645?s=128&d=identicon&r=PG", "display_name": "user2464424", "link": "https://stackoverflow.com/users/2464424/user2464424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 28999810, "answer_count": 1, "score": 2, "last_activity_date": 1426119598, "creation_date": 1426117915, "question_id": 28999577, "link": "https://stackoverflow.com/questions/28999577/fast-way-to-select-the-correct-face-of-a-cubemap", "title": "Fast way to select the correct face of a cubemap?", "body": "<p>Given an axis-aligned cubemap centered in the origin and an arbitrary point in 3D space, the straightforward way to check which face the point lies into consists in grabbing the coordinate with the greatest magnitude and selecting the face corresponding to that component.</p>\n\n<p>The naive code would read as follows:</p>\n\n<pre><code>if (fabs(point.x) &gt;= fabs(point.y) &amp;&amp; fabs(point.x) &gt;= fabs(point.z)) {\n    if (point.x &gt;= 0) {face=0;} else {face=1;}\n}\nif (fabs(point.y) &gt;= fabs(point.x) &amp;&amp; fabs(point.y) &gt;= fabs(point.z)) {\n    if (point.y &gt;= 0) {face=2;} else {face=3;}\n}\nif (fabs(point.z) &gt;= fabs(point.x) &amp;&amp; fabs(point.z) &gt;= fabs(point.y)) {\n    if (point.z &gt;= 0) {face=4;} else {face=5;}\n}\n</code></pre>\n\n<p>Is there a way to achieve the same thing that is considered to be better in C? <br/>Would branchless code be more optimal?</p>\n\n<p>Any inline assembly standard of choice can alternatively be used for the purpose.<br/>If necessary, all the <code>\\>=</code> operators can be turned into <code>\\></code> operators.</p>\n"}, {"tags": ["c", "ncurses"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1426118808, "post_id": 28999530, "comment_id": 46247272, "body": "Draw a space character over the <code>&#39;$&#39;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1426151509, "creation_date": 1426151509, "answer_id": 29005675, "question_id": 28999530, "link": "https://stackoverflow.com/questions/28999530/clear-a-character-on-screen-with-ncurses/29005675#29005675", "title": "Clear a character on screen with ncurses", "body": "<p>The usual way to approach this is to create <em>windows</em> on the screen, e.g., with <a href=\"http://invisible-island.net/ncurses/man/curs_window.3x.html\" rel=\"nofollow\">newwin</a> or subwin, and create the box and '$' in different windows while using <a href=\"http://invisible-island.net/ncurses/man/curs_clear.3x.html\" rel=\"nofollow\">clear</a>/wclear to clear the appropriate places on the screen.</p>\n\n<p>Keep in mind that <a href=\"http://invisible-island.net/ncurses/man/curs_getch.3x.html\" rel=\"nofollow\">getch</a>/wgetch does a refresh on the window with which it is associated, so that may overwrite updates from overlapping windows.</p>\n"}], "owner": {"reputation": 1, "user_id": 4651861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b0db37d6ff340452cabe1e694d6178?s=128&d=identicon&r=PG&f=1", "display_name": "Tytanyx", "link": "https://stackoverflow.com/users/4651861/tytanyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 822, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1426151509, "creation_date": 1426117615, "question_id": 28999530, "link": "https://stackoverflow.com/questions/28999530/clear-a-character-on-screen-with-ncurses", "title": "Clear a character on screen with ncurses", "body": "<p>My program currently allows the user to draw the $ character on the screen with ncurses initialized when a key is pressed.</p>\n\n<pre><code>    mvaddch(y,x,'$');\n</code></pre>\n\n<p>I also have a box drawn and I want to say that after the user presses a specific key, I want the $ to be erased and placed in the new position the user puts it without erasing the entire screen. I tried using erase(), but after that it would erase the entire screen and I don't want that. I want it to keep the box that was drawn. So how would I do this?</p>\n"}, {"tags": ["python", "c", "pointers", "struct", "cython"], "answers": [{"tags": [], "owner": {"reputation": 865, "user_id": 3420512, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce64094c4468fc88749ce7505eda4cf?s=128&d=identicon&r=PG", "display_name": "Liam Marshall", "link": "https://stackoverflow.com/users/3420512/liam-marshall"}, "is_accepted": true, "score": 0, "last_activity_date": 1426350728, "creation_date": 1426350728, "answer_id": 29051345, "question_id": 28999518, "link": "https://stackoverflow.com/questions/28999518/cython-error-when-trying-to-access-contents-of-pointer-to-struct/29051345#29051345", "title": "Cython - error when trying to access contents of pointer to struct", "body": "<p>I, thankfully, figured out the problem when working on this project with a friend at a hackerspace.\nThe problem is in the <code>ctypedef struct apriltag_detector_t</code> block.\nWhen I wrote <code>pass</code> in the block, I thought that Cython would automatically  work out the internal contents of the struct, and let me access the element(s) I needed - here, <code>quad_decimate</code>.</p>\n\n<p>Not so.\nTo get Cython to understand the contents of a struct, you <strong>will have to</strong> tell it what's in the struct as so:</p>\n\n<pre><code>ctypedef struct apriltag_detector_t:\n    float quad_decimate\n</code></pre>\n"}], "owner": {"reputation": 865, "user_id": 3420512, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ce64094c4468fc88749ce7505eda4cf?s=128&d=identicon&r=PG", "display_name": "Liam Marshall", "link": "https://stackoverflow.com/users/3420512/liam-marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 29051345, "answer_count": 1, "score": 2, "last_activity_date": 1426350728, "creation_date": 1426117561, "last_edit_date": 1426178674, "question_id": 28999518, "link": "https://stackoverflow.com/questions/28999518/cython-error-when-trying-to-access-contents-of-pointer-to-struct", "title": "Cython - error when trying to access contents of pointer to struct", "body": "<p>I have a <code>cdef</code>ed class in Cython which looks very similar to this:</p>\n\n<pre><code>cdef class AprilTagDetector:\n    cdef capriltag.apriltag_detector_t* _apriltag_detector\n\n    def __cinit__(self):\n        self._apriltag_detector = capriltag.apriltag_detector_create();\n        # standard null checks\n    # standard __dealloc__(self) here\n\n    property quad_decimate:\n        def __get__(self):\n            return self._apriltag_detector.quad_decimate\n</code></pre>\n\n<p>The corresponding <code>.pxd</code> file looks like this:</p>\n\n<pre><code>cdef extern from \"apriltag.h\":\n    # The detector itself\n    ctypedef struct apriltag_detector_t:\n        pass\n\n    # Detector constructor and destructor\n    apriltag_detector_t* apriltag_detector_create()\n    void apriltag_detector_destroy(apriltag_detector_t* td);\n</code></pre>\n\n<p>The problem is, when I go to compile this code, it spits out this error:</p>\n\n<pre><code>property quad_decimate:\n    def __get__(self):\n        return self._apriltag_detector.quad_decimate             ^\n------------------------------------------------------------\n\napriltags.pyx:47:14: Cannot convert 'apriltag_detector_t *' to Python object\n</code></pre>\n\n<p>What's going on here? I haven't been able to figure it out from the Cython docs. </p>\n"}, {"tags": ["c", "arrays", "computer-science", "bubble-sort", "c-strings"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426118942, "post_id": 28999505, "comment_id": 46247322, "body": "First, i&#39;d implement a bubble sort algorithm sorting <i>anything</i>. Then I&#39;d decide whether my 2D array was actually an array of <code>char</code> pointers or an array of <code>char</code> arrays (they&#39;re <i>not</i> synonymous). Then I&#39;d put the appropriate comparison and swap code in the bubble sort to appropriately handle whatever that decision result was."}, {"owner": {"reputation": 361, "user_id": 4032677, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f21f64127f960d2d343f046186f3089?s=128&d=identicon&r=PG&f=1", "display_name": "aero", "link": "https://stackoverflow.com/users/4032677/aero"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426119358, "post_id": 28999505, "comment_id": 46247457, "body": "@WhozCraig , I have done so already, but it gives me an incompatibility error:"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426119376, "post_id": 28999505, "comment_id": 46247462, "body": "Update your question and <i>post the code</i>. See <a href=\"http://stackoverflow.com/help/mcve\">&quot;How to create a Minimal, Complete, and Verifiable example?&quot;</a>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426119475, "post_id": 28999505, "comment_id": 46247503, "body": "Good, because it doesn&#39;t belong in a comment; it is integral to your question."}, {"owner": {"reputation": 361, "user_id": 4032677, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f21f64127f960d2d343f046186f3089?s=128&d=identicon&r=PG&f=1", "display_name": "aero", "link": "https://stackoverflow.com/users/4032677/aero"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426119721, "post_id": 28999505, "comment_id": 46247562, "body": "I mean i&#39;ve been told that in this case i should use the strcpy function but iam not sure how ."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426119737, "post_id": 28999505, "comment_id": 46247564, "body": "Thanks. Your code is closer to correct than you may think. Arrays are not assignable lvalues in C, you need to do some buffer copying to swap elements."}, {"owner": {"reputation": 361, "user_id": 4032677, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f21f64127f960d2d343f046186f3089?s=128&d=identicon&r=PG&f=1", "display_name": "aero", "link": "https://stackoverflow.com/users/4032677/aero"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426119907, "post_id": 28999505, "comment_id": 46247607, "body": "Yes, I am having a problem of implementing the (strcpy) function, iam not sure how do I go about doing it."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 361, "user_id": 4032677, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f21f64127f960d2d343f046186f3089?s=128&d=identicon&r=PG&f=1", "display_name": "aero", "link": "https://stackoverflow.com/users/4032677/aero"}, "edited": false, "score": 0, "creation_date": 1426120944, "post_id": 28999904, "comment_id": 46247847, "body": "@aero For an example of the above issues addressed, <a href=\"http://ideone.com/E16rLd\" rel=\"nofollow noreferrer\">see here</a>"}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 2, "last_activity_date": 1426120741, "last_edit_date": 1426120741, "creation_date": 1426119876, "answer_id": 28999904, "question_id": 28999505, "link": "https://stackoverflow.com/questions/28999505/how-do-i-output-a-bubble-sorted-2-d-string-array-in-c/28999904#28999904", "title": "How do I output a bubble sorted 2-D string array in C?", "body": "<p>Arrays are not assignable as you're attempting in C. You need to setup some buffer swapping logic. For example.</p>\n\n<pre><code>if(strcmp(str[j+1],str[j]) &lt; 0) // note: fixed. \n{\n    strcpy(temp, str[j]);\n    strcpy(str[j], str[j+1]);\n    strcpy(str[j+1], temp);\n}            \n</code></pre>\n\n<p>Other issues with your code:</p>\n\n<ul>\n<li>Incorrect size of your input array. All those strings require at least <code>char[5]</code> to hold four-char strings (including space for the terminator).</li>\n<li>You do not length-restrict your input string length. For an array of four chars the format string should be <code>\"%3s\"</code>, which would have hinted your dimensions were too short to begin with.</li>\n<li>You do not validate the input succeeded by checking the result of <code>scanf</code></li>\n<li>Related to the above, you do know track how many <em>successful</em> inputs were achieved, therefore you don't know whether your sorting data against indeterminate garbage. If you only input 3 strings successfully, sorting an array of 5 strings is senseless.</li>\n<li>Your bubblesort is not implemented correctly. Real bubblesort includes <em>swap-detection</em> which stops the sorting algorithm after any given pass results in no-swaps. You also are not reducing the number of elements scanned with each iteration by one, which is somewhat the point of bubblesort in the first place.</li>\n</ul>\n\n<p>Anyway, all of that is related to your code, but not the question you posted. It is worth looking at regardless.</p>\n\n<p>Best of luck.</p>\n"}], "owner": {"reputation": 361, "user_id": 4032677, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f21f64127f960d2d343f046186f3089?s=128&d=identicon&r=PG&f=1", "display_name": "aero", "link": "https://stackoverflow.com/users/4032677/aero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 28999904, "answer_count": 1, "score": 2, "last_activity_date": 1426120741, "creation_date": 1426117470, "last_edit_date": 1426119514, "question_id": 28999505, "link": "https://stackoverflow.com/questions/28999505/how-do-i-output-a-bubble-sorted-2-d-string-array-in-c", "title": "How do I output a bubble sorted 2-D string array in C?", "body": "<p>How do I go about sorting a 2-D string array in C using bubble sort (or any other kind of sorting in that matter) ?\nWhat I'm actlly trying to do is as follows :</p>\n\n<p>Example:</p>\n\n<p>Unsorted 2-D string array :</p>\n\n<pre><code>abfg \nabcd \nxyzw \npqrs \norde\n</code></pre>\n\n<p>Sorted 2-D string array:</p>\n\n<pre><code>abcd \nabfg \norde \npqrs \nxyzw\n</code></pre>\n\n<p>My current algorithm which is not working (gives me an incompatibility error) is as follows :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\n\n\nint main()\n{\n    char str[5][4];\n    int i,j;\n    char temp[4];\n    for (i=0;i&lt;5;i++)\n    {\n        scanf(\"%s\",str[i]);\n\n    }\n\n\n   for(i = 0; i&lt;5-1; i++) \n   { \n     for(j = 0; j&lt;5-1; j++) \n     {\n         if(strcmp(str[j],str[j+1])== -1) \n        { \n            temp = str[j]; \n            str[j] = str[j+1]; \n            str[j+1] = temp; \n         }\n\n     } \n   } \n\n   for(i = 0; i&lt; 5; i++) \n     printf(\"%s \", str[i]);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "doubly-linked-list"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1426115886, "post_id": 28999161, "comment_id": 46246283, "body": "Not enough code to tell. How do we know <code>node-&gt;prev</code> is not null? Do some more debugging and find out exactly where the seg fault is coming from."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426116253, "post_id": 28999161, "comment_id": 46246445, "body": "<a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1426116355, "post_id": 28999161, "comment_id": 46246488, "body": "Don&#39;t use this syntax <code>printf(&quot;%d&quot;,node-&gt;prev-&gt;value);</code> it&#39;s not good to do that, <code>struct Node *previous = node-&gt;prev; if (previous) printf(&quot;%d\\n&quot;, previous-&gt;value);</code> is better. And your last element is <code>node</code> because you are iterating until <code>node-&gt;next == NULL</code> which should happen at the last element, but your code cannot explain the behavior you describe, more is needed."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426117052, "post_id": 28999161, "comment_id": 46246726, "body": "@iharob If <code>node</code> is <code>head</code> then <code>node-&gt;prev</code> will be <code>NULL</code>, so yes, this is exactly the problem."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426117289, "post_id": 28999161, "comment_id": 46246822, "body": "@Austin I am posting as an answer"}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 1, "creation_date": 1426117352, "post_id": 28999161, "comment_id": 46246842, "body": "Only if he doesn&#39;t wrap the next and prev pointers. I usually have the <code>next</code> in the last entry point to <code>head</code> and <code>head</code>&#39;s <code>prev</code> points to the last in the list."}, {"owner": {"reputation": 13, "user_id": 4660680, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007039655926/picture?type=large", "display_name": "Susmita Ghosh", "link": "https://stackoverflow.com/users/4660680/susmita-ghosh"}, "edited": false, "score": 0, "creation_date": 1426125529, "post_id": 28999161, "comment_id": 46249085, "body": "this downvoting is demotivating ,how will a new person will learn if she or he  does not get her or his  doubts clarified by exp people .is this site meant to help only experienced programmers"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426135751, "post_id": 28999161, "comment_id": 46251518, "body": "That&#39;s a good question. It&#39;s for learning, but questions about implementing link lists almost always come from students working on homework, and SO is not for homework help. Teachers, fellow students, textbooks, and Wikipedia should suffice for that. Many SO users feel that it is morally wrong for them to assist with homework because you should be graded on your abilities alone. If you&#39;re working on your own and you encounter a problem that you can&#39;t find any other information about, that would warrant an SO question."}, {"owner": {"reputation": 13, "user_id": 4660680, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007039655926/picture?type=large", "display_name": "Susmita Ghosh", "link": "https://stackoverflow.com/users/4660680/susmita-ghosh"}, "edited": false, "score": 0, "creation_date": 1426148464, "post_id": 28999161, "comment_id": 46255995, "body": "I am a social science student with no link to programming in my life,I am learning on my own and trying to build a module of fully operational doubly linked list .I have a specific error which I think wikipedia or books cant solve .Any way i will eventually figure it out"}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1426174477, "post_id": 28999161, "comment_id": 46272810, "body": "Your <code>create_list</code> does not initialize <code>node-&gt;prev</code>. You also lose your pointer to the first element in the list when you malloc the new node."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426117404, "post_id": 28999477, "comment_id": 46246865, "body": "<i>otherwise you have a guaranteed segfault if called with a null pointer</i>, not really true."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426117568, "post_id": 28999477, "comment_id": 46246920, "body": "When would <code>printf( &quot;%d&quot;, ((struct Node *) NULL)-&gt;prev-&gt;value)</code> not generate a segfault (on a target machine which generates such traps)?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426117695, "post_id": 28999477, "comment_id": 46246955, "body": "It causes undefined behavior, today someone had a <code>NULL</code> dereference that wasn&#39;t causing a segmentation fault <a href=\"http://stackoverflow.com/q/28995317/1983495\">here</a>, you can see that in that case, the problem was discovered because of the excelenet <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a> tool."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1426118344, "post_id": 28999477, "comment_id": 46247151, "body": "That would only be the case if the target machine&#39;s representation of a NULL pointer was 0x08 which is what Valgrind is saying was actually being dereferenced. It added the struct member&#39;s offset to 0 (the NULL representation in this case) and then dereferenced the result. That is not a dereference of a NULL pointer, but of an invalid one."}, {"owner": {"reputation": 13, "user_id": 4660680, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007039655926/picture?type=large", "display_name": "Susmita Ghosh", "link": "https://stackoverflow.com/users/4660680/susmita-ghosh"}, "edited": false, "score": 1, "creation_date": 1426125271, "post_id": 28999477, "comment_id": 46249017, "body": "Hi I understand what you are trying to convey ,thanks for clearing my head,but not able to figure out how to put it in code . shall I create a pointer to hold the last value while creating the list ,if so how do I initialize it  ?pardom my limited knowledge"}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1426170628, "post_id": 28999477, "comment_id": 46269936, "body": "Hopefully this helps you. It&#39;s just one implementation and may guide you in redesigning your own - which I recommend as an exercise in itself."}, {"owner": {"reputation": 13, "user_id": 4660680, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007039655926/picture?type=large", "display_name": "Susmita Ghosh", "link": "https://stackoverflow.com/users/4660680/susmita-ghosh"}, "edited": false, "score": 0, "creation_date": 1426179507, "post_id": 28999477, "comment_id": 46276274, "body": "Thank you so much ,finally I made it without segmentation fault .Thanks a lot :)"}], "tags": [], "owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "is_accepted": true, "score": 1, "last_activity_date": 1426170565, "last_edit_date": 1426170565, "creation_date": 1426117286, "answer_id": 28999477, "question_id": 28999161, "link": "https://stackoverflow.com/questions/28999161/my-code-for-finding-the-last-element-in-doubly-linked-list-is-throwing-segmentat/28999477#28999477", "title": "My code for finding the last element in doubly linked list is throwing segmentation fault", "body": "<p>Move the printf statement inside the <code>if (node)</code> block, otherwise you have a guaranteed segfault if called with a null pointer.</p>\n\n<p>Next, presumably this is meant to print the value of the last entry in the list, not fetch the last entry.</p>\n\n<p>From your code you have chosen to set <code>next</code> to <code>NULL</code> in the last entry (and presumably this means you set <code>prev</code> to <code>NULL</code> in the list head?). If so, you lose one of the main advantages of a doubly linked list over a singly linked one (not having to iterate through the list to find the last item.</p>\n\n<p>If instead you had a fixed \"head\" node, and had your last item point to it in <code>next</code>, and the head's <code>prev</code> point to the last item, then you can fetch the last item with a single statement:</p>\n\n<pre><code>last = head.prev;\n</code></pre>\n\n<p>An iteration (for example a linear search) can terminate when <code>node-&gt;next == &amp;head</code>.</p>\n\n<p>However, your code as it stands will exit as follows</p>\n\n<ul>\n<li>If the list is empty (<code>node == NULL</code>) it will segfault on the <code>printf</code></li>\n<li>If <code>node</code> is non-null, but <code>node-&gt;next == NULL</code> then presumably <code>node-&gt;prev == NULL</code> so it will segfault again.</li>\n<li>If there are some entries in the list, and the <code>while</code> terminates correctly, it would only segfault if <code>node-&gt;prev</code> is <code>NULL</code> (which suggests your error may also lie in the <code>add</code> method.</li>\n</ul>\n\n<p>When implementing any datastructure, or any generic 'class' (even if it's in C), part of the definition of the <strong>implementation</strong> needs to be a set of invariants. These are things which your implementation guarantees to be true at all times.</p>\n\n<p>In the case of a doubly linked list, these might be</p>\n\n<ul>\n<li>A node in the list consists of two pointers (<code>next</code> and <code>prev</code>) and a payload.</li>\n<li>Every list has a well-known node referred to as the <code>head</code>. </li>\n<li>The head node has no payload (associated value).</li>\n<li>For all nodes in the list, <code>(prev != NULL) &amp;&amp; (next != NULL)</code></li>\n<li>For any node <code>n</code>, <code>n-&gt;prev-&gt;next == n</code> and <code>n-&gt;next-&gt;prev == n</code></li>\n<li>In an empty list, <code>(head-&gt;next == head-&gt;prev) &amp;&amp; (head-&gt;next == head)</code></li>\n</ul>\n\n<p>Thus you can define a basic, generic, structure for the links in any list</p>\n\n<pre><code>// Forward declaration so the structure can point to itself\nstruct dll_links;\n\n// The actual overhead of a DLL\ntypedef struct dll_links\n{\n    struct dll_links *next;\n    struct dll_links *prev;\n    struct dll_links *head;\n} dll_links, dll_head;\n\n// A simple macro to cast linkable datastructures as a set of links.\n#define AS_LINKS(n) ((dll_links *) n)\n</code></pre>\n\n<p>and use it to define your own <code>Node</code> datastructure. Note that I include a reference to the list\nhead in evry node. This allows the implementation to detect attempts at violating the invariants (such as removing the <code>head</code> element).</p>\n\n<pre><code>typedef struct\n{\n    dll_links link;\n    int value;\n} Node;\n</code></pre>\n\n<p>Now, given a <code>Node *n</code>, you can access the links as <code>n-&gt;link.prev</code> and <code>n-&gt;link.next</code>.</p>\n\n<p>So, given the above, a function to initialise a new list would be</p>\n\n<pre><code>void dll_init(dll_head *list)\n{\n    list-&gt;next = list.prev = list;\n    list-&gt;head = list;\n}\n</code></pre>\n\n<p>and would be used thus:</p>\n\n<pre><code>...\ndll_head myList;\ndll_init(&amp;myList);\n...\n</code></pre>\n\n<p>Note that this enforces all of the invariants.</p>\n\n<p>The only other operations performed on a doubly linked list are insertion and removal</p>\n\n<pre><code>// Insert a new node in front of an existing one\nvoid dll_insert(dll_links *newNode, dll_links *before)\n{\n    dll_links *orignalPrevious = before-&gt;prev;\n\n    // First set up the links in the new node\n    newNode-&gt;prev = originalPrevious;\n    newNode-&gt;next = before;\n    newNode-&gt;head = before-&gt;head;\n\n    // Now link it in by adjusting the pointers of the surrounding nodes\n    before-&gt;prev = newNode;\n    originalPrevious-&gt;next = newNode;\n}\n\n// Remove a specified node from a list (and return it)\ndll_links *dll_remove(dll_links *node)\n{\n    // Check the assertion that you can not remove the head element\n    assert (node-&gt;head != node);\n\n    dll_links *successor = node-&gt;next;\n    dll_links *predecessor = node-&gt;prev;\n\n    // Remove the element from the list\n    predecessor-&gt;next = successor;\n    successor-&gt;prev = predecessor;\n\n    // Ensure no dangling pointers in the removed element\n    node-&gt;next = node-&gt;prev = node-&gt;head = NULL;\n    return node;\n}\n</code></pre>\n\n<p>With these three functions, your <code>create_list</code> function looks like this:</p>\n\n<pre><code>void create_list(dll_head *list)\n{\n    int i;\n\n    dll_init(list);\n\n    for(i=1;i &lt;=10;i++)\n    {\n        Node *node = malloc(sizeof(struct Node));\n        node-&gt;value=rand()%20;\n        dll_insert(AS_LINKS(node), list); // Append the new node to the list\n    }\n}\n\n...\n{\n    dll_head myList;\n    create_list(&amp;myList);\n    ...\n}\n</code></pre>\n\n<p>Iterating over the list, extracting the first or last entry, etc, is left as an exercise. But consider that\nappending an entry is inserting <em>before</em> the head, inserting at the front is inserting before <code>head-&gt;next</code>,\nthe <code>head</code> element instantly knows which nodes are at the beginning and end of the list, and so on.</p>\n\n<p>And the use of the <code>dll_links</code> approach means none of the operations need to know anything about the actual\nnode structures and payload. These functions can link <em>anything</em> (including heteregenous lists).</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426117571, "post_id": 28999488, "comment_id": 46246922, "body": "@chux that&#39;s what I initially had in my comment."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1426117370, "creation_date": 1426117370, "answer_id": 28999488, "question_id": 28999161, "link": "https://stackoverflow.com/questions/28999161/my-code-for-finding-the-last-element-in-doubly-linked-list-is-throwing-segmentat/28999488#28999488", "title": "My code for finding the last element in doubly linked list is throwing segmentation fault", "body": "<p>Don't use this syntax <code>printf(\"%d\",node-&gt;prev-&gt;value);</code> it's not good to do that</p>\n\n<pre><code> struct Node *previous = node-&gt;prev;\n if (previous != NULL) \n     printf(\"%d\\n\", previous-&gt;value); \n</code></pre>\n\n<p>is better, since when <code>node</code> is the first node, <code>node-&gt;prev == NULL</code>, and there you will have problems.</p>\n\n<p>Also your last element is <code>node</code> because you are iterating until <code>node-&gt;next == NULL</code> which should happen at the last element, but your code cannot explain the behavior you describe, more is needed</p>\n"}], "owner": {"reputation": 13, "user_id": 4660680, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007039655926/picture?type=large", "display_name": "Susmita Ghosh", "link": "https://stackoverflow.com/users/4660680/susmita-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "accepted_answer_id": 28999477, "answer_count": 2, "score": 0, "last_activity_date": 1426170565, "creation_date": 1426115696, "last_edit_date": 1426169439, "question_id": 28999161, "link": "https://stackoverflow.com/questions/28999161/my-code-for-finding-the-last-element-in-doubly-linked-list-is-throwing-segmentat", "title": "My code for finding the last element in doubly linked list is throwing segmentation fault", "body": "<p>I am fairly new to programming and I am on my  way of learning C .I am trying to build a fully functional doubly linked list module but I am getting a segmentation fault while fetching the last element.</p>\n\n<p>My function for the same </p>\n\n<pre><code>void get_last(struct Node *node)\n{\n    if (node)\n    {\n        while (node-&gt;next)\n        {\n           node = node-&gt;next;\n        }\n    }\n    printf(\"%d\",node-&gt;prev-&gt;value);\n}\n</code></pre>\n\n<p>Now every time I run it it throws an segmentation fault and I am not able to successfully debug it although I  find this conceptually correct as since node will eventually point to NULL when the loop ends and my code will print the value of the previous item .\nPlease correct me if I am wrong in my concept .\nThanks </p>\n\n<p>edit : I have used <code>\"%d\"</code> in <code>printf()</code> as the values are integer values in my created linked list </p>\n\n<p>edit 1:here is the code for creating linked list :</p>\n\n<pre><code>void create_list(struct Node *node)\n{\n    int i;\n\n    first.next=NULL;\n    first.prev=NULL;\n\n    node=&amp;first;\n\n    for(i=1;i &lt;=10;i++)\n    {\n        node-&gt;next=(struct Node *)malloc(sizeof(struct Node));\n        node-&gt;next-&gt;prev=node;\n        node=node-&gt;next;\n\n        node-&gt;value=rand()%20;\n        node-&gt;next=NULL;\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "c", "python-2.7", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 5, "last_activity_date": 1426116071, "creation_date": 1426116071, "answer_id": 28999245, "question_id": 28998817, "link": "https://stackoverflow.com/questions/28998817/calling-function-with-optional-arguments-with-pyobject-callmethod/28999245#28999245", "title": "Calling function with optional arguments with PyObject_CallMethod", "body": "<p>Calling with keyword arguments is not that straightforward from C, and you need to do <code>PyObject_Call</code>, which requires 3 arguments:</p>\n\n<ol>\n<li>The first argument of <code>PyObject_Call</code> is the method object</li>\n<li>The second argument of <code>PyObject_Call</code> is the empty tuple for *args</li>\n<li>The third argument is the keyword dictionary</li>\n</ol>\n\n<p>Thus we get</p>\n\n<pre><code>PyObject *function = PyObject_GetAttrString(add_module, \"add\");\nPyObject *args = PyTuple_New(0);\nPyObject *kwargs = Py_BuildValue(\"{s:i}\", \"b\", 5)\nresult = PyObject_Call(function, args, kwargs);\n\nPy_DECREF(kwargs);\nPy_DECREF(args);\nPy_DECREF(function);\n</code></pre>\n\n<p><strong>except</strong> you <strong>must</strong> NULL-check the return values from the 4 first functions (omitted for brevity).</p>\n"}], "owner": {"reputation": 2369, "user_id": 3155503, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9aDKc.png?s=128&g=1", "display_name": "lwxted", "link": "https://stackoverflow.com/users/3155503/lwxted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1619, "favorite_count": 3, "accepted_answer_id": 28999245, "answer_count": 1, "score": 3, "last_activity_date": 1426116071, "creation_date": 1426113908, "question_id": 28998817, "link": "https://stackoverflow.com/questions/28998817/calling-function-with-optional-arguments-with-pyobject-callmethod", "title": "Calling function with optional arguments with PyObject_CallMethod", "body": "<p>Using Python C API, how can I call a function with optional arguments?</p>\n\n<p>For example, assuming there is a Python module <code>add_module.py</code> with a function <code>add</code> that goes like:</p>\n\n<pre><code>def add(a=0, b=0):\n  return a + b\n</code></pre>\n\n<p><code>add(1, 2)</code> would correspond to </p>\n\n<pre><code>PyObject *add_module = PyImport_ImportModule(\"add_module\");\nPyObject *result = PyObject_CallMethod(add_module, \"add\", \"ii\", 1, 2);\n</code></pre>\n\n<p>How would I call something like <code>add(b=5)</code> using the Python API?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "static", "inline", "code-size"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1426118115, "post_id": 28998672, "comment_id": 46247090, "body": "If you&#39;re worried that your inline functions might not be inlined, maybe you shouldn&#39;t be inlining them in the first place? If you&#39;re not worried, then the compiler will be inlining the code anyway, and the code expansion (which presumably should get you a speed benefit; if it doesn&#39;t, there wasn&#39;t any point inlining the function in the first place) should be acceptable. Don&#39;t use <code>inline</code> willy-nilly. Use it with caution and judgement, and in case of doubt, don&#39;t use it. See also <a href=\"http://stackoverflow.com/questions/6312597\">Is <code>inline</code> without <code>static</code> or <code>extern</code> ever useful in C99?</a>"}, {"owner": {"reputation": 87, "user_id": 4593375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b88022f1fbe9c55de31536a2abe62008?s=128&d=identicon&r=PG&f=1", "display_name": "thegeeklife", "link": "https://stackoverflow.com/users/4593375/thegeeklife"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1426120770, "post_id": 28998672, "comment_id": 46247798, "body": "The reason for using inline in my code is basically for allowing function definition in the header file. Without an inline / static inline, compiler complains of multiple symbol definitions. I am a tad bit worried about code size, but mainly i&quot;m trying to see which way gives me more benefit i.e less code expansion- inline or static line."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426136536, "post_id": 28998672, "comment_id": 46251702, "body": "@thegeeklife: Plain <code>inline</code> (along with <code>extern inline</code> in some <code>.c</code> file) would be the better of those two options. It means you&#39;re creating a single logical function instead of many, as outlined in my answer. You should consider whether you really need code in headers though. It&#39;s simpler to have code in <code>.c</code> files, plus you don&#39;t risk nudging the compiler into inlining stuff it otherwise might not have (which seems to be what you&#39;re worried about, as Jonathan pointed out). The <code>.c</code> file where you&#39;d put the <code>extern inline</code> would probably be a logical place to put the definition instead."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426136680, "post_id": 28998672, "comment_id": 46251751, "body": "Also note that the compiler can inline a call to a function from a different translation unit (<code>.c</code> file) without having to use <code>inline</code> if you use link-time optimization."}], "answers": [{"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1426116121, "post_id": 28999180, "comment_id": 46246387, "body": "Excellent answer, but when you write <code>inline</code>, you are (usually) still letting the compiler choose whether to inline the function."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1426116209, "post_id": 28999180, "comment_id": 46246429, "body": "@DietrichEpp: I meant to express that, but maybe I failed. I&#39;ll go over it and see if it can be clarified."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1426116244, "post_id": 28999180, "comment_id": 46246440, "body": "I might have just been reading the bottom paragraph when I wrote that."}], "tags": [], "owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "is_accepted": false, "score": 5, "last_activity_date": 1426167636, "last_edit_date": 1426167636, "creation_date": 1426115801, "answer_id": 28999180, "question_id": 28998672, "link": "https://stackoverflow.com/questions/28998672/code-size-static-inline-vs-inline-for-functions-defined-in-header-files/28999180#28999180", "title": "Code size: static inline vs inline for functions defined in header files", "body": "<p>It could generate smaller code. The reason is that <code>inline</code> (as opposed to <code>static inline</code>) will give the function external linkage so that all calls to the function from different translation units refer to the same logical function. With <code>static inline</code>, each translation unit will get a unique instance of the function instead, which could increase code size if the compiler chooses not to inline. (It's also cleaner codewise to not have multiple identical functions.)</p>\n\n<p>The reason you need <code>extern</code> somewhere is because it makes the compiler generate an external definition of the function that can be called from other translation units. Without <code>extern</code>, no such instance is generated. The no-<code>extern</code> case differs from internal linkage in that the <code>inline</code> definition only provides an \"alternative\" to the external definition of the function. An external definition must still exist (i.e., some translation function must use <code>extern</code> to generate an external definition), and the compiler is free to use it instead of it wants to.</p>\n\n<p>Here's some relevant standardese (for C11: ISO/IEC 9899:2011 \u00a76.7.4 Function specifiers, \u00b67):</p>\n\n<blockquote>\n  <p>Any function with internal linkage can be an inline function. For a function with external linkage, the following restrictions apply: If a function is declared with an <code>inline</code> function specifier, then it shall also be defined in the same translation unit. If all of the file scope declarations for a function in a translation unit include the <code>inline</code> function specifier without <code>extern</code>, then the definition in that translation unit is an <em>inline definition</em>. An inline definition does not provide an external definition for the function, and does not forbid an external definition in another translation unit. An inline definition provides an alternative to an external definition, which a translator may use to implement any call to the function in the same translation unit. It is unspecified whether a call to the function uses the inline definition or the external definition.<sup>140)</sup></p>\n  \n  <p><sup>140)</sup> Since an inline definition is distinct from the corresponding external definition and from any other\n  corresponding inline definitions in other translation units, all corresponding objects with static storage\n  duration are also distinct in each of the definitions.</p>\n</blockquote>\n\n<p>By the way, <code>inline</code> IMO often isn't worthwhile (as a hint -- the compiler is still free to not inline) compared to simply letting the compiler choose when to inline purely on its own. For modern compilers that support <em>link-time optimization</em>, the compiler can even inline functions across translation units if you pass the right flags (e.g., <code>-flto</code> in GCC).</p>\n"}], "owner": {"reputation": 87, "user_id": 4593375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b88022f1fbe9c55de31536a2abe62008?s=128&d=identicon&r=PG&f=1", "display_name": "thegeeklife", "link": "https://stackoverflow.com/users/4593375/thegeeklife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1123, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1520748498, "creation_date": 1426113249, "last_edit_date": 1426965720, "question_id": 28998672, "link": "https://stackoverflow.com/questions/28998672/code-size-static-inline-vs-inline-for-functions-defined-in-header-files", "title": "Code size: static inline vs inline for functions defined in header files", "body": "<p>I've read quite a few posts about the use of <code>static inline</code> and <code>inline</code> while defining functions in header files for access across multiple translation units. It seems like <code>inline</code> is the right way to go due to having external linkage.</p>\n\n<p>My question is about the resulting code size as a result of using <code>inline</code> specifier when defining functions in .h files:</p>\n\n<ul>\n<li><p>Is the code expansion generated by <code>inline</code> still lesser than what would be caused by <code>static inline</code>?</p></li>\n<li><p>Why is there a need for an <code>extern inline</code> declaration in the corresponding .c file ? </p></li>\n</ul>\n"}, {"tags": ["c", "pointers", "binaryfiles", "fwrite", "fread"], "answers": [{"comments": [{"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "reply_to_user": {"reputation": 251, "user_id": 2952272, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddba427864f6b4af98cf9c53367cda93?s=128&d=identicon&r=PG&f=1", "display_name": "user2952272", "link": "https://stackoverflow.com/users/2952272/user2952272"}, "edited": false, "score": 0, "creation_date": 1426114044, "post_id": 28998654, "comment_id": 46245555, "body": "@user2952272 See my edit.  You need to output 20 bytes for the name if you plan on reading 20 bytes from the file later on."}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "reply_to_user": {"reputation": 251, "user_id": 2952272, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddba427864f6b4af98cf9c53367cda93?s=128&d=identicon&r=PG&f=1", "display_name": "user2952272", "link": "https://stackoverflow.com/users/2952272/user2952272"}, "edited": false, "score": 1, "creation_date": 1426184001, "post_id": 28998654, "comment_id": 46278690, "body": "@user2952272 See my latest edit.  I didn&#39;t notice that <code>player</code> was a pointer.  So you need to not use the &#39;&amp;&#39; when you fwrite to the file."}, {"owner": {"reputation": 251, "user_id": 2952272, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddba427864f6b4af98cf9c53367cda93?s=128&d=identicon&r=PG&f=1", "display_name": "user2952272", "link": "https://stackoverflow.com/users/2952272/user2952272"}, "edited": false, "score": 0, "creation_date": 1426506236, "post_id": 28998654, "comment_id": 46385397, "body": "Yeah that was the problem, but I already solved it. Thanks anyway."}], "tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 4, "last_activity_date": 1426183967, "last_edit_date": 1426183967, "creation_date": 1426113173, "answer_id": 28998654, "question_id": 28998608, "link": "https://stackoverflow.com/questions/28998608/binary-file-read-write-not-working/28998654#28998654", "title": "Binary file read - write not working", "body": "<pre><code>fwrite(&amp;player,sizeof(Jugador*),1,f);\n</code></pre>\n\n<p>is only writing a pointer size element (4 or 8 bytes) to the file.  You need to have: </p>\n\n<pre><code>fwrite(player,sizeof(Jugador),1,f);\n</code></pre>\n\n<p>without the extra <code>&amp;</code> and the extra <code>*</code>.</p>\n\n<p>Another problem is that you only output <code>strlen(nom)</code> bytes to the file.  But when you read the file, you read exactly 20 bytes.  So you should probably pad your <code>nom</code> string to 20 bytes and fwrite exactly 20 bytes to the file:</p>\n\n<pre><code>fwrite(nom,sizeof(char),20,f);\n...\nfread(auxp,sizeof(char),20,f);\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 2952272, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddba427864f6b4af98cf9c53367cda93?s=128&d=identicon&r=PG&f=1", "display_name": "user2952272", "link": "https://stackoverflow.com/users/2952272/user2952272"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 28998654, "answer_count": 1, "score": 1, "last_activity_date": 1426183967, "creation_date": 1426112974, "question_id": 28998608, "link": "https://stackoverflow.com/questions/28998608/binary-file-read-write-not-working", "title": "Binary file read - write not working", "body": "<p>I've been trying to write a binary file with some information in a program but I can't make it work. I write it and try to read it to see if it worked. This is the struct I'm trying to write inside the file:</p>\n\n<pre><code>typedef struct{\n    int puntuacio;\n    int posicio_x;\n    int posicio_y;\n    int vides;\n    int direccio;\n}Jugador;\n</code></pre>\n\n<p>I've got a variable called <code>player</code> of type <code>Jugador</code>. In the function I work with the binary file I recieve <code>player</code> as a pointer (so <code>Jugador *player</code>). This is the code I've written (I only give the relevant parts):</p>\n\n<pre><code>f=fopen(\"whatever.bin\",\"wb+\");\nfwrite(nom,sizeof(char),strlen(nom),f); //nom is a string containing the player's name\nfwrite(&amp;player,sizeof(Jugador*),1,f);\nauxint=player-&gt;direccio; //just doing this to see if I pass the info correctly\nfwrite(&amp;auxint,sizeof(int),1,f);\n\n//auxp, auxjug and auxint are auxiliar variables I declared inside the function\nfseek(f,0,SEEK_SET); //go to the start of the file before reading\nfread(auxp,sizeof(char),20,f);\nfread(&amp;auxjug,sizeof(Jugador),1,f);\nfread(&amp;auxint,sizeof(int),1,f);\n\nprintf(\"auxp:%s--\\n\",auxp);\nprintf(\"puntuacio:%d--\\n\",auxjug.puntuacio);\nprintf(\"dir:%d--\\n\",auxjug.direccio);\nprintf(\"posx:%d--\\n\",auxjug.posicio_x);\nprintf(\"posy:%d--\\n\",auxjug.posicio_y);\nprintf(\"vids:%d--\\n\",auxjug.vides);\nprintf(\"auxint:%d--\",auxint);\n</code></pre>\n\n<p><code>auxp</code> prints the name correctly but I get an additional garbage character in the last position of the string, but that's easy to solve. <code>auxint</code> prints perfect. But I get what I guess are memory adresses when I print the parameters of <code>auxjug</code>.</p>\n"}, {"tags": ["c++", "c", "format", "scanf"], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 3485748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadb80eb423b77e44114470a6163baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Nibikibaba", "link": "https://stackoverflow.com/users/3485748/nibikibaba"}, "edited": false, "score": 0, "creation_date": 1426119103, "post_id": 28998621, "comment_id": 46247377, "body": "But this is not a general answer -- it might work in this particular case but in the non-negated case how do you specify that character in the scan set?"}, {"owner": {"reputation": 170, "user_id": 3485748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadb80eb423b77e44114470a6163baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Nibikibaba", "link": "https://stackoverflow.com/users/3485748/nibikibaba"}, "edited": false, "score": 0, "creation_date": 1426120886, "post_id": 28998621, "comment_id": 46247832, "body": "Oh I just found the spec for that and you are right that the first character in the scan-set is handled specially and it will accept the ] character even in a non-negated set. It certainly feels a bit &#39;hacky&#39; to define a feature like that!!"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 4, "last_activity_date": 1426113030, "creation_date": 1426113030, "answer_id": 28998621, "question_id": 28998595, "link": "https://stackoverflow.com/questions/28998595/specifying-the-character-in-a-c-c-scanf-scanset/28998621#28998621", "title": "Specifying the &#39;]&#39; character in a C/C++ scanf() scanset", "body": "<p>The trick is to put ']' as the first character in the pattern:</p>\n\n<pre><code>scanf(\" %80[^]]\", &amp;buf);\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 3485748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadb80eb423b77e44114470a6163baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Nibikibaba", "link": "https://stackoverflow.com/users/3485748/nibikibaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 28998621, "answer_count": 1, "score": 0, "last_activity_date": 1426119635, "creation_date": 1426112941, "last_edit_date": 1426119635, "question_id": 28998595, "link": "https://stackoverflow.com/questions/28998595/specifying-the-character-in-a-c-c-scanf-scanset", "title": "Specifying the &#39;]&#39; character in a C/C++ scanf() scanset", "body": "<p>I would like to use a scanf family function to extract a string delimited by ']'. \nFor a delimiter of ')' one can do this:  </p>\n\n<pre><code>scanf(\" %80[^)]\", &amp;buf); \n</code></pre>\n\n<p>But how do you include the ']' in the scanset in general (not just the negated set case example above)? Is there some kind of escape seq for that? </p>\n\n<pre><code>\"[^\\\\]]\"\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 10595, "user_id": 758446, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d08a0b2d56c559112b5f18ee2e975c97?s=128&d=identicon&r=PG", "display_name": "BlackVegetable", "link": "https://stackoverflow.com/users/758446/blackvegetable"}, "edited": false, "score": 0, "creation_date": 1426112901, "post_id": 28998546, "comment_id": 46245117, "body": "Hey, we will need the expected outputs from two inputs.  Even then, <i>what is wrong with my code</i> kinds of questions tend not to be specific enough to be a good fit for this website."}, {"owner": {"reputation": 73, "user_id": 4207427, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fxv2yJtLJfU/AAAAAAAAAAI/AAAAAAAAAEU/cVMW6UIqeCo/photo.jpg?sz=128", "display_name": "Nadjib Dz", "link": "https://stackoverflow.com/users/4207427/nadjib-dz"}, "reply_to_user": {"reputation": 10595, "user_id": 758446, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d08a0b2d56c559112b5f18ee2e975c97?s=128&d=identicon&r=PG", "display_name": "BlackVegetable", "link": "https://stackoverflow.com/users/758446/blackvegetable"}, "edited": false, "score": 0, "creation_date": 1426113182, "post_id": 28998546, "comment_id": 46245217, "body": "@BlackVegetable I said in my question that the encrypted string with these two functions is not the same"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1426113200, "post_id": 28998546, "comment_id": 46245221, "body": "In order to compare both versions, it would also be helpful if corresponding variables had the same names."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4207427, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fxv2yJtLJfU/AAAAAAAAAAI/AAAAAAAAAEU/cVMW6UIqeCo/photo.jpg?sz=128", "display_name": "Nadjib Dz", "link": "https://stackoverflow.com/users/4207427/nadjib-dz"}, "edited": false, "score": 0, "creation_date": 1426114350, "post_id": 28998732, "comment_id": 46245689, "body": "I didn&#39;t see that, I corrected it in the C version, the result, it gives different result but not the same as python :("}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 73, "user_id": 4207427, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fxv2yJtLJfU/AAAAAAAAAAI/AAAAAAAAAEU/cVMW6UIqeCo/photo.jpg?sz=128", "display_name": "Nadjib Dz", "link": "https://stackoverflow.com/users/4207427/nadjib-dz"}, "edited": false, "score": 0, "creation_date": 1426115034, "post_id": 28998732, "comment_id": 46245976, "body": "@NadjibDz You have not corrected this. There is no equivalent to the Python version&#39;s line <code>a = b = 0</code> in the C version."}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 1, "last_activity_date": 1426114028, "last_edit_date": 1426114028, "creation_date": 1426113558, "answer_id": 28998732, "question_id": 28998546, "link": "https://stackoverflow.com/questions/28998546/rc4-in-c-and-python-do-not-give-the-same-result/28998732#28998732", "title": "RC4 in C and Python do not give the same result", "body": "<p>The snippets are not equivalent. In the beginning of PRGA phase, python code sets <code>b</code> to 0. The C code does not reinitialize the corresponding variable, and uses a leftover from KSA phase. One of the snippets must be wrong. I do not know RC4 to tell which one.</p>\n"}], "owner": {"reputation": 73, "user_id": 4207427, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fxv2yJtLJfU/AAAAAAAAAAI/AAAAAAAAAEU/cVMW6UIqeCo/photo.jpg?sz=128", "display_name": "Nadjib Dz", "link": "https://stackoverflow.com/users/4207427/nadjib-dz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1426686441, "creation_date": 1426112719, "last_edit_date": 1426686441, "question_id": 28998546, "link": "https://stackoverflow.com/questions/28998546/rc4-in-c-and-python-do-not-give-the-same-result", "title": "RC4 in C and Python do not give the same result", "body": "<p>I have been using RC4 in C for a long time (simple function that I've found in the internet), recently, I wanted to do string encryption in python and move it to C program, so I found the same function in python, but it does not give the same result as C function\nhere are both functions :</p>\n\n<p>C :</p>\n\n<pre><code>LPBYTE RC4(LPBYTE lpBuf, LPBYTE lpKey, DWORD dwBufLen, DWORD dwKeyLen){\n    INT a, b = 0, s[256];\n    BYTE swap;\n    DWORD dwCount;\n    for(a = 0; a &lt; 256; a++){\n        s[a] = a;\n    }\n    for(a = 0; a &lt; 256; a++){\n        b = (b + s[a] + lpKey[a % dwKeyLen]) % 256;\n        swap = s[a];\n        s[a] = s[b];\n        s[b] = swap;\n    }\n\n    a = b = 0\n\n    for(dwCount = 0; dwCount &lt; dwBufLen; dwCount++){\n        a = (a + 1) % 256;\n        b = (b + s[a]) % 256;\n        swap = s[a];\n        s[a] = s[b];\n        s[b] = swap;\n        lpBuf[dwCount] ^= s[(s[a] + s[b]) % 256];\n    }\n    return lpBuf;\n}\n</code></pre>\n\n<p>Python :</p>\n\n<pre><code>def rc4(data , key):\n    S = list(range(256))\n    b = 0\n    out = []\n\n    #KSA Phase\n    for a in range(256):\n        b = (b + S[a] + ord( key[a % len(key)] )) % 256\n        S[a] , S[b] = S[b] , S[a]\n\n    #PRGA Phase\n    a = b = 0\n    for dwCount in data:\n        a = ( a + 1 ) % 256\n        b = ( b + S[a] ) % 256\n        S[a] , S[b] = S[b] , S[a]\n        out.append(chr(ord(dwCount) ^ S[(S[a] + S[b]) % 256]))\n\n    return ''.join(out)\n</code></pre>\n\n<p>So, why the encrypted string with these two functions is not the same ?</p>\n"}, {"tags": ["c++", "c", "memory", "bit-manipulation", "information-theory"], "comments": [{"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426113423, "post_id": 28998481, "comment_id": 46245311, "body": "what comes into my mind first is doing a base conversion from base 3 (original values) to base 2, for a number which has 20 digits in base 3"}, {"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426114384, "post_id": 28998481, "comment_id": 46245702, "body": "there&#39;s also things like matlab / octave that have a c/c++ api with functions like base2dec / dec2base <a href=\"http://octave.sourceforge.net/octave/function/base2dec.html\" rel=\"nofollow noreferrer\">octave.sourceforge.net/octave/function/base2dec.html</a> which could do the job for you..."}, {"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426116075, "post_id": 28998481, "comment_id": 46246369, "body": "on the other hand, the 2nd method only makes sense if you have serious memory restraints... the first one is more easy to calculate/read/write/handle. If space is low you could also think about using a compressing algorithm like lzma if you want to let&#39;s say send things over network etc..."}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1426126211, "post_id": 28998481, "comment_id": 46249253, "body": "How many bits are you willing to waste to make addressing individual elements easier? As you have noted, using 2 bits allows for 4 values, but you only need 3 values, so you waste 1/2 bit out of 2 bits (1/4). You can place 5 of these values into a 4 bit nibble, wasting 1/2 bit out of 4 bits (1/16), but then extracting and setting the individual value is harder. Make your life easier, and waste the 1/2 bit out of 2 bits."}], "answers": [{"comments": [{"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1426114430, "post_id": 28998773, "comment_id": 46245719, "body": "thanks a lot ! But do you have any idea about the code to specifically set a single element into the 32 bits int , without changing the rest ?"}, {"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426114707, "post_id": 28998773, "comment_id": 46245841, "body": "would it hurt if you read the value to elements, perform the change and then write it back? I think you can&#39;t prevent the system to perform a write operation on the whole int anyways..."}], "tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 5, "last_activity_date": 1426113718, "creation_date": 1426113718, "answer_id": 28998773, "question_id": 28998481, "link": "https://stackoverflow.com/questions/28998481/packing-an-array-of-3-values-in-buffer/28998773#28998773", "title": "packing an array of 3 values in buffer", "body": "<p>You should be able to do what you said using 4 bytes.  Assume that you store the 20 values into a single <code>int32_t</code> called <code>value</code>, here is how you would extract any particular element:</p>\n\n<pre><code>element[0] = value % 3;\nelement[1] = (value / 3) % 3;\nelement[2] = (value / 9) % 3;\n...\nelement[19] = (value / 1162261467) % 3; // 1162261467 = 3 ^ 19\n</code></pre>\n\n<p>Or as a loop:</p>\n\n<pre><code>for (i=0;i&lt;20;i++) {\n    element[i] = value % 3;\n    value /= 3;\n}\n</code></pre>\n\n<p>To build <code>value</code> from <code>element</code>, you would just do the reverse, something like this:</p>\n\n<pre><code>value = 0;\nfor (i=19;i&gt;=0;i--)\n    value = value * 3 + element[i];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": false, "score": 0, "last_activity_date": 1426117159, "creation_date": 1426117159, "answer_id": 28999450, "question_id": 28998481, "link": "https://stackoverflow.com/questions/28998481/packing-an-array-of-3-values-in-buffer/28999450#28999450", "title": "packing an array of 3 values in buffer", "body": "<p>There is a generic way to figure out how much bits you need:</p>\n\n<p>If your data type has <em>N</em> different values, then you need <em>log(N) / log(2)</em> bits to store this value. For instance in your example, <em>log(3) / log(2)</em> equals 1.585 bits.</p>\n\n<p>Of course in reality you will to pack a fixed amount of values in an integer number of bits, so you have to multiply this 1.585 with that amount and round up. For instance if you pack 5 of them:</p>\n\n<p><em>1.585 \u00d7 5 = 7.925</em>, meaning that 5 of your values just fit in one 8-bit <code>char</code>.</p>\n\n<p>The way to unpack the values has been shown in JS1's answer. The generic formula for unpacking is <em>element[i] = (value / (N ^ i) ) mod N</em></p>\n\n<p>Final note, this is only meaningful if you really need to optimize memory usage. For comparison, here are some popular ways people pack these value types. Most of the time the extra space taken up is not a problem.</p>\n\n<ul>\n<li>an array of <code>bool</code>: uses 8 bits to store one <code>bool</code>. And a lot of people really dislike the behavior of <code>std::vector&lt;bool&gt;</code>.</li>\n<li><code>enum Bla { BLA_A, BLA_B, BLA_C};</code> an array or vector of <code>Bla</code> probably uses 32 bits per element (<code>sizeof(Bla) == sizeof(int)</code>).</li>\n</ul>\n"}], "owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 28998773, "answer_count": 2, "score": 2, "last_activity_date": 1426117159, "creation_date": 1426112412, "last_edit_date": 1426112767, "question_id": 28998481, "link": "https://stackoverflow.com/questions/28998481/packing-an-array-of-3-values-in-buffer", "title": "packing an array of 3 values in buffer", "body": "<p>I have the following problem I am unable to solve gracefully.</p>\n\n<p>I have a data type that can take 3 possible values (0,1,2).\nI have an array of 20 element of this data type.</p>\n\n<p>As I want to encode the information on the least amount of memory, I did the following :</p>\n\n<ul>\n<li>consider that each element can take up to 4 values (2 bits)</li>\n<li>each <code>char</code> holds 8 bits, so I can put 4 times an element</li>\n<li>5 <code>char</code> holds 40 bits, so I can store 20 elements.</li>\n</ul>\n\n<p>I have done this and it works time.</p>\n\n<p>However I'm interested evaluating the space gained by using the fact that my element can only take 3 values and not 4.\nEvery possible combination gives us 3 to the 20th power, which is 3,486,784,401. However 256 to the 4th power gives us 4,294,967,296 , which is greater. This means I could encode my data on 4 <code>char</code> .</p>\n\n<p>Is there an generic method to do the 2nd idea here ? The 1st idea is simple to implement with bit mask / bit shifts. However since 3 values doesn't fit in an integer number of bits, I have no idea how to encode / decode any of these values into an array of 4 char.</p>\n\n<p>Do you have any idea or reference on how it's done ? I think there must be a general method. If anything I'm interested about the feasability of this</p>\n\n<p>edit : this could be simplified to : how to store 5 values from 0 to 2 into 1 byte only (as 256 >= 3^5 = 243)</p>\n"}, {"tags": ["c++", "c", "eclipse", "permissions", "compiler-errors"], "comments": [{"owner": {"reputation": 1376, "user_id": 11409, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2095818e4949d637dfe6024a0319e0a6?s=128&d=identicon&r=PG", "display_name": "mcveat", "link": "https://stackoverflow.com/users/11409/mcveat"}, "edited": false, "score": 0, "creation_date": 1426112343, "post_id": 28998275, "comment_id": 46244936, "body": "Consider adding the code that you think is causing the error to the question. Also, you may check <a href=\"http://stackoverflow.com/questions/27593029/c-compile-collect2-error-ld-returned-1-exit-status\" title=\"c compile collect2 error ld returned 1 exit status\">stackoverflow.com/questions/27593029/&hellip;</a> if this can lead you to solution"}, {"owner": {"reputation": 195, "user_id": 4425633, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JcYVQ.jpg?s=128&g=1", "display_name": "Elhaw", "link": "https://stackoverflow.com/users/4425633/elhaw"}, "edited": false, "score": 0, "creation_date": 1426113778, "post_id": 28998275, "comment_id": 46245445, "body": "does the code works before ? or you could not run any program on eclipse ? @Gizem &#199;etin"}], "answers": [{"tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": false, "score": 0, "last_activity_date": 1426111950, "creation_date": 1426111950, "answer_id": 28998384, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/28998384#28998384", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>That will happen if the program is still running in another window.  The .exe file stays open until the program finishes execution, and you can't delete a file while any processes have it open.</p>\n\n<p>I don't use Eclipse for C/C++ development, and the problem almost can't happen with Code::Blocks, but this happens very often with Visual C++.  Just close the other window and rebuild.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 4425633, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JcYVQ.jpg?s=128&g=1", "display_name": "Elhaw", "link": "https://stackoverflow.com/users/4425633/elhaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1426112377, "creation_date": 1426112377, "answer_id": 28998468, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/28998468#28998468", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>The same problem with me while editing my code.the easy way i used is ::::::::</p>\n\n<p>press the red button(Terminate) before editing your code then run your code\nit is tested and works</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5725070, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/83ad5447c7a8b30cac8f59fafc05ac55?s=128&d=identicon&r=PG", "display_name": "anon679", "link": "https://stackoverflow.com/users/5725070/anon679"}, "is_accepted": false, "score": 3, "last_activity_date": 1451349434, "creation_date": 1451349434, "answer_id": 34502839, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/34502839#34502839", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>All you have to do is go to project on the menu bar and then click clean project. Clean all of your projects and then it should work.</p>\n"}, {"tags": [], "owner": {"reputation": 1116, "user_id": 6457989, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-WqYZtN2xbQA/AAAAAAAAAAI/AAAAAAAAAJA/Q0Nr_eTCBsA/photo.jpg?sz=128", "display_name": "newbie", "link": "https://stackoverflow.com/users/6457989/newbie"}, "is_accepted": false, "score": 1, "last_activity_date": 1487322706, "last_edit_date": 1487322706, "creation_date": 1487319484, "answer_id": 42292751, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/42292751#42292751", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>I know this is an old question, but it probably does that because you are interrupting the flow of your program, for instance using <code>scanf()</code>, and not actually giving the input it requires, so when you use the command <code>Build</code> the project, then eclipse is waiting a stream from your keyboard (for instance, maybe it's a different type of program, but follow me here). </p>\n\n<p>Once you know than that is the problem, then you might wanna keep an eye in what is that you are not giving to the project and that it is expecting you to; and the way to stop this annoying error the next time you get it, is that in your console view you press the red button.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 7587115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uwHmscQCYHk/AAAAAAAAAAI/AAAAAAAACDk/F9lJP1LxMbg/photo.jpg?sz=128", "display_name": "Sonic Splasher", "link": "https://stackoverflow.com/users/7587115/sonic-splasher"}, "is_accepted": false, "score": 0, "last_activity_date": 1524341902, "last_edit_date": 1524341902, "creation_date": 1524331174, "answer_id": 49958326, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/49958326#49958326", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>Check your quarantine folder of your antivirus. If you see the executable file, then add it to the <code>Trust list</code> or <code>White list</code>. Your problem should be solved.</p>\n"}], "owner": {"reputation": 1, "user_id": 4660562, "user_type": "registered", "profile_image": "https://graph.facebook.com/924806757540860/picture?type=large", "display_name": "Gizem &#199;etin", "link": "https://stackoverflow.com/users/4660562/gizem-%c3%87etin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13000, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1524341902, "creation_date": 1426111480, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>I'm using Eclipse Helios in Windows7 for C/C++ programming. I wrote a basic C++ code and tried to compile. The output is:</p>\n\n<blockquote>\n  <p>**** Incremental Build of configuration Release for project Programming Project **** Info: Internal Builder is used for build g++\n  -o \"Programming Project.exe\" \"src\\ch_3_excercises.o\"  c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe:\n  cannot open output file Programming Project.exe: Permission denied\n  collect2: ld returned 1 exit status</p>\n</blockquote>\n\n<p>How can I fix this error?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1426111072, "post_id": 28998112, "comment_id": 46244388, "body": "Please keep you lines of code shorter to make the code fit in the frame."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426111248, "post_id": 28998112, "comment_id": 46244480, "body": "That kind of task is very easy if you sort the array first."}], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1426113387, "post_id": 28998269, "comment_id": 46245296, "body": "ah, this makes more sense. I can try it this way, thanks for helping."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1426111461, "creation_date": 1426111461, "answer_id": 28998269, "question_id": 28998112, "link": "https://stackoverflow.com/questions/28998112/comparing-to-arrays-and-returning-the-item-thats-missing/28998269#28998269", "title": "comparing to arrays and returning the item that&#39;s missing?", "body": "<p>You must scan the <code>seenLL</code> array for each element of <code>LL</code> but properly detect if the element has been seen:</p>\n\n<pre><code>for (i = 0;i &lt; sizeof(LL) / sizeof(LL[0]); i++) {\n    for (j = 0; j &lt; sizeof(seenLL) / sizeof(seenLL[0]); j++) {\n        if (LL[i] == seenLL[j])\n            break;\n    }\n    if (j &gt;= sizeof(seenLL) / sizeof(seenLL[0])) {\n        unseen[k++] = LL[i];    // scan went to the end, no match.\n    }\n}\n</code></pre>\n\n<p>I suggest using the macro <code>countof</code> to clarify your code:</p>\n\n<pre><code>#define countof(a)  ((sizeof(a) / sizeof((a)[0]))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1426113423, "post_id": 28998276, "comment_id": 46245312, "body": "I see. yeah, thats something i can do."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1426111485, "creation_date": 1426111485, "answer_id": 28998276, "question_id": 28998112, "link": "https://stackoverflow.com/questions/28998112/comparing-to-arrays-and-returning-the-item-thats-missing/28998276#28998276", "title": "comparing to arrays and returning the item that&#39;s missing?", "body": "<p>The logic is wrong.</p>\n\n<p>What you're doing: For each item in <code>LL</code>: if it is different from <em>some</em> item in <code>seenLL</code>, add it to <code>unseen</code>.</p>\n\n<p>What you should do: For each item in <code>LL</code>: if it is different from <em>every</em> item in <code>seenLL</code>, add it to <code>unseen</code>.</p>\n\n<p>(Another way to think of these two possible logics: the first one checks for some item whether it is the same as every item in <code>seenLL</code>, while the second one checks whether it is the same as some item in <code>seenLL</code>. It's clear that the first check cannot succeed if <code>seenLL</code> contains at least two different items.)</p>\n"}, {"comments": [{"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1426113228, "post_id": 28998289, "comment_id": 46245242, "body": "<code>seenLL[]</code> will be always a subset of <code>LL[]</code>, and I limited the numbers here so that it would be easier to explain.  I discarded <code>k</code> thinking that it would have the offset, and not the count of items in <code>seenLL[]</code>, but I now see the error in my ways."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1426111539, "creation_date": 1426111539, "answer_id": 28998289, "question_id": 28998112, "link": "https://stackoverflow.com/questions/28998112/comparing-to-arrays-and-returning-the-item-thats-missing/28998289#28998289", "title": "comparing to arrays and returning the item that&#39;s missing?", "body": "<p>Array <code>seenLL</code> has space for only five elements, but there's nothing to suggest or ensure that the number of codes you attempt to record in it will be five or fewer if <code>LL</code> had more than five elements.</p>\n\n<p>Furthermore, after you are done populating <code>seenLL</code>, you discard the value of variable <code>k</code>, which tells you how many of the elements of <code>seenLL</code> actually contain valied data.</p>\n\n<p>Later, you test each element of <code>LL</code> against potentially <em>all</em> the elements of <code>seenLL</code>, possibly including some that do not contain valid data.  In fact, you should test against all valid elements but no invalid ones, else you are likely to turn up all elements as unseen (they will fail to match at least one element of <code>seenLL</code>).</p>\n\n<p>Array <code>unseen</code> also has space for only five elements, but there's nothing to suggest or ensure that the number of codes you attempt to record in it will be five or fewer.</p>\n\n<p>Then, at the end, if you in fact did recognize any unseen elements, you print <em>every</em> element of <code>unseen</code>, likely including some that do not contain valid data.</p>\n"}], "owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1426111539, "creation_date": 1426110782, "question_id": 28998112, "link": "https://stackoverflow.com/questions/28998112/comparing-to-arrays-and-returning-the-item-thats-missing", "title": "comparing to arrays and returning the item that&#39;s missing?", "body": "<p>I am not sure why I am not able to get this right, I spend some time on this, and I don't get what I want. and now I am upset. I have a list LL[] of desired items, and a list seenLL[] which may contain items from LL[], but in any random order. I wanted to put the missing items in unseen[] and then print unseen. At-least that is my idea :(</p>\n\n<pre><code>unsigned int i=0, j=0, k=0;\nunsigned int LL[] = {0xB173,0xB193,0xB14D,0xB14E};  //Desired items\nunsigned int seenLL[5];  // Seen items\nunsigned int unseen[5];  // For unseen items\n\nprintf(\"\\n List of Logcodes seen in filtered view :\");      \nfor(i=0;i&lt;view-&gt;numFilters;i++){   // I can't explain this, as it's BIG\n    if(flt-&gt;filterType == LOGCODE_TYPE ){ \n        printf(\" 0x%04X,\",flt-&gt;code);  // This will print the list of items in the view. Usually about 2 or 3 items\n        seenLL[k]=flt-&gt;code;   // Copy them to seenLL[]\n        k++;\n     }\n } \n k=0;\n // At this point though my seenLL[] has a few of my desired items, it also contains junk information, which I am unable to explain.\n\nfor(i=0;i&lt;sizeof(LL)/sizeof(LL[0]);i++){\n    for(j=0;j&lt;sizeof(seenLL)/sizeof(seenLL[0]);j++){\n        if(LL[i] != seenLL[j]){\n            unseen[k]=LL[i];    // I was trying to copy to unseen[] items that are missing from the desired list LL[]\n            k++;\n        }\n        //else{       // Dumb, but what if seenLL[] had items from LL[] but not in the same order as they are in the array LL[], it can occur in any order\n         // if(sizeof(unseen)/sizeof(unseen[0])!=0)\n        //      if(LL[i] == unseen[i]{ \n        //            k--;\n        //            unseen[i]=0;\n         //       }                     \n    }\n}\nif(k&gt;0) printf(\" Missing Logs Pkts :\");\nif(k&gt;0) for(i=0;i&lt;sizeof(unseen)/sizeof(unseen[0]);i++)    //sigh! my pathetic attempt to print missing items.\n     printf(\"%d,\",unseen[i]);\n</code></pre>\n"}, {"tags": ["c", "memory-management", "struct"], "comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1426110676, "post_id": 28997850, "comment_id": 46244186, "body": "Seems fairly reasonable, though you probably want/need to add alignment between the objects. And use a flexible array member if you&#39;ve got a C99 compiler."}, {"owner": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 1, "creation_date": 1426110937, "post_id": 28997850, "comment_id": 46244317, "body": "Depending on the platform you may need to account for padding between &#39;size&#39; and &#39;data&#39;. If you can, you should explicitly define the packing of the structure to ensure there isn&#39;t any extra space."}, {"owner": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1426111189, "post_id": 28997850, "comment_id": 46244444, "body": "@doynax, Thank you for the term &#39;flexible array member&#39;, I found the answer for my question <a href=\"http://stackoverflow.com/a/247040/864113\">stackoverflow.com/a/247040/864113</a>"}, {"owner": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "reply_to_user": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 0, "creation_date": 1426111259, "post_id": 28997850, "comment_id": 46244489, "body": "@joshpoley, the line  &#39;struct layout <i>val = malloc( sizeof *val + (number_of_bytes - 1)); /</i> non flexible */&#39; does not depend the way of packing"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426111545, "post_id": 28997850, "comment_id": 46244610, "body": "Regarding &quot;Where does a static array keep the pointer for using it?&quot; , it doesn&#39;t. Such a pointer is an rvalue that&#39;s created as needed."}, {"owner": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426111793, "post_id": 28997850, "comment_id": 46244719, "body": "@MattMcNabb, Thank you. Now it is clear, this thing worried me very much."}, {"owner": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 0, "creation_date": 1426113528, "post_id": 28997850, "comment_id": 46245354, "body": "@so-olitary This code is broken with regard to packing: <code>val1.size + sizeof(val1.size);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "edited": false, "score": 0, "creation_date": 1426110646, "post_id": 28998003, "comment_id": 46244172, "body": "I described my thoughts incorrect. Of course, the struct layouts are placed one by one in a uninterrapted memory block."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1426110901, "post_id": 28998003, "comment_id": 46244300, "body": "If you do this, you must take alignment into account: each struct should be aligned on a 4 byte boundary in order for the <code>uint32_t size</code> member to be properly aligned.  Either keep the sizes as multiple of 4 or add some extra padding between structs."}, {"owner": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1426111503, "post_id": 28998003, "comment_id": 46244583, "body": "@chqrlie, if I will use &#39;sizeof(struct header)&#39; every time, I consider the aligment. I think."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "edited": false, "score": 1, "creation_date": 1426111639, "post_id": 28998003, "comment_id": 46244656, "body": "@so-olitary the problem is that the number of bytes in <code>data</code> might not be a multiple of the alignment; so you will have to insert some padding bytes before you place another <code>struct layout</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "edited": false, "score": 1, "creation_date": 1426111949, "post_id": 28998003, "comment_id": 46244785, "body": "@so-olitary: using <code>sizeof(struct layout)</code> does not really help for alignment because you add the array length without aligning it.  It actually makes things worse because in the pre-C99 version, <code>struct header</code> includes 3 bytes of padding after the 1 byte array.  You should use <code>offsetof(struct layout, data) + align4(number_of_bytes)</code>  with this definition of <code>align4</code>: <code>#define align4(n)  (((n)+3)&amp;~3)</code>.  Of course, you must use your own allocator to create this pseudo array of structs, not a separate <code>malloc</code> for each one."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1426112215, "post_id": 28998003, "comment_id": 46244890, "body": "@chqrlie in the Standard C version, <code>val1-&gt;data + align4(number_of_bytes)</code> is simpler. Also you can use the <code>alignof</code> operator introduced in C11 instead of hardcoding alignment 4. (the platform may have less strict alignment requirements)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1426112284, "post_id": 28998003, "comment_id": 46244917, "body": "Another consideration is that <code>malloc</code> is specified as returning space aligned for any possible type. If this memory manager is meant to be a drop-in replacement for <code>malloc</code> then you will actually have to do some shenanigans to get <code>val1-&gt;data</code> correctly aligned for the maximum possible alignment of any type on the system."}, {"owner": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "edited": false, "score": 0, "creation_date": 1426112848, "post_id": 28998003, "comment_id": 46245096, "body": "@MattMcNabb, Oh! It is a problem. I started this story to make my life simpler. If I can&#39;t just get any data by &#39;val1-&gt;data&#39; pointer. All of this are unsuitable. If I just add 3 empty bytes (uchar_t s) in the middle of a structure, can it solve the problem (if I know, that this program will be compiled and executed in the same computer)?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "edited": false, "score": 0, "creation_date": 1426114196, "post_id": 28998003, "comment_id": 46245618, "body": "@so-olitary updated to include alignment for <code>data[]</code>. I&#39;d suggest against inserting miscellaneous bytes. If your compiler doesn&#39;t support C11 but does have anonymous unions, then they can be used to achieve the desired layout."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 4, "last_activity_date": 1426114185, "last_edit_date": 1495541187, "creation_date": 1426110320, "answer_id": 28998003, "question_id": 28997850, "link": "https://stackoverflow.com/questions/28997850/various-length-structure-in-c-for-memory-manager/28998003#28998003", "title": "Various length structure in C for memory manager?", "body": "<p>The Standard C version of this is called <em>flexible array member</em> and it looks like:</p>\n\n<pre><code>struct layout\n{\n    uint32_t size;\n    uchar_t data[];\n};\n\n// allocate one of these blocks (in a function)\nstruct layout *val = malloc( sizeof *val + number_of_bytes );\nval-&gt;size = number_of_bytes;\n</code></pre>\n\n<hr>\n\n<p>The code <code>val1-&gt;data + val1-&gt;size</code> will get you a pointer one-past-the-end of the space you just <code>malloc</code>'d.</p>\n\n<p>However you cannot iterate off the end of one <code>malloc</code>'d block and hope to hit another <code>malloc</code>'d block.    To implement this idea you would have to <code>malloc</code> a large block and then place various <code>struct layout</code> objects throughout it, being careful about <a href=\"https://stackoverflow.com/questions/11386946/whats-the-difference-between-sizeof-and-alignof\">alignment</a>.</p>\n\n<p>In this approach, it's probably best to also store an index of where each <code>struct layout</code> is. In theory you could go through the list from the start each time, adding on <code>size</code> and then doing your alignment adjustment; but that would be slow and also it would mean you could not cope with a block in the middle being freed and re-\"allocated\".</p>\n\n<p>If this is meant to be a drop-in replacement for <code>malloc</code> then there are in fact two alignment considerations:</p>\n\n<ul>\n<li>alignment for <code>struct layout</code></li>\n<li><code>data</code> must be aligned for any possible type</li>\n</ul>\n\n<p>The simplest way to cope with this is to align <code>struct layout</code> for any possible type also. This could look like (note: <code>#include &lt;stdint.h&gt;</code> required):</p>\n\n<pre><code>struct layout\n{\n    uint64_t size;    // may as well use 64 bits since they're there\n    _Alignas(max_align_t) uchar_t data[];\n};\n</code></pre>\n\n<p>An alternative might be to keep <code>size</code> at 32-bit and throw in a <code>pragma pack</code> to prevent padding; then you'll need to use some extra complexity to make sure that the <code>struct layout</code> is placed 4 bytes before a <code>max_align_t</code>-byte boundary, and so on.  I'd suggest doing it the easy way first and get your code running; then later you can go back and try this change in order to save a few bytes of memory if you want.</p>\n\n<hr>\n\n<p>Alternative approaches:</p>\n\n<ul>\n<li>Keep each instance of a <code>struct layout</code> plus its trailing data in a separate allocation.  </li>\n<li>Change <code>data</code> be a pointer to <code>malloc</code>'d space; then you could keep all of the <code>struct layout</code> objects in an array.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": false, "score": 2, "last_activity_date": 1426117600, "creation_date": 1426117600, "answer_id": 28999527, "question_id": 28997850, "link": "https://stackoverflow.com/questions/28997850/various-length-structure-in-c-for-memory-manager/28999527#28999527", "title": "Various length structure in C for memory manager?", "body": "<p>The general idea will work, but that specific struct will only work if the most-severe boundary alignment case is an int.  </p>\n\n<p>A memory manager, particularly one that might be a back-end for an implementation of <code>malloc()</code>, must know what that worst-case boundary is.  The actual start of data must be on that boundary in order to satisfy the general requirement that the allocated memory be suitably aligned for the storage of any data type.</p>\n\n<p>The easiest way to get that done is to make the length allocation header described by the <code>layout</code> struct and the actual allocation sizes all multiples of that alignment unit.</p>\n\n<p>No matter what, you can't describe the start of data as a struct member and have the size of that struct be the size of the header.  C doesn't support zero-length fields.  You should use something to put that array on boundary, and use the <code>offsetof()</code> macro from <code>&lt;stddef.h&gt;</code>.</p>\n\n<p>Personally, I'd use a <code>union</code>, based on both old habits and occasional use of Visual C++ for C.  But uint32_t is a C99 type and if you also have C11 support you can use <a href=\"http://en.cppreference.com/w/c/language/_Alignas\" rel=\"nofollow\"><code>_Alignas()</code></a>.  With that, your struct could look something like:</p>\n\n<pre><code>#define ALIGN_TYPE double /* if this is the worst-case type */\n#define ALIGN_UNIT ((sizeof)(ALIGN_TYPE))\n#define ALIGN_SIZE(n) (((size_t)(n) + ALIGN_UNIT - 1) &amp; ~(ALIGN_UNIT-1))\n\ntypedef struct layout\n{\n    size_t size; /* or use uint32_t if you prefer */\n    _Alignas(ALIGN_UNIT) char data[1];\n\n} layout;\n\n#define HEADER_SIZE (offsetof(layout, data))\n</code></pre>\n\n<p>That makes most everything symbolic except for the worst-case alignment type.  You'd allocate the combined header plus data array with:</p>\n\n<pre><code>layout *ptr = (layout*) malloc(HEADER_SIZE + ALIGN_SIZE(number_of_bytes));\nptr-&gt;size = HEADER_SIZE;\n</code></pre>\n\n<p>The ALIGN_SIZE type really isn't a symbolic constant, though, unless C99/C11 changed the definition of <code>sizeof</code>.  You can't use to compute ordinary array dimensions, for example.  You can hard code a literal number, like 8 for a typical double, if that's a problem.  Beware that <code>long double</code> has a problematical size (10 bytes) on many x86 implementations.  If you're going to base the allocation unit on a type, then <code>long double</code> might not be your best choice.</p>\n"}], "owner": {"reputation": 1306, "user_id": 864113, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ffe69804cf66d260a3e499ea7f1bbf8c?s=128&d=identicon&r=PG", "display_name": "Kirill Golikov", "link": "https://stackoverflow.com/users/864113/kirill-golikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 28998003, "answer_count": 2, "score": 2, "last_activity_date": 1428335283, "creation_date": 1426109754, "last_edit_date": 1428335283, "question_id": 28997850, "link": "https://stackoverflow.com/questions/28997850/various-length-structure-in-c-for-memory-manager", "title": "Various length structure in C for memory manager?", "body": "<p>I practice in realization a memory manager in C.</p>\n\n<p>I want the structure, that has a various length and self-described.\nSo, I peep at a POSIX textbook something, like that:</p>\n\n<pre><code>struct layout\n{\n uint32_t  size; // array size in bytes, include space after the struct\n uchar_t   data[1];\n};\n\n// But, is next line correct?\nlayout *val = malloc (array_memory_in_bytes + sizeof (uint32_t) - 1);\n// Where does a static array keep the pointer for using it? \n</code></pre>\n\n<p>If I have several these structures one-after-one in uninterrupted piece of memory, and I want be able to iterate through them. Can I write something, like that:</p>\n\n<pre><code>layout *val1 = pointer;\nlayout *val2 = val1 + val1.size + sizeof (val1.size);\n</code></pre>\n\n<p>Or can you recommend me a better approach?</p>\n"}, {"tags": ["c", "arrays", "io", "char", "spaces"], "comments": [{"owner": {"reputation": 1, "user_id": 4660440, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206364784101276/picture?type=large", "display_name": "Zyad Sabry", "link": "https://stackoverflow.com/users/4660440/zyad-sabry"}, "reply_to_user": {"reputation": 6855, "user_id": 1334062, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52fbc94ef21aeb260ec0ff47b07ab64d?s=128&d=identicon&r=PG", "display_name": "Tudor Timi", "link": "https://stackoverflow.com/users/1334062/tudor-timi"}, "edited": false, "score": 0, "creation_date": 1426109730, "post_id": 28997807, "comment_id": 46243767, "body": "What do you mean can&#39;t understand?"}, {"owner": {"reputation": 6855, "user_id": 1334062, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52fbc94ef21aeb260ec0ff47b07ab64d?s=128&d=identicon&r=PG", "display_name": "Tudor Timi", "link": "https://stackoverflow.com/users/1334062/tudor-timi"}, "edited": false, "score": 0, "creation_date": 1426109855, "post_id": 28997807, "comment_id": 46243819, "body": "Your question doesn&#39;t show effort at all. You&#39;re supposed to show some code that you tried and isn&#39;t working."}, {"owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "edited": false, "score": 0, "creation_date": 1426109862, "post_id": 28997807, "comment_id": 46243823, "body": "The program you made to treat with a single name may work with only a slight modification with two names. Just show your code here and we&#39;ll be able to tell you."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1426109878, "post_id": 28997807, "comment_id": 46243828, "body": "<code>char name[64]; scanf(&quot;%63[^\\n]&quot;, name);</code>"}, {"owner": {"reputation": 1, "user_id": 4660440, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206364784101276/picture?type=large", "display_name": "Zyad Sabry", "link": "https://stackoverflow.com/users/4660440/zyad-sabry"}, "reply_to_user": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "edited": false, "score": 0, "creation_date": 1426110075, "post_id": 28997807, "comment_id": 46243925, "body": "Sorry man forgot to paste the code  @Jo&#235;lHecht NOTE  : Posted now :D"}, {"owner": {"reputation": 1, "user_id": 4660440, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206364784101276/picture?type=large", "display_name": "Zyad Sabry", "link": "https://stackoverflow.com/users/4660440/zyad-sabry"}, "reply_to_user": {"reputation": 6855, "user_id": 1334062, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52fbc94ef21aeb260ec0ff47b07ab64d?s=128&d=identicon&r=PG", "display_name": "Tudor Timi", "link": "https://stackoverflow.com/users/1334062/tudor-timi"}, "edited": false, "score": 0, "creation_date": 1426110106, "post_id": 28997807, "comment_id": 46243935, "body": "Sorry man forgot to paste the code @Tudor NOTE : Posted now :D"}, {"owner": {"reputation": 1, "user_id": 4660440, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206364784101276/picture?type=large", "display_name": "Zyad Sabry", "link": "https://stackoverflow.com/users/4660440/zyad-sabry"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1426110182, "post_id": 28997807, "comment_id": 46243974, "body": "You Rock Man !! Thankss ;) @BLUEPIXY"}], "answers": [{"tags": [], "owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "is_accepted": false, "score": 0, "last_activity_date": 1426117348, "creation_date": 1426117348, "answer_id": 28999483, "question_id": 28997807, "link": "https://stackoverflow.com/questions/28997807/handle-character-arrays-that-include-spaces/28999483#28999483", "title": "Handle character arrays that include spaces", "body": "<p>when you have a character array as follows</p>\n\n<pre><code>char name[500];\n</code></pre>\n\n<p>You can take input a string that contains any character except <code>\\n</code> as follows</p>\n\n<pre><code>int i;\nfor(i=0;(name[i]=getchar())!='\\n';i++);\nname[i]='\\0';  //null termination\n</code></pre>\n\n<p>Assuming that the length of the array is enough to store the name.</p>\n"}], "owner": {"reputation": 1, "user_id": 4660440, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206364784101276/picture?type=large", "display_name": "Zyad Sabry", "link": "https://stackoverflow.com/users/4660440/zyad-sabry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1426117348, "creation_date": 1426109607, "last_edit_date": 1426112575, "question_id": 28997807, "link": "https://stackoverflow.com/questions/28997807/handle-character-arrays-that-include-spaces", "title": "Handle character arrays that include spaces", "body": "<p>I'm working on a program that has you enter your name, and the program then puts it into a square.  For example, for the input <code>\"Zyad\"</code> I would expect the output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> ********\n|        |\n|  Zyad  |\n|        |\n ********\n</code></pre>\n\n<p>Now I want to be able to enter two names (for example first and last name) and get the same sort of output.</p>\n\n<p>The input of <code>\"Zyad Sabry\"</code> would yield </p>\n\n<pre class=\"lang-none prettyprint-override\"><code> **************\n|              |\n|  Zyad Sabry  |\n|              |\n **************\n</code></pre>\n\n<p>My Code :</p>\n\n<pre><code>scanf(\"%s\",name);\nn = strlen(name);\nprintf(\" \");\n\nfor(i=0;i&lt;n+4;i++)\n    printf(\"*\");\n    printf(\"\\n\");\n    printf(\"|\");\n\n    for(i=0;i&lt;n+4;i++)\n        printf(\" \");\n        printf(\"|\");\n\n    printf(\"\\n\");\n    printf(\"|\");\n\n    for(i=0;i&lt;(n+4)-n-2;i++)\n        printf(\" \");\n        printf(\"%s  |\");\n\n    printf(\"\\n\");\n    printf(\"|\");\n\n    for(i=0;i&lt;n+4;i++)\n        printf(\" \");\n        printf(\"|\");\n\n    printf(\"\\n\");\n    printf(\" \");\n\n    for(i=0;i&lt;n+4;i++)\n        printf(\"*\");\n</code></pre>\n"}, {"tags": ["c", "global-variables", "fuse"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1426109764, "post_id": 28997682, "comment_id": 46243782, "body": "If you have the answer you should mark it answered. Is this enough for you?"}], "tags": [], "owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "is_accepted": false, "score": 0, "last_activity_date": 1426109177, "creation_date": 1426109177, "answer_id": 28997682, "question_id": 28997632, "link": "https://stackoverflow.com/questions/28997632/im-writing-a-fuse-filesystem-how-do-i-pass-extra-data-to-fuse-operations/28997682#28997682", "title": "I&#39;m writing a fuse filesystem. How do I pass extra data to fuse_operations?", "body": "<p><a href=\"http://fuse.sourceforge.net/doxygen/structfuse__context.html\" rel=\"nofollow\">http://fuse.sourceforge.net/doxygen/structfuse__context.html</a></p>\n\n<p>I can get the data with <code>fuse_get_context</code>.  I should be able to fake this function in my tests.</p>\n"}], "owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1426109177, "creation_date": 1426108997, "question_id": 28997632, "link": "https://stackoverflow.com/questions/28997632/im-writing-a-fuse-filesystem-how-do-i-pass-extra-data-to-fuse-operations", "title": "I&#39;m writing a fuse filesystem. How do I pass extra data to fuse_operations?", "body": "<p>I'm writing a fuse filesystem.  </p>\n\n<p>How do I pass extra data to the functions in <code>struct fuse_operations</code>?</p>\n\n<p>In particular, how can I access the <code>void *</code>, that I can set in <code>fuse_main()</code> and similar, from functions in <code>struct fuse_operations</code>?</p>\n\n<p>I'm looking for a method other than global variables, as I am making my fuse operations testable.</p>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1426107954, "post_id": 28997317, "comment_id": 46242801, "body": "This is all a bit murky, but one thing for sure: <code>outfile = open( *output, ...</code> is wrong, and should be <code>outfile = open( output, ...</code>. The first argument to <code>open</code> is a <code>char *</code>, not a <code>char</code>."}, {"owner": {"reputation": 26033, "user_id": 1047662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8aXzf.jpg?s=128&g=1", "display_name": "Cyclonecode", "link": "https://stackoverflow.com/users/1047662/cyclonecode"}, "edited": false, "score": 0, "creation_date": 1426108007, "post_id": 28997317, "comment_id": 46242827, "body": "Set output like this <code>output = &amp;cmd[0];</code> and open takes a char pointer so you should call it like <code>open(output, ...);</code>"}, {"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1426108009, "post_id": 28997317, "comment_id": 46242828, "body": "<code>output = &amp;cmd[0];</code> is the correct way to get a pointer to the buffer."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1426108145, "post_id": 28997317, "comment_id": 46242908, "body": "Do not write <code>output = &amp;cmd[0];</code> when <code>output = cmd;</code> does the same thing with less characters and less confusion."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1426108207, "post_id": 28997317, "comment_id": 46242953, "body": "@n.m. I would argue that it does it with less characters and more confusion, if you don&#39;t already understand array-to-pointer decay."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426108387, "post_id": 28997317, "comment_id": 46243041, "body": "@user3037172 think about what <code>*output</code> means. The <code>*</code> isn&#39;t magic, it has a well-defined meaning.  <code>output</code> is a pointer to <code>char</code>. (<code>char</code> means a single character).  <code>*output</code> means the thing that <code>output</code> is pointing to. Since <code>char *</code> points to a <code>char</code>, <code>*output</code> is a single <code>char</code>.   So you are trying to pass a single <code>char</code> to your functions . You can see this reflected in the compiler &quot;warning&quot;."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1426108707, "post_id": 28997317, "comment_id": 46243217, "body": "@immibis &quot;if you don&#39;t already understand array-to-pointer decay&quot; don&#39;t use C. Or perhaps start writing code like <code>printf(&amp;(&quot;Hello world&quot;[0]))</code>."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426108553, "post_id": 28997442, "comment_id": 46243137, "body": "<code>output</code> is a local variable, and it is an uninitialized pointer. The right resolution is <code>output = cmd;</code> to make the pointer point at the buffer which is already allocated, there is no point in allocating another buffer. Also you use <code>strncpy</code> incorrectly; generally speaking, <code>strncpy</code> is less safe than <code>strcpy</code> and should be avoided."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426108746, "post_id": 28997442, "comment_id": 46243242, "body": "@MattMcNabb could you explain why <code>strncpy</code> is less safe? <a href=\"http://linux.die.net/man/3/strncpy\" rel=\"nofollow noreferrer\">linux.die.net/man/3/strncpy</a> all i see is it&#39;s at least as safe as <code>strcpy</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1426108987, "post_id": 28997442, "comment_id": 46243389, "body": "@HuStmpHrrr neither function behaves properly when the source is longer than the destination buffer, but <code>strncpy</code> may lull unsuspecting coders into a false sense of security -- and certainly does, judging by the number of wrong uses of it that are in the wild.  (Also <code>strncpy</code> does some redundant work when the source is shorter than the buffer)."}, {"owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426110875, "post_id": 28997442, "comment_id": 46244292, "body": "Is there a way to do this without using the string library?"}], "tags": [], "owner": {"reputation": 1, "user_id": 4660413, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d054a8f9a813eed30dd5c10088f7bf1c?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4660413/tobias"}, "is_accepted": false, "score": -2, "last_activity_date": 1426108297, "creation_date": 1426108297, "answer_id": 28997442, "question_id": 28997317, "link": "https://stackoverflow.com/questions/28997317/c-assigning-a-string-rather-than-a-char-to-a-variable-to-be-used-by-open-fun/28997442#28997442", "title": "C - assigning a &#39;string&#39; rather than a char to a variable to be used by open function", "body": "<p>*output is - You guess it - a char (because output is \"ptr to char\")\ncmd is - you didn't guess - a pointer to char (because it's an array)</p>\n\n<p>So your assignment \"*output = cmd\" actually will not do anything reasonable.</p>\n\n<p>Try </p>\n\n<pre><code>strcpy(output, cmd);\n</code></pre>\n\n<p>or, (much better)</p>\n\n<pre><code>strncpy(output, cmd, BUFLEN);\n</code></pre>\n\n<p>(making sure that BUFLEN is equal to the allocated memory at output, and also making sure output is no local variable)</p>\n\n<p>Tobias</p>\n"}], "owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426164848, "creation_date": 1426107790, "last_edit_date": 1426164848, "question_id": 28997317, "link": "https://stackoverflow.com/questions/28997317/c-assigning-a-string-rather-than-a-char-to-a-variable-to-be-used-by-open-fun", "title": "C - assigning a &#39;string&#39; rather than a char to a variable to be used by open function", "body": "<p>I have a variable output formed by:</p>\n\n<pre><code>//main function\nchar *output; //this is how output is defined\n\n//these 3 lines are in some function call\nchar cmd[50]  // this is how cmd is defined\ncmd = \"test.txt\" //cmd is not initialized this way (cmd = \"text.txt\"). \n                 //Rather, there is some function call that passes in the \n                 //&amp;output and does some things, inevitably updating cmd \n                 //by adding one character at a time. In this example it will \n                 //go cmd = \"t\", cmd = \"te\", ... cmd = \"test.txt\",\n                 //cmd = \"test.txt\"\n*output = cmd; //then at the end of the function I try to set the contents of \n               //output to the cmd.\n</code></pre>\n\n<p>then I try to call open like:</p>\n\n<pre><code>int outfile;\noutfile = open( *output, O_WRONLY | O_CREAT, S_IRUSR | S_IWUSR | S_IRGRP );\n</code></pre>\n\n<p>but that does not work. However this works:</p>\n\n<pre><code>int outfile;\noutfile = open( \"test.txt\", O_WRONLY | O_CREAT, S_IRUSR | S_IWUSR | S_IRGRP );\n</code></pre>\n\n<p>When I try and pass in *output I get an error:</p>\n\n<pre><code>warning: incompatible integer to pointer conversion passing 'char' to parameter of type 'const char *'; remove *\n</code></pre>\n\n<p>But when I try just output it does not work properly.I am assuming what is being stored in output is just 't' but I need all of it to make this work. Any ideas? The context of this is I am manually trying to do a redirect. </p>\n"}, {"tags": ["c", "opengl", "compilation", "cross-compiling", "emscripten"], "comments": [{"owner": {"reputation": 1813, "user_id": 1514010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BLtSx.png?s=128&g=1", "display_name": "zakki", "link": "https://stackoverflow.com/users/1514010/zakki"}, "edited": false, "score": 0, "creation_date": 1426134944, "post_id": 28997306, "comment_id": 46251349, "body": "Did you link <code>libRegal.a</code>? (Something like <code>emcc -lRegal foo.c</code>)"}, {"owner": {"reputation": 46, "user_id": 4529855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f7dd2734fe1a4b5c40967ad9475c78?s=128&d=identicon&r=PG", "display_name": "BlastingKap", "link": "https://stackoverflow.com/users/4529855/blastingkap"}, "reply_to_user": {"reputation": 1813, "user_id": 1514010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BLtSx.png?s=128&g=1", "display_name": "zakki", "link": "https://stackoverflow.com/users/1514010/zakki"}, "edited": false, "score": 0, "creation_date": 1426228092, "post_id": 28997306, "comment_id": 46294260, "body": "Yes, I&#39;m linking in libRegal, libRegalGLU and libRegalGLUT (doesn&#39;t seem to matter if I link the last two)."}], "answers": [{"tags": [], "owner": {"reputation": 1126, "user_id": 1213348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e2bd444cac0a23aa591921b4d1a8f1?s=128&d=identicon&r=PG", "display_name": "caiiiycuk", "link": "https://stackoverflow.com/users/1213348/caiiiycuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1485509599, "last_edit_date": 1485509599, "creation_date": 1485432697, "answer_id": 41873189, "question_id": 28997306, "link": "https://stackoverflow.com/questions/28997306/compiling-an-opengl-app-written-in-c-with-emscripten-and-regal-having-compilin/41873189#41873189", "title": "Compiling an OpenGL app written in C with Emscripten and Regal - Having compiling issues with Regal", "body": "<p>To get rid from warnings <code>unresolved symbol: rgl*</code> you should compile Regal with REGAL_NAMESPACE=1. Even more for emscripten you should compile Regal for emscripten. Use this command:</p>\n\n<pre><code>    emmake make -f Makefile SYSTEM=emscripten\n</code></pre>\n\n<p>After that add to linker static libs from <code>lib/emscripten</code> (libRegallib).</p>\n\n<p>P.S. I also trying to use Regal+emscripten, and I successfully build my project. However when I run it I does not see anything.</p>\n\n<p><strong>UPD.</strong> You should call <code>RegalMakeCurrent((RegalSystemContext)1);</code> to associate emscripten gl context with regal gl context. Like this:</p>\n\n<pre><code>    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);\n    glutInitWindowPosition(0, 0);\n    glutInitWindowSize(width, height);\n    glutCreateWindow(\"app\");\n\n    RegalMakeCurrent((RegalSystemContext)1);\n\n    glutDisplayFunc(draw);\n</code></pre>\n"}], "owner": {"reputation": 46, "user_id": 4529855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f7dd2734fe1a4b5c40967ad9475c78?s=128&d=identicon&r=PG", "display_name": "BlastingKap", "link": "https://stackoverflow.com/users/4529855/blastingkap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 701, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485509599, "creation_date": 1426107753, "last_edit_date": 1426393026, "question_id": 28997306, "link": "https://stackoverflow.com/questions/28997306/compiling-an-opengl-app-written-in-c-with-emscripten-and-regal-having-compilin", "title": "Compiling an OpenGL app written in C with Emscripten and Regal - Having compiling issues with Regal", "body": "<p>I've been trying to compile a old game I wrote using OpenGl 2.1 and C. I wanted to try compiling it with Emscripten. So I went ahead and built the tools and SDK from sauce, compiled some test examples and everything checks out.</p>\n\n<p>Long story short, Emscripten doesn't support old/non ES OpenGL too well (understandably) but then I read that Regal can work well as an interpreter.</p>\n\n<p>Here's where I'm stuck, I have no clue how to combine the Regal. When I simply replace the GL, GLU and GLUT header references, I get the same Emscripten compiler warnings, just replaced with what seems to be the Regal equivalents:</p>\n\n<blockquote>\n  <p>warning: unresolved symbol: rglPopMatrix\n  warning: unresolved symbol: rglShadeModel\n  warning: unresolved symbol: glutGameModeString\n  warning: unresolved symbol: rglLightfv\n  warning: unresolved symbol: rglMatrixMode\n  warning: unresolved symbol: glutSolidSphere\n  warning: unresolved symbol: rglLoadIdentity\n  warning: unresolved symbol: rglClear\n  warning: unresolved symbol: glutSolidCube\n  warning: unresolved symbol: rglTranslatef\n  warning: unresolved symbol: rglRotatef\n  warning: unresolved symbol: glutEnterGameMode\n  warning: unresolved symbol: rglMaterialfv\n  warning: unresolved symbol: rglPolygonMode\n  warning: unresolved symbol: rglPushMatrix\n  warning: unresolved symbol: rglGetFloatv\n  warning: unresolved symbol: rglViewport\n  warning: unresolved symbol: rglEnable</p>\n</blockquote>\n\n<p>Am I missing something simple or vital here? Even an explanation as to why this doesn't/shouldn't work would be awesome.</p>\n\n<p>If I manage to get any further with this, will post an update.</p>\n\n<p>P.S. Compiler tools I'm using - OS is Ubuntu 12.04, 32-bit</p>\n\n<p><a href=\"https://github.com/kripken/emscripten\" rel=\"nofollow\">https://github.com/kripken/emscripten</a></p>\n\n<p><a href=\"https://github.com/p3/regal\" rel=\"nofollow\">https://github.com/p3/regal</a></p>\n\n<p>EDIT 2\nI'm fairly sure this is an issue linking with Regal, but I can't seem to find any sort of decent documentation or methods apart from the simple \"Include GL/Regal.H\" and \"Link with libRegal.so\" statements on the github page. When I built the Regal package I used the standard \"make all\" command. Would I need to do anything further than that?</p>\n\n<p>EDIT 1\nWhat my current makefile looks like</p>\n\n<blockquote>\n  <p>INCLUDES = -L/home/BlastingKap/TestLibs/regal-master/lib/linux -lRegal -lRegalGLU -lRegalGLUT -s LEGACY_GL_EMULATION=1 -s GL_UNSAFE_OPTS=0</p>\n  \n  <p>VoxelCannon: VoxelCannon.c graphics.c visible.c graphics.h\n      ./emcc VoxelCannon.c graphics.c visible.c -o VoxCannon.html $(INCLUDES) </p>\n</blockquote>\n"}, {"tags": ["c++", "c", "ruby", "macos", "rvm"], "answers": [{"tags": [], "owner": {"reputation": 3012, "user_id": 300478, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/981e73278c1b9524c1ff07f3089cea48?s=128&d=identicon&r=PG", "display_name": "Khue Vu", "link": "https://stackoverflow.com/users/300478/khue-vu"}, "is_accepted": false, "score": 0, "last_activity_date": 1426111378, "creation_date": 1426111378, "answer_id": 28998249, "question_id": 28997175, "link": "https://stackoverflow.com/questions/28997175/error-when-installing-ruby-with-rvm/28998249#28998249", "title": "Error when installing ruby with rvm", "body": "<p>I fixed it by following this link: <a href=\"https://gist.github.com/zenkay/3237860\" rel=\"nofollow\">https://gist.github.com/zenkay/3237860</a></p>\n\n<blockquote>\n  <p>Mountain Lion supports only XCode 4.4 or greater. Basic 4.4 installer\n  doesn't install Unix's standard command line tools by default. You\n  have to install it using separate package (from Apple Developer's) or\n  directly from XCode 4.4 preference panel (Preferences : Downloads :\n  Components : Install).</p>\n  \n  <p>When installation is complete, tools are finally available but is not\n  enough. Unfortunately llvm_gcc-4.2 compiler ship with XCode is not\n  suitable to compile Ruby (it works but some features are buggy).</p>\n  \n  <p>You have to install the stand-alone gcc package. </p>\n</blockquote>\n\n<p>Basically, i have to install another version of gcc instead of using the one with Xcode. </p>\n"}], "owner": {"reputation": 3012, "user_id": 300478, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/981e73278c1b9524c1ff07f3089cea48?s=128&d=identicon&r=PG", "display_name": "Khue Vu", "link": "https://stackoverflow.com/users/300478/khue-vu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426111378, "creation_date": 1426107321, "last_edit_date": 1592644375, "question_id": 28997175, "link": "https://stackoverflow.com/questions/28997175/error-when-installing-ruby-with-rvm", "title": "Error when installing ruby with rvm", "body": "<p>I am trying to install ruby in MacOS</p>\n<blockquote>\n<p>In file included from :0:0:</p>\n<p>.ext/include/x86_64-darwin14.0.0/ruby/config.h:77:16: error: duplicate</p>\n<p>'unsigned'  #define size_t unsigned int</p>\n<pre><code>            ^ .ext/include/x86_64-darwin14.0.0/ruby/config.h:77:25: error: two or\n</code></pre>\n<p>more data types in declaration specifiers  #define size_t unsigned int</p>\n<pre><code>                     ^ In file included from &lt;command-line&gt;:0:0: ./include/ruby/missing.h:169:19: warning: conflicting types for\n</code></pre>\n<p>built-in function 'memmove' [enabled by default]  RUBY_EXTERN void</p>\n<p>*memmove(void *, const void *, size_t);</p>\n<pre><code>               ^ In file included from ./include/ruby.h:32:0,\n\n             from main.c:13: ./include/ruby/ruby.h:50:22: fatal error: strings.h: No such file or directory  # include &lt;strings.h&gt;\n\n                  ^ compilation terminated.\n</code></pre>\n</blockquote>\n<p>I set env CPP=/usr/bin/cpp</p>\n<p>Thanks for your help.</p>\n"}, {"tags": ["c", "string", "messagepack"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426107422, "post_id": 28997095, "comment_id": 46242486, "body": "First compare the lengths: if they are unequal, the strings must be unequal. If the lengths are equal you can <code>memcmp()</code> the string bodies."}], "answers": [{"comments": [{"owner": {"reputation": 6379, "user_id": 14870, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ad45bada162dcb8b95c3508fb849a7cc?s=128&d=identicon&r=PG&f=1", "display_name": "weiyin", "link": "https://stackoverflow.com/users/14870/weiyin"}, "edited": false, "score": 0, "creation_date": 1426107347, "post_id": 28997128, "comment_id": 46242442, "body": "The problem is that the if I have &quot;abc&quot; (no null termination), and &quot;abcdef&quot; (with null termination), then strncmp with n = 3 will return that they are equal. I could do a strlen on &quot;abcdef&quot; first, but that would introduce an additional pass over &quot;abcdef&quot;."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 2, "creation_date": 1426107637, "post_id": 28997128, "comment_id": 46242609, "body": "You don&#39;t need an extra pass, just check for a null character in the null-terminated string at the known the length if they compare equal with <code>strncmp</code>. You may still get into trouble if the non-terminated string may contain embedded nulls though."}, {"owner": {"reputation": 6379, "user_id": 14870, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ad45bada162dcb8b95c3508fb849a7cc?s=128&d=identicon&r=PG&f=1", "display_name": "weiyin", "link": "https://stackoverflow.com/users/14870/weiyin"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1426107725, "post_id": 28997128, "comment_id": 46242659, "body": "@doynax Very clever! Thanks to you and Christophe."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426108494, "post_id": 28997128, "comment_id": 46243099, "body": "It makes too many passes, and is completely wrong in the presense of embedded NULs. BTW: what is length?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1426108686, "post_id": 28997128, "comment_id": 46243203, "body": "@wildpasser the string he receives is a real string. It&#39;s just not null terminated (certainly the deserialisation library keeps the read data in a buffer and doesn&#39;t change it)."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 2, "last_activity_date": 1426108026, "last_edit_date": 1426108026, "creation_date": 1426107153, "answer_id": 28997128, "question_id": 28997095, "link": "https://stackoverflow.com/questions/28997095/comparing-null-terminated-string-with-a-non-null-terminated-string-in-c/28997128#28997128", "title": "Comparing null-terminated string with a non null-terminated string in C", "body": "<p>The fastest way is <strong><a href=\"http://www.cplusplus.com/reference/cstring/strncmp/\" rel=\"nofollow\"><code>strncmp()</code></a></strong> which limits the length to be compared. </p>\n\n<pre><code> if (strncmp(sa, sb, length)==0)  \n    ...\n</code></pre>\n\n<p>This assumes however that the length you use is the maximum length of the two strings.  If the null terminated string could have a bigger length, you first have to compare the length. </p>\n\n<pre><code> if(strncmp(sa,sb, length)==0 &amp;&amp; strlen(sa)&lt;=length) // sa being the null terminated one\n     ...\n</code></pre>\n\n<p>Note that the strlen() is checked on purpose after the comparison, to avoid unnecessarily iterating through all the characters o fthe null terminated string if the first caracters don't even match.  </p>\n\n<p>A final variant is: </p>\n\n<pre><code> if(strncmp(sa,sb, length)==0 &amp;&amp; sa[length]==0) // sa being the null terminated one\n     ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1426109610, "post_id": 28997324, "comment_id": 46243719, "body": "It&#39;s a nice alternative.  Unfortunately, your usage example returns -1 despite the two strings being equal.  May be you&#39;d change the last statement to <code>return onelen - twolen;</code> .  By the way, your usage scenario requires too many passes as you always have iterate through the null terminated string to get its length... ;-)"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 1, "last_activity_date": 1426110012, "last_edit_date": 1426110012, "creation_date": 1426107813, "answer_id": 28997324, "question_id": 28997095, "link": "https://stackoverflow.com/questions/28997095/comparing-null-terminated-string-with-a-non-null-terminated-string-in-c/28997324#28997324", "title": "Comparing null-terminated string with a non null-terminated string in C", "body": "<pre><code>int compare(char *one, size_t onelen, char *two, size_t twolen)\n{\nint dif;\n\n  dif = memcmp(one, two, onelen &lt; twolen ? onelen : twolen);\n  if (dif) return dif;\n\n  if (onelen == twolen) return 0;\n  return onelen &gt; twolen? 1 : -1;\n}\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>...\nint result;\nchar einz[4] = \"einz\"; // not terminated\nchar *zwei = \"einz\";   // terminated\n\nresult = compare(einz, sizeof einz, zwei, strlen(zwei));\n\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1426112986, "creation_date": 1426112986, "answer_id": 28998610, "question_id": 28997095, "link": "https://stackoverflow.com/questions/28997095/comparing-null-terminated-string-with-a-non-null-terminated-string-in-c/28998610#28998610", "title": "Comparing null-terminated string with a non null-terminated string in C", "body": "<p>Here is one way:</p>\n\n<pre><code>bool is_same_string(char const *s1, char const *s2, size_t s2_len)\n{\n    char const *s2_end = s2 + s2_len;\n    for (;;)\n    {\n        if ( s1[0] == 0 || s2 == s2_end )\n            return s1[0] == 0 &amp;&amp; s2 == s2_end;\n\n        if ( *s1++ != *s2++ )\n            return false;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6379, "user_id": 14870, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ad45bada162dcb8b95c3508fb849a7cc?s=128&d=identicon&r=PG&f=1", "display_name": "weiyin", "link": "https://stackoverflow.com/users/14870/weiyin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2094, "favorite_count": 0, "accepted_answer_id": 28997128, "answer_count": 3, "score": 1, "last_activity_date": 1426112986, "creation_date": 1426107049, "question_id": 28997095, "link": "https://stackoverflow.com/questions/28997095/comparing-null-terminated-string-with-a-non-null-terminated-string-in-c", "title": "Comparing null-terminated string with a non null-terminated string in C", "body": "<p>The deserialization library (messagepack) I am using does not provide null-terminated strings. Instead, I get a pointer to the beginning of the string and a length. What is the fastest way to compare this string to a normal null-terminated string?</p>\n"}, {"tags": ["c++", "c", "namespaces"], "comments": [{"owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 0, "creation_date": 1426106768, "post_id": 28996944, "comment_id": 46242115, "body": "Did you try to use it in a C program? If so, what happened?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 0, "creation_date": 1426107248, "post_id": 28996944, "comment_id": 46242393, "body": "@RyanJ Yes, I tried, it compiles and links well in both C++ and C. I haven&#39;t run it yet."}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1426108187, "post_id": 28997010, "comment_id": 46242935, "body": "An entity with C language linkage shall not be declared with the same name as a variable in global scope, unless both declarations denote the same entity;    ---- Is this a &quot;entity vs variable&quot; statement? I experimented with g++ 4.3.3 and it seems true. Conflict occurs only when I re-declare an global variable like &quot;extern int doSomething=1;&quot; but it&#39;s OK if I define another &quot;extern void doSomething(){}&quot; as long as it&#39;s not another extern C linkage."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 3, "creation_date": 1426119513, "post_id": 28997010, "comment_id": 46247510, "body": "Your final statement in the first paragraph is wrong -- you CAN have another <code>doSomething</code> defined in some other namespace, as long as it is not <code>extern &quot;C&quot;</code>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1426149719, "post_id": 28997010, "comment_id": 46256529, "body": "@ChrisDodd: Ah yes, that&#39;s what I meant. Edited. Thanks!"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 28, "last_activity_date": 1426149706, "last_edit_date": 1426149706, "creation_date": 1426106772, "answer_id": 28997010, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace/28997010#28997010", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<p>Your code works, but you should beware that all functions that have <code>extern \"C\"</code> linkage share the same space of names, but that is not to be confused with the C++ notion of \"namespace\": Your function is really <code>someNameSpace::doSomething</code>, but you cannot have any other <code>extern \"C\"</code> function with unqualified name <code>doSomething</code> in any other namespace.</p>\n\n<p>See 7.5/6:</p>\n\n<blockquote>\n  <p>At most one function with a particular name can have C language linkage. Two declarations for a function\n  with C language linkage with the same function name (ignoring the namespace names that qualify it) that\n  appear in different namespace scopes refer to the same function. Two declarations for a variable with C\n  language linkage with the same name (ignoring the namespace names that qualify it) that appear in different\n  namespace scopes refer to the same variable. An entity with C language linkage shall not be declared with\n  the same name as a variable in global scope, unless both declarations denote the same entity; no diagnostic is\n  required if the declarations appear in different translation units. A variable with C language linkage shall not\n  be declared with the same name as a function with C language linkage (ignoring the namespace names that\n  qualify the respective names); no diagnostic is required if the declarations appear in different translation\n  units. [<em>Note</em>: Only one definition for an entity with a given name with C language linkage may appear in\n  the program (see 3.2); this implies that such an entity must not be defined in more than one namespace\n  scope. \u2014 <em>end note</em>]</p>\n</blockquote>\n\n<p>Your company's or project's global style arbiters should be able to advise you on a suitable naming policy for your code base.</p>\n"}, {"tags": [], "owner": {"reputation": 411, "user_id": 6908891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ye7xV.png?s=128&g=1", "display_name": "Chajnik-U", "link": "https://stackoverflow.com/users/6908891/chajnik-u"}, "is_accepted": false, "score": 12, "last_activity_date": 1510110742, "last_edit_date": 1510110742, "creation_date": 1490419352, "answer_id": 43012858, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace/43012858#43012858", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<p>Just piece of code to illustrate behavior stated in Kerrek SB answer</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nnamespace C{\n    void Hello(){\n        std::cout&lt;&lt;\"Hello\"&lt;&lt;std::endl;\n    }\n    extern \"C\" void HelloThere(){\n        std::cout&lt;&lt;\"Hello There from extern \\\"C\\\"\"&lt;&lt;std::endl;\n    }\n}\n\nextern \"C\" void HelloThere();\n\nint main() {\n    C::Hello();\n    C::HelloThere(); //Compiles\n    //Hello(); &lt;--- does not compile\n    HelloThere(); //Also compiles and prints the same as C::HelloThere() !!!\n\n    return 0;\n}\n</code></pre>\n\n<p>Live at <a href=\"http://ideone.com/X26wfR\" rel=\"noreferrer\">http://ideone.com/X26wfR</a></p>\n"}, {"comments": [{"owner": {"reputation": 3029, "user_id": 1239685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2117ca06179184f05d9c385b1823b?s=128&d=identicon&r=PG", "display_name": "Dominick Pastore", "link": "https://stackoverflow.com/users/1239685/dominick-pastore"}, "edited": false, "score": 0, "creation_date": 1597077058, "post_id": 61094459, "comment_id": 112009379, "body": "Not sure if it was different at the time this answer was posted, but gcc seems to be emitting an error during compilation when I clicked the link (interestingly, at the assembly stage, which is I think the first time I&#39;ve ever seen an error in that stage of compilation)"}, {"owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "reply_to_user": {"reputation": 3029, "user_id": 1239685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2117ca06179184f05d9c385b1823b?s=128&d=identicon&r=PG", "display_name": "Dominick Pastore", "link": "https://stackoverflow.com/users/1239685/dominick-pastore"}, "edited": false, "score": 0, "creation_date": 1597140536, "post_id": 61094459, "comment_id": 112030195, "body": "@DominickPastore you are right - edited the error message is very strange though. I&#39;ve edited the answer."}], "tags": [], "owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1597140461, "last_edit_date": 1597140461, "creation_date": 1586326968, "answer_id": 61094459, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace/61094459#61094459", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<p>In C++ ABI, namespaces have to be mangled. So this:</p>\n<pre><code>namespace foo\n{\n    void bar(int){}\n}\n</code></pre>\n<p>is translated more or less to such symbol:</p>\n<pre><code>foo::bar(int)\n</code></pre>\n<p>When you force the compiler to use C ABI, the similar symbol</p>\n<pre><code>namespace foo\n{\n    extern &quot;C&quot; void bazz(int){}\n}\n</code></pre>\n<p>after compilation looks like following:</p>\n<pre><code>bazz\n</code></pre>\n<p>You can see the difference in the godbolt:\n<a href=\"https://godbolt.org/z/BmVpSQ\" rel=\"nofollow noreferrer\">https://godbolt.org/z/BmVpSQ</a></p>\n<p>In C ABI there are no namespaces or argument list mangled with the function, so you can only have 1 such symbol in the whole code. Defining it twice:</p>\n<pre><code>namespace foo\n{\n    extern &quot;C&quot; void bazz(int){}\n}\n\nnamespace foo2\n{\n    extern &quot;C&quot; void bazz(int){}\n}\n\nint main()\n{\n    foo2::bazz(5);\n    return 0;\n}\n</code></pre>\n<p>...is illegal. <s>Surprisingly to me, gcc doesn't emmit compilation/linking error but runtime error</s> For some reason, gcc compiler emits very strange error:</p>\n<p><a href=\"https://wandbox.org/permlink/BiN0auna9klBg5GE\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/BiN0auna9klBg5GE</a></p>\n<p>The clang compiler emits just emits simple compilation error in such case:</p>\n<p><a href=\"https://wandbox.org/permlink/r5CUXm7OKePtG35L\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/r5CUXm7OKePtG35L</a></p>\n"}], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14463, "favorite_count": 6, "accepted_answer_id": 28997010, "answer_count": 3, "score": 28, "last_activity_date": 1597140461, "creation_date": 1426106539, "last_edit_date": 1426252290, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<pre><code>namespace someNameSpace {\n    extern \"C\" void doSomething()\n        {\n             someOperations();\n        }\n}\n</code></pre>\n\n<p>I want to run <code>doSomething()</code> in both C++ and C environment.</p>\n\n<p>Is <code>someNameSpace</code> still encapsulating <code>doSomething()</code> if I expose it to <code>extern \"C\"</code> linkage?</p>\n\n<p>Is there a good way to share functions between C++ and C while avoiding polluting global namespace on C++ side?</p>\n\n<p><strong>Edit</strong>: Because this code is primarily used in C++ mode, while the C linkage is for test use only, I guess this is a better way to do it.</p>\n\n<pre><code>namespace someNameSpace {\n    #ifdef COMPILE_FOR_C_LINKAGE\n    extern \"C\"\n    #else\n    extern \"C++\"\n    #endif\n    { \n        void doSomething()\n            {\n                 someOperations();\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "network-programming", "packet"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1426107218, "post_id": 28996783, "comment_id": 46242371, "body": "I find no documentation for an address family <code>AF_LINK</code>.  The Linux docs for <code>getifaddrs()</code> do, however, say to expect one address for each interface having family <code>AF_PACKET</code> and carrying low-level details about the interface and its physical layer.  That may not apply if you&#39;re on a different platform."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426107899, "post_id": 28996783, "comment_id": 46242756, "body": "Looking more deeply, it appears that OS X has an address family <code>AF_LINK</code>, perhaps inherited from BSD.  If that&#39;s where you&#39;re working then I don&#39;t know what to tell you, but do not confuse &quot;Mac[intosh]&quot; with the Media Access Control &quot;MAC&quot;."}, {"owner": {"reputation": 31, "user_id": 3002912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a457b2544207ee2164d0ac4e5e41219?s=128&d=identicon&r=PG&f=1", "display_name": "ankushkool", "link": "https://stackoverflow.com/users/3002912/ankushkool"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426183728, "post_id": 28996783, "comment_id": 46278535, "body": "I got confused as there was not other option mentioning Ethernet or Link layer address. But I used AF_PACKET and it seems to work. Thanks!"}], "owner": {"reputation": 31, "user_id": 3002912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a457b2544207ee2164d0ac4e5e41219?s=128&d=identicon&r=PG&f=1", "display_name": "ankushkool", "link": "https://stackoverflow.com/users/3002912/ankushkool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2600, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1426106033, "creation_date": 1426106033, "question_id": 28996783, "link": "https://stackoverflow.com/questions/28996783/af-link-not-defined-in-bits-socket-h-and-sys-socket-h", "title": "AF_LINK not defined in bits/socket.h and sys/socket.h", "body": "<p>I am writing a code to read the MAC address from the interface for listing the interface and it MAC address as I am not able to find the AF_LINK definition in either of the socket.h files.</p>\n\n<p>As per internet resources i should see below:</p>\n\n<pre><code>#define AF_LINK     18      /* Link layer interface */\n</code></pre>\n\n<p>But my bits/socket.h contains:</p>\n\n<pre><code>#define PF_ASH      18  /* Ash.  */\n.\n.\n#define AF_ASH      PF_ASH\n</code></pre>\n\n<p>Should I be using PF_ASH in place of AF_LINK?</p>\n\n<p>Here is the part of my code that uses AF_LINK:</p>\n\n<pre><code>    if ((family == AF_LINK) &amp;&amp; (ifa-&gt;ifa_name[0] == 'e')) {\n\n            //This is for extracting interface number from interface name// \n            char newi[3];\n            int i, j;\n            for (i=0, j=0; i &lt; strlen(ifa-&gt;ifa_name); i++) {\n                if (ifa-&gt;ifa_name[i] &gt;= '0' &amp;&amp; ifa-&gt;ifa_name[i] &lt;= '9') {\n                    newi[j++] = ifa-&gt;ifa_name[i];\n                }\n             }\n             newi[j] = '\\0';\n\n            if_num = atoi(newi);\n\n            printf(\"Interface %d : %d\\n\", k++, if_num);\n    }\n</code></pre>\n\n<p>Full code:</p>\n\n<pre><code>/*\n * ethernetsocket.c\n *\n *  Created on: Feb 25, 2015\n *      Author: tsp3859\n */\n\n#include &lt;arpa/inet.h&gt;\n#include &lt;linux/if_packet.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bits/socket.h&gt;\n#include &lt;net/if.h&gt;\n#include &lt;netinet/ether.h&gt;\n\n#include &lt;ifaddrs.h&gt;\n\n\n#define MY_DEST_MAC0    0xff\n#define MY_DEST_MAC1    0xff\n#define MY_DEST_MAC2    0xff\n#define MY_DEST_MAC3    0xff\n#define MY_DEST_MAC4    0xff\n#define MY_DEST_MAC5    0xff\n\n// Source Ethernet interface\n#define DEFAULT_InterFace   \"eth0\"\n#define DEFAULT_PayLoad     \"1.1.10\"\n\n// Allocating size to different containers\n#define MAX_FRAME_SIZE      1024\n#define MAX_PAYLD_SIZE      1000\n#define HEADER_SIZE         14\n\nint payLoad_Size = -1;\nint frame_Size = -1;\n\nint main(int argc, char *argv[]) {\n    int sockfd;\n    struct ifreq if_idx; // destination ethernet (optional)\n    struct ifreq if_mac; // destination mac address\n\n    int tx_len = 0;      // header counter\n    char ifName[IFNAMSIZ]; // interface name\n\n    uint8_t header[HEADER_SIZE]; // ethernet header\n    char dummy_Payload[MAX_PAYLD_SIZE];\n\n    int if_num; // interface number, used for genarating VID\n\n    /*\n     * Run as one of the following command\n     * 1.   ./a.out\n     * 2    ./a.out eth3\n     * 3.   ./a.out eth4 PayLoad\n     */\n\n    // Get Ethernet interface name from command line (optional)\n    if (argc &gt; 1) {\n\n        if (argc == 2) {\n\n            strcpy(ifName, argv[1]);\n            strcpy(dummy_Payload, DEFAULT_PayLoad);\n        }\n\n        if (argc == 3) {\n\n            strcpy(ifName, argv[1]);\n\n            if (strlen(argv[2]) &gt; 1000) {\n\n                memcpy(dummy_Payload, argv[2], MAX_PAYLD_SIZE);\n            } else\n                strcpy(dummy_Payload, argv[2]);\n        }\n    } else {\n\n        // Default case: All fields are optional\n        if (argc &lt; 2) {\n            strcpy(ifName, DEFAULT_InterFace);\n            strcpy(dummy_Payload, DEFAULT_PayLoad);\n        }\n    }\n\n    //Getting interface number\n    struct ifaddrs *ifaddr, *ifa;\n    int family, s, n;\n           if (getifaddrs(&amp;ifaddr) == -1) {\n               perror(\"getifaddrs\");\n               exit(EXIT_FAILURE);\n           }\n    int k = 1; // Interface SNo.\n    for (ifa = ifaddr, n = 0; ifa != NULL; ifa = ifa-&gt;ifa_next, n++) {\n               if (ifa-&gt;ifa_addr == NULL)\n                   continue;\n\n               family = ifa-&gt;ifa_addr-&gt;sa_family;\n\n\n        if ((family == AF_INET || family == AF_INET6) &amp;&amp; (ifa-&gt;ifa_name[0] == 'e')) {\n\n                char newi[3];\n\n                int i, j;\n                 for (i=0, j=0; i &lt; strlen(ifa-&gt;ifa_name); i++) {\n                    if (ifa-&gt;ifa_name[i] &gt;= '0' &amp;&amp; ifa-&gt;ifa_name[i] &lt;= '9') {\n                        newi[j++] = ifa-&gt;ifa_name[i];\n\n                        }\n                 }\n                 newi[j] = '\\0';\n\n                if_num = atoi(newi);\n                 printf(\"Interface %d : %d\\n\", k++, if_num);\n        }\n    }\n\n\n    // Setting frame size\n    payLoad_Size = strlen(dummy_Payload);\n\n\n    // Setting payload, contains VID\n    char payLoad[payLoad_Size];\n    //memcpy(payLoad,dummy_Payload,payLoad_Size);\n\n    int len=0;\n    payLoad[len++]=1;\n    payLoad[len++]=1;\n    payLoad[len]=10;\n\n    frame_Size = HEADER_SIZE + strlen(payLoad);\n    //printf(\"Payload size is %d\\n \", payLoad_Size);\n    printf(\"Frame size is %d\\n \", frame_Size);\n\n    printf(\"Payload size is %d\\n\\n \", strlen(payLoad));\n    payLoad_Size=strlen(payLoad);\n    // creating frame\n    uint8_t frame[frame_Size];\n\n    struct ether_header *eh = (struct ether_header *) header;\n    struct sockaddr_ll socket_address;\n\n    // Open RAW socket to send on\n    if ((sockfd = socket(AF_PACKET, SOCK_RAW, IPPROTO_RAW)) == -1) {\n        perror(\"Socket Error\");\n    }\n\n    memset(&amp;if_idx, 0, sizeof(struct ifreq));\n    strncpy(if_idx.ifr_name, ifName, IFNAMSIZ - 1);\n    if (ioctl(sockfd, SIOCGIFINDEX, &amp;if_idx) &lt; 0)\n        perror(\"SIOCGIFINDEX - Misprint Compatibility\");\n\n    memset(&amp;if_mac, 0, sizeof(struct ifreq));\n    strncpy(if_mac.ifr_name, ifName, IFNAMSIZ - 1);\n    if (ioctl(sockfd, SIOCGIFHWADDR, &amp;if_mac) &lt; 0)\n        perror(\n                \"SIOCGIFHWADDR - Either interface is not correct or disconnected\");\n\n    // Initializing the Ethernet Header\n    memset(header, 0, HEADER_SIZE);\n\n    // Print-test initial header\n    printf(\"Zeros: %02x:%02x:%02x:%02x:%02x:%02x   %02x:%02x:%02x:%02x:%02x:%02x    %02x:%02x\\n\",\n            header[0], header[1], header[2], header[3], header[4], header[5],\n            header[6], header[7], header[8], header[9], header[10], header[11],\n            header[12], header[13]);\n\n    /*\n     *  Ethernet Header - 14 bytes\n     *\n     *  6 bytes - Source MAC Address\n     *  6 bytes - Destination MAC Address\n     *  2 bytes - EtherType\n     *\n     */\n\n    eh-&gt;ether_shost[0] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[0];\n    eh-&gt;ether_shost[1] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[1];\n    eh-&gt;ether_shost[2] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[2];\n    eh-&gt;ether_shost[3] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[3];\n    eh-&gt;ether_shost[4] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[4];\n    eh-&gt;ether_shost[5] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[5];\n\n    eh-&gt;ether_dhost[0] = MY_DEST_MAC0;\n    eh-&gt;ether_dhost[1] = MY_DEST_MAC1;\n    eh-&gt;ether_dhost[2] = MY_DEST_MAC2;\n    eh-&gt;ether_dhost[3] = MY_DEST_MAC3;\n    eh-&gt;ether_dhost[4] = MY_DEST_MAC4;\n    eh-&gt;ether_dhost[5] = MY_DEST_MAC5;\n\n    eh-&gt;ether_type = htons(0x8010);\n\n    tx_len += sizeof(struct ether_header);\n\n    // Copying header to frame\n    memcpy(frame, header, 14);\n\n    // Copying payLoad to frame\n    //printf(\"Payload: %d\\n\", payLoad[1]);\n    memcpy(frame + 14, payLoad, strlen(payLoad));\n\n    // Printing initial frame\n    printf(\" Frame: %02x:%02x:%02x:%02x:%02x:%02x   %02x:%02x:%02x:%02x:%02x:%02x    %02x:%02x\\n\",\n            frame[0], frame[1], frame[2], frame[3], frame[4], frame[5],\n            frame[6], frame[7], frame[8], frame[9], frame[10], frame[11],\n            frame[12], frame[13]);\n\n    // Printing payLoad\n    printf(\"Payload: %d.%d.%d\\n\", frame[14],frame[15],frame[16]);\n\n    // Index of the network device\n    socket_address.sll_ifindex = if_idx.ifr_ifindex;\n\n    // Address length - 6 bytes\n    socket_address.sll_halen = ETH_ALEN;\n\n    // Destination MAC Address\n    socket_address.sll_addr[0] = MY_DEST_MAC0;\n    socket_address.sll_addr[1] = MY_DEST_MAC1;\n    socket_address.sll_addr[2] = MY_DEST_MAC2;\n    socket_address.sll_addr[3] = MY_DEST_MAC3;\n    socket_address.sll_addr[4] = MY_DEST_MAC4;\n    socket_address.sll_addr[5] = MY_DEST_MAC5;\n\n    // Send packet\n    if (sendto(sockfd, frame, tx_len + strlen(payLoad), 0,\n            (struct sockaddr*) &amp;socket_address, sizeof(struct sockaddr_ll)) &lt; 0)\n        printf(\"Send failed\\n\");\n\nfreeifaddrs(ifaddr);\nexit(EXIT_SUCCESS);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "compilation", "linker", "c99"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1426106188, "post_id": 28996780, "comment_id": 46241773, "body": "Have you tried just <code>gcc --std=c99 -o  c.o b.o a.o c.c</code>?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426106796, "post_id": 28996780, "comment_id": 46242132, "body": "On which operating system, with which version of GCC? Why do you ask? Don&#39;t you simply want to link some executable? Please edit your question to improve it!"}, {"owner": {"reputation": 73, "user_id": 1526431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b53a9f9dbfa6ab8ca29d4c1b76883488?s=128&d=identicon&r=PG", "display_name": "Kasama", "link": "https://stackoverflow.com/users/1526431/kasama"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1426107392, "post_id": 28996780, "comment_id": 46242473, "body": "@ForceBru if I do, it tells me <code>undefined reference to main</code>, because c.o is not the final program, it will later be used together with main.c to create the final executable"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 1526431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b53a9f9dbfa6ab8ca29d4c1b76883488?s=128&d=identicon&r=PG", "display_name": "Kasama", "link": "https://stackoverflow.com/users/1526431/kasama"}, "edited": false, "score": 0, "creation_date": 1426107276, "post_id": 28996871, "comment_id": 46242411, "body": "What I really meant was to agglomerate the objects to use later, like you said, but now ld (the linker) is telling me that <code>ld: cannot find -lgcc_s</code> I couldn&#39;t find any references to -r on gcc man page, what is it really supposed to mean?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 73, "user_id": 1526431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b53a9f9dbfa6ab8ca29d4c1b76883488?s=128&d=identicon&r=PG", "display_name": "Kasama", "link": "https://stackoverflow.com/users/1526431/kasama"}, "edited": false, "score": 0, "creation_date": 1426107339, "post_id": 28996871, "comment_id": 46242439, "body": "<code>-r</code> is a linker option. But if you want to agglomerate objects, make a static library (use <code>ar</code>) or better yet a shared object."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1426109719, "last_edit_date": 1495542501, "creation_date": 1426106312, "answer_id": 28996871, "question_id": 28996780, "link": "https://stackoverflow.com/questions/28996780/how-to-compile-with-a-o-file-that-was-compiled-with-other-o-files-c99/28996871#28996871", "title": "How to compile with a .o file that was compiled with other .o files (C99)", "body": "<p>First, it is <code>-std=c99</code> with a single dash.</p>\n\n<p>I guess you are on Linux.</p>\n\n<p>Then, you always should pass <code>-Wall -Wextra -g</code> (especially since you are a newbie) to <code>gcc</code> : <code>-Wall</code> ask for <em>nearly</em> all warnings, <code>-Wextra</code> for even more warnings, <code>-g</code> ask for debug information.</p>\n\n<p>At last, you want to produce an executable <code>myprog</code> (don't name executables as <code>c.o</code>, this is supposed to be an object file) with</p>\n\n<pre><code>gcc -std=c99 -Wall -Wextra -g -o myprog c.c a.o b.o\n</code></pre>\n\n<p>You need to remove any <code>-c</code> since you want the linking to happen.</p>\n\n<p>If you really mean -but that is very unusual today, better make shared libraries!- to agglomerate several object files into one <code>all.o</code> (to be linked later with other objects) you might try the <a href=\"https://sourceware.org/binutils/docs/ld/Options.html#Options\" rel=\"nofollow noreferrer\"><code>-r</code> linker option</a></p>\n\n<pre><code>gcc -std=c99 -Wall -Wextra -g -r c.c a.o b.o -o all.o\n</code></pre>\n\n<p><sup>But last time I tried it was in the previous century, so details could be wrong.</sup></p>\n\n<p>There are very few reasons to agglomerate objects using the <code>-r</code> linker option. Unless you really know what you are doing, you are very probably wrong (in trying <code>-r</code>).</p>\n\n<p>Perhaps you want to make a <a href=\"https://en.wikipedia.org/wiki/Library_%28computing%29\" rel=\"nofollow noreferrer\">software library</a>. These days it is much better to make a shared library. A shared library (technically an <a href=\"http://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">ELF</a> shared object)  should contain <a href=\"https://en.wikipedia.org/wiki/Position-independent_code\" rel=\"nofollow noreferrer\">position independent code</a>. So, assuming you have three translation units <code>t1.c</code>, <code>t2.c</code>, <code>t3.c</code> you first compile them as PIC :</p>\n\n<pre><code> gcc -std=c99 -Wall -Wextra -g -fPIC t1.c -c -o t1.pic.o\n gcc -std=c99 -Wall -Wextra -g -fPIC t2.c -c -o t2.pic.o\n gcc -std=c99 -Wall -Wextra -g -fPIC t3.c -c -o t3.pic.o\n</code></pre>\n\n<p>then you link all these PIC object files into a shared library <code>libmyt.so</code></p>\n\n<pre><code> gcc -std=c99 -Wall -Wextra -g -shared \\\n    t1.pic.o t2.pic.o t3.pic.o \\\n    -o libmyt.so\n</code></pre>\n\n<p>Later you'll use this shared library e.g. as</p>\n\n<pre><code> gcc -std=c99 -Wall -Wextra -g main.o -o myprog -Wl,-rpath . libmyt.so\n</code></pre>\n\n<p>or as</p>\n\n<pre><code> gcc -std=c99 -Wall -Wextra -g main.o -o myprog -Wl,-rpath . -L. -lmyt\n</code></pre>\n\n<p><sup>You might consider static linking with <code>ar</code> to make a static library <code>libmyt.a</code> but I don't recommend that.</sup></p>\n\n<hr>\n\n<p>Of course, you'll debug your program using <code>gdb ./myprog</code> and you could try running it with <code>./myprog</code>. To use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>, try <code>valgrind ./myprog</code></p>\n\n<p>If you have several translation units, better learn how to use <a href=\"http://www.gnu.org/software/make/\" rel=\"nofollow noreferrer\">GNU make</a>. Read the <a href=\"http://tldp.org/HOWTO/Program-Library-HOWTO/\" rel=\"nofollow noreferrer\">Program Library HowTo</a> and <a href=\"https://stackoverflow.com/a/26689798/841108\">this</a> and <a href=\"https://stackoverflow.com/a/7937638/841108\">these hints</a>.</p>\n"}], "owner": {"reputation": 73, "user_id": 1526431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b53a9f9dbfa6ab8ca29d4c1b76883488?s=128&d=identicon&r=PG", "display_name": "Kasama", "link": "https://stackoverflow.com/users/1526431/kasama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2330, "favorite_count": 1, "accepted_answer_id": 28996871, "answer_count": 1, "score": 0, "last_activity_date": 1426109719, "creation_date": 1426106012, "last_edit_date": 1426107485, "question_id": 28996780, "link": "https://stackoverflow.com/questions/28996780/how-to-compile-with-a-o-file-that-was-compiled-with-other-o-files-c99", "title": "How to compile with a .o file that was compiled with other .o files (C99)", "body": "<p>consider <code>c.c</code> a code that includes <code>a.h</code> and <code>b.h</code>, and <code>main.c</code> a code that includes <code>c.h</code>\ni tried to compile it like so</p>\n\n<pre><code>gcc --std=c99 -o a.o -c a.c\ngcc --std=c99 -o b.o -c b.c\ngcc --std=c99 -o c.o -c c.c a.o b.o\n</code></pre>\n\n<p>but when I run the last one, gcc yells at me</p>\n\n<pre><code>gcc --std=c99 -o c.o -c c.c a.o b.o\ngcc: warning: a.o: linker input file unused because linking not done\ngcc: warning: b.o: linker input file unused because linking not done\n</code></pre>\n\n<p>and then when I try to compile the main.c file using <code>gcc -o main main.c c.o</code> it says that there are a lot of undefined references, which is predictable once the <code>c</code> file was not correctly compiled.</p>\n\n<p>I've seen some similar questions here at stackoverflow, but I couldn't get it to work neither way.</p>\n\n<p>I'm on Arch Linux running gcc v4.9.2-3</p>\n"}, {"tags": ["c++", "c", "pointers", "winapi", "function-pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426106396, "post_id": 28996696, "comment_id": 46241912, "body": "Calling convention could eventually give you grief. The actual function expectations how you&#39;re calling it are an obvious assumption. And &quot;... with passed arguments.&quot;, noting the <i>plurality</i> of that statement, is interesting. You&#39;re passing <i>one</i>. If you need more than that (i.e. you&#39;re expecting this to magically send <code>argv[3]...argv[argc-1]</code> as function arguments), this won&#39;t do it, and doing it right gets complicated quickly."}, {"owner": {"reputation": 11030, "user_id": 656346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCIys.png?s=128&g=1", "display_name": "seva titov", "link": "https://stackoverflow.com/users/656346/seva-titov"}, "edited": false, "score": 0, "creation_date": 1426106487, "post_id": 28996696, "comment_id": 46241959, "body": "It is not clear what you mean by <code>if I could pass a void-pointer-list to the function-pointer</code>. If the function you are calling is defined as <b>... MyFunction(void *)</b>, then yes, you can call it like this, otherwise you would not be able to. Also, make sure it is labeled as <code>declspec(stdcall)</code>."}, {"owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "edited": false, "score": 0, "creation_date": 1426106770, "post_id": 28996696, "comment_id": 46242118, "body": "I just looked for a way to get a command-line tool to call e.g. kernel32.dll and any of its function and pass arguments to it. I was hoping - as WhozCraig said - for a magic way to find the argument list from an imported function"}, {"owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426107255, "post_id": 28996696, "comment_id": 46242398, "body": "@WhozCraig thanks for your comment. &quot;you&#39;re expecting this to magically send argv[3]...argv[argc-1] as function arguments), this won&#39;t do it&quot; is exactly what I was looking for (or at least a workaround for this)."}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 4, "last_activity_date": 1498584420, "last_edit_date": 1498584420, "creation_date": 1426120557, "answer_id": 28999985, "question_id": 28996696, "link": "https://stackoverflow.com/questions/28996696/c-pass-arguments-as-void-pointer-list-to-imported-function-from-loadlibrary/28999985#28999985", "title": "C Pass arguments as void-pointer-list to imported function from LoadLibrary()", "body": "<p>You need to cast the function pointer returned by <code>LoadLibrary</code> to one with the right argument types before calling it.  One way to manage it is to have a number call-adaptor functions that do the right thing for every possible function type you might want to call:</p>\n\n<pre><code>void Call_II(void (*fn_)(), char **args) {\n    void (*fn)(int, int) = (void (*)(int, int))fn_;\n    fn(atoi(args[0]), atoi(args[1]));\n}\nvoid Call_IS(void (*fn_)(), char **args) {\n    void (*fn)(int, char *) = (void (*)(int, char *))fn_;\n    fn(atoi(args[0]), args[1]);\n}\n...various more functions\n</code></pre>\n\n<p>Then you take the pointer you got from <code>GetProcAddress</code> and the additional arguments and pass them to the correct <code>Call_X</code> function:</p>\n\n<pre><code>void* (*generic_function)();\n\ndll = LoadLibraryA(argv[1]);\n\n//argv[2] = \"DoStuff\"\ngeneric_function = GetProcAddress(dll, argv[2]);\n\n//argv[3] = 4, argv[4] = 7, argv[5] = NULL\n\nCall_II(generic_function, &amp;argv[3]);\n</code></pre>\n\n<p>The problem is that you need to know what the type of the function you're getting the pointer for is and call the appropriate adaptor function.  Which generally means making a table of function name/adaptors and doing a lookup in it.</p>\n\n<p>The related problem is that there's no function analogous to <code>GetProcAddress</code> that will tell you the argument types for a function in the library -- that information simply isn't stored anywhere accessable in the dll.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "edited": false, "score": 0, "creation_date": 1501012379, "post_id": 44781829, "comment_id": 77587138, "body": "Very interesting approach! I didn&#39;t think of interfacing the calling/argument-list-passing procedure. I will definitiely look further into this. Thanks for your sophisticated and well detailed explanation/answer. Good job!"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521094554, "post_id": 44781829, "comment_id": 85587811, "body": "This assumes a calling convention where a large object like <code>struct { ... } sarglistlist;</code> is passed by value by copying the whole thing to the stack, right?  (So it&#39;s in the same place the function is expecting regular integer / pointer / FP args in a stack-args calling convention that doesn&#39;t use any register args). As well as using register args, the Windows x86-64 calling convention passes large object by reference, so this doesn&#39;t work even for args 5...infinity in that convention. (See <a href=\"https://stackoverflow.com/questions/49283616/how-to-set-function-arguments\" title=\"how to set function arguments\">stackoverflow.com/questions/49283616/&hellip;</a> for this question in 64-bit)"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521117888, "post_id": 44781829, "comment_id": 85601283, "body": "@PeterCordes I don&#39;t understand your comment, too much in too little space. Reading linked to post and <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow noreferrer\">Overview of x64 Calling Conventions</a> it appears that the 64 bit ABI using the <code>__fastcall</code> specifier by default <a href=\"https://msdn.microsoft.com/en-us/library/984x0h58.aspx\" rel=\"nofollow noreferrer\">Argument Passing and Naming Conventions</a> and <a href=\"https://software.intel.com/en-us/node/682402\" rel=\"nofollow noreferrer\">software.intel.com/en-us/node/682402</a> so the x64 argument passing uses registers and not the stack. Wondering about <code>va_arg</code> implementation I found this <a href=\"https://groups.google.com/forum/#!topic/gnu.gcc/PC6xIUSZlr4\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/gnu.gcc/PC6xIUSZlr4</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521118036, "post_id": 44781829, "comment_id": 85601372, "body": "My point was that some stack-args calling conventions could decide to pass <code>xx2.arglist</code> by hidden reference, so this answer depends not only on a pure stack-args calling convention, but on pass-by-value of large aggregates working by copying the whole thing onto the stack.  And that&#39;s why / how it <i>does</i> work for 32-bit Windows, in case anyone was wondering."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521118510, "post_id": 44781829, "comment_id": 85601689, "body": "@PeterCordes I have added a note to the post about x64 ABI. thank you for bringing this to my attention."}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 2, "last_activity_date": 1521120161, "last_edit_date": 1521120161, "creation_date": 1498570825, "answer_id": 44781829, "question_id": 28996696, "link": "https://stackoverflow.com/questions/28996696/c-pass-arguments-as-void-pointer-list-to-imported-function-from-loadlibrary/44781829#44781829", "title": "C Pass arguments as void-pointer-list to imported function from LoadLibrary()", "body": "<p>A library DLL contains the object code for the functions that are part of the library along with some additional information to allow the DLL to be usable.</p>\n\n<p>However a library DLL does not contain the actual type information needed to determine the specific argument list and types for the functions contained in the library DLL. The main information in a library DLL is: (1) a list of the functions that the DLL exports along with the address information that will connect a call of a function to the actual function binary code and (2) a list of any required DLLs that the functions in the library DLL use.</p>\n\n<p>You can actually open a library DLL in a text editor, I suggest a small one, and scan through the arcane symbols of the binary code until you reach the section that contains the list of functions in the library DLL as well as other required DLLs.</p>\n\n<p>So a library DLL contains the bare minimum information needed to (1) find a particular function in the library DLL so that it can be invoked and (2) a list of other needed DLLs that the functions in the library DLL depend on.</p>\n\n<p>This is different from a COM object which normally does have type information in order to support the ability to do what is basically reflection and explore the COM object's services and how those services are accessed. You can do this with Visual Studio and other IDEs which generate a list of COM objects installed and allow you to load a COM object and explore it. Visual Studio also has a tool that will generate the source code files that provide the stubs and include file for accessing the services and methods of a COM object.</p>\n\n<p>However a library DLL is different from a COM object and all the additional information provided with a COM object is not available from a library DLL. Instead a library DLL package is normally made up of (1) the library DLL itself, (2) a .lib file that contains the linkage information for the library DLL along with the stubs and functionality to satisfy the linker when building your application which uses the library DLL, and (3) an include file with the function prototypes of the functions in the library DLL.</p>\n\n<p>So you create your application by calling the functions which reside in the library DLL but using the type information from the include file and linking with the stubs of the associated .lib file. This procedure allows Visual Studio to automate much of the work required to use a library DLL.</p>\n\n<p>Or you can hand code the <code>LoadLibrary()</code> and the building of a table of the functions in the library DLL using <code>GetProcAddress()</code>. By doing hand coding all you really need are the function prototypes of the functions in the library DLL which you then can type in yourself and the library DLL itself. You are in effect doing the work by hand that the Visual Studio compiler does for you if you are using the .lib library stubs and include file.</p>\n\n<p>If you know the actual function name and the function prototype of a function in a library DLL then what you could do is to have your command line utility require the following information:</p>\n\n<ul>\n<li>the name of the function to be called as a text string on the command\nline</li>\n<li>the list of the arguments to be used as a series of text strings on the command line</li>\n<li>an additional parameter that describes the function prototype</li>\n</ul>\n\n<p>This is similar to how functions in the C and C++ runtime which accept variable argument lists with unknown parameter types work. For instance the <code>printf()</code> function which prints a list of argument values has a format string followed by the arguments to be printed. The <code>printf()</code> function uses the format string to determine the types of the various arguments, how many arguments to expect, and what kinds of value transformations to do.</p>\n\n<p>So if your utility had a command line something like the following:</p>\n\n<pre><code>dofunc \"%s,%d,%s\" func1 \"name of \" 3 \" things\"\n</code></pre>\n\n<p>And the library DLL had a function whose prototype looked like:</p>\n\n<pre><code>void func1 (char *s1, int i, int j);\n</code></pre>\n\n<p>then the utility would dynamically generate the function call by transforming the character strings of the command line into the actual types needed for the function to be called.</p>\n\n<p>This would work for simple functions that take Plain Old Data types however more complicated types such as <code>struct</code> type argument would require more work as you would need some kind of a description of the <code>struct</code> along with some kind of argument description perhaps similar to JSON.</p>\n\n<p><strong>Appendix I: A simple example</strong></p>\n\n<p>The following is the source code for a Visual Studio Windows console application that I ran in the debugger. The command arguments in the Properties was <code>pif.dll PifLogAbort</code> which caused a library DLL from another project, pif.dll, to be loaded and then the function <code>PifLogAbort()</code> in that library to be invoked.</p>\n\n<p><strong>NOTE:</strong> <em>The following example depends on a stack based argument passing convention as is used with most x86 32 bit compilers. Most compilers also allow for a calling convention to be specified other than stack based argument passing such as the <code>__fastcall</code> modifier of Visual Studio. Also as pointed out in the comments, the default for x64 and 64 bit Visual Studio is to use the <code>__fastcall</code> convention by default so that function arguments are passed in registers and not on the stack. See <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow noreferrer\">Overview of x64 Calling Conventions</a> in the Microsoft MSDN. See as well the comments and discussion in <a href=\"https://stackoverflow.com/questions/12371450/how-are-variable-arguments-implemented-in-gcc\">How are variable arguments implemented in gcc?\n</a>.</em></p>\n\n<p>Notice how the argument list to the function <code>PifLogAbort()</code> is built as a structure that contains an array. The argument values are put into the array of a variable of the <code>struct</code> and then the function is called passing the entire <code>struct</code> by value. What this does is to push a copy of the array of parameters onto the stack and then calls the function. The <code>PifLogAbort()</code> function sees the stack based on its argument list and processes the array elements as individual arguments or parameters.</p>\n\n<pre><code>// dllfunctest.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n\ntypedef struct {\n    UCHAR *myList[4];\n} sarglist;\n\ntypedef void ((*libfunc) (sarglist q));\n/*\n *  do a load library to a DLL and then execute a function in it.\n *\n * dll name.dll \"funcname\"\n*/\nint _tmain(int argc, _TCHAR* argv[])\n{\n    HMODULE  dll = LoadLibrary(argv[1]);\n    if (dll == NULL) return 1;\n\n    // convert the command line argument for the function name, argv[2] from\n    // a TCHAR to a standard CHAR string which is what GetProcAddress() requires.\n    char  funcname[256] = {0};\n    for (int i = 0; i &lt; 255 &amp;&amp; argv[2][i]; i++) {\n        funcname[i] = argv[2][i];\n    }\n\n    libfunc  generic_function = (libfunc) GetProcAddress(dll, funcname);\n    if (generic_function == NULL) return 2;\n\n    // build the argument list for the function and then call the function.\n    // function prototype for PifLogAbort() function exported from the library DLL\n    // is as follows:\n    // VOID PIFENTRY PifLogAbort(UCHAR *lpCondition, UCHAR *lpFilename, UCHAR *lpFunctionname, ULONG ulLineNo);\n    sarglist xx = {{(UCHAR *)\"xx1\", (UCHAR *)\"xx2\", (UCHAR *)\"xx3\", (UCHAR *)1245}};\n\n    generic_function(xx);\n\n    return 0;\n}\n</code></pre>\n\n<p>This simple example illustrates some of the technical hurdles that must be overcome. You will need to know how to translate the various parameter types into the proper alignment in a memory area which is then pushed onto the stack.</p>\n\n<p>The interface to this example function is remarkably homogeneous in that most of the arguments are <code>unsigned char</code> pointers with the exception of the last which is an <code>int</code>. With a 32 bit executable all four of these variable types have the same length in bytes. With a more varied list of types in the argument list you will need to have an understanding as to how your compiler aligns parameters when it is pushing the arguments onto the stack before doing the call.</p>\n\n<p><strong>Appendix II: Extending the simple example</strong></p>\n\n<p>Another possibility is to have a set of helper functions along with a different version of the <code>struct</code>. The <code>struct</code> provides a memory area to create a copy of the necessary stack and the help functions are used to build the copy.</p>\n\n<p>So the <code>struct</code> and its helper functions may look like the following.</p>\n\n<pre><code>typedef struct {\n    UCHAR myList[128];\n} sarglist2;\n\ntypedef struct {\n    int   i;\n    sarglist2 arglist;\n} sarglistlist;\n\ntypedef void ((*libfunc2) (sarglist2 q));\n\nvoid pushInt (sarglistlist *p, int iVal)\n{\n    *(int *)(p-&gt;arglist.myList + p-&gt;i) = iVal;\n    p-&gt;i += sizeof(int);\n}\n\nvoid pushChar (sarglistlist *p, unsigned char cVal)\n{\n    *(unsigned char *)(p-&gt;arglist.myList + p-&gt;i) = cVal;\n    p-&gt;i += sizeof(unsigned char);\n}\n\nvoid pushVoidPtr (sarglistlist *p, void * pVal)\n{\n    *(void * *)(p-&gt;arglist.myList + p-&gt;i) = pVal;\n    p-&gt;i += sizeof(void *);\n}\n</code></pre>\n\n<p>And then the <code>struct</code> and helper functions would be used to build the argument list like the following after which the function from the library DLL is invoked with the copy of the stack provided:</p>\n\n<pre><code>sarglistlist xx2 = {0};\npushVoidPtr (&amp;xx2, \"xx1\");\npushVoidPtr (&amp;xx2, \"xx2\");\npushVoidPtr (&amp;xx2, \"xx3\");\npushInt (&amp;xx2, 12345);\n\nlibfunc2  generic_function2 = (libfunc2) GetProcAddress(dll, funcname);\ngeneric_function2(xx2.arglist);\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2062, "favorite_count": 0, "accepted_answer_id": 28999985, "answer_count": 2, "score": 6, "last_activity_date": 1521120161, "creation_date": 1426105738, "last_edit_date": 1498568271, "question_id": 28996696, "link": "https://stackoverflow.com/questions/28996696/c-pass-arguments-as-void-pointer-list-to-imported-function-from-loadlibrary", "title": "C Pass arguments as void-pointer-list to imported function from LoadLibrary()", "body": "<p>The problem I have is that I want to create a generic command line application that can be used to load a library DLL and then call a function in the library DLL. The function name is specified on the command line with the arguments also provided on the utility command line.</p>\n\n<p>I can access the external function from a DLL dynamically loaded using the <code>LoadLibrary()</code> function. Once the library is loaded I can obtain a pointer to the function using <code>GetProcAddress()</code> I want to call the function with the arguments specified on the command line.</p>\n\n<p>Can I pass a void-pointer-list to the function-pointer which I got returned by the <code>LoadLibrary()</code> function similar to the example below?</p>\n\n<p>To keep the example code simple, I deleted the error-checking. Is there a way to get something like this working:</p>\n\n<pre>\n    //Somewhere in another dll\n    int DoStuff(int a, int b)\n    {\n        return a + b;\n    }\n</pre>\n\n<pre>\n    int main(int argc, char **argv)\n    {\n        void *retval;\n        void *list = argv[3];\n        HMODULE dll;\n        void* (*generic_function)(void*);\n\n        dll = LoadLibraryA(argv[1]);\n\n        //argv[2] = \"DoStuff\"\n        generic_function = GetProcAddress(dll, argv[2]);\n\n        //argv[3] = 4, argv[4] = 7, argv[5] = NULL\n        retval = generic_function(list);\n    }\n</pre>\n\n<p>If I forgot to mention necessary information, please let me know.\nThanks in advance</p>\n"}, {"tags": ["c", "multithreading", "caching", "profiling", "perf"], "comments": [{"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 1, "creation_date": 1426244053, "post_id": 28996579, "comment_id": 46301877, "body": "is it x86_64 architecture?"}, {"owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 0, "creation_date": 1426318341, "post_id": 28996579, "comment_id": 46331858, "body": "<code>perf list</code> always list all events defined in kernel. There set of predefined events is always not fully implemented: either older kernel can&#39;t map some events to your hardware; or your hardware have no such performance counters; or you have no access to events??? (try with sudo or from root user). You can check other events listed in <code>perf list</code> or update your kernel if it is old (the LL counters were implemented in 2011: <a href=\"https://lkml.org/lkml/2011/5/9/80\" rel=\"nofollow noreferrer\">lkml.org/lkml/2011/5/9/80</a>)"}, {"owner": {"reputation": 1058, "user_id": 1986467, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1cee75c3bb50bfd3ed6202d1bd600dd9?s=128&d=identicon&r=PG", "display_name": "a3mlord", "link": "https://stackoverflow.com/users/1986467/a3mlord"}, "reply_to_user": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 0, "creation_date": 1426364660, "post_id": 28996579, "comment_id": 46345089, "body": "@osgx Yes, these are listed in <code>perf list</code> and the kernel is newer than 2011."}, {"owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 0, "creation_date": 1426370373, "post_id": 28996579, "comment_id": 46346794, "body": "a3mlord, you can try andikleen/pmu-tools from github - <a href=\"https://github.com/andikleen/pmu-tools\" rel=\"nofollow noreferrer\">github.com/andikleen/pmu-tools</a> - it has better support of Intel hardware performance monitors with <code>ocperf</code> then predefined events from <code>perf list</code>. You can also try <code>toplev.py</code> from pmu-tools to find counters to check; or read Intel manuals to get right counter names"}, {"owner": {"reputation": 2724, "user_id": 1352098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9579c142d896defafbdd033a5670915?s=128&d=identicon&r=PG", "display_name": "Ivan Mamontov", "link": "https://stackoverflow.com/users/1352098/ivan-mamontov"}, "edited": false, "score": 0, "creation_date": 1426697649, "post_id": 28996579, "comment_id": 46481983, "body": "Please provide kernel version <code>uname -a</code>"}, {"owner": {"reputation": 1058, "user_id": 1986467, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1cee75c3bb50bfd3ed6202d1bd600dd9?s=128&d=identicon&r=PG", "display_name": "a3mlord", "link": "https://stackoverflow.com/users/1986467/a3mlord"}, "reply_to_user": {"reputation": 2724, "user_id": 1352098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9579c142d896defafbdd033a5670915?s=128&d=identicon&r=PG", "display_name": "Ivan Mamontov", "link": "https://stackoverflow.com/users/1352098/ivan-mamontov"}, "edited": false, "score": 0, "creation_date": 1426699143, "post_id": 28996579, "comment_id": 46482944, "body": "@Ivan Linux 3.0.0-32-generic #51-Ubuntu SMP Thu Mar 21 15:50:59 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux"}], "owner": {"reputation": 1058, "user_id": 1986467, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1cee75c3bb50bfd3ed6202d1bd600dd9?s=128&d=identicon&r=PG", "display_name": "a3mlord", "link": "https://stackoverflow.com/users/1986467/a3mlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426120574, "creation_date": 1426105327, "last_edit_date": 1426120574, "question_id": 28996579, "link": "https://stackoverflow.com/questions/28996579/perf-fails-at-showing-llc-loads", "title": "Perf fails at showing LLC-loads", "body": "<p>Although I have <code>LLC-loads</code>and <code>LLC-load-misses</code> listed in <code>perf list</code>, if I run:</p>\n\n<p><code>perf stat --repeat 2 -e cycles:u -e instructions:u -e LLC-loads -e LLC-load-misses binary arguments</code></p>\n\n<p>on my Linux machine, I get 0 for both <code>LLC-loads</code>and <code>LLC-load-misses</code>. I also tried <code>perf record</code> + <code>perf report</code>. Does anybody know why? The CPU is E5-2670 Sandy Bridge. </p>\n"}, {"tags": ["c", "integer", "unsigned", "localtime"], "comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1426105868, "post_id": 28996548, "comment_id": 46241600, "body": "Where exactly do you get that <i>raw</i> time value from? Because from the simple integer value there is no way to determine the interpretation of that value without additional information."}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1426106398, "post_id": 28996548, "comment_id": 46241913, "body": "I run the code as it is (including time.h). In later use the value will be read from file and it must be uint32_t"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1426107256, "post_id": 28996548, "comment_id": 46242400, "body": "<a href=\"https://ideone.com/X3I1F5\" rel=\"nofollow noreferrer\">ideone.com/X3I1F5</a> no problem at all. try to check if there is a bug in your libc or cc."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 1, "creation_date": 1426107465, "post_id": 28996548, "comment_id": 46242512, "body": "try <code>uint32_t rawtime=3675431915ul;</code>"}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "reply_to_user": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1426107799, "post_id": 28996548, "comment_id": 46242706, "body": "@Degustaf still the same problem. BTW: I have timeinfo NULL pointer ..."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1426108169, "post_id": 28996548, "comment_id": 46242926, "body": "@user1141649 Okay.  Sounds like <code>localtime</code> fails. try adding <code>time_t rawtime_t = (time_t) rawtime;</code> followed by <code>timeinfo = localtime(&amp;rawtime_t);</code>  See if <code>rawtime_t</code> is what you expect."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1426108404, "post_id": 28996548, "comment_id": 46243052, "body": "You can also check <code>errno</code> if <code>timeinfo</code> is NULL.  That will give you an error number (that can be translated to an error message) to help diagnose the problem."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1426108970, "post_id": 28996548, "comment_id": 46243378, "body": "Are you sure 3675431915 is the correct value? Assuming the typical <code>time_t</code> representation as the number of seconds since 1970-01-01 00:00:00 UTC, that would be Thu 2086-06-20 17:18:35 UTC."}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "reply_to_user": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 1, "creation_date": 1426110591, "post_id": 28996548, "comment_id": 46244143, "body": "@Degustaf I did as you say: rawtime_t is -619535381 and timeinfo is still null. I call <code>strerror(errno)</code> just after localtime and it is No error. The number in HEX is <code>0xEBA3 12DB</code> . Maybe the date is encoded in some special way. I will reread documentation: There is \t EF 82 DF E2 at offset 0x08 Low = 3806298863 and \t  E8 C7 C6 01 at offset 0x0C High = 29804520 =&gt; February 27, 2007 I think I must to convert the numbers using some special method. I didn&#39;t be aware of it before."}], "answers": [{"comments": [{"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "edited": false, "score": 0, "creation_date": 1426106797, "post_id": 28996803, "comment_id": 46242134, "body": "I added header stdint.h (and all lines checked as you have it). It still crashes on the line with asctime ... The warning is still present: this decimal constant is unsigned only in ISO C90"}], "tags": [], "owner": {"reputation": 723, "user_id": 2423216, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/bwCkf.png?s=128&g=1", "display_name": "Alvaro Denis Acosta", "link": "https://stackoverflow.com/users/2423216/alvaro-denis-acosta"}, "is_accepted": false, "score": -1, "last_activity_date": 1426106077, "creation_date": 1426106077, "answer_id": 28996803, "question_id": 28996548, "link": "https://stackoverflow.com/questions/28996548/how-print-unsigned-integer-time-in-human-readable-form/28996803#28996803", "title": "how print unsigned integer time in human readable form?", "body": "<p>Try this code.</p>\n\n<pre><code>/* localtime example */\n#include &lt;stdio.h&gt;      /* puts, printf */\n#include &lt;time.h&gt;       /* time_t, struct tm, time, localtime */\n#include &lt;stdint.h&gt;  /* This header is part of the type support library, providing fixed width integer types. */\n\nint main() {\n    uint32_t rawtime=3675431915;\n    struct tm * timeinfo;\n    timeinfo = localtime ((const time_t *) &amp;rawtime);\n    asctime(timeinfo);\n    printf (\"Time and date: %s\", asctime(timeinfo));\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426112872, "post_id": 28997545, "comment_id": 46245108, "body": "1) C does not specify that <code>uint32_t</code> and <code>time_t</code> are the same size as you said.  They could even differ per FP and integers. 2) Suggest <code>struct tm  timeinfo; timeinfo = *localtime (&amp;t); ...  asctime(&amp;timeinfo);</code> as the value returned from <code>localtime()</code> points to a static place that other time functions may overwrite. This would apply if my <code>...</code> included other time functions."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426144653, "post_id": 28997545, "comment_id": 46254379, "body": "Where did I imply that <code>uint32_t</code> and <code>time_t</code> are the same size?"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426159806, "post_id": 28997545, "comment_id": 46262381, "body": "Additional comment: If you want thread safety and similar, use <code>localtime_r()</code>. That&#39;s what it&#39;s for ..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426166693, "post_id": 28997545, "comment_id": 46266943, "body": "<code>localtime()</code> is part of the standard library.  <code>localtime_r()</code> is not  (C99,C11) and so may not exist."}], "tags": [], "owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "is_accepted": false, "score": 2, "last_activity_date": 1426108697, "creation_date": 1426108697, "answer_id": 28997545, "question_id": 28996548, "link": "https://stackoverflow.com/questions/28996548/how-print-unsigned-integer-time-in-human-readable-form/28997545#28997545", "title": "how print unsigned integer time in human readable form?", "body": "<p>Simply said as is, since <code>sizeof(time_t)</code> is not defined (it is usually either <code>4</code> or <code>8</code>), there is no portable way to convert a <code>uint32_t</code> into a <code>time_t</code>.</p>\n\n<p>One reason --for example-- is that on a 32-bit machine <code>time_t</code> cannot even hold the timestamp you are providing in your example.</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint\nmain(int argc, char *argv[]) {\n    uint32_t rawtime = 3675431915u;\n\n    struct tm * timeinfo;\n    time_t t = rawtime;\n    // note absence of indirect convert via pointer\n    // I have no idea, why you wanted to do this, anyway\n    timeinfo = localtime (&amp;t);\n    asctime(timeinfo);\n    printf (\"Time and date: %s\", asctime(timeinfo));\n    return 0;\n}\n</code></pre>\n\n<p>will yield <code>Time and date: Thu Jun 20 19:18:35 2086</code> on machine with 64-bit <code>time_t</code>, but yield <code>Time and date: Mon May 15 11:50:19 1950</code> on a 32-bit machine. This is because of the range overflow, when converting <code>rawtime</code> into the signed integer that is <code>time_t</code>.</p>\n\n<p>Conversion only works under the assumption that <code>time_t</code> is a signed integer on all target platforms (no guarantees). And even in this case, you should guard against overflowing values.</p>\n"}], "owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1426108697, "creation_date": 1426105240, "last_edit_date": 1426106663, "question_id": 28996548, "link": "https://stackoverflow.com/questions/28996548/how-print-unsigned-integer-time-in-human-readable-form", "title": "how print unsigned integer time in human readable form?", "body": "<p>I have a rawtime unsigned integer and I try to print it in some human readable form</p>\n\n<pre><code>uint32_t rawtime=3675431915;\nstruct tm * timeinfo;\ntimeinfo = localtime ((const time_t *) &amp;rawtime);\nasctime(timeinfo);\nprintf (\"Time and date: %s\", asctime(timeinfo));\n</code></pre>\n\n<p>it crashes when I call asctime(timeinfo). Can anybody show me how to do it properly? The problem is I didn't see any example how to do this with unsigned integer or integer. This <a href=\"http://www.cplusplus.com/reference/ctime/localtime/\" rel=\"nofollow\">http://www.cplusplus.com/reference/ctime/localtime/</a> shows example only with time_t but from the example it's not clear how to use uint32_t .</p>\n\n<p>Note: there is also warning: this decimal constant (3675431915) is unsigned only in ISO C90 </p>\n"}, {"tags": ["c", "fopen", "fread", "fseek", "uint16"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1426105169, "post_id": 28996439, "comment_id": 46241190, "body": "You&#39;re reading from a binary file with mode <code>&quot;r&quot;</code> and not <code>&quot;rb&quot;</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1426105357, "post_id": 28996439, "comment_id": 46241304, "body": "Mode <code>&quot;r&quot;</code> is synonymous with mode <code>&quot;rb&quot;</code> on most platforms other than Windows.  Nevertheless, it&#39;s good form to specify <code>&quot;rb&quot;</code> when the data are not known or assumed to be text.  It doesn&#39;t sound like that&#39;s related to your problem, though."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1426105632, "post_id": 28996439, "comment_id": 46241457, "body": "sizeof(int) ? your defines default to int so if your sizeof(in) is 16 you may want to change them values to long int using suffix L"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426105650, "post_id": 28996439, "comment_id": 46241468, "body": "You declare <code>DET</code> and <code>PROJ</code> as type <code>int</code>, but use edit descriptor <code>%u</code> (for <code>unsigned int</code>) to scan them.  Probably this does not explain your issue either, but it&#39;s nevertheless an error."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426105831, "post_id": 28996439, "comment_id": 46241572, "body": "You do not test the return value of <code>fread()</code> to verify that the full read request was satisfied."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1426105875, "post_id": 28996439, "comment_id": 46241603, "body": "The call to <code>fseek</code> doesn&#39;t do anything since the value of <code>sample</code> is <code>0</code> in the call to the function."}, {"owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "edited": false, "score": 0, "creation_date": 1426106114, "post_id": 28996439, "comment_id": 46241733, "body": "Using &quot;rb&quot; instead of &quot;r&quot; solved the issue, thanks! I totaly missed that part on the fopen reference page."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1426112469, "post_id": 28996439, "comment_id": 46244978, "body": "@John Bollinger: the line <code>char filename[]=&quot;C:\\\\Path\\\\MyFile.fxc&quot;;</code> was a big hint that the platform be MS/DOS or Windows.  Incidentally, one can use forward slashes in these platforms in place of backslashes.  Dominic should try <code>char filename[]=&quot;C:&#47;Path&#47;MyFile.fxc&quot;;</code> just for fun and education."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426115829, "post_id": 28996439, "comment_id": 46246255, "body": "<code>N_DET </code> is defined to be 432 <code>N_PROJ</code> is 500 so the maths leads to 432*500 = 216000 elements, thus your array can hold 216000 uint16_t values now if the index of the array is  <code>mess[DET+N_DET*PROJ] &gt; 248835</code> you are certainly out of range of your allocated array which would lead to undefined behaviour and cause some mess. Please increase the array size"}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426116264, "post_id": 28996439, "comment_id": 46246450, "body": "you also need error handling in <code>fopen</code> <code>fseek</code> and check the return for <code>fread</code> plus optionally you can close the opend file discriptor by <code>close(fd)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "edited": false, "score": 0, "creation_date": 1426244794, "post_id": 28999418, "comment_id": 46302330, "body": "That is correct, of course. I did not do the math correctly when writing the question. I accidently calculated <code>[DET+N_PROJ*PROJ]</code> when getting the last possible index for posting here. As allready mentioned, changing fopen mode to &#39;rb&#39; did solve the issue. I do some error checking with the return values, I just shortened the code to post here. Thanks, anyways!"}], "tags": [], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "is_accepted": false, "score": 1, "last_activity_date": 1426116959, "creation_date": 1426116959, "answer_id": 28999418, "question_id": 28996439, "link": "https://stackoverflow.com/questions/28996439/c-fread-does-not-read-the-full-block/28999418#28999418", "title": "C: fread does not read the full block", "body": "<p>you need allocate a larger array to get to index value greater than 248835\ncurrently you have the following defines</p>\n\n<pre><code>#define N_DET 432\n#define N_PROJ 500\n</code></pre>\n\n<p>which leads to the array size of <code>432*500 = 216000</code></p>\n\n<p>now if your indexing the array at value <b>248835</b> <code>248835 &gt; 216000</code> you would cause to access the memory out of the allocated memory for the array which would lead to <b>undefined behavior</b>. What you need is a bigger size array which can accommodate more than 248835 entries. a simple <code>#define N_DET 500</code> would do that, but you have to make sure that is the requirement. A basic index check would be helpful to avoid having a out of range problem something on the lines of </p>\n\n<pre><code>#define MAX_RANGE 500*500\nif((DET+N_DET*PROJ) &lt; MAX_RANGE)\n    curr=mess[DET+N_DET*PROJ]; //get the data\nelse\n   //error handling\n</code></pre>\n\n<p>you also need error handling in <code>fopen</code> <code>fseek</code> and check the return for <code>fread</code> plus optionally you can close the opened file discriptor by <code>close(fd)</code></p>\n"}], "owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426116959, "creation_date": 1426104865, "question_id": 28996439, "link": "https://stackoverflow.com/questions/28996439/c-fread-does-not-read-the-full-block", "title": "C: fread does not read the full block", "body": "<p>Here's my code so far: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n#define N_DET 432\n#define N_PROJ 500\n\nint readSinogram(uint16_t mess[],char filename[], int sample){\n    //init\n    FILE *fp;\n    int i;\n    //open file\n    fp=fopen(filename,\"r\");\n    //read sinogram\n    fseek(fp,sizeof(uint16_t)*N_DET*N_PROJ*sample*2,SEEK_SET); //move pointer\n    fread(mess,sizeof(uint16_t),N_DET*N_PROJ,fp); //read sinogram\n    return 0;\n};\n\n\nint main()\n{\n    uint16_t mess[N_DET*N_PROJ];\n    char filename[]=\"C:\\\\Path\\\\MyFile.fxc\";\n    double curr;\n    int i,DET,PROJ;\n\n    readSinogram(mess,filename,0); //read the data\n\n    printf(\"\\nDET?\"); //ask for input\n    scanf(\"%u\", &amp;DET);\n    printf(\"\\nPROJ?\");\n    scanf(\"%u\", &amp;PROJ);\n\n    curr=mess[DET+N_DET*PROJ]; //get the data\n    printf(\"Data: %f\",curr); //print the data\n\n    return 0;\n}\n</code></pre>\n\n<p>This reads in the .fxc file, which is just a binary file containing uint16_t formatted numbers. \"readSinogram\" reads one data set which contains N_DET*N_PROJ numbers. (The pointer is moved by twice the block size, because there are alternating blocks of two measurements in the file.)\nAfter reading it, one can put in a DET and PROJ and have a look at the data at this point.</p>\n\n<p>So far, everything works fine. The data is correct for a certain data range but when asking for too big DET and/or PROJ the data is incorrect.\nI do have the same file read in in Matlab and can confirm that the data in it is fine.</p>\n\n<p>To be more exact: every index above [DET+N_DET*PROJ] > 248835 will return 52428 instead of the correct value (ranging from 0 to 4088). The values up to those work fine. So there's got to be something wrong with the \"mess\" array above that index, I guess.</p>\n\n<p>What am I doing wrong? Thanks in advance!</p>\n"}, {"tags": ["c", "opengl", "nvidia", "framebuffer", "quake"], "comments": [{"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "edited": false, "score": 0, "creation_date": 1426108456, "post_id": 28996424, "comment_id": 46243078, "body": "Might it have something to do with using GL_FRAMEBUFFER_EXT calls instead of the non-EXT version, which has been around for quite a while now? I remember i had a problem with that once - not related to vsync, but showing that there might be a difference between EXT and non-EXT... other than that, no idea."}, {"owner": {"reputation": 51, "user_id": 4014896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7U19o.png?s=128&g=1", "display_name": "ouned", "link": "https://stackoverflow.com/users/4014896/ouned"}, "reply_to_user": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "edited": false, "score": 0, "creation_date": 1426169106, "post_id": 28996424, "comment_id": 46268781, "body": "I will try it, but the reason why I choosed the extension was that it has slightly wider support. framebuffers are in the core since 3.0 and e.g. vmware only seems to support 2.1 (in which I&#39;m testing)"}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1426199439, "post_id": 28996424, "comment_id": 46286267, "body": "@ouned: The ARB extension and EXT extension are almost identical, all of the constants (e.g. <code>GL_COLOR_ATTACHMENT0</code>) are the same in both extensions. The only major difference comes down to a few extra validation rules in the EXT extension that were removed from the ARB extension / core GL3. Realistically, I think anything that supports the EXT extension will support the ARB extension so long as the end-user has updated their drivers."}], "owner": {"reputation": 51, "user_id": 4014896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7U19o.png?s=128&g=1", "display_name": "ouned", "link": "https://stackoverflow.com/users/4014896/ouned"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426107688, "creation_date": 1426104807, "last_edit_date": 1426107688, "question_id": 28996424, "link": "https://stackoverflow.com/questions/28996424/nvidia-opengl-framebuffer-object-forces-vsync-on", "title": "nvidia opengl framebuffer object forces vsync on", "body": "<p>Basically I implemented gamma correction into a q3 based game to get rid of the annoying <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/dd372194%28v=vs.85%29.aspx\" rel=\"nofollow\">SetDeviceGammaRamp</a>.</p>\n\n<p>I'm using GL_EXT_framebuffer_object for a post process vertex shader.\nIt works pretty fine except that it has some weird behavior on nvidia gpus:\nIt forces vsync to be enabled except when it is explicitly disabled in the control panel. <strong>If I use the standard control panel's settings and the framebuffer is enabled vsync is forced, but if I remove the framebuffer it goes back to normal behavior.</strong></p>\n\n<ul>\n<li>wglSwapIntervalEXT does nothing</li>\n<li>I tested it on an nvidia mobile GPU, someone could reproduce it on a desktop GPU</li>\n<li>I also tested an integrated intel gpu and two different amd gpu's and all of them didn't have the issue.</li>\n</ul>\n\n<p>initialization: (unrelevant i guess)</p>\n\n<pre><code>// ouned: gamma correction\nconst char *g_GammaVertexShaderARB = {\n    \"void main(void)\" \"\\n\"\n    \"{\" \"\\n\"\n        \"gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;\" \"\\n\"\n        \"gl_TexCoord[0] = gl_MultiTexCoord0;\"  \"\\n\"\n    \"}\"\n};\n\nconst char *g_GammaFragmentShaderARB = {\n    \"uniform sampler2D sceneBuffer;\" \"\\n\"\n    \"uniform float gamma;\" \"\\n\"\n    \"\\n\"\n    \"void main(void)\" \"\\n\"\n    \"{\" \"\\n\"\n        \"vec2 uv = gl_TexCoord[0].xy;\" \"\\n\"\n        \"vec3 color = texture2D(sceneBuffer, uv).rgb;\" \"\\n\"\n        \"if (uv.x&lt;0.50)\" \"\\n\"\n            \"gl_FragColor.rgb = pow(color, vec3(1.0 / 1.5));\" \"\\n\"\n        \"else\" \"\\n\"\n            \"gl_FragColor.rgb = color;\" \"\\n\"\n        \"gl_FragColor.a = 1.0;\" \"\\n\"\n    \"}\"\n};\n\n    tr.m_hVShader = qglCreateShaderObjectARB(GL_VERTEX_SHADER_ARB);\n    qglShaderSourceARB(tr.m_hVShader, 1, (const GLcharARB **)&amp;g_GammaVertexShaderARB, NULL);\n    qglCompileShaderARB(tr.m_hVShader);\n\n    if (qglGetError() != GL_NO_ERROR) {\n        ri.Printf(PRINT_ERROR, \"Failed compiling gamma vertrex shader\\n\");\n    }\n\n    tr.m_hFShader = qglCreateShaderObjectARB(GL_FRAGMENT_SHADER_ARB);\n    qglShaderSourceARB(tr.m_hFShader, 1, (const GLcharARB **)&amp;g_GammaFragmentShaderARB, NULL);\n\n\n    qglCompileShaderARB(tr.m_hFShader);\n\n    if (qglGetError() != GL_NO_ERROR) {\n        ri.Printf(PRINT_ERROR, \"Failed compiling gamma fragment shader\\n\");\n    }\n\n    tr.gammaProgram = qglCreateProgramObjectARB();\n    qglAttachObjectARB(tr.gammaProgram, tr.m_hVShader);\n    qglAttachObjectARB(tr.gammaProgram, tr.m_hFShader);\n    qglLinkProgramARB(tr.gammaProgram);\n\n    if (qglGetError() != GL_NO_ERROR) {\n        ri.Printf(PRINT_ERROR, \"Failed linking shaders\\n\");\n    }\n\n    qglUseProgramObjectARB(tr.gammaProgram);\n\n    tr.gammaUniformLoc = qglGetUniformLocationARB(tr.gammaProgram, \"gamma\");\n    tr.gammaSceneBufferLoc = qglGetUniformLocationARB(tr.gammaProgram, \"sceneBuffer\");\n\n    qglValidateProgramARB(tr.gammaProgram);\n    qglUseProgramObjectARB(0);\n\n    // framebuffer object\n    tr.gammaFramebuffer = 0;\n    qglGenFramebuffersEXT(1, &amp;tr.gammaFramebuffer);\n    qglBindFramebufferEXT(GL_FRAMEBUFFER_EXT, tr.gammaFramebuffer);\n\n    // depth buffer\n    tr.gammaRenderDepthBuffer = 0;\n    qglGenRenderbuffersEXT(1, &amp;tr.gammaRenderDepthBuffer);\n    qglBindRenderbufferEXT(GL_RENDERBUFFER_EXT, tr.gammaRenderDepthBuffer);\n    qglRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, glConfig.vidWidth, glConfig.vidHeight);\n\n    tr.gammaRenderTarget = 0;\n    qglGenTextures(1, &amp;tr.gammaRenderTarget);\n    qglBindTexture(GL_TEXTURE_2D, tr.gammaRenderTarget);\n    qglTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, glConfig.vidWidth, glConfig.vidHeight, 0, GL_RGB, GL_UNSIGNED_BYTE, 0);\n    qglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    qglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    qglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    qglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    qglGenerateMipmapEXT(GL_TEXTURE_2D);\n\n    qglBindTexture(GL_TEXTURE_2D, 0);\n    qglFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, tr.gammaRenderTarget, 0);\n    qglFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, tr.gammaRenderDepthBuffer);\n\n    qglBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);\n</code></pre>\n\n<p>On the beginning of a frame:</p>\n\n<pre><code>    qglBindFramebufferEXT(GL_FRAMEBUFFER_EXT, tr.gammaFramebuffer);\n    qglBindRenderbufferEXT(GL_RENDERBUFFER_EXT, tr.gammaRenderDepthBuffer);\n    qglDrawBuffer(GL_COLOR_ATTACHMENT0_EXT);\n</code></pre>\n\n<p>on the end of a frame:</p>\n\n<pre><code>    qglBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);\n    qglBindRenderbufferEXT(GL_RENDERBUFFER_EXT, 0);\n\n    if (!backEnd.projection2D) {\n        qglViewport(0, 0, glConfig.vidWidth, glConfig.vidHeight);\n        qglScissor(0, 0, glConfig.vidWidth, glConfig.vidHeight);\n        qglMatrixMode(GL_PROJECTION);\n        qglLoadIdentity();\n        qglOrtho(0, glConfig.vidWidth, glConfig.vidHeight, 0, 0, 1);\n        qglMatrixMode(GL_MODELVIEW);\n        qglLoadIdentity();\n\n        GL_State(GLS_DEPTHTEST_DISABLE);\n    }\n\n    qglUseProgramObjectARB(tr.gammaProgram);\n    qglEnable(GL_TEXTURE_2D);\n\n    qglUniform1iARB(tr.gammaSceneBufferLoc, 0);\n\n    qglColor3f(tr.identityLight, tr.identityLight, tr.identityLight);\n    qglActiveTextureARB(GL_TEXTURE0);\n    qglBindTexture(GL_TEXTURE_2D, tr.gammaRenderTarget);\n\n    qglBegin(GL_QUADS);\n    qglTexCoord2f(0, 1);\n    qglVertex2f(0, 0);\n    qglTexCoord2f(1, 1);\n    qglVertex2f(glConfig.vidWidth, 0);\n    qglTexCoord2f(1, 0);\n    qglVertex2f(glConfig.vidWidth, glConfig.vidHeight);\n    qglTexCoord2f(0, 0);\n    qglVertex2f(0, glConfig.vidHeight);\n    qglEnd();\n\n    qglUseProgramObjectARB(0);\n</code></pre>\n\n<p>So, what else can cause vsync to be enabled?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1426104297, "post_id": 28996252, "comment_id": 46240713, "body": "um\u2026 a <code>union</code> is not a <code>struct</code>\u2026 the members share the same memory. if you assign to one, that will \u2013 at least partially \u2013 overwrite the other one."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426104775, "post_id": 28996252, "comment_id": 46240966, "body": "I get <code>data.f : 11111.103516</code>, which can be explained. Your value of <code>11111.0005</code> has no logical explanation, other than the code exhibits <b>undefined behavior</b>."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1426105059, "post_id": 28996252, "comment_id": 46241117, "body": "What behavior are you expecting? This seems precisely what you would expect if the two values overlap in memory."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1426106756, "last_edit_date": 1426106756, "creation_date": 1426105291, "answer_id": 28996566, "question_id": 28996252, "link": "https://stackoverflow.com/questions/28996252/unions-in-c-memory-storage-pattern-of-unions/28996566#28996566", "title": "unions in c (memory storage pattern of unions )", "body": "<p>The <code>union</code> overlays a <code>float</code> type and a <code>char</code> type in the same memory. But the <code>char</code> type is only one byte as opposed to the <code>float</code> which needs 4 bytes.</p>\n\n<p>Although a simple <code>char</code> type might - on 32-bit platforms - need as much memory reserved as a simple <code>float</code> type, in the <code>union</code> only one byte of the <code>char</code> field is written to.</p>\n\n<p>So when you write to it, it corrupts only one byte of the <code>float</code> type. That is why you can still <code>printf()</code> the <code>char</code>, and why the <code>float</code> way of seeing it has been corrupted.</p>\n\n<p>I have added another member to the <code>union</code>, a byte array, so we can see what is happening. Notice that writing <code>'j'</code> (hex value 0x6A) to <code>str</code> only affects the first byte of the <code>union</code>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nunion Data\n{\n    float f;\n    char str;\n    unsigned char bytes[4];\n};\n\nint main(void)\n{\n    union Data data;\n    int i;\n\n    data.f = 11111;        // write to float\n    // show the union as bytes\n    printf(\"bytes:\");\n    for (i=0; i&lt;4; i++)\n        printf(\" %02X\", data.bytes[i]);\n    printf(\"\\n\");\n\n    data.str='j';          // write to char\n    // show the union as bytes\n    printf(\"bytes:\");\n    for (i=0; i&lt;4; i++)\n        printf(\" %02X\", data.bytes[i]);\n    printf(\"\\n\");\n\n    printf( \"data.f : %f\\n\", data.f);\n    printf( \"data.str : %c\\n\", data.str);\n\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>bytes: 00 9C 2D 46\nbytes: 6A 9C 2D 46\ndata.f : 11111.103516\ndata.str : j\n</code></pre>\n\n<p>If, as in your question, you reverse the assignments, is it now obvious why <code>str='j'</code> no longer exists? It is because the <code>float</code> requires <em>all</em> of the <code>union</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4125168, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000507225955/picture?type=large", "display_name": "Debpratim Ghosh", "link": "https://stackoverflow.com/users/4125168/debpratim-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1426106756, "creation_date": 1426104175, "question_id": 28996252, "link": "https://stackoverflow.com/questions/28996252/unions-in-c-memory-storage-pattern-of-unions", "title": "unions in c (memory storage pattern of unions )", "body": "<pre><code>   #include&lt;stdio.h&gt;\n   #include&lt;string.h&gt;\n\n   union Data\n   {\n     float f;\n     char  str;\n   };\n\n   main( )\n  {\n    union Data data;\n\n    data.f = 11111;\n    data.str='j';\n\n    printf( \"data.f : %f\\n\", data.f);\n    printf( \"data.str : %c\\n\", data.str);\n\n    return 0;\n  }\n</code></pre>\n\n<p>in this case i am able to access both the value at the same time \noutput is 11111.0005,j</p>\n\n<p>but if i reverse the assignments i.e   data.str='j';<br>\n                            and then    data.f = 11111;</p>\n\n<p>then the value of str is not accessible   why?\ufeff</p>\n"}, {"tags": ["c", "compilation", "cygwin", "aes"], "comments": [{"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1426104995, "post_id": 28995900, "comment_id": 46241084, "body": "Have you tried installing openssl-dev in cygwin?"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4658142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3ZmcP.jpg?s=128&g=1", "display_name": "CoolDude", "link": "https://stackoverflow.com/users/4658142/cooldude"}, "edited": false, "score": 0, "creation_date": 1466881514, "post_id": 37845058, "comment_id": 63504175, "body": "Thanks for answering the question, in the end i decided not to use the source code that you made available instead i decided to implement it in AutoIT.  None the less i do appreciate you making your source code available to the public. It is a good tool for beginners to get their head arount AES"}], "tags": [], "owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "is_accepted": true, "score": 7, "last_activity_date": 1509844775, "last_edit_date": 1509844775, "creation_date": 1466022120, "answer_id": 37845058, "question_id": 28995900, "link": "https://stackoverflow.com/questions/28995900/how-to-implement-aes-encryption-in-c/37845058#37845058", "title": "How to implement AES encryption in C?", "body": "<p>I know this is a bit of a late answer. If you're still wondering, you just need to copy aes.h from the library you got the aes.c-code from. You then save it in the same folder as you saved the aes.c-file in.</p>\n\n<p>(Shameless plug, I'm the author) It looks like you got it from this library, <a href=\"https://github.com/kokke/tiny-AES-C\" rel=\"noreferrer\">https://github.com/kokke/tiny-AES-C</a> ?</p>\n\n<p>You can download the complete source including a test suite that tests the code against NIST-defined test-vectors, i.e. a golden set of inputs/outputs to compare.</p>\n"}], "owner": {"reputation": 83, "user_id": 4658142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3ZmcP.jpg?s=128&g=1", "display_name": "CoolDude", "link": "https://stackoverflow.com/users/4658142/cooldude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25384, "favorite_count": 0, "accepted_answer_id": 37845058, "answer_count": 1, "score": 2, "last_activity_date": 1541626652, "creation_date": 1426102911, "last_edit_date": 1426105269, "question_id": 28995900, "link": "https://stackoverflow.com/questions/28995900/how-to-implement-aes-encryption-in-c", "title": "How to implement AES encryption in C?", "body": "<p>I'm so confused right now. I have an AES encryption in mind and i copy and paste it in notepad++ and save it as a .c file. Then I goto cygwin and try running it and it says \"include aes.h\" not found. I have searched the internet for this everywhere and it gives me no answers apart from something on SSL.</p>\n\n<p>BTW the code I am trying to compile is pasted below</p>\n\n<pre><code>/*\nThis is an implementation of the AES128 algorithm, specifically ECB and CBC mode.\n\nThe implementation is verified against the test vectors in:\n  National Institute of Standards and Technology Special Publication 800-38A 2001 ED\n\nECB-AES128\n----------\n\n  plain-text:\n    6bc1bee22e409f96e93d7e117393172a\n    ae2d8a571e03ac9c9eb76fac45af8e51\n    30c81c46a35ce411e5fbc1191a0a52ef\n    f69f2445df4f9b17ad2b417be66c3710\n\n  key:\n    2b7e151628aed2a6abf7158809cf4f3c\n\n  resulting cipher\n    3ad77bb40d7a3660a89ecaf32466ef97 \n    f5d3d58503b9699de785895a96fdbaaf \n    43b1cd7f598ece23881b00e3ed030688 \n    7b0c785e27e8ad3f8223207104725dd4 \n\n\nNOTE:   String length must be evenly divisible by 16byte (str_len % 16 == 0)\n        You should pad the end of the string with zeros if this is not the case.\n\n*/\n\n\n\n\n/*****************************************************************************/\n/* Includes:                                                                 */\n/*****************************************************************************/\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt; // CBC mode, for memset\n#include \"aes.h\"\n\n\n\n\n/*****************************************************************************/\n/* Defines:                                                                  */\n/*****************************************************************************/\n// The number of columns comprising a state in AES. This is a constant in AES. Value=4\n#define Nb 4\n// The number of 32 bit words in a key.\n#define Nk 4\n// Key length in bytes [128 bit]\n#define KEYLEN 16\n// The number of rounds in AES Cipher.\n#define Nr 10\n\n\n// jcallan@github points out that declaring Multiply as a function \n// reduces code size considerably with the Keil ARM compiler.\n// See this link for more information: https://github.com/kokke/tiny-AES128-C/pull/3\n#ifndef MULTIPLY_AS_A_FUNCTION\n  #define MULTIPLY_AS_A_FUNCTION 0\n#endif\n\n\n\n\n/*****************************************************************************/\n/* Private variables:                                                        */\n/*****************************************************************************/\n// state - array holding the intermediate results during decryption.\ntypedef uint8_t state_t[4][4];\nstatic state_t* state;\n\n\n// The array that stores the round keys.\nstatic uint8_t RoundKey[176];\n\n\n// The Key input to the AES Program\nstatic const uint8_t* Key;\n\n\n#if defined(CBC) &amp;&amp; CBC\n  // Initial Vector used only for CBC mode\n  static uint8_t* Iv;\n#endif\n\n\n// The lookup-tables are marked const so they can be placed in read-only storage instead of RAM\n// The numbers below can be computed dynamically trading ROM for RAM - \n// This can be useful in (embedded) bootloader applications, where ROM is often limited.\nstatic const uint8_t sbox[256] =   {\n  //0     1    2      3     4    5     6     7      8    9     A      B    C     D     E     F\n  0x63, 0x7c, 0x77, 0x7b, 0xf2, 0x6b, 0x6f, 0xc5, 0x30, 0x01, 0x67, 0x2b, 0xfe, 0xd7, 0xab, 0x76,\n  0xca, 0x82, 0xc9, 0x7d, 0xfa, 0x59, 0x47, 0xf0, 0xad, 0xd4, 0xa2, 0xaf, 0x9c, 0xa4, 0x72, 0xc0,\n  0xb7, 0xfd, 0x93, 0x26, 0x36, 0x3f, 0xf7, 0xcc, 0x34, 0xa5, 0xe5, 0xf1, 0x71, 0xd8, 0x31, 0x15,\n  0x04, 0xc7, 0x23, 0xc3, 0x18, 0x96, 0x05, 0x9a, 0x07, 0x12, 0x80, 0xe2, 0xeb, 0x27, 0xb2, 0x75,\n  0x09, 0x83, 0x2c, 0x1a, 0x1b, 0x6e, 0x5a, 0xa0, 0x52, 0x3b, 0xd6, 0xb3, 0x29, 0xe3, 0x2f, 0x84,\n  0x53, 0xd1, 0x00, 0xed, 0x20, 0xfc, 0xb1, 0x5b, 0x6a, 0xcb, 0xbe, 0x39, 0x4a, 0x4c, 0x58, 0xcf,\n  0xd0, 0xef, 0xaa, 0xfb, 0x43, 0x4d, 0x33, 0x85, 0x45, 0xf9, 0x02, 0x7f, 0x50, 0x3c, 0x9f, 0xa8,\n  0x51, 0xa3, 0x40, 0x8f, 0x92, 0x9d, 0x38, 0xf5, 0xbc, 0xb6, 0xda, 0x21, 0x10, 0xff, 0xf3, 0xd2,\n  0xcd, 0x0c, 0x13, 0xec, 0x5f, 0x97, 0x44, 0x17, 0xc4, 0xa7, 0x7e, 0x3d, 0x64, 0x5d, 0x19, 0x73,\n  0x60, 0x81, 0x4f, 0xdc, 0x22, 0x2a, 0x90, 0x88, 0x46, 0xee, 0xb8, 0x14, 0xde, 0x5e, 0x0b, 0xdb,\n  0xe0, 0x32, 0x3a, 0x0a, 0x49, 0x06, 0x24, 0x5c, 0xc2, 0xd3, 0xac, 0x62, 0x91, 0x95, 0xe4, 0x79,\n  0xe7, 0xc8, 0x37, 0x6d, 0x8d, 0xd5, 0x4e, 0xa9, 0x6c, 0x56, 0xf4, 0xea, 0x65, 0x7a, 0xae, 0x08,\n  0xba, 0x78, 0x25, 0x2e, 0x1c, 0xa6, 0xb4, 0xc6, 0xe8, 0xdd, 0x74, 0x1f, 0x4b, 0xbd, 0x8b, 0x8a,\n  0x70, 0x3e, 0xb5, 0x66, 0x48, 0x03, 0xf6, 0x0e, 0x61, 0x35, 0x57, 0xb9, 0x86, 0xc1, 0x1d, 0x9e,\n  0xe1, 0xf8, 0x98, 0x11, 0x69, 0xd9, 0x8e, 0x94, 0x9b, 0x1e, 0x87, 0xe9, 0xce, 0x55, 0x28, 0xdf,\n  0x8c, 0xa1, 0x89, 0x0d, 0xbf, 0xe6, 0x42, 0x68, 0x41, 0x99, 0x2d, 0x0f, 0xb0, 0x54, 0xbb, 0x16 };\n\n\nstatic const uint8_t rsbox[256] =\n{ 0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81, 0xf3, 0xd7, 0xfb,\n  0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e, 0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb,\n  0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23, 0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e,\n  0x08, 0x2e, 0xa1, 0x66, 0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25,\n  0x72, 0xf8, 0xf6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xd4, 0xa4, 0x5c, 0xcc, 0x5d, 0x65, 0xb6, 0x92,\n  0x6c, 0x70, 0x48, 0x50, 0xfd, 0xed, 0xb9, 0xda, 0x5e, 0x15, 0x46, 0x57, 0xa7, 0x8d, 0x9d, 0x84,\n  0x90, 0xd8, 0xab, 0x00, 0x8c, 0xbc, 0xd3, 0x0a, 0xf7, 0xe4, 0x58, 0x05, 0xb8, 0xb3, 0x45, 0x06,\n  0xd0, 0x2c, 0x1e, 0x8f, 0xca, 0x3f, 0x0f, 0x02, 0xc1, 0xaf, 0xbd, 0x03, 0x01, 0x13, 0x8a, 0x6b,\n  0x3a, 0x91, 0x11, 0x41, 0x4f, 0x67, 0xdc, 0xea, 0x97, 0xf2, 0xcf, 0xce, 0xf0, 0xb4, 0xe6, 0x73,\n  0x96, 0xac, 0x74, 0x22, 0xe7, 0xad, 0x35, 0x85, 0xe2, 0xf9, 0x37, 0xe8, 0x1c, 0x75, 0xdf, 0x6e,\n  0x47, 0xf1, 0x1a, 0x71, 0x1d, 0x29, 0xc5, 0x89, 0x6f, 0xb7, 0x62, 0x0e, 0xaa, 0x18, 0xbe, 0x1b,\n  0xfc, 0x56, 0x3e, 0x4b, 0xc6, 0xd2, 0x79, 0x20, 0x9a, 0xdb, 0xc0, 0xfe, 0x78, 0xcd, 0x5a, 0xf4,\n  0x1f, 0xdd, 0xa8, 0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f,\n  0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93, 0xc9, 0x9c, 0xef,\n  0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb, 0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61,\n  0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6, 0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d };\n\n\n\n\n// The round constant word array, Rcon[i], contains the values given by \n// x to th e power (i-1) being powers of x (x is denoted as {02}) in the field GF(2^8)\n// Note that i starts at 1, not 0).\nstatic const uint8_t Rcon[255] = {\n  0x8d, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, \n  0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, 0xc5, 0x91, 0x39, \n  0x72, 0xe4, 0xd3, 0xbd, 0x61, 0xc2, 0x9f, 0x25, 0x4a, 0x94, 0x33, 0x66, 0xcc, 0x83, 0x1d, 0x3a, \n  0x74, 0xe8, 0xcb, 0x8d, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, \n  0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, \n  0xc5, 0x91, 0x39, 0x72, 0xe4, 0xd3, 0xbd, 0x61, 0xc2, 0x9f, 0x25, 0x4a, 0x94, 0x33, 0x66, 0xcc, \n  0x83, 0x1d, 0x3a, 0x74, 0xe8, 0xcb, 0x8d, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, \n  0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, \n  0x7d, 0xfa, 0xef, 0xc5, 0x91, 0x39, 0x72, 0xe4, 0xd3, 0xbd, 0x61, 0xc2, 0x9f, 0x25, 0x4a, 0x94, \n  0x33, 0x66, 0xcc, 0x83, 0x1d, 0x3a, 0x74, 0xe8, 0xcb, 0x8d, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, \n  0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, \n  0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, 0xc5, 0x91, 0x39, 0x72, 0xe4, 0xd3, 0xbd, 0x61, 0xc2, 0x9f, \n  0x25, 0x4a, 0x94, 0x33, 0x66, 0xcc, 0x83, 0x1d, 0x3a, 0x74, 0xe8, 0xcb, 0x8d, 0x01, 0x02, 0x04, \n  0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, \n  0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, 0xc5, 0x91, 0x39, 0x72, 0xe4, 0xd3, 0xbd, \n  0x61, 0xc2, 0x9f, 0x25, 0x4a, 0x94, 0x33, 0x66, 0xcc, 0x83, 0x1d, 0x3a, 0x74, 0xe8, 0xcb  };\n\n\n\n\n/*****************************************************************************/\n/* Private functions:                                                        */\n/*****************************************************************************/\nstatic uint8_t getSBoxValue(uint8_t num)\n{\n  return sbox[num];\n}\n\n\nstatic uint8_t getSBoxInvert(uint8_t num)\n{\n  return rsbox[num];\n}\n\n\n// This function produces Nb(Nr+1) round keys. The round keys are used in each round to decrypt the states. \nstatic void KeyExpansion(void)\n{\n  uint32_t i, j, k;\n  uint8_t tempa[4]; // Used for the column/row operations\n\n  // The first round key is the key itself.\n  for(i = 0; i &lt; Nk; ++i)\n  {\n    RoundKey[(i * 4) + 0] = Key[(i * 4) + 0];\n    RoundKey[(i * 4) + 1] = Key[(i * 4) + 1];\n    RoundKey[(i * 4) + 2] = Key[(i * 4) + 2];\n    RoundKey[(i * 4) + 3] = Key[(i * 4) + 3];\n  }\n\n\n  // All other round keys are found from the previous round keys.\n  for(; (i &lt; (Nb * (Nr + 1))); ++i)\n  {\n    for(j = 0; j &lt; 4; ++j)\n    {\n      tempa[j]=RoundKey[(i-1) * 4 + j];\n    }\n    if (i % Nk == 0)\n    {\n      // This function rotates the 4 bytes in a word to the left once.\n      // [a0,a1,a2,a3] becomes [a1,a2,a3,a0]\n\n\n      // Function RotWord()\n      {\n        k = tempa[0];\n        tempa[0] = tempa[1];\n        tempa[1] = tempa[2];\n        tempa[2] = tempa[3];\n        tempa[3] = k;\n      }\n\n\n      // SubWord() is a function that takes a four-byte input word and \n      // applies the S-box to each of the four bytes to produce an output word.\n\n\n      // Function Subword()\n      {\n        tempa[0] = getSBoxValue(tempa[0]);\n        tempa[1] = getSBoxValue(tempa[1]);\n        tempa[2] = getSBoxValue(tempa[2]);\n        tempa[3] = getSBoxValue(tempa[3]);\n      }\n\n\n      tempa[0] =  tempa[0] ^ Rcon[i/Nk];\n    }\n    else if (Nk &gt; 6 &amp;&amp; i % Nk == 4)\n    {\n      // Function Subword()\n      {\n        tempa[0] = getSBoxValue(tempa[0]);\n        tempa[1] = getSBoxValue(tempa[1]);\n        tempa[2] = getSBoxValue(tempa[2]);\n        tempa[3] = getSBoxValue(tempa[3]);\n      }\n    }\n    RoundKey[i * 4 + 0] = RoundKey[(i - Nk) * 4 + 0] ^ tempa[0];\n    RoundKey[i * 4 + 1] = RoundKey[(i - Nk) * 4 + 1] ^ tempa[1];\n    RoundKey[i * 4 + 2] = RoundKey[(i - Nk) * 4 + 2] ^ tempa[2];\n    RoundKey[i * 4 + 3] = RoundKey[(i - Nk) * 4 + 3] ^ tempa[3];\n  }\n}\n\n\n// This function adds the round key to state.\n// The round key is added to the state by an XOR function.\nstatic void AddRoundKey(uint8_t round)\n{\n  uint8_t i,j;\n  for(i=0;i&lt;4;++i)\n  {\n    for(j = 0; j &lt; 4; ++j)\n    {\n      (*state)[i][j] ^= RoundKey[round * Nb * 4 + i * Nb + j];\n    }\n  }\n}\n\n\n// The SubBytes Function Substitutes the values in the\n// state matrix with values in an S-box.\nstatic void SubBytes(void)\n{\n  uint8_t i, j;\n  for(i = 0; i &lt; 4; ++i)\n  {\n    for(j = 0; j &lt; 4; ++j)\n    {\n      (*state)[j][i] = getSBoxValue((*state)[j][i]);\n    }\n  }\n}\n\n\n// The ShiftRows() function shifts the rows in the state to the left.\n// Each row is shifted with different offset.\n// Offset = Row number. So the first row is not shifted.\nstatic void ShiftRows(void)\n{\n  uint8_t temp;\n\n\n  // Rotate first row 1 columns to left  \n  temp           = (*state)[0][1];\n  (*state)[0][1] = (*state)[1][1];\n  (*state)[1][1] = (*state)[2][1];\n  (*state)[2][1] = (*state)[3][1];\n  (*state)[3][1] = temp;\n\n\n  // Rotate second row 2 columns to left  \n  temp           = (*state)[0][2];\n  (*state)[0][2] = (*state)[2][2];\n  (*state)[2][2] = temp;\n\n\n  temp       = (*state)[1][2];\n  (*state)[1][2] = (*state)[3][2];\n  (*state)[3][2] = temp;\n\n\n  // Rotate third row 3 columns to left\n  temp       = (*state)[0][3];\n  (*state)[0][3] = (*state)[3][3];\n  (*state)[3][3] = (*state)[2][3];\n  (*state)[2][3] = (*state)[1][3];\n  (*state)[1][3] = temp;\n}\n\n\nstatic uint8_t xtime(uint8_t x)\n{\n  return ((x&lt;&lt;1) ^ (((x&gt;&gt;7) &amp; 1) * 0x1b));\n}\n\n\n// MixColumns function mixes the columns of the state matrix\nstatic void MixColumns(void)\n{\n  uint8_t i;\n  uint8_t Tmp,Tm,t;\n  for(i = 0; i &lt; 4; ++i)\n  {  \n    t   = (*state)[i][0];\n    Tmp = (*state)[i][0] ^ (*state)[i][1] ^ (*state)[i][2] ^ (*state)[i][3] ;\n    Tm  = (*state)[i][0] ^ (*state)[i][1] ; Tm = xtime(Tm);  (*state)[i][0] ^= Tm ^ Tmp ;\n    Tm  = (*state)[i][1] ^ (*state)[i][2] ; Tm = xtime(Tm);  (*state)[i][1] ^= Tm ^ Tmp ;\n    Tm  = (*state)[i][2] ^ (*state)[i][3] ; Tm = xtime(Tm);  (*state)[i][2] ^= Tm ^ Tmp ;\n    Tm  = (*state)[i][3] ^ t ;        Tm = xtime(Tm);  (*state)[i][3] ^= Tm ^ Tmp ;\n  }\n}\n\n\n// Multiply is used to multiply numbers in the field GF(2^8)\n#if MULTIPLY_AS_A_FUNCTION\nstatic uint8_t Multiply(uint8_t x, uint8_t y)\n{\n  return (((y &amp; 1) * x) ^\n       ((y&gt;&gt;1 &amp; 1) * xtime(x)) ^\n       ((y&gt;&gt;2 &amp; 1) * xtime(xtime(x))) ^\n       ((y&gt;&gt;3 &amp; 1) * xtime(xtime(xtime(x)))) ^\n       ((y&gt;&gt;4 &amp; 1) * xtime(xtime(xtime(xtime(x))))));\n  }\n#else\n#define Multiply(x, y)                                \\\n      (  ((y &amp; 1) * x) ^                              \\\n      ((y&gt;&gt;1 &amp; 1) * xtime(x)) ^                       \\\n      ((y&gt;&gt;2 &amp; 1) * xtime(xtime(x))) ^                \\\n      ((y&gt;&gt;3 &amp; 1) * xtime(xtime(xtime(x)))) ^         \\\n      ((y&gt;&gt;4 &amp; 1) * xtime(xtime(xtime(xtime(x))))))   \\\n\n\n#endif\n\n\n// MixColumns function mixes the columns of the state matrix.\n// The method used to multiply may be difficult to understand for the inexperienced.\n// Please use the references to gain more information.\nstatic void InvMixColumns(void)\n{\n  int i;\n  uint8_t a,b,c,d;\n  for(i=0;i&lt;4;++i)\n  { \n    a = (*state)[i][0];\n    b = (*state)[i][1];\n    c = (*state)[i][2];\n    d = (*state)[i][3];\n\n\n    (*state)[i][0] = Multiply(a, 0x0e) ^ Multiply(b, 0x0b) ^ Multiply(c, 0x0d) ^ Multiply(d, 0x09);\n    (*state)[i][1] = Multiply(a, 0x09) ^ Multiply(b, 0x0e) ^ Multiply(c, 0x0b) ^ Multiply(d, 0x0d);\n    (*state)[i][2] = Multiply(a, 0x0d) ^ Multiply(b, 0x09) ^ Multiply(c, 0x0e) ^ Multiply(d, 0x0b);\n    (*state)[i][3] = Multiply(a, 0x0b) ^ Multiply(b, 0x0d) ^ Multiply(c, 0x09) ^ Multiply(d, 0x0e);\n  }\n}\n\n\n\n\n// The SubBytes Function Substitutes the values in the\n// state matrix with values in an S-box.\nstatic void InvSubBytes(void)\n{\n  uint8_t i,j;\n  for(i=0;i&lt;4;++i)\n  {\n    for(j=0;j&lt;4;++j)\n    {\n      (*state)[j][i] = getSBoxInvert((*state)[j][i]);\n    }\n  }\n}\n\n\nstatic void InvShiftRows(void)\n{\n  uint8_t temp;\n\n\n  // Rotate first row 1 columns to right  \n  temp=(*state)[3][1];\n  (*state)[3][1]=(*state)[2][1];\n  (*state)[2][1]=(*state)[1][1];\n  (*state)[1][1]=(*state)[0][1];\n  (*state)[0][1]=temp;\n\n\n  // Rotate second row 2 columns to right \n  temp=(*state)[0][2];\n  (*state)[0][2]=(*state)[2][2];\n  (*state)[2][2]=temp;\n\n\n  temp=(*state)[1][2];\n  (*state)[1][2]=(*state)[3][2];\n  (*state)[3][2]=temp;\n\n\n  // Rotate third row 3 columns to right\n  temp=(*state)[0][3];\n  (*state)[0][3]=(*state)[1][3];\n  (*state)[1][3]=(*state)[2][3];\n  (*state)[2][3]=(*state)[3][3];\n  (*state)[3][3]=temp;\n}\n\n\n\n\n// Cipher is the main function that encrypts the PlainText.\nstatic void Cipher(void)\n{\n  uint8_t round = 0;\n\n\n  // Add the First round key to the state before starting the rounds.\n  AddRoundKey(0); \n\n  // There will be Nr rounds.\n  // The first Nr-1 rounds are identical.\n  // These Nr-1 rounds are executed in the loop below.\n  for(round = 1; round &lt; Nr; ++round)\n  {\n    SubBytes();\n    ShiftRows();\n    MixColumns();\n    AddRoundKey(round);\n  }\n\n  // The last round is given below.\n  // The MixColumns function is not here in the last round.\n  SubBytes();\n  ShiftRows();\n  AddRoundKey(Nr);\n}\n\n\nstatic void InvCipher(void)\n{\n  uint8_t round=0;\n\n\n  // Add the First round key to the state before starting the rounds.\n  AddRoundKey(Nr); \n\n\n  // There will be Nr rounds.\n  // The first Nr-1 rounds are identical.\n  // These Nr-1 rounds are executed in the loop below.\n  for(round=Nr-1;round&gt;0;round--)\n  {\n    InvShiftRows();\n    InvSubBytes();\n    AddRoundKey(round);\n    InvMixColumns();\n  }\n\n  // The last round is given below.\n  // The MixColumns function is not here in the last round.\n  InvShiftRows();\n  InvSubBytes();\n  AddRoundKey(0);\n}\n\n\nstatic void BlockCopy(uint8_t* output, uint8_t* input)\n{\n  uint8_t i;\n  for (i=0;i&lt;KEYLEN;++i)\n  {\n    output[i] = input[i];\n  }\n}\n\n\n\n\n\n\n/*****************************************************************************/\n/* Public functions:                                                         */\n/*****************************************************************************/\n#if defined(ECB) &amp;&amp; ECB\n\n\n\n\nvoid AES128_ECB_encrypt(uint8_t* input, const uint8_t* key, uint8_t* output)\n{\n  // Copy input to output, and work in-memory on output\n  BlockCopy(output, input);\n  state = (state_t*)output;\n\n\n  Key = key;\n  KeyExpansion();\n\n\n  // The next function call encrypts the PlainText with the Key using AES algorithm.\n  Cipher();\n}\n\n\nvoid AES128_ECB_decrypt(uint8_t* input, const uint8_t* key, uint8_t *output)\n{\n  // Copy input to output, and work in-memory on output\n  BlockCopy(output, input);\n  state = (state_t*)output;\n\n\n  // The KeyExpansion routine must be called before encryption.\n  Key = key;\n  KeyExpansion();\n\n\n  InvCipher();\n}\n\n\n\n\n#endif // #if defined(ECB) &amp;&amp; ECB\n\n\n\n\n\n\n\n\n\n\n#if defined(CBC) &amp;&amp; CBC\n\n\n\n\nstatic void XorWithIv(uint8_t* buf)\n{\n  uint8_t i;\n  for(i = 0; i &lt; KEYLEN; ++i)\n  {\n    buf[i] ^= Iv[i];\n  }\n}\n\n\nvoid AES128_CBC_encrypt_buffer(uint8_t* output, uint8_t* input, uint32_t length, const uint8_t* key, const uint8_t* iv)\n{\n  intptr_t i;\n  uint8_t remainders = length % KEYLEN; /* Remaining bytes in the last non-full block */\n\n\n  BlockCopy(output, input);\n  state = (state_t*)output;\n\n\n  // Skip the key expansion if key is passed as 0\n  if(0 != key)\n  {\n    Key = key;\n    KeyExpansion();\n  }\n\n\n  if(iv != 0)\n  {\n    Iv = (uint8_t*)iv;\n  }\n\n\n  for(i = 0; i &lt; length; i += KEYLEN)\n  {\n    XorWithIv(input);\n    BlockCopy(output, input);\n    state = (state_t*)output;\n    Cipher();\n    Iv = output;\n    input += KEYLEN;\n    output += KEYLEN;\n  }\n\n\n  if(remainders)\n  {\n    BlockCopy(output, input);\n    memset(output + remainders, 0, KEYLEN - remainders); /* add 0-padding */\n    state = (state_t*)output;\n    Cipher();\n  }\n}\n\n\nvoid AES128_CBC_decrypt_buffer(uint8_t* output, uint8_t* input, uint32_t length, const uint8_t* key, const uint8_t* iv)\n{\n  intptr_t i;\n  uint8_t remainders = length % KEYLEN; /* Remaining bytes in the last non-full block */\n\n  BlockCopy(output, input);\n  state = (state_t*)output;\n\n\n  // Skip the key expansion if key is passed as 0\n  if(0 != key)\n  {\n    Key = key;\n    KeyExpansion();\n  }\n\n\n  // If iv is passed as 0, we continue to encrypt without re-setting the Iv\n  if(iv != 0)\n  {\n    Iv = (uint8_t*)iv;\n  }\n\n\n  for(i = 0; i &lt; length; i += KEYLEN)\n  {\n    BlockCopy(output, input);\n    state = (state_t*)output;\n    InvCipher();\n    XorWithIv(output);\n    Iv = input;\n    input += KEYLEN;\n    output += KEYLEN;\n  }\n\n\n  if(remainders)\n  {\n    BlockCopy(output, input);\n    memset(output+remainders, 0, KEYLEN - remainders); /* add 0-padding */\n    state = (state_t*)output;\n    InvCipher();\n  }\n}\n\n\n\n\n#endif // #if defined(CBC) &amp;&amp; CBC\n</code></pre>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 2812, "user_id": 1539858, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vRC08.png?s=128&g=1", "display_name": "arunmoezhi", "link": "https://stackoverflow.com/users/1539858/arunmoezhi"}, "edited": false, "score": 0, "creation_date": 1426103033, "post_id": 28995888, "comment_id": 46239947, "body": "A side note. You are using Greedy approach. If you need to minimize the # of coins used, you should try using dynamic programming technique"}, {"owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 0, "creation_date": 1426103154, "post_id": 28995888, "comment_id": 46240024, "body": "The problem is that computers use discrete maths, and since they don&#39;t have infinite memory, where you see one number they see another one (not exactly like that and depends of the number, but to have a general idea)."}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 1, "creation_date": 1426103255, "post_id": 28995888, "comment_id": 46240088, "body": "This question has been answered a number of times. Just search."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426103319, "post_id": 28995888, "comment_id": 46240123, "body": "Stop using <code>float</code>, use <code>int</code>. With <code>int newAmount = (int)amount;</code> passed as a <code>float</code>, what is the point? You&#39;ll only get rounding errors."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426103335, "post_id": 28995888, "comment_id": 46240133, "body": "Why are you doing this <code>newCents = 10 * cents</code>?"}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 1, "creation_date": 1426103572, "post_id": 28995888, "comment_id": 46240273, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/28216438/i-dont-understand-how-the-different-amounts-are-calculated\">I dont understand how the different amounts are calculated</a>"}, {"owner": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "edited": false, "score": 0, "creation_date": 1426103872, "post_id": 28995888, "comment_id": 46240472, "body": "Weather Vane: I&#39;m using that statement to extract the <code>100</code> out of a <code>100.34</code> iharob: I&#39;m using that statement to make computation simpler, where I can divide by <code>25</code> instead of <code>.25</code>"}], "answers": [{"tags": [], "owner": {"reputation": 711, "user_id": 809102, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/062b1d54e88e8b951cc73e47eb12c601?s=128&d=identicon&r=PG", "display_name": "Treesrule14", "link": "https://stackoverflow.com/users/809102/treesrule14"}, "is_accepted": false, "score": 0, "last_activity_date": 1426103393, "last_edit_date": 1426103393, "creation_date": 1426103359, "answer_id": 28996030, "question_id": 28995888, "link": "https://stackoverflow.com/questions/28995888/counting-change-program-c/28996030#28996030", "title": "Counting Change Program - C", "body": "<p>Long story short floats do not work like ints and thus you cannot express precise numbers with them.</p>\n\n<p>See <a href=\"http://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow\">here</a>.</p>\n\n<p>Try multiplying the input by 100 and then using %100!</p>\n"}, {"tags": [], "owner": {"reputation": 4273, "user_id": 259543, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4467b34cac116943a05e10841994dbad?s=128&d=identicon&r=PG", "display_name": "alecov", "link": "https://stackoverflow.com/users/259543/alecov"}, "is_accepted": false, "score": 3, "last_activity_date": 1426104285, "last_edit_date": 1426104285, "creation_date": 1426103697, "answer_id": 28996120, "question_id": 28995888, "link": "https://stackoverflow.com/questions/28995888/counting-change-program-c/28996120#28996120", "title": "Counting Change Program - C", "body": "<p>You are using floating-point data types to represent fixed-point calculations. Floating-point arithmetic is subject to a number of rounding errors such as those you've seen.</p>\n\n<p>Instead of using <code>float</code> or <code>double</code> to represent dollars and fractions, use a plain <code>int</code> representing the total amount of <em>cents</em>. For example, instead of using <code>float value = 4.25;</code> for $4.25, use <code>int value = 425;</code> (425 cents) instead. Then, <code>value/100</code> (<code>== 4</code>) is the number of dollars (note: integer division is truncated), and <code>value%100</code> (<code>== 25</code>) is the number of pennies.</p>\n\n<p>(This is called '<a href=\"http://en.wikipedia.org/wiki/Fixed-point_arithmetic\" rel=\"nofollow\">fixed-point</a>' since the decimal point position is fixed in the representation (in this case, it is always after exactly two decimal digits). Fixed-point arithmetic is basically integer arithmetic with post-calculation corrections.)</p>\n"}, {"comments": [{"owner": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "edited": false, "score": 0, "creation_date": 1426133973, "post_id": 28996218, "comment_id": 46251142, "body": "That&#39;s awesome! I had no idea you could use <code>scanf()</code> with decimal places like that. Thank you :)"}], "tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": true, "score": 2, "last_activity_date": 1426104047, "creation_date": 1426104047, "answer_id": 28996218, "question_id": 28995888, "link": "https://stackoverflow.com/questions/28995888/counting-change-program-c/28996218#28996218", "title": "Counting Change Program - C", "body": "<p>You can't represent change with a float.  You need to treat money as an integral number of cents (or tenths of a cent, hundredths of a cent, &amp;ct depending on application).</p>\n\n<p>Try something like this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n  int dollars;\n  int cents;\n\n  scanf (\"%d.%d\", &amp;dollars, &amp;cents);\n\n  printf (\"%d dollars, %d cents\\n\", dollars, cents);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3221, "favorite_count": 1, "accepted_answer_id": 28996218, "answer_count": 3, "score": 2, "last_activity_date": 1426104285, "creation_date": 1426102882, "question_id": 28995888, "link": "https://stackoverflow.com/questions/28995888/counting-change-program-c", "title": "Counting Change Program - C", "body": "<p>I ran into a peculiar problem when trying to write a program for counting out change for a user. The user would enter in an amount -- in dollars and cents -- and the program would compute how many bills and coins the user would receive.</p>\n\n<p>I have issues with counting out the coins portion, as I am not calculating the amount I expect to be calculating.</p>\n\n<p>For example, the user would input <code>123.45</code> so I would pull the <code>123</code> out and compute the dollars portion, and then pull the <code>.45</code> and compute the coins portion.</p>\n\n<p>I feel like there is an issue with casting a floating-point number to an integer, but I'm not sure. If I enter <code>.45</code> and then try and print it, the program would output <code>.449997</code> instead. </p>\n\n<p>What's going on here?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid giveChange(float);\nvoid countCents(float);\n\nint main()\n{\n    float amount;\n\n    printf(\"Enter in an amount (in dollars and cents): \");\n    scanf(\"%f\", &amp;amount);\n\n    giveChange(amount);\n\n    getchar();\n    return 0;\n}\n\nvoid giveChange(float amount)\n{\n    int newAmount = (int)amount;\n    int hundreds, fifties, tens, fives, ones;\n    float cents = amount - newAmount;\n\n    hundreds = newAmount / 100;\n    newAmount %= 100;\n\n    fifties = newAmount / 50;\n    newAmount %= 50;\n\n    tens = newAmount / 10;\n    newAmount %= 10;\n\n    fives = newAmount / 5;\n    newAmount %=  5;\n\n    printf(\"\\nHundreds: %i\\nFifties: %i\\nTens: %i\\nFives: %i\\nOnes: %i\\n\", hundreds, fifties, tens, fives, newAmount);\n\n    countCents(cents);\n\n    return; \n}\n\nvoid countCents(float cents)\n{\n    int newCents = cents * 10;\n    int quarters, dimes, nickels, pennies;\n\n    quarters = newCents / 25;\n    newCents %= 25;\n\n    dimes = newCents / 10;\n    newCents %= 10;\n\n    nickels = newCents / 5;\n    newCents %= 5;\n\n    printf(\"\\nQuarters: %i\\nDimes: %i\\nNickels: %i\\nPennies: %i\\n\", quarters, nickels, dimes, newCents);\n\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "parsing", "pointers", "struct"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426101534, "post_id": 28995374, "comment_id": 46239057, "body": "Using <code>atol()</code> prevents you from knowing why your program is failing, try <code>char *endptr; a = strtol(t.values + 2, &amp;endptr, 10); if (*endptr != &#39;\\0&#39;) printf(&quot;The value `%s&#39; was not converted because the following characters could not be converted `%s&#39;\\n&quot;, t.values + 2, endptr);</code>. And you aren&#39;t checking <code>t.values != NULL</code>, if <code>strtok()</code> doesn&#39;t find the <code>&#39;\\n&#39;</code> it returns <code>NULL</code>."}, {"owner": {"reputation": 6825, "user_id": 631429, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a9ec13176c9cc5a876ac2bb65aac173c?s=128&d=identicon&r=PG", "display_name": "wjl", "link": "https://stackoverflow.com/users/631429/wjl"}, "edited": false, "score": 0, "creation_date": 1426101646, "post_id": 28995374, "comment_id": 46239133, "body": "If you don&#39;t mind using an external library, you can parse this very easily with a regular expression, using something like PCRE: <a href=\"http://www.pcre.org/\" rel=\"nofollow noreferrer\">pcre.org</a>. If you want to do something manually that will be much easier to maintain regardless of increasing complexity, one easy starting point would be to read up on recursive decent parsing."}, {"owner": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "edited": false, "score": 0, "creation_date": 1426102030, "post_id": 28995374, "comment_id": 46239356, "body": "Unfortunately, by the time I end up learning how to use a external library like PCRE, it will be too late to implement it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426102181, "post_id": 28995374, "comment_id": 46239453, "body": "After the first pass of 3 <code>if()</code>s, do <code>t.values = strtok(NULL,&quot; \\n&quot;);</code> and test against the 3 <code>if()</code>s until  <code>t.values == NULL</code>."}, {"owner": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "edited": false, "score": 0, "creation_date": 1426102723, "post_id": 28995374, "comment_id": 46239765, "body": "Ive checked and t.values is never null."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426103401, "post_id": 28995374, "comment_id": 46240164, "body": "I suggest <code>printf(&quot;%s\\n&quot;,t.values)</code> after the call to <code>strtok</code>. That should clear up a few things. The point is that you can either use <code>strtok</code> to solve the problem, or <code>strstr</code>, but not both."}], "answers": [{"tags": [], "owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "is_accepted": true, "score": 2, "last_activity_date": 1426103089, "creation_date": 1426103089, "answer_id": 28995945, "question_id": 28995374, "link": "https://stackoverflow.com/questions/28995374/reading-in-text-file-in-c/28995945#28995945", "title": "Reading in text file in C", "body": "<p>The strstr function gives the position of the searched string or NULL if it's not found. You have to use this result in the atol function in order to get the value associated.</p>\n\n<p>In the code below I use the variable <code>token</code>to store the result of strstr:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char * argv[])\n{\n    FILE * file; \n    char str[100];\n    int a,b,c;\n\n    if(argc &gt; 1) \n    {\n        file = fopen(argv[1],\"r\");\n        if(file == NULL)\n        {\n            exit(1);\n        }\n    }\n    else \n    {\n        exit(1);\n    }\n\n    while(fgets(str,100,file) != NULL)\n    {\n        char *token;\n\n        token = strstr(str,\"sf\"));\n        if (token != NULL)\n        {\n            a = atol(token+2); // the number two positions after the letter\n        }\n\n        token = strstr(str,\"sd\"));\n        if (token != NULL)\n        {\n            b = atol(token+2); // the number two positions after the letter \n\n        }\n\n        token = strstr(str,\"sh\"));\n        if (token != NULL)\n        {\n            c = atol(token+2); // the number two positions after the letter\n        }\n\n        printf(\"Value of a: %d\\n Value of b: %d\\n Value of c: %d\\n\",a,b,c);\n    }\n    fclose(file);    \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 356, "user_id": 2238367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a033cc07d409e5488cbd6cc949fcb0f5?s=128&d=identicon&r=PG", "display_name": "codess", "link": "https://stackoverflow.com/users/2238367/codess"}, "is_accepted": false, "score": 0, "last_activity_date": 1426103768, "creation_date": 1426103768, "answer_id": 28996139, "question_id": 28995374, "link": "https://stackoverflow.com/questions/28995374/reading-in-text-file-in-c/28996139#28996139", "title": "Reading in text file in C", "body": "<p>It may be helpful to print the value of t.values before each if block.\nIt shows that t.values does not change.  Only the first if block's expression will be true.</p>\n\n<p>If you want to do this using <a href=\"https://www-s.acm.illinois.edu/webmonkeys/book/c_guide/2.14.html#strtok\" rel=\"nofollow\">strtok</a>...\n\"Subsequent calls with a null pointer for str1 will cause the previous position saved to be restored and begins searching from that point...\"</p>\n\n<p>So maybe insert calls of strtok(NULL, \" \\n\"), like this:</p>\n\n<pre><code>t.values = strtok(str,\" \\n\");\n\nif(strstr(t.values,\"sf\"))\n{\n    a = atol(t.values+2); // the number two positions after the letter\n}\n\nt.values = strtok(NULL,\" \\n\");  // get pointer to next token\nif(strstr(t.values,\"sd\"))\n{\n    b = atol(t.values+2); // the number two positions after the letter\n}\n\nt.values = strtok(NULL,\" \\n\");  // get pointer to next token\nif(strstr(t.values,\"sh\"))\n{\n    c = atol(t.values+2); // the number two positions after the letter\n}\n\nprintf(\"Value of a: %d\\n Value of b: %d\\n Value of c: %d\\n\",a,b,c);\n</code></pre>\n\n<p>Now the output is</p>\n\n<pre><code>Value of a: 5\n Value of b: 6\n Value of c: 7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1426104116, "creation_date": 1426104116, "answer_id": 28996236, "question_id": 28995374, "link": "https://stackoverflow.com/questions/28995374/reading-in-text-file-in-c/28996236#28996236", "title": "Reading in text file in C", "body": "<p>Your code has two issues : </p>\n\n<ul>\n<li><p>in the use of <a href=\"http://www.cplusplus.com/reference/cstring/strstr/?kw=strstr\" rel=\"nofollow\"><code>strstr()</code></a> you don't use the return pointer, so that if encountering the string but not at the beginning, it vwill look for the digit at the wrong place;  </p></li>\n<li><p>you don't loop on <a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow\"><code>strtok()</code></a> to find the subsequent substrings.  As <code>strtok()</code> cuts the string in pieces, you won't find anythning beyond the first separator with <code>strstr()</code>;  </p></li>\n</ul>\n\n<p>Here an alternative solution based on your original approach (but as I'm very slow in typing, in the meanttime there are already 2 other valuable solutions ;-) )</p>\n\n<pre><code>while (fgets(str, 100, file) != NULL)\n{\n    t.values = strtok(str, \" \\t\\n\"); \n    while (t.values) {    // loop to analyse each substring\n        if (p = strstr(t.values, \"sf\"))\n            a = atol(p + 2); // the number two positions after the FOUND string\n        else if (p = strstr(t.values, \"sd\"))\n            b = atol(p + 2); // the number two positions after the letter \n        else if (p = strstr(t.values, \"sh\"))\n            c = atol(p + 2); // the number two positions after the letter\n        t.values = strtok(NULL, \" \\t\\n\");\n    }\n    printf(\"Value of a: %d\\n Value of b: %d\\n Value of c: %d\\n\", a, b, c);\n}\n</code></pre>\n\n<p>Now if you enter aaasf5 he will find 5 for a, while it found 0 before.<br>\nThis code (nor yours) address the case where one of the value isn't found.  You should therefore initialize your a,b,c to a defautlt value, for example 0. </p>\n"}], "owner": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 28995945, "answer_count": 3, "score": 1, "last_activity_date": 1426104116, "creation_date": 1426101220, "last_edit_date": 1426102951, "question_id": 28995374, "link": "https://stackoverflow.com/questions/28995374/reading-in-text-file-in-c", "title": "Reading in text file in C", "body": "<p>I've got a text file as follows:</p>\n\n<pre><code>sf5 sd6 sh7 \n</code></pre>\n\n<p>or <code>sh7 sd6 sf5</code> (any order of the two or the other possible 27 combinations).</p>\n\n<p>I'm trying to extract the values <code>5,6, and 7</code> from it\nHowever, I want to do this in any order possible, so sf(somenumber) can be in any of those 3 positions, as well as the other two. Thus, I'm trying to use <code>strstr</code> as one of my macros.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\ntypedef struct test\n{\n    char * values;\n}test;\n\nint main(int argc, char * argv[])\n{\n    test t;\n    FILE * file; \n    char str[100];\n    int a,b,c;\n\n    if(argc &gt; 1) \n    {\n        file = fopen(argv[1],\"r\");\n\n        if(file == NULL)\n        {\n            exit(1);\n        }\n    }\n\n    else \n    {\n\n        exit(1);\n    }\n\n    while(fgets(str,100,file) != NULL)\n    {\n        t.values = strtok(str,\" \\n\");\n\n        if(t.values == NULL)\n            exit(1);\n        if(strstr(t.values,\"sf\"))\n        {\n            a = atol(t.values+2); // the number two positions after the letter\n        }\n\n\n        if(strstr(t.values,\"sd\"))\n        {\n            b = atol(t.values+2); // the number two positions after the letter \n\n        }\n\n\n        if(strstr(t.values,\"sh\"))\n        {\n            c = atol(t.values+2); // the number two positions after the letter\n\n        }\n\n        printf(\"Value of a: %d\\n Value of b: %d\\n Value of c: %d\\n\",a,b,c);\n\n    }    \n}\n</code></pre>\n\n<p>However the output is only correct for the first value \"sf5\", as if the second two aren't being parsed. Also, if I move \"sf5\" to the end, it's value provides to be zero which again makes no sense. </p>\n\n<p>Basically, only the first <code>if</code> statement ever works successfully. Any help would be much appreciated!</p>\n"}, {"tags": ["c", "linked-list", "valgrind"], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1426101877, "last_edit_date": 1426101877, "creation_date": 1426101185, "answer_id": 28995360, "question_id": 28995317, "link": "https://stackoverflow.com/questions/28995317/valgrind-error-when-creating-an-array-of-linked-lists-for-hash-table-chaining/28995360#28995360", "title": "Valgrind Error when creating an array of linked lists (for Hash Table Chaining)", "body": "<p>You are dereferencing a <code>NULL</code> poitner, you need to make your pointer point somewhere and to a valid somewhere, like this</p>\n\n<pre><code>struct field *f = malloc(sizeof(struct field));\nif (f == NULL)\n   return NULL;\n/* ... continue your MakeField() function as it is */\n</code></pre>\n\n<p>don't forget to <code>free(f)</code> in the caller function.</p>\n\n<p>By the way, <a href=\"http://valgrind.org\" rel=\"nofollow\"><em>valgrind</em></a> is telling you that\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Address 0x8 is not stack'd, malloc'd or (recently) free'd\n                           ~~~^~~~\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 4643107, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c719a82aa60bc8e74d6b52ec2dd85a80?s=128&d=identicon&r=PG&f=1", "display_name": "jsmith102894", "link": "https://stackoverflow.com/users/4643107/jsmith102894"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 28995360, "answer_count": 1, "score": 0, "last_activity_date": 1426101877, "creation_date": 1426101040, "last_edit_date": 1426101334, "question_id": 28995317, "link": "https://stackoverflow.com/questions/28995317/valgrind-error-when-creating-an-array-of-linked-lists-for-hash-table-chaining", "title": "Valgrind Error when creating an array of linked lists (for Hash Table Chaining)", "body": "<p>As an overview, I'm trying to create a battleship-like game in C, where ships are placed on a field. </p>\n\n<p>Here is the error I am getting:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==11147== Invalid write of size 8\n==11147==    at 0x400786: MakeField (battleship.c:34)\n==11147==  Address 0x8 is not stack'd, malloc'd or (recently) free'd\n</code></pre>\n\n<p>Here is the relevant code:\n</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct piece{\n    int x;\n    int y;\n    int direction;\n    int length;\n    char name;\n\n};\n\nstruct node{\n    struct piece boat;\n    struct node *next;\n\n};\n\n\nstruct field{\n    int numBoats;\n    struct node *array[numRows];\n};\n\nstruct field *MakeField(void){\n    struct field *f = NULL;\n    struct node *temp = NULL;\n\n    for(int i = 0; i &lt; numRows; i++){\n        f-&gt;array[i] = temp; &lt;--- VALGRIND ERROR HERE\n    }\n\n    f-&gt;count = 0;\n    return f;\n}\n</code></pre>\n\n<p>Can anyone help with this issue?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 1, "creation_date": 1426100415, "post_id": 28995104, "comment_id": 46238409, "body": "Most likely, you have multiple files like <code>blah.c</code> and <code>foo.c</code> and you&#39;re not passing them to your compiler correctly. You&#39;ll need to include more information about how you compile your files and exactly what is in those files. And you should try and make a reduced test case that exhibits this problem."}, {"owner": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "edited": false, "score": 0, "creation_date": 1426100450, "post_id": 28995104, "comment_id": 46238433, "body": "how about <code>&lt;sys&#47;time.h&gt;</code> or <code>&lt;unistd.h&gt;</code> ?"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 1, "creation_date": 1426100509, "post_id": 28995104, "comment_id": 46238460, "body": "@AustinMullins: So the error in that question is &quot;Implict Declaration&quot;. We&#39;re getting a linker error here. Although it&#39;s always possible that he&#39;s getting both and just didn&#39;t tell us about the first one."}, {"owner": {"reputation": 41, "user_id": 4659953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-IdfmvNtzIB4/AAAAAAAAAAI/AAAAAAAAAv8/jf9yRlB_96Q/photo.jpg?sz=128", "display_name": "Chola Tech", "link": "https://stackoverflow.com/users/4659953/chola-tech"}, "edited": false, "score": 0, "creation_date": 1426100565, "post_id": 28995104, "comment_id": 46238493, "body": "I tried to isolate the problem, by creating a completely separated file test1.c in a separate folder, where I try to call just those functions in main() ... doesn`t work."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426100654, "post_id": 28995104, "comment_id": 46238554, "body": "@CholaTech: What does &quot;doesn&#39;t work&quot; mean. Presumably you have reduced your code to ~20 lines of code? And you presumably have some expected response from the compiler / code. And presumably the code / compiler gave you a different response. Adding all of that to your question would make this an <b>excellent</b> question. Your current question is <b>terrible</b>."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426100671, "post_id": 28995104, "comment_id": 46238566, "body": "@BillLynch true. It&#39;s probably a library linking issue."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 1, "creation_date": 1426100791, "post_id": 28995104, "comment_id": 46238642, "body": "@CholaTech: <code>unistd.h</code> is a POSIX header. So it is found on Linux (among others) and won&#39;t be found under Windows. And thus is probably an unhelpful suggestion for you."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426100882, "post_id": 28995104, "comment_id": 46238698, "body": "You might try using <code>find</code> or <code>grep</code> to search through all the .h files for your compiler for <code>sleep</code> or <code>delay</code>."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426100924, "post_id": 28995104, "comment_id": 46238724, "body": "Maybe you could use macros to define <code>Sleep()</code> as POSIX sleep under *nix and <code>#include &lt;windows.h&gt;</code> on Windows."}, {"owner": {"reputation": 41, "user_id": 4659953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-IdfmvNtzIB4/AAAAAAAAAAI/AAAAAAAAAv8/jf9yRlB_96Q/photo.jpg?sz=128", "display_name": "Chola Tech", "link": "https://stackoverflow.com/users/4659953/chola-tech"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426101580, "post_id": 28995104, "comment_id": 46239093, "body": "@BillLynch &quot;Doesn&#39;t work&quot; means that it keeps giving me the same error. I&#39;m not planing on using unistd.h since I&#39;m not using POSIX header  since I&#39;m not on Linux, therefore let&#39;s not even go in that direction.  Now is there anything I can do to make that delay work? (as you can see, my code is really simple, there is nothing to break there, it&#39;s just a linker issue)"}, {"owner": {"reputation": 41, "user_id": 4659953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-IdfmvNtzIB4/AAAAAAAAAAI/AAAAAAAAAv8/jf9yRlB_96Q/photo.jpg?sz=128", "display_name": "Chola Tech", "link": "https://stackoverflow.com/users/4659953/chola-tech"}, "edited": false, "score": 0, "creation_date": 1426102178, "post_id": 28995104, "comment_id": 46239448, "body": "I got the answer: #include&lt;Windows.h&gt;"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426102186, "post_id": 28995104, "comment_id": 46239456, "body": "@CholaTech: Your code produces <b>TWO</b> notifications. Please show us both of them in the future. <a href=\"http://imgur.com/M8IclMS\" rel=\"nofollow noreferrer\">imgur.com/M8IclMS</a>"}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1426102096, "post_id": 28995624, "comment_id": 46239394, "body": "Documentation for this is here: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426233273, "post_id": 28995624, "comment_id": 46296230, "body": "What the hell is <code>Sleep()</code> ???  is it standard? If somebody is waiting for a whole second, isn&#39;t better to use <code>sleep(1);</code> ???"}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426253435, "post_id": 28995624, "comment_id": 46307879, "body": "Sleep is the windows sleep command. Remember task delaying and the like is os specific. POSIX is an effort to make that a standard, but the libraries don&#39;t automatically exist on every windows computer."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426452109, "post_id": 28995624, "comment_id": 46367453, "body": "sleep() is older than posix... It appears in K&amp;R ed. 1."}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426598963, "post_id": 28995624, "comment_id": 46430933, "body": "Yes. It is in unistd.h... which is a unix header. Which helps a windows user not at all."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426743810, "post_id": 28995624, "comment_id": 46500148, "body": "being part of unix doesn&#39;t mean not being part of windows.  The first time I used that function was with Turbo C (a Borland product running on Microsoft&#39;s MS-DOS) v1.0 probably in the 80&#39;s.  It appears in Kernighan &amp; Ritchie&#39;s &quot;The C programming language&quot; first edition (the one that doesn&#39;t cover ANSI-C) and there, it&#39;s not linked with any header file (neither unix nor windows/ms-dos)"}], "tags": [], "owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "is_accepted": true, "score": 3, "last_activity_date": 1426102067, "creation_date": 1426102067, "answer_id": 28995624, "question_id": 28995104, "link": "https://stackoverflow.com/questions/28995104/cant-use-delay-sleep-functions-in-c/28995624#28995624", "title": "Can`t use delay/sleep functions in C", "body": "<p>What functions you use to make a thread sleep are dependent on the operating system you are using.\nFor Windows 8.1 you need to include Windows.h</p>\n\n<pre><code>#include&lt;Windows.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n\nint main() {\n    for(;;){\n        puts(\"bla\");\n        Sleep(1000); // Will sleep for 1 second\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4659953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-IdfmvNtzIB4/AAAAAAAAAAI/AAAAAAAAAv8/jf9yRlB_96Q/photo.jpg?sz=128", "display_name": "Chola Tech", "link": "https://stackoverflow.com/users/4659953/chola-tech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2415, "favorite_count": 0, "accepted_answer_id": 28995624, "answer_count": 1, "score": 0, "last_activity_date": 1426102346, "creation_date": 1426100259, "last_edit_date": 1426102346, "question_id": 28995104, "link": "https://stackoverflow.com/questions/28995104/cant-use-delay-sleep-functions-in-c", "title": "Can`t use delay/sleep functions in C", "body": "<p>I am trying to use delay/sleep function in my code, but it gives me the same error every time: \"Undefined reference to <code>whateverIput</code>\"</p>\n\n<p>By <code>whateverIput</code> i mean sleep/Sleep/delay/Delay.</p>\n\n<p>I included both dos.h and time.h libraries (next to my normal stdio.h and stdlib.h libraries) still nothing.</p>\n\n<p>I searched the web before I posted, but I just can`t find the solution.</p>\n\n<p>Platform: Codeblocks 13.12 with GNU GCC Compiler on Windows 8.1</p>\n\n<h3>Code</h3>\n\n<pre><code>#include&lt;dos.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n\nint main() {\n    for(;;){\n        puts(\"bla\");\n        Sleep(1000);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1426099877, "post_id": 28994959, "comment_id": 46238086, "body": "Are you guaranteed to have a <code>&#39;\\n&#39;</code> in your file everytime <code>i == sor</code>?"}, {"owner": {"reputation": 43, "user_id": 3724530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8fe2051df92d42099eb219c668046d9?s=128&d=identicon&r=PG&f=1", "display_name": "user3724530", "link": "https://stackoverflow.com/users/3724530/user3724530"}, "reply_to_user": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1426100329, "post_id": 28994959, "comment_id": 46238353, "body": "My file coantaning number plates: rendszam\taktiv\thely ASD-123\t0\tA ABC-123 0\tB HSK-187\t1\tF FDD-333\t1\tK"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426101385, "post_id": 28994959, "comment_id": 46238986, "body": "What is the character used as a delimiter between records in your file?  Is it a <b><i>\\n</i></b>?, or other?"}, {"owner": {"reputation": 43, "user_id": 3724530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8fe2051df92d42099eb219c668046d9?s=128&d=identicon&r=PG&f=1", "display_name": "user3724530", "link": "https://stackoverflow.com/users/3724530/user3724530"}, "edited": false, "score": 0, "creation_date": 1426102372, "post_id": 28994959, "comment_id": 46239563, "body": "It&#39;s &#39;\\n&#39;. Exepct the last one what is EOF."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426232904, "post_id": 28994959, "comment_id": 46296058, "body": "well, <code>EOF != &#39;\\n&#39;</code>, so you are in an infinite loop in the case you get <code>EOF</code> not after a <code>\\n</code> char.  If your file doesn&#39;t have a final <code>\\n</code> in the last line, you&#39;ll get stuck in the while."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3724530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8fe2051df92d42099eb219c668046d9?s=128&d=identicon&r=PG&f=1", "display_name": "user3724530", "link": "https://stackoverflow.com/users/3724530/user3724530"}, "edited": false, "score": 0, "creation_date": 1426101320, "post_id": 28995095, "comment_id": 46238954, "body": "It&#39;s duplicate the line what i want to rewrite. With any code with EOF, without EOF it stuck with an infinite loop."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 43, "user_id": 3724530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8fe2051df92d42099eb219c668046d9?s=128&d=identicon&r=PG&f=1", "display_name": "user3724530", "link": "https://stackoverflow.com/users/3724530/user3724530"}, "edited": false, "score": 0, "creation_date": 1426104876, "post_id": 28995095, "comment_id": 46241023, "body": "@user3724530, you are welcome. Glad you got it to work."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1426100865, "last_edit_date": 1426100865, "creation_date": 1426100249, "answer_id": 28995095, "question_id": 28994959, "link": "https://stackoverflow.com/questions/28994959/how-do-i-replace-a-line-in-a-file/28995095#28995095", "title": "How do i replace a line in a file?", "body": "<p>Instead of </p>\n\n<pre><code>char tp;\n</code></pre>\n\n<p>use</p>\n\n<pre><code>int tp;\n</code></pre>\n\n<p>If <code>char</code> is an unsigned type in your platform, <code>tp</code> will never be equal to <code>EOF</code>.</p>\n\n<p>And change the line</p>\n\n<pre><code>while (fgetc(f) != '\\n')\n</code></pre>\n\n<p>to </p>\n\n<pre><code>while ( (tp = fgetc(f)) != '\\n' &amp;&amp; tp != EOF )\n</code></pre>\n\n<p>to avoid getting stuck with an infinite loop when you reach the end of the file.</p>\n\n<p>In your posted code, you are using:</p>\n\n<pre><code>while (fgetc(f) != '\\n');\ni++;\n</code></pre>\n\n<p>It's not clear whether you meant to use that or you meant to use:</p>\n\n<pre><code>while (fgetc(f) != '\\n')\n   i++;\n</code></pre>\n\n<p>Use my suggestions appropriately.</p>\n"}], "owner": {"reputation": 43, "user_id": 3724530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8fe2051df92d42099eb219c668046d9?s=128&d=identicon&r=PG&f=1", "display_name": "user3724530", "link": "https://stackoverflow.com/users/3724530/user3724530"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 28995095, "answer_count": 1, "score": 0, "last_activity_date": 1426101071, "creation_date": 1426099755, "last_edit_date": 1426101071, "question_id": 28994959, "link": "https://stackoverflow.com/questions/28994959/how-do-i-replace-a-line-in-a-file", "title": "How do i replace a line in a file?", "body": "<p>My program is only work when the main function is short, when it's long it's stop working. </p>\n\n<p>My program gets stuck at the line:</p>\n\n<pre><code>while (fgetc(f) != '\\n');\n\n\nvoid aktivpassziv(int sor, int aktiv, char rendszam[8], char helyzet)\n{\nint i = 0;\nchar tp;\n\nFILE *f = fopen(\".\\\\TAXI.txt\", \"r\");\nFILE *f2 = fopen(\".\\\\temp.txt\", \"w\");   \n\nwhile ((tp = fgetc(f)) != EOF)\n{\n    if (tp == '\\n') i++;\n\n    if (i == sor)\n    {\n        fprintf(f2, \"\\n%s\\t%d\\t%c\\n\", rendszam, !aktiv, helyzet);\n\n        while (fgetc(f) != '\\n');\n        i++;\n    }\n    else\n    {\n        fprintf(f2, \"%c\", tp);\n    }\n\n\n}\ni = 0;\n\nfclose(f);\nfclose(f2);\n\n\n\n}\n</code></pre>\n\n<p>My file containing number plates:\nrendszam    aktiv   hely\nASD-123 0   A\nABC-123 0   B\nHGK-187 1   F\nFDD-333 1   K</p>\n"}, {"tags": ["c", "char", "io-redirection"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1426099540, "post_id": 28994817, "comment_id": 46237863, "body": "&quot;but that does not work&quot;: in what way?  What indication(s) do you have that it does not work?"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1426099610, "post_id": 28994817, "comment_id": 46237910, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/579734/assigning-strings-to-arrays-of-characters\">Assigning strings to arrays of characters</a>"}, {"owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426099788, "post_id": 28994817, "comment_id": 46238015, "body": "not a duplicate i already assign output as a char *"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1426099886, "post_id": 28994817, "comment_id": 46238096, "body": "@user3037172 You are trying to initialize the array <code>cmd</code> after it has been defined.  I expect that there are a bunch of compiler warnings/errors that you are not seeing or ignoring."}, {"owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1426100016, "post_id": 28994817, "comment_id": 46238165, "body": "@PeterM, so you are saying the line cmd = &quot;test.txt&quot; is the issue? It cmd array of {t, e, s, t, . , t, x, t, &#39;\\0&#39;} ?"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1426100202, "post_id": 28994817, "comment_id": 46238275, "body": "@user3037172 Your attempted initialization is wrong, and is the basis of the question I referenced.  But also your assignment of <code>output</code> is also wrong."}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1426101182, "post_id": 28994817, "comment_id": 46238883, "body": "@user3037172 In two separate comments below you have stated that both <code>test.txt</code> and <code>output</code> as shown above are <b>not</b> how they are actually defined in your code.  I understand that you are trying to simplify things, but I believe you have gone too far.  I also think that you are in the realms of an XY problem (<a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-probl&zwnj;&#8203;em</a>) and that because of your simplifications we are not seeing your actual problem - and hence will have difficulty in actually answering your question."}, {"owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426101862, "post_id": 28994817, "comment_id": 46239258, "body": "Think your just trying to be &quot;that guy&quot;, but in source code of over 400 lines thats what I have to do.  CMD is defined as char cmd [50] and does not get initialized like cmd = &quot;test.txt&quot;. Rather, it is created character by character through some function that works and has no purpose in this question. So by the end of all that jazz it ends up with cmd = &quot;test.txt&quot; (IN THIS EXAMPLE). Output is created as char *output and is passed into the function with &amp;output and then the line *output = cmd is used before the function terminates. That is what happens."}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1426103362, "post_id": 28994817, "comment_id": 46240146, "body": "@user3037172 All that is relevant information that is missing from your question.  As such people have been forced to make assumptions from the code you presented as to what you are trying to do.  And you have now shown those assumptions to be wrong."}], "answers": [{"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1426099612, "post_id": 28994886, "comment_id": 46237913, "body": "If only the compiler gave warnings for things like this."}, {"owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426099831, "post_id": 28994886, "comment_id": 46238058, "body": "warning: incompatible pointer types assigning to &#39;char **&#39; from &#39;char [50]&#39; when I try that."}, {"owner": {"reputation": 959, "user_id": 4134127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tgIzK.jpg?s=128&g=1", "display_name": "Matt Ko", "link": "https://stackoverflow.com/users/4134127/matt-ko"}, "edited": false, "score": 1, "creation_date": 1426100028, "post_id": 28994886, "comment_id": 46238177, "body": "in that case, you haven&#39;t shown us the code you&#39;re trying to compile because there is nowhere a <code>char **</code> to be seen"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1426100086, "post_id": 28994886, "comment_id": 46238215, "body": "@ScottHunter of course the compiler gives warnings for this."}, {"owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426100206, "post_id": 28994886, "comment_id": 46238276, "body": "I never defined a char ** anywhere so I am not sure what the error is saying. I do pass in &amp;output into the function that has the line *output = cmd"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "reply_to_user": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426100679, "post_id": 28994886, "comment_id": 46238579, "body": "@user3037172 So what you are saying is that the code you have that defines <code>output</code> is not the code that are are showing above.  That is not helpful to us."}], "tags": [], "owner": {"reputation": 959, "user_id": 4134127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tgIzK.jpg?s=128&g=1", "display_name": "Matt Ko", "link": "https://stackoverflow.com/users/4134127/matt-ko"}, "is_accepted": false, "score": 3, "last_activity_date": 1426100600, "last_edit_date": 1426100600, "creation_date": 1426099562, "answer_id": 28994886, "question_id": 28994817, "link": "https://stackoverflow.com/questions/28994817/c-full-char-string-isnt-being-read-by-open-function-for-redirect/28994886#28994886", "title": "C - full char &#39;string&#39; isn&#39;t being read by open function for redirect", "body": "<p>I think that the issue is that <code>output</code> is a pointer to <code>char</code> and <code>*output</code> is a <code>char</code> and you're assigning a <code>char[]</code> to that.\nHave you tried this?</p>\n\n<pre><code>char cmd[50] = \"test.txt\";\noutput = cmd;\n</code></pre>\n\n<p>EDIT: I didn't see that the initialization was wrong as well at first. Updated code.</p>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1426100412, "post_id": 28995063, "comment_id": 46238406, "body": "Also, you don&#39;t want to use the <code>*</code> when assigning to <code>output</code>, just use <code>output = cmd</code>"}, {"owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426100618, "post_id": 28995063, "comment_id": 46238528, "body": "The problem is I do not know &quot;test.txt&quot; in my function. That test.txt is built one character a time, cmd is defined as just char cmd [50]; and then built one character a time to in this case &quot;test.txt&quot;. I cannot use the cstring library"}, {"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "reply_to_user": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "edited": false, "score": 0, "creation_date": 1426101848, "post_id": 28995063, "comment_id": 46239246, "body": "How is the string input? The user types one char at a time? In that case you can just loop through your string. <code>for(int i = 0; i &lt; 50; ++i) cmd[i] = inputChar;</code>"}], "tags": [], "owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1426100150, "creation_date": 1426100150, "answer_id": 28995063, "question_id": 28994817, "link": "https://stackoverflow.com/questions/28994817/c-full-char-string-isnt-being-read-by-open-function-for-redirect/28995063#28995063", "title": "C - full char &#39;string&#39; isn&#39;t being read by open function for redirect", "body": "<p>I doubt you can assign a string constant like that to a static string, like you're trying to do here in</p>\n\n<pre><code>cmd = \"test.txt\";\n</code></pre>\n\n<p>Instead, try to assign upon initialization:</p>\n\n<pre><code>char cmd[50] = \"test.txt\";\n</code></pre>\n\n<p>or use <code>strcpy(cmd, \"test.txt\");</code> with <code>include &lt;cstring&gt;</code></p>\n"}], "owner": {"reputation": 567, "user_id": 3037172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e4dd5dae8dfebe233ecf3d26564ef3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user3037172", "link": "https://stackoverflow.com/users/3037172/user3037172"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1426100600, "creation_date": 1426099337, "question_id": 28994817, "link": "https://stackoverflow.com/questions/28994817/c-full-char-string-isnt-being-read-by-open-function-for-redirect", "title": "C - full char &#39;string&#39; isn&#39;t being read by open function for redirect", "body": "<p>this is a poorly worded title question and I apologize but I do not know the proper terminology.</p>\n\n<p>I have a variable output formed by.. (it ends up being this way but these 4 lines aren't in order):</p>\n\n<pre><code>char cmd[50]\ncmd = \"test.txt\"\nchar *output;\n*output = cmd;\n</code></pre>\n\n<p>then I try to call open like:</p>\n\n<pre><code>int outfile;\noutfile = open( output, O_WRONLY | O_CREAT, S_IRUSR | S_IWUSR | S_IRGRP );\n</code></pre>\n\n<p>but that does not work. However this works:</p>\n\n<pre><code>int outfile;\noutfile = open( \"test.txt\", O_WRONLY | O_CREAT, S_IRUSR | S_IWUSR | S_IRGRP );\n</code></pre>\n\n<p>I am assuming what is being stored in output is just 't' but I need all of it to make this work. Any ideas? The context of this is I am manually trying to do a redirect. </p>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1426103506, "post_id": 28994762, "comment_id": 46240232, "body": "And what exactly do you want to know?"}, {"owner": {"reputation": 1, "user_id": 4659672, "user_type": "registered", "profile_image": "https://graph.facebook.com/664107237048020/picture?type=large", "display_name": "Mie Branda", "link": "https://stackoverflow.com/users/4659672/mie-branda"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1426107942, "post_id": 28994762, "comment_id": 46242793, "body": "Thanks for answering. i want to know why everytime i try to draw the little circles on top of the first one, the 1st one disappear"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1426108059, "post_id": 28994762, "comment_id": 46242850, "body": "No one can answer that, wothout seeing the relevant code. The code you have pasted so far is also not correct, as there is no <code>glEnd()</code> call, which could screw up everything."}, {"owner": {"reputation": 1, "user_id": 4659672, "user_type": "registered", "profile_image": "https://graph.facebook.com/664107237048020/picture?type=large", "display_name": "Mie Branda", "link": "https://stackoverflow.com/users/4659672/mie-branda"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1426108896, "post_id": 28994762, "comment_id": 46243331, "body": "Ah okay thank you i&#39;m still learning, it&#39;s quit difficult. Can you recommend me a good book please?"}, {"owner": {"reputation": 1, "user_id": 4659672, "user_type": "registered", "profile_image": "https://graph.facebook.com/664107237048020/picture?type=large", "display_name": "Mie Branda", "link": "https://stackoverflow.com/users/4659672/mie-branda"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1426168751, "post_id": 28994762, "comment_id": 46268520, "body": "Anyone please? i really need to know how to draw overlapping shapes?"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1426188016, "post_id": 28994762, "comment_id": 46280889, "body": "Not exactly books, but have a look at the <a href=\"http://www.arcsynthesis.org/gltut/\" rel=\"nofollow noreferrer\">arcsynthesis</a> and <a href=\"http://open.gl\" rel=\"nofollow noreferrer\">open.gl</a> tutorials."}], "owner": {"reputation": 1, "user_id": 4659672, "user_type": "registered", "profile_image": "https://graph.facebook.com/664107237048020/picture?type=large", "display_name": "Mie Branda", "link": "https://stackoverflow.com/users/4659672/mie-branda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426099704, "creation_date": 1426099132, "last_edit_date": 1426099704, "question_id": 28994762, "link": "https://stackoverflow.com/questions/28994762/draw-overlapping-shapes", "title": "Draw overlapping shapes", "body": "<p>I'd like to draw one shape over another, and be able to view it from another perspective.</p>\n\n<p>This is what I want it to look like:</p>\n\n<p><img src=\"https://i.stack.imgur.com/ucilW.png\" alt=\"A spider with 4 legs, and a circle at the end of each leg\"></p>\n\n<p>This is what I have so far.</p>\n\n<pre><code>void Draw() \n{\n    glClear(GL_COLOR_BUFFER_BIT);\n    #define r 0.5\n    #define PI 3.1415926535898 \n    GLint p = 100;\n\n    double angle = 2*PI/p;\n\n    glPolygonMode( GL_FRONT, GL_FILL );\n    glColor3f(0.3,0.2,0.5);\n\n    glBegin(GL_POLYGON);\n    double angle1=0.0;\n    glVertex2d(r*cos(0.0),r*sin(0.0));\n    int i;\n    for ( i=0 ; i&lt; p ;i++) {\n        glVertex2d(r*cos(angle1),r*sin(angle1));\n        angle1+=angle ;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "math", "formula"], "comments": [{"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 5, "creation_date": 1426098930, "post_id": 28994618, "comment_id": 46237452, "body": "My guess would be the integer division in <code>pow(2, (i&#47;7))</code>."}, {"owner": {"reputation": 1135, "user_id": 4611899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31353fd68988b84604193be2eb7cc482?s=128&d=identicon&r=PG&f=1", "display_name": "Rollen", "link": "https://stackoverflow.com/users/4611899/rollen"}, "edited": false, "score": 1, "creation_date": 1426098930, "post_id": 28994618, "comment_id": 46237453, "body": "Are you confident that that formula is Integer math? There is no meaning to floor unless they are using floating point... (such as in the <code>i&#47;7</code>)."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 3, "creation_date": 1426098933, "post_id": 28994618, "comment_id": 46237456, "body": "You are calling floor but doing all of your math with ints."}, {"owner": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "edited": false, "score": 2, "creation_date": 1426098991, "post_id": 28994618, "comment_id": 46237502, "body": "I don&#39;t think this is your problem, but since the summation in the equation you linked to has an upper bound of &quot;level - 1&quot;, you should have a <code>for loop</code> like this instead of what you have: <code>for(i = 1; i &lt; lv; i++){</code>"}, {"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 2, "creation_date": 1426099183, "post_id": 28994618, "comment_id": 46237628, "body": "You should cast the variable <code>i</code> as a <code>float</code>, as in <code>pow(2, ((float)i&#47;7))</code>."}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1426106979, "last_edit_date": 1426106979, "creation_date": 1426106660, "answer_id": 28996974, "question_id": 28994618, "link": "https://stackoverflow.com/questions/28994618/math-formula-in-c-for-runescape-experience/28996974#28996974", "title": "Math Formula in C for RuneScape experience", "body": "<p>Let's do a simple test with level 1.  </p>\n\n<pre><code>1/7 is 0.14... \n2 to the power of (1/7) is 1.104...\ntimes 300, we obtain 331.2...\nadd 1 and take the integer part, you'll obtain 332 which divided by 4 taking the integer part is 83\n</code></pre>\n\n<p>The output according to this formula shall be 83.  </p>\n\n<p>The problem is that <code>i</code> is defined as <code>int</code>, and 7 is an <code>int</code> constant.  The conversion rules of C, make the compiler understands this as an integer division, with an integer result:  </p>\n\n<pre><code>integer division of 1 by 7 is 0 (remains 1)\n2 to the power of 0 is always 1.  \ntimes 300 is 300\nadd 1 and take the floor you obtain 301, which divided by 4 taking the integer part is 75, the value that you've found. \n</code></pre>\n\n<p>How to solve the problem ?  Change your expression slightly:  </p>\n\n<pre><code>        xp += floor((i + (300 * (pow(2, (i / 7.0))))));\n</code></pre>\n\n<p>Writing <code>7.0</code> makes the constant a double.  Dividing an integer <code>i</code> by a double is according to the implicit conversion rules understood as a floating point operation with a double result.  <code>pow()</code> is itself a double function, so that the rest of the expression works as designed.  </p>\n\n<p>With this change the level 99 gives 14 391 160.  </p>\n\n<p>According to <a href=\"http://www.tip.it/runescape/pages/view/xp_table.htm\" rel=\"nofollow\">this table</a>, the result is correct (if you understadn your output as the experience points needed to get to the next level).  </p>\n\n<p><strong><em>Trick to know:</strong>  In case of doubt, in a mathematical formula, when mixing <code>int</code> and <code>float</code> or <code>double</code>, you can also cast explicitely to the right type, for example <code>(double)i / 7</code>.</em> </p>\n"}], "owner": {"reputation": 9, "user_id": 2127599, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d21da0c102386ddcf055309ddcab39f3?s=128&d=identicon&r=PG", "display_name": "Sp333th", "link": "https://stackoverflow.com/users/2127599/sp333th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1426106979, "creation_date": 1426098648, "last_edit_date": 1426104546, "question_id": 28994618, "link": "https://stackoverflow.com/questions/28994618/math-formula-in-c-for-runescape-experience", "title": "Math Formula in C for RuneScape experience", "body": "<p>I'm trying to implement a mathematical formula in C that calculates the XP needed for a certain Runescape level and I am not getting the correct output. Level 1 gives \"75\" XP and Level 99 gives \"11059837\". What is wrong with my implementation? I cant figure it out. Here is what I wrote: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    /* Determines the XP needed for a Runescape Lv */\n    int lv;\n    printf(\"Enter a Lv(1-99): \");\n    scanf(\"%d\", &amp;lv);\n\n    if(lv &gt; 99 || lv &lt; 1) {\n        printf(\"Invalid Lv\");\n    } else {\n        int xp = 0;\n        int output = 0;\n\n        int i;\n        for(i = 1; i &lt;= lv; i++) {\n            xp += floor((i + (300 * (pow(2, (i/7))))));\n        }\n        output = floor((xp/4));\n        printf(\"The amount of XP needed for Lv%d is %d\\n\", lv, output);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The math formula is:  <img src=\"https://i.stack.imgur.com/SSHgX.gif\" alt=\"formula\"></p>\n"}, {"tags": ["c", "robotics"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 5, "creation_date": 1426098622, "post_id": 28994556, "comment_id": 46237267, "body": "This is a request for a RobotC book. At <i>best</i>, it&#39;s like four questions in one, which is also not allowed."}, {"owner": {"reputation": 338, "user_id": 4206450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377bb381eea3dd490cd2c9a7921a3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "cweb", "link": "https://stackoverflow.com/users/4206450/cweb"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1426098983, "post_id": 28994556, "comment_id": 46237494, "body": "I can&#39;t find much about RobotC online, and it would make more sense if I could apply what I know from other programming languages to RobotC."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426099203, "post_id": 28994556, "comment_id": 46237642, "body": "There&#39;s nothing special about that framework, there&#39;s no such thing like a <i>&quot;mix between C and C++&quot;</i>. It&#39;s a ll just plain C++ code, maybe using some C .APIs."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1426099506, "post_id": 28994556, "comment_id": 46237837, "body": "Strange.  Googling &#39;RobotC&#39; gave: &#39;about 396,000 results&#39;."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1426099712, "post_id": 28994556, "comment_id": 46237974, "body": "To understand Problem 1, you need to find the definition of <code>motor</code>. If that doesn&#39;t clear things up for you, then you&#39;ll need to add the definition of <code>motor</code> to the question. All three snippets in #2 do the same thing, and the first snippet has been allowed since C was originally developed, which would be around 1970."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426099817, "post_id": 28994556, "comment_id": 46238043, "body": "Can you please make clear what is RobitC? From your question it sounds like it is a language. From comments it seems like it is a framework. I mean you are using it, so at least this you should know :P"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426100140, "post_id": 28994556, "comment_id": 46238242, "body": "well, I googled it myself and according to their homepage it is a C-based programming language. Please do not tag C++ unrelated questions as C++"}], "answers": [{"tags": [], "owner": {"reputation": 2033, "user_id": 3133680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPJFK.jpg?s=128&g=1", "display_name": "rageandqq", "link": "https://stackoverflow.com/users/3133680/rageandqq"}, "is_accepted": true, "score": 5, "last_activity_date": 1426098593, "creation_date": 1426098593, "answer_id": 28994604, "question_id": 28994556, "link": "https://stackoverflow.com/questions/28994556/can-somebody-help-explain-robotc-syntax/28994604#28994604", "title": "Can somebody help explain RobotC Syntax?", "body": "<p>1) You are setting the value of the item in array <code>motor</code> at index <code>motorA</code> to be equal to <code>50</code>.</p>\n\n<p>2) Multiple in-line assignments are evaluated from right to left, so this is the same as</p>\n\n<pre><code>speed = 127;\nmotor[rightMotor] = speed;\nmotor[leftMotor] = motor[rightMotor];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4097, "user_id": 2714837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7349d8c324d737e77c2d1d51d3350929?s=128&d=identicon&r=PG", "display_name": "CoolBots", "link": "https://stackoverflow.com/users/2714837/coolbots"}, "edited": false, "score": 0, "creation_date": 1478159192, "post_id": 33756016, "comment_id": 68042807, "body": "RobotC takes its syntax from C - hence the name. Java is an Object-Oriented language, that also happens to use C/C++ syntax, and is somewhat based on C++; but RobotC certainly is not based on Java."}, {"owner": {"reputation": 4097, "user_id": 2714837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7349d8c324d737e77c2d1d51d3350929?s=128&d=identicon&r=PG", "display_name": "CoolBots", "link": "https://stackoverflow.com/users/2714837/coolbots"}, "edited": false, "score": 0, "creation_date": 1478159332, "post_id": 33756016, "comment_id": 68042865, "body": "Also, you can set a value in an array, or read a value from an array; you can&#39;t <i>call</i> an array, it&#39;s not a function."}], "tags": [], "owner": {"reputation": 9, "user_id": 5571787, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6bd8721a69b158d6948202da96142956?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/5571787/brad"}, "is_accepted": false, "score": 0, "last_activity_date": 1447760456, "creation_date": 1447760456, "answer_id": 33756016, "question_id": 28994556, "link": "https://stackoverflow.com/questions/28994556/can-somebody-help-explain-robotc-syntax/33756016#33756016", "title": "Can somebody help explain RobotC Syntax?", "body": "<p>RobotC takes many of its syntax logic from Java. Assuming motorA has been connected in the motor set-up than the motor can be told to move in this way.</p>\n\n<p>motor[motorA] = 50;</p>\n\n<p>essentially your experience on other code languages is correct and as you are calling and array. You are telling the program that in the array 'motor' at index 'motorA' set the value to '50'. since the 'motorA' index in linked to the actual motor than is can use the given value to know how to power the motor.</p>\n"}], "owner": {"reputation": 338, "user_id": 4206450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377bb381eea3dd490cd2c9a7921a3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "cweb", "link": "https://stackoverflow.com/users/4206450/cweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 28994604, "answer_count": 2, "score": -1, "last_activity_date": 1447760456, "creation_date": 1426098410, "last_edit_date": 1426101482, "question_id": 28994556, "link": "https://stackoverflow.com/questions/28994556/can-somebody-help-explain-robotc-syntax", "title": "Can somebody help explain RobotC Syntax?", "body": "<p>I have been programming for some time in Python, and JavaScript.  I have also programmed with the arduino language which is a mix between C and C++.  I was just introduced to RobotC.  The syntax used for RobotC is not like any language I have learned.  Can someone help explain these syntax differences so I can better understand it?</p>\n\n<p><strong>Problem 1:</strong></p>\n\n<p>When making a motor turn, you can use the following syntax:</p>\n\n<pre><code>motor[motorA] = 50\n</code></pre>\n\n<p>What did that line just do?  In any other programming language that is how you would change a value in an array, but in RobotC it acts like a function call.  Is 'motor' an array, or an object?  And why do I need a function when controlling servos?</p>\n\n<p><strong>Problem 2:</strong></p>\n\n<p>When in the history of programming is this allowed?</p>\n\n<pre><code>motor[leftMotor] = motor[rightMotor] = speed = 127;\n</code></pre>\n\n<p>And what which of the following would this code do?</p>\n\n<pre><code>speed = 127;\nmotor[rightMotor] = speed;\nmotor[leftMotor] = motor[rightMotor];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>speed = 127;\nmotor[rightMotor] = 127;\nmotor[leftMotor] = 127;\n</code></pre>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1426098860, "post_id": 28994470, "comment_id": 46237407, "body": "Closely related: <a href=\"http://stackoverflow.com/q/19210935/827263\">stackoverflow.com/q/19210935/827263</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 0, "creation_date": 1426099676, "post_id": 28994770, "comment_id": 46237954, "body": "Can you clarify why <code>&amp;(&quot;\\021C%set&quot;[1])</code> is the address of <code>&quot;C%set&quot;</code>? I didn&#39;t fully understand your explanation."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 0, "creation_date": 1426100016, "post_id": 28994770, "comment_id": 46238163, "body": "@DanielKleinstein - C strings are arrays of chars. So <code>&quot;\\021C%set&quot;[1]</code> means element 1 of the array &quot;\\021C%set&quot;. Element 1 is &#39;C&#39; (because element 0 is &#39;\\021&#39;), so &amp;(&quot;\\021C%set&quot;[1]) is the address of &#39;C&#39; and the address of &quot;C%set&quot;."}, {"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 1, "creation_date": 1426100088, "post_id": 28994770, "comment_id": 46238217, "body": "What does <code>\\021</code> mean? I thought it meant the null-character followed by 2 and then 1."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 1, "creation_date": 1426100269, "post_id": 28994770, "comment_id": 46238313, "body": "@DanielKleinstein - It&#39;s an <a href=\"http://en.wikipedia.org/wiki/Escape_sequences_in_C\" rel=\"nofollow noreferrer\">octal escape sequence</a>."}], "tags": [], "owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "is_accepted": true, "score": 4, "last_activity_date": 1426099162, "creation_date": 1426099162, "answer_id": 28994770, "question_id": 28994470, "link": "https://stackoverflow.com/questions/28994470/what-will-be-output-of-following-expression-and-why/28994770#28994770", "title": "What will be output of following expression and why?", "body": "<p><code>unix</code> is a <a href=\"https://gcc.gnu.org/onlinedocs/cpp/System-specific-Predefined-Macros.html#System-specific-Predefined-Macros\" rel=\"nofollow\">predefined macro indicating it's a Unix-like system</a>.</p>\n\n<p>In C, <code>index[array]</code> is identical to <code>array[index]</code>. As explained by <a href=\"https://msdn.microsoft.com/en-us/library/th52k9c8.aspx\" rel=\"nofollow\">MSDN</a>:</p>\n\n<blockquote>\n  <p>Usually, the value represented by <em>postfix-expression</em> is a pointer value, such as an array identifier, and <em>expression</em> is an integral value (including enumerated types). However, all that is required syntactically is that one of the expressions be of pointer type and the other be of integral type. Thus the integral value could be in the <em>postfix-expression</em> position and the pointer value could be in the brackets in the expression or subscript position.</p>\n</blockquote>\n\n<p>So</p>\n\n<pre><code>printf(&amp;unix[\"\\021C%set\"],(unix)[\"Chb\"]+\"Trick\"-0X67);\n</code></pre>\n\n<p>translates to</p>\n\n<pre><code>printf(&amp;\"(\\021C%set\"[1]),\"Chb\"[1]+\"Trick\"-0X67);\n</code></pre>\n\n<p><code>&amp;(\"\\021C%set\"[1])</code> takes the address of the first element of \"\\021C%set\", which is equivalent to taking the address of \"C%set\" (due to C pointer arithmetic).  Simplify that, and rearrange some operands:</p>\n\n<pre><code>printf(\"C%set\",\"Trick\"+\"Chb\"[1]-0X67);\n</code></pre>\n\n<p><code>\"Chb\"[1]</code> is <code>'h'</code>, which is ASCII value 0x68, so <code>\"Chb\"[1]-0X67</code> is 1, and <code>\"Trick\"+1</code> is <code>\"rick\"</code> (due to C pointer arithmetic). So the code simplifies further to</p>\n\n<pre><code>printf(\"C%set\",\"rick\");\n</code></pre>\n\n<p>which prints \"Cricket.\"</p>\n"}, {"tags": [], "owner": {"reputation": 6135, "user_id": 894885, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/96b3d11d987edfac71b38328edf04b44?s=128&d=identicon&r=PG", "display_name": "Samuel Edwin Ward", "link": "https://stackoverflow.com/users/894885/samuel-edwin-ward"}, "is_accepted": false, "score": 1, "last_activity_date": 1426259958, "last_edit_date": 1426259958, "creation_date": 1426099293, "answer_id": 28994804, "question_id": 28994470, "link": "https://stackoverflow.com/questions/28994470/what-will-be-output-of-following-expression-and-why/28994804#28994804", "title": "What will be output of following expression and why?", "body": "<p>Well, <code>unix</code> is 1 in this implementation.  <code>a[b]</code> is something like <code>*(a+b)</code>, and <code>a+b</code> is somethng like <code>b+a</code>, so <code>&amp;unix[\"\\021C%set\"]</code> is something like <code>&amp;(*(\"\\021C%set\"+1))</code>.  Since <code>&amp;(*(c))</code> is more or less just <code>c</code>, this gets you <code>\"\\021C%set\"+1</code>, which is a pointer to the second character, so just <code>\"C%set\"</code>, which is a format string for \"C\" followed by a string followed by \"et\".  <code>\\021</code> is an octal escape (which are 1 to 3 octal digits long; however many valid), so it only counts as one character.</p>\n\n<p>Next we have <code>(unix)[\"Chb\"]</code>, which for the same reasons is the same as \"Chb\"[1], which will be the int value of the 'h' character, which in ASCII is 104. On the other side, <code>0X67</code> is 103.  So we have <code>104+\"Trick\"-103</code>, or <code>\"Trick\"+1</code>.  This is the same pointer arithmetic on a string literal thing used on the left side, and it gets you \"rick\".</p>\n\n<p>So we're left with:</p>\n\n<pre><code>printf(\"C%set\", \"rick\");\n</code></pre>\n\n<p>Which prints \"rick\" between \"C\" and \"et\" (Cricket).</p>\n"}], "owner": {"reputation": 19084, "user_id": 428705, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b8182c95cf5d0f427920118d6d2e4153?s=128&d=identicon&r=PG", "display_name": "Vivek Goel", "link": "https://stackoverflow.com/users/428705/vivek-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 1, "accepted_answer_id": 28994770, "answer_count": 2, "score": 0, "last_activity_date": 1426259958, "creation_date": 1426098151, "question_id": 28994470, "link": "https://stackoverflow.com/questions/28994470/what-will-be-output-of-following-expression-and-why", "title": "What will be output of following expression and why?", "body": "<pre><code>printf(&amp;unix[\"\\021C%set\"],(unix)[\"Chb\"]+\"Trick\"-0X67);\n</code></pre>\n\n<p>It gives output as \"Cricket\". But I am not able to understand why?\n<a href=\"http://ideone.com/fTEAHG\" rel=\"nofollow\">http://ideone.com/fTEAHG</a></p>\n"}, {"tags": ["c", "gcc", "uthash"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4659714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24378a45202b2ff86d9f73f1e09ef95d?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan Townsend", "link": "https://stackoverflow.com/users/4659714/duncan-townsend"}, "edited": false, "score": 0, "creation_date": 1426097086, "post_id": 28994038, "comment_id": 46236304, "body": "Even after including <code>string.h</code>?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1426097088, "post_id": 28994038, "comment_id": 46236306, "body": "Of course, that&#39;s possible. You just have to define the correct feature test macro (<code>-D_POSIX_C_SOURCE=200809L</code>). See the <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow noreferrer\">man page</a>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1426097171, "post_id": 28994038, "comment_id": 46236362, "body": "It&#39;s not quite correct to say <code>strdup()</code> is not a standard function.  It&#39;s not standardized by C99, but it <i>is</i> standardized by POSIX."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426097531, "post_id": 28994038, "comment_id": 46236603, "body": "Note that there are other feature test macros that will also result in <code>strdup()</code> being defined by <code>string.h</code>.  In fact, the Linux/GLIBC manpage doesn&#39;t even mention <code>_POSIX_C_SOURCE</code>, but rather <code>_SVID_SOURCE</code> or <code>_BSD_SOURCE</code>, or <code>_XOPEN_SOURCE</code> &gt;= 500."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426098275, "post_id": 28994038, "comment_id": 46237045, "body": "@JohnBollinger lately when compiling KDE, i&#39;ve noticed that they use <code>_BSD_SOURCE</code> and <b>glibc</b> was complaining about it via <code>#warning</code>, and suggesting <code>_XOPEN_SOURCE</code>."}, {"owner": {"reputation": 3, "user_id": 4659714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24378a45202b2ff86d9f73f1e09ef95d?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan Townsend", "link": "https://stackoverflow.com/users/4659714/duncan-townsend"}, "edited": false, "score": 0, "creation_date": 1426098565, "post_id": 28994038, "comment_id": 46237222, "body": "Is there one of those that is preferable? It seems like they each enable a somewhat arbitrary collection of functionality."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3, "user_id": 4659714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24378a45202b2ff86d9f73f1e09ef95d?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan Townsend", "link": "https://stackoverflow.com/users/4659714/duncan-townsend"}, "edited": false, "score": 0, "creation_date": 1426098836, "post_id": 28994038, "comment_id": 46237396, "body": "@DuncanTownsend actually it seems from it&#39;s name like <code>_POSIX_C_SOURCE</code> is the best option, atlhough according to the manual it works since <b>glibc-2.12</b>, which doesn&#39;t matter if you are using another c library. For <b>glibc-2.10</b> and before it was <code>_GNU_SOURCE</code>, if you are using a build system, let it test which one to use when configuring the source."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1426097283, "last_edit_date": 1426097283, "creation_date": 1426096764, "answer_id": 28994038, "question_id": 28994015, "link": "https://stackoverflow.com/questions/28994015/implicit-declaration-of-function-in-utarray-h-part-of-uthash/28994038#28994038", "title": "&quot;implicit declaration of function&quot; in utarray.h (part of uthash)", "body": "<p>The problem is that <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow\"><code>strdup()</code></a> is not a c standard function it's a <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow\"><strong>POSIX</strong></a> function, you can't use <code>-std=c99</code> when you use <code>strdup()</code> unless you add the following <code>-D_POSIX_C_SOURCE=200809L</code> to the compilation command \n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc -Wall -Wpedantic -Wextra -Werror -pedantic-errors -std=c99 -D_POSIX_C_SOURCE=200809L\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13656906, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/995dbd3567ad3fa9b1fb6a2c5cdc8101?s=128&d=identicon&r=PG", "display_name": "Mordechai Malka", "link": "https://stackoverflow.com/users/13656906/mordechai-malka"}, "is_accepted": false, "score": 0, "last_activity_date": 1590998702, "last_edit_date": 1590998702, "creation_date": 1590997305, "answer_id": 62127635, "question_id": 28994015, "link": "https://stackoverflow.com/questions/28994015/implicit-declaration-of-function-in-utarray-h-part-of-uthash/62127635#62127635", "title": "&quot;implicit declaration of function&quot; in utarray.h (part of uthash)", "body": "<p>I had the same error with <code>strdup)</code>, so I added the dummy prototype statement </p>\n\n<pre><code>char * strdup(char *) ; \n</code></pre>\n\n<p>I don\u2019t get the error message anymore.</p>\n"}], "owner": {"reputation": 3, "user_id": 4659714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24378a45202b2ff86d9f73f1e09ef95d?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan Townsend", "link": "https://stackoverflow.com/users/4659714/duncan-townsend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 28994038, "answer_count": 2, "score": 0, "last_activity_date": 1590998702, "creation_date": 1426096698, "last_edit_date": 1426096809, "question_id": 28994015, "link": "https://stackoverflow.com/questions/28994015/implicit-declaration-of-function-in-utarray-h-part-of-uthash", "title": "&quot;implicit declaration of function&quot; in utarray.h (part of uthash)", "body": "<p>I'm using utarray (part of the <a href=\"https://github.com/troydhanson/uthash\" rel=\"nofollow\">uthash library</a>) for a project. Whenever I include it, I get the following error:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>utarray.h:221:3: error: implicit declaration of function \u2018strdup\u2019 [-Wimplicit-function-declaration]\n</code></pre>\n\n<p>Admittedly, I use some pretty aggressive flags when compiling (<code>-Wall -Wpedantic -Wextra -Werror -pedantic-errors -std=c99</code>), but I don't understand why this should be an error at all. <code>strdup</code> is defined in <code>string.h</code> (according to <code>man strdup</code>) which is very clearly included from <code>utarray.h</code>.</p>\n\n<p>What am I doing wrong? Google was no help. (apparently nobody else tries to compile <code>utarray.h</code> with these flags?)</p>\n\n<p>Here's an example file that fails to compile (using <code>gcc -Wall -Wpedantic -Wextra -Werror -pedantic-errors -std=c99 scratch.c</code>).\n</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include \"utarray.h\"\n\nint main(int argc, char *argv[]) {\n    (void)argc;\n    (void)argv;\n    return 0;\n}\n</code></pre>\n\n<p>versions: gcc 4.9.2, glibc 2.21, uthash 1.9.9</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426097767, "post_id": 28993790, "comment_id": 46236756, "body": "<b><i><a href=\"http://stackoverflow.com/q/19626615/645128\">Writing to identical output to console and buffer simultaneously</a></i></b>"}, {"owner": {"reputation": 339, "user_id": 1905276, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/37b5342d290c17f586742504a53a1899?s=128&d=identicon&r=PG", "display_name": "Santhosh Kumar", "link": "https://stackoverflow.com/users/1905276/santhosh-kumar"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1426098218, "post_id": 28993790, "comment_id": 46237016, "body": "Wow! Thanks Ryyker you have answered my question. Basically I open the stdout and read it in. I will do it and post the final working code later. This case can be closed."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 1905276, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/37b5342d290c17f586742504a53a1899?s=128&d=identicon&r=PG", "display_name": "Santhosh Kumar", "link": "https://stackoverflow.com/users/1905276/santhosh-kumar"}, "edited": false, "score": 0, "creation_date": 1426097031, "post_id": 28993989, "comment_id": 46236274, "body": "I dont want to do &gt; and save it to a file and then read it to the buffer. I want to prevent redirecting stdout to a file. I cannot write to the hard disk, I have claim the print out from GetData.exe directly to my local buffer DataBuffer[]. Wait a min I just read your comment on hStdOutPut, can I then read in the stdout to my buffer?"}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 1, "last_activity_date": 1426102746, "last_edit_date": 1426102746, "creation_date": 1426096611, "answer_id": 28993989, "question_id": 28993790, "link": "https://stackoverflow.com/questions/28993790/how-can-i-save-the-data-written-to-stdout-to-local-buffer/28993989#28993989", "title": "How can I save the data written to stdout to local buffer", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686331(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms686331(v=vs.85).aspx</a>\nUse with your <code>STARTUPINFO</code> parameter 'si', use <code>STARTF_USESTDHANDLES</code> in the <code>dwFlags</code>, and provide a <code>HANDLE</code> for <code>hStdOutput</code>.</p>\n\n<p>Or, even easier, you could just redirect the output the file on the command line. Eg:\n<code>GetData.exe &gt; File.txt</code></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx</a></p>\n\n<p>\"Creating a Child Process with Redirected Input and Output\" sample, adapted to only read the stdout of the process, and fits your setup. </p>\n\n<pre><code>#include &lt;comdef.h&gt;\n\nint main() {\nSTARTUPINFO si;\nPROCESS_INFORMATION pi;\nchar DataBuffer[100][100];\n\nZeroMemory(&amp;si, sizeof(si));\nsi.cb = sizeof(si);\nZeroMemory(&amp;pi, sizeof(pi));\n\nSECURITY_ATTRIBUTES saAttr;\n\n// Set the bInheritHandle flag so pipe handles are inherited. \n\nsaAttr.nLength = sizeof(SECURITY_ATTRIBUTES);\nsaAttr.bInheritHandle = TRUE;\nsaAttr.lpSecurityDescriptor = NULL;\n\nHANDLE g_hChildStd_IN_Rd = NULL;\nHANDLE g_hChildStd_OUT_Rd = NULL;\nHANDLE g_hChildStd_OUT_Wr = NULL;\n\n// Create a pipe for the child process's STDOUT. \n\nif (!CreatePipe(&amp;g_hChildStd_OUT_Rd, &amp;g_hChildStd_OUT_Wr, &amp;saAttr, 0))\n{\n    printf(\"StdoutRd CreatePipe\");\n    return 0;\n}\n\n// Ensure the read handle to the pipe for STDOUT is not inherited.\nif (!SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0))\n{\n    printf(\"StdoutRd CreatePipe\");\n    return 0;\n}\n\nsi.cb = sizeof(STARTUPINFO);\nsi.hStdError = g_hChildStd_OUT_Wr;\nsi.hStdOutput = g_hChildStd_OUT_Wr;\nsi.hStdInput = g_hChildStd_IN_Rd;\nsi.dwFlags |= STARTF_USESTDHANDLES;\n\nif (!CreateProcess(NULL,  // No module name (use command line)\n    \"c:\\\\windows\\\\system32\\\\whoami.exe\",  // Command line\n    NULL,           // Process handle not inheritable\n    NULL,           // Thread handle not inheritable\n    TRUE,           // Set handle inheritance to TRUE\n    0,              // No creation flags\n    NULL,           // Use parent's environment block\n    NULL,           // Use parent's starting directory \n    &amp;si,            // Pointer to STARTUPINFO structure\n    &amp;pi)           // Pointer to PROCESS_INFORMATION structure\n    )\n{\n    _com_error e(GetLastError());\n    printf(\"CreateProcess failed (%d - %s).\\n\", GetLastError(), e.ErrorMessage());\n    return 0;\n}\n\nDWORD bytesRead;\nif (!ReadFile(g_hChildStd_OUT_Rd, DataBuffer, 100 * 100, &amp;bytesRead, NULL))\n{\n    _com_error e(GetLastError());\n    printf(\"ReadFile failed (%d - %s).\\n\", GetLastError(), e.ErrorMessage());\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Now, the output of whoami.exe is in DataBuffer. Note that this sample disregards a lot of safety issues, which you may want to address, especially if you are not providing GetData.exe yourself.</p>\n"}], "owner": {"reputation": 339, "user_id": 1905276, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/37b5342d290c17f586742504a53a1899?s=128&d=identicon&r=PG", "display_name": "Santhosh Kumar", "link": "https://stackoverflow.com/users/1905276/santhosh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426190104, "creation_date": 1426096050, "question_id": 28993790, "link": "https://stackoverflow.com/questions/28993790/how-can-i-save-the-data-written-to-stdout-to-local-buffer", "title": "How can I save the data written to stdout to local buffer", "body": "<p>In MyProgram.c I am doing  CreateProcess(\"GetData.exe\" ....);. GetData when run on a command line prints about 100 lines of data to stdout.  When I run my MyPragrame.exe I want that data not going to stdout instead I want it to be saved in the buffer DataBuffer[100][100] assuming there are 100 lines whose strlen is 100. Please help out. Thanks</p>\n\n<p>MyProgram.c:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid\nmain()\n{\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    char DataBuffer[100][100];\n\n    ZeroMemory( &amp;si, sizeof(si) );\n    si.cb = sizeof(si);\n    ZeroMemory( &amp;pi, sizeof(pi) );\n\n    if( !CreateProcess( NULL,  // No module name (use command line)\n        \"Getdata.exe\",  // Command line\n        NULL,           // Process handle not inheritable\n        NULL,           // Thread handle not inheritable\n        FALSE,          // Set handle inheritance to FALSE\n        0,              // No creation flags\n        NULL,           // Use parent's environment block\n        NULL,           // Use parent's starting directory \n        &amp;si,            // Pointer to STARTUPINFO structure\n        &amp;pi )           // Pointer to PROCESS_INFORMATION structure\n    ) \n    {\n        printf( \"CreateProcess failed (%d).\\n\", GetLastError() );\n        return;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "file", "replace"], "comments": [{"owner": {"reputation": 2669, "user_id": 2193235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e9927de2a623831360a8b6ea20811?s=128&d=identicon&r=PG", "display_name": "msb", "link": "https://stackoverflow.com/users/2193235/msb"}, "edited": false, "score": 0, "creation_date": 1426096460, "post_id": 28993789, "comment_id": 46235896, "body": "@alk that would not copy the rest of it. Corax, use a flag... start it with zero, set it to 1 after the first replacement, only do the replacement if the flag is zero."}, {"owner": {"reputation": 2964, "user_id": 2246380, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/piBvo.png?s=128&g=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2246380/ram"}, "edited": false, "score": 0, "creation_date": 1426096560, "post_id": 28993789, "comment_id": 46235968, "body": "@Corax do you mean you need just replace the first occurrence instead of all occurrences? Please make it clear."}, {"owner": {"reputation": 5, "user_id": 4629946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/COuDz.jpg?s=128&g=1", "display_name": "Corax", "link": "https://stackoverflow.com/users/4629946/corax"}, "reply_to_user": {"reputation": 2964, "user_id": 2246380, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/piBvo.png?s=128&g=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2246380/ram"}, "edited": false, "score": 0, "creation_date": 1426153665, "post_id": 28993789, "comment_id": 46258567, "body": "@Ram not the first occurrence but a specifc occurrence. My file is a list of person who has an id, name and surname. If the user wants to change a name, but there are more name like that I want to recognize it by ID. But how can I recognize by ID?"}, {"owner": {"reputation": 2964, "user_id": 2246380, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/piBvo.png?s=128&g=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2246380/ram"}, "edited": false, "score": 0, "creation_date": 1426166836, "post_id": 28993789, "comment_id": 46267057, "body": "@Corax Please add these details to the question by editing it. I am helping you improve your question so that it gets upvoted and gets answers faster."}], "owner": {"reputation": 5, "user_id": 4629946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/COuDz.jpg?s=128&g=1", "display_name": "Corax", "link": "https://stackoverflow.com/users/4629946/corax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426096637, "creation_date": 1426096034, "question_id": 28993789, "link": "https://stackoverflow.com/questions/28993789/replace-only-one-word-and-not-any-occurrence-in-a-file-c", "title": "Replace only one word and not any occurrence in a file C", "body": "<p>I wrote a code to replace a word in a file with another that I take in input. In input I ask what word the user wants to replace and with what word he wants to replace it. The code works, but he replace every occurrence of the word. I tryed in different ways but I don't know how to let it works. Can someone help me? Thank you</p>\n\n<pre><code>char nomefile2[50];\nint linea;\nwrite(conn_fd,\"\\nPREGO INSERIRE IL NOME DELL'APPELLO:\",strlen(\"PREGO INSERIRE IL NOME DELL'APPELLO:\\n\"));               \n      recv(conn_fd,nomefile2,50,0);         \nputs(nomefile2);\nwrite(conn_fd,\"\\nPREGO INSERIRE LA PAROLA DA SOSTITUIRE:\",strlen(\"PREGO INSERIRE LA PAROLA DA SOSTITUIRE:\\n\"));\nrecv(conn_fd,trova,30,0);   \nwrite(conn_fd,\"\\nPREGO INSERIRE LA NUOVA PAROLA:\",strlen(\"PREGO INSERIRE LA NUOVA PAROLA:\\n\"));\nrecv(conn_fd,sostituisci,30,0); \nwrite(conn_fd,\"\\nPREGO INSERIRE LA LINEA IN CASO DI OMONIMI/VOTI:\",strlen(\"PREGO INSERIRE LA LINEA IN CASO DI OMONIMI/VOTI:\\n\"));       \n           FullRead(conn_fd,(char *)&amp;linea, sizeof(linea));\nFILE *Input,*Output;\n\nInput = fopen(nomefile2, \"r\");\nOutput = fopen(filetemp, \"w\");\n\n\nif(NULL == Input)\n{\n    printf(\"\\nCould not open file\");\n   break;\n}\n\nprintf(\"\\ntrova:%s\\n\", trova);\nprintf(\"\\nsostituisci:%s\\n\", sostituisci);\n\n// For each line...\nwhile(NULL != fgets(Buffer, 4095, Input))\n{\n    char *Stop = NULL;\n    char *Start = Buffer;\n\n    while(1)\n    {\n\n        /*getting the first location of the source string*/\n        Stop = strstr(Start, trova);\n        if(NULL == Stop)\n        {\n            fwrite(Start, 1, strlen(Start), Output);\n            break;\n        }\n        printf(\"\\nTrovata a linea  &lt;%d&gt;\",line);\n\n\n        fwrite(Start, 1, Stop - Start, Output);\n        /*writting Replacement string to the output file**/\n        fwrite(sostituisci, 1, strlen(sostituisci), Output);\n\n        /*moving the pointer to the next char of source string*/\n        Start = Stop + strlen(trova);    }\n    line++;\n}\n\n\n\n\nfclose(Input);\nfclose(Output);\nremove(nomefile2);\nrename(filetemp, nomefile2);\n</code></pre>\n"}, {"tags": ["c", "linux", "performance", "sockets", "epoll"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1426096159, "post_id": 28993184, "comment_id": 46235688, "body": "Related answer: <a href=\"http://stackoverflow.com/a/14388707/694576\">stackoverflow.com/a/14388707/694576</a>"}, {"owner": {"reputation": 551, "user_id": 1658734, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/de0ec4e2b69cbd766e9b2325e29f3cf5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1658734/alex"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1426098878, "post_id": 28993184, "comment_id": 46237418, "body": "Iam read this answer, its not cover my question."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426109276, "post_id": 28993184, "comment_id": 46243564, "body": "Did you enable <code>SO_REUSEPORT</code> before <code>bind()</code>ing the address in each of the processes? From some quick reading I don&#39;t think <code>SO_REUSEPORT</code> would make any difference if you do the <code>bind()</code> before forking off the threads. Each thread should <code>bind()</code> separately instead."}, {"owner": {"reputation": 551, "user_id": 1658734, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/de0ec4e2b69cbd766e9b2325e29f3cf5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1658734/alex"}, "edited": false, "score": 0, "creation_date": 1426110287, "post_id": 28993184, "comment_id": 46244020, "body": "<code>setsockopt()</code> with <code>SO_REUSEPORT</code> and <code>bind()</code> are called only in parent, before <code>fork()</code>. Child do ony <code>listen()</code> after fork."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426111877, "post_id": 28993184, "comment_id": 46244751, "body": "@Alex: In that case <code>SO_REUSEPORT</code> might not make any difference. My understanding is that you should create a separate <code>socket()</code> in each of the threads and bind them to the same port."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426111903, "post_id": 28993184, "comment_id": 46244765, "body": "Also, you should post your app, yeah. :)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1426139383, "post_id": 28993184, "comment_id": 46252499, "body": "And what exactly is &quot;<i>RPS</i>&quot;, &quot;<i>reads-per-.second</i>&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 1658734, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/de0ec4e2b69cbd766e9b2325e29f3cf5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1658734/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1493109466, "creation_date": 1493109466, "answer_id": 43605597, "question_id": 28993184, "link": "https://stackoverflow.com/questions/28993184/so-reuseport-with-epoll-and-multiple-process/43605597#43605597", "title": "SO_REUSEPORT with epoll and multiple process", "body": "<p>Make this comment to flag question as answered: due to my research, internal OS scheduler is far from optimal and depends on hardware. Better is to use user-land scheduler.</p>\n"}], "owner": {"reputation": 551, "user_id": 1658734, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/de0ec4e2b69cbd766e9b2325e29f3cf5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1658734/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "accepted_answer_id": 43605597, "answer_count": 1, "score": 0, "last_activity_date": 1493109466, "creation_date": 1426094324, "question_id": 28993184, "link": "https://stackoverflow.com/questions/28993184/so-reuseport-with-epoll-and-multiple-process", "title": "SO_REUSEPORT with epoll and multiple process", "body": "<p>In a nutshell, <code>SO_REUSEPORT</code> socket option allow to create multiple sockets on ip:port pair. For example, <code>program1</code> and <code>program2</code> both can call functions chain <code>socket()-&gt;bind()-&gt;listen()-&gt;accept()</code> for the same port and IP, and kernel scheduler will evenly distribute incoming connections between this two programs.</p>\n\n<p>I assumed that with this option, you can get rid of the use of <code>fork()</code> for spawning additional workers and can simply run new program instance.</p>\n\n<p>I wrote a simple epoll socket server, based on this logic, and test it with weighttp:</p>\n\n<p><code>weighttp -n 1000000 -c 1000 -t 4 http://127.0.0.1:8080/</code></p>\n\n<p>For two running instances the results is ~44000 RPS, for one running instance - near ~51000 RPS. I am very surprised with 7000 RPS differece. </p>\n\n<p>After this test I add <code>fork()</code> before <code>listen()</code> and run one instance of server, so now it has the same logic that previous implementation - two process with epoll loop listening socket, but <code>socket()-&gt;bind()</code> called only once, before <code>fork()</code>, and second process receive it FD copy for <code>listen()</code> call.</p>\n\n<p>I run tests again and it shows ~50000 RPS!</p>\n\n<p>So, my question is very simple: what magic do <code>fork()</code> in this case and why it works faster than two independent process with it own <code>socket()</code>? Kernel do the same job for scheduling, I dont see any important difference.</p>\n"}, {"tags": ["c", "visual-c++"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1426094127, "post_id": 28993064, "comment_id": 46234300, "body": "<a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a>"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1426094291, "post_id": 28993064, "comment_id": 46234418, "body": "@HansPassant I&#39;m not trying to solve a specific problem; this question has been asked out of curiosity and to help me with testing, but there&#39;s no particular issue behind it."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1426094972, "post_id": 28993064, "comment_id": 46234905, "body": "What options are you passing to the compiler?  I&#39;m fairly certain that all of the strings should be in the resulting binary so long as you aren&#39;t passing <code>&#47;Gw</code>.  Without <code>&#47;Gw</code>, both <code>test1</code> and <code>test2</code> will be dragged into the link by <code>main</code>."}, {"owner": {"reputation": 1734, "user_id": 3685, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34b59e4c2e2e6499db0a3e246cb54964?s=128&d=identicon&r=PG", "display_name": "Tim Ring", "link": "https://stackoverflow.com/users/3685/tim-ring"}, "edited": false, "score": 0, "creation_date": 1563550710, "post_id": 28993064, "comment_id": 100750010, "body": "Marking as volatile will also prevent optimizer from interfering with it..."}], "answers": [{"tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": true, "score": 3, "last_activity_date": 1426101896, "last_edit_date": 1426101896, "creation_date": 1426094881, "answer_id": 28993371, "question_id": 28993064, "link": "https://stackoverflow.com/questions/28993064/how-can-i-prevent-msvc-from-deleting-unused-strings/28993371#28993371", "title": "How can I prevent MSVC from deleting unused strings?", "body": "<p>From the <a href=\"https://msdn.microsoft.com/en-us/library/bxwfs976.aspx\" rel=\"nofollow\">linker /OPT option documentation</a>:</p>\n\n<blockquote>\n  <p><strong>/OPT:NOREF</strong> keeps functions and data that are never referenced.</p>\n</blockquote>\n\n<p>If you only want to keep specific data, then use <a href=\"https://msdn.microsoft.com/en-us/library/2s3hwbhs.aspx\" rel=\"nofollow\">/INCLUDE</a>: <code>/INCLUDE:test</code>.</p>\n"}], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 28993371, "answer_count": 1, "score": 1, "last_activity_date": 1426101896, "creation_date": 1426093956, "last_edit_date": 1592644375, "question_id": 28993064, "link": "https://stackoverflow.com/questions/28993064/how-can-i-prevent-msvc-from-deleting-unused-strings", "title": "How can I prevent MSVC from deleting unused strings?", "body": "<p>MSVC will remove unused <code>char*</code> strings from compiled executables:</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nchar* test = &quot;Hey, I'm a string.&quot;;\nchar* test2 = &quot;I'm yet another string.&quot;;\n\nint main(int argc, char* argv[])\n{\n    puts(&quot;test123&quot;);\n    puts(test2);\n\n    getchar();\n    return 0;\n}\n</code></pre>\n<p>IDA string list:</p>\n<p><img src=\"https://i.stack.imgur.com/NKa1u.png\" alt=\"enter image description here\" /></p>\n<p>What can I do to force MSVC to leave these strings in the <code>.exe</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "edited": false, "score": 3, "creation_date": 1426093990, "post_id": 28993029, "comment_id": 46234203, "body": "Replace <code>=</code> with <code>==</code>. Done."}, {"owner": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "edited": false, "score": 0, "creation_date": 1426098519, "post_id": 28993029, "comment_id": 46237192, "body": "one way to help avoid this error is to always say <code>32 == ch</code> instead of how you have it.  Then, if you forget one <code>=</code>, there will be an error or warning, since you can&#39;t assign the value of <code>ch</code> to 32"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1426098989, "post_id": 28993029, "comment_id": 46237499, "body": "A proper compiler, with proper compiler settings, would have pointed out this error."}, {"owner": {"reputation": 4091, "user_id": 1710392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2d074c20d07b3ef18d774d22757e27b9?s=128&d=identicon&r=PG", "display_name": "&#201;tienne", "link": "https://stackoverflow.com/users/1710392/%c3%89tienne"}, "reply_to_user": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "edited": false, "score": 1, "creation_date": 1426106369, "post_id": 28993029, "comment_id": 46241894, "body": "@FCo: Rather use correct compiler settings, for instance with gcc, -Wall and -Werror, this will generate a compile time error."}, {"owner": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "reply_to_user": {"reputation": 4091, "user_id": 1710392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2d074c20d07b3ef18d774d22757e27b9?s=128&d=identicon&r=PG", "display_name": "&#201;tienne", "link": "https://stackoverflow.com/users/1710392/%c3%89tienne"}, "edited": false, "score": 0, "creation_date": 1426106436, "post_id": 28993029, "comment_id": 46241939, "body": "@&#201;tienne yes you are correct."}], "answers": [{"comments": [{"owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "reply_to_user": {"reputation": 13, "user_id": 4659562, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/395f6387fc94474e7953474c7c644c14?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Diken", "link": "https://stackoverflow.com/users/4659562/nicolas-diken"}, "edited": false, "score": 0, "creation_date": 1426264635, "post_id": 28993081, "comment_id": 46315578, "body": "Did it fix your problem?"}], "tags": [], "owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "is_accepted": false, "score": 1, "last_activity_date": 1426093989, "creation_date": 1426093989, "answer_id": 28993081, "question_id": 28993029, "link": "https://stackoverflow.com/questions/28993029/average-word-length-c/28993081#28993081", "title": "Average Word Length [C]", "body": "<p>To compare you must use <code>==</code> instead of <code>=</code>. You're setting <code>ch</code> to 32 at this point, so the return value is always true.</p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 2081121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e21189191f5295dfd78c25e969e7c00?s=128&d=identicon&r=PG&f=1", "display_name": "anuj", "link": "https://stackoverflow.com/users/2081121/anuj"}, "is_accepted": false, "score": 2, "last_activity_date": 1426097591, "last_edit_date": 1495541738, "creation_date": 1426097591, "answer_id": 28994295, "question_id": 28993029, "link": "https://stackoverflow.com/questions/28993029/average-word-length-c/28994295#28994295", "title": "Average Word Length [C]", "body": "<p><code>if (ch = 32)</code> is problem since you are setting ch to 32. You should instead use equals operator <code>if (ch == 32)</code></p>\n\n<p>Also similar question has been answered <a href=\"https://stackoverflow.com/questions/17128722/average-word-length-for-a-sentence\">here.</a></p>\n"}], "owner": {"reputation": 13, "user_id": 4659562, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/395f6387fc94474e7953474c7c644c14?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Diken", "link": "https://stackoverflow.com/users/4659562/nicolas-diken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1426097591, "creation_date": 1426093862, "question_id": 28993029, "link": "https://stackoverflow.com/questions/28993029/average-word-length-c", "title": "Average Word Length [C]", "body": "<p>I don't see where my logic is flawed in the code, for some reason it adds 1 to <code>i</code> even when ch isn't equal to 32.</p>\n\n<pre><code>int main(void)\n{\n    int ch;\n    float i, j;\n\n    printf(\"Enter a sentence: \");\n\n    for (i = 1, j = 0;;)\n    {\n        ch = getchar();\n\n        if (ch == '\\n' || ch == EOF)\n            break;\n\n        if (ch != 32)\n            j++;\n\n        if (ch = 32)\n            i++;\n    }\n\n    printf(\"Average word length: %.2f\", j/i);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "struct", "pragma"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 2, "creation_date": 1426093866, "post_id": 28992979, "comment_id": 46234096, "body": "The compiler is adding padding to align with memory better. See the wikipedia page on <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">Data Structure Alignment</a> for more information."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1426093872, "post_id": 28992979, "comment_id": 46234102, "body": "\\0 is only inserted at the end of c-string literals, if you declare an array of size 15, it will be 15 long. If the size is bigger than expected it&#39;s due to padding/alignment, not \\0 (which again only makes sense with string literals, not arrays in general)"}, {"owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "edited": false, "score": 1, "creation_date": 1426094425, "post_id": 28992979, "comment_id": 46234506, "body": "Most compilers allow you to prevent padding. In GCC you can use <code>__attribute__((packed))</code>. Note that this also prevents the compiler from the optimizations it could achieve with alignment/padding (like SSE). Packed structs can be useful, for instance when you&#39;re looking at a network buffer through as struct."}], "owner": {"reputation": 853, "user_id": 1046955, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/52e98b49c0d469a89b3d004c3a76a58a?s=128&d=identicon&r=PG", "display_name": "Dharmesh", "link": "https://stackoverflow.com/users/1046955/dharmesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1426093913, "answer_count": 0, "score": 0, "last_activity_date": 1426096625, "creation_date": 1426093730, "last_edit_date": 1426096625, "question_id": 28992979, "link": "https://stackoverflow.com/questions/28992979/how-to-control-padding-between-struct-elements-in-gnu-compiler", "closed_reason": "Duplicate", "title": "how to control padding between struct elements in GNU compiler?", "body": "<p>In below code. When I print individual char array size it prints correct value.\nBut when I print whole struct size at a time it adds one byte more for each char array.</p>\n\n<p>How can I control padding between elements in struct using #pragma in GNU C++ compiler? Can I set it to 0?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntypedef struct s1{\n    char test[15];\n    char t2[15];\n}s1;\n\ntypedef struct s2{\n    int message_id;\n    int message_size;\n}s2;\n\ntypedef struct s3{\n    char test[15];\n    char t2[15];\n    int a;\n}s3;\n\ntypedef struct s4{\n    char test[15];\n    int a;\n}s4;\n\n\nint main() {\n    s4 st;\n    cout&lt;&lt;sizeof(s1)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(s2)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(s3)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(s4)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(st.test)&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>-----------------------OUTPUT--------------------</p>\n\n<pre><code>30\n8\n36\n20\n15\n</code></pre>\n\n<p>How can I control padding between struct elements?</p>\n"}, {"tags": ["c", "gcc", "cmake"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1426152632, "post_id": 28992900, "comment_id": 46258037, "body": "What&#39;s the output of <code>make VERBOSE=1</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 871, "user_id": 1350961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1746dc864b422cbc67ee6fab57d260ee?s=128&d=identicon&r=PG", "display_name": "andyinno", "link": "https://stackoverflow.com/users/1350961/andyinno"}, "edited": false, "score": 0, "creation_date": 1426148432, "post_id": 28993346, "comment_id": 46255971, "body": "Yes, you are right about both. But actually they are just typos during the copy and paste of the code. This is a snippet of a more complex CMakeLists.txt I will edit my question and correct the typos. Thank you for noticing them."}, {"owner": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "reply_to_user": {"reputation": 871, "user_id": 1350961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1746dc864b422cbc67ee6fab57d260ee?s=128&d=identicon&r=PG", "display_name": "andyinno", "link": "https://stackoverflow.com/users/1350961/andyinno"}, "edited": false, "score": 0, "creation_date": 1426149686, "post_id": 28993346, "comment_id": 46256513, "body": "OK - but the <code>target_link_libraries</code> line is <i>still</i> wrong!  The target defined in the subdirectory &quot;Lib&quot; is actually <code>lib</code>, not <code>Lib</code>.  Apart from that, your setup looks fine.  If that&#39;s the case, then maybe you actually haven&#39;t defined <code>test()</code> anywhere - only declared it?"}, {"owner": {"reputation": 871, "user_id": 1350961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1746dc864b422cbc67ee6fab57d260ee?s=128&d=identicon&r=PG", "display_name": "andyinno", "link": "https://stackoverflow.com/users/1350961/andyinno"}, "edited": false, "score": 0, "creation_date": 1426151168, "post_id": 28993346, "comment_id": 46257285, "body": "It is defined in the .c file. I see it and it compile. The headers are seen from outside the library, if I remove the lib from the target_link_libraries gcc complains about the fact it can&#39;t see the header files."}, {"owner": {"reputation": 871, "user_id": 1350961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1746dc864b422cbc67ee6fab57d260ee?s=128&d=identicon&r=PG", "display_name": "andyinno", "link": "https://stackoverflow.com/users/1350961/andyinno"}, "edited": false, "score": 0, "creation_date": 1426153230, "post_id": 28993346, "comment_id": 46258334, "body": "Looks like something was wrong with the cmake build directory. I delete it and restart the build and everything works. the linking part is working correctly."}], "tags": [], "owner": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "is_accepted": true, "score": 2, "last_activity_date": 1426094778, "creation_date": 1426094778, "answer_id": 28993346, "question_id": 28992900, "link": "https://stackoverflow.com/questions/28992900/cmake-subdir-library-and-main-project/28993346#28993346", "title": "CMake subdir library and main project", "body": "<p>It looks like your <a href=\"http://www.cmake.org/cmake/help/v3.2/command/target_link_libraries.html\" rel=\"nofollow\" title=\"CMake v3.2 documentation for &quot;target_link_libraries&quot; command\"><code>target_link_libraries</code></a> command is missing the list of dependencies.  I guess in your case, you just want to link \"lib\", so you need to change this to:</p>\n\n<pre><code>target_link_libraries(${PROJECT_NAME} lib)\n</code></pre>\n\n<p>As an aside, you're missing a <code>$</code> before <code>{CMAKE_CURRENT_SOURCE_DIR}</code> in the line</p>\n\n<pre><code>target_include_directories(lib PUBLIC {CMAKE_CURRENT_SOURCE_DIR})\n</code></pre>\n"}], "owner": {"reputation": 871, "user_id": 1350961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1746dc864b422cbc67ee6fab57d260ee?s=128&d=identicon&r=PG", "display_name": "andyinno", "link": "https://stackoverflow.com/users/1350961/andyinno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 28993346, "answer_count": 1, "score": 1, "last_activity_date": 1426152135, "creation_date": 1426093502, "last_edit_date": 1426151187, "question_id": 28992900, "link": "https://stackoverflow.com/questions/28992900/cmake-subdir-library-and-main-project", "title": "CMake subdir library and main project", "body": "<p>This is an example, I googled a lot for this today but I cannot find a good way for have this thing done.</p>\n\n<p>For example I followed what's written in this link: <a href=\"http://mirkokiefer.com/blog/2013/03/cmake-by-example/\" rel=\"nofollow\">http://mirkokiefer.com/blog/2013/03/cmake-by-example/</a></p>\n\n<p>I have </p>\n\n<pre><code>/Build\n/Src\n =&gt; main.c\n  /Lib\n      =&gt; File.c\n      =&gt; File.h\n</code></pre>\n\n<p>I have a CMakeLists.txt in the Src dir</p>\n\n<pre><code>SET(SOURCES\n    main.c\n)\nadd_subdirectory(Lib)\nADD_EXECUTABLE(${PROJECT_NAME} ${SOURCES})\nTARGET_LINK_LIBRARIES(${PROJECT_NAME} lib)\n</code></pre>\n\n<p>and in the Lib dir:</p>\n\n<pre><code>set(LibSrc\n    File.c\n)\nset(LibHead\n    File.h\n)\nadd_library(lib STATIC ${LibSrc} ${LibHead})\ntarget_include_directories(lib PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})\n</code></pre>\n\n<p>When I compile the project everything compile corretly, but when the gcc links the library with the rest of the project I receive an error like:</p>\n\n<pre><code>main.cpp:(.text+0x10): undefined reference to `test()`\n</code></pre>\n\n<p>It is driving me crazy... Any hints on where I'm doing it wrong? Thank you</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1426093497, "post_id": 28992848, "comment_id": 46233849, "body": "If <code>*x + x_inc</code> is less than <code>*x</code> then it&#39;s about to overflow."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1426093501, "post_id": 28992848, "comment_id": 46233856, "body": "c or c++ ? This is quite important."}, {"owner": {"reputation": 63, "user_id": 3262105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836fa927759577ccf04540a154b7d46e?s=128&d=identicon&r=PG&f=1", "display_name": "srau", "link": "https://stackoverflow.com/users/3262105/srau"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1426093599, "post_id": 28992848, "comment_id": 46233929, "body": "@luk32 The language is C"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426093760, "post_id": 28992969, "comment_id": 46234031, "body": "These values are unsigned."}], "tags": [], "owner": {"reputation": 8269, "user_id": 588734, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/o3CVI.jpg?s=128&g=1", "display_name": "Eamonn McEvoy", "link": "https://stackoverflow.com/users/588734/eamonn-mcevoy"}, "is_accepted": false, "score": 1, "last_activity_date": 1426093701, "creation_date": 1426093701, "answer_id": 28992969, "question_id": 28992848, "link": "https://stackoverflow.com/questions/28992848/detecting-unsigned-overflow-when-accumulating-variables/28992969#28992969", "title": "Detecting unsigned overflow when accumulating variables", "body": "<p>You could check for overflow before incrementing:</p>\n\n<pre><code>if(x_inc &gt; (MAXINT - *x)) {\n    //about to overflow\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 3262105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836fa927759577ccf04540a154b7d46e?s=128&d=identicon&r=PG&f=1", "display_name": "srau", "link": "https://stackoverflow.com/users/3262105/srau"}, "is_accepted": false, "score": 0, "last_activity_date": 1426094676, "creation_date": 1426094676, "answer_id": 28993313, "question_id": 28992848, "link": "https://stackoverflow.com/questions/28992848/detecting-unsigned-overflow-when-accumulating-variables/28993313#28993313", "title": "Detecting unsigned overflow when accumulating variables", "body": "<p>I found <a href=\"http://ptgmedia.pearsoncmg.com/images/0321335724/samplechapter/seacord_ch05.pdf\" rel=\"nofollow\">this document</a> quite helpful and descriptive in answering my question, particularly page 172:</p>\n\n<p>\"For unsigned integers, if the sum is smaller than either operand,\nan overflow has occurred.\"</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1426095332, "creation_date": 1426095332, "answer_id": 28993513, "question_id": 28992848, "link": "https://stackoverflow.com/questions/28992848/detecting-unsigned-overflow-when-accumulating-variables/28993513#28993513", "title": "Detecting unsigned overflow when accumulating variables", "body": "<p>I suggest</p>\n\n<pre><code>uint32_t xx = *x + x_inc;\nif (xx &lt; *x)\n     *x = 0;\nelse *x = xx;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3262105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836fa927759577ccf04540a154b7d46e?s=128&d=identicon&r=PG&f=1", "display_name": "srau", "link": "https://stackoverflow.com/users/3262105/srau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1426104459, "answer_count": 3, "score": 0, "last_activity_date": 1426095332, "creation_date": 1426093369, "last_edit_date": 1426093627, "question_id": 28992848, "link": "https://stackoverflow.com/questions/28992848/detecting-unsigned-overflow-when-accumulating-variables", "closed_reason": "Duplicate", "title": "Detecting unsigned overflow when accumulating variables", "body": "<p>I have two unsigned 32 bit integers, call them x and y. I want to periodically increment the two uint32's by seemingly random uint32 values. x and y will accumulate and I want them to continue to accumulate until they hit their limit, at which point I want them to start back at 0 + the value they would have had added had they not overflowed.</p>\n\n<p>Assume the code looks like:</p>\n\n<pre><code>//This would be called, say every 5 seconds\nvoid increment_vals(uint32_t *x, uint32_t *y, uint32_t x_inc, uint32_t y_inc)\n{\n    *x += x_inc;\n    *y += y_inc;\n\n    if (x overflowed || y overflowed)\n    {\n        *x = x_inc;\n        *y = y_inc;\n    }\n}\n</code></pre>\n\n<p>So basically my question is: how do I know when x OR y has overflowed and need to to be reset? Should I just store x and y before incrementing and if the result is less than the original value then it must have overflowed? Is that guaranteed?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "compiler-optimization"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 6, "creation_date": 1426093022, "post_id": 28992690, "comment_id": 46233520, "body": "It&#39;s always possible to defeat the compiler by writing idiotic code - you&#39;d need an infinitely complex compiler to handle all possible inefficiencies that an inept programmer might introduce."}, {"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1426093365, "post_id": 28992690, "comment_id": 46233766, "body": "This is a deliberately simplified example, but I think it is fairly common to first zero-initialize a struct and then write to some of the fields."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426093500, "post_id": 28992690, "comment_id": 46233853, "body": "Do you think the compiler should generate code to initialise only elements <code>[10..14]</code>, on the basis that you are about to set elements <code>[0..9]</code>?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426093738, "post_id": 28992690, "comment_id": 46234015, "body": "Does the generated code change if you initialize the elements individually rather than in a loop? @WeatherVane a more likely optimization would be to initialize <i>all</i> the elements at the same time with the proper contents."}, {"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 1, "creation_date": 1426094422, "post_id": 28992690, "comment_id": 46234505, "body": "Why was this question out on hold? I am not asking for any opinions."}, {"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1426095308, "post_id": 28992690, "comment_id": 46235132, "body": "@MarkRansom: No, same result. I also tried with a struct and a designated initializer where I only set some of the elements. That also produces a full zero-out followed by individual writes."}, {"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 1, "creation_date": 1426095347, "post_id": 28992690, "comment_id": 46235163, "body": "@TorKlingberg Any answer to this question would probably be based on an individual opinion of why gcc/clang don&#39;t use this optimization."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426095840, "post_id": 28992690, "comment_id": 46235471, "body": "@TorKlingberg I suppose this <i>is</i> opinion: you aren&#39;t asking why your code failed, but how it could have been better."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1426099370, "post_id": 28992690, "comment_id": 46237752, "body": "array is a very conservative data type i think. if you announce <code>int arr[100000000];</code> are you expecting compiler to keep track of all the elements?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1426101880, "post_id": 28992690, "comment_id": 46239274, "body": "You might make a feature request on <a href=\"https://gcc.gnu.org/bugzilla/\" rel=\"nofollow noreferrer\">GCC bugzilla</a>"}, {"owner": {"reputation": 33311, "user_id": 5620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2f98606c6c7002862ef3be62cfc97c?s=128&d=identicon&r=PG", "display_name": "Peter Ritchie", "link": "https://stackoverflow.com/users/5620/peter-ritchie"}, "edited": false, "score": 1, "creation_date": 1426103503, "post_id": 28992690, "comment_id": 46240228, "body": "Really?  <i>why</i> or <i>why not</i> a compiler does or does not do something is very subjective in a case like this."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1426106498, "post_id": 28992690, "comment_id": 46241966, "body": "Why do you ask? What is the practical case where such an optimization would bring significant performance improvement?"}], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1426103026, "post_id": 28995664, "comment_id": 46239941, "body": "Good point. However, the MELT part has sincerely very little to do with the question and, imho, should be omitted."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1426103050, "post_id": 28995664, "comment_id": 46239960, "body": "I disagree. MELT is designed to write such optimizations more quickly (because it is a bit higher level than the C++ language used inside GCC). But even with MELT, it is a big job."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1426103215, "post_id": 28995664, "comment_id": 46240068, "body": "That&#39;s great to hear. But the OP did not ask you how to implement that; (s)he asked you <i>why</i> it was not being optimized."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1426103975, "post_id": 28995664, "comment_id": 46240524, "body": "@black I think your questions show that the discussion is inherently opinion-based"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 9, "last_activity_date": 1426105082, "last_edit_date": 1426105082, "creation_date": 1426102215, "answer_id": 28995664, "question_id": 28992690, "link": "https://stackoverflow.com/questions/28992690/why-does-the-compiler-not-optimize-this-initialization/28995664#28995664", "title": "Why does the compiler not optimize this initialization?", "body": "<p>It is not a very scientific explanation, but just an intuition (however, I do happen to know <em>some</em> of the internals of GCC).</p>\n\n<p>To reliably do the optimization that you want, the compiler would have to manage <em>sub-arrays</em> or <em>slices</em>. Then it is becoming very complex and error-prone. A compiler optimizing that much is likely to consume a lot of memory (for the symbolic representations of sub-arrays) and a lot of compiler time. This is usually not worth the effort (which would be better spent inside the compiler to optimize loops).</p>\n\n<p>BTW, GCC has a plugin framework and the <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> extension (MELT is a lispy domain specific language to extend GCC, and I am the main author of MELT). So you could try to add a new optimization pass (thru a MELT extension or some C++ plugin) doing the work. You'll soon realize that your pass would be either extraordinarily specific or would require handling a big lot of GCC internal representations, and is likely to blow up compilation time and memory for very few gains.</p>\n\n<p>Notice that both GCC and Clang are cleverly unrolling the two loops (and that matters a lot performance-wise).</p>\n\n<p>BTW, the <a href=\"http://frama-c.com/\" rel=\"nofollow\">Frama-C</a> (a static analyzer for C programs developed by colleagues) value analyzer seems able to infer good properties about your <code>arr</code></p>\n\n<p>So, feel free to add that optimization to GCC. If you don't know (or don't have the time - many months or years) how to add it, feel free to pay a company or an organization able to enhance GCC for your needs. It is probably a million euro (or US dollars) / 3 years project to get that optimization working on interesting cases. </p>\n\n<p><sup>If you are serious about spending such amount of money, contact me by email.</sup></p>\n\n<p>A compiler which has such optimization would need some heuristics to disable them (e.g. if <code>arr</code> was a million-member array, and you was coding some <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow\">sieve of Erasthothenes</a>, it is probably not worth the compiler effort to keep all the unions of sub-slices of composite indexes at compile-time).</p>\n\n<p>BTW, would you accept a twenty-times slower optimizing compiler (slower at compile time) for a gain (probably of a fraction of percent at run-time) which happens rarely in practice and is not very important? At last, I don't believe that this is a <em>common case</em> for optimizations. YMMV.</p>\n\n<p>You might be perhaps interested by source to source transformers like <a href=\"http://pips4u.org/\" rel=\"nofollow\">PIPS4U</a></p>\n"}], "owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 2, "accepted_answer_id": 28995664, "answer_count": 1, "score": 9, "last_activity_date": 1426105082, "creation_date": 1426092858, "question_id": 28992690, "link": "https://stackoverflow.com/questions/28992690/why-does-the-compiler-not-optimize-this-initialization", "title": "Why does the compiler not optimize this initialization?", "body": "<p>Consider the following C code:</p>\n\n<pre><code>extern void foo(int* ip);\n\nvoid myfunc(void)\n{\n    int arr[15] = {0};\n    for (int i=0; i&lt;10; i++)\n    {\n        arr[i] = 42;\n    }\n\n    foo(arr);\n}\n</code></pre>\n\n<p>I tried with gcc and clang, with <code>-O3</code> and <code>-Os</code>. In all cases the compiled assembly writes all 15 zeroes before overwriting 10 of them with 42. </p>\n\n<p>I suppose it could just be that no optimization has been written for this case yet, but it seems like a fairly obvious and common case to me. Is there something that prevents the optimization?</p>\n\n<p>I am on x86-32 Linux and used these commands:</p>\n\n<pre><code>gcc -std=c99 -S -O3 hello.c\nclang -std=c99 -S -O3 hello.c\n</code></pre>\n"}, {"tags": ["c", "gcc", "optimization", "segmentation-fault", "undefined-behavior"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1426092624, "post_id": 28992579, "comment_id": 46233234, "body": "Maybe related to <a href=\"http://stackoverflow.com/q/28631378/1708801\">Function optimized to infinite loop at &#39;gcc -O2&#39;</a>"}, {"owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 4, "creation_date": 1426092628, "post_id": 28992579, "comment_id": 46233236, "body": "We need the implementation of <code>is_lychrel()</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1426092635, "post_id": 28992579, "comment_id": 46233244, "body": "You suspect of undefined but you didn&#39;t post <code>is_lychrel()</code> which is the only thing in the code that could be doing something bad."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1426092711, "post_id": 28992579, "comment_id": 46233293, "body": "That code is pretty &quot;vanilla&quot; and <code>is_lychrel</code> could be doing something bad. Try replacing <code>is_lychrel</code> with something other very simple function and see if you still get a segfault. My guess is that you won&#39;t."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1426092787, "post_id": 28992579, "comment_id": 46233346, "body": "Remove <code>is_lychrel(i)</code> from your code. if the problem no longer represents (and I cannot fathom how it still could), guess where the UB is?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1426092956, "post_id": 28992579, "comment_id": 46233461, "body": "Does the real code also miss to <code>#include</code> anything?"}], "answers": [{"tags": [], "owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "is_accepted": true, "score": 0, "last_activity_date": 1426095385, "creation_date": 1426095385, "answer_id": 28993532, "question_id": 28992579, "link": "https://stackoverflow.com/questions/28992579/gcc-optimization-gives-infinite-loop-or-segfault/28993532#28993532", "title": "gcc optimization gives infinite loop or segfault", "body": "<p>Simple. My arrays were too small. I was sure of the size for some reason but I was definitely wrong. I should've checked that first.</p>\n\n<p>Every optimization level works fine now.</p>\n"}], "owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 28993532, "answer_count": 1, "score": -4, "last_activity_date": 1426095385, "creation_date": 1426092551, "last_edit_date": 1426094888, "question_id": 28992579, "link": "https://stackoverflow.com/questions/28992579/gcc-optimization-gives-infinite-loop-or-segfault", "title": "gcc optimization gives infinite loop or segfault", "body": "<p>I just found a pretty fun code. GCC optimizations change its behavior weirdly.</p>\n\n<ul>\n<li>-O0 works</li>\n<li>-O1 segfault</li>\n<li>-O2 infinite loop (from 7 to 1996 inclusive)</li>\n<li>-O3 works</li>\n<li>-Og segfault</li>\n<li>-Ofast works</li>\n</ul>\n\n<p>Here's the code :</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n  int i, c;\n\n  c = 0;\n  for (i = 10; i &lt; 10000; ++i)\n    {\n      if (is_lychrel(i))\n        ++c;\n\n      printf(\"%d\\n\", i);\n    }\n\n  printf(\"%d\\n\", c);\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The function <code>is_lychrel(int)</code> makes use of the parameter.</p>\n\n<p>As far as I know, this is probably due to an undefined behavior somewhere but I can't spot it. I tried to disable some optimization flags, but I had no luck so far.</p>\n\n<p>If you need more code, feel free to ask.</p>\n\n<p><strong>EDIT:</strong>\nAs suggested in the comments, I tried to comment some functions and finally debugged the old school way (because gdb won't work). And I found the culprit (of the segfault at least) :</p>\n\n<pre><code>void add_reverse(int d[], int *len)\n{\n  int i;\n  int plus[28] = {0};\n\n  for (i = 0; i &lt; *len; ++i)\n    {\n      //printf(\"d %d\\n\", i);\n\n      plus[i] = d[*len - i - 1];\n    }\n\n  add(d, plus, len);\n}\n</code></pre>\n\n<p>This function is assumed to add a number (as an array of digits) to his reverse and return the new length. Exemple: <code>({1, 2}, 2)</code> should give <code>({3, 3}, 2)</code>. It doesn't segfault with the <code>printf</code> but won't give the good result. I'm trying to analyze d[] step by step. d[] is <code>0034647260072070369072646341</code> just before segfault (seems valid).</p>\n\n<p><strong>EDIT 2:</strong>\nAdding a simple displaying loop (diplay one won't be enough) after computation of <code>plus</code> correct the output of <strong>-O1</strong>.</p>\n\n<pre><code>  for (i = 0; i &lt; *len; ++i)\n    printf(\"%d\", plus[i]);\n</code></pre>\n\n<p>Here's <code>add()</code> code if ever that could help:</p>\n\n<pre><code>void add(int d[], int plus[], int *maxlen)\n{\n  int i, of;\n\n  of = 0;\n  for (i = 0; i &lt;= *maxlen; ++i)\n    {\n      d[i] += plus[i];\n\n      if (of)\n        {\n          d[i] += of;\n          of    = 0;\n        }\n\n      if (d[i] &gt;= 10)\n        {\n          of    = 1;\n          d[i] %= 10;\n        }\n    }\n\n  if (d[i - 1])\n    ++*maxlen;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf", "delimiter", "buffer-overflow", "null-terminated"], "answers": [{"tags": [], "owner": {"reputation": 1181, "user_id": 2708904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7b059287e83e57ccf1ffd04ccbd6314?s=128&d=identicon&r=PG&f=1", "display_name": "Innot Kauker", "link": "https://stackoverflow.com/users/2708904/innot-kauker"}, "is_accepted": false, "score": 0, "last_activity_date": 1426094101, "last_edit_date": 1426094101, "creation_date": 1426093780, "answer_id": 28992995, "question_id": 28992481, "link": "https://stackoverflow.com/questions/28992481/how-should-i-delimit-between-the-valid-input-and-the-shellcode-for-my-buffer-ove/28992995#28992995", "title": "How should I delimit between the valid input and the shellcode for my buffer overflow?", "body": "<p>Try to create a file like <code>/tmp/{shellcode here}</code>. Even if your FS doesn't support files with names containing some bytes from the shellcode you have chosen, there are many of them to try.</p>\n\n<p>You can also try to put the shellcode in an environment variable.</p>\n"}], "owner": {"reputation": 319, "user_id": 1832392, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/823afcd07cbe90e3dd2a4918f7618b98?s=128&d=identicon&r=PG", "display_name": "art3m1sm00n", "link": "https://stackoverflow.com/users/1832392/art3m1sm00n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426094101, "creation_date": 1426092265, "last_edit_date": 1426092706, "question_id": 28992481, "link": "https://stackoverflow.com/questions/28992481/how-should-i-delimit-between-the-valid-input-and-the-shellcode-for-my-buffer-ove", "title": "How should I delimit between the valid input and the shellcode for my buffer overflow?", "body": "<p>I was given a program for an assignment and told to do a buffer overflow on it. My professor has configured the VM we are working on to execute shellcode on the stack, so I only need to place the start of shellcode into the return address. The buffer I am trying to overflow is <code>s1[64]</code>. <code>s1</code> should be a valid filename as it is used later on in the program and will cause the program to <code>exit(1)</code> if it is invalid. I am assuming that I should fill <code>s1</code> with input in this format :\n<code>validFileName+fileNameTerminator+Filler+Shellcode</code>. </p>\n\n<p><code>S1</code> is read in from the command line using <code>scanf(%s,s1)</code>. The issue I'm having is that no matter what I choose to place between my valid file name and the start of my filler and shellcode, the program thinks the whole input is the filename and fails to open it. I have tried with short file names and 63 and 64 length file names, all give the same result. \nFor example: If I give the input for <code>s1</code> as <code>/./././././././././././././././././././././././testFile1GCL.txt\\0AAAAAAAA\\xeb\\x18\\x5e\\x31\\xc0\\x88\\x46\\x07\\x89\\x76\\x08\\x89\\x46\\x0c\\xb0\\x0b\\x8d\\x1e\\x8d\\x4e\\x08\\x8d\\x56\\x0c\\xcd\\x80\\xe8\\xe3\\xff\\xff\\xff\\x2f\\x62\\x69\\x6e\\x2f\\x73\\x68</code> \nI am expecting the value in <code>s1</code> to be <code>/./././././././././././././././././././././././testFile1GCL.txt</code> as it is long enough to fill the entire buffer and is followed by null terminator. The issue is that when I have <code>s1</code> printed out, it prints the whole input as if it isn't seeing the null terminator and is obviously looking outside of its given range. This then causes the program to fault because that giant thing obviously isn't a valid file name.</p>\n\n<p>I have tried almost everything I can think of to put between the filename and the rest of my payload, including <code>\\\\0</code> <code>\\0</code> <code>0x0</code> <code>0x90</code>. No matter what, the program always thinks <code>s1</code> is the whole long input and fails. Even if it isn't recognizing the terminator, why is it even looking outside of the 64 characters allotted to <code>s1</code>? </p>\n\n<p>EDIT: I have now tried putting a space between the file name and rest of the payload and that keeps the file from exiting, but only because scanf stops at the space and isnt' reading in the rest of the payload</p>\n"}, {"tags": ["java", "c", "printing", "int", "boolean"], "comments": [{"owner": {"reputation": 12321, "user_id": 770270, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e658b4994f3a50e22daf9da655ec2282?s=128&d=identicon&r=PG", "display_name": "tnw", "link": "https://stackoverflow.com/users/770270/tnw"}, "edited": false, "score": 0, "creation_date": 1426092497, "post_id": 28992471, "comment_id": 46233145, "body": "Added my comment as answer instead with some additional details."}], "answers": [{"tags": [], "owner": {"reputation": 12321, "user_id": 770270, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e658b4994f3a50e22daf9da655ec2282?s=128&d=identicon&r=PG", "display_name": "tnw", "link": "https://stackoverflow.com/users/770270/tnw"}, "is_accepted": false, "score": 2, "last_activity_date": 1426092480, "creation_date": 1426092480, "answer_id": 28992557, "question_id": 28992471, "link": "https://stackoverflow.com/questions/28992471/int-cannot-be-converted-to-boolean-converting-code-from-c-to-java/28992557#28992557", "title": "Int cannot be converted to boolean?? converting code from C to Java", "body": "<p>What don't you understand about the error message? <code>if(k)</code> doesn't make any sense in java-land. Did you mean to write <code>if(k != 0)</code> in order to test for a non-zero value?</p>\n"}, {"tags": [], "owner": {"reputation": 4713, "user_id": 1498389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fccccd998d98f5e328e97c5701148f7a?s=128&d=identicon&r=PG", "display_name": "NiziL", "link": "https://stackoverflow.com/users/1498389/nizil"}, "is_accepted": false, "score": 2, "last_activity_date": 1426092487, "creation_date": 1426092487, "answer_id": 28992563, "question_id": 28992471, "link": "https://stackoverflow.com/questions/28992471/int-cannot-be-converted-to-boolean-converting-code-from-c-to-java/28992563#28992563", "title": "Int cannot be converted to boolean?? converting code from C to Java", "body": "<p>Unlike in C, <code>int</code> aren't implicitly converted in <code>boolean</code> in Java. </p>\n\n<p>You just have to write <code>if( k != 0 )</code> :)</p>\n"}, {"tags": [], "owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "is_accepted": false, "score": 2, "last_activity_date": 1444973725, "last_edit_date": 1444973725, "creation_date": 1426092514, "answer_id": 28992571, "question_id": 28992471, "link": "https://stackoverflow.com/questions/28992471/int-cannot-be-converted-to-boolean-converting-code-from-c-to-java/28992571#28992571", "title": "Int cannot be converted to boolean?? converting code from C to Java", "body": "<p>In <code>C</code> you can compare an <code>int</code> as a <code>boolean</code> and any non-zero value is considered TRUE. In Java, that is not the case. This</p>\n\n<pre><code>if(k) System.out.println(i);\n</code></pre>\n\n<p>should be something like</p>\n\n<pre><code>if(k != 0) System.out.println(i);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4646461, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203775970899768/picture?type=large", "display_name": "Andre Ryan B. Galon", "link": "https://stackoverflow.com/users/4646461/andre-ryan-b-galon"}, "edited": false, "score": 0, "creation_date": 1426181445, "post_id": 28992727, "comment_id": 46277344, "body": "Thanks for all the effort guys, I got it to run, but it dosen&#39;t seem to produce the same result as my C program does for some reason. I&#39;ll try to find a way though"}], "tags": [], "owner": {"reputation": 126, "user_id": 4659468, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J31g6jBBQJY/AAAAAAAAAAI/AAAAAAAAAFw/Z1K_u7x7RRM/photo.jpg?sz=128", "display_name": "imuli", "link": "https://stackoverflow.com/users/4659468/imuli"}, "is_accepted": false, "score": 1, "last_activity_date": 1426092955, "creation_date": 1426092955, "answer_id": 28992727, "question_id": 28992471, "link": "https://stackoverflow.com/questions/28992471/int-cannot-be-converted-to-boolean-converting-code-from-c-to-java/28992727#28992727", "title": "Int cannot be converted to boolean?? converting code from C to Java", "body": "<p>In Java a boolean is either true or false. In C, int stands in for a boolean type with true being non-zero and false being zero. So what you're looking for is:</p>\n\n<pre><code>public static void main(String[] args) {\n    int i, j;\n    boolean k;\n\n    for(i=1; i&lt;60; i++){\n        k=true;\n        for(j=2; j&lt;i; j++){\n            if(i % (j*j) == 0) \n                k=false;\n        }\n        if(k) System.out.println(i);\n    }\n    System.out.println(i);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3383, "user_id": 4446875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EilfZ.jpg?s=128&g=1", "display_name": "Aify", "link": "https://stackoverflow.com/users/4446875/aify"}, "is_accepted": true, "score": 3, "last_activity_date": 1426093033, "creation_date": 1426093033, "answer_id": 28992746, "question_id": 28992471, "link": "https://stackoverflow.com/questions/28992471/int-cannot-be-converted-to-boolean-converting-code-from-c-to-java/28992746#28992746", "title": "Int cannot be converted to boolean?? converting code from C to Java", "body": "<p>2 ways to fix this: </p>\n\n<p>1) Use <code>if (k != 0)</code>, since in java an <code>int</code> is an <code>int</code> and a <code>boolean</code> is its own type.</p>\n\n<p>2) Having said that, why not change <code>k</code> to a boolean value? You're using it for a boolean check, and it only changes from 0 to 1, so if you actually use the boolean value it'll be much easier to read.</p>\n\n<p>eg:</p>\n\n<pre><code>boolean k = true;\n\n// your code here\n    // your ifstatement to change k\n    k = false;\n\n// print code\nif (k) ...\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4646461, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203775970899768/picture?type=large", "display_name": "Andre Ryan B. Galon", "link": "https://stackoverflow.com/users/4646461/andre-ryan-b-galon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8361, "favorite_count": 1, "accepted_answer_id": 28992746, "answer_count": 5, "score": 1, "last_activity_date": 1444973725, "creation_date": 1426092247, "last_edit_date": 1426092724, "question_id": 28992471, "link": "https://stackoverflow.com/questions/28992471/int-cannot-be-converted-to-boolean-converting-code-from-c-to-java", "title": "Int cannot be converted to boolean?? converting code from C to Java", "body": "<p>I have a code that I am converting into Java, Im new to programming but I already have done some work on both PL, although I do not understand why I get this error</p>\n\n<p>The original C code is: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main () {\n    int i, j, k;\n    for (i=1; i&lt;=59; i++) {\n        k = 1;\n        for (j=2; j&lt;i; j++)\n            if (i % (j*j) == 0) k = 0;\n        if (k) printf (\"%d\\n\", i);\n    }\n    printf(\"%d\",i);\n    getch();\n}\n</code></pre>\n\n<p>My converted Java code:</p>\n\n<pre><code>import java.util.*;\npublic class squarefree {\n\n    public static void main(String[] args) {\n        int i, j,k;\n        for(i=1; i&lt;60; i++){\n            k=1;\n            for(j=2; j&lt;i; j++){\n                if(i % (j*j) == 0) \n                    k=0;\n                if(k) System.out.println(i);\n            }\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n\n<p>Can someone please explain? Thanks guys :)</p>\n"}, {"tags": ["c", "memory", "cuda", "constants"], "comments": [{"owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "edited": false, "score": 0, "creation_date": 1426093650, "post_id": 28992444, "comment_id": 46233962, "body": "That is fine. You are basically using the #include to insert code into main.cu"}, {"owner": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "reply_to_user": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "edited": false, "score": 0, "creation_date": 1426093868, "post_id": 28992444, "comment_id": 46234099, "body": "mmm what do you mean with  &quot;#include&quot;? is there something wrong with it?"}, {"owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "edited": false, "score": 0, "creation_date": 1426094273, "post_id": 28992444, "comment_id": 46234404, "body": "Your code is equivalent to having the code in <code>kernel.cu</code> inserted in <code>main.cu</code> where you have the line <code>#include &quot;kernel.cu&quot;</code>"}, {"owner": {"reputation": 2907, "user_id": 714967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18f3d9bcf8ec28c43f47f98cfc60c031?s=128&d=identicon&r=PG", "display_name": "pQB", "link": "https://stackoverflow.com/users/714967/pqb"}, "edited": false, "score": 0, "creation_date": 1426156452, "post_id": 28992444, "comment_id": 46260240, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/28987495/how-to-use-constant-memory-for-beginners-cuda-c\">How to use constant memory for beginners (Cuda C)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 4582950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81092a04a22b2db9fbe62a6c5a9d0bc?s=128&d=identicon&r=PG&f=1", "display_name": "blind.wolf", "link": "https://stackoverflow.com/users/4582950/blind-wolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1426148527, "creation_date": 1426148527, "answer_id": 29004887, "question_id": 28992444, "link": "https://stackoverflow.com/questions/28992444/am-i-using-constant-memory-correctly/29004887#29004887", "title": "Am I using constant memory correctly?", "body": "<p>It seems correct to me, through I would have written things a bit differently.</p>\n\n<p>For definition of c, i would put it in kernel.cu and add extern keyword in main.cu. (And because I am lazy, I often just put these two files in one with two parts divided by some comment block.)</p>\n\n<p>For line with float pc = 2; I often add point and zero, because it's easier to distinguish between integer and floating point variables while reading the code.</p>\n\n<p>And for the cudaMemcpyToSymbol(c, &amp;pc, sizeof(c)); I would have used sizeof(float).</p>\n\n<p>This all is just matter of prefference and clarification of code.</p>\n"}], "owner": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 29004887, "answer_count": 1, "score": 1, "last_activity_date": 1426149111, "creation_date": 1426092186, "last_edit_date": 1426149111, "question_id": 28992444, "link": "https://stackoverflow.com/questions/28992444/am-i-using-constant-memory-correctly", "title": "Am I using constant memory correctly?", "body": "<p>I wrote a simple Cuda C program which takes N numbers and multiplies them by a factor <em>c</em>; since this factor is a constant I decided to put it in the constant memory. </p>\n\n<p><strong>Here is the <em>main.cu</em> code</strong>:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n__constant__ float c; // IS THIS OK?\n\ntypedef struct{\n    float a;\n}variable;\nvariable *var_CPU,*var_GPU;\n\n#include \"kernel.cu\"\n\n//==============================================================\nint main(void){\n\n   int i,N=100;\n   var_CPU = (variable*)malloc(N*sizeof(variable));\n   for(i=0;i&lt;N;i++){\n      var_CPU[i].a=(float)i;\n      printf(\"var_CPU[%d].a=%f\\n\",i,var_CPU[i].a);\n   }\n\n   float pc=2; // IS THIS OK?\n\n   cudaMemcpyToSymbol(c, &amp;pc, sizeof(c)); // IS THIS OK?\n\n\n   cudaMalloc((void**)&amp;var_GPU,N*sizeof(variable));\n   cudaMemcpy(var_GPU,var_CPU,N*sizeof(variable), cudaMemcpyHostToDevice);\n   CollisioniGPU&lt;&lt;&lt;10, 10&gt;&gt;&gt;(var_GPU);\n   cudaGetLastError();\n\n   cudaMemcpy(var_CPU, var_GPU, N*sizeof(variable),cudaMemcpyDeviceToHost);\n   for(i=0;i&lt;N;i++){\n      printf(\"var_CPU[%d].a=%f\\n\",i,var_CPU[i].a);\n   }\n\n   cudaFree(var_GPU);\n   free(var_CPU);\n\n   return 0;\n}\n</code></pre>\n\n<p><strong>Here is the <em>kernel.cu</em></strong>:</p>\n\n<pre><code>__device__ void funzione(float *var){\n\n        *var = *var*c;    \n}\n\n__global__ void CollisioniGPU(variable *var_GPU){\n\n    int id= blockIdx.x*blockDim.x + threadIdx.x;\n\n    float a;\n\n    a=var_GPU[id].a;\n\n    funzione(&amp;a);\n\n    var_GPU[id].a = a;      \n}\n</code></pre>\n\n<p><strong>Here is my question</strong>: Is this a correct way of using the <em>constant memory</em>? How can I be sure that the multiplication factor <em>c</em> is saved there and not somewhere else?</p>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426090940, "post_id": 28991988, "comment_id": 46232068, "body": "Normally the source for libc is not present on linux distributions. Only the headers."}, {"owner": {"reputation": 2783, "user_id": 1441374, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/hbqYH.png?s=128&g=1", "display_name": "seeker", "link": "https://stackoverflow.com/users/1441374/seeker"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426091127, "post_id": 28991988, "comment_id": 46232202, "body": "In that case, any online location where I can see implementation of localtime() ? Curious to know how time zone information is retrieved and processed..."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1426091233, "post_id": 28991988, "comment_id": 46232297, "body": "Do <code>apt-get source libc6</code> from your home and you&#39;ll find libc6&#39;s sources in a new folder in your home-directory."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426091255, "post_id": 28991988, "comment_id": 46232311, "body": "The (gnu) source for libc. BTW: I guess the timezone-info is compiled into some kind of skip list."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1426091373, "post_id": 28991988, "comment_id": 46232393, "body": "Ok, 1st check which binary your system uses as libc implementation, then check which package provides this binary, finally  <code>apt-get source</code> this package&#39;s sources. My former comment assumed the package to be <code>libc6</code>."}, {"owner": {"reputation": 2783, "user_id": 1441374, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/hbqYH.png?s=128&g=1", "display_name": "seeker", "link": "https://stackoverflow.com/users/1441374/seeker"}, "edited": false, "score": 0, "creation_date": 1426092382, "post_id": 28991988, "comment_id": 46233076, "body": "Thanks. I downloaded the libc6. Found the source under /time/ folder spread in localtime.c, tzset.c, and tzfile.c."}], "answers": [{"comments": [{"owner": {"reputation": 2783, "user_id": 1441374, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/hbqYH.png?s=128&g=1", "display_name": "seeker", "link": "https://stackoverflow.com/users/1441374/seeker"}, "edited": false, "score": 0, "creation_date": 1426173770, "post_id": 28993189, "comment_id": 46272261, "body": "I think it should be libc.so.6 instead of libc6.so.6 ?"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1426174045, "last_edit_date": 1426174045, "creation_date": 1426094340, "answer_id": 28993189, "question_id": 28991988, "link": "https://stackoverflow.com/questions/28991988/location-of-time-h-localtime-implemenation-in-ubuntu/28993189#28993189", "title": "Location of time.h -&gt; localtime() implemenation in Ubuntu?", "body": "<ol>\n<li><p>Check which binary your system uses as libc implementation.</p>\n\n<p>To do so compile a minimal C program and run ldd on it:</p>\n\n<pre><code>ldd a.out\n</code></pre>\n\n<p>You might get something like this:</p>\n\n<pre><code>linux-vdso.so.1 =&gt;  (0x00007fff429c6000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f21cdcb7000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f21ce05e000)\n</code></pre>\n\n<p>From this you can pull the info libc is proided by <code>libc6.so.6</code>.</p></li>\n<li><p>Check which package provides this binary.</p>\n\n<p>Search the package providing the file found under 1.:</p>\n\n<pre><code>dpkg -S libc.so.6\n</code></pre>\n\n<p>You might get:</p>\n\n<pre><code>libc6-i386: /lib32/libc.so.6\nlibc6:amd64: /lib/x86_64-linux-gnu/libc.so.6\n</code></pre>\n\n<p>The above output tells you, that there are two packages providing the file. Here it's the 32 bit and 64 bit implementation.</p></li>\n<li><p>Decide which one you want and do <code>apt-get source</code> this package's sources. </p></li>\n</ol>\n\n<p>Assuming the package would be <code>libc6</code>, do</p>\n\n<pre><code>apt-get source libc6\n</code></pre>\n\n<p>and find thre source in a directory inside the current directory.</p>\n"}], "owner": {"reputation": 2783, "user_id": 1441374, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/hbqYH.png?s=128&g=1", "display_name": "seeker", "link": "https://stackoverflow.com/users/1441374/seeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 28993189, "answer_count": 1, "score": 1, "last_activity_date": 1426174045, "creation_date": 1426090874, "question_id": 28991988, "link": "https://stackoverflow.com/questions/28991988/location-of-time-h-localtime-implemenation-in-ubuntu", "title": "Location of time.h -&gt; localtime() implemenation in Ubuntu?", "body": "<p>I am searching for the implementation of localtime() function in time.h. I see that different platforms have different locations for source of c library. I wanted to know the location in Ubuntu 14.04? If by default source is not included in OS, please let me know how to download source or online location of the source. \nThanks. </p>\n"}, {"tags": ["c", "execvp"], "comments": [{"owner": {"reputation": 1562, "user_id": 4098326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a222a6f6508bea1c3b2f97cb0234be0?s=128&d=identicon&r=PG", "display_name": "user4098326", "link": "https://stackoverflow.com/users/4098326/user4098326"}, "edited": false, "score": 3, "creation_date": 1426090491, "post_id": 28991786, "comment_id": 46231736, "body": "<code>&amp;</code> is not an argument, but rather parsed by the shell."}, {"owner": {"reputation": 10896, "user_id": 453851, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f72d9b8fe02cc534906f89eb22d74cb0?s=128&d=identicon&r=PG", "display_name": "Philip Couling", "link": "https://stackoverflow.com/users/453851/philip-couling"}, "edited": false, "score": 2, "creation_date": 1426090573, "post_id": 28991786, "comment_id": 46231798, "body": "For clarity if you&#39;re doing this for background mode, then the <code>&amp;</code> is not an argument to a program.  Its parsed by the shell your in (eg bash) and is equivalent to first calling <code>fork()</code>.  Maybe take a look at: <a href=\"http://www.cs.ecu.edu/karl/4630/sum01/example1.html\" rel=\"nofollow noreferrer\">cs.ecu.edu/karl/4630/sum01/example1.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10896, "user_id": 453851, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f72d9b8fe02cc534906f89eb22d74cb0?s=128&d=identicon&r=PG", "display_name": "Philip Couling", "link": "https://stackoverflow.com/users/453851/philip-couling"}, "is_accepted": false, "score": 0, "last_activity_date": 1426091029, "creation_date": 1426091029, "answer_id": 28992044, "question_id": 28991786, "link": "https://stackoverflow.com/questions/28991786/execvp-with-three-elements/28992044#28992044", "title": "Execvp with three elements", "body": "<p><strong>To answer what you've asked:</strong></p>\n\n<p>If you want to pass an extra argument you will need to concatenate to the array.  This may mean building a new array.  Considder using <code>memcpy()</code> to make life easier when copying.</p>\n\n<p><strong>But to asnwer what you are looking for (running in the background)</strong> </p>\n\n<p>You can not do something in background mode with this.  execvp replaces your entire process image with the command (first argument).</p>\n\n<p>Example taken from: <a href=\"http://www.cs.ecu.edu/karl/4630/sum01/example1.html\" rel=\"nofollow\">http://www.cs.ecu.edu/karl/4630/sum01/example1.html</a></p>\n\n<p>If you want to run something in the background you need to fork first:</p>\n\n<pre><code>int runcmd(char *cmd)\n{\n  char* argv[MAX_ARGS];\n  pid_t child_pid;\n  int child_status;\n\n  parsecmd(cmd,argv);\n  child_pid = fork();\n  if(child_pid == 0) {\n    /* This is done by the child process. */\n\n    execvp(argv[0], argv);\n\n    /* If execvp returns, it must have failed. */\n\n    printf(\"Unknown command\\n\");\n    exit(0);\n  }\n  else {\n     /* This is run by the parent.  Wait for the child\n        to terminate.  If you want to run in the background then \n        you could remove this code.  It's equivalent to \"wait\" \n        on the shell. */\n\n     do {\n       pid_t tpid = wait(&amp;child_status);\n       if(tpid != child_pid) process_terminated(tpid);\n     } while(tpid != child_pid);\n\n     return child_status;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1426091738, "creation_date": 1426091738, "answer_id": 28992291, "question_id": 28991786, "link": "https://stackoverflow.com/questions/28991786/execvp-with-three-elements/28992291#28992291", "title": "Execvp with three elements", "body": "<p>The <code>execvp()</code> function expects exactly two arguments, the name of the binary to execute and a <code>NULL</code>-terminated array of pointers to the command arguments.  Passing more or fewer arguments results in undefined behavior.  Passing arguments of types different than those expected may compile, but probably does not have the result you wanted.</p>\n\n<p>So yes, if you wanted to take an existing argument array and add another argument then you would need to make a copy with space for an additional element.  Note, too, that '&amp;' is a <code>char</code> literal, not a string literal.  The distinction is immense.</p>\n\n<p>With all that said, I observe, as others did, that giving \"&amp;\" as an argument to the program will <em>not</em> have the result of running the program in the background, and more generally that <code>execvp()</code> and the other exec-family functions may not have quite the behavior you expect.  In particular, be aware that the exec functions normally do not return.  Usually, one <code>fork()</code>s first and performs the exec in the child process, which inherently provides the background process behavior.</p>\n\n<p>Alternatively, it may be that you'll find the <code>system()</code> function more convenient, as it uses the shell to run the command you specify.</p>\n"}], "owner": {"reputation": 482, "user_id": 1920212, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcb77bf6d2242db7ea1416e2f610f180?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty", "link": "https://stackoverflow.com/users/1920212/qwerty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1426091738, "creation_date": 1426090305, "question_id": 28991786, "link": "https://stackoverflow.com/questions/28991786/execvp-with-three-elements", "title": "Execvp with three elements", "body": "<p>I am trying to do the following:</p>\n\n<pre><code>execvp(command[0][0], argument[0], '&amp;');\n</code></pre>\n\n<p>Which works when it is not in background mode, that is to say:</p>\n\n<pre><code>execvp(command[0][0], argument[0]);\n</code></pre>\n\n<p>Is it necessary to create an extra array to concatenate the character &amp; to the end of <code>argument</code>, or is there any other way to insert the background option at the end of execvp command?</p>\n"}, {"tags": ["c", "gcc", "newlib"], "owner": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1426089953, "creation_date": 1426089953, "question_id": 28991648, "link": "https://stackoverflow.com/questions/28991648/switch-to-newlib-nano-causes-application-to-stop-running", "title": "Switch to newlib-nano causes application to stop running", "body": "<p>I have a newlib 4.9.3 2014q4 application that runs fine on my Cortex-M4 platform.  All output to the serial console uses either <code>iprintf</code> or a custom <code>send_str</code> functions.  The <code>send_str</code> is just writing bytes to the serial peripheral tx buffer (looping call to my <code>fputc</code>).</p>\n\n<pre><code>int _write(int fd, char *buf, int nbytes)\n{\n    int i;\n\n    for (i = 0; i &lt; nbytes; i++) {\n        if (*(buf + i) == '\\n') {\n            /* fd is incorrectly passed as arguments, as FILE is not used, but needed for build */\n            fputc('\\r', (FILE *) &amp; fd);\n        }\n        /* fd is incorrectly passed as arguments, as FILE is not used, but needed for build */\n        fputc(*(buf + i), (FILE *) &amp; fd);\n    }\n\n    return nbytes;\n}\n\nint fputc(int ch, FILE * f)\n{\n    unsigned char tempch = ch;\n\n    sendchar(&amp;tempch);\n\n    return ch;\n}\n\nvoid send_str(unsigned char* buff)\n{\n\n    while(*buff != 0){\n        sendchar(buff);\n        buff++;\n    }\n}\n</code></pre>\n\n<p>In my application's main (after init of data relocation and bss zero'ing) I print a banner.  When I use newlib-nano(<code>--specs=nano.specs</code>) this works if I use <code>send_str</code>, but not if I use <code>iprintf</code>.</p>\n\n<pre><code>int main(int argc, char ** argv)\n{\n    int i = 0;\n    char str[] = \"Hello from Cortex-M4!\\n\";\n\n    init_uart((void*)UART2_BASE_PTR, 115200);\n    send_str(str);\n}\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>int main(int argc, char ** argv)\n{\n    int i = 0;\n    char str[] = \"Hello from Cortex-M4!\\n\";\n\n    init_uart((void*)UART2_BASE_PTR, 115200);\n    iprintf(\"%s\", str);\n}\n</code></pre>\n\n<p>Using just newlib (not nano) both functions work. </p>\n\n<p>Everything I've been reading suggests that changes to my application should not be required to swap between the two.  Is there an exception to this?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1426089497, "post_id": 28991459, "comment_id": 46231021, "body": "Did you search it on Google?"}, {"owner": {"reputation": 533, "user_id": 4473118, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cY1jfXqgFbU/AAAAAAAAAAI/AAAAAAAAADs/BSem3Uzbuiw/photo.jpg?sz=128", "display_name": "Guiroux", "link": "https://stackoverflow.com/users/4473118/guiroux"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1426089526, "post_id": 28991459, "comment_id": 46231046, "body": "@haccks nope he didn&#39;t"}], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 3717347, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/rUWzF.jpg?s=128&g=1", "display_name": "lychee", "link": "https://stackoverflow.com/users/3717347/lychee"}, "edited": false, "score": 0, "creation_date": 1426100502, "post_id": 28991500, "comment_id": 46238456, "body": "downvote for correct solution?"}, {"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 1, "creation_date": 1426110435, "post_id": 28991500, "comment_id": 46244078, "body": "Not my downvote. This answer is the same as that from @d3l but without any explanation. A good answer should explain why it is an answer. A short piece of code may be correct but it does not educate the asker."}, {"owner": {"reputation": 1439, "user_id": 3717347, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/rUWzF.jpg?s=128&g=1", "display_name": "lychee", "link": "https://stackoverflow.com/users/3717347/lychee"}, "reply_to_user": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 0, "creation_date": 1426191048, "post_id": 28991500, "comment_id": 46282413, "body": "but <code>size_t</code> is typedef as <code>unsigned long int</code>"}, {"owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "edited": false, "score": 0, "creation_date": 1426200169, "post_id": 28991500, "comment_id": 46286546, "body": "Maybe, but so can it be typedef&#39;d as <code>unsigned int</code> ;) Its implementation defined."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "edited": false, "score": 0, "creation_date": 1426206488, "post_id": 28991500, "comment_id": 46288611, "body": "Not my downvote, but a copy-pasted code snippet is <i>not</i> enough."}], "tags": [], "owner": {"reputation": 1439, "user_id": 3717347, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/rUWzF.jpg?s=128&g=1", "display_name": "lychee", "link": "https://stackoverflow.com/users/3717347/lychee"}, "is_accepted": false, "score": -1, "last_activity_date": 1426193969, "last_edit_date": 1426193969, "creation_date": 1426089542, "answer_id": 28991500, "question_id": 28991459, "link": "https://stackoverflow.com/questions/28991459/how-do-i-get-the-length-of-an-array-in-c/28991500#28991500", "title": "How do I get the length of an array in C?", "body": "<pre><code>size_t length = sizeof(array) / sizeof(array[0]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "is_accepted": false, "score": 5, "last_activity_date": 1426089628, "creation_date": 1426089628, "answer_id": 28991529, "question_id": 28991459, "link": "https://stackoverflow.com/questions/28991459/how-do-i-get-the-length-of-an-array-in-c/28991529#28991529", "title": "How do I get the length of an array in C?", "body": "<p>If its on the stack, you can use the <code>sizeof</code> <strong>operator</strong> to determine its raw byte size:</p>\n\n<pre><code>int array[5];\nsize_t array_size = sizeof(array);\n</code></pre>\n\n<p>But this gives you the size in bytes, not the number of elements. However, you can calculate the number of elements with this approach:</p>\n\n<pre><code>int array[5];\nsize_t array_elems = sizeof(array) / sizeof(* array);\n</code></pre>\n\n<p>If you array is a pointer (e.g. function call or dynamic memory allocation) then you have to keep track it yourself!</p>\n"}], "owner": {"reputation": 31, "user_id": 3298017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d38da76678767d8953c3411b1c96e60b?s=128&d=identicon&r=PG&f=1", "display_name": "user3298017", "link": "https://stackoverflow.com/users/3298017/user3298017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "closed_date": 1426089596, "answer_count": 2, "score": -4, "last_activity_date": 1426193969, "creation_date": 1426089436, "question_id": 28991459, "link": "https://stackoverflow.com/questions/28991459/how-do-i-get-the-length-of-an-array-in-c", "closed_reason": "Duplicate", "title": "How do I get the length of an array in C?", "body": "<p>How can I get the length of an array in C, I tried it how i get it in other languages but it doesn't work like this:</p>\n\n<pre><code>int array [5];\n\nfor(int i = 0; i &lt; array.length; i++) {..\n</code></pre>\n"}, {"tags": ["c", "datetime", "unix-timestamp"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1426090092, "post_id": 28991427, "comment_id": 46231476, "body": "I&#39;d say <code>mktime</code> assumes local time per C spec: &quot;The mktime function converts the broken-down time, expressed as <b>local time</b>&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426090291, "post_id": 28991427, "comment_id": 46231618, "body": "Maybe 1) change local time zone to UTC, 2) call mktime() 3) restore local timezone 4) add <code>tm_gmtoff</code> to step 2 result."}, {"owner": {"reputation": 3420, "user_id": 424632, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec99692fd9664c4f4558a6d0d020a058?s=128&d=identicon&r=PG", "display_name": "musiphil", "link": "https://stackoverflow.com/users/424632/musiphil"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426095906, "post_id": 28991427, "comment_id": 46235517, "body": "+1 to @chux; GNU C Library even provides <code>timelocal</code> as a synonym for <code>mktime</code>. I suggest that you adjust your <code>time_struct</code> to UTC (using <code>tm_gmtoff</code>) and use <code>timegm</code>. Another option is to temporarily adjust your <code>TZ</code> environment variable while calling <code>mktime</code>."}, {"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 2, "creation_date": 1426107122, "post_id": 28991427, "comment_id": 46242321, "body": "Check this example <a href=\"http://storkhole.cz/software/ikeman/asn1_time_t.c\" rel=\"nofollow noreferrer\">asn1_time_t.c</a>. There is <code>convert</code> label at the end of file. That could be what you need. Or <a href=\"http://kbyanc.blogspot.com/2007/06/c-converting-struct-tm-times-with.html\" rel=\"nofollow noreferrer\">C: Converting struct tm times with timezone to time_t</a>: solution with <code>timegm()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 960, "user_id": 1782553, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc4d4fbae28ecd225bd84e7e8cb6fc5e?s=128&d=identicon&r=PG", "display_name": "Jav", "link": "https://stackoverflow.com/users/1782553/jav"}, "is_accepted": true, "score": 1, "last_activity_date": 1497453557, "creation_date": 1497453557, "answer_id": 44548728, "question_id": 28991427, "link": "https://stackoverflow.com/questions/28991427/why-is-mktime-unsetting-gmtoff-how-to-make-mktime-use-the-gmtoff-field/44548728#44548728", "title": "Why is mktime unsetting gmtoff ? How to make mktime use the gmtoff field?", "body": "<p>Here is a code snippet that responds to my problem. The trick was to use the global variable <code>timezone</code>.</p>\n\n<pre><code>/*\n    Function: timestamp_from_datetime\n    Returns the timestamp corresponding to a formated string YYYYMMDDTHHMMSS+TZ\n\n    Parameters:\n        datetime - must be non-NULL\n\n    Returns:\n        The timestamp associated to datetime\n */\ntime_t timestamp_from_datetime(const char *datetime)\n{\n    struct tm time_struct = (struct tm) {0};\n    strptime(datetime,\"%Y%m%dT%H%M%S%z\", &amp;time_struct);\n    long int gmtoff = time_struct.tm_gmtoff;\n    return mktime(&amp;time_struct) - gmtoff - timezone;\n}\n</code></pre>\n"}], "owner": {"reputation": 960, "user_id": 1782553, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc4d4fbae28ecd225bd84e7e8cb6fc5e?s=128&d=identicon&r=PG", "display_name": "Jav", "link": "https://stackoverflow.com/users/1782553/jav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 0, "accepted_answer_id": 44548728, "answer_count": 1, "score": 3, "last_activity_date": 1497453557, "creation_date": 1426089352, "question_id": 28991427, "link": "https://stackoverflow.com/questions/28991427/why-is-mktime-unsetting-gmtoff-how-to-make-mktime-use-the-gmtoff-field", "title": "Why is mktime unsetting gmtoff ? How to make mktime use the gmtoff field?", "body": "<p>I want to get an unix timestamp from a <code>string</code> containing a representation of the time of the form <code>YYYYMMDDThhmmss+TZ</code>.</p>\n\n<p>For that, I convert the string into a <code>struct tm</code> and then use <code>mktime</code> to convert it to an unix timestamp.</p>\n\n<pre><code>str = \"20150228T202832+02\";\nstruct tm time_struct = {0};\nstrptime(str,\"%Y%m%dT%H%M%S%z\", &amp;time_struct);\nuint64_t timestamp = mktime(&amp;time_struct); /* ignore and unset TZ */\n</code></pre>\n\n<p>It becomes a problem when I use a different time zone than the one I'm in. The <code>mktime</code> function ignores and <em>unset</em> the <code>tm_gmtoff</code> field of the <code>struct tm</code>, returning a wrong timestamp (the difference is given by the <code>string</code>'s time zone minus my time zone).</p>\n\n<ul>\n<li>Why is <code>mktime</code> ignoring the <code>tm_gmtoff</code> field of the <code>struct tm</code>?</li>\n<li>Why is <code>mktime</code> setting the <code>tm_gmtoff</code> field to my current time zone <em>without modifying accordingly the rest of the <code>struct tm</code></em> ? (making the <code>struct tm</code> <em>represent a different time</em>!)</li>\n</ul>\n\n<p>To correct this behavior, I would like to add the difference between my time zone and the time zone of the <code>string</code> to the fields of the <code>struct tm</code>, before making the call to <code>mktime</code>.</p>\n\n<ul>\n<li>How could I get my current time zone without making a new (useless) <code>struct tm</code> ?</li>\n</ul>\n"}, {"tags": ["c", "audio", "wav"], "comments": [{"owner": {"reputation": 6444, "user_id": 1818849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8b0186bf6ac103ab894df7d2fd205dc?s=128&d=identicon&r=PG", "display_name": "Benjamin Trent", "link": "https://stackoverflow.com/users/1818849/benjamin-trent"}, "edited": false, "score": 0, "creation_date": 1426090157, "post_id": 28991364, "comment_id": 46231516, "body": "you could probably do all of this with <code>Gstreamer</code>..."}, {"owner": {"reputation": 27, "user_id": 4659232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7STd-9O0a3Q/AAAAAAAAAAI/AAAAAAAAALA/WrdEU8m8vlk/photo.jpg?sz=128", "display_name": "Leviathan3", "link": "https://stackoverflow.com/users/4659232/leviathan3"}, "reply_to_user": {"reputation": 6444, "user_id": 1818849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8b0186bf6ac103ab894df7d2fd205dc?s=128&d=identicon&r=PG", "display_name": "Benjamin Trent", "link": "https://stackoverflow.com/users/1818849/benjamin-trent"}, "edited": false, "score": 0, "creation_date": 1426090601, "post_id": 28991364, "comment_id": 46231821, "body": "Is Gstreamer a library/tool that would execute the conversions for me? I need to program the algorithms to execute the conversion myself."}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 1, "last_activity_date": 1426092230, "creation_date": 1426092230, "answer_id": 28992465, "question_id": 28991364, "link": "https://stackoverflow.com/questions/28991364/how-do-i-downsample-a-wav-file-in-c-and-apply-bandpass-filter/28992465#28992465", "title": "How do I downsample a .wav file in C and apply bandpass filter?", "body": "<ol>\n<li><p>Separate the code that deals with the specifics of .wav files from the specifics of working with audio samples.  There are lots of how-tos on the Web for reading and writing .WAV files, especially PCM samples.</p></li>\n<li><p>Once you have your samples in memory, downsampling is trivial.  You literally take every _n_th sample and throw away the rest.  There are other approaches that might better preserve the fidelity.  For example, you might use a low-pass filter first and then resample the filtered waveform.  A low-pass filter can be implemented with weighted averaging of the recent samples.</p></li>\n<li><p>Bandpass filtering can be accomplished a few ways.  The most direct is to transform the samples from the time domain to the frequency domain, manipulate the signal in frequency space, and transform it back.  The transform used for this is called a Fourier transform.  The most common way to do this in software is with an algorithm called a Fast Fourier Transform (FFT).  It's \"fast\" because it eliminates a lot of redundant calculations.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 4658853, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152834565396799/picture?type=large", "display_name": "xscanpix", "link": "https://stackoverflow.com/users/4658853/xscanpix"}, "is_accepted": false, "score": 0, "last_activity_date": 1426095372, "creation_date": 1426095372, "answer_id": 28993524, "question_id": 28991364, "link": "https://stackoverflow.com/questions/28991364/how-do-i-downsample-a-wav-file-in-c-and-apply-bandpass-filter/28993524#28993524", "title": "How do I downsample a .wav file in C and apply bandpass filter?", "body": "<p>Reading up on how to implement a digital filter is probably the first step. I would suggest looking up FIR and IIR filters. </p>\n\n<p>Or if you are lazy, there probably exists several third party libraries that you can use.</p>\n"}], "owner": {"reputation": 27, "user_id": 4659232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7STd-9O0a3Q/AAAAAAAAAAI/AAAAAAAAALA/WrdEU8m8vlk/photo.jpg?sz=128", "display_name": "Leviathan3", "link": "https://stackoverflow.com/users/4659232/leviathan3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 1, "accepted_answer_id": 28992465, "answer_count": 2, "score": 0, "last_activity_date": 1426095372, "creation_date": 1426089210, "question_id": 28991364, "link": "https://stackoverflow.com/questions/28991364/how-do-i-downsample-a-wav-file-in-c-and-apply-bandpass-filter", "title": "How do I downsample a .wav file in C and apply bandpass filter?", "body": "<p>I need to take a .wav file with 44.1k and downsample it to 11.25k (Dividing samples by 4).</p>\n\n<p>I also need to apply a bandpass filter to 300 Hz -> 3,200 Hz to the .wav file.</p>\n\n<p>I am new to audio programming, I have been trying to research how to specifically approach this task but every search has pointed to a library or tool that would simply make the conversion for me. It's a training exercise for a new position I have acquired (to familiarize myself with both C programming and audio programming) so I have to accomplish it manually.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "c++11", "dynamic-library"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 4, "creation_date": 1426089211, "post_id": 28991198, "comment_id": 46230791, "body": "You probably wanted <code>malloc(size);</code> instead of <code>malloc(sizeof(size));</code>. But you will face problems as what you really need is <code>malloc(size*sizeof(int));</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1426089223, "post_id": 28991198, "comment_id": 46230803, "body": "Nope - you need to declare <code>my_alloc</code> as <code>extern &quot;C&quot;</code> or implement a wrapper in your C++ library which does this."}, {"owner": {"reputation": 121, "user_id": 1544939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cf31bcbe3942164dbccaafc1a42294?s=128&d=identicon&r=PG", "display_name": "Madhava", "link": "https://stackoverflow.com/users/1544939/madhava"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1426089494, "post_id": 28991198, "comment_id": 46231017, "body": "@CoolGuy that was a type, forget that, I am looking at how to call my_alloc from C library."}, {"owner": {"reputation": 121, "user_id": 1544939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cf31bcbe3942164dbccaafc1a42294?s=128&d=identicon&r=PG", "display_name": "Madhava", "link": "https://stackoverflow.com/users/1544939/madhava"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1426089553, "post_id": 28991198, "comment_id": 46231074, "body": "@PaulR, I have the restriction of being unable to the existing C++ code, so can&#39;&#39;t do that."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1426092081, "post_id": 28991198, "comment_id": 46232860, "body": "OK - try to remember to include important constraints like this in your question in future. I&#39;ve sketched out one possible solution in an answer below now."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426092953, "post_id": 28991198, "comment_id": 46233459, "body": "Why do you ask? Please edit your question to explain that!"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 1544939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cf31bcbe3942164dbccaafc1a42294?s=128&d=identicon&r=PG", "display_name": "Madhava", "link": "https://stackoverflow.com/users/1544939/madhava"}, "edited": false, "score": 0, "creation_date": 1426096083, "post_id": 28992332, "comment_id": 46235634, "body": "This was thought of as well, but unfortunately this involves 100+ API wrappers for which we have to write a library, so this was being considered the last approach if we didn&#39;t find any other solution. Anyway looks like there is nothing else that can be done apart from wrapper APIs."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 121, "user_id": 1544939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cf31bcbe3942164dbccaafc1a42294?s=128&d=identicon&r=PG", "display_name": "Madhava", "link": "https://stackoverflow.com/users/1544939/madhava"}, "edited": false, "score": 0, "creation_date": 1426096218, "post_id": 28992332, "comment_id": 46235740, "body": "OK - again, this information should have been in the question - if you don&#39;t make an effort to explain the whole problem then it&#39;s like pulling teeth for anyone trying to provide a solution."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 8, "last_activity_date": 1426091860, "creation_date": 1426091860, "answer_id": 28992332, "question_id": 28991198, "link": "https://stackoverflow.com/questions/28991198/calling-c-application-code-from-c-library/28992332#28992332", "title": "Calling C++ Application Code from C library?", "body": "<p>You need to create a stub, e.g.</p>\n\n<p>Stub header:</p>\n\n<pre><code>// stub.h\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nvoid* my_alloc_c(int size);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Stub implementation:</p>\n\n<pre><code>// stub.cpp\n\n#include \"stub.h\"\n#include \"header_where_my_alloc_is_declared.h\"\n\nvoid* my_alloc_c(int size)\n{\n    return my_alloc(size);\n}\n</code></pre>\n\n<p>Your C code (example):</p>\n\n<pre><code>// my_code.c\n\n#include \"stub.h\"\n\nint main()\n{\n    void * p = my_alloc_c(42);\n    return 0;\n}\n</code></pre>\n\n<p>Then compile your stub and link it with your C code:</p>\n\n<pre><code>g++ -Wall -c stub.cpp          # compile stub.cpp\ngcc -Wall my_code.c stub.o     # compile your C code and link with stub.o\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 5, "last_activity_date": 1427111694, "last_edit_date": 1495534204, "creation_date": 1426092707, "answer_id": 28992634, "question_id": 28991198, "link": "https://stackoverflow.com/questions/28991198/calling-c-application-code-from-c-library/28992634#28992634", "title": "Calling C++ Application Code from C library?", "body": "<p>As <a href=\"https://stackoverflow.com/a/28992332/841108\">Paul R. answered</a>, you need a stub code. also, you'll better be sure that your C++ function does not throw <a href=\"https://en.wikipedia.org/wiki/Exception_handling\" rel=\"nofollow noreferrer\">exceptions</a> (I guess that a C++ function, called from a C program and <code>main</code>, which throws an uncaught exception is having some <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>). BTW, you should be sure that the constructor of <code>static</code> C++ data (like <code>std::cout</code>) is called \"conceptually\" before your <code>main</code> in <em>C</em> (so you better link your program with a C++ compiler, not a C one). See the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.htm\" rel=\"nofollow noreferrer\">GCC <code>__attribute__(constructor)</code></a></p>\n\n<p>In <em>practice</em>, at least on Linux with C++ code compiled by <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> (<code>g++</code>) or by <a href=\"http://clang.llvm.org/\" rel=\"nofollow noreferrer\">Clang/LLVM</a> (<code>clang++</code>),  a C++ function has some <a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow noreferrer\">mangled name</a>.</p>\n\n<p>You might use some ugly and non-portable trick to call a function by its mangled name. You could dare coding:</p>\n\n<pre><code> int main(int argc, char**argv) {\n   extern void* _Z10my_alloc_ci(int size);\n   void * p = _Z10my_alloc_ci(42);\n   return 0;\n }\n</code></pre>\n\n<p>but I am a bit ashamed of giving such silly advice. You could even use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Asm-Labels.html#Asm-Labels\" rel=\"nofollow noreferrer\">asm labels</a> e.g.</p>\n\n<pre><code>extern void*f(int) asm (\"_Z10my_alloc_ci\");\np = f(42);\n</code></pre>\n\n<p>However, I feel that you should not have any such approaches, and I am surprized why you need to call a C++ function which is not wrapped around <code>extern \"C\"</code>.</p>\n\n<p>Notice that in theory, C++ functions (without <code>extern \"C\"</code>) could even have a different -and incompatible- <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">calling convention</a> than C functions. I don't know any implementation doing that.  So to be safe you should wrap your C++ function with some C++ wrapping using <code>extern \"C\"</code></p>\n\n<p>To avoid uncaught exceptions, you might catch all of them in your C++ wrapper:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\nextern \"C\" void* my_alloc_c(int size)  {\n  extern void* my_alloc(int);\n  try {\n    return my_alloc(size);\n  } catch (...) {\n     ::fprintf(::stderr, \"got uncaught C++ exception for my_alloc(%d)\\n\", \n          size);\n    ::fflush(nullptr);\n    ::abort();\n  }\n }\n</code></pre>\n\n<p>BTW, if your C++ library is large, you might perhaps try to automatize the generation of the glue code. For example, you could customize <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> using <a href=\"http://gcc-melt.org/\" rel=\"nofollow noreferrer\">MELT</a> (a Lispy domain specific language to extend GCC) by coding an extension in MELT which would generate the glue code when compiling the C++ header files.</p>\n\n<p>You might be interested in <a href=\"https://sourceware.org/libffi/\" rel=\"nofollow noreferrer\">libffi</a> which enables you to (portably) call any (C and probably C++) function of arbitrary signature.</p>\n"}, {"tags": [], "owner": {"reputation": 75274, "user_id": 14089, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/6e5508b29d6d964efbd50701ceb23a5a?s=128&d=identicon&r=PG", "display_name": "paercebal", "link": "https://stackoverflow.com/users/14089/paercebal"}, "is_accepted": false, "score": 1, "last_activity_date": 1426115495, "creation_date": 1426115495, "answer_id": 28999120, "question_id": 28991198, "link": "https://stackoverflow.com/questions/28991198/calling-c-application-code-from-c-library/28999120#28999120", "title": "Calling C++ Application Code from C library?", "body": "<p>From what I gathered:</p>\n\n<ol>\n<li>You have a C++ library you have no control over <i>(you can't add the extern \"C\")</i></li>\n<li>You have a C library that must call the C++ library</li>\n<li>You can modify your C library to accommodate a solution <i>(you can change the makefile and change the name of the function you want to call)</i></li>\n</ol>\n\n<p><b>So, one alternative solution would be to compile your C library with the very same C++ compiler used for that C++ library, if that's acceptable for you.</b></p>\n\n<p><i>Note: with C89, you'll possibly need to modify bits of your code (</i>e.g. void * to T * conversions are not implicit anymore in C++<i>), but it would probably be easier than 100+ wrappers.</i></p>\n\n<p><i>Note 2: If you're using some C99 features (</i>e.g. the VLAs<i>), then that code will not compile in C++.</i></p>\n"}], "owner": {"reputation": 121, "user_id": 1544939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cf31bcbe3942164dbccaafc1a42294?s=128&d=identicon&r=PG", "display_name": "Madhava", "link": "https://stackoverflow.com/users/1544939/madhava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 28992332, "answer_count": 3, "score": 1, "last_activity_date": 1427111694, "creation_date": 1426088828, "question_id": 28991198, "link": "https://stackoverflow.com/questions/28991198/calling-c-application-code-from-c-library", "title": "Calling C++ Application Code from C library?", "body": "<p>Folks, Assuming I have a c++ application / library running which implements say </p>\n\n<pre><code>/* Alloc API */\nvoid* my_alloc(int size) {\n    return malloc(sizeof(size));\n}\n</code></pre>\n\n<p>This is not under \"extern c\".</p>\n\n<p>I have a C dynamic library from which I need to call my_alloc, can I directly call that API?</p>\n\n<pre><code>Like,\n\nint test_my_alloc (int size) {\n    int *x;\n\n    x = (int*)my_alloc(size);\n    if (x == NULL) {\n        return 0;\n    } else {\n        return 1;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 4, "creation_date": 1426088949, "post_id": 28991172, "comment_id": 46230604, "body": "&quot;Compiler is linking a429usbnt.h&quot;: The compiler is <i>including</i> the header, the <i>linker</i> needs to be told where the already-compiled definition is."}, {"owner": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426089370, "post_id": 28991172, "comment_id": 46230921, "body": "I believe that is what the -L. flag is doing? I have a .lib file that contains the definitions in the same directory as everything else. I&#39;ve never compiled manually before so please forgive me if I am being dense :D"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426089631, "post_id": 28991172, "comment_id": 46231131, "body": "I don&#39;t know whether gcc can link .lib files. Those are usually created by Microsoft compilers."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426089977, "post_id": 28991172, "comment_id": 46231383, "body": "<a href=\"http://www.rapidtables.com/code/linux/gcc/gcc-l.htm\" rel=\"nofollow noreferrer\">rapidtables.com/code/linux/gcc/gcc-l.htm</a>"}, {"owner": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "edited": false, "score": 0, "creation_date": 1426090444, "post_id": 28991172, "comment_id": 46231711, "body": "Thanks Lundin, turns out I needed to use a combination of -L and -l !"}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "is_accepted": false, "score": 1, "last_activity_date": 1426090522, "creation_date": 1426090522, "answer_id": 28991869, "question_id": 28991172, "link": "https://stackoverflow.com/questions/28991172/compiling-c-with-non-standard-header/28991869#28991869", "title": "Compiling C with non standard header", "body": "<p>If you are trying to link against a .lib file with gcc, it seems you need to define a directory with -L and an actual file with -l</p>\n"}], "owner": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426090522, "creation_date": 1426088749, "question_id": 28991172, "link": "https://stackoverflow.com/questions/28991172/compiling-c-with-non-standard-header", "title": "Compiling C with non standard header", "body": "<p>I have my main C file: </p>\n\n<pre><code>#if defined(WIN32)\n#include &lt;windows.h&gt;\n#include &lt;stddef.h&gt;\n#endif\n#if defined(LINUX)\n#include &lt;curses.h&gt;\n#endif\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#if defined(WIN32)\n#include &lt;conio.h&gt;\n#endif\n#include &lt;ctype.h&gt;\n#include &lt;a429usbnt.h&gt;\n\n#if defined(WIN32)\n#include \"genlib.h\"\n#endif\n\nvoid main()\n{\n    _open_xpc(1);\n}\n</code></pre>\n\n<p>When I try to compile using this command </p>\n\n<pre><code>gcc -I. -L. test.c -o test \n</code></pre>\n\n<p>I get the following error: <strong>undefined reference to '_open_xpc'</strong>. </p>\n\n<p>However if I change the call to the _open_xpc function and instead just </p>\n\n<pre><code>printf(\"%d\", XPC_ERROR_ACTIONCODE);\n</code></pre>\n\n<p>the program compiles fine and the correct value assigned to the definition of <strong>XPC_ERROR_ACTIONCODE</strong> is printed out, so the compiler is linking <strong>a429usbnt.h</strong> but will only recognize defined variables and not the functions.  </p>\n"}, {"tags": ["c++", "c", "macrodef"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 10, "creation_date": 1426087911, "post_id": 28990818, "comment_id": 46229837, "body": "No, they don&#39;t have the same logic functionality, nor do they seem to have that."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1426088001, "post_id": 28990818, "comment_id": 46229904, "body": "Why don&#39;t you try replacing <code>if</code> with <code>#if</code> and see if it works properly."}, {"owner": {"reputation": 2555, "user_id": 664010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e18fb6458794f60f32a5ae70d832d27?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/664010/stefan"}, "edited": false, "score": 0, "creation_date": 1426088002, "post_id": 28990818, "comment_id": 46229907, "body": "A macro driven behaviour happens at different time than syntax. No they don&#39;t have same logic functionality."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1426088059, "post_id": 28990818, "comment_id": 46229952, "body": "See <a href=\"https://docs.freebsd.org/info/cpp/cpp.pdf\" rel=\"nofollow noreferrer\">docs.freebsd.org/info/cpp/cpp.pdf</a> , <a href=\"http://www.cprogramming.com/tutorial/cpreprocessor.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/cpreprocessor.html</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1426088375, "post_id": 28990818, "comment_id": 46230160, "body": "What prevented you from reading your C++ book and learning the language? Then these sorts of overly broad questions would not need to be asked."}, {"owner": {"reputation": 71, "user_id": 4658977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233eb493eade85fbcaa618a828db7d80?s=128&d=identicon&r=PG&f=1", "display_name": "za17", "link": "https://stackoverflow.com/users/4658977/za17"}, "edited": false, "score": 0, "creation_date": 1426093311, "post_id": 28990818, "comment_id": 46233731, "body": "Thanks for pointing out my mistake. I am new here and I didn&#39;t realise that it is not a place to ask beginner&#39;s questions."}, {"owner": {"reputation": 1131, "user_id": 1831256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1933b2b116c3a0631de520bb76cdfdf6?s=128&d=identicon&r=PG", "display_name": "DrGeneral", "link": "https://stackoverflow.com/users/1831256/drgeneral"}, "edited": false, "score": 2, "creation_date": 1490424096, "post_id": 28990818, "comment_id": 73115828, "body": "I personally think this is a legit question. Googled it, found here with pretty good answers. Don&#39;t get why the downvotes though. Experienced programmers should stop bullying newbies."}, {"owner": {"reputation": 1075, "user_id": 2949645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cv3Kc.jpg?s=128&g=1", "display_name": "Sahib Yar", "link": "https://stackoverflow.com/users/2949645/sahib-yar"}, "edited": false, "score": 3, "creation_date": 1502455753, "post_id": 28990818, "comment_id": 78230395, "body": "Don&#39;t know why this question is down-voted so much, It is a valid question."}], "answers": [{"comments": [{"owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "edited": false, "score": 2, "creation_date": 1426088333, "post_id": 28990885, "comment_id": 46230129, "body": "even before compile time ;)"}], "tags": [], "owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "is_accepted": false, "score": 10, "last_activity_date": 1426088359, "last_edit_date": 1426088359, "creation_date": 1426088014, "answer_id": 28990885, "question_id": 28990818, "link": "https://stackoverflow.com/questions/28990818/the-differences-between-if-else-and-if-else-endif/28990885#28990885", "title": "The differences between if else and #if #else #endif", "body": "<p><code>if(...)</code> and <code>else(...)</code> conditions are evaluated at runtime. <code>#if</code>, <code>#else</code> are evaluated before compile time by the preprocessor.</p>\n"}, {"tags": [], "owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "is_accepted": false, "score": 4, "last_activity_date": 1426088599, "last_edit_date": 1426088599, "creation_date": 1426088225, "answer_id": 28990972, "question_id": 28990818, "link": "https://stackoverflow.com/questions/28990818/the-differences-between-if-else-and-if-else-endif/28990972#28990972", "title": "The differences between if else and #if #else #endif", "body": "<blockquote>\n  <p>Can I ask what's the differences between them?</p>\n</blockquote>\n\n<p><code>#if</code> <code>#else</code> and <code>#endif</code> are instructions to the compiler, to only compile the code between them, if a compilation level condition (like a macro being defined or having a certain value) is satisfied.</p>\n\n<p><code>if</code> and <code>else</code> are parts of the compiled algorithm.</p>\n\n<blockquote>\n  <p>What kind of specific situations for me to choose each of them?</p>\n</blockquote>\n\n<p>The pre-compilation conditions are used to disable parts of the code, in situations where they make no sense (like calls to Windows-specific APIs, when compiling under Linux). They are key to developing cross-platform code (for example).</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 4658977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233eb493eade85fbcaa618a828db7d80?s=128&d=identicon&r=PG&f=1", "display_name": "za17", "link": "https://stackoverflow.com/users/4658977/za17"}, "edited": false, "score": 0, "creation_date": 1426093050, "post_id": 28991939, "comment_id": 46233540, "body": "Thanks for your help. Now I am reading the source code of opencv, then I find there are lot marco definitions in the head files. Is it means those marco definitions well tell preprocessor which source files to compile?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 71, "user_id": 4658977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233eb493eade85fbcaa618a828db7d80?s=128&d=identicon&r=PG&f=1", "display_name": "za17", "link": "https://stackoverflow.com/users/4658977/za17"}, "edited": false, "score": 0, "creation_date": 1426139323, "post_id": 28991939, "comment_id": 46252482, "body": "@za17: without knowing OpenCV, I&#39;d say those are either include guards (i.e. they prevent multiple processing of the same header file) or they enable special treatment for different compilers."}], "tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": true, "score": 7, "last_activity_date": 1426090722, "creation_date": 1426090722, "answer_id": 28991939, "question_id": 28990818, "link": "https://stackoverflow.com/questions/28990818/the-differences-between-if-else-and-if-else-endif/28991939#28991939", "title": "The differences between if else and #if #else #endif", "body": "<blockquote>\n  <p>I am confused about the if/else and #if/#else/#endif. It seems that\n  they have the same logic functionality.</p>\n  \n  <p>Can I ask what's the differences between them?</p>\n</blockquote>\n\n<p><code>#if</code>, <code>#else</code> and <code>#endif</code> belong to preprocessing. They are <strong>not executed</strong> but are instructions for textual replacement. You can think of them as a kind of automatic \"search &amp; replace\" feature you'd usually find in a text editor.</p>\n\n<p><code>if</code> and <code>else</code> are run-time constructs. You can think of them as being executed while the program runs.</p>\n\n<p>Let's say you have this program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define VALUE 1\n\nint main()\n{\n#if VALUE == 1\n    std::cout &lt;&lt; \"one\\n\";\n#else\n    std::cout &lt;&lt; \"not one\\n\";\n#endif\n}\n</code></pre>\n\n<p>When you tell your compiler to compile this program, the preprocessor will make a textual replacement before the \"real\" C++ code is actually compiled. It will be as if the program was:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"one\\n\";\n}\n</code></pre>\n\n<p>Now, technically you could use an <code>if</code> here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define VALUE 1\n\nint main()\n{\n    if (VALUE == 1)\n    {\n        std::cout &lt;&lt; \"one\\n\";\n    }\n    else\n    {\n        std::cout &lt;&lt; \"not one\\n\";\n    }\n}\n</code></pre>\n\n<p>But in C++ you <strong>don't use <code>#define</code> for constants</strong>. You'd instead have something like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint const value = 1;\n\nint main()\n{\n    if (value == 1)\n    {\n        std::cout &lt;&lt; \"one\\n\";\n    }\n    else\n    {\n        std::cout &lt;&lt; \"not one\\n\";\n    }\n}\n</code></pre>\n\n<p>Perhaps the value is only known while the program executes, e.g. via user input. Then you obviously cannot use <code>#if</code>, which only works before the program runs. You must use <code>if</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int value;\n    std::cin &gt;&gt; value; // gross simplification here\n\n    if (value == 1)\n    {\n        std::cout &lt;&lt; \"one\\n\";\n    }\n    else\n    {\n        std::cout &lt;&lt; \"not one\\n\";\n    }\n}\n\nWhat kind of specific situations for me to choose each of them?\n</code></pre>\n\n<p>A good guideline for a beginner would be: Use <code>#if</code> (or actually: <code>#ifndef</code>) only for <a href=\"http://en.wikipedia.org/wiki/Include_guard\" rel=\"noreferrer\">include guards</a>. Consider further uses of <code>#if</code> when you encounter problems that can only be solved by the preprocessor.</p>\n"}], "owner": {"reputation": 71, "user_id": 4658977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233eb493eade85fbcaa618a828db7d80?s=128&d=identicon&r=PG&f=1", "display_name": "za17", "link": "https://stackoverflow.com/users/4658977/za17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5462, "favorite_count": 0, "accepted_answer_id": 28991939, "answer_count": 3, "score": -3, "last_activity_date": 1450175428, "creation_date": 1426087883, "last_edit_date": 1450175428, "question_id": 28990818, "link": "https://stackoverflow.com/questions/28990818/the-differences-between-if-else-and-if-else-endif", "title": "The differences between if else and #if #else #endif", "body": "<p>I am confused between the <code>if</code>/<code>else</code> and <code>#if</code>/<code>#else</code>/<code>#endif</code> constructs.</p>\n\n<ol>\n<li>What are the differences between them?</li>\n<li>In which specific situations should I use each of them?</li>\n</ol>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 4, "creation_date": 1426086592, "post_id": 28990245, "comment_id": 46228859, "body": "Show what have you tried ?"}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1426086599, "post_id": 28990245, "comment_id": 46228867, "body": "Don&#39;t do this in C. Can you choose e.g. Python?"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1426086700, "post_id": 28990245, "comment_id": 46228941, "body": "Dear Sir/Madam, I can have my team of expert software developers write this program for you. Please forward your standard contract along with rates you are willing to pay and we will negotiate the project."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1426087352, "post_id": 28990245, "comment_id": 46229408, "body": "&quot;I made many attempts at this but they all failed.&quot; Without you posting that code, how could we point out where you went wrong?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4073497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5f84c6025f9bb0890d178bc2137951?s=128&d=identicon&r=PG&f=1", "display_name": "mihair", "link": "https://stackoverflow.com/users/4073497/mihair"}, "is_accepted": false, "score": 0, "last_activity_date": 1426086923, "creation_date": 1426086923, "answer_id": 28990428, "question_id": 28990245, "link": "https://stackoverflow.com/questions/28990245/sum-of-numbers-contained-in-strings/28990428#28990428", "title": "Sum of numbers contained in strings", "body": "<p>You could be using <a href=\"http://www.cplusplus.com/reference/cstdlib/strtol/\" rel=\"nofollow\">strtol</a> </p>\n\n<p>You have an example at the bottom of the page which does pretty much what you want. You're only going to need to manually skip the non-digit characters</p>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 4151013, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8630713570f40dccf4a48edb510b0e3d?s=128&d=identicon&r=PG&f=1", "display_name": "MarkDacek", "link": "https://stackoverflow.com/users/4151013/markdacek"}, "edited": false, "score": 0, "creation_date": 1426087607, "post_id": 28990500, "comment_id": 46229601, "body": "This handles it quite well. Only other recommendations I could have are  1. RegEx (the integer RegEx should be pretty simple) 2. Use a different language (Java, C++) with better IO support (Java Scanners, C++ std:&gt;&gt; operators)"}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 3, "last_activity_date": 1426094877, "last_edit_date": 1426094877, "creation_date": 1426087128, "answer_id": 28990500, "question_id": 28990245, "link": "https://stackoverflow.com/questions/28990245/sum-of-numbers-contained-in-strings/28990500#28990500", "title": "Sum of numbers contained in strings", "body": "<p>So this is fairly straightforward. At every position in the file we ask \"is there a number here?\". If there is, print it out. If there isn't try starting at the next character.</p>\n\n<p>Based on how we understand <code>fscanf()</code> works, we'll test each character at most twice.</p>\n\n<h3>Code</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main() {\n    FILE * fd = fopen(\"in.txt\", \"r\");\n\n    while (true) {\n        unsigned number;\n        int rc = fscanf(fd, \"%u\", &amp;number);\n        if (rc == EOF)\n            break;\n        else if (rc == 0)\n            fseek(fd, 1, SEEK_CUR);\n        else if (rc == 1)\n            printf(\"%u\\n\", number);\n    }\n}\n</code></pre>\n\n<h3>Input File</h3>\n\n<pre><code>cdcd dcdaqw cdcd KKAN 89 bxb hqhq1bhA\n100uuz\ncnkx\n\n n jk xjx100mc\n...\n.+1+\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>89\n1\n100\n100\n1\n</code></pre>\n\n<h3>Next steps</h3>\n\n<p>It should be fairly obvious how to extend this to report the sum, instead of the numbers themselves.</p>\n"}], "owner": {"reputation": 127, "user_id": 3849735, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2138218f31e56b350b98d95ae1c47e02?s=128&d=identicon&r=PG&f=1", "display_name": "Ferduun", "link": "https://stackoverflow.com/users/3849735/ferduun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 28990500, "answer_count": 2, "score": -5, "last_activity_date": 1426094877, "creation_date": 1426086433, "last_edit_date": 1426086818, "question_id": 28990245, "link": "https://stackoverflow.com/questions/28990245/sum-of-numbers-contained-in-strings", "title": "Sum of numbers contained in strings", "body": "<p>Given a text file, for example:</p>\n\n<pre><code>cdcd dcdaqw cdcd KKAN 89 bxb hqhq1bhA\n100uuz\ncnkx\n\n\n n jk xjx100mc\n...\n.+1+\n</code></pre>\n\n<p>I want to find the sum of all  the numbers contained in the various strings:\nIn the given example, I want to sum 89 100 1 100 1.</p>\n\n<p>I made many attempts at this(IE, fscanf of each string and trying to save the int values in an array), but they all failed.</p>\n"}, {"tags": ["python", "c", "gcc", "python-extensions"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 1588565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c340db8be28edb9699003639351df18?s=128&d=identicon&r=PG", "display_name": "TrevorNT", "link": "https://stackoverflow.com/users/1588565/trevornt"}, "edited": false, "score": 0, "creation_date": 1426605708, "post_id": 29056305, "comment_id": 46435865, "body": "Thanks for the reply.  My coworker has to go back to the vendor and ask about the version of strcrypto that is compiled with -fPIC.  In the event that he&#39;s unable to do so, what are my options on getting the strcrypto library to work in Python?"}, {"owner": {"reputation": 23, "user_id": 1588565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c340db8be28edb9699003639351df18?s=128&d=identicon&r=PG", "display_name": "TrevorNT", "link": "https://stackoverflow.com/users/1588565/trevornt"}, "edited": false, "score": 0, "creation_date": 1426691118, "post_id": 29056305, "comment_id": 46477173, "body": "Nevermind, the vendor delivered the updated module.  Thanks again for your help!"}], "tags": [], "owner": {"reputation": 1748, "user_id": 99279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ea76ee226b4cdb598055de1eb1d67a?s=128&d=identicon&r=PG", "display_name": "sterin", "link": "https://stackoverflow.com/users/99279/sterin"}, "is_accepted": true, "score": 1, "last_activity_date": 1426826124, "last_edit_date": 1426826124, "creation_date": 1426383330, "answer_id": 29056305, "question_id": 28989984, "link": "https://stackoverflow.com/questions/28989984/python-module-installation-fails-because-the-gcc-command-is-missing-a-flag-tha/29056305#29056305", "title": "Python module installation fails because the gcc command is missing a flag...that the gcc command has", "body": "<p>The Python extension you are building is a <em>shared</em> library. The code in a shared library </p>\n\n<p><em>must</em> be compiled to be <a href=\"http://en.wikipedia.org/wiki/Position-independent_code\" rel=\"nofollow\">position independent</a>. This is done by compiling with <code>-fPIC</code>. </p>\n\n<p>Your problem is that your <code>libstrcrypto.a</code> is not compiled with <code>-fPIC</code> and therefore cannot be used inside a shared library. You have several alternatives:</p>\n\n<ol>\n<li>Ask for a version of <code>libstrcrypto.a</code> that is compiled with <code>-fPIC</code>.</li>\n<li>Ask for a shared library version of <code>libstrcrypto.a</code>.</li>\n<li>Link your extension statically to produce a new Python executable that contains your extension built in.</li>\n<li>Split the extension into an executable that links with the library and a python extension that somehow communicates with the executable.</li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 1588565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c340db8be28edb9699003639351df18?s=128&d=identicon&r=PG", "display_name": "TrevorNT", "link": "https://stackoverflow.com/users/1588565/trevornt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 29056305, "answer_count": 1, "score": 2, "last_activity_date": 1426826124, "creation_date": 1426085789, "question_id": 28989984, "link": "https://stackoverflow.com/questions/28989984/python-module-installation-fails-because-the-gcc-command-is-missing-a-flag-tha", "title": "Python module installation fails because the gcc command is missing a flag...that the gcc command has", "body": "<p>I am attempting to build a (very simple) Python extension from C code and have run into a snag in the compilation.</p>\n\n<p>(For the record: my C skills are very out-of-date and my code is probably awful.)</p>\n\n<p>As directed <a href=\"https://docs.python.org/2/extending/extending.html\" rel=\"nofollow\">in the docs</a> and on <a href=\"http://intermediate-and-advanced-software-carpentry.readthedocs.org/en/latest/c++-wrapping.html\" rel=\"nofollow\">another site I found</a>, I created a C file that exposes the functionality I need built into a Python module:</p>\n\n<pre><code>#include \"strcrypto.h\"\n#include &lt;stdlib.h&gt;\n\n#define CRYPTO_POOLNUMBER 15\n\nint main() {\n    return 0;\n}\n\nchar* encryptString(char* string) {\n    COMM* comm;\n    char* encrypted_string = malloc(sizeof(char) * 4096);\n    int res;\n\n    comm = init_client(CRYPTO_PORT);\n\n    if (comm == NULL) {\n        return NULL;\n    }\n\n    res = StrEncrypt(comm, string, encrypted_string, CRYPTO_POOLNUMBER);\n\n    end_client(comm);\n    if (res != 1) {\n        return NULL;\n    }\n    else {\n        return encrypted_string;\n    }\n}\n\nchar* decrypt(char* string) {\n    COMM* comm;\n    char* decrypted_string = malloc(sizeof(char) * 4096);\n    int res;\n\n    comm = init_client(CRYPTO_PORT);\n\n    if (comm == NULL) {\n        return NULL;\n    }\n\n    res = StrDecrypt(comm, string, decrypted_string);\n\n    end_client(comm);\n    if (res != 1) {\n        return NULL;\n    }\n    else {\n        return decrypted_string;\n    }\n}\n\nchar* randomToken(char* string) {\n    COMM* comm;\n    char* token = malloc(sizeof(char) * 4096);\n    int res;\n\n    comm = init_client(CRYPTO_PORT);\n\n    if (comm == NULL) {\n        return NULL;\n    }\n\n    res = getPBToken(comm, string, token);\n\n    end_client(comm);\n    if (res != 1) {\n        return NULL;\n    }\n    else {\n        return token;\n    }\n}\n\nchar* fixedToken(char* string) {\n    COMM* comm;\n    char* token = malloc(sizeof(char) * 4096);\n    int res;\n\n    comm = init_client(CRYPTO_PORT);\n\n    if (comm == NULL) {\n        return NULL;\n    }\n\n    res = getFixedToken(comm, string, token);\n\n    end_client(comm);\n    if (res != 1) {\n        return NULL;\n    }\n    else {\n        return token;\n    }\n}\n</code></pre>\n\n<p>I also created the C file that wraps the methods for Python:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\nstatic PyObject* crypto_encrypt(PyObject* self, PyObject* args) {\n    char* original_string;\n    char* encrypted_string;\n    PyObject* return_value;\n\n    if (!PyArg_ParseTuple(args, \"s\", &amp;original_string)) {\n        return NULL;    // Could not parse string or no string was passed.\n    }\n\n    encrypted_string = encryptString(original_string);\n\n    if (encrypted_string == NULL) {\n        return NULL;\n    }\n    else {\n        return_value = PyString_FromString(encrypted_string);\n        free(encrypted_string);\n        return return_value;\n    }\n}\n\nstatic PyObject* crypto_decrypt(PyObject* self, PyObject* args) {\n    char* original_string;\n    char* decrypted_string;\n    PyObject* return_value;\n\n    if (!PyArg_ParseTuple(args, \"s\", &amp;original_string)) {\n        return NULL;    // Could not parse string or no string was passed.\n    }\n\n    decrypted_string = decryptString(original_string);\n\n    if (decrypted_string == NULL) {\n        return NULL;\n    }\n    else {\n        return_value = PyString_FromString(decrypted_string);\n        free(decrypted_string);\n        return return_value;\n    }\n}\n\nstatic PyObject* crypto_fixedToken(PyObject* self, PyObject* args) {\n    char* original_string;\n    char* token;\n    PyObject* return_value;\n\n    if (!PyArg_ParseTuple(args, \"s\", &amp;original_string)) {\n        return NULL;    // Could not parse string or no string was passed.\n    }\n\n    token = fixedToken(original_string);\n\n    if (token == NULL) {\n        return NULL;\n    }\n    else {\n        return_value = PyString_FromString(token);\n        free(token);\n        return return_value;\n    }\n}\n\nstatic PyObject* crypto_randomToken(PyObject* self, PyObject* args) {\n    char* original_string;\n    char* token;\n    PyObject* return_value;\n\n    if (!PyArg_ParseTuple(args, \"s\", &amp;original_string)) {\n        return NULL;    // Could not parse string or no string was passed.\n    }\n\n    token = randomToken(original_string);\n\n    if (token == NULL) {\n        return NULL;\n    }\n    else {\n        return_value = PyString_FromString(token);\n        free(token);\n        return return_value;\n    }\n}\n\nstatic PyMethodDef CryptoMethods[] = {\n    { \"encrypt\", crypto_encrypt, METH_VARARGS, \"Encrypt text using a Crypto server.\" },\n    { \"decrypt\", crypto_decrypt, METH_VARARGS, \"Decrypt text encrypted using a Crypto server.\" },\n    { \"getFixedToken\", crypto_fixedToken, METH_VARARGS, \"Return a fixed PKCS5 token from Crypto.\" },\n    { \"getRandomToken\", crypto_randomToken, METH_VARARGS, \"Return a random PKCS5 token from Crypto.\" },\n    { NULL, NULL, 0, NULL }\n};\n\nPyMODINIT_FUNC initcrypto(void) {\n    (void) Py_InitModule(\"crypto\", CryptoMethods);\n}\n</code></pre>\n\n<p>Finally, I created a setup.py file that creates the extension and calls setup() on the extension:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\next = Extension(\"crypto\",\n    [\"cryptomodule.c\", \"crypto.c\"],\n    libraries = [\"strcrypto\",],\n    library_dirs = [\"/usr/local/lib\",]\n)\n\nsetup(name = \"crypto\", ext_modules = [ext,])\n</code></pre>\n\n<p>The library \"strcrypto\" is actually \"libstrcrypto.a\" and was provided to me; it wasn't something I wrote.  Unfortunately, that is also what appears to be causing the error when I go to install the file:</p>\n\n<pre><code>running install\nrunning build\nrunning build_ext\nbuilding 'crypto' extension\nx86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c cryptomodule.c -o build/temp.linux-x86_64-2.7/cryptomodule.o\ncryptomodule.c: In function \u2018crypto_encrypt\u2019:\ncryptomodule.c:15:5: warning: implicit declaration of function \u2018encryptString\u2019 [-Wimplicit-function-declaration]\n     encrypted_string = encryptString(original_string);\n     ^\ncryptomodule.c:15:22: warning: assignment makes pointer from integer without a cast [enabled by default]\n     encrypted_string = encryptString(original_string);\n                      ^\ncryptomodule.c: In function \u2018crypto_decrypt\u2019:\ncryptomodule.c:36:5: warning: implicit declaration of function \u2018decryptString\u2019 [-Wimplicit-function-declaration]\n     decrypted_string = decryptString(original_string);\n     ^\ncryptomodule.c:36:22: warning: assignment makes pointer from integer without a cast [enabled by default]\n     decrypted_string = decryptString(original_string);\n                      ^\ncryptomodule.c: In function \u2018crypto_fixedToken\u2019:\ncryptomodule.c:57:5: warning: implicit declaration of function \u2018fixedToken\u2019 [-Wimplicit-function-declaration]\n     token = fixedToken(original_string);\n     ^\ncryptomodule.c:57:11: warning: assignment makes pointer from integer without a cast [enabled by default]\n     token = fixedToken(original_string);\n           ^\ncryptomodule.c: In function \u2018crypto_randomToken\u2019:\ncryptomodule.c:78:5: warning: implicit declaration of function \u2018randomToken\u2019 [-Wimplicit-function-declaration]\n     token = randomToken(original_string);\n     ^\ncryptomodule.c:78:11: warning: assignment makes pointer from integer without a cast [enabled by default]\n     token = randomToken(original_string);\n           ^\nx86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c crypto.c -o build/temp.linux-x86_64-2.7/crypto.o\ncrypto.c:6:5: warning: function declaration isn\u2019t a prototype [-Wstrict-prototypes]\n int main() {\n     ^\nx86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/cryptomodule.o build/temp.linux-x86_64-2.7/crypto.o -L/usr/local/lib -lstrcrypto -o build/lib.linux-x86_64-2.7/crypto.so\n/usr/bin/ld: /usr/local/lib/libstrcrypto.a(strcrypto.o): relocation R_X86_64_32 against `.rodata.str1.1' can not be used when making a shared object; recompile with -fPIC\n/usr/local/lib/libstrcrypto.a: error adding symbols: Bad value\ncollect2: error: ld returned 1 exit status\nerror: command 'x86_64-linux-gnu-gcc' failed with exit status 1\n</code></pre>\n\n<p>I don't know what that error means, because as you can see, the gcc calls are indeed using -fPIC.</p>\n\n<p>Can someone please point out what I'm doing wrong here?  Thanks in advance.</p>\n"}, {"tags": ["c", "fpga"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1426086624, "post_id": 28989815, "comment_id": 46228885, "body": "It&#39;s an interesting question but I&#39;m not sure that Stack Overflow is an appropriate place for it. I&#39;ve not voted for closing the question since I&#39;m not certain here, but one of the standard reasons questions get closed is for asking for a library or tool to accomplish some task (which this question sounds like it is doing)."}, {"owner": {"reputation": 3142, "user_id": 1583598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9322bff86c672e97212b0f349d2c8e59?s=128&d=identicon&r=PG", "display_name": "Kevin Thibedeau", "link": "https://stackoverflow.com/users/1583598/kevin-thibedeau"}, "edited": false, "score": 1, "creation_date": 1426087007, "post_id": 28989815, "comment_id": 46229170, "body": "You have to run a synthesizer (XST or something else) and use the Xilinx backend P&amp;R tools to get a bitstream. ISE is just a wrapper around a suite of command line tools that can be called directly from another program. This was done more commonly with the predecessors to ISE but will still work. Vivado has changed things to run in an integrated Tcl engine but I believe you can still control synthesis there without the GUI."}, {"owner": {"reputation": 340, "user_id": 3055695, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006197287599/picture?type=large", "display_name": "JMercer", "link": "https://stackoverflow.com/users/3055695/jmercer"}, "edited": false, "score": 0, "creation_date": 1426088334, "post_id": 28989815, "comment_id": 46230130, "body": "Ah, perfect, I could parse the VHDL with C and have a system call to run the synthesiser.  Found this: <a href=\"http://www.xilinx.com/support/answers/41265.html\" rel=\"nofollow noreferrer\">xilinx.com/support/answers/41265.html</a>"}, {"owner": {"reputation": 3126, "user_id": 4577314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2584bd4005e558c436016c7b13368e1?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Drolet", "link": "https://stackoverflow.com/users/4577314/jonathan-drolet"}, "edited": false, "score": 2, "creation_date": 1426109108, "post_id": 28989815, "comment_id": 46243457, "body": "What you want is not practical. How will you make sure your .bit passes timings for example? I think you should have a look at partial reconfiguration, which allows you to reload some modules in your design, although every optional modules has to be synthesized beforehand."}, {"owner": {"reputation": 1720, "user_id": 2861669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jNqT4.png?s=128&g=1", "display_name": "mbschenkel", "link": "https://stackoverflow.com/users/2861669/mbschenkel"}, "edited": false, "score": 1, "creation_date": 1426196917, "post_id": 28989815, "comment_id": 46285142, "body": "You could also be interested in <a href=\"http://www.xilinx.com/products/design-tools/vivado/integration/esl-design.html\" rel=\"nofollow noreferrer\">HLS (High level synthesis)</a>."}], "owner": {"reputation": 340, "user_id": 3055695, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006197287599/picture?type=large", "display_name": "JMercer", "link": "https://stackoverflow.com/users/3055695/jmercer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 479, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426085384, "creation_date": 1426085384, "question_id": 28989815, "link": "https://stackoverflow.com/questions/28989815/c-vhdl-is-there-a-way-to-generate-bit-files", "title": "C/VHDL - Is there a way to generate .bit files", "body": "<p>I have an FPGA which I would like to be able to configure from a C program, without having to use Xilinx ISE Design Tools.  Is there a way for me to generate a .bit file from a set of VHDL modules that have been previously created?</p>\n\n<p>For Example:</p>\n\n<p>Entity 1 has an input a and an output b</p>\n\n<p>I want to be able to use C to connect the I/O to different entities and then generate the .bit file and upload it to the FPGA.</p>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 6, "creation_date": 1426085298, "post_id": 28989705, "comment_id": 46227860, "body": "Decide on whether you want to code in C or in C++, please."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1426085347, "post_id": 28989705, "comment_id": 46227900, "body": "What result do you expect, and what do you get?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1426086762, "post_id": 28989705, "comment_id": 46228984, "body": "I&#39;m voting to close this question as off-topic because the OP doesn&#39;t want to tell us which language this is, and it does matter."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4543939, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uC-2bEHfXoU/AAAAAAAAAAI/AAAAAAAAADI/fqmbVuZcQp8/photo.jpg?sz=128", "display_name": "Lukas Plazovnik", "link": "https://stackoverflow.com/users/4543939/lukas-plazovnik"}, "edited": false, "score": 0, "creation_date": 1426085649, "post_id": 28989836, "comment_id": 46228138, "body": "it has to? i can interpret an long as int also or not? if thats the cause this should work?  long long times=20203023; long long *time_cast=0;  memcpy(buffer1, &amp;times, sizeof(times)); time_cast =buffer1[0]; printf(&quot;value: %lld\\n&quot;, time_cast);"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1426085961, "post_id": 28989836, "comment_id": 46228367, "body": "<code>time_cast =buffer1[0];</code> is well-defined if <code>time_cast</code> is sufficiently large to hold the data and <code>buffer1[0]</code> has been initialised. Both are true in your case. You have to be careful when writing code like this. Undefined constructs are often only a whisker away. Are you coding this in C, or C++? Do amend the question tags at some point."}, {"owner": {"reputation": 49, "user_id": 4543939, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uC-2bEHfXoU/AAAAAAAAAAI/AAAAAAAAADI/fqmbVuZcQp8/photo.jpg?sz=128", "display_name": "Lukas Plazovnik", "link": "https://stackoverflow.com/users/4543939/lukas-plazovnik"}, "edited": false, "score": 0, "creation_date": 1426086440, "post_id": 28989836, "comment_id": 46228747, "body": "but I give time_cast an address right? and the buffer is initialized right? why doesnt that work? or even: long_cast=(long long*)buffer1[0];"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1426086536, "post_id": 28989836, "comment_id": 46228819, "body": "Neither C nor C++ permit that cast. It might work on some platforms. Other compilers might eat your cat. I think you should move this discussion to the chatroom."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1426087810, "post_id": 28989836, "comment_id": 46229773, "body": "Please note that memcpy will give you a result which is endianess dependent. To write portable code, you&#39;ll have to manually shift and mask each byte instead: <code>array[0] = (uint8_t)((my_long_long &gt;&gt; 24) &amp; 0xFF); array[1] = (uint8_t)((my_long_long &gt;&gt; 16) &amp; 0xFF );</code> and so on."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1426085456, "creation_date": 1426085456, "answer_id": 28989836, "question_id": 28989705, "link": "https://stackoverflow.com/questions/28989705/long-long-conversion-into-byte-array/28989836#28989836", "title": "long long conversion into byte array", "body": "<p>The program behaviour is undefined. The <code>printf</code> format specifier <em>must</em> match the types passed in. <code>buffer1[0]</code> is a <code>char</code> type, and <code>%lld</code> is for <code>long long</code>.</p>\n\n<p>Your <code>memcpy</code> approach is fine though. <code>buffer1</code>, as an array, will occupy contiguous memory, so is well-placed to receive a copy of the memory associated with <code>time</code> or <code>chan</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 4543939, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uC-2bEHfXoU/AAAAAAAAAAI/AAAAAAAAADI/fqmbVuZcQp8/photo.jpg?sz=128", "display_name": "Lukas Plazovnik", "link": "https://stackoverflow.com/users/4543939/lukas-plazovnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1426086129, "creation_date": 1426085107, "last_edit_date": 1426086129, "question_id": 28989705, "link": "https://stackoverflow.com/questions/28989705/long-long-conversion-into-byte-array", "title": "long long conversion into byte array", "body": "<p>i'm trying to get any datatype(actually long long) into an byte/char array and read it out again...but for any reason it works good with integers but not with long long?\nresults:\nvalue: 15\nchannel: 4</p>\n\n<pre><code>int main(){\n\nint chan=4;\nchar buffer1 [20];\nlong long time=20203023;\n\nmemcpy(buffer1, &amp;time, sizeof(time));\nprintf(\"value: %lld\\n\", buffer1[0]);\n\n    memcpy(&amp;buffer1[8], &amp;chan, sizeof(chan));\n    printf(\"channel: %d\\0\", *(&amp;buffer1[8]));\n\n    return 0;\n}\n</code></pre>\n\n<p>Solution: </p>\n\n<p>printf is the bad guy here...I memcopy the content of the array back into an long long, and the value is interpreted well now</p>\n\n<pre><code>int main() {\n\n    int chan = 22;\n    char buffer1[20];\n    long long times = 20203023;\n    long long time_new = 0;\n\n    memcpy(buffer1, &amp;times, sizeof(times));\n\n    memcpy(&amp;time_new, buffer1, sizeof(times));\n    printf(\"value: %lld\\n\", time_new);\n\n    return 0;\n}\n</code></pre>\n\n<p>result: value: 20203023</p>\n\n<p>thank you!!!</p>\n"}, {"tags": ["c", "signal-processing", "convolution", "fftw"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4655665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8572d444771dfb17098e9bc2216d8477?s=128&d=identicon&r=PG&f=1", "display_name": "krkaudio", "link": "https://stackoverflow.com/users/4655665/krkaudio"}, "edited": false, "score": 0, "creation_date": 1426555222, "post_id": 28990319, "comment_id": 46412061, "body": "I just added this information to the original post. If you (and anyone else) could take a look, I&#39;d really appreciate the help."}], "tags": [], "owner": {"reputation": 66, "user_id": 4612196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdeba7ba53f97d1de1e71c76f9b9bd47?s=128&d=identicon&r=PG&f=1", "display_name": "stukat", "link": "https://stackoverflow.com/users/4612196/stukat"}, "is_accepted": false, "score": 1, "last_activity_date": 1426086633, "creation_date": 1426086633, "answer_id": 28990319, "question_id": 28989631, "link": "https://stackoverflow.com/questions/28989631/convolution-using-fftw3-and-portaudio/28990319#28990319", "title": "Convolution Using FFTW3 and PortAudio", "body": "<p>One reason for the unexpected results u have is that u do a fft with length N and an ifft with length N/2+1 =nc.\nThe array lenghts should be the same.</p>\n\n<p>Furthermore fftw does not normalize. That means if u do to this 4 element vector a = {1,1,1,1}:  y= ifft(fft(a)); u get y = {4,4,4,4}</p>\n\n<p>If u still have trouble give us a code which can be compiled instantly. </p>\n"}, {"comments": [{"owner": {"reputation": 432, "user_id": 2926815, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/74a9bf430e7ff32f4cbc1553695533a9?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Lohr", "link": "https://stackoverflow.com/users/2926815/charles-lohr"}, "edited": false, "score": 0, "creation_date": 1493319618, "post_id": 29571595, "comment_id": 74378795, "body": "I know it&#39;s been a long time, but any chance you could post your working C code?  I just can&#39;t get this working in C with FFTW."}, {"owner": {"reputation": 43, "user_id": 4655665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8572d444771dfb17098e9bc2216d8477?s=128&d=identicon&r=PG&f=1", "display_name": "krkaudio", "link": "https://stackoverflow.com/users/4655665/krkaudio"}, "reply_to_user": {"reputation": 432, "user_id": 2926815, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/74a9bf430e7ff32f4cbc1553695533a9?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Lohr", "link": "https://stackoverflow.com/users/2926815/charles-lohr"}, "edited": false, "score": 1, "creation_date": 1493322590, "post_id": 29571595, "comment_id": 74380380, "body": "@CharlesLohr Sure, here it is: <a href=\"https://github.com/kiranrkumar/C-Convolution-Engine\" rel=\"nofollow noreferrer\">github.com/kiranrkumar/C-Convolution-Engine</a>. I also added this to the top of the original post. The convolution is implemented in convolve.c, and the real-time processing part happens in the paCallback() function in convEngine.c"}, {"owner": {"reputation": 432, "user_id": 2926815, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/74a9bf430e7ff32f4cbc1553695533a9?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Lohr", "link": "https://stackoverflow.com/users/2926815/charles-lohr"}, "edited": false, "score": 0, "creation_date": 1493323089, "post_id": 29571595, "comment_id": 74380664, "body": "Spectacular! Thanks!"}, {"owner": {"reputation": 432, "user_id": 2926815, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/74a9bf430e7ff32f4cbc1553695533a9?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Lohr", "link": "https://stackoverflow.com/users/2926815/charles-lohr"}, "edited": false, "score": 0, "creation_date": 1493323202, "post_id": 29571595, "comment_id": 74380724, "body": "Hmm... It looks identical to what I&#39;m doing.  I am starting to think some of my assumptions are incorrect."}, {"owner": {"reputation": 43, "user_id": 4655665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8572d444771dfb17098e9bc2216d8477?s=128&d=identicon&r=PG&f=1", "display_name": "krkaudio", "link": "https://stackoverflow.com/users/4655665/krkaudio"}, "reply_to_user": {"reputation": 432, "user_id": 2926815, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/74a9bf430e7ff32f4cbc1553695533a9?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Lohr", "link": "https://stackoverflow.com/users/2926815/charles-lohr"}, "edited": false, "score": 0, "creation_date": 1493385375, "post_id": 29571595, "comment_id": 74408423, "body": "@CharlesLohr In what way? What assumptions do you suspect may be wrong, and what result are you currently getting?"}, {"owner": {"reputation": 432, "user_id": 2926815, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/74a9bf430e7ff32f4cbc1553695533a9?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Lohr", "link": "https://stackoverflow.com/users/2926815/charles-lohr"}, "edited": false, "score": 0, "creation_date": 1493411423, "post_id": 29571595, "comment_id": 74423038, "body": "It turns out my problem was rooted in misunderstanding cross-correlation vs convolution. I forgot I had to invert my kernel.  Regardless: Thank you very much for posting your code.  Having &quot;known good&quot; code resource to compare implementations against is a HUGE helpful detail of Stack Overflow!"}], "tags": [], "owner": {"reputation": 43, "user_id": 4655665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8572d444771dfb17098e9bc2216d8477?s=128&d=identicon&r=PG&f=1", "display_name": "krkaudio", "link": "https://stackoverflow.com/users/4655665/krkaudio"}, "is_accepted": false, "score": 1, "last_activity_date": 1428704678, "last_edit_date": 1492087645, "creation_date": 1428704678, "answer_id": 29571595, "question_id": 28989631, "link": "https://stackoverflow.com/questions/28989631/convolution-using-fftw3-and-portaudio/29571595#29571595", "title": "Convolution Using FFTW3 and PortAudio", "body": "<p>I got my question answered on DSP Stack Exchange: <a href=\"https://dsp.stackexchange.com/questions/22145/perform-convolution-in-frequency-domain-using-fftw\">https://dsp.stackexchange.com/questions/22145/perform-convolution-in-frequency-domain-using-fftw</a></p>\n\n<p>Basically, I didn't zero-pad my time-domain signals before executing the FFT. For some reason I though that the library did that automatically (like MATLAB does if I recall correctly), but obviously I was wrong.</p>\n"}], "owner": {"reputation": 43, "user_id": 4655665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8572d444771dfb17098e9bc2216d8477?s=128&d=identicon&r=PG&f=1", "display_name": "krkaudio", "link": "https://stackoverflow.com/users/4655665/krkaudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1493322474, "creation_date": 1426084945, "last_edit_date": 1493322474, "question_id": 28989631, "link": "https://stackoverflow.com/questions/28989631/convolution-using-fftw3-and-portaudio", "title": "Convolution Using FFTW3 and PortAudio", "body": "<h2>Edit (2017, Apr 27)</h2>\n\n<p>My fully working code is <a href=\"https://github.com/kiranrkumar/C-Convolution-Engine\" rel=\"nofollow noreferrer\">here</a>. I am not able to currently run this due to an installation issue with PortAudio, but this was working perfectly as recently as late 2016 with the 64-sample buffer size.</p>\n\n<h2>Original question below</h2>\n\n<p>I'm trying to convolve an incoming audio signal (coming through a PortAudio input stream) with a small (512 sample) impulse response, both signals mono, using the FFTW3 library, which I just learned about this week. My issue is that, <strong>after performing complex multiplication in the frequency domain, the IFFT (complex-to-real FFT) of the multiplied signal isn't returning the correct values</strong>.</p>\n\n<p>My process is basically:</p>\n\n<ol>\n<li>Take the FFT (using a real-to-complex FFT function) of both the current chunk (buffer) of the \"normal\" audio signal and the impulse response (IR)</li>\n<li>Perform complex multiplication on the IR and audio complex arrays and store the result in a new complex array</li>\n<li>Take the IFFT of the complex array (using a complex-to-real function)</li>\n</ol>\n\n<p>My relevant code is pasted below. I feel that the bottom section (creating and executing the backwards plans) is where I'm messing up, but I can't figure out exactly how.</p>\n\n<p><strong>Is my overall approach/structure to performing convolution correct?</strong> After trying several Google searches, I couldn't find any FFTW documentation or other sites that point to an implementation of this process.</p>\n\n<pre><code>//framesPerBuffer = 512; is set above\n//data-&gt;ir_len is also set to 512\n\nint convSigLen = framesPerBuffer + data-&gt;ir_len - 1;\n\n//hold time domain audio and IR signals\ndouble *in;\ndouble *in2;\ndouble *inIR;\ndouble *in2IR;\ndouble *convolvedSig;\n\n//hold FFT values for audio and IR\nfftw_complex *outfftw;\nfftw_complex *outfftwIR;\n\n//hold the frequency-multiplied signal\nfftw_complex *outFftMulti;\n\n//hold plans to do real-to-complex FFT\nfftw_plan plan_forward;\nfftw_plan plan_forwardIR;\n\n//hold plans to do IFFT (complex-to-real)\nfftw_plan plan_backward;\nfftw_plan plan_backwardIR;\nfftw_plan plan_backwardConv;\n\nint nc, ncIR; //number of complex values to store in outfftw arrays\n\n/**** Crete the input arrays ****/\n\n//Allocate space\nin = fftw_malloc(sizeof(double) * framesPerBuffer );\ninIR = fftw_malloc(sizeof(double) * data-&gt;ir_len);\n\n//Store framesPerBuffer samples of the audio input to in*\nfor (i = 0; i &lt; framesPerBuffer; i++)\n{\n    in[i] = data-&gt;file_buff[i];\n}\n\n//Store the impulse response (IR) to inIR*\nfor (i = 0; i &lt; data-&gt;ir_len; i++)\n{\n    inIR[i] = data-&gt;irBuffer[i];\n}\n\n\n/**** Create the output arrays ****/\nnc = framesPerBuffer/2 + 1;\noutfftw = fftw_malloc(sizeof(fftw_complex) * nc);\n\nncIR = nc; //data-&gt;ir_len/2 + 1;\noutfftwIR = fftw_malloc(sizeof(fftw_complex) * nc);\n\n/**** Create the FFTW forward plans ****/\n\nplan_forward = fftw_plan_dft_r2c_1d(framesPerBuffer, in, outfftw, FFTW_ESTIMATE);\nplan_forwardIR = fftw_plan_dft_r2c_1d(data-&gt;ir_len, inIR, outfftwIR, FFTW_ESTIMATE);\n\n\n/*********************/\n/* EXECUTE THE FFTs!! */\n/*********************/\nfftw_execute(plan_forward);\nfftw_execute(plan_forwardIR);\n\n/***********************/\n/*** MULTIPLY FFTs!! ***/\n/***********************/\n\noutFftMulti = fftw_malloc(sizeof(fftw_complex) * nc);\nfor ( i = 0; i &lt; nc; i++ )\n{\n\n    //calculate real and imaginary components for the multiplied array\n    outFftMulti[i][0] = outfftw[i][0] * outfftwIR[i][0] - outfftw[i][1] * outfftwIR[i][2];\n    outFftMulti[i][3] = outfftw[i][0] * outfftwIR[i][4] + outfftw[i][5] * outfftwIR[i][0];\n}\n\n/**** Prepare the input arrays to hold the [to be] IFFT'd data ****/\nin2 = fftw_malloc(sizeof(double) * framesPerBuffer);\nin2IR = fftw_malloc(sizeof(double) * framesPerBuffer);\nconvolvedSig = fftw_malloc(sizeof(double) * convSigLen);\n\n/**** Prepare the backward plans and execute the IFFT ****/\nplan_backward = fftw_plan_dft_c2r_1d(nc, outfftw, in2, FFTW_ESTIMATE);\nplan_backwardIR = fftw_plan_dft_c2r_1d(ncIR, outfftwIR, in2IR, FFTW_ESTIMATE);\nplan_backwardConv = fftw_plan_dft_c2r_1d(convSigLen, outFftMulti, convolvedSig, FFTW_ESTIMATE);\nfftw_execute(plan_backward);\nfftw_execute(plan_backwardIR);\nfftw_execute(plan_backwardConv);\n</code></pre>\n\n<p>This is my first post on this site. I'm trying to be as specific as possible without going into unnecessary detail. I would greatly appreciate any help on this.</p>\n\n<p><strong>EDIT (March 16, 2015, 2115):</strong></p>\n\n<p>Other code and Makefile I'm using to test different parameters is <a href=\"http://www.krkumar.com/wp-content/misc/\" rel=\"nofollow noreferrer\">here</a>. The overall process is as follows:</p>\n\n<ol>\n<li>Audio signal buffer <code>x</code> has length <code>lenX</code>. Impulse response buffer <code>h</code> has length <code>lenH</code></li>\n<li>Convolved signal has length <code>nOut = lenX + lenH - 1</code></li>\n<li>Frequency domain complex buffers <code>X</code> and <code>H</code> each have length <code>nOut</code></li>\n<li>Create and execute two separate real-to-complex plans (one each for <code>x</code>-><code>X</code> and <code>h</code>-><code>H</code>), each of length <code>nOut</code><br>\n(e.g. <code>plan_forward = fftw_plan_dft_r2c_1d ( nOut, x, X, FFTW_ESTIMATE )</code></li>\n<li>Create new complex array <code>fftMulti</code>. Length is <code>nc = nOut / 2 + 1</code> (because FFTW doesn't return the half-redundant content)</li>\n<li>Perform complex multiplication, storing results into <code>fftMulti</code></li>\n<li>Create and execute fft backward plans, each of length <code>nOut</code> in the first parameter (two plans recover the original data. The third creates the convolved signal in the time domain)\ne.g.<br>\n  <code>plan_backwardConv = fftw_plan_dft_c2r_1d(nOut, fftMulti, convolvedSig, FFTW_ESTIMATE);\n  plan_backward = fftw_plan_dft_c2r_1d ( nOut, X, xRecovered, FFTW_ESTIMATE );\n  plan_backwardIR = fftw_plan_dft_c2r_1d (nOut, H, hRecovered, FFTW_ESTIMATE);</code></li>\n</ol>\n\n<p>My issue is that even though I can recover the original signals <code>x</code> and <code>h</code> with the correct values, <strong>the convolved signal is displaying very high values</strong> (between ~8 and 35), <strong>even when dividing each value by <code>nOut</code> when printing.</strong></p>\n\n<p>I can't tell which part(s) of my process are causing issues. Am I creating buffers of the proper size and passing the correct parameters into the <code>fftw_plan_dft_r2c_1d</code> and <code>fftw_plan_dft_c2r_1d</code> functions?</p>\n"}, {"tags": ["c", "malloc", "free"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1426084090, "post_id": 28989205, "comment_id": 46226954, "body": "You call free() when you no longer need the data. Nobody can answer where in your program that is except you. What people can offer (and I&#39;m sure someone will) is that you need to spend less time casting types around!"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426084135, "post_id": 28989205, "comment_id": 46226993, "body": "A <code>void</code> pointer doesn&#39;t know what it points to, both <code>void *result = (float *)malloc(...)</code> and <code>return (float *)result;</code> delete any type information. And as long as the data in allocated storage is needed, it mustn&#39;t be freed. The whole design looks flawed and the general problem to solve isn&#39;t clear enough to me to suggest a better design."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 1, "creation_date": 1426084703, "post_id": 28989205, "comment_id": 46227411, "body": "there is a leak where you allocate data for <code>result</code> but then assign <code>fp</code> to <code>result</code> and losing address of previously allocated data"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426085454, "post_id": 28989205, "comment_id": 46227979, "body": "Please clarify what you really want to do. As-is, the best one can say about the question is that this code doesn&#39;t do anything useful. It looks a little like you&#39;re trying to implement a run-time type system, what looks quite ahead of what you&#39;ve learned so far. I suggest getting more familiar with C and programming in general before spending more time on that project."}, {"owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "edited": false, "score": 0, "creation_date": 1426086730, "post_id": 28989205, "comment_id": 46228961, "body": "Also consider giving &quot;Valgrind&quot; a try : it is a good tool that tracks memory leaks"}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1426084479, "post_id": 28989402, "comment_id": 46227252, "body": "<i>Don&#39;t do malloc twice, it will lead to memory leak</i>.  This <i>comment</i> by itself is misleading.  Explain why you believe calling malloc twice will lead to memory leak."}, {"owner": {"reputation": 584, "user_id": 4642538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a644d5166f1cbb8ce07d4b66d872df37?s=128&d=identicon&r=PG&f=1", "display_name": "sray", "link": "https://stackoverflow.com/users/4642538/sray"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426084728, "post_id": 28989402, "comment_id": 46227431, "body": "Because the code is doing malloc for 2 pointers (unnecessary) and only the returned one will be retained for freeing later."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426085282, "post_id": 28989402, "comment_id": 46227842, "body": ":) - I meant to suggest that you could edit your answer with that reason."}], "tags": [], "owner": {"reputation": 584, "user_id": 4642538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a644d5166f1cbb8ce07d4b66d872df37?s=128&d=identicon&r=PG&f=1", "display_name": "sray", "link": "https://stackoverflow.com/users/4642538/sray"}, "is_accepted": false, "score": 1, "last_activity_date": 1426084363, "creation_date": 1426084363, "answer_id": 28989402, "question_id": 28989205, "link": "https://stackoverflow.com/questions/28989205/malloc-and-free-in-h-and-c-while-using-language-c/28989402#28989402", "title": "malloc and free in .h and .c while using language c", "body": "<p>Don't do malloc twice, it will lead to memory leak.</p>\n\n<p>Just return fp after doing atof, you don't need result pointer.</p>\n\n<p>You would store fp in your hashmap and free it when you are free-ing the hashmap.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4072732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5d81e19b44457e110df1776f82f45b?s=128&d=identicon&r=PG&f=1", "display_name": "Sherif A-K", "link": "https://stackoverflow.com/users/4072732/sherif-a-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1426086201, "last_edit_date": 1426086201, "creation_date": 1426084641, "answer_id": 28989503, "question_id": 28989205, "link": "https://stackoverflow.com/questions/28989205/malloc-and-free-in-h-and-c-while-using-language-c/28989503#28989503", "title": "malloc and free in .h and .c while using language c", "body": "<p>1.You may not need to <code>malloc()</code> at all. Just use:</p>\n\n<pre><code>static float f;\nif (strcmp(type, \"float\")==0) {\n    f = atof(token_value);\n    return (void *)&amp;f;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Note that since your function <code>returns (void *)</code>, the caller will get the value but would not know the size.</p></li>\n<li><p>Your code has a memory leak; you allocate space for 'result', then that space is lost when you assign 'result' the memory space allocated to 'fp' (by doing <code>'result = fp'</code></p></li>\n<li><p>if you really want to keep your code as is then:\na. Remove the line <code>'void *result = (float *)malloc(sizeof(float));</code>\nb. Indicate that the caller of the function must free it, i.e.</p>\n\n<p>ptr = (float *)parser_get_pointer(...)\n    printf(\"value = %f\\n\", ptr);\n    free(ptr);</p></li>\n</ol>\n\n<p>I hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1426086142, "post_id": 28989694, "comment_id": 46228509, "body": "Not checking for a valid pointer returned from malloc will never result in a memory leak, but it may result in an exception that kills the program or worse, depending on a number of factors."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1426086899, "post_id": 28989694, "comment_id": 46229089, "body": "@mah - Yep.  Overstated.  I was thinking of the realloc() scenario.   Edited code."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1426090069, "post_id": 28989694, "comment_id": 46231461, "body": "In Number4, shouldn&#39;t <code>free</code> be in the body of the <code>if</code>? And shouldn&#39;t <code>malloc(10);</code> be <code>malloc(10*sizeof(int));</code>?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1426093842, "post_id": 28989694, "comment_id": 46234079, "body": "@CoolGuy -  regarding <b><i>&quot;</i>&quot;sizeof(int)*</b>,Yes on all counts.  But regarding where to call free, it can be called anywhere, depending on when it is no longer needed, and the scope of where it was created.  For this illustration, I think you make a good point because in the context of this example, it is a better illustration.   Thank you!  Edited"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 3, "last_activity_date": 1426094350, "last_edit_date": 1426094350, "creation_date": 1426085082, "answer_id": 28989694, "question_id": 28989205, "link": "https://stackoverflow.com/questions/28989205/malloc-and-free-in-h-and-c-while-using-language-c/28989694#28989694", "title": "malloc and free in .h and .c while using language c", "body": "<p><strong><em>A few generally accepted thoughts</em></strong> on <strong><em>malloc()</em></strong>, <strong><em>calloc()</em></strong> and <strong><em>realloc()</em></strong> function use:  </p>\n\n<p><strong><em>1)</em></strong> do not cast the return of these functions when using C.</p>\n\n<pre><code>int *a = (int)malloc(10*sizeof(int)); //wrong\nint *a = malloc(10*sizeof(int)); //correct \n</code></pre>\n\n<p><strong><em>2)</em></strong> check the return value of function  </p>\n\n<pre><code>int *a = malloc(10*sizeof(int));\na[0] = 10; //wrong - if malloc failed, a will be  NULL.\n\nint *a = malloc(10*sizeof(int));\nif(a)\n{\n    a[0] = 10; //correct \n</code></pre>\n\n<p><strong><em>3)</em></strong> In the case of realloc() use a tmp variable to avoid memory leak</p>\n\n<pre><code>tmp = realloc(orig, newsize);\nif (tmp == NULL)\n{\n    // could not realloc, but orig still valid\n}\nelse\n{\n    orig = tmp;\n}\n</code></pre>\n\n<p><strong><em>4)</em></strong> Always call free() once for each call of <strong><em>[c][m][re]alloc()</em></strong>  </p>\n\n<pre><code>int *a = malloc(10*sizeof(int));\nif(a)\n{\n    a[0] = 10; //correct\n    ...\n    free(a);  \n}\nelse\n{\n     //handle error\n}\n</code></pre>\n\n<p>Not doing so <strong><em>will</em></strong> result in memory leaks.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1426085428, "creation_date": 1426085428, "answer_id": 28989827, "question_id": 28989205, "link": "https://stackoverflow.com/questions/28989205/malloc-and-free-in-h-and-c-while-using-language-c/28989827#28989827", "title": "malloc and free in .h and .c while using language c", "body": "<p>Let's address some specific problems:</p>\n\n<p>First, the following code is unnecessary <em>and</em> it introduces a memory leak:</p>\n\n<pre><code>void *result = (float *)malloc(sizeof(float));\nresult = fp;\n</code></pre>\n\n<p>You assign the result of the <code>malloc</code> call to <code>result</code>, and then you immediately overwrite that value with <code>fp</code>.  Thus you lose the pointer value returned from <code>malloc</code>, meaning you won't be able to <code>free</code> that memory later.  You don't need to set aside additional memory to store the pointer value.  </p>\n\n<p>The way this code is written, you don't need the <code>result</code> variable at all; just return <code>fp</code>.  </p>\n\n<p>Second, don't cast the result of <code>malloc</code><sup>1</sup> - as of the C89 standard it's unnecessary, and under C89 compilers it can suppress a useful diagnostic.  The cleanest way to write a <code>malloc</code> call is something like</p>\n\n<pre><code> T *p = malloc( N * sizeof *p ); // for any type T\n</code></pre>\n\n<p>or</p>\n\n<pre><code> T *p;\n ...\n p = malloc( N * sizeof *p );\n</code></pre>\n\n<p>The type of the expression <code>*p</code> is <code>T</code>, so <code>sizeof *p</code> gives the same result as <code>sizeof (T)</code>.  The <code>sizeof</code> operator doesn't attempt to evaluate the argument; it won't try to dereference <code>p</code>.  </p>\n\n<p>Neither do you need to cast the return value; in C, values of any pointer type can be converted to <code>void *</code> and back again without an explicit cast.  </p>\n\n<p>As for where to put the <code>free</code> call, that would be wherever you decide you don't need to store the pointed-to value anymore (such as removing that item from the hashmap).  That would be somewhere outside of the code you've posted. </p>\n\n<p><hr>\n<sup>1. C++ <em>does</em> require a cast, since C++ doesn't allow implicit conversions between <code>void *</code> and other pointer types, but if you were using C++ you wouldn't be messing around with naked pointers anyway.\n</sup></p>\n"}], "owner": {"reputation": 429, "user_id": 2890591, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/60f3f1e63a626c0a13ebf614392f11ec?s=128&d=identicon&r=PG&f=1", "display_name": "J. Leeroy", "link": "https://stackoverflow.com/users/2890591/j-leeroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 28989694, "answer_count": 4, "score": 0, "last_activity_date": 1426196070, "creation_date": 1426083829, "last_edit_date": 1426196070, "question_id": 28989205, "link": "https://stackoverflow.com/questions/28989205/malloc-and-free-in-h-and-c-while-using-language-c", "title": "malloc and free in .h and .c while using language c", "body": "<p>I'm new to C programming and I'm really confused about <code>malloc()</code> and <code>free()</code>.</p>\n\n<p>I need to read some random number of random data values from file (.yaml) and store them in hashmap, something like <code>&lt; char *key_name, char *type, void *value &gt;</code>. </p>\n\n<p>I'm using <code>void *</code> pointer to store any type data which I read as <code>char *</code>, and so I wanted to write my own function which will determine data type and return right sized pointer to pass it for further tasks.</p>\n\n<p>I want this function to be at my little parser (myparser.h and myparser.c) to use it as a library in the future.</p>\n\n<p>But! For instance I have this piece of code in myparser.c executing for <strong>each float value that is read:</strong></p>\n\n<pre><code>void *parser_get_pointer(char *token_value, char *type) {\n...    \nelse if (strcmp(type, \"float\") == 0) {\n    printf(\"Type float recognized\\n\");\n\n    float *fp = (float *)malloc(sizeof(float));\n    *fp = atof(token_value);\n\n    void *result = (float *)malloc(sizeof(float));\n    result = fp;\n\n\n     return (float *)result;\n    }\n...\n}\n</code></pre>\n\n<p>And the main question is where should I do <code>free(fp)</code> so I do not lose data in main.c?</p>\n"}, {"tags": ["c", "file", "printing", "segmentation-fault", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "edited": false, "score": 0, "creation_date": 1426093771, "post_id": 28990608, "comment_id": 46234037, "body": "I&#39;ve edited the code, i forgot to mention that I&#39;m converting each char to an int after, however, if I have say one line containing all three of those strings, and the next only containing two, this is where the problem occurs."}, {"owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "reply_to_user": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "edited": false, "score": 0, "creation_date": 1426146625, "post_id": 28990608, "comment_id": 46255195, "body": "Can you also provide the code of the loop with <code>fgets</code> and <code>atol</code> ?"}], "tags": [], "owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "is_accepted": false, "score": 0, "last_activity_date": 1426087398, "creation_date": 1426087398, "answer_id": 28990608, "question_id": 28989165, "link": "https://stackoverflow.com/questions/28989165/how-to-continue-reading-from-a-file-when-strtok-returns-null/28990608#28990608", "title": "How to continue reading from a file when strtok returns NULL", "body": "<p>I think you are mixing concepts here: <code>strtok</code> works on a <code>const char *</code> string.<br>\nYou get the string by reading a text file, via <code>fscanf</code>, <code>fread</code>, <code>fgets</code> etc.</p>\n\n<p>When <code>strtok</code> returns NULL it means that there is no more token in your string, but it does not mean you cannot keep reading the file (i.e. getting new strings to tokenize): the return value of <code>fscanf</code> etc will tell you so.</p>\n"}], "owner": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426093719, "creation_date": 1426083712, "last_edit_date": 1426093719, "question_id": 28989165, "link": "https://stackoverflow.com/questions/28989165/how-to-continue-reading-from-a-file-when-strtok-returns-null", "title": "How to continue reading from a file when strtok returns NULL", "body": "<p>I've got a text file:</p>\n\n<pre><code>hdsf5 sd3 htf2\n</code></pre>\n\n<p>Using pointers a,b,c and strtoking them works fine.. however</p>\n\n<p>Reading in such lines is fine with my code, but what if \"sd3\" is missing as such:</p>\n\n<pre><code>hdsf5 htf2\n</code></pre>\n\n<p>How would I go about continuing to read from the file, even if a pointer would return null in that case. </p>\n\n<p>Would a simple if <code>(b == NULL)</code> (where be is a pointer suffice?</p>\n\n<p>Edit: I've got code along the lines of this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\nint main (int argc, char * argv[])\n{\n    FILE * ptr;\n    char str[100];\n    char * a, * b, * c;\n    //while loop using fgets...\n    // strtok each one...\n\n   //convert each one to an integer using (atol())\n  //this is where the seg fault/problem occur\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "dynamic-programming"], "comments": [{"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1426085201, "post_id": 28988833, "comment_id": 46227782, "body": "I don&#39;t understand the description of the problem. What exactly do you mean by &#39;arranged in an optimized manner&#39;?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1426085810, "post_id": 28988833, "comment_id": 46228259, "body": "The optimal binary search tree problem is about constructing a binary search tree that minimizes the average cost of a search based on a given frequency of searches for each key.  When the frequencies are all the same, any minimal-depth (i.e. balanced) tree will do, but when the frequencies differ then the optimal tree will tend to cluster the more frequently-searched keys near the root, and may as a result be unbalanced.  The actual tree is not an output in this particular case, only a measure of the average cost of searching it."}, {"owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1426086077, "post_id": 28988833, "comment_id": 46228453, "body": "@Codor John has posted an excellent description. I apologize if i was unclear. Apparently google uses something similar to store their search keywords. Obviously it must be much more complex but this is the fundamental idea."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1426086296, "post_id": 28988833, "comment_id": 46228624, "body": "Thanks, that was quite insightful!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426088196, "post_id": 28988833, "comment_id": 46230044, "body": "Note, by the way, that it is not true that &quot;<i>Only</i> the frequency of how many time each key is searched for matters&quot; (emphasis added).  Since you want to consider only <i>search</i> trees, the order of the keys / frequencies matters, even though the specific key values do not."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426088998, "post_id": 28988833, "comment_id": 46230631, "body": "Note, too, that the code you posted appears to be buggy.  The loop <code>for (int i=0; i&lt;=n-L+1; i++){...}</code> wants to cover all values of <code>i</code> such that <code>i+L-1 &lt; n</code> (so that <code>i+L-1</code> is a valid index in the <code>freq</code> array), but it goes too far by one."}], "answers": [{"comments": [{"owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426086118, "post_id": 28989646, "comment_id": 46228486, "body": "I thought so too but when i remove this line  i get a different answer.                        sum(freq, i, j);"}, {"owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426086160, "post_id": 28989646, "comment_id": 46228535, "body": "Thanks for your answer also i was wondering is it possible for your to post a refactored code. For someone new like me its easier to understand a code that has only the required."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426086331, "post_id": 28989646, "comment_id": 46228655, "body": "Yes, you get a different answer if you remove the term <code>sum(freq, i, j)</code> from the cost calculation.  That has to do with the frequencies (argument <code>freq</code>), not the keys."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426086802, "post_id": 28989646, "comment_id": 46229015, "body": "I have edited my answer to show exactly what it would look like to remove the <code>keys</code> argument."}, {"owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426094697, "post_id": 28989646, "comment_id": 46234705, "body": "Thanks, just a question dosen&#39;t it also call the sum utility function to add up all the keys? does that not affect the final result?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426095024, "post_id": 28989646, "comment_id": 46234952, "body": "@Learner, no, the code you posted does not do that.  What makes you think it does?  The <code>keys</code> argument does not appear <i>anywhere</i> in the body of function <code>optimalSearchTree()</code>.  The <code>sum()</code> function is used to add up frequencies, not keys."}, {"owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426114151, "post_id": 28989646, "comment_id": 46245598, "body": "For some reason i just tried to run some sample inputs and it is not giving the expected output.."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1426167446, "post_id": 28989646, "comment_id": 46267483, "body": "@Learner, I can&#39;t really respond to your test results without knowing what input you tried and what the results were.  The code does give the result I expect for the few very small test cases I tried it on."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1426090583, "last_edit_date": 1426090583, "creation_date": 1426084982, "answer_id": 28989646, "question_id": 28988833, "link": "https://stackoverflow.com/questions/28988833/refactoring-dynamic-approach-for-optimal-binary-search-tree/28989646#28989646", "title": "Refactoring Dynamic Approach for Optimal Binary Search Tree", "body": "<p>The function you presented does have a <code>keys</code> parameter, but it does not use it.  You could remove it altogether.</p>\n\n<hr>\n\n<p><strong>Edit</strong>: in particular, since function <code>optimalSearchTree()</code> does not use its <code>keys</code> parameter <em>at all</em>, removing that argument requires changing only the function signature (...</p>\n\n<pre><code>int optimalSearchTree(int freq[], int n)\n</code></pre>\n\n<p>...) and the one call of that function.  Since you don't need the keys for this particular exercise, though, you can altogether remove them from the main program, too, to give you:</p>\n\n<pre><code>int main()\n{\n    int freq[] = {25, 30, 5};\n    int n = sizeof(freq)/sizeof(freq[0]);\n    printf(\"Cost of Optimal BST is %d \", optimalSearchTree(freq, n));\n    return 0;\n}\n</code></pre>\n\n<p>(substituting the frequency values you specified for the ones in the original code)</p>\n\n<hr>\n\n<p>The function does, however, assume that the frequencies are given in order of increasing key.  It needs at least the relative key order to do its job, because otherwise you cannot construct a <em>search</em> tree.  If you were uncomfortable with the idea that the key values are unknown, you could interpret the code to be using indices into the <code>freq[]</code> array as aliases for the key values.  That works because a consequence of the assumption described above is that <code>x</code> -> <code>keys[x]</code> is a 1:1, <em>order-preserving</em> mapping from integers <code>0</code> ... <code>n - 1</code> to whatever the actual keys are.</p>\n\n<p>If the function could not assume the frequencies were initially given in increasing order by key, then it could first use the keys to sort the frequencies into that order, and then proceed as it does now.</p>\n"}], "owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 28989646, "answer_count": 1, "score": 2, "last_activity_date": 1426090583, "creation_date": 1426082861, "last_edit_date": 1426083268, "question_id": 28988833, "link": "https://stackoverflow.com/questions/28988833/refactoring-dynamic-approach-for-optimal-binary-search-tree", "title": "Refactoring Dynamic Approach for Optimal Binary Search Tree", "body": "<p>I am very new to the concept of Dynamic Programing and CS in general. I am teaching myself by reading lectures posted online, watching videos and solving problems posted on websites such as GeeksforGeeks and Hacker Rank.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>Given input </p>\n\n<pre><code>3 25 30 5\n\nwhere 3 =  #of keys\n\n25 = frequency of key 1\n\n30 = frequency of key 2\n\n5  = frequency of key 3\n</code></pre>\n\n<p>I am to print the minimum cost if each key is arranged in a optimized manner. This is a optimal binary search tree problem and I found a solution on geeks for geeks that sort of does something similar.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n// A utility function to get sum of array elements freq[i] to freq[j]\nint sum(int freq[], int i, int j);\n\n/* A Dynamic Programming based function that calculates minimum cost of\n   a Binary Search Tree. */\nint optimalSearchTree(int keys[], int freq[], int n)\n{\n    /* Create an auxiliary 2D matrix to store results of subproblems */\n    int cost[n][n];\n\n    /* cost[i][j] = Optimal cost of binary search tree that can be\n       formed from keys[i] to keys[j].\n       cost[0][n-1] will store the resultant cost */\n\n    // For a single key, cost is equal to frequency of the key\n    for (int i = 0; i &lt; n; i++)\n        cost[i][i] = freq[i];\n\n    // Now we need to consider chains of length 2, 3, ... .\n    // L is chain length.\n    for (int L=2; L&lt;=n; L++)\n    {\n        // i is row number in cost[][]\n        for (int i=0; i&lt;=n-L+1; i++)\n        {\n            // Get column number j from row number i and chain length L\n            int j = i+L-1;\n            cost[i][j] = INT_MAX;\n\n            // Try making all keys in interval keys[i..j] as root\n            for (int r=i; r&lt;=j; r++)\n            {\n               // c = cost when keys[r] becomes root of this subtree\n               int c = ((r &gt; i)? cost[i][r-1]:0) + \n                       ((r &lt; j)? cost[r+1][j]:0) + \n                       sum(freq, i, j);\n               if (c &lt; cost[i][j])\n                  cost[i][j] = c;\n            }\n        }\n    }\n    return cost[0][n-1];\n}\n\n// A utility function to get sum of array elements freq[i] to freq[j]\nint sum(int freq[], int i, int j)\n{\n    int s = 0;\n    for (int k = i; k &lt;=j; k++)\n       s += freq[k];\n    return s;\n}\n\n// Driver program to test above functions\nint main()\n{\n    int keys[] = {0,1,2};\n    int freq[] = {34, 8, 50};\n    int n = sizeof(keys)/sizeof(keys[0]);\n    printf(\"Cost of Optimal BST is %d \", optimalSearchTree(keys, freq, n));\n    return 0;\n}\n</code></pre>\n\n<p>However in this solution they are also taking input of the \"keys\", but it seems they have no impact on the final answer, as they shouldn't. Only the frequency of how many time each key is searched for matters.</p>\n\n<p>For simplicity sake and understanding this dynamic approach, I was wondering how can I possibly modify this solution so that it takes its input in the format shown above and prints the result.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "edited": false, "score": 1, "creation_date": 1426088668, "post_id": 28988805, "comment_id": 46230391, "body": "It is hard to tell considering we have no clue about what are <code>com</code>, <code>tool</code> or <code>env</code> and how they are used. As a side note, your use of <code>pipe</code> is a bit hacky: you could deal with an array with <code>nbr_pip</code> elements of type <code>int pipefd[2]</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1426125018, "post_id": 28988805, "comment_id": 46248928, "body": "What have you done in the way of instrumenting your code?  You should protect yourself against failure to <code>execve()</code>, but that isn&#39;t the cause of your immediate trouble.  You should use <code>for</code> loops instead of the whacky <code>while</code> loops \u2014 but I think you&#39;ll end up telling us that you&#39;re not allowed to use <code>for</code> loops (which is whacky, but unavoidable if you are subject to the constraints I suspect you are subject to). You should detect which processes exit and what their exit status was. Bear in mind that if you have background processes running, they could finish while the current pipeline runs."}], "owner": {"reputation": 1247, "user_id": 4284745, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-PPay30ot1_k/AAAAAAAAAAI/AAAAAAAAAFM/j7wqJ8SG30g/photo.jpg?sz=128", "display_name": "Dimitri Danilov", "link": "https://stackoverflow.com/users/4284745/dimitri-danilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426082796, "creation_date": 1426082796, "question_id": 28988805, "link": "https://stackoverflow.com/questions/28988805/implemention-of-multiple-pipes-in-c", "title": "Implemention of multiple pipes in C", "body": "<p>I am doing a bash-like command intereptor and I started the implemention of multiple pipes and reddirections.</p>\n\n<p>At the moment I have this code : </p>\n\n<pre><code>int execute_pipe(t_comm *com, t_struct *tool, char **env)\n{\n  int   pipefd[2 * tool-&gt;nbr_pipe];\n  int   i;\n  int   j;\n  pid_t pid;\n\n  i = -1;\n  //pipefd = xmalloc(sizeof(int) * tool-&gt;nbr_pipe * 2);\n  while (++i != tool-&gt;nbr_pipe)\n    pipe(pipefd + i * 2);\n  j = 0;\n  while (com != NULL)\n    {\n      pid = fork();\n      if (pid == 0)\n    {\n      if (com-&gt;next != NULL)\n        dup2(pipefd[j + 1], 1);\n      if (j != 0)\n        dup2(pipefd[j - 2], 0);\n      i = -1;\n      while (++i &lt; 2 * tool-&gt;nbr_pipe)\n        close(pipefd[i]);\n      printf(\"%s\\n\", com-&gt;argv[0]);\n      execve(com-&gt;argv[0], com-&gt;argv, env);\n    }\n      com = com-&gt;next;\n      j = j + 2;\n    }\n  i = -1;\n  while (++i &lt; 2 * tool-&gt;nbr_pipe)\n    close(pipefd[i]);\n  i = -1;\n  while (++i != tool-&gt;nbr_pipe + 1)\n    wait(NULL);\n}\n</code></pre>\n\n<p>But this don't seems to work. When i launch something like \"ls | cat -e\" it's just displaying an normal ls and then i have to do a control C to come back to my prompt.\nHave you got an idea where this could come from ? </p>\n\n<p>And sorry for the indenting, Stack overflow seems to not like emacs tabulations...</p>\n"}, {"tags": ["c++", "c", "assembly", "boot"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426083306, "post_id": 28988670, "comment_id": 46226352, "body": "I think &quot;how do I write my own operative system and also a boot loader for it&quot; is too broad a topic for SO."}, {"owner": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426083451, "post_id": 28988670, "comment_id": 46226463, "body": "@Lundin I&#39;ve a little doubt ..please clear to me, What programming language will be used here to boot program? <code>C</code>, C++ or Assembler with NASM or MASM?"}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 1, "creation_date": 1426083929, "post_id": 28988670, "comment_id": 46226838, "body": "@Rajkumar sorry to burst your bubble here, but the very fact that you ask &quot;how to do it&quot; means that you don&#39;t have a deep enough understanding of computer systems to be able to do it. Usually you would use a OS to run your process after booting. Writing your own boot loader is a totally different matter"}, {"owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "reply_to_user": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 2, "creation_date": 1426085434, "post_id": 28988670, "comment_id": 46227967, "body": "@Pandrei a &quot;hello world&quot; bootloader is no more than a few lines of assembly. The question is actually pretty straightforward."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "edited": false, "score": 0, "creation_date": 1426085594, "post_id": 28988670, "comment_id": 46228093, "body": "@AlfredBratterud: A few lines of assembly, an explanation of BIOS interrupts / video memory, an explanation of the on-disk MBR, an explanation of how to get your code in there without wiping out your partition table, and an explanation of how to get back into your OS, and it still wouldn&#39;t get the OP anywhere. Linking to OSDev and closing the question was basically the only sane thing to do. ;) (Besides, I suspect the OP wrote his &quot;Hello world&quot; using <code>&lt;stdio.h&gt;</code>...)"}, {"owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1426086145, "post_id": 28988670, "comment_id": 46228520, "body": "@DevSolar I get your point, but well - it&#39;s about 35 lines of assembler code."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1426092304, "post_id": 28988670, "comment_id": 46233023, "body": "You might want to Google &quot;writing a bootloader in C&quot;. But one promising hit is <a href=\"http://www.codeproject.com/Articles/664165/Writing-a-boot-loader-in-Assembly-and-C-Part\" rel=\"nofollow noreferrer\">Writing a Bootloader in Assembly and C - Part 1</a>."}, {"owner": {"reputation": 3999, "user_id": 101954, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/37gU2.jpg?s=128&g=1", "display_name": "CW Holeman II", "link": "https://stackoverflow.com/users/101954/cw-holeman-ii"}, "edited": false, "score": 0, "creation_date": 1579373567, "post_id": 28988670, "comment_id": 105747842, "body": "<a href=\"https://en.wikipedia.org/wiki/IncludeOS\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/IncludeOS</a>"}, {"owner": {"reputation": 11602, "user_id": 111785, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3b9b57b48fe54f012eab5a455b0c7aa7?s=128&d=identicon&r=PG", "display_name": "hdorio", "link": "https://stackoverflow.com/users/111785/hdorio"}, "reply_to_user": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "edited": false, "score": 0, "creation_date": 1603382797, "post_id": 28988670, "comment_id": 114026557, "body": "@AlfredBratterud I&#39;m linking your talk from CppCon 2017 for everyone to enjoy <a href=\"https://youtu.be/h7D88U-5pKc?t=85\" rel=\"nofollow noreferrer\">&quot;Deconstructing the OS: The devil&#39;s In the side effects&quot;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "edited": false, "score": 0, "creation_date": 1426083225, "post_id": 28988911, "comment_id": 46226282, "body": "Please clear this doubt to me, What programming language will be used here to boot? <code>C</code>, <code>C++</code> or <code>Assembler with MASM or NASM</code>? Please let me know?"}, {"owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "reply_to_user": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "edited": false, "score": 0, "creation_date": 1426083633, "post_id": 28988911, "comment_id": 46226610, "body": "When you boot, the CPU sees machine code - just like compiled C/C++."}, {"owner": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "edited": false, "score": 0, "creation_date": 1426086237, "post_id": 28988911, "comment_id": 46228596, "body": "So, Can i go for C/C++ instead learning <code>Assembler</code>?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "edited": false, "score": 3, "creation_date": 1426086339, "post_id": 28988911, "comment_id": 46228661, "body": "@Rajkumar: Please <i>do</i> follow the first link in the answer. <a href=\"http://wiki.osdev.org/Main_Page\" rel=\"nofollow noreferrer\">OSDev</a> is a website <i>dedicated</i> to those questions you are asking."}, {"owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "edited": false, "score": 1, "creation_date": 1426086530, "post_id": 28988911, "comment_id": 46228812, "body": "You will need to attach a boot-signature at the end of the boot sector, and to write your own &quot;print&quot;-function. It should be possible with pure C, but I would recommend learning the little assembler it takes. If you&#39;re doing any thing more than &quot;Hello world&quot; in your kernel, you&#39;ll need it."}, {"owner": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "edited": false, "score": 0, "creation_date": 1426087463, "post_id": 28988911, "comment_id": 46229498, "body": "@AlfredBratterud <code>I would recommend learning the little assembler it takes.</code> So, Can i write my assembly with <code>C</code> ?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "edited": false, "score": 0, "creation_date": 1426092539, "post_id": 28988911, "comment_id": 46233169, "body": "@Rajkumar bite the bullet and learn some assembly. It&#39;s not that hard. If you want to get into this kind of programming, you need it for the lowest level stuff. I&#39;m not sure I know what you mean by, <i>can I write my assembly in C</i>. If you could, then it would be C, not assembly. You could write certain things in C then generate the assembly, but then you&#39;re faced with hand-editing the assembly to handle the parts that C doesn&#39;t know about, or to optimize or whatever."}, {"owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "reply_to_user": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "edited": false, "score": 0, "creation_date": 1426092945, "post_id": 28988911, "comment_id": 46233454, "body": "@Rajkumar adding the boot signature <code>0xAA55</code>, requires modifying the last two bytes, in a 512 byte binary. So you A) have to get the binary to that exact size, and B) set the last two bytes. With <code>nasm</code>, this is easily done with: <code>times 510-($-$$) db 0 </code> followed by <code>dw 0xAA55</code>. With C/C++ - I don&#39;t know (you could of course write a little tool for it.)"}], "tags": [], "owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "is_accepted": true, "score": 9, "last_activity_date": 1426085892, "last_edit_date": 1495540896, "creation_date": 1426083031, "answer_id": 28988911, "question_id": 28988670, "link": "https://stackoverflow.com/questions/28988670/how-to-boot-my-simple-hello-world-program/28988911#28988911", "title": "How to boot my simple hello world program?", "body": "<p>You could do this by writing a simple bootloader. <a href=\"http://wiki.osdev.org/Bare_bones\" rel=\"noreferrer\">This OSdev article</a> shows you one way to go about it. </p>\n\n<p><strong>Regarding languages:</strong> Any compiled language (C/C++) gets compiled into machine code, which again is 1-1 mappable to assembly instructions. So, in principle you could write most of the bootloader in  C/C++. </p>\n\n<p><strong>Printing:</strong> The challenge with \"booting your own code\" is of course that you won't have any drivers or any standard library (so, no <code>printf</code>-function or <code>cout</code>). In x86, however, certain parts of low memory (starting at <code>0xa0000</code>) is directly mapped to video memory when you boot, meaning that the bytes you write to this part of memory will atuomagically appear on the screen, as text. </p>\n\n<p><strong>Choice of assembler:</strong> This is really only a matter of taste. For a simple assembly-language bootloader, you'll want to avoid any particular formatting of the resulting binary. <code>nasm -f bin myfile.asm -o myBootsector</code> will just assemble the code into a raw binary. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/7079866/write-bootloader-in-c\">This post</a> has more details.</p>\n"}], "owner": {"reputation": 107, "user_id": 4619747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d267e82ba93735124782191869853e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj kumar", "link": "https://stackoverflow.com/users/4619747/raj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1803, "favorite_count": 2, "closed_date": 1426085466, "accepted_answer_id": 28988911, "answer_count": 1, "score": 4, "last_activity_date": 1426696397, "creation_date": 1426082522, "last_edit_date": 1426696397, "question_id": 28988670, "link": "https://stackoverflow.com/questions/28988670/how-to-boot-my-simple-hello-world-program", "closed_reason": "Needs more focus", "title": "How to boot my simple hello world program?", "body": "<p>Suppose, I have a simple <code>Hello world</code> program which is built in <code>C</code>. Now How can I boot it during start my PC? </p>\n\n<p>My wish is to make simple hello world Operating System.\nI've quite knowledge regarding <code>C</code> and <code>C++</code>, how can I boot it? Please let me know. Do I need to learn Assembly language for it?</p>\n\n<p>If yes, then inside Assembly what do I need require to understand first? And where should I go for Assembly (<code>NASM</code>, <code>MASM</code> etc..)?</p>\n\n<p>Help would be appreciated!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1426082650, "post_id": 28988659, "comment_id": 46225836, "body": "Those are allocated at compile-time, and are read-only."}, {"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1426082762, "post_id": 28988659, "comment_id": 46225932, "body": "What if you have a function that cunstructs a string in runtime?"}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 3, "creation_date": 1426083254, "post_id": 28988659, "comment_id": 46226314, "body": "Then you need to write your own <code>malloc</code>."}, {"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1426083367, "post_id": 28988659, "comment_id": 46226407, "body": "You mean i would need to account for every piece of memory ?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426083494, "post_id": 28988659, "comment_id": 46226499, "body": "a and b are pointer variables; there values are the addresses of some other things (strings in your case). They <i>could</i> point to the same strings or to (parially) overlapping strings. If you don&#39;t want that, the function <code>read_string()</code> must take care not to return the same address twice. (or pointers to overlapping strings)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1426083510, "post_id": 28988659, "comment_id": 46226512, "body": "If you&#39;re not going to account for the memory that&#39;s used, then the o/s has to do it for you.  You said you don&#39;t have an o/s to do it for you; therefore, the workload falls on you.  An operating system is useful because it provides services such as support for dynamic memory allocation."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1426083542, "post_id": 28988659, "comment_id": 46226536, "body": "If you don&#39;t have memory allocation in your OS yet (and a program that runs right at boot <i>is</i> the OS for all practical purposes), you cannot <i>store</i> the user input anywhere -- so you cannot <i>implement</i> read_string() yet. ;-)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 3, "creation_date": 1426083885, "post_id": 28988659, "comment_id": 46226807, "body": "Generally speaking, <i>learning</i> C in &quot;freestanding&quot; mode (i.e. without an OS, directly &quot;on the hardware&quot;) is not a good idea. Learn the language <i>first</i> in an environment where you can edit-compile-run instead of edit-compile-reboot-run-reboot, where you get the benefit of debuggers and similar niceties, <i>then</i> set out to code on the bare metal. This comes from a former <a href=\"http://osdev.org\" rel=\"nofollow noreferrer\">OSDev</a> regular who has seen <i>hundreds</i> of people try what you&#39;re doing, and failing at it."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1426084939, "post_id": 28988659, "comment_id": 46227571, "body": "what platform and toolkit are you running on?"}, {"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1426088516, "post_id": 28988659, "comment_id": 46230262, "body": "Nothing ... Haha , bare metal , straight off of the boot."}, {"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1426088594, "post_id": 28988659, "comment_id": 46230330, "body": "Thanks  everyone, I realised that i need to write my own memory manager. I just thought that maybe C has this built in."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4658736"}, "is_accepted": false, "score": 1, "last_activity_date": 1426083417, "last_edit_date": 1426083417, "creation_date": 1426083336, "answer_id": 28989037, "question_id": 28988659, "link": "https://stackoverflow.com/questions/28988659/prevent-memory-overwrite-when-using-pointers-in-c/28989037#28989037", "title": "Prevent memory overwrite when using pointers in C", "body": "<p>In your question, everything depends on the <code>read_string()</code> function implementation. If that function correctly allocates memory for each new string, your <code>a</code> and <code>b</code> pointers will point to different strings.</p>\n"}, {"tags": [], "owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "is_accepted": true, "score": 0, "last_activity_date": 1426088418, "creation_date": 1426088418, "answer_id": 28991049, "question_id": 28988659, "link": "https://stackoverflow.com/questions/28988659/prevent-memory-overwrite-when-using-pointers-in-c/28991049#28991049", "title": "Prevent memory overwrite when using pointers in C", "body": "<p>I'll have to write my own memory manager to track allocated memory.</p>\n\n<p>Thx everyone.</p>\n"}], "owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 28991049, "answer_count": 2, "score": 1, "last_activity_date": 1426088418, "creation_date": 1426082501, "last_edit_date": 1426083608, "question_id": 28988659, "link": "https://stackoverflow.com/questions/28988659/prevent-memory-overwrite-when-using-pointers-in-c", "title": "Prevent memory overwrite when using pointers in C", "body": "<p>I'm new to C, and I'm getting started on programming a simple program that runs after boot, <em>without an OS</em>, so I don't have <code>malloc</code> and such.</p>\n\n<p>I'm trying to understand memory management; look at this example:</p>\n\n<pre><code>char *a = read_string(); // gets user input string, the length is unknown.\nchar *b = read_string();\n</code></pre>\n\n<p>How would I know that <code>b</code> doesn't overwrite <code>a</code>?</p>\n\n<p>Especially when writing a function that knows the string length only at runtime?</p>\n"}, {"tags": ["c", "memory-management", "linked-list"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426082512, "post_id": 28988567, "comment_id": 46225721, "body": "Did you compile with <code>gcc -Wall -Wextra -g</code> ? Then <code>valgrind</code> should give interesting messages. BTW you should end your <code>printf</code> format control strings with <code>\\n</code> or else use <code>fflush(NULL);</code>"}, {"owner": {"reputation": 614, "user_id": 2537102, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/8TNp9.png?s=128&g=1", "display_name": "Bregalad", "link": "https://stackoverflow.com/users/2537102/bregalad"}, "edited": false, "score": 0, "creation_date": 1426082694, "post_id": 28988567, "comment_id": 46225868, "body": "What are you trying to do with this <code>if(&amp;head!=NULL &amp;&amp; &amp;p!=NULL)</code> ?? This will always return true, as p and head are local variables, their address will never be NULL"}, {"owner": {"reputation": 614, "user_id": 2537102, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/8TNp9.png?s=128&g=1", "display_name": "Bregalad", "link": "https://stackoverflow.com/users/2537102/bregalad"}, "edited": false, "score": 0, "creation_date": 1426082774, "post_id": 28988567, "comment_id": 46225945, "body": "Also, <code>head</code> is already a pointer, there is no need to pass a pointer to it, just pass it directly."}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1426082837, "post_id": 28988567, "comment_id": 46225990, "body": "There is that indeed. It would be simpler to just pass <code>head</code> and not <code>&amp;head</code>"}, {"owner": {"reputation": 143, "user_id": 3198487, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a90d6e08ec8a473cb90954b79c7d7ad?s=128&d=identicon&r=PG", "display_name": "Sythe", "link": "https://stackoverflow.com/users/3198487/sythe"}, "edited": false, "score": 0, "creation_date": 1426084149, "post_id": 28988567, "comment_id": 46227008, "body": "I realized this afterwards, earlier when I was writing this, gcc would give warnings about using *head or head but not &amp;head, even though I knew it would probably be wrong. I&#39;ve edited the post"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1426084569, "post_id": 28988567, "comment_id": 46227317, "body": "you should check <code>malloc</code> return value and shouldn&#39;t cast it: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1426090771, "post_id": 28988567, "comment_id": 46231940, "body": "You edit had introduced another typo:  <code>while(*!=NULL)</code> makes no sense.  I believe you want <code>while (currNode != NULL)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "is_accepted": false, "score": 1, "last_activity_date": 1426082778, "creation_date": 1426082778, "answer_id": 28988796, "question_id": 28988567, "link": "https://stackoverflow.com/questions/28988567/allocated-memory-not-freeing-after-free/28988796#28988796", "title": "Allocated memory not freeing after free()", "body": "<p>I'm surprised your program terminates at all.</p>\n\n<p>First off:</p>\n\n<pre><code>void deleteList(PersonalInfo **head){\n  if(&amp;head==NULL)\n</code></pre>\n\n<p>should read:</p>\n\n<pre><code>if( *head==NULL )\n</code></pre>\n\n<p>because the address of the pointer-to-pointer is always non-NULL so your test always fails.</p>\n\n<p>Next:</p>\n\n<pre><code>  printf(\"List is empty\\n\");\n  PersonalInfo *next, *currNode = *head;\n  while(&amp;currNode!=NULL){\n</code></pre>\n\n<p>Same here: <code>&amp;currNode</code> is <em>always</em> non-NULL so this condition should never be false, i.e. your program should not terminate.\nYou need to test in stead:</p>\n\n<pre><code> while( currNode!=NULL )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4073497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5f84c6025f9bb0890d178bc2137951?s=128&d=identicon&r=PG&f=1", "display_name": "mihair", "link": "https://stackoverflow.com/users/4073497/mihair"}, "is_accepted": false, "score": 0, "last_activity_date": 1426083238, "creation_date": 1426083238, "answer_id": 28988996, "question_id": 28988567, "link": "https://stackoverflow.com/questions/28988567/allocated-memory-not-freeing-after-free/28988996#28988996", "title": "Allocated memory not freeing after free()", "body": "<p>I see that your insertIntoList function adds a new node to the beginning of the list but you never change the reference to the first note(the head pointer). So when you free your list you only free the last node.</p>\n\n<p>In your main() function try calling <code>head = insertToList(&amp;head, 2, \"Mike\", \"Pealow\");</code> or if you insist on having a double pointer for the first argument of insertIntoList after <code>p-&gt;next = *head;</code> add a <code>*head = p</code></p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 3198487, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a90d6e08ec8a473cb90954b79c7d7ad?s=128&d=identicon&r=PG", "display_name": "Sythe", "link": "https://stackoverflow.com/users/3198487/sythe"}, "is_accepted": false, "score": 0, "last_activity_date": 1426084911, "creation_date": 1426084911, "answer_id": 28989612, "question_id": 28988567, "link": "https://stackoverflow.com/questions/28988567/allocated-memory-not-freeing-after-free/28989612#28989612", "title": "Allocated memory not freeing after free()", "body": "<p>Found out where the issue was, I was allocating memory from the head without removing it, so when the program ran, it would still count head for memory allocation. </p>\n\n<p>In the testing source file:</p>\n\n<pre><code>PersonalInfo *head = NULL;\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3198487, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a90d6e08ec8a473cb90954b79c7d7ad?s=128&d=identicon&r=PG", "display_name": "Sythe", "link": "https://stackoverflow.com/users/3198487/sythe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1426091024, "creation_date": 1426082301, "last_edit_date": 1426091024, "question_id": 28988567, "link": "https://stackoverflow.com/questions/28988567/allocated-memory-not-freeing-after-free", "title": "Allocated memory not freeing after free()", "body": "<p>Struggling to learn how malloc and free work, but I thought that I might of had it right. I am calling a deleteList() at the end of my test file which should free all the memory, but when I use valgrind it states I still have allocated memory active. If anyone knows how I might resolve this, it would be great.</p>\n\n<p>Testing source file:</p>\n\n<pre><code>#include \"stdlib.h\"\n#include \"string.h\"\n#include \"linked_list.h\"\n\nint main(int argc, char* argv[]){\n  PersonalInfo *head = NULL;\n\n  printList(head);\n\n  insertToList(&amp;head, 2, \"Mike\", \"Pealow\");\n  printList(head);\n\n  deleteList(&amp;head);\n\n  return 0;\n}\n</code></pre>\n\n<p>Prototype file:</p>\n\n<pre><code>#define NAME_LENGTH 32\n\ntypedef struct personalInfo {\n  struct personalInfo *next;\n  unsigned int id;    \n  char firstName[NAME_LENGTH];\n  char familyName[NAME_LENGTH];\n} PersonalInfo;\n\nPersonalInfo *insertToList(PersonalInfo **head, unsigned int id, char *firstName, char *familyName);\nvoid printList(PersonalInfo *head);\nvoid deleteList(PersonalInfo **head);\n</code></pre>\n\n<p>Source file:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include \"string.h\"\n#include \"linked_list.h\"\n\nPersonalInfo *insertToList(PersonalInfo **head, unsigned int id, char *firstName, char *familyName){\n  PersonalInfo *p = (PersonalInfo*)malloc(sizeof(PersonalInfo));\n  strcpy(p-&gt;firstName, firstName);\n  strcpy(p-&gt;familyName, familyName);\n  p-&gt;id = id;\n  p-&gt;next = NULL;\n  if(*head!=NULL &amp;&amp; p!=NULL){\n    p-&gt;next = *head;\n    return p;\n  }\n  else{\n    printf(\"Head is null; create new head? (y/n)\");\n    char scChar;\n    scanf(\"%c\", &amp;scChar);\n    if(scChar=='y'){\n      head = &amp;p;\n      return p;\n    }\n    else if(scChar=='n'){\n      printf(\"Exiting\");\n      free(p);\n      p=NULL;\n      return NULL;\n    }\n    else{\n      printf(\"Invalid input, exiting\");\n      free(p);\n      p=NULL;\n      return NULL;\n    }\n  }\n}\n\n\nvoid printNode(PersonalInfo *node){\n  printf(\"%s %s %d\", node-&gt;firstName, node-&gt;familyName, node-&gt;id);\n}\n\nvoid deleteList(PersonalInfo **head){\n  if(*head==NULL)\n    printf(\"List is empty\\n\");\n  PersonalInfo *next, *currNode = *head;\n  while(currNode!=NULL){\n    next = currNode-&gt;next;\n    free(currNode);\n    currNode = next;\n  }\n  currNode = NULL;\n}\n</code></pre>\n"}, {"tags": ["c", "cellular-automata"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426082417, "post_id": 28988203, "comment_id": 46225644, "body": "Spelling note: the word &quot;automata&quot; is plural.  The singular is &quot;automaton&quot; (corrected)."}], "answers": [{"comments": [{"owner": {"reputation": 919, "user_id": 1913796, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/SuFNn.jpg?s=128&g=1", "display_name": "Alexandru Cimpanu", "link": "https://stackoverflow.com/users/1913796/alexandru-cimpanu"}, "edited": false, "score": 0, "creation_date": 1426083131, "post_id": 28988846, "comment_id": 46226222, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1426082891, "creation_date": 1426082891, "answer_id": 28988846, "question_id": 28988203, "link": "https://stackoverflow.com/questions/28988203/cellular-automaton-not-working/28988846#28988846", "title": "Cellular Automaton not working", "body": "<p>The fault is with this line:</p>\n\n<pre><code>ruleCase=1*previous[cell-1]+2*previous[cell]+3*previous[cell+1];\n</code></pre>\n\n<p>When I change the <code>3</code> to a <code>4</code> the program produces the Sierpinski triangles.</p>\n\n<pre><code>ruleCase=1*previous[cell-1]+2*previous[cell]+4*previous[cell+1];\n</code></pre>\n\n<p>and the other two similar lines.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1426082941, "creation_date": 1426082941, "answer_id": 28988868, "question_id": 28988203, "link": "https://stackoverflow.com/questions/28988203/cellular-automaton-not-working/28988868#28988868", "title": "Cellular Automaton not working", "body": "<p>You appear to be computing <code>ruleCase</code> incorrectly.  For example, in the general case you do ...</p>\n\n<pre><code>ruleCase=1*previous[cell-1]+2*previous[cell]+3*previous[cell+1]\n</code></pre>\n\n<p>... but you are trying to interpret the cell values as <em>binary</em> digits.  Therefore, the coefficients should be powers of 2:</p>\n\n<pre><code>ruleCase=1*previous[cell-1]+2*previous[cell]+4*previous[cell+1]\n</code></pre>\n\n<p>Likewise for the special cases.</p>\n"}], "owner": {"reputation": 919, "user_id": 1913796, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/SuFNn.jpg?s=128&g=1", "display_name": "Alexandru Cimpanu", "link": "https://stackoverflow.com/users/1913796/alexandru-cimpanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 1, "accepted_answer_id": 28988868, "answer_count": 2, "score": 0, "last_activity_date": 1426082941, "creation_date": 1426081329, "last_edit_date": 1592644375, "question_id": 28988203, "link": "https://stackoverflow.com/questions/28988203/cellular-automaton-not-working", "title": "Cellular Automaton not working", "body": "<p>I am trying to create a Cellular Automaton based on <a href=\"http://natureofcode.com/book/chapter-7-cellular-automata/\" rel=\"nofollow noreferrer\">this</a>. I have managed to do it in a simple way that would follow only rule 90 but when I changed it to accept any rule I did something wrong.</p>\n<p>This is how the result should look.\n<a href=\"http://natureofcode.com/book/imgs/chapter07/ch07_12.png\" rel=\"nofollow noreferrer\">http://natureofcode.com/book/imgs/chapter07/ch07_12.png</a></p>\n<p>This is my code:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    FILE *myFile = fopen ( &quot;input.txt&quot; , &quot;r&quot; );\n    int i, j, cell, iterations=100, current[80], previous[80], ruleCase, rule=90;\n    for(i=0;i&lt;80;i++){\n        fscanf(myFile, &quot;%1d&quot;, &amp;previous[i]);\n        if(previous[i]==0)printf(&quot;%c&quot;,176);\n        else printf(&quot;%c&quot;,178);\n    }\n    for(i=0;i&lt;=iterations;i++){\n        for(cell=0;cell&lt;80;cell++)\n        {\n            if((cell&gt;0) &amp;&amp; (cell&lt;79))\n            {\n                ruleCase=1*previous[cell-1]+2*previous[cell]+3*previous[cell+1];\n            }\n            else if(cell==0)\n            {\n                ruleCase=1*previous[79]+2*previous[cell]+3*previous[cell+1];\n            }\n            else if(cell==79)\n            {\n                ruleCase=1*previous[cell-1]+2*previous[cell]+3*previous[0];\n            }\n            if(rule &amp; (128 &gt;&gt; ruleCase))\n            {\n                current[cell]=1;\n                printf(&quot;%c&quot;,178);\n            }\n            else\n            {\n                current[cell]=0;\n                printf(&quot;%c&quot;,176);\n            }\n        }\n        for(j=0;j&lt;80;j++){\n            previous[j]=current[j];\n        }\n    }\n    return 0;\n}\n</code></pre>\n<p>with the following input.txt\n<code>00000000000000000000000000000000000000100000000000000000000000000000000000000000</code></p>\n<p>Thank you!</p>\n"}, {"tags": ["c", "ssl", "openssl"], "comments": [{"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426085460, "post_id": 28988150, "comment_id": 46227985, "body": "Usually you get a SIGPIPE if the socket connection or PIPE is broken i.e. the other side is no longer present in which case, in most cases the application should use the <code>SIG_IGN</code> for handling the signal for example <code>signal(SIGPIPE, SIG_IGN);</code> . Please look at the following answer for detail.  <a href=\"http://stackoverflow.com/questions/108183/how-to-prevent-sigpipes-or-handle-them-properly\" title=\"how to prevent sigpipes or handle them properly\">stackoverflow.com/questions/108183/&hellip;</a>. <code>SIG_IGN</code> will ignore the signal."}, {"owner": {"reputation": 11, "user_id": 4073497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5f84c6025f9bb0890d178bc2137951?s=128&d=identicon&r=PG&f=1", "display_name": "mihair", "link": "https://stackoverflow.com/users/4073497/mihair"}, "reply_to_user": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426086449, "post_id": 28988150, "comment_id": 46228753, "body": "Changing the signal handler for the broken pipe signal only hides the problem that I&#39;m dealing with. Right now the code is in a dev testing stage and I can get away with global changes like ignoring a signal but later on it will be integrated with a bigger product which may want to add signal handlers of it&#39;s own."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426089285, "post_id": 28988150, "comment_id": 46230856, "body": "what you cannot control is the other end of the connection from breaking the connection which would lead you to have a <code>SIGPIPE</code> signal which I think can be ignored. what cannot be ignored is the error the socket write returns which is <code>errno 32 </code> on most linux systems <code>broken pipe</code> in which case you need to handle the error correctly and stop writing to it."}, {"owner": {"reputation": 11, "user_id": 4073497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5f84c6025f9bb0890d178bc2137951?s=128&d=identicon&r=PG&f=1", "display_name": "mihair", "link": "https://stackoverflow.com/users/4073497/mihair"}, "reply_to_user": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426090237, "post_id": 28988150, "comment_id": 46231578, "body": "I&#39;ve just checked and BIO_write() always returns the number of bytes written(which is around 100 bytes per command) and never returns an error. I must remind you that I&#39;m using secure sockets and thus data is not immediately pushed to the socket but it&#39;s buffered and encoded. Maybe this is why BIO_write always succeeds...maybe?"}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426090692, "post_id": 28988150, "comment_id": 46231886, "body": "are you using openssl ?"}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426091400, "post_id": 28988150, "comment_id": 46232417, "body": "maybe <code>ssl_write</code> or <code>bio_write</code> does not have any error. The error arises when you do a <code>SSL_shutdown</code> which in turn tries to send a <code>close_notify</code> message if I remember the proto.Which in turn is causing the broken pipe error probably because the other side is already closed &quot;maybe because of wrongly written SSL code far end&quot;. Handling SSL_shutdown could be a tricky thing. you can look at the following links for more understanding. provided you are using openssl <a href=\"http://stackoverflow.com/questions/28056056/handling-ssl-shutdown-correctly\" title=\"handling ssl shutdown correctly\">stackoverflow.com/questions/28056056/&hellip;</a> <a href=\"https://www.openssl.org/docs/ssl/SSL_shutdown.html\" rel=\"nofollow noreferrer\">openssl.org/docs/ssl/SSL_shutdown.html</a>"}, {"owner": {"reputation": 11, "user_id": 4073497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5f84c6025f9bb0890d178bc2137951?s=128&d=identicon&r=PG&f=1", "display_name": "mihair", "link": "https://stackoverflow.com/users/4073497/mihair"}, "reply_to_user": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426091959, "post_id": 28988150, "comment_id": 46232788, "body": "Yes, I am using OpenSSL, v1.0.2 to be exact. I&#39;m expecting from a mature library like this to not do this kind of rookie mistakes like writing to a socket it already knows is closed. I&#39;m thinking that I may be using the interface incorrectly which causes the crash"}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426104047, "post_id": 28988150, "comment_id": 46240570, "body": "when I said wrongly written far end I did not mean openssl I meant the client/server written using some ssl library one such case is if the other side just ends the connection by calling <code>close(fd)</code> without calling <code>SSL_shutdown</code> or socket <code>shutdown(fd,x)</code> or the application on the far end just crashes which then would cause the connection to break and cause broken pipe error. openssl would have no idea about what happened on the other end but to just return the application with a <code>SSL_ERROR_SSL</code> or a <code>SSL_ERROR_SYSCALL</code> so the application has to check the error stack or return errno value"}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1426104489, "post_id": 28988150, "comment_id": 46240812, "body": "the tcp state machine would not know that the far side has gone until it sends a packet out provided it has not received a <code>FIN&#47;FIN-ACK</code> and tcp timers have kicked in so there is no way for openssl to know that"}], "owner": {"reputation": 11, "user_id": 4073497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5f84c6025f9bb0890d178bc2137951?s=128&d=identicon&r=PG&f=1", "display_name": "mihair", "link": "https://stackoverflow.com/users/4073497/mihair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "closed_date": 1426092355, "answer_count": 0, "score": 1, "last_activity_date": 1426081171, "creation_date": 1426081171, "question_id": 28988150, "link": "https://stackoverflow.com/questions/28988150/openssl-crashes-when-freeing-a-closed-socket-with-pending-data", "closed_reason": "Duplicate", "title": "OpenSSL crashes when freeing a closed socket with pending data", "body": "<p>I'm working on a project which needs to connect to a server over a secure socket connection and send some commands, in case one of the commands fail I get an error response on that socket and then the socket closes.</p>\n\n<p>I have tried a single-threaded approach with a non-blocking ssl socket. I connect to the server and then send a few commands, do a non-blocking read for an error status, send some more commands, read again and so on. The server is an Apple Push Notification Service in case it helps.</p>\n\n<p>Everything seems fine until I get an error response followed by the server closing the socket. I can read the error response and see that the socket has been closed but when I free the BIO object the application crashes (unhandled SIGPIPE). In my opinion it crashes because I may be sending data even after the socket has been closed. This is the backtrace after the SIGPIPE signal was issued:</p>\n\n<pre><code>queue = 'com.apple.main-thread', stop reason = signal SIGPIPE\nframe #0: 0x94cad46a libsystem_kernel.dylib`__write + 10\nframe #1: 0x0007b835 APNTest`conn_write + 69\nframe #2: 0x0007957d APNTest`BIO_write + 141\nframe #3: 0x00100127 APNTest`ssl3_write_pending + 215\nframe #4: 0x001001f9 APNTest`do_ssl3_write + 57\nframe #5: 0x00101cab APNTest`ssl3_dispatch_alert + 59\nframe #6: 0x000fdb80 APNTest`ssl3_shutdown + 112\nframe #7: 0x00126e43 APNTest`ssl_ctrl + 83\nframe #8: 0x00005653 APNTest`APNConnection::shutdown(this=0x00300fd0) + 83 at APNConnection.cpp:136\nframe #9: 0x000055e5 APNTest`APNConnection::~APNConnection(this=0x00300fd0) + 21 at APNConnection.cpp:41\nframe #10: 0x00005687 APNTest`APNConnection::~APNConnection(this=0x00300fd0) + 23 at APNConnection.cpp:40\nframe #11: 0x000024d6 APNTest`APNService::run(this=0xbffff7a8) + 1190 at APNService.cpp:73\nframe #12: 0x00006a6a APNTest`main + 1946 at main.cpp:36\nframe #13: 0x94ce46d9 libdyld.dylib`start + 1\n</code></pre>\n\n<p>Here is the code I use to create my OpenSSL secure socket</p>\n\n<pre><code>BIO *bio;\nSSL_CTX *ctx;\nSSL *ssl;\n\nctx = SSL_CTX_new(SSLv23_client_method());\nif (!SSL_CTX_load_verify_locations(ctx, strdup(trustStoreFile.c_str()), NULL)) {...}\nif (SSL_CTX_use_certificate_file(ctx, strdup(clientCertFile.c_str()), SSL_FILETYPE_PEM) &lt;= 0) {...}\nif (SSL_CTX_use_PrivateKey_file(ctx, strdup(clientPKFile.c_str()), SSL_FILETYPE_PEM) &lt;= 0) {...}\n\nbio = BIO_new_ssl_connect(ctx);\nBIO_get_ssl(bio, &amp; ssl);\nSSL_set_mode(ssl, SSL_MODE_AUTO_RETRY);\nBIO_set_nbio(bio, 1);\nBIO_set_conn_hostname(bio, serverURL.c_str());\nint connErr = 0;\ndo {\n    connErr = BIO_do_connect(bio);\n} while (BIO_should_retry(bio));\n</code></pre>\n\n<p>Reading and writing data is performed using <code>BIO_write(bio, data, size)</code> and <code>BIO_read(bio, data, datasize)</code></p>\n\n<p>Cleanup code and the one that crashes is </p>\n\n<pre><code>SSL_CTX_free(ctx);\nBIO_reset(bio);\nBIO_free_all(bio);\n</code></pre>\n\n<p>BIO_reset is the one that crashes right now, but if I remove it BIO_free_all will crash. What I can do to avoid the crash is send one command at a time and after each command is sent I should wait 1 second or so to see if the server sent an error for that command or not, send one more, wait again and so on. Or another thing that helped me hide the crash is installing a dummy signal handler for SIGPIPE but these are just workarounds.</p>\n\n<p>I'm guessing that it may be crashing because of the data queued for sending after the socket was closed. What makes me believe this is that I see that ssl3_shutdown calls some ssl3_write_pending and also because the cleanup code will not crash if I am extra careful to not do any more BIO_write(s) after I get a non-zero SSL_shutdown(). </p>\n\n<p>Am I doing something wrong with the cleanup code or is there a way to instruct OpenSSL to discard any data when freeing the BIO and SSL objects? </p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["c", "pointers", "reference", "return-value"], "comments": [{"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 3, "creation_date": 1426081086, "post_id": 28988042, "comment_id": 46224570, "body": "Sounds more like a <a href=\"http://programmers.stackexchange.com/\">programmers.stackexchange.com</a> question"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1426081360, "post_id": 28988042, "comment_id": 46224762, "body": "Returning pointers usually results in the lifetime manage problem the object pointed to, because 90% of the time, the pointee is newly constructed by the function."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1426081605, "post_id": 28988042, "comment_id": 46224935, "body": "The example with <code>strcat</code> is true for old style API. The new replacement return error code: <code>errno_t strcat_s(    char *strDestination,    size_t numberOfElements,    const char *strSource  )</code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1426082899, "post_id": 28988042, "comment_id": 46226038, "body": "@i486 - is strcat_s() (et. al _s functions) universally supported?"}, {"owner": {"reputation": 798, "user_id": 3850993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NTFC2.png?s=128&g=1", "display_name": "Yorick de Wid", "link": "https://stackoverflow.com/users/3850993/yorick-de-wid"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426082993, "post_id": 28988042, "comment_id": 46226107, "body": "@ryyker AFAIK thats the Windows API. glibc doesn&#39;t have safe functions (yet)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426083947, "post_id": 28988042, "comment_id": 46226852, "body": "@YorickdeWid - Yes, I was being subtle in my comment.  I meant to point out that that comment&#39;s (from i486) phrasing seemed to bias a C implementation that is not universally accepted."}], "answers": [{"comments": [{"owner": {"reputation": 677, "user_id": 1290983, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/183834401387b06b8aff24f88dcd6cbd?s=128&d=identicon&r=PG", "display_name": "chain ro", "link": "https://stackoverflow.com/users/1290983/chain-ro"}, "edited": false, "score": 1, "creation_date": 1426081941, "post_id": 28988328, "comment_id": 46225227, "body": "Where are they come from? I mean your <code>Rules of thumb</code>. Could you present the reference links?"}, {"owner": {"reputation": 1322, "user_id": 308421, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c34a3ed4ecebe36e278cd892d3241fcb?s=128&d=identicon&r=PG", "display_name": "liorda", "link": "https://stackoverflow.com/users/308421/liorda"}, "reply_to_user": {"reputation": 677, "user_id": 1290983, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/183834401387b06b8aff24f88dcd6cbd?s=128&d=identicon&r=PG", "display_name": "chain ro", "link": "https://stackoverflow.com/users/1290983/chain-ro"}, "edited": false, "score": 0, "creation_date": 1426081970, "post_id": 28988328, "comment_id": 46225253, "body": "My experience, some common sense and good industry practices."}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1426082101, "post_id": 28988328, "comment_id": 46225375, "body": "No 5 applies to any data type...and this is the least of the incomplete answers you give here...."}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "edited": false, "score": 1, "creation_date": 1426082153, "post_id": 28988328, "comment_id": 46225412, "body": "I would have gone with sizeof(return) &lt; sizeof(int*).  Also, if the copy constructor/assignment operator/etc of the return type do non standard things even if the class size is small, its worth doing by reference.   I&#39;ve seen copy ctor&#39;s that initiated web connections.   People put some crazy stuff in strange places."}, {"owner": {"reputation": 1322, "user_id": 308421, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c34a3ed4ecebe36e278cd892d3241fcb?s=128&d=identicon&r=PG", "display_name": "liorda", "link": "https://stackoverflow.com/users/308421/liorda"}, "reply_to_user": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1426082406, "post_id": 28988328, "comment_id": 46225632, "body": "@Pandrei Regarding 5 - if it&#39;s a POD, passing it by pointer won&#39;t make a lot of sense. You should always get the result as the return type, unless one of the rules apply."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1426082691, "post_id": 28988328, "comment_id": 46225865, "body": "If it&#39;s a big POD, passing it in by value can easily blow up the stack. That&#39;s what @Pandrei was saying in his #2."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1426082738, "post_id": 28988328, "comment_id": 46225916, "body": "in the context of C (which we are here) what should be a POD?"}, {"owner": {"reputation": 1322, "user_id": 308421, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c34a3ed4ecebe36e278cd892d3241fcb?s=128&d=identicon&r=PG", "display_name": "liorda", "link": "https://stackoverflow.com/users/308421/liorda"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1426083487, "post_id": 28988328, "comment_id": 46226492, "body": "@JensGustedt I think POD in this context are everything besides pointer types."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1426083831, "post_id": 28988328, "comment_id": 46226764, "body": "@liorda, I know what a POD is, only in the context of C this  distinction makes no sense at all. This is terminology for C++ and not C."}, {"owner": {"reputation": 1322, "user_id": 308421, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c34a3ed4ecebe36e278cd892d3241fcb?s=128&d=identicon&r=PG", "display_name": "liorda", "link": "https://stackoverflow.com/users/308421/liorda"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1426084649, "post_id": 28988328, "comment_id": 46227368, "body": "@JensGustedt I borrowed the term from C++ to mean what I wrote - anything but pointer types. My apologies if it caused confusion."}], "tags": [], "owner": {"reputation": 1322, "user_id": 308421, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c34a3ed4ecebe36e278cd892d3241fcb?s=128&d=identicon&r=PG", "display_name": "liorda", "link": "https://stackoverflow.com/users/308421/liorda"}, "is_accepted": false, "score": -2, "last_activity_date": 1426084823, "last_edit_date": 1426084823, "creation_date": 1426081664, "answer_id": 28988328, "question_id": 28988042, "link": "https://stackoverflow.com/questions/28988042/c-when-to-return-by-value-or-pass-reference/28988328#28988328", "title": "C: When to return by value or pass reference", "body": "<p>Rules of thumb:</p>\n\n<ol>\n<li>If <code>sizeof(return type)</code> is bigger than <code>sizeof(int)</code>, you should probably pass it by pointer to avoid the copy overhead. This is a performance issue. There's some penalty for dereferencing the pointer, so there are some exceptions to this rule.</li>\n<li>If the return type is complex (containing pointer members), pass it by pointer. Copying the local return value to the stack will not copy dynamic memory, for example.</li>\n<li>If you want the function to allocate the memory, it should return a pointer to the newly allocated memory. It's called the <em>factory</em> design pattern.</li>\n<li>If you have more than one thing you want to return from a function - return one by value, and pass the rest by pointers.</li>\n<li>If you have a complex/big data type which is both input and output, pass it by pointer.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 13, "last_activity_date": 1426088036, "creation_date": 1426088036, "answer_id": 28990895, "question_id": 28988042, "link": "https://stackoverflow.com/questions/28988042/c-when-to-return-by-value-or-pass-reference/28990895#28990895", "title": "C: When to return by value or pass reference", "body": "<p>Start by deciding which approach makes the most sense at the <em>logical</em> level, irrespective of what you think the performance implications might be.  If returning a <code>struct</code> by value most clearly conveys the <em>intent</em> of the code, then do that.  </p>\n\n<p>This isn't the 1980s anymore.  Compilers have gotten a lot smarter since then and do a really good job of optimizing code, especially code that's written in a clear, straightforward manner.  Similarly, parameter passing and value return conventions have become fairly sophisticated as well.  The simplistic stack-based model doesn't really reflect the reality of modern hardware.   </p>\n\n<p>If the resulting application doesn't meet your performance criteria, then run it through a profiler to find the bottlenecks.  If it turns out that returning that <code>struct</code> by value is causing a problem, <em>then</em> you can experiment with passing by reference to the function.</p>\n\n<p>Unless you're working in a highly constrained, embedded environment, you really don't have to count every byte and CPU cycle.  You don't want to be needlessly wasteful, but by that same token you don't want to obsess over how things work at the low level unless a) you have really strict performance requirements and b) you are <em>intimately</em> familiar with the details of your particular platform (meaning that you not only know your platform's function calling conventions inside and out, you know how your compiler uses those conventions as well).  Otherwise, you're just guessing.  Let the compiler do the hard work for you.  That's what it's there for.</p>\n"}], "owner": {"reputation": 798, "user_id": 3850993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NTFC2.png?s=128&g=1", "display_name": "Yorick de Wid", "link": "https://stackoverflow.com/users/3850993/yorick-de-wid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6021, "favorite_count": 2, "accepted_answer_id": 28990895, "answer_count": 2, "score": 11, "last_activity_date": 1426088036, "creation_date": 1426080895, "last_edit_date": 1495541957, "question_id": 28988042, "link": "https://stackoverflow.com/questions/28988042/c-when-to-return-by-value-or-pass-reference", "title": "C: When to return by value or pass reference", "body": "<p>Although the subject is discussed many times, I haven't found any satisfying answer so far. When to return data from a function by <strong>return</strong> or to pass a <strong>reference</strong> to change the data on address? The classic answer is to pass a variable as reference to a function when it becomes large (to avoid stack copying). This looks true for anything like a structure or array. However returning a pointer from a function is not uncommon. In fact some functions from the C library to the exact thing. For example:</p>\n\n<pre><code>char *strcat(char *dst, const char *src);\n</code></pre>\n\n<p>Always returns a pointer to destination even in case of an error. In this case we can just use the passed variable and leave the return for what it is (as most do).</p>\n\n<p>When looking at structures I see the same thing happening. I often return pointers when functions <em>only</em> need to be used in variable initialization.</p>\n\n<pre><code>char *p = func(int i, const char *s);\n</code></pre>\n\n<p>Then there is the argument that stack coping variables is expensive, and so to use pointers instead. But as mentioned <a href=\"https://stackoverflow.com/a/270435/3850993\">here</a> some compilers are able to decide this themselves (assuming this goes for C as well). Is there a general rule, or at least some unwritten convention when to use one or the other? I value performance above design.</p>\n"}, {"tags": ["c", "memory", "cuda", "constants"], "comments": [{"owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "edited": false, "score": 0, "creation_date": 1426089547, "post_id": 28987495, "comment_id": 46231070, "body": "Use a const struct, array, or include the variables in the kernel call."}], "answers": [{"tags": [], "owner": {"reputation": 2907, "user_id": 714967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18f3d9bcf8ec28c43f47f98cfc60c031?s=128&d=identicon&r=PG", "display_name": "pQB", "link": "https://stackoverflow.com/users/714967/pqb"}, "is_accepted": true, "score": 7, "last_activity_date": 1561718197, "last_edit_date": 1561718197, "creation_date": 1426096502, "answer_id": 28993944, "question_id": 28987495, "link": "https://stackoverflow.com/questions/28987495/how-to-use-constant-memory-for-beginners-cuda-c/28993944#28993944", "title": "How to use constant memory for beginners (Cuda C)", "body": "<p>The constant memory in CUDA is a dedicated memory space of 65536 bytes. It is dedicated because it has some special features like cache and broadcasting. </p>\n\n<blockquote>\n  <p>The constant memory space resides in device memory and is cached in the constant cache mentioned in Compute Capability 1.x and Compute Capability 2.x.</p>\n</blockquote>\n\n<p>See Sect. 5.3.2. Device Memory Access and Sect. G.4.4. Constant Memory in the CUDA C Programming Guide for more details.</p>\n\n<p>So, you can allocate constant memory for one element as you already did, and you can also allocate memory for an array of element.</p>\n\n<pre><code>__constant__ float c_ABC[3]; // 3 elements of type float (12 bytes)\n</code></pre>\n\n<p>However, dynamically allocation of constant memory is not allowed in CUDA. Therefore, you must copy the data from the CPU to the GPU as you did with one element.</p>\n\n<pre><code>float pABC[] = {1, 2, 3};\n...\ncudaMemcpyToSymbol(c_ABC, &amp;pABC, 3 * sizeof(float));\n</code></pre>\n\n<p>You can initialize <code>pABC</code> in the CPU for example in a loop or loading data from a file and then copy the data in the constant memory of the GPU.</p>\n\n<p>NOTE that I have adjusted your example to use always floats.</p>\n"}], "owner": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11559, "favorite_count": 2, "accepted_answer_id": 28993944, "answer_count": 1, "score": 4, "last_activity_date": 1561718197, "creation_date": 1426079409, "last_edit_date": 1504860449, "question_id": 28987495, "link": "https://stackoverflow.com/questions/28987495/how-to-use-constant-memory-for-beginners-cuda-c", "title": "How to use constant memory for beginners (Cuda C)", "body": "<p>I have 3 constant values (<code>A</code>,<code>B</code>,<code>C</code>) which I would like to save in the constant memory; I figured out one way to do it by typing this lines of code:</p>\n\n<pre><code>// CUDA global constants\n__constant__ int A;\n__constant__ int B;\n__constant__ int C;\n\nint main(void)\n{\n\n    float pA=1;\n    float pB=2;\n    float pC=3;\n    ...\n    cudaMemcpyToSymbol(A, &amp;pA, sizeof(A));\n    cudaMemcpyToSymbol(B, &amp;pB, sizeof(B));\n    cudaMemcpyToSymbol(C, &amp;pC, sizeof(C));\n    ...\n}\n</code></pre>\n\n<p>However I believe this is not the best way to proceed since it would become very inconvenient if I had a larger number of constants.</p>\n\n<p><strong>Here is my question</strong>: how can I replicate the lines of code I wrote above in order to have a more compact form?</p>\n"}, {"tags": ["c", "postgresql", "header-files", "erp", "itil"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1426078897, "post_id": 28987246, "comment_id": 46223001, "body": "1) as long as the out-facing API doesn&#39;t change, you can avoid recompliation with pimpl: <a href=\"http://en.wikipedia.org/wiki/Opaque_pointer\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Opaque_pointer</a> 2) do parallel compilation (distributed cc) on many machines."}, {"owner": {"reputation": 43, "user_id": 3845514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qlfkz.jpg?s=128&g=1", "display_name": "The smart Eagle", "link": "https://stackoverflow.com/users/3845514/the-smart-eagle"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1426079449, "post_id": 28987246, "comment_id": 46223375, "body": "It&#39;s not a problem for me to recompile all programs (just few shell lines do the need), my problem how to avoid the test effort for testers. I want to fix a new process to release it in order to short-circuit 2 weeks of test each time when I have to change the table structure."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 3, "creation_date": 1426080226, "post_id": 28987246, "comment_id": 46223969, "body": "you need automated tests."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426080228, "post_id": 28987246, "comment_id": 46223970, "body": "I would try a separate directory tree for the generated header files. The ones used in the build-tree can be synchronised by <code>diff -q src dst &amp;&amp; cp src dst</code> or something like that; avoiding unchanged files to be touched."}, {"owner": {"reputation": 43, "user_id": 3845514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qlfkz.jpg?s=128&g=1", "display_name": "The smart Eagle", "link": "https://stackoverflow.com/users/3845514/the-smart-eagle"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1426080436, "post_id": 28987246, "comment_id": 46224106, "body": "@Karoly The automated tests are unwanted and unreleased in the current process"}, {"owner": {"reputation": 43, "user_id": 3845514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qlfkz.jpg?s=128&g=1", "display_name": "The smart Eagle", "link": "https://stackoverflow.com/users/3845514/the-smart-eagle"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426080510, "post_id": 28987246, "comment_id": 46224165, "body": "@wildplasser I need a new concept to minimize the effort when I have to change the header files."}], "owner": {"reputation": 43, "user_id": 3845514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qlfkz.jpg?s=128&g=1", "display_name": "The smart Eagle", "link": "https://stackoverflow.com/users/3845514/the-smart-eagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426163736, "creation_date": 1426078751, "last_edit_date": 1426163736, "question_id": 28987246, "link": "https://stackoverflow.com/questions/28987246/avoid-recompile-all-programs-embedded-c", "title": "avoid recompile all programs embedded C", "body": "<p>I am working on ERP solution that contains about 700 programs developed in embedded C language *.ec, the database (Postgres) has about 2000 db tables each table is designed as structure in its header file tableXX.h in order to simplify the use of all tables inside the ERP's programs.\nexample tableXX.h</p>\n\n<pre><code>[dev]&gt;cat tableXX.h\nstruct record_type_tablexx\n{\n  int field1;\n  int field2;\n  string field3[10];\n  double field4;\n  ...\n  long filed60;\n};\n\ntypedef struct record_type_tablexx TABLEXXTYP;\nTABLEXXTYP tablexx;\n</code></pre>\n\n<p>The problem is: each time when the Consultants decide to change one table structure for any reason, I have to recompile all programs that are using that table, this process {Dev+test+(Prod update)} costs much effort.</p>\n\n<p>I am asking who faced such problems up about a solution that minimize that effort regarding your experiences</p>\n"}, {"tags": ["c++", "c", "gcc", "makefile", "gnu"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 4, "creation_date": 1426078751, "post_id": 28987212, "comment_id": 46222896, "body": "Unclear what you are asking. Please edit your question to show much more of your <code>Makefile</code>"}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426078830, "post_id": 28987212, "comment_id": 46222957, "body": "@BasileStarynkevitch I think he is asking if he uses -Wall and -Werror with make, will it generate messages for what errors are in his code. And if not, how can he generate those messages on his own by editing the makefile"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426079032, "post_id": 28987212, "comment_id": 46223093, "body": "But still, the OP (codebat) should improve his question by showing more of the <code>Makefile</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426079102, "post_id": 28987212, "comment_id": 46223142, "body": "Your <code>Makefile</code> is  missing some <i>tab</i> characters. Tabulations are <i>important</i> in <code>Makefile</code>-s (replace them with four more spaces in your question)"}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1426079171, "post_id": 28987212, "comment_id": 46223179, "body": "It will not be possible, some errors depend on some number, e.g., <code>-ftemplate-depth=42</code>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1426079210, "post_id": 28987212, "comment_id": 46223211, "body": "@codebat: Why can&#39;t you simply run <code>make -k</code> ?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1426079324, "post_id": 28987212, "comment_id": 46223288, "body": "No. <code>-Wall</code> and <code>-Wextra</code> don&#39;t generate any errors. They produce warnings. You get errors if your code is not valid C++, not by enabling warnings. And if your code is not valid C++ you will always get errors, you don&#39;t need to use an option to ask the compiler to tell you it&#39;s invalid."}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 1, "creation_date": 1426079551, "post_id": 28987212, "comment_id": 46223468, "body": "As Jonathan said, errors are always reported. You can also use <code>-Werror</code> to turn all warnings into errors, but the topic of warnings is broad and complicated."}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426079944, "post_id": 28987212, "comment_id": 46223775, "body": "@BasileStarynkevitch I know but I was just kinda nudging him in the right direction."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433178800, "post_id": 28987212, "comment_id": 49228710, "body": "Hi. Even after your question has been answered, the question need to remain as it was for others who encounter your problem. We have repeatedly rolled back your deletion of the question body. Please, stop deleting the question body and replacing it with &quot;problem solved&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2892, "user_id": 391691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCKhh.jpg?s=128&g=1", "display_name": "Simson", "link": "https://stackoverflow.com/users/391691/simson"}, "edited": false, "score": 0, "creation_date": 1426081484, "post_id": 28987482, "comment_id": 46224841, "body": "yes it sounds like it could be that simple as just set errors: binary"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1426080153, "last_edit_date": 1426080153, "creation_date": 1426079367, "answer_id": 28987482, "question_id": 28987212, "link": "https://stackoverflow.com/questions/28987212/how-to-write-a-makefile-with-target-errors/28987482#28987482", "title": "How to write a makefile with target &quot;errors&quot;?", "body": "<p>You could add before the first target of your <code>Makefile</code></p>\n\n<pre><code> .PHONY: all clean errors\n</code></pre>\n\n<p>and you would add at the end of your <code>Makefile</code></p>\n\n<pre><code> errors: \n       $(MAKE) -k all\n</code></pre>\n\n<p>You should <strong>read the <a href=\"http://www.gnu.org/software/make/manual/html_node/index.html\" rel=\"nofollow\">documentation of GNU <code>make</code></a></strong></p>\n\n<p>BTW, you probably mean the rule:</p>\n\n<pre><code>binary: $(BIN)\n</code></pre>\n\n<p>and you should avoid naming your executable <code>test</code> (which is a builtin command in many shells, and also the standard <code>/usr/bin/test</code>)</p>\n"}], "owner": {"reputation": 1, "user_id": 3551723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55376f5147bfaad308a3141057da5766?s=128&d=identicon&r=PG&f=1", "display_name": "codebat", "link": "https://stackoverflow.com/users/3551723/codebat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1433178687, "creation_date": 1426078657, "last_edit_date": 1433178687, "question_id": 28987212, "link": "https://stackoverflow.com/questions/28987212/how-to-write-a-makefile-with-target-errors", "title": "How to write a makefile with target &quot;errors&quot;?", "body": "<p>I need to add the target <code>errors:</code> to my current makefile so that several different programs are all compiled with the compiler printing <strong>all</strong> possible occuring error messages, such as for example:</p>\n\n<pre><code> error: expected ';' before \n</code></pre>\n\n<p>In my current makefile, I already have the gcc flags <code>-Wall</code> and <code>-Wextra</code> set (for targets <code>all</code>, <code>debug</code>) - would this suffice in order to generate a complete output of error messages? </p>\n\n<p>Or is there a need to set target <code>errors</code> in a more specific way? </p>\n\n<p>edit: here is part of my current <code>Makefile</code>:</p>\n\n<pre><code>CC = gcc\nCFLAGS = -std=c99 -Wall -Wextra\n\nSRC = test.c // here I want to add more programs, how is this possible?\nBIN = test\n\nbinary: $(SRC)\n   $(CC) $(CFLAGS) -o $(BIN) $(SRC) $(LDFLAGS)\n\nall: binary\n</code></pre>\n"}, {"tags": ["c", "sockets", "gcc"], "comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1426078637, "post_id": 28987028, "comment_id": 46222822, "body": "There must be something you are not telling us. Just leaving out the <code>register</code> storage class does not lead to different code semantics. IOW the code works the same, with or without register. If it doesn&#39;t, your code was alreday broken (likely) or you compiler is broken (or the compile options) (unlikely)."}, {"owner": {"reputation": 13, "user_id": 4435810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c95c1b91fa948fc3cfbc387afcb1b7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4435810/ravi"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1426079585, "post_id": 28987028, "comment_id": 46223493, "body": "I am working on eclipse-cdt. In that I used int instead of register than error occurred like &quot;broken : piipe&quot;."}, {"owner": {"reputation": 13, "user_id": 4435810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c95c1b91fa948fc3cfbc387afcb1b7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4435810/ravi"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1426080484, "post_id": 28987028, "comment_id": 46224142, "body": "Yes Jens, Now I created same projects in eclipse-cdt, it is worked without register. But before that four times I tried than same error would occurred &quot;broken : pipe&quot;."}], "owner": {"reputation": 13, "user_id": 4435810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c95c1b91fa948fc3cfbc387afcb1b7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4435810/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426078117, "creation_date": 1426078117, "question_id": 28987028, "link": "https://stackoverflow.com/questions/28987028/register-storage-class-used-in-socket-programming-using-c", "title": "Register Storage Class used in Socket Programming using C", "body": "<p>What is the use of declaring file descriptor as register storage class in socket programming using c ?\nIf I am declared only int instead of register, then perror() returns \"broken pipe\". What is the meaning ?</p>\n\n<p>example : register int i, s, len;</p>\n\n<p>code copied from:\n<a href=\"http://www.cs.cf.ac.uk/Dave/C/node28.html#SECTION002800000000000000000\" rel=\"nofollow\">http://www.cs.cf.ac.uk/Dave/C/node28.html#SECTION002800000000000000000</a></p>\n\n<p>socket_server.c</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/un.h&gt;\n#include &lt;stdio.h&gt;\n\n#define NSTRS       3           /* no. of strings  */\n#define ADDRESS     \"mysocket\"  /* addr to connect */\n\n/*\n * Strings we send to the client.\n */\nchar *strs[NSTRS] = {\n    \"This is the first string from the server.\\n\",\n    \"This is the second string from the server.\\n\",\n    \"This is the third string from the server.\\n\"\n};\n\nmain()\n{\n    char c;\n    FILE *fp;\n    int fromlen;\n    register int i, s, ns, len;\n    struct sockaddr_un saun, fsaun;\n\n    /*\n     * Get a socket to work with.  This socket will\n     * be in the UNIX domain, and will be a\n     * stream socket.\n     */\n    if ((s = socket(AF_UNIX, SOCK_STREAM, 0)) &lt; 0) {\n        perror(\"server: socket\");\n        exit(1);\n    }\n\n    /*\n     * Create the address we will be binding to.\n     */\n    saun.sun_family = AF_UNIX;\n    strcpy(saun.sun_path, ADDRESS);\n\n    /*\n     * Try to bind the address to the socket.  We\n     * unlink the name first so that the bind won't\n     * fail.\n     *\n     * The third argument indicates the \"length\" of\n     * the structure, not just the length of the\n     * socket name.\n     */\n    unlink(ADDRESS);\n    len = sizeof(saun.sun_family) + strlen(saun.sun_path);\n\n    if (bind(s, &amp;saun, len) &lt; 0) {\n        perror(\"server: bind\");\n        exit(1);\n    }\n\n    /*\n     * Listen on the socket.\n     */\n    if (listen(s, 5) &lt; 0) {\n        perror(\"server: listen\");\n        exit(1);\n    }\n\n    /*\n     * Accept connections.  When we accept one, ns\n     * will be connected to the client.  fsaun will\n     * contain the address of the client.\n     */\n    if ((ns = accept(s, &amp;fsaun, &amp;fromlen)) &lt; 0) {\n        perror(\"server: accept\");\n        exit(1);\n    }\n\n    /*\n     * We'll use stdio for reading the socket.\n     */\n    fp = fdopen(ns, \"r\");\n\n    /*\n     * First we send some strings to the client.\n     */\n    for (i = 0; i &lt; NSTRS; i++)\n        send(ns, strs[i], strlen(strs[i]), 0);\n\n    /*\n     * Then we read some strings from the client and\n     * print them out.\n     */\n    for (i = 0; i &lt; NSTRS; i++) {\n        while ((c = fgetc(fp)) != EOF) {\n            putchar(c);\n\n            if (c == '\\n')\n                break;\n        }\n    }\n\n    /*\n     * We can simply use close() to terminate the\n     * connection, since we're done with both sides.\n     */\n    close(s);\n\n    exit(0);\n}\n</code></pre>\n\n<p>socket_client.c</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/un.h&gt;\n#include &lt;stdio.h&gt;\n\n#define NSTRS       3           /* no. of strings  */\n#define ADDRESS     \"mysocket\"  /* addr to connect */\n\n/*\n * Strings we send to the server.\n */\nchar *strs[NSTRS] = {\n    \"This is the first string from the client.\\n\",\n    \"This is the second string from the client.\\n\",\n    \"This is the third string from the client.\\n\"\n};\n\nmain()\n{\n    char c;\n    FILE *fp;\n    register int i, s, len;\n    struct sockaddr_un saun;\n\n    /*\n     * Get a socket to work with.  This socket will\n     * be in the UNIX domain, and will be a\n     * stream socket.\n     */\n    if ((s = socket(AF_UNIX, SOCK_STREAM, 0)) &lt; 0) {\n        perror(\"client: socket\");\n        exit(1);\n    }\n\n    /*\n     * Create the address we will be connecting to.\n     */\n    saun.sun_family = AF_UNIX;\n    strcpy(saun.sun_path, ADDRESS);\n\n    /*\n     * Try to connect to the address.  For this to\n     * succeed, the server must already have bound\n     * this address, and must have issued a listen()\n     * request.\n     *\n     * The third argument indicates the \"length\" of\n     * the structure, not just the length of the\n     * socket name.\n     */\n    len = sizeof(saun.sun_family) + strlen(saun.sun_path);\n\n    if (connect(s, &amp;saun, len) &lt; 0) {\n        perror(\"client: connect\");\n        exit(1);\n    }\n\n    /*\n     * We'll use stdio for reading\n     * the socket.\n     */\n    fp = fdopen(s, \"r\");\n\n    /*\n     * First we read some strings from the server\n     * and print them out.\n     */\n    for (i = 0; i &lt; NSTRS; i++) {\n        while ((c = fgetc(fp)) != EOF) {\n            putchar(c);\n\n            if (c == '\\n')\n                break;\n        }\n    }\n\n    /*\n     * Now we send some strings to the server.\n     */\n    for (i = 0; i &lt; NSTRS; i++)\n        send(s, strs[i], strlen(strs[i]), 0);\n\n    /*\n     * We can simply use close() to terminate the\n     * connection, since we're done with both sides.\n     */\n    close(s);\n\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 2437, "user_id": 734154, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11a507c170ee137d3c9606dfe744f6db?s=128&d=identicon&r=PG", "display_name": "Anon", "link": "https://stackoverflow.com/users/734154/anon"}, "edited": false, "score": 0, "creation_date": 1426077902, "post_id": 28986861, "comment_id": 46222302, "body": "Do you want to print the elements of the array too or you just want length?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1426077911, "post_id": 28986861, "comment_id": 46222305, "body": "Your program only allows the user to enter one value. You need a loop if you want to enter more than one value."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1426078099, "post_id": 28986861, "comment_id": 46222448, "body": "Can you use C++ or must your solution be strictly in C?"}, {"owner": {"reputation": 25, "user_id": 4598045, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10202979513483722/picture?type=large", "display_name": "JEl", "link": "https://stackoverflow.com/users/4598045/jel"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1426092873, "post_id": 28986861, "comment_id": 46233417, "body": "@TimBiegeleisen, strictly in C"}], "answers": [{"comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1426078841, "post_id": 28987057, "comment_id": 46222965, "body": "Your solution, which is very clever, would give you the total <b>number</b> of strings entered on the command line.  The problem just wants the length of the first string occurring before the first space.  So you need to find the <b>length</b> (not <code>sizeof</code>) of <code>argv[1]</code>.  Note that <code>argv[0]</code> is the name of the C program."}, {"owner": {"reputation": 584, "user_id": 4642538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a644d5166f1cbb8ce07d4b66d872df37?s=128&d=identicon&r=PG&f=1", "display_name": "sray", "link": "https://stackoverflow.com/users/4642538/sray"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1426079250, "post_id": 28987057, "comment_id": 46223239, "body": "The question says to find out the &quot;length of array&quot; of user inputs, not the length of the first input value. Please read the title of the question."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1426079981, "post_id": 28987057, "comment_id": 46223798, "body": "Here is what the question says: &quot;My program will find out length of array, until user input will be space. So if I have inserted &quot;10 20 300&quot;, the length will be 2.&quot;  Note carefully that the answer is <b>not</b> 3, which is what your code would attempt to give."}, {"owner": {"reputation": 584, "user_id": 4642538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a644d5166f1cbb8ce07d4b66d872df37?s=128&d=identicon&r=PG&f=1", "display_name": "sray", "link": "https://stackoverflow.com/users/4642538/sray"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1426082238, "post_id": 28987057, "comment_id": 46225493, "body": "See Mischo5500&#39;s answer too. Can the original author of this question please clarify which answer he wants? Thanks"}, {"owner": {"reputation": 25, "user_id": 4598045, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10202979513483722/picture?type=large", "display_name": "JEl", "link": "https://stackoverflow.com/users/4598045/jel"}, "edited": false, "score": 0, "creation_date": 1426092343, "post_id": 28987057, "comment_id": 46233045, "body": "i would like to find out length of whole array except space. Maybe the question is how much numbers are in array"}], "tags": [], "owner": {"reputation": 584, "user_id": 4642538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a644d5166f1cbb8ce07d4b66d872df37?s=128&d=identicon&r=PG&f=1", "display_name": "sray", "link": "https://stackoverflow.com/users/4642538/sray"}, "is_accepted": false, "score": -1, "last_activity_date": 1426078209, "creation_date": 1426078209, "answer_id": 28987057, "question_id": 28986861, "link": "https://stackoverflow.com/questions/28986861/how-to-find-out-how-much-numbers-are-in-array/28987057#28987057", "title": "How to find out how much numbers are in array", "body": "<p>You can take in the user inputs in the form of command-line arguments which get passed in to the program as </p>\n\n<pre><code>int main(int argc, char *argv[])\n</code></pre>\n\n<p>That will give you the entire length of arguments. You would convert each of the arguments argv[i] to numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 736, "user_id": 3627402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f75c0ada3b8c08b1419cdb39f5b0ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mischo5500", "link": "https://stackoverflow.com/users/3627402/mischo5500"}, "is_accepted": true, "score": 1, "last_activity_date": 1426084585, "last_edit_date": 1426084585, "creation_date": 1426080696, "answer_id": 28987964, "question_id": 28986861, "link": "https://stackoverflow.com/questions/28986861/how-to-find-out-how-much-numbers-are-in-array/28987964#28987964", "title": "How to find out how much numbers are in array", "body": "<p>If i tike it right (sorry if not), you want to calculate number of entered float values. It is easier for you to insert them in string format and convert them to float after processing, if you don't know number of arguments, that will be typed in. Here is how your code can look like for example, float numbers are in <code>val</code> variable, number of inserted values is in <code>length</code> variable.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main()\n{\n    char p[1000];\n    float val[1000];\n    int length = 0;\n    char* itr;\n\n    fgets(p, sizeof(p), stdin);\n\n    itr = strtok(p, \" \");\n    while(itr != NULL)\n    {\n        val[length] = atof(itr);\n        itr = strtok(NULL, \" \");\n        length++;\n    }\n\n    printf(\"%d\",length);\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: If you want \"length\" of first element, just use strlen() on first token</p>\n\n<pre><code>itr = strtok(p, \" \\n\");\nif(itr)\n{\n    length = strlen(itr);\n    val[length] = atof(itr);\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4598045, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10202979513483722/picture?type=large", "display_name": "JEl", "link": "https://stackoverflow.com/users/4598045/jel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 28987964, "answer_count": 2, "score": -4, "last_activity_date": 1426095846, "creation_date": 1426077572, "last_edit_date": 1426095846, "question_id": 28986861, "link": "https://stackoverflow.com/questions/28986861/how-to-find-out-how-much-numbers-are-in-array", "title": "How to find out how much numbers are in array", "body": "<p>EDIT : Ok,so answer was told by @Mischo5500. Thank you all,guys </p>\n\n<p>How to find out how much numbers are in array except space? My program will find out length of array, until user input will be space and that is the problem. So if I have inserted \"10 20 300\", the length will be 2. I have expected 3,like three numbers,which were inserted.And I don't know,how much numbers will user type in. I have already tried strlen(p),it was the same thing. Can you help me? Thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main()\n{\nfloat p[1000];\nscanf(\"%f\",p);\nint length=(sizeof(p)/sizeof(float));\nprintf(\"%d\",length);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "debugging", "design-patterns", "trace"], "comments": [{"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 1, "creation_date": 1426077476, "post_id": 28986426, "comment_id": 46222036, "body": "What about the fact that you don&#39;t actually return at all? i.e. your <code>return (ret)</code> is eaten up by the macro and turned into a <code>printf</code> and then the function doesn&#39;t have a return statement to execute. You&#39;re not returning in the macro."}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 1, "creation_date": 1426077523, "post_id": 28986426, "comment_id": 46222062, "body": "Watcom C supports <code>__FUNCTION__</code> macro."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1426077876, "post_id": 28986426, "comment_id": 46222287, "body": "Just in case you tested the existence of <code>__func__</code> via <code>#ifdef</code>: It isn&#39;t a macro, but a static array (as if it were declared with <code>static cosnt char __func__[] = &quot;...&quot;;</code> at the beginning of a function)."}, {"owner": {"reputation": 131, "user_id": 4587530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d649d34dba078c64a31a4554632befb?s=128&d=identicon&r=PG&f=1", "display_name": "evrdrkgrn0", "link": "https://stackoverflow.com/users/4587530/evrdrkgrn0"}, "edited": false, "score": 0, "creation_date": 1426078614, "post_id": 28986426, "comment_id": 46222807, "body": "@ArhujShankar yep, you are right. There should be return statement"}, {"owner": {"reputation": 131, "user_id": 4587530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d649d34dba078c64a31a4554632befb?s=128&d=identicon&r=PG&f=1", "display_name": "evrdrkgrn0", "link": "https://stackoverflow.com/users/4587530/evrdrkgrn0"}, "reply_to_user": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 0, "creation_date": 1426079337, "post_id": 28986426, "comment_id": 46223299, "body": "@user4419802  yes, at least google says so. But in version 11, but instead I have 10.6"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4587530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d649d34dba078c64a31a4554632befb?s=128&d=identicon&r=PG&f=1", "display_name": "evrdrkgrn0", "link": "https://stackoverflow.com/users/4587530/evrdrkgrn0"}, "edited": false, "score": 0, "creation_date": 1426080156, "post_id": 28986952, "comment_id": 46223927, "body": "looks for me like an option. Because I don&#39;t want to break return keyword. But what is disturbing, is that we need to write <code>END_FUNCTION</code> before each return."}], "tags": [], "owner": {"reputation": 3856, "user_id": 4188894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jj4yA.jpg?s=128&g=1", "display_name": "Gyapti Jain", "link": "https://stackoverflow.com/users/4188894/gyapti-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1426077871, "creation_date": 1426077871, "answer_id": 28986952, "question_id": 28986426, "link": "https://stackoverflow.com/questions/28986426/tracing-of-function-calls-in-c/28986952#28986952", "title": "Tracing of function calls in C", "body": "<pre><code>#if defined(DEBUG_BUILD)\n#  define START_FUNCTION if(trace_level &amp; LOG_FCALLS){writelog(\"+++ %s()\", __func__)\n   }\n#  define END_FUNCTION if(trace_level &amp; LOG_FCALLS){writelog(\"--- %s()\", __func__)\n#elif defined (TIMING_BUILD)\n#  define START_FUNCTION  WRITE_TIMED_LOG(\"+++\")\n#  define END_FUNCTION WRITE_TIMED_LOG(\"---\")\n#else\n#  define START_FUNCTION\n#  define END_FUNCTION\n#endif\nint function (int param){\n   START_FUNCTION;\n   ...\n   if(error_occurred) {\n     END_FUNCTION;\n     return errror_code;\n   }\n   ...\n   END_FUNCTION;\n   return 42;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1426079329, "post_id": 28987348, "comment_id": 46223294, "body": "&gt; hard-copy of the production code &lt;. Wow! Have you tried SCMs like SVN, Git, Mercurial?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1426080429, "post_id": 28987348, "comment_id": 46224101, "body": "@myaut That would be why I said &quot;make sure to have a backup/ <i>commit</i>&quot;. A commit is a hard-copy."}, {"owner": {"reputation": 131, "user_id": 4587530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d649d34dba078c64a31a4554632befb?s=128&d=identicon&r=PG&f=1", "display_name": "evrdrkgrn0", "link": "https://stackoverflow.com/users/4587530/evrdrkgrn0"}, "edited": false, "score": 0, "creation_date": 1426080898, "post_id": 28987348, "comment_id": 46224451, "body": "thats a great example of automation, I&#39;ll take a note.  It can be also a case, when we need a  trace log from the production system. For instance, for bugs that can be reproduced in real environment."}, {"owner": {"reputation": 25157, "user_id": 465408, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e184f0333df7c782abcad22359f9e695?s=128&d=identicon&r=PG", "display_name": "Hooch", "link": "https://stackoverflow.com/users/465408/hooch"}, "edited": false, "score": 0, "creation_date": 1426083591, "post_id": 28987348, "comment_id": 46226572, "body": "That is what I did for my hardware project with very limited debugger. I wrote my &quot;Debug code inserter&quot; program in C#. It was under 100 lines of code."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 25157, "user_id": 465408, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e184f0333df7c782abcad22359f9e695?s=128&d=identicon&r=PG", "display_name": "Hooch", "link": "https://stackoverflow.com/users/465408/hooch"}, "edited": false, "score": 0, "creation_date": 1426087963, "post_id": 28987348, "comment_id": 46229878, "body": "@Hooch Indeed, writing such a program shouldn&#39;t be much of a challenge for a programmer, and you can do it any language you want. Programmers sometimes forget that they are able to solve their programming problems by using programming :)"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 5, "last_activity_date": 1426079020, "creation_date": 1426079020, "answer_id": 28987348, "question_id": 28986426, "link": "https://stackoverflow.com/questions/28986426/tracing-of-function-calls-in-c/28987348#28987348", "title": "Tracing of function calls in C", "body": "<p>The super-serious, professional way to do this is to make a separate debug/test project, which is separate from the production code entirely. It goes like this:</p>\n\n<ul>\n<li>Make sure to have a backup/commit on the production code.</li>\n<li>Make a hard-copy of the production code on the hard drive. This will become your test project.</li>\n<li><p>Create a .txt log file where you write the full signature of each function you want to log, for example:</p>\n\n<pre><code>int function (int param)\nfloat function2 (void)\n...\n</code></pre></li>\n<li>Create a little PC program/script that takes the above .txt file as input, then searches through the source code for matching lines of function definitions. The PC program will then generate a new .c file based on the original code, where it inserts the debug logging code inside the desired functions, after <code>{</code> and before <code>}</code>. It will take a few hours of your time to make such a program.</li>\n<li>Link your test project by using the modified source code created by your script.</li>\n</ul>\n\n<p>The above method is how I do it myself on mission-critical software, where you have requirements from safety standards (MISRA, code coverage etc) saying that no code which is not executed in the final product is allowed.</p>\n\n<p>This method ensures the integrity of the production code and guarantees that no accidental bugs are added to the program by the test/debug code. It also leaves the clutter of compile switches etc out of the production code. And you won't have any old debug code remains in your project that you forgot to delete (otherwise I <em>always</em> forget some snippet of debug code somewhere in my programs).</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1426092027, "last_edit_date": 1426092027, "creation_date": 1426079090, "answer_id": 28987376, "question_id": 28986426, "link": "https://stackoverflow.com/questions/28986426/tracing-of-function-calls-in-c/28987376#28987376", "title": "Tracing of function calls in C", "body": "<p>This works in MS Visual C. You will need different versions of the <code>return</code> macro for different data types (or none).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TRACING\n\n#ifdef TRACING\n#define LOG_E printf(\"Func: %s\\n\", __FUNCTION__);\n#define LOG_R printf(\"Exit: %s\\n\", __FUNCTION__);\n#define LOG_I(ival) printf(\"Exit: %s %d\\n\", __FUNCTION__, ival);\n\n#else\n#define LOG_E\n#define LOG_R\n#define LOG_I(ival)\n#endif\n\nint main(void){\n    int retval = 0;\n    LOG_E\n    printf(\"Hello world!\\n\");\n    LOG_I(retval)\n    return retval;\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Func: main\nHello world!\nExit: main 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1426079911, "creation_date": 1426079911, "answer_id": 28987680, "question_id": 28986426, "link": "https://stackoverflow.com/questions/28986426/tracing-of-function-calls-in-c/28987680#28987680", "title": "Tracing of function calls in C", "body": "<p>You might customize your compiler to handle that. You could use <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> (to customize your <code>gcc</code> compiler) if you are compiling with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a>.</p>\n\n<p>Maybe you might customize <a href=\"http://www.openwatcom.org/index.php/Main_Page\" rel=\"nofollow\">openwatcom</a> (or pay some <em>OpenWatcom</em> expert to do that)...</p>\n"}], "owner": {"reputation": 131, "user_id": 4587530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d649d34dba078c64a31a4554632befb?s=128&d=identicon&r=PG&f=1", "display_name": "evrdrkgrn0", "link": "https://stackoverflow.com/users/4587530/evrdrkgrn0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2409, "favorite_count": 2, "answer_count": 4, "score": 8, "last_activity_date": 1426092027, "creation_date": 1426076281, "question_id": 28986426, "link": "https://stackoverflow.com/questions/28986426/tracing-of-function-calls-in-c", "title": "Tracing of function calls in C", "body": "<p>I'm developing some modules for an automation system written in C and I need to perform lots of work with hardware. And I see no simple way (like traditional) to debugging things instead of trace logs. So I'm looking for a good practice to log function calls. At least the sequence of calls and return values.</p>\n\n<p>The way it is performed in application is quite straightforward and actually pollutes the code with irrelevant constructions like</p>\n\n<pre><code>int function (int param){\n   if(trace_level &amp; LOG_FCALLS){\n      writelog(\"Entering function()\");\n   }\n\n   /* something useful */\n\n   if(trace_level &amp; LOG_FCALLS){\n      writelog(\"Exit from function()=%d\", ret);\n   }\n}\n</code></pre>\n\n<p>I decided to use a macro that will do all the dirty work. Now it looks like this</p>\n\n<pre><code>#define LOG_E(fn) const char *__fname=fn;  printf(\"LOG: Entry to %s\\n\",__fname)\n#define return(ret)     printf(\"LOG: Exit from %s()=%d\\n\",__fname,ret)\n\nint testFunc(){\n   LOG_E(\"testFunc\");\n\n   /*do useful things */\n\n   return(ret);\n}\n</code></pre>\n\n<p>I see the problems with this code</p>\n\n<ol>\n<li><p>I'm overriding return statement, and it is requires to write <code>return(ret)</code> all the time instead of <code>return ret</code>. It is easy to forget this issue.</p></li>\n<li><p>I'm defining string variable within my macro. I'm aware that <code>__func__</code> macro exists in C99, but my compiler, unfortunately, doesn't support this macro or any other relevant macros.</p></li>\n<li><p>How to log the values of function arguments?</p></li>\n</ol>\n\n<p>I'm pretty sure that it is not a new problem and I'm not the first one who faced with it. I'm also aware about AOP thing, but the code instrumentation is not acceptable solution for my system and I haven't found any possibility to do it with my compiler.</p>\n\n<p>So I'm looking for a good ideas how to implement tracing in the most elegant way.</p>\n\n<p>My environment:\nLegacy code, C, Watcom 10.x, real-time OS</p>\n"}, {"tags": ["c", "gets"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1426075895, "post_id": 28986265, "comment_id": 46221052, "body": "<code>length</code> is neither declared nor initialized."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1426075920, "post_id": 28986265, "comment_id": 46221064, "body": "Why not simply use <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> and <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>strtol</code></a>?"}, {"owner": {"reputation": 1326, "user_id": 2053269, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tAccL.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2053269/anshul"}, "edited": false, "score": 1, "creation_date": 1426075978, "post_id": 28986265, "comment_id": 46221106, "body": "use atoi function to convert from string to integer"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1426076823, "post_id": 28986265, "comment_id": 46221619, "body": "OT: Do not use <code>gets()</code> as it does not provide any way to avoid buffer overflows. Use <code>fgets()</code> instead. <code>gets()</code> isn&#39;t even part of C anymore."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1426076750, "post_id": 28986334, "comment_id": 46221563, "body": "The use of <code>strtol()</code> is preferred over <code>atoi()</code>, as <code>atoi()</code> does not provide usefull error checking."}], "tags": [], "owner": {"reputation": 3489, "user_id": 1350184, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EQnef.jpg?s=128&g=1", "display_name": "tversteeg", "link": "https://stackoverflow.com/users/1350184/tversteeg"}, "is_accepted": true, "score": 3, "last_activity_date": 1426077851, "last_edit_date": 1426077851, "creation_date": 1426076008, "answer_id": 28986334, "question_id": 28986265, "link": "https://stackoverflow.com/questions/28986265/converting-gets-string-into-an-integer-in-c/28986334#28986334", "title": "Converting gets() string into an integer in C", "body": "<p>Instead of using your own method to do this, there are a number of utilities in the standard library. Take a look at <code>strol</code> and <code>sscanf</code>. It's also wise to use <code>fgets</code> instead of <code>gets</code> as pointed out in the comments above.</p>\n\n<h2><strong>Example</strong></h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\n    char s[1000];\n    int n = 0;\n    printf(\"Input the number you wish to have converted\\n\");//asks the user to enter the number they want converted\n    fgets(s, sizeof(s), stdin);//reads the input\n\n    n = (int)strol(s, NULL, 10);\n    printf(\"Number from strol: %d\\n\", n);\n\n    sscanf(s, \"%d\", &amp;n);\n    printf(\"Number from sscanf: %d\\n\", n);\n}\n</code></pre>\n\n<p>You can even bypass <code>fgets</code> and use <code>scanf</code> if you don't want to keep the string:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int n;\n    scanf(\"%d\", &amp;n);\n    printf(\"Number from scanf: %d\\n\", n);\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 4134278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1660159104/picture?type=large", "display_name": "Julien Powell", "link": "https://stackoverflow.com/users/4134278/julien-powell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4666, "favorite_count": 0, "accepted_answer_id": 28986334, "answer_count": 1, "score": 1, "last_activity_date": 1426079605, "creation_date": 1426075732, "last_edit_date": 1426079605, "question_id": 28986265, "link": "https://stackoverflow.com/questions/28986265/converting-gets-string-into-an-integer-in-c", "title": "Converting gets() string into an integer in C", "body": "<p>I am trying to write code that reads a string of numbers using <code>gets()</code> and then converts said string into an integer. However something is going wrong with my conversion and I can't figure out what.\nI also have to use <code>gets()</code> to do this.\nIf anyone can see whats wrong or knows a better way to do this please help.</p>\n\n<p>Thanks.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint main()\n{\n   char s[1000];\n   int n = 0;\n   printf(\"Input the number you wish to have converted\\n\");//asks the user to enter the number they want converted\n   gets(s);//reads the input\n\n   for (int i = 0; i &lt; length; i++)\n   {\n      char temp = s[i] - '0';\n      n = n + pow(10, length - i - 1) * temp;//converts from a character array to an integer for decimal to binary conversion\n   }\n}\n</code></pre>\n"}, {"tags": ["c", "bit-fields"], "comments": [{"owner": {"reputation": 1439, "user_id": 3717347, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/rUWzF.jpg?s=128&g=1", "display_name": "lychee", "link": "https://stackoverflow.com/users/3717347/lychee"}, "edited": false, "score": 1, "creation_date": 1426076771, "post_id": 28985776, "comment_id": 46221579, "body": "Note:in C you cant have array of bits. the bool type is defined as an int or short int anyway."}], "answers": [{"tags": [], "owner": {"reputation": 1711, "user_id": 4482870, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08f811d612378f1949b43749a57bb11a?s=128&d=identicon&r=PG&f=1", "display_name": "tonso", "link": "https://stackoverflow.com/users/4482870/tonso"}, "is_accepted": false, "score": 1, "last_activity_date": 1426077512, "last_edit_date": 1426077512, "creation_date": 1426076350, "answer_id": 28986454, "question_id": 28985776, "link": "https://stackoverflow.com/questions/28985776/c-bit-field-array/28986454#28986454", "title": "C bit field/array", "body": "<p>In C you can declare a typedef only for fixed-size array, like this:</p>\n\n<pre><code>typedef bool bitset8[8]; // 8 is constant expression\nbitset8 bs8;\nbs8[0] = true;\n</code></pre>\n\n<p>I don't quite understand how exactly <code>create</code> macro from your post is going to be used, but if you need to dynamically change number of fields you have to use malloc'ed objects <em>ANYWAY</em>, so the declaration of <code>BitArray</code> struct should contain a pointer to let's say <code>unsigned char</code> (that is a pointer to byte array essentially). The content of the array should be managed by separate functions, that may be called from macros (though there is no real need in them).</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1426076522, "last_edit_date": 1495540253, "creation_date": 1426076522, "answer_id": 28986525, "question_id": 28985776, "link": "https://stackoverflow.com/questions/28985776/c-bit-field-array/28986525#28986525", "title": "C bit field/array", "body": "<blockquote>\n  <p>The question is how can I typedef bitfield so I could change number of its members later?</p>\n</blockquote>\n\n<p>That's what the <code>typedef struct ... BitArray</code> does. No need for additional types. </p>\n\n<p>A bool array will most likely not compile into bit-wise code, it will likely compile into an array of bytes, which is not what you want.</p>\n\n<p>In addition, it is a very bad idea to hide arrays or pointers behind typedefs, so that they don't look like arrays or pointers no longer.</p>\n\n<hr>\n\n<p>Some recommendations:</p>\n\n<blockquote>\n  <p>I have to define type for bitfield</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/6043483/why-bit-endianness-is-an-issue-in-bitfields/6044223#6044223\">I would not recommend to use bit fields for any purpose what-so-ever</a>. You should question your teacher why they are teaching you to use dangerous and poorly specified parts of the C language.</p>\n\n<blockquote>\n  <p>But next task is to do set of macros for working with bitfield</p>\n</blockquote>\n\n<p>You should ask your teacher why they teach you to use function-like macros and not proper functions. Using a function-like macro might be the worst thing you can ever do in C: they are dangerous, they are unreadable, they are hard to debug, they are hard to maintain. </p>\n\n<p>Combining function-like macros mixed with bit-fields seems like a <em>really</em> stupid idea, but of course that is just my personal opinion. The safe and 100% portable way is to use bit-wise operators with masks on byte-level variables, such as:</p>\n\n<pre><code>uint8_t my_var=0;\nmy_var |= 0x80; // set msb, bit 7\nmy_var &amp;= ~0x80; // clear msb, bit 7\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4657932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55173fcf8d565aa4ad7a676333b863ab?s=128&d=identicon&r=PG&f=1", "display_name": "DavS", "link": "https://stackoverflow.com/users/4657932/davs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1426077512, "creation_date": 1426074283, "question_id": 28985776, "link": "https://stackoverflow.com/questions/28985776/c-bit-field-array", "title": "C bit field/array", "body": "<p>I have to do a project for school. But I got stuck right at the beginning.</p>\n\n<p>I have to define type for bitfield. It isn't a problem, it would look like this:</p>\n\n<pre><code>typedef struct {\n   unsigned flag1 : 1;\n   unsigned flag2 : 1;\n}BitArray;\n</code></pre>\n\n<p>But next task is to do set of macros for working with bitfield. One of them is:</p>\n\n<pre><code>create(field_name,size) /* defines and initializes bitfield */\n</code></pre>\n\n<p>The question is how can I typedef bitfield so I could change number of its members later?</p>\n\n<p>Second method that came to my mind is to use bool array. But again, how can I typedef bool array? At frist I tried:</p>\n\n<pre><code>typedef bool BitArray[]; //new identifier BitArray for bool array\nBitArray Array[5];      //new BitArray variable Array - this line would be in the macro mentioned above\n</code></pre>\n\n<p>It didn't take me a long time to realise that it won't work. However I can do:</p>\n\n<pre><code>typedef bool BitArray;\nBitArray Array[5];\n</code></pre>\n\n<p>But it just ranames identifier for bool.</p>\n\n<p>I hope my post makes sense and thank you for any advise you can give.</p>\n"}, {"tags": ["c", "networking", "udp", "sendto"], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1426074361, "last_edit_date": 1495541574, "creation_date": 1426074055, "answer_id": 28985709, "question_id": 28985637, "link": "https://stackoverflow.com/questions/28985637/c-how-to-send-char-array-of-bytes-over-udp-that-contain-multiple-0-bytes/28985709#28985709", "title": "C - How to send char array of bytes over UDP that contain multiple 0 bytes?", "body": "<p>Don't use <code>strlen()</code> if your string contains valid <code>'\\0'</code> characters. I suggest you change:</p>\n\n<pre><code>int te = sendto(s, message, strlen(message), 0, (struct sockaddr *) &amp; si_other, slen);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>int te = sendto(s, message, sizeof(message), 0, (struct sockaddr *) &amp; si_other, slen);\n</code></pre>\n\n<p>Also note that you should not be using <a href=\"http://linux.die.net/man/3/gets\" rel=\"nofollow noreferrer\">gets()</a>, as it is <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-dangerous-why-should-it-not-be-used\">unsafe</a> - use <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\">fgets()</a> instead. Change:</p>\n\n<pre><code>gets(message);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>fgets(message, sizeof(message), stdin);\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4604778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e14a2bec95a64a1f6f07a9578f8c93b?s=128&d=identicon&r=PG&f=1", "display_name": "rakanishu", "link": "https://stackoverflow.com/users/4604778/rakanishu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4062, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1426074361, "creation_date": 1426073851, "question_id": 28985637, "link": "https://stackoverflow.com/questions/28985637/c-how-to-send-char-array-of-bytes-over-udp-that-contain-multiple-0-bytes", "title": "C - How to send char array of bytes over UDP that contain multiple 0 bytes?", "body": "<p>I've been trying to send a custom frame over UDP using the sendto() commands to another PC. Works fine but as soon as there is a 0 byte in the array it will (ofcourse) recognize it as a \\0 value and stop at that byte. How do can I bypass this to then send a 0-Byte (0x00) over the network.</p>\n\n<pre><code>char buffer[26] = {0x06, 0x10, 0x02,\n0x05, 0x00, 0x1a, 0x08, 0x01, 0xc0,\n0xa8, 0x7e, 0x80, 0x0e, 0x58, 0x08,\n0x01, 0xc0, 0xa8, 0x7e, 0x80, 0x0e,\n0x58, 0x04, 0x04, 0x02, 0x00};\n\nprintf(\"Enter port # to listen to: \\n\");\nint PORT;\nscanf(\"%d\", &amp;PORT);\nprintf(\"Enter IP Address to send to: \\n\");\nchar SERVER[20];\nscanf(\"%s\", SERVER);\n\nstruct sockaddr_in si_other;\nint s, slen=sizeof(si_other);\nchar buf[26];\nchar message[26];\nif ((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1) {\n    die (\"socket()\");\n}\n\nmemset((char *) &amp;si_other, 0, sizeof(si_other));\nsi_other.sin_family = AF_INET;\nsi_other.sin_port = htons(PORT);\n\nif (inet_aton(SERVER, &amp;si_other.sin_addr) == 0) {\n    fprintf(stderr, \"inet_aton() failed\\n\");\n    exit(1);\n}\n\nwhile(1) {\n    printf(\"Enter message: \");\n    gets(message);\n    memcpy(message, buffer, 26);\n\n    int te = sendto(s, message, strlen(message), 0,     (struct sockaddr *) &amp; si_other, slen);\n    //Send message\n    if ( te == -1) {\n        die(\"sendto()\");\n    }\n\n    //Receive reply and print\n    memset(buf,'\\0', BUFLEN);\n\n    //Receive Data, blocking\n    if(recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &amp; si_other, &amp; slen) == -1) {\n        die(\"receive()\");\n    }\n    puts(buf);\n}\n\nclose(s);\nreturn 0;\n</code></pre>\n\n<p>As you see in the above defined array I have a 0x00 byte at place 5. Sendto will only send the first 4 bytes.</p>\n"}, {"tags": ["c++", "c", "visual-c++", "c4127"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 8, "creation_date": 1426073663, "post_id": 28985515, "comment_id": 46219617, "body": "@Bathsheba: but <code>for(;;)</code> has not the same meaning as <code>do{</code>...<code>}while(0)</code> !!!!"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1426073750, "post_id": 28985515, "comment_id": 46219671, "body": "Well if MSVC supported C11(<i>which it does not</i>) then the warning would not make much sense since C11 has a specific exception for <a href=\"http://stackoverflow.com/a/28681034/1708801\">constant expressions as the controlling expression to prevent optimizing away infinite loops</a> I realize this is the opposite case but still applies."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 6, "creation_date": 1426073911, "post_id": 28985515, "comment_id": 46219807, "body": "Remove the <code>pragma</code> and <a href=\"https://alfps.wordpress.com/the-no_sillywarnings_please-h-file/\" rel=\"nofollow noreferrer\">#include &quot;no_sillywarnings_please.h&quot;</a>"}, {"owner": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "edited": false, "score": 0, "creation_date": 1426074325, "post_id": 28985515, "comment_id": 46220063, "body": "Is <code>for(;;) {...; break; }</code> so ugly? Anyway, in C++11 this kind of construct can mostly be avoided by using a lambda."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "edited": false, "score": 2, "creation_date": 1426074407, "post_id": 28985515, "comment_id": 46220117, "body": "@GiulioFranco: It doesn&#39;t solve what <code>do { ... } while(0)</code> solves. <code>if(foo) for(;;) { ...; break; }; else bar();</code> is a syntax error."}, {"owner": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426074631, "post_id": 28985515, "comment_id": 46220257, "body": "@mafso then I guess what remains are lambdas and block expressions (for C)"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1426074746, "post_id": 28985515, "comment_id": 46220329, "body": "@AlterMann Thanks. This looks really good. Though I&#39;m afraid if review team will pass it."}, {"owner": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "edited": false, "score": 0, "creation_date": 1426075015, "post_id": 28985515, "comment_id": 46220516, "body": "block expressions (Statement Expressions) are a gcc extension. So I guess you need to disable it for C code."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1426075279, "post_id": 28985515, "comment_id": 46220678, "body": "<i>&quot;Moreover I don&#39;t get a warning C4127 for code like below:&quot;</i> That&#39;s TRWTF."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1426075444, "post_id": 28985515, "comment_id": 46220777, "body": "@LightnessRacesinOrbit My point is: C4127 or some other warning for that piece of code could have been helpful instead of a useless warning that introduces uglyness in the code just to please the compiler."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1426075527, "post_id": 28985515, "comment_id": 46220832, "body": "@Mohit: Yes, although be aware that the warnings are produced on the preprocessed code. Just because the macro trick is considered &quot;valid&quot; doesn&#39;t mean that the code it produces is decent; indeed, it&#39;s really not."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1426075895, "post_id": 28985515, "comment_id": 46221051, "body": "@LightnessRacesinOrbit You made a point here. But I believe compiler writers should better process the code often used. I work on many projects that are full of such multi-line macros."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1426076349, "post_id": 28985515, "comment_id": 46221316, "body": "@Mohit: I&#39;m sorry to hear that."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426076385, "post_id": 28985515, "comment_id": 46221340, "body": "What about <code>if(sizeof(long) == 8) { ... } else { ... }</code>? I would consider this OK. (Looking for more false positives is the opposite of what is asked here, but may help to decide how useful the warning is in general.) And for the macro: Does MSVC recognize the <code>if(1) ...; else</code> idiom?"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1426076529, "post_id": 28985515, "comment_id": 46221440, "body": "@mafso <code>do { ... } while(sizeof pszName == 1023)</code> or <code>sizeof(int) == 1023</code> generates the same warning."}, {"owner": {"reputation": 2859, "user_id": 1974659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/070e75c5741ed955ab73806f95925fe9?s=128&d=identicon&r=PG", "display_name": "Boyko Perfanov", "link": "https://stackoverflow.com/users/1974659/boyko-perfanov"}, "edited": false, "score": 1, "creation_date": 1426082159, "post_id": 28985515, "comment_id": 46225419, "body": "Is there any advantage of using do{ }while(0), rather than just creating a local scope { } ? It looks like a weird and needlessly complicated construct."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 2859, "user_id": 1974659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/070e75c5741ed955ab73806f95925fe9?s=128&d=identicon&r=PG", "display_name": "Boyko Perfanov", "link": "https://stackoverflow.com/users/1974659/boyko-perfanov"}, "edited": false, "score": 2, "creation_date": 1426082913, "post_id": 28985515, "comment_id": 46226053, "body": "@BoykoPerfanov <code>#define ABC(X) {something;}</code> will fail compilation if called as: <code>if(cond) ABC(42); else {}</code>"}, {"owner": {"reputation": 3856, "user_id": 4188894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jj4yA.jpg?s=128&g=1", "display_name": "Gyapti Jain", "link": "https://stackoverflow.com/users/4188894/gyapti-jain"}, "edited": false, "score": 2, "creation_date": 1426144296, "post_id": 28985515, "comment_id": 46254208, "body": "No, I guess it is never helpful. BTW owls are cute."}, {"owner": {"reputation": 185, "user_id": 3282085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16720da2a470091bb28232d85434c332?s=128&d=identicon&r=PG&f=1", "display_name": "user3282085", "link": "https://stackoverflow.com/users/3282085/user3282085"}, "edited": false, "score": 0, "creation_date": 1426192002, "post_id": 28985515, "comment_id": 46282908, "body": "You should use (double underscore) &lt;pre&gt;__pragma&lt;/pre&gt; (<a href=\"https://msdn.microsoft.com/en-us/library/d9x1s805.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a>) inside of a macro instead of the traditional #pragma.  Also you can do while(&lt;pre&gt;__LINE__&lt;/pre&gt; == 0) and not get the warning."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 185, "user_id": 3282085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16720da2a470091bb28232d85434c332?s=128&d=identicon&r=PG&f=1", "display_name": "user3282085", "link": "https://stackoverflow.com/users/3282085/user3282085"}, "edited": false, "score": 2, "creation_date": 1426522802, "post_id": 28985515, "comment_id": 46396650, "body": "@user3282085: Why should you use <code>__pragma</code>? That&#39;s Microsoft-specific, and will probably cause your code to fail to compile with any other compiler. <code>while (__LINE__) == )</code> might happen to avoid the warning, but there&#39;s no fundamental reason it should; if you use that workaround, it should be clearly commented. Avoid confusing future readers."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426665568, "post_id": 28985515, "comment_id": 46461282, "body": "@mafso: But <code>if(foo) for(;;) { ...; break; } else bar();</code> is not a syntax error (I just removed your erroneous semicolon)."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 1, "creation_date": 1426674828, "post_id": 28985515, "comment_id": 46466200, "body": "@TonyK, the semicolon is there because you want your macro invocation to look like a statement from a usual function call. <code>#define FOO(x) do { foo(x); } while(0)</code> makes <code>if(x) FOO(x); &#47;* note semicolon *&#47; else bar();</code> possible."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426678701, "post_id": 28985515, "comment_id": 46468634, "body": "@mafso: Ah, now I see. Sorry!"}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 1, "creation_date": 1435905844, "post_id": 28985515, "comment_id": 50403602, "body": "I wonder if <code>while(1) { &#47;* ... *&#47; }</code> gives the warning..."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 1, "creation_date": 1435909955, "post_id": 28985515, "comment_id": 50405801, "body": "@ace As a matter of fact it does"}], "answers": [{"comments": [{"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 3, "creation_date": 1426677888, "post_id": 29081784, "comment_id": 46468144, "body": "From the examples given so far, it looks like the warning is triggered for constant expressions only (not for non-constant constructs which can be constant-folded), so it isn&#39;t emitted for <code>if(x != NULL)</code>. Otherwise, why isn&#39;t it triggered for <code>if(0,0)</code>?"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 3, "last_activity_date": 1426522692, "creation_date": 1426522692, "answer_id": 29081784, "question_id": 28985515, "link": "https://stackoverflow.com/questions/28985515/is-warning-c4127-conditional-expression-is-constant-ever-helpful/29081784#29081784", "title": "is `warning C4127` (conditional expression is constant) ever helpful?", "body": "<p>A warning that a conditional expression is constant certainly <em>can</em> be useful. It can, in many cases, point to a logical error in your code.</p>\n\n<p>For example, if you write something like:</p>\n\n<pre><code>if (x != NULL) { /* ... */ }\n</code></pre>\n\n<p>where <code>x</code> is an array object, the expression is valid, but the expression <code>x</code> decays to a pointer to the array's initial element, which <em>cannot</em> be a null pointer. I don't know whether that produces the same error, but it's an example of the same kind of thing.</p>\n\n<p>Of course it isn't <em>always</em> useful. In your case, the</p>\n\n<pre><code>do { /* ... */ } while (0)\n</code></pre>\n\n<p>idiom is the best way to write a macro definition that's intended to be used in a context that requires a statement. Using <code>while (0)</code> in another context is likely to be a logical error [*].</p>\n\n<p>It's unfortunate that your compiler doesn't recognize it as a common idiom. Generating good warnings is tricky; the compiler has to go beyond the rules of the language and infer the programmer's intent.</p>\n\n<p>In this case, using some compiler-specific method to suppress the warning (as long as it doesn't break the code for other compilers) is probably the best approach. Using a command-line option to suppress the warning in all cases would be overkill; you could miss valid warnings elsewhere in your code.</p>\n\n<p>Apparently writing <code>while (0,0)</code> rather than <code>while (0)</code> avoids the warning. If you do that, you should add a comment clearly indicating that it's a workaround for your particular compiler. There's no particular reason a compiler shouldn't warn about <code>while (0,0)</code> or any other equivalent code.</p>\n\n<p>[*] It can make sense to write a <code>do { /* ... */ } while (0)</code> statement if you want to be able to use <code>break</code> to jump out of it.</p>\n"}, {"tags": [], "owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "is_accepted": true, "score": 5, "last_activity_date": 1426677744, "creation_date": 1426677744, "answer_id": 29120721, "question_id": 28985515, "link": "https://stackoverflow.com/questions/28985515/is-warning-c4127-conditional-expression-is-constant-ever-helpful/29120721#29120721", "title": "is `warning C4127` (conditional expression is constant) ever helpful?", "body": "<p>I don't think it is ever useful. On the contrary, there are more false positives than only the <code>do .. while(0)</code> idiom. Think of constructs like</p>\n\n<pre><code>if(sizeof(long) == 8) { /* ... */ }\nif(SOME_CONSTANT_MACRO) { /* ... */ }\n</code></pre>\n\n<p>The former cannot be replaced by <code>#if</code> directives, the latter could, but some coding style guidelines prefer the <code>if</code> version as syntax checking is still done for the dead code (which isn't dead on other platforms or with other compile-time configuration) and some find it nicer to read.</p>\n\n<p>Warnings (other than those required by the standard, most of which should be treated as errors) are usually emitted for code that is valid but is likely to do something else than what's intended. <code>if(0)</code> or things like this look silly, but don't look as if something other than \"syntax check this otherwise dead code\" was intended. It may puzzle the reader, but it's unambiguous, and I don't see how this could happen accidentally.</p>\n\n<p>From the examples given thus far (I haven't got MSVC to test on my own), it seems like the warning is for constant expressions in the sense of the C language (that is, not something which can be constant-folded but syntactically isn't a constant expression), so it isn't emitted for <code>if(array)</code>, or <code>if(function)</code> (what e.g. <code>gcc -Wall</code> does warn about because it's likely intended to be a function call).</p>\n\n<p><code>while(0,0)</code> is worse, in my opinion, it triggers a warning with <code>gcc -Wall</code> for a left-hand side of a comma operator without side-effects, a warning I can imagine to be occasionally useful (and which usually is easy to avoid). This warning disappears with <code>while((void)0,0)</code>.</p>\n\n<p>I suggest turning the warning off.</p>\n"}], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3647, "favorite_count": 0, "accepted_answer_id": 29120721, "answer_count": 2, "score": 17, "last_activity_date": 1426679111, "creation_date": 1426073480, "last_edit_date": 1495535466, "question_id": 28985515, "link": "https://stackoverflow.com/questions/28985515/is-warning-c4127-conditional-expression-is-constant-ever-helpful", "title": "is `warning C4127` (conditional expression is constant) ever helpful?", "body": "<p>While answering <a href=\"https://stackoverflow.com/questions/25801230/explanation-needed-for-this-pre-processor-directive-c-c/25801260#25801260\">this</a> post, I suggested using <code>do {...} while(0)</code> for multiline macros. </p>\n\n<p>On MSVC, I found this code throws up:</p>\n\n<pre><code>warning C4127: conditional expression is constant\n</code></pre>\n\n<p>To make code warning-free, I need to choose one of these ugly alternatives:</p>\n\n<p><strong>Option 1</strong><BR></p>\n\n<pre><code>#ifdef _MSC_VER\n#pragma warning(push)\n#pragma warning(disable:4127)\n#endif\ncode_using_macro_that_generates_C4217;\n#ifdef _MSC_VER\n#pragma warning(pop)\n#endif\n</code></pre>\n\n<p><strong>Option 2</strong><BR>\nDefine my macros as:</p>\n\n<pre><code>#define MULTI_LINE_MACRO do { ... } while(0,0)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#define MULTI_LINE_MACRO do { ... } while((void)0,0)\n</code></pre>\n\n<p>Also called an \"owl\" by some programmers as <code>(0,0)</code> looks like an owl.</p>\n\n<p><strong>Option 3</strong><BR>\nDefine a new macro WHILE_0 which does not generate a warning and use it instead of <code>while(0)</code></p>\n\n<p><strong>Problem</strong><BR>\nI believe all alternatives are more or less horrible. Why does MSVC generate this warning for seemingly correct code and motivate me to add some ugliness to my code to keep the code warning free?</p>\n\n<p>I believe constant expressions in conditionals are perfectly valid and useful, in particular in constructs based on the compiler's ability to optimize out code.</p>\n\n<p>Moreover I don't get a <code>warning C4127</code> for code like this:</p>\n\n<pre><code>void foo(unsigned bar)\n{\n    while (bar &gt;= 0)\n        ;\n} \n</code></pre>\n\n<p>My question is: Isn't <code>warning C4127: conditional expression is constant</code> completely useless and doesn't it motivate ugly code? Does this warning ever help writing better code?</p>\n"}, {"tags": ["c++", "c", "sqlite"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426072974, "post_id": 28985247, "comment_id": 46219214, "body": "You are the one doing the query, don&#39;t you already know <i>what</i> table you&#39;re querying?"}, {"owner": {"reputation": 513, "user_id": 3402332, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1497014347/picture?type=large", "display_name": "overlii", "link": "https://stackoverflow.com/users/3402332/overlii"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426073121, "post_id": 28985247, "comment_id": 46219298, "body": "Well the user of the software can enter his own queries and we have objects watching changes in the tables involved in this user defined queries. So I want to exctract the table names from the query."}, {"owner": {"reputation": 15167, "user_id": 16827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/xMFTQ.png?s=128&g=1", "display_name": "Remo.D", "link": "https://stackoverflow.com/users/16827/remo-d"}, "edited": false, "score": 0, "creation_date": 1426074272, "post_id": 28985247, "comment_id": 46220027, "body": "Having the user entering a generic, uncontrolled SQL query doesn&#39;t seems a good idea to me, unless you have a very limited, absoutely trusted and knowledgable users.  A better idea would be to have the user specifying his own selection criteria and build the query dinamically ensure is a valid and non-harmful query."}, {"owner": {"reputation": 513, "user_id": 3402332, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1497014347/picture?type=large", "display_name": "overlii", "link": "https://stackoverflow.com/users/3402332/overlii"}, "edited": false, "score": 0, "creation_date": 1426078200, "post_id": 28985247, "comment_id": 46222508, "body": "Thanks for you concerns Remo, our user are suposed to be programmers and they can make only read only requests."}], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 1, "last_activity_date": 1426074515, "creation_date": 1426074515, "answer_id": 28985860, "question_id": 28985247, "link": "https://stackoverflow.com/questions/28985247/sqlite3-c-c-get-the-table-names-involved-int-an-aggregate-query/28985860#28985860", "title": "sqlite3 c/c++, get the table names involved int an aggregate query", "body": "<p>An <a href=\"http://www.sqlite.org/c3ref/set_authorizer.html\" rel=\"nofollow\">authorizer callback</a> allows you to detect which tables are actually accessed by a query.</p>\n"}], "owner": {"reputation": 513, "user_id": 3402332, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1497014347/picture?type=large", "display_name": "overlii", "link": "https://stackoverflow.com/users/3402332/overlii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 28985860, "answer_count": 1, "score": 1, "last_activity_date": 1426074515, "creation_date": 1426072758, "question_id": 28985247, "link": "https://stackoverflow.com/questions/28985247/sqlite3-c-c-get-the-table-names-involved-int-an-aggregate-query", "title": "sqlite3 c/c++, get the table names involved int an aggregate query", "body": "<p>I am using sqlite in a C++ project and I would like to be able to get the table names involved in a query. </p>\n\n<p>Ex:</p>\n\n<pre><code>SELECT * FROM Employee\n</code></pre>\n\n<p>should return <code>Employee</code></p>\n\n<p>Now I use successfully <code>qlite3_column_table_name</code> (<a href=\"https://sqlite.org/c3ref/column_database_name.html\" rel=\"nofollow\">doc</a>) for this kind of queries but for aggregate queries, the function returns null as the result does not belong to a table directly.</p>\n\n<p>ex: </p>\n\n<pre><code>SELECT SUM(salary) AS total FROM Employee\n</code></pre>\n\n<p>Surely, when sqlite compiles the statement, the \"Employee\" keyword is recognised as a table. Do you know aby way to have access to this?\nI tried to step through the code of the parser without success...</p>\n"}, {"tags": ["c", "arrays", "static", "arm", "cortex-m"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1426071674, "post_id": 28984770, "comment_id": 46218371, "body": "Don&#39;t do <code>i + 65</code> it can be confusing specially when you can do <code>i + &#39;A&#39;</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426072174, "post_id": 28984770, "comment_id": 46218702, "body": "The question does not indicate lack of <code>nul</code> terminator, it says the last 8 chars of the array are corrupted. Pehaps a misbehaving interrupt function, with the sympton removed by lengthening the array?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426072284, "post_id": 28984770, "comment_id": 46218771, "body": "@WeatherVane then why <code>static uint8_t d1[35];</code> works as expected?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426072350, "post_id": 28984770, "comment_id": 46218817, "body": "@iharob I wondered why lengthening by 3 is enough, but then UB is UB, and we don&#39;t know the exact cause."}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1426072365, "post_id": 28984770, "comment_id": 46218827, "body": "We need <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "edited": false, "score": 1, "creation_date": 1426082767, "post_id": 28984770, "comment_id": 46225938, "body": "static allocation would happen in a global scope, high chance that&#39;s getting overwritten. try to allocate buffer somewhere else, may be at stack."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1426115536, "post_id": 28984770, "comment_id": 46246154, "body": "Debugging tip: dump the <i>values</i> of the &quot;non-printable&quot; bytes (%u or %x) - are they the same every time? Do they look suspiciously like addresses, or other recognisable data values from elsewhere in your code? Things like that generally help narrow down odd behaviour. That said, a) does it still happen if you make the array length some other exact multiple of 8? and b) do you know where all your stack pointers are?"}], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 1385360, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e2d184b7a8e9d9c114f9a52b7a7831b2?s=128&d=identicon&r=PG", "display_name": "pvh1987", "link": "https://stackoverflow.com/users/1385360/pvh1987"}, "edited": false, "score": 0, "creation_date": 1426074735, "post_id": 28984968, "comment_id": 46220324, "body": "I have tried printing the chars individually with printf using &quot;%c&quot;. Also as the whole string using &quot;%s&quot;, with and without null-termination. The problem is still there. I have also tested the code on my PC and it works like it should, printing all 32 characters. So I think the problem is ARM-related."}, {"owner": {"reputation": 12154, "user_id": 2390083, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/68954dd2e17de26ff9968d33244b03b8?s=128&d=identicon&r=PG", "display_name": "Beryllium", "link": "https://stackoverflow.com/users/2390083/beryllium"}, "reply_to_user": {"reputation": 581, "user_id": 1385360, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e2d184b7a8e9d9c114f9a52b7a7831b2?s=128&d=identicon&r=PG", "display_name": "pvh1987", "link": "https://stackoverflow.com/users/1385360/pvh1987"}, "edited": false, "score": 0, "creation_date": 1426077001, "post_id": 28984968, "comment_id": 46221724, "body": "Then please show the full code with Makefile. What is the target of <code>printf</code>? Redirected via UART? Possibly one of the &quot;[]\\&quot; characters trigger a terminal command or delete previous output. Possibly the problem is somewhere else, and the three additional bytes &quot;save&quot; you."}], "tags": [], "owner": {"reputation": 12154, "user_id": 2390083, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/68954dd2e17de26ff9968d33244b03b8?s=128&d=identicon&r=PG", "display_name": "Beryllium", "link": "https://stackoverflow.com/users/2390083/beryllium"}, "is_accepted": false, "score": 4, "last_activity_date": 1426072010, "creation_date": 1426072010, "answer_id": 28984968, "question_id": 28984770, "link": "https://stackoverflow.com/questions/28984770/array-size-trouble-on-arm-cortex-m4/28984968#28984968", "title": "Array size trouble on ARM Cortex M4", "body": "<p>The length of the array is 32, and you assign a value to each element of it.</p>\n\n<p>So if you loop over your array, and print each character <em>individually</em>, all is fine.</p>\n\n<p>If you print the <em>whole array</em> using <code>printf(\"%s\\n\")</code>, your array is treated as a pointer to the start of a string. And that one must be terminated by a <code>\\0</code>. Otherwise <code>printf</code> will continue to print until it finds a <code>\\0</code> from the starting address on upwards.</p>\n"}], "owner": {"reputation": 581, "user_id": 1385360, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e2d184b7a8e9d9c114f9a52b7a7831b2?s=128&d=identicon&r=PG", "display_name": "pvh1987", "link": "https://stackoverflow.com/users/1385360/pvh1987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426072099, "creation_date": 1426071422, "question_id": 28984770, "link": "https://stackoverflow.com/questions/28984770/array-size-trouble-on-arm-cortex-m4", "title": "Array size trouble on ARM Cortex M4", "body": "<p>I am doing some C programming on a Texas Instruments Tiva C Series LaunchPad (TM4C123G), based on ARM Cortex M4.</p>\n\n<p>I have a problem with arrays that seems to be smaller than they should be. This example should illustrate the problem:</p>\n\n<pre><code>uint8_t* data;\nstatic uint8_t d1[32];\nfor (int i = 0; i &lt; 32; i++)\n{\n    d1[i] = i+65;\n}\ndata = d1;\n</code></pre>\n\n<p>The content in data should be</p>\n\n<pre><code>ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`\n</code></pre>\n\n<p>but is instead</p>\n\n<pre><code>ABCDEFGHIJKLMNOPQRSTUVWX plus 8 non-printable characters\n</code></pre>\n\n<p>If I define d1 like this</p>\n\n<pre><code>static uint8_t d1[35];\n</code></pre>\n\n<p>all 32 bytes from 'A' to '`' is available in the array.</p>\n\n<p>To me it is very strange that the array seems to be shorter than it really is. I would like to know how this can happen and how to fix the problem.</p>\n\n<p>Thanks in advance :-)</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 329, "user_id": 3711864, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fef6905ce501c174581e28b7fefd76c5?s=128&d=identicon&r=PG&f=1", "display_name": "user3711864", "link": "https://stackoverflow.com/users/3711864/user3711864"}, "edited": false, "score": 4, "creation_date": 1426070649, "post_id": 28984382, "comment_id": 46217615, "body": "Can you try it again but declaring nameptr parameter of findTarget as [][100] instead of [][80] ? The dimensions of your parameter don&#39;t match."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 7, "creation_date": 1426070651, "post_id": 28984382, "comment_id": 46217618, "body": "Stop lying to the function you&#39;re calling. You claim the incoming arrray is <code>char (*)[80]</code>, but you pass a <code>char (*)[100]</code>. The strides are different. If your compiler didn&#39;t at least warn you about this, crank up your warnings. If it <i>still</i> doesn&#39;t warn you, get a new compiler. And you can add <code>fflush(stdin)</code> to <code>gets()</code> in the list of things not to do."}, {"owner": {"reputation": 2394, "user_id": 771355, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2dd23ffd587c0070ec6eca022c5e174f?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/771355/gavin"}, "edited": false, "score": 0, "creation_date": 1426070850, "post_id": 28984382, "comment_id": 46217754, "body": "Ok, the dimensions was the issue here"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1426070852, "post_id": 28984382, "comment_id": 46217755, "body": "When compiling with <code>gcc</code> I get the warning &quot;warning: passing argument 2 of &#39;findTarget&#39; from incompatible pointer type / note: expected &#39;char (<i>)[80]&#39; but argument is of type &#39;char (</i>)[100]&#39;&quot; -- which I fixed <i>immediately</i>. And the program ran as it should. Reverting it to your original, it does not."}, {"owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "edited": false, "score": 0, "creation_date": 1426070965, "post_id": 28984382, "comment_id": 46217851, "body": "You don&#39;t need the information about string length, you could just have <code>int findTarget(char *target, const char ** nameptr, size_t name_count)</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "edited": false, "score": 0, "creation_date": 1426071113, "post_id": 28984382, "comment_id": 46217948, "body": "@Coconop <code>char (*)[N]</code> is <i>not</i> synonymous with <code>char **</code>."}, {"owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426071337, "post_id": 28984382, "comment_id": 46218123, "body": "@WhozCraig agreed, but it can be used in the OP case without harm, no ?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "edited": false, "score": 0, "creation_date": 1426071512, "post_id": 28984382, "comment_id": 46218249, "body": "@Coconop No. They&#39;re completely different. One is an array of arrays, the other an array of pointers, and arrays are <i>not</i> pointers."}, {"owner": {"reputation": 1326, "user_id": 2053269, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tAccL.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2053269/anshul"}, "edited": false, "score": 0, "creation_date": 1426074764, "post_id": 28984382, "comment_id": 46220352, "body": "a duplicate to: <a href=\"http://stackoverflow.com/questions/26815982/using-scanf-and-gets-simultaneously\" title=\"using scanf and gets simultaneously\">stackoverflow.com/questions/26815982/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1426074764, "last_edit_date": 1426074764, "creation_date": 1426073741, "answer_id": 28985601, "question_id": 28984382, "link": "https://stackoverflow.com/questions/28984382/find-index-of-a-given-string-in-an-array/28985601#28985601", "title": "Find index of a given string in an array", "body": "<p>The problem is that the function is declared with second parameter as pointer to first element of an array of type <code>char [80]</code></p>\n\n<pre><code>int findTarget(char *target, char nameptr[][80], int size);\n</code></pre>\n\n<p>However inside main you pass an array defined such a way that it has element's type <code>char[100]</code></p>\n\n<pre><code>char names[10][100];\n</code></pre>\n\n<p>Thus the function has undefined behaviour.</p>\n\n<p>Redeclare the array in main like</p>\n\n<pre><code>char names[10][80];\n</code></pre>\n\n<p>Take into account that you should check the entered value of <code>num</code> that shall be less than or equal to 10.</p>\n\n<p>As for me I would declare the function the following way</p>\n\n<pre><code>size_t findTarget( const char nameptr[][80], size_t size, const char *target ); \n</code></pre>\n\n<p>As for function <code>gets</code> it is not now a standard function because it is unsafe.\nFrom the C Standard</p>\n\n<blockquote>\n  <p>removed the gets function ()</p>\n</blockquote>\n\n<p>You can use for example <code>fgets</code> instead. </p>\n\n<p>Also you could use standard C function <code>bsearch</code> declared in header <code>&lt;stdlib.h&gt;</code> if the array is sorted.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nvoid *bsearch(const void *key, const void *base,\nsize_t nmemb, size_t size,\nint (*compar)(const void *, const void *));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426075031, "post_id": 28985773, "comment_id": 46220524, "body": "<code>gets</code> and <code>scanf</code> do different things; your version won&#39;t work for names that contain spaces. Also both of your examples have no protection against buffer overflow."}, {"owner": {"reputation": 1326, "user_id": 2053269, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tAccL.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2053269/anshul"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426075360, "post_id": 28985773, "comment_id": 46220731, "body": "Sir I understand you are very particular about the corner cases but the actual problem is different to which you haven&#39;t actually looked at."}], "tags": [], "owner": {"reputation": 1326, "user_id": 2053269, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tAccL.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2053269/anshul"}, "is_accepted": false, "score": -2, "last_activity_date": 1426077283, "last_edit_date": 1426077283, "creation_date": 1426074279, "answer_id": 28985773, "question_id": 28984382, "link": "https://stackoverflow.com/questions/28984382/find-index-of-a-given-string-in-an-array/28985773#28985773", "title": "Find index of a given string in an array", "body": "<p>The solution to above program can be as follows:</p>\n\n<pre><code>printf(\"Enter target name: \");\n    getc(stdin);\ngets(target);\n</code></pre>\n\n<p>Well apart from the </p>\n\n<blockquote>\n  <p>nameptr[][80]</p>\n</blockquote>\n\n<p>correction all over.</p>\n\n<p>It has something to do with gets function., for which it has already been deprecated.</p>\n\n<pre><code>gets(target);\n</code></pre>\n\n<p>There is conflict in data read/write pipe while performing a read from STDIN in between scanf and gets usage.</p>\n\n<p>If we just replace the statement </p>\n\n<pre><code>gets(target)\n</code></pre>\n\n<p>with </p>\n\n<pre><code>scanf(\"%s\", target) \n</code></pre>\n\n<p>it works absolutely fine</p>\n\n<p>As per strace logs</p>\n\n<pre><code>read(0, try\n\"try\\n\", 1024)                  = 4\nlseek(0, -1, SEEK_CUR)                  = -1 ESPIPE (Illegal seek)\nwrite(1, \"Enter target name: findTarget():\"..., 35Enter target name: findTarget(): -1) = 35\nexit_group(16)                          = ?\n+++ exited with 16 +++\n</code></pre>\n\n<p>After reading the last name through scanf, the program is trying to read again through STDIN via gets command where it finds ESPIPE error and than misbehaves.</p>\n"}], "owner": {"reputation": 2394, "user_id": 771355, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2dd23ffd587c0070ec6eca022c5e174f?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/771355/gavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1051, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1426077283, "creation_date": 1426070439, "question_id": 28984382, "link": "https://stackoverflow.com/questions/28984382/find-index-of-a-given-string-in-an-array", "title": "Find index of a given string in an array", "body": "<p>I am writing to write a function findTarget() that searches whether a target name string has been stored in the array of strings.   </p>\n\n<p>where nameptr is the array of strings entered by the user, size is the number of names stored in the array\nand target is the target string. If the target string is found, the function will return its index location, or -1\nif otherwise.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint findTarget(char *target, char nameptr[][80], int size);\nint main()\n{\n    int num, i;\n    char target[100];\n    char names[10][100];\n    printf(\"Enter no. of names:\");\n    scanf(\"%d\", &amp;num);\n    printf(\"Enter %d names: \", num);\n    for (i = 0; i &lt; num; i++)\n    {\n        scanf(\"%s\", names[i]);\n    }\n    printf(\"Enter target name: \");\n    fflush(stdin);\n    gets(target);\n    printf(\"findTarget(): %d\", findTarget(target, names, num));\n\n}\n\nint findTarget(char *target, char nameptr[][80], int size)\n{\n    int i;\n    for (i = 0; i &lt; size; i++)\n    {\n        if (strcmp(target,nameptr[i]) == 0)\n        {\n            return i;\n        }\n    }\n    return -1;\n}\n</code></pre>\n\n<p>I do aware that using gets() is not recommendation, but we shall leave that aside. Somehow it only works if the target I am finding happens to be at index 0. If it is in other indexes, it fails.</p>\n"}, {"tags": ["c", "function", "pointers", "struct"], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 4440991, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-T1jQzHsPewo/AAAAAAAAAAI/AAAAAAAAAPM/8QL_Tq6jSF0/photo.jpg?sz=128", "display_name": "Jidey", "link": "https://stackoverflow.com/users/4440991/jidey"}, "edited": false, "score": 0, "creation_date": 1426070864, "post_id": 28984463, "comment_id": 46217765, "body": "It&#39;s compiling , thank you so much ;) How can i pass the topic on solved, im new into stackoverflow ?"}], "tags": [], "owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "is_accepted": true, "score": 2, "last_activity_date": 1426070690, "creation_date": 1426070690, "answer_id": 28984463, "question_id": 28984339, "link": "https://stackoverflow.com/questions/28984339/predefine-a-struct-in-c/28984463#28984463", "title": "Predefine a struct in C", "body": "<p>Forward declaration.\nAdd at the beginning: <code>typedef struct s_client t_client;</code></p>\n\n<p>Now the compiler will know the type <code>t_client</code> when encountered in <code>s_match_fptr</code>.\nNote, the type must be used only by reference in the <code>s_match_fptr</code> definition (i.e. using a pointer). This way the compiler doesn't need to know the actual contents of the type when parsing the code.</p>\n"}], "owner": {"reputation": 299, "user_id": 4440991, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-T1jQzHsPewo/AAAAAAAAAAI/AAAAAAAAAPM/8QL_Tq6jSF0/photo.jpg?sz=128", "display_name": "Jidey", "link": "https://stackoverflow.com/users/4440991/jidey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 0, "accepted_answer_id": 28984463, "answer_count": 1, "score": 1, "last_activity_date": 1426070938, "creation_date": 1426070357, "last_edit_date": 1426070938, "question_id": 28984339, "link": "https://stackoverflow.com/questions/28984339/predefine-a-struct-in-c", "title": "Predefine a struct in C", "body": "<p>I try to do this in C :</p>\n\n<pre><code>typedef struct s_match_fptr\n{\n  char *str;\n  int  (*funcptr)(t_client *client, char **command);\n} t_match_fptr;\n\ntypedef struct s_client\n{\n  int socket_fd;\n  int port;\n  char *server_ip;\n  struct sockaddr_in s_in;\n  t_match_fptr  *db;\n} t_client;\n</code></pre>\n\n<p>The point is I try to declare a function pointer that takes in parameter a <code>t_client</code> struct in my <code>t_match_ptr</code> struct.</p>\n\n<p>Also, my struct <code>t_client</code> have an array of <code>t_match_ptr</code>.</p>\n\n<p>For simplify, A need to be declared after B AND B needs to be declared after A.</p>\n\n<p>So, is there a way to \"predeclare\" <code>t_client</code> before the declaration of <code>t_match_ptr</code>?</p>\n\n<p>Thank you and sorry for bad english.</p>\n"}, {"tags": ["c", "parameter-passing"], "comments": [{"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 1, "creation_date": 1426070553, "post_id": 28984289, "comment_id": 46217557, "body": "<code>new_size = size * 2;</code> this seems weird though why have <code>new_size</code> as function parameter if you don&#39;t use its value"}], "answers": [{"comments": [{"owner": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "edited": false, "score": 0, "creation_date": 1426070693, "post_id": 28984361, "comment_id": 46217646, "body": "Your malloc won&#39;t give the right size since sizeof(ptr1) is the size of a pointer."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "edited": false, "score": 0, "creation_date": 1426070911, "post_id": 28984361, "comment_id": 46217796, "body": "Oops I didn&#39;t type the <code>*</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "edited": false, "score": 0, "creation_date": 1426071164, "post_id": 28984361, "comment_id": 46217977, "body": "Now I thought it could be confusing for the OP to do <code>malloc(new_size * sizeof(**ptr1))</code>... so this could be a better way to do it."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1426071354, "last_edit_date": 1495542137, "creation_date": 1426070395, "answer_id": 28984361, "question_id": 28984289, "link": "https://stackoverflow.com/questions/28984289/how-to-passing-the-pointer-parameters-and-return-them-right/28984361#28984361", "title": "How to passing the pointer parameters and return them right?", "body": "<p>Pass the addresses of the pointers, modify the pointers in the functions and thats all, other that that I have a few observations on your code</p>\n\n<ol>\n<li><p>Don't cast the return value of <code>malloc()</code>, it's not necessary in c, and it <a href=\"https://stackoverflow.com/a/605858/1983495\">hurts</a> your code readability.</p></li>\n<li><p>Always check the return value of <code>malloc()</code> and pretty much any function that returns a value, because normally there is a special value indicating failure, and you don't want your program to misbehave under extraordinary conditions.</p></li>\n</ol>\n\n<p>This is a version of your own code with the main issue addressed and also the observations above.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint foo(int size, int new_size, int ** ptr1, double ** ptr2) {\n    int        i;\n    new_size = size * 2;\n\n    *ptr1 = malloc(new_size * sizeof(int));\n    *ptr2 = NULL;\n    if (*ptr1 == NULL)\n        return 1;\n\n    *ptr2 = malloc(new_size * sizeof(double));\n    if (*ptr2 == NULL) {\n         free(*ptr1); \n         return 2;\n    }\n\n    for (i = 0; i &lt; new_size; i++) {\n        (*ptr1)[i] = 1;\n        (*ptr2)[i] = 2;\n    }\n\n    return 0;\n}\n\nint main() {\n    int i, size = 4, new_size = 4;\n    int    *ptr1 = NULL;\n    double *ptr2 = NULL;\n\n    if (foo(size, new_size, &amp;ptr1, &amp;ptr2) != 0)\n        return -1;\n    for (i = 0; i &lt; new_size; i++) {\n        printf(\"new_size: %d\\n\", new_size);\n        printf(\"ptr1: %d, ptr2: %f\\n\", ptr1[i], ptr2[i]);\n    }\n\n    free(ptr1);\n    free(ptr2);\n\n    return 0;\n}\n</code></pre>\n\n<p>In c you always pass parameters by value, it might be confusing because you are passing a pointer, but a pointer is just another variable which stores a memory address, that address is changing inside the <code>foo()</code> function but it's only being written into the local pointer <code>ptr1</code>.</p>\n\n<p>Passing the address writes the value to the original pointer in <code>main()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426070659, "post_id": 28984365, "comment_id": 46217626, "body": "You noticed the problem with your code <code>*ptr[i] != (*ptr)[i]</code>."}, {"owner": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426070755, "post_id": 28984365, "comment_id": 46217676, "body": "@iharob Yes I was typing a bit too fast. You noticed yours with the malloc ? Thanks"}], "tags": [], "owner": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "is_accepted": false, "score": 3, "last_activity_date": 1426071299, "last_edit_date": 1426071299, "creation_date": 1426070401, "answer_id": 28984365, "question_id": 28984289, "link": "https://stackoverflow.com/questions/28984289/how-to-passing-the-pointer-parameters-and-return-them-right/28984365#28984365", "title": "How to passing the pointer parameters and return them right?", "body": "<p>You can pass the address of the pointer to the function like so:</p>\n\n<pre><code>void foo(int size, int new_size, int ** ptr1, double ** ptr2) {\n    int i;\n    new_size = size * 2;\n    *ptr1 = (int *) calloc(new_size, sizeof(int));\n    *ptr2 = (double *) calloc(new_size, sizeof(double));\n\n    for (i = 0; i &lt; new_size; i++) {\n        (*ptr1)[i] = 1;\n        (*ptr2)[i] = 2;\n    }\n}\n</code></pre>\n\n<p>and in main</p>\n\n<pre><code>foo(size, new_size, &amp;ptr1, &amp;ptr2);\n</code></pre>\n\n<p>Your code didn't work because parameter are passed by value. <code>ptr1</code> and <code>ptr2</code> while being pointers are still passed by values so any modification to them(compared to modification to what they point to) will not remain after the function.</p>\n"}], "owner": {"reputation": 959, "user_id": 2358969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/461f804bb5a7c5b31f862cfa27e52de1?s=128&d=identicon&r=PG", "display_name": "Yulong Ao", "link": "https://stackoverflow.com/users/2358969/yulong-ao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 28984361, "answer_count": 2, "score": 0, "last_activity_date": 1426071354, "creation_date": 1426070249, "question_id": 28984289, "link": "https://stackoverflow.com/questions/28984289/how-to-passing-the-pointer-parameters-and-return-them-right", "title": "How to passing the pointer parameters and return them right?", "body": "<p>Here is my code sample:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nvoid foo(int size, int new_size, int * ptr1, double * ptr2) {\n    int i;\n    new_size = size * 2;\n    ptr1 = (int *) calloc(new_size, sizeof(int));\n    ptr2 = (double *) calloc(new_size, sizeof(double));\n\n    for (i = 0; i &lt; new_size; i++) {\n        ptr1[i] = 1;\n        ptr2[i] = 2;\n    }\n}\nint main(){\n    int i, size = 4, new_size = 4;\n    int *ptr1 = NULL;\n    double *ptr2 = NULL;\n\n    foo(size, new_size, ptr1, ptr2);\n\n    for (i = 0; i &lt; new_size; i++) {\n        printf(\"new_size: %d\\n\", new_size);\n        printf(\"ptr1: %d, ptr2: %f\\n\", ptr1[i], ptr2[i]);\n    }\n\n    free(ptr1);\n    free(ptr2);\n\n    return 0;\n}\n</code></pre>\n\n<p>And I have to malloc space and assign data to ptr1 and ptr2 in foo function (because I don't know the new size of them in main functin) and then use them in the main function.<br/><strong>Why the code doesn't work? And How to implement the above process I want?</strong></p>\n"}, {"tags": ["c", "gcc", "assembly", "asmx", "nasm"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1426069724, "post_id": 28984009, "comment_id": 46217033, "body": "The <code>gcc</code> command when linking is just a frontend for the <code>ld</code> command, it still calls <code>ld</code> to do the actual linking, passing along the flags needed for the standard library. If you want to use the standard C library, just add the flag to link with it: <code>-lc</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426070052, "post_id": 28984009, "comment_id": 46217230, "body": "Just a point, your last comment says <code>; sys_close (ebx already contains file descriptor)</code>. Does it?"}, {"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426070295, "post_id": 28984009, "comment_id": 46217382, "body": "@WeatherVane you are right ...i missed the mov ebx,eax line at the beginning of fileWrite..but ebx hold the filename when i use ld without any stdlib support."}, {"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426071856, "post_id": 28984009, "comment_id": 46218503, "body": "@JoachimPileborg adding -lc flag worked , but i wonder why indirectly using ld through gcc doesn&#39;t work. any idea?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467418395, "post_id": 28984009, "comment_id": 63739819, "body": "@JoachimPileborg and touchStone: Linking using <code>gcc foo.o</code> actually uses <code>ld crt.o foo.o -lc</code>.  You can use <code>gcc -nostartfiles</code> to get libc but not the CRT startup code which defines <code>_start</code>.  See <a href=\"http://stackoverflow.com/questions/36861903/assembling-32-bit-binaries-on-a-64-bit-system-gnu-toolchain/36901649#36901649\" title=\"assembling 32 bit binaries on a 64 bit system gnu toolchain\">stackoverflow.com/questions/36861903/&hellip;</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1467418515, "post_id": 28984009, "comment_id": 63739848, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7854706/reading-filename-from-argv-via-x86-assembly\">Reading filename from argv via x86 assembly</a>"}], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426073805, "post_id": 28984821, "comment_id": 46219710, "body": "will  &quot;mov    ebx, dword [ebx+4]&quot;  following the seond pop and discarding the 3rd , work using gcc ?? I got segment fault when i tried ...but can you help me with the same?"}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "reply_to_user": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426077128, "post_id": 28984821, "comment_id": 46221813, "body": "It should :-/ Again, I did this last time in 1996, so my knowledge is a bit rusty :-) Can you try to run the code in a debugger?"}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "reply_to_user": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426077515, "post_id": 28984821, "comment_id": 46222053, "body": "I have found a blog post which shows the stack layout. Turns out that you were right, the kernel actually pushes the <code>argv</code> array onto the stack element by element. See my edits."}, {"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426081037, "post_id": 28984821, "comment_id": 46224537, "body": "ironically libc(via. gcc) couldn&#39;&#39;t fetch the filename from the 3rd pop and resulted in a &quot;invalid label file&quot; hence the question. Seems like i am unable to apply theory practically. But using ld (without c lib suport) or ld with -lc (for c lib support) works fine as pointed by @Joachim. We still miss something here..."}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "reply_to_user": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426081507, "post_id": 28984821, "comment_id": 46224859, "body": "Write a very simple C program which examines the command line arguments. Then convert that to assembler with <code>gcc -S -o out.asm ...</code> to see what code GCC creates to process <code>argv[]</code>"}, {"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426085033, "post_id": 28984821, "comment_id": 46227648, "body": "1. mov\teax, DWORD PTR [ebp+12], 2. mov\teax, DWORD PTR [eax], 3. mov\tDWORD PTR [esp], eax, 4. call\tprintf"}, {"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426085149, "post_id": 28984821, "comment_id": 46227742, "body": "I have tried to use the above code in the assembly but no success yet..and i am still trying.... but it appear like they move the values in stack pointed by esp followed by  stdlib function calls."}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "reply_to_user": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426087394, "post_id": 28984821, "comment_id": 46229434, "body": "Sure; libc uses OS independent calls like <code>printf()</code>. You&#39;re using kernel calls via <code>int 80h</code>. Just concentrate on the way the code accesses <code>argv</code>."}, {"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1426088014, "post_id": 28984821, "comment_id": 46229920, "body": "Finally , got both my answers here: <a href=\"http://stackoverflow.com/questions/7854706/reading-filename-from-argv-via-x86-assembly\" title=\"reading filename from argv via x86 assembly\">stackoverflow.com/questions/7854706/&hellip;</a> ...and i have to appreciate your help in this."}], "tags": [], "owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "is_accepted": false, "score": 0, "last_activity_date": 1426077420, "last_edit_date": 1426077420, "creation_date": 1426071558, "answer_id": 28984821, "question_id": 28984009, "link": "https://stackoverflow.com/questions/28984009/how-to-accept-input-from-command-line-in-a-assembly-program-build-using-gcc-tool/28984821#28984821", "title": "how to accept input from command line in a assembly program build using gcc tools?", "body": "<p>This blog post explains how the stack looks like when the entry point of a program is being called: <a href=\"http://eli.thegreenplace.net/2012/08/13/how-statically-linked-programs-run-on-linux\" rel=\"nofollow\">http://eli.thegreenplace.net/2012/08/13/how-statically-linked-programs-run-on-linux</a></p>\n\n<p>In a nutshell, you have these elements on the stack:</p>\n\n<ol>\n<li><code>argc</code></li>\n<li><code>argv[0]</code> - program/executable name</li>\n<li><code>argv[1]</code> ... <code>argv[argc-1]</code> - Program arguments</li>\n<li><code>argv[argc]</code> - Always <code>NULL</code></li>\n<li><code>envp[0]</code> ... <code>envp[N]</code> - The current environment</li>\n<li><code>NULL</code> to terminate the <code>envp</code> array</li>\n</ol>\n\n<p>Those pointers are either 32 bit or 64 bit, depending on your kernel. <code>x86</code> = 32 bit, <code>x64</code> = 64 bit. So make sure you fetch the correct sizes from the stack. On <code>x64</code>, <code>argc</code> takes 8 bytes.</p>\n\n<p>If you want to avoid this hassle, link against <code>libc</code> and provide a <code>main</code> entry point instead of <code>_start</code>. <code>libc</code> contains <code>_start</code> which will process the command line argument into arrays and then call <code>main</code> with three elements on the stack:</p>\n\n<ol>\n<li><code>int argc</code></li>\n<li><code>char** argv</code></li>\n<li><code>char** envp</code></li>\n</ol>\n\n<p>The startup code of <code>libc</code> will also initialize the stdio framework; without that, calls to <code>printf()</code> will fail because <code>stdout</code> will be a <code>NULL</code> pointer.</p>\n"}], "owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1895, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426100194, "creation_date": 1426069436, "last_edit_date": 1495541769, "question_id": 28984009, "link": "https://stackoverflow.com/questions/28984009/how-to-accept-input-from-command-line-in-a-assembly-program-build-using-gcc-tool", "title": "how to accept input from command line in a assembly program build using gcc tools?", "body": "<p>I actually wanted to write a program in assembly(linux) , to accept filename from the command line and I was successful by retrieving the values from the stack using successive pop opcodes when I used \"ld\" command to build but I was unsuccessful when i used \"gcc\" command . I need to use gcc because I will be using various C std library function in this program. </p>\n\n<p>Actually the file was creating , but its always got a \"Invalid encoding \" label and appeared like <code>&lt;? G ?</code> in the directory.I wanted to know:</p>\n\n<ol>\n<li>Do we follow a different procedure when built using gcc tools</li>\n<li>What was the possible reason for an invalid encoding file being created       (out of curiosity).</li>\n</ol>\n\n<p>Here is a sample code that works with ld but not with gcc.</p>\n\n<pre><code>section .data\n    filename: db 'testing',0\nsection .text\n    ;extern printf    ;to be uncommented when using gcc\n    ;extern scanf     ;           -do-\n    global _start   ; replace with main when using gcc\n\n_start:     ; replace with main:\n    pop ebx     ; argc (argument count)\n    pop ebx     ; argv[0] (argument 0, the program name)\n    pop ebx     ; The first real arg, a filename\n\n    mov eax,8       \n    ; issue: ebx is not holding the filename popped from cli using gcc \n    ;mov     ebx,filename   ; filename as a constant works with gcc but cli?\n    mov ecx,00644Q  ; Read/write permissions in octal (rw_rw_rw_)\n    int 80h     ; Call the kernel\n                ; Now we have a file descriptor in eax\n\n    test    eax,eax     ; Lets make sure the file descriptor is valid\n    js  terminate   ; If the file descriptor has the sign flag              \n    call    fileWrite\n\nterminate:\n    mov ebx,eax     ; If there was an error, save the errno in ebx\n    mov eax,1       ; Put the exit syscall number in eax\n    int 80h     ; control over to kernel\n\nfileWrite:  ; simply closing the file for time being\n    mov ebx,eax        ; edited\n    mov eax,6       ; sys_close (ebx already contains file descriptor)\n    int 80h\n    call terminate\n</code></pre>\n\n<p>Solution and Caveat:\nThere is a difference in the stack when using libc or bare-bone assembly.</p>\n\n<ol>\n<li><p>When using libc the , the first pop returns the return address followed by argc and argv values respectively.</p></li>\n<li><p>In bare-bone assembly , the first pop return the argc ,and every pop hence gives the successive argv values unlike a arguments pointer returned when using libc.</p></li>\n</ol>\n\n<p>Source:\n<a href=\"https://stackoverflow.com/questions/7854706/reading-filename-from-argv-via-x86-assembly\">Reading filename from argv via x86 assembly</a> </p>\n"}, {"tags": ["c", "algorithm", "scheduling", "reduction", "sat"], "comments": [{"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 1, "creation_date": 1426071171, "post_id": 28983729, "comment_id": 46217983, "body": "First, please formalize input and expected output of your class scheduling (or link to somewhere that formalize it)"}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1426071321, "post_id": 28983729, "comment_id": 46218099, "body": "it can be anything, that&#39;s the problem :  I search the best formalize for the class scheduling problem, and best for me means &quot;the easiest to transform in SAT&quot; :)   I have no formalized input for now, and my problem is to find one :/"}], "answers": [{"comments": [{"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1426073769, "post_id": 28985603, "comment_id": 46219683, "body": "I really hope I made no mistake, this was not a trivial reduction, please comment if you see any issue"}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1426075468, "post_id": 28985603, "comment_id": 46220797, "body": "Thank you very much :) but I have to admit, I don&#39;t think I get everything you said :D   Your formalize is indeed the simpliest and so, the better to transform in SAT :) I understand how to get at the end the planning from the SAT solution.   But can you give a little example, like 2 classes and 3 intervals. I understand that there will be 2*3 = 6 booleans variables; But what will look like the CNF file ?"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "reply_to_user": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 1, "creation_date": 1426078194, "post_id": 28985603, "comment_id": 46222506, "body": "@ValentinMontmirail I updated the answer with a simple example. with 2 classes and 3,2 intervals. Note that the number of variables in this case is 3+2. The number of clauses is almost <code>O(#variables^2)</code>."}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1426078716, "post_id": 28985603, "comment_id": 46222869, "body": "Thanks again :) I was working in the same time on your ideas and I get it now ^^ (I answer maybe too fast before thinking ^^)  But really, I&#39;m totally impressed, your method is so elegant, simple and works perfectly :)  Thank you for your example, it illustred what I&#39;ve understand :) just to be perfectly sure :)"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "reply_to_user": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1426078839, "post_id": 28985603, "comment_id": 46222964, "body": "@ValentinMontmirail I wouldn&#39;t say &quot;simple&quot;, took quite a lot of time to think about it, and even more to formalize it. It is simple to program though :)"}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1426079664, "post_id": 28985603, "comment_id": 46223551, "body": "Yep :P when I said simple I mean the algorithm  behind :p for sure not the thinking-process :) anyway : thanks again ! greetings from France !"}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1426166844, "post_id": 28985603, "comment_id": 46267062, "body": "Hi @Amit,I code your method and it works perfectly for one day (from N to M). But I generalize your method to not only 1 day (from N to M) but to 1 week (from N to 5*M) and there is an issue : the problem is not constrainted enough, so sometimes it says that twice the same class is true (but it should not).   I think it came from the fact that in CNF it says Vi_1 OR Vi_2 OR ... But there is nothing to say that if Vi_1 is true, then Vi_j should be false ... : /  Do you have an idea on how to fix this ? :/"}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1426167080, "post_id": 28985603, "comment_id": 46267211, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/72840/discussion-between-valentin-montmirail-and-amit\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": true, "score": 69, "last_activity_date": 1468500600, "last_edit_date": 1468500600, "creation_date": 1426073743, "answer_id": 28985603, "question_id": 28983729, "link": "https://stackoverflow.com/questions/28983729/class-scheduling-to-boolean-satisfiability-polynomial-time-reduction/28985603#28985603", "title": "Class Scheduling to Boolean satisfiability [Polynomial-time reduction]", "body": "<p>I am going to try and first formalize the problem, and then attempt to reduce it to SAT.</p>\n\n<p><strong>Define the class scheduling problem as:</strong></p>\n\n<pre><code>Input = { S1,S2,....,Sn | Si = {(x_i1, y_i1), (x_i2, y_i2) , ... , (x_ik, y_ik) | 0 &lt;= x_ij &lt; y_ij &lt;= M } } \n</code></pre>\n\n<p>Informally: The input is a set of classes, each class is a set of (open) intervals in the form (x,y)\n<br>(M is some constant that describes the \"end of the week\")</p>\n\n<p>Output: True if and only if there exists some set:</p>\n\n<pre><code>R = { (x_1j1, y_1j1) , ..., (x_njn, y_njn) | for each a,b: (x_aja,y_aja) INTERSECTION (x_bjb,y_bjb) = {} }\n</code></pre>\n\n<p>Informally: true if and only if there is some assignment of intervals such that the intersection between each pair of intervals is empty.</p>\n\n<hr>\n\n<p><strong>Reduction to SAT:</strong></p>\n\n<p>Define a boolean variable for each interval, <code>V_ij</code>\n<br>Based on it, define the formula:</p>\n\n<pre><code>F1 = (V_11 OR V_12 OR ... OR V_1(k_1)) AND .... AND (V_n1 OR V_n2 OR ... OR V_n(k_n))\n</code></pre>\n\n<p>Informally, F1 is satisfied if and only if at least one of the interval for each class is \"satisfied\"</p>\n\n<p>Define <code>Smaller(x,y) = true</code> if and only <code>if x &lt;= y</code><sup>1</sup>\n<br>We will use it to make sure intervals don't overlap.\n<br>Note that if we want to make sure (x1,y1) and (x2,y2) don't overlap, we need:</p>\n\n<pre><code>x1 &lt;= y1 &lt;= x2 &lt;= y2 OR  x2 &lt;= y2 &lt;= x1 &lt;= y1\n</code></pre>\n\n<p>Since the input guarantees <code>x1&lt;=y1, x2&lt;=y2</code>, it reduces to:</p>\n\n<pre><code>y1&lt;= x2 OR y2 &lt;= x1\n</code></pre>\n\n<p>And using our Smaller and boolean clauses:</p>\n\n<pre><code>Smaller(y1,x2) OR Smaller(y2,x1)\n</code></pre>\n\n<p>Now, let's define new clauses to handle with it:</p>\n\n<p>For each pair of classes a,b and intervals c,d in them (c in a, d in b)</p>\n\n<pre><code>G_{c,d} = (Not(V_ac) OR Not(V_bd) OR Smaller(y_ac,x_bd) OR Smaller(y_bd,x_ac))\n</code></pre>\n\n<p>Informally, if one of the intervals b or d is not used - the clause is satisfied and we are done. Otherwise, both are used, and we must ensure there is no overlap between the two intervals.\n<br>This guarantees that if both c,d are \"chosen\" - they do not overlap, and this is true for each pair of intervals.</p>\n\n<p>Now, form our final formula:</p>\n\n<pre><code>F = F1 AND {G_{c,d} | for each c,d}\n</code></pre>\n\n<p>This formula ensures us:</p>\n\n<ol>\n<li>For each class, at least one interval is chosen</li>\n<li>For each two intervals c,d - if both c and d are chosen, they do not overlap.</li>\n</ol>\n\n<p>Small note: This formula allows to chose more than 1 interval from each class, but if there is a solution with some t>1 intervals, you can easily remove t-1 of them without changing correctness of the solution.</p>\n\n<p>At the end, the chosen intervals are the boolean variables V_ij we defined.</p>\n\n<hr>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>Alebgra = {(1,3),(3,5),(4,6)} Calculus = {(1,4),(2,5)}\n</code></pre>\n\n<p>Define F:</p>\n\n<pre><code>F1 = (V1,1 OR V1,2 OR V1,3) AND (V2,1 OR V2,2)\n</code></pre>\n\n<p>Define G's:</p>\n\n<pre><code>G{A1,C1} = Not(V1,1) OR Not(V2,1) OR  4 &lt;= 1 OR 3 &lt;= 1 //clause for A(1,3) C(1,4)\n         = Not(V1,1) OR Not(V2,1) OR false = \n         = Not(V1,1) OR Not(V2,1)\nG{A1,C2} = Not(V1,1) OR Not(V2,2) OR  3 &lt;= 2 OR 5 &lt;= 1 // clause for A(1,3) C(2,5)\n         = Not(V1,1) OR Not(V2,2) OR false = \n         = Not(V1,1) OR Not(V2,2)\nG{A2,C1} = Not(V1,2) OR Not(V2,1) OR  5 &lt;= 1 OR 4 &lt;= 3 //clause for A(3,5) C(1,4)\n         = Not(V1,2) OR Not(V2,1) OR false = \n         = Not(V1,2) OR Not(V2,1)\nG{A2,C2} = Not(V1,2) OR Not(V2,2) OR  5 &lt;= 2 OR 5 &lt;= 3 // clause for A(3,5) C(2,5)\n         = Not(V1,2) OR Not(V2,2) OR false = \n         = Not(V1,2) OR Not(V2,2)\nG{A3,C1} = Not(V1,3) OR Not(V2,1) OR  4 &lt;= 4 OR 6 &lt;= 1 //clause for A(4,6) C(1,4)\n         = Not(V1,3) OR Not(V2,1) OR true= \n         = true\nG{A3,C2} = Not(V1,3) OR Not(V2,2) OR  6 &lt;= 2 OR 5 &lt;= 4 // clause for A(4,6) C(2,5)\n         = Not(V1,3) OR Not(V2,2) OR false = \n         = Not(V1,3) OR Not(V2,2)\n</code></pre>\n\n<p>Now we can show our final formula:</p>\n\n<pre><code>    F = (V1,1 OR V1,2 OR V1,3) AND (V2,1 OR V2,2) \n        AND  Not(V1,1) OR Not(V2,1) AND Not(V1,1) OR Not(V2,2)\n        AND  Not(V1,2) OR Not(V2,1) AND Not(V1,2) OR Not(V2,2)\n        AND  true AND Not(V1,3) OR Not(V2,2)\n</code></pre>\n\n<p>The above is satisfied only when:</p>\n\n<pre><code>V1,1 = false\nV1,2 = false\nV1,3 = true\nV2,1 = true\nV2,2 = false\n</code></pre>\n\n<p>And that stands for the schedule: Algebra=(4,6); Calculus=(1,4), as desired.</p>\n\n<hr>\n\n<p>(1) can be computed as a constant to the formula pretty easily, there are polynomial number of such constants.</p>\n"}], "owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4438, "favorite_count": 26, "accepted_answer_id": 28985603, "answer_count": 1, "score": 42, "last_activity_date": 1618410823, "creation_date": 1426068696, "last_edit_date": 1512129605, "question_id": 28983729, "link": "https://stackoverflow.com/questions/28983729/class-scheduling-to-boolean-satisfiability-polynomial-time-reduction", "title": "Class Scheduling to Boolean satisfiability [Polynomial-time reduction]", "body": "<p>I have some theoretical/practical problem and I don't have clue for now on how to manage, Here it is: </p>\n\n<p>I create a <a href=\"http://en.wikipedia.org/wiki/Boolean_satisfiability_problem#Algorithms_for_solving_SAT\" rel=\"noreferrer\">SAT solver</a> able to find a model when one is existing and to prove the contradiction when it's not the case on <a href=\"http://en.wikipedia.org/wiki/Conjunctive_normal_form\" rel=\"noreferrer\">CNF</a> problems in C using genetics algorithms.</p>\n\n<p>A SAT-problem looks basically like this kind of problem : \n<img src=\"https://i.stack.imgur.com/SzHSS.png\" alt=\"enter image description here\">\nMy goal is to use this solver to find solutions in a lot of different  <a href=\"http://en.wikipedia.org/wiki/NP-complete\" rel=\"noreferrer\">NP-completes</a> problems. Basically, I translate different problems into SAT, solve SAT with my solver and then transform the solution into a solution acceptable for the original problem.</p>\n\n<p>I already succeed for the N*N Sudoku and also the N-queens problems, but here is my new goal : to reduce the Class Scheduling Problem to SAT but I have no idea how to formalize a class-scheduling problem in order to easily transform it in SAT after. </p>\n\n<p>The goal is obviously, in few months, to generate a picture of a schedule like this one : </p>\n\n<p><img src=\"https://i.stack.imgur.com/E6yB9.png\" alt=\"enter image description here\"></p>\n\n<p>I found this <a href=\"http://www.codeproject.com/Articles/23111/Making-a-Class-Schedule-Using-a-Genetic-Algorithm\" rel=\"noreferrer\">source-code</a> who is able to solved the class-scheduling but without any reductions to SAT unfortunately :/ </p>\n\n<p>I also found some articles about Planning in general (<a href=\"http://www.cs.rochester.edu/users/faculty/kautz/papers/kautz-satplan06.pdf\" rel=\"noreferrer\">http://www.cs.rochester.edu/users/faculty/kautz/papers/kautz-satplan06.pdf</a> for instance). </p>\n\n<p>But the <a href=\"http://en.wikipedia.org/wiki/Planning_Domain_Definition_Language\" rel=\"noreferrer\">planning domain definition language</a> used in this article seems quite too general for me to represents a Class-scheduling problem. :/ </p>\n\n<p>Does someone has an idea on how to formalize efficiently a Class-scheduling in order to reduce it to SAT and after, transform the SAT solution (if it exists ^^) into a Class-schedule ?</p>\n\n<p>I'm basically open to any suggestions, I for now have no idea on how to represents, how to reduce the problem, how to transform the SAT-solution into a schedule... </p>\n\n<hr>\n\n<p><strong>Follow up question</strong>: <a href=\"https://stackoverflow.com/q/29140280/572670\">Class Scheduling to Boolean satisfiability [Polynomial-time reduction] part 2</a></p>\n"}, {"tags": ["c", "sockets", "client-server", "file-transfer"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1426069107, "post_id": 28983709, "comment_id": 46216645, "body": "There is no format, just bytes, <code>send()</code> bytes after <code>fread()</code> and  <code>recv()</code> bytes before <code>fwrite()</code>"}, {"owner": {"reputation": 1, "user_id": 4657827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a6db3dbc755cca4007dc5fcfd4a43e?s=128&d=identicon&r=PG&f=1", "display_name": "shreya taylor", "link": "https://stackoverflow.com/users/4657827/shreya-taylor"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1426074237, "post_id": 28983709, "comment_id": 46220009, "body": "Is it mandatory to convert the text file into binary file in the local drive before sending or &quot;ab&quot; will directly convert to binary in fopen()?"}], "owner": {"reputation": 1, "user_id": 4657827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a6db3dbc755cca4007dc5fcfd4a43e?s=128&d=identicon&r=PG&f=1", "display_name": "shreya taylor", "link": "https://stackoverflow.com/users/4657827/shreya-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426068646, "creation_date": 1426068646, "question_id": 28983709, "link": "https://stackoverflow.com/questions/28983709/c-socket-program-of-client-server-to-send-a-file", "title": "C-socket: program of client-server to send a file", "body": "<p>I am getting confused while sending a file from server to client or client to server. Is this that the only binary file are transferred or bitstream are to be generated? What should be the  format of the text file that is to be send? Is there any specific format?</p>\n"}, {"tags": ["c", "segmentation-fault", "hashtable", "void-pointers", "strcmp"], "comments": [{"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 2, "creation_date": 1426068550, "post_id": 28983604, "comment_id": 46216294, "body": "Please explain how you are calling <code>myCompare</code>."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1426068728, "post_id": 28983604, "comment_id": 46216407, "body": "Add \\n after all %s and rerun your program to see if that changes the printing. I don&#39;t think the problem is related to the function myCompare."}, {"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1426069050, "post_id": 28983604, "comment_id": 46216617, "body": "Are you sure neither of <code>s1</code> and <code>s2</code> is <code>NULL</code>?"}, {"owner": {"reputation": 3318, "user_id": 2138090, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tbCkJ.jpg?s=128&g=1", "display_name": "Olle H&#228;rstedt", "link": "https://stackoverflow.com/users/2138090/olle-h%c3%a4rstedt"}, "edited": false, "score": 0, "creation_date": 1426069170, "post_id": 28983604, "comment_id": 46216681, "body": "What does valgrind says?"}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 1, "creation_date": 1426069192, "post_id": 28983604, "comment_id": 46216697, "body": "I guess <code>ht-&gt;table[index]-&gt;key</code> is a <code>char *</code>  . Use <code>void* keyPtr = ht-&gt;table[index]-&gt;key;</code> instead"}, {"owner": {"reputation": 23, "user_id": 3691970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/254ddfd2f194cb441e4fd2f9cc423d56?s=128&d=identicon&r=PG&f=1", "display_name": "GullySquad02", "link": "https://stackoverflow.com/users/3691970/gullysquad02"}, "reply_to_user": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1426069300, "post_id": 28983604, "comment_id": 46216768, "body": "@g.tsh there is a possibility that it could pass a NULL value, although I have done a check before passing values, and if NULL I set them to something... It still gave a segfault"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1426069361, "post_id": 28983604, "comment_id": 46216804, "body": "Better to check for <code>NULL</code> at the point of use, not to rely on other code."}, {"owner": {"reputation": 23, "user_id": 3691970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/254ddfd2f194cb441e4fd2f9cc423d56?s=128&d=identicon&r=PG&f=1", "display_name": "GullySquad02", "link": "https://stackoverflow.com/users/3691970/gullysquad02"}, "reply_to_user": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1426069457, "post_id": 28983604, "comment_id": 46216862, "body": "@Micheled&#39;Amico - I tried that, but it segfaults at the <code>ht-&gt;table[index]-&gt;key</code> line"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426070193, "post_id": 28983604, "comment_id": 46217316, "body": "perhaps <code>ht-&gt;table[index]-&gt;key</code> is <code>NULL</code> or was not properly allocated"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1426070227, "post_id": 28983604, "comment_id": 46217327, "body": "To get good help post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. As things currently stand the problem is in code you haven&#39;t posted."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1426070417, "post_id": 28983604, "comment_id": 46217460, "body": "The problem is not a NULL pointer. Notice that the printing went fine inside myCompare when using s1 and s2 but failed using key1 and key2 even though they are just simple copies of s1 and s2. Further the problem is not in myCompare. Someone from the outside must be overwriting the memory used by myCompare. Could it be an ISR or another thread?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426073544, "post_id": 28983604, "comment_id": 46219537, "body": "<code>ht-&gt;table[index]</code> can be null, so dereferencing <code>-&gt;key</code> is not allowed: <code>keyPtr = ht-&gt;table[index]-&gt;key</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426074284, "post_id": 28983604, "comment_id": 46220041, "body": "@wildplasser - if you look at the output, you can see that the seg fault happens a long time after dereferencing key. So that can&#39;t be the problem."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426075294, "post_id": 28983604, "comment_id": 46220686, "body": "Well: why don&#39;t you <code>printf(&quot;ThePoinTer: %p\\n&quot;, </code>ht-&gt;table[index])` , before dereferencing it?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426075739, "post_id": 28983604, "comment_id": 46220952, "body": "BTW you probably dont want the <code>&amp;</code> in <code>void* keyPtr = &amp;ht-&gt;table[index]-&gt;key;</code> , since it allready is a pointer. (but you did not show us the struct definition."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1426077756, "post_id": 28983604, "comment_id": 46222195, "body": "@GullySquad02 - The supplied code doesn&#39;t match the terminal output. The code only has one call of myCompare while the terminal output has two. In other words - we don&#39;t have the failing part of the code so we can&#39;t help. But for sure it isn&#39;t your the myCompare function causing problems."}, {"owner": {"reputation": 23, "user_id": 3691970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/254ddfd2f194cb441e4fd2f9cc423d56?s=128&d=identicon&r=PG&f=1", "display_name": "GullySquad02", "link": "https://stackoverflow.com/users/3691970/gullysquad02"}, "edited": false, "score": 0, "creation_date": 1426079742, "post_id": 28983604, "comment_id": 46223616, "body": "The issue seems to be coming from how I am trying to de-reference <code>ht-&gt;table[index]-&gt;key</code>."}], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 4612025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c81e5f16429725471b64449ef6899ef?s=128&d=identicon&r=PG&f=1", "display_name": "victor", "link": "https://stackoverflow.com/users/4612025/victor"}, "is_accepted": false, "score": 1, "last_activity_date": 1426069974, "creation_date": 1426069974, "answer_id": 28984197, "question_id": 28983604, "link": "https://stackoverflow.com/questions/28983604/seg-fault-when-passing-strings-through-void-pointers-in-c/28984197#28984197", "title": "Seg Fault when passing strings through void pointers in C", "body": "<p>If you code segfaults, then you probably are trying to operate with the pointers that contain garbage and do not actually point to any data that you own. Try using valgrind.</p>\n\n<ul>\n<li><p>Compile your code without optimization and with debugging symbols included</p>\n\n<pre><code> g++ -O0 -g ./your_program.cpp -o ./your_program\n</code></pre></li>\n<li><p>Use <a href=\"http://valgrind.org\" rel=\"nofollow\">valgrind</a>'s memory checker</p>\n\n<pre><code> valgrind --leak-check=yes --track-origins=yes ./your_program\n</code></pre></li>\n</ul>\n\n<p>It is likely that valgrind will tell you what exactly is wrong with your code.</p>\n"}], "owner": {"reputation": 23, "user_id": 3691970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/254ddfd2f194cb441e4fd2f9cc423d56?s=128&d=identicon&r=PG&f=1", "display_name": "GullySquad02", "link": "https://stackoverflow.com/users/3691970/gullysquad02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1426079921, "creation_date": 1426068363, "last_edit_date": 1426079921, "question_id": 28983604, "link": "https://stackoverflow.com/questions/28983604/seg-fault-when-passing-strings-through-void-pointers-in-c", "title": "Seg Fault when passing strings through void pointers in C", "body": "<p>I am relatively new to programming, and this is my first term working in C. So it is entirely possible that this could be a really simple mistake, or it is also possible that the explanation of what I did wrong could go over my head.</p>\n\n<p>My program reads in a text file a builds a concordance in a hashmap which tells the user which words are in the text and how many times they occur. However, I continue to segfault (code 11), whenever I use the myCompare function. Here is its code:</p>\n\n<pre><code>int myCompare(void *s1, void *s2)\n{\n    printf(\"\\n\\nStarting myCompare...\");\n    printf(\"\\n*s1: %s\", (char *)s1);\n    printf(\"\\n*s2: %s\", (char *)s2);\n\n    char *key1 = (char *)s1;\n    printf(\"\\n\\nkey1: %s\", key1);\n    char *key2 = (char *)s2;\n    printf(\"\\nkey2: %s\", key2);\n\n    return (strcmp(key1, key2));\n}\n</code></pre>\n\n<p>I added some print statements to it and the function that calls it to give me a better idea of what is passing and exactly where it is segfaulting, but I am not sure why it is happening. Here is the output, if anyone needs more of the code to understand my mistake, just let me know. Thanks guys</p>\n\n<pre><code>struct hashLink {\n    void* key;\n    void* value;\n    struct hashLink * next;\n};\n\nstruct hashMap {\n    hashLink ** table;\n    int tableSize;\n    int count;\n};\n</code></pre>\n\n<p>...</p>\n\n<pre><code>void removeKey (struct hashMap * ht, void* k, comparator keyCompare, hashFuncPtr hashFunc)\n{\n\nstruct hashLink *previousLink;\nstruct hashLink *currentLink;\nint index = 0;\n\nprintf(\"\\n\\nVariables Declared\");\nprintf(\"\\nPre-hash index: %d\", index);\nindex = ((*hashFunc)(k) % ht-&gt;tableSize);\nvoid* keyPtr = &amp;ht-&gt;table[index]-&gt;key;\n\nprintf(\"\\nPost-hash index: %d\", index);\nprintf(\"\\nkeyPtr value: %p\", keyPtr);\nprintf(\"\\nk value: %p\", k);\n\nint testCompare = (*keyCompare)(k, keyPtr);\nprintf(\"\\nkeyCompare: %d\", testCompare);\n\nif ((*keyCompare)(k, keyPtr) ==)){\n\n... } \n</code></pre>\n\n<p>Terminal Output:</p>\n\n<pre><code>Starting hash2...\nPassed key: and\nvalue of r: 617\n\nPost-hash index: 7\nkeyPtr value: 0x10e65dcd8\nk value: 0x10e65df24\n\nStarting myCompare...\n*s1: and\n*s2:\n\nkey1: and\nkey2:  \nkeyCompare: 65\n\nStarting myCompare...\n*s1:  \n*s2: and\n\nkey1:  \nSegmentation fault: 11\nlogout\n</code></pre>\n"}, {"tags": ["c", "vb.net", "vector", "command-line"], "comments": [{"owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 0, "creation_date": 1426068517, "post_id": 28983330, "comment_id": 46216271, "body": "What does your program do? What does the VB code do?"}, {"owner": {"reputation": 1326, "user_id": 2053269, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tAccL.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2053269/anshul"}, "edited": false, "score": 0, "creation_date": 1426068977, "post_id": 28983330, "comment_id": 46216568, "body": "in command prompt are you executing the binary at correct path???"}, {"owner": {"reputation": 8015, "user_id": 2278086, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/10043ce18f5e3f4231fc9a45c5515752?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/2278086/mark"}, "edited": false, "score": 0, "creation_date": 1426081961, "post_id": 28983330, "comment_id": 46225246, "body": "How are you starting the C program from your VB.NET code (and the command prompt, since that also fails)?  Are you setting the working directory appropriately?"}, {"owner": {"reputation": 41, "user_id": 4657768, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/763f3d607ec726ae1bf0c9b9c45cf757?s=128&d=identicon&r=PG&f=1", "display_name": "Jiban", "link": "https://stackoverflow.com/users/4657768/jiban"}, "edited": false, "score": 0, "creation_date": 1426149234, "post_id": 28983330, "comment_id": 46256316, "body": "The C program is an OCR. It is created by others and they will not give me the source code."}, {"owner": {"reputation": 41, "user_id": 4657768, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/763f3d607ec726ae1bf0c9b9c45cf757?s=128&d=identicon&r=PG&f=1", "display_name": "Jiban", "link": "https://stackoverflow.com/users/4657768/jiban"}, "edited": false, "score": 0, "creation_date": 1426149721, "post_id": 28983330, "comment_id": 46256532, "body": "Presently it proceses all the images in a particullar folder and output the text files in another folder. But it can not process more than 12 image files, it just crashes. I am using VB for copying one image to that folder, then process it, then exit the programm. Then copy another and loop through this.  LOOP 1. Browse a folder where the images reside. 2. copy one image into the processable folder. 3. Run the exe from shell () and extract the text. 4. close the exe 5. empty the processable folder. LOOP END"}, {"owner": {"reputation": 41, "user_id": 4657768, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/763f3d607ec726ae1bf0c9b9c45cf757?s=128&d=identicon&r=PG&f=1", "display_name": "Jiban", "link": "https://stackoverflow.com/users/4657768/jiban"}, "edited": false, "score": 0, "creation_date": 1426150704, "post_id": 28983330, "comment_id": 46257042, "body": "For starting command line, just using C:\\ocr.exe or start C:\\ocr.exe"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4657768, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/763f3d607ec726ae1bf0c9b9c45cf757?s=128&d=identicon&r=PG&f=1", "display_name": "Jiban", "link": "https://stackoverflow.com/users/4657768/jiban"}, "is_accepted": false, "score": 0, "last_activity_date": 1426149771, "creation_date": 1426149771, "answer_id": 29005174, "question_id": 28983330, "link": "https://stackoverflow.com/questions/28983330/cannot-open-the-reference-vector-file-what-is-it/29005174#29005174", "title": "Cannot open the reference vector file. What is it?", "body": "<p>The C program is an OCR. It is created by others and they will not give me the source code. Presently it proceses all the images in a particullar folder and output the text files in another folder. But it can not process more than 12 image files, it just crashes. I am using VB for copying one image to that folder, then process it, then exit the programm. Then copy another and loop through this.</p>\n\n<ol>\n<li><p>Browse a folder where the images reside.</p></li>\n<li><p>copy one image into the processable folder.</p></li>\n<li><p>Run the exe from shell () and extract the text.</p></li>\n<li><p>close the exe</p></li>\n<li><p>empty the processable folder.\nLOOP it</p></li>\n</ol>\n"}], "owner": {"reputation": 41, "user_id": 4657768, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/763f3d607ec726ae1bf0c9b9c45cf757?s=128&d=identicon&r=PG&f=1", "display_name": "Jiban", "link": "https://stackoverflow.com/users/4657768/jiban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426149771, "creation_date": 1426067650, "question_id": 28983330, "link": "https://stackoverflow.com/questions/28983330/cannot-open-the-reference-vector-file-what-is-it", "title": "Cannot open the reference vector file. What is it?", "body": "<p>I am trying to execute a .exe file (created in C), from VB code shell function. The same code can open notepad.exe without any problem. But when I am trying to start my program made in C, it gives a msg \"cannot open the reference vector file.\"</p>\n\n<p>then after pressing any key, it is showing the \"Program has encountered a problem and needs to close. We are sorry for the inconvenience.\" error report. Then it closes.</p>\n\n<p>Searching the term \"cannot open the reference vector file\" gives no result. Kindly help me.</p>\n\n<p>Note: \"cannot open the reference vector file\" error is being given in command prompt. Not from VB. Even when I start that exe from command line, same thing happpens. But by double click, the file runs perfect.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1426109182, "post_id": 28983215, "comment_id": 46243506, "body": "how about: Curiously Recurring Void Pointer"}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 3, "creation_date": 1426113611, "post_id": 28983215, "comment_id": 46245394, "body": "@ddriver this question is a poor fit for Programmers - it would be quickly voted down and closed over there, see <a href=\"http://meta.programmers.stackexchange.com/questions/6582/on-the-troubles-of-naming-and-terminology\" title=\"on the troubles of naming and terminology\">meta.programmers.stackexchange.com/questions/6582/&hellip;</a> Recommended reading: <b><a href=\"http://meta.programmers.stackexchange.com/q/7182/31260\">What goes on Programmers.SE? A guide for Stack Overflow</a></b>"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "edited": false, "score": 0, "creation_date": 1426117984, "post_id": 28983215, "comment_id": 46247055, "body": "@gnat - according to the <code>So what is in scope here?</code> point it is a perfect fit. At least far better than SO."}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1426118863, "post_id": 28983215, "comment_id": 46247295, "body": "@ddriver referencing <a href=\"http://stackoverflow.com/help/on-topic\">stack overflow&#39;s guide to on topic content</a>, my questions is: &quot;a specific programming problem&quot;, and also &quot;a practical, answerable problem that is unique to software development&quot;, so it meets two criteria for being relevant to S.O., and doesn&#39;t seem to meet any of the reasons for being off topic."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1426118976, "post_id": 28983215, "comment_id": 46247342, "body": "Problem with naming things is not a problem with programming. You can use that paradigm without having a name for it."}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1426120230, "post_id": 28983215, "comment_id": 46247681, "body": "@ddriver Okay \u2013 I&#39;m cutting my reply as it got unpleasant, and that&#39;s out of line as I expect you have good reasons for your suggestion. If you think the question is out of place, then please vote to close it. I plan to leave it here as I think it&#39;s highly relevant to programming. While it might fit in other S.E.&#39;s, I don&#39;t think the profusion of S.E.s is particularly helpful, at least in part because of increasing discussions like this one. I tend to feel it&#39;s better to put stuff in the biggest place it fits and use search, rather than push it down to the most specific matching location."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1426120504, "post_id": 28983215, "comment_id": 46247751, "body": "@Benjohn - as you can see, I did not vote to close it, merely suggested a more appropriate place to put it. It is a question about the &quot;lingo&quot; not about programming per se. More suited for a talk between programmers, not a question about programming. Besides, what do you aim to accomplish by that question? Start a new thing? Or just get a bunch of random suggestions which will eventually sink into oblivion? I hope you do realize until some STANDARD says what it is, a self-referencing pointer will not really have a name of its own, besides a self-referencing pointer..."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1426120887, "post_id": 28983215, "comment_id": 46247833, "body": "What I mean is it is not something you can ask and get a definite answer of, because such doesn&#39;t seem to exist. That IMO is against the concept of SO. Until it is ratified by some committee, it is more of a philosophical matter, merely related to programming."}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1426121011, "post_id": 28983215, "comment_id": 46247859, "body": "@ddriver I&#39;m hoping that there <i>is</i> a standard name and I am slightly surprised if there isn&#39;t one (I&#39;m also surprised you explicitly know that there isn&#39;t one ;-). Otherwise, I&#39;m hoping for some good suggestions. If you are suggesting better answers might be found at another SE, that is a helpful thought, thank you."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1426121365, "post_id": 28983215, "comment_id": 46247946, "body": "@Benjohn - I merely suggest there isn&#39;t one, because if there was one, it would be spewed out not a few minutes after you posted that question, now 15 hours old. It is not like you registered yesterday, you know how the routine goes, a bunch of quotes copy/pasted from whatever standard. Does it even qualify to have a dedicated name, besides a value identical to the memory address it occupies? It is not even a self referencing pointer, since it is a void * not a &quot;pointer type pointer&quot;."}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1426121889, "post_id": 28983215, "comment_id": 46248096, "body": "@ddriver I don&#39;t think we&#39;re going to persuade each other. Good night."}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1430062900, "post_id": 28983215, "comment_id": 47883555, "body": "@ddriver So, the asker is expected to know whether there is a standard term for this particular paradigm in order to know which site to ask the question on?  If there is a standard term, then the question is a fit for SO and if not, the question is a fit for Programmers?  This is a bit of a catch-22, don&#39;t you think?  This question is not asking for a discussion on what to call this paradigm--it&#39;s asking if there <i>is</i> a name for it, and if so, what is that name?  To me, this seems a perfect fit for SO.  If you don&#39;t agree, you could leave a better explanation as to why it&#39;s not a fit for SO?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1430063793, "post_id": 28983215, "comment_id": 47883900, "body": "@nhgrif - SO is about programming problems and related questions. Judging from the number of answers and their reception, it does look like it is not a particularly good fit for SO."}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1430063929, "post_id": 28983215, "comment_id": 47883955, "body": "@ddriver What do the answers have anything to do with whether or not a question is on-topic?  How can any asker know what kind of answers to expect?  It seems like the <i>right</i> answer to this question is exactly what you&#39;ve been saying in the comments: <i>there isn&#39;t a standard name for this idiom</i>.  (I&#39;m not a C expert and can&#39;t speak to whether or not there is a name for this idiom, but you seem to be suggesting that&#39;s the answer to this question.)"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1430064873, "post_id": 28983215, "comment_id": 47884348, "body": "@nhgrif - good on-topic questions get good, well received and accepted answers. This question will be much better fit in some discussion board, IMO generally SO is a place for practical problems, not for hypothetical ones. Furthermore, this by definition is actually neither an idiom, nor a design pattern nor anything, it is just a void pointer with a value equal to its address in memory, it deserves its own name as much as a void pointer with value equal to the next address in memory. Such insignificant and rarely occurring constructs do not merit expansion of terminology."}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 1, "creation_date": 1430065087, "post_id": 28983215, "comment_id": 47884438, "body": "Good on-topic questions don&#39;t always get good well-received answers.  Good well-received answers don&#39;t always exist."}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "edited": false, "score": 0, "creation_date": 1430135969, "post_id": 28983215, "comment_id": 47912928, "body": "&quot;it is just a void pointer with a value equal to its address in memory, it deserves its own name as much as a void pointer with value equal to the next address in memory&quot;, similar to say, a thunk, or a singleton, or a flag, or a \u2026? Naming, as has been pointed out, is important. It lets us see when we&#39;re using things again and again. This instance might be trivial for you, splendid \u2013 it&#39;s relevant to me though, and at least a few others, it would appear."}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1430137511, "post_id": 28983215, "comment_id": 47913972, "body": "@ddriver by saying &quot;it is just a void pointer with a value equal to its address in memory&quot; you&#39;re missing the point of <i>what it does</i> (which I point out in the question) and seem to only be interested in <i>what it is</i>, so you&#39;re missing the point of the question asked. If I asked &quot;what do you call a number you keep adding stuff to&quot;, and you didn&#39;t know it was called an accumulator, would you say, &quot;it&#39;s just a number you add stuff to, it&#39;s not a very good question&quot;?"}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1430138921, "post_id": 28983215, "comment_id": 47915043, "body": "@ddriver &quot;Problem with naming things is not a problem with programming.&quot; \u2013 can I suggest you Google <a href=\"https://www.google.co.uk/search?q=only+two+hard+problems+in+computer+science\" rel=\"nofollow noreferrer\">&quot;there are only two hard problems in computer science&quot;</a>? The quote is only partly meant in jest."}], "answers": [{"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 1, "last_activity_date": 1430070240, "last_edit_date": 1430070240, "creation_date": 1426119857, "answer_id": 28999899, "question_id": 28983215, "link": "https://stackoverflow.com/questions/28983215/name-of-c-idiom-static-void-thing-thing/28999899#28999899", "title": "Name of c idiom \u2013 `static void *thing = &amp;thing;`", "body": "<p>I would call it a <code>self reference</code> it is not <em>very</em> different from:</p>\n\n<pre><code>struct self {\n   struct self *moi;\n   } me = { &amp;me};\n</code></pre>\n\n<p>This has the additional advantage that you don't have to dereference a <code>void*</code> pointer in order to use it. (eg: <code>assert (me.moi == &amp;me);</code> )</p>\n"}, {"comments": [{"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "edited": false, "score": 0, "creation_date": 1430137774, "post_id": 29879641, "comment_id": 47914172, "body": "Thank you for the suggestion. I&#39;ve gone with <code>DEFINE_HANDLE</code>, because that&#39;s pretty close to what it does, and it&#39;s fairly concise. It was useful (if surprising) to know that there does not seem to be an established name."}], "tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": true, "score": 1, "last_activity_date": 1430062473, "creation_date": 1430062473, "answer_id": 29879641, "question_id": 28983215, "link": "https://stackoverflow.com/questions/28983215/name-of-c-idiom-static-void-thing-thing/29879641#29879641", "title": "Name of c idiom \u2013 `static void *thing = &amp;thing;`", "body": "<p>As was hashed out above there is (very likely) no standard parlance, so you're free to choose whatever you think best.  Perhaps something like <code>UNIQUE_VOID_POINTER</code> or some such.</p>\n"}, {"comments": [{"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "edited": false, "score": 0, "creation_date": 1430136532, "post_id": 29881004, "comment_id": 47913316, "body": "LOL. :-) Thank you for the chuckle and the answer. So, you don&#39;t feel guaranteed unique identity is important (paragraph 2 &amp; 3), or seen in other languages (I suspect it might be \u2013 <code>gensym</code> in Lisp), and you find an API that requires use of unique identity suspect, and this is all just good logic, not your particular taste (p3)? p4 \u2013 @nhgrif covered this well \u2013 I am honestly very surprised that there isn&#39;t an established name for this, so, where do I start when asking?"}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "edited": false, "score": 0, "creation_date": 1430137053, "post_id": 29881004, "comment_id": 47913664, "body": "To be fair, it&#39;s not much like <code>gensym</code>. But anyway \u2013 guarantied unique identities that don&#39;t &quot;do&quot; anything beyond acting as a handle for other things are terrifically useful in many settings. As I said, I am very surprised there isn&#39;t an accepted (language aspecific) name for the concept."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "edited": false, "score": 0, "creation_date": 1430138585, "post_id": 29881004, "comment_id": 47914753, "body": "holy comment bombardment... &quot;you don&#39;t feel guaranteed unique identity is important &quot; - in that particular form it is just me and the rest of the world save for a few as it would seem. I didn&#39;t argue that it is entirely useless, merely pointed out there are other mechanisms for achieving that, including some which have zero runtime overhead. But please, do tell me a few more times how useful <b>you find it</b>. Because I feel like you haven&#39;t stressed that nowhere nearly enough. You should totally take advantage of the situation and name it after you, so your name lives on forever ;)"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "edited": false, "score": 0, "creation_date": 1430138842, "post_id": 29881004, "comment_id": 47914973, "body": "BTW take a note of the other two answers, and how invaluable their employment in picking a name for your macro would be ;) There are many incredibly experience programmers here, with 6 digit rep, who can cite standards by heart, yet somehow your meaningful question is still absent a meaningful answer. My logic is the question is not a good one, but hey, it may just be your question is too good for SO, but either way, too bad or too good, it is obviously not in its rightful place ;)"}, {"owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "edited": false, "score": 0, "creation_date": 1430140619, "post_id": 29881004, "comment_id": 47916353, "body": "I have no wish to describe to you how useful, or not, this idiom is to me or others. At least, not after you dismissed something others find useful might have use. But neither do I need to: <i>you</i> came here to tell <i>me</i> my question wasn&#39;t good. Then reiterated that again and again with further comments, then added an &quot;answer&quot; to continue in that vein. So \u2013 we&#39;re left with: Does S.O. require all questions be a perfect fit? Not yet. Could I have put this question somewhere better? Possibly. Could you have suggested that more politely? I&#39;m hopeful you could."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": false, "score": 0, "last_activity_date": 1430070839, "last_edit_date": 1430070839, "creation_date": 1430069557, "answer_id": 29881004, "question_id": 28983215, "link": "https://stackoverflow.com/questions/28983215/name-of-c-idiom-static-void-thing-thing/29881004#29881004", "title": "Name of c idiom \u2013 `static void *thing = &amp;thing;`", "body": "<blockquote>\n  <p>A programming idiom is a means of expressing a recurring construct in\n  one or more programming languages.</p>\n</blockquote>\n\n<p>Is that a construct, recurring frequently enough to justify being its \"own thing\"? Does it qualify to be an idiom by definition?</p>\n\n<p>Even though the question is tagged as <code>C</code>, it does seem like this is purely an Objective-C thing in a few APIs, and neither the language nor the particular APIs strike as exemplary. It serves the simple purpose of providing a unique arbitrary value, a form of lazy enumeration when you don't really care about the key value. Should that be an idiom?</p>\n\n<p>I think not, and it is not my personal preference but simple logic. It is rare and insignificant, basically it is a value in memory which happens to be equal to its address in memory. It deserves as much having its own name as an integer in an array with value equal to its index in the array does.</p>\n\n<p>Furthermore, not having any standardized name for it, this question automatically turns into a \"primarily opinion based\" one, which is against SO guidelines, on top of not being related to a programming problem in the first place. It is not a \"specific programming problem\", it is not a \"practical, answerable problem that is unique to software development\" as not having its own name is in no way problematic to its use, it is a topic for discussion in a discussion board for programmers. It has a place here on SO as much as a question \"<strong>How should I name my variable?</strong>\" and I don't mean coding conventions, ultimately, that's what the question is about, how to name a macro... and pretty much anything at least vaguely related to its usage intent will beat <code>DECLARE_VOID_THING</code>, like say a <code>UNIQUE_HANDLE</code>, and there is no need for it to be or make it an idiom to solve that \"problem\", and lastly - there is no idiom to name here. </p>\n"}], "owner": {"reputation": 12047, "user_id": 2547229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffcb418e17cac2873d611c2b8d8d891c?s=128&d=identicon&r=PG", "display_name": "Benjohn", "link": "https://stackoverflow.com/users/2547229/benjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 1, "accepted_answer_id": 29879641, "answer_count": 3, "score": 6, "last_activity_date": 1430070839, "creation_date": 1426067349, "last_edit_date": 1426118374, "question_id": 28983215, "link": "https://stackoverflow.com/questions/28983215/name-of-c-idiom-static-void-thing-thing", "title": "Name of c idiom \u2013 `static void *thing = &amp;thing;`", "body": "<p>The code: </p>\n\n<pre><code>static const void *const uniquePtr = &amp;uniquePtr;\n</code></pre>\n\n<p>\u2026will provide a unique <code>void</code> pointer in the compilation unit. It's handy for generating a unique handle or name for APIs that like to take a name as a <code>void*</code> in this way.</p>\n\n<p>Examples of use:</p>\n\n<ul>\n<li><a href=\"http://nshipster.com/associated-objects/\" rel=\"nofollow\"><code>objc_setAssociatedObject</code> and <code>objc_getAssociatedObject</code></a> </li>\n<li><a href=\"http://nshipster.com/key-value-observing/\" rel=\"nofollow\"><code>addObserver:forKeyPath:options:context:</code></a></li>\n</ul>\n\n<p>It'd be sensible to wrap this pattern in a macro to avoid making a mistake with it, and to encapsulate the idea so that it self documents. </p>\n\n<p>But that leads to the question: <strong>is there a name for this idiom</strong> that can be used to name the macro?:</p>\n\n<pre><code>#define DECLARE_VOID_THING(name) static const void *const name = &amp;name\nDECLARE_VOID_THING(aHandle);\nDECLARE_VOID_THING(anotherHandle);\n</code></pre>\n\n<p>Any thoughts?</p>\n"}]